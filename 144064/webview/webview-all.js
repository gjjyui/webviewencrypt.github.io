//>>built
require({cache:{"rc/rc-includes":function(){require("rc/widget/DijitHasDropDownMixin rc/ReliableSystem rc/bacnet/BTLProperties rc/bacnet/Calendar rc/bacnet/RuntimeLog rc/bacnet/RuntimeLogWorksheet rc/bacnet/Schedule rc/bacnet/Trend rc/bacnet/TrendAsRuntimeLog rc/bacnet/TrendMultiple rc/reliable/Alarm rc/reliable/MobileAlarm rc/reliable/AnnualSchedule rc/reliable/AuditTrail rc/reliable/Group rc/reliable/View rc/reliable/RuntimeLog rc/reliable/RuntimeLogWorksheet rc/reliable/Trend rc/reliable/WeeklySchedule rc/StyleSwitcher".split(" "))},
"rc/ReliableSystem":function(){define("dijit/layout/BorderContainer dijit/layout/ContentPane dijit/registry dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/_base/url dojo/_base/window dojo/aspect dojo/cookie dojo/Deferred dojo/dom-attr dojo/dom-construct dojo/dom-class dojo/dom-style dojo/has dojo/hash dojo/i18n!rc/nls/all dojo/i18n!rc/nls/auth dojo/on dojo/query dojo/ready dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/ReliableSystem.html dojo/topic dojox/layout/ExpandoPane require ./_base/Error ./_base/test ./_base/tooltip ./_base/util ./_base/version ./_Widget ./sys/hostinfo ./sys/links ./sys/sysname ./util/audit ./util/encoding/base16 ./util/encoding/base64 ./util/notices ./util/pointObject ./util/widgetPicker ./widget/AlarmNotification ./widget/ErrorMessage ./widget/Toolbar ./widget/AlarmLoader dojo/sniff".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U,W,da,Y,V,X,Z,ca){return g("rc/ReliableSystem",T,{templateString:J,w:null,sn:null,pn:"",css:null,mne:"",contentContainer:null,_timeout:null,_titleConnect:null,_loadConnect:null,_logoutConnect:null,_restartTimerConnect:null,_clearTimeoutConnect:null,_errConnect:null,_errorMessage:null,_progressWatch:null,_commConnect:null,_commErrorConnect:null,_commErrors:0,_maxCommErrors:2,_focusTimer:null,_blurWatch:null,
_blurred:!1,_loaderAnimation:null,_loading:!1,_id:null,_pendingHash:"",_discardChanges:!1,_tooltipIds:null,_pconnects:null,_hashQ:null,_alarmNotification:null,constructor:function(){this._supportingWidgets=[];this._treeStore=new F(new D({data:[{id:"root",name:"root",type:"root",widget:null,children:[]}],getChildren:function(a){var b=[];a.children.forEach(n.hitch(this,function(a){b.push(this.get(a))}));return b}}));this._treeModel=new h({store:this._treeStore,query:{id:"root"},mayHaveChildren:function(a){return a.hasOwnProperty("children")}})},
redirectWithSystem:function(){},postCreate:function(){this._hashQ=[];this._tooltipIds=[];this._pconnects=[];M.isLive()&&rc.activity.startUp();this.inherited(arguments);rc.session.validate().then(n.hitch(this,this._sessionValidated),n.hitch(this,function(a){rc.session.setRedirect(window.location.toString());rc.session.resetWithSession(a)||(this._clearPageLoader(),a=this.safeError(a,{name:v.errorPageLoad,message:A[a.status]||v.unexpected}),u.place(this._buildErrorMessage(a),this.containerNode))}));
window.onbeforeunload=n.hitch(this,this.onbeforeunload);this.onCreate()},_getTreeNodeIconClass:function(a,b){try{var f;if(a===this._treeModel.root)f="mpwRoot";else if(f=a.widget){Y.getByMnemonic(f);var k=Y.typeAbbr.match(/(ALARM|AS|GRP|RT|TL|WS|CAL|SCHED|AUDIT|MTL|STL|BRT|VIEW)/gi);f=k.length?"mpw"+k[0].toUpperCase():"mpwDEFAULT";f="dijitLeaf "+f}else f=b?"dijitFolderOpened":"dijitFolderClosed";return f}catch(ja){return"mpwDEFAULT"}},_sessionValidated:function(){this.redirectWithSystem()||R.loadOnce().then(n.hitch(this,
this._hostInfoLoaded),n.hitch(this,function(a){this._clearPageLoader();a=this.safeError(a,{name:v.errorPageLoad,message:A[a.status]||v.unexpected});u.place(this._buildErrorMessage(a),this.containerNode)}))},_hostInfoLoaded:function(){G.subscribe("pagetitle",n.hitch(this,this._repairTitle));this.container=new r({id:"mpw",gutters:x("touch"),persist:!0,style:{width:"100%",height:"100%"},liveSplitters:!1},u.create("div",{},this.containerNode,"first"));this._attachPoints.push("container");this._attachPoints.push("contentContainer");
this.own(t.after(rc.styleSwitcher,"onStyle",n.hitch(this,function(){this.container.resize()})));var a=t.after(this.container,"layout",n.hitch(O,"update"));this._pconnects.push(a);this._loadHeader();this.content=new p({id:"rcSystemContent",region:"center"});this._attachPoints.push("content");this.container.addChild(this.content);this.container.startup();this.subscribe("/dojo/hashchange",n.hitch(this,this._onHashChange));this._id=this._getPageId();this.own(C(window,"focus",n.hitch(this,this._onWindowFocus)),
C(window,"blur",n.hitch(this,this._onWindowBlur)));this.preloader=this._createLoader();this._attachPoints.push("preloader");rc.session.hasRole(rc.session.roles.showTree)&&this._loadTree().always(n.hitch(this,this._selectTreeNode));this._loadAlarmLoader();var b=null,a=n.hitch(this,function(a){null!==b&&(b.remove(),b=null);this._onWindowFocus(a);a=null!=this.w&&null!=this.w.mnemonic&&"alarm"===this.w.mnemonic.toLowerCase();this._loadAlarmNotification(!a)}),f=n.hitch(this,function(a){this.showError(this.safeError(a,
{name:v.errorPageLoad,message:v.unexpected}))});this._loadContent().then(n.hitch(this,a),n.hitch(this,f));b=x("touch")?C(this.content.containerNode,"touchstart",n.hitch(this,a)):C(this,"mouseOver",n.hitch(this,a))},onCreate:function(){this.emit("create",null)},_getPageId:function(){var a=k("i"),a="undefined"===typeof a?1:parseInt(a,10)+1;k("i",a);return a},_loadHeader:function(){this.header=new p({id:"rcSystemHeader",region:"top"});this._attachPoints.push("header");var a=O.add(this.header.containerNode,
v.ttBanner,{margin:"1em 0 0 7em"});this._tooltipIds.push(a);this.container.addChild(this.header);var b=u.create("div",{className:"rclogo"},this.header.containerNode);this._logo=u.create("img",{className:"rclogoImg",src:K.toUrl("rc")+"/themes/rcblack/images/reliable-controls-logo.png"},b);this._attachPoints.push("_logo");this._rightContainer=u.create("div",{className:"rightheader"},this.header.containerNode);this._attachPoints.push("_rightContainer");this._centerContainer=u.create("div",{className:"centerheader"},
this.header.containerNode);this._attachPoints.push("_centerContainer");this._pageTitleAnchor=u.create("a",{href:P.mnemonicToUri(""),onclick:n.hitch(this,function(){window.location.hash.length||this._onHashChange(P.mnemonicToUri(""))})},u.create("h1",{},this._centerContainer));this._loadSysName().always(n.hitch(this,function(a){null!==a&&(this._pageTitleAnchor.title=v.home+": "+P.unescapeHtml(this.sn),this._setTitle())})).always(n.hitch(this,function(){this._loadLogoImage().then(n.hitch(this,function(a){0!==
a.data[0]&&(w.add(this._logo,"rclogoImgCust"),a=rc.xhr.toSysUrl("/job/"+a.data[0]),f.set(this._logo,"src",a),this._logoText=u.create("div",{className:"rclogoText",innerHTML:v.customLogo},b),this._attachPoints.push("_logoText"))}));this._loadBannerImage().then(n.hitch(this,function(a){0!==a.data[0]?(a=rc.xhr.toSysUrl("/job/"+a.data[0]),z.set(this.header.containerNode,{background:"url("+a+") no-repeat scroll right center transparent"})):this._pageTitleAnchor.innerHTML=this.sn}),n.hitch(this,function(){this._pageTitleAnchor.innerHTML=
this.sn}))}))},_loadLogoImage:function(){var a=new q;this.own(a);rc.xhr.request({type:"cmd",cmdObj:{cmd:3,file:"/job/logoimage.*"},load:n.hitch(this,a.resolve),error:n.hitch(this,a.reject)});return a.promise},_loadBannerImage:function(){var a=new q;this.own(a);rc.xhr.request({type:"cmd",cmdObj:{cmd:3,file:"/job/bannerimage.*"},load:n.hitch(this,a.resolve),error:n.hitch(this,a.reject)});return a.promise},_loadSysName:function(){var a=aa.loadOnce();a.always(n.hitch(this,function(){var a=aa.get();return this.sn=
a}));return a},_setTitle:function(a){var b=a?a:"";this.pn=b;var f=this.sn||"";this._pageTitle=b=P.unescapeHtml(b+(a&&f?" | ":"")+(f?f:""));document.title=b},_repairTitle:function(){this._setTitle(this.pn)},_createLoader:function(){rc.session.markAsNew(!1);this._clearPageLoader();var a=u.create("div",{id:"preloader",className:"preloader"},this.content.containerNode,"first"),b=C(this,"clearLoader",n.hitch(this,function(){b.remove();w.add(this.preloader,"preloader");this.preloader.innerHTML=""}));return a},
_clearPageLoader:function(){try{var a=E("#pageloader")[0];u.destroy(a)}catch(ea){}},_showLoader:function(){this._loading=!0;this._destroyLoaderAnimation();z.set(this.preloader,{opacity:.99,display:"block"})},_clearLoader:function(){this._createLoaderAnimation()},onClearLoader:function(){this.emit("clearLoader",null)},_createLoaderAnimation:function(){this._loaderAnimation=d.fadeOut({node:"preloader",duration:750,onEnd:n.hitch(this,function(a){z.set(a,"display","none");this._loading=!1;this._blurred||
null===this._alarmNotification||this._alarmNotification.play();this.onClearLoader()})}).play()},_destroyLoaderAnimation:function(){null!==this._loaderAnimation&&(this._loaderAnimation.stop(),this._loaderAnimation.destroy(),this._loaderAnimation=null)},_loadContent:function(){this._showLoader();var a=new q;this.own(a);var b=n.hitch(this,function(b){var f=null;if(b)if("about"===b.toLowerCase())this._loadAbout(),a.resolve();else try{this.mne=b,V.getPointForMnemonic(b).then(n.hitch(this,function(b){var k=
n.clone(b);f=V.getWidgetFor(k);f.then(n.hitch(this,function(b){try{K([b.module],n.hitch(this,function(b){B(n.hitch(this,function(){this.contentContainer=u.create("div",{style:{width:"100%",height:"100%"}},this.content.containerNode,"last");this._resetTimer(30);this.w=new b(k.rawObject,this.contentContainer,"first");this._connectLoadEvents(this.w);this._restartTimerConnect=C(this.w,"restartTimer",n.hitch(this,this._resetTimer));this.own(this._restartTimerConnect);this._clearTimeoutConnect=C(this.w,
"clearTimeout",n.hitch(this,function(){this._timeout&&clearTimeout(this._timeout)}));this.own(this._clearTimeoutConnect);a.resolve()}))}))}catch(ma){console.error(this.declaredClass+" - loadContent(): Error failed to load the content or content dependencies",ma,ma.message),a.reject(ma)}}))}),n.hitch(this,function(f){this.showError(this.safeError(f,{name:H.substitute(v.xNotFound,[v.content]),message:H.substitute(v.unsupportedX,[b]),suggestion:v.unsupportedFix,renderHtml:!1}));a.reject(f)}))}catch(ga){this.showError(this.safeError(ga,
{name:H.substitute(v.xNotFound,[v.content]),message:H.substitute(v.unsupportedX,[b]),suggestion:v.unsupportedFix,renderHtml:!1})),a.reject(ga)}else this._loadWelcome(),a.resolve()}),f=new q;this.own(f);f.resolve(!0);var k=y();k?(M.mode<M.PROXY_LIVE&&(k=U.toCharString(W.decode(k))),f.then(n.hitch(this,b,k))):f.then(n.hitch(this,b,rc.session.getAttribute("GroupRedirect")));return a.promise},_clearContent:function(){this._clearLoadEvents();try{da.widget.clear()}catch(ha){}null!==this._titleConnect&&
(this._titleConnect.remove(),this._titleConnect=null);this._setTitle("");this._destroyToolbar();if(this.w){this._removeWidgetConnects();try{"destroyRecursive"in this.w?this.w.destroyRecursive():this.w.destroy()}catch(ha){}this.w=null}if(this._widgetContainer){try{this._widgetContainer.destroyRecursive()}catch(ha){}this._widgetContainer=null}if(this.contentContainer){try{u.destroy(this.contentContainer)}catch(ha){}this.contentContainer=null}E(".dijitDialog, .dijitPopup").forEach(n.hitch(this,function(a){try{if(this._shouldDestroyPopupNode(a)){var b=
m.byNode(a);b&&b.destroy&&b.destroy();u.destroy(a);m.remove(a.id)}}catch(fa){}}))},_shouldDestroyPopupNode:function(a){return!(O.showing&&w.contains(a,"dijitTooltipDialogPopup"))},_setCss:function(b){var f=new a(document.baseURI,b);if(this.css){if(this.css.href===f.toString())return;u.destroy(this.css);this.css=null}this.css=u.create("link",{type:"text/css",rel:"stylesheet",href:b,media:"screen,projection",disabled:!1},document.getElementsByTagName("head")[0]);this._attachPoints.push("css")},_loadAlarmLoader:function(){rc.session.hasRole(rc.session.roles.alarmDisable)&&
!rc.session.hasRole(rc.session.roles.viewAlarms)||K(["./widget/AlarmLoader"],function(a){rc.AlarmLoader=a})},_loadAlarmNotification:function(a){this._alarmNotification||rc.session.hasRole(rc.session.roles.alarmDisable)||(this._alarmNotification=new X({_fetchNow:a},u.create("div",{},this.content.containerNode,"last")),this._attachPoints.push("_alarmNotification"),t.after(this,"onPageBlur",n.hitch(this,function(){G.publish("alarmloader",!1)})),t.after(this,"onPageFocus",n.hitch(this,function(){G.publish("alarmloader",
!0)})),this.onPageFocus())},_onWindowFocus:function(a){k("f",this._id);this._blurred=!1;this._focusTimer||(this._focusTimer=setTimeout(n.hitch(this,function(){this._focusTimer=null;if(!this._loading)this.onPageFocus()}),200))},onPageFocus:function(){this.emit("pageFocus",null)},_onWindowBlur:function(a){this._blurred=!0;this._focusTimer&&(clearTimeout(this._focusTimer),this._focusTimer=null);this._blurWatch||(this._blurWatch=setInterval(n.hitch(this,function(){var a=parseInt(k("f"),10);this._blurred?
a!=this._id&&(clearInterval(this._blurWatch),this._blurWatch=null,this.onPageBlur()):(clearInterval(this._blurWatch),this._blurWatch=null)}),2E3))},onPageBlur:function(){this.emit("pageBlur",null)},_loadTree:function(){var a=new q;S.loadOnce().then(n.hitch(this,function(b){try{if(b.items&&b.items.length){this.nav=new I({id:"rcSystemNav",region:"leading",splitter:!0,style:{width:"12em"}});this.own(C(this.nav.titleWrapper,"click",n.hitch(this,function(a){a.originalTarget==this.nav.titleWrapper&&this.nav.toggle()})));
this._attachPoints.push("nav");this.container.addChild(this.nav);var f=O.add(E("#rcSystemNav_splitter")[0],v.ttSliderLeft);this._tooltipIds.push(f);this._populateTreeStore(b.items);this.navTree=new l({model:this._treeModel,showRoot:!1,openOnClick:!0,openOnDblClick:!0,getTooltip:n.hitch(this,function(a){return a.widget?(a.widget=Y.fixTLMnemonic(a.widget),a.name+" ("+a.widget+")"):""}),getIconClass:n.hitch(this,this._getTreeNodeIconClass)},u.create("div",{},this.nav.containerNode));this._attachPoints.push("navTree");
this.own(C(this.navTree,"click",n.hitch(this,this._onTreeClick)))}}catch(ba){}a.resolve(b);return b}));return a.promise},_loadContentContainer:function(){this.contentContainer=this._createDefaultContainer();this._widgetContainer=new r({style:{width:"100%",height:"100%"}},this.contentContainer);var a=this._createToolbar();this._widgetContainer.addChild(a);a=new p({region:"center"});this._widgetContainer.addChild(a);return a},_loadWelcome:function(){try{var a=this._loadContentContainer();u.create("p",
{className:"solo",innerHTML:this._getWelcomeString()},a.containerNode);u.place(this.contentContainer,this.content.containerNode,"first");this._widgetContainer.startup();this._widgetContainer.resize()}catch(ea){}this._clearLoader();this.onLoad()},_getWelcomeString:function(){var a=v.welcomePart1+" \x3cstrong\x3e",a=a+(this.sn?P.escapeHtml(this.sn):window.location.hostname);return a+="\x3c/strong\x3e"+v.welcomePart2},_loadAbout:function(){var a=this._loadContentContainer();this._setTitle(v.about);var b=
u.create("div",{className:"rcAbout"}),f=u.create("h2",{innerHTML:v.mpw},b),k=u.create("ul",{className:"rcVersion"},b);u.create("li",{innerHTML:v.softwareVersion+": \x3cspan class\x3d'nobreak'\x3e"+Q.toStringAll()+"\x3c/span\x3e"},k);u.create("h3",{innerHTML:v.aboutTitle},b);var q=u.create("p",{innerHTML:H.substitute(v.aboutText,[v.mpw])},b),d=(new Date).getFullYear();u.create("p",{innerHTML:H.substitute(v.copyright2010X,[2010<d?"-"+d:""])},b);d=(M.mode==M.NONE?"":K.toUrl("rc/views/"))+"licenses.html";
u.create("a",{href:d,innerHTML:v.thirdPartyLicenses},b,"last");u.place(b,a.containerNode);u.place(this.contentContainer,this.content.containerNode,"first");this._widgetContainer.startup();this._widgetContainer.resize();u.create("li",{innerHTML:v.firmwareVersion+": \x3cspan class\x3d'nobreak'\x3e"+R.firmwareVersion+"\x3c/span\x3e"},k);try{var c=R.modelName,a="";c&&0===c.indexOf("MACH-ProWeb")&&(-1<c.indexOf("Sys")?(c=v.mpws,a="mpwSys"):-1<c.indexOf("Com")&&(c=v.mpwc,a="mpwCom"),f.innerHTML=c,q.innerHTML=
H.substitute(v.aboutText,[c]),w.add(b,a))}catch(ka){}this._clearLoader();this.onLoad()},_populateTreeStore:function(a){var b=[],f=[],k={};a.forEach(n.hitch(this,function(a){k={id:a.id,name:a.name};a.hasOwnProperty("type")&&(k.type=a.type,"tree"===a.type&&b.push(a.id));a.hasOwnProperty("widget")&&(k.widget=a.widget);a.hasOwnProperty("children")&&(f=[],a.children.forEach(function(a){f.push(a._reference)}),k.children=f);this._treeStore.put(n.clone(k))}));a=this._treeStore.get("root");a.children=b;this._treeStore.put(a)},
showError:function(a){try{try{this._clearContent(),this._setTitle((this.mne+" - "||"")+v.failedToLoad)}catch(ba){throw ba;}try{var f=this._loadContentContainer();a=this.safeError(a);u.place(this._buildErrorMessage(a),f.containerNode);u.place(this.contentContainer,this.content.containerNode,"first");this._widgetContainer.startup();this._widgetContainer.resize()}catch(ba){throw ba;}}catch(ba){var f=u.create("div",{className:"fullsize overlay"},b.body()),k=v.unexpectedError;this.safeError(a).name&&0<
this.safeError(a).name.length&&(k=this.safeError(a).name);a=new L({name:k,message:v.doubleFail+"\x3cem\x3e"+this.safeError(a).message+"\x3c/em\x3e",suggestion:"Access forbidden"===k?null:H.substitute(v.reloadX,[window.location.href]),renderHtml:!0});u.place(this._buildErrorMessage(a),f)}this._clearLoader();this._loadNext()},_buildErrorMessage:function(a){null===this._errorMessage?(this._errorMessage=new Z({renderHtml:!!a.renderHtml,errorTitle:a.name,errorMessage:a.message,suggestion:a.suggestion}),
this.own(t.after(this._errorMessage,"destroy",n.hitch(this,function(){this._errorMessage=null})))):this._errorMessage.set({renderHtml:!!a.renderHtml,errorTitle:a.name,errorMessage:a.message,suggestion:a.suggestion});return this._errorMessage.domNode},_createDefaultContainer:function(){return u.create("div",{className:"mpwDefaultContent",style:{width:"100%",height:"100%"}})},_createToolbar:function(){this._tb=new ca({region:"top",buttons:{}});this._removeWidgetConnects();this._logoutConnect=C(this._tb,
"logout",n.hitch(this,this._logout));this.own(this._logoutConnect);return this._tb},_destroyToolbar:function(){this._tb&&(this._tb.destroyRecursive(),this._tb=null)},_resetTimer:function(a){this._timeout&&clearTimeout(this._timeout);this._timeout=setTimeout(n.hitch(this,function(){this._clearLoadEvents();this.showError(new L({name:v.unexpectedError,message:v.appTimeout,suggestion:H.substitute(v.reloadX,[window.location.toString()]),renderHtml:!0}))}),1E3*a);0===a&&this._clearLoadEvents()},_connectLoadEvents:function(a){this._titleConnect=
C(a,"setTitle",n.hitch(this,this._setTitle));this.own(this._titleConnect);this._progressWatch=G.subscribe("progress",n.hitch(this,function(){this._resetTimer(30)}));this._errConnect=C(a,"initError",n.hitch(this,function(a){this._clearLoadEvents();this.showError(a)}));this._loadConnect=t.after(a,a.onInitSuccess?"onInitSuccess":a._endUpdate?"_endUpdate":"_render",n.hitch(this,function(){this._clearLoadEvents();this._clearLoader();O.showing&&O.show();a._toolbar&&a._toolbar.getButton("Logout")&&(this._removeWidgetConnects(),
this._logoutConnect=C(a._toolbar,"logout",n.hitch(this,this._onLogout)),this.own(this._logoutConnect));this.onLoad()}));this._commErrors=0;this._commConnect=C(rc.activity,"response",n.hitch(this,function(){this._commErrors=0}));this._commErrorConnect=C(rc.activity,"noResponse",n.hitch(this,function(){++this._commErrors>=this._maxCommErrors&&(this._clearLoadEvents(),this.showError(new L({name:v.communicationError,message:v.commError,suggestion:H.substitute(v.reloadX,[window.location.toString()]),renderHtml:!0})))}))},
_logout:function(){rc.session.logout()},_clearLoadEvents:function(){this._timeout&&clearTimeout(this._timeout);this._progressWatch&&(this._progressWatch.remove(),this._progressWatch=null);null!==this._loadConnect&&(this._loadConnect.remove(),this._loadConnect=null);null!==this._errConnect&&(this._errConnect.remove(),this._errConnect=null);null!==this._commConnect&&(this._commConnect.remove(),this._commConnect=null);null!==this._commErrorConnect&&(this._commErrorConnect.remove(),this._commErrorConnect=
null)},_onTreeClick:function(a){this._discardChanges=!1;if(this._confirm()&&(this._discardChanges=!0,a.widget)){a=P.mnemonicToUri(a.widget);var b=window.location.hash;window.location=a;b===window.location.hash&&this._onHashChange(a)}},_onLogout:function(){this._discardChanges=!1;this._confirm()&&(this._discardChanges=!0,this._logout())},_confirm:function(){return this.w&&this.w.isDirty&&this.w.isDirty()&&rc.session.getID()&&!this._discardChanges&&!confirm(v.unsavedWarning+" "+v.discardChanges)?!1:
!0},_onHashChange:function(a){try{this._confirm()&&(this.w&&(this._removeWidgetConnects(),this.w.destroyRecursive()),this._discardChanges=!1,0<this._hashQ.length&&(this._hashQ.shift(),da.widget.clear(),this._clearLoadEvents()),this._hashQ.push(a),this._loading=!0,this._showLoader(),this._clearContent(),rc.session.validate().then(n.hitch(this,function(){try{this._loadContent(),this._selectTreeNode()}catch(ea){this.showError(ea)}}),n.hitch(this,function(a){rc.session.resetWithSession(a)||(a=this.safeError(a,
{name:v.errorPageLoad,message:A[a.status]||v.unexpected}),this.showError(a))})))}catch(ea){this.showError(ea)}},onHashChange:function(a){this.emit("hashChange",a)},onLoad:function(){this.emit("load",null);this._loadNext()},_loadNext:function(){this._hashQ.shift();if(this._hashQ.length){var a=this._hashQ.pop();this._hashQ=[];this._onHashChange(a)}},_removeWidgetConnects:function(){null!==this._logoutConnect&&(this._logoutConnect.remove(),this._logoutConnect=null);null!==this._restartTimerConnect&&
(this._restartTimerConnect.remove(),this._restartTimerConnect=null);null!==this._clearTimeoutConnect&&(this._clearTimeoutConnect.remove(),this._clearTimeoutConnect=null);this._titleConnect&&(this._titleConnect.remove(),this._titleConnect=null)},_selectTreeNode:function(){var a="",b=E("#rcSystemNav")[0],f=E(".dijitTreeRowSelected",b);c.forEach(f,function(a){w.remove(a,"dijitTreeRowSelected")});window.location.hash&&(a=window.location.pathname+window.location.hash);(a=E("a[href\x3d'"+a+"']",b)[0])&&
w.add(a.parentNode,"dijitTreeRowSelected")},onbeforeunload:function(a){a=a||window.event;var b=v.unsavedWarning;if(this.w&&this.w.isDirty&&this.w.isDirty()&&rc.session.getID())return a&&(a.returnValue=b),b},destroy:function(){c.forEach(this._pconnects,C.remove);this._removeWidgetConnects();this._destroyToolbar();this._destroyLoaderAnimation();rc.AlarmLoader&&rc.AlarmLoader.destroyRecursive();c.forEach(this._tooltipIds,function(a){O.remove(a)},this);this._clearContent();this.inherited(arguments)}})})},
"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){var w=m("dijit.layout._Splitter",[k,q],{live:!0,templateString:'\x3cdiv class\x3d"dijitSplitter" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex\x3d"0" role\x3d"separator"\x3e\x3cdiv class\x3d"dijitSplitterThumb"\x3e\x3c/div\x3e\x3c/div\x3e',
constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=p(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=
this.horizontal?"h":"w",b=c.getMarginBox(this.child.domNode)[a],f=r.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=c.getContentBox(f.domNode)[a]-10;return Math.min(this.child.maxSize,b+a)},_startDrag:function(f){this.cover||(this.cover=h.place("\x3cdiv class\x3ddijitSplitterCover\x3e\x3c/div\x3e",this.child.domNode,"after"));l.add(this.cover,"dijitSplitterCoverActive");this.fake&&h.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),
l.add(this.domNode,"dijitSplitterShadow"),h.place(this.fake,this.domNode,"after"));l.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");this.fake&&l.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var k=this._factor,q=this.horizontal,d=q?"pageY":"pageX",u=f[d],t=this.domNode.style,q=q?"h":"w",w=g.getComputedStyle(this.child.domNode),x=c.getMarginBox(this.child.domNode,w)[q],m=this._computeMaxSize(),z=Math.max(this.child.minSize,
c.getPadBorderExtents(this.child.domNode,w)[q]+10),q=this.region,J="top"==q||"bottom"==q?"top":"left",p=parseInt(t[J],10),I=this._resize,K=n.hitch(this.container,"_layoutChildren",this.child.id),q=this.ownerDocument;this._handlers=this._handlers.concat([a(q,b.move,this._drag=function(a,b){var f=a[d]-u,q=k*f+x,c=Math.max(Math.min(q,m),z);(I||b)&&K(c);t[J]=f+p+k*(c-q)+"px"}),a(q,"dragstart",function(a){a.stopPropagation();a.preventDefault()}),a(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation();
a.preventDefault()}),a(q,b.release,n.hitch(this,"_stopDrag"))]);f.stopPropagation();f.preventDefault()},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;l.toggle(this.domNode,"dijitSplitterHover",a);l.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&l.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&h.destroy(this.fake),l.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),
this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&p(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var b=this.horizontal,f=1;switch(a.keyCode){case b?d.UP_ARROW:d.LEFT_ARROW:f*=-1;case b?d.DOWN_ARROW:d.RIGHT_ARROW:break;default:return}b=c.getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*
f;this.container._layoutChildren(this.child.id,Math.max(Math.min(b,this._computeMaxSize()),this.child.minSize));a.stopPropagation();a.preventDefault()},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),z=m("dijit.layout._Gutter",[k,q],{templateString:'\x3cdiv class\x3d"dijitGutter" role\x3d"presentation"\x3e\x3c/div\x3e',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},
buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});m=m("dijit.layout.BorderContainer",f,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:w,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var b=a.region,f=a.isLeftToRight();"leading"==b&&(b=f?"left":"right");"trailing"==b&&(b=f?"right":"left");b&&
"center"!=b&&(a.splitter||this.gutters)&&!a._splitterWidget&&(f=a.splitter?this._splitterClass:z,n.isString(f)&&(f=n.getObject(f)),f=new f({id:a.id+"_splitter",container:this,child:a,region:b,live:this.liveSplitters}),f.isSplitter=!0,a._splitterWidget=f,b="bottom"==b||b==(this.isLeftToRight()?"right":"left"),h.place(f.domNode,a.domNode,b?"before":"after"),f.startup())},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget);
this.inherited(arguments)},getChildren:function(){return r.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return r.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var f=this.domNode;this.cs=g.getComputedStyle(f);this.pe=c.getPadExtents(f,this.cs);this.pe.r=g.toPixelValue(f,this.cs.paddingRight);this.pe.b=g.toPixelValue(f,this.cs.paddingBottom);g.set(f,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var f=[];r.forEach(this._getOrderedChildren(),function(a){f.push(a);a._splitterWidget&&f.push(a._splitterWidget)});u.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},f,a,b)}},destroyRecursive:function(){r.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});m.ChildWidgetProperties={splitter:!1,
minSize:0,maxSize:Infinity};n.mixin(m.ChildWidgetProperties,f.ChildWidgetProperties);n.extend(t,m.ChildWidgetProperties);m._Splitter=w;m._Gutter=z;return m})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(r,p,m,l,h,c,g,d){p=p("dijit.layout.LayoutContainer",g,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(r.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(d){this.inherited(arguments);d.region&&m.add(d.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var d=r.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);d.sort(function(a,b){for(var d=a.weight,k=b.weight,q=0;q<d.length;q++)if(d[q]!=k[q])return d[q]-k[q];return 0});return r.map(d,function(a){return a.pane})},
layout:function(){d.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(d,a){this.inherited(arguments);this._started&&this.layout()},removeChild:function(d){this.inherited(arguments);this._started&&this.layout();m.remove(d.domNode,this.baseClass+"Pane");l.set(d.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});l.set(d.domNode,/top|bottom/.test(d.region)?"width":"height","auto")}});p.ChildWidgetProperties={region:"",layoutAlign:"",
layoutPriority:0};h.extend(c,p.ChildWidgetProperties);return p})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(r,p,m,l,h,c,g,d,n){return c("dijit.layout._LayoutWidget",[p,m,l],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);g.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);
var a=this.getParent&&this.getParent();a&&a.isLayoutContainer||(this.resize(),this.own(h.on("resize",r.hitch(this,"resize"))))}},resize:function(a,b){var c=this.domNode;a&&d.setMarginBox(c,a);var k=b||{};r.mixin(k,a||{});"h"in k&&"w"in k||(k=r.mixin(d.getMarginBox(c),k));var q=n.getComputedStyle(c),f=d.getMarginExtents(c,q),u=d.getBorderExtents(c,q),k=this._borderBox={w:k.w-(f.w+u.w),h:k.h-(f.h+u.h)},f=d.getPadExtents(c,q);this._contentBox={l:n.toPixelValue(c,q.paddingLeft),t:n.toPixelValue(c,q.paddingTop),
w:k.w-f.w,h:k.h-f.h};this.layout()},layout:function(){},_setupChild:function(a){g.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){g.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O){function P(a){return u.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var Q=l("dijit._TreeNode",[B,D,F,H,J],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);k("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:I,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(b){var f=Math.max(b,0)*this.tree._nodePixelIndent+"px";a.set(this.domNode,
"backgroundPosition",f+" 0px");a.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",f);r.forEach(this.getChildren(),function(a){a.set("indent",b+1)});this._set("indent",b)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,f=b.model;b._v10Compat&&a===f.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(b,f,k){var q="_"+f+"Class";f+="Node";var c=this[q];this[q]=this.tree["get"+k+"Class"](b,this.isExpanded);d.replace(this[f],this[q]||"",c||"");a.set(this[f],this.tree["get"+k+"Style"](b,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;d.toggle(this.domNode,"dijitTreeIsRoot",a);d.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;d.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return P(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");d.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=t.wipeIn({node:this.containerNode,duration:E.defaultDuration}),b=this._expandDeferred=new h(function(){a.stop()});p.after(a,"onEnd",function(){b.resolve(!0)},!0);a.play();return P(b)},collapse:function(){if(this._collapseDeferred)return P(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");d.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=t.wipeOut({node:this.containerNode,duration:E.defaultDuration}),b=this._collapseDeferred=new h(function(){a.stop()});p.after(a,"onEnd",
function(){b.resolve(!0)},!0);a.play();return P(b)},indent:0,setChildItems:function(a){var b=this.tree,f=b.model,k=[],q=b.focusedChild,d=this.getChildren();r.forEach(d,function(a){F.prototype.removeChild.call(this,a)},this);this.defer(function(){r.forEach(d,function(a){if(!a._destroyed&&!a.getParent()){var k=function(a){var q=f.getIdentity(a.item),d=b._itemNodesMap[q];1==d.length?delete b._itemNodesMap[q]:(q=r.indexOf(d,a),-1!=q&&d.splice(q,1));r.forEach(a.getChildren(),k)};b.dndController.removeTreeNode(a);
k(a);if(b.persist){var d=r.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),c;for(c in b._openedNodes)c.substr(0,d.length)==d&&delete b._openedNodes[c];b._saveExpandedNodes()}b.lastFocusedChild&&!g.isDescendant(b.lastFocusedChild.domNode,b.domNode)&&delete b.lastFocusedChild;q&&!g.isDescendant(q.domNode,b.domNode)&&b.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,r.forEach(a,function(a){var q=f.getIdentity(a),d=b._itemNodesMap[q],
c;if(d)for(var u=0;u<d.length;u++)if(d[u]&&!d[u].getParent()){c=d[u];c.set("indent",this.indent+1);break}c||(c=this.tree._createTreeNode({item:a,tree:b,isExpandable:f.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),d?d.push(c):b._itemNodesMap[q]=[c]);this.addChild(c);(this.tree.autoExpand||this.tree._state(c))&&k.push(b._expandNode(c))},this),r.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=c(k);this.tree._startPaint(a);return P(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());r.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");d.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){A.focus(this.focusNode)}});k("dojo-bidi")&&Q.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),r.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this))}});var T=l("dijit.Tree",[B,G,D,J],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:K,persist:!1,autoExpand:!1,dndController:O,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){z.publish(this.id,u.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new h;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(w(this.containerNode,
w.selector(".dijitTreeNode",x.enter),function(b){a._onNodeMouseEnter(C.byNode(this),b)}),w(this.containerNode,w.selector(".dijitTreeNode",x.leave),function(b){a._onNodeMouseLeave(C.byNode(this),b)}),w(this.containerNode,w.selector(".dijitTreeRow",v.press),function(b){a._onNodePress(C.getEnclosingWidget(this),b)}),w(this.containerNode,w.selector(".dijitTreeRow",v),function(b){a._onClick(C.getEnclosingWidget(this),b)}),w(this.containerNode,w.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(C.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(p.after(this.model,"onChange",u.hitch(this,"_onItemChange"),!0),p.after(this.model,"onChildrenChange",u.hitch(this,"_onItemChildrenChange"),!0),p.after(this.model,"onDelete",u.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){u.isString(this.dndController)&&(this.dndController=u.getObject(this.dndController));for(var b={},f=0;f<this.dndParams.length;f++)this[this.dndParams[f]]&&(b[this.dndParams[f]]=this[this.dndParams[f]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=P(this.pendingCommandsPromise);this.onLoadDeferred.then(u.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;q.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=u.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=u.hitch(this,function(a,b,f){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,f)}));this.model=new M(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(u.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(u.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),u.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=u.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(u.hitch(this,function(){var f=
r.map(a,function(a){return!a||u.isString(a)?a:b.model.getIdentity(a)}),k=[];r.forEach(f,function(a){k=k.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",k)}))},_setPathAttr:function(a){return a.length?P(this.set("paths",[a]).then(function(a){return a[0]})):P(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,k){var q=a.shift(),d=r.filter(k,function(a){return a.getIdentity()==q})[0];if(d)return a.length?f._expandNode(d).then(function(){return b(a,
d.getChildren())}):d;throw new T.PathError("Could not expand path at "+q);}var f=this;return P(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return c(r.map(a,function(a){a=r.map(a,function(a){return a&&u.isObject(a)?f.model.getIdentity(a):a});if(a.length)return b(a,[f.rootNode]);throw new T.PathError("Empty path");}))}).then(function(a){f.set("selectedNodes",a);return f.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(f){return b._expandNode(f).then(function(){var b=r.filter(f.getChildren()||[],function(a){return a.isExpandable});return c(r.map(b,a))})}var b=this;return P(a(this.rootNode))},collapseAll:function(){function a(f){var k=r.filter(f.getChildren()||[],function(a){return a.isExpandable}),k=c(r.map(k,a));return!f.isExpanded||f==b.rootNode&&!b.showRoot?k:k.then(function(){return b._collapseNode(f)})}var b=this;return P(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var f=this._getNext(b);f&&f.isTreeNode&&this.focusNode(f)},_onUpArrow:function(a,b){var f=b.getPreviousSibling();if(f)for(b=f;b.isExpandable&&
b.isExpanded&&b.hasChildren();)f=b.getChildren(),b=f[f.length-1];else if(f=b.getParent(),this.showRoot||f!==this.rootNode)b=f;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var f=b.getParent();f&&f.isTreeNode&&(this.showRoot||f!==this.rootNode)&&this.focusNode(f)}},focusLastChild:function(){var a=
this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,
b){return g.isDescendant(a,b.expandoNode)||g.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,f,k){var q=this.isExpandoNode(b.target,a);a.isExpandable&&(f||q)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[k](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,
"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){q.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){q.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","",
"2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,f=a.item,k=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new h,b.getChildren(f,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},
function(b){console.error(k,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(u.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var f=this.getLabel(a),
k=this.getTooltip(a);r.forEach(b,function(b){b.set({item:a,label:f,tooltip:k});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var f=this.model.getIdentity(a);(f=this._itemNodesMap[f])&&r.forEach(f,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(r.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!g.isDescendant(this.lastFocusedChild.domNode,
this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!g.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=m(this.cookieName);a&&r.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var f=r.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");
if(1===arguments.length)return this._openedNodes[f];b?this._openedNodes[f]=!0:delete this._openedNodes[f];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);m(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!u.isString(this.dndController)&&this.dndController.destroy();
this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&n.setMarginBox(this.domNode,a);this._nodePixelIndent=n.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(u.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),
delete this._adjustWidthsTimer);var b=u.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});y(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new Q(a)},
focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});k("dojo-bidi")&&T.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});T.PathError=b("TreePathError");T._TreeNode=Q;return T})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(r,p,m,l){return m("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],
newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(h){l.mixin(this,h);this.connects=[];h=this.store;if(!h.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");h.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([p.after(h,"onNew",l.hitch(this,"onNewItem"),!0),p.after(h,"onDelete",l.hitch(this,"onDeleteItem"),!0),p.after(h,"onSet",l.hitch(this,"onSetItem"),
!0)]))},destroy:function(){for(var h;h=this.connects.pop();)h.remove()},getRoot:function(h,c){this.root?h(this.root):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];h(this.root)}),onError:c})},mayHaveChildren:function(h){return r.some(this.childrenAttrs,function(c){return this.store.hasAttribute(h,c)},this)},getChildren:function(h,c,g){var d=
this.store;if(d.isItemLoaded(h)){for(var n=[],a=0;a<this.childrenAttrs.length;a++)var b=d.getValues(h,this.childrenAttrs[a]),n=n.concat(b);var t=0;this.deferItemLoadingUntilExpand||r.forEach(n,function(a){d.isItemLoaded(a)||t++});0==t?c(n):r.forEach(n,function(a,b){d.isItemLoaded(a)||d.loadItem({item:a,onItem:function(a){n[b]=a;0==--t&&c(n)},onError:g})})}else{var k=l.hitch(this,arguments.callee);d.loadItem({item:h,onItem:function(a){k(a,c,g)},onError:g})}},isItem:function(h){return this.store.isItem(h)},
fetchItemByIdentity:function(h){this.store.fetchItemByIdentity(h)},getIdentity:function(h){return this.store.getIdentity(h)},getLabel:function(h){return this.labelAttr?this.store.getValue(h,this.labelAttr):this.store.getLabel(h)},newItem:function(h,c,g){var d={parent:c,attribute:this.childrenAttrs[0]},n;this.newItemIdAttr&&h[this.newItemIdAttr]?this.fetchItemByIdentity({identity:h[this.newItemIdAttr],scope:this,onItem:function(a){a?this.pasteItem(a,null,c,!0,g):(n=this.store.newItem(h,d))&&void 0!=
g&&this.pasteItem(n,c,c,!1,g)}}):(n=this.store.newItem(h,d))&&void 0!=g&&this.pasteItem(n,c,c,!1,g)},pasteItem:function(h,c,g,d,n){var a=this.store,b=this.childrenAttrs[0];c&&r.forEach(this.childrenAttrs,function(k){if(a.containsValue(c,k,h)){if(!d){var q=r.filter(a.getValues(c,k),function(a){return a!=h});a.setValues(c,k,q)}b=k}});if(g)if("number"==typeof n){var t=a.getValues(g,b).slice();t.splice(n,0,h);a.setValues(g,b,t)}else a.setValues(g,b,a.getValues(g,b).concat(h))},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){},onNewItem:function(h,c){c&&this.getChildren(c.item,l.hitch(this,function(g){this.onChildrenChange(c.item,g)}))},onDeleteItem:function(h){this.onDelete(h)},onSetItem:function(h,c){if(-1!=r.indexOf(this.childrenAttrs,c))this.getChildren(h,l.hitch(this,function(c){this.onChildrenChange(h,c)}));else this.onChange(h)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(r,p,
m,l,h){return p("dijit.tree.ForestStoreModel",h,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(c){this.root={store:this,root:!0,id:c.rootId,label:c.rootLabel,children:c.rootChildren}},mayHaveChildren:function(c){return c===this.root||this.inherited(arguments)},getChildren:function(c,g,d){c===this.root?this.root.children?g(this.root.children):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(d){this.root.children=d;g(d)}),onError:d}):this.inherited(arguments)},
isItem:function(c){return c===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(c){if(c.identity==this.root.id){var g=c.scope||m.global;c.onItem&&c.onItem.call(g,this.root)}else this.inherited(arguments)},getIdentity:function(c){return c===this.root?this.root.id:this.inherited(arguments)},getLabel:function(c){return c===this.root?this.root.label:this.inherited(arguments)},newItem:function(c,g,d){return g===this.root?(this.onNewRootItem(c),this.store.newItem(c)):this.inherited(arguments)},
onNewRootItem:function(){},pasteItem:function(c,g,d,n,a){if(g===this.root&&!n)this.onLeaveRoot(c);this.inherited(arguments,[c,g===this.root?null:g,d===this.root?null:d,n,a]);if(d===this.root)this.onAddToRoot(c)},onAddToRoot:function(c){},onLeaveRoot:function(c){},_requeryTop:function(){var c=this.root.children||[];this.store.fetch({query:this.query,onComplete:l.hitch(this,function(g){this.root.children=g;if(c.length!=g.length||r.some(c,function(d,c){return g[c]!=d}))this.onChildrenChange(this.root,
g)})})},onNewItem:function(c,g){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(c){-1!=r.indexOf(this.root.children,c)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(c,g,d,n){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(r,p,m,l,h,c,g,d,
n,a,b){return p("dijit.tree._dndSelector",b,{constructor:function(){this.selection={};this.anchor=null;this.events.push(d(this.tree.domNode,n.press,l.hitch(this,"onMouseDown")),d(this.tree.domNode,n.release,l.hitch(this,"onMouseUp")),d(this.tree.domNode,n.move,l.hitch(this,"onMouseMove")),d(this.tree.domNode,a.press,l.hitch(this,"onClickPress")),d(this.tree.domNode,a.release,l.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,q;for(q in b)a.push(b[q]);
return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(a){var b=r.filter(this.getSelectedTreeNodes(),function(b){return!c.isDescendant(b.domNode,a.domNode)});this.setSelection(b);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=
this.getSelectedTreeNodes();r.forEach(this._setDifference(b,a),l.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));r.forEach(this._setDifference(a,b),l.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){r.forEach(b,function(a){a.__exclude__=!0});var k=r.filter(a,function(a){return!a.__exclude__});r.forEach(b,function(a){delete a.__exclude__});return k},_updateSelectionProperties:function(){var a=
this.getSelectedTreeNodes(),b=[],q=[];r.forEach(a,function(a){var f=a.getTreePath();q.push(a);b.push(f)},this);a=r.map(q,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",q);this.tree._set("selectedNode",q[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,this.current))){"mousedown"==a.type&&
g.isLeft(a)&&a.preventDefault();var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var q=h.getCopyKeyState(a),f=b.id;this.singular||a.shiftKey||!this.selection[f]?(this._doDeselect=!1,this.userSelect(b,q,a.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,h.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},
_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var k=doc.createRange();k.setStartBefore(a);var f=doc.createRange();f.setStartBefore(b);return k.compareBoundaryPoints(k.END_TO_END,f)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,
b,q){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(q&&this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);q=this.anchor;0>b?b=q:(b=a,a=q);for(q=[];b!=a;)q.push(b),b=this.tree._getNext(b);q.push(a);this.setSelection(q)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,
b){b=b||m.global;for(var k in this.selection)a.call(b,this.getItem(k),k,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(r,p,m,l,h,c){return p("dijit.tree._dndContainer",null,{constructor:function(g,d){this.tree=g;this.node=g.domNode;l.mixin(this,d);this.containerState="";m.add(this.node,"dojoDndContainer");this.events=[h(this.node,c.enter,l.hitch(this,"onOverEvent")),h(this.node,c.leave,
l.hitch(this,"onOutEvent")),r.after(this.tree,"_onNodeMouseEnter",l.hitch(this,"onMouseOver"),!0),r.after(this.tree,"_onNodeMouseLeave",l.hitch(this,"onMouseOut"),!0),h(this.node,"dragstart, selectstart",function(d){d.preventDefault()})]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,d){var g="dojoDnd"+c,a=c.toLowerCase()+"State";m.replace(this.node,g+
d,g+this[a]);this[a]=d},_addItemClass:function(c,d){m.add(c,"dojoDndItem"+d)},_removeItemClass:function(c,d){m.remove(c,"dojoDndItem"+d)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(r,p,m,l,h,c,g){return m("dijit.tree.ObjectStoreModel",g,{store:null,
labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(d){h.mixin(this,d);this.childrenCache={}},getRoot:function(d,g){if(this.root)d(this.root);else{var a=this.store.query(this.query);a.then&&this.own(a);c(a,h.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];d(this.root);a.observe&&a.observe(h.hitch(this,function(a){this.onChange(a)}),!0)}),g)}},mayHaveChildren:function(){return!0},
getChildren:function(d,g,a){var b=this.store.getIdentity(d);if(this.childrenCache[b])c(this.childrenCache[b],g,a);else{var t=this.childrenCache[b]=this.store.getChildren(d);t.then&&this.own(t);t.observe&&this.own(t.observe(h.hitch(this,function(a,b,f){this.onChange(a);b!=f&&c(t,h.hitch(this,"onChildrenChange",d))}),!0));c(t,g,a)}},isItem:function(){return!0},getIdentity:function(d){return this.store.getIdentity(d)},getLabel:function(d){return d[this.labelAttr]},newItem:function(d,c,a,b){return this.store.put(d,
{parent:c,before:b})},pasteItem:function(d,c,a,b,g,k){var q=new l;if(c===a&&!b&&!k)return q.resolve(!0),q;c&&!b?this.getChildren(c,h.hitch(this,function(b){b=[].concat(b);var f=r.indexOf(b,d);b.splice(f,1);this.onChildrenChange(c,b);q.resolve(this.store.put(d,{overwrite:!0,parent:a,oldParent:c,before:k}))})):q.resolve(this.store.put(d,{overwrite:!0,parent:a,oldParent:c,before:k}));return q},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"dojox/layout/ExpandoPane":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/connect dojo/_base/event dojo/_base/fx dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/text!./resources/ExpandoPane.html dijit/layout/ContentPane dijit/_TemplatedMixin dijit/_Contained dijit/_Container".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){r.experimental("dojox.layout.ExpandoPane");return m("dojox.layout.ExpandoPane",[t,k,q,f],{attributeMap:p.delegate(t.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"}}),templateString:b,easeOut:"dojo._DefaultEasing",easeIn:"dojo._DefaultEasing",duration:420,startExpanded:!0,previewOpacity:.75,previewOnDblClick:!1,tabIndex:"0",_setTabIndexAttr:"iconNode",baseClass:"dijitExpandoPane",postCreate:function(){this.inherited(arguments);this._animConnects=
[];this._isHorizontal=!0;p.isString(this.easeOut)&&(this.easeOut=p.getObject(this.easeOut));p.isString(this.easeIn)&&(this.easeIn=p.getObject(this.easeIn));var a="",b=!this.isLeftToRight();if(this.region){switch(this.region){case "trailing":case "right":a=b?"Left":"Right";this._needsPosition="left";break;case "leading":case "left":a=b?"Right":"Left";break;case "top":a="Top";break;case "bottom":this._needsPosition="top",a="Bottom"}n.add(this.domNode,"dojoxExpando"+a);n.add(this.iconNode,"dojoxExpandoIcon"+
a);this._isHorizontal=/top|bottom/.test(this.region)}d.set(this.domNode,{overflow:"hidden",padding:0});this.connect(this.domNode,"ondblclick",this.previewOnDblClick?"preview":"toggle");this.iconNode.setAttribute("aria-controls",this.id);this.iconNode.setAttribute("role","button");this.iconNode.setAttribute("aria-label",this.titleNode.innerHTML);this.previewOnDblClick&&this.connect(this.getParent(),"_layoutChildren",p.hitch(this,function(){this._isonlypreview=!1}))},_startupSizes:function(){this._container=
this.getParent();this._closedSize=this._titleHeight=a.getMarginBox(this.titleWrapper).h;if(this.splitter){var b=this.id;l.forEach(dijit.registry.toArray(),function(a){a&&a.child&&a.child.id==b&&this.connect(a,"_stopDrag","_afterResize")},this)}this._currentSize=a.getContentBox(this.domNode);this._showSize=this._currentSize[this._isHorizontal?"h":"w"];this._setupAnims();this.startExpanded?this._showing=!0:(this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(99,!0));this.domNode.setAttribute("aria-expanded",
this._showing);this._hasSizes=!0},_afterResize:function(b){b=this._currentSize;this._currentSize=a.getMarginBox(this.domNode);var f=this._currentSize[this._isHorizontal?"h":"w"];f>this._titleHeight?(this._showing||(this._showing=!this._showing,this._showEnd()),this._showSize=f,this._setupAnims()):(this._showSize=b[this._isHorizontal?"h":"w"],this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(89,!0))},_setupAnims:function(){l.forEach(this._animConnects,h.disconnect);var a={node:this.domNode,
duration:this.duration},b={},f=this._showSize,k=this._closedSize,q={},d=this._isHorizontal?"height":"width",c=this._needsPosition;b[d]={end:f};q[d]={end:k};c&&(b[c]={end:function(a){return parseInt(a.style[c],10)-f+k}},q[c]={end:function(a){return parseInt(a.style[c],10)+f-k}});this._showAnim=g.animateProperty(p.mixin(a,{easing:this.easeIn,properties:b}));this._hideAnim=g.animateProperty(p.mixin(a,{easing:this.easeOut,properties:q}));this._animConnects=[h.connect(this._showAnim,"onEnd",this,"_showEnd"),
h.connect(this._hideAnim,"onEnd",this,"_hideEnd")]},preview:function(){this._showing||(this._isonlypreview=!this._isonlypreview);this.toggle()},toggle:function(){this._showing?(this._hideWrapper(),this._showAnim&&this._showAnim.stop(),this._hideAnim.play()):(this._hideAnim&&this._hideAnim.stop(),this._showAnim.play());this._showing=!this._showing;this.domNode.setAttribute("aria-expanded",this._showing)},_hideWrapper:function(){n.add(this.domNode,"dojoxExpandoClosed");d.set(this.cwrapper,{visibility:"hidden",
opacity:"0",overflow:"hidden"})},_showEnd:function(){d.set(this.cwrapper,{opacity:0,visibility:"visible"});g.anim(this.cwrapper,{opacity:this._isonlypreview?this.previewOpacity:1},227);n.remove(this.domNode,"dojoxExpandoClosed");this._isonlypreview?(this._previewShowing=!0,this.resize()):setTimeout(p.hitch(this._container,"layout"),15)},_hideEnd:function(){this._isonlypreview?this._previewShowing=!1:setTimeout(p.hitch(this._container,"layout"),25);this._isonlypreview=!1},resize:function(b){this._hasSizes||
this._startupSizes(b);var f=a.getMarginBox(this.domNode);this._contentBox={w:b&&"w"in b?b.w:f.w,h:(b&&"h"in b?b.h:f.h)-this._titleHeight};d.set(this.containerNode,"height",this._contentBox.h+"px");b&&a.setMarginBox(this.domNode,b);this._layoutChildren();this._setupAnims()},_trap:function(a){c.stop(a)}})})},"rc/_base/tooltip":function(){define(["dojo/_base/declare","./_ToolTip"],function(r,p){return new (r("rc/_base/tooltip",p,{}))})},"rc/_base/_ToolTip":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/string dojo/dom ../util/HelpUtil ../widget/Tooltip".split(" "),
function(r,p,m,l,h,c,g){return m("rc/_base/_ToolTip",[r],{entries:[],showing:!1,_id:0,add:function(d,c,a,b){d=h.byId(d);var g=++this._id;-1!=c.indexOf("{0}")&&(c=this._insertHelpLink(c,b),rc.session.hasRole(rc.session.roles.showHelp)||c.match("\x3ca")&&(c=c.slice(0,c.indexOf("\x3c"))));this.entries.push({node:d,tip:c,id:g,so:a});return g},hide:function(){p.forEach(this.entries,function(c){this._hide1(c)},this);this.showing=!1},remove:function(c){for(var d=this.entries.length-1;0<=d;--d)if(this.entries[d].id==
c){this._hide1(this.entries[d]);this.entries.splice(d,1);break}},show:function(){p.forEach(this.entries,function(c){null==c.widget?c.widget=new g({node:c.node,tip:c.tip,so:c.so}):c.widget.update()},this);this.showing=!0},update:function(){this.showing&&p.forEach(this.entries,function(c){null!=c.widget&&c.widget.update()},this)},_hide1:function(c){"widget"in c&&!c.widget._destroyed&&c.widget.destroyRecursive();delete c.widget},_insertHelpLink:function(d,g){return l.substitute(d,[c.getContextSensitiveHelpLink(g)])}})})},
"rc/util/HelpUtil":function(){define(["dojo/_base/declare","dojo/has","dojo/hash","./encoding/base16","./encoding/base64"],function(r,p,m,l,h){return new (r("rc/util/HelpUtil",[],{_defaultContext:"MPW000",getContextSensitiveHelpLink:function(c){var g="help.html#";c=this._getCurrentPageId(c);return g=null===c?g+this._defaultContext:g+c},_getCurrentPageId:function(c){var g,d=/\d+([a|b])\d+([a-z|\-]+)\d+/i,n=/\d+([a|b])\d+([a-z|\-]+)/i,a=/\d+([a-z|\-]+)/i,b=/\d+([a-z|\-]+)\d+/i,t=/([a-z|\-]+)\d+/i;c?
g=c:m()&&(test.mode<test.PROXY_LIVE&&(g=l.toCharString(h.decode(m()))),null!==d.exec(g)?g=d.exec(g)[2]:null!==n.exec(g)?g=n.exec(g)[2]:null!==a.exec(g)?g=a.exec(g)[1]:null!==b.exec(g)?g=b.exec(g)[1]:null!==t.exec(g)&&(g=t.exec(g)[1]));g||(g="");switch(g.toLowerCase()){case "audit":c="MPW020";break;case "alarms":c="MPW040";break;case "grp":case "view":c="MPW100";break;case "tl":case "stl":case "mtl":c="MPW200";break;case "rt":c="MPW210";break;case "sched":c="MPW300";break;case "cal":c="MPW400";break;
case "as":c="MPW500";break;case "ws":c="MPW510";break;default:c=this._defaultContext}return c}}))})},"rc/widget/Tooltip":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/form/Button dijit/form/DropDownButton dijit/popup dijit/TooltipDialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n!rc/nls/all dojo/on dojo/query".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){h.close1=function(a){for(var b=[],
f=0;f<this._stack.length;f++){for(var k=!1,q=0;q<b.length;q++)if(b[q].widget.id==this._stack[f].widget.id){k=!0;break}k||(this._stack[f].widget.id==a.id?b.push(this._stack[f]):b.unshift(this._stack[f]))}this._stack=b;this.close(a)};return d("rc/widget/Tooltip",[p,r],{templateString:'\x3cdiv class\x3d"rcTooltipInfoContainer"\x3e\x3cdiv class\x3d"rcTooltipInfoIcon" dojoAttachPoint\x3d"containerNode"\x3e\x3c/div\x3e\x3c/div\x3e',node:null,tip:"",so:null,_ttd:null,ttdOpen:!1,_b:null,_buttonContainer:null,
postCreate:function(){this.inherited(arguments);"s"in rc||(rc.s={});this.add(this.node,this.tip,this.so)},add:function(q,d,u){this.node=q;this._ttd=new c({autofocus:!1,content:d,style:{width:"250px"}});this.own(f(this._ttd,"open",n.hitch(this,this._onOpenDialog)),f(this._ttd,"close",n.hitch(this,this._onCloseDialog)));d=new m({baseClass:"rcTooltipClose",iconClass:"dijitDialogCloseIcon"});this.own(f(d,"click",n.hitch(this,this.close)));b.place(d.domNode,this._ttd.containerNode,"first");this._buttonContainer=
new b.create("div",{className:"rcTooltipButtonContainer"},a.body(),"last");this._b=new l({dropDown:this._ttd,iconClass:"rcTooltipIcon",baseClass:"rcTooltipButton"},b.create("div",null,this._buttonContainer));(u||"Object"==typeof u)&&k.set(this._b.domNode,u);this._b._closeDropDown=this._b.closeDropDown;this._b.closeDropDown=n.hitch(this,function(){h.close1(this._b.dropDown)});this._b._onBlur=this._onBlur;null!=q&&b.place(this.domNode,q);this.update()},_onBlur:function(){},remove:function(){},update:function(){try{var a=
t.position(this.node,!0);k.set(this._buttonContainer,{top:a.y+a.h/2-13+"px",left:a.x+a.w/2-21+"px"});this.ttdOpen&&this.open()}catch(z){console.error("error updating tooltip: ",z.message,z,this)}},open:function(){this._b.openDropDown()},close:function(a){this._ttd.onCancel()},_onOpenDialog:function(){this.ttdOpen=!0},_onCloseDialog:function(){this.ttdOpen=!1},destroy:function(){g.forEach(u("[dijitpopupparent\x3d"+this._b.id+"]"),function(a){b.destroy(a)});h.close1(this._b.dropDown);this._b.destroyRecursive();
this._ttd.destroyRecursive();b.destroy(this._buttonContainer);this.inherited(arguments)}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k){r=r("dijit.TooltipDialog",[d,b,a,n],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,
_lastFocusItem:null,templateString:t,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,"keydown",h.hitch(this,"_onKey")))},orient:function(a,b,k){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+k];p.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems();g.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==
a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==l.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==l.TAB){var b=a.target;
this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(g.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||a.shiftKey?a.stopPropagation():(g.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}}});m("dojo-bidi")&&r.extend({_setTitleAttr:function(a){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,a):a;this._set("title",
a)},_setTextDirAttr:function(a){this._created&&this.textDir==a||(this._set("textDir",a),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return r})},"rc/util/widgetPicker":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ./pointObject ../bacnet/enums ../bacnet/io/DeviceObjectPropertyReferenceList ../bacnet/io/Number ../bacnet/io/Object ../bacnet/io/service/ReadPropertyMultiple ../bacnet/Object ../sys/job".split(" "),function(r,
p,m,l,h,c,g,d,n,a,b){return new (r("rc/util/widgetPicker",null,{_runtimeLogWidget:"rc/bacnet/TrendAsRuntimeLog",_trendLogWidget:"rc/bacnet/Trend",getPointForMnemonic:function(a){var b=new m,c=a.includes(":")?a.split(":")[1]:null;parseInt(c)===h.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME||parseInt(c)===h.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE?b=this._getRuntimePoint(a):(l.getByMnemonic(a.split("/")[0]),b.resolve(l));return b},getWidgetFor:function(a){var b=new m;if("STL"!==a.typeAbbr)b.resolve(a.getWidgetInfo(a.typeAbbr));
else{var q=[{o:new d(h.objectTypes.OBJID_TREND_LOG,a.rawObject.pointInstance),pl:[{p:new g(h.propertyTypes.PROPID_LOG_DEVICE_OBJECT_PROPERTY,h.primitiveTypes.ENUMERATED),i:-1,v:new c}]}];rc.xhr.request({type:"bacnet",gid:"TL",s:new n({device:a.rawObject.mainController},q),load:p.hitch(this,this._handleReadPropertySuccess,b,a.rawObject),error:p.hitch(this,this._handleReadPropertyError,b)})}return b.promise},_getRuntimePoint:function(c){var k=new m;l.getByMnemonic(c.split("/")[0]);b.loadOnce().then(p.hitch(this,
function(){if(b.hasProprietarySupportBit({device:l.rawObject.device},h.advancedFeatureSupport.AutomaticTrending)){l.getByMnemonic(c.split(":")[0]);var q=[{o:new d(h.mnemonicToType[l.typeAbbr.toLowerCase()],l.rawObject.pointInstance),pl:[{p:new g(h.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE,h.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new d}]}];rc.xhr.request({type:"bacnet",gid:"TL",s:new n({device:l.rawObject.mainController},q),load:p.hitch(this,function(b){b.e&&k.reject();b=new a(l.rawObject.mainController,
b.o[0].pl[0].v.t,b.o[0].pl[0].v.i);l.getByMnemonic(b.toMnemonic());k.resolve(l)}),error:p.hitch(this,function(a){k.reject()})})}else k.resolve(l)}),p.hitch(this,function(a){k.reject()}));return k},_handleReadPropertySuccess:function(b,k,c){var f={};if(c.e)if(f.module=this._runtimeLogWidget,5E3<k.pointInstance){c=h.objectTypes.OBJID_BINARY_VALUE;var q=k.pointInstance%5E3;k.logObject=new a(k.mainController,c,q)}else 4E3<k.pointInstance?(c=h.objectTypes.OBJID_BINARY_OUTPUT,q=k.pointInstance%4E3,k.logObject=
new a(k.mainController,c,q)):3E3<k.pointInstance?(c=h.objectTypes.OBJID_BINARY_INPUT,q=k.pointInstance%3E3,k.logObject=new a(k.mainController,c,q)):f.module=this._trendLogWidget;else try{var q=c.o[0].pl[0].v.l,d=new a(k.mainController,q[0].o.t,q[0].o.i);d.type===h.objectTypes.OBJID_BINARY_INPUT||d.type===h.objectTypes.OBJID_BINARY_OUTPUT||d.type===h.objectTypes.OBJID_BINARY_VALUE||d.type===h.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT?(f.module=this._runtimeLogWidget,k.logObject=d):f.module=this._trendLogWidget}catch(z){f.module=
this._trendLogWidget}b.resolve(f)},_handleReadPropertyError:function(a,b){a.resolve({module:this._trendLogWidget})}}))})},"rc/bacnet/io/DeviceObjectPropertyReferenceList":function(){define(["dojo/_base/declare","./DeviceObjectPropertyReference","./List"],function(r,p,m){return r("rc/bacnet/io/DeviceObjectPropertyReferenceList",m,{constructor:function(l){this.o=new p;this.l=l||[]}})})},"rc/widget/AlarmNotification":function(){define("dgrid/Grid dgrid/OnDemandGrid dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/Button dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/cookie dojo/Deferred dojo/fx dojo/has dojo/dom-construct dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/AlarmNotification.html dojo/topic require ./AlarmWidget ./Toaster ../_base/tooltip ../_base/test ../_base/util ../session dijit/form/CheckBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K){return g("rc/widget/AlarmNotification",[F,m,l],{templateString:E,_toaster:null,animDuration:300,duration:4E3,_expanderConnect:null,_isShowing:!0,_isExpanded:!0,_msgCount:0,_repeatTimers:null,_repeatConnex:null,_popQ:null,_tooltipIds:null,_listButtons:null,_updateEvent:null,_editing:!1,_fetchNow:!0,constructor:function(){this._expanderConnect=[];this._repeatTimers=[];this._repeatConnex=[];this._popQ=[];this._tooltipIds=[];this._listButtons=
{};this._supportingWidgets=[];this._gridStore=new A(new v({idProperty:"id",data:[]}))},postCreate:function(){this.inherited(arguments);this.initialize()},initialize:function(){this._linkNode.innerHTML=z.viewAll;this._linkNode.href=this._linkToWidget("alarm");this._noDataMsg=z.noPopAlarms;w.set(this.domNode,"visibility","hidden");this._isShowing=!1;this._setUnread(!0);this._defaultQuery={active:!0,enable:2,poppable:!0,cleared:!1};this._createGrid();this._toaster=new H({duration:this.duration,defaultToastClass:"AlarmToast"},
this.toasterNode);this.own(y(this._toaster,"showMessage",n.hitch(this,this._nextPopup)));this.own(y(this._popupCheckBox.domNode,"click",n.hitch(this,this.setPopupOption)));this._supportingWidgets.push(this._toaster);this._attachPoints.push("_toaster");if(rc.AlarmLoader){this._supportingWidgets.push(rc.AlarmLoader);var a=this.animDuration;this.animDuration=1;this.collapse();this.animDuration=a;a=b("pop");this._popupCheckBox.set("checked","0"===a?!1:!0);this.setPopupOption(null);if(G.isLive()||G.mode===
G.PROXY_ALARM_LIVE||G.mode===G.PROXY_ALARM_CANNED)this._fetchIndex=rc.AlarmLoader.addFetch(null,n.hitch(this,function(a){this._connectData();this._mergeStats();this._updateAlerts();return a}),n.hitch(this,function(a){return a}),this._fetchNow);a=J.add(this.miniBar,x.ttAlarmPopup,{margin:"-4em 0 0 2.5em"},"alarms");this._tooltipIds.push(a);this._updateEvent=null}},_linkToWidget:function(a){var b;b=G.mode===G.NONE?"":D.toUrl("rc/views/");return b+=I.mnemonicToUri(a)},_createGrid:function(){var b=[{label:" ",
field:"popup",id:"popupCol",width:"16px",formatter:n.hitch(this,this._formatIcon)},{label:z.popupAlarms,field:"time",id:"timeCol",width:"15.5em",styles:"text-align: left;",formatter:n.hitch(this,this._formatAlarmListing)},{label:" ",field:"action",id:"actionCol",width:"3.5em",styles:"text-align: left;",renderCell:n.hitch(this,this._formatListButtons)}];if(7===q("chrome")||18===q("chrome"))b[0].width="22px",b[2].width="65px";this._grid=new (g([r,p]))({store:this._gridStore,columns:b,noDataMessage:this._noDataMsg,
sort:[{attribute:"time",descending:!0},{attribute:"priority"}]});this.own(a.before(this._grid,"removeRow",n.hitch(this,this._cleanupRow)));w.set(this.listContainer,"visibility","visible");w.set(this.listContainer,"height","100%");w.set(this.listContainer,"display","block");f.place(this._grid.domNode,this.listContainer);this._supportingWidgets.push(this._grid);this._attachPoints.push("_grid");this._grid.startup();w.set(this._grid.domNode,"height","400px");w.set(this.listContainer,"visibility","hidden")},
_capitalize:function(a){return a?a.substring(0,1).toUpperCase()+a.substring(1):""},_cleanupRow:function(a){(a=this._grid.row(a))&&a.id&&this._listButtonRemove(a.id)},_formatIcon:function(a){return'\x3cdiv class\x3d"rcAlertIcon '+("rc"+this._capitalize(this._alarmConfig.formatPopupType(a))+"Icon")+'"\x3e\x3c/div\x3e'},_formatAlarmListing:function(a,b){var f="\x3cp\x3e"+this._alarmConfig.formatType(b.type)+" : "+this._alarmConfig.formatMessage(b.messageText,b);0===b.controller&&(f+=" "+b.state);f+=
'\x3c/p\x3e\x3cp class\x3d"note"\x3e'+this._alarmConfig.formatTime(a,b,"time")+"\x3c/p\x3e";b.action&&b.action&&(f+="\x3cp\x3e"+this._alarmConfig.formatAction(b.action,b)+"\x3c/p\x3e");return f},setPopupOption:function(a){a&&I.stopEvent(a);a=this._popupCheckBox.get("checked")?!0:!1;b("pop",a?1:0,{expires:365,path:"/"});a?(u.remove(this._toaster.domNode,"hidden"),this._toaster.play()):(u.add(this._toaster.domNode,"hidden"),this._clearPopups(),this._toaster.stop())},_listButtonAdd:function(a,b,f){this._listButtons[a]=
{id:a,button:b,connect:f}},_listButtonRemove:function(a){var b=this._listButtons[a];"undefined"!==typeof b&&(b.connect.remove(),b.button.destroyRecursive(),delete this._listButtons[a])},_listButtonRemoveAll:function(){Object.keys(this._listButtons).forEach(n.hitch(this,this._listButtonRemove));this._listButtons={}},_listButtonRemoveItem:function(a){a=this._grid.store.getIdentity(a);this._listButtonRemove(a)},_formatListButtons:function(a,b,k){if(!this._showAck(a))return this._listButtonRemoveItem(a),
"";b=a.id;if("undefined"!==typeof this._listButtons[b])return this._listButtons[b].button.domNode;k=f.create("div",{},k);var c=new h({label:"Ack"},k);this._supportingWidgets.push(c);var q=y(c,"click",n.hitch(this,function(){this._editAlarms(1,[a])}));this._listButtonAdd(b,c,q);return k},_showAck:function(a){var b=rc.session.hasRole(rc.session.roles.alarmAck),f=a.clearMethod;f!==rc.AlarmLoader.clearMethods.RESET&&f!==rc.AlarmLoader.clearMethods.ACK_AND_RESET||!a.acknowledged||(b=!1);return b},_updateCache:function(){this.inherited(arguments);
this._mergeStats();this._isExpanded&&!this._editing?this._refreshUpdateNotice(this._numChanged):this._updateAlerts()},_update:function(){this._grid.set("sort",[{attribute:"time",descending:!0},{attribute:"priority"}]);var a=this._grid.refresh();this.own(a);a.then(n.hitch(this,function(a){this._setAlarmCount(a.length);var b=this._filterAlerts(a,!0);a.length?(a=this.show(),b.length&&a.then(n.hitch(this,function(){this._queuePopups(b)}))):this.hide();this._grid.set("query",this._defaultQuery)}),n.hitch(this,
function(a){}));return a},_updateAlerts:function(){return this._updateStore().then(n.hitch(this,this._update))},_filterAlerts:function(a,b){var f=[];return f=c.filter(a,function(a){var f=!a.shown||0===a.shown||a.shown&&1===a.shown&&a.popFormat&&(2===a.popFormat||3===a.popFormat)||!b;if(f=a.poppable&&2===a.enable&&f){var k=!1;if(this._grid.store)try{k=!this._grid.store.get(a.id).cleared}catch(S){}f=f&&k}if(f){var q=!1;c.forEach(this._popQ,function(b){b.messageText===a.messageText&&b.source===a.source&&
(q=!0)},this);f=f&&!q}return f},this)},_queuePopups:function(a){a=this._filterAlerts(a);this._popQ=this._popQ.concat(a);c.forEach(a,function(a){try{if(this._grid.store){var b=this._grid.store.get(a.id);b.shown=1;this._grid.store.put(b)}}catch(P){}},this);this._toaster.hasMessages()||this._nextPopup()},_nextPopup:function(){if(this._popQ.length){var a=this._popQ.shift(),b=this._filterAlerts([a]);if(0===b.length)this._nextPopup();else{var b=b[0],f=0<b.priority?b.priority:this._alarmConfig.get("alarmDefaultPriority",
b.type),a=b.popFormat;if(this._popupCheckBox.get("checked")){var k=this._buildAlertMessage(b),c=this._alarmConfig.formatPopupType(b.popup),k=this._toaster.addMessage({message:k,type:c,alarmLoader:rc.AlarmLoader,itemToAck:b,showAck:this._showAck(b),showCancel:1==a||2==a});2!=a&&3!=a||k.always(n.hitch(this,function(){var a=this._alarmConfig.get("alarmRepeatTime",f);0<a&&this._repeatTimers.push(setTimeout(n.hitch(this,this._queuePopups,[b]),1E3*a))}))}else if(2==a||3==a)a=this._alarmConfig.get("alarmRepeatTime",
f),0<a&&this._repeatTimers.push(setTimeout(n.hitch(this,this._queuePopups,[b]),1E3*a))}}},_buildAlertMessage:function(a){var b=f.create("div"),k=C.substitute(z.xAlarm,[this._alarmConfig.formatType(a.type)]),c=0<a.priority?a.priority:this._alarmConfig.get("alarmDefaultPriority",a.type),q=this._alarmConfig.formatMessage(a.messageText,null,null,a),d="";0==a.controller&&(d=" "+a.state);b.appendChild(f.create("p",{innerHTML:k+"\x3cbr\x3e\x3cstrong\x3e"+q+d+"\x3c/strong\x3e"}));b.appendChild(f.create("p",
{innerHTML:z.priority+": "+this._alarmConfig.formatPriority(c)}));b.appendChild(f.create("p",{innerHTML:z.source+": "+a.source}));b.appendChild(f.create("p",{innerHTML:z.time+": "+this._alarmConfig.formatTime(0===a.controller?a.time:parseInt(a.time,10),null,null,a)}));a.action&&b.appendChild(f.create("p",{innerHTML:"\x3cstrong\x3e"+z.action+"\x3c/strong\x3e: "+this._alarmConfig.formatAction(a.action,a),className:"actionLink"}));return b},_insertUpdateNotice:function(){this.updateNotice=f.create("div",
{className:"rcAlarmUpdate"});f.place(this.updateNotice,this.miniBar,"after");null!==this._updateEvent&&this._updateEvent.remove();this._updateEvent=y(this.updateNotice,"click",n.hitch(this,this._clickUpdateNotice))},_refreshUpdateNotice:function(a){null==this.updateNotice&&this._insertUpdateNotice();var b=0<a?z.showXchanges:z.showXchange,b=C.substitute(b,[a]);this.updateNotice.innerHTML=b;this._setAlarmCount("?")},_clearUpdateNotice:function(){this.updateNotice&&(f.destroy(this.updateNotice),this.updateNotice=
null)},_showCachedMessages:function(){this._clearUpdateNotice();this._updateAlerts();this._cleanUpNotifications()},_cleanUpNotifications:function(){this._isExpanded&&(this._setUnread(!1),0==this._msgCount&&setTimeout(n.hitch(this,"hide"),this.animDuration))},_clickUpdateNotice:function(a){I.stopEvent(a);this._showCachedMessages()},_editAlarms:function(a,b){this._editing=!0;var f=rc.AlarmLoader.editAlarms(a,b);f.always(n.hitch(this,function(){this._editing=!1}));f.otherwise(n.hitch(this,function(){this._grid.selection.deselectAll()}));
return f},_clearPopups:function(){c.forEach(this._popQ,function(){this._nextPopup()},this);this._popQ=[];this._toaster.clearAll()},expand:function(){c.forEach(this._expanderConnect,function(a){a.remove()},this);this._expanderConnect=[];this._isExpanded=!0;u.remove(this.domNode,"dijitCollapsed");u.add(this.domNode,"dijitExpanded");var b=k.wipeIn({node:this.listContainer,duration:this.animDuration});b.play();this.own(a.after(b,"onEnd",n.hitch(this,function(){u.add(this._toaster.domNode,"hidden");this._clearPopups();
this._toaster.stop();B.publish("rcAlarmShow",null)})));this._clearUpdateNotice();this._update();this._cleanUpNotifications();this._expanderConnect.push(y(this.miniBar,"click",n.hitch(this,this.collapse)))},collapse:function(){c.forEach(this._expanderConnect,function(a){a.remove()},this);this._expanderConnect=[];this._isExpanded=!1;var b=new t;this.own(b);var f=k.wipeOut({node:this.listContainer,duration:this.animDuration});this.own(a.after(f,"onEnd",n.hitch(this,function(){this._expanderConnect.push(y(this.miniBar,
"click",n.hitch(this,this.expand)));u.add(this.domNode,"dijitCollapsed");u.remove(this.domNode,"dijitExpanded");this._clearPopups();this._popupCheckBox.get("checked")&&(u.remove(this._toaster.domNode,"hidden"),this._toaster.play());this.updateNotice?this._showCachedMessages():(this._update(),this._cleanUpNotifications());0===this._msgCount&&this._isShowing&&this.hide();B.publish("rcAlarmShow",null);b.resolve(!0)})));f.play();return b.promise},show:function(){var b=new t;this.own(b);if(this._isShowing)b.resolve(!0);
else{this._isShowing=!0;u.remove(this.domNode,"rcHidden");var f=k.chain([k.wipeIn({node:this.domNode,duration:1}),d.fadeIn({node:this.domNode,duration:2*this.animDuration})]);this.own(a.after(f,"onEnd",n.hitch(this,function(){this.onShow();B.publish("rcAlarmShow",null);b.resolve(!0)})));f.play()}return b.promise},onShow:function(a){y.emit(this,"show",a)},hide:function(){var b=new t;this.own(b);if(this._isShowing){this._isShowing=!1;var f=new t;this.own(f);f.resolve(!0);c.forEach(this._repeatConnex,
function(a){a.remove()},this);this._repeatConnex=[];c.forEach(this._repeatTimers,function(a){a&&clearTimeout(a)});this._repeatTimers=[];this._isExpanded&&f.then(n.hitch(this,this.collapse));var q=k.chain([d.fadeOut({node:this.domNode,duration:2*this.animDuration}),k.wipeOut({node:this.domNode,duration:1})]);this.own(a.after(q,"onEnd",n.hitch(this,function(){u.add(this.domNode,"rcHidden");this.onHide();B.publish("rcAlarmShow",null);b.resolve(!0)})));f.then(n.hitch(this,function(a){return q.play()}))}else b.resolve(!0);
return b.promise},onHide:function(a){y.emit(this,"hide",a)},_setAlarmCount:function(a){this._msgCount=a;this.titleNode.innerHTML=a;0===a&&this._isExpanded&&this.hide()},_setUnread:function(a){a?u.add(this.titleNode,"rcAlarmCountUpdated"):u.remove(this.titleNode,"rcAlarmCountUpdated")},pause:function(){B.publish("alarmloader",[!1])},play:function(){B.publish("alarmloader",[!0])},destroy:function(){c.forEach(this._tooltipIds,function(a){J.remove(a)},this);this._listButtonRemoveAll();this.inherited(arguments)}})})},
"rc/widget/AlarmWidget":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/on dojo/promise/all dojo/store/Memory dojo/store/Observable dojo/topic ../sys/alarm".split(" "),function(r,p,m,l,h,c,g,d,n,a){return p("rc/widget/AlarmWidget",r,{_defaultQuery:null,_grid:null,_alarmConfig:null,_noDataMsg:"",_numChanged:null,_timeChanged:null,_onChangeConnect:null,_stats:null,defaultSort:[{attribute:"time",descending:!0}],_fetchIndex:null,postCreate:function(){this.inherited(arguments);
this._alarmConfig=a},_connectData:function(){null!==this._onChangeConnect&&(this._onChangeConnect.remove(),this._onChangeConnect=null);this._onChangeConnect=h(rc.AlarmLoader,"change",m.hitch(this,this._updateCache))},_setStore:function(){this._grid.set("store",new d(new g({idProperty:"id",data:[]})))},alphaNumericSort:function(a,c){var b=0,q=/([^0-9]*)/g,f=/([0-9]*)/g,d=null;try{var g=!1;a=a.toString();for(c=c.toString();!g;){var t="",d=isNaN(a[0].toString())?a.match(q):a.match(f);d.length&&(t=d[0]);
var n="",d=isNaN(c[0].toString())?c.match(q):c.match(f);d.length&&(n=d[0]);a=a.substring(t.length,a.length);c=c.substring(n.length,c.length);if(isNaN(t)&&isNaN(n))b=t.localeCompare(n),0!==b&&(g=!0);else if(isNaN(t)||isNaN(n))b=t.localeCompare(n),g=!0;else{var h=Number(t),v=Number(n),b=0;h>v?b=1:h<v&&(b=-1);0!==b&&(g=!0)}g||(0===a.length&&0===c.length?(b=0,g=!0):0===a.length?(b=-1,g=!0):0===c.length&&(b=1,g=!0))}}catch(A){console.error(this.declaredClass+" - alphaNumericSort(): Error comparing strings",
A),b=0}return b},_setCustomSort:function(a){a.comparatorMap||(a.comparatorMap={});a.comparatorMap.source=this.alphaNumericSort},_updateStore:function(){var a=new l;this.own(a);try{if(null===this._stats)return a.resolve(!0),a.promise;var c=this._stats[0],k=this._stats[2];this.own(h.once(this._grid,"dgrid-refresh-complete",m.hitch(this,function(){this._grid.set("sort",this._grid.get("sort"))})));if(0<k.numChanged||0===this._grid.store.data.length)0===this._grid.store.data.length?(this._updateGridStore(c),
a.resolve(!0)):this._updateChanges(k,c,a);this._timeChanged=k.timeChanged;a.then(m.hitch(this,function(){this._grid.refresh();this._numChanged=0;this._stats=null}))}catch(q){a.reject(q)}return a.promise},_updateCache:function(a){this._numChanged+=a},_updateChanges:function(a,d,k){var b=[],f=new l;Object.keys(a.r).filter(function(a){return"numChanged"!==a}).forEach(m.hitch(this,function(a){b.push(this._grid.store.remove(a))}));b.length?c(b).then(m.hitch(this,f.resolve)):f.resolve();var u=[];f.then(m.hitch(this,
function(){var b=new g({data:d});m.mixin(a.u,a.a);Object.keys(a.u).filter(function(a){return"numChanged"!==a}).forEach(m.hitch(this,function(a){u.push(this._putAlarmIntoGrid(b.get(a)))}));u.length?c(u).then(m.hitch(this,k.resolve)):k.resolve()}))},_mergeStats:function(){var a=rc.AlarmLoader.getAlarmsWithStats(this._timeChanged);if(null===this._stats)this._stats=a;else{this._stats[0]=a[0];this._stats[1]=this._stats[1].concat(a[1]);var c=a[2],k=this._stats[2];this._mergeStat(k.a,c.a);this._mergeStat(k.r,
c.r);this._mergeStat(k.u,c.u);this._stats[2].numChanged+=a[2].numChanged}},_mergeStat:function(a,c){for(var b in c)a[b]="numChanged"===b?a[b]+c[b]:c[b]},pause:function(){n.publish("alarmloader",[!1])},play:function(){n.publish("alarmloader",[!0])},_putAlarmIntoGrid:function(a){this._grid.store.put(a)},_updateGridStore:function(a){this._grid.store.setData(a)},destroy:function(){null!==this._onChangeConnect&&this._onChangeConnect.remove();rc.AlarmLoader&&rc.AlarmLoader.removeFetch(this._fetchIndex);
this.inherited(arguments)}})})},"rc/widget/ErrorMessage":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/i18n!../nls/all dojo/text!./templates/ErrorMessage.html ../_base/util".split(" "),function(r,p,m,l,h,c,g,d){return m("rc/widget/ErrorMessage",[p,r],{baseClass:"mpwError",rcStrings:c,renderHtml:!1,templateString:g,_setErrorMessageContentAttr:function(c){if(c){var a=this.renderHtml?c:d.escapeHtml(c);l.set(this.errorMessageContainer,
"innerHTML",a);h.remove(this.errorMessageContainer,"hidden")}else l.set(this.errorMessageContainer,"innerHTML",""),h.add(this.errorMessageContainer,"hidden");this._set("errorMessageContent",c)},_setErrorTitleAttr:function(c){if(c){var a=this.renderHtml?c:d.escapeHtml(c);l.set(this.errorTitleContainer,"innerHTML",a)}else l.set(this.errorMessageContainer,"innerHTML",this.rcStrings.error);this._set("errorMessageContent",c)},_setRenderHtmlAttr:function(c){this._set("renderHtml",c);this.set({errorMessageContent:this.errorMessage,
errorTitle:this.errorTitle,suggestion:this.suggestion})},_setSuggestionAttr:function(c){if(c){var a=this.renderHtml?c:d.escapeHtml(c);l.set(this.suggestionContainer,"innerHTML",a);h.remove(this.suggestionContainer,"hidden")}else h.add(this.suggestionContainer,"hidden"),l.set(this.suggestionContainer,"innerHTML","");this._set("suggestion",c)}})})},"rc/widget/Toolbar":function(){define("dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton dijit/layout/ScrollingTabController dijit/Menu dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/aspect dojo/cookie dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/on dojox/layout/ExpandoPane ./DateTimeDialog ../_base/tooltip ../_base/util ../StyleSwitcher ../util/HelpUtil".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F){return a("rc/widget/Toolbar",[A,x],{_buttons:null,_buttonTemplates:null,dateTimeDialog:null,showTitle:!0,constructor:function(a){this.inherited(arguments);this._buttonTemplates=[{type:r,baseClass:"backSingleButtonItem",buttonId:"Back",iconClass:"previousIcon",region:"lead",label:y.back},{type:r,baseClass:"loadSingleButtonItem",buttonId:"Load",iconClass:"loadIcon",region:"lead",label:y.load},{type:m,baseClass:"updateToggleButtonItem",
buttonId:"Update",iconClass:"updateIcon",region:"lead",label:y.update},{type:r,baseClass:"saveSingleButtonItem",buttonId:"Save",iconClass:"saveIcon",region:"lead",label:y.save},{type:r,baseClass:"clearAllSingleButtonItem",buttonId:"clearAll",iconClass:"xIcon",region:"trailing",label:y.clearAll},{type:p,baseClass:"moreDropDownButtonItem",buttonId:"More",iconClass:"configIcon",region:"trailing",alwaysOn:!0,label:y.more},{type:p,baseClass:"helpDropDownButtonItem",buttonId:"Help",iconClass:"helpIcon",
region:"trailing",alwaysOn:!0,label:y.help},{type:r,baseClass:"logoutSingleButtonItem",buttonId:"Logout",iconClass:"lockIcon",region:"trailing",alwaysOn:!0,label:y.logout},{type:r,baseClass:"loginSingleButtonItem",buttonId:"Login",iconClass:"lockIcon",region:"trailing",alwaysOn:!0,label:y.login}];a.customHelp&&(this.customHelp=a.customHelp);this.regions=[{name:"lead",count:0},{name:"center",count:0},{name:"trailing",count:0},{name:"lone",count:0}];this._buttons=b.clone(a.buttons)||{};this._isScrolling=
null},postCreate:function(){this.inherited(arguments);rc.session.validate();u.add(this.domNode,"rcToolbar");this._loneContainer=f.create("div",{className:"mpwFloatingMenu"},this.containerNode,"first");this.titleContainer=f.create("div",{className:"mpwPageTitle hidden"});this.titleNode=f.create("h2",{innerHTML:"\x26nbsp;"},this.titleContainer);f.place(this.titleContainer,this.containerNode,"first");this.scroller=new l({useMenu:!1,useSlide:!0,buttonWidget:"Button",containerId:this.id},f.create("div",
{},this.containerNode));this._addButtons();this.own(k.after(this,"resize",b.hitch(this,this._resizeScroller)));this.scroller.onStartup({})},_addButtons:function(){this._buttons.Back=!0;rc.session.isPrivate()&&(this._buttons.Logout=rc.session.hasRole(rc.session.roles.showLogout));rc.session.isPublic()&&(this._buttons.Login=rc.session.hasRole(rc.session.roles.showLogout));this._buttons.Help=!0;this._buttonTemplates[6].dropDown=this._makeHelpMenu();this._buttons.More=!0;this.moreMenu=this._makeBonusMenu();
this._buttonTemplates[5].dropDown=this.moreMenu;n.forEach(this._buttonTemplates,function(a){a.buttonId in this._buttons&&(this._buttons[a.buttonId]?this._buttons[a.buttonId]=this._makeButton(a.type,a.region,a):delete this._buttons[a.id])},this);this._buttons.hasOwnProperty("Back")&&this._buttons.Back&&(u.add(this._buttons.Back.domNode,"rcBackButton"),this.own(v(this._buttons.Back,"click",b.hitch(this,function(){window.history.back()}))));this._buttons.hasOwnProperty("Logout")&&this._buttons.Logout&&
this.own(v(this._buttons.Logout,"click",b.hitch(this,this.onLogout)));this._buttons.hasOwnProperty("Login")&&this._buttons.Login&&this.own(v(this._buttons.Login,"click",b.hitch(this,this.onLogin)))},_resizeScroller:function(){try{if(this.scroller&&(this.scroller.resize({w:this.containerNode.offsetWidth-this._loneContainer.offsetWidth-this.titleContainer.offsetWidth-1}),this._buttons.Logout)){var a=this.scroller._enableBtn();if(a!==this._isScrolling){this._isScrolling=a;var b=rc.session.getUsername(),
f=a?rc.session.getShortUsername():b;this._buttons.Logout.set("label",y.logout+" "+f);var c=B.unescapeHtml(b);this._buttons.Logout.set("title",y.logout+" "+c)}}}catch(K){}},_layoutChildren:function(){},setTitle:function(a){this.titleNode.innerHTML=a||"";a&&this.showTitle?u.remove(this.titleContainer,"hidden"):u.add(this.titleContainer,"hidden");this._resizeScroller()},addButton:function(a,b,f){return this._makeButton(r,f,{baseClass:a.replace(/ |\(|\)/g,"").toLowerCase()+"SingleButtonItem",iconClass:b,
label:a,buttonId:a})},addToggleButton:function(a,b,f){return this._makeButton(m,f,{baseClass:a.replace(/ |\(|\)/g,"").toLowerCase()+"ToggleButtonItem",iconClass:b,label:a,buttonId:a})},addDropDownButton:function(a,f,c,k){return this._makeButton(p,c,b.mixin({baseClass:a.replace(/ |\(|\)/g,"").toLowerCase()+"DropDownButtonItem",iconClass:f,label:a,buttonId:a},k||{}))},_makeButton:function(a,c,k){b.isObject(this._buttons[k.buttonId])&&this._buttons[k.buttonId].destroyRecursive();k.iconClass&&(k.iconClass+=
" rcIcon");this._buttons[k.buttonId]=new a(k);if("lone"===c){z.set(this._buttons[k.buttonId].domNode,{visibility:"hidden"});f.place(this._buttons[k.buttonId].domNode,this._loneContainer);var d=setInterval(b.hitch(this,function(a){0<w.position(a).w&&(clearInterval(d),z.set(a,{visibility:"visible"}),this._resizeScroller())},this._buttons[k.buttonId].domNode),100)}else{var q=0;n.some(this.regions,function(a){q+=a.count;return a.name===c?(a.count++,!0):!1},this);this.scroller.addChild(this._buttons[k.buttonId],
q);0===q&&(this.scroller._selectedTab=this._buttons[k.buttonId].domNode)}return this._buttons[k.buttonId]},getButton:function(a){return this._buttons[a]},getAllButtons:function(){var a=[],f=Object.keys(this._buttons);n.forEach(f,b.hitch(this,function(b){a.push(this._buttons[b])}));return a},getPageButtons:function(){var a=[],b;for(b in this._buttons)this._buttons[b]instanceof r&&!this._buttons[b].alwaysOn&&a.push(this._buttons[b]);return a},onLogout:function(a){this.emit("logout",arguments)},onLogin:function(a){rc.session.redirectToLogin();
this.emit("login",arguments)},openTimeDlg:function(){this.dateTimeDialog||(this.dateTimeDialog=new C);this.dateTimeDialog.show()},_makeHelpMenu:function(){if(!("Help"in this._buttons))return null;var a=new h({baseClass:"dijitMenu helpMenuItems"});a.addChild(new c({label:y.tbShowTips,baseClass:"dijitMenuItem showTooltipsMenuItem",iconClass:E.showing?"checkIcon":"",onClick:b.hitch(this,"_toggleTooltip")}));rc.session.hasRole(rc.session.roles.showHelp)&&a.addChild(new c({label:y.tbUserGuide,baseClass:"dijitMenuItem userGuideMenuItem",
onClick:b.hitch(this,function(){var a=F.getContextSensitiveHelpLink(this.customHelp);window.open(a,"_blank")})}));a.addChild(new c({label:y.tbAbout,baseClass:"dijitMenuItem aboutMenuItem",onClick:b.hitch(this,"_gotoPage","about")}));return a},_makeAlarmsMenuItem:function(a){if(!rc.session.hasRole(rc.session.roles.alarmDisable)||rc.session.hasRole(rc.session.roles.viewAlarms))this._buttons.Alarms=new c({label:y.alarms,baseClass:"dijitMenuItem alarmsMenuItem",iconClass:"",onClick:b.hitch(this,this._gotoPage,
"alarm")}),a.addChild(this._buttons.Alarms)},_makeAlarmHistoryMenuItem:function(a){},_makeAdminMenuItem:function(a){},_makeChangePasswordMenuItem:function(a){},addZoomTools:function(){},_makeBonusMenu:function(){if(!("More"in this._buttons))return null;var a=new h({baseClass:"dijitMenu moreMenuItems"});this._makeAdminMenuItem(a);this._makeChangePasswordMenuItem(a);"Print"in this._buttons&&(this._buttons.Print=new c({label:y.print,baseClass:"dijitMenuItem printMenuItem",iconClass:""}),a.addChild(this._buttons.Print));
"Export"in this._buttons&&(this._buttons.Export=new c({label:y.xport,baseClass:"dijitMenuItem exportMenuItem",iconClass:""}),a.addChild(this._buttons.Export));(this._buttons.Export||this._buttons.Print)&&a.addChild(new g);rc.session.hasRole(rc.session.roles.audit)&&(this._buttons["Audit Trail"]=new c({label:y.audittrail,baseClass:"dijitMenuItem auditTrailMenuItem",iconClass:"",onClick:b.hitch(this,"_gotoPage","audit")}),a.addChild(this._buttons["Audit Trail"]));this._makeAlarmsMenuItem(a);this._makeAlarmHistoryMenuItem(a);
(this._buttons["Audit Trail"]||this._buttons.Alarms)&&a.addChild(new g);a.addChild(this._makeLanguageMenu());var f=new h({baseClass:"dijitMenu themeSelectionItems"}),k=Object.keys(D.getThemes());n.forEach(k,b.hitch(this,function(a){f.addChild(new c({label:y[a.replace(/ |\(|\)/g,"").toLowerCase()],baseClass:"dijitMenuItem "+a.replace(/ |\(|\)/g,"").toLowerCase()+"MenuItem",theme:a,iconClass:"",onClick:function(){D.setActiveStyleSheet(t.doc,this.theme)}}))}));k=new d({label:y.tbTheme,baseClass:"dijitMenuItem themePopupMenu",
popup:f});a.addChild(k);z.set(k.arrowWrapper,"visibility","");var q=new h({baseClass:"dijitMenu themeSelectionItems"}),u=D.getFontSizes();n.forEach(Object.keys(u),b.hitch(this,function(a){q.addChild(new c({label:u[a].name,baseClass:"dijitMenuItem MenuItem",fontSize:a,iconClass:"",onClick:function(){D.setActiveFontSize(t.doc,a)}}))}));k=new d({label:y.tbFontSize,baseClass:"dijitMenuItem themePopupMenu",popup:q});a.addChild(k);z.set(k.arrowWrapper,"visibility","");rc.session.hasRole(rc.session.roles.setTime)&&
a.addChild(new c({label:y.tbSystemTime,baseClass:"dijitMenuItem systemTimeMenuItem",iconClass:"",onClick:b.hitch(this,this.openTimeDlg)}));return a},_makeLanguageMenu:function(){for(var a=new h({baseClass:"dijitMenu languageMenuItems"}),b=[{label:y.english,locale:"en-us"},{label:y.german,locale:"de"},{label:y.spanish,locale:"es"},{label:y.french,locale:"fr"},{label:y.portuguese,locale:"pt"},{label:y.chinese,locale:"zh"},{label:y.traditionalChinese,locale:"zh-tw"},{label:y.browserDefault,locale:null}],
f=q("locale"),k,g,u=0;u<b.length;u++)k=b[u],g="",f===k.locale&&(g="checkIcon"),void 0===f&&u===b.length-1&&(g="checkIcon"),a.addChild(new c({label:k.label,baseClass:k.locale?k.locale.replace(/ |\(|\)/g,"").toLowerCase()+"dijitMenuItem LanguageMenuItem":"dijitMenuItem defaultLanguageMenuItem",locale:k.locale,iconClass:g,onClick:function(){var a=new Date;a.setYear(a.getFullYear()+100);a={path:"/",expires:a};null===this.locale&&(a.expires=-1);q("locale",this.locale,a);window.location.reload()}}));a=
new d({label:y.language,baseClass:"dijitMenuItem languagePopupMenuItem",popup:a});z.set(a.arrowWrapper,"visibility","");return a},_gotoPage:function(a){window.location=B.mnemonicToUri(a)},_toggleTooltip:function(a){a=this._buttons.Help.dropDown.getChildren()[0];a.set("iconClass",0===a.get("iconClass").length?"checkIcon":"");a.get("iconClass").length?E.show():E.hide()},destroy:function(){this._buttonTemplates=[];this.scroller&&this.scroller.destroyRecursive();this._animConnects&&n.forEach(this._animConnects,
b.hitch(this,function(a){a.remove()}));this.inherited(arguments)}})})},"dijit/layout/ScrollingTabController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y){t=p("dijit.layout.ScrollingTabController",[q,u],{baseClass:"dijitTabController dijitScrollingTabController",templateString:t,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+
this.tabPosition.substr(1).replace(/-.*/,"")+"None",m.add(a,"tabStrip-disabled"));m.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);h.set(this.domNode,"visibility","");this._postStartup=!0;this.own(d(this.containerNode,"attrmodified-label, attrmodified-iconclass",g.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments);h.set(this.containerNode,"width",h.get(this.containerNode,"width")+200+"px")},
onRemoveChild:function(a,b){var f=this.pane2button(a.id);this._selectedTab===f.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=n("\x3e .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode))return this._btnWidth+=l.getMarginSize(a).w,!0;h.set(a,"display","none");return!1},this)},_getTabsWidth:function(){var a=this.getChildren();
if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+a.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||h.get(this.scrollNode,"width");return 0<b&&a<b},resize:function(a){this._dim=a;this.scrollNode.style.height="auto";var b=this._contentBox=f.marginBox2contentBox(this.domNode,{h:0,w:a.w});b.h=this.scrollNode.offsetHeight;l.setContentSize(this.domNode,b);b=this._enableBtn(this._contentBox.w);
this._buttons.style("display",b?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";f.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());
this._postResize=!0;return{h:this._contentBox.h,w:a.w}},_getScroll:function(){return this.isLeftToRight()||8>a("ie")||a("trident")&&a("quirks")||a("webkit")?this.scrollNode.scrollLeft:h.get(this.containerNode,"width")-h.get(this.scrollNode,"width")+(a("trident")||a("edge")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(b){if(this.isLeftToRight()||8>a("ie")||a("trident")&&a("quirks")||a("webkit"))return b;var f=h.get(this.containerNode,"width")-h.get(this.scrollNode,"width");return(a("trident")||
a("edge")?-1:1)*(b-f)},onSelectChild:function(a,b){var f=this.pane2button(a.id);if(f){var c=f.domNode;if(c!=this._selectedTab&&(this._selectedTab=c,this._postResize)){var k=this._getScroll();k>c.offsetLeft||k+h.get(this.scrollNode,"width")<c.offsetLeft+h.get(c,"width")?(c=this.createSmoothScroll(),b&&(c.onEnd=function(){f.focus()}),c.play()):b&&f.focus()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=h.get(this.scrollNode,"width"),f=h.get(this.containerNode,"width")-
b,c=this._getTabsWidth();if(a.length&&c>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:f};a=this.isLeftToRight()?0:f;return{min:a,max:a}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=h.get(this.scrollNode,"width"),f=this._getScrollBounds(),a=a.offsetLeft+h.get(a,"width")/2-b/2;return a=Math.min(Math.max(a,f.min),f.max)},createSmoothScroll:function(a){if(0<arguments.length){var b=
this._getScrollBounds();a=Math.min(Math.max(a,b.min),b.max)}else a=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var f=this,k=this.scrollNode,q=new c.Animation({beforeBegin:function(){this.curve&&delete this.curve;var b=k.scrollLeft,d=f._convertToScrollLeft(a);q.curve=new c._Line(b,d)},onAnimate:function(a){k.scrollLeft=a}});this._anim=q;this._setButtonClass(a);return q},_getBtnNode:function(a){for(a=a.target;a&&!m.contains(a,"tabStripButton");)a=a.parentNode;
return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!m.contains(b,"dijitTabDisabled")){var f=.75*h.get(this.scrollNode,"width")*a,f=this._getScroll()+f;this._setButtonClass(f);this.createSmoothScroll(f).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});k=p("dijit.layout._ScrollingTabControllerButtonMixin",
null,{baseClass:"dijitTab tabStripButton",templateString:k,tabIndex:"",isFocusable:function(){return!1}});p("dijit.layout._ScrollingTabControllerButton",[x,k]);p("dijit.layout._ScrollingTabControllerMenuButton",[x,y,k],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new w({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var f=b.byId(this.containerId);r.forEach(f.getChildren(),function(a){var b=
new z({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||f.textDir,onClick:function(){f.selectChild(a)}});this.dropDown.addChild(b)},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return t})},"dijit/layout/TabController":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){t=r("dijit.layout._TabButton"+(h("dojo-bidi")?"_NoBidi":""),d.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:t,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);p.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var a=this.domNode;this.defer(function(){a.className=a.className},1)},_setCloseButtonAttr:function(a){this._set("closeButton",a);
l.toggle(this.domNode,"dijitClosable",a);this.closeNode.style.display=a?"":"none";a&&(a=c.getLocalization("dijit","common"),this.closeNode&&m.set(this.closeNode,"title",a.itemClose))},_setDisabledAttr:function(a){this.inherited(arguments);if(this.closeNode)if(a)m.remove(this.closeNode,"title");else{var b=c.getLocalization("dijit","common");m.set(this.closeNode,"title",b.itemClose)}},_setLabelAttr:function(a){this.inherited(arguments);this.showLabel||this.params.title||(this.iconNode.alt=g.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}});h("dojo-bidi")&&(t=r("dijit.layout._TabButton",t,{_setLabelAttr:function(a){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}}));r=r("dijit.layout.TabController",d,{baseClass:"dijitTabController",templateString:"\x3cdiv role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown:onkeydown'\x3e\x3c/div\x3e",tabPosition:"top",buttonWidget:t,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var k=
new a({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return l.contains(a,"dijitClosable")&&!l.contains(a,"dijitTabDisabled")}});this.own(k);var q=c.getLocalization("dijit","common"),f=this;k.addChild(new b({label:q.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){a=n.byNode(this.getParent().currentTarget);f.onCloseButtonClick(a.page)}}))}});
r.TabButton=t;return r})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){l=p("dijit.layout._StackButton",q,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role",
"tab")}});p=p("dijit.layout.StackController",[b,t,k],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:l,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(b){return a.byId(this.id+"_"+b)},postCreate:function(){this.inherited(arguments);this.own(d.subscribe(this.containerId+"-startup",c.hitch(this,"onStartup")),d.subscribe(this.containerId+"-addChild",c.hitch(this,"onAddChild")),
d.subscribe(this.containerId+"-removeChild",c.hitch(this,"onRemoveChild")),d.subscribe(this.containerId+"-selectChild",c.hitch(this,"onSelectChild")),d.subscribe(this.containerId+"-containerKeyDown",c.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(g(this.containerNode,"click",c.hitch(this,function(b){var f=a.getEnclosingWidget(b.target);if(f!=this.containerNode&&!f.disabled&&f.page)for(b=b.target;b!==this.containerNode;b=b.parentNode)if(m.contains(b,this.buttonWidgetCloseClass)){this.onCloseButtonClick(f.page);
break}else if(b==f.domNode){this.onButtonClick(f.page);break}})))},onStartup:function(b){this.textDir=b.textDir;r.forEach(b.children,this.onAddChild,this);if(b.selected)this.onSelectChild(b.selected);var f=a.byId(this.containerId).containerNode,k=c.hitch(this,"pane2button");b={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var q=function(a,b){return g(f,"attrmodified-"+a,function(a){var f=k(a.detail&&a.detail.widget&&
a.detail.widget.id);f&&f.set(b,a.detail.newValue)})},d;for(d in b)this.own(q(d,b[d]))},destroy:function(a){this.destroyDescendants(a);this.inherited(arguments)},onAddChild:function(a,b){var f=new (c.isString(this.buttonWidget)?c.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,
title:a.tooltip,page:a});this.addChild(f,b);a.controlButton=f;if(!this._currentChild)this.onSelectChild(a);f=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+f.id:f.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",f)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy());delete a.controlButton},onSelectChild:function(b){if(b){if(this._currentChild){var f=
this.pane2button(this._currentChild.id);f.set("checked",!1);f.focusNode.setAttribute("tabIndex","-1")}f=this.pane2button(b.id);f.set("checked",!0);this._currentChild=b;f.focusNode.setAttribute("tabIndex","0");a.byId(this.containerId)}},onButtonClick:function(b){var f=this.pane2button(b.id);n.focus(f.focusNode);this._currentChild&&this._currentChild.id===b.id&&f.set("checked",!0);a.byId(this.containerId).selectChild(b)},onCloseButtonClick:function(b){a.byId(this.containerId).closeChild(b);this._currentChild&&
(b=this.pane2button(this._currentChild.id))&&n.focus(b.focusNode||b.domNode)},adjacent:function(a){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(a=!a);var b=this.getChildren(),f=r.indexOf(b,this.pane2button(this._currentChild.id)),c=b[f],k;do f=(f+(a?1:b.length-1))%b.length,k=b[f];while(k.disabled&&k!=c);return k},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var f=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case h.LEFT_ARROW:case h.UP_ARROW:a._djpage||
(f=!1);break;case h.PAGE_UP:a.ctrlKey&&(f=!1);break;case h.RIGHT_ARROW:case h.DOWN_ARROW:a._djpage||(f=!0);break;case h.PAGE_DOWN:a.ctrlKey&&(f=!0);break;case h.HOME:for(var c=this.getChildren(),k=0;k<c.length;k++){var q=c[k];if(!q.disabled){this.onButtonClick(q.page);break}}a.stopPropagation();a.preventDefault();break;case h.END:c=this.getChildren();for(k=c.length-1;0<=k;k--)if(q=c[k],!q.disabled){this.onButtonClick(q.page);break}a.stopPropagation();a.preventDefault();break;case h.DELETE:case 87:this._currentChild.closable&&
(a.keyCode==h.DELETE||a.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),a.stopPropagation(),a.preventDefault());break;case h.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==f&&(this.onButtonClick(this.adjacent(f).page),a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page;this.onkeydown(a.e)}});p.StackButton=l;return p})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(r,p,m,l,h,c){return r("dijit.MenuSeparator",[m,l,h],{templateString:c,buildRendering:function(){this.inherited(arguments);p.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(r,p,m,l,h,c,g){return r("dijit.PopupMenuItem",g,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var c=
l("*",this.srcNodeRef);this.inherited(arguments,[c[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(c,g){var a=this.popup;h.open(m.delegate(c,{popup:this.popup,around:this.domNode}));g&&a.focus&&a.focus()},_closePopup:function(){h.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var d=l("[widgetId]",this.dropDownContainer)[0];this.popup=c.byNode(d)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",
this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&p.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(c){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(c),delete this.popup);this.inherited(arguments)}})})},"rc/widget/DateTimeDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/fx dojo/_base/kernel dojo/_base/lang dojo/date dojo/date/locale dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/on dojo/string dojo/text!./templates/DateTimeDialog.html dojo/text!./templates/DateTimeDialog/ErrorDialog.html dojo/text!./templates/DateTimeDialog/WarningDialog.html dojo/topic ./Retry ../_base/Error ../bacnet/enums ../bacnet/io/Array ../bacnet/io/Date ../bacnet/io/DateTime ../bacnet/io/Number ../bacnet/io/Object ../bacnet/io/service/ReadPropertyMultiple ../bacnet/io/service/TimeSynchronization ../bacnet/io/service/UtcTimeSynchronization ../bacnet/io/service/WritePropertyMultiple ../bacnet/io/Time ../bacnet/Object ../bacnet/property ../date ../sys/hostinfo ../util/encoding/base16 ../util/encoding/base64 dijit/form/Button dijit/form/CheckBox dijit/form/ValidationTextBox ../widget/DateTextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T){return p("rc/widget/DateTimeDialog",[r],{ACCUMULATE_LEAP_YEAR:[1,32,61,92,122,153,183,214,245,275,306,336],canDoBacnetDST:!1,connectedDevice:4194303,currentDateTime:null,closable:!1,hostInfo:null,isShowingGMT:!1,rcStrings:k,templateString:u,title:k.setDateTime,_bacnetDate:null,_BACnetDSTEnd:null,_BACnetDSTStart:null,_bacnetTime:null,_currentTimeTimeout:null,_doneUpdatingTime:!1,_DSTStart:null,_DSTEnd:null,_updateTimeTimeout:null,
postCreate:function(){this.inherited(arguments);this.set("closable",this.closable);this.setupListeners();this._retryHandler=new y;this._setupTimeBox()},_setCurrentDateTimeAttr:function(a){null!==a?(n.set(this._currentD,"innerHTML",O.templateLongDate(a)),n.set(this._currentT,"innerHTML",O.templateTime(a))):n.set(this._currentT,"innerHTML","");this._set("currentDateTime",a)},buildBacnetObject:function(a,b){var f=null;null===this.hostInfo&&(this.hostInfo=new L(P.deviceNumber,A.objectTypes.OBJID_DEVICE,
P.deviceNumber));f=new M(b,this.hostInfo,0,-1,P.deviceNumber);switch(a){case "date":f.propertyObject=new E(0,0,0,0);break;case "time":f.propertyObject=new K(0,0,0,0);break;case "dst":f.propertyObject=new C([],A.primitiveTypes.OCTET_STRING);break;default:console.error(this.declaredClass+" - buildBacnetObject(): Unknown type",a)}return f},buildTimeRequest:function(a,b){var f=null,c="read"===b?H:I;"current"===a?("read"===b&&(this._bacnetDate=this.buildBacnetObject("date",A.propertyTypes.PROPID_LOCAL_DATE),
this._bacnetTime=this.buildBacnetObject("time",A.propertyTypes.PROPID_LOCAL_TIME)),f=new c({index:0,device:P.deviceNumber},[{o:new F(A.objectTypes.OBJID_DEVICE,P.deviceNumber),pl:[{p:new D(A.propertyTypes.PROPID_LOCAL_DATE,A.primitiveTypes.ENUMERATED),i:new D(-1,A.primitiveTypes.UNSIGNED_INTEGER),v:this._bacnetDate.propertyObject},{p:new D(A.propertyTypes.PROPID_LOCAL_TIME,A.primitiveTypes.ENUMERATED),i:new D(-1,A.primitiveTypes.UNSIGNED_INTEGER),v:this._bacnetTime.propertyObject}]}])):"dst"===a?
("read"===b&&(this._BACnetDSTStart=this.buildBacnetObject("dst",A.propertyTypes.PROPID_PP_DST_START),this._BACnetDSTEnd=this.buildBacnetObject("dst",A.propertyTypes.PROPID_PP_DST_END)),f=new c({index:0,device:P.deviceNumber},[{o:new F(A.objectTypes.OBJID_DEVICE,P.deviceNumber),pl:[{p:new D(A.propertyTypes.PROPID_PP_DST_START,A.primitiveTypes.ENUMERATED),i:new D(-1,A.primitiveTypes.UNSIGNED_INTEGER),v:this._BACnetDSTStart.propertyObject},{p:new D(A.propertyTypes.PROPID_PP_DST_END,A.primitiveTypes.ENUMERATED),
i:new D(-1,A.primitiveTypes.UNSIGNED_INTEGER),v:this._BACnetDSTEnd.propertyObject}]}])):console.error(this.declaredClass+" - buildTimeRequest(): Invalid type",a);return f},dateToWeekNDayArray:function(a){var b=[];b[0]=a.getMonth()+1;b[1]=this.getBACnetWeekOfMonth(a);b[2]=0!==a.getDay()?a.getDay():7;return b},fetch:function(){this._showWaiting();var a=this._retryHandler.notifyRetry({action:h.hitch(this,this._fetch),retryMsg:k.communicationProblem+" "+k.retryingIn});a.then(h.hitch(this,function(a){this._hideWaiting();
return a}),h.hitch(this,function(a){n.set(this._currentD,"innerHTML",404===a.status?k.getDateTime404:k.unexpectedResponse);this.set("currentTime",null);this._hideWaiting();return a}));return a},getBACnetWeekOfMonth:function(a){a=a.getDate();var b=-1;1<=a&&7>=a?b=1:8<=a&&14>=a?b=2:15<=a&&21>=a?b=3:22<=a&&28>=a?b=4:29<=a&&31>=a&&(b=5);return b},hide:function(){this._doneUpdatingTime=!1;this._showGMT(!1);this._stopTimer();this._stopCurrentTimer();return this.inherited(arguments)},send:function(){this._showFullWaiting();
this._data=this._encode();this._addAuditTrail(this._data.audit);var a=this._retryHandler.notifyRetry({action:h.hitch(this,this._sendSequence),tries:3,delay:5,retryMsg:k.communicationProblem+" "+k.retryingIn});a.then(h.hitch(this,function(a){this.hide();return a}),h.hitch(this,function(a){this._hideFullWaiting();this._showError(new v({name:k.error,message:k.setDateTimeError,e:a}));return a}));return a},setupListeners:function(){this.own(this._disableDSTCB.watch("checked",h.hitch(this,this._disableDST)),
this._convertGMTCheckBox.watch("checked",h.hitch(this,this._updateTime)),q(this._timeBox,"click",h.hitch(this,this._stopUpdatingTime)),q(this._timeBox,"focus",h.hitch(this,this._stopUpdatingTime)))},show:function(){this._hideFullWaiting();this._updateTime();this._updateCurrentTime();this._convertGMTCheckBox.set("checked",!1);this._disableDSTCB.set("checked",!1);this._dateBox.set("value",new Date);P.loadOnce().always(h.hitch(this,this.fetch));return this.inherited(arguments)},weekNDayToDate:function(a){var b=
a[0]-1,f=7!==a[2]?a[2]:0;a=7*(a[1]-1)+1;b=new Date((new Date).getFullYear(),b,a);f-=b.getDay();a=-1;a=0>f?b.getDate()+(7+f):b.getDate()+f;b.setDate(a);return b},_addAuditTrail:function(){var a={datestamp:parseInt((new Date).getTime()/1E3,10).toFixed(),pointName:" ",user:rc.session.getUsername(),action:k.setTime,details:f.substitute(k.newValueX,[this._data.newStr]),reason:k.na};x.publish("audit",a)},_checkInputs:function(){var a=this._validateAndFocus(this._timeBox)&&this._validateAndFocus(this._dateBox)&&
(!this._disableDSTCB.get("checked")||this._validateAndFocus(this._startDSTBox)&&this._validateAndFocus(this._endDSTBox));this.defer(h.hitch(this,this.focus),100);return a},_confirmChange:function(){var a=new d;this._sendWarningDlg||(this._sendWarningDlg=new r({className:"warningDialog",title:k.setDateTimeWarningTitle,execute:h.hitch(this,function(){this.send().then(h.hitch(this,a.resolve),h.hitch(this,a.reject))})}),this._sendWarningDlg.set({buttonOk:k.yes,buttonCancel:k.no}),n.set(this._sendWarningDlg.containerNode,
"innerHTML",f.substitute(z,{warningText:k.setDateTimeWarning})));this._sendWarningDlg.show();this.own(q.once(this._sendWarningDlg,"cancel",h.hitch(a,a.reject)));return a},_dateToDoy:function(a){return a.getDate()+this.ACCUMULATE_LEAP_YEAR[a.getMonth()]-(c.isLeapYear(a)?0:1)},_decodeBACnetDST:function(){try{var a,b;0===this._BACnetDSTStart.propertyObject.ary[0]||255===this._BACnetDSTStart.propertyObject.ary[0]?(a=b=new Date,this._disableDSTCB.set("checked",!1)):(this._disableDSTCB.set("checked",!0),
a=this.weekNDayToDate(this._BACnetDSTStart.propertyObject.ary),b=this.weekNDayToDate(this._BACnetDSTEnd.propertyObject.ary));this._startDSTBox.set("value",a);this._endDSTBox.set("value",b)}catch(aa){return null}},_decodeBACnetTime:function(a){try{this.set("currentDateTime",new Date(this._bacnetDate.propertyObject.y+1900,this._bacnetDate.propertyObject.m-1,this._bacnetDate.propertyObject.d,this._bacnetTime.propertyObject.h,this._bacnetTime.propertyObject.m,this._bacnetTime.propertyObject.s))}catch(S){return null}return a},
_decodeDST:function(a){try{var b=Q.toUnsignedEnd(a.slice(0,2)),f,c;b?(this._DSTStart=b,this._DSTEnd=Q.toUnsignedEnd(a.slice(2,a.length)),f=this._doyToDate(this._DSTStart),c=this._doyToDate(this._DSTEnd),this._disableDSTCB.set("checked",!0)):(f=c=new Date,this._disableDSTCB.set("checked",!1));this._startDSTBox.set("value",f);this._endDSTBox.set("value",c)}catch(U){return null}return a},_decodeTime:function(a){try{var b=((new Date).getFullYear()+"").slice(0,2)+"00",f=new Date(parseInt(b,10)+a[10],a[8],
a[6],a[4],a[2],a[0]);this.set("currentDateTime",f)}catch(N){return null}return a},_disableDST:function(){var a=!this._disableDSTCB.get("checked");this._startDSTBox.set({disabled:a,readOnly:a,required:!a});this._endDSTBox.set({disabled:a,readOnly:a,required:!a})},_doyToDate:function(a){if(366<a||1>a)return null;for(var b,f,c=(new Date).getFullYear(),k=this.ACCUMULATE_LEAP_YEAR,q=0;q<k.length;q++)if(b=k[q],f=q+1<k.length?k[q+1]:b,a>=b&&a<f)return new Date(c,q,a-b+1);return a>=k[k.length-1]?new Date(c,
q-1,a-k[k.length-1]+1):null},_encode:function(){var a=this._dateBox.get("value"),b=this._timeBox.get("value"),b=g.parse(b,{selector:"time",timePattern:"hh:mm:ss a"}),c=new B(new E(a.getYear(),a.getMonth()+1,a.getDate(),a.getDay()),new K(b.getHours(),b.getMinutes(),b.getSeconds(),parseInt((b.getSeconds()/100).toFixed(),10))),q=a.getFullYear().toString(),d=q[2],d=d+q[3],d=parseInt(d,10),q=[];q.push(b.getSeconds());q.push(0);q.push(b.getMinutes());q.push(0);q.push(b.getHours());q.push(0);q.push(a.getDate());
q.push(0);q.push(a.getMonth());q.push(0);q.push(d);q.push(0);q.push(a.getDay());var q=q.concat([0,0,0,0]),d=[0,0,0,0],u=k.dstDisabled;if(this._disableDSTCB.get("checked")){var u=this._startDSTBox.get("value"),t=this._endDSTBox.get("value");this.canDoBacnetDST?(this._BACnetDSTStart.setValue(this.dateToWeekNDayArray(u).toString()),this._BACnetDSTEnd.setValue(this.dateToWeekNDayArray(t).toString())):(d=Q.intToHexEnd(this._dateToDoy(u),2),d=d.concat(Q.intToHexEnd(this._dateToDoy(t),2)));u=f.substitute(k.dstXtoX,
[O.templateMedDate(u),O.templateMedDate(t)])}else this.canDoBacnetDST&&(this._BACnetDSTStart.setValue("0,0,0"),this._BACnetDSTEnd.setValue("0,0,0"));return{rcp:T.encode(q),rcpDST:this.canDoBacnetDST?null:T.encode(d),bacnet:c,newStr:O.templateLongDate(a)+", "+O.templateTime(b)+", "+u}},_fetch:function(){var a=new d,b=new d,f={dest:0,subt:0,subd:0,src:0,cmd:21,xl:0,xh:0};this._fetchBACnetGet(this.buildTimeRequest("current","read")).then(h.hitch(this,function(a){if(a instanceof H&&a.o[0].pl[0].v instanceof
E&&a.o[0].pl[1].v instanceof K)return this._bacnetDate.propertyObject=a.o[0].pl[0].v,this._bacnetTime.propertyObject=a.o[0].pl[1].v,this.currentDevice=a.o[0].o.i,this.hostInfo.device!==this.currentDevice&&(this.hostInfo.device=this.currentDevice,this.hostInfo.instance=this.currentDevice),this._decodeBACnetTime(a);b.reject(a)})).then(h.hitch(this,function(a){if(null===a)b.reject({status:504});else return this._fetchBACnetGet(this.buildTimeRequest("dst","read"))})).then(h.hitch(this,function(a){a instanceof
H&&a.o[0].pl[0].v instanceof C&&a.o[0].pl[1].v instanceof C?(this.canDoBacnetDST=!0,this._BACnetDSTStart.propertyObject=a.o[0].pl[0].v,this._BACnetDSTEnd.propertyObject=a.o[0].pl[1].v,this._decodeBACnetDST()):(this.canDoBacnetDST=!1,b.reject(a))})).then(h.hitch(this,function(f){null===f?b.reject({status:504}):a.resolve(f)})).otherwise(h.hitch(this,b.reject));b.promise.otherwise(h.hitch(this,function(){var b=new d;this._fetchGet(f).then(h.hitch(this,function(a){if(1>a.data.length)b.reject(a);else return this._decodeTime(a.data)})).then(h.hitch(this,
function(a){if(null===a)b.reject({status:504});else return f.cmd=29,this._fetchGet(f)})).then(h.hitch(this,function(a){if(1>a.data.length)b.reject(a);else return this._decodeDST(a.data)})).then(h.hitch(this,function(f){null===f?b.reject({status:504}):a.resolve(f)})).otherwise(h.hitch(this,a.reject));b.promise.otherwise(h.hitch(this,a.reject))}));return a.promise},_fetchBACnetGet:function(a){var b=new d;a={type:"bacnet",s:a,load:h.hitch(this,b.resolve),error:h.hitch(this,b.reject)};rc.xhr.request(a);
return b.promise},_fetchGet:function(a){var b=new d;a={type:"rcp",cmdObj:a,load:h.hitch(this,b.resolve),error:h.hitch(this,b.reject)};rc.xhr.request(a);return b.promise},_hideFullWaiting:function(){m.fadeOut({node:this._waitingBlock,duration:200,onEnd:h.hitch(this,function(b){a.add(b,"hidden");a.remove(this.actionBarNode,"hidden")})}).play()},_hideWaiting:function(){m.fadeOut({node:this._waitingIcon,duration:200,onEnd:h.hitch(this,function(b){a.add(b,"hidden");a.remove(this._currentD,"hidden");a.remove(this._currentT,
"hidden")})}).play()},_onClickAdvancedButton:function(){this._showGMT(!this.isShowingGMT)},_onSubmit:function(){this._checkInputs()&&this._confirmChange().then(h.hitch(this,this.inherited,arguments))},_send:function(a,b){var f=null;return f="rcp"===a?rc.xhr.request({gid:"DT",type:a,method:"POST",cmdObj:b,error:function(a,b){}}):rc.xhr.request({gid:"DT",type:a,s:b,method:"POST",error:function(a,b){}})},_sendRCPDST:function(a,b){a.cmd=129;a.cnt=this._data.rcpDST.length;a.data=this._data.rcpDST;this._send("rcp",
a).then(h.hitch(this,b.resolve),h.hitch(this,b.reject))},_sendSequence:function(){var a=new d,b=this._convertGMTCheckBox.get("checked")?G:J,b=this._send("bacnet",new b({network:65535},this._data.bacnet));if(this.canDoBacnetDST)b.then(h.hitch(this,function(){var b=this.buildTimeRequest("dst","write");rc.xhr.request({type:"bacnet",s:b,method:"POST"}).then(h.hitch(a,a.resolve),h.hitch(a,a.reject))}));else{var f={dest:127,subt:0,subd:0,src:0,xl:0,xh:0};this._convertGMTCheckBox.get("checked")?this._sendRCPDST(f,
a):b.then(h.hitch(this,function(){f.cmd=121;f.cnt=this._data.rcp.length;f.data=this._data.rcp;this._send("rcp",f).then(h.hitch(this,this._sendRCPDST,f,a))}))}return a.promise},_showError:function(a){this._timeBox.focus();this._errorDlg||(this._errorDlg=new r({className:"warningDialog",title:k.error,execute:h.hitch(this,this.send)}),this._errorDlg.set("buttonOk",k.tryAgain));this._errorDlg.set("content",f.substitute(w,{errorText:a.message}));this._errorDlg.show()},_showFullWaiting:function(){t.set(this._waitingBlock,
"opacity",1);a.remove(this._waitingBlock,"hidden");a.add(this.actionBarNode,"hidden")},_showGMT:function(b){a.toggle(this._GMTContainer,"hidden",!b);this.isShowingGMT=b},_showWaiting:function(){t.set(this._waitingIcon,"opacity",1);a.remove(this._waitingIcon,"hidden");a.add(this._currentD,"hidden");a.add(this._currentT,"hidden");this.set("currentDateTime",null)},_setupTimeBox:function(){var a=g._getGregorianBundle(l.locale),b=a["dayPeriods-format-wide-am"],a=a["dayPeriods-format-wide-pm"];this._timeBox.set("pattern",
"^((([0]?[1-9]|1[0-2])(:)[0-5]?[0-9]((:)[0]?[0-5]?[0-9])?( )?("+(b+"|"+a)+")))$");this._timeBox.set("invalidMessage",k.inValidTimeFormat+b+" "+k.or+" "+a)},_stopCurrentTimer:function(){this._currentTimeTimeout&&(window.clearTimeout(this._currentTimeTimeout),this._currentTimeTimeout=null)},_stopTimer:function(){this._updateTimeTimeout&&(window.clearTimeout(this._updateTimeTimeout),this._updateTimeTimeout=null)},_stopUpdatingTime:function(){this._doneUpdatingTime=!0},_updateCurrentTime:function(){null!==
this.currentDateTime&&(this.currentDateTime.setSeconds(this.currentDateTime.getSeconds()+1),this.set("currentDateTime",this.currentDateTime));this._stopCurrentTimer();this._currentTimeTimeout=window.setTimeout(h.hitch(this,this._updateCurrentTime),1E3)},_updateTime:function(){if(!this._doneUpdatingTime){this._stopTimer();var a=new Date;this._convertGMTCheckBox.get("checked")&&(a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),0));this._timeBox.set("value",
O.templateTime(a));this._updateTimeTimeout=window.setTimeout(h.hitch(this,this._updateTime),1E3)}},_validateAndFocus:function(a){a._hasBeenBlurred=!0;this.defer(h.hitch(a,a.focus),100);return a.validate(!0)},destroy:function(){this._stopTimer();this._stopCurrentTimer();this._waitingIcon&&(b.destroy(this._waitingIcon),this._waitingIcon=null);this.inherited(arguments)}})})},"rc/widget/Retry":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct ../util/notices".split(" "),
function(r,p,m,l,h,c){return p("rc/widget/Retry",[r],{timer:5,maxTries:3,_tries:0,_notices:[],dd:null,_cancelled:!1,_shutDown:!1,_retryTimer:null,constructor:function(){this.inherited(arguments);this._shutDown=!1;rc.test.mode>rc.test.NONE&&(this.maxTries=2,this.timer=1)},notifyRetry:function(g){this.clear();this._tries||(this.cancel(),this._cancelled=!1);this._tries++;g.failMsg=g.failMsg||null;var d=new l;this.dd=g.action();this.dd.then(m.hitch(this,function(c){d.resolve(c);return c}),m.hitch(this,
function(n){if(this._cancelled||this._shutDown)return this.clear(),d.reject(n),n;if(this._tries<(g.tries||this.maxTries)){var a=g.seconds||this.timer;this.clear();var b;g.retryMsg?b=c.widget.countdown({message:g.retryMsg,count:a}):(b=new l,b.resolve(null));b.then(m.hitch(this,function(b){b&&this._notices.push(b);this._retryTimer=setTimeout(m.hitch(this,function(){this.notifyRetry(g).then(m.hitch(this,function(a){d.resolve(a);return a}),m.hitch(this,function(a){d.reject(a);return a}))}),1E3*a);return b}),
m.hitch(this,function(a){this.fail(g.failMsg);d.reject(n);return a}))}else this.fail(g.failMsg),d.reject(n);return n}));return d.promise},fail:function(g){this.clear();g?(g=c.widget.sticky({message:g}),g.then(m.hitch(this,function(c){this._notices.push(c)}))):(g=new l,g.resolve(null));return g.promise},reset:function(){this._tries=0;this.clear()},clear:function(){for(var c=0;c<this._notices.length;c++)h.destroy(this._notices[c].domNode);this._notices=[]},shutdownRetryQueue:function(){this._retryTimer&&
(clearTimeout(this._retryTimer),this._retryTimer=null);this._shutDown=!0},cancel:function(){this.dd&&"undefined"!==typeof this.dd.cancel&&(this.dd.cancel(),this.dd=null,this.reset(),this._cancelled=!0)},destroy:function(){this.shutdownRetryQueue();this.cancel();this.inherited(arguments)}})})},"rc/bacnet/io/service/TimeSynchronization":function(){define(["dojo/_base/declare","./_Service"],function(r,p){return r("rc/bacnet/io/service/TimeSynchronization",p,{constructor:function(m,l){this.t=1;this.s=
6;this.r=m;this.o=l}})})},"rc/bacnet/io/service/UtcTimeSynchronization":function(){define(["dojo/_base/declare","./TimeSynchronization"],function(r,p){return r("rc/bacnet/io/service/UtcTimeSynchronization",p,{constructor:function(m,l){this.t=1;this.s=9;this.r=m;this.o=l}})})},"rc/bacnet/io/service/WritePropertyMultiple":function(){define(["dojo/_base/array","dojo/_base/declare","./_ServiceMultiple","../../../sys/job","../../../util/encoding/base16"],function(r,p,m,l,h){return p("rc/bacnet/io/service/WritePropertyMultiple",
m,{isMultiple:!1,_buffAry:null,_buffAryIdx:0,constructor:function(c,g,d){this.t=0;this.s=d?15:16;this.r=c;this.o=g},updateSupportsMultiple:function(){this._s=15;if(l.data&&16==this.s){var c=this.r.device;c&&(c=c+"DEV"+c,l.hasFlag(c,"ServicesSupport3",128)&&"1"==l.getAnyProperty(c,"WriteMultiple")&&(this._s=16,this.isMultiple=!0))}},_encode:function(c){var g,d=this.isMultiple?0:16;this.buff=[];r.forEach(c,function(c){this.buff=this.buff.concat(c.o.encode(12));this.isMultiple&&this.buff.push(30);r.forEach(c.pl,
function(a){g=d;this.buff=this.buff.concat(a.p.encode(g|8));g+=16;-1!=a.i&&(this.buff=this.buff.concat(a.i.encode(g|8)));g+=16;this.buff.push(g|14);this.buff=this.buff.concat(a.v.encode());this.buff.push(g|15);a.pr&&(g+=16,this.buff=this.buff.concat(a.pr.encode(g|8)))},this);this.isMultiple&&this.buff.push(31)},this);return this.buff},_decode:function(c,g){this.buff=c;2!=(c[0]&240)>>>4?this.e=1:this.idx=c.length}})})},"rc/bacnet/property":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all ./enums ./unit ./io/AnyPrimitive ./io/Array ./io/Date ./io/DateTime ./io/DeviceObjectPropertyReference ./io/Number ./io/Object ./io/service/ReadPropertyMultiple ./io/Time ./io/util ./Object ../_base/Error ../date rc/util/encoding/base16".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v){return p("rc/bacnet/property",null,{core:[8,8,9,7,7,-1,9,2,-1,1,2,2,7,1,4,2,-1,2,-1,-1,9,4,4,-1,1,4,4,9,7,7,-1,7,-1,2,4,8,9,9,-1,2,2,9,2,7,7,4,7,1,7,4,9,1,8,-1,-1,-1,10,11,7,4,-1,4,2,2,2,4,2,2,4,4,7,-1,9,2,2,12,12,7,-1,9,-1,1,9,-1,9,13,2,-1,2,2,9,7,9,4,9,2,8,8,2,1,9,-1,-1,9,4,-1,4,9,4,-1,7,8,9,2,-1,-1,-1,9,2,3,2,7,-1,-1,2,4,2,4,2,-1,-1,-1,-1,1,2,4,4,2,-1,2,2,2,-1,-1,1,2,2,2,2,-1,-1,4,-1,2,-1,2,4,-1,9,-1,9,-1,2,9,-1,-1,-1,2,7,-1,-1,-1,-1,2,13,-1,
4,2,2,-1,2,-1,2,-1,-1,-1,2,-1,4,-1,2,2,-1,1,-1,2,2,9,8,2,-1,2,-1,-1,2,1,-1,-1,-1,-1,-1,-1,-1,2,-1,4,-1,-1,-1,2,-1,-1,7,-1,-1,-1,9,2,-1,2,2,9,2,9,-1,9,-1,-1,-1,-1,-1,-1,-1,-1,2,-1,-1,9,-1,-1,-1,-1,-1,2,-1,2,-1,-1,-1,-1,9,9,-1,9,9,-1,-1,3,-1,-1,-1,1,-1,2,-1,9,-1,-1,-1,-1,-1,-1,1,2,-1,2,-1,1,-1,2,2,1,1,-1,2,1,9,2,1,-1,9,2,-1,-1,-1,-1,2,2,1,2,7,7,-1,-1,-1,-1,-1,7,9,3,-1,-1,2,2,-1,-1,2,9,2,1,-1,-1,-1,2,2,2,-1,2,9,2,2,2,8,-1,1,-1,-1,8,2,2,-1,-1,7,1,1,12,2,1,-1,9,1,-1,-1,-1,-1,1,2,-1,-1,2,9,-1,7,1,2,4,4,
2,9,4,-1,2,4,4,4,9,1,-1,4,4,-1,2,-1,2,2,9,-1,1,9,2,6,6,1,2,2,6,-1,-1,9,6,1,6,2,1,-1,-1,1,9,-1,2,4,-1,1,6,7,2,9,9,-1,-1,-1,-1,-1,-1,-1,9,6,2,2,6,6,-1,1,2,2,6,7,-1,9,-1,-1,-1,1,9,4,9,9,9,2,12,4,-1,9,-1,-1,2,-1,9,12,2,-1,-1,-1,12,12,-1,2,9,1,1,-1,-1,9,2,7,7,-1,-1,-1,-1,9,-1],exts:[-1,2,2,-1,-1,1,2,2,1,7,9,9,8,2,-1,-1,7,7,2,12,7,7,2,-1,-1,-1,-1,-1,12,9,1,4,2,-1,4,4,-1,2,-1,7,-1,6,1,1,-1,-1,-1,9,2,9,-1,2,2,6,2,-1,-1,9,2,1,7,-1,2,2,1,1,2,2,2,1,2,6,4,-1,9,-1,-1,4,-1,8,2,3,2,2,6,6,1,3,2,2,-1,-1,1,6,-1,2,
7,2,8,2,2,1,6,7,-1,-1,-1,-1,2,7,7,7,1,2,7,4,11,6,2,7,7,7,7,9,1,7,-1,7,1,7,6,1,7,1,7,12,9,7,9,1,2,-1,1,1,2,2,2,9,7,2,-1,7,9,-1,7,7,-1,-1,1,-1,-1,2,2,12,12,-1,-1,-1,-1,9,1,7,1,-1,1,2,1,1,1,1,9,2,2,2,4,4,9,9,2,6,-1,7,2,-1,-1,2,2,1,1,1,2,2,1,1,2,1,7,-1,2,2,9,2,2,1,7,1,8,9,9,9,7,7,7,7,12,2,2,2,1,-1,9,2,2,9,2,3,7,-1,2,1,4,9,-1,-1,12,-1,-1,-1,-1,9,-1,7,1,1,7,2,2,2,2,1,-1,2,-1,9,2,2,-1,9,2,1,1,9,2,2,2,2,10,1,7,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,2,2,1,1,-1,-1,-1,9,-1,-1,7,-1,-1,12],diagnostics:[4,2,2,
2,2,2,2,2,2,2,2,2,2,2,-1,-1,-1,4,7,-1,-1,-1,7,1,-1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,-1,-1,7,-1,2,2,2,2,2,2,2,2,2,-1,1,6,2,2,2,-1,4,2,1,-1,2,4,4,2,2,-1,2,1],extDiagnostics:[7,7,7,7,7,7,1,7],_bitStrUnusedBits:{0:5,1:5,35:5,52:6,111:4,198:4},regExp:"",stringValue:"",prompt:"",isSet:!1,propertyObject:null,property:null,hostObject:null,value:0,arrayIndex:-1,type:null,device:null,constructor:function(){arguments.length&&this.set.apply(this,arguments)},set:function(a,b,f,k,q){if("number"!==typeof a)throw new x({message:h.noPropertyProvided,
suggestion:h.noPropertyProvidedSuggestion});var d=w.isPropertyAnArray(a)?k:-1;if(this.property!==a||this.arrayIndex!=d||this.device!=q||this.hostObject.type!=b.type||this.hostObject.instance!=b.instance)this.stringValue="",this.isSet=!1;this.property=a;this.value=f||0;this.arrayIndex=w.isPropertyAnArray(a)?k:-1;this.hostObject=b||null;this.device=q||null;this.type=0===this.arrayIndex?c.primitiveTypes.UNSIGNED_INTEGER:this._getSupportedType(this.property);this.propertyObject=this._getPropertyObject(this.type)},
fetch:function(a){if(null==this.hostObject||null==this.device)throw new x({message:h.noPropertyProvided,suggestion:h.noPropertyProvidedSuggestion});return w.isPropertyAnArray(this.property)&&0==this.arrayIndex?this._fetch(a,c.primitiveTypes.UNSIGNED_INTEGER):this.type===c.primitiveTypes.COMPLEX&&222===this.property?this._fetch(a,c.primitiveTypes.CHARACTER_STRING):this._fetch(a)},isArray:function(){switch(this.property){case c.propertyTypes.PROPID_ACTION:case c.propertyTypes.PROPID_ACTION_TEXT:case c.propertyTypes.PROPID_EXCEPTION_SCHEDULE:case c.propertyTypes.PROPID_OBJECT_LIST:case c.propertyTypes.PROPID_PRIORITY:case c.propertyTypes.PROPID_PRIORITY_ARRAY:case c.propertyTypes.PROPID_WEEKLY_SCHEDULE:case c.propertyTypes.PROPID_EVENT_TIME_STAMPS:case c.propertyTypes.PROPID_SLAVE_PROXY_ENABLE:case c.propertyTypes.PROPID_AUTO_SLAVE_DISCOVERY:case c.propertyTypes.PROPID_CONFIGURATION_FILES:case c.propertyTypes.PROPID_STATE_TEXT:return!0;
default:return!1}},updateValueFromValueObject:function(a){this.propertyObject=a;this.isSet=!0;this._setDisplayInfo()},_getPropertyObject:function(b){var f;switch(b){case c.primitiveTypes.BINARY:case c.primitiveTypes.UNSIGNED_INTEGER:case c.primitiveTypes.SIGNED_INTEGER:case c.primitiveTypes.REAL:case c.primitiveTypes.DOUBLE:case c.primitiveTypes.ENUMERATED:f=new k(0,b);break;case c.primitiveTypes.DATE:f=new a(0,0,0,0);break;case c.primitiveTypes.TIME:f=new u(0,0,0,0);break;case c.primitiveTypes.OCTET_STRING:case c.primitiveTypes.CHARACTER_STRING:case c.primitiveTypes.BIT_STRING:f=
new n([],b);break;case c.primitiveTypes.ANY_PRIMITIVE:f=new d;break;case c.primitiveTypes.BACNET_OBJECT_IDENTIFIER:f=new q(0,0);break;case c.primitiveTypes.NULL:case c.primitiveTypes.COMPLEX:this.property===c.propertyTypes.PROPID_OBJECT_PROPERTY_REFERENCE?f=new t(new q(c.objectTypes.OBJID_DEVICE,this.device)):w.isPropertyAnArray(this.property)&&(f=new d)}return f},_fetch:function(a,b){b||(b=this.type);var d=this._getPropertyObject(b);if(!m.isObject(d))return null;d=[{o:new q(this.hostObject.type,
this.hostObject.instance),pl:[{p:new k(this.property,c.primitiveTypes.ENUMERATED),i:w.isPropertyAnArray(this.property)?new k(this.arrayIndex,c.primitiveTypes.UNSIGNED_INTEGER):-1,v:d}]}];d=new f({device:this.device,index:a},d);return rc.xhr.request({gid:"GRP",type:"bacnet",s:d,handle:m.hitch(this,function(a){if(a instanceof x)return a.classCode&&(this.propertyObject=a.classCode),a;m.isObject(a)&&a.isInstanceOf(f)&&this._onFetch(a.o[0].pl[0].v);return this.propertyObject}),silentError:!0})},_onFetch:function(a){this.propertyObject=
a;this.isSet=!0;this._setDisplayInfo()},_setDisplayInfo:function(){var a=this.propertyObject;if(a)if("rc/bacnet/io/Object"===a.declaredClass)this.regExp="\\d+\\s\\d+",this.prompt=h.objectIDType,this.stringValue=c.mnemonics[a.t]+a.i;else if("number"===typeof a.t)switch(a.t){case c.primitiveTypes.BINARY:this.regExp="0|1";this.prompt=h.booleanOnly;this.stringValue=a.v+"";break;case c.primitiveTypes.UNSIGNED_INTEGER:this.regExp="[0-9]*.?[0-9]+";this.prompt=h.unsignedNumbers;this.stringValue=a.v+"";break;
case c.primitiveTypes.SIGNED_INTEGER:case c.primitiveTypes.REAL:case c.primitiveTypes.DOUBLE:this.regExp="[-+]?[0-9]*.?[0-9]+";this.prompt=h.signedNumbers;this.stringValue=a.v+"";break;case c.primitiveTypes.ENUMERATED:this.regExp="\\d+";this.prompt=h.postitveIntegersOnly;this.isUnit(this.property)?this.stringValue=g.getAbbreviation(a.v):this.stringValue=a.v+"";break;case c.primitiveTypes.BIT_STRING:this.property===c.propertyTypes.PROPID_STATUS_FLAGS?(this.regExp="Alm\\s(0|1)\\sFlt\\s(0|1)\\sOvrRdn\\s(0|1)\\sOOS\\s(0|1)",
this.prompt=h.statusFlags,this.stringValue=this._toDisplayStatusBits(a,this.property)):(this.regExp="((0|1),){"+(this._getUsedBits(a.ary)-1)+"}(0|1)",this.prompt=h.bitString,this.stringValue=this.bitStringToString(a));break;case c.primitiveTypes.CHARACTER_STRING:(this.stringValue=a.getString())&&0<this.stringValue.length&&(this.stringValue=this.stringValue.split("\r").join("\x3cbr\x3e"));break;case c.primitiveTypes.OCTET_STRING:this.regExp="((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]),)*(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";
this.prompt=h.octets;this.stringValue=a.ary.join();break;case c.primitiveTypes.DATE:this.regExp="(0?\\d|[1-2]\\d|3[0-1])\\/(0?\\d|1[0-2])\\/\\d{1,4}";this.prompt=h.dateFormat;this.stringValue=a.d+"/"+a.m+"/"+(a.y+1900);break;case c.primitiveTypes.TIME:this.regExp="((0?\\d|1\\d|2[0-3]):(0?\\d|[1-5]\\d):(0?\\d|[1-5]\\d).([0]?\\d|[1-9]\\d))";this.prompt=h.timeFormat;this.stringValue=a.h+":"+(10>a.m?"0"+a.m:a.m)+":"+a.s+"."+a.hh;break;case c.primitiveTypes.ANY_PRIMITIVE:this.stringValue=a.v.v.toString()}else if(a instanceof
t){this.prompt="Mnemonic: Property[index]  ex. 1000DEV1000: 76[2]";var f=new z(a.d?a.d.i:this.device,a.o.t,a.o.i),k=null!=a.i?"["+a.i+"]":"";this.stringValue=f.toMnemonic()+": "+a.p.v+k;this.regExp="\\d+\\D{2,5}\\d+(:)\\s\\d+|\\d+\\D{2,5}\\d+(:)\\s\\d+\\[\\d+\\]"}else if(a instanceof d)this.regExp="\\w*",this.prompt=h.anyValue,this.stringValue=a.v.v.toString();else if(a instanceof b){this.regExp="(0?\\d|[1-2]\\d|3[0-1])\\/(0?\\d|1[0-2])\\/\\d{1,4}s+((0?\\d|1\\d|2[0-3]):(0?\\d|[1-5]\\d):(0?\\d|[1-5]\\d).([0]?\\d|[1-9]\\d))";
this.prompt=h.dateTimeFormat;var f=10>a.t.m?"0"+a.t.m:a.t.m,k=10>a.t.s?"0"+a.t.s:a.t.s,q=["Valid dow vals are 1-7",h.monday,h.tuesday,h.wednesday,h.thursday,h.friday,h.saturday,h.sunday],q=0<a.d.dow&&8>a.d.dow?q[a.d.dow]+" ":"",u=a.d.m;255===a.d.m?u="Any":13===a.d.m?u="Odd":14===a.d.m?u="Even":32===a.d.m&&(u="Last");var n=a.d.d;33===a.d.d?n="Odd":34===a.d.d&&(n="Even");this.stringValue=q+n+"/"+u+"/"+(255===a.d.y?"Any":a.d.y+1900)+" "+(255===a.t.h?"Any":a.t.h)+":"+(255===f?"Any":f)+":"+(255===k?"Any":
k)+"."+(255===a.t.hh?"Any":a.t.hh)}},setValue:function(a){this.stringValue=a;var f=this.propertyObject,d=[];if(f)if(f instanceof q)d=a.split(" "),f.t=d[0]=parseInt(d[0],10),f.i=d[1]=parseInt(d[1],10);else if("number"===typeof f.t)switch(f.t){case c.primitiveTypes.BINARY:case c.primitiveTypes.UNSIGNED_INTEGER:case c.primitiveTypes.SIGNED_INTEGER:case c.primitiveTypes.ENUMERATED:case c.primitiveTypes.REAL:case c.primitiveTypes.DOUBLE:f.v=parseFloat(a);break;case c.primitiveTypes.DATE:this.setDateValue(f,
a);break;case c.primitiveTypes.TIME:this.setTimeValue(f,a);break;case c.primitiveTypes.ANY_PRIMITIVE:this.property===c.propertyTypes.PROPID_SCHEDULE_DEFAULT&&(f.v.v=parseInt(a,10));break;case c.primitiveTypes.CHARACTER_STRING:d=this._getStringLength(this.property);a.length>d&&(a=a.slice(0,d));f.ary=v.strToHex(a);break;case c.primitiveTypes.BIT_STRING:d=this.property===c.propertyTypes.PROPID_STATUS_FLAGS?this._getStatusBits(a):a.split(",");f=this.bitArrayToBacnetBitString(d,f);break;case c.primitiveTypes.OCTET_STRING:f.ary=
a.split(",")}else if(f instanceof t){var g=/\D+/,g=a.split(g),d=parseFloat(g[0]),u=parseFloat(g[1]);f.p=new k(parseFloat(g[2])||c.propertyTypes.PROPID_PRESENT_VALUE,c.primitiveTypes.ENUMERATED);f.i=parseFloat(g[3])||null;null!=f.i&&(f.i=new k(f.i,c.primitiveTypes.UNSIGNED_INTEGER));g=/\d+/;g=a.split(g);a=r.indexOf(w.baseMnes,g[1]);f.o=new q(a,u);f.d=new q(c.objectTypes.OBJID_DEVICE,d)}else f instanceof b&&(d=a.match("(0?\\d|[1-2]\\d|3[0-1])\\/(0?\\d|1[0-2])\\/\\d{1,4}")[0],this.setDateValue(f.d,d),
d=["Valid dow vals are 1-7",h.monday,h.tuesday,h.wednesday,h.thursday,h.friday,h.saturday,h.sunday],u=a.match("([A-Za-z]+)")[0],d=d.indexOf(u),1<=d&&(f.d.dow=d),a=a.match("((0?\\d|1\\d|2[0-3]):(0?\\d|[1-5]\\d):(0?\\d|[1-5]\\d).([0]?\\d|[1-9]\\d))")[0],this.setTimeValue(f.t,a))},setTimeValue:function(a,b){var f=b.split(":"),c=[0,0];2<f.length&&(c=f[2].split("."));a.h=parseInt(f[0],10);a.m=parseInt(f[1],10);a.s=parseInt(c[0],10);a.hh=parseInt(c[1],10);return a},setDateValue:function(a,b){var f=b.split("/");
a.y=parseInt(f[2],10)-1900;a.m=parseInt(f[1],10);a.d=parseInt(f[0],10);f=(new Date(a.y,a.m,a.d)).getDay();0===f&&(f=7);a.dow=f;return a},bitStringToString:function(a){for(var b=this._getUsedBits(a.ary),f=[],c=0;c<b;c++)f[c]=a.getBit(c);return f.join()},_getUsedBits:function(a){return 8*(a.length-1)-a[0]},bitArrayToBacnetBitString:function(a,b){var f,c=[],k;if(a.length){b.ary=[];f=a.length%8;k=Math.floor(a.length/8);f&&k++;b.ary.push(f?8-f:0);f=function(a){for(var b=128,f=0,c=0;c<a.length;c++)f+=b*
a[c],b/=2;return f};for(var q=0,d=0;d<k;d++)c.push(a.slice(q,q+8)),q+=8,b.ary.push(f(c[d]))}return b},_toDisplayStatusBits:function(a){for(var b=["Alm","Flt","OvrRdn","OOS"],f="",c=this._getUsedBits(a.ary),k=0;k<c;k++)f+=b[k]+" "+a.getBit(k)+" ";return f},_getStatusBits:function(a){a=a.split(" ");var b=[];b.push(a[1]);b.push(a[3]);b.push(a[5]);b.push(a[7]);return b},_getStateText:function(a){for(var b="",f=0;f<a.length;f++)b+=a[f].getString()+";";a.length&&(b=b.slice(0,-1));return b},isCharString:function(){return this.propertyObject.hasOwnProperty("t")&&
7===this.propertyObject.t?!0:!1},isUnit:function(){switch(this.property){case c.propertyTypes.PROPID_UNITS:case c.propertyTypes.PROPID_PROPORTIONAL_CONSTANT_UNITS:case c.propertyTypes.PROPID_OUTPUT_UNITS:case c.propertyTypes.PROPID_INTEGRAL_CONSTANT_UNITS:case c.propertyTypes.PROPID_DERIVATIVE_CONSTANT_UNITS:case c.propertyTypes.PROPID_CONTROLLED_VARIABLE_UNITS:return!0;default:return!1}},_isList:function(){switch(this.property){case c.propertyTypes.PROPID_RECIPIENT_LIST:case c.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:case c.propertyTypes.PROPID_DATELIST:case c.propertyTypes.PROPID_TIME_SYNCHRONIZATION_RECIPIENTS:case c.propertyTypes.PROPID_VT_CLASSES_SUPPORTED:case c.propertyTypes.PROPID_ACTIVE_VT_SESSIONS:case 55:case c.propertyTypes.PROPID_DEVICE_ADDRESS_BINDING:case c.propertyTypes.PROPID_ACTIVE_COV_SUBSCRIPTIONS:case c.propertyTypes.PROPID_MANUAL_SLAVE_ADDRESS_BINDING:case c.propertyTypes.PROPID_SLAVE_ADDRESS_BINDING:return!0;
default:return!1}},canAddRemoveListElement:function(){switch(this.property){case c.propertyTypes.PROPID_RECIPIENT_LIST:case c.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:case c.propertyTypes.PROPID_DATELIST:case c.propertyTypes.PROPID_TIME_SYNCHRONIZATION_RECIPIENTS:return!0;default:return!1}},_getStringLength:function(a){return{3:32,4:32,12:64,28:255,29:64,31:64,43:32,44:64,46:32,48:64,58:64,70:64,77:64,85:255,121:32,110:32,168:64,352:64}[a]||32},_getSupportedType:function(a){return 0<=
a&&491>=a?this.core[a]:1024<=a&&1330>=a?this.exts[a-1024]:2048<=a&&2122>=a?this.diagnostics[a-2048]:65536<=a&&65543>=a?this.extDiagnostics[a-65536]:-1},toString:function(){return"rc.bacnet.Property , property: "+this.property+", property io obj : "+this.propertyObject+", type: "+this.type+", value: "+this.value+", array index: "+this.arrayIndex+", hostObject: "+this.hostObject+", device: "+this.device}})})},"rc/StyleSwitcher":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/cookie dojo/Deferred dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/Evented dojo/i18n!rc/nls/all dojo/request/xhr dojo/query require".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return new (p("rc/StyleSwitcher",[a],{dir:q.toUrl("rc/themes/"),ssMedia:{},initialize:function(){var a=this._getNode("themeId");this.themes={Gray:{name:b.gray,node:a,normal:{width:10,path:this.dir+"rcblack/rcblack.css"},large:{width:15,path:this.dir+"rcblack/subthemes/rcblack-lg/rcblack-lg.css"}},Black:{name:b.black,node:a,normal:{width:20,path:this.dir+"rcblack/subthemes/rcxtrablack/rcxtrablack.css"},large:{width:25,path:this.dir+"rcblack/subthemes/rcxtrablack-lg/rcxtrablack-lg.css"}},
White:{name:b.white,node:a,normal:{width:30,path:this.dir+"rcblack/subthemes/rcwhite/rcwhite.css"},large:{width:35,path:this.dir+"rcblack/subthemes/rcwhite-lg/rcwhite-lg.css"}},"Kiosk optimized":{name:b.kioskoptimized,node:a,normal:{width:40,path:this.dir+"rcblack/subthemes/kiosk/kiosk.css"},large:{width:45,path:this.dir+"rcblack/subthemes/kiosk-lg/kiosk-lg.css"}}};for(var c in this.themes)"undefined"!==typeof this.themes[c].name&&(this.themes[c].title=this.themes[c].name);this.fontSizes={normal:{name:b.normal},
large:{name:b.large}};for(var k in this.fontSizes)"undefined"!==typeof this.fontSizes[k].name&&(this.fontSizes[k].title=this.fontSizes[k].name);a=this._getNode("printId");this.printStyle={title:"Print",path:this.dir+"print/print.css",node:a,width:5}},cacheStyleSheet:function(a){return t.get(this.themes[a.style][a.fontSize].path,{})},enableStyleSheet:function(a,b){var f,c,k=!1,q;for(f=0;c=a.getElementsByTagName("link")[f];f++)-1!==c.getAttribute("rel").indexOf("style")&&c.getAttribute("title")&&(c.disabled=
!0,-1===c.getAttribute("rel").indexOf("alt")&&(q=c),"currentTheme"===c.getAttribute("title")&&(c.disabled=!1,c.removeAttribute("disabled"),k=!0,c.rel="stylesheet",c.href=this.themes[b.style][b.fontSize].path));k||(q.disabled=!1)},getPreferredStyleSheet:function(){return this.getDefaultTheme()},getPreferredFontSize:function(){return this.getDefaultFontSize()},getActiveStyleSheet:function(){var a,b,c;for(a=0;b=document.getElementsByTagName("link")[a];a++)if(-1!==b.getAttribute("rel").indexOf("style")&&
"currentTheme"===b.getAttribute("title")&&!b.disabled){for(a=0;a<this.themes.length;a++)this.themes[a].path===b.href&&(c=this.themes[a].title);return c}return null},getTheme:function(){return{style:this.getStyle(),fontSize:this.getFontSize()}},getStyle:function(){var a=this._readCookie("st"),a=null===a?this.getPreferredStyleSheet():a;if(this._isAdmin()||!this.themes.hasOwnProperty(a))a="Gray";return a},getFontSize:function(){var a=this._readCookie("fs");return null===a?this.getPreferredFontSize():
a},getThemes:function(){return this.themes},getFontSizes:function(){return this.fontSizes},getDefaultTheme:function(){return"Gray"},getDefaultFontSize:function(){return"normal"},onStyle:function(a){this.emit("style",a.style);return a},onBeforeStyle:function(a){this.emit("beforeStyle",a.style);return a},setActiveTheme:function(a){this._setActiveTheme(a,{style:this.getStyle(),fontSize:this.getFontSize()})},setActiveFontSize:function(a,b){this._setActiveTheme(a,{style:this.getStyle(),fontSize:b})},setActiveStyleSheet:function(a,
b){this._setActiveTheme(a,{style:b,fontSize:this.getFontSize()})},waitUntilRendered:function(a,b){var f=new c;this.watcher&&clearInterval(this.watcher);this.watchTimeout&&clearTimeout(this.watchTimeout);this.watcher=setInterval(m.hitch(this,function(){var c=n.position(b);100<c.w||c.w!==a.width||(clearInterval(this.watcher),this.watchTimeout&&clearTimeout(this.watchTimeout),f.resolve(a.title))}),100);this.watchTimeout=setTimeout(m.hitch(this,function(){this.watcher&&clearInterval(this.watcher);f.isFulfilled()||
f.reject(Error(a.title+" theme taking too long to render."))}),5E3);return f.promise},_changeStyleSheet:function(a,b){this.watcher&&clearInterval(this.watcher);this.watchTimeout&&clearTimeout(this.watchTimeout);for(var f,k=!1,q=0;f=a.getElementsByTagName("link")[q];q++)-1!==f.getAttribute("rel").indexOf("style")&&"currentTheme"===f.getAttribute("title")&&(k=!0);this.onBeforeStyle(b);f=new c;f.resolve(!0);k||2>rc.test.mode&&f.then(m.hitch(this,this.cacheStyleSheet,b));f.then(m.hitch(this,function(){return this.enableStyleSheet(a,
b)}));return this.waitUntilRendered(this.themes[b.style][b.fontSize],this.themes[b.style].node)},_createCookie:function(a,b,c){var f="";c&&(f=new Date,f.setTime(f.getTime()+864E5*c),f="; expires\x3d"+f.toGMTString());document.cookie=a+"\x3d"+b+f+"; path\x3d/"},_getNode:function(a){var b=k("."+a);return b.length?b[0]:g.create("div",{className:a},l.body(),"last")},_readCookie:function(a){a+="\x3d";for(var b=document.cookie.split(";"),f=0;f<b.length;f++){for(var c=b[f];" "===c.charAt(0);)c=c.substring(1,
c.length);if(0===c.indexOf(a))return c.substring(a.length,c.length)}return null},_setActiveTheme:function(a,b){var f=this._changeStyleSheet(a,b),k=new c;f.then(m.hitch(this,function(){this.onStyle(b)}));f.always(m.hitch(this,function(){k.resolve()}));this._toggleRootCscClass(b.style);this._isAdmin()||(this._createCookie("st",b.style,365),this._createCookie("fs",b.fontSize,365));return k.promise},_toggleRootCscClass:function(a){d.replace(document.body,a,Object.keys(this.themes))},_isAdmin:function(){return window.location.pathname.toUpperCase().startsWith("/ADMIN/")},
destroy:function(){this.ssMedia=null}}))})},"rc/bacnet/BTLProperties":function(){define("dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!rc/nls/all dojo/on dojo/promise/Promise dojo/ready dojo/store/Memory dojo/string dojo/text!rc/bacnet/_btlProperties/templates/BTLProperties.html ./_btlProperties/ReadWriteEntry ./enums ./io/Error ./io/Object ./io/service/ReadPropertyMultiple ./io/service/WritePropertyMultiple ./io/util ../_Widget ../widget/Toolbar dijit/form/Button dijit/form/TextBox dijit/layout/BorderContainer dijit/layout/ContentPane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v){return m("rc/bacnet/BTLProperties",[y],{templateString:t,objectToMneMap:null,currentObjects:null,objectTypeStore:null,objectRefInput:null,requestSingleCount:0,deviceId:-1,systemId:-1,_updating:!1,_buttons:null,_addEntryToList:function(){if(this._checkForValidity()){var a=this._getEntryObject(),b=a.deviceId+x.objectIdToMne(a.objectId)+a.objectInstance+":"+a.property;-1!==a.arrayIndex&&(b+="["+a.arrayIndex+"]");null===this.currentObjects&&(this.currentObjects=
{count:0});this.currentObjects.hasOwnProperty(b)||(this.currentObjects[b]=new k({objectReference:b,deviceId:Number(a.deviceId),objectId:Number(a.objectId),objectInstance:Number(a.objectInstance),propertyId:Number(a.property),arrayIndex:Number(a.arrayIndex)}),this.own(g(this.currentObjects[b],"delete",l.hitch(this,this._clearSingleEntry))),h.place(this.currentObjects[b].domNode,this.objectsToRead,"last"),this.currentObjects.count++);0<this.currentObjects.count&&(this.deviceIdInput.set("disabled",!0),
this.deviceId=this.currentObjects[b].deviceId)}},_beginUpdate:function(){if(this._updating)return!1;this._updating=!0;p.forEach(this._buttons,"item.set('disabled', true);");return!0},_buildButtonActions:function(){this.own(g(this.addEntryButton,"click",l.hitch(this,this._addEntryToList)));this._buttons.push(this.addEntryButton);this.own(g(this.clearEntriesButton,"click",l.hitch(this,this._clearEntries)));this._buttons.push(this.clearEntriesButton);this.own(g(this.readButton,"click",l.hitch(this,function(){this.currentObjects&&
0<this.currentObjects.count&&this.readEntries()})));this._buttons.push(this.readButton);this.own(g(this.writeButton,"click",l.hitch(this,function(){this.currentObjects&&0<this.currentObjects.count&&this.writeEntries()})));this._buttons.push(this.writeButton)},_buildObjectSelection:function(){null===this.objectRefInput&&(this.objectRefInput=new r({store:this.objectTypeStore,searchAttr:"name",autoComplete:!1,queryExpr:"*${0}*"},this.objectSelectionContainer),this.objectRefInput.startup())},_checkForValidity:function(){var a=
!1;return a=isNaN(this.deviceIdInput.get("value"))||""===this.deviceIdInput.get("value")?!1:!this.objectRefInput.isValid()&&isNaN(this.objectRefInput.get("displayedValue"))?!1:isNaN(this.instanceRefInput.get("value"))||""===this.instanceRefInput.get("value")?!1:isNaN(this.propertyRefInput.get("value"))||""===this.propertyRefInput.get("value")?!1:""!==this.arrayIdxInput.get("value")&&isNaN(this.arrayIdxInput.get("value"))?!1:!0},_clearEntries:function(){if(null!==this.currentObjects){for(var a in this.currentObjects)this.currentObjects[a]instanceof
k&&(h.destroy(this.currentObjects[a].domNode),delete this.currentObjects[a]);this.currentObjects.count=0;this.deviceIdInput.set("disabled",!1)}},_clearSingleEntry:function(a){this.currentObjects[a]instanceof k&&(h.destroy(this.currentObjects[a].domNode),delete this.currentObjects[a],this.currentObjects.count--,0===this.currentObjects.count&&this.deviceIdInput.set("disabled",!1))},constructor:function(){this.objectToMneMap=[];for(var b=0;b<Object.keys(q.objectNames).length;b++)this.objectToMneMap.push({name:b+
"-"+q.objectNames[b],mne:x.objectIdToMne(b),id:b});this.objectTypeStore=new a({data:this.objectToMneMap})},_createToolbar:function(){return new v({region:"top",buttons:{Print:!1,Export:!1}},h.create("div",{}))},destroy:function(){this.inherited(arguments)},_endUpdate:function(){this._updating&&(p.forEach(this._buttons,"item.set('disabled', false);"),this._updating=!1)},_forceReadSingle:function(){if(this._beginUpdate()){var a=null,b=[],f;for(f in this.currentObjects)this.currentObjects[f]instanceof
k&&(a=this.currentObjects[f],b=[{o:new u(a.objectId,a.objectInstance),pl:[a.getPropertyListObject(!1,a.objectId)]}],b=new w({device:this.deviceId,index:0,systemId:this.systemId},b,!0),this.requestSingleCount++,rc.xhr.request({gid:"BTLRead",type:"bacnet",s:b,handle:l.hitch(this,this._forceSingleFinished,a)}))}},_forceSingleFinished:function(a,b){this.requestSingleCount--;0===this.requestSingleCount&&this._endUpdate();b instanceof f?this._updateDisplayValues(b.s,b.classCode):b instanceof Error?a.updateDisplayValues(a.objectReference,
b.message,a.objectType):(b instanceof w||b instanceof z)&&this._updateDisplayValues(b)},_makeWriteRequest:function(a){return rc.xhr.request(a)},_forceWriteSingle:function(){if(this._beginUpdate()){var a=null,b=[],f;for(f in this.currentObjects)this.currentObjects[f]instanceof k&&(a=this.currentObjects[f],b=[{o:new u(a.objectId,a.objectInstance),pl:[a.getPropertyListObject(!0,a.objectId)]}],b=new z({device:this.deviceId,index:0,systemId:this.systemId},b,!0),this.requestSingleCount++,this._makeWriteRequest({gid:"BTLWrite",
type:"bacnet",s:b,handle:l.hitch(this,this._forceSingleFinished,a)}))}},_getEntryObject:function(){return{deviceId:this.deviceIdInput.get("value"),objectId:this.objectRefInput.isValid()?this.objectRefInput.get("value"):this.objectRefInput.get("displayedValue"),objectInstance:this.instanceRefInput.get("value"),property:this.propertyRefInput.get("value"),arrayIndex:""!==this.arrayIdxInput.get("value").trim()?this.arrayIdxInput.get("value"):-1}},_getObjectsByIdAndInstance:function(a){var b={},f={},c=
null,q="",d;for(d in this.currentObjects)this.currentObjects[d]instanceof k&&(c=this.currentObjects[d],q=c.objectId+"|"+c.objectInstance,void 0===b[q]&&(b[q]={o:new u(c.objectId,c.objectInstance),pl:[]}),f=c.getPropertyListObject(a,c.objectId),null!==f?b[q].pl.push(f):c.updateDisplayValues(c.objectReference,"Could not complete operation",c.objectType));return b},_getObjectsForRequest:function(a){a=this._getObjectsByIdAndInstance(a);var b=null,f=[],c;for(c in a)b=a[c],b.hasOwnProperty("o")&&b.hasOwnProperty("pl")&&
0<b.pl.length&&f.push(b);return f},_getTitle:function(){this._setTitle("Read/Write BACnet Properties")},_getToolbarButtons:function(){return this._toolbar.getPageButtons()},postCreate:function(){rc.session.hasRole(rc.session.roles.bacnetAdvChg)?(this.inherited(arguments),this._toolbar=this._createToolbar(),h.place(this._toolbar.domNode,this._container.domNode,"first"),this._buttons=this._getToolbarButtons(),this.setTooltips(),this._buildObjectSelection(),this._buildButtonActions(),this._container.startup(),
n(l.hitch(this,function(){this.onInitSuccess()}))):n(l.hitch(this,function(){var a=new rc.Error({name:c.permissionDenied,message:b.substitute(c.notAuthToViewX,["Read/Write BACnet Properties"])});this._onInitError(a)}))},readEntries:function(){if(this._beginUpdate()){var a=this._readEntries();a instanceof d?a.always(l.hitch(this,function(a){this._endUpdate();a instanceof f?(this._updateDisplayValues(a.s,a.classCode),this._forceReadSingle()):a instanceof Error&&this._forceReadSingle()})):this._endUpdate()}},
_readEntries:function(){var a=this._getObjectsForRequest(!1);if(0<a.length)return a=new w({device:this.deviceId,index:0,systemId:this.systemId},a,1>=this.currentObjects.count),rc.xhr.request({gid:"BTLRead",type:"bacnet",s:a,handle:l.hitch(this,function(a){if(a instanceof Error)return a;a instanceof w&&this._updateDisplayValues(a);return null})})},_setTitle:function(a){this.fullTitle=this.title=a;this._toolbar&&this.title&&this._toolbar.setTitle(this.title);this.onSetTitle(this.title)},_updateDisplayValues:function(a,
b){for(var f="",c="",k="",q="",f=null,d=a.r.device,g=0;g<a.o.length;g++)for(var c=x.objectIdToMne(a.o[g].o.t),k=a.o[g].o.i,u=0;u<a.o[g].pl.length;u++)q=a.o[g].pl[u].hasOwnProperty("i")&&-1!==a.o[g].pl[u].i?a.o[g].pl[u].i.hasOwnProperty("v")&&-1!==a.o[g].pl[u].i.v?"["+a.o[g].pl[u].i.v+"]":"":"",f=d+c+k+":"+a.o[g].pl[u].p.v+q,this.currentObjects.hasOwnProperty(f)||"[0]"!==q||(f=d+c+k+":"+a.o[g].pl[u].p.v),f=this.currentObjects[f],0<a.e&&b?f.bacnetObject.propertyObject=b:!a.o[g].pl[u].v.hasOwnProperty("t")&&
a.o[g].pl[u].v.hasOwnProperty("v")?f.bacnetObject.propertyObject=a.o[g].pl[u].v.v:f.bacnetObject.propertyObject=a.o[g].pl[u].v,f.bacnetObject.isSet=!0,f.updateValue()},writeEntries:function(){if(this._beginUpdate()){var a=this._writeEntries();a instanceof d?a.always(l.hitch(this,function(a){this._endUpdate();a instanceof Error&&this._forceWriteSingle()})):this._endUpdate()}},_writeEntries:function(){var a=this._getObjectsForRequest(!0);if(0<a.length)return a=new z({device:this.deviceId,index:0,systemId:this.systemId},
a,1>=this.currentObjects.count),this._makeWriteRequest({gid:"BTLWrite",type:"bacnet",s:a,handle:l.hitch(this,function(a){if(a instanceof Error)return a;a instanceof z&&this._updateDisplayValues(a)})})}})})},"rc/bacnet/_btlProperties/ReadWriteEntry":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/store/Memory dojo/text!rc/bacnet/_btlProperties/templates/ReadWriteEntry.html rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/Array rc/bacnet/io/Date rc/bacnet/io/DateTime rc/bacnet/io/DeviceObjectPropertyReference rc/bacnet/io/Error rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/Time rc/bacnet/io/util rc/bacnet/Object rc/bacnet/property rc/date dijit/form/Textarea".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E){return c("rc/bacnet/_btlProperties/ReadWriteEntry",[p,r,m],{widgetsInTemplate:!0,templateString:n,priorityOptions:null,priorityInput:null,objectTypeOptions:null,objectTypeInput:null,objectReference:"",objectValue:"Read Required",objectType:-1,deviceId:-1,objectId:-1,objectInstance:-1,propertyId:-1,arrayIndex:-1,priority:-1,_buildFilteringSelect:function(a,b,f,c){null===this[a]&&(this[a]=(new l({name:"priorityRef",store:new d({data:b}),searchAttr:"label",
value:c,autoComplete:!1,queryExpr:"*${0}*",required:!1})).placeAt(f))},constructor:function(){this.priorityOptions=[{label:"None",id:-1}];for(var b=1;16>=b;b++)this.priorityOptions.push({label:b,id:b});this.objectTypeOptions=[{label:"Complex",id:a.primitiveTypes.COMPLEX},{label:"NULL",id:a.primitiveTypes.NULL},{label:"Binary",id:a.primitiveTypes.BINARY},{label:"Unsigned Integer",id:a.primitiveTypes.UNSIGNED_INTEGER},{label:"Signed Integer",id:a.primitiveTypes.SIGNED_INTEGER},{label:"Real",id:a.primitiveTypes.REAL},
{label:"Double",id:a.primitiveTypes.DOUBLE},{label:"Octet String",id:a.primitiveTypes.OCTET_STRING},{label:"Character String",id:a.primitiveTypes.CHARACTER_STRING},{label:"Bit String",id:a.primitiveTypes.BIT_STRING},{label:"Enumerated",id:a.primitiveTypes.ENUMERATED},{label:"Date",id:a.primitiveTypes.DATE},{label:"Time",id:a.primitiveTypes.TIME},{label:"BACnetObjectIdentifier",id:a.primitiveTypes.BACNET_OBJECT_IDENTIFIER},{label:"Any Primative",id:a.primitiveTypes.ANY_PRIMITIVE}]},getObjectValues:function(a){var b=
a.split(/\D+/)[1];a=a.split(/\d+/)[0];return h.indexOf(y.baseMnes,a)+" "+b},getProperties:function(){return{deviceId:this.deviceId,objectId:this.objectId,objectInstance:this.objectInstance,stringValue:this.valueInput.get("value"),propertyId:this.propertyId,arrayIndex:this.arrayIndex,priority:this.priority}},getPropertyListObject:function(c,k){var d=null,g=null;this.objectValue=c?this.valueInput.get("value"):0;this.objectType=Number(this.objectTypeInput.get("value"));if(c&&this.objectType===a.primitiveTypes.ANY_PRIMITIVE)return null;
var u=this._getSpecialCase(this.objectType,k);switch(u){case a.primitiveTypes.DOUBLE:d=new w(this.objectValue,u);break;case a.primitiveTypes.UNSIGNED_INTEGER:if(this.propertyId===a.propertyTypes.PROPID_PRIORITY){d=new w(this.objectValue,u);break}case a.primitiveTypes.NULL:if(this.propertyId===a.propertyTypes.PROPID_OBJECT_PROPERTY_REFERENCE){d=new f(new z(a.objectTypes.OBJID_DEVICE,u));break}case a.primitiveTypes.BINARY:case a.primitiveTypes.SIGNED_INTEGER:case a.primitiveTypes.REAL:case a.primitiveTypes.BIT_STRING:case a.primitiveTypes.ENUMERATED:case a.primitiveTypes.DATE:case a.primitiveTypes.TIME:d=
this.bacnetObject.propertyObject;break;case a.primitiveTypes.OCTET_STRING:case a.primitiveTypes.CHARACTER_STRING:d=new t([],u);break;case a.primitiveTypes.ANY_PRIMITIVE:d=new b;break;case a.primitiveTypes.BACNET_OBJECT_IDENTIFIER:c&&(this.objectValue=this.getObjectValues(this.objectValue));d=new z(0,0);break;case a.primitiveTypes.COMPLEX:this.propertyId===a.propertyTypes.PROPID_OBJECT_PROPERTY_REFERENCE&&(d=new f(new z(a.primitiveTypes.BIT_STRING,u))),this.propertyId===a.propertyTypes.PROPID_PRESENT_VALUE&&
this.objectId===a.objectTypes.OBJID_DATETIME_VALUE&&(d=new q)}c&&(this.bacnetObject.propertyObject=d,this.bacnetObject.setValue(this.objectValue));null!==d&&(g={p:new w(this.propertyId,a.primitiveTypes.ENUMERATED),i:new w(this.arrayIndex,a.primitiveTypes.UNSIGNED_INTEGER),v:d},this.priority=Number(this.priorityInput.get("value")),1<=this.priority&&16>=this.priority&&(g.pr=new w(this.priority,a.primitiveTypes.UNSIGNED_INTEGER)));return g},_getSpecialCase:function(b,f){var c=b;if(y.isPropertyAnArray(this.propertyId,
f)&&0===this.arrayIndex)c=a.primitiveTypes.UNSIGNED_INTEGER,this.bacnetObject.propertyObject=new w(Number(this.objectValue),b);else switch(b){case a.primitiveTypes.BINARY:this.bacnetObject.propertyObject=new w(this.objectValue?1:0,1);break;case a.primitiveTypes.UNSIGNED_INTEGER:if(this.propertyId===a.propertyTypes.PROPID_PRIORITY)break;case a.primitiveTypes.SIGNED_INTEGER:case a.primitiveTypes.REAL:case a.primitiveTypes.ENUMERATED:this.bacnetObject.propertyObject=new w(Number(this.objectValue),b);
break;case a.primitiveTypes.BIT_STRING:var q=A()._bitStrUnusedBits[this.propertyId];this.bacnetObject.propertyObject=q?new t([q,this.value<<q],b):new t([],this.objectType);break;case a.primitiveTypes.DATE:q=C.getBACnetGELDate(this.objectValue);this.bacnetObject.propertyObject=new k(q.y,q.m,q.d,q.dow);break;case a.primitiveTypes.TIME:q=C.getBACnetGELTime(this.objectValue);this.bacnetObject.propertyObject=new x(q.h,q.m,q.s,0);break;case a.primitiveTypes.NULL:this.bacnetObject.propertyObject=new w(0,
a.primitiveTypes.NULL);break;case a.primitiveTypes.COMPLEX:if(222===this.propertyId){c=a.primitiveTypes.CHARACTER_STRING;break}case a.primitiveTypes.ANY_PRIMITIVE:this.propertyId===a.propertyTypes.PROPID_PRESENT_VALUE&&this.objectId===a.objectTypes.OBJID_DATETIME_VALUE&&(c=a.primitiveTypes.COMPLEX);break;default:c=b}return c},_onDelete:function(){this.onDelete(this.objectReference)},onDelete:function(){},postCreate:function(){this.hostInfo=new v(this.deviceId,this.objectId,this.objectInstance);this.bacnetObject=
new A(this.propertyId,this.hostInfo,0,this.arrayIndex,this.deviceId);this.propertyId===a.propertyTypes.PROPID_PRESENT_VALUE&&(this.bacnetObject.type=this._getPresentValueDataType(this.bacnetObject.type,this.bacnetObject.hostObject.type));this._buildFilteringSelect("priorityInput",this.priorityOptions,this.priorityRefCell,-1);this._buildFilteringSelect("objectTypeInput",this.objectTypeOptions,this.objectTypeRefCell,this.bacnetObject.type);this.updateDisplayValues(this.objectReference,this.objectValue,
this.bacnetObject.type);this.connect(this.deleteEntry,"onclick","_onDelete")},updateDisplayValues:function(a,b,f){this.objectReference=a;g.set(this.objectRefCell,"innerHTML",this.objectReference);this.objectValue=b;this.valueInput.set("value",this.objectValue);this.objectType=Number(f);this.objectTypeInput.set("value","number"!==typeof this.bacnetObject.propertyObject.t?this.objectType:this.bacnetObject.propertyObject.t)},updateValue:function(){this.bacnetObject._setDisplayInfo();if(this.bacnetObject.propertyObject instanceof
u)this.bacnetObject.stringValue=this.bacnetObject.propertyObject.toStringMsg();else if(this.bacnetObject.propertyObject instanceof z){var a=this.bacnetObject.stringValue.split(" ");this.bacnetObject.stringValue=y.objectIdToMne(Number(a[0]))+a[1]}this.bacnetObject.propertyObject&&this.bacnetObject.propertyObject.hasOwnProperty("t")&&this.bacnetObject.propertyObject instanceof b?this.objectType=this.bacnetObject.propertyObject.t:this.objectType=this.bacnetObject.type;this.updateDisplayValues(this.objectReference,
this.bacnetObject.stringValue,this.objectType)},_getPresentValueDataType:function(b,f){switch(f){case a.objectTypes.OBJID_DATETIME_VALUE:return a.primitiveTypes.COMPLEX;default:return b}}})})},"rc/bacnet/Calendar":function(){define("dijit/Menu dijit/MenuItem dijit/popup dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/has dojo/i18n!rc/nls/all dojo/i18n!rc/nls/cal dojo/mouse dojo/on dojo/string dojo/text!rc/bacnet/_calendar/templates/Calendar.html dojo/topic dojox/widget/PlaceholderMenuItem ./_widget/_CalendarSet ./enums ./io/Array ./io/CalendarEntry ./io/CalendarEntryList ./io/Date ./io/DateRange ./io/Error ./io/Number ./io/Object ./io/service/ReadPropertyMultiple ./io/service/WritePropertyMultiple ../_base/util ../_base/Error ../_Widget ../date ../util/notices ../widget/Retry dijit/Dialog dijit/form/Button dijit/layout/BorderContainer dijit/layout/ContentPane dojo/sniff ./_calendar/EventDialog ../widget/Toolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O){return h("rc/bacnet/Calendar",[z,K],{templateString:f,src:"",pointInstance:1,mainController:1E3,rcCalendarStrings:b,rcStrings:a,subController:1,subnet:0,testMode:!1,_loadInProgress:!1,_service:null,_liveDisplay:null,_bodyConnects:[],_clickAndDragSelect:!0,_mouseOverEventConnectionHandle:null,_mouseUpEventConnectionObj:null,_buttons:null,_yearSpinnerDelayTimer:null,constructor:function(a){this._calendarEntries=[];this._canEdit=
this._getEditRoles()},postCreate:function(){this._calendarSetContainer=this.containerNode;d.toggle(this._calendarSetContainer,"rcReadOnly",!this._canEdit);this._popMenu=this._buildPopMenu();this.inherited(arguments);this.own(k(this,"sendReasonAdded",c.hitch(this,this.send)));this._supportingWidgets.push(this._eventDialog);this._supportingWidgets.push(this._popMenu);this._eraseWarningDlg&&this._supportingWidgets.push(this._eraseWarningDlg);this._retryHandler=new O;this._createToolbarConnections();
this._container.startup();this._popMenu.set("disabled",!this._canEdit);this.own(k(this._popMenu,"close",c.hitch(this,this._resetPopupMenu)));this._canEdit&&this.own(k(this._calendarContainer,"mousedown",c.hitch(this,this._mouseDownEvent)),k(this._calendarContainer,"mouseup",c.hitch(this,this._mouseCalUpEvent)));this.own(k(this._eventDialog,"dialogClosed",c.hitch(this,this._update)));this.own(g.after(this._yearSpinner,"_arrowReleased",c.hitch(this,this._changeYearDelayed)));this.own(k(this._yearSpinner,
"keyUp",c.hitch(this,this._changeYearDelayed)));this._bodyConnects.push(k(document.body,"dragstart",c.hitch(this,G.stopEvent)),k(document.body,"selectstart",c.hitch(this,G.stopEvent)));var a=new Date;this._mdStart={d:a.getDate()-1,m:a.getMonth()-1,y:a.getFullYear(),dow:L.dowToBacnetDow(a.getDay())};this._mdCurrent={d:a.getDate()-1,m:a.getMonth()-1,y:a.getFullYear(),dow:L.dowToBacnetDow(a.getDay())};this.testMode||this.fetch()},_buildPopMenu:function(){var b=new r({targetNodeIds:this._canEdit?[this._calendarContainer]:
[],leftClickToOpen:n("touch")&&this._canEdit,style:{display:"none"}},"popMenuId");this._supportingWidgets.push(b);b.addChild(new p({label:a.spCreate}));b.addChild(new w({label:"Events"}));b.startup();this.own(k(b,"itemClick",c.hitch(this,this._onClickItem)));m.close(b);return b},_changeYearDelayed:function(){clearTimeout(this._yearSpinnerDelayTimer);!this._yearSpinner.isValid()||isNaN(this._yearSpinner.get("value"))?d.remove(this._loading,"dijitContentPaneLoading"):(d.add(this._loading,"dijitContentPaneLoading"),
this._yearSpinnerDelayTimer=setTimeout(c.hitch(this,"_changeYearNow"),500))},_changeYearNow:function(){this._changeYear();d.remove(this._loading,"dijitContentPaneLoading")},_getEditRoles:function(){return rc.session.isPrivate()&&rc.session.hasRole(rc.session.roles.asChg)},_createToolbarConnections:function(){this._canEdit&&(this._saveButton=this._toolbar.getButton("Save"),this._clearButton=this._toolbar.getButton("clearAll"),this.own(k(this._saveButton.domNode,"click",c.hitch(this,this.sendWithReason)),
k(this._clearButton.domNode,"click",c.hitch(this,this.showEraseWarningDlg))));this._printButton=this._toolbar.getButton("Print");this.own(k(this._printButton.domNode,"click",c.hitch(this,this.print)))},_replace:function(b){return q.substitute(b,[a.cal.toLowerCase()])},_populateCalendars:function(a){null!==this._liveDisplay&&(this._liveDisplay.remove(),this._liveDisplay=null);try{this._liveDisplay=k(this,"updateDates",c.hitch(this,this._flushCalendar)),this.inherited(arguments),this._container.resize()}catch(Q){throw this.safeError(Q);
}},fetch:function(){if(!this._beginUpdate())return null;var b=this._retryHandler.notifyRetry({action:c.hitch(this,this._fetchSequence),retryMsg:a.communicationProblem+" "+a.retryingIn,failMsg:q.substitute(a.communicationFail,[window.location.href])});b.then(c.hitch(this,function(a){this._endUpdate();this.onInitSuccess();return a}),c.hitch(this,function(a){this._endUpdate();this._onInitError(a)}));return b},_fetchSequence:function(){var a=this._fetchData();a.then(c.hitch(this,function(a){return this._decode(a)})).then(c.hitch(this,
function(a){this._populateCalendars(a);return a})).then(c.hitch(this,function(a){return a}));return a},_fetchData:function(){var b=[{o:new F(x.objectTypes.OBJID_CALENDAR,this.pointInstance),pl:[{p:new D(x.propertyTypes.PROPID_DATELIST,x.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new A}]}];return rc.xhr.request({type:"bacnet",gid:"CAL",s:new H({device:this.mainController},b),load:c.hitch(this,function(a){this._service=a}),error:c.hitch(this,function(b){return new I({name:q.substitute(a.xNotFound,[a.bacCal]),
message:this._replace(a.couldNotLoad)+" "+a.hostOffline,suggestion:a.hostOfflineFix,e:b})})})},_decode:function(b){try{if(b.e&&b.o[0].pl[0].v instanceof B)switch(b.o[0].pl[0].v.cl.v){case 0:case 7:throw new I({name:q.substitute(a.xNotFound,[a.bacCal]),message:this._replace(a.couldNotLoad)+" "+a.hostOffline,suggestion:a.hostOfflineFix,e:b});case 1:throw new I({name:q.substitute(a.xNotFound,[a.bacCal]),message:this._replace(a.couldNotLoad)+" "+a.objNotFound,suggestion:a.objNotFoundFix,e:b});default:throw new I("Problem in data.");
}this._calendarEntries=b.o[0].pl[0].v.l;this.makeClean();return this._calendarEntries}catch(Q){throw this.safeError(Q,{name:this._replace(a.problemInX),message:this._replace(a.couldNotLoad)+" "+a.dataProblem,suggestion:a.dataProblemFix});}},_beginUpdate:function(){if(this._updating)return!1;M.widget.clear();this._disableButtons(!0);return this._updating=!0},_disableButtons:function(a){if(this._buttons&&this._buttons.length)for(var b=0;b<this._buttons.length;b++)this._buttons[b].set("disabled",a)},
_endUpdate:function(){this._disableButtons(!1);this._updating=!1},send:function(b){rc.session.reasonRequired()&&!b?this.showChangeReasonError():this._beginUpdate()&&this._send().then(c.hitch(this,function(){this._addAuditTrail(this._changeReason);return this._fetchSequence()})).then(c.hitch(this,function(b){this._endUpdate();M.widget.clear();u.publish("alert",{type:"success",message:a.savedChanges});return b})).otherwise(c.hitch(this,this._handleSendFailure))},_handleSendFailure:function(b){this._endUpdate();
u.publish("sticky",{message:a.couldNotSave+" "+a.pleaseTryAgain});return b},_makeWriteRequest:function(a){return rc.xhr.request(a)},_send:function(){var a=[{o:new F(x.objectTypes.OBJID_CALENDAR,this.pointInstance),pl:[{p:new D(x.propertyTypes.PROPID_DATELIST,x.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new A}]}];a[0].pl[0].v.l=this._cleanUpCalendarEntries();return this._makeWriteRequest({type:"bacnet",gid:"CAL",s:new J({device:this.mainController},a),load:c.hitch(this,function(a){return a}),error:function(a){}})},
_update:function(a,b,f){var c,k=a[0].type;switch(k){case this.DATE_SINGLE:c=new C(a[0].date.y,a[0].date.m,a[0].date.d,a[0].date.dow);break;case this.DATE_RANGE:c=new E(new C(a[0].date.y,a[0].date.m,a[0].date.d,a[0].date.dow),new C(a[1].date.y,a[1].date.m,a[1].date.d,a[1].date.dow));break;case this.DATE_WEEKNDAY:c=new y([a[0].date.nums.moy,a[0].date.nums.wom,a[0].date.nums.dow],6)}null!=f&&null!=this._calendarEntries[f]&&(this._calendarEntries[f].c===this.DATE_WEEKNDAY?this._updateWeekNDay(this._calendarEntries[f],
f,"delete"):this._updateDateRange(this._calendarEntries[f],f,"delete"),this._calendarEntries[f]=null);"_okButton"===b&&this._isUniqueCalendarEntry(c,k)&&(a=new v(k,c),k===this.DATE_WEEKNDAY?this._updateWeekNDay(a,this._calendarEntries.length,"add"):this._updateDateRange(a,this._calendarEntries.length,"add"),this._calendarEntries.push(a));this.makeDirty()},_resetPopupMenu:function(){l.forEach(this._popMenu.getPlaceholders("Events"),function(a){a.unReplace()})},_initializeMultipleCalendarEntryPopup:function(a){for(var b=
[],f=0;f<a.length;f++){var c=new p({calEntriesIndex:a[f],label:this._periodToString(this._calendarEntries[a[f]])});b.push(c)}l.forEach(this._popMenu.getPlaceholders("Events"),function(a){a.replace(b)})},_onClickItem:function(a,b){"calEntriesIndex"in a?this._showCalendarEntryDlg(a.calEntriesIndex):this._showCalendarEntryDlg(null)},_mouseDownEvent:function(a){if(this._popMenu.isShowingNow||!this._canEdit)m.close(this._popMenu);else{var b=this._getDayNode(a.target);b&&a.currentTarget===this._calendarContainer&&
(this._mdStart=this._mdCurrent=this._getMonthDay(b))&&(b=this._eventsByDate[this._mdStart.m+1+"-"+(this._mdStart.d+1)]||[],t.isRight(a)?this._mouseDown=!1:1===b.length&&12>=this._calendarEntries[b[0]].d.m&&31>=this._calendarEntries[b[0]].d.d&&255!==this._calendarEntries[b[0]].d.y&&this._calendarEntries[b[0]].c===this.DATE_SINGLE?(this._calendarEntries[parseInt(b[0],10)]=null,this.makeDirty(),this._updateDates(null,this._mdStart.d,this._mdStart.d,this._mdStart.m,"delete"),this._mouseDown=!0,this._clickAndDragSelect=
!1,this._mouseUpEventConnectionObj=k(document,"mouseup",c.hitch(this,this._mouseCalUpEvent)),this._mouseOverEventConnectionHandle=k(document,"mouseover",c.hitch(this,this._mouseCalOverEvent))):1<=b.length?(this._initializeMultipleCalendarEntryPopup(b),this._mouseDown=!1,m.open({popup:this._popMenu,x:a.pageX,y:a.pageY}),G.stopEvent(a)):(a=new C(this._mdStart.y-this.BACNET_YEAR_OFFSET,this._mdStart.m+1,this._mdStart.d+1,this._mdStart.dow),this._calendarEntries.push(new v(this.DATE_SINGLE,a)),this.makeDirty(),
this._updateDateRange(this._calendarEntries[this._calendarEntries.length-1],this._calendarEntries.length-1,"add"),this._clickAndDragSelect=this._mouseDown=!0,this._mouseUpEventConnectionObj=k(document,"mouseup",c.hitch(this,this._mouseCalUpEvent)),this._mouseOverEventConnectionHandle=k(document,"mouseover",c.hitch(this,this._mouseCalOverEvent))))}},_flushCalendar:function(a,b,f,c,k,q){this._flushCalendars([c])},_mouseCalOverEvent:function(a){G.stopEvent(a);if(this._mouseDown&&(a=this._getDayNode(a.target))&&
(a=this._getMonthDay(a))&&a.asStr!==this._mdCurrent.asStr&&(this._mdCurrent=a,a=this._eventsByDate[this._mdCurrent.m+1+"-"+(this._mdCurrent.d+1)]||[],!(1<a.length))){var b=this._calendarEntries[a[0]];b?b.c!==this.DATE_SINGLE||this._clickAndDragSelect||(this._calendarEntries[a[0]]=null,this._updateDates(null,this._mdCurrent.d,this._mdCurrent.d,this._mdCurrent.m,"delete")):this._clickAndDragSelect&&1>a.length&&(a=new C(this._mdCurrent.y-this.BACNET_YEAR_OFFSET,this._mdCurrent.m+1,this._mdCurrent.d+
1,this._mdCurrent.dow),this._calendarEntries.push(new v(this.DATE_SINGLE,a)),this._updateDateRange(this._calendarEntries[this._calendarEntries.length-1],this._calendarEntries.length-1,"add"))}},_mouseCalUpEvent:function(a){null!==this._mouseOverEventConnectionHandle&&(this._mouseOverEventConnectionHandle.remove(),this._mouseOverEventConnectionHandle=null);null!==this._mouseUpEventConnectionObj&&(this._mouseUpEventConnectionObj.remove(),this._mouseUpEventConnectionObj=null);this._mouseDown=!1;this._clickAndDragSelect=
!0;G.stopEvent(a)},_showCalendarEntryDlg:function(a){var b,f;if(null!=a)switch(b=this._calendarEntries[a],b.c){case 2:f=[b.d.ary,b.c];break;case 1:f=[b.d.ds,b.d.de,b.c];break;case 0:f=[b.d,b.c]}else b=(new Date(this._mdStart.y,this._mdStart.m,this._mdStart.d+1)).getDay(),b=L.dowToBacnetDow(b),f=[{d:this._mdStart.d+1,m:this._mdStart.m+1,y:this._mdStart.y-this.BACNET_YEAR_OFFSET,dow:(new Date(this._mdStart.y,this._mdStart.m,this._mdStart.d+1)).getDay()},0];m.close(this._popMenu);this._eventDialog.initialize(f,
a);this._eventDialog.eventDialog.show()},print:function(a){this.printWithPreview(c.clone(this.domNode))},_getNumDaysInMonth:function(a,b){return 32-(new Date(b,a,32)).getDate()},showEraseWarningDlg:function(a){this._eraseWarningDlg.show()},eraseOK:function(){this._eraseWarningDlg.hide();this._clearCalendar()},eraseCancel:function(a){this._eraseWarningDlg.hide()},_clearCalendar:function(){this._calendarEntries=[];this.makeDirty();this._updateEntireYear(null,"delete")},destroy:function(){this._retryHandler&&
(this._retryHandler.shutdownRetryQueue(),this._retryHandler.reset(),this._retryHandler.destroyRecursive());rc.xhr.removeGroup("CAL");null!==this._mouseOverEventConnectionHandle&&this._mouseOverEventConnectionHandle.remove();null!==this._mouseUpEventConnectionObj&&this._mouseUpEventConnectionObj.remove();null!==this._liveDisplay&&this._liveDisplay.remove();l.forEach(this._bodyConnects,function(a){a.remove()},this);this._popMenu.unBindDomNode("calendarWrapper");this.inherited(arguments)}})})},"dojox/widget/PlaceholderMenuItem":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/_base/kernel dojo/query dijit/registry dijit/Menu dijit/MenuItem".split(" "),
function(r,p,m,l,h,c,g,d,n){h.experimental("dojox.widget.PlaceholderMenuItem");p=p("dojox.widget.PlaceholderMenuItem",n,{_replaced:!1,_replacedWith:null,_isPlaceholder:!0,postCreate:function(){l.set(this.domNode,"display","none");this._replacedWith=[];this.label||(this.label=this.containerNode.innerHTML);this.inherited(arguments)},replace:function(a){if(this._replaced)return!1;var b=this.getIndexInParent();if(0>b)return!1;var c=this.getParent();r.forEach(a,function(a){c.addChild(a,b++)});this._replacedWith=
a;return this._replaced=!0},unReplace:function(a){if(!this._replaced)return[];var b=this.getParent();if(!b)return[];var c=this._replacedWith;r.forEach(this._replacedWith,function(c){b.removeChild(c);a&&c.destroyRecursive()});this._replacedWith=[];this._replaced=!1;return c}});m.extend(d,{getPlaceholders:function(a){var b=[],d=this.getChildren();r.forEach(d,function(k){!k._isPlaceholder||a&&k.label!=a?k._started&&k.popup&&k.popup.getPlaceholders?b=b.concat(k.popup.getPlaceholders(a)):!k._started&&
k.dropDownContainer&&(k=c("[widgetId]",k.dropDownContainer)[0],k=g.byNode(k),k.getPlaceholders&&(b=b.concat(k.getPlaceholders(a)))):b.push(k)},this);return b}});return p})},"rc/bacnet/_widget/_CalendarSet":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/NumberSpinner dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!rc/nls/all dojo/keys dojo/on dojo/query dojo/text!rc/bacnet/_widget/templates/CalendarSet.html ../_calendar/_Calendar ../_schedule/EventDialog ../../date dijit/Menu dijit/MenuItem dojox/widget/PlaceholderMenuItem".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x){return g("rc/bacnet/_widget/_CalendarSet",[p,r,m,b],{templateString:u,_singleCalendar:null,_calendarEntries:null,_eventsByDate:{},_year:(new Date).getFullYear(),_monthNodes:null,_eventDialog:null,_mouseDown:!1,_mdStart:null,_mdCurrent:null,DATE_SINGLE:0,DATE_RANGE:1,DATE_WEEKNDAY:2,BACNET_YEAR_OFFSET:1900,ODD_MONTHS:12,EVEN_MONTHS:13,LAST_DAY:31,ODD_DAY:32,EVEN_DAY:33,COMPENSATED_WILD_CARD:254,WILD_CARD:255,_canEdit:!1,constructor:function(){},postCreate:function(){this.inherited(arguments);
this._canEdit=this._getEditRoles();this._loading=a.create("span",{},this._calendarSetContainer,"first");this._yearSpinner=new l({value:this._year,smallDelta:1,constraints:{min:this._year-30,max:this._year+30,places:0,pattern:"####"}},a.create("div",{},this._calendarSetContainer,"first"));n.add(this._yearSpinner,"yearSpinner");this.own(q(this._yearSpinner,"blur",d.hitch(this,this._yearSpinnerCheck)));this._createCalendars();this._monthNodes=this._getChildren();this._canEdit&&this._popMenu.bindDomNode(this._calendarContainer)},
_getEditRoles:function(){return rc.session.isPrivate()},_createCalendars:function(){for(var b=1;6>=b;b++)for(var f=a.create("div",{className:"dijitCalendarRow"},this._calendarContainer),c=1;2>=c;c++){var k=new w({month:2*(b-1)+c-1,parent:this},a.create("div",{},f));this._canEdit||k.setReadOnly()}},_populateCalendars:function(a){this._updateEntireYear(null,"delete");this._eventsByDate={};c.forEach(a,function(a,b){this._populateEvent(a,b)},this);this._flushCalendars()},_populateEvent:function(a,b){switch(a.c){case this.DATE_SINGLE:case this.DATE_RANGE:this._updateDateRange(a,
b,"add");break;case this.DATE_WEEKNDAY:this._updateWeekNDay(a,b,"add")}},_getChildren:function(){return f("[widgetId]",this._calendarContainer).map(h.byNode)},_cleanUpCalendarEntries:function(){for(var a=[],b=0,f=0;b<this._calendarEntries.length;b++)null!=this._calendarEntries[b]&&(a[f++]=this._calendarEntries[b]);return a},_isUniqueCalendarEntry:function(a,b){var f=!0;c.forEach(this._calendarEntries,function(c){if(null!=c&&c.c==b)switch(b){case this.DATE_SINGLE:c.d.toString()==a.toString()&&(f=!1);
break;case this.DATE_RANGE:c.d.ds.toString()==a.ds.toString()&&c.d.de.toString()==a.de.toString()&&(f=!1);break;case this.DATE_WEEKNDAY:this._weekNDayToString(c.d.ary)==this._weekNDayToString(a.ary)&&(f=!1)}},this);return f},_updateWeekNDay:function(a,b,f){var k=a.d.ary[0],q=a.d.ary[1],d=a.d.ary[2];switch(k){case this.WILD_CARD:q==this.WILD_CARD?d==this.WILD_CARD?this._updateEntireYear(b,f):c.forEach(this._monthNodes,function(a,c){this._updateDates(b,0,a.dayArray.length,c,f,d)},this):c.forEach(this._monthNodes,
function(a,c){this._updateDatesByWeek(b,c,q,f,d)},this);break;case 13:for(a=0;a<this._monthNodes.length;a+=2)this._updateDatesByWeek(b,a,q,f,d);break;case 14:for(a=1;a<this._monthNodes.length+1;a+=2)this._updateDatesByWeek(b,a,q,f,d);break;default:this._updateDatesByWeek(b,k-1,q,f,d)}},_updateDatesByWeek:function(a,b,f,c,k){var q;q=this._monthNodes[b];switch(f){case this.WILD_CARD:f=0;q=q.dayArray.length-1;break;case 6:f=q.dayArray.length-7;q=q.dayArray.length-1;break;case 5:f=28;q=q.dayArray.length-
1;break;default:f=7*(f-1),q=f+6}this._updateDates(a,f,q,b,c,k)},_updateDateRange:function(a,b,f){var k=a.d.ds||a.d,q=a.d.de||a.d;if(this._isThisYear(k.y,q.y)){var d=this._isWildCardValue(k),g=this._isWildCardValue(q);k.y<this._year-this.BACNET_YEAR_OFFSET&&k.y!=this.WILD_CARD&&(d=!0);q.y!=this.WILD_CARD&&q.y>this._year-this.BACNET_YEAR_OFFSET&&(g=!0);if(this._isAlwaysNeverWildCard(d,g,a.c,k,q))this._updateEntireYear(b,f);else{var u=0,t=0,n=11,h=30;d||(u=k.d-1,t=k.m-1);g||(h=q.d-1,n=q.m-1);if(t===
n&&t!==this.COMPENSATED_WILD_CARD)this._updateDates(b,u,h,t,f);else{var l=t==this.COMPENSATED_WILD_CARD&&n!=this.COMPENSATED_WILD_CARD,v=n==this.COMPENSATED_WILD_CARD&&t!=this.COMPENSATED_WILD_CARD,w=t==this.COMPENSATED_WILD_CARD&&n==this.COMPENSATED_WILD_CARD;c.forEach(this._monthNodes,function(a,c){w?this._updateDates(b,u,h,c,f):l?c<n?this._updateDates(b,u,a.dayArray.length-1,c,f):c===n&&this._updateDates(b,u,h,c,f):v?c===t?this._updateDates(b,u,h,c,f):c>t&&this._updateDates(b,0,h,c,f):c>=t&&c<=
n&&(c===t?this._updateDates(b,u,a.dayArray.length-1,c,f):c===n?this._updateDates(b,0,h,c,f):this._updateDates(b,0,a.dayArray.length-1,c,f))},this)}}}},_updateSomeMonths:function(a,b,f,c,k,q){for(var d=0;12>d;d++)1===d%2&&12!==c&&this._updateDates(a,b,f,d,k,q),0===d%2&&13!==c&&this._updateDates(a,b,f,d,k,q)},_updateDates:function(a,b,f,c,k,q){if(c>=this._monthNodes.length)this._updateSomeMonths(a,b,f,c,k,q);else{var d=this._monthNodes[c],g=b,u=f;q=void 0===q?this.WILD_CARD:q;if(b===this.COMPENSATED_WILD_CARD||
b>=this.ODD_DAY)g=0;if(f===this.COMPENSATED_WILD_CARD||f>=this.LAST_DAY)u=d.dayArray.length-1;for(b===this.LAST_DAY&&(g=d.dayArray.length-1);g<=u;g++)if(d.dowArray[g]==q||q==this.WILD_CARD){var t=c+1+"-"+(g+1);switch(k){case "add":1===g%2&&b!==this.ODD_DAY&&this._updateAdd(d,g,t,a);0===g%2&&b!==this.EVEN_DAY&&this._updateAdd(d,g,t,a);break;case "delete":1===g%2&&b!==this.ODD_DAY&&this._updateDelete(d,g,t,a),0===g%2&&b!==this.EVEN_DAY&&this._updateDelete(d,g,t,a)}}}this.onUpdateDates(a,b,f,c,k,q)},
onUpdateDates:function(a,b,f,c,k,q){this.emit("updateDates",a,b,f,c,k,q)},_updateAdd:function(a,b,f,k){a.dayArray[b]+=1;null==this._eventsByDate[f]&&(this._eventsByDate[f]=[]);0>c.indexOf(this._eventsByDate[f],k)&&this._eventsByDate[f].push(k)},_updateDelete:function(a,b,f,k){null==k?(a.dayArray[b]=0,null!=this._eventsByDate[f]&&(this._eventsByDate[f]=null)):(0<a.dayArray[b]&&--a.dayArray[b],null!=this._eventsByDate[f]&&(a=c.indexOf(this._eventsByDate[f],k),this._eventsByDate[f].splice(a,1)))},_flushCalendars:function(a){if(!a){a=
[];for(var b=0;12>b;b++)a.push(b)}c.forEach(a,function(a){a<this._monthNodes.length&&this._monthNodes[a]._flushSelectArray()},this)},_isThisYear:function(a,b){var f=!1;if(this._year>=a+this.BACNET_YEAR_OFFSET||a==this.WILD_CARD)f=b+this.BACNET_YEAR_OFFSET<this._year?!1:!0;return f},_isWildCardValue:function(a){return a&&a.d==this.WILD_CARD&&a.m==this.WILD_CARD&&a.y==this.WILD_CARD?!0:!1},_isAlwaysNeverWildCard:function(a,b,f,c,k){var q=!1;f==this.DATE_SINGLE?a&&(q=!0):f==this.DATE_RANGE&&(a&&b?q=
!0:a?k.y!=this.WILD_CARD&&this._year<k.y+this.BACNET_YEAR_OFFSET&&(q=!0):b&&c.y!=this.WILD_CARD&&this._year>c.y+this.BACNET_YEAR_OFFSET&&(q=!0));return q},_updateEntireYear:function(a,b){c.forEach(this._monthNodes,function(f,c){this._updateDates(a,0,f.dayArray.length-1,c,b)},this)},_getMonthDay:function(a){var b,f={m:0,d:0,y:this._year,dow:0,asStr:null};if(0<=a.className.indexOf("dijitCalendarDateLabel"))f.d=parseInt(a.innerHTML,10)-1,b=a;else return null;if(n.contains(b,"dijitCalendarPreviousMonth")||
n.contains(b,"dijitCalendarNextMonth"))return null;b=a;for(a=20;-1==b.className.indexOf("dijitCalendarContainer")&&0<=--a;)b=b.parentNode;if(b)f.m=parseInt(h.byId(b.id).month,10);else return null;a=(new Date(f.y,f.m,f.d+1)).getDay();f.dow=x.dowToBacnetDow(a);f.asStr=f.d+"/"+f.m+"/"+f.y;return f},_getDayNode:function(a){(n.contains(a,"dijitCalendarCurrentMonth")||n.contains(a,"dijitCalendarCurrentWeekendMonth"))&&c.some(a.childNodes,function(b){return n.contains(b,"dijitCalendarDateWrapper")?(a=b,
!0):!1},this);n.contains(a,"dijitCalendarDateWrapper")&&(n.contains(a.parentNode,"dijitCalendarCurrentMonth")||n.contains(a.parentNode,"dijitCalendarCurrentWeekendMonth"))&&c.some(a.childNodes,function(b){return n.contains(b,"dijitCalendarDateLabel")?(a=b,!0):!1},this);return n.contains(a,"dijitCalendarDateLabel")&&a.parentNode.parentNode&&(n.contains(a.parentNode.parentNode,"dijitCalendarCurrentMonth")||n.contains(a.parentNode.parentNode,"dijitCalendarCurrentWeekendMonth"))?a:null},_periodToString:function(a){var b,
f={d:null,m:null,y:null};switch(a.c){case this.DATE_SINGLE:f.d=a.d.d;f.m=a.d.m;f.y=a.d.y;b=this._getDateString(f);break;case this.DATE_RANGE:f.d=a.d.ds.d;f.m=a.d.ds.m;f.y=a.d.ds.y;b=this._getDateString(f);f.d=a.d.de.d;f.m=a.d.de.m;f.y=a.d.de.y;b+=" - "+this._getDateString(f,1);break;case this.DATE_WEEKNDAY:b=this._weekNDayToString(a.d.ary)}return b},_getDateString:function(a,b){return this._isWildCardValue(a)?b?t.never:t.always:(a.d==this.WILD_CARD?t.any:a.d)+"/"+(a.m==this.WILD_CARD?t.any:a.m)+"/"+
(a.y==this.WILD_CARD?t.any:a.y+this.BACNET_YEAR_OFFSET)},_createEventDialog:function(){null===this._eventDialog&&(this._eventDialog=new z({mainController:this.mainController,_dataType:this.dataType,isEnhanced:this._isEnhanced,_defaultValue:this.defaultValue}),this._supportingWidgets.push(this._eventDialog),this.own(q(this._eventDialog,"save",d.hitch(this,this.onUpdate))))},_weekNDayToString:function(a){var b="";this._createEventDialog();var f=this._eventDialog._periodEditor,b=f._getReccurenceNameByValue(f._selectMonth,
"value",a[0])+"/",b=b+(f._getReccurenceNameByValue(f._selectWeekOfMonth,"value",a[1])+"/");return b+=f._getReccurenceNameByValue(f._selectDayOfWeek,"value",a[2])},_mouseDownEvent:function(a){},_onClickCreate:function(a){},_changeYear:function(){var a=parseInt(this._yearSpinner.textbox.value,10);this._yearSpinner.set("value",a);if(this._yearSpinner.isValid()&&!isNaN(a)){var b=this._yearSpinner.get("value")-this._year;c.forEach(this._monthNodes,function(a){a._adjustDisplay("year",b)},this);this._year=
this._yearSpinner.get("value");this._calendarEntries=this._cleanUpCalendarEntries();this._populateCalendars(this._calendarEntries)}},_filterYear:function(a){a.charOrCode===k.ENTER&&this._yearSpinner.isValid()&&this._changeYear()},_yearSpinnerCheck:function(){this._yearSpinner.isValid()&&!isNaN(this._yearSpinner.get("value"))||this._yearSpinner.set("value",this._year)},destroy:function(){this._yearSpinner.destroy();c.forEach(this._monthNodes,a.destroy);this._monthNodes=null;this.inherited(arguments)}})})},
"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(r,p,m,l){return r("dijit.form.NumberSpinner",[m,l.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(h,c){var g=this.constraints,d=isNaN(h),n=!isNaN(g.max),a=!isNaN(g.min);d&&0!=c&&(h=0<c?a?g.min:n?g.max:0:n?this.constraints.max:a?g.min:0);var b=h+c;if(d||isNaN(b))return h;n&&b>g.max&&(b=g.max);a&&b<g.min&&(b=g.min);return b},_onKeyDown:function(h){if(!(this.disabled||
this.readOnly||h.keyCode!=p.HOME&&h.keyCode!=p.END||h.ctrlKey||h.altKey||h.metaKey||"undefined"==typeof this.get("value"))){var c=this.constraints[h.keyCode==p.HOME?"min":"max"];"number"==typeof c&&this._setValueAttr(c,!1);h.stopPropagation();h.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),function(r,p,m,l,h,c,
g,d,n,a){return r("dijit.form._Spinner",d,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:.9,smallDelta:1,largeDelta:10,templateString:n,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(b,c,k){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),c*k),!1),a.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=
null},_typematicCallback:function(a,c,k){var b=this.smallDelta;c==this.textbox&&(c=k.keyCode,b=c==p.PAGE_UP||c==p.PAGE_DOWN?this.largeDelta:this.smallDelta,c=c==p.UP_ARROW||c==p.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==a?this._arrowReleased(c):this._arrowPressed(c,c==this.upArrowNode?1:-1,b)},_wheelTimer:null,_mouseWheeled:function(a){if(this.focused){a.stopPropagation();a.preventDefault();var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=0<a.wheelDelta?1:-1);a=a.detail?-1*a.detail:b;if(0!==a){var c=
this[0<a?"upArrowNode":"downArrowNode"];this._arrowPressed(c,a,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(c)},50)}}},_setConstraintsAttr:function(a){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):
this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,c){this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,h.wheel,m.hitch(this,"_mouseWheeled")),g.addListener(this.upArrowNode,this.textbox,{keyCode:p.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),g.addListener(this.downArrowNode,this.textbox,
{keyCode:p.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),g.addListener(this.upArrowNode,this.textbox,{keyCode:p.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),g.addListener(this.downArrowNode,this.textbox,{keyCode:p.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,
this.defaultTimeout,this.minimumTimeout))}})})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(r,p,m,l,h,c){var g=function(c){c=c||{};var a=m.getLocalization("dojo.cldr","number",m.normalizeLocale(c.locale)),b=c.pattern?c.pattern:a[(c.type||"decimal")+"Format"];c="number"==typeof c.places?c.places:"string"===typeof c.places&&0<c.places.length?c.places.replace(/.*,/,""):-1!=b.indexOf(".")?b.split(".")[1].replace(/[^#0]/g,
"").length:0;return{sep:a.decimal,places:c}},d=r("dijit.form.NumberTextBoxMixin",null,{pattern:function(c){return"("+(this.focused&&this.editOptions?this._regExpGenerator(p.delegate(c,this.editOptions))+"|":"")+this._regExpGenerator(c)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:h.format,_regExpGenerator:h.regexp,_decimalInfo:g(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(c){var a="number"==typeof c.places?c.places:
0;a&&a++;"number"!=typeof c.max&&(c.max=9*Math.pow(10,15-a));"number"!=typeof c.min&&(c.min=-9*Math.pow(10,15-a));this.inherited(arguments,[c]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value);this._decimalInfo=g(c)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var c=this.get("value");"number"!=typeof c||isNaN(c)||(c=this.format(c,this.constraints),void 0!==c&&(this.textbox.value=c));this.inherited(arguments)}},format:function(c,a){var b=String(c);if("number"!=
typeof c)return b;if(isNaN(c))return"";if(!("rangeCheck"in this&&this.rangeCheck(c,a))&&!1!==a.exponent&&/\de[-+]?\d/i.test(b))return b;this.editOptions&&this.focused&&(a=p.mixin({},a,this.editOptions));return this._formatter(c,a)},_parser:h.parse,parse:function(c,a){var b=p.mixin({},a,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=b.places){var d=b.places,d="number"===typeof d?d:Number(d.split(",").pop());b.places="0,"+d}b=this._parser(c,b);this.editOptions&&this.focused&&
isNaN(b)&&(b=this._parser(c,a));return b},_getDisplayedValueAttr:function(){var c=this.inherited(arguments);return isNaN(c)?this.textbox.value:c},filter:function(c){if(null==c||"string"==typeof c&&""==c)return NaN;"number"!=typeof c||isNaN(c)||0==c||(c=h.round(c,this._decimalInfo.places));return this.inherited(arguments,[c])},serialize:function(c,a){return"number"!=typeof c||isNaN(c)?"":this.inherited(arguments)},_setBlurValue:function(){var c=p.hitch(p.delegate(this,{focused:!0}),"get")("value");
this._setValueAttr(c,!0)},_setValueAttr:function(c,a,b){if(void 0!==c&&void 0===b)if(b=String(c),"number"==typeof c)if(isNaN(c))b="";else{if("rangeCheck"in this&&this.rangeCheck(c,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(b))b=void 0}else c?c=void 0:(b="",c=NaN);this.inherited(arguments,[c,a,b])},_getValueAttr:function(){var c=this.inherited(arguments);if(isNaN(c)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+
h._realNumberRegexp(p.delegate(this.constraints))+"$")).test(this.textbox.value))return c=Number(this.textbox.value),isNaN(c)?void 0:c}else return c},isValid:function(c){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var a=this.get("value");return!isNaN(a)&&this.rangeCheck(a,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1},_isValidSubset:function(){var c="number"==typeof this.constraints.min,
a="number"==typeof this.constraints.max,b=this.get("value");if(isNaN(b)||!c&&!a)return this.inherited(arguments);var d=b|0,k=0>b,q=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),f=(this.maxLength||20)-this.textbox.value.length,g=q?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",d=q?d+"."+g:d+"",f=l.rep("9",f),q=b;k?q=Number(d+f):b=Number(d+f);return!(c&&b<this.constraints.min||a&&q>this.constraints.max)}});r=r("dijit.form.NumberTextBox",[c,d],{baseClass:"dijitTextBox dijitNumberTextBox"});
r.Mixin=d;return r})},"rc/bacnet/_calendar/_Calendar":function(){define("dijit/_Contained dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/cldr/supplemental dojo/date/locale dojo/dom-class dojo/Evented dojo/query dojo/text!rc/bacnet/_calendar/templates/_Calendar.html ../../widget/_Calendar".split(" "),function(r,p,m,l,h,c,g,d,n,a,b){return m("rc/bacnet/_calendar/_Calendar",[b,r,d],{templateString:a,value:new Date,dayWidth:"narrow",month:"",postCreate:function(){var a=l.hitch(this,function(a,
b){for(var f=n(a,this.domNode)[0],c=0;c<b;c++)f.parentNode.appendChild(f.cloneNode(!0))});a(".dijitCalendarDayLabelTemplate",6);a(".dijitCalendarDateTemplate",6);a(".dijitCalendarWeekTemplate",5);var b=c.getNames("days",this.dayWidth,"standAlone",this.lang),q=h.getFirstDayOfWeek(this.lang);n(".dijitCalendarDayLabel",this.domNode).forEach(function(a,c){this._setText(a,b[(c+q)%7])},this);this.setValue(this.date)},setSelect:function(a,b,c){0<a&&a--;0<b&&b--;p.forEach(this.dayNodes,function(f,k){k>=a&&
k<=b?c?g.add(f,"dijitCalendarSelectedDate"):g.remove(f,"dijitCalendarSelectedDate"):g.remove(f,"dijitCalendarSelectedDate")},this)},_onDayClick:function(a){this.onDayClick(a)},onDayClick:function(a){this.emit("dayClick",a)},onValueSelected:function(a){this.emit("valueSelected",a)},onChange:function(a){this.emit("change",a)},isDisabledDate:function(a,b){},getClassForDate:function(a,b){},exportSelections:function(){return this.dayArray}})})},"rc/widget/_Calendar":function(){define("dijit/Calendar dojo/_base/array dojo/_base/declare dojo/_base/window dojo/cldr/supplemental dojo/date dojo/date/locale dojo/dom-class dojo/dom-construct dojo/Evented dojo/has dojo/query ../date dojo/sniff".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return m("rc/widget/_Calendar",[r,a],{value:new Date,dayArray:null,dowArray:null,dayNodes:null,numDays:null,cssStateNodes:{},constructor:function(a){this.date=new Date((new Date).getFullYear(),a.month,1);this.dayArray=[];this.dowArray=[];this.numDays=c.getDaysInMonth(this.date);for(a=0;a<this.numDays;a++)this.dayArray.push(0);var b=this.date.getDay();0==b&&(b=7);for(a=0;a<this.numDays;a++)7<b&&(b=1),this.dowArray[a]=b++},setValue:function(a){if(!this.value||c.compare(a,
this.value))a=new Date(this.date),this.displayMonth=new Date(a),this.isDisabledDate(a,this.lang)||(this.value=a,this.value.setHours(0,0,0,0),this.onChange(this.value)),this._populateGrid()},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(l.doc.createTextNode(b))},_flushSelectArray:function(){t(".dijitCalendarDateLabel",this.domNode).forEach(function(a){if(d.contains(a.parentNode.parentNode,"dijitCalendarCurrentMonth")||d.contains(a.parentNode.parentNode,"dijitCalendarCurrentWeekendMonth")){var b=
this.dayArray[parseInt(a.innerHTML,10)-1];b?(d.add(a.parentNode.parentNode,"dijitCalendarSelectedDate"),1<b?d.add(a.parentNode.parentNode,"dijitCalendarSelectedMulti"):d.remove(a.parentNode.parentNode,"dijitCalendarSelectedMulti")):d.remove(a.parentNode.parentNode,"dijitCalendarSelectedDate dijitCalendarSelectedMulti")}},this)},postCreate:function(){this.inherited(arguments);this.value=null;this.setValue(this.date)},_onDayClick:function(a){var b=this._getDayNode(a.target);if(b){var c=b.parentNode.parentNode;
d.contains(c,"dijitCalendarSelectedDate")?(this.dayArray[parseInt(b.innerHTML,10)-1]=0,d.remove(c,"dijitCalendarSelectedDate")):(this.dayArray[parseInt(b.innerHTML,10)-1]=1,d.add(c,"dijitCalendarSelectedDate"));this.onChange();this._currentNode=c}this.onDayClick(a)},onDayClick:function(a){this.emit("dayClick",a)},_onDayMouseOver:function(a){var f=this._getDayNode(a.target);if(f){var c=f.parentNode.parentNode;b("touch")||d.add(c,"dijitCalendarHoveredDate");this.parent&&this.parent.mouseDown&&(a.shiftKey?
(this.dayArray[parseInt(f.innerHTML,10)-1]=0,d.remove(c,"dijitCalendarSelectedDate")):(this.dayArray[parseInt(f.innerHTML,10)-1]=1,d.add(c,"dijitCalendarSelectedDate")),this.onChange());this._currentNode=c}},_onDayMouseOut:function(a){this._currentNode&&(a=this._getDayNode(a.target),a=a.parentNode.parentNode,a==this._currentNode&&(d.remove(this._currentNode,"dijitCalendarHoveredDate"),this._currentNode=null))},setReadOnly:function(){this._onDayClick=this._onDayMouseOut=this._onDayMouseOver=function(){}},
_adjustDisplay:function(a,b){this.displayMonth=c.add(this.displayMonth,a,b);this._populateGrid()},goToToday:function(){this.setValue(new Date)},_populateGrid:function(){var a=this.displayMonth;a.setDate(1);var b=a.getDay();this.numDays=c.getDaysInMonth(a);var d=c.getDaysInMonth(c.add(a,"month",-1)),n=h.getFirstDayOfWeek(this.lang);n>b&&(n-=7);t(".dijitCalendarDateTemplate",this.domNode).forEach(function(f,k){k+=n;var q=new Date(a),g,u="dijitCalendar",h=0;if(k<b)g=d-b+k+1,h=-1,u+="Previous";else if(k>=
b+this.numDays)g=k-b-this.numDays+1,h=1,u+="Next";else if(g=k-b+1,u+="Current",0===k%7||6===k%7)u+="Weekend";h&&(q=c.add(q,"month",h));q.setDate(g);this.isDisabledDate(q,this.lang)&&(u="dijitCalendarDisabledDate "+u);(g=this.getClassForDate(q,this.lang))&&(u=g+" "+u);f.className=u+"Month dijitCalendarDateTemplate";u="";0===h&&(u=q.getMonth()+1+"-"+q.getDate());f.id=u;h=t(".dijitCalendarDateLabel",f)[0];this._setText(h,q.getDate())},this);this.dayArray=[];for(var l=0;l<this.numDays;l++)this.dayArray.push(0);
this.dowArray=[];for(var m=k.dowToBacnetDow(b),l=0;l<this.numDays;l++)7<m&&(m=1),this.dowArray[l]=m++;l=g.getNames("months","wide","standAlone",this.lang);this._setText(this.monthLabelNode,l[a.getMonth()]);this.getDayNodes()},_setCurrentFocusAttr:function(a,b){},getDayNodes:function(){this.dayNodes=t("[class^\x3d'dijitCalendarCurrent']",this.domNode)},_getDayNode:function(a){(d.contains(a,"dijitCalendarCurrentMonth")||d.contains(a,"dijitCalendarCurrentWeekendMonth"))&&p.forEach(a.childNodes,function(b){d.contains(b,
"dijitCalendarDateWrapper")&&(a=b)},this);d.contains(a,"dijitCalendarDateWrapper")&&(d.contains(a.parentNode,"dijitCalendarCurrentMonth")||d.contains(a.parentNode,"dijitCalendarCurrentWeekendMonth"))&&p.forEach(a.childNodes,function(b){d.contains(b,"dijitCalendarDateLabel")&&(a=b)},this);return(d.contains(a.parentNode.parentNode,"dijitCalendarCurrentMonth")||d.contains(a.parentNode.parentNode,"dijitCalendarCurrentWeekendMonth"))&&d.contains(a,"dijitCalendarDateLabel")?a:null},destroy:function(){p.forEach(this.dayNodes,
n.destroy);this.parent=this.dayNodes=null;this.inherited(arguments)}})})},"rc/bacnet/io/CalendarEntryList":function(){define(["dojo/_base/declare","./List","./CalendarEntry"],function(r,p,m){return r("rc/bacnet/io/CalendarEntryList",p,{constructor:function(l){this.o=new m;this.l=l||[]}})})},"rc/bacnet/_calendar/EventDialog":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/Evented dojo/i18n!rc/nls/all dojo/text!rc/bacnet/_calendar/templates/EventDialog.html ../_widget/PeriodEditor dijit/Dialog dijit/form/Button".split(" "),
function(r,p,m,l,h,c,g,d){return l("rc/bacnet/_calendar/EventDialog",[p,r,m,c],{templateString:d,src:"",rcStrings:g,_currentCalendarEntryIndex:null,_months:[],_weeksOfMonth:[],_daysOfWeek:[],_selectMonth:null,_selectDayOfWeek:null,_selectWeekOfMonth:null,postCreate:function(){this._supportingWidgets.push(this.eventDialog);this._supportingWidgets.push(this._periodEditor);this.inherited(arguments)},initialize:function(c,a){this._deleteButton.set("disabled",null==a);this._currentCalendarEntryIndex=a;
this._periodEditor.reset();this._periodEditor.showPeriod(c);this._periodEditor.disable(!1)},_resetDlg:function(){this._deleteButton.set("disabled",!0);this._periodEditor.reset()},_onClickOKButton:function(){var c=h.clone(this._periodEditor.getDates());this.eventDialog.hide();null!=c&&this.dialogClosed(c,"_okButton",this._currentCalendarEntryIndex);this._resetDlg();this.emit("clickOKButton")},_onClickDeleteButton:function(){var c=h.clone(this._periodEditor.getDates());this.eventDialog.hide();null!=
c&&this.dialogClosed(c,"_deleteButton",this._currentCalendarEntryIndex);this._resetDlg();this.emit("clickDeleteButton")},_onClickCancelButton:function(){this.eventDialog.hide();this._resetDlg();this.emit("clickCancelButton")},dialogClosed:function(c,a,b){this.emit("dialogClosed",c,a,b)}})})},"rc/bacnet/RuntimeLog":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/promise/all dojo/promise/Promise dojo/string ./_runtime/DataManager ./_runtime/io/Archive ./enums ./io/Array ./io/Error ./io/List ./io/LogRecord ./io/Number ./io/Object ./io/ReadRange ./io/service/fitMaxApdu ./io/service/ReadRange ./io/service/ReadPropertyMultiple ./Object ../_base/Error ../sys/desc ../sys/job ../widget/RuntimeLog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B){return r("rc/bacnet/RuntimeLog",B,{MAX_SEQUENCE:Math.pow(2,32)-1,a:null,datam:null,postCreate:function(){this.a=new n;this.datam=new d;this._getPointInfo();E.loadOnce().then(p.hitch(this,function(a){this._getRuntimePoint().then(p.hitch(this,this._jobLoaded)).always(p.hitch(this,this._init))}));this.inherited(arguments)},_getPointInfo:function(){this.pointBTL=new v(this.mainController,a.objectTypes.OBJID_TREND_LOG,this.pointInstance);var b=
Math.floor(this.pointInstance/1E3),f=this.pointInstance-1E3*b;this.pointBRT=new v(this.mainController,a.objectTypes.OBJID_PP_RUNTIME_LOG,f);this.pointName=new v(this.mainController,b,f)},_getRuntimePoint:function(){var b=new m;if(E.hasProprietarySupportBit(this.pointBRT,E.advancedFeature.AutomaticTrending)){var c=[{o:new u(this.pointName.type,this.pointName.instance),pl:[{p:new f(a.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE,a.primitiveTypes.ENUMERATED),i:-1,v:new u}]}];rc.xhr.request({type:"bacnet",
gid:"TL",s:new y({device:this.mainController},c),load:p.hitch(this,this._handleReadPropertySuccess,b),error:p.hitch(this,b.resolve)})}else b.resolve();return b.promise},_handleReadPropertySuccess:function(a,b){if(!b.e){var f=b.o[0].pl[0].v;f&&f.t&&f.i&&(this.pointBTL=new v(this.mainController,f.t,f.i))}a.resolve()},_getTitle:function(){this.title||this._fetchResources().always(p.hitch(this,function(){var a=C.getBestName(this.pointName)||this.mainController,b=this.pointName.toMnemonic();a!==b&&(a+=
" ("+b+")");this._setTitle(a+" - "+l.runtimeLog)}))},_jobLoaded:function(){if(!E.hasProprietarySupportBit(this.pointBRT,E.advancedFeature.brt)){var a=new A({name:g.substitute(l.hostDoesNotSupportX,[l.bacnetRuntimeLogs]),message:g.substitute(l.hostDoesNotSupportXFix,[l.bacnetRuntimeLogs])});this._onInitError(a)}},_setTitle:function(a){this.fullTitle=this.title=a;this._toolbar&&this._toolbar.setTitle(this.fullTitle);this.onSetTitle(this.title)},fetch:function(){this._beginUpdate()&&this._retryHandler.notifyRetry({action:p.hitch(this,
this._fetch),retryMsg:l.communicationProblem+" "+l.retryingIn,failMsg:g.substitute(l.communicationFail,[window.location.href])}).then(p.hitch(this,function(a){this._endUpdate();this.onInitSuccess();return a}),p.hitch(this,function(a){try{if(a&&a.hasOwnProperty("classCode"))switch(a.classCode.cl.v){case 0:case 1:case 7:throw new A({name:g.substitute(l.xNotFound,[l.brts]),message:this._replace(l.couldNotLoad)+" "+l.objNotFound,suggestion:l.objNotFoundFix,e:a});default:throw new A(a.toString());}throw a;
}catch(F){a=this.safeError(F,{name:this._replace(l.problemInX),message:this._replace(l.couldNotLoad)+" "+l.dataProblem,suggestion:l.dataProblemFix})}this._endUpdate();this._onInitError(a);return a}))},_fetch:function(){var a=new m;this.own(a);var b=this._fetchBinaryObject();this.own(b);this.datam.clearData();a.then(p.hitch(this,function(){this.datam.formatGridItems(2E3);this.render(this.datam.gridItems)}));b.then(p.hitch(this,function(b){this._fetchLogData(b).then(p.hitch(this,this._parseLogs,a,2E3))}));
return b},_parseLogs:function(a,b,f){f=this._filterKeepOnOff(f);this.datam.addLiveData(f);f=this.a.checkForWebService();var c=p.hitch(this,function(f){try{if(1===Number(f)){var c=this.a._fetchTotalRecordCount(this.mainController+"STL"+this.pointInstance),k=p.hitch(this,function(f){this.totalArchiveRecords=f;if(0<f){f=(new Date).getTime()+this.MSEC_PER_DAY;f=this.a._fetchArchiveData(this,b,0,f);var c=p.hitch(this,function(b){b.Error?console.error(b.Error):(b.Records=this._filterArchiveKeepOnOff(b.Records),
this.datam.addArchiveData(b));a.resolve()});f.then(c,c)}else a.resolve()}),d=p.hitch(this,function(){a.resolve()});c.then(k,d)}else a.resolve()}catch(M){console.error("There was an error when checking for the archive service: ",M)}});f.then(c,c)},_fetchResources:function(){var a=new m,b=E.loadOnce(),f=C.loadOnce();this.own(a,b,f);h([b,f]).always(p.hitch(a,a.resolve,!0));return a.promise},_fetchBinaryObject:function(){var b=[{p:new f(a.propertyTypes.PROPID_RECORD_COUNT,2),i:-1,v:new f(0,2)},{p:new f(a.propertyTypes.PROPID_BUFFER_SIZE,
2),i:-1,v:new f(0,2)},{p:new f(a.propertyTypes.PROPID_TOTAL_RECORD_COUNT,2),i:-1,v:new f(0,2)}];return z.read("RT",this.mainController,new u(this.pointBTL.type,this.pointBTL.instance),b,[3,3,5])},_fetchLogData:function(a){var b=new m,f=[];a[0].pl[2].v.v&&a[0].pl[0].v.v?this._fetchLogDataHelper(a[0].pl[2].v.v,a[0].pl[0].v.v,-1,f,b):b.resolve(f);a=b;b instanceof c||(a=b.promise);return a},_fetchLogDataHelper:function(c,d,g,n,h){var l={i:new f(c,2),f:new b([],8),c:new f(d*g,3),d:new k(new q),fs:new f(0,
2)},l=[{o:new u(this.pointBTL.type,this.pointBTL.instance),pl:[{p:new f(a.propertyTypes.PROPID_LOG_BUFFER,2),i:-1,rr:new w(l,6)}]}];rc.xhr.request({type:"bacnet",gid:"RT",s:new x({device:this.mainController},l),load:p.hitch(this,function(a){var b=a.o[0].pl[0].rr.r.f.getBit(2),f=a.o[0].pl[0].rr.r.fs.v,k=a.o[0].pl[0].rr.r.d.l;if(a.e)return a=a.o[0].pl[0].v.declaredClass instanceof t?a.o[0].pl[0].v:new A("Problem in data."),h.reject(a),h.promise;0===n.length&&c-d+1==f&&(g=1,c=f);n=0<g?n.concat(k):k.concat(n);
b?(c+=k.length*g,1>c?c=this.MAX_SEQUENCE+c:c>this.MAX_SEQUENCE&&(c-=this.MAX_SEQUENCE),h=this._fetchLogDataHelper(c,d,g,n,h)):h.resolve(n)}),error:p.hitch(this,function(a){h.reject(a)})});return h},_filterArchiveKeepOnOff:function(a){var b=[];if(!a.length)return b;for(var f=a.length-1,c=-1;0<=f;)""!==a[f].EntryValue&&(a[f].EntryValue===c?b[0]={EntryDate:a[f].EntryDate,EntryValue:a[f].EntryValue}:b.unshift({EntryDate:a[f].EntryDate,EntryValue:a[f].EntryValue})),c=a[f].EntryValue,f--;return b},_filterKeepOnOff:function(a){var b=
[];if(!a.length)return b;for(var f=a.length-1,c=-1;0<=f;){if(3==a[f].c){var k=a[f].dt.d,d=a[f].dt.t,k=(new Date(1900+k.y,k.m-1,k.d,d.h,d.m,d.s,10*d.hh)).getTime()-6E4*(new Date).getTimezoneOffset();a[f].ld.v==c?b[0]={timeMsec:k,val:a[f].ld.v}:b.unshift({timeMsec:k,val:a[f].ld.v});c=a[f].ld.v}f--}return b}})})},"rc/bacnet/_runtime/DataManager":function(){define(["dojo/_base/declare","../../reliable/_runtime/DataManager"],function(r,p){return r("rc/bacnet/_runtime/DataManager",p,{addLiveData:function(m){var l=
{timeVal:0,onVal:!1};if(0<m.length){this._live=[];for(var h=0;h<m.length;h++)l.onVal=m[h].val?!0:!1,l.timeVal=m[h].timeMsec,this._live.push(l),l={timeVal:0,onVal:!1}}}})})},"rc/reliable/_runtime/DataManager":function(){define(["dojo/_base/declare","./RecordsCombiner","../../date"],function(r,p,m){return r("rc/reliable/_runtime/DataManager",null,{_archive:[],_live:[],gridItems:[],addArchiveData:function(l){var h={timeVal:0,onVal:!1};if(0<l.Records.length)for(var c=0;c<l.Records.length;c++)h.onVal=
"True"===l.Records[c].EntryValue||"1"===l.Records[c].EntryValue?!0:!1,h.timeVal=m.formatLocalTime(l.Records[c].EntryDate),this._archive.push(h),h={timeVal:0,onVal:!1}},addLiveData:function(l){this._live.push({timeVal:l.timeVal,onVal:l.onVal})},clearData:function(){this._live=[];this._archive=[];this.gridItems=[]},formatGridItems:function(l){var h=0;this._buildGridItems();if(this.gridItems.length)for(h=l/2,0===this.gridItems[this.gridItems.length-1].offTime&&h++,this.gridItems.length>h&&this.gridItems.splice(0,
this.gridItems.length-h),this.gridItems.reverse(),l=h=0;l<this.gridItems.length;l++)this.gridItems[l].index=++h},_buildGridItems:function(){this.gridItems=(new p(this._archive,this._live)).getItems()},destroy:function(){this.gridItems=this._live=this._archive=null}})})},"rc/reliable/_runtime/RecordsCombiner":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","./OnOffPair"],function(r,p,m,l){return p("rc/reliable/_runtime/RecordsCombiner",null,{_archive:!1,_processedPairs:[],
_lastArchivedTime:0,_lastArchivedOnVal:null,_currentPair:null,_previousPair:null,constructor:function(h,c){this._processedPairs=[];this._lastArchivedTime=0;var g=this._previousPair=this._currentPair=this._lastArchivedOnVal=null,d=[],n=[];r.forEach(h,function(a){if(null==g||g!=a.onVal)g=a.onVal,d.push(a)});r.forEach(c,function(a){if(null==g||g!=a.onVal)g=a.onVal,n.push(a)});this._processArchiveData(d);this._processLiveData(n);this._completeOnOffPairing()},getItems:function(){return this._processedPairs},
_completeOnOffPairing:function(){this._currentPair&&this._currentPair.isIncomplete()&&(this._currentPair.setArchived(this._archive),this._pairComplete())},_findIndexOfTimeValue:function(h,c){for(var g=!1,d=0;d<h.length&&h[d].timeVal<=c;)d++,g=!0;return 1==g?d:-1},_pairComplete:function(){this._processedPairs.push(this._currentPair);this._startNewPair(this._processedPairs.length)},_processArchiveData:function(h){0<h.length&&(this._archive=!0,this._currentPair=new l,this._processData(h),this._lastArchivedTime=
h[h.length-1].timeVal,this._lastArchivedOnVal=h[h.length-1].onVal)},_processData:function(h){h.forEach(m.hitch(this,this._processRecord))},_processLiveData:function(h){0<h.length&&(this._archive=!1,null!=this._currentPair?h=this._trimData(h,this._lastArchivedTime,this._lastArchivedOnVal):this._currentPair=new l,this._processData(h))},_processRecord:function(h){h.onVal?this._setOnTime(h.timeVal):(this._setOffTime(h.timeVal),this._pairComplete())},_setOffTime:function(h){this._currentPair.setOffTime(h,
1==this._currentPair.archived?!0:this._archive)},_setOnTime:function(h){this._currentPair.setOnTime(h,this._archive);null!=this._previousPair&&this._previousPair.calculateOffDuration(this._currentPair.onTime)},_startNewPair:function(h){this._previousPair=this._currentPair;this._currentPair=new l(h)},_trimData:function(h,c,g){c=this._findIndexOfTimeValue(h,c);if(-1!=c)for(h=h.splice(c,h.length-c);0<h.length&&h[0].onVal===g;)h=h.splice(1,0);return h}})})},"rc/reliable/_runtime/OnOffPair":function(){define(["dojo/_base/declare"],
function(r){return r("rc/reliable/_runtime/OnOffPair",null,{archived:0,index:1,onTime:0,offTime:0,onDur:0,offDur:0,constructor:function(p){this.index+=p||0},calculateOffDuration:function(p){this.offDur=p-this.offTime},isIncomplete:function(){return 0===this.offTime&&0<this.onTime},setArchived:function(p){this.archived=p?1:0},setOffTime:function(p,m){this.offTime=p;this.archived=m?1:0;this._calculateOnDuration()},setOnTime:function(p,m){this.onTime=p;this.archived=m?1:0},_calculateOnDuration:function(){0<
this.onTime&&(this.onDur=this.offTime-this.onTime)}})})},"rc/bacnet/io/LogRecord":function(){define("dojo/_base/declare ./Array ./DateTime ./Error ./Number ../enums ../error".split(" "),function(r,p,m,l,h,c,g){return r("rc/bacnet/io/LogRecord",null,{dt:null,c:0,ld:null,s:null,constructor:function(){this.dt=new m},encode:function(){var c=[];c.push(14);c=c.concat(this.dt.encode());c.push(15);c.push(30);c=c.concat(this.ld.encode(this.c<<4|8));c.push(31);this.s&&(c=c.concat(this.s.encode(40)));return c},
decode:function(d,n){var a;if(14!=d[n++])return n;n=this.dt.decode(d,n);if(15!=d[n++]||30!=d[n++])return n;this.c=(d[n]&240)>>>4;a=0;this.ld=null;switch(this.c){case 0:case 6:this.ld=new p([],c.primitiveTypes.BIT_STRING);n=this.ld.decode(d,n);break;case 3:a+=5;case 9:case 2:a++;case 5:a++;case 4:a++;case 1:a++;case 7:this.ld=new h(0,a);n=this.ld.decode(d,n);break;case 8:n++;this.ld=new l;n=this.ld.decode(d,n);n++;break;case 10:return n;default:return g.throwError(65,62),n}if(31!=d[n++])return g.throwError(65,
62),n;40==(d[n]&248)&&(this.s=new p([],c.primitiveTypes.BIT_STRING),n=this.s.decode(d,n));return n},toString:function(){return"{dateTime:"+this.dt.toString()+", choice:"+this.c+", logData:"+this.ld.toString()+(null!=this.s?", status:"+this.s.toString():"")+"}"}})})},"rc/bacnet/io/ReadRange":function(){define("dojo/_base/declare ./Array ./List ./LogRecord ./Number ../enums ../error".split(" "),function(r,p,m,l,h,c,g){return r("rc/bacnet/io/ReadRange",null,{r:null,c:0,constructor:function(d,g){this.r=
d||{i:new h(0,c.primitiveTypes.UNSIGNED_INTEGER),f:new p([],c.primitiveTypes.BIT_STRING),c:new h(0,c.primitiveTypes.SIGNED_INTEGER),d:new m(l()),fs:new h(0,c.primitiveTypes.UNSIGNED_INTEGER)};this.c=g||3},encode:function(){var c=[];this.r.i&&(c.push(this.c<<4|14),c=c.concat(this.r.i.encode()),this.r.c.t=3,c=c.concat(this.r.c.encode()),c.push(this.c<<4|15));return c},decode:function(d,n){var a;n=this.r.f.decode(d,n);a=new h(0,c.primitiveTypes.UNSIGNED_INTEGER);n=a.decode(d,n);if(94!=d[n++])return g.throwError(65,
62),n;n=this.r.d.decode(d,n);this.r.c=a;if(95!=d[n++])return n;104==(d[n]&248)?("fs"in this.r||(this.r.fs=new h(0,c.primitiveTypes.UNSIGNED_INTEGER)),n=this.r.fs.decode(d,n)):this.r.fs.v=-1;return n},toString:function(){var c="{choice:"+this.c,c=c+(", range:{index:"+this.r.i.toString()),c=c+(", flags:"+this.r.f.toString()),c=c+(", count:"+this.r.c.toString()),c=c+(", data:"+this.r.d.toString()),c=c+(", dataCount:"+this.r.d.l.length);return c+=", firstSequence:"+this.r.fs.toString()+"}}"}})})},"rc/bacnet/io/service/fitMaxApdu":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/promise/all dojo/promise/Promise ../List ../Number ../../../sys/job ../../io/service/ReadPropertyMultiple ../../io/service/WritePropertyMultiple".split(" "),
function(r,p,m,l,h,c,g,d,n,a){r=r("rc.bacnet.io.service._FitMaxApdu",null,{_device:-1,_maxApdu:0,_service:"Read",_maxBytesApdu:3,_maxBytesProp:5,_maxBytesObj:7,_maxBytesApduObj:10,_maxBytesApduObjProp:15,read:function(a,c,k,d,f){return this.send(14,a,c,k,d,f)},write:function(a,c,k,d,f){return this.send(16,a,c,k,d,f)},send:function(a,c,k,q,f,g){var b,u=new m;try{if(this._device!=k){this._device=k;var t=parseInt(d.getAnyProperty(k+"DEV"+k,"EffectiveAPDU"),10);!isNaN(t)&&480<t?this._maxApdu=t:this._maxApdu=
480}if(12==a||14==a)this._service="Read";else if(15==a||16==a)this._service="Write";else throw Error('rc.bacnet.io.service.fixMaxApdu: service "'+a+'" is not supported');this._xhrId=c;q instanceof Array||(q=[q]);f instanceof Array||(f=[f]);g instanceof Array||(g=[g]);if(0===q.length)throw Error("rc.bacnet.io.service.fitMaxApdu: Requires at least one object");if(f.length!==g.length)throw Error("rc.bacnet.io.service.fitMaxApdu: # of parameters does not equal number of maximum byte values");b=this["_o"+
(1===q.length?"1":"X")+"_"+("p"+(1===f.length?"1":"X"))](q,f,g);b.then(p.hitch(this,function(a){this._sendAll(a[0],a[1]).then(p.hitch(this,function(a){u.resolve(a)}))}))}catch(y){u.reject(y)}return u.promise},_o1_p1:function(a,d,k){if(d[0].v.isInstanceOf(c)&&-1==d[0].i)d=this._sendList(a,d,k);else{a=[{o:a[0],pl:d}];var b;b=-1==d[0].i?0:3;d=new m;d.resolve([a,[this._maxApdu-(this._maxBytesApdu+this._maxBytesObj+this._maxBytesProp+b+k[0])]])}k=d;d instanceof h||(k=d.promise);return k},_o1_pX:function(a,
d,k){for(var b,f=new m,g=this._maxApdu-this._maxBytesApduObj,t=[],n=[],h=0,l=[{o:p.clone(a[0]),pl:[]}],v;h<d.length;)if(d[h].v.isInstanceOf(c)&&-1==d[h].i)b=new m,b.then(p.hitch(this,function(a){a=this._sendList(a[0],a[1],a[2]);a.then(p.hitch(this,function(a){t=t.concat(a[0]);n=n.concat(a[1])}));return a})),f.then(p.hitch(this,function(){return b})),b.resolve([a,[d[h]],[k[h]]]),h++;else if(v=-1==d[h].i?0:3,v=this._maxBytesProp+v+k[h],g>=v&&(g-=v,l[0].pl.push(p.clone(d[h++]))),0==g||g<=v||h==d.length)b=
new m,b.then(p.hitch(this,function(a){t=t.concat(a[0]);n=n.concat(this._maxApdu-this._maxBytesApduObj-a[1])})),f.then(p.hitch(this,function(){return b})),b.resolve([l,g]),l=[{o:p.clone(a[0]),pl:[]}],l[0].o.objectSplit=!0,g=this._maxApdu-this._maxBytesApduObj;f.resolve([t,n]);return f.promise},_oX_p1:function(a,c,k){var b=[],f=[];k=this._maxBytesObj+this._maxBytesProp+(-1==c[0].i?0:3)+k[0];for(var d=0;d<a.length;d++)b.push({o:a[d],pl:p.clone(c)}),f.push(k);a=new m;a.resolve([b,f]);return a.promise},
_oX_pX:function(a,c,k){for(var b,f=new m,d=[],g=[],t=0;t<a.length;t++)b=this._o1_pX([a[t]],c,k),b.otherwise(p.hitch(this,function(a){f.reject(a)})),b.then(p.hitch(this,function(a){d=d.concat(a[0]);g=g.concat(a[1])})),t+1==a.length&&b.then(p.hitch(this,function(){f.resolve([d,g])}));a.length||f.resolve([[],[]]);return f.promise},_sendList:function(a,c,k){var b=new m;this._sendListLength(a,c).then(p.hitch(this,function(f){this._sendListItems(a,c,k,f).then(p.hitch(this,function(a){b.resolve(a)}))}));
return b.promise},_sendListLength:function(a,c){var b=new m;this._sendOne([{o:a[0],pl:[{p:p.clone(c[0].p),i:new g(0,2),v:new g(0,2)}]}]).then(p.hitch(this,function(a){b.resolve(a.o[0].pl[0].v.v)}));return b.promise},_sendListItems:function(a,c,k,d){var b;if(Math.floor((this._maxApdu-this._maxBytesApduObjProp)/k[0])>=d*k[0])return c=[{o:a[0],pl:c}],a=new m,a.resolve([c,[0]]),a.promise;var q=[],t=[];"Write"==this._service&&(d=c[0].v.l.length);for(b=1;b<=d;b++)q.push({p:p.clone(c[0].p),i:new g(b,2),
v:p.clone(c[0].v.o),listItem:!0}),t.push(k[0]);return this._o1_pX(a,q,t)},_sendAll:function(a,c){for(var b=new m,d=[],f=[],g=[],t=0,n=this._maxApdu-this._maxBytesApdu;t<a.length;){n>=c[t]&&(g.push(a[t]),n-=c[t]);if(t==a.length-1||n<c[t+1])f.push(this._sendOne(g)),g=[],n=this._maxApdu-this._maxBytesApdu;t++}g=l(f).then(p.hitch(this,function(a){d=this._reconstructPropertyList(a)}),p.hitch(this,function(a){b.reject(a)}));0==f.length?b.resolve(d):g.then(p.hitch(this,function(){b.resolve(this._mergePropertyList(d))}));
return b.promise},_mergePropertyList:function(a){for(var b=0;b<a.length-1;){var c=a[b],d=a[b+1];"objectSplit"in d.o?(c.pl=c.pl.concat(d.pl),a.splice(b+1,1)):b++}return a},_reconstructPropertyList:function(a){var b=[],k=null;a.forEach(p.hitch(this,function(a){for(var f=0;f<a.o.length;f++)for(var d=0;d<a.o[f].pl.length;)"listItem"in a.o[f].pl[d]?null==k?(k=new c(p.clone(a.o[f].pl[d].v),[a.o[f].pl[d].v]),a.o[f].pl[d].v=k,a.o[f].pl.splice(d,1,{p:a.o[f].pl[d].p,i:-1,v:k}),d++):(k.l.push(a.o[f].pl[d].v),
a.o[f].pl.splice(d,1)):(null!=k&&(k=null),d++);1<=a.o.length&&1<=a.o[0].pl.length&&(b=b.concat(a.o))}));return b},_sendOne:function(b){var c=n;"Write"==this._service&&(c=a);return rc.xhr.request({type:"bacnet",gid:this._xhrId,s:new c({device:this._device},b)})}});rc.bacnet.io.service.fitMaxApdu=new r;return rc.bacnet.io.service.fitMaxApdu})},"rc/bacnet/io/service/ReadRange":function(){define(["dojo/_base/declare","./ReadPropertyMultiple"],function(r,p){return r("rc/bacnet/io/service/ReadRange",p,
{constructor:function(){this.inherited(arguments);this.s=26},updateSupportsMultiple:function(){this._s=this.s}})})},"rc/widget/RuntimeLog":function(){define("dgrid/Grid dgrid/OnDemandGrid dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/url dojo/dom-construct dojo/i18n!rc/nls/all dojo/on dojo/string dojo/store/Memory dojo/store/Observable dojo/text!./templates/RuntimeLog.html require ./Retry ../_base/util ../_Widget ../date dijit/layout/BorderContainer dijit/layout/ContentPane ./Toolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){return l("rc/widget/RuntimeLog",[w],{testMode:!1,pointInstance:1,mainController:1,subController:1,subnet:0,mnemonic:"",title:"",templateString:k,rcStrings:d,_grid:null,_updating:!1,_buttons:null,_fetchPath:q.toUrl("rc/tests/proxy.php"),_url:"",MSEC_PER_DAY:864E5,_init:function(){this._retryHandler=new f;this._createToolbarConnections();this._createGrid();this._container.startup();var a=new c(window.location);this._url=a.scheme+"://"+a.host;this.testMode||
this.fetch()},_createToolbarConnections:function(){this._printButton=this._toolbar.getButton("Print");this._exportButton=this._toolbar.getButton("Export");this.own(n(this._printButton.domNode,"click",h.hitch(this,this.print)),n(this._exportButton.domNode,"click",h.hitch(this,this.exportCsv)))},_getGridStructure:function(){return[{label:" ",id:"indexCol",field:"index",sortable:!1,renderCell:function(a,b,f){return g.create("div",{innerHTML:b,"class":a.archived?"trendArchive":"runtimeArchive"},f,"only")}},
{label:d.rtlOn,id:"onTimeCol",field:"onTime",sortable:!0,formatter:this._formatDate},{label:d.rtlOff,id:"offTimeCol",field:"offTime",sortable:!1,formatter:this._formatDate},{label:d.rtlOnDuration,id:"onDurCol",field:"onDur",sortable:!1,formatter:this._formatTime},{label:d.rtlOffDuration,id:"offDurCol",field:"offDur",sortable:!1,formatter:this._formatTime}]},_getLoadingString:function(){return'\x3cdiv class\x3d"loadingContainer"\x3e\x3cspan class\x3d"waiting"\x3e\x3c/span\x3e\x3cspan class\x3d"loadingMessage"\x3e'+
a.substitute(this.rcStrings.loadingX,[this.rcStrings.rt])+"\x3c/span\x3e\x3c/div\x3e"},_createGrid:function(){null===this._grid&&(this._grid=new (l([r,p]))({columns:this._getGridStructure(),noDataMessage:this._getLoadingString(),isPagingGrid:!1,maxRowsPerPage:128,bufferRows:16,store:new t(new b({idProperty:"index"})),sort:[{attribute:"onTime",descending:!0}]},this.gridNode,"only"),this._grid.startup())},_beginUpdate:function(){if(this._updating)return!1;this._updating=!0;this._disableButtons(!0);
return!0},_endUpdate:function(){this._updating&&(this._disableButtons(!1),this._container.resize(),this._updating=!1)},fetch:function(){},resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(h.hitch(this,function(){this._grid.resize()}),1)},decode:function(a){},render:function(a){this._grid.set("noDataMessage",d.noData);try{this._grid.store.setData(a)}catch(y){throw this.safeError(y,{name:u.escapeHtml(this._replace(d.problemInX)),message:d.unexpected,suggestion:d.unexpectedFix,
renderHtml:!0});}this._grid.refresh()},_disableButtons:function(a){this._buttons&&this._buttons.length&&(m.forEach(this._buttons,function(b){b.set("disabled",a)}),a||0!==this._grid.store.data.length||(this._printButton.set("disabled",!0),this._exportButton.set("disabled",!0)))},_formatDate:function(a){return 0!==a&&Number.isInteger(a)?z.formatUTC(a):""},_formatTime:function(a){return 0===a?"":z.msecToAccumulation(a,!0)},exportCsv:function(){this.exportToCSV(this._grid,"runtimelog.csv",this.fullTitle)},
print:function(){this.printDGrid(this._grid)},destroy:function(){this._retryHandler&&(this._retryHandler.shutdownRetryQueue(),this._retryHandler.reset(),this._retryHandler.destroyRecursive());rc.xhr.removeGroup("RT");this.inherited(arguments)}})})},"rc/bacnet/RuntimeLogWorksheet":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/promise/all dojo/string dojo/topic ./enums ./io/DateTime ./io/List ./io/Number ./io/Object ./io/service/fitMaxApdu ./Object ../_base/Error ../sys/desc ../sys/job ../widget/RuntimeLogWorksheet".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){return r("rc/bacnet/RuntimeLogWorksheet",z,{_automaticTrending:!1,_fetchBLOProps:!1,_plIndexes:{},postCreate:function(){this.pointName=new q(this.mainController,d.objectTypes.OBJID_PP_RUNTIME_LOG,-2);this._fetchResources().then(p.hitch(this,this._jobLoaded)).always(p.hitch(this,this._init));this.inherited(arguments)},_getTitle:function(){u.loadOnce().always(p.hitch(this,function(){var a=u.get(new q(this.mainController,d.objectTypes.OBJID_DEVICE,this.mainController))||
this.mainController;this._setTitle(a+" - "+l.runtimeReport)}))},fetch:function(){this._retryHandler.notifyRetry({action:p.hitch(this,this._fetch),retryMsg:l.communicationProblem+" "+l.retryingIn,failMsg:c.substitute(l.communicationFail,[window.location.href])}).then(p.hitch(this,function(a){return this.decode(a)})).then(p.hitch(this,function(a){return this.render(a)})).then(p.hitch(this,function(){this.onInitSuccess()}))},_fetch:function(){var a=new m;this._fetchResources().then(p.hitch(this,this._fetchObjectListKeepBinary)).then(p.hitch(this,
this._fetchBinaryObjects)).then(p.hitch(this,this._fetchLogLengths)).then(p.hitch(this,function(b){a.resolve(b)})).otherwise(p.hitch(this,function(b){try{if(b&&b.hasOwnProperty("classCode"))switch(b.classCode.cl.v){case 0:case 1:case 7:throw new f({name:c.substitute(l.xNotFound,[l.brts]),message:this._replace(l.couldNotLoad)+" "+l.objNotFound,suggestion:l.objNotFoundFix,e:b});default:throw new f(b.toString());}throw b;}catch(v){b=this.safeError(v,{name:this._replace(l.problemInX),message:this._replace(l.couldNotLoad)+
" "+l.dataProblem,suggestion:l.dataProblemFix})}this._endUpdate();this._onInitError(b);a.reject(b)}));return a.promise},_fetchResources:function(){var a=new m,b=w.loadOnce(),f=u.loadOnce();this.own(a,b,f);h([b,f]).always(p.hitch(a,a.resolve,!0));return a.promise},_fetchObjectListKeepBinary:function(){var f=new m;this.own(f);var c=[{p:new b(d.propertyTypes.PROPID_OBJECT_LIST,d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new a(new t)}];k.read("RTS",this.mainController,new t(8,this.mainController),c,5).then(p.hitch(this,
function(a){a=a[0].pl[0].v.l;for(var b=[],c=0;c<a.length;c++)if(a[c].t===d.objectTypes.OBJID_BINARY_INPUT||a[c].t===d.objectTypes.OBJID_BINARY_OUTPUT||a[c].t===d.objectTypes.OBJID_BINARY_VALUE&&10100>=a[c].i||a[c].t===d.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT)a[c].t===d.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT&&(this._fetchBLOProps=!0),b.push(a[c]);f.resolve(b)}));return f.promise},_fetchBinaryObjects:function(a){var f=0;if(!a.length)return a=new m,a.resolve([]),a.promise;var c=[{p:new b(d.propertyTypes.PROPID_PP_CHANGE_OF_STATE_TODAY,
d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new b(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(d.propertyTypes.PROPID_TIME_OF_STATE_COUNT_RESET,d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new n},{p:new b(d.propertyTypes.PROPID_CHANGE_OF_STATE_COUNT,d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new b(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(d.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME,d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new b(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(d.propertyTypes.PROPID_PRESENT_VALUE,
d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new b(0,d.primitiveTypes.ENUMERATED)}],q=[3,10,5,5,2];this._plIndexes[d.propertyTypes.PROPID_PP_CHANGE_OF_STATE_TODAY]=0;this._plIndexes[d.propertyTypes.PROPID_TIME_OF_STATE_COUNT_RESET]=1;this._plIndexes[d.propertyTypes.PROPID_CHANGE_OF_STATE_COUNT]=2;this._plIndexes[d.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME]=3;this._plIndexes[d.propertyTypes.PROPID_PRESENT_VALUE]=4;f=5;this._brtlConfig&&(c.push({p:new b(d.propertyTypes.PROPID_PP_RUNTIME_LOG_CONTROL,d.primitiveTypes.UNSIGNED_INTEGER),
i:-1,v:new b(0,d.primitiveTypes.BINARY)}),q.push(2),this._plIndexes[d.propertyTypes.PROPID_PP_RUNTIME_LOG_CONTROL]=f++);this._automaticTrending&&(c.push({p:new b(d.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE,d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new t}),q.push(4),this._plIndexes[d.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE]=f++);this._fetchBLOProps&&(c.push({p:new b(d.propertyTypes.PROPID_TIME_OF_ACTIVE_TIME_RESET,d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new n}),q.push(10),this._plIndexes[d.propertyTypes.PROPID_TIME_OF_ACTIVE_TIME_RESET]=
f++);this._fetchBLOProps&&(c.push({p:new b(d.propertyTypes.PROPID_PP_CHANGE_OF_STATE_COUNT,d.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new b(0,d.primitiveTypes.UNSIGNED_INTEGER)}),q.push(4),this._plIndexes[d.propertyTypes.PROPID_PP_CHANGE_OF_STATE_COUNT]=f++);return a=k.read("RTS",this.mainController,a,c,q)},_fetchLogLengths:function(a){var f=new m;this.own(f);if(!a.length){var c=new m;c.resolve([[],[]]);return c.promise}for(var q,c=[],g=0;g<a.length;g++)if(this._automaticTrending){var u;a[g].pl&&a[g].pl[6]&&
(u=this._getTrendLogInstanceFromAutoLogReference(a[g].pl[6]));null===u||void 0===u?c.push(new t(d.objectTypes.OBJID_TREND_LOG,-1)):c.push(new t(d.objectTypes.OBJID_TREND_LOG,u))}else q=a[g].o,c.push(new t(d.objectTypes.OBJID_TREND_LOG,1E3*q.t+q.i));q=[{p:new b(d.propertyTypes.PROPID_BUFFER_SIZE,d.primitiveTypes.ENUMERATED),i:-1,v:new b(0,d.primitiveTypes.UNSIGNED_INTEGER)}];k.read("RTS",this.mainController,c,q,3).then(p.hitch(this,function(b){f.resolve([a,b]);return[a,b]}));return f.promise},_getTrendLogInstanceFromAutoLogReference:function(a){return a.v&&
a.v.t===d.objectTypes.OBJID_TREND_LOG?a.v.i:null},_jobLoaded:function(){if(w.hasProprietarySupportBit(this.pointName,5))w.hasProprietarySupportBit(this.pointName,6)&&(this._brtlConfig=!0),w.hasProprietarySupportBit(this.pointName,d.advancedFeatureSupport.AutomaticTrending)&&(this._automaticTrending=!0);else{var a=new f({name:c.substitute(l.hostDoesNotSupportX,[l.bacnetRuntimeLogs]),message:c.substitute(l.hostDoesNotSupportXFix,[l.bacnetRuntimeLogs])});this._onInitError(a)}},decode:function(a){var b=
a[0];a=a[1];var f=[],c,k,g=new m;this.own(g);try{for(var t=0;t<b.length;t++){c=b[t];k=a[t].pl[0].v.v;var n=new q(this.mainController,c.o.t,c.o.i),h={index:t+1,point:n,pointStr:u.getBestName(n),onTime:1E3*c.pl[this._plIndexes[d.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME]].v.v,startDate:this._getStartDate(c),length:k||0,total:this._getChangeOfStateCount(c),today:c.pl[this._plIndexes[d.propertyTypes.PROPID_PP_CHANGE_OF_STATE_TODAY]].v.v};this._brtlConfig&&(h.log=1===c.pl[this._plIndexes[d.propertyTypes.PROPID_PP_RUNTIME_LOG_CONTROL]].v.v);
if(this._automaticTrending){var l;c.pl&&c.pl[this._plIndexes[d.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE]]&&(l=this._getTrendLogInstanceFromAutoLogReference(c.pl[this._plIndexes[d.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE]]));h.autoLogReference=null===l||void 0===l?null:n.device+"STL"+l}f.push(h)}}catch(J){}g.resolve(f);return g.promise},_getStartDate:function(a){var b,c;b=a.pl[this._plIndexes[d.propertyTypes.PROPID_TIME_OF_STATE_COUNT_RESET]].v.d;c=a.pl[this._plIndexes[d.propertyTypes.PROPID_TIME_OF_STATE_COUNT_RESET]].v.t;
if("undefined"===typeof b||"undefined"===typeof c)b=a.pl[this._plIndexes[d.propertyTypes.PROPID_TIME_OF_ACTIVE_TIME_RESET]].v.d,c=a.pl[this._plIndexes[d.propertyTypes.PROPID_TIME_OF_ACTIVE_TIME_RESET]].v.t;return new Date(1900+b.y,b.m-1,b.d,c.h,c.m,c.s,10*c.hh)},_getChangeOfStateCount:function(a){return a.o.t===d.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT?a.pl[this._plIndexes[d.propertyTypes.PROPID_PP_CHANGE_OF_STATE_COUNT]].v.v:a.pl[this._plIndexes[d.propertyTypes.PROPID_CHANGE_OF_STATE_COUNT]].v.v},
getLinkTextTitle:function(a){var b=a.point,c=a.pointStr,f=c+" "+l.rc_reliable_RuntimeLog.toLowerCase();return[c,f,this._automaticTrending?a.autoLogReference:this.mainController+"BRT"+(1E3*b.type+b.instance)]},_buildLogString:function(a){return a.pointStr+" ("+a.point.toMnemonic()+":33)"}})})},"rc/widget/RuntimeLogWorksheet":function(){define("dgrid/Grid dgrid/OnDemandGrid dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/url dojo/Deferred dojo/dom-construct dojo/i18n!rc/nls/all dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/RuntimeLogWorksheet.html require ./Retry ../_base/util ../_Widget ../bacnet/enums ../date ../reliable/Point dijit/layout/BorderContainer ./Toolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v){return l("rc/widget/RuntimeLogWorksheet",[z],{testMode:!1,pointInstance:1,mainController:1,subController:0,subnet:0,mnemonic:"",rcStrings:n,_brtlConfig:!1,_skipFormatting:!1,templateString:q,_currIndex:0,_grid:null,_wrapped:0,_updating:!1,_buttons:null,_fetchPath:f.toUrl("rc/tests/proxy.php"),_url:"",_init:function(){this._retryHandler=new u;this._createToolbarConnections();this._createGrid();this._container.startup();var a=new c(window.location);
this._url=a.scheme+"://"+a.host;rc.test.isLive()&&this.fetch()},_createToolbarConnections:function(){this._printButton=this._toolbar.getButton("Print");this.own(a(this._printButton.domNode,"click",h.hitch(this,this.print)));this._exportButton=this._toolbar.getButton("Export");this.own(a(this._exportButton.domNode,"click",h.hitch(this,this.exportCsv)))},_getTitle:function(){this._setTitle(n.runtimeLogs)},_getGridStructure:function(){var a=[{label:" ",field:"index",sortable:!1,renderCell:h.hitch(this,
this._formatLogLink,"index")},{label:n.rtrPoint,field:"pointStr",sortable:!1,renderCell:h.hitch(this,this._formatLogLink,"pointStr")},{label:n.rtrOnTime,field:"onTime",sortable:!1,formatter:this._formatTime},{label:n.rtrStartDate,field:"startDate",sortable:!1,formatter:this._formatDate},{label:n.rtrLength,field:"length",sortable:!1},{label:n.rtrTotal,field:"total",sortable:!1},{label:n.rtrToday,field:"today",sortable:!1}];this._brtlConfig&&a.push({label:n.rtrLog,field:"log",formatter:function(a){return a?
n.rtrTrue:n.rtrFalse}});return a},_getLoadingString:function(){return'\x3cdiv class\x3d"loadingContainer"\x3e\x3cspan class\x3d"waiting"\x3e\x3c/span\x3e\x3cspan class\x3d"loadingMessage"\x3e'+k.substitute(this.rcStrings.loadingX,[this.rcStrings.rc_reliable_RuntimeLogWorksheet])+"\x3c/span\x3e\x3c/div\x3e"},_createGrid:function(){null===this._grid&&(this._grid=new (l([r,p]))({columns:this._getGridStructure(),store:new t(new b({idProperty:"index"})),sort:[{attribute:"index",descending:!1}],noDataMessage:this._getLoadingString(),
isPagingGrid:!1,maxRowsPerPage:128,bufferRows:16},this.gridNode),this._grid.startup())},_beginUpdate:function(){if(this._updating)return!1;this._updating=!0;this._disableButtons(!0);return!0},_endUpdate:function(){this._updating&&(this._disableButtons(!1),this._container.resize(),this._updating=!1)},resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(h.hitch(this,function(){this._grid.resize()}),1)},fetch:function(){},decode:function(a){},render:function(a){var b=new g;this.own(b);
this._grid.set("noDataMessage",n.noData);try{this._grid.store?(this._grid.store.setData(a),b.resolve(a)):b.resolve([]),this._grid.refresh()}catch(E){b.reject(this.safeError(E,{name:w.escapeHtml(this._replace(n.problemInX)),message:n.unexpected,suggestion:n.unexpectedFix,renderHtml:!0}))}return b.promise},_disableButtons:function(a){this._buttons&&this._buttons.length&&(m.forEach(this._buttons,function(b){b.set("disabled",a)}),a||0!==this._grid.store.data.length||(this._printButton.set("disabled",
!0),this._exportButton.set("disabled",!0)))},_buildLogString:function(a){var b=(new v(this.mainController,this.subnet,this.subController,x.comTypes.RUNTIME_LOG,a.index)).toMnemonic();return b?a.pointStr+"-RT ("+b+")":a.pointStr},_formatLogLink:function(a,b,c,f){if(this._skipFormatting)return w.escapeHtml(b);try{var q=this.getLinkTextTitle(b);q[0]="index"===a?c:this._buildLogString(b);var g=d.create("p",null,f,"only");if(b.hasOwnProperty("item")&&!b.log)g.innerHTML=q[0];else if(null==q[2])g.innerHTML=
q[0];else{var u=d.create("a",{href:w.mnemonicToUri(q[2]),innerHTML:q[0],title:k.substitute(n.gotoX,[q[1]]),className:"linkable"},g);if("index"===a){var t=h.clone(u);t.innerHTML="";d.create("span",{className:"dijitReset dijitInline dijitIcon rcIcon formsIcon"},t);d.place(t,g,"first")}}return g}catch(G){return b}},_formatDate:function(a){return a instanceof Date&&0===a.getTime()?"":y.formatUTCDate(a)},_formatTime:function(a){return 6E4>a?"0000:00":y.msecToAccumulation(a,!1)},exportCsv:function(){this.exportToCSV(this._grid,
"runtimelogs.csv",this.fullTitle)},print:function(){this._skipFormatting=!0;this._grid.refresh();this.printDGrid(this._grid).then(h.hitch(this,function(){this._skipFormatting=!1;this._grid.refresh()}))},destroy:function(){this._retryHandler&&(this._retryHandler.shutdownRetryQueue(),this._retryHandler.reset(),this._retryHandler.destroyRecursive());rc.xhr.removeGroup("RTS");this.inherited(arguments)}})})},"rc/bacnet/Schedule":function(){define("dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/data/ItemFileReadStore dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!rc/nls/units dojo/on dojo/promise/all dojo/store/Memory dojo/string dojo/text!./_schedule/templates/Schedule.html dojo/topic ./_schedule/ExceptionSchedule ./_widget/BacnetDatePicker ./enums ./unit ./io/AnyPrimitive ./io/Array ./io/DailySchedule ./io/Date ./io/DateRange ./io/DeviceObjectPropertyReferenceList ./io/Error ./io/ExceptionSchedule ./io/Number ./io/Object ./io/service/ReadPropertyMultiple ./io/service/WritePropertyMultiple ./io/WeeklySchedule ../_base/Error ../_base/util ../_Widget ../reliable/unit ../sys/cunit ../sys/decpnt ../sys/job ../util/notices ../widget/Retry ../widget/Toolbar dijit/form/Button dijit/layout/ContentPane dijit/layout/BorderContainer ./_schedule/WeeklySchedule".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U,W,da){return m("rc/bacnet/Schedule",T,{widgetsInTemplate:!0,templateString:w,src:"",pointInstance:1,mainController:1E3,subController:1,subnet:1,service:null,landscape:!1,defaultValue:null,deviceObjectPropertyReferenceList:null,unitIndex:null,units:[],customUnits:null,_bodyConnects:[],_exceptionTypes:{ENHANCED:v.propertyTypes.PROPID_PP_EXCEPTION_SCHEDULE_ENHANCED,BASIC:v.propertyTypes.PROPID_EXCEPTION_SCHEDULE},
_exSchedType:null,_exSchedSupport:!0,inFault:!1,_buttons:null,_updating:!1,_reliqValue:-1,_onValue:1,_rev4Plus:!0,constructor:function(a){this._exSchedType=this._exceptionTypes.ENHANCED},propertyBits:{notModified:0,modifyWeeklyEvents:1,modifySpecialEvents:2,modifyScheduleDefault:4,modifyEffectivePeriod:8},modifiedProperties:0,postCreate:function(){this.inherited(arguments);this._retryHandler=new W;this.own(k(this,"sendReasonAdded",l.hitch(this,this.send)));this._bodyConnects.push(k(document.body,
"dragstart",l.hitch(this,Q.stopEvent)),k(document.body,"selectstart",l.hitch(this,Q.stopEvent)));this.setUpToolbar(this._container);this._container.startup();g.add(this.infoContainer.domNode,"infoContainer");g.add(this.infoPane.domNode,"infoPane");var a=d.create("p",{className:"editSpecialEvents"});d.create("label",{innerHTML:b.defaultValue+": "},this.defaultValueLabel);d.create("h3",{innerHTML:b.spEvents,className:"titlebar"},this.specialEventsHeader);var c=rc.session.isPrivate()&&rc.session.hasRole(rc.session.roles.esChg);
d.create("label",{innerHTML:c?b.edit+": ":b.view+": ",className:"leadlabel"},a);this.specialEventsList=new r({disabled:!0},d.create("div",{},a));g.add(this.specialEventsList.domNode,"mpwSpecialEventList");this.own(k(this.specialEventsList,"change",l.hitch(this,this._ChangeSpecialEvent)));d.place(a,this.infoPane.domNode);g.add(this.exSchedPane.domNode,"exSchedPane");this.exceptionSchedule=new x({mainController:this.mainController},d.create("div",{},this.exSchedPane.domNode));this._exSchedUnsupportedNode=
d.create("div",{},this.exceptionSchedule.domNode);n.set(this._effectivePeriodContainer.domNode,{display:"none"});this._advancedBtn.set("label",b.advanced);rc.session.isPrivate()&&rc.session.hasRole(rc.session.roles.bacnetAdvChg)&&(rc.session.hasRole(rc.session.roles.wsChg)||rc.session.hasRole(rc.session.roles.esChg))&&(this._startDate=new y({showLabels:!0,label:b.spStart+":",allWild:b.always},d.create("div",{},this._datesContainer)),this._endDate=new y({showLabels:!1,label:b.spEnd+":",allWild:b.never},
d.create("div",{},this._datesContainer)),this._supportingWidgets.push(this._startDate),this._supportingWidgets.push(this._endDate),n.set(this._effectivePeriodContainer.domNode,{display:"block"}));this.own(k(this.exceptionSchedule,"update",l.hitch(this,this._updateExceptionSchedules)));this.own(k(this.exceptionSchedule,"fetchBegin",l.hitch(this,this._disableSpecialEvents)));this.own(k(this.exceptionSchedule,"fetchComplete",l.hitch(this,this._enableSpecialEvents)));this.own(k(this.weeklySchedule,"change",
l.hitch(this,this.makeDirty,this.propertyBits.modifyWeeklyEvents)));this.own(k(this.exceptionSchedule,"update",l.hitch(this,this.makeDirty,this.propertyBits.modifySpecialEvents)));a=[N.loadOnce(),aa.loadOnce()];q(a).then(l.hitch(this,function(){rc.test.isLive()&&this.fetch()}))},makeDirty:function(a){this.modifiedProperties|=a;this.inherited(arguments)},makeClean:function(){this.modifiedProperties=this.propertyBits.notModified;this.inherited(arguments)},_toggleEffectivePeriod:function(){g.contains(this._datesContainer,
"hideContainer")?g.remove(this._datesContainer,"hideContainer"):g.add(this._datesContainer,"hideContainer");this.infoContainer.resize()},_createToolbar:function(){var a=rc.session.isPrivate()&&(rc.session.hasRole(rc.session.roles.wsChg)||rc.session.hasRole(rc.session.roles.esChg)),b=new da({region:"top",buttons:{Print:!0,Save:a},customHelp:"sched"},d.create("div",{}));a&&(this._saveButton=b.getButton("Save"),this.own(k(this._saveButton,"click",l.hitch(this,this.sendWithReason))));this._printButton=
b.getButton("Print");this.own(k(this._printButton,"click",l.hitch(this,this.print)));return b},_replace:function(a){return u.substitute(a,[b.sched.toLowerCase()])},fetch:function(){if(!this._beginUpdate())return null;var a=this._fetchSequence();a.then(l.hitch(this,function(){this._endUpdate();this.onInitSuccess();this.exceptionSchedules.units=this.units;this.exceptionSchedule.scrollToCurrentMonth();return this.exceptionSchedule.initialize(this.exceptionSchedules)}));a.otherwise(l.hitch(this,function(a){this._endUpdate();
this._onInitError(a)}));return a},onRestartTimer:function(a){return a},_fetchSequence:function(){var c=new a;this.own(c);var f=this._retryHandler.notifyRetry({action:l.hitch(this,this._fetchCustomUnits),retryMsg:b.communicationProblem+" "+b.retryingIn,failMsg:u.substitute(b.communicationFail,[window.location.href])});f.otherwise(l.hitch(this,function(a){c.reject(a)}));f.then(l.hitch(this,function(){return this._retryHandler.notifyRetry({action:l.hitch(this,this._fetchWeeklyData),retryMsg:b.communicationProblem+
" "+b.retryingIn,failMsg:u.substitute(b.communicationFail,[window.location.href])}).then(l.hitch(this,function(){return this._retryHandler.notifyRetry({action:l.hitch(this,this._fetchExceptionData),retryMsg:b.communicationProblem+" "+b.retryingIn,failMsg:u.substitute(b.communicationFail,[window.location.href])})})).then(l.hitch(this,function(a){this.exceptionSchedule.setEnhanced(this._exSchedType===this._exceptionTypes.ENHANCED);this._render(a);c.resolve(a);return a})).otherwise(l.hitch(this,function(a){c.reject(a)}))}));
return c.promise},_fetchCustomUnits:function(){var b=new a;this.own(b);S.loadOnce().then(l.hitch(this,function(){this._fetchBasicData().then(l.hitch(b,b.resolve),l.hitch(b,b.reject))}));return b.promise},_fetchBasicData:function(){var b=new a;this.own(b);this.onRestartTimer(15);this._fetchBasics().then(l.hitch(this,function(a){b.resolve(this._decodeBasics(a))}));return b.promise},_fetchWeeklyData:function(){this.onRestartTimer(15);var b=new a;this.own(b);this._fetchWeekly(this._weeklySchedLength).then(l.hitch(this,
function(a){this._decodeWeekly(a);b.resolve(a)}));return b.promise},_fetchExceptionData:function(){var b=new a;this.onRestartTimer(130);this._fetchExceptions(this._exceptionSchedLength).then(l.hitch(this,function(a){this._decodeExceptions(a);b.resolve(a)}));return b.promise},_beginUpdate:function(){if(this._updating)return!1;U.widget.clear();this._disableButtons(!0);return this._updating=!0},_disableButtons:function(a){if(this._buttons&&this._buttons.length)for(var b=0;b<this._buttons.length;b++)this._buttons[b].set("disabled",
a)},_endUpdate:function(){this.resize();this._disableButtons(!1);this._updating=!1},_fetchBasics:function(){var a=rc.sys.job.isThirdParty({device:this.mainController})?this._exceptionTypes.BASIC:this._exceptionTypes.ENHANCED,a=[{o:new K(v.objectTypes.OBJID_DEVICE,Number(this.mainController)),pl:[{p:new I(v.propertyTypes.PROPID_PROTOCOL_REVISION,v.primitiveTypes.ENUMERATED),i:-1,v:new I(0,v.primitiveTypes.UNSIGNED_INTEGER)}]},{o:new K(v.objectTypes.OBJID_SCHEDULE,this.pointInstance),pl:[{p:new I(v.propertyTypes.PROPID_SCHEDULE_DEFAULT,
v.primitiveTypes.ENUMERATED),i:-1,v:new C},{p:new I(v.propertyTypes.PROPID_PRESENT_VALUE,v.primitiveTypes.ENUMERATED),i:-1,v:new C},{p:new I(v.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES,v.primitiveTypes.ENUMERATED),i:-1,v:new H},{p:new I(v.propertyTypes.PROPID_OUT_OF_SERVICE,v.primitiveTypes.ENUMERATED),i:-1,v:new I(0,1)},{p:new I(v.propertyTypes.PROPID_STATUS_FLAGS,v.primitiveTypes.ENUMERATED),i:-1,v:new E([],v.primitiveTypes.BIT_STRING)},{p:new I(v.propertyTypes.PROPID_WEEKLY_SCHEDULE,
v.primitiveTypes.ENUMERATED),i:new I(0,v.primitiveTypes.UNSIGNED_INTEGER),v:new I(0,v.primitiveTypes.UNSIGNED_INTEGER)},{p:new I(a,v.primitiveTypes.ENUMERATED),i:new I(0,v.primitiveTypes.UNSIGNED_INTEGER),v:new I(0,v.primitiveTypes.UNSIGNED_INTEGER)},{p:new I(v.propertyTypes.PROPID_EFFECTIVE_PERIOD,v.primitiveTypes.ENUMERATED),i:-1,v:new F}]}];rc.sys.job.isThirdParty({device:this.mainController})||a.push({o:new K(v.objectTypes.OBJID_SCHEDULE,this.pointInstance),pl:[{p:new I(v.propertyTypes.PROPID_PP_OPEN_UNIT,
v.primitiveTypes.ENUMERATED),i:-1,v:new I(0,v.primitiveTypes.ENUMERATED)}]});return rc.xhr.request({type:"bacnet",gid:"SCHED",s:new L({device:this.mainController},a),error:l.hitch(this,function(a){return new P({name:u.substitute(b.xNotFound,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.hostOffline,suggestion:b.hostOfflineFix,e:a})})})},_decodeBasics:function(a){if(null==a)throw new P({name:u.substitute(b.xNotFound,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.emptyResponse,
suggestion:b.emptyResponseFix});this._exSchedSupport=!1;this._exSchedType=this._exceptionTypes.BASIC;try{for(var c=null,f=0;f<a.o.length;++f)for(var k=0;k<a.o[f].pl.length;++k){c=a.o[f].pl[k];if(c.v instanceof J)switch(c.v.cl.v){case 0:case 1:case 7:throw new P({name:u.substitute(b.xNotFound,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.objNotFound,suggestion:b.objNotFoundFix,e:c.v.toStringMsg()});case 2:break;default:throw new P("Problem in data.");}switch(c.p.v){case v.propertyTypes.PROPID_PROTOCOL_REVISION:this._rev4Plus=
3<c.v.v;break;case v.propertyTypes.PROPID_SCHEDULE_DEFAULT:this.defaultValue=c.v.v;break;case v.propertyTypes.PROPID_PRESENT_VALUE:this.presentValue=c.v.v;break;case v.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:this.deviceObjectPropertyReferenceList=c.v.l;break;case v.propertyTypes.PROPID_OUT_OF_SERVICE:this.outOfService=c.v.v;break;case v.propertyTypes.PROPID_STATUS_FLAGS:if(this.statusFlags=c.v.ary)this.inFault=this.statusFlags[1]&64?!0:!1;break;case v.propertyTypes.PROPID_WEEKLY_SCHEDULE:this._weeklySchedLength=
c.v.v;break;case v.propertyTypes.PROPID_PP_EXCEPTION_SCHEDULE_ENHANCED:this._exSchedType=this._exceptionTypes.ENHANCED;case v.propertyTypes.PROPID_EXCEPTION_SCHEDULE:this._exSchedSupport=!0;this._exceptionSchedLength=c.v.v;break;case v.propertyTypes.PROPID_EFFECTIVE_PERIOD:this._effectivePeriod=c.v;break;case v.propertyTypes.PROPID_PP_OPEN_UNIT:N.hasProprietarySupportBit({device:this.mainController},21)&&!1===c.v instanceof J&&(c.v.v||0===c.v.v)&&(this.unitIndex=c.v.v||0)}}this._rev4Plus&&"undefined"!==
typeof this.defaultValue||(this._rev4Plus=!1,this.defaultValue=new I(0,v.primitiveTypes.NULL))}catch(ca){throw this.safeError(ca,{name:u.substitute(b.problemInX,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.dataProblem,suggestion:b.dataProblemFix,e:a});}this._exSchedSupport||(g.add(this._exSchedUnsupportedNode,"disabledExcepCalendars"),this._disableSpecialEvents(),this._exceptionSchedLength=0);return a},_fetchWeekly:function(b){var c=new a;this.own(c);var f=[{o:new K(v.objectTypes.OBJID_SCHEDULE,
this.pointInstance),pl:[{p:new I(v.propertyTypes.PROPID_WEEKLY_SCHEDULE,v.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new O}]}];rc.xhr.request({type:"bacnet",gid:"SCHED",s:new L({device:this.mainController},f),load:l.hitch(this,function(a){c.resolve(a)}),error:l.hitch(this,function(a){a.hasOwnProperty("classCode")&&a.classCode instanceof J?this._fetchWeeklyIndividually(c,b,a):c.reject(a)})});return c.promise},_fetchWeeklyIndividually:function(a,c,f){for(var k=[],d=[],g=1;g<=c;g++)d=[{o:new K(v.objectTypes.OBJID_SCHEDULE,
this.pointInstance),pl:[{p:new I(v.propertyTypes.PROPID_WEEKLY_SCHEDULE,v.primitiveTypes.ENUMERATED),i:new I(g,v.primitiveTypes.ENUMERATED),v:new O}]}],k.push(rc.xhr.request({type:"bacnet",gid:"SCHED",s:new L({device:this.mainController},d),error:l.hitch(this,function(a){return a.hasOwnProperty("classCode")&&a.classCode instanceof J?new P({name:u.substitute(b.problemInX,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.bacWS]),suggestion:b.dataProblemFix,
e:f}):a})}));q(k).then(l.hitch(this,function(c){for(var f=c[0],k=!1,d=1;d<c.length;d++)if(c[d].o[0].pl[0].v instanceof J){a.reject(new P({name:u.substitute(b.problemInX,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.bacWS]),suggestion:b.dataProblemFix,e:c[d].o[0].pl[0].v.toStringMsg()}));k=!0;break}else f.o[0].pl[0].v.l.push(c[d].o[0].pl[0].v.l[0]);k||a.resolve(f)}),l.hitch(this,function(c){c.hasOwnProperty("classCode")&&c.classCode instanceof
J?a.reject(new P({name:u.substitute(b.problemInX,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.bacWS]),suggestion:b.dataProblemFix,e:f})):a.reject(c)}))},_decodeWeekly:function(a){try{if(a.o[0].pl[0].v.l&&a.o[0].pl[0].v.l.length)this.weeklySchedule.schedules=a.o[0].pl[0].v.l;else{var c=new B;this.weeklySchedule.schedules=[];for(a=0;7>a;a++)this.weeklySchedule.schedules.push(l.clone(c))}}catch(X){throw new P({name:u.substitute(b.problemInX,[b.bacSched]),
message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.bacWS]),suggestion:b.dataProblemFix,e:X});}},_fetchExceptions:function(c){var f=new a;this.own(f);if(1>c)return f.resolve(null),f;this._fetchAllExceptionSchedules().then(l.hitch(this,function(a){f.resolve(a)}),l.hitch(this,function(a){this._fetchIndividualExceptions(c,a).then(l.hitch(this,function(a){f.resolve(a)}),l.hitch(this,function(a){f.reject(this.safeError(a,{name:u.substitute(b.problemInX,[b.bacSched]),
message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.exSched]),suggestion:b.dataProblemFix,e:a}))}))}));return f.promise},_fetchAllExceptionSchedules:function(){if(N.isSSC({device:this.mainController})){var c=new a;c.reject();return c.promise}c=[{o:new K(v.objectTypes.OBJID_SCHEDULE,this.pointInstance),pl:[{p:new I(this._exSchedType,v.primitiveTypes.ENUMERATED),i:-1,v:new G}]}];return rc.xhr.request({type:"bacnet",gid:"SCHED",s:new L({device:this.mainController},
c),error:l.hitch(this,function(a){return a.hasOwnProeprty("classCode")&&a.classCode instanceof J?new P({name:u.substitute(b.problemInX,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.exSched]),suggestion:b.dataProblemFix,e:a}):a})})},_fetchIndividualExceptions:function(c){var f=[],k=[],d=new a;this.own(d);for(var g=1;g<=c;g++)k=[{o:new K(v.objectTypes.OBJID_SCHEDULE,this.pointInstance),pl:[{p:new I(this._exSchedType,v.primitiveTypes.ENUMERATED),
i:new I(g,v.primitiveTypes.ENUMERATED),v:new G}]}],f.push(rc.xhr.request({type:"bacnet",gid:"SCHED",s:new L({device:this.mainController},k),error:l.hitch(this,function(a){return a.hasOwnProperty("classCode")&&a.classCode instanceof J?new P({name:u.substitute(b.problemInX,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.exSched]),suggestion:b.dataProblemFix,e:a}):a})}));q(f).then(l.hitch(this,function(a){for(var c=a[0],f=!1,k=1;k<a.length;k++)if(a[k].o[0].pl[0].v instanceof
J){d.reject(new P({name:u.substitute(b.problemInX,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.bacWS]),suggestion:b.dataProblemFix,e:a[k].o[0].pl[0].v.toStringMsg()}));f=!0;break}else c.o[0].pl[0].v.l.push(a[k].o[0].pl[0].v.l[0]);f||d.resolve(c)}),l.hitch(this,function(a){d.reject(new P({name:u.substitute(b.problemInX,[b.bacSched]),message:this._replace(b.couldNotLoad)+" "+b.dataProblem+" "+u.substitute(b.xMissing,[b.exSched]),suggestion:b.dataProblemFix,
e:a}))}));return d.promise},_decodeExceptions:function(a){this.exceptionSchedules=null!=a?a.o[0].pl[0].v.l:[]},_render:function(a){try{return this._startDate&&this._setEffectivePeriod(),this._populateDataType(),this._populateUnits(),this.dataType===v.primitiveTypes.REAL&&0<this.unitIndex&&(this.defaultValueLabel.innerHTML=b.defaultValue+" ("+this.units+"): "),this.renderDefaultValue(),this.weeklySchedule.populateSchedules(this.units),this._setSpecialEventList(),this.makeClean(),a}catch(V){throw this.safeError(V);
}},_populateUnits:function(){switch(this.dataType){case v.primitiveTypes.UNSIGNED_INTEGER:if(null!==this.unitIndex){var a=0,a=this.unitIndex==R.multiStateValueUnits.mvrOFF_LOW_HIGH_GEL?65:this.unitIndex+65;this.units=R.getDigitalRangeByIndex(a)}else this.units="12345678".split("");break;case v.primitiveTypes.REAL:null!==this.unitIndex?this.units[0]=R.getAnalog(this.unitIndex,A):this.units=["-"];break;case v.primitiveTypes.ENUMERATED:null!==this.unitIndex?(this.unitIndex==R.binaryValueUnits.bvrGOOD_FAULT?
this.unitIndex=R.digitalRange.length-1:this.unitIndex==R.binaryValueUnits.bvrCLEAN_DIRTY?this.unitIndex=R.digitalRange.length-2:this.unitIndex==R.binaryValueUnits.bvrAUTO_MANUAL&&(this.unitIndex=64),this.units=R.getDigitalRangeByIndex(this.unitIndex)):this.units=[t.binaryOff,t.digitalOn]}},_setEffectivePeriod:function(){this._sDateConnect&&(this._sDateConnect.remove(),this._sDateConnect=null);this._eDateConnect&&(this._eDateConnect.remove(),this._eDateConnect=null);this._startDate.set("value",this._effectivePeriod.ds);
this._endDate.set("value",this._effectivePeriod.de);this._sDateConnect=k(this._startDate,"change",l.hitch(this,this.makeDirty,this.propertyBits.modifyEffectivePeriod));this._eDateConnect=k(this._endDate,"change",l.hitch(this,this.makeDirty,this.propertyBits.modifyEffectivePeriod));this.own(this._sDateConnect);this.own(this._eDateConnect)},_populateDataType:function(){var a=this._discoverDataType();a!==v.primitiveTypes.ENUMERATED&&a!==v.primitiveTypes.REAL&&a!==v.primitiveTypes.UNSIGNED_INTEGER&&a!==
v.primitiveTypes.BINARY&&(a=v.primitiveTypes.ENUMERATED);this.dataType=a;this.weeklySchedule.dataType=this.dataType;this.exceptionSchedule.dataType=this.dataType;p.forEach(this.weeklySchedule.eventContainers,function(a){a.dataType=this.dataType},this);return a},_discoverDataType:function(){if(this._rev4Plus&&this.defaultValue&&this.defaultValue.t)return this.defaultValue.t;if(this._rev4Plus&&this.presentValue&&this.presentValue.t&&!this.inFault&&!this.outOfService)return this.presentValue.t;if(0<
this.deviceObjectPropertyReferenceList.length){var a=null;p.some(this.deviceObjectPropertyReferenceList,function(b){a=this._getObjectDataType(b.o.t);return null!=a},this);if(null!=a)return a}if(p.some(this.weeklySchedule.schedules,function(a){return 0<a.d.l.length}))return p.filter(this.weeklySchedule.schedules,function(a){return 0<a.d.l.length})[0].d.l[0].v.v.t;if(0<this.exceptionSchedules.length)try{return this.exceptionSchedules[0].tvl.l[0].v.v.t}catch(V){console.error(this.declaredClass+" - _discoverDataType(): Malformed Schedule Events",
V)}return v.primitiveTypes.ENUMERATED},_getObjectDataType:function(a){var b=null;switch(a){case v.objectTypes.OBJID_ANALOG_INPUT:case v.objectTypes.OBJID_ANALOG_OUTPUT:case v.objectTypes.OBJID_ANALOG_VALUE:b=v.primitiveTypes.REAL;break;case v.objectTypes.OBJID_MULTI_STATE_INPUT:case v.objectTypes.OBJID_MULTI_STATE_OUTPUT:case v.objectTypes.OBJID_MULTI_STATE_VALUE:b=v.primitiveTypes.UNSIGNED_INTEGER;break;case v.objectTypes.OBJID_BINARY_INPUT:case v.objectTypes.OBJID_BINARY_OUTPUT:case v.objectTypes.OBJID_BINARY_VALUE:b=
v.primitiveTypes.ENUMERATED}return b},send:function(c){if(rc.session.reasonRequired()&&!c)this.showChangeReasonError();else if(this._beginUpdate()){c=this._send();var f=new a;this.own(f);c.then(l.hitch(this,function(){this._addAuditTrail(this._changeReason)})).then(l.hitch(this,function(a){z.publish("alert",{type:"success",message:b.savedChanges});f.resolve(!0)}),l.hitch(this,function(a){this._handleSendError(a,f)}));f.then(l.hitch(this,function(){return this._fetchSequence()})).then(l.hitch(this,
function(){this.exceptionSchedule.initialize(this.exceptionSchedules)}));f.promise.always(l.hitch(this,function(a){this._endUpdate();this.onRestartTimer(0);return a}))}},_handleSendError:function(a,c){z.publish("sticky",{message:b.couldNotSave+(a instanceof P?" "+a.message+" ":" ")});c.reject(a)},_makeWriteRequest:function(a){return rc.xhr.request(a)},_send:function(){var c=new a;this.own(c);try{this.weeklySchedule.getScheduleEvents();this._startDate&&(this._effectivePeriod=this._getEffectivePeriod());
var f=this.defaultValueInput.get("displayedValue"),k=Number(this.defaultValueInput.get("value"));!1!==isNaN(f)||this.dataType!==v.primitiveTypes.REAL&&this.dataType!==v.primitiveTypes.ENUMERATED||(k=Number(this.defaultValueInput.get("displayedValue")));!1===isNaN(k)?this.defaultValue.v=Number(k):this.defaultValue.v=this._reliqValue;this.defaultValue.v===this._reliqValue&&(this.defaultValue.v=0);this.defaultValue.t=k===this._reliqValue?0:this.dataType}catch(Z){c.reject(new P({name:b.unexpectedError,
message:b.dataProblem,suggestion:b.dataProblemFix,e:Z}))}this._sendWhole().then(l.hitch(this,function(a){c.resolve(a)}),l.hitch(this,function(a){this._handleSendWeeklyWholeError(a,c)}));return c.promise},_handleSendWeeklyWholeError:function(a,b){this._sendSegmented().then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){b.reject(a)}))},_isModified:function(a){return(this.modifiedProperties&a)===a},_sendWhole:function(){var b=new a;this.own(b);if(N.isSSC({device:this.mainController}))b.reject(new P("Sending segmented to SSC."));
else{var c=[{o:new K(v.objectTypes.OBJID_SCHEDULE,this.pointInstance),pl:[]}];this._isModified(this.propertyBits.modifyWeeklyEvents)&&c[0].pl.push({p:new I(v.propertyTypes.PROPID_WEEKLY_SCHEDULE,v.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new O(this.weeklySchedule.schedules)});this._exSchedSupport&&this._isModified(this.propertyBits.modifySpecialEvents)&&c[0].pl.push({p:new I(this._exSchedType,v.primitiveTypes.ENUMERATED),i:-1,v:new G(this.exceptionSchedules)});this._rev4Plus&&this._isModified(this.propertyBits.modifyScheduleDefault)&&
c[0].pl.push({p:new I(v.propertyTypes.PROPID_SCHEDULE_DEFAULT,v.primitiveTypes.ENUMERATED),i:-1,v:this.defaultValue});this._startDate&&this._isModified(this.propertyBits.modifyEffectivePeriod)&&c[0].pl.push({p:new I(v.propertyTypes.PROPID_EFFECTIVE_PERIOD,v.primitiveTypes.ENUMERATED),i:-1,v:this._effectivePeriod});this._makeWriteRequest({type:"bacnet",gid:"SCHED",s:new M({device:this.mainController},c)}).then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){b.reject(a)}))}return b.promise},
_sendSegmented:function(){var b=new a;this.own(b);this._sendWeeklySchedule().then(l.hitch(this,function(){this._exSchedSupport&&this._isModified(this.propertyBits.modifySpecialEvents)?this._sendExceptionSchedule().then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){b.reject(a)})):b.resolve()}),l.hitch(this,function(a){b.reject(a)}));return b.promise},_sendWeeklyScheduleDefault:function(){var b=new a;this.own(b);if(this._rev4Plus&&this._isModified(this.propertyBits.modifyScheduleDefault)||
this._startDate&&this._isModified(this.propertyBits.modifyEffectivePeriod)){var c=[{o:new K(v.objectTypes.OBJID_SCHEDULE,this.pointInstance),pl:[]}];this._rev4Plus&&this._isModified(this.propertyBits.modifyScheduleDefault)&&c[0].pl.push({p:new I(v.propertyTypes.PROPID_SCHEDULE_DEFAULT,v.primitiveTypes.ENUMERATED),i:-1,v:this.defaultValue});this._startDate&&this._isModified(this.propertyBits.modifyEffectivePeriod)&&c[0].pl.push({p:new I(v.propertyTypes.PROPID_EFFECTIVE_PERIOD,v.primitiveTypes.ENUMERATED),
i:-1,v:this._effectivePeriod});this._makeWriteRequest({gid:"SCHED",type:"bacnet",s:new M({device:this.mainController},c)}).then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){b.reject(a)}))}else b.resolve();return b.promise},_sendWeeklyScheduleDays:function(){var b=new a;this.own(b);if(this._isModified(this.propertyBits.modifyWeeklyEvents)){for(var c=[],f=0;7>f;f++){var k=[{o:new K(v.objectTypes.OBJID_SCHEDULE,this.pointInstance),pl:[{p:new I(v.propertyTypes.PROPID_WEEKLY_SCHEDULE,
v.primitiveTypes.UNSIGNED_INTEGER),i:new I(f+1,v.primitiveTypes.UNSIGNED_INTEGER),v:new O([this.weeklySchedule.schedules[f]])}]}];c.push(this._makeWriteRequest({gid:"SCHED",type:"bacnet",s:new M({device:this.mainController},k,!0)}))}q(c).then(l.hitch(this,function(a){b.resolve(a[0])}),l.hitch(this,function(a){b.reject(a)}))}else b.resolve();return b.promise},_sendWeeklySchedule:function(){var b=new a;this.own(b);this._sendWeeklyScheduleDefault().then(l.hitch(this,function(){this._sendWeeklyScheduleDays().then(l.hitch(this,
function(a){b.resolve(a)}),l.hitch(this,function(a){b.reject(a)}))}),l.hitch(this,function(a){b.reject(a)}));return b.promise},_sendExceptionLength:function(){var b=new a;this.own(b);var c=this.exceptionSchedules.length,c=[{o:new K(v.objectTypes.OBJID_SCHEDULE,Number(this.pointInstance)),pl:[{p:new I(this._exSchedType,v.primitiveTypes.UNSIGNED_INTEGER),i:new I(0,v.primitiveTypes.UNSIGNED_INTEGER),v:new I(c,v.primitiveTypes.UNSIGNED_INTEGER)}]}];this._makeWriteRequest({type:"bacnet",gid:"SCHED",s:new M({device:this.mainController},
c,!0)}).then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){b.reject(a)}));return b.promise},_sendExceptionDays:function(){var b=new a;this.own(b);for(var c=this.exceptionSchedules.length,f=[],k=0;k<c;k++){var d=[{o:new K(v.objectTypes.OBJID_SCHEDULE,Number(this.pointInstance)),pl:[{p:new I(this._exSchedType,v.primitiveTypes.UNSIGNED_INTEGER),i:new I(k+1,v.primitiveTypes.UNSIGNED_INTEGER),v:new G([this.exceptionSchedules[k]])}]}];f.push(this._makeWriteRequest({type:"bacnet",gid:"SCHED",
s:new M({device:this.mainController},d,!0)}))}q(f).then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){b.reject(a)}));return b.promise},_sendExceptionSchedule:function(){var b=new a;this.own(b);this._sendExceptionLength().then(l.hitch(this,function(){this._sendExceptionDays().then(l.hitch(this,function(a){b.resolve(a)}),l.hitch(this,function(a){b.reject(a)}))}),l.hitch(this,function(a){b.reject(a)}));return b.promise},_getEffectivePeriod:function(){var a=this._startDate.get("value"),
a=new D(a.y,a.m,a.d,a.dow),b=this._endDate.get("value"),b=new D(b.y,b.m,b.d,b.dow);return new F(a,b)},_getDefaultComboItem:function(a){return this.defaultValueInput.store.query(a?a:{name:"*"})[0]},renderDefaultValue:function(){this._rev4Plus||(g.add(this.defaultValueNode,"hidden"),g.add(this.defaultValueLabelContainer,"hidden"));this.weeklySchedule.defaultValue=this.defaultValue;this.exceptionSchedule.defaultValue=this.defaultValue;p.forEach(this.weeklySchedule.eventContainers,function(a){a.defaultValue=
this.defaultValue},this);this.defaultValueInput&&this.defaultValueInput.destroyRendering(!1);this.exceptionSchedule.defaultValue=this.defaultValue;this._setDefaultValueComboBox();return this.defaultValue},_setDefaultValueComboBox:function(){var a=[],q,g=".*",t;switch(this.dataType){case v.primitiveTypes.UNSIGNED_INTEGER:case v.primitiveTypes.ENUMERATED:t=b.binary;q=0;this.dataType===v.primitiveTypes.UNSIGNED_INTEGER&&(t=b.multistate,q=1);g="\\b"+this.units.join("\\b|\\b")+"\\b|[0-9]+";t=u.substitute(b.invalidX,
[t.toLowerCase()]);for(var n=0;n<this.units.length;n++)a.push({id:n+q,value:n+q,name:this.units[n]});q=this.defaultValue.v;break;case v.primitiveTypes.REAL:g=2,null!==this.unitIndex&&(g=aa.get(this.unitIndex)),q=this.defaultValue.v.toFixed(g),g="^[-]?[.]?[0-9]+(?:.(?:[0-9]+))?$|^(?:"+b.relinq+")$",t=u.substitute(b.invalidX,[b.analog.toLowerCase()]),a.push({id:q,value:q,name:q})}0==this.defaultValue.v&&0==this.defaultValue.t&&(q=this._reliqValue);a.push({id:this._reliqValue,value:null,name:b.relinq});
a=new f({data:a});this.defaultValueInput=new r({store:a,value:q,pattern:g,required:!0,invalidMessage:t,trim:!0,"class":"mpwDefaultCombo"},d.create("div",{},this.defaultValueNode));this.dataType===v.primitiveTypes.ENUMERATED&&1<q&&this.defaultValueInput.set("displayedValue",q.toString());c.set(this.defaultValueLabelContainer,"for",this.defaultValueInput.domNode.id);rc.session.hasRole(rc.session.roles.wsChg)?(this.own(k(this.defaultValueInput,"change",l.hitch(this,this._onChangeDefaultCombo))),this.own(k(this.defaultValueInput,
"validate",l.hitch(this,this._onValidate)))):(this.defaultValueInput.onClick=function(){},this.defaultValueInput._onArrowMouseDown=function(){},this.defaultValueInput.set("disabled",!0));this.dataType!=v.primitiveTypes.ENUMERATED&&rc.session.hasRole(rc.session.roles.wsChg)||(this.defaultValueInput._onKeyPress=function(a){Q.stopEvent(a)});this.defaultValueInput.isValid=function(){return this.textbox.value.toLowerCase()==b.relinq.toLowerCase()?!0:this.validator(this.textbox.value,this.constraints)};
this.defaultValueInput._refreshState();this._changeWeeklyBG()},_onValidate:function(){"Error"!=this.defaultValueInput.state&&this.defaultValueInput.get("value")?this._saveButton.set("disabled",!1):this._saveButton.set("disabled",!0)},_onChangeDefaultCombo:function(a){"Error"!=this.defaultValueInput.state&&(a!==this._reliqValue&&this.dataType===v.primitiveTypes.REAL&&(a=Number(this.defaultValueInput.get("displayedValue"))),this._changeWeeklyBG(a),this.makeDirty(this.propertyBits.modifyScheduleDefault))},
_formatFloat:function(a){var b=a.split(".");a=b[0]?b[0]:"0";"-"==b[0]&&(a=b[0]+"0");b=b[1]?b[1].slice(0,2):"00";return a+"."+b},_changeWeeklyBG:function(a){if(this.dataType===v.primitiveTypes.ENUMERATED)a=isNaN(Number(this.defaultValueInput.get("displayedValue")))?Number(this.defaultValueInput.get("value")):Number(this.defaultValueInput.get("displayedValue"));else{a=Number(this.defaultValueInput.get("value"));var b=this._getDefaultComboItem({name:a});b&&(a=b.id)}this.weeklySchedule.changeDefault(this.dataType,
this.defaultValueInput.get("value"),a);this.exceptionSchedule.changeDefault(this.dataType,a);this._changeComboBG(this.dataType,a)},_changeComboBG:function(a,b){var c=this.defaultValueInput.domNode;if(b===this._reliqValue)n.set(c,{backgroundColor:"#d5ecbc"});else switch(a){case v.primitiveTypes.ENUMERATED:0<b?n.set(c,{backgroundColor:"#b96b6b"}):n.set(c,{backgroundColor:"#8ADFA6"});break;case v.primitiveTypes.BINARY:b===this._onValue?n.set(c,{backgroundColor:"#b96b6b"}):n.set(c,{backgroundColor:"#8ADFA6"});
break;case v.primitiveTypes.UNSIGNED_INTEGER:n.set(c,{backgroundColor:"#faeb74"});break;case v.primitiveTypes.REAL:n.set(c,{backgroundColor:"#88c3ff"})}},_ChangeSpecialEvent:function(a){0<a&&(this.exceptionSchedule.showEventDlg(a-1),this.specialEventsList.set("value",0))},getNumDaysInMonth:function(a,b){return 32-(new Date(b,a,32)).getDate()},_setSpecialEventList:function(){var a={label:"event",items:[]};a.items.push({name:b.choose+"...",value:0});this.exceptionSchedule.set("units",this.units);for(var c=
1;c<=this.exceptionSchedules.length;c++){var f=this.exceptionSchedules[c-1].l.getString(),f=f?": "+f:"",k={};k.name=b.spEvent+" "+c+f;k.value=c;a.items.push(k)}a=new h({data:l.clone(a)});this.specialEventsList.set("store",a);this.specialEventsList.set("searchAttr","name");this.specialEventsList.set("value",0)},_updateExceptionSchedules:function(){this.exceptionSchedules=this.exceptionSchedule.getEvents();this._setSpecialEventList()},_disableSpecialEvents:function(){this.specialEventsList.set("disabled",
!0)},_enableSpecialEvents:function(){this._exSchedSupport&&this.specialEventsList.set("disabled",!1)},print:function(a){this.printWithPreview(l.clone(this.domNode))},destroy:function(){this._retryHandler&&(this._retryHandler.shutdownRetryQueue(),this._retryHandler.reset(),this._retryHandler.destroyRecursive());rc.xhr.removeGroup("SCHED");p.forEach(this._bodyConnects,function(a){a.remove()});this._sDateConnect&&(this._sDateConnect.remove(),this._eDateConnect.remove());this.exceptionSchedules=null;
this.weeklySchedule&&(this.weeklySchedule.schedules=null);this.inherited(arguments)}})})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),function(r,p,m,l,h,c,g,d,n){m=m("dojo.data.ItemFileReadStore",[c],{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=
a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(a){return n.fromISOString(a)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==a.urlPreventCache&&(this.urlPreventCache=a.urlPreventCache?!0:!1);void 0!==
a.hierarchical&&(this.hierarchical=a.hierarchical?!0:!1);a.clearOnClose&&(this.clearOnClose=!0);"failOk"in a&&(this.failOk=a.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(a){if(!this.isItem(a))throw Error(this.declaredClass+": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(a,b,c){a=this.getValues(a,
b);return 0<a.length?a[0]:c},getValues:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return(a[b]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);var b=[],c;for(c in a)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&b.push(c);return b},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return b in a},containsValue:function(a,b,c){var k=void 0;"string"===typeof c&&(k=g.patternToRegExp(c,
!1));return this._containsValue(a,b,c,k)},_containsValue:function(a,b,c,k){return l.some(this.getValues(a,b),function(a){if(null!==a&&!p.isObject(a)&&k){if(a.toString().match(k))return!0}else if(c===a)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&
this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},filter:function(a,b,c){var k=[],d,f;if(a.query){var u;d=a.queryOptions?a.queryOptions.ignoreCase:!1;var n={};for(f in a.query)u=a.query[f],"string"===typeof u?n[f]=g.patternToRegExp(u,d):u instanceof RegExp&&(n[f]=u);for(d=0;d<b.length;++d){var t=!0,h=b[d];if(null===h)t=!1;else for(f in a.query)u=a.query[f],this._containsValue(h,f,u,n[f])||(t=!1);t&&k.push(h)}}else for(d=
0;d<b.length;++d)f=b[d],null!==f&&k.push(f);c(k,a)},_fetchItems:function(a,b,c){var k=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),b);else if(this._jsonFileUrl!==this._ccUrl?(r.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=
this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:p.hitch(k,"filter"),findCallback:p.hitch(k,b)});else{this._loadInProgress=!0;var d=h.get({url:k._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});d.addCallback(function(f){try{k._getItemsFromLoadedData(f),k._loadFinished=!0,k._loadInProgress=!1,k.filter(a,k._getItemsArray(a.queryOptions),b),k._handleQueuedFetches()}catch(w){k._loadFinished=
!0,k._loadInProgress=!1,c(w,a)}});d.addErrback(function(b){k._loadInProgress=!1;c(b,a)});var f=null;a.abort&&(f=a.abort);a.abort=function(){var b=d;b&&-1===b.fired&&(b.cancel(),b=null);f&&f.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,k.filter(a,this._getItemsArray(a.queryOptions),b)}catch(u){c(u,a)}else c(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),a)},_handleQueuedFetches:function(){if(0<
this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],c=b.args,k=b.filter,b=b.findCallback;k?k(c,this._getItemsArray(c.queryOptions),b):this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(a){this.clearOnClose&&this._loadFinished&&!this._loadInProgress&&(this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=
null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(a){function b(a){return null!==a&&"object"===typeof a&&(!p.isArray(a)||k)&&!p.isFunction(a)&&(a.constructor==Object||p.isArray(a))&&"undefined"===typeof a._reference&&"undefined"===typeof a._type&&"undefined"===typeof a._value&&d.hierarchical}function c(a){d._arrayOfAllItems.push(a);for(var f in a){var k=a[f];if(k)if(p.isArray(k))for(var g=0;g<k.length;++g){var q=k[g];b(q)&&c(q)}else b(k)&&c(k)}}var k=!1,d=this;
this._labelAttr=a.label;var f,g;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(f=0;f<this._arrayOfTopLevelItems.length;++f)g=this._arrayOfTopLevelItems[f],p.isArray(g)&&(k=!0),c(g),g[this._rootItemPropName]=!0;var n={},h;for(f=0;f<this._arrayOfAllItems.length;++f)for(h in g=this._arrayOfAllItems[f],g){if(h!==this._rootItemPropName){var l=g[h];null!==l?p.isArray(l)||(g[h]=[l]):g[h]=[null]}n[h]=h}for(;n[this._storeRefPropName];)this._storeRefPropName+="_";for(;n[this._itemNumPropName];)this._itemNumPropName+=
"_";for(;n[this._reverseRefMap];)this._reverseRefMap+="_";if(n=a.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=n,f=0;f<this._arrayOfAllItems.length;++f)if(g=this._arrayOfAllItems[f],a=g[n],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+n+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+
":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+n+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=g;else this._features["dojo.data.api.Identity"]=Number;for(f=0;f<this._arrayOfAllItems.length;++f)g=this._arrayOfAllItems[f],g[this._storeRefPropName]=this,g[this._itemNumPropName]=f;for(f=0;f<this._arrayOfAllItems.length;++f)for(h in g=this._arrayOfAllItems[f],g)for(a=g[h],n=0;n<a.length;++n)if(l=a[n],null!==l&&"object"==typeof l){if("_type"in
l&&"_value"in l){var m=l._type,v=this._datatypeMap[m];if(v)if(p.isFunction(v))a[n]=new v(l._value);else if(p.isFunction(v.deserialize))a[n]=v.deserialize(l._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+m+"'");}if(l._reference){l=l._reference;if(p.isObject(l))for(m=
0;m<this._arrayOfAllItems.length;++m){var v=this._arrayOfAllItems[m],A=!0,C;for(C in l)v[C]!=l[C]&&(A=!1);A&&(a[n]=v)}else a[n]=this._getItemByIdentity(l);this.referenceIntegrity&&(l=a[n],this.isItem(l)&&this._addReferenceToMap(l,g,h))}else this.isItem(l)&&this.referenceIntegrity&&this._addReferenceToMap(l,g,h)}},_addReferenceToMap:function(a,b,c){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];return b===Number?a[this._itemNumPropName]:(a=a[b])?a[0]:null},fetchItemByIdentity:function(a){var b,
c;if(this._loadFinished)b=this._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:r.global,a.onItem.call(c,b));else{var k=this;this._jsonFileUrl!==this._ccUrl?(r.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=
null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,c=h.get({url:k._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),c.addCallback(function(c){var f=a.scope?a.scope:r.global;try{k._getItemsFromLoadedData(c),k._loadFinished=!0,k._loadInProgress=!1,b=k._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(f,b),k._handleQueuedFetches()}catch(u){k._loadInProgress=!1,a.onError&&a.onError.call(f,u)}}),
c.addErrback(function(b){k._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:r.global,b)})):this._jsonData&&(k._getItemsFromLoadedData(k._jsonData),k._jsonData=null,k._loadFinished=!0,b=k._getItemByIdentity(a.identity),a.onItem&&(c=a.scope?a.scope:r.global,a.onItem.call(c,b)))}},_getItemByIdentity:function(a){var b=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(b=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,a)&&(b=this._arrayOfAllItems[a]);
void 0===b&&(b=null);return b},getIdentityAttributes:function(a){a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;this._jsonFileUrl!==this._ccUrl?(r.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=this.data&&(this._jsonData=this.data,
this.data=null);if(this._jsonFileUrl){var b=h.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});b.addCallback(function(b){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(b),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(k){throw k;}});b.addErrback(function(a){throw a;})}else this._jsonData&&
(a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0)}});p.extend(m,d);return m})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(r){var p={};r.setObject("dojo.data.util.filter",p);p.patternToRegExp=function(m,l){for(var h="^",c=null,g=0;g<m.length;g++)switch(c=m.charAt(g),c){case "\\":h+=c;g++;h+=m.charAt(g);break;case "*":h+=".*";break;case "?":h+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":h+=
"\\";default:h+=c}h+="$";return l?new RegExp(h,"mi"):new RegExp(h,"m")};return p})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(r,p,m){var l={};r.setObject("dojo.data.util.simpleFetch",l);l.errorHandler=function(h,c){c.onError&&c.onError.call(c.scope||p.global,h,c)};l.fetchHandler=function(h,c){var g=c.abort||null,d=!1,n=c.start?c.start:0,a=c.count&&Infinity!==c.count?n+c.count:h.length;c.abort=function(){d=!0;g&&g.call(c)};var b=c.scope||
p.global;c.store||(c.store=this);c.onBegin&&c.onBegin.call(b,h.length,c);c.sort&&h.sort(m.createSortFunction(c.sort,this));if(c.onItem)for(var t=n;t<h.length&&t<a;++t){var k=h[t];d||c.onItem.call(b,k,c)}c.onComplete&&!d&&(t=null,c.onItem||(t=h.slice(n,a)),c.onComplete.call(b,t,c))};l.fetch=function(h){h=h||{};h.store||(h.store=this);this._fetchItems(h,r.hitch(this,"fetchHandler"),r.hitch(this,"errorHandler"));return h};return l})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(r){var p=
{};r.setObject("dojo.data.util.sorter",p);p.basicComparator=function(m,l){var h=-1;null===m&&(m=void 0);null===l&&(l=void 0);if(m==l)h=0;else if(m>l||null==m)h=1;return h};p.createSortFunction=function(m,l){function h(a,b,c,d){return function(f,k){var g=d.getValue(f,a),q=d.getValue(k,a);return b*c(g,q)}}for(var c=[],g,d=l.comparatorMap,n=p.basicComparator,a=0;a<m.length;a++){g=m[a];var b=g.attribute;if(b){g=g.descending?-1:1;var t=n;d&&("string"!==typeof b&&"toString"in b&&(b=b.toString()),t=d[b]||
n);c.push(h(b,g,t,l))}}return function(a,b){for(var f=0;f<c.length;){var k=c[f++](a,b);if(0!==k)return k}return 0}};return p})},"rc/bacnet/_schedule/ExceptionSchedule":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/Menu dijit/MenuItem dijit/popup dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/Deferred dojo/dnd/common dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!rc/nls/cal dojo/mouse dojo/on dojo/promise/all dojo/query dojo/string dojo/text!rc/bacnet/_schedule/templates/ExceptionSchedule.html dojo/topic dojox/widget/PlaceholderMenuItem ./ExceptionCalendar ../_widget/_CalendarSet ../enums ../io/Array ../io/CalendarEntryList ../io/Number ../io/Object ../io/service/ReadPropertyMultiple ../../_base/util".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O){return d("rc/bacnet/_schedule/ExceptionSchedule",[H,p,r,m,u],{widgetsInTemplate:!0,templateString:E,mainController:1E3,subController:1,subnet:0,mnemonic:"",src:"",dataType:null,defaultValue:null,eventTypes:{date:0,dateRange:1,recurrence:2,calendar:3,override:4},CAL_OBJECT:12,_calServices:null,_calObjs:null,_eventDialog:null,_objectList:null,_exCalWidgets:null,_blurTimeout:null,_mouseConnect:null,_updating:!1,_errMsg:"",
_isEnhanced:null,constructor:function(){this.currentEventColor=1;this._calServices=[];this._calObjs={};this._objectList=[];this._exCalWidgets=[];this._mouseConnect=[]},postCreate:function(){this.inherited(arguments);this.own(y(this,"blur",n.hitch(this,this._blurEvent)));this.own(y(this,"focus",n.hitch(this,this._focusEvent)));this.own(y(this._popMenu,"focus",n.hitch(this,this._focusEvent)));this.own(y(this._popMenu,"blur",n.hitch(this,this._blurEvent)));this._canEdit?(this._popMenu.addChild(new h({label:w.spCreate,
onClick:n.hitch(this,"_onClickCreate")}),this.menuCreate),this.own(y(this._yearSpinner.upArrowNode,"click",n.hitch(this,this._changeYear))),this.own(y(this._yearSpinner.downArrowNode,"click",n.hitch(this,this._changeYear))),this.own(y(this._yearSpinner,"keyUp",n.hitch(this,this._filterYear))),this._popMenu.unBindDomNode(this._calendarContainer)):(q.add(this.domNode,"rcReadOnly"),g.forEach(this._popMenu.getChildren(),function(a){a.label===w.spCreate&&a.destroy()},this))},changeDefault:function(a,b){this.defaultValue.t=
a;this.defaultValue.v=b},_getEditRoles:function(){return rc.session.isPrivate()&&rc.session.hasRole(rc.session.roles.esChg)},setEnhanced:function(a){this._isEnhanced=a;null!==this._eventDialog&&this._eventDialog.set("isEnhanced",a)},scrollToCurrentMonth:function(){var a=(new Date).getMonth(),b=this.domNode.parentNode;b&&(b.scrollTop=this._monthNodes[a].domNode.offsetTop)},_createCalendars:function(){for(var a=1;12>=a;a++){var b=new F({month:a,parent:this},f.create("div",{},this._calendarContainer));
this._exCalWidgets.push(b)}},initialize:function(a){this._calendarEntries=a;a=new b;a.resolve(!0);this._beginUpdate()&&(this.onFetchBegin(),this._calObjs={},a.then(n.hitch(this,function(){this._errMsg=C.substitute(w.couldNotLoad,[z.specialEventCalendars]);return this._fetchDisplayCalendars(this._calendarEntries)})).then(n.hitch(this,function(){this.onFetchComplete();this._errMsg=C.substitute(w.couldNotDisplay,[w.exSched]);null!==this._eventDialog&&this._eventDialog.showCalendarLoading();var a=this._fetchAllCalendars();
this._populateCalendars(this._calendarEntries);return a})).then(n.hitch(this,function(){null!==this._eventDialog&&this._eventDialog.clearCalendarLoading(this._calObjs);this._errMsg=w.couldNotFinish;this._endUpdate()})),a.promise.otherwise(n.hitch(this,function(a){null!==this._eventDialog&&this._eventDialog.clearCalendarLoading(this._calObjs);this._endUpdate();this.onFetchError({message:this._errMsg,e:a})})));return a.promise},_beginUpdate:function(){if(this._updating)return!1;g.forEach(this._mouseConnect,
n.hitch(this,function(a){a.remove()}));this._mouseConnect=[];return this._updating=!0},_endUpdate:function(){this._calendarSetContainer&&(g.forEach(this._mouseConnect,n.hitch(this,function(a){a.remove()})),this._mouseConnect=[],this._mouseConnect.push(y(this._calendarSetContainer,"mousedown",n.hitch(this,this._mouseDownEvent))));this._updating=!1},_fetchDisplayCalendars:function(a){var b=[];g.forEach(a,function(a){1===a.p.c&&-1===g.indexOf(b,a.p.d.i)&&b.push(a.p.d.i)},this);return this._updateCalendarObjs(b)},
_populateCalendars:function(a){this._updateEntireYear(null,"delete");this._eventsByDate={};g.forEach(a,function(a,b){switch(a.p.c){case 0:this._populateEvent(a.p.d,b);break;case 1:this._calObjs[a.p.d.i]&&this._calObjs[a.p.d.i].list&&g.forEach(this._calObjs[a.p.d.i].list,function(a){this._populateEvent(a,b)},this)}},this);this._flushCalendars()},_flushCalendars:function(a){if(!a){a=[];for(var b=0;12>b;b++)a.push(b)}g.forEach(a,function(a){a=this._monthNodes[a];a._flushSelectArray();a._markSpecialEvents(this._eventsByDate)},
this)},_fetch:function(a,b){b||(b=function(a){});return rc.xhr.request({type:"bacnet",gid:"SCHED",s:new M({device:this.mainController},a),load:n.hitch(this,b),error:function(a,b){}})},_updateCalendarObjs:function(a){var c=new b;if(0<a.length){var f=[];g.forEach(a,n.hitch(this,function(a){this._calObjs[a]||f.push(this._fetchCalendar(a).then(n.hitch(this,function(b){this._decodeCalendar(b,a);return this._calObjs[a]})))}));v(f).then(n.hitch(this,function(a){c.resolve(a)}))}else c.resolve([]);return c.promise},
_fetchAllCalendars:function(){var a=new b;if(rc.test.isLive()){var c=this._fetchObjectCount();this.own(c);c.then(n.hitch(this,function(b){b.e&&a.reject(b);b=b.o[0].pl[0].v.v;this._objectList=[];for(var c=b/100,f=0,k=[],d=0;d<c;d++)k.push(this._fetchObjectList(100*f++ +1,100,b));v(k).then(n.hitch(this,function(a){a=g.filter(this._objectList,function(a,b,c){return a.v.t===J.objectTypes.OBJID_CALENDAR},this);a=g.map(a,function(a){return a.v.i});this._objectList=[];return this._updateCalendarObjs(a)})).then(n.hitch(this,
function(b){a.resolve(b)}),n.hitch(this,function(b){a.reject(b)}))}),n.hitch(this,function(b){a.reject(b)}))}else a.resolve(!0);return a.promise},_fetchObjectCount:function(){var a=[{o:new L(J.objectTypes.OBJID_DEVICE,this.mainController),pl:[{p:new K(J.propertyTypes.PROPID_OBJECT_LIST,J.primitiveTypes.ENUMERATED),i:new K(0,J.primitiveTypes.UNSIGNED_INTEGER),v:new K(0,J.primitiveTypes.UNSIGNED_INTEGER)}]}];return this._fetch(a)},_fetchObjectList:function(a,b,c){if(c<a)return null;c<a+b&&(b=c-a+1);
c=[{o:new L(J.objectTypes.OBJID_DEVICE,this.mainController),pl:[]}];for(var f=0;f<b;f++){var k={p:new K(J.propertyTypes.PROPID_OBJECT_LIST,J.primitiveTypes.ENUMERATED),i:new K(a+f,J.primitiveTypes.UNSIGNED_INTEGER),v:new L};c[0].pl.push(k)}return this._fetch(c,function(a){a.e||(this._objectList=this._objectList.concat(a.o[0].pl))})},_fetchCalendar:function(a){a=[{o:new L(J.objectTypes.OBJID_CALENDAR,a),pl:[{p:new K(J.propertyTypes.PROPID_DATELIST,J.primitiveTypes.ENUMERATED),i:-1,v:new I},{p:new K(J.propertyTypes.PROPID_OBJECT_NAME,
J.primitiveTypes.ENUMERATED),i:-1,v:new G([],J.primitiveTypes.CHARACTER_STRING)}]}];return this._fetch(a,function(a){this._calServices=a})},_getEventType:function(a){var b=this.eventTypes.date;2===a.length&&!1===O.bacnetDatesAreSame(a[0],a[1])&&(b=this.eventTypes.dateRange);a.push(b)},_decodeCalendar:function(a,b){0===a.e&&(this._calObjs[b]={list:a.o[0].pl[0].v.l,name:a.o[0].pl[1].v.getString()});return a},_mouseDownEvent:function(b){this._popMenu.isShowingNow&&this._closePopUp();x.isLeft(b)&&(this.DEnode=
this._getDayNode(b.target),null==this.DEnode?this._closePopUp():this.mouseDown||b.currentTarget.id!=this.id||(this.mouseDown=!0,this.own(y(a.doc,"mouseover",n.hitch(this,this._mouseCalOverEvent))),this.own(y(a.doc,"mouseup",n.hitch(this,this._mouseCalUpEvent))),this.own(y(a.doc,"mousemove",n.hitch(this,this._mouseCalMoveEvent))),this._mdStart=this._mdCurrent=this._getMonthDay(this.DEnode),this._mouseCalOverEvent(b)))},_mouseCalMoveEvent:function(a){this.mouseDown&&t.autoscroll.autoScroll(a)},_mouseCalOverEvent:function(a){if(this.mouseDown&&
this._canEdit){var b;this.DEnode=this._getDayNode(a.target);if(null!=this.DEnode&&(a=this._getMonthDay(this.DEnode),null!=a)){a.m!=this._mdCurrent.m&&this._monthNodes[this._mdCurrent.m-1].setHover(0,this._monthNodes[this._mdCurrent.m-1].numDays-1,!1);this._mdCurrent=a;this._mdStart.m==this._mdCurrent.m?this._mdStart.d<=this._mdCurrent.d?(a=this._mdStart,b=this._mdCurrent):(a=this._mdCurrent,b=this._mdStart):this._mdStart.m<this._mdCurrent.m?(a=this._mdStart,b=this._mdCurrent):(a=this._mdCurrent,b=
this._mdStart);for(var c,f,k=a.m;k<=b.m;k++)c=k==a.m?a.d:0,f=k==b.m?b.d:this._monthNodes[k-1].numDays-1,this._monthNodes[k-1].setHover(c,f,!0)}}},_mouseCalUpEvent:function(a){O.stopEvent(a);if(x.isLeft(a)&&this.mouseDown)if(null==this._getDayNode(a.target))this.mouseDown&&this._closePopUp(),this.mouseDown=!1;else if(this.mouseDown){var b=this._eventsByDate[this._mdCurrent.m+"-"+(this._mdCurrent.d+1)]||[];1>b.length&&(this._resetPopupMenu(),this._canEdit&&c.open({popup:this._popMenu,x:a.pageX,y:a.pageY}));
1<=b.length&&(this._resetPopupMenu(),this._initializeMultipleCalendarEntryPopup(b),c.open({popup:this._popMenu,x:a.pageX,y:a.pageY}));this.mouseDown=!1}},_specEventToString:function(a){var b,c=this._calendarEntries[a];switch(c.p.c){case 0:b=this._periodToString(c.p.d);break;case 1:b=C.substitute(z.xCalendar,[this._calObjs[c.p.d.i].name])}c=(c=O.escapeHtml(c.l.getString()))?c:w.spEvent+" "+(parseInt(a)+1);return c+": "+b},_onClickCreate:function(a){this.emit("clickCreate");this.mouseDown=!1;this.showEventDlg(null);
this._closePopUp();O.stopEvent(a)},_onCalEntryClick:function(a){this.mouseDown=!1;this.showEventDlg(parseInt(k.get(a.currentTarget,"id")));this._closePopUp();O.stopEvent(a)},_closePopUp:function(){this._popMenu.isShowingNow&&c.close(this._popMenu);g.forEach(this._monthNodes,function(a){a.setHover(0,a.numDays-1,!1)},this)},showEventDlg:function(a){this._createEventDialog();var b;if(null==a){if(this._mdStart.m>this._mdCurrent.m||this._mdStart.m===this._mdCurrent.m&&this._mdStart.d>this._mdCurrent.d)b=
this._mdStart,this._mdStart=this._mdCurrent,this._mdCurrent=b;b=[{d:this._mdStart.d+1,m:this._mdStart.m,y:this._year-this.BACNET_YEAR_OFFSET,dow:(new Date(this._year,this._mdStart.m,this._mdStart.d+1)).getDay()},{d:this._mdCurrent.d+1,m:this._mdCurrent.m,y:this._year-this.BACNET_YEAR_OFFSET,dow:(new Date(this._year,this._mdCurrent.m,this._mdCurrent.d+1)).getDay()}];this._getEventType(b)}this._eventDialog.clearCalendarLoading(this._calObjs);this._eventDialog._dialog.show();this._eventDialog.initialize(n.clone(this._calendarEntries),
this.units,this.defaultValue,this._calObjs,b,a)},onUpdate:function(a){null!=a&&(this._calendarEntries=a,this._populateCalendars(this._calendarEntries),this._fetchDisplayCalendars(this._calendarEntries).then(n.hitch(this,function(){this._populateCalendars(this._calendarEntries)})));this.emit("update")},getEvents:function(){return n.clone(this._calendarEntries)},_resetPopupMenu:function(){g.forEach(this._popMenu.getPlaceholders("Events"),function(a){a.unReplace()})},_initializeMultipleCalendarEntryPopup:function(a){for(var b=
[],c=0;c<a.length;c++){var f=new h({calEntriesIndex:a[c],label:this._specEventToString(a[c]),parent:this._popMenu});this.own(y(f.domNode,"click",n.hitch(this,this._onCalEntryClick)));k.set(f.domNode,"id",a[c]);b.push(f)}g.forEach(this._popMenu.getPlaceholders("Events"),function(a){a.replace(b)})},destroy:function(){g.forEach(this._exCalWidgets,function(a){a.destroy()});this.dfd=this._monthNodes=null;this.inherited(arguments)},_blurEvent:function(){this._blurTimeout=setTimeout(n.hitch(this,"_closePopUp"),
20)},_focusEvent:function(){this._blurTimeout&&clearTimeout(this._blurTimeout)},onFetchBegin:function(){this.emit("fetchBegin")},onFetchComplete:function(){this._calendarSetContainer&&(g.forEach(this._mouseConnect,n.hitch(this,function(a){a.remove()})),this._mouseConnect=[],this._mouseConnect.push(y(this._calendarSetContainer,"mousedown",n.hitch(this,this._mouseDownEvent))));this.emit("fetchComplete")},onFetchError:function(a){this.onFetchComplete()}})})},"rc/bacnet/_schedule/ExceptionCalendar":function(){define("dijit/_Contained dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/cldr/supplemental dojo/date/locale dojo/dom-class dojo/dom-construct dojo/query dojo/text!rc/bacnet/_calendar/templates/_Calendar.html ../../widget/_Calendar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return m("rc/bacnet/_schedule/ExceptionCalendar",[b,r],{templateString:a,value:new Date,dayWidth:"narrow",_currentNode:null,daySpans:[],month:"",constructor:function(a){this.date=new Date((new Date).getFullYear(),a.month-1,1);this.dayArray=[];this.dayHiliteArray=[];for(var b=0;b<this.numDays;b++)this.dayArray.push(0);this.month=a.month},postCreate:function(){var a=l.hitch(this,function(a,b){for(var c=n(a,this.domNode)[0],f=0;f<b;f++)c.parentNode.appendChild(c.cloneNode(!0))});
a(".dijitCalendarDayLabelTemplate",6);a(".dijitCalendarDateTemplate",6);a(".dijitCalendarWeekTemplate",5);var b=c.getNames("days",this.dayWidth,"standAlone",this.lang),d=h.getFirstDayOfWeek(this.lang);n(".dijitCalendarDayLabel",this.domNode).forEach(function(a,c){this._setText(a,b[(c+d)%7])},this);this.setValue(this.date);this.dayNodes=n("[class^\x3d'dijitCalendarCurrent']",this.domNode);this.daySpans=[];n(".dijitCalendarDateLabel",this.domNode).forEach(function(a){(g.contains(a.parentNode.parentNode,
"dijitCalendarCurrentMonth")||g.contains(a.parentNode.parentNode,"dijitCalendarCurrentWeekendMonth"))&&this.daySpans.push(a)},this);rc.session.hasRole(rc.session.roles.esChg)||(this._onDayClick=this._onDayMouseOut=this._onDayMouseOver=function(){})},setHover:function(a,b,c){p.forEach(this.dayNodes,function(f,k){k>=a&&k<=b?c?(g.add(f,"dijitCalendarHoveredDate"),this.dayHiliteArray[parseInt(f.lastChild.firstChild.innerHTML)-1]=1,this._currentNode=k==b?null:f):(g.remove(f,"dijitCalendarHoveredDate"),
this.dayHiliteArray[parseInt(f.lastChild.firstChild.innerHTML)-1]=0,this._currentNode=null):(g.remove(f,"dijitCalendarHoveredDate"),this.dayHiliteArray[parseInt(f.lastChild.firstChild.innerHTML)-1]=0,this._currentNode=null)},this)},_onDayClick:function(a){},_onDayMouseOver:function(a){this.parent._popMenu.isShowingNow||this.parent.mouseDown||!(a=this._getDayNode(a.target))||(a=a.parentNode.parentNode,g.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},onValueSelected:function(a){},onChange:function(a){},
isDisabledDate:function(a,b){},getClassForDate:function(a,b){},exportSelections:function(){return this.dayArray},_markSpecialEvents:function(a){var b=[];n(".dijitCalendarDateTemplate",this.domNode).forEach(function(c){for(var f=c.childNodes.length-1;0<=f;f--)g.contains(c.childNodes[f],"rcSpecialEventContainer")&&d.destroy(c.childNodes[f]);if((g.contains(c,"dijitCalendarCurrentMonth")||g.contains(c,"dijitCalendarCurrentWeekendMonth"))&&(b=a[c.id])&&b.length){var k=d.create("div",{className:"rcSpecialEventContainer rcSpecialEventContainer"+
b.length});p.forEach(b,function(a){d.create("div",{className:"rcSpecialEvent rcSpecialEvent"+a+" rcSpecialEventColor"+(a%19+1)},k)});d.place(k,c,"first")}},this)},destroy:function(){p.forEach(this.daySpans,d.destroy);this.daySpans=null;d.destroy(this._currentNode);this.parent=this._currentNode=null;this.inherited(arguments)}})})},"rc/bacnet/io/DailySchedule":function(){define(["dojo/_base/declare","./List","./TimeValue","../error"],function(r,p,m,l){return r("rc/bacnet/io/DailySchedule",p,{d:null,
constructor:function(h){this.d=new p(new m);this.d.l=h||[]},encode:function(){var h=[];h.push(14);h=h.concat(this.d.encode());h.push(15);return h},decode:function(h,c){if(14!=h[c++])return l.throwError(65,62),c;c=this.d.decode(h,c);15!=h[c++]&&l.throwError(65,62);return c},toString:function(){return this.d.toString()}})})},"rc/bacnet/io/ExceptionSchedule":function(){define(["dojo/_base/declare","./List","./SpecialEvent"],function(r,p,m){return r("rc/bacnet/io/ExceptionSchedule",p,{constructor:function(l){this.o=
new m;this.l=l||[]}})})},"rc/bacnet/io/WeeklySchedule":function(){define(["dojo/_base/declare","./DailySchedule","./List"],function(r,p,m){return r("rc/bacnet/io/WeeklySchedule",m,{constructor:function(l){this.o=new p;this.l=l||[]}})})},"rc/bacnet/_schedule/WeeklySchedule":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/CheckedMenuItem dijit/Menu dijit/MenuItem dijit/popup dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/date/locale dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/Evented dojo/has dojo/i18n!rc/nls/all dojo/on dojo/query dojo/text!rc/bacnet/_schedule/templates/WeeklySchedule.html ./WeeklyScheduleEditDialog ./WeeklyScheduleContainer ../enums".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D){return a("rc/bacnet/_schedule/WeeklySchedule",[p,r,m,z],{widgetsInTemplate:!0,templateString:C,src:"",days:7,editDialog:null,_deleteEvent:null,_scrollBarWidth:0,schedules:null,eventContainers:null,intervalsPerHour:null,intervalHeight:null,intervalPixelHeight:null,defaultValue:null,dataType:null,cssClass:"rc_bacnet_weeklySchedule",_canEdit:!0,_units:null,_reliqValue:-1,_onValue:1,menuSchedConnect:null,_creatingEvent:!1,constructor:function(){this.schedules=
[];this.eventContainers=[];this.intervalsPerHour=0;this.intervalHeight=1;this.emHeight=16;this.intervalPixelHeight=this.intervalHeight*this.emHeight},postCreate:function(){this.days instanceof Number||(this.days=Number(this.days));this._canEdit=rc.session.hasRole(7===this.days?rc.session.roles.wsChg:rc.session.roles.esChg);this.inherited(arguments);this.dowStores=[];this._canEdit?this._buildEditDeleteMenu():q.add(this.domNode,"rcReadOnly");this._buildTimeResolutionMenu();this.getScrollbarWidth();
w.set(this.header,"marginRight",this._scrollBarWidth+"px");d.byNode(this.containerNode.parentNode)||this.resize(u.getMarginBox(this.containerNode.parentNode))},startup:function(){this.inherited(arguments);var a=100/this.days,c=0;if(7===this.days){this._cloneClass(".scheduleWeeklyDOW",6);var d=k.getNames("days","abbr","standAlone",this.lang);A(".scheduleWeeklyDOW",this.containerNode).forEach(function(b,f){b.innerHTML=d[(f+1)%7];w.set(b,{left:c+"%",width:a+"%"});c+=a},this)}else{var g=A(".scheduleWeeklyDOW",
this.containerNode)[0];g.innerHTML=y.spDay;w.set(g,{left:"0%",width:a+"%"})}this._setRoundedFontSize();this._resizeTimeIntervals(2);for(g=c=0;g<this.days;g++){var q=f.create("div");this.containers.appendChild(q);q=new B({pixelsPerUnit:this.intervalPixelHeight,minutesPerUnit:60/this.intervalsPerHour,dow:g+1,parent:this,canEdit:this._canEdit,style:{left:c+"%",width:a+"%"},defaultValue:this.defaultValue},q);this._supportingWidgets.push(q);this.eventContainers.push(q);this.own(v(q,"eventsHaveChanged",
b.hitch(this,this.onChange)),v(q,"openMenu",b.hitch(this,this.openMenu)),v(q,"closeMenu",b.hitch(this,this.closeMenu)),v(q,"creatingEvent",b.hitch(this,this._onCreatingEvent)),v(q,"setSelectedEvent",b.hitch(this,this.setSelectedEvent)));c+=a}},_cancelMenuScheduleOpen:function(){this.menu._openTimer&&(clearTimeout(this.menu._openTimer),delete this.menu._openTimer);this._disconnectMenuSchedConnect()},_disconnectMenuSchedConnect:function(){this.menuSchedConnect&&(this.menuSchedConnect.remove(),this.menuSchedConnect=
null)},_cloneClass:function(a,b){for(var c=A(a,this.containerNode)[0],f=0;f<b;f++)c.parentNode.appendChild(c.cloneNode(!0))},_resizeTimeIntervals:function(a){if(a!==this.intervalsPerHour){this.intervalsPerHour=a;var b=0,c=1*this.intervalsPerHour;a=24*c;var k=12,d="am";w.set(this.weeklyTimeContainer,{height:a+"em"});this.containerNode.className="";this.containerNode.className=this.cssClass+" mpw"+60/this.intervalsPerHour+"MinIntervals";w.set(this.mainWeekWindow,{height:a+"em"});1===A(".scheduleWeeklyTime",
this.containerNode).length&&this._cloneClass(".scheduleWeeklyTime",23);A(".scheduleWeeklyTime",this.containerNode).forEach(function(a){w.set(a,{top:b+"em"});b+=c;12===k&&"00"===d&&(d="pm");a.innerHTML="\x3cdiv\x3e"+k+"\x3csup class\x3d'scheduleWeeklyTimeSup'\x3e"+d+"\x3c/sup\x3e\x3c/div\x3e";k++;12<k&&(k=1);d="00"},this);a=A(".scheduleWeeklyLine",this.containerNode);for(var g=a.length-1;1<g;g--)f.destroy(a[g]);for(g=0;24>g;g++)this._cloneClass(".scheduleWeeklyLineMajor",1),this._cloneClass(".scheduleWeeklyLineMinor",
this.intervalsPerHour-1);a=A(".scheduleWeeklyLine",this.containerNode);a=a.slice(2);b=0;a.forEach(function(a){w.set(a,{top:b+"em"});b+=1},this);this.intervalPixelHeight=this.intervalHeight*this.emHeight}},_buildTimeResolutionMenu:function(){this.timeResolutionMenu=new h({targetNodeIds:[this.weeklyTimeContainer],leftClickToOpen:x("touch")},"weeklyMenu");var a;n.forEach([{str:"60 "+y.minutes,res:60},{str:"30 "+y.minutes,res:30},{str:"15 "+y.minutes,res:15},{str:"10 "+y.minutes,res:10},{str:"5 "+y.minutes,
res:5}],function(c){a=!1;30===c.res&&(a=!0);c=new l({label:c.str,checked:a,onClick:b.hitch(this,"_onClickTimeResolution"),timeResolution:c.res});this.timeResolutionMenu.addChild(c)},this);this.timeResolutionMenu.startup();g.close(this.timeResolutionMenu);this._supportingWidgets.push(this.timeResolutionMenu)},_buildEditDeleteMenu:function(){this.menu=new h({targetNodeIds:[this.mainWeekWindow],leftClickToOpen:!1},"weeklyMenuEdit");this._supportingWidgets.push(this.menu);7===this.days&&this.menu.addChild(new c({label:y.edit,
onClick:b.hitch(this,this._onClickEdit)}));this.menuDelete=new c({label:y.rcDelete,onClick:b.hitch(this,this._onClickDelete)});this.menu.addChild(this.menuDelete);this.menu.startup();g.close(this.menu)},onUpdate:function(a){n.forEach(a.dow,function(b){this.schedules[b-1].d.l=[];n.forEach(a.tv,function(a){this.schedules[b-1].d.l.push(a)},this);this.eventContainers[b-1].clear();this.eventContainers[b-1].populate(this.schedules[b-1].d.l)},this);this.onChange();this.emit("update",a)},populateSchedules:function(a){this.deleteAllSchedulesEvents();
n.forEach(this.schedules,function(a,b){this.eventContainers[b].populate(a.d.l)},this);this._disconnectMenuSchedConnect();this._creatingEvent=!1;this._units=a},deleteAllSchedulesEvents:function(){n.forEach(this.eventContainers,function(a){a.clear()})},getScheduleEvents:function(){n.forEach(this.eventContainers,function(a,b){var c=a.toBacnet();this.schedules[b].d.l=c.d.l},this)},getScrollbarWidth:function(){if(this._scrollBarWidth)return this._scrollBarWidth;this._scrollBarWidth=18;try{var a=document.createElement("div");
a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";document.body.appendChild(a);this._scrollBarWidth=a.offsetWidth-a.clientWidth;document.body.removeChild(a);delete a}catch(H){}return this._scrollBarWidth},_setRoundedFontSize:function(){this.emHeight=Math.round(this._getEmHeight());w.set(this.containerNode,"fontSize",this.emHeight+"px")},_getEmHeight:function(){var a=16;try{var b=f.create("div",{style:"height:10em; width:1em; font-size:100%; line-height:1.0; position: absolute; left:0; top: 0;",
innerHTML:"\x26nbsp;"},this.domNode,"first"),a=b.offsetHeight/10;8>a&&(a=16);f.destroy(b);delete b}catch(J){}return a},resize:function(a){if(a){var c=u.getMarginBox(this.header);w.set(this.scroller,"height",a.h-c.h+2+"px");w.set(this.containerNode.parentNode.parentNode,"bottom","inherit");u.getMarginBox(this.scroller)}else setTimeout(b.hitch(this,function(){this.containerNode&&this.containerNode.parentNode&&this.resize(u.getMarginBox(this.containerNode.parentNode))}),50)},_onClickTimeResolution:function(a){var b=
d.byNode(a.target.parentNode)||d.byNode(a.target.parentNode.parentNode);b.get("checked")?(n.forEach(this.timeResolutionMenu.getChildren(),function(a){a!=b&&a.set("checked",!1)},this),this._changeTimeResolution(b.timeResolution)):b.set("checked",!0)},setSelectedEvent:function(a){(this._selectedEvent=a)&&a.declaredClass&&-1!==a.declaredClass.indexOf("WeeklyScheduleEvent")?this.menuDelete.set("disabled",!1):this.menuDelete.set("disabled",!0)},_onCreatingEvent:function(){this._creatingEvent=!0},_changeTimeResolution:function(a){this._resizeTimeIntervals(60/
a);n.forEach(this.eventContainers,function(b){b.minutesPerUnit=a},this);if(7===this.days)this.populateSchedules();else{var c=[],f=this.eventContainers[0];n.forEach(f.events,function(a){c.push(b.clone(a.tv))},this);f.clear();n.forEach(c,function(a){f.createEvent(null,a)},this)}},_onClickDelete:function(a){try{this._selectedEvent&&(this._selectedEvent.parentContainer.clearEvent(this._selectedEvent),this._selectedEvent=null)}catch(H){}this.emit("clickDelete")},_onClickEdit:function(a){this._createEditDialog();
a=null;a=this._selectedEvent instanceof B?this._selectedEvent:this._selectedEvent.parentContainer||d.byNode(this._selectedEvent.parentNode);this.editDialog.dialog.show();this.editDialog.populateGrid(a.dow,a.toBacnet())},_createEditDialog:function(){null===this.editDialog&&(this.editDialog=new E({parent:this,defaultValue:this.defaultValue,_scheduleDataType:this.dataType,_units:this._units}),this._supportingWidgets.push(this.editDialog),this.own(v(this.editDialog,"closeDialog",b.hitch(this,this.onUpdate))))},
changeDefault:function(a,b,c){this._alterBGColor(this.mainWeekWindow,a,c);this.defaultValue.v=c;n.forEach(this.eventContainers,function(a){a.defaultValue.v=this.defaultValue.v},this)},_alterBGColor:function(a,b,c){q.remove(a,"scheduleWeeklyBGOff");q.remove(a,"scheduleWeeklyBGOn");q.remove(a,"scheduleWeeklyBGRelinq");q.remove(a,"scheduleWeeklyBGAnalog");q.remove(a,"scheduleWeeklyBGMulti");if(c===this._reliqValue)q.add(a,"scheduleWeeklyBGRelinq");else switch(b){case D.primitiveTypes.ENUMERATED:0!==
c?q.add(a,"scheduleWeeklyBGOn"):q.add(a,"scheduleWeeklyBGOff");break;case D.primitiveTypes.BINARY:c===this._onValue?q.add(a,"scheduleWeeklyBGOn"):q.add(a,"scheduleWeeklyBGOff");break;case D.primitiveTypes.UNSIGNED_INTEGER:q.add(a,"scheduleWeeklyBGMulti");break;case D.primitiveTypes.REAL:q.add(a,"scheduleWeeklyBGAnalog");break;default:q.add(a,"scheduleWeeklyBGOff")}},onChange:function(a){this.emit("change",a);this.menuSchedConnect||!a||this._creatingEvent||(this.menuSchedConnect=t.after(this.menu,
"_scheduleOpen",b.hitch(this,this._cancelMenuScheduleOpen)),setTimeout(b.hitch(this,function(){this._disconnectMenuSchedConnect()}),500));this._creatingEvent=!1},openMenu:function(a){this.menu._scheduleOpen(a.target,null,{x:a.pageX,y:a.pageY})},closeMenu:function(a){this.menu&&g.close(this.menu)},destroy:function(){this.timeResolutionMenu.unBindDomNode("weeklyTimeContainerID");this.eventContainers=null;this.inherited(arguments)}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare",
"dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(r,p,m,l){return r("dijit.CheckedMenuItem",m,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:l,checked:!1,_setCheckedAttr:function(h){this.domNode.setAttribute("aria-checked",h?"true":"false");this._set("checked",h)},iconClass:"",role:"menuitemcheckbox",checkedChar:"\x26#10003;",onChange:function(){},_onClick:function(h){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));
this.onClick(h)}})})},"rc/bacnet/_schedule/WeeklyScheduleEditDialog":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/Selection dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/form/ComboBox dijit/form/ValidationTextBox dijit/Menu dijit/MenuItem dijit/popup dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/Deferred dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!rc/nls/units dojo/on dojo/promise/all dojo/store/Memory dojo/store/Observable dojo/text!rc/bacnet/_schedule/templates/WeeklyScheduleEditDialog.html ../defaultValues ../enums ../io/AnyPrimitive ../io/Number ../io/Time ../io/TimeValue dijit/Dialog dijit/form/Button dijit/form/CheckBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K){return f("rc/bacnet/_schedule/WeeklyScheduleEditDialog",[c,h,g,x],{templateString:D,rcStrings:y,_grid:null,_scheduleDataType:null,timeBeingEdited:null,valueBeingEdited:null,defaultValue:null,_units:null,_reliqValue:-1,_onValue:1,_hasChanged:!1,_hasInvalidRow:!1,constructor:function(){this._dayStrings=w.getNames("days","wide");this._createLocaleDays()},buildRendering:function(){this.inherited(arguments);this._timeValueStore=
new B(new E);this._populateValueStore();this._createGrid()},postCreate:function(){this.inherited(arguments);this._supportingWidgets.push(this.dialog);this.deleteMenu=new a;this.deleteMenu.addChild(new b({label:"Delete",onClick:u.hitch(this,this._onClickDelete)}));this._supportingWidgets.push(this.deleteMenu);this._dowCheckBoxs=k.findWidgets(this.centreContentpane);this.own(A(this.dialog,"hide",u.hitch(this,this._resetDialog)));this.own(A(this.deleteMenu,"blur",u.hitch(this,this._onDeleteMenuBlur)));
this._resetDialog()},_createLocaleDays:function(){this._localeDays={sunday:this._dayStrings[0],monday:this._dayStrings[1],tuesday:this._dayStrings[2],wednesday:this._dayStrings[3],thursday:this._dayStrings[4],friday:this._dayStrings[5],saturday:this._dayStrings[6]}},_getGridStructure:function(){return[p({editor:n,editOn:"click",id:"timeCol",field:"time",label:y.time,sortable:!1,canEdit:u.hitch(this,this._checkCanEdit),editorArgs:{pattern:"(24:00:00)|(2[0-3]|(0|1)[0-9]):[0-5]?[0-9]:[0-5]?[0-9]",invalidMessage:"Must be in format hh:mm:ss"}}),
p({editor:d,editOn:"click",id:"valueCol",field:"value",label:this._scheduleDataType===H.primitiveTypes.REAL?y.value+" ("+this._units+")":y.value,sortable:!1,canEdit:u.hitch(this,this._checkCanEdit),editorArgs:{store:this._timeValueStore,autoComplete:!1,queryExpr:"*${0}*",searchAttr:"name"}}),{id:"faultCol",field:"fault",label:"",sortable:!1,formatter:u.hitch(this,this._displayFaultValue)}]},_connectGrid:function(){this.own(A(this._grid,".field-time:dgrid-datachange",u.hitch(this,this._onTimeChange)),
A(this._grid,".field-value:dgrid-datachange",u.hitch(this,this._onValueChange)),A(this._grid,".dgrid-row:contextmenu",u.hitch(this,this._openDeleteMenu)),A(this._grid,["dgrid-select","dgrid-deselect"],u.hitch(this,this._onSelectionChange)))},_createGrid:function(){null===this._grid&&(this._grid=new (f([r,m,l]))({sort:[{attribute:"timeInSeconds",descending:!1}],store:new B(new E({idProperty:"timeInSeconds"})),autoSave:!0,columns:this._getGridStructure()},this.gridContainer),this._grid.startup(),this._connectGrid())},
_checkCanEdit:function(a){return!1===a.fault},_displayFaultValue:function(a){return 1==a?this.rcStrings.inFault:""},_displayValue:function(a){var b=this._timeValueStore.get(a.toValueString(y.scheduleDefault))?this._timeValueStore.get(a.toValueString(y.scheduleDefault)).name:a.toValueString(y.scheduleDefault);a.v.v.t===H.primitiveTypes.ENUMERATED&&this._scheduleDataType!=a.v.v.t&&(b=[v.binaryOff,v.digitalOn][a.v.v.v]);return b},populateGrid:function(a,b){this._resetGrid().then(u.hitch(this,function(){var a=
[];q.forEach(b.d.l,u.hitch(this,function(b){a.push(this._grid.store.add({time:b.toTimeString(),value:this._displayValue(b),fault:b.v.v.t===this._scheduleDataType||b.isDefault()?!1:!0,tvDataType:b.v.v.t,timeInSeconds:this._getTimeInSeconds(b.toTimeString()),valueData:b}))}));return C(a)})).then(u.hitch(this,function(){this._grid.select(this._grid.store.data[this._grid.store.data.length-1]);this._grid.resize()}));this["daySelect"+a].set("checked",!0);7===Number(a)&&(a=0);this.dowDiv.innerHTML=this._dayStrings[a]},
_onSelectionChange:function(){0===Object.keys(this._grid.selection).length?this.removeRowButton.set("disabled",!0):this.removeRowButton.set("disabled",!1)},_onTimeChange:function(a){var b=a.value;a=u.clone(this._grid.store.get(Number(a.rowId)));this._grid.store.remove(a.timeInSeconds);a.timeInSeconds=this._getTimeInSeconds(b);a.time=b;this._grid.store.put(a);this._validateValue();this._hasChanged=!0},_onValueChange:function(a){var b=!1,c=u.clone(this._grid.store.get(Number(a.rowId))),f=new RegExp("\\b"+
this._units.join("\\b|\\b")+"\\b");if(a.value===y.scheduleDefault)b=!0,c.tvDataType=0,c.value=a.value;else switch(this._scheduleDataType){case H.primitiveTypes.ENUMERATED:var k=/\b[0-9]+\b/;f.test(a.value)?(c.value=this._units.indexOf(a.value),b=!0,c.tvDataType=this._scheduleDataType):k.test(a.value)&&(c.value=Number(a.value),b=!0,c.tvDataType=this._scheduleDataType);break;case H.primitiveTypes.BINARY:case H.primitiveTypes.UNSIGNED_INTEGER:k=this._units.indexOf(a.value);this._scheduleDataType===H.primitiveTypes.UNSIGNED_INTEGER&&
++k;f.test(a.value)&&(c.value=k,b=!0,c.tvDataType=this._scheduleDataType);break;case H.primitiveTypes.REAL:/[-+]?[0-9]+(\.[0-9]+)?/.test(a.value)&&(c.value=parseFloat(a.value).toFixed(2),b=!0,c.tvDataType=this._scheduleDataType)}c.fault&&(c.tvDataType=this._scheduleDataType,c.fault="");b||(c.value=this._valueBeingEdited);this._grid.store.put(c);c.time&&this._validateValue();this._hasChanged=!0},_populateValueStore:function(){switch(this._scheduleDataType){case H.primitiveTypes.BINARY:case H.primitiveTypes.ENUMERATED:case H.primitiveTypes.UNSIGNED_INTEGER:var a=
0;this._scheduleDataType===H.primitiveTypes.UNSIGNED_INTEGER&&(a=1);q.forEach(this._units,u.hitch(this,function(b,c){this._timeValueStore.put({id:c+a,name:b})}));break;case H.primitiveTypes.REAL:this._timeValueStore.put({id:0,name:"0.00"})}this._timeValueStore.put({id:this._reliqValue,name:y.scheduleDefault})},_resetGrid:function(){for(var a=this._grid.store.data,b=new z,c=[],f=a.length-1;0<=f;--f)c.push(this._grid.store.remove(a[f].timeInSeconds));C(c).then(u.hitch(this,function(){this._grid.revert();
b.resolve()}));return b.promise},_validateValue:function(){var a=this._grid.store.query(null,{sort:[{attribute:"timeInSeconds",descending:!1}]});q.forEach(a,u.hitch(this,function(b,c){var f=b.value;f===y.scheduleDefault&&0===c&&(this._itemToDelete=b,this._deleteItem());a[c+1]&&f===a[c+1].value&&a[c+1].time&&(this._itemToDelete=a[c+1],this._deleteItem())}))},_deleteItem:function(){this._grid.store.remove(this._itemToDelete.timeInSeconds)},_getTimeInSeconds:function(a){a=a.split(":");return 3600*parseInt(a[0],
10)+60*parseInt(a[1],10)+parseInt(a[2],10)},_cleanUpFaultColumn:function(a){a.fault&&(a.tvDataType=this._scheduleDataType,a.value=this._defaultString(),a.fault="",this._grid.refresh(),this._validateValue())},_openDeleteMenu:function(a){a.preventDefault();t.open({popup:this.deleteMenu,x:a.pageX,y:a.pageY});a=this._grid.row(a);this._grid.select(a)},_onClickDelete:function(a){a=Object.keys(this._grid.selection);q.forEach(a,u.hitch(this,function(a){this._grid.store.remove(Number(a))}));this._validateValue();
this._hasChanged=!0;t.close(this.deleteMenu)},_onDeleteMenuBlur:function(){this.deleteMenu.isShowingNow&&t.close(this.deleteMenu)},_onClickAddRow:function(){var a=new Date,b=-1===this.defaultValue.v&&(this.defaultValue.t===this._scheduleDataType||this.defaultValue.t===H.primitiveTypes.NULL),c=b;this._grid.store.data.length&&(c=this._grid.store.data[this._grid.store.data.length-1].valueData.v.v.t!==H.primitiveTypes.NULL);var f=b?new G(0,H.primitiveTypes.NULL):this.defaultValue;c&&!b?f=new G(0,H.primitiveTypes.NULL):
!c&&b&&(f=new G(0,this._dataType));a=new K(new I(a.getHours(),a.getMinutes(),a.getSeconds()),new J(f));b=a.toTimeString();this._grid.store.add({time:"24:00:00"!==b?b:"23:59:59",value:this._displayValue(a),fault:a.v.v.t===this._scheduleDataType||a.isDefault()?!1:!0,timeInSeconds:this._getTimeInSeconds(a.toTimeString()),tvDataType:a.v.v.t,valueData:a});this._valueBeingEdited=this._timeBeingEdited=""},_onClickOk:function(a){this._hasInvalidRow||(this._getValues(),this._onClickCancel(a))},_onClickCancel:function(a){this.dialog.hide()},
_onClickDOW:function(a){this._hasChanged=!0},_getValueStrAsNum:function(a,b){var c=0;switch(b){case H.primitiveTypes.ENUMERATED:if(/\b[0-9]+\b/.test(a)){c=Number(a);break}case H.primitiveTypes.BINARY:c=this._timeValueStore.query({name:a});c=c[0]?c[0].id:0;break;case H.primitiveTypes.REAL:c=parseFloat(a);break;case H.primitiveTypes.UNSIGNED_INTEGER:c=parseInt(a,10)}return c},_getValues:function(){if(this._hasChanged){var a=[],b=[];q.forEach(this._dowCheckBoxs,function(a,c){a.get("checked")&&b.push(c+
1)},this);if(b.length){for(var c=this._grid.store.query(function(a){if(a.time)return a},{sort:[{attribute:"timeInSeconds",descending:!1}]}),f=0;f<c.length;f++){var k=c[f],d=k.time.split(":"),g=0,u=0;k.value!==y.scheduleDefault&&(g=this._getValueStrAsNum(k.value,k.tvDataType),u=k.tvDataType);a.push(new K(new I(parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10),0),new J(new G(g,u))))}this.onCloseDialog({tv:a,dow:b})}}},_resetDialog:function(){this.deleteMenu.isShowingNow&&t.close(this.deleteMenu);
this._hasInvalidRow=this._hasChanged=!1;this._resetGrid();q.forEach(this._dowCheckBoxs,function(a){a.set("checked",!1)})},onCloseDialog:function(a){this.emit("closeDialog",a);return a},_defaultString:function(){return this._timeValueStore.get(0).name}})})},"rc/bacnet/_schedule/WeeklyScheduleContainer":function(){define("dijit/_Container dijit/_TemplatedMixin dijit/_Widget dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/Evented dojo/mouse dojo/on dojo/query dojo/text!./templates/WeeklyScheduleContainer.html dojo/touch ./WeeklyScheduleEvent ../enums ../io/DailySchedule".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w){return h("rc/bacnet/_schedule/WeeklyScheduleContainer",[m,p,r,n],{templateString:k,src:"",_pageY:-1,args:null,_pconnects:null,events:null,dow:null,defaultValue:null,_offsetFromTop:0,pixelsPerUnit:null,minutesPerUnit:null,canEdit:!0,constructor:function(a){this.args=a;this.events=[];this.ds=new w},postCreate:function(){this.dow=this.args.dow?this.args.dow.toString():null;this._pconnects=[];this.canEdit?this.own(b(this.containerNode,q.press,c.hitch(this,this._onMouseDown))):
this._onMouseDown=this._onMouseMove=this._onMouseUp=function(){}},onSetSelectedEvent:function(a){this.emit("setSelectedEvent",a)},compareTimes:function(a,b){var c=3600*a.t.h+60*a.t.m+a.t.s+a.t.hh/100,f=3600*b.t.h+60*b.t.m+b.t.s+b.t.hh/100;return c<f?-1:c>f?1:0},mergeSort:function(a){a=a.sort(this.compareTimes);var b=c.clone(a);a=[];var f=!0,k=!0,d;l.forEach(b,function(g,q){if(1!=f||g.v.v.t!=u.primitiveTypes.NULL)if(1==f)k=f=!1,d=c.clone(g),a.push(c.clone(g));else{var n=3600*d.t.h+60*d.t.m+d.t.s+d.t.hh/
100,t=3600*g.t.h+60*g.t.m+g.t.s+g.t.hh/100;if(n!==t||d.v.v.v!==g.v.v.v)!0===k?g.v.v.t!=u.primitiveTypes.NULL&&(k=!1,d=c.clone(g),a.push(c.clone(g))):n!==t&&(d.v.v.v===g.v.v.v&&d.v.v.t===g.v.v.t?d=c.clone(g):g.v.v.t===u.primitiveTypes.NULL?q===b.length-1?(k=!0,d=c.clone(g),a.push(c.clone(g))):(n=c.clone(b[q+1]),3600*n.t.h+60*n.t.m+n.t.s+n.t.hh/100!==t&&(k=!0,d=c.clone(g),a.push(c.clone(g)))):(k=!1,d=c.clone(g),a.push(c.clone(g))))}},this);return a},populate:function(a){a=this.mergeSort(a);l.forEach(a,
function(b,f){if(!b.isDefault()){var k;a.length>f+1?(k=c.clone(a[f+1]),k.v.v.t=0,k.v.v.v=0):k=null;(k?3600*k.t.h+60*k.t.m+k.t.s+k.t.hh/100:86400)<3600*b.t.h+60*b.t.m+b.t.s+b.t.hh/100||(k={s:c.clone(b),e:k},this.createEvent(null,k))}},this)},creatingEvent:function(a){this.emit("creatingEvent",a)},createEvent:function(a,k){this.creatingEvent(a);l.forEach(this._pconnects,c.hitch(this,function(a){a.remove()}));this._pconnects=[];var q=g.create("div"),u=0;a&&(u=a.offsetY);for(var n=t("\x3e *",this.containerNode),
h,m=0;m<n.length&&!(h=n[m],h=d.getMarginBox(h),u&&u<h.t);m++);g.place(q,this.containerNode,m);q=new f({cb:{y:u},tv:k,pixelsPerUnit:this.pixelsPerUnit,minutesPerUnit:this.minutesPerUnit,canEdit:this.canEdit},q);this.events.splice(m,0,q);this.own(b(q,"change",c.hitch(this,this.onEventsHaveChanged)));this.own(b(q,"openMenu",c.hitch(this,this.onOpenMenu)));this.own(b(q,"closeMenu",c.hitch(this,this.onCloseMenu)));this.own(b(q,"setSelectedEvent",c.hitch(this,this.onSetSelectedEvent)));this.onEventsHaveChanged()},
clearEvent:function(a){l.some(this.events,function(b,c){return b.id==a.id?(this.events.splice(c,1),a.destroy(),a=null,!0):!1},this)},clear:function(){l.forEach(this.events,function(a){a.destroy()});this.events=[]},_onMouseDown:function(f){this.onSetSelectedEvent(this);a.isLeft(f)&&(this.onCloseMenu(),this._pageY=f.pageY,this._pconnects.push(b(this.containerNode,q.move,c.hitch(this,this._onMouseMove))),this._pconnects.push(b(this.containerNode,"mouseup, touchend",c.hitch(this,this._onMouseUp))))},
_onMouseMove:function(a){this.onCloseMenu();a.pageY<=this._pageY||this.createEvent(a)},_onMouseUp:function(){this.onCloseMenu();l.forEach(this._pconnects,c.hitch(this,function(a){a.remove()}));this._pconnects=[]},onEventsHaveChanged:function(){this.emit("eventsHaveChanged")},onCloseMenu:function(a){this.emit("closeMenu",a)},onOpenMenu:function(a){this.emit("openMenu",a)},toBacnet:function(){this.ds.d.l=[];l.forEach(this.events,function(a,b){this.ds.d.l.push(a.tv.s);a.tv.e&&(b>=this.events.length-
1||b<this.events.length-1&&a.tv.e.toTimeString()!=this.events[b+1].tv.s.toTimeString())&&this.ds.d.l.push(a.tv.e)},this);return this.ds},destroy:function(){this.clear();this.inherited(arguments)}})})},"rc/bacnet/_schedule/WeeklyScheduleEvent":function(){define("dijit/_Contained dijit/_TemplatedMixin dijit/_Widget dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/dnd/common dojo/dnd/move dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/mouse dojo/on dojo/text!rc/bacnet/_schedule/templates/WeeklyScheduleEvent.html dojo/touch ../defaultValues ../enums ../io/AnyPrimitive ../io/Number ../io/Time ../io/TimeValue ../../_base/util".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E){return c("rc/bacnet/_schedule/WeeklyScheduleEvent",[m,p,r],{canEdit:!0,cb:null,cbp:null,containerEventsIndex:null,dataType:9,defaultValue:null,dragConnect:null,leaveConnect:null,inFault:!1,minutesPerDay:86400,minutesPerUnit:30,nextCoords:null,pixelsPerUnit:16,prevCoords:null,resizingBottom:null,resizingTop:null,src:"",templateString:u,tv:null,widgetsInTemplate:!1,_scroller:null,_scrollOffset:0,_MAX_MOUSE_MOVE_COUNT:5,_onMouseMoveCounter:0,
constructor:function(){this.resizingBottom=this.resizingTop=!1;this._pconnects=[]},postCreate:function(){this.inherited(arguments);if(this.parentContainer=this.getParent())this.defaultValue=this.parentContainer.defaultValue||this.defaultValue,this.dataType=this.parentContainer.dataType||this.dataType,this._scroller=this.parentContainer.parent.scroller||this._scroller;this._calenderNode=this.parentContainer.parent.domNode;var b=0,c=0,q=0;this._setScrollOffset();this._setSiblingCoords();this.own(f(this._resizeHandleTop,
w.press,g.hitch(this,this._mouseDownTop)));this.own(f(this._resizeHandleBottom,w.press,g.hitch(this,this._mouseDownBottom)));if(this.tv)b=(3600*this.tv.s.t.h+60*this.tv.s.t.m+this.tv.s.t.s)/60/this.minutesPerUnit,c=this.tv.e?(3600*this.tv.e.t.h+60*this.tv.e.t.m+this.tv.e.t.s)/60/this.minutesPerUnit-b:60/this.minutesPerUnit*24-b;else if(this.cb){b=Math.floor(this.cb.y/this.pixelsPerUnit);c=1;this.tv={s:null,e:null};var q=this.dataType===x.primitiveTypes.BINARY||this.dataType===x.primitiveTypes.ENUMERATED?
this.defaultValue.v?0:1:z[this.dataType].str,u=this.lookUpTime(b*this.pixelsPerUnit);this.tv.s=new C(u,new y(new v(q,this.dataType)));this.resizingBottom=!0;this._pconnects.push(f(d.doc,w.move,g.hitch(this,this._mouseMoveBottom)));this._pconnects.push(f(d.doc,"mouseup, touchend",g.hitch(this,this._mouseUpBottom)))}else this.cb={},this.tv={},this.tv.s=new C(new A(0,0,0,0),new y(new v(q,this.dataType))),this.tv.e=g.clone(this.tv.s);this.canEdit&&(this._event=new a.parentConstrainedMoveable(this.containerNode,
{area:"padding",within:"true"}));this.cb.h=c*this.pixelsPerUnit;this.cb.t=b*this.pixelsPerUnit;k.set(this.containerNode,{height:c+"em",top:b+"em"});this.cb=this._scrollsafeCoords(this.containerNode,!0);this.cbp=this.parentContainer&&this.parentContainer.containerNode?this._scrollsafeCoords(this.parentContainer.containerNode,!0):g.clone(this.cb);this.canEdit?(this._event._lastY=this.cb.y,this.own(f(this.containerNode,w.press,g.hitch(this,this._mouseDownDrag))),this._event.onMove=g.hitch(this,this._onMove),
this._event.mover.prototype.onFirstMove=this._onFirstMove,this._event.onMouseDown=this._onMouseDown):this._mouseDownBottom=this._mouseDownDrag=this._mouseDownTop=this._mouseMoveBottom=this._mouseMoveTop=this._mouseUpBottom=this._mouseUpDrag=this._mouseUpTop=function(){};this.tv.s.v.v.t!==this.dataType&&(this.inFault=!0);this.changeColor(this.containerNode,this.tv.s.v.v.t,this.tv.s.v.v.v);this.onChange()},changeColor:function(a,c,f){b.remove(a,"scheduleWeeklyEventOff scheduleWeeklyEventOn scheduleWeeklyEventRelinq scheduleWeeklyEventAnalog scheduleWeeklyEventMulti");
switch(c){case 4:b.add(a,"scheduleWeeklyEventAnalog");break;case 2:b.add(a,"scheduleWeeklyEventMulti");break;default:f?b.add(a,"scheduleWeeklyEventOn"):b.add(a,"scheduleWeeklyEventOff")}},lookUpTime:function(a){a=a/this.pixelsPerUnit*this.minutesPerUnit;var b,c;b=Math.floor(a/60);c=Math.floor(a%60);return new A(b,c,Math.floor(60*(a-60*b-c)),0)},onChange:function(a){this.emit("change",a)},onCloseMenu:function(a){this.emit("closeMenu",a)},onOpenMenu:function(a){this.emit("openMenu",a)},onSetSelectedEvent:function(a){this.emit("setSelectedEvent",
a)},_getSingleTouch:function(a,b){if(a.touches){if(1===a.touches.length)return b&&a.preventDefault(),a.touches[0];if(1===a.changedTouches.length&&!a.touches.length)return a.changedTouches[0]}return null},_isEndOfDay:function(a){return 24===a.h||23===a.h&&59===a.m&&59===a.s},_mergeIfNecessary:function(a,b){try{if(this.tv.s.v.v.v===a.tv.s.v.v.v&&this.tv.s.v.v.t===a.tv.s.v.v.t){var c,f;this.cb.y<b.y?(c=this.cb,f=b):(f=this.cb,c=b);this.cb.h=f.t+f.h-c.t;this.cb.y=c.y;this.cb.t=c.t;this.parentContainer.clearEvent(a)}}catch(J){}},
_mouseDownBottom:function(a){rc.activity.onActivity();if(!q.isRight(a)){var b=this._getSingleTouch(a),b=b?b.pageY:a.pageY;this.resizingBottom||(this.resizingBottom=!0,this._setScrollOffset(),this._setSiblingCoords(),this._pconnects.push(f(d.doc,w.move,g.hitch(this,this._mouseMoveBottom))),"touch"===a.pointerType?this._pconnects.push(f(this._calenderNode,"touchend",g.hitch(this,this._mouseUpBottom))):this._pconnects.push(f(this._calenderNode,w.release,g.hitch(this,this._mouseUpBottom))),null===this.leaveConnect&&
(this.leaveConnect=f(this._calenderNode,q.leave,g.hitch(this,this._mouseUpBottom))),this._dragCancelled=!1,this._event._lastY=b);E.stopEvent(a)}},_mouseDownDrag:function(a){rc.activity.onActivity();this.onCloseMenu();this.onSetSelectedEvent(this);q.isRight(a)||(this._setScrollOffset(),this._setSiblingCoords(),null===this.dragConnect&&("touch"===a.pointerType?this.dragConnect=f(d.doc,"touchend",g.hitch(this,this._mouseUpDrag)):this._pconnects.push(f(d.doc,w.release,g.hitch(this,this._mouseUpDrag)))),
null===this.leaveConnect&&(this.leaveConnect=f(this._calenderNode,q.leave,g.hitch(this,this._mouseUpDrag))),this._dragCancelled=!1)},_mouseDownTop:function(a){try{rc.activity.onActivity(),q.isRight(a)||(this.resizingTop||(this.resizingTop=!0,this._setScrollOffset(),this._setSiblingCoords(),this._pconnects.push(f(d.doc,w.move,g.hitch(this,this._mouseMoveTop))),"touch"===a.pointerType?this._pconnects.push(f(this._calenderNode,"touchend",g.hitch(this,this._mouseUpTop))):this._pconnects.push(f(this._calenderNode,
w.release,g.hitch(this,this._mouseUpTop))),null===this.leaveConnect&&(this.leaveConnect=f(this._calenderNode,q.leave,g.hitch(this,this._mouseUpTop))),this._dragCancelled=!1),E.stopEvent(a))}catch(D){throw D;}},_mouseMoveBottom:function(a){var b=this._getSingleTouch(a,!0),b=b?b.pageY:a.pageY;this.resizingBottom&&(b=Math.ceil(b+this._scrollOffset-this.cb.y),b+=this.pixelsPerUnit-(this.cb.t+b)%this.pixelsPerUnit,this.cb.h=this.cb.y+b>this.cbp.y+this.cbp.h?this.cbp.y+this.cbp.h-this.cb.y:this.containerNode.nextSibling&&
this.nextCoords&&this.cb.y+b>this.nextCoords.y?this.nextCoords.y-this.cb.y:b,this.containerNode.style.height=this.cb.h/this.pixelsPerUnit+"em");E.stopEvent(a)},_mouseMoveTop:function(a){var b=this._getSingleTouch(a,!0),b=b?b.pageY:a.pageY;try{if(this.resizingTop){if(b<this.cbp.y-this._scrollOffset||b>this.cb.y+this.cb.h-this._scrollOffset)return;var c=Math.floor(b+this._scrollOffset-this.cb.y),c=c-(this.cb.y-this.cbp.y+c)%this.pixelsPerUnit;this.containerNode.previousSibling&&this.prevCoords&&this.cb.y+
c<this.prevCoords.y+this.prevCoords.h&&(c=Math.floor(this.prevCoords.y+this.prevCoords.h-this.cb.y));this.cb.y+=c;this.cb.h-=c;this.cb.t=this.cb.y-this.cbp.y;this.containerNode.style.top=this.cb.t/this.pixelsPerUnit+"em";this.containerNode.style.height=this.cb.h/this.pixelsPerUnit+"em"}E.stopEvent(a)}catch(H){throw H;}},_mouseUpBottom:function(a){this.resizingBottom&&(h.forEach(this._pconnects,g.hitch(this,function(a){a.remove()})),this._pconnects=[],this.leaveConnect&&(this.leaveConnect.remove(),
this.leaveConnect=null),this._mouseMoveBottom(a),this.resizingBottom=!1,this.cb.h<this.pixelsPerUnit?this.parentContainer.clearEvent(this):this._mouseUpDrag(a));E.stopEvent(a)},_mouseUpDrag:function(a){if(!this.resizingBottom&&!this.resizingTop){this._dragCancelled=!0;try{if(this.dragConnect&&(this.dragConnect.remove(),this.dragConnect=null),this.leaveConnect&&(this.leaveConnect.remove(),this.leaveConnect=null),this.containerNode){h.forEach(this._pconnects,g.hitch(this,function(a){a.remove()}));this._pconnects=
[];if(this.containerNode.previousSibling&&this.cb.y<=this.prevCoords.y+this.prevCoords.h+.5){var b=l.byId(this.containerNode.previousSibling.id);this._mergeIfNecessary(b,this.prevCoords)}if(this.containerNode.nextSibling&&this.cb.y+this.cb.h+.5>=this.nextCoords.y){var c=l.byId(this.containerNode.nextSibling.id);this._mergeIfNecessary(c,this.nextCoords)}var f=this.lookUpTime(this.cb.t);this.tv.s.t=f;var d=this.lookUpTime(this.cb.t+this.cb.h);this._isEndOfDay(d)?this.tv.e=null:this.tv.e?this.tv.e.t=
d:this.tv.e=new C(d,new y(new v(0,0)));k.set(this.containerNode,{top:this.cb.t/this.pixelsPerUnit+"em",height:this.cb.h/this.pixelsPerUnit+"em"});if(this.initCoords.t!==this.cb.t||this.initCoords.h!==this.cb.h)this.onChange(a);else a.touches&&(E.stopEvent(a),this.onOpenMenu(this._getSingleTouch(a)))}}catch(G){throw G;}}},_mouseUpTop:function(a){try{this.resizingTop&&(h.forEach(this._pconnects,g.hitch(this,function(a){a.remove()})),this._pconnects=[],this.leaveConnect&&(this.leaveConnect.remove(),
this.leaveConnect=null),this._mouseMoveTop(a),this._mouseUpDrag(a),this.resizingTop=!1,this.cb.h<this.pixelsPerUnit?this.parentContainer.clearEvent(this):this._mouseUpDrag(a)),E.stopEvent(a)}catch(D){throw D;}},_onFirstMove:function(a){if(!a.touches||1===a.touches.length){var b,c;a=this.host;this.node.style.position="absolute";c=t.getMarginBox(this.node);b=d.body();var f=k.getComputedStyle(b),g=t.getMarginBox(b,f),f=t.getContentBox(b,f);b=c.l-(f.l-g.l);c=c.t-(f.t-g.t);this.marginBox.l=b-this.marginBox.l;
this.marginBox.t=c-this.marginBox.t;if(a&&a.onFirstMove)a.onFirstMove(this);this.events.shift().remove()}},_onMouseDown:function(a){rc.activity.onActivity();if(q.isRight(a))E.stopEvent(a);else if(!this.skip||!n.isFormElement(a)){if(this.delay){this.events.push(f(this.handle,w.move,g.hitch(this,this.onMouseMove)),f(this.handle,"mouseup, touchend",g.hitch(this,this.onMouseUp)));var b=a.touches?a.touches[0]:a;this._lastX=b.pageX;this._lastY=b.pageY}else this.onDragDetected(a);E.stopEvent(a)}},_onMove:function(a,
b,c){this.resizingBottom||this.resizingTop||!0===this._dragCancelled||(++this._onMouseMoveCounter>this._MAX_MOUSE_MOVE_COUNT&&(rc.activity.onActivity(),this._onMouseMoveCounter=0),b.t-=b.t%this.pixelsPerUnit,this.containerNode.previousSibling&&b.t<this.prevCoords.t+this.prevCoords.h&&(b.t=this.prevCoords.t+this.prevCoords.h),this.containerNode.nextSibling&&this.nextCoords&&b.t+this.cb.h>this.nextCoords.t&&(b.t=this.nextCoords.t-this.cb.h),b.t+this.cb.h>=this.cbp.h&&(b.t=this.cbp.h-this.cb.h),0>b.t&&
(b.t=0),this._event._lastY=b.t,this.cb.y=this.cbp.y+b.t,this.cb.t=b.t,this.containerNode.style.top=b.t/this.pixelsPerUnit+"em")},_scrollsafeCoords:function(a,b){var c=t.position(a,b);c.yRaw=c.y;c.y+=this._scrollOffset;c.t=t.getMarginBox(a).t;return c},_setSiblingCoords:function(){this.prevCoords=this.containerNode.previousSibling?this._scrollsafeCoords(this.containerNode.previousSibling,!0):null;this.nextCoords=this.containerNode.nextSibling?this._scrollsafeCoords(this.containerNode.nextSibling,!0):
null;this.initCoords=g.clone(this.cb)},_setScrollOffset:function(){this._scrollOffset=0;this._scroller&&0<this._scroller.scrollTop&&(this._scrollOffset+=this._scroller.scrollTop);for(var a=this.parentContainer.parent.domNode;(a=a.parentNode)&&a!=d.body();)0<a.scrollTop&&(this._scrollOffset+=a.scrollTop);return this._scrollOffset},destroy:function(){h.forEach(this.events,function(a){a.remove()},this);this.inherited(arguments);this.onChange()}})})},"rc/bacnet/Trend":function(){define("dojo/_base/declare ./_trend/io/Loader ./io/Service ./Object ../date ../reliable/Trend".split(" "),
function(r,p,m,l,h,c){return r("rc/bacnet/Trend",c,{pointInstance:1,mainController:1E3,subController:1,subnet:0,mnemonic:"",objectName:null,_totalRecordCount:0,_bufferSize:0,_logType:20,_recordCount:0,_range:null,_recordClass:m.LogRecord,hasNewLogs:!1,timeLabelFunc:h.getTimeUnitValue,RECURSION_LIMIT:2960,loadClass:p,postCreate:function(){this._allGridItems=[];this._range=[];this._logRangeInfo={hasPrevious:!1,start:0,end:0};this.inherited(arguments)},_setPointName:function(){this.pointName=this.objectName=
l(this.mainController,this._logType,this.pointInstance)}})})},"rc/bacnet/_trend/io/Loader":function(){define(["dojo/_base/declare","./Archive","./Bacnet","../DataManager","rc/reliable/_trend/io/Loader"],function(r,p,m,l,h){return r("rc/bacnet/_trend/io/Loader",h,{dataManagerClass:l,liveDataClass:m,archiveDataClass:p,resetData:function(c){this.inherited(arguments);this.l.d.firstSequence=-1}})})},"rc/bacnet/_trend/io/Bacnet":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented ./Device ./Header ../DataManager".split(" "),
function(r,p,m,l,h,c,g){return r("rc/bacnet/_trend/io/Bacnet",[l],{h:null,d:null,datam:null,dateFirst:0,dateLast:0,constructor:function(){this.h=new c({b:this});this.d=new h({b:this});this.datam=new g;this.datam.dataSource=this.datam.DS_LIVE},load:function(c,g,a){var b=new m,d=p.hitch(this,function(a){this.dateLast=this.datam.getLastTime();if(c.bFirstLiveRecord)this.dateFirst=this.datam.getFirstTime();else{var f=this.h.interval;f||(f=(this.dateLast-this.datam.getFirstTime())/this.datam.getTimeLength());
this.dateFirst=this.dateLast-c._recordCount*f;this.dateFirst-=this.dateFirst%1E3}this.onLoad(a);b.resolve(a)}),k=p.hitch(this,function(a){b.reject(a);this.onError(a);return a});g=p.hitch(this,function(){return this.d.load(c,this.datam,a).then(d,k)});this.h.load(c,this.datam).then(g,k);return b.promise},onLoad:function(){this.emit("load")},onError:function(){this.emit("error")},destroy:function(){this.h=this.datam=this.d=null}})})},"rc/bacnet/_trend/io/Device":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/string ../../enums ../../io/Array ../../io/Date ../../io/DateTime ../../io/List ../../io/LogMultipleRecord ../../io/LogRecord ../../io/Number ../../io/Object ../../io/ReadRange ../../io/service/ReadRange ../../io/Time ../../unit ../../../_base/Error ../../../xhr ../../../date".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A){return p("rc/bacnet/_trend/io/Device",null,{b:null,_totalRecordCount:0,_bufferSize:0,_recordCount:0,TRENDSTYLE:{TRENDSTYLE_UNDEFINED:0,TRENDSTYLE_ORIGINAL:1,TRENDSTYLE_NEW:2},_trendStyle:0,MAX_SEQUENCE:Math.pow(2,32)-1,_recordClass:k,_range:null,_traces:null,_last:-1,_more:-1,_records:null,_resultFlag:null,_firstSequence:-1,firstSequence:-1,seqFetchRetries:0,_MAXRETRIES:2,trend:null,datam:null,constructor:function(a){m.mixin(this,a)},load:function(a,
b,c){this.trend=a;this.datam=b;a._logType==g.objectTypes.OBJID_TREND_LOG_MULTIPLE&&(this._recordClass=t);var f=this._fetch(c),k=m.hitch(this,function(a){f.reject(a);this.onError(a)});f.then(m.hitch(this,function(c){try{switch(a._logType){case g.objectTypes.OBJID_TREND_LOG:this._decodeSTL(a,b,c);break;case g.objectTypes.OBJID_TREND_LOG_MULTIPLE:this._decodeMTL(a,b,c);break;default:k("Error - No Log Type Set")}this.onLoad(this)}catch(J){k("Error loading device data",J)}}),m.hitch(this,k));return f},
_buildTempTraces:function(){for(var a={name:"",mnemonic:"",data:[],allData:[],min:null,max:null,hMin:null,hMax:null,isChartable:!0},b=[],c=0;c<this.datam.objects.length;c++){var f=m.clone(a);f.name=this.datam.objects[c].name;f.mnemonic=this.datam.objects[c].mnemonic;b[c]=f}return b},addRecordMTL:function(a,b){for(var c=0;c<b.length;c++)"ok"!==a.status?this.addRecord(a,a.status,a.status,b[c]):this.addRecord(a,a.status,a[b[c].mnemonic],b[c]);return a},addRecord:function(a,b,c,f){a.status=b;a[f.mnemonic]=
c;this.addTraceData(a,f);return a},_decodeSTL:function(a,b,c){var f=null;if(this.hasNewLogs){var f=c,k=new Date;c=6E4*k.getTimezoneOffset();var d;a.updateButtonClicked||(this.hasLogs=!1);a=[];var g=this._buildTempTraces();this.hasLogs=!0;for(var q=0;q<f.length;q++)switch(k=new Date(f[q].dt.d.y+1900,f[q].dt.d.m-1,f[q].dt.d.d,f[q].dt.t.h,f[q].dt.t.m,f[q].dt.t.s),k={dateTimeCol:k.getTime()-c,status:"ok",index:1},k[b.objects[0].mnemonic]=null,d="",d=f[q].ld.v,f[q].c){case 0:switch(f[q].ld.ary[1]){case 64:case 192:d=
h.logDeleted;break;case 32:d=h.logInterrupted;break;case 128:d=h.logDisabled;break;case 0:d=h.logEnabled;break;default:d=h.logStatusErr}a.push(this.addRecord(k,d,d,g[0]));break;case 1:case 2:case 3:case 4:case 5:a.push(this.addRecord(k,"ok",this.trend._formatValue(d,6,this.datam.objects[0].unit),g[0]));break;case 6:d=this._decodeBitString(f[q].ld,this.trend._objects[0].p.v);a.push(this.addRecord(k,"ok",d,g[0]));break;case 7:a.push(this.addRecord(k,"ok","(Null)",g[0]));break;case 8:a.push(this.addRecord(k,
"ok",h.bacnetError,g[0]));break;case 9:a.push(this.addRecord(k,h.timeChanged,h.timeChanged,g[0]))}this._addRecords(a,g)}return f},_decodeBitString:function(a,b){for(var c=[],f=[h.inAlarm,h.fault,h.overridden,h.outOfService],k="{",d="{",q=8-a.ary[0],u=0;u<q;u++)c.push(a.getBit(u));r.forEach(c,function(a,b){a?(k+=f[b],d+="T,"):(k+=",",d+="F,")},this);d=d.slice(0,-1);k+="}";d+="}";return b==g.propertyTypes.PROPID_STATUS_FLAGS?d.concat("...",k):d},_decodeMTL:function(a,b,c){try{var f=null;if(this.hasNewLogs){var f=
c,k,d=new Date,g;a.updateButtonClicked||(this.hasLogs=!1);a=[];var q=this._buildTempTraces();this.hasLogs=!0;for(c=0;c<f.length;c++)switch(d=new Date(f[c].dt.d.y+1900,f[c].dt.d.m-1,f[c].dt.d.d,f[c].dt.t.h,f[c].dt.t.m,f[c].dt.t.s),g={dateTimeCol:d.getTime()-A.getTimezoneOffsetMsec(d),status:"ok"},f[c].ld.c){case 0:switch(f[c].ld.da[0].d.ary[1]){case 64:case 192:k=h.logDeleted;break;case 32:k=h.logInterrupted;break;case 128:k=h.logDisabled;break;case 0:k=h.logEnabled;break;default:k=h.logStatusErr}g.status=
k;a.push(this.addRecordMTL(g,q));break;case 1:r.forEach(f[c].ld.da,function(a,c){try{var f=b.objects[c].mnemonic,k=this.trend._objects[c];g[f]=null;switch(a.c){case 0:case 1:case 2:case 3:case 4:g[f]=this.trend._formatValue(a.d.v,6,b.objects[c].unit);break;case 5:b.objects[c].unit=x.getAbbreviation(95);g[f]=this._decodeBitString(a.d,k.p.v);break;case 6:g[f]="(Null)";break;case 7:g[f]=h.bacnetError;break;default:g[f]=h.bacnetErrorUnsupportedData}}catch(O){console.error("Error Processing Values: ",
O)}},this);try{null!=a&&a.push(this.addRecordMTL(g,q))}catch(I){console.error("Error Pushing addRecordMTL Values: ",I)}break;case 2:g.status=h.timeChanged;a.push(this.addRecordMTL(g,q));break;default:g.status=h.bacnetError,a.push(this.addRecordMTL(g,q))}try{this._addRecords(a,q)}catch(I){console.error("Error Adding Records: ",I)}}return f}catch(I){console.error("Error _decodeMTL failed: ",I,"this",this)}},addTraceData:function(a,b){null==b.hMax&&(b.hMax=b.hMin=a.dateTimeCol);b.hMin=Math.min(b.hMin,
a.dateTimeCol);b.hMax=Math.max(b.hMax,a.dateTimeCol);if("ok"!==a.status||isNaN(parseFloat(a[b.mnemonic])))"{"===a[b.mnemonic][0]&&(b.isChartable=!1),b.data.push(null),b.allData.push(null);else{var c=parseFloat(a[b.mnemonic]);null==b.max&&(b.max=b.min=c);b.min=Math.min(b.min,c);b.max=Math.max(b.max,c);c={x:a.dateTimeCol,y:c};b.data.push(c);b.allData.push(c)}},_addRecords:function(a,b){var c,f;if((this._gridItems=m.clone(a))&&0<this._gridItems.length)if(this._gridItems[0].dateTimeCol<this._gridItems[this._gridItems.length-
1].dateTimeCol)for(c=0;c<a.length;c++)for(f=0;f<b.length;f++)this.datam.insertTimeValues(f,c,a[c].dateTimeCol,a[c][b[f].mnemonic]);else for(c=a.length-1;0<=c;c--)for(f=0;f<b.length;f++)this.datam.insertTimeValues(f,c,a[c].dateTimeCol,a[c][b[f].mnemonic])},_fetch:function(a){var b=[],f,k;0!==this.trend._recordCount?(f=Math.min(this.trend._recordCount,this.trend.sampleSize),k=this.trend._recordCount):k=f=this.trend.sampleSize;this._records=[];var d=new l;a=a?this._fetchByTime(a,f):this._fetchBySequence(f,
k);f=m.hitch(this,function(){this.hasNewLogs=!0;b=this._records;d.resolve(b)});k=m.hitch(this,function(a){console.error("_fetch handleError e: ",a);d.reject(this.trend.safeError(a,{name:c.substitute(h.problemInX,[h.stl]),message:this.trend._replace(h.couldNotLoad)+" "+h.dataProblem,suggestion:h.dataProblemFix}))});a.then(f,k);return d.promise},_fetchBySequence:function(a,b){var c=new l,f;-1===this.firstSequence?(f=this.trend._recordCount,this.trend.bFirstLiveRecord=b<this.trend._recordCount?!1:!0,
f=this.trend._totalRecordCount):(f=this.trend._recordCount-this.datam.getTimeLength(),this.trend.bFirstLiveRecord=a+this.datam.getTimeLength()<this.trend._recordCount?!1:!0,f=this.firstSequence-Math.min(f,a),f=Math.max(f,this.trend._totalRecordCount-this.trend._recordCount+1));this.bySequence(f,a,b,-1).then(m.hitch(this,function(a){c.resolve(a)}),m.hitch(this,function(a){c.reject(a)}));return c.promise},_fetchByTime:function(a,b){var c=new l,f=Math.abs(b),k,d;this.byTime(a,b).then(m.hitch(this,function(g){this._resultFlag=
g.o[0].pl[0].rr.r.f;this._records=g.o[0].pl[0].rr.r.d.l;this._firstSequence=g.o[0].pl[0].rr.r.fs.v;if(this.trend.io.isArchiveSupported||this._resultFlag.getBit(0))this.trend.bFirstLiveRecord=!0;if(-1!==this.firstSequence)if(this._firstSequence+this._records.length>=this.firstSequence){var q=this.firstSequence-this._firstSequence;this._records.splice(q,this._records.length-q);b=this._records.length}else this._records.length>=b&&(b+=this.firstSequence-(this._firstSequence+this._records.length));this._resultFlag.getBit(1)?
c.resolve({more:0,records:this._records,f:this._resultFlag}):(-1===this._firstSequence&&console.error("FSN \x3d\x3d -1","this._records",this._records,"this._firstSequence",this._firstSequence,"results",g,"time",a,"count",b),0<b?(d=this._firstSequence+this._records.length,b-=this._records.length):(d=this._firstSequence+1,b+=this._records.length),(this._more=Math.abs(b)<f?1:0)&&0!==b&&0<this._records.length?(0>b&&(b*=-1),k=this.bySequence(d,b,this.trend._recordCount,1),k.then(m.hitch(this,function(a){c.resolve(a)}))):
c.resolve({more:0,records:this._records,f:this._resultFlag}))}),m.hitch(this,function(a){c.reject(a)}));return c.promise},bySequence:function(a,b,c,f){var k=new l;this._more=1;this.seqFetchRetries=0;this.bySequenceHelper(a,f,Math.abs(b),0,!0,k,c);return k.promise},byTime:function(a,b){var c=new l;this._xhrReadRangeByTime(0<=b?1:-1,a,Math.abs(b)).then(m.hitch(this,function(a){c.resolve(a)}),m.hitch(this,function(a){c.reject(a)}));return c.promise},bySequenceHelper:function(a,b,c,f,k,d,g){g===f?this.seqFetchRetries++:
this.seqFetchRetries=0;k&&(this._trendStyle=this.TRENDSTYLE.TRENDSTYLE_UNDEFINED);0>=g||this.seqFetchRetries>this._MAXRETRIES?(this.seqFetchRetries=this._more=0,this.firstSequence=this._records.length?this._firstSequence:-1,d.resolve({more:0,records:this._records,f:this._resultFlag})):this._xhrReadRangeBySequence(b,a,c).then(m.hitch(this,function(f){var q=f.o[0].pl[0].rr.r.d.l;this._firstSequence=f.o[0].pl[0].rr.r.fs.v;this._resultFlag=f.o[0].pl[0].rr.r.f;f=g;var u=!0;k&&(-1!==this._firstSequence?
(this.firstSequence=this._firstSequence,this._trendStyle===this.TRENDSTYLE.TRENDSTYLE_UNDEFINED&&(this._trendStyle=this.firstSequence+q.length-1===this.trend._totalRecordCount?this.TRENDSTYLE.TRENDSTYLE_NEW:this.TRENDSTYLE.TRENDSTYLE_ORIGINAL),k=!1):(a++,u=!1,this._more=!0));u&&(this._more=this._resultFlag.getBit(2),this._last=this._resultFlag.getBit(1),b=1,this._trendStyle===this.TRENDSTYLE.TRENDSTYLE_NEW&&(b=-1),this._records=0<b?this._records.concat(q):q.concat(this._records),1===this._last&&0<
b?this._more=!1:a=this._trendStyle===this.TRENDSTYLE.TRENDSTYLE_NEW?this._firstSequence-1:this._firstSequence+q.length,g-=q.length,c-=q.length,this._records.length>=this.trend._recordCount&&(this._records.splice(this.trend._recordCount-1,this._records.length-this.trend._recordCount),this._more=!1));this._more&&0<c?(1>a?a=this.MAX_SEQUENCE+a:a>this.MAX_SEQUENCE&&(a-=this.MAX_SEQUENCE),this.bySequenceHelper(a,b,c,f,k,d,g)):d.resolve({more:0,records:this._records,f:this._resultFlag})}),m.hitch(this,
function(a){d.reject(a)}))},_checkDuplicateRecords:function(a,b){var c,f=1+b,k=!0,d,g;c=Math.min(Math.min(a.length,this._records.length-f),10);for(var q=0;q<c;q++,f++)if(d=this._records[f],g=a[q],d=new Date(d.dt.d.y+1900,d.dt.d.m-1,d.dt.d.d,d.dt.t.h,d.dt.t.m,d.dt.t.s),g=new Date(g.dt.d.y+1900,g.dt.d.m-1,g.dt.d.d,g.dt.t.h,g.dt.t.m,g.dt.t.s),d.getTime()!==g.getTime()){k=!1;break}g=d=null;return k},_xhrReadRangeByTime:function(b,c,f){var k=new l,d=new Date(c),g=d.getFullYear(),q=d.getMonth()+1,u=d.getDate(),
t=d.getDay();c=d.getHours();var h=d.getMinutes(),d=d.getSeconds(),g=new n(g,q,u,t);c=new z(c,h,d);c=new a(g,c);this._fetchLogs(b,c,f,7).then(m.hitch(this,function(a){k.resolve(a)}),m.hitch(this,function(a){k.reject(a)}));return k.promise},_xhrReadRangeBySequence:function(a,b,c){return this._fetchLogs(a,b,c,6)},_fetchLogs:function(a,k,n,t){var v=new l;6===t&&(k=new q(k,g.primitiveTypes.UNSIGNED_INTEGER));a=[{o:new f(this.trend._logType,this.trend.pointInstance),pl:[{p:new q(g.propertyTypes.PROPID_LOG_BUFFER,
g.primitiveTypes.ENUMERATED),i:-1,rr:new u({i:k,f:new d([],g.primitiveTypes.BIT_STRING),c:new q(n*a,g.primitiveTypes.SIGNED_INTEGER),d:new b(new this._recordClass),fs:new q(0,g.primitiveTypes.UNSIGNED_INTEGER)},t)}]}];a={type:"bacnet",gid:"BTL",s:new w({device:this.trend.mainController},a),timeout:25E3,load:m.hitch(this,function(a){try{if(1==a.e&&"rc/bacnet/io/Error"===a.o[0].pl[0].v.declaredClass&&37==a.o[0].pl[0].v.co.v)throw new y({name:c.substitute(h.problemInX,[h.stl]),message:this.trend._replace(h.couldNotLoad)+
" "+h.dataProblem,suggestion:h.dataProblemFix,e:a});this.service=a}catch(J){throw this.trend.safeError(J,{name:this.trend._replace(h.problemInX),message:this.trend._replace(h.couldNotLoad)+" "+h.dataProblem,suggestion:h.dataProblemFix});}}),error:function(a){}};rc.xhr.request(a).then(m.hitch(this,function(a){v.resolve(a);this.trend._onClearTimeout()}),m.hitch(this,function(a){v.reject(a)}));this.trend.onRestartTimer(25);return v.promise},_reload:function(){this._resumeUpdating=!0;this._stopFetch();
this._isRendered=!1;this._range=[];return this._fetch()},_stopFetch:function(){this.stopUpdating();this._endUpdate()},onLoad:function(){},onError:function(){},destroy:function(){this.datam=this.trend=this._range=this.b=null}})})},"rc/bacnet/io/LogMultipleRecord":function(){define(["dojo/_base/declare","./DateTime","./LogData","../error"],function(r,p,m,l){return r("rc/bacnet/io/LogMultipleRecord",null,{dt:null,ld:null,constructor:function(){this.dt=new p;this.ld=new m},encode:function(){var h=[];
h.push(14);h=h.concat(this.dt.encode());h.push(15);h.push(30);h=h.concat(this.ld.encode());h.push(31);return h},decode:function(h,c){if(14!=h[c++])return l.throwError(65,62),c;c=this.dt.decode(h,c);if(15!=h[c++]||30!=h[c++])return l.throwError(65,62),c;c=this.ld.decode(h,c);31!=h[c++]&&l.throwError(65,62);return c},toString:function(){return"{dateTime:"+this.dt.toString()+", logData:"+this.ld.toString()+"}"}})})},"rc/bacnet/io/LogData":function(){define("dojo/_base/declare ./Array ./Error ./Number ../enums ../error".split(" "),
function(r,p,m,l,h,c){return r("rc/bacnet/io/LogData",null,{c:0,da:null,encode:function(){var c,d=[];switch(this.c){case 0:case 2:c=this.da[this.da.length-1];d=c.d.encode(this.c<<4|8);break;case 1:for(var n=0;n<this.da.length;n++)d.push(30),c=this.da[n],d=d.concat(c.d.encode(c.c<<4|8)),d.push(31)}return d},decode:function(g,d){var n,a;this.c=(g[d]&240)>>>4;this.da=[];switch(this.c){case 0:a={d:new p([],h.primitiveTypes.BIT_STRING)};this.da.push(a);d=a.d.decode(g,d);break;case 1:for(d++;31!=g[d]&&
d<g.length;){a={};a.c=(g[d]&240)>>>4;n=0;switch(a.c){case 2:n+=5;case 1:n++;case 4:n++;case 3:n++;case 0:n++;case 6:a.d=new l(0,n);this.da.push(a);break;case 5:a.d=new p([],h.primitiveTypes.BIT_STRING);this.da.push(a);break;case 7:a.d=new m;this.da.push(a);d++;d=a.d.decode(g,d);d++;continue;case 8:break;default:return c.throwError(65,62),d}a.d&&(d=a.d.decode(g,d))}d++;break;case 2:a={d:new l(0,h.primitiveTypes.REAL)};this.da.push(a);d=a.d.decode(g,d);break;default:c.throwError(65,62)}return d},toString:function(){for(var c=
"{choice:"+this.c+", data:[",d=0;d<this.da.length;d++)c=this.da[d].c?c+("{choice:"+this.da[d].c+", data:"+this.da[d].d.toString()+"}, "):c+("{data:"+this.da[d].d.toString()+"}, ");this.da.length&&(c=c.slice(0,-2));return c+"]}"}})})},"rc/bacnet/_trend/io/Header":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/i18n!rc/nls/all dojo/promise/all dojo/string ../../enums ../../io/DeviceObjectPropertyReferenceList ../../io/Number ../../io/Object ../../io/service/ReadPropertyMultiple ../../Object ../../../_base/Error ../../../xhr".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return p("rc/bacnet/_trend/io/Header",[h],{b:null,isFloat:!1,logWrapped:!1,twoBanks:!1,interval:0,headerIndex:0,lastSampleTime:0,rawObjects:null,objects:null,units:null,isChanged:!0,constructor:function(a){this.b=a;this.objects=[];this.units=[];this.rawObjects=[];m.mixin(this,a)},load:function(a,b){this.trend=a;this.datam=b;var c=new l,f=m.hitch(this,function(a){c.reject(a);this.onError(a)});this._fetch(a).then(m.hitch(this,function(k){try{this._decode(a,
b,k).then(m.hitch(this,function(){c.resolve(this);this.onLoad(this)}),m.hitch(this,function(a){c.resolve(this);this.onLoad(this)}))}catch(A){f(A)}}),m.hitch(this,f));return c.promise},_fetch:function(g){this._recordCount=0;var q=[{o:new t(g._logType,g.pointInstance),pl:[{p:new b(n.propertyTypes.PROPID_RECORD_COUNT,n.primitiveTypes.ENUMERATED),i:-1,v:new b(0,n.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(n.propertyTypes.PROPID_LOG_DEVICE_OBJECT_PROPERTY,n.primitiveTypes.ENUMERATED),i:-1,v:new a},{p:new b(n.propertyTypes.PROPID_TOTAL_RECORD_COUNT,
n.primitiveTypes.ENUMERATED),i:-1,v:new b(0,n.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(n.propertyTypes.PROPID_BUFFER_SIZE,n.primitiveTypes.ENUMERATED),i:-1,v:new b(0,n.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(n.propertyTypes.PROPID_LOG_INTERVAL,n.primitiveTypes.ENUMERATED),i:-1,v:new b(0,n.primitiveTypes.UNSIGNED_INTEGER)}]}];return rc.xhr.request({type:"bacnet",gid:"BTL",s:new k({device:g.mainController},q),load:m.hitch(this,function(a){try{if(1==a.e&&"rc/bacnet/io/Error"===a.o[0].pl[0].v.declaredClass)switch(a.o[0].pl[0].v.cl.v){case 0:case 1:case 7:throw new f({name:d.substitute(c.xNotFound,
[c.stl]),message:this.trend._replace(c.couldNotLoad)+" "+c.objNotFound,suggestion:c.objNotFoundFix,e:a.o[0].pl[0].v.toStringMsg()});default:throw new f("Problem in data.");}this.service=a;g._recordCount=this.service.o[0].pl[0].v.v;g._objects=this.service.o[0].pl[1].v.l;g._totalRecordCount=this.service.o[0].pl[2].v.v;g._bufferSize=this.service.o[0].pl[3].v.v;this.interval=10*this.service.o[0].pl[4].v.v}catch(y){throw g.safeError(y,{name:this.trend._replace(c.problemInX),message:this.trend._replace(c.couldNotLoad)+
" "+c.dataProblem,suggestion:c.dataProblemFix});}}),error:m.hitch(this,function(a){return g.safeError(a,{name:d.substitute(c.xNotFound,[c.stl]),message:this.trend._replace(c.couldNotLoad)+" "+c.hostOffline,suggestion:c.hostOfflineFix})})})},_decode:function(a,b,c){a._objects=this.service.o[0].pl[1].v.l;var f,k,d=new l,u=[];r.forEach(a._objects,function(c,d){null==c.d?(k=a.mainController,c.d=new t(n.objectTypes.OBJID_DEVICE,Number(a.mainController))):k=c.d.i;f=new q(k,c.o.t,c.o.i,c.p?c.p.v:null);b.addObject(a,
d,f,null);if(""==b.objects[d].unit&&2>=c.o.t){var g=this._fetchProperties(a,c);u.push(g);g.then(m.hitch(this,function(a){b.setUnit(a.o[0].pl[0].v.v,b.objects[d]);return a}),m.hitch(this,function(){return!0}))}},this);0==u.length?d.resolve(!0):g(u).then(m.hitch(this,function(){d.resolve(!0)}),m.hitch(this,function(a){d.resolve(!0)}));return d.promise},_fetchProperties:function(a,c){var f=c.d?c.d.i:a.mainController,d=[{o:new t(c.o.t,c.o.i),pl:[{p:new b(n.propertyTypes.PROPID_UNITS,n.primitiveTypes.ENUMERATED),
i:-1,v:new b(0,n.primitiveTypes.ENUMERATED)}]}];return rc.xhr.request({type:"bacnet",gid:"BTL",s:new k({device:f},d),error:function(a){this.error("_fetchProperties error: ",a)}})},log:function(){var a=Array.prototype.slice.call(arguments);a.unshift(this.declaredClass);console.log.apply(this,a)},onLoad:function(){this.emit("load",arguments)},onError:function(){this.emit("error",arguments)},destroy:function(){this.units=this.rawObjects=this.objects=this.b=null}})})},"rc/reliable/_trend/io/Loader":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/topic ./Archive ./Reliable ./Resources ../DataManager ../../../date".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return r("rc/reliable/_trend/io/Loader",[l],{datam:null,_r:null,l:null,a:null,totalArchiveRecords:0,totalLiveRecords:0,numTimesArchive:0,numTimesLive:0,isArchiveSupported:null,liveFirst:!0,dateFirstArchive:0,dateLastArchive:0,dateSelectedFirst:0,dateSelectedLast:0,dateSelectedDiff:0,dataManagerClass:n,liveDataClass:g,archiveDataClass:c,resourceClass:d,_previousArchiveState:null,constructor:function(a){this._r=new this.resourceClass;this.datam=new this.dataManagerClass;
this.l=new this.liveDataClass;this.a=new this.archiveDataClass({l:this})},load:function(b){var c=new m,k=b.get("sampleSize");this.numTimesLive=this.l.datam.getTimeLength();var d=this.a._fetchTotalRecordCount(b.pointName.toMnemonic()),f=p.hitch(this,function(f){0<f?(this.totalArchiveRecords=f,this.isArchiveSupported=this.a.enabled=!0):(this.isArchiveSupported=this.a.enabled=!1,this.numTimesArchive=this.totalArchiveRecords=0);var d=p.hitch(this,function(){this.a.validatePoints(this.l.datam);this.datam.removeAll(!0);
this.dateFirstArchive=this.a.dateFirst;this.dateLastArchive=this.a.dateLast;this.numTimesLive=this.l.datam.getTimeLength();this.numTimesArchive=this.a.enabled?this.a.datam.getTimeLength():0;if(0===this.numTimesArchive&&0===this.numTimesLive)return g("No live or archive logs found"),c.promise;0===this.dateSelectedFirst&&0===this.dateSelectedLast&&(this.dateSelectedLast=this.l.dateLast);0<this.dateSelectedFirst?(this.datam.dateSelectedFirst=this.dateSelectedFirst,this.datam.dateSelectedLast=0):0<this.dateSelectedLast&&
(this.datam.dateSelectedLast=this.dateSelectedLast,this.datam.dateSelectedFirst=0);0<this.numTimesLive&&(0===this.dateSelectedLast||this.l.datam.getFirstTime()<=this.dateSelectedLast)&&this.datam.merge(this.l.datam,k);0<this.numTimesArchive&&(this.datam.merge(this.a.datam,k),this.numTimesLive=this.l.datam.getTimeLength());0<this.dateSelectedLast&&(this.datam.trimFromTime(this.dateSelectedLast,k,!0),this.datam.times.length>k?this.datam.trimExtra(k):this.datam.times.length<k&&this.datam.mergeOld(k,
!1));0<this.dateSelectedFirst&&this.datam.times.length>k&&this.datam.trimToTime(this.dateSelectedFirst,k,!0);this.totalLiveRecords=b.bFirstLiveRecord?this.numTimesLive:b._recordCount;this.datam.dateSelectedFirst=this.datam.times[0];this.datam.dateSelectedLast=this.datam.times[this.datam.times.length-1];this.datam.dateSelectedDiff=this.dateSelectedLast-this.dateSelectedFirst;c.resolve(this);this.onLoad(this);this.checkState();return c.promise}),g=p.hitch(this,function(a){c.reject(a);this.checkState();
this.onError(a)}),q=p.hitch(this,function(){var c;if(b.bFirstLiveRecord)return d();if(this.l.datam.getTimeLength())return this.l.datam.getFirstTime()>this.dateSelectedFirst?this.l.load(b,k,this.dateSelectedFirst).then(d,d):d();c=0;this.a.enabled&&(c=this.a.datam.getLastTime(),c+=a.getTimezoneOffsetMsec(c));return this.l.load(b,k,c).then(d,d)});f=p.hitch(this,function(){var a=this.dateSelectedLast;this.dateSelectedFirst||this.dateSelectedLast||(a=new Date,a.setDate(a.getDate()+2),a=a.getTime());this.dateSelectedFirst>
this.dateLastArchive&&(a=this.dateLastArchive,this.dateSelectedFirst=0);return this.a.load(b,k,this.dateSelectedFirst,a).always(q)});this.a.enabled&&0<this.totalArchiveRecords&&this.dateSelectedFirst<=this.dateLastArchive?this._r.load().always(f):this._r.load().always(q)});d.always(f);return c.promise},checkState:function(){null!==this._previousArchiveState&&this.a.enabled!==this._previousArchiveState&&h.publish("archiveStateChanged",!0);this._previousArchiveState=this.a.enabled},getDateRange:function(){return[this.getDateFirst(),
this.getDateLast()]},getDateFirst:function(){return this.a&&this.a.dateFirst?this.a.dateFirst:this.l.dateFirst},getDateLast:function(){return this.l.dateLast?this.l.dateLast:this.a.dateLast},buildSliderInfo:function(){var a=this.getDateFirst(),c=this.getDateLast(),k=this.datam.times.length?this.datam.times.length:this.numTimesArchive+this.numTimesLive,d=this.datam.getTimeLength()?this.datam.getFirstTime():this.datam.dateSelectedFirst,f=this.datam.getTimeLength()?this.datam.getLastTime():this.datam.dateSelectedLast;
return{current:{first:d,last:f,diff:f-d,count:k},total:{first:a,last:c,count:k},sample:{minimum:10,maximum:Math.min(2E3,this.totalArchiveRecords+this.totalLiveRecords),count:k}}},getChartItems:function(){return this.datam.getChartItems()},getGridItems:function(){return this.datam.getGridItems()},onLoad:function(){this.emit("load")},onError:function(){this.emit("error")},resetData:function(a){this.dateFirstArchive=this.dateLastArchive=this.dateSelectedLast=this.dateSelectedFirst=0;this.datam.removeAll();
this.l.datam.removeAll();this.a.datam.removeAll();a.bFirstLiveRecord=!1},destroy:function(){this.l=this.datam=this.a=this._r=null;this.numTimesLive=this.totalArchiveRecords=this.numTimesArchive=0;this.isArchiveSupported=null},logTime:function(a,c){}})})},"rc/reliable/_trend/io/Reliable":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented ./Header ./Device ../DataManager ../../../sys/job".split(" "),function(r,p,m,l,h,c,g,d){return r("rc/reliable/_trend/io/Reliable",[l],
{h:null,d:null,datam:null,dateFirst:0,dateLast:0,BANK_SIZE:32,constructor:function(){this.h=new h({r:this});this.d=new c({r:this});this.datam=new g;this.datam.dataSource=this.datam.DS_LIVE},load:function(c){this.datam.removeAll();var a=new m;c.isLC=d.isLC(c.pointName);c.isLC&&(this.BANK_SIZE=2);var b=p.hitch(this,function(b){this.dateFirst=this.datam.getFirstTime();this.dateLast=this.datam.getLastTime();a.resolve(b);this.onLoad(b);return a.promise}),g=p.hitch(this,function(b){a.reject(b);this.onError(b);
return b}),k=p.hitch(this,function(){return this.d.load(c,this.datam).then(b,g)});this.h.load(c,this.datam).then(k,g);return a.promise},onLoad:function(){this.emit("load")},onError:function(){this.emit("error")},destroy:function(){this.h=this.datam=this.d=null}})})},"rc/reliable/_trend/io/Header":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/i18n!rc/nls/all ../../Point ../../unit ../../../_base/Error ../../../util/encoding/base16 ../../../xhr".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return p("rc/reliable/_trend/io/Header",[h],{r:null,isFloat:!1,logWrapped:!1,twoBanks:!1,interval:0,headerIndex:0,lastSampleTime:0,rawObjects:null,objects:null,units:null,isChanged:!0,constructor:function(a){this.objects=[];this.units=[];this.rawObjects=[];m.mixin(this,a)},load:function(a,b){var c=new l,f=m.hitch(this,function(a){c.reject(a);this.onError(a)});this._fetch(a).then(m.hitch(m.hitch(this,function(k){try{this._decode(a,b,k),c.resolve(this),this.onLoad(this)}catch(w){f(w)}})),
m.hitch(f));return c.promise},_fetch:function(a){var b=a.pointName,d=new l,f,g={gid:"TL",type:"rcp",method:"GET",cmdObj:{dest:b.mainController,subt:b.subnetType,subd:b.subController,src:0,cmd:10,xl:Math.floor((b.comInstance-1)/this.r.BANK_SIZE),xh:0,cnt:0},load:m.hitch(this,function(k){k=k.data;if(1>k.length)k=new n({name:a._replace(c.problemInX),message:a._replace(c.couldNotLoad)+" "+c.objNotFound,suggestion:c.objNotFoundFix}),d.reject(k);else{f=a.isLC?23:48;var g=(b.comInstance-1)%this.r.BANK_SIZE*
f;k=k.slice(g,g+f);d.resolve(k)}}),error:m.hitch(this,function(a){console.error("_fetch","error",a);d.reject(a)})};rc.xhr.request(g);return d.promise},_decode:function(b,c,q){var f=[],k=[],n,t,h;b.isLC?(this.twoBanks=n=!1,this.headIndex=a.toIntEnd(q.slice(11,13)),this.lastSampleTime=a.toIntEnd(q.slice(18,22)),this.logWrapped=q[13],t=1E3*(q[8]+60*q[9]+3600*q[10]),h=q.slice(14,18),q=q.slice(0,8)):(n=q[35]&2,this.twoBanks=0==q[36],this.headIndex=a.toIntEnd(q.slice(32,34)),this.lastSampleTime=a.toIntEnd(q.slice(22,
26)),this.logWrapped=q[34],t=1E3*(q[26]+60*q[27]+3600*q[28]),h=q.slice(38,44),q=q.slice(10,22));0===t&&(t=1E3);if(0!=this.lastSampleTime&&(this.headIndex=n?4*this.headIndex:2*this.headIndex,0!==Math.max.apply(null,q))){for(var l,v,p=0;p<q.length;p+=2)if(l=a.toIntEnd(q.slice(p,p+2)),0===l)f.push(null),c.addPlaceholderObject();else{v=new g(l,b.pointName);f.push(v);var C=p/2;l=h[C];l>d.analog.length&&(l=0);k.push(d.getAnalog(d.getAnalogIndex(l,v)));c.addObject(b,C,v,l)}b=function(a,b){return m.isArray(a)&&
m.isArray(b)&&a.length==b.length?r.every(a,function(a,c){return a==b[c]},this):!1};t!=this.interval||n!=this.isFloat||b(q,this.rawObjects)?this.isChanged=!0:this.isChanged=!1;this.isFloat=n;this.interval=t;this.rawObjects=q;this.objects=f;this.units=k}},log:function(){var a=Array.prototype.slice.call(arguments);a.unshift(this.declaredClass);console.log.apply(this,a)},onLoad:function(){this.emit("load")},onError:function(){this.emit("error")},destroy:function(){this.units=this.rawObjects=this.objects=
this.b=null}})})},"rc/reliable/_trend/io/Device":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/i18n!rc/nls/all ../../../util/encoding/base16 ../../../xhr".split(" "),function(r,p,m,l,h,c,g){return r("rc/reliable/_trend/io/Device",[l],{r:null,hasLogs:!1,hasNewLogs:!1,lastLogTime:0,constructor:function(c){p.mixin(this,c)},load:function(c,g){var a=new m,b=this._fetch(c),d=p.hitch(this,function(b){a.reject(b);this.onError(b)});b.then(p.hitch(p.hitch(this,function(b){try{this._decode(c,
g,b),c.bFirstLiveRecord=!0,a.resolve(this),this.onLoad(this)}catch(q){d(q)}})),p.hitch(d));return a.promise},_fetch:function(c){var d=new m,a=this.r.h.twoBanks,b=[],g=p.hitch(this,function(c){b=b.concat(c.data);a?(a=0,q.xh=1,this._fetchCmd(q).then(g,k)):d.resolve(b)}),k=p.hitch(this,function(a){d.resolve(a)});c=c.pointName;var q={dest:c.mainController,subt:c.subnetType,subd:c.subController,src:0,cmd:22,xl:c.comInstance-1,xh:0,cnt:0};this._fetchCmd(q).then(g,k);return d.promise},_fetchCmd:function(c){var d=
new m;c={gid:"TL",type:"rcp",method:"GET",cmdObj:c,load:p.hitch(this,function(a){d.resolve(a)}),error:p.hitch(this,function(a){d.reject(a)})};rc.xhr.request(c);return d.promise},_decode:function(c,g,a){try{this.hasLogs=!1;this.hasNewLogs=!0;var b,d,k,q,f,u,n,l,m;this.r.h.isFloat?(d=4,f="toFloatEnd"):(d=2,f="halfFloatToFloatEnd");q=this.r.h.interval/1E3;u=c.isLC?4*d:6*d;m=b=0;if(this.r.h.logWrapped)for(l=a.length/u,k=this.r.h.lastSampleTime-q*l,n=this.r.h.headIndex;n<a.length;n+=u)b++,this._decodeOneRow(g,
a,n,m++,f,d,1E3*(k+b*q));else l=this.r.h.headIndex/u,k=this.r.h.lastSampleTime-q*l;for(n=0;n<this.r.h.headIndex;n+=u)b++,this._decodeOneRow(g,a,n,m++,f,d,1E3*(k+b*q));this.lastLogTime==g.getFirstTime()&&(this.hasNewLogs=!1);g.getTimeLength()&&(this.lastSampleTime=g.getLastTime(),this.hasLogs=!0)}catch(y){throw c.safeError(y,{name:c._replace(h.problemInX),message:c._replace(h.couldNotLoad)+" "+h.dataProblem,suggestion:h.dataProblemFix});}},_decodeOneRow:function(d,g,a,b,t,k,q){for(var f=0;f<this.r.h.objects.length;f++)if(null!=
this.r.h.objects[f]){var u=a+f*k,n=a+(f+1)*k,u="Count"==this.r.h.units[f]?c.toUnsignedEnd(g.slice(u,n)):c[t](g.slice(u,n));d.insertTimeValues(f,b,q,u)}},onLoad:function(){this.emit("load")},onError:function(){this.emit("error")},destroy:function(){this.r=null}})})},"rc/reliable/_trend/io/Resources":function(){define("dojo/_base/declare dojo/_base/lang ../../../sys/cunit ../../../sys/decpnt ../../../sys/desc ../../../sys/job".split(" "),function(r,p,m,l,h,c){return r("rc/reliable/_trend/io/Resources",
null,{load:function(){var g=h.loadOnce();g.then(p.hitch(this,function(){return l.loadOnce()}),p.hitch(this,function(){return m.loadOnce()}));g.always(p.hitch(this,function(){return c.loadOnce()}));return g}})})},"rc/bacnet/io/Service":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all ./Error ./Number ./Object ../enums ../error".split(" "),function(r,p,m,l,h,c,g,d,n){return p("rc/bacnet/io/Service",null,{s:12,e:0,buff:null,idx:0,constructor:function(a,b){this._decodeErr=
l.decodeErr;this._encodeErr=l.encodeErr;this.opl=b||[{o:new g(d.objectTypes.OBJID_ANALOG_INPUT,0),pl:[{p:new c(d.propertyTypes.PROPID_PRESENT_VALUE,d.primitiveTypes.UNSIGNED_INTEGER),i:-1}]}];this.s=a||12;this.buff=[];this.idx=0},encode:function(){switch(this.s){case 6:return this._encodeAtomicRead();case 12:case 14:case 26:return this._encodeRead();case 15:case 16:return this._encodeWrite()}return[]},_encodeRead:function(){var a,b=14==this.s?!0:!1,c=b?0:16;this.buff=[];r.forEach(this.opl,function(k){this.buff=
this.buff.concat(k.o.encode(12));b&&this.buff.push(30);r.forEach(k.pl,function(b){a=c;this.buff=this.buff.concat(b.p.encode(a|8));a+=16;-1!=b.i&&(this.buff=this.buff.concat(b.i.encode(a|8)));a+=16;b.rr&&(this.buff=this.buff.concat(b.rr.encode()))},this);b&&this.buff.push(31)},this);return this.buff},_encodeWrite:function(){var a,b=16==this.s?!0:!1,c=b?0:16;this.buff=[];r.forEach(this.opl,function(k){this.buff=this.buff.concat(k.o.encode(12));b&&this.buff.push(30);r.forEach(k.pl,function(b){a=c;this.buff=
this.buff.concat(b.p.encode(a|8));a+=16;-1!=b.i&&(this.buff=this.buff.concat(b.i.encode(a|8)));a+=16;this.buff.push(a|14);this.buff=this.buff.concat(b.v.encode());this.buff.push(a|15);b.pr&&(a+=16,this.buff=this.buff.concat(b.pr.encode(a|8)))},this);b&&this.buff.push(31)},this);return this.buff},_encodeAtomicRead:function(){this.buff=[];r.forEach(this.opl,function(a){this.buff=this.buff.concat(a.o.encode(196));this.buff.push(a.a.t?30:14);this.buff=this.buff.concat(a.a.s.encode());this.buff=this.buff.concat(a.a.c.encode());
this.buff.push(a.a.t?31:15)},this);return this.buff},decode:function(a){try{0===a.length&&n.throwError(65,63);this.e=this.idx=0;if(80==(a[this.idx]&248)){var b=new h;b.decode(a,this.idx+3);this._throwError(b.toStringMsg(),{classCode:b})}switch(this.s){case 6:this._decodeAtomicAck(a);break;case 12:case 14:case 26:this._decodeReadAck(a);break;case 29:this._decodeEventInformation(a);break;case 15:case 16:this._decodeWriteAck(a)}a.length!=this.idx&&(this.e=1)}catch(t){this.e=1,a={},"classCode"in t&&(a.classCode=
t.classCode),this._throwError(t.message,a)}},_decodeReadAck:function(a){var b,g=0,k=0,q=this.opl,f=14==this.s?!0:!1,u=f?32:16,l;this.buff=a;for(12!=a[this.idx]&&n.throwError(65,63);this.idx<a.length&&12==a[this.idx];){this.idx+=5;f&&30!=a[this.idx++]&&n.throwError(65,62);g=0;for(l=u;this.idx<a.length&&(a[this.idx]&248)==(l|8);)b=a[this.idx]&7,this.idx+=b+1,l+=16,(a[this.idx]&248)==(l|8)?(-1==q[k].pl[g].i&&(q[k].pl[g].i=new c(0,d.primitiveTypes.UNSIGNED_INTEGER)),this.idx=q[k].pl[g].i.decode(a,this.idx)):
q[k].pl[g].i=-1,26!=this.s?(l+=16,a[this.idx++]!=(l|14)?88==(a[this.idx-1]&248)?(this.e=1,q[k].pl[g].v=new h,this.idx=q[k].pl[g].v.decode(a,this.idx),88!=(a[this.idx++]&248)&&n.throwError(65,62)):n.throwError(65,62):(this.idx=q[k].pl[g].v.decode(a,this.idx),a[this.idx++]!=(l|15)&&n.throwError(65,62))):this.idx=q[k].pl[g].rr.decode(a,this.idx),l=u,g++;f&&31!=a[this.idx++]&&n.throwError(65,62);k++}},_decodeEventInformation:function(a){var b=this.opl;this.buff=a;this.idx=b[0].pl[0].v.decode(a,this.idx+
1);this.idx=a.length},_decodeWriteAck:function(a){this.buff=a;2!=(a[0]&240)>>>4?this.e=1:this.idx=a.length},_decodeAtomicAck:function(a){this.buff=a;switch(a[this.idx++]){case 16:break;case 17:break;default:n.throwError(65,63)}14==a[this.idx]&&(this.idx+=3,this.opl[0].a.v.decode(a,this.idx),this.idx=a.length)},_throwError:function(a,b){var c=Error(a);void 0!=b&&m.mixin(c,b);c.s=this;throw c;},toString:function(){for(var a="{service:"+this.s,a=a+(", error:"+this.e),a=a+", objectPropertyList:[",b=0;b<
this.opl.length;b++){for(var a=a+("{object:"+this.opl[b].o.toString()),a=a+", propertyList:[",c=0;c<this.opl[b].pl.length;c++)a+="{property:"+this.opl[b].pl[c].p.toString(),a+=", index:"+(-1!=this.opl[b].pl[c].i?this.opl[b].pl[c].i.toString():"-1"),this.opl[b].pl[c].v&&(a+=", value:"+this.opl[b].pl[c].v.toString()),this.opl[b].pl[c].rr&&(a+=", readRange:"+this.opl[b].pl[c].rr.toString()),a+="}, ";this.opl[b].pl.length&&(a=a.slice(0,-2));a+="]}, "}this.opl.length&&(a=a.slice(0,-2));return a+"]}"}})})},
"rc/reliable/Trend":function(){define("dgrid/Grid dgrid/OnDemandGrid dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/_base/url dojo/aspect dojo/cookie dojo/Deferred dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/i18n!rc/nls/all dojo/i18n!rc/nls/tl dojo/json dojo/number dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/text!./_trend/templates/Trend.html dojo/topic require ./_trend/io/Loader ./_trend/theme ./_trend/TrendLegend ./Point ../_base/test ../_base/tooltip ../_Widget ../date ../StyleSwitcher ../sys/desc ../widget/charting/Chart2DTrendWidget ../widget/charting/Crosshairs ../widget/Toolbar ../widget/Retry ../util/notices ../xhr dojo/sniff".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U){return l("rc/reliable/Trend",[M],{templateString:B,src:"",testMode:!1,_nameForms:null,interval:null,_isFloat:null,_grid:null,_chartw:null,_buttons:null,_colors:"#06F #6f0 cyan red #93f #fc0 #f60 #666".split(" "),_letters:"ABCDEFGH".split(""),_isRendered:!1,_isShowingChart:!0,dateSelectedFirst:0,dateSelectedLast:0,liveDataClass:null,timeLabelFunc:null,sampleSize:0,_ss:0,_sd:!1,_sl:!1,_range:[1,100],_firstVisibleRow:null,
_onMouseMoveCounter:0,_MAX_MOUSE_MOVE_COUNT:20,_url:null,pointInstance:1,mainController:1,subController:1,subnet:0,pointType:10,pointName:null,mnemonic:"",crosshairs:null,_ch:!0,_fetchPath:F.toUrl("rc/tests/proxy.php"),_mouseCoords:null,_chartBoxCoords:null,_updating:!1,updateButtonClicked:!1,updateTimeout:5E3,_resumeUpdating:!1,_updateTimer:null,_delayFetch:null,_noDataContainer:null,_errMsg:"",_headerObj:null,_cookieName:"",_pConnections:null,_legendMenuConnects:null,_resizeChartConnect:null,_desc:null,
_tooltipIds:null,_printMode:!1,printOnlyStyle:null,_gridPaneSize:0,_isMovingSplitter:!1,resizeDelay:500,loadClass:H,isLC:!1,bFirstLiveRecord:!1,_refreshRequired:!1,_subscribed:null,_trendLegend:null,_legendCheckboxClass:"dijitCheckBox",_legendClass:"mpwa-trend-legend",_firstLoad:!0,_originalChartTheme:null,_chartPrintDimension:"600px",postCreate:function(){this.inherited(arguments);this._originalChartTheme=n("st")||"Gray";window.onbeforeprint=c.hitch(this,this._beforePrint);this._setPointName();this.set("sampleSize",
2E3);this._legendMenuConnects=[];this._tooltipIds=[];this._retryHandler=new aa;this._nameForms=[0,0,0,0,0,0];this.setUpToolbar(this._borderContainer);this._borderContainer.startup();var a=new g(window.location);this._url=a.scheme+"://"+a.host;this._cookieName="TL";this._getCookie();this.io=new this.loadClass;K.isLive()&&!this.testMode?this.fetch():f.set(this._chartDiv,{width:"1200px",height:"800px"});(a=A(".dijitSplitterThumb",this._gridContainer._splitterWidget.domNode)[0])&&f.set(a,{width:u("touch")?
"0px":"4px",height:"5%",top:"40%",backgroundColor:"#666"});u("touch")?this.own(v(this._chartDiv,"touchend",c.hitch(this,this._onMouseMove)),v(this._chartDiv,"touchmove",c.hitch(this,this._onTouchMove)),v(this._gridContainer.domNode,"touchstart",c.hitch(this,this._onMouseOutsideChart)),v(this._borderContainer,"touchstart",c.hitch(this,this._onMouseOutsideChart))):this.own(v(this._chartDiv,"mousemove",c.hitch(this,this._onMouseMove)));D.subscribe("archiveStateChanged",c.hitch(this,function(a){this._refreshRequired=
a}));this.own(v(window,"resize",c.hitch(this,function(){this._isShowingChart||(this._isShowingChart=!0,this._toggleDataGraph())})))},_setPointName:function(){this.pointName=new I(this.mainController,this.subnet,this.subController,this.pointType,this.pointInstance)},_addButtons:function(){this._toolbar||(this._toolbar=this._createToolbar());this._previousButton=this._toolbar.addButton("previous","previousIcon","center");this._setButtonLabel(this._previousButton,w.tbPrevious);this.own(v(this._previousButton,
"click",c.hitch(this,this._onClickFetchPrevious)));this._nextButton=this._toolbar.addButton("next","nextIcon","center");this._setButtonLabel(this._nextButton,w.tbNext);t.add(this._nextButton.domNode,"rcNextButton");this.own(v(this._nextButton,"click",c.hitch(this,this._onClickFetchNext)))},_onClickFetchPrevious:function(){this.updateButtonClicked&&this.stopUpdating();this._chartw&&this._chartw.chart.slider._onClickDecrement()},_onClickFetchNext:function(){this.updateButtonClicked&&this.stopUpdating();
this._chartw&&this._chartw.chart.slider._onClickIncrement()},_onTouchMove:function(a){1===a.touches.length&&(this._touchMove=!0)},_onTouchEnd:function(a){1===a.changedTouches.length&&(this._touchMove||(a=a.changedTouches[0],this._onMouseMove(a)),this._touchMove=!1)},_createLegend:function(){this._updateLegendCheckBoxes();var a=this.io.getChartItems().map(function(a){return{label:a.name,colour:a.color,yAxisInfo:a.yAxisInfo}});0<this._toolbar.domNode.clientWidth&&(this._trendLegend=new G({checkboxClass:this._legendCheckboxClass,
baseClass:this._legendClass,isShowing:this._sl,showCrosshairs:this._ch,trendLines:a,style:{right:this.domNode.clientWidth-this._toolbar.domNode.clientWidth+"px",top:this._toolbar.h+"px",position:"absolute"}}),this.own(v(this._trendLegend,"checkboxChange",c.hitch(this,this._onLegendChange)),d.after(this._toolbar,"toggle",c.hitch(this,this._closeLegend))),k.place(this._trendLegend.domNode,this.domNode,"last"),this._toggleLegendArrow())},_createToolbar:function(){try{this._toolbar=new S({region:"top",
buttons:{Print:!0,Export:!0,Update:!0},customHelp:"tl"},k.create("div",{})),this._updateButton=this._toolbar.getButton("Update"),this.own(v(this._updateButton,"click",c.hitch(this,this.update))),this._printButton=this._toolbar.getButton("Print"),this.own(v(this._printButton,"click",c.hitch(this,this.print))),this._exportButton=this._toolbar.getButton("Export"),this.own(v(this._exportButton,"click",c.hitch(this,this.exportCsv))),this._tooltipIds.push(L.add(this._exportButton.domNode,w.ttExport,this.getExportBtnTooltipMargin(),
"tl")),this._graphDataButton=this._toolbar.addButton("showData","gridIcon","center"),this._setButtonLabel(this._graphDataButton,w.tbShowData),this.own(v(this._graphDataButton,"click",c.hitch(this,this._onClickDataGraph))),this._tooltipIds.push(L.add(this._graphDataButton.domNode,w.ttShowData,this.getShowDataBtnTooltipMargin(),"tl")),this._legendButton=this._toolbar.addButton("legend","rc dijitArrowButtonInner","lone"),this.own(v(this._legendButton,"click",c.hitch(this,this._toggleLegend))),this._setButtonLabel(this._legendButton,
w.tbLegend),this._tooltipIds.push(L.add(this._legendButton.domNode,w.ttLegend,this.getLegendBtnTooltipMargin(),"tl")),this._addButtons()}catch(W){console.error("error creating toolbar: ",W.message,W)}return this._toolbar},getShowDataBtnTooltipMargin:function(){return{margin:"10.5em 0 0 3em"}},getLegendBtnTooltipMargin:function(){return{margin:"1.5em 0 0 2.5em"}},getExportBtnTooltipMargin:function(){return{margin:"1.5em 0 0 2em"}},_beginUpdate:function(){if(this._updating)return!1;this._updating=!0;
window.clearTimeout(this._updateTimer);this._updateButtons();this._chartw&&(this._chartw.chart.dateSelectorTextBox.set("disabled",!0),this._chartw.chart.sampleSizeTextBox.set("disabled",!0),this._chartw.chart.slider.set("disabled",!0));return!0},_endUpdate:function(){this._updating&&(this.updateButtonClicked&&!this._isLoading&&(this._updateTimer=window.setTimeout(c.hitch(this,function(){this.io.resetData(this);this._chartw.chart.setDateGetLatest()}),this.updateTimeout)),this._isLoading=this._updating=
!1,this._updateButtons(),this._chartw&&(this._chartw.chart.dateSelectorTextBox.set("disabled",!1),this._chartw.chart.sampleSizeTextBox.set("disabled",!1),this._chartw.chart.slider.set("disabled",!1)))},_onClickLoad:function(){this.updateButtonClicked&&this.stopUpdating();this._isLoading=!0;this.io.resetData(this);this._chartw.chart.setDateGetLatest()},_onLegendChange:function(a,b,c){-1===a?this._onClickCrossHairsCB(c):this._onClickInputsCB(a,b,c)},fetch:function(){this._subscribed||(this._subscribed=
D.subscribe("archiveStateChanged",c.hitch(this,function(a){if(this._refreshRequired=a)this.io=new this.loadClass})));var b=new a;if(!this._beginUpdate())return b.resolve(!1),b.promise;this.io.load(this).then(c.hitch(this,function(){try{this._render(),this.onInitSuccess(),b.resolve(!0)}catch(da){console.error("Failed Fetch: ",this,da,da.message),b.reject(da)}this._endUpdate()}),c.hitch(this,function(a){this.onInitSuccess();b.reject(a);this._endUpdate();this._toggleDataGraph()}));return b.promise},
_stopUpdate:function(){window.clearTimeout(this._updateTimer);this._updateTimer=null;this._setButtonLabel(this._updateButton,w.update);this._updateButton.set("checked",!1);this._updateButton.set("disabled",!1);this._updating=this.updateButtonClicked=!1},_formatValue:function(a,b,c){return"Time"!==c?y.round(a,b):a},_render:function(){if(this.io.l.d.hasNewLogs||this.io.a.enabled){if(this.io.l&&this.io.l.d.hasLogs||this.io.a.datam){this._noDataContainer&&(this._noDataContainer=null,k.empty(this._chartDiv));
if(!this._refreshRequired&&this._isRendered&&this._chartw&&this._updating){this._updateGrid();this._updateChart(this.io.getChartItems());return}this._buildChart();this._setChartTheme(this._originalChartTheme);this._chartw.chart.renderAll();this._buildCrosshairs();this._buildConnections();this._showCookies()}else this._chartw&&(this._chartw.destroyRecursive(),this._chartw=null),this._sd&&this._buildGrid(),this._noDataContainer||(this._noDataContainer=k.create("div",{className:"mpwError",innerHTML:z.noData},
this._chartDiv));this._buildLegendMenu()}this._chartw&&(this._chartw.chart.slider.setSliderInfo(this.io.buildSliderInfo()),this._chartw.chart.sampleSizeTextBox.set("value",this.get("sampleSize")));this._resizeChart();this._isRendered=!0},_showCookies:function(){this._sd&&!this._refreshRequired&&this._toggleDataGraph();this._showLegendMenu()},_showLegendMenu:function(a){this._chartw&&(null===this._trendLegend&&this._createLegend(),!0===a||this._sl&&this._isShowingChart?this._openLegend():this._closeLegend())},
_getBestName:function(a,b){return Q.getBestRcp(a,!1)},_buildCrosshairs:function(){this.crosshairs&&(m.forEach(this._pconnects,function(a){a.remove()},this),this._pconnects=[],this.crosshairs.destroyRecursive());this.crosshairs=new R({_offsets:this._chartw.chart.offsets,_dim:this._chartw.chart.dim,_plotArea:this._chartw.chart.plotArea,_labelTop:this._chartw.chart._labelBottomCoord},k.create("div",{},this._chartDiv,"after"));this._attachPoints.push("crosshairs");var a=v(this.crosshairs.xLineDiv,"mousemove",
c.hitch(this,this._onMouseMove));this.crosshairs._pconnects.push(a);a=v(this.crosshairs.yLineDiv,"mousemove",c.hitch(this,this._onMouseMove));this.crosshairs._pconnects.push(a);this._setCrosshairsYLabels();this.crosshairs.setDisabled(!this._ch)},_buildConnections:function(){this._resizeChartConnect&&(this._resizeChartConnect.remove(),this._resizeChartConnect=null);var a=this._borderContainer.getSplitter("leading");this.own(d.after(a,"_stopDrag",c.hitch(this,this._onSplitterStopDrag)),d.after(a,"_startDrag",
c.hitch(this,this._onSplitterStartDrag)));this._resizeChartConnect=d.after(this._chartCP,"resize",c.hitch(this,this._resizeChart));this.own(v(N.widget,"mouseMove",c.hitch(this,this._onMouseMove)));this._grid&&(this._gridResizeConnect=d.after(this._gridContainer,"resize",function(){this._grid&&this._grid.resize()}));this.own(v(P,"beforeStyle",c.hitch(this,function(a){this._originalChartTheme=a;this._setChartTheme(a)})))},_closeLegend:function(){null!==this._trendLegend&&(this._trendLegend.hide(),this._sl=
!1,this._setCookie("_sl"),this._toggleLegendArrow())},_openLegend:function(){null!==this._trendLegend&&(this._trendLegend.show(),this._sl=!0,this._setCookie("_sl"),this._toggleLegendArrow())},_onSplitterStopDrag:function(){this._updateGrid();this._isMovingSplitter=!1},_onSplitterStartDrag:function(){this._isMovingSplitter=!0},onDropDownBlur:function(){this.inherited(arguments);this.emit("dropDownBlur",arguments)},_buildChart:function(){this._chartw&&(this._chartw.destroyRecursive(),this._chartw=null);
this._chartCP&&(this._chartCP.h+=this._toolbar.h,f.set(this._chartCP.domNode,"height",this._chartCP.h+"px"));this._chartw=new T({chartParams:{trend:this,range:[this.dateSelectedFirst,this.dateSelectedLast],traces:this.io.getChartItems(),sampleSize:this.get("sampleSize")}},k.create("div",{style:{width:"100%",height:"100%"}},this._chartDiv,"last"));this._attachPoints.push("_chartw");this.own(v(this._chartw.chart,"changeSampleSize",c.hitch(this,this.onChangeSampleSize)));this.own(v(this._chartw.chart,
"changeDateSelector",c.hitch(this,function(a){null===a?a=this.io.datam.dateSelectedFirst:this.dateSelectedFirst=a.getTime()-O.getTimezoneOffsetMsec(a);this._delayFetch&&window.clearTimeout(this._delayFetch);this._delayFetch=window.setTimeout(c.hitch(this,this.fetch),250)})));this._chartBoxCoords=q.position(this._chartDiv,!0);var a=q.getMarginBox(this._chartDiv);this._chartBoxCoords.l=a.l;this._chartBoxCoords.t=a.t;this.buildChartComplete(this._chartw.chart)},_getSampleSizeAttr:function(){return this._ss},
buildChartComplete:function(a){a.getSliderTooltip=this.getSliderTooltip;a.getScaleTooltip=this.getScaleTooltip;a.getScaleTooltipCss=this.getScaleTooltipCss;a.getDatePickerTooltip=this.getDatePickerTooltip;a.getDatePickerTooltipCss=this.getDatePickerTooltipCss;a.getSampleSizeTooltip=this.getSampleSizeTooltip;a.getSampleSizeTooltipCss=this.getSampleSizeTooltipCss},getSliderTooltip:function(){return w.ttZoomBar},getScaleTooltip:function(){return w.ttUnitScaleControls},getScaleTooltipCss:function(){return{}},
getDatePickerTooltip:function(){return w.ttDateTextBox},getDatePickerTooltipCss:function(){return{}},getSampleSizeTooltip:function(){return w.ttSampleSize},getSampleSizeTooltipCss:function(){return{}},_setSampleSizeAttr:function(a){a=parseInt(a,10);this._ss!==a&&(this.sampleSize=this._ss=a,this._setCookie("_ss"))},onChangeSampleSize:function(a){this.set("sampleSize",a);this.emit("changeSampleSize",a);this._onChangeSampleSize()},_onChangeSampleSize:function(){this._delayFetch&&window.clearTimeout(this._delayFetch);
var a=this._chartw.chart.slider.getSliderInfo();a.current.last>=a.total.last&&0===this.io.dateSelectedLast?(this.io.dateSelectedFirst=0,this.io.dateSelectedLast=a.total.last):a.current.first<=a.total.first&&0===this.io.dateSelectedFirst&&(this.io.dateSelectedFirst=a.total.first,this.io.dateSelectedLast=0);this._delayFetch=window.setTimeout(c.hitch(this,this.fetch),250)},_delayedFetch:function(){this.fetch()},_getGridStructure:function(){var a=function(a,b){return k.create("span",{innerHTML:a.name,
style:{color:a.color}},b,"only")},b=function(a,b){if(""===b||null===b)return null;if(isNaN(b))return b.toString().replace(/in alarm/i,w.inAlarm).replace(/in fault/i,w.fault).replace(/overridden/i,w.overridden).replace(/out of service/i,w.outOfService);"string"===typeof b&&(b=Number(b));return"Time"===a.unit?O.getTimeUnitValue(b):b.toString().match(/e/)?b.toExponential(this.decimalPlaces):0===a.decimalPlaces?b.toString():y.format(b,{places:a.decimalPlaces,round:0})},f=[{label:" ",field:"index",sortable:!1,
renderCell:function(a,b,c){return k.create("div",{innerHTML:b,"class":a.archived?"trendArchive":"runtimeLog"},c,"only")}},{label:w.rtlDateTime,field:"dateTimeCol",sortable:!0,formatter:c.hitch(this,function(a,b){return b.archive?O.formatUTC(a+O.getTimezoneOffsetMsec(a)):O.formatFullDate(a+O.getTimezoneOffsetMsec(a))})}];m.forEach(this.io.getChartItems(),function(k){f.push({label:k.name,field:k.mnemonic,sortable:!1,renderHeaderCell:c.hitch(this,a,k),formatter:c.hitch(this,b,k)})},this);return f},_buildGrid:function(){null===
this._grid&&(this._grid=new (l([r,p]))({columns:this._getGridStructure(),noDataMessage:w.noData,isPagingGrid:!1,maxRowsPerPage:128,bufferRows:16,sort:[{attribute:"dateTimeCol",descending:!0}],store:new E(new C({idProperty:"index"}))},this._gridNode,"only"),this._grid.startup());this._populateGridStore()},_populateGridStore:function(){var a=this.io.getGridItems();a.length!==this._grid.store.data.length||this._gridDataChanged(a[0],a[a.length-1])?(m.forEach(a,c.hitch(this,function(a,b){c.mixin(a,{index:b+
1})})),this._grid.store.setData(a),this._grid.refresh()):this._grid.resize()},_gridDataChanged:function(a,b){return a||b||0!==this._grid.store.data.length?this._grid.store.data[0].dateTimeCol!==a.dateTimeCol||this._grid.store.data[this._grid.store.data.length-1].dateTimeCol!==b.dateTimeCol:!1},_setGridPaneSize:function(){var a=q.getMarginBox(this._borderContainer.domNode).w;this._gridPaneSize=100*q.getMarginBox(this._gridContainer.domNode).w/a},_resizeChart:function(a){if(this._chartw){var c=this._chartw.chart;
c._isResizing=!0;var k=b.byId("rcSystemContent");!0!==a&&(a=f.get(k,"height"),k=f.get(this._toolbar.domNode,"height"),f.set(this._chartCP.domNode,"height",a-k+"px"));a=q.getContentBox(this._chartCP.domNode);if(isNaN(a.w)||isNaN(a.h))return;200>a.w&&(a.w=200);200>a.h&&(a.h=200);c.resize(a.w,a.h);this._chartBoxCoords=q.position(this._chartDiv,!0);a=q.getMarginBox(this._chartDiv);this._chartBoxCoords.l=a.l;this._chartBoxCoords.t=a.t;m.forEach(c._yAxisInfo,function(a){this.crosshairs.toggleYLabel(a.axisName,
a.isRendered,a.isRendered?c.getAxis(a.axisName).lOffset:null)},this);this.crosshairs.reposition(this._chartw.chart.offsets,this._chartw.chart.dim,this._chartw.chart.plotArea);c._isResizing=!1}this._setGridPaneSize();L.update()},_buildLegendMenu:function(){null===this._trendLegend&&this._createLegend()},_toggleLegendArrow:function(){if(null!==this._trendLegend){var a=this._trendLegend.get("isShowing");t.toggle(this._legendButton.iconNode,"dijitDownArrowButton",!a)}},_updateLegendCheckBoxes:function(){for(var a=
this._chartw.chart._yAxisInfo.length-1;0<=a;a--){var b=this._chartw.chart._yAxisInfo[a];m.forEach(b.pointIndexes,function(a){this.io.getChartItems()[a].yAxisInfo=b},this)}},_updateChart:function(a){var b=this._chartw.chart,c=this.io.buildSliderInfo();b._gridItems=this.io.datam.gitems;b.updateTraces(a);b.renderUpdate(c);this._isShowingChart&&(m.forEach(b._yAxisInfo,function(a){this.crosshairs.toggleYLabel(a.axisName,a.isRendered,a.isRendered?b.getAxis(a.axisName).lOffset:null)},this),this.crosshairs.reposition(b.offsets,
b.dim,b.plotArea))},_updateGrid:function(){20<q.getContentBox(this._gridContainer.domNode).w?this._buildGrid():null!==this._grid&&this._populateGridStore()},_updateButtons:function(){m.forEach(this._buttons,c.hitch(this,function(a){a.set("disabled",this._updating)}))},_setUpdateLabel:function(){this._setButtonLabel(this._updateButton,this.updateButtonClicked?w.tbUpdating:w.update);this._updateButton.set("checked",this.updateButtonClicked)},update:function(){this.updateButtonClicked=!this.updateButtonClicked;
this._setUpdateLabel();this.updateButtonClicked?(this.io.resetData(this),this._chartw.chart.setDateGetLatest()):window.clearTimeout(this._updateTimer)},_togglePlots:function(a,b,c){var f=m.indexOf(b.pointIndexes,a);a=this._chartw.chart;var k=0;b.isRendered=c;b.seriesInfo[f].isRendered=c;if(b.isShared)for(c=0;c<b.pointIndexes.length;c++)if(b.seriesInfo[c].isRendered){b.isRendered=!0;k=c;break}a._retainYScaleInfo();b.isRendered||a.removeYAxis(b);a.renderLegendToggle();this.crosshairs.toggleYLabel(b.axisName,
b.isRendered,b.isRendered?a.getAxis(b.axisName).lOffset:null,b.colors[k]);this.crosshairs.reposition(a.offsets,a.dim,a.plotArea)},_onClickInputsCB:function(a,b,c){this._chartw&&(this._togglePlots(a,b,c),this.io.getChartItems()[a].checkBoxEnabled=c)},onMenuItemClick:function(a,b){"undefined"===typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled)return!1;a.popup?this._openPopup("keypress"===b.type):a._onClick?a._onClick(b):a.onClick(b)},_onClickCrossHairsCB:function(a){this.crosshairs.setDisabled(this._ch);
this._ch=!this._ch;this._setCookie("_ch")},_onMouseOutsideChart:function(a){this.crosshairs&&this.crosshairs.hide()},_onMouseMove:function(a){var b=null;if(this._chartw&&!this._chartw.chart._isResizing){var f=this._chartw.chart,k=this._chartw.chart.plotArea,d=this._chartBoxCoords,g=c.clone(d);g.x=a.pageX-d.x-d.l;g.y=a.pageY-d.y-d.t;if(this._isWithinChart(g)&&f._hasYAxisRendered){++this._onMouseMoveCounter>this._MAX_MOUSE_MOVE_COUNT&&(rc.activity.onActivity(),this._onMouseMoveCounter=0);var g=Math.ceil(a.pageX-
d.x),q=Math.ceil(a.pageY-d.y),n=a.pageY-d.y-f.offsets.t,t=k.height-n,h=f.fromTime;a=f._buildLabelText((f.toTime-h)/k.width*(a.pageX-d.x-f.offsets.firstYAxisOffset)+h,!0);var l=[],v=0;m.forEach(f._yAxisInfo,function(a){if(a.isRendered){var c=f.axes[a.axisName],d=c.opt.decimalPlaces;b=0>c.scaler.bounds.from&&0>c.scaler.bounds.to?n*(c.scaler.bounds.from-c.scaler.bounds.to)/k.height+c.scaler.bounds.to:0>c.scaler.bounds.to?t*(Math.abs(c.scaler.bounds.from)+Math.abs(c.scaler.bounds.to))/k.height+c.scaler.bounds.from:
t*(c.scaler.bounds.to-c.scaler.bounds.from)/k.height+c.scaler.bounds.from;b="Time"===c.opt.unit?O.getTimeUnitValue(b.toFixed()):b.toString().match(/e/)?b.toExponential(d):this._formatValue(b,d,a.unit);l.push(b+" "+(u("touch")?a.unit:""));v++}else l.push("")},this);this.crosshairs.show(g,q,a,l)}else this.crosshairs.hide()}},_setCrosshairsYLabels:function(){m.forEach(this._chartw.chart._yAxisInfo,function(a){if(a.isRendered){var b="",c=this._chartw.chart.getAxis(a.axisName).lOffset;if(a.isChartable)for(var f=
0;f<a.seriesInfo.length;f++){if(a.seriesInfo[f].isRendered){b=a.colors[f];break}}else b="transparent";b=k.create("span",{style:{width:u("touch")?"auto":c-1+"px",color:b},className:u("touch")?"yLabelTouchSpan":"yLabelSpan"});this.crosshairs.addYLabel(a.axisName,b)}},this)},_isWithinChart:function(a){var b=this._chartw.chart.offsets;return b&&this._ch&&a.x>=this._chartw.chart.offsets.firstYAxisOffset&&a.x<=a.w-b.r&&a.y>=b.t&&a.y<=a.h-b.b?!0:!1},_getCookie:function(){var a=n(this._cookieName);a&&(a=
x.parse(a),this._sd="_sd"in a?a._sd:!1,this._sl="_sl"in a?a._sl:!1,this._ch="_ch"in a?a._ch:!0)},_setCookie:function(a){var b=n(this._cookieName),b=b?x.parse(b):{};b[a]=this[a];n(this._cookieName,x.stringify(b),{expires:365,path:"/"})},_hideData:function(){f.set(this._gridContainer.domNode,{width:"1px"})},_showData:function(){var a={width:q.getMarginBox(this._borderContainer.domNode).w+"px"};f.set(this._gridContainer.domNode,a)},_toggleDataGraph:function(){this._isShowingChart?(this._showData(),t.add(this._graphDataButton.iconNode,
"pictureIcon"),t.remove(this._graphDataButton.iconNode,"gridIcon"),this._setButtonLabel(this._graphDataButton,w.tbShowGraph),this._buildGrid(),this._setGridPaneSize()):(this._hideData(),t.add(this._graphDataButton.iconNode,"gridIcon"),t.remove(this._graphDataButton.iconNode,"pictureIcon"),this._setButtonLabel(this._graphDataButton,w.tbShowData));this._isShowingChart=!this._isShowingChart;this._showLegendMenu();if(this._chartw){this._resizeChartConnect.remove();this._resizeChartConnect=null;this._borderContainer.resize();
this._resizeChartConnect=d.after(this._chartCP,"resize",c.hitch(this,this._resizeChart));this._isShowingChart?this._resizeChart():L.update();this._chartBoxCoords=q.position(this._chartDiv,!0);var a=q.getMarginBox(this._chartDiv);this._chartBoxCoords.l=a.l;this._chartBoxCoords.t=a.t}else L.update(),this._borderContainer.resize()},_toggleLegend:function(){null===this._trendLegend&&this._createLegend();this._trendLegend.toggleLegend();this._sl=this._trendLegend.get("isShowing");this._setCookie("_sl");
this._toggleLegendArrow()},_onClickDataGraph:function(a){this._toggleDataGraph();this._sd=!this._isShowingChart;this._setCookie("_sd")},exportCsv:function(){this._buildGrid();this.exportToCSV(this._grid,"trendlog.csv",this.fullTitle)},print:function(){this.updateButtonClicked&&this._stopUpdate();if(this._isShowingChart){var a=this._setupChartPrintStyle(),b=A(".inputContainer");b[0].hidden=!0;this.printWithPreview(this._chartCP.domNode).then(this._revertChartPrintStyle(a[0],a[1]));b[0].hidden=!1}else this._printGrid()},
_printGrid:function(){this._buildGrid();this.printDGrid(this._grid)},onInitSuccess:function(){this._firstLoad&&(this._setTitle(this.title),this._firstLoad=!1);this._printMode&&this._print()},_setChartTheme:function(a){var b=this._chartw.chart;b._isChangingThemes=null!=b._isChangingThemes?!0:!1;a=J.setTheme(a);b.margins.b="normal normal normal 16.8px calibri"===a.axis.font?70:55;b.setTheme(a);b._isChangingThemes&&b.render()},_reload:function(){this.updateButtonClicked&&(this._resumeUpdating=!0);this._stopFetch();
this._isRendered=!1;this._range=[];return this.fetch()},_stopFetch:function(){this._updating&&this._stopUpdating()},stopUpdating:function(){this._stopUpdating()},_stopUpdating:function(){this.updateButtonClicked&&(this._updating=!1,this.update(),this._setButtonLabel(this._updateButton,w.update),this._updateButton.set("checked",!1),this._updateButton.set("disabled",!1))},destroy:function(){window.onbeforeprint=null;window.onafterprint=null;this._retryHandler&&(this._retryHandler.shutdownRetryQueue(),
this._retryHandler.reset(),this._retryHandler.destroyRecursive());rc.xhr.removeGroup("TL");rc.xhr.removeGroup("BTL");m.forEach(this._tooltipIds,function(a){L.remove(a)},this);m.forEach(this._legendMenuConnects,function(a){a.remove();a=null},this);this._legendMenuConnects=[];this._toolbar.destroyRecursive();this._buttons=null;this.crosshairs&&this.crosshairs.destroyRecursive();this.crosshairs=null;this._previousButton.destroyRecursive();this._nextButton.destroyRecursive();this.inherited(arguments)},
_setButtonLabel:function(a,b){a.set("label",b)},_beforePrint:function(){this._isShowingChart&&this._setupChartPrintStyle()},_setupChartPrintStyle:function(){this._resizeChartConnect&&(this._resizeChartConnect.remove(),this._resizeChartConnect=null);var a=f.get(this._chartCP.domNode,"width")+"px",b=f.get(this._chartCP.domNode,"height")+"px";window.onafterprint=c.hitch(this,this._revertChartPrintStyle,a,b);f.set(this._chartCP.domNode,{width:this._chartPrintDimension,height:this._chartPrintDimension});
this._resizeChart(!0);t.add(document.body,"rcPrintTrend");t.add(this._chartCP.domNode,"printCP");"white"!==this._originalChartTheme.toLowerCase()&&this._setChartTheme("white");return[a,b]},_revertChartPrintStyle:function(a,b){window.onafterprint=null;"white"!==this._originalChartTheme.toLowerCase()&&this._setChartTheme(this._originalChartTheme);f.set(this._chartCP.domNode,{width:a,height:b});this._resizeChart();t.remove(document.body,"rcPrintTrend");t.remove(this._chartCP.domNode,"printCP");this._resizeChartConnect=
d.after(this._chartCP,"resize",c.hitch(this,this._resizeChart))}})})},"rc/reliable/_trend/theme":function(){define(["dojo/_base/declare","dojox/charting/Theme","rc/StyleSwitcher"],function(r,p,m){return new (r("rc/reliable/_trend/theme",null,{getTheme:function(l){return m.getActiveStyleSheet()},setTheme:function(l){var h="#CCC",c="#222",g="14.4px";switch(l){case "Gray":case "Kiosk optimized":l="#222";break;case "Black":l="#000";break;case "Black (large type)":g="16.8px";l="#000";break;case "Gray (large type)":g=
"16.8px";l="#222";break;default:l="#fff",h="#222",c="transparent"}return new p({chart:{stroke:null,fill:l},plotarea:{stroke:null,fill:l},series:{outline:{color:c,width:.25}},axis:{stroke:{color:h,width:2},line:{width:1},majorTick:{color:h,width:2,length:5},font:"normal normal normal "+g+" calibri",fontColor:h}})}}))})},"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(r,
p,m,l,h,c){var g=p("dojox.charting.Theme",l,{});r.mixin(g,{defineColors:function(d){d=d||{};var g,a=[],b=d.num||5;if(d.colors){g=d.colors.length;for(var t=0;t<b;t++)a.push(d.colors[t%g]);return a}return d.hue?c.generate(h.fromHsv(d.hue,d.saturation||100,((d.high||90)+(d.low||30))/2),"monochromatic").colors:d.generator?h.Palette.generate(d.base,d.generator).colors:a},generateGradient:function(c,g,a){c=r.delegate(c);c.colors=[{offset:0,color:g},{offset:1,color:a}];return c},generateHslColor:function(c,
g){c=new m(c);var a=c.toHsl(),a=h.fromHsl(a.h,a.s,g);a.a=c.a;return a},generateHslGradient:function(c,n,a,b){c=new m(c);var d=c.toHsl();a=h.fromHsl(d.h,d.s,a);b=h.fromHsl(d.h,d.s,b);a.a=b.a=c.a;return g.generateGradient(n,a,b)}});g.defaultMarkers=l.defaultMarkers;g.defaultColors=l.defaultColors;g.defaultTheme=l.defaultTheme;return g})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),
function(r,p,m,l,h,c){var g=m("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(c){c=c||{};var d=g.defaultTheme;p.forEach("chart plotarea axis grid series marker indicator".split(" "),function(a){this[a]=r.delegate(d[a],c[a])},this);c.seriesThemes&&c.seriesThemes.length?(this.colors=null,this.seriesThemes=c.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(c.colors||g.defaultColors).slice(0));this.markerThemes=null;c.markerThemes&&c.markerThemes.length&&
(this.markerThemes=c.markerThemes.slice(0));this.markers=c.markers?r.clone(c.markers):r.delegate(g.defaultMarkers);this.noGradConv=c.noGradConv;this.noRadialConv=c.noRadialConv;c.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var c=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,
markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});p.forEach("clone clear next skip addMixin post getTick".split(" "),function(d){this.hasOwnProperty(d)&&(c[d]=this[d])},this);return c},clear:function(){this._current=0},next:function(c,g,a){var b=h.merge,d;if(this.colors){d=r.delegate(this.series);var b=r.delegate(this.marker),k=new l(this.colors[this._current%this.colors.length]),q;d.stroke&&d.stroke.color?(d.stroke=r.delegate(d.stroke),
q=new l(d.stroke.color),d.stroke.color=new l(k),d.stroke.color.a=q.a):d.stroke={color:k};b.stroke&&b.stroke.color?(b.stroke=r.delegate(b.stroke),q=new l(b.stroke.color),b.stroke.color=new l(k),b.stroke.color.a=q.a):b.stroke={color:k};!d.fill||d.fill.type?d.fill=k:(q=new l(d.fill),d.fill=new l(k),d.fill.a=q.a);!b.fill||b.fill.type?b.fill=k:(q=new l(b.fill),b.fill=new l(k),b.fill.a=q.a)}else d=this.seriesThemes?b(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,b=this.markerThemes?
b(this.marker,this.markerThemes[this._current%this.markerThemes.length]):d;d={series:d,marker:b,symbol:b&&b.symbol||this._markers[this._current%this._markers.length]};++this._current;g&&(d=this.addMixin(d,c,g));a&&(d=this.post(d,c));return d},skip:function(){++this._current},addMixin:function(c,g,a,b){if(r.isArray(a))p.forEach(a,function(a){c=this.addMixin(c,g,a)},this);else{var d={};"color"in a&&("line"==g||"area"==g?(r.setObject("series.stroke.color",a.color,d),r.setObject("marker.stroke.color",
a.color,d)):r.setObject("series.fill",a.color,d));p.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(b){var c="marker"+b.charAt(0).toUpperCase()+b.substr(1),f=c in a;b in a&&(r.setObject("series."+b,a[b],d),f||r.setObject("marker."+b,a[b],d));f&&r.setObject("marker."+b,a[c],d)});"marker"in a&&(d.symbol=a.marker,d.symbol=a.marker);c=h.merge(c,d)}b&&(c=this.post(c,g));return c},post:function(c,g){var a=c.series.fill,b;return!this.noGradConv&&this.shapeSpaces[a.space]&&
"linear"==a.type&&("bar"==g?b={x1:a.y1,y1:a.x1,x2:a.y2,y2:a.x2}:this.noRadialConv||"shape"!=a.space||"slice"!=g&&"circle"!=g||(b={type:"radial",cx:0,cy:0,r:100}),b)?h.merge(c,{series:{fill:b}}):c},getTick:function(c,g){var a=this.axis.tick,b=c+"Tick",d=h.merge;a?this.axis[b]&&(a=d(a,this.axis[b])):a=this.axis[b];g&&(a?g[b]&&(a=d(a,g[b])):a=g[b]);return a},inspectObjects:function(c){p.forEach("chart plotarea axis grid series marker indicator".split(" "),function(d){c(this[d])},this);this.seriesThemes&&
p.forEach(this.seriesThemes,c);this.markerThemes&&p.forEach(this.markerThemes,c)},reverseFills:function(){this.inspectObjects(function(d){d&&d.fill&&(d.fill=c.reverse(d.fill))})},addMarker:function(c,g){this.markers[c]=g;this._buildMarkerArray()},setMarkers:function(c){this.markers=c;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var c in this.markers)this._markers.push(this.markers[c])}});r.mixin(g,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",
DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",
font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},
shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});
return g})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(r,p,m,l){function h(c,g){if(0>=c)return g[0].color;var d=g.length;if(1<=c)return g[d-1].color;for(var n=0;n<d;++n){var a=g[n];if(a.offset>=c)return n?(d=g[n-1],l.blendColors(new l(d.color),new l(a.color),(c-d.offset)/(a.offset-d.offset))):a.color}return g[d-1].color}r=r.gradutils={};r.getColor=function(c,g){var d;if(c){switch(c.type){case "linear":d=m.rotate(-Math.atan2(c.y2-c.y1,
c.x2-c.x1));var n=m.project(c.x2-c.x1,c.y2-c.y1),a=m.multiplyPoint(n,g),b=m.multiplyPoint(n,c.x1,c.y1),n=m.multiplyPoint(n,c.x2,c.y2),n=m.multiplyPoint(d,n.x-b.x,n.y-b.y).x;d=m.multiplyPoint(d,a.x-b.x,a.y-b.y).x/n;break;case "radial":d=g.x-c.cx,a=g.y-c.cy,d=Math.sqrt(d*d+a*a)/c.r}return h(d,c.colors)}return new l(c||[0,0,0,0])};r.reverse=function(c){if(c)switch(c.type){case "linear":case "radial":if(c=p.delegate(c),c.colors){for(var g=c.colors,d=g.length,n=0,a,b=c.colors=Array(g.length);n<d;++n)a=
g[n],b[n]={offset:1-a.offset,color:a.color};b.sort(function(a,b){return a.offset-b.offset})}}return c};return r})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(r,p,m,l){r=p.getObject("color",!0,r);r.Color=m;r.blend=m.blendColors;r.fromRgb=m.fromRgb;r.fromHex=m.fromHex;r.fromArray=m.fromArray;r.fromString=m.fromString;r.greyscale=l.makeGrey;p.mixin(r,{fromCmy:function(h,c,g){p.isArray(h)?(c=h[1],g=h[2],h=h[0]):p.isObject(h)&&(c=h.m,g=
h.y,h=h.c);return new m({r:Math.round(255*(1-h/100)),g:Math.round(255*(1-c/100)),b:Math.round(255*(1-g/100))})},fromCmyk:function(h,c,g,d){p.isArray(h)?(c=h[1],g=h[2],d=h[3],h=h[0]):p.isObject(h)&&(c=h.m,g=h.y,d=h.b,h=h.c);d/=100;return new m({r:Math.round(255*(1-Math.min(1,h/100*(1-d)+d))),g:Math.round(255*(1-Math.min(1,c/100*(1-d)+d))),b:Math.round(255*(1-Math.min(1,g/100*(1-d)+d)))})},fromHsl:function(h,c,g){p.isArray(h)?(c=h[1],g=h[2],h=h[0]):p.isObject(h)&&(c=h.s,g=h.l,h=h.h);c/=100;for(g/=100;0>
h;)h+=360;for(;360<=h;)h-=360;var d,n;120>h?(d=(120-h)/60,n=h/60,h=0):240>h?(d=0,n=(240-h)/60,h=(h-120)/60):(d=(h-240)/60,n=0,h=(360-h)/60);d=2*c*Math.min(d,1)+(1-c);n=2*c*Math.min(n,1)+(1-c);h=2*c*Math.min(h,1)+(1-c);.5>g?(d*=g,n*=g,h*=g):(d=(1-g)*d+2*g-1,n=(1-g)*n+2*g-1,h=(1-g)*h+2*g-1);return new m({r:Math.round(255*d),g:Math.round(255*n),b:Math.round(255*h)})}});r.fromHsv=function(h,c,g){p.isArray(h)?(c=h[1],g=h[2],h=h[0]):p.isObject(h)&&(c=h.s,g=h.v,h=h.h);360==h&&(h=0);c/=100;g/=100;var d,n,
a;if(0==c)n=a=d=g;else{var b=h/60;h=Math.floor(b);var t=b-h,b=g*(1-c),k=g*(1-c*t);c=g*(1-c*(1-t));switch(h){case 0:d=g;n=c;a=b;break;case 1:d=k;n=g;a=b;break;case 2:d=b;n=g;a=c;break;case 3:d=b;n=k;a=g;break;case 4:d=c;n=b;a=g;break;case 5:d=g,n=b,a=k}}return new m({r:Math.round(255*d),g:Math.round(255*n),b:Math.round(255*a)})};p.extend(m,{toCmy:function(){return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var h,c=this.r/255,
g=this.g/255,d=this.b/255;h=Math.min(1-c,1-g,1-d);return{c:Math.round((1-c-h)/(1-h)*100),m:Math.round((1-g-h)/(1-h)*100),y:Math.round((1-d-h)/(1-h)*100),b:Math.round(100*h)}},toHsl:function(){var h=this.r/255,c=this.g/255,g=this.b/255,d=Math.min(h,g,c),n=Math.max(h,c,g),a=n-d,b=0,t=0,d=(d+n)/2;0<d&&1>d&&(t=a/(.5>d?2*d:2-2*d));0<a&&(n==h&&n!=c&&(b+=(c-g)/a),n==c&&n!=g&&(b+=2+(g-h)/a),n==g&&n!=h&&(b+=4+(h-c)/a),b*=60);return{h:b,s:Math.round(100*t),l:Math.round(100*d)}},toHsv:function(){var h=this.r/
255,c=this.g/255,g=this.b/255,d=Math.max(h,c,g),n=d-Math.min(h,g,c),a=null,b=0==d?0:n/d;0==b?a=0:(a=h==d?60*(c-g)/n:c==d?120+60*(g-h)/n:240+60*(h-c)/n,0>a&&(a+=360));return{h:a,s:Math.round(100*b),v:Math.round(100*d)}}});return r})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(r,p,m,l){var h={};p.setObject("dojo.colors",h);var c=function(c,g,a){0>a&&++a;1<a&&--a;var b=6*a;return 1>b?c+(g-c)*b:1>2*a?g:2>3*a?c+(g-c)*(2/3-a)*6:c};r.colorFromRgb=
m.fromRgb=function(d,g){var a=d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(a){var b=a[2].split(/\s*,\s*/),n=b.length,a=a[1];if("rgb"==a&&3==n||"rgba"==a&&4==n)return a=b[0],"%"==a.charAt(a.length-1)?(a=l.map(b,function(a){return 2.56*parseFloat(a)}),4==n&&(a[3]=b[3]),m.fromArray(a,g)):m.fromArray(b,g);if("hsl"==a&&3==n||"hsla"==a&&4==n){var a=(parseFloat(b[0])%360+360)%360/360,k=parseFloat(b[1])/100,q=parseFloat(b[2])/100,k=.5>=q?q*(k+1):q+k-q*k,q=2*q-k,a=[256*c(q,k,a+1/3),256*c(q,
k,a),256*c(q,k,a-1/3),1];4==n&&(a[3]=b[3]);return m.fromArray(a,g)}}return null};var g=function(c,g,a){c=Number(c);return isNaN(c)?a:c<g?g:c>a?a:c};m.prototype.sanitize=function(){this.r=Math.round(g(this.r,0,255));this.g=Math.round(g(this.g,0,255));this.b=Math.round(g(this.b,0,255));this.a=g(this.a,0,1);return this};h.makeGrey=m.makeGrey=function(c,g){return m.fromArray([c,c,c,g])};p.mixin(m.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,
245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,
107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],
goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,
25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,
69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return m})},"dojox/color/Palette":function(){define(["dojo/_base/lang",
"dojo/_base/array","./_base"],function(r,p,m){function l(c,a,b){var d=new m.Palette;d.colors=[];p.forEach(c.colors,function(c){d.colors.push(new m.Color({r:Math.min(255,Math.max(0,"dr"==a?c.r+b:c.r)),g:Math.min(255,Math.max(0,"dg"==a?c.g+b:c.g)),b:Math.min(255,Math.max(0,"db"==a?c.b+b:c.b)),a:Math.min(1,Math.max(0,"da"==a?c.a+b:c.a))}))});return d}function h(c,a,b){var d=new m.Palette;d.colors=[];p.forEach(c.colors,function(c){c=c.toCmy();d.colors.push(m.fromCmy(Math.min(100,Math.max(0,"dc"==a?c.c+
b:c.c)),Math.min(100,Math.max(0,"dm"==a?c.m+b:c.m)),Math.min(100,Math.max(0,"dy"==a?c.y+b:c.y))))});return d}function c(c,a,b){var d=new m.Palette;d.colors=[];p.forEach(c.colors,function(c){c=c.toCmyk();d.colors.push(m.fromCmyk(Math.min(100,Math.max(0,"dc"==a?c.c+b:c.c)),Math.min(100,Math.max(0,"dm"==a?c.m+b:c.m)),Math.min(100,Math.max(0,"dy"==a?c.y+b:c.y)),Math.min(100,Math.max(0,"dk"==a?c.b+b:c.b))))});return d}function g(c,a,b){var d=new m.Palette;d.colors=[];p.forEach(c.colors,function(c){c=c.toHsl();
d.colors.push(m.fromHsl(("dh"==a?c.h+b:c.h)%360,Math.min(100,Math.max(0,"ds"==a?c.s+b:c.s)),Math.min(100,Math.max(0,"dl"==a?c.l+b:c.l))))});return d}function d(c,a,b){var d=new m.Palette;d.colors=[];p.forEach(c.colors,function(c){c=c.toHsv();d.colors.push(m.fromHsv(("dh"==a?c.h+b:c.h)%360,Math.min(100,Math.max(0,"ds"==a?c.s+b:c.s)),Math.min(100,Math.max(0,"dv"==a?c.v+b:c.v))))});return d}m.Palette=function(c){this.colors=[];c instanceof m.Palette?this.colors=c.colors.slice(0):c instanceof m.Color?
this.colors=[null,null,c,null,null]:r.isArray(c)?this.colors=p.map(c.slice(0),function(a){return r.isString(a)?new m.Color(a):a}):r.isString(c)&&(this.colors=[null,null,new m.Color(c),null,null])};r.extend(m.Palette,{transform:function(n){var a=l;if(n.use){var b=n.use.toLowerCase();0==b.indexOf("hs")?a="l"==b.charAt(2)?g:d:0==b.indexOf("cmy")&&(a="k"==b.charAt(3)?c:h)}else if("dc"in n||"dm"in n||"dy"in n)a="dk"in n?c:h;else if("dh"in n||"ds"in n)a="dv"in n?d:g;var b=this,t;for(t in n)"use"!=t&&(b=
a(b,t,n[t]));return b},clone:function(){return new m.Palette(this)}});r.mixin(m.Palette,{generators:{analogous:function(c){var a=c.high||60,b=c.low||18;c=(r.isString(c.base)?new m.Color(c.base):c.base).toHsv();var d=Math.max(10,95>=c.s?c.s+5:100-(c.s-95)),k=92<=c.v?c.v-9:Math.max(c.v+9,20),g=90>=c.v?Math.max(c.v+5,20):95+Math.ceil((c.v-90)/2),f=[d,1<c.s?c.s-1:21-c.s,c.s,d,d],u=[k,g,c.v,k,g];return new m.Palette(p.map([(c.h+b+360)%360,(c.h+Math.round(b/2)+360)%360,c.h,(c.h-Math.round(a/2)+360)%360,
(c.h-a+360)%360],function(a,b){return m.fromHsv(a,f[b],u[b])}))},monochromatic:function(c){c=r.isString(c.base)?new m.Color(c.base):c.base;var a=c.toHsv(),b=9<a.s-30?a.s-30:a.s+30,d=a.s,k=20<a.v-20?a.v-20:a.v+60,g=20<a.v-50?a.v-50:a.v+30;return new m.Palette([m.fromHsv(a.h,b,100-.8*(100-a.v)),m.fromHsv(a.h,d,g),c,m.fromHsv(a.h,b,g),m.fromHsv(a.h,d,k)])},triadic:function(c){c=r.isString(c.base)?new m.Color(c.base):c.base;var a=c.toHsv(),b=(a.h-157+360)%360,d=90<a.s?a.s-10:a.s+10,k=95<a.s?a.s-5:a.s+
5,g=20<a.v-20?a.v-20:a.v+20,f=20<a.v-30?a.v-30:a.v+30,u=70<a.v-30?a.v-30:a.v+30;return new m.Palette([m.fromHsv((a.h+57+360)%360,20<a.s?a.s-10:a.s+10,a.v),m.fromHsv(a.h,d,f),c,m.fromHsv(b,d,g),m.fromHsv(b,k,u)])},complementary:function(c){c=r.isString(c.base)?new m.Color(c.base):c.base;var a=c.toHsv(),b=360>2*a.h+137?2*a.h+137:Math.floor(a.h/2)-137,d=100-.9*(100-a.s),k=Math.min(100,a.s+20),g=20<a.v?a.v-30:a.v+30;return new m.Palette([m.fromHsv(a.h,Math.max(a.s-10,0),Math.min(100,a.v+30)),m.fromHsv(a.h,
d,g),c,m.fromHsv(b,k,g),m.fromHsv(b,a.s,a.v)])},splitComplementary:function(c){var a=r.isString(c.base)?new m.Color(c.base):c.base,b=c.da||30;c=a.toHsv();var d=360>2*c.h+137?2*c.h+137:Math.floor(c.h/2)-137,k=(d-b+360)%360,b=(d+b)%360,d=100-.9*(100-c.s),g=Math.min(100,c.s+20),f=20<c.v?c.v-30:c.v+30;return new m.Palette([m.fromHsv(k,Math.max(c.s-10,0),Math.min(100,c.v+30)),m.fromHsv(k,d,f),a,m.fromHsv(b,g,f),m.fromHsv(b,c.s,c.v)])},compound:function(c){c=r.isString(c.base)?new m.Color(c.base):c.base;
var a=c.toHsv(),b=360>2*a.h+18?2*a.h+18:Math.floor(a.h/2)-18,d=360>2*a.h+120?2*a.h+120:Math.floor(a.h/2)-120,k=360>2*a.h+99?2*a.h+99:Math.floor(a.h/2)-99,g=80<a.s-10?a.s-10:a.s+10,f=10<a.s-25?a.s-25:a.s+25,u=80<a.v-20?a.v-20:a.v+20,n=Math.max(a.v,20);return new m.Palette([m.fromHsv(b,10<a.s-40?a.s-40:a.s+40,10<a.v-40?a.v-40:a.v+40),m.fromHsv(b,g,u),c,m.fromHsv(d,f,n),m.fromHsv(k,g,u)])},shades:function(c){c=r.isString(c.base)?new m.Color(c.base):c.base;var a=c.toHsv(),b=100==a.s&&0==a.v?0:a.s,d=20<=
a.v-25?a.v-25:a.v+55,k=20<=a.v-75?a.v-75:a.v+5,g=Math.max(a.v-10,20);return new m.Palette([new m.fromHsv(a.h,b,20<a.v-50?a.v-50:a.v+30),new m.fromHsv(a.h,b,d),c,new m.fromHsv(a.h,b,k),new m.fromHsv(a.h,b,g)])}},generate:function(c,a){if(r.isFunction(a))return a({base:c});if(m.Palette.generators[a])return m.Palette.generators[a]({base:c});throw Error("dojox.color.Palette.generate: the specified generator ('"+a+"') does not exist.");}});return m.Palette})},"rc/reliable/_trend/TrendLegend":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!../../nls/all dojo/text!./templates/TrendLegend.html".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return h("rc/reliable/_trend/TrendLegend",[p,r,m],{checkboxClass:"dijitCheckBox",isShowing:!0,rcStrings:a,showCrosshairs:!0,templateString:b,trendLines:null,buildRendering:function(){this.inherited(arguments);g.set(this.crosshairsLabel,"for",this.crosshairsCheckbox.id);this._createCheckboxes();this.isShowing?this.show():this.hide()},hide:function(){this.isShowing=!1;d.add(this.domNode,"hidden")},onCheckboxChange:function(){},show:function(){this.isShowing=!0;d.remove(this.domNode,
"hidden")},toggleLegend:function(){this.isShowing?this.hide():this.show()},_createCheckboxes:function(){for(var a=null,b=null,d=null,f=0;f<this.trendLines.length;++f)d=this.trendLines[f],b=n.create("div",{"class":"trend-legend-option"},this.lineOptions,"last"),a=new l({baseClass:this.checkboxClass,value:f,checked:!0,onChange:c.hitch(this,this._onCheckboxChange,f,d.yAxisInfo)}),n.place(a.domNode,b,"first"),n.create("label",{"for":a.id,innerHTML:d.label,style:{color:d.colour}},b,"last")},_getIsShowingAttr:function(){return!d.contains(this.domNode,
"hidden")},_onCheckboxChange:function(a,b,c){this.onCheckboxChange(a,b,c)},_onCrosshairChange:function(a){this.onCheckboxChange(-1,null,a)}})})},"rc/widget/charting/Chart2DTrendWidget":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare","./Chart2DTrend"],function(r,p,m,l){return m("rc/widget/charting/Chart2DTrendWidget",[p,r],{chart:null,chartParams:null,templateString:'\x3cdiv style\x3d"width:100%;height:100%"\x3e\x3cdiv data-dojo-attach-point\x3d"containerNode" style\x3d"width:100%;height:100%"\x3e\x3c/div\x3e\x3c/div\x3e',
postCreate:function(){this.chart=new l(this.containerNode,this.chartParams);this.inherited(arguments)},destroy:function(){this.chart.destroy();this.inherited(arguments)}})})},"rc/widget/charting/Chart2DTrend":function(){define("dijit/focus dijit/form/Button dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/date/locale dojo/dom-class dojo/dom-construct dojo/dom-style dojo/Evented dojo/has dojo/i18n!rc/nls/all dojo/number dojo/on dojo/query dojo/topic dojox/charting/axis2d/common dojox/charting/Chart dojox/charting/SimpleTheme dojox/gfx dojox/gfx/renderer dojox/gfx/shape dojox/lang/functional dojox/main ./axis2dDefault ./Slider ../TrendDateTextBox ../../_base/tooltip ../../_base/util ../../date dojo/sniff dojox/charting/plot2d/Default".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L){function M(a,b){a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max));return a||b}function O(a,b){var c={},f={};h.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(f[a.hAxis]=M(f[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(f[a.vAxis]=M(f[a.vAxis],{min:b.vmin,max:b.vmax}))});h.forEach(a,function(a){var d=c[a.name];if(a.hAxis){var k=f[a.hAxis];d.hmin=k.min;d.hmax=k.max}a.vAxis&&(k=f[a.vAxis],d.vmin=
k.min,d.vmax=k.max);a.initializeScalers(b,d)})}var P=D.lambda("item.purgeGroup()");return c("rc/widget/charting/Chart2DTrend",[v,k],{inputsContainer:null,dateSelectorTextBox:null,sampleSizeTextBox:null,slider:null,_labelBottomCoord:-1,_isRendered:!1,_isResizing:!1,_hasYAxisRendered:!1,_scaleButtons:null,_yAxisInfo:null,_pConnects:[],_numYAxes:0,_traces:null,X_AXIS_LABEL_WIDTH:50,EXPONENTIAL_LIMIT:22,_scaleTT:null,_sliderTT:null,_dateTextBoxTT:null,_sampleSizeTT:null,_isChangingThemes:null,_range:null,
timeLabelFunc:null,_defaultRange:[1,100],_sampleSize:0,_fetchForward:!0,_fetchLatest:!1,trend:null,_archiveConnects:null,_monthNames:null,constructor:function(a,b){this._scaleTT=[];this._sliderTT=[];this._dateTextBoxTT=[];this._sampleSizeTT=[];this.trend=b.trend;this._range=b.range?b.range:[this.trend.io.dateSelectedFirst,this.trend.io.dateSelectedLast];this.timeLabelFunc=b.timeLabelFunc;this._traces=b.traces;this._sampleSize=b.sampleSize;this._archiveConnects=[];this._monthNames=n.getNames("months",
"abbr")},destroy:function(){this._clearScaleTooltip();this._clearSliderTooltip();this._clearSampleSizeTooltip();this._clearDateTextBoxTooltip();this._traces=null;h.forEach(this._pConnects,function(a){a.remove()},this);this._pConnects=null;h.forEach(this._scaleButtons,function(a,c){var f=this._yAxisInfo[c].axisName;a.plus.destroyRecursive();l.remove(f+"+");a.minus.destroyRecursive();l.remove(f+"-");b.destroy(a.wrapper);a=a.wrapper=null},this);this._scaleButtons=null;this._disconnectArchiveControls();
this._yAxisInfo=null;this.inherited(arguments)},renderUpdate:function(a){this.totalLabelOffset=0;this._updateSeries();this._isResizing=!0;this.render();this._isResizing=!1;this._updateArchiveControls(a);this.slider.setSliderInfo(a)},updateTraces:function(a){var b;if(null!=this._traces){var c=g.hitch(this,function(a){if(void 0===a.unit||""==a.unit)for(b=0;b<this._traces.length;b++)if(this._traces[b].mnemonic==a.mnemonic){a.unit=this._traces[b].unit;break}});h.forEach(a,c);c=null}this._traces=a},_renderXScale:function(){this._updateXAxis();
this.render()},renderAll:function(){this._buildYAxis();this._buildXAxis();this.render();this._postRender()},renderLegendToggle:function(){this._buildYAxis();this._updateXAxis();this.render();this._postRender()},_postRender:function(){this._renderWidgets();this._buildConnections();this._isRendered=!0},_renderWidgets:function(){this._buildYAxisComponents();this._buildInputComponents();this._buildArchiveLine();this._enableSlider()},render:function(){this.totalLabelOffset=0;this._isResizing&&this._isChangingThemes?
(this._renderThemeChange(),this.inherited(arguments),this._buildConnections(),this._renderWidgets(),this._isChangingThemes=!1):this._isResizing?(this._updateXAxis(),this.inherited(arguments),this._renderWidgets()):(this.inherited(arguments),this.resize())},_renderThemeChange:function(){this._retainYScaleInfo();this._buildYAxis();this._updateXAxis()},_enableSlider:function(){this.slider.disabled=!1;this._hasYAxisRendered||(this.slider.disabled=!0)},fullRender:function(){this.fullGeometry();var a=this.offsets,
c=this.dim,f=Math.max(0,c.width-a.l-a.r),d=Math.max(0,c.height-a.t-a.b);h.forEach(this.series,P);D.forIn(this.axes,P);h.forEach(this.stack,P);var k=this.surface.children;if(B.dispose)for(var g=0;g<k.length;++g)B.dispose(k[g]);this.chartTitle&&this.chartTitle.tagName&&b.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;a.l=a.firstYAxisOffset;this._renderChartBackground(c,a);this._renderPlotBackground(c,a,f,d);this._nativeClip||this._renderChartBackground(c,a);this.title&&(f="canvas"==
C.renderer&&this.htmlLabels||!q("opera")&&this.htmlLabels?"html":"gfx",d=C.normalizedLength(C.splitFontString(this.titleFont).size),this.chartTitle=y.createText[f](this,this.surface,c.width/2,"top"==this.titlePos?d+this.margins.t:c.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor));var f=[],u;for(u in this.axes)this.axes[u].name&&(d=this.axes[u],"x"===d.name?f.unshift(d):f[d.opt.order-1]=d);h.forEach(f,function(b){b.render(c,a)},this);D.foldr(this.stack,function(b,f){return f.render(c,
a),0},0);this._makeClean();this.axes.x._cachedLabelHeight&&(this._labelBottomCoord=this.xCoords.yStartCoord+this.axes.x._cachedLabelHeight+10,this.trend&&this.trend.crosshairs&&this.trend.crosshairs.repositionLabelTop(this._labelBottomCoord));return this},_updateXAxis:function(){var a=0,b=0,c=this.axes.x,f={minorTicks:!1,microTicks:!1,minorLabels:!1,min:this._traces[0].hMin,max:this._traces[0].hMax+Math.floor(.01*(this._traces[0].hMax-this._traces[0].hMin))};c.opt.from&&(f.from=c.opt.from);c.opt.to&&
(f.to=c.opt.to);c.scale&&(a=c.scale,b=c.offset);this.removeAxis("x");c=new H(this,f);a&&(c.scale=a,c.offset=b);c.name="x";this.axes.x=c;this.dirty=c.dirty=!0;return this},fullGeometry:function(){var a=D.lambda("item.clear()"),b=g.getObject("charting",!0,F),c;this._makeDirty();h.forEach(this.stack,a);this.theme||this.setTheme(new A);h.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!b.plot2d||!b.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");
var c=new b.plot2d.Default(this,{});c.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(c)}this.stack[this.plots[a.plot]].addSeries(a)},this);h.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},this);c=this.dim=this.surface.getDimensions();c.width=C.normalizedLength(c.width);c.height=C.normalizedLength(c.height);D.forIn(this.axes,a);O(this.stack,c);var f=this.offsets={l:0,r:0,t:7,b:35,firstYAxisOffset:0},d=0,k=c.width;D.forIn(this.axes,function(a){a.vertical?(a.offsets=
a.getOffsets(),a.lOffset=a.offsets.l,f.firstYAxisOffset+=a.offsets.l,d=f.firstYAxisOffset):(D.forIn(a.getOffsets(),function(a,b){f[b]+=a}),f.r/=2,k=c.width-d-f.r,0<this._numYAxes&&this._calcXTicks(k))},this);f.b+=this.margins.b;f.t+=this.margins.t;if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||
this.theme.chart.titleFontColor||"black";var q=C.normalizedLength(C.splitFontString(this.titleFont).size);f["top"==this.titlePos?"t":"b"]+=q+this.titleGap}D.forIn(this.margins,function(a,b){f[b]+=a});this.plotArea={width:k,height:c.height-f.t-f.b};D.forIn(this.axes,a);O(this.stack,this.plotArea);return this},_buildXAxis:function(){this.addAxis("x",{minorTicks:!1,microTicks:!1,minorLabels:!1,min:this._traces[0].hMin,max:this._traces[0].hMax,type:H})},_calcXTicks:function(a){var b,c,f=this.getAxis("x").opt;
this.xCoords?(c=f.min+this.slider.get("offset"),b=(f.max-this.axes.x.opt.min)/this.slider.get("scale")+c):(c=f.min,b=f.max);c>b&&(c=f.min);this.fromTime=c;this.toTime=b;this.timeSpan||(this.timeSpan=b-c);this.slider&&this.slider.set("range",f.max-f.min);a=Math.floor(a);a=(b-c)/1E3/(a/this.X_AXIS_LABEL_WIDTH);a=this._filterTTI(a);c=c/1E3/a|0;c++;c*=a;c*=1E3;a*=1E3;b=[];for(var d=c;d<this.toTime;)b.push({value:d,text:this._buildLabelText(d)}),d+=a;f.labels=b;f.majorStart=c;f.majorTickStep=a},_filterTTI:function(a){if(30>
a)a=1>a?1:2>a?2:5>a?5:10>a?10:20>a?20:30;else if(1800>a)a=60>a?60:120>a?120:300>a?300:600>a?600:1200>a?1200:1800;else if(43200>a)a=3600>a?3600:7200>a?7200:10800>a?10800:21600>a?21600:43200;else{var b=a;for(a=86400;b>a;)a*=2}return a},_buildConnections:function(){h.forEach(this._pConnects,function(a){a.remove()},this);this._pConnects=[];h.forEach(this._scaleButtons,function(a){this._pConnects.push(w(a.plus,"click",g.hitch(this,this._onClickScaleYAxis)));this._pConnects.push(w(a.minus,"click",g.hitch(this,
this._onClickScaleYAxis)))},this);q("touch")&&(this._pConnects.push(w(this.node,"gestureend",g.hitch(this,"_gestureEnd"))),this._pConnects.push(w(this.node,"touchend",g.hitch(this,"_touchEnd"))),this._pConnects.push(w(document.body,"touchmove",g.hitch(this,"_touchMove"))));h.forEach(this.stack,function(a){a._reconnectEvents=function(a){a=this._eventSeries[a];a[0]&&h.forEach(a,this._connectEvents,this)}},this)},_gestureEnd:function(a){a.preventDefault();a.stopPropagation();1<a.scale?h.forEach(this._scaleButtons,
function(a){this.scaleYAxis(a.plus.id)},this):h.forEach(this._scaleButtons,function(a){this.scaleYAxis(a.minus.id)},this)},_touchMove:function(a){!a.touches[0]||"rc home"!=a.touches[0].target.className&&""!=a.touches[0].target.className||(a.stopPropagation(),a.preventDefault())},_touchEnd:function(a){1<a.touches.length&&a.preventDefault()},_buildLabelText:function(a,b){var c=this._formatDate(a),f,d,k="vml"==E?"\r\n":"\x3cbr\x3e";b?(f=[c[2],c[1],c[3]].join(" "),c=c[4],f=c+", "+f):(f=[c[2],c[1]].join(" "),
d=c[3],c=c[4].slice(0,5),f=c+k+f+k+d);return f},_formatDate:function(a){if(0===a)return"";var b=L.toUTC(new Date(a));a=(new Date(a)).toUTCString().split(/,*\s+/);a[2]=this._monthNames[b.getMonth()];return a},onSlideComplete:function(a,b){this._setAxisWindow("x",a,b);this.emit("slideComplete",a,b)},_buildArchiveLine:function(){this._isRendered||(this.flybyArchive=b.create("div",{className:"flyByArchive"},this.node.firstChild,"after"));var a=this.xCoords.xStartCoord+this._calcXCoordinate(this._traces[0].archiveIdxStart),
c=this.xCoords.xStartCoord+this._calcXCoordinate(this._traces[0].archiveIdxEnd);t.set(this.flybyArchive,{left:a+"px",top:this.xCoords.yStartCoord-2+"px",width:c-a+"px"})},_floorNextDay:function(a){var b=new Date;if(a instanceof Date)b=a;else try{b=new Date(a)}catch(R){console.error(this.declaredClass+" - _floorDate(): Invalid Date",a)}b.setDate(b.getDate()+1);b.setHours(0,0,0,1);return b},_buildInputComponents:function(){var c=this._getDateLimits();if(!this._isRendered){var d=this.trend.io.a.enabled;
null===this.inputsContainer&&(this.inputsContainer=b.create("div",{className:"inputContainer"},this.node,"first"));var k=[L.formatUTCDateToAny(c[0],"yyyy-MM-dd"),L.formatUTCDateToAny(c[1],"yyyy-MM-dd")],q=[L.formatUTCDateToAny(c[0],"dd/MM/yyyy"),L.formatUTCDateToAny(c[1],"dd/MM/yyyy")];this.dateSelectorTextBox=new G({value:c[1],constraints:{datePattern:"dd/MM/yyyy",min:k[0],max:k[1]},promptMessage:"Start date for display. For example: "+q[0]+" using the format: dd/mm/yyyy",tooltipPosition:["after"],
rangeMessage:"Enter a date between "+q[0]+" and "+q[1],onClick:g.hitch(this,function(){this.trend.stopUpdating()}),onKeyPress:g.hitch(this,function(a){if(13==a.keyCode)this.dateSelectorTextBox.onChange(this.dateSelectorTextBox.attr("value"))})},b.create("div",{},this.inputsContainer,"last"));a.add(this.dateSelectorTextBox.domNode,"rcTrendInput");this._setDateTextBoxTooltip(this.dateSelectorTextBox.domNode);this.sampleSizeTextBox=new m({value:this._sampleSize,constraints:{min:10,max:2E3,places:0},
maxLength:4,required:!0,promptMessage:f.sampleSizePrompt,tooltipPosition:["after"],pattern:"\\d+",onClick:g.hitch(this,function(){this.trend.stopUpdating()}),onKeyPress:function(a){13==a.keyCode&&this.isValid(!0)&&this.set("value",this.get("value"))},validator:g.hitch(this,function(a,b){return a>=b.min&&a<=b.max}),invalidMessage:f.invalidSampleSize},b.create("div",{},this.inputsContainer,"last"));a.add(this.sampleSizeTextBox.domNode,"rcTrendInput");this._setSampleSizeTooltip(this.sampleSizeTextBox.domNode);
this._connectArchiveControls();this.slider&&(this.slider.destroyRecursive(),this._clearSliderTooltip());this.slider=new J({_coords:this.xCoords,range:[this.trend.io.dateSelectedFirst,this.trend.io.dateSelectedLast],_parentWidget:this,value:[this.trend.io.datam.times[0],this.trend.io.datam.times[this.trend.io.datam.times.length-1]]},b.create("div",{},this.inputsContainer,"last"));a.add(this.slider.domNode,"rcTrendSlider");this._setSliderTooltip(this.slider.domNode);d||(a.add(this.sampleSizeTextBox.domNode,
"rcTrendHidden"),a.add(this.dateSelectorTextBox.domNode,"rcTrendHidden"));x.subscribe("rcAlarmShow",g.hitch(this,this._resizeInputComponents))}this._resizeInputComponents()},_onChangeSampleSize:function(a){this.sampleSizeTextBox.isValid(!0)&&(r.focus(d.body()),this.onChangeSampleSize(a))},onChangeSampleSize:function(a){this.emit("changeSampleSize",a)},_connectArchiveControls:function(){this._disconnectArchiveControls();this._archiveConnects.push(w(this.dateSelectorTextBox,"change",g.hitch(this,this.onChangeDateSelector)));
this._archiveConnects.push(w(this.sampleSizeTextBox,"change",g.hitch(this,this._onChangeSampleSize)))},_disconnectArchiveControls:function(){h.forEach(this._archiveConnects,function(a){a.remove()},this);this._archiveConnects=[]},_getDateLimits:function(){var a=this.trend.io.getDateRange();return[new Date(a[0]),new Date(a[1])]},_resizeInputComponents:function(){var a,b,c;b=this.axes.x._cachedLabelHeight;-1!=this._labelBottomCoord?(a=this._labelBottomCoord,a=a+b/3+4):a=this.xCoords.yStartCoord+80;b=
Math.max(this.xCoords.span,400);c=z(".rcAlarmNotices");c.length&&-1==c[0].className.indexOf("rcHidden")&&(b-=c[0].clientWidth+8);t.set(this.inputsContainer,{position:"absolute",left:this.xCoords.xStartCoord+"px",top:a+"px",width:b+"px",zIndex:999})},_calcXCoordinate:function(a){var b;b=0;0<=a&&(b=this._traces[0].dateSelectedLast-this._traces[0].dateSelectedFirst,a=this._traces[0].times[a]-this._traces[0].dateSelectedFirst,b=a/b*this.xCoords.span);return b},_setScaleTooltip:function(a){this._scaleTT.push(I.add(a,
this.getScaleTooltip(),this.getScaleTooltipCss(),"tl"))},getScaleTooltipCss:function(){return{}},getScaleTooltip:function(){return f.ttUnitScaleControls},_clearScaleTooltip:function(){h.forEach(this._scaleTT,function(a){I.remove(a)},this);this._scaleTT=[]},_retainYScaleInfo:function(){for(var a in this.axes)if(this.axes[a].vertical){var b=this.axes[a];b.scale?this[b.name+"OldScale"]=b.scale:this[b.name+"OldScale"]&&delete this[b.name+"OldScale"]}},removeYAxis:function(a){this.removeAxis(a.axisName);
this.removePlot(a.plotName);h.forEach(a.seriesInfo,function(a){this.removeSeries(a.seriesName)},this)},_setDateTextBoxTooltip:function(a){this._dateTextBoxTT.push(I.add(a,this.getDatePickerTooltip(),this.getDatePickerTooltipCss(),"tl"))},getDatePickerTooltip:function(){return f.ttDateTextBox},getDatePickerTooltipCss:function(){return{}},_clearDateTextBoxTooltip:function(){h.forEach(this._dateTextBox,function(a){I.remove(a)},this);this._dateTextBoxTT=[]},_setSampleSizeTooltip:function(a){this._sampleSizeTT.push(I.add(a,
this.getSampleSizeTooltip(),this.getSampleSizeTooltipCss(),"tl"))},getSampleSizeTooltip:function(){return f.ttSampleSize},getSampleSizeTooltipCss:function(){return{}},_clearSampleSizeTooltip:function(){h.forEach(this._sampleSizeTT,function(a){I.remove(a)},this);this._sampleSizeTT=[]},_setSliderTooltip:function(a){this._sliderTT.push(I.add(a,this.getSliderTooltip(),"tl"))},getSliderTooltip:function(){return f.ttZoomBar},_clearSliderTooltip:function(){h.forEach(this._sliderTT,function(a){I.remove(a)},
this);this._sliderTT=[]},_buildYAxisComponents:function(){var a,c,f,d=function(a){27>=a&&(a=30);return a};this._isResizing?h.forEach(this._scaleButtons,function(b,k){var g=this._yAxisInfo[k];g.isRendered&&(c=g.axisName,a=this[c+"Coords"],g=f=this.getAxis(c).lOffset,g=d(g),t.set(b.wrapper,{left:a.xStartCoord-g+"px",top:a.yStartCoord+19+"px"}))},this):(this._scaleButtons&&(h.forEach(this._scaleButtons,function(a,f){c=this._yAxisInfo[f].axisName;a.plus.destroyRecursive();a.minus.destroyRecursive();b.destroy(a.wrapper);
a=null},this),this._clearScaleTooltip()),this._scaleButtons=[],h.forEach(this._yAxisInfo,function(k){if(k.isRendered){c=k.axisName;a=c+"Coords"in this?this[c+"Coords"]:{};f=this.getAxis(c).offsets.l;var g=d(f),q=b.create("div",{className:"scaleButtons unselectable",style:{position:"absolute",width:"0",height:"0",left:a.xStartCoord-g+"px",top:a.yStartCoord+19+"px",cssFloat:"left"}});b.create("div",{style:{width:"3.5em",height:"1em",lineHeight:"1",fontSize:"92%",color:k.isShared?null:k.colors[0],margin:"3px 0 0 3px"},
innerHTML:k.unit},q);var g=new p({iconClass:"rcIcon plusIcon",showLabel:!1,id:c+"+",value:c+"+"},b.create("div",null,b.create("p",{className:"scaleButton"},q))),u=new p({iconClass:"rcIcon minusIcon",showLabel:!1,id:c+"-",value:c+"-"},b.create("div",null,b.create("p",{className:"scaleButton"},q)));this.node.insertBefore(q,this.node.firstChild);k.isChartable||(g.set("disabled",!0),u.set("disabled",!0));var n=b.create("div",{className:"mpwAxisLegendWrapper",id:"legendWrapper1"},q);h.forEach(k.colors,
function(a,c){4==c&&(n=b.create("div",{className:"mpwAxisLegendWrapper",id:"legendWrapper2"},q));b.create("div",{className:"mpwAxisLegend",style:{color:a},innerHTML:k.letters[c]},n)},this);this._scaleButtons.push({wrapper:q,plus:g,minus:u,pointIndexes:k.pointIndexes,isShared:k.isShared})}},this),this._scaleButtons&&this._scaleButtons.length&&this._setScaleTooltip(this._scaleButtons[0].plus.domNode))},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();
this.stack.splice(b,1);D.forIn(this.plots,function(a,c,f){a>b&&(f[c]=a-1)});var c=h.filter(this.series,function(b){return b.plot!=a});c.length<this.series.length&&(h.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},h.forEach(c,function(a,b){this.runs[a.name]=b},this),this.series=c);this.dirty=!0}return this},_buildYAxisInfo:function(){for(var a,b={},c=[],f=null,d=0;d<this._traces.length;d++){a=this._traces[d];for(var k=d+1;k<this._traces.length;k++)b=this._traces[k],b.shared||
b.unit!==a.unit||b.isChartable!==a.isChartable||b.isBinary!==a.isBinary&&b.isMulti!==a.isMulti||(f||(f={unit:"",pointIndexes:[],axisName:"",seriesInfo:[],plotName:"",colors:[],numAxesShared:0,isShared:!0,isRendered:!0,isChartable:!0,isBinary:a.isBinary,isMulti:a.isMulti}),a.shared||(f.pointIndexes.push(d),f.seriesInfo.push({seriesName:"",isRendered:!0}),f.numAxesShared++,f.unit=a.unit),b.shared=!0,a.shared=!0,f.pointIndexes.push(k),f.seriesInfo.push({seriesName:"",isRendered:!0}),f.numAxesShared++);
null!=f?(c.push(g.clone(f)),f=null):!1===a.shared&&c.push({unit:a.unit,pointIndexes:[d],axisName:"",seriesInfo:[{seriesName:"",isRendered:!0}],plotName:"",colors:[],numAxesShared:1,isShared:!1,isRendered:!0,isChartable:!0,isBinary:a.isBinary,isMulti:a.isMulti})}return c},_buildYAxis:function(){var a=0,b,c,f,d=this.theme.axis.stroke.color,k,q,u,n,l;this._numYAxes=0;this._hasYAxisRendered=!1;this._yAxisInfo||(this._yAxisInfo=this._buildYAxisInfo());for(var t=this._yAxisInfo.length-1;0<=t;t--)if(u=q=
l=null,f=this._yAxisInfo[t],f.isRendered){this._hasYAxisRendered=!0;f.axisName=c="y"+(t+1);f.axisIndex=t;k=this._traces[f.pointIndexes[0]];n=k.unit;this.addAxis(c,{vertical:!0,isBinary:f.isBinary,isMulti:f.isMulti,fixLower:f.isBinary||f.isMulti?"major":"none",offsetMargin:a++,stroke:{color:d,width:2},minorTicks:!1,minorLabels:!1,majorTick:{color:d,width:2,length:6},unit:n,decimalPlaces:k.decimalPlaces,order:a,timeLabelFunc:this.timeLabelFunc,labelFunc:g.hitch(this,function(a,b,c){return a=this._formatYAxisValue(a,
b,c,this.decimalPlaces,this.unit)}),type:H});this._numYAxes++;f.plotName=f.isBinary?"binary plot":f.isMulti?"multi plot":n+" plot";this.addPlot(f.plotName,{type:"Default",lines:!0,vAxis:c});var v=[],m=[],w=[];h.forEach(f.pointIndexes,function(a,c){f.isChartable=this._traces[a].isChartable;var d=this._traces[a];b=d.mnemonic+"series";var k={},k=f.isChartable?{color:d.color,width:2}:{color:"transparent",width:0};f.seriesInfo[c].isRendered?this.addSeries(b,d.data,{stroke:k,plot:f.plotName}):this.removeSeries(b);
f.seriesInfo[c].isRendered?(v.push({seriesName:b,isRendered:!0}),l||(l=d.color),q=null==q?d.min:Math.min(d.min,q),u=null==u?d.max:Math.max(d.max,u)):v.push({seriesName:b,isRendered:!1});m.push(d.color);w.push(d.letter)},this);f.seriesInfo=v;f.colors=m;f.letters=w;c=this.axes[c];f.isChartable?(c.opt.fontColor=l,d="transparent"):(u=q=0,c.opt.fontColor="transparent");f.axisName+"OldScale"in this&&(c.scale=this[f.axisName+"OldScale"]);c.opt.seriesMin=q;c.opt.seriesMax=u;c.opt.canScale=this._canScale(f)}},
_canScale:function(a){return 1!=a.numAxesShared||this._traces[a.pointIndexes[0]].min!=this._traces[a.pointIndexes[0]].max&&a.isChartable?!0:!1},_formatYAxisValue:function(a,b,c,f,d){return a.match(/e/)?b.toExponential(f):0==f?b.toFixed():u.format(a,{places:1,round:-1})},_updateSeries:function(){for(var a,b,c=this._yAxisInfo.length-1;0<=c;c--){b=a=null;var f=this._yAxisInfo[c];h.forEach(f.pointIndexes,function(c,d){f.seriesInfo[d].isRendered&&(a=null==a?this._traces[c].min:Math.min(this._traces[c].min,
a),b=null==b?this._traces[c].max:Math.max(this._traces[c].max,b));this.updateSeries(f.seriesInfo[d].seriesName,this._traces[c].data)},this);if(f.isRendered){var d=this.axes[f.axisName];d.opt.canScale=this._canScale(f);d.opt.seriesMin=a;d.opt.seriesMax=b;d.opt.totalLabelOffset=null}}},_calculateYAxisTickStep:function(a,b){if(0==a)return 1;var c,f;this.dim&&this.dim.height?c=this.dim.height/75:this.node.clientHeight&&(c=this.node.clientHeight/75);3>c&&(c=3);f=a/c;b&&(f/=b);c=[.01,.02,.05,.1,.2,.25,
.5,1,2,5,10,15,20,25,50,100,150,200,250,500,1E3,2500,5E3,7500,1E4,2E4,4E4,8E4,1E5,25E4,5E5,75E4];for(var d=6;d<this.EXPONENTIAL_LIMIT;d++)c.push(Math.pow(10,d));var k;if(-1<h.indexOf(f,c))k=f;else if(f<=c[0])k=c[0];else for(d=0;d<c.length;d++)if(d<c.length-1){if(f>=c[d]&&f<=c[d+1]){k=f-c[d]<c[d+1]-f?c[d]:c[d+1];break}}else k=c[d];return k},_onClickScaleYAxis:function(a){this.scaleYAxis(a.target.value);K.stopEvent(a)},scaleYAxis:function(a){var b=a.slice(0,a.length-1);a=a.charAt(a.length-1);var c=
15;q("touch")&&(c=5);if(b){var f=this.axes[b];if(f.opt.canScale){var d=this._toFixed(f.getWindowScale());this._toFixed(f.inOffset);d="-"==a?d/1.3:1.3*d;d<c&&(this._scaleYValue=this._toFixed(d),this._setAxisWindow(b,d,d))}}},_setAxisWindow:function(a,b,c){this.setAxisWindow(a,b,c);"x"==a?this._renderXScale():this.render()},_toFixed:function(a){return g.isArray(a)?[parseFloat(a[0].toFixed(2)),parseFloat(a[1].toFixed(2))]:parseFloat(a.toFixed(2))},setDateLast:function(a){this._fetchForward=!1;this.dateSelectorTextBox.set("value",
new Date(a))},setDateFirst:function(a){this._fetchForward=!0;this.dateSelectorTextBox.set("value",new Date(a))},setDateGetLatest:function(){this._fetchLatest=!0;this.onChangeDateSelector(new Date)},onChangeDateSelector:function(a){r.focus(d.body());var b=this.slider.getSliderInfo();null===a&&(a=new Date(b.current.first));this._fetchLatest?(this.trend.io.dateSelectedFirst=0,this.trend.io.dateSelectedLast=0):(b=new Date(a),b=b.getTime()-L.getTimezoneOffsetMsec(b),b-=b%this.slider.MIN_INCREMENT,this._fetchForward?
(this.trend.io.dateSelectedFirst=b,this.trend.io.dateSelectedLast=0):(this.trend.io.dateSelectedFirst=0,this.trend.io.dateSelectedLast=b));this._fetchForward=!0;this._fetchLatest=!1;this.emit("changeDateSelector",a)},_updateArchiveControls:function(a){var b;b=a.current.first;b=a.current.last==a.total.last?new Date(a.current.last):new Date(b+L.getTimezoneOffsetMsec(b));var c=this._getDateLimits()[1];c.setHours(23,59,59,99);c=new Date(c.getTime()+L.getTimezoneOffsetMsec(c));this.dateSelectorTextBox.constraints.max=
L.clearTime(c);this._disconnectArchiveControls();this.dateSelectorTextBox.set("value",b);this.sampleSizeTextBox.set("value",a.sample.count);setTimeout(g.hitch(this,"_connectArchiveControls"),10)}})})},"dojox/charting/Chart":function(){define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){function x(a,b){a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max));return a||b}function y(a,b){var c={},f={};m.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(f[a.hAxis]=x(f[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(f[a.vAxis]=x(f[a.vAxis],{min:b.vmin,max:b.vmax}))});m.forEach(a,function(a){var d=c[a.name];if(a.hAxis){var k=f[a.hAxis];d.hmin=k.min;d.hmax=k.max}a.vAxis&&(k=f[a.vAxis],d.vmin=k.min,d.vmax=k.max);a.initializeScalers(b,
d)})}var v=p.getObject("charting",!0,r),A=z.lambda("item.clear()"),C=z.lambda("item.purgeGroup()"),E=z.lambda("item.destroy()"),B=z.lambda("item.dirty \x3d false"),D=z.lambda("item.dirty \x3d true"),F=z.lambda("item.name"),H={l:10,t:10,r:10,b:10};r=l(a("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(a,b){b||(b={});this.margins=b.margins||H;this._customMargins=!!b.margins;this.stroke=b.stroke;this.fill=b.fill;this.delayInMs=b.delayInMs||200;this.title=b.title;
this.titleGap=b.titleGap;this.titlePos=b.titlePos;this.titleFont=b.titleFont;this.titleFontColor=b.titleFontColor;this.titleAlign=b.titleAlign;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in b&&(this.htmlLabels=b.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=c.byId(a);var f=g.getMarginBox(a);this.surface=u.createSurface(this.node,f.w||400,f.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},
destroy:function(){m.forEach(this.series,E);m.forEach(this.stack,E);z.forIn(this.axes,E);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&d.destroy(this.chartTitle)},getCoords:function(){var a=this.node,b=h.getComputedStyle(a),b=g.getMarginBox(a,b),a=g.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this._customMargins||(this.margins=this.theme.chart.margins||H);this.dirty=!0;return this},addAxis:function(a,b){var c;c=b&&b.type||"Default";if("string"==
typeof c){if(!v.axis2d||!v.axis2d[c])throw Error("Can't find axis: "+c+" - Check require() dependencies.");c=new v.axis2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=c;this.dirty=!0;return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){a in this.axes&&(this.axes[a].destroy(),delete this.axes[a],this.dirty=!0);return this},addPlot:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!v.plot2d||!v.plot2d[c])throw Error("Can't find plot: "+
c+" - didn't you forget to dojo.require() it?");c=new v.plot2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=this.stack.length,this.stack.push(c));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);z.forIn(this.plots,function(a,c,f){a>b&&
(f[c]=a-1)});var c=m.filter(this.series,function(b){return b.plot!=a});c.length<this.series.length&&(m.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},m.forEach(c,function(a,b){this.runs[a.plot]=b},this),this.series=c);this.dirty=!0}return this},getPlotOrder:function(){return z.map(this.stack,F)},setPlotOrder:function(a){var b={},c=z.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&z.forEach(this.stack,function(a){a=
a.name;a in b||c.push(a)});a=z.map(c,function(a){return this.stack[this.plots[a]]},this);z.forEach(a,function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},
addSeries:function(a,b,c){b=new k(this,b,c);b.name=a;a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));this.dirty=!0;!("ymin"in b)&&"min"in b&&(b.ymin=b.min);!("ymax"in b)&&"max"in b&&(b.ymax=b.max);return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);z.forIn(this.runs,
function(a,c,f){a>b&&(f[c]=a-1)});this.dirty=!0}return this},updateSeries:function(a,b,c){a in this.runs&&(a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,!1),this._invalidateDependentPlots(a.plot,!0)));return this},getSeriesOrder:function(a){return z.map(z.filter(this.series,function(b){return b.plot==a}),F)},setSeriesOrder:function(a){var b,c={},f=z.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var f=this.series[this.runs[a]];if(b){if(f.plot!=
b)return!1}else b=f.plot;c[a]=1;return!0},this);z.forEach(this.series,function(a){var d=a.name;d in c||a.plot!=b||f.push(d)});this.series=z.map(f,function(a){return this.series[this.runs[a]]},this).concat(z.filter(this.series,function(a){return a.plot!=b}));z.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),
this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),this.setSeriesOrder(c)}return this},resize:function(a,b){switch(arguments.length){case 1:g.setMarginBox(this.node,a);break;case 2:g.setMarginBox(this.node,{w:a,h:b})}var c=g.getMarginBox(this.node),f=this.surface.getDimensions();return f.width!=c.w||f.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=
!0,this.render()):this},getGeometry:function(){var a={};z.forIn(this.axes,function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,f){var d=this.axes[a];d&&(d.setWindow(b,c),m.forEach(this.stack,function(b){if(b.hAxis==a||b.vAxis==a)b.zoom=f}));return this},setWindow:function(a,b,c,f,d){"plotArea"in this||this.calculateGeometry();z.forIn(this.axes,function(d){var k,g;k=d.getScaler().bounds;g=k.span/(k.upper-k.lower);
d.vertical?(k=b,g=f/g/k):(k=a,g=c/g/k);d.setWindow(k,g)});m.forEach(this.stack,function(a){a.zoom=d});return this},zoomIn:function(a,b,c){var f=this.axes[a];if(f){var f=f.getScaler().bounds,d=Math.min(b[0],b[1]),k=Math.max(b[0],b[1]),d=b[0]<f.lower?f.lower:d,k=b[1]>f.upper?f.upper:k;this.setAxisWindow(a,(f.upper-f.lower)/(k-d),d-f.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=m.filter(this.stack,function(a){return a.dirty||
a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);y(a,this.plotArea);return this},fullGeometry:function(){this._makeDirty();m.forEach(this.stack,A);this.theme||this.setTheme(new t);m.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!v.plot2d||!v.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new v.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},
this);m.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},this);var b=this.dim=this.surface.getDimensions();b.width=u.normalizedLength(b.width);b.height=u.normalizedLength(b.height);z.forIn(this.axes,A);y(this.stack,b);var c=this.offsets={l:0,r:0,t:0,b:0},f=this;z.forIn(this.axes,function(b){a("dojo-bidi")&&f._resetLeftBottom(b);z.forIn(b.getOffsets(),function(a,b){c[b]=Math.max(a,c[b])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||
20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";this.titleAlign=this.titleAlign||this.theme&&this.theme.chart&&this.theme.chart.titleAlign||"middle";var d=u.normalizedLength(u.splitFontString(this.titleFont).size);c["top"==this.titlePos?"t":"b"]+=d+this.titleGap}z.forIn(this.margins,function(a,b){c[b]+=a});this.plotArea={width:b.width-c.l-c.r,
height:b.height-c.t-c.b};z.forIn(this.axes,A);y(this.stack,this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();z.forEachRev(this.stack,function(a){a.render(this.dim,this.offsets)},this);z.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();
var a=this.offsets,b=this.dim,c=Math.max(0,b.width-a.l-a.r),k=Math.max(0,b.height-a.t-a.b);m.forEach(this.series,C);z.forIn(this.axes,C);m.forEach(this.stack,C);var g=this.surface.children;if(f.dispose)for(var q=0;q<g.length;++q)f.dispose(g[q]);this.chartTitle&&this.chartTitle.tagName&&d.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(b,a);this._renderPlotBackground(b,a,c,k);z.foldr(this.stack,function(c,f){return f.render(b,a),0},0);this._nativeClip||
this._renderChartBackground(b,a);this.title&&this._renderTitle(b,a);z.forIn(this.axes,function(c){c.render(b,a)});this._makeClean();return this},_renderTitle:function(b,c){var f="canvas"==u.renderer&&this.htmlLabels||!a("ie")&&!a("opera")&&this.htmlLabels?"html":"gfx",d=u.normalizedLength(u.splitFontString(this.titleFont).size),k=u._base._getTextBox(this.title,{font:this.titleFont}),g=this.titleAlign,n=a("dojo-bidi")&&this.isRightToLeft(),h=b.width/2;"edge"===g?(g="left",h=n?b.width-(c.r+k.w):c.l):
"middle"!=g&&(n&&(g="left"===g?"right":"left"),"left"===g?h=this.margins.l:"right"===g&&(g="left",h=b.width-(this.margins.l+k.w)));this.chartTitle=q.createText[f](this,this.surface,h,"top"==this.titlePos?d+this.margins.t:b.height-this.margins.b,g,this.title,this.titleFont,this.titleFontColor)},_renderChartBackground:function(a,c){var f=this.theme,d,k=void 0!==this.fill?this.fill:f.chart&&f.chart.fill,f=void 0!==this.stroke?this.stroke:f.chart&&f.chart.stroke;if("inherit"==k)for(d=this.node,k=new n(h.get(d,
"backgroundColor"));0==k.a&&d!=document.documentElement;)k=new n(h.get(d,"backgroundColor")),d=d.parentNode;k&&(this._nativeClip?(k=b.prototype._shapeFill(b.prototype._plotFill(k,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(k)):(k=b.prototype._plotFill(k,a,c),c.l&&(d={x:0,y:0,width:c.l,height:a.height+1},this.surface.createRect(d).setFill(b.prototype._shapeFill(k,d))),c.r&&(d={x:a.width-c.r,y:0,width:c.r+1,height:a.height+2},
this.surface.createRect(d).setFill(b.prototype._shapeFill(k,d))),c.t&&(d={x:0,y:0,width:a.width+1,height:c.t},this.surface.createRect(d).setFill(b.prototype._shapeFill(k,d))),c.b&&(d={x:0,y:a.height-c.b,width:a.width+1,height:c.b+2},this.surface.createRect(d).setFill(b.prototype._shapeFill(k,d)))));f&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(f)},_renderPlotBackground:function(a,c,f,d){var k=this.theme,g=k.plotarea&&k.plotarea.fill,k=k.plotarea&&k.plotarea.stroke,q={x:c.l-
1,y:c.t-1,width:f+2,height:d+2};g&&(g=b.prototype._shapeFill(b.prototype._plotFill(g,a,c),q),this.surface.createRect(q).setFill(g));k&&this.surface.createRect({x:c.l,y:c.t,width:f+1,height:d+1}).setStroke(k)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(p.hitch(this,function(){this.render()}),this.delayInMs));return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var f=
this.series[this.runs[a]].plot;f in this.plots&&(f=this.stack[this.plots[f]])&&f.fireEvent(a,b,c)}return this},_makeClean:function(){m.forEach(this.axes,B);m.forEach(this.stack,B);m.forEach(this.series,B);this.dirty=!1},_makeDirty:function(){m.forEach(this.axes,D);m.forEach(this.stack,D);m.forEach(this.series,D);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],f,d=b?"vAxis":"hAxis";c[d]?(f=this.axes[c[d]])&&f.dependOnData()&&(f.dirty=!0,m.forEach(this.stack,
function(a){a[d]&&a[d]==c[d]&&(a.dirty=!0)})):c.dirty=!0}},setDir:function(a){return this},_resetLeftBottom:function(a){},formatTruncatedLabel:function(a,b,c){}});return a("dojo-bidi")?l("dojox.charting.Chart",[r,w]):r})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(r,p,m){return p("dojox.charting.Series",m,{constructor:function(l,h,c){r.mixin(this,c);"string"!=typeof this.plot&&(this.plot="default");this.update(h)},clear:function(){this.dyn=
{}},update:function(l){r.isArray(l)?this.data=l:(this.source=l,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(r,p,m,l){var h={};r.mixin(l,{foldl:function(c,g,d,n){"string"==typeof c&&(c=c.split(""));n=n||m.global;g=l.lambda(g);var a,b;if(r.isArray(c))for(a=0,b=c.length;a<b;d=g.call(n,d,c[a],a,c),++a);
else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(a=0;c.hasNext();d=g.call(n,d,c.next(),a++,c));else for(a in c)a in h||(d=g.call(n,d,c[a],a,c));return d},foldl1:function(c,g,d){"string"==typeof c&&(c=c.split(""));d=d||m.global;g=l.lambda(g);var n,a,b;if(r.isArray(c))for(n=c[0],a=1,b=c.length;a<b;n=g.call(d,n,c[a],a,c),++a);else if("function"==typeof c.hasNext&&"function"==typeof c.next){if(c.hasNext())for(n=c.next(),a=1;c.hasNext();n=g.call(d,n,c.next(),a++,c));}else for(a in b=
!0,c)a in h||(b?(n=c[a],b=!1):n=g.call(d,n,c[a],a,c));return n},foldr:function(c,g,d,n){"string"==typeof c&&(c=c.split(""));n=n||m.global;g=l.lambda(g);for(var a=c.length;0<a;--a,d=g.call(n,d,c[a],a,c));return d},foldr1:function(c,g,d){"string"==typeof c&&(c=c.split(""));d=d||m.global;g=l.lambda(g);for(var n=c.length,a=c[n-1],n=n-1;0<n;--n,a=g.call(d,a,c[n],n,c));return a},reduce:function(c,g,d){return 3>arguments.length?l.foldl1(c,g):l.foldl(c,g,d)},reduceRight:function(c,g,d){return 3>arguments.length?
l.foldr1(c,g):l.foldr(c,g,d)},unfold:function(c,g,d,n,a){a=a||m.global;g=l.lambda(g);d=l.lambda(d);c=l.lambda(c);for(var b=[];!c.call(a,n);b.push(g.call(a,n)),n=d.call(a,n));return b}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(r,p,m){r.mixin(m,{filterRev:function(l,h,c){"string"==typeof l&&(l=l.split(""));c=c||p.global;h=m.lambda(h);for(var g=[],d,n=l.length-1;0<=n;--n)d=l[n],h.call(c,d,n,l)&&g.push(d);return g},forEachRev:function(l,
h,c){"string"==typeof l&&(l=l.split(""));c=c||p.global;h=m.lambda(h);for(var g=l.length-1;0<=g;h.call(c,l[g],g,l),--g);},mapRev:function(l,h,c){"string"==typeof l&&(l=l.split(""));c=c||p.global;h=m.lambda(h);for(var g=l.length,d=Array(g),g=g-1,n=0;0<=g;d[n++]=h.call(c,l[g],g,l),--g);return d},everyRev:function(l,h,c){"string"==typeof l&&(l=l.split(""));c=c||p.global;h=m.lambda(h);for(var g=l.length-1;0<=g;--g)if(!h.call(c,l[g],g,l))return!1;return!0},someRev:function(l,h,c){"string"==typeof l&&(l=
l.split(""));c=c||p.global;h=m.lambda(h);for(var g=l.length-1;0<=g;--g)if(h.call(c,l[g],g,l))return!0;return!1}});return m})},"rc/widget/charting/axis2dDefault":function(){define("dojo/dom-construct dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has dojox/charting/axis2d/common dojox/charting/axis2d/Default dojox/lang/functional dojox/gfx/renderer dojox/gfx/_base ./Invisible".split(" "),function(r,p,m,l,h,c,g,d,n,a,b){var t=p.getObject("charting",!0,dojox),k=t.scaler.linear;return m("rc/widget/charting/axis2dDefault",
[b,g],{options:{offsetMargin:0,majorStart:0,unit:"",decimalPlaces:0,totalLabelOffset:null,_labelFunc:null,canScale:!0,order:0},allLabels:null,labelGap:4,vertAxMin:null,vertAxMax:null,inOffset:0,MATH_HIGH_LIMIT:Math.pow(2,50),MATH_LOW_LIMIT:Math.pow(-2,49),isBinary:!1,isMulti:!1,constructor:function(){p.mixin(this.optionalParams,this.options);this.inherited(arguments);this.isBinary=arguments[1].isBinary;this.isMulti=arguments[1].isMulti;this.allLabels=[]},destroy:function(){this.inherited(arguments);
l.forEach(this.allLabels,r.destroy);this.allLabels=[]},render:function(b,f){var d,g,q,n,t,v,m,p,r,B,D,F,H,J,G=this._isRtl();if(!this.dirty||!this.scaler)return this;var I=this.opt,K;q=this.chart.theme.axis;var L="stroke"in I?I.stroke:q.stroke,M="majorTick"in I?I.majorTick:q.majorTick,O="minorTick"in I?I.minorTick:q.minorTick,P="microTick"in I?I.microTick:q.microTick,Q="font"in I?I.font:q.font,T="fontColor"in I?I.fontColor:q.fontColor,R="rightOrTop"!==I.position,S=I.rotation%360,aa=0,N,U=this.chart.theme.axis.tick.labelGap,
W=I.titleFont||q.title&&q.title.font,da=I.titleFontColor||q.title&&q.title.fontColor||"black",Y=Math.max(M.length,O.length);p=0==I.titleGap?0:I.titleGap||q.title&&q.title.gap||15;var V=I.titleOrientation||q.title&&q.title.orientation||"axis",X=Q?a.normalizedLength(a.splitFontString(Q).size):0;N=Math.abs(Math.cos(S*Math.PI/180));var Z=Math.abs(Math.sin(S*Math.PI/180)),ca=W?a.normalizedLength(a.splitFontString(W).size):0;"number"!=typeof U&&(U=4);0>S&&(S+=360);var ha=this._getMaxLabelSize(),ha=ha&&
ha.majLabelW;if(this.vertical){H=b.height-f.b;J=void 0;D=f.t;F=void 0;q=(b.height-f.b+f.t)/2;n=void 0;N=X*Z+(ha||0)*N+U+Math.max(0<M.length?M.length:0,0<O.length?O.length:0)+ca+p;r=0;B=-1;v=t=0;m=1;p=0;d=U;g=0;switch(S){case 0:K="end";v=.4*X;break;case 90:K="middle";t=-X;break;case 180:K="start";v=.4*-X;break;case 270:K="middle";break;default:45>S?(K="end",v=.4*X):90>S?(K="end",v=.4*X):135>S?K="start":225>S?(K="start",v=.4*-X):270>S?(K="start",t=R?0:.4*X):315>S?(K="end",t=R?0:.4*X):(K="end",v=.4*
X)}if(R)null!=this.opt.totalLabelOffset?J=F=f.firstYAxisOffset-this.opt.totalLabelOffset:(J=F=f.firstYAxisOffset-this.chart.totalLabelOffset,this.opt.totalLabelOffset=this.chart.totalLabelOffset,this.chart.totalLabelOffset+=this.lOffset,aa=V&&"away"==V?90:270,n=f.l-N+(270==aa?ca:0),d=-d),m=-1,p=0,K="end";else switch(J=F=b.width-f.r,aa=V&&"axis"==V?90:270,n=b.width-f.r+N-(270==aa?0:ca),K){case "start":K="end";break;case "end":K="start";break;case "middle":t+=X}t=m*(this._getLongestLabelLength(this.ticks.major)+
this.labelGap+Y+2)}else{v=t=0;J=f.firstYAxisOffset?f.firstYAxisOffset:10;H=void 0;F=b.width-f.r;D=void 0;n=(b.width-f.r+f.l)/2;q=void 0;N=X*N+(ha||0)*Z+U+Math.max(0<M.length?M.length:0,0<O.length?O.length:0)+ca+p;r=G?-1:1;d=B=0;g=U;switch(S){case 0:K="middle";v=X;break;case 90:K="start";t=.4*-X;break;case 180:K="middle";v=X;break;case 270:K="end";t=.4*X;break;default:45>S?(K="start",v=R?X:0):135>S?(K="start",t=.4*-X):180>S?(K="start",v=R?0:-X):225>S?(K="end",v=R?0:-X):315>S?(K="end",v=R?.4*X:0):(K=
"end",v=R?X:0)}if(R)H=D=b.height-f.b,m=0,p=1,v=Y+this.labelGap+X+8,t=void 0,t=0,aa=V&&"axis"==V?180:0,q=b.height-f.b+N-(aa?ca:0);else switch(H=D=f.t,aa=V&&"away"==V?180:0,q=f.t-N+(aa?0:ca),p=-1,g=-g,K){case "start":K="end";break;case "end":K="start";break;case "middle":v-=X}}this.cleanGroup();var ea=this.group,R=this.scaler,U=this.ticks,fa=k.getTransformerFromModel(this.scaler),ba=I.title&&aa||S||!this.opt.htmlLabels||h("opera")?"gfx":"html",ja=m*M.length,ia=p*M.length;ea.createLine({x1:J,y1:H,x2:F,
y2:D}).setStroke(L);I.title&&(L=c.createText[ba](this.chart,ea,n,q,"middle",I.title,W,da),"html"==ba?this.htmlElements.push(L):L.setTransform(a.matrix.rotategAt(aa,n,q)));if(null==U)return this.dirty=!1,this.chart[this.name+"Coords"]={xStartCoord:J+r,yStartCoord:H+B,span:F-J},this;var ga=this.opt.majorLabels;l.forEach(U.major,function(b,c){var f=fa(b.value),k=(G?F:J)+r*f,q=H+B*f;if(this.vertical||k<F&&k>J)if(this.createLine(ea,{x1:k,y1:q,x2:k+ja,y2:q+ia}).setStroke(M),b.label){var u=I.maxLabelCharCount?
this.getTextWithLimitCharCount(b.label,Q,I.maxLabelCharCount):{text:b.label,truncated:!1},u=I.maxLabelSize?this.getTextWithLimitLength(u.text,Q,I.maxLabelSize,u.truncated):u,f=this.createText(ba,ea,k+t,q+v,K,u.text,Q,T,ha);u.truncated&&this.chart.formatTruncatedLabel(f,b.label,ba);u.truncated&&this.labelTooltip(f,this.chart,b.label,u.text,Q,ba);"html"==ba?this.htmlElements.push(f):S&&f.setTransform([{dx:t,dy:v},a.matrix.rotategAt(S,k+d,q+g)]);this.allLabels.push(f)}},this);ja=m*O.length;ia=p*O.length;
ga=this.opt.minorLabels&&R.minMinorStep<=R.minor.tick*R.bounds.scale;l.forEach(U.minor,function(b){var c=fa(b.value),f=(G?F:J)+r*c,k=H+B*c;this.createLine(ea,{x1:f,y1:k,x2:f+ja,y2:k+ia}).setStroke(O);if(ga&&b.label){var q=I.maxLabelCharCount?this.getTextWithLimitCharCount(b.label,Q,I.maxLabelCharCount):{text:b.label,truncated:!1},q=I.maxLabelSize?this.getTextWithLimitLength(q.text,Q,I.maxLabelSize,q.truncated):q,c=this.createText(ba,ea,f+t,k+v,K,q.text,Q,T);q.truncated&&this.chart.formatTruncatedLabel(c,
b.label,ba);q.truncated&&this.labelTooltip(c,this.chart,b.label,q.text,Q,ba);"html"==ba?this.htmlElements.push(c):S&&c.setTransform([{dx:t,dy:v},a.matrix.rotategAt(S,f+d,k+g)])}},this);ja=m*P.length;ia=p*P.length;l.forEach(U.micro,function(a){var b=fa(a.value);a=J+r*b;b=H+B*b;this.createLine(ea,{x1:a,y1:b,x2:a+ja,y2:b+ia}).setStroke(P)},this);this.chart[this.name+"Coords"]={xStartCoord:J+r,yStartCoord:H+B,span:F-J};this.dirty=!1;return this},_getLongestLabelLength:function(a){for(var b=0,c=0;c<a.length;c++)a[c].label.length>
b&&(b=a[c].label.length);return b},_calcLabelHeight:function(b,c){var f=[];null===b?f.push("12:40","\x3cbr\x3e","Nov 16","\x3cbr\x3e","2012"):f=b;return a._base._getTextBox(f,{font:c}).h||0},getOffsetsnew:function(){var b={l:0,r:0,t:0,b:0};if(!this.scaler)return b;var c=this.opt,d=this.chart.theme.axis,k=this.chart.theme.axis.tick.labelGap,g=c.titleFont||d.title&&d.title.font,d=0==c.titleGap?0:c.titleGap||d.title&&d.title.gap,n=this.chart.theme.getTick("major",c),h=this.chart.theme.getTick("minor",
c),g=g?a.normalizedLength(a.splitFontString(g).size):0,t=c.rotation%360,l=c.leftBottom,m=Math.abs(Math.cos(t*Math.PI/180)),p=Math.abs(Math.sin(t*Math.PI/180));this.trailingSymbol=void 0===c.trailingSymbol||null===c.trailingSymbol?this.trailingSymbol:c.trailingSymbol;"number"!=typeof k&&(k=4);0>t&&(t+=360);var B=this._getMaxLabelSize();if(B){var D=Math.ceil(Math.max(B.majLabelW,B.minLabelW))+1,r=Math.ceil(Math.max(B.majLabelH,B.minLabelH))+1;if(this.vertical)switch(B=l?"l":"r",t){case 0:case 180:b[B]=
D;b.t=b.b=r/2;break;case 90:case 270:b[B]=r;b.t=b.b=D/2;break;default:45>=t||180<t&&225>=t?(b[B]=r*p/2+D*m,b[l?"t":"b"]=r*m/2+D*p,b[l?"b":"t"]=r*m/2):315<t||180>t&&135<t?(b[B]=r*p/2+D*m,b[l?"b":"t"]=r*m/2+D*p,b[l?"t":"b"]=r*m/2):90>t||180<t&&270>t?(b[B]=r*p+D*m,b[l?"t":"b"]=r*m+D*p):(b[B]=r*p+D*m,b[l?"b":"t"]=r*m+D*p)}else switch(B=l?"b":"t",t){case 0:case 180:b[B]=r;b.l=b.r=D/2;break;case 90:case 270:b[B]=D;b.l=b.r=r/2;break;default:45<=t&&90>=t||225<=t&&270>=t?(b[B]=r*m/2+D*p,b[l?"r":"l"]=r*p/2+
D*m,b[l?"l":"r"]=r*p/2):90<=t&&135>=t||270<=t&&315>=t?(b[B]=r*m/2+D*p,b[l?"l":"r"]=r*p/2+D*m,b[l?"r":"l"]=r*p/2):45>t||180<t&&225>t?(b[B]=r*m+D*p,b[l?"r":"l"]=r*p+D*m):(b[B]=r*m+D*p,b[l?"l":"r"]=r*p+D*m)}b[B]+=k+Math.max(n.length,h.length)+(c.title?g+d:0)}return b},getOffsets:function(){var b=this.opt,c={l:0,r:0,t:0,b:0},d,k,g=t.scaler.common.getNumericLabel,n=0,h=this.chart.theme.axis,l="font"in b?b.font:h.font,m="majorTick"in b?b.majorTick:h.majorTick,h="minorTick"in b?b.minorTick:h.minorTick,p=
l?a.normalizedLength(a.splitFontString(l).size):0,r=this.scaler;if(!r)return c;var B=r.major,r=r.minor;this.vertical?(p&&(d=b.labelFunc&&b.maxLabelSize?b.maxLabelSize:this.labels?this._groupLabelWidth(this.labels,l):this._groupLabelWidth([g(B.start,B.prec,b),g(B.start+B.count*B.tick,B.prec,b),g(r.start,r.prec,b),g(r.start+r.count*r.tick,r.prec,b)],l),g=0,""!=this.opt.unit&&(g=a._base._getTextBox(this.opt.unit,{font:l}).w||0),n=g>d?g+this.labelGap+2:d+this.labelGap+7),n+=this.labelGap+Math.max(m.length,
h.length),c[b.leftBottom?"l":"r"]=n,c.t=c.b=p/2):(p&&(n=p+this.labelGap),n+=this.labelGap+Math.max(m.length,h.length),c[b.leftBottom?"b":"t"]=n,p&&(b.labelFunc&&b.maxLabelSize?d=b.maxLabelSize:this.labels?(d=this._groupLabelWidth(this.labels,l),k=this._calcLabelHeight(this.labels,l)):(d=this._groupLabelWidth([g(B.start,B.prec,b),g(B.start+B.count*B.tick,B.prec,b),g(r.start,r.prec,b),g(r.start+r.count*r.tick,r.prec,b)],l),k=this._calcLabelHeight(null,l)),c.l=c.r=d/2));d&&(this._cachedLabelWidth=d);
k&&(this._cachedLabelHeight=k);return c},getAdjustedRange:function(a){var b=a[0];a=a[1];var c=a-b,d=Math.pow(10,this.chart.EXPONENTIAL_LIMIT);if(b<=this.MATH_LOW_LIMIT&&a>=this.MATH_HIGH_LIMIT||b>=this.MATH_HIGH_LIMIT&&a>=this.MATH_HIGH_LIMIT||b<=this.MATH_LOW_LIMIT&&a<=this.MATH_LOW_LIMIT||b<-1*d||a>d)return[0,0];this.isBinary||this.isMulti?(a=this.isMulti?Math.max(2,a):1,b=this.isBinary?0:1):(0===b&&0===a?(b=-1,a=1):0===c?1E5<b?(b--,a++):(b-=Math.abs(.05*b),a+=Math.abs((.03+.005)*a)):(b-=.1*Math.abs(c),
a+=.1*Math.abs(c)),a=Math.round(a)+1,b=Math.floor(b));return[b,a]}})})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k){g=l(m("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",g,{defaultParams:{vertical:!1,
fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1,position:"leftOrBottom"},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,
titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,c){this.opt=r.clone(this.defaultParams);b.updateWithObject(this.opt,c);b.updateWithPattern(this.opt,c,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0;c&&"position"in c||(this.opt.position=this.opt.leftBottom?"leftOrBottom":"rightOrTop");this.renderingOptions={"shape-rendering":"crispEdges"}},setWindow:function(a,
b){a!=this.scale&&(this._invalidMaxLabelSize=!0);return this.inherited(arguments)},_groupLabelWidth:function(b,c,d){if(!b.length)return 0;50<b.length&&(b.length=50);r.isObject(b[0])&&(b=t.map(b,function(a){return a.text}));d&&(b=t.map(b,function(a){return 0==r.trim(a).length?"":a.substring(0,d)+this.trailingSymbol},this));b=b.join("\x3cbr\x3e");return a._base._getTextBox(b,{font:c}).w||0},_getMaxLabelSize:function(a,b,c,k,g,n){if(null==this._maxLabelSize&&6==arguments.length){var f=this.opt;this.scaler.minMinorStep=
this._prevMinMinorStep=0;var q=r.clone(f);delete q.to;delete q.from;var u=d.buildScaler(a,b,c,q,f.to-f.from);u.minMinorStep=0;this._majorStart=u.major.start;f=d.buildTicks(u,f);if(n&&f){var h=u=0,t=function(a){a.label&&this.push(a.label)},l=[];this.opt.majorLabels&&(p.forEach(f.major,t,l),u=this._groupLabelWidth(l,g,q.maxLabelCharCount),q.maxLabelSize&&(u=Math.min(q.maxLabelSize,u)));l=[];this.opt.dropLabels&&this.opt.minorLabels&&(p.forEach(f.minor,t,l),h=this._groupLabelWidth(l,g,q.maxLabelCharCount),
q.maxLabelSize&&(h=Math.min(q.maxLabelSize,h)));this._maxLabelSize={majLabelW:u,minLabelW:h,majLabelH:n,minLabelH:n}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(b,c,k){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||k!=this._oldSpan)&&Infinity!=b&&-Infinity!=c){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=k;var f=this.opt,g=this.chart.theme.axis,q=f.rotation%360,
u=this.chart.theme.axis.tick.labelGap,n=f.font||g.majorTick&&g.majorTick.font||g.tick&&g.tick.font,g=n?a.normalizedLength(a.splitFontString(n).size):0,n=this._getMaxLabelSize(b,c,k,q,n,g);"number"!=typeof u&&(u=4);if(n&&f.dropLabels){var f=Math.abs(Math.cos(q*Math.PI/180)),h=Math.abs(Math.sin(q*Math.PI/180));0>q&&(q+=360);switch(q){case 0:case 180:this.vertical?q=g:(q=n.majLabelW,g=n.minLabelW);break;case 90:case 270:this.vertical?(q=n.majLabelW,g=n.minLabelW):q=g;break;default:q=this.vertical?Math.min(n.majLabelW,
g/f):Math.min(n.majLabelW,g/h),g=Math.min(Math.sqrt(n.minLabelW*n.minLabelW+g*g),this.vertical?g*f+n.minLabelW*h:n.minLabelW*f+g*h)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(q,g)+u;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((q+u)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=d.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var b={l:0,r:0,t:0,b:0};if(!this.scaler)return b;
var c=this.opt,d=this.chart.theme.axis,k=this.chart.theme.axis.tick.labelGap,g=c.titleFont||d.title&&d.title.font,d=0==c.titleGap?0:c.titleGap||d.title&&d.title.gap,n=this.chart.theme.getTick("major",c),h=this.chart.theme.getTick("minor",c),g=g?a.normalizedLength(a.splitFontString(g).size):0,t=c.rotation%360,l=c.position,m="rightOrTop"!==l,p=Math.abs(Math.cos(t*Math.PI/180)),B=Math.abs(Math.sin(t*Math.PI/180));this.trailingSymbol=void 0===c.trailingSymbol||null===c.trailingSymbol?this.trailingSymbol:
c.trailingSymbol;"number"!=typeof k&&(k=4);0>t&&(t+=360);var D=this._getMaxLabelSize();if(D){var r=Math.ceil(Math.max(D.majLabelW,D.minLabelW))+1,H=Math.ceil(Math.max(D.majLabelH,D.minLabelH))+1;if(this.vertical)switch(D=m?"l":"r",t){case 0:case 180:b[D]="center"===l?0:r;b.t=b.b=H/2;break;case 90:case 270:b[D]=H;b.t=b.b=r/2;break;default:45>=t||180<t&&225>=t?(b[D]=H*B/2+r*p,b[m?"t":"b"]=H*p/2+r*B,b[m?"b":"t"]=H*p/2):315<t||180>t&&135<t?(b[D]=H*B/2+r*p,b[m?"b":"t"]=H*p/2+r*B,b[m?"t":"b"]=H*p/2):90>
t||180<t&&270>t?(b[D]=H*B+r*p,b[m?"t":"b"]=H*p+r*B):(b[D]=H*B+r*p,b[m?"b":"t"]=H*p+r*B)}else switch(D=m?"b":"t",t){case 0:case 180:b[D]="center"===l?0:H;b.l=b.r=r/2;break;case 90:case 270:b[D]=r;b.l=b.r=H/2;break;default:45<=t&&90>=t||225<=t&&270>=t?(b[D]=H*p/2+r*B,b[m?"r":"l"]=H*B/2+r*p,b[m?"l":"r"]=H*B/2):90<=t&&135>=t||270<=t&&315>=t?(b[D]=H*p/2+r*B,b[m?"l":"r"]=H*B/2+r*p,b[m?"r":"l"]=H*B/2):45>t||180<t&&225>t?(b[D]=H*p+r*B,b[m?"r":"l"]=H*B+r*p):(b[D]=H*p+r*B,b[m?"l":"r"]=H*B+r*p)}b[D]="center"===
l?0:b[D]+(k+Math.max(0<n.length?n.length:0,0<h.length?h.length:0)+(c.title?g+d:0))}return b},cleanGroup:function(a){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(a,b,c,d,k,g,h,t,l){if(!this.opt.enableCache||"html"==a)return n.createText[a](this.chart,b,c,d,k,g,h,t,l);0<this._textFreePool.length?
(a=this._textFreePool.pop(),a.setShape({x:c,y:d,text:g,align:k}),b.add(a)):a=n.createText[a](this.chart,b,c,d,k,g,h,t);this._textUsePool.push(a);return a},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(c);return c},render:function(b,c){var f,k,g,q,h,t,l,r,E,B,D,F,H,J,G=this._isRtl();if(!this.dirty||!this.scaler)return this;var I=this.opt;E=this.chart.theme.axis;
var K=I.position,L="rightOrTop"!==K,M=I.rotation%360,O=0,P,Q,O=this.chart.theme.axis.tick.labelGap,T=I.font||E.majorTick&&E.majorTick.font||E.tick&&E.tick.font,R=I.titleFont||E.title&&E.title.font,S=I.fontColor||E.majorTick&&E.majorTick.fontColor||E.tick&&E.tick.fontColor||"black",aa=I.titleFontColor||E.title&&E.title.fontColor||"black";h=0==I.titleGap?0:I.titleGap||E.title&&E.title.gap||15;var N=I.titleOrientation||E.title&&E.title.orientation||"axis",U=this.chart.theme.getTick("major",I),W=this.chart.theme.getTick("minor",
I),da=this.chart.theme.getTick("micro",I),Y="stroke"in I?I.stroke:E.stroke,V=T?a.normalizedLength(a.splitFontString(T).size):0;t=Math.abs(Math.cos(M*Math.PI/180));P=Math.abs(Math.sin(M*Math.PI/180));var X=R?a.normalizedLength(a.splitFontString(R).size):0;"number"!=typeof O&&(O=4);0>M&&(M+=360);var Z=this._getMaxLabelSize(),Z=Z&&Z.majLabelW;if(this.vertical){H=b.height-c.b;J=void 0;D=c.t;F=void 0;E=(b.height-c.b+c.t)/2;B=void 0;P=V*P+(Z||0)*t+O+Math.max(0<U.length?U.length:0,0<W.length?W.length:0)+
X+h;l=0;r=-1;k=f=0;h=1;t=0;g=O;q=0;switch(M){case 0:Q="end";k=.4*V;break;case 90:Q="middle";f=-V;break;case 180:Q="start";k=.4*-V;break;case 270:Q="middle";break;default:45>M?(Q="end",k=.4*V):90>M?(Q="end",k=.4*V):135>M?Q="start":225>M?(Q="start",k=.4*-V):270>M?(Q="start",f=L?0:.4*V):315>M?(Q="end",f=L?0:.4*V):(Q="end",k=.4*V)}if(L)J=F="center"===K?b.width/2:c.l,O=N&&"away"==N?90:270,B=c.l-P+(270==O?X:0),h=-1,g=-g;else switch(J=F=b.width-c.r,O=N&&"axis"==N?90:270,B=b.width-c.r+P-(270==O?0:X),Q){case "start":Q=
"end";break;case "end":Q="start";break;case "middle":f+=V}}else{J=c.l;H=void 0;F=b.width-c.r;D=void 0;B=(b.width-c.r+c.l)/2;E=void 0;P=V*t+(Z||0)*P+O+Math.max(0<U.length?U.length:0,0<W.length?W.length:0)+X+h;l=G?-1:1;h=k=f=r=0;t=1;g=0;q=O;switch(M){case 0:Q="middle";k=V;break;case 90:Q="start";f=.4*-V;break;case 180:Q="middle";break;case 270:Q="end";f=.4*V;break;default:45>M?(Q="start",k=L?V:0):135>M?(Q="start",f=.4*-V):180>M?(Q="start",k=L?0:-V):225>M?(Q="end",k=L?0:-V):315>M?(Q="end",k=L?.4*V:0):
(Q="end",k=L?V:0)}if(L)H=D="center"===K?b.height/2:b.height-c.b,O=N&&"axis"==N?180:0,E=b.height-c.b+P-(O?X:0);else switch(H=D=c.t,O=N&&"away"==N?180:0,E=c.t-P+(O?0:X),t=-1,q=-q,Q){case "start":Q="end";break;case "end":Q="start";break;case "middle":k-=V}}this.cleanGroup();var ca=this.group,K=this.scaler,L=this.ticks,ha=d.getTransformerFromModel(this.scaler),ea=I.title&&O||M||!this.opt.htmlLabels||m("ie")||m("opera")?"gfx":"html",fa=h*U.length,ba=t*U.length,ja=this._skipInterval;ca.createLine({x1:J,
y1:H,x2:F,y2:D}).setStroke(Y);I.title&&(R=n.createText[ea](this.chart,ca,B,E,"middle",I.title,R,aa),"html"==ea?this.htmlElements.push(R):R.setTransform(a.matrix.rotategAt(O,B,E)));if(null==L)return this.dirty=!1,this;var ia=0<L.major.length?(L.major[0].value-this._majorStart)/K.major.tick:0,ga=this.opt.majorLabels;p.forEach(L.major,function(b,c){var d=ha(b.value),u=(G?F:J)+l*d,n=H+r*d;c+=ia;this.createLine(ca,{x1:u,y1:n,x2:u+fa,y2:n+ba}).setStroke(U);if(b.label&&(!ja||0==(c-(1+ja))%(1+ja))){var h=
I.maxLabelCharCount?this.getTextWithLimitCharCount(b.label,T,I.maxLabelCharCount):{text:b.label,truncated:!1},h=I.maxLabelSize?this.getTextWithLimitLength(h.text,T,I.maxLabelSize,h.truncated):h,d=this.createText(ea,ca,u+(0<U.length?fa:0)+g+(M?0:f),n+(0<U.length?ba:0)+q+(M?0:k),Q,h.text,T,S);h.truncated&&this.chart.formatTruncatedLabel(d,b.label,ea);h.truncated&&this.labelTooltip(d,this.chart,b.label,h.text,T,ea);"html"==ea?this.htmlElements.push(d):M&&d.setTransform([{dx:f,dy:k},a.matrix.rotategAt(M,
u+(0<U.length?fa:0)+g,n+(0<U.length?ba:0)+q)])}},this);fa=h*W.length;ba=t*W.length;ga=this.opt.minorLabels&&K.minMinorStep<=K.minor.tick*K.bounds.scale;p.forEach(L.minor,function(b){var c=ha(b.value),d=(G?F:J)+l*c,u=H+r*c;this.createLine(ca,{x1:d,y1:u,x2:d+fa,y2:u+ba}).setStroke(W);if(ga&&b.label){var n=I.maxLabelCharCount?this.getTextWithLimitCharCount(b.label,T,I.maxLabelCharCount):{text:b.label,truncated:!1},n=I.maxLabelSize?this.getTextWithLimitLength(n.text,T,I.maxLabelSize,n.truncated):n,c=
this.createText(ea,ca,d+(0<W.length?fa:0)+g+(M?0:f),u+(0<W.length?ba:0)+q+(M?0:k),Q,n.text,T,S);n.truncated&&this.chart.formatTruncatedLabel(c,b.label,ea);n.truncated&&this.labelTooltip(c,this.chart,b.label,n.text,T,ea);"html"==ea?this.htmlElements.push(c):M&&c.setTransform([{dx:f,dy:k},a.matrix.rotategAt(M,d+(0<W.length?fa:0)+g,u+(0<W.length?ba:0)+q)])}},this);fa=h*da.length;ba=t*da.length;p.forEach(L.micro,function(a){var b=ha(a.value);a=J+l*b;b=H+r*b;this.createLine(ca,{x1:a,y1:b,x2:a+fa,y2:b+
ba}).setStroke(da)},this);this.dirty=!1;return this},labelTooltip:function(b,f,d,k,g,n){var q=["dijit/Tooltip"],u={type:"rect"},t=["above","below"];k=a._base._getTextBox(k,{font:g}).w||0;g=g?a.normalizedLength(a.splitFontString(g).size):0;"html"==n?(r.mixin(u,c.position(b.firstChild,!0)),u.width=Math.ceil(k),u.height=Math.ceil(g),this._events.push({shape:dojo,handle:h.connect(b.firstChild,"onmouseover",this,function(a){require(q,function(a){a.show(d,u,t)})})}),this._events.push({shape:dojo,handle:h.connect(b.firstChild,
"onmouseout",this,function(a){require(q,function(a){a.hide(u)})})})):(n=b.getShape(),f=f.getCoords(),u=r.mixin(u,{x:n.x-k/2,y:n.y}),u.x+=f.x,u.y+=f.y,u.x=Math.round(u.x),u.y=Math.round(u.y),u.width=Math.ceil(k),u.height=Math.ceil(g),this._events.push({shape:b,handle:b.connect("onmouseenter",this,function(a){require(q,function(a){a.show(d,u,t)})})}),this._events.push({shape:b,handle:b.connect("onmouseleave",this,function(a){require(q,function(a){a.hide(u)})})}))},_isRtl:function(){return!1}});return m("dojo-bidi")?
l("dojox.charting.axis2d.Default",[g,k]):g})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(r,p,m,l,h){return p("dojox.charting.axis2d.Invisible",m,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(c,g){this.opt=r.clone(this.defaultParams);
h.updateWithObject(this.opt,g);h.updateWithPattern(this.opt,g,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(c,g){this.scale=c;this.offset=g;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?
this.offset:0},calculate:function(c,g,d,n){if(this.initialized())return this;var a=this.opt;this.labels=a.labels;this.scaler=(n||l).buildScaler(c,g,d,a);var b=this.scaler.bounds;"scale"in this&&(a.from=b.lower+this.offset,a.to=(b.upper-b.lower)/this.scale+a.from,!isFinite(a.from)||isNaN(a.from)||!isFinite(a.to)||isNaN(a.to)||a.to-a.from>=b.upper-b.lower?(delete a.from,delete a.to,delete this.scale,delete this.offset):(a.from<b.lower?(a.to+=b.lower-a.from,a.from=b.lower):a.to>b.upper&&(a.from+=b.upper-
a.to,a.to=b.upper),this.offset=a.from-b.lower),this.scaler=(n||l).buildScaler(c,g,d,a),b=this.scaler.bounds,1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset));return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(r,p){return r("dojox.charting.axis2d.Base",p,{constructor:function(m,l){this.vertical=l&&l.vertical;this.opt={};this.opt.min=l&&l.min;
this.opt.max=l&&l.max},clear:function(){return this},initialized:function(){return!1},calculate:function(m,l,h){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(m,l){this.dirty=!1;return this},isNullValue:function(m){return!1},naturalBaseline:0})})},"rc/widget/charting/Invisible":function(){define(["dojo/_base/declare","dojox/charting/axis2d/Invisible","dojox/charting/scaler/linear"],function(r,p,m){return r("rc/widget/charting/Invisible",
p,{calculate:function(l,h,c){var g=this.opt;if(this.vertical){var d=this.getAdjustedRange([g.seriesMin,g.seriesMax]);this.vertAxMin=d[0];this.vertAxMax=d[1];g.majorTickStep=this.isMulti?d[0]:this.chart._calculateYAxisTickStep(d[1]-d[0],this.scale)}if(this.initialized())return this;this.labels=g.labels;this.scaler=this.vertical?m.buildScaler(this.vertAxMin,this.vertAxMax,c,g):m.buildScaler(l,h,c,g);d=this.scaler.bounds;if("scale"in this){if(this.vertical){l=this.scaler.bounds.upper-this.scaler.bounds.lower;
this.offset=(l/(this.scale||1)-l)/2;g.from=this.isBinary||this.isMulti?this.isBinary?0:1:this.scaler.bounds.lower-this.offset;g.to=this.scaler.bounds.upper+this.offset;if(!isFinite(g.from)||isNaN(g.from)||!isFinite(g.to)||isNaN(g.to))delete g.from,delete g.to,delete this.scale,delete this.offset;this.scaler=m.buildScaler(this.vertAxMin,this.vertAxMax,c,g)}else g.from=d.lower+this.offset,g.to=(d.upper-d.lower)/this.scale+g.from,!isFinite(g.from)||isNaN(g.from)||!isFinite(g.to)||isNaN(g.to)||g.to-g.from>=
d.upper-d.lower?(delete g.from,delete g.to,delete this.scale,delete this.offset):(g.from<d.lower?(g.to+=d.lower-g.from,g.from=d.lower):g.to>d.upper&&(g.from+=d.upper-g.to,g.to=d.upper),this.offset=g.from-d.lower),this.scaler=m.buildScaler(l,h,c,g);d=this.scaler.bounds;1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset)}return this}})})},"rc/widget/charting/Slider":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojox/form/HorizontalRangeSlider ../../date".split(" "),
function(r,p,m,l,h,c,g,d,n){return p("rc/widget/charting/Slider",[d],{_coords:null,range:[],_parentWidget:null,value:[],maximum:100,minimum:0,showButtons:!0,clickSelect:null,scale:1,offset:0,_currentlyMovingBar:!1,_lastMin:0,_lastMax:100,_lastDataObject:null,_sampleSizeChanged:!1,_maxRange:null,_onSlideComplete:null,MIN_INCREMENT:1E3,movables:["_movable","_movableMax","_movableBar"],_atSliderMax:!1,_atSliderMin:!1,postCreate:function(){this.inherited(arguments);this._connect();this._movable.label=
h.create("div",{"class":"trendRecordPosition trendRecordPositionMin"},this._movable.node,"first");this._movableBar.label=h.create("div",{"class":"trendRecordPosition trendRecordPositionBar"},this._movableBar.node,"first");this._movableMax.label=h.create("div",{"class":"trendRecordPosition trendRecordPositionMax"},this._movableMax.node,"first");c.set(this._movableBar.node,"overflow","visible");r.forEach(this.movables,m.hitch(this,function(a){this.own(g(this[a],"MoveStart",m.hitch(this,this._onMoveStart)),
g(this[a],"MoveStop",m.hitch(this,this._onMoveStop)))}));l.add(this.sliderHandleMax,"dijitSliderImageHandleHMax");this._hideLabels();this.own(g(this.incrementButton,"click",m.hitch(this,this._onClickIncrement)),g(this.decrementButton,"click",m.hitch(this,this._onClickDecrement)));l.add(this.sliderBarContainer.parentNode,"dojoxSliderCell");l.add(this.domNode,"unselectable");try{this._lastMin=this.value[0],this._lastMax=this.value[1]}catch(a){}this._printSliderBar()},increment:function(){parseFloat(this.value[1].toFixed(2))<
this._lastDataObject.total.last&&this.inherited(arguments)},_onClickIncrement:function(){var a=this._lastDataObject,b=parseFloat(this.value[1].toFixed(2));b<a.total.last&&(a=b+this.MIN_INCREMENT,a+=n.getTimezoneOffsetMsec(a),this._parentWidget.setDateFirst(new Date(a)))},_onClickDecrement:function(){var a=this._lastDataObject,b=parseFloat(this.value[0].toFixed(2));b>a.total.first&&(a=b-this.MIN_INCREMENT,a+=n.getTimezoneOffsetMsec(a),this._parentWidget.setDateLast(new Date(a)))},_updateLabels:function(){var a,
b,c=this.get("value");a=Math.round(c[0]);b=Math.round(c[1]);var d=this._lastDataObject,g=d.sample.count,f=d.current.diff,c=Math.floor(c[1]-c[0]);this._currentlyMovingBar&&(c=f);f!=c&&0<c?(g=Math.ceil(c/f*d.sample.count),g=Math.min(d.sample.maximum,g),g=Math.max(d.sample.minimum,g),this._sampleSizeChanged=g!=d.current.count?!0:!1,this._atSliderMin=this._atSliderMax=!1,g==d.sample.maximum?this._atSliderMax=!0:g==d.sample.minimum&&(this._atSliderMin=!0)):this._sampleSizeChanged=!1;a="~"+this._getLogTime(a);
b="~"+this._getLogTime(b);-1==a.indexOf("NaN")&&-1==b.indexOf("NaN")&&(this._movable.label.innerHTML=a,this._movableBar.label.innerHTML=g,this._movableMax.label.innerHTML=b)},_onMoveStart:function(a){this._currentlyMovingBar=this._movableBar.node===a.node;this._updateLabels();this._showLabels();g.emit(this,"moveStart")},_onMoveStop:function(){this._currentlyMovingBar=!1;this._hideLabels();g.emit(this,"moveStop")},_showLabels:function(){r.forEach(this.movables,function(a){c.set(this[a].label,"display",
"block")},this)},_hideLabels:function(){r.forEach(this.movables,function(a){c.set(this[a].label,"display","none")},this)},_onChange:function(a){a=this._lastDataObject;var b,c;this._parentWidget.trend.stopUpdating();if(this._sampleSizeChanged){this._sampleSizeChanged=!1;var d=this.get("value");b=Math.floor(d[1]-d[0]);c=Math.ceil(b/a.current.diff*a.current.count);d[0]==a.total.first&&d[1]==a.total.last&&(c=a.sample.maximum);c=Math.min(a.sample.maximum,c);c=Math.max(a.sample.minimum,c);a.current.count=
c;a.current.diff=b;this._parentWidget.sampleSizeTextBox.set("value",a.current.count)}a=parseFloat(this.value[1].toFixed(2));a+=n.getTimezoneOffsetMsec(a);this._parentWidget.setDateLast(new Date(a))},_getLogTime:function(a){a=new Date(a+n.getTimezoneOffsetMsec(a));var b="",c=a.getHours(),b=[a.getFullYear(),n.pad2(a.getMonth()+1),n.pad2(a.getDate())].join("/");return b+=" "+[c,n.pad2(a.getMinutes()),n.pad2(a.getSeconds())].join(":")},sortReversed:function(a,b){return b-a},sortForward:function(a,b){return a-
b},_setValueAttr:function(a,b,c){this.isMaxVal=c;var d=this.value,g,f;f=d[1]-d[0];if(m.isArray(a)){if(a[1]>this.maximum){g=a[1]-a[0];d[1]=this.maximum;d[0]=this.maximum-g;this._updateLabels();return}d=a}else if(g=c?a-d[0]:d[1]-a,this._atSliderMax&&g>f||this._atSliderMin&&g<f)if(c&&a-f>=this.minimum)d[1]=a,d[0]=a-f;else if(a+f<=this.maximum)d[0]=a,d[1]=a+f;else{this._updateLabels();return}else c?d[1]=a:d[0]=a;this._lastValueReported="";this.valueNode.value=this.value=a=d;this.sliderHandle.setAttribute("aria-valuenow",
d[0]);this.sliderHandleMax.setAttribute("aria-valuenow",d[1]);this.value.sort(this._isReversed()?this.sortReversed:this.sortForward);dijit.form._FormValueWidget.prototype._setValueAttr.apply(this,arguments);this._updateLabels();this._printSliderBar(b,c)},_connect:function(){this._onRemainingBarClick=this._onKeyPress=this._onKeyUp=function(a){return a};this.own(g(this._movable,"MoveStop",m.hitch(this,this._onChange)),g(this._movableMax,"MoveStop",m.hitch(this,this._onChange)),g(this._movableBar,"MoveStop",
m.hitch(this,this._onChange)))},set:function(a,b){this[a]&&(this[a]=b)},get:function(a){return this[a]},getSliderInfo:function(){return this._lastDataObject},setSliderInfo:function(a){var b,c=a.total.first,d=a.total.last,g=a.current.first,f=a.current.last,u=f-g;b=Math.floor(u/2);this._lastDataObject=a;a=f+b;a>d?(this.isMaxVal=!0,a=d,u-=d-f):(this.isMaxVal=!1,u-=b);b=g-u;b<c&&(u=c-b,b=c,a+=u,a>d&&(a=d));this.minimum=b;this.maximum=a;this._lastMin=g;this._lastMax=f;this._setValueAttr([g,f],!0,this.isMaxVal)},
destroy:function(){this._parentWidget=null;dijit.form._SliderMoverMax.prototype.widget=null;dijit.form._SliderBarMover.prototype.widget=null;this.inherited(arguments)}})})},"dojox/form/HorizontalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/HorizontalRangeSlider.html","dijit/form/HorizontalSlider"],function(r,p,m,l){return r("dojox.form.HorizontalRangeSlider",[l,p],{templateString:m})})},"dojox/form/_RangeSliderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/_base/event dojo/_base/sniff dojo/dom-style dojo/dom-geometry dojo/keys dijit dojo/dnd/Mover dojo/dnd/Moveable dijit/form/_FormValueWidget dijit/focus dojo/fx dojox/fx".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){var u=function(a,b){return a-b};a=r("dojox.form._RangeSliderMixin",null,{_setTabIndexAttr:["sliderHandle","sliderHandleMax"],value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=m.map(this.value,function(a){return parseInt(a,10)})},postCreate:function(){this.inherited(arguments);this.value.sort(u);var a=this,b=r(w,{constructor:function(){this.widget=a}});this._movableMax=new t(this.sliderHandleMax,{mover:b});this.sliderHandle.setAttribute("aria-valuemin",
this.minimum);this.sliderHandle.setAttribute("aria-valuemax",this.maximum);this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum);this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);b=r(z,{constructor:function(){this.widget=a}});this._movableBar=new t(this.progressBar,{mover:b});this.focusNode.removeAttribute("aria-valuemin");this.focusNode.removeAttribute("aria-valuemax");this.focusNode.removeAttribute("aria-valuenow")},destroy:function(){this.inherited(arguments);this._movableMax.destroy();
this._movableBar.destroy()},_onKeyPress:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey)){var b=a.target===this.sliderHandleMax,c=a.target===this.progressBar,f=p.delegate(n,this.isLeftToRight()?{PREV_ARROW:n.LEFT_ARROW,NEXT_ARROW:n.RIGHT_ARROW}:{PREV_ARROW:n.RIGHT_ARROW,NEXT_ARROW:n.LEFT_ARROW}),d=0,k=!1;switch(a.keyCode){case f.HOME:this._setValueAttr(this.minimum,!0,b);h.stop(a);return;case f.END:this._setValueAttr(this.maximum,!0,b);h.stop(a);return;case f.PREV_ARROW:case f.DOWN_ARROW:k=
!0;case f.NEXT_ARROW:case f.UP_ARROW:d=1;break;case f.PAGE_DOWN:k=!0;case f.PAGE_UP:d=this.pageIncrement;break;default:this.inherited(arguments);return}k&&(d=-d);d&&(c?this._bumpValue([{change:d,useMaxValue:!1},{change:d,useMaxValue:!0}]):this._bumpValue(d,b),h.stop(a))}},_onHandleClickMax:function(a){this.disabled||this.readOnly||(c("ie")||q.focus(this.sliderHandleMax),h.stop(a))},_onClkIncBumper:function(){this._setValueAttr(!1===this._descending?this.minimum:this.maximum,!0,!0)},_bumpValue:function(a,
b){var c=p.isArray(a)?[this._getBumpValue(a[0].change,a[0].useMaxValue),this._getBumpValue(a[1].change,a[1].useMaxValue)]:this._getBumpValue(a,b);this._setValueAttr(c,!0,b)},_getBumpValue:function(a,b){var c=b?1:0,f=g.getComputedStyle(this.sliderBarContainer),k=d.getContentBox(this.sliderBarContainer,f),f=this.discreteValues,c=this.value[c];if(1>=f||Infinity==f)f=k[this._pixelCount];f--;c=this.maximum>this.minimum?(c-this.minimum)*f/(this.maximum-this.minimum)+a:0;0>c&&(c=0);c>f&&(c=f);return c*(this.maximum-
this.minimum)/f+this.minimum},_onBarClick:function(a){this.disabled||this.readOnly||(c("ie")||q.focus(this.progressBar),h.stop(a))},_onRemainingBarClick:function(a){if(!this.disabled&&!this.readOnly){c("ie")||q.focus(this.progressBar);var b=d.position(this.sliderBarContainer,!0),f=d.position(this.progressBar,!0),k=a[this._mousePixelCoord],g=f[this._startingPixelCoord],f=g+f[this._pixelCount],g=this._isReversed()?k<=g:k>=f,k=this._isReversed()?b[this._pixelCount]-k+b[this._startingPixelCoord]:k-b[this._startingPixelCoord];
this._setPixelValue(k,b[this._pixelCount],!0,g);h.stop(a)}},_setPixelValue:function(a,b,c,f){this.disabled||this.readOnly||(a=this._getValueByPixelValue(a,b),this._setValueAttr(a,c,f))},_getValueByPixelValue:function(a,b){var c=this.discreteValues;if(1>=c||Infinity==c)c=b;c--;return(this.maximum-this.minimum)*Math.round((0>a?0:b<a?b:a)/(b/c))/c+this.minimum},_setValueAttr:function(a,b,c){var f=p.clone(this.value);p.isArray(a)?f=a:f[c?1:0]=a;this._lastValueReported="";this.valueNode.value=a=f;f.sort(u);
this.sliderHandle.setAttribute("aria-valuenow",f[0]);this.sliderHandleMax.setAttribute("aria-valuenow",f[1]);k.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(b,c)},_printSliderBar:function(a,b){var c=this.maximum>this.minimum?(this.value[0]-this.minimum)/(this.maximum-this.minimum):0,d=this.maximum>this.minimum?(this.value[1]-this.minimum)/(this.maximum-this.minimum):0,k=c;c>d&&(c=d,d=k);var g=this._isReversed()?100*(1-c):100*c,q=this._isReversed()?100*(1-d):100*d,u=this._isReversed()?
100*(1-d):100*c;if(a&&0<this.slideDuration&&this.progressBar.style[this._progressPixelSize]){if(parseFloat(this.progressBar.style[this._handleOffsetCoord]),k=this.slideDuration/10,0!==k){0>k&&(k=0-k);var n={},h={},t={};n[this._handleOffsetCoord]={start:this.sliderHandle.parentNode.style[this._handleOffsetCoord],end:g,units:"%"};h[this._handleOffsetCoord]={start:this.sliderHandleMax.parentNode.style[this._handleOffsetCoord],end:q,units:"%"};t[this._handleOffsetCoord]={start:this.progressBar.style[this._handleOffsetCoord],
end:u,units:"%"};t[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:100*(d-c),units:"%"};c=l.animateProperty({node:this.sliderHandle.parentNode,duration:k,properties:n});d=l.animateProperty({node:this.sliderHandleMax.parentNode,duration:k,properties:h});k=l.animateProperty({node:this.progressBar,duration:k,properties:t});f.combine([c,d,k]).play()}}else this.sliderHandle.parentNode.style[this._handleOffsetCoord]=g+"%",this.sliderHandleMax.parentNode.style[this._handleOffsetCoord]=
q+"%",this.progressBar.style[this._handleOffsetCoord]=u+"%",this.progressBar.style[this._progressPixelSize]=100*(d-c)+"%"}});var w=r("dijit.form._SliderMoverMax",b,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=d.position(b.sliderBarContainer,!0),b._setPixelValue_=p.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1,!0)},destroy:function(a){b.prototype.destroy.apply(this,
arguments);var c=this.widget;c._abspos=null;c._setValueAttr(c.value,!0)}}),z=r("dijit.form._SliderBarMover",b,{onMouseMove:function(a){var b=this.widget;if(!b.disabled&&!b.readOnly){var c=b._abspos,f=b._bar,k=b._mouseOffset;c||(c=b._abspos=d.position(b.sliderBarContainer,!0),b._setPixelValue_=p.hitch(b,"_setPixelValue"),b._getValueByPixelValue_=p.hitch(b,"_getValueByPixelValue"),b._isReversed_=b._isReversed());f||(f=b._bar=d.position(b.progressBar,!0));k||(k=b._mouseOffset=a[b._mousePixelCoord]-f[b._startingPixelCoord]);
a=a[b._mousePixelCoord]-c[b._startingPixelCoord]-k;pixelValues=[a,a+f[b._pixelCount]];pixelValues.sort(u);0>=pixelValues[0]&&(pixelValues[0]=0,pixelValues[1]=f[b._pixelCount]);pixelValues[1]>=c[b._pixelCount]&&(pixelValues[1]=c[b._pixelCount],pixelValues[0]=c[b._pixelCount]-f[b._pixelCount]);c=[b._getValueByPixelValue(b._isReversed_?c[b._pixelCount]-pixelValues[0]:pixelValues[0],c[b._pixelCount]),b._getValueByPixelValue(b._isReversed_?c[b._pixelCount]-pixelValues[1]:pixelValues[1],c[b._pixelCount])];
b._setValueAttr(c,!1,!1)}},destroy:function(){b.prototype.destroy.apply(this,arguments);var a=this.widget;a._abspos=null;a._bar=null;a._mouseOffset=null;a._setValueAttr(a.value,!0)}});return a})},"dojox/fx":function(){define(["./fx/_base"],function(r){return r})},"dojox/fx/_base":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),function(r,p,m,l,h,c,g,d,n){r=p.getObject("dojox.fx",!0);
p.mixin(r,{anim:m.anim,animateProperty:m.animateProperty,fadeTo:m._fade,fadeIn:m.fadeIn,fadeOut:m.fadeOut,combine:l.combine,chain:l.chain,slideTo:l.slideTo,wipeIn:l.wipeIn,wipeOut:l.wipeOut});r.sizeTo=function(a){var b=a.node=h.byId(a.node),d=a.method||"chain";a.duration||(a.duration=500);"chain"==d&&(a.duration=Math.floor(a.duration/2));var k,g,f,u,n,z=null,x=function(b){return function(){var d=c.getComputedStyle(b),q=d.position,h=d.width,t=d.height;k="absolute"==q?b.offsetTop:parseInt(d.top)||0;
f="absolute"==q?b.offsetLeft:parseInt(d.left)||0;n="auto"==h?0:parseInt(h);z="auto"==t?0:parseInt(t);u=f-Math.floor((a.width-n)/2);g=k-Math.floor((a.height-z)/2);"absolute"!=q&&"relative"!=q&&(d=c.coords(b,!0),k=d.y,f=d.x,b.style.position="absolute",b.style.top=k+"px",b.style.left=f+"px")}}(b),b=m.animateProperty(p.mixin({properties:{height:function(){x();return{end:a.height||0,start:z}},top:function(){return{start:k,end:g}}}},a)),d=m.animateProperty(p.mixin({properties:{width:function(){return{start:n,
end:a.width||0}},left:function(){return{start:f,end:u}}}},a));return l["combine"==a.method?"combine":"chain"]([b,d])};r.slideBy=function(a){var b,n,k=function(a){return function(){var f=c.getComputedStyle(a),d=f.position;b="absolute"==d?a.offsetTop:parseInt(f.top)||0;n="absolute"==d?a.offsetLeft:parseInt(f.left)||0;"absolute"!=d&&"relative"!=d&&(f=g.coords(a,!0),b=f.y,n=f.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=n+"px")}}(a.node=h.byId(a.node));k();a=m.animateProperty(p.mixin({properties:{top:b+
(a.top||0),left:n+(a.left||0)}},a));d.connect(a,"beforeBegin",a,k);return a};r.crossFade=function(a){var b=a.nodes[0]=h.byId(a.nodes[0]),c=n.style(b,"opacity"),d=a.nodes[1]=h.byId(a.nodes[1]);n.style(d,"opacity");return l.combine([m[0==c?"fadeIn":"fadeOut"](p.mixin({node:b},a)),m[0==c?"fadeOut":"fadeIn"](p.mixin({node:d},a))])};r.highlight=function(a){var b=a.node=h.byId(a.node);a.duration=a.duration||400;var c=a.color||"#ffff99",k=n.style(b,"backgroundColor");"rgba(0, 0, 0, 0)"==k&&(k="transparent");
a=m.animateProperty(p.mixin({properties:{backgroundColor:{start:c,end:k}}},a));"transparent"==k&&d.connect(a,"onEnd",a,function(){b.style.backgroundColor=k});return a};r.wipeTo=function(a){a.node=h.byId(a.node);var b=a.node,c=b.style,d=a.width?"width":"height",g={};g[d]={start:function(){c.overflow="hidden";if("hidden"==c.visibility||"none"==c.display)return c[d]="1px",c.display="",c.visibility="",1;var a=n.style(b,d);return Math.max(a,1)},end:a[d]};return m.animateProperty(p.mixin({properties:g},
a))};return r})},"rc/widget/TrendDateTextBox":function(){define(["dojo/_base/declare","dojo/date","rc/widget/DateTextBox"],function(r,p,m){return r("rc/widget/TrendDateTextBox",m,{compare:function(l,h){var c=this._isInvalidDate(l),g=this._isInvalidDate(h);return c?g?0:-1:g?1:p.compare(l,h)},_setValueAttr:function(l,h,c){var g;if(void 0!==l&&(g=this.filter(l),"string"!=typeof c)){c=null===g||"number"==typeof g&&isNaN(g)?"":this.filter(this.format(g,this.constraints));var d=this.filter(this.parse(c,
this.constraints));d.setHours(g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds());0!==this.compare(g,d)&&(c=null)}null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[g,h])},_setBlurValue:function(){}})})},"dojox/charting/plot2d/Default":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){var t=n.lambda("item.purgeGroup()");return p("dojox.charting.plot2d.Default",[h,c],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",zeroLine:0},constructor:function(b,c){this.opt=r.clone(r.mixin(this.opt,this.defaultParams));
a.updateWithObject(this.opt,c);a.updateWithPattern(this.opt,c,this.optionalParams);this.animate=this.opt.animate},createPath:function(a,b,c){var f;this.opt.enableCache&&0<a._pathFreePool.length?(f=a._pathFreePool.pop(),f.setShape(c),b.add(f)):f=b.createPath(c);this.opt.enableCache&&a._pathUsePool.push(f);return f},buildSegments:function(a,b){for(var c=this.series[a],d=b?Math.min(c.data.length,Math.ceil(this._hScaler.bounds.to)):c.data.length,k=null,g=[],q=b?Math.max(0,Math.floor(this._hScaler.bounds.from-
1)):0;q<d;q++)if(!this.isNullValue(c.data[q]))k||(k=[],g.push({index:q,rseg:k})),k.push(b&&c.data[q].hasOwnProperty("y")?c.data[q].y:c.data[q]);else if(!this.opt.interpolate||b)k=null;return g},render:function(a,c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents();this.dirty=this.isDirty();var f;this.dirty&&(m.forEach(this.series,t),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),f=this.getGroup(),d.forEachRev(this.series,function(a){a.cleanGroup(f)}));
for(var k=this.chart.theme,q,n,h=this.events(),p=0;p<this.series.length;p++){var v=this.series[p];if(this.dirty||v.dirty)if(v.cleanGroup(),this.opt.enableCache&&(v._pathFreePool=(v._pathFreePool?v._pathFreePool:[]).concat(v._pathUsePool?v._pathUsePool:[]),v._pathUsePool=[]),v.data.length){var A=k.next(this.opt.areas?"area":"line",[this.opt,v],!0),C,E=this._hScaler.scaler.getTransformerFromModel(this._hScaler),B=this._vScaler.scaler.getTransformerFromModel(this._vScaler),D=this._eventSeries[v.name]=
Array(v.data.length);f=v.group;if(v.hidden){this.opt.lines&&(v.dyn.stroke=A.series.stroke);if(v.markers||void 0===v.markers&&this.opt.markers)v.dyn.markerFill=A.marker.fill,v.dyn.markerStroke=A.marker.stroke,v.dyn.marker=A.symbol;this.opt.areas&&(v.dyn.fill=A.series.fill)}else{for(var F=m.some(v.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),H=this.buildSegments(p,F),J=0;J<H.length;J++){var G=H[J];C=F?m.map(G.rseg,function(b,f){return{x:E(f+G.index+1)+c.l,y:a.height-c.b-B(b),
data:b}},this):m.map(G.rseg,function(b){return{x:E(b.x)+c.l,y:a.height-c.b-B(b.y),data:b}},this);if(F&&this.opt.interpolate)for(;J<H.length;)J++,(G=H[J])&&(C=C.concat(m.map(G.rseg,function(b,f){return{x:E(f+G.index+1)+c.l,y:a.height-c.b-B(b),data:b}},this)));var I=this.opt.tension?g.curve(C,this.opt.tension):"";if(this.opt.areas&&1<C.length){var K=this._plotFill(A.series.fill,a,c),L=r.clone(C),M=a.height-c.b;isNaN(this.opt.zeroLine)||(M=Math.max(c.t,Math.min(a.height-c.b-B(this.opt.zeroLine),M)));
this.opt.tension?v.dyn.fill=f.createPath(I+" "+("L"+L[L.length-1].x+","+M+" L"+L[0].x+","+M+" L"+L[0].x+","+L[0].y)).setFill(K).getFill():(L.push({x:C[C.length-1].x,y:M}),L.push({x:C[0].x,y:M}),L.push(C[0]),v.dyn.fill=f.createPolyline(L).setFill(K).getFill())}if(this.opt.lines||this.opt.markers)q=A.series.stroke,A.series.outline&&(n=v.dyn.outline=g.makeStroke(A.series.outline),n.width=2*n.width+(q&&q.width||0));this.opt.markers&&(v.dyn.marker=A.symbol);var O=null,P=null,Q=null;if(q&&A.series.shadow&&
1<C.length){var T=A.series.shadow,K=m.map(C,function(a){return{x:a.x+T.dx,y:a.y+T.dy}});this.opt.lines&&(v.dyn.shadow=this.opt.tension?f.createPath(g.curve(K,this.opt.tension)).setStroke(T).getStroke():f.createPolyline(K).setStroke(T).getStroke());this.opt.markers&&A.marker.shadow&&(T=A.marker.shadow,Q=m.map(K,function(a){return this.createPath(v,f,"M"+a.x+" "+a.y+" "+A.symbol).setStroke(T).setFill(T.color)},this))}if(this.opt.lines&&1<C.length){var R;n&&(v.dyn.outline=this.opt.tension?f.createPath(I).setStroke(n).getStroke():
f.createPolyline(C).setStroke(n).getStroke());v.dyn.stroke=this.opt.tension?(R=f.createPath(I)).setStroke(q).getStroke():(R=f.createPolyline(C)).setStroke(q).getStroke();R.setFilter&&A.series.filter&&R.setFilter(A.series.filter)}I=null;if(this.opt.markers){var S=A,O=Array(C.length),P=Array(C.length);n=null;S.marker.outline&&(n=g.makeStroke(S.marker.outline),n.width=2*n.width+(S.marker.stroke?S.marker.stroke.width:0));m.forEach(C,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var c=
"number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&c.push(this.opt.styleFunc(a.data));S=k.addMixin(A,"marker",c,!0)}else S=k.post(A,"marker");c="M"+a.x+" "+a.y+" "+S.symbol;n&&(P[b]=this.createPath(v,f,c).setStroke(n));O[b]=this.createPath(v,f,c).setStroke(S.marker.stroke).setFill(S.marker.fill)},this);v.dyn.markerFill=S.marker.fill;v.dyn.markerStroke=S.marker.stroke;!I&&this.opt.labels&&(I=O[0].getBoundingBox());h?m.forEach(O,function(a,b){var c={element:"marker",index:b+G.index,run:v,shape:a,
outline:P[b]||null,shadow:Q&&Q[b]||null,cx:C[b].x,cy:C[b].y};F?(c.x=b+G.index+1,c.y=v.data[b+G.index]):(c.x=G.rseg[b].x,c.y=v.data[b+G.index].y);this._connectEvents(c);D[b+G.index]=c},this):delete this._eventSeries[v.name]}if(this.opt.labels){var aa=I?I.width:2,N=I?I.height:2;m.forEach(C,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var c="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&c.push(this.opt.styleFunc(a.data));S=k.addMixin(A,"marker",c,!0)}else S=k.post(A,"marker");
this.createLabel(f,G.rseg[b],{x:a.x-aa/2,y:a.y-N/2,width:aa,height:N},S)},this)}}v.dirty=!1}}else v.dirty=!1,k.skip();else k.skip(),this._reconnectEvents(v.name)}l("dojo-bidi")&&this._checkOrientation(this.group,a,c);this.animate&&(q=this.getGroup(),b.animateTransform(r.delegate({shape:q,duration:1200,transform:[{name:"translate",start:[0,a.height-c.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(r,p,m,l){return m("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(h){},raiseEvent:function(h){this.plotEvent(h);var c=r.delegate(h);c.originalEvent=h.type;c.originalPlot=h.plot;c.type="onindirect";p.forEach(this.chart.stack,function(g){g!==this&&g.plotEvent&&(c.plot=g,g.plotEvent(c))},
this)},connect:function(h,c){this.dirty=!0;return l.connect(this,"plotEvent",h,c)},events:function(){return!!this.plotEvent.after},resetEvents:function(){this._shapeEvents.length&&(p.forEach(this._shapeEvents,function(h){h.shape.disconnect(h.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(h,c){this._shapeEvents.push({shape:h.eventMask,handle:h.eventMask.connect(c,this,function(g){h.type=c;h.event=g;this.raiseEvent(h);h.event=null})})},
_connectEvents:function(h){h&&(h.chart=this.chart,h.plot=this,h.hAxis=this.hAxis||null,h.vAxis=this.vAxis||null,h.eventMask=h.eventMask||h.shape,this._connectSingleEvent(h,"onmouseover"),this._connectSingleEvent(h,"onmouseout"),this._connectSingleEvent(h,"onclick"))},_reconnectEvents:function(h){(h=this._eventSeries[h])&&p.forEach(h,this._connectEvents,this)},fireEvent:function(h,c,g,d){(h=this._eventSeries[h])&&h.length&&g<h.length&&(g=h[g],g.type=c,g.event=d||null,this.raiseEvent(g),g.event=null)}})})},
"rc/widget/charting/Crosshairs":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/Evented dojo/has dojo/on dojo/text!./templates/Crosshairs.html dojo/sniff".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k){return l("rc/widget/charting/Crosshairs",[p,r,a],{templateString:k,_offsets:null,_dim:null,_plotArea:null,_labelTop:null,_isDisabled:!1,_isShowing:!1,_yLabels:null,
yLabelNames:null,_pconnects:null,_quadrantOffsets:null,postCreate:function(){this._pconnects=[];this._yLabels=[];this.yLabelNames=[];this.inherited(arguments);this.position();this.hide();b("touch")?(c.add(this.yLabelDiv,"yCrosshairTouchLabel"),this.own(t(this,"show",h.hitch(this,this._showTouchLabels)))):this.own(t(this,"show",h.hitch(this,this._showAxisLabels)));this._quadrantOffsets=[];this._quadrantOffsets.tl={yl:5,yt:25,xt:5,xl:5,ta:"left"};this._quadrantOffsets.tr={yl:0,yt:25,xt:5,xl:0,ta:"right"};
this._quadrantOffsets.bl={yl:5,yt:-50,xt:-22,xl:5,ta:"left"};this._quadrantOffsets.br={yl:0,yt:-50,xt:-22,xl:0,ta:"right"}},position:function(){this._plotWidth=this._dim.width-this._offsets.l-this._offsets.r;n.set(this.containerNode,{height:this._dim.height+"px",width:this._dim.width+"px",top:"0px",left:"0px"});n.set(this.xLabelDiv,{top:this._labelTop+"px"});n.set(this.xLineDiv,{height:this._plotArea.height+"px",top:this._offsets.t+"px"});0>this._plotArea.width&&(this._plotArea.width=1);n.set(this.yLineDiv,
{left:this._offsets.firstYAxisOffset+"px",width:this._plotArea.width+"px"})},hide:function(){n.set(this.containerNode,{visibility:"hidden"});this._isShowing=!1},show:function(a,b,c,d){this._isDisabled||(n.set(this.containerNode,{visibility:"visible"}),n.set(this.xLineDiv,{left:a+"px"}),n.set(this.yLineDiv,{top:b+"px"}),this._isShowing=!0);this.xLabelDiv.innerHTML=c;m.forEach(d,function(a,b){this.yLabelDiv.childNodes[b].innerHTML=parseFloat(a,10).toFixed(2)},this);this.emit("show",a,b)},_showTouchLabels:function(a,
b){if(!this._isDisabled){var c=b-this._offsets.t>this._plotArea.height/2?"b":"t",f,k;a-this._offsets.l<this._plotWidth/2?c+="l":(c+="r",f=d.getMarginBox(this.yLabelDiv),k=d.getMarginBox(this.xLabelDiv));c=this._quadrantOffsets[c];n.set(this.xLabelDiv,{left:a+(k?-1*k.w-5:c.xl)+"px",top:b+c.xt+"px"});n.set(this.yLabelDiv,{top:b+c.yt+"px",left:a+(f?-1*f.w:c.yl)+"px",textAlign:c.ta})}},_showAxisLabels:function(a,b){this._isDisabled||(n.set(this.xLabelDiv,{left:a-67+"px"}),n.set(this.yLabelDiv,{top:b-
8+"px"}))},setDisabled:function(a){this._isDisabled=a},addYLabel:function(a,b){this.yLabelNames.push(a);this.yLabelDiv.appendChild(b);this._yLabels[a]={html:b}},toggleYLabel:function(a,b,c,d){b={display:b?"inline":"none",width:(null!=c?c-1:0)+"px"};d&&(b.color=d);n.set(this._yLabels[a].html,b)},reposition:function(a,b,c){this._offsets=a;this._dim=b;this._plotArea=c;this.position()},repositionLabelTop:function(a){this._labelTop=a},destroy:function(){m.forEach(this.yLabelNames,function(a){this._yLabels[a]&&
(g.destroy(this._yLabels[a].html),this._yLabels[a].html=null)},this);this._yLabels=null;this.inherited(arguments)}})})},"rc/bacnet/TrendAsRuntimeLog":function(){define(["dojo/_base/declare","./enums","./RuntimeLog","./Object"],function(r,p,m,l){return r("rc/bacnet/TrendAsRuntimeLog",m,{constructor:function(h){this.pointName=h.logObject},_getPointInfo:function(){this.pointBTL=new l(this.mainController,p.objectTypes.OBJID_TREND_LOG,this.pointInstance)},_jobLoaded:function(){}})})},"rc/bacnet/TrendMultiple":function(){define(["dojo/_base/declare",
"./io/LogMultipleRecord","./Trend"],function(r,p,m){return r("rc/bacnet/TrendMultiple",m,{_logType:27,_recordClass:p})})},"rc/reliable/Alarm":function(){define("dgrid/Grid dgrid/extensions/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/OnDemandGrid dgrid/Selection dijit/Dialog dijit/form/Button dijit/form/Form dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/cookie dojo/Deferred dojo/dom-construct dojo/dom-class dojo/dom-style dojo/fx dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/json dijit/MenuItem dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!rc/reliable/_alarm/templates/Alarm.html dojo/topic ../_base/Error ../_Widget ../bacnet/io/Number ../bacnet/io/service/GetEnrollmentSummary ../widget/AlarmWidget ../widget/Retry ../sys/job ../util/notices dojo/sniff dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/Toolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R){return b("rc/reliable/Alarm",[P,L],{templateString:G,_isUpdating:!1,_watchNotices:[],cacheEnabled:!1,_buttons:null,_loadEventHandle:null,_syncLoadEvent:null,_syncButton:null,_canEdit:!0,_fetchDef:null,_grid:null,_animDuration:500,constructor:function(){this._gridStore=new H(new F({idProperty:"id",data:[]}));this.rcStrings=A},postCreate:function(){this._hasPermissions()?(this._canEdit=rc.session.hasRole(rc.session.roles.alarmAck),
this.inherited(arguments),this._noDataMsg=v.noAlarms,this._defaultQuery=null,this._isUpdating=!1,this._retryHandler=new Q,this.own(this._retryHandler),this.setUpToolbar(this.container),this._createGrid(),this.container.startup(),this._setCustomSort(this._grid.store),rc.test.isLive()&&this.fetch().then(k.hitch(this._grid,"resize"))):setTimeout(k.hitch(this,function(){var a=new K({name:A.permissionDenied,message:J.substitute(A.notAuthToViewX,[A.theAlarmList.toLowerCase()])});this._onInitError(a)}),
1)},_hasPermissions:function(){return!rc.session.hasRole(rc.session.roles.alarmDisable)||rc.session.hasRole(rc.session.roles.viewAlarms)},_getTitle:function(){this._setTitle(A.alarms)},resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(k.hitch(this,function(){this._grid.resize()}),1)},_setTitle:function(a){this.fullTitle=this.title=a;this._toolbar&&this.title&&this._toolbar.setTitle(this.title);this.onSetTitle(this.title)},_denyAccess:function(){var a=new K({name:A.permissionDenied,
message:J.substitute(A.notAuthToViewX,[A.theAlarmList.toLowerCase()])});this._onInitError(a)},_createToolbar:function(){if(this._loadButton=this._toolbar.getButton("Load"))this._loadEventHandle=B(this._loadButton,"click",k.hitch(this,this.fetch)),this.own(this._loadEventHandle);this._attachPoints.push("_loadButton");this._printButton=this._toolbar.getButton("Print");this.own(B(this._printButton,"click",k.hitch(this,this.print)));this._attachPoints.push("_printButton");this._exportButton=this._toolbar.getButton("Export");
this.own(B(this._exportButton,"click",k.hitch(this,this.exportCsv)));this._attachPoints.push("_exportButton");this._canEdit&&(this._ackButton=this._toolbar.addButton("ack","checkIcon","center"),this._ackButton.set("label",A.ack),this._attachPoints.push("_ackButton"),this.own(B(this._ackButton,"click",k.hitch(this,this.ackAlarm))),this._clearButton=this._toolbar.addButton("clear","xIcon","center"),this._clearButton.set("label",A.clear),this._attachPoints.push("_clearButton"),this.own(B(this._clearButton,
"click",k.hitch(this,this.clearAlarm))),this._selectButton=this._toolbar.addButton("selectAll","selectIcon","center"),this._selectButton.set("label",A.tbSelectAll),this._attachPoints.push("_selectButton"),this.own(B(this._selectButton,"click",k.hitch(this,this.selectAllNone))));rc.session.hasRole(rc.session.roles.bacnetAdvChg)&&(this._syncButton=this._toolbar.addButton("syncBacnet","refreshIcon","right"),this._syncButton.set("label",v.syncBacnetAlarms),this._attachPoints.push("_syncButton"),this._syncLoadEvent=
B(this._syncButton,"click",k.hitch(this,this.syncBacnet)),this._syncLoader=w.create("span",{className:"syncLoader"},this._syncButton.titleNode,"first"),rc.session.hasRole(rc.session.roles.bacnetAdvChg)&&(this.fetchUnackedAlarmsButton=new E({label:v.unackedAlarms}),this._attachPoints.push("fetchUnackedAlarmsButton"),this.own(B(this.fetchUnackedAlarmsButton,"click",k.hitch(this,this.fetchUnackedAlarms))),this._toolbar.moreMenu.addChild(this.fetchUnackedAlarmsButton)));return this._toolbar},_getGridStructure:function(a){this._cols=
[];null===a?(this._cols.push({field:"time",label:v.alarmTime,id:"AlarmTimeCol",className:"alarmTimeCell",formatter:k.hitch(this,function(a,b){return this._alarmConfig.formatTime(a,b,"time")})}),this._cols.push({field:"type",label:v.alarmType,id:"AlarmTypeCol",className:"alarmTypeCell",formatter:k.hitch(this._alarmConfig,this._alarmConfig.formatType)}),this._cols.push({field:"messageText",label:v.alarmMessage,id:"AlarmMessageCol",className:"alarmMessageCell",formatter:k.hitch(this._alarmConfig,this._alarmConfig.formatMessage)}),
this._cols.push({field:"state",label:v.state,id:"AlarmStateCol",className:"alarmStateCell"}),this._cols.push({field:"priority",label:v.alarmPriority,id:"AlarmPriorityCol",className:"alarmPriorityCell",formatter:k.hitch(this,this._formatAlarmPriority)}),this._cols.push({field:"source",label:v.alarmSource,id:"AlarmSourceCol",className:"alarmSourceCell",formatter:k.hitch(this,this._formatAlarmSource)}),this._cols.push({field:"timeAck",label:v.alarmTimeAck,id:"AlarmAckCol",className:"alarmTimeAckCell",
formatter:k.hitch(this,this._alarmConfig.formatTime),hidden:!0}),this._cols.push({field:"timeReset",label:v.alarmTimeReset,id:"AlarmTimeResetCol",className:"alarmTimeResetCell",formatter:k.hitch(this,this._alarmConfig.formatTime),hidden:!0}),this._cols.push({field:"action",label:v.action,id:"AlarmActionCol",className:"alarmActionCell",formatter:k.hitch(this,this._alarmConfig.formatAction),hidden:!0})):(this._cols[a.AlarmTimeCol.index]={field:"time",label:v.alarmTime,id:"AlarmTimeCol",className:"alarmTimeCell",
width:a.AlarmTimeCol.width,hidden:a.AlarmTimeCol.hidden,formatter:k.hitch(this,function(a,b){return this._alarmConfig.formatTime(a,b,"time")})},this._cols[a.AlarmTypeCol.index]={field:"type",label:v.alarmType,id:"AlarmTypeCol",className:"alarmTypeCell",width:a.AlarmTypeCol.width,hidden:a.AlarmTypeCol.hidden,formatter:k.hitch(this._alarmConfig,this._alarmConfig.formatType)},this._cols[a.AlarmMessageCol.index]={field:"messageText",label:v.alarmMessage,id:"AlarmMessageCol",className:"alarmMessageCell",
width:a.AlarmMessageCol.width,hidden:a.AlarmMessageCol.hidden,formatter:k.hitch(this._alarmConfig,this._alarmConfig.formatMessage)},this._cols[a.AlarmStateCol.index]={field:"state",label:v.state,id:"AlarmStateCol",className:"alarmStateCell",width:a.AlarmStateCol.width,hidden:a.AlarmStateCol.hidden},this._cols[a.AlarmPriorityCol.index]={field:"priority",label:v.alarmPriority,id:"AlarmPriorityCol",className:"alarmPriorityCell",width:a.AlarmPriorityCol.width,hidden:a.AlarmPriorityCol.hidden,formatter:k.hitch(this,
this._formatAlarmPriority)},this._cols[a.AlarmSourceCol.index]={field:"source",label:v.alarmSource,id:"AlarmSourceCol",className:"alarmSourceCell",width:a.AlarmSourceCol.width,hidden:a.AlarmSourceCol.hidden,formatter:k.hitch(this,this._formatAlarmSource)},this._cols[a.AlarmAckCol.index]={field:"timeAck",label:v.alarmTimeAck,id:"AlarmAckCol",className:"alarmTimeAckCell",width:a.AlarmAckCol.width,hidden:a.AlarmAckCol.hidden,formatter:k.hitch(this,this._alarmConfig.formatTime)},this._cols[a.AlarmTimeResetCol.index]=
{field:"timeReset",label:v.alarmTimeReset,id:"AlarmTimeResetCol",className:"alarmTimeResetCell",width:a.AlarmTimeResetCol.width,hidden:a.AlarmTimeResetCol.hidden,formatter:k.hitch(this,this._alarmConfig.formatTime)},this._cols[a.AlarmActionCol.index]={field:"action",label:v.action,id:"AlarmActionCol",className:"alarmActionCell",width:a.AlarmActionCol.width,hidden:a.AlarmActionCol.hidden,formatter:k.hitch(this,this._alarmConfig.formatAction)})},_mixCookieStructure:function(){var a=f("al"),b={};if(a&&
a)try{b=C.parse(a)}catch(N){console.error(this.declaredClass+" - _mixCookieStructure(): Error using saved settings",N),f("al",null,{expires:-1,path:"/"}),window.location.reload()}a&&void 0!==b.sort||(b.sort=this.defaultSort);return b},_createGrid:function(){var a=this._mixCookieStructure();1<Object.keys(a).length?this._getGridStructure(a):this._getGridStructure(null);this._constructGrid(a);this._connectGrid();return this._grid},_connectGrid:function(){this.own(q.after(this._grid,"renderRow",k.hitch(this,
this._styleAlarm)),B(this._grid,"dgrid-columnreorder",k.hitch(this,this._saveSettings)),B(this._grid,"dgrid-columnresize",k.hitch(this,this._saveSettings)),B(this._grid,"dgrid-columnstatechange",k.hitch(this,this._saveSettings)),q.after(this._grid,"updateSortArrow",k.hitch(this,this._saveSettings)),B(this._grid,["dgrid-select","dgrid-deselect"],k.hitch(this,this._updateButtonsAckClear)),q.after(this._grid,"selectAll",k.hitch(this,function(){this.allSelected=!0})))},_constructGrid:function(a){null===
this._grid&&(this._grid=new (b([r,h,c,p,m,l]))({region:"center",sort:null!==a?a.sort:this.defaultSort,store:this._gridStore,columns:this._cols,isPagingGrid:!1,maxRowsPerPage:128,bufferRows:16,maxEmptySpace:10,selectionMode:this._canEdit?"extended":"none",allowTextSelection:!1,noDataMessage:this._noDataMsg},this.gridNode),this._grid.startup(),this.container.addChild(this.gridContainer))},_fetch:function(){var a=new u;this._fetchIndex=rc.AlarmLoader.addFetch(null,k.hitch(this,function(b){this._connectData();
this._mergeStats();this._loadCache();a.resolve(b);return b}),null,!0);return a.promise},fetch:function(a){this._stopSync();if(!this._beginUpdate())return null;var b=this.cacheEnabled;this.cacheEnabled=!1;this._fetchDef=this._retryHandler.notifyRetry({action:k.hitch(this,this._fetch),retryMsg:A.communicationProblem+" "+A.retryingIn,failMsg:J.substitute(A.communicationFail,[window.location.href]),tries:3});this._fetchDef.then(k.hitch(this,function(a){this.onInitSuccess();this._endUpdate();return a}),
k.hitch(this,function(a){this._endUpdate();a=this.safeError(a,{name:J.substitute(A.xNotFound,[A.rc_reliable_Alarm]),message:this._replace(A.couldNotLoad)+" "+A.objNotFound,suggestion:A.objNotFoundFix});this._onInitError(a)}));this._fetchDef.always(k.hitch(this,function(){this.cacheEnabled=b}));return this._fetchDef},_startSyncAnimation:function(){this._syncAnimation=this._startAnimation(this._syncButton.containerNode)},_animateSyncButton:function(){this._syncButton.set("label",v.stopSynchronizingAlarms);
this._startSyncAnimation(this._syncButton);return setInterval(k.hitch(this,"_startSyncAnimation"),2E3)},_resetSyncButton:function(){this._syncAnimation&&this._syncAnimation.stop();x.set(this._syncButton.containerNode,{opacity:1});var a=D(".refreshIcon",this._syncButton.titleNode)[0];x.set(a,{display:"inline-block"});x.set(this._syncLoader,{display:"none"});clearInterval(this.syncTimer);this._syncButton.set("label",v.syncBacnetAlarms);null!==this._syncLoadEvent&&(this._syncLoadEvent.remove(),this._syncLoadEvent=
null);this._syncLoadEvent=B(this._syncButton,"click",k.hitch(this,this.syncBacnet))},_startSync:function(){var a=D(".refreshIcon",this._syncButton.titleNode)[0];x.set(a,{display:"none"});x.set(this._syncLoader,{display:"inline-block"});null!==this._syncLoadEvent&&(this._syncLoadEvent.remove(),this._syncLoadEvent=null);this._syncLoadEvent=B(this._syncButton,"click",k.hitch(this,this._stopSync));return this._animateSyncButton()},_stopSync:function(){this._syncButton&&(this._resetSyncButton(),this.syncDef&&
1!=this.syncDef.fired&&this.syncDef.cancel(),rc.AlarmLoader.stopSync())},syncBacnet:function(a){a=new u;try{this.syncTimer=this._startSync();if(!this._beginUpdate())return a.resolve(!0),a.promise;var b=rc.AlarmLoader.syncBacnet(null);b?(a=this.syncDef=b,this.syncDef.always(k.hitch(this,function(){this._stopSync()}))):(this._stopSync(),a.resolve(!0));this.onInitSuccess();this._endUpdate()}catch(N){a.reject(new K("Error in rc.reliable.alarm.syncBacnet"))}return a.promise},_beginUpdate:function(){if(this._isUpdating)return!1;
this._isUpdating=!0;this._disableButtons(!0);this._retryHandler.reset();this._clearNotices();return!0},_endUpdate:function(){if(!this._isUpdating)return!1;this._isUpdating=!1;this._disableButtons(!1);this._updateButtonsAckClear();return!0},_updateFail:function(a){this._retryHandler.fail(a instanceof K?a.message:A.updateProblem)},_disableButtons:function(a){for(var b in this._buttons)"undefined"!==typeof this._buttons[b].set&&this._buttons[b].set("disabled",a)},_updateButtonsAckClear:function(){if(!this._isUpdating){var a=
Object.keys(this._grid.selection);this._setButtonState(a);this.cacheEnabled=0<a.length&&this._canEdit;this.allSelected=!1}},_setButtonState:function(a){if(this._canEdit){var b=0>=a.length,c=!0;if(!b){var c=!1,f;a.forEach(k.hitch(this,function(a){(f=this._grid.store.get(a))&&0!==f.acknowledged&&(c=!0)}))}this._ackButton.set("disabled",c);this._clearButton.set("disabled",b);this._selectButton.set("label",a.length?A.tbSelectNone:A.tbSelectAll)}},_animateLoadButton:function(){this._loadButton.set("label",
v.loadChanges);this._startAnimation(this._loadButton.containerNode)},_startAnimation:function(a){a=[t.fadeOut({node:a,duration:this._animDuration}),t.fadeIn({node:a,duration:this._animDuration})];a=a.concat(a);a=y.chain(a);a.play();return a},_updateCache:function(){this.inherited(arguments);this._mergeStats();this.cacheEnabled?(this._loadEventHandle&&this._loadEventHandle.remove(),this._loadEventHandle=B(this._loadButton,"click",k.hitch(this,this._loadCache)),this.own(this._loadEventHandle),this._animateLoadButton()):
this._loadCache()},_loadCache:function(){this._resetLoadButton();this.selectAll(!1);return this._updateStore()},_resetLoadButton:function(){this._loadEventHandle&&this._loadEventHandle.remove();this._loadEventHandle=B(this._loadButton,"click",k.hitch(this,this.fetch));this.own(this._loadEventHandle);this._loadButton.set("label",A.load)},ackAlarm:function(a){this._editAlarms(1,this._getSelectedRows())},clearAlarm:function(a){a=this._getSelectedRows();this.allSelected?(this._confirmDlg||this._buildConfirmDialog(),
this._confirmDlg.show()):this._editAlarms(0,a)},_getSelectedRows:function(){var b=[];if(this.allSelected)b=this._grid.store.query();else{var c=Object.keys(this._grid.selection);a.forEach(c,k.hitch(this,function(a){b.push(this._grid.store.get(a))}))}return b},_buildConfirmDialog:function(){this._confirmDlg=new g({className:"warningDialog",title:v.warning,content:v.confirmClearAlarms,width:"26em"});w.create("div",{className:"rcBigWarningIcon"},this._confirmDlg.containerNode);this._containerForm=new n({},
w.create("div",{},this._confirmDlg.containerNode));var a=w.create("p",{className:"buttons"},this._containerForm.domNode);this._okBtn=new d({label:A.btnOk,type:"button",baseClass:"okButton",onClick:k.hitch(this,function(){this._confirmDlg.hide();this._editAlarms(0,this._getSelectedRows())})},w.create("span",{},a));this._cancelBtn=new d({label:A.btnCancel,type:"button",baseClass:"cancelButton",onClick:k.hitch(this,function(){this._confirmDlg.hide()})},w.create("span",{},a))},_editAlarms:function(a,
b){this._stopSync();if(!this._beginUpdate())return null;R.widget&&R.widget.clear();R.widget.sticky({message:A.saving}).then(k.hitch(this,function(c){this._watchNotices.push(c);this.cacheEnabled=!1;rc.AlarmLoader.editAlarms(a,b).always(k.hitch(this,function(){this._grid.clearSelection();this._endUpdate();this._clearNotices()})).otherwise(k.hitch(this,function(a){I.publish("sticky",{message:A.couldNotSaveAll+(a instanceof K?" "+a.message+" ":" ")+A.pleaseTryAgain})}))}))},_clearNotices:function(){a.forEach(this._watchNotices,
function(a){a.clear()});this._watchNotices=[]},selectAll:function(a){a?this._grid.selectAll():this._grid.clearSelection()},selectAllNone:function(a){a=Object.keys(this._grid.selection);this._selectButton.set("label",a.length?A.tbSelectAll:A.tbSelectNone);this.selectAll(!a.length)},_formatAlarmPriority:function(a,b){if(0==a&&null!=this._alarmConfig.data){var c=this._grid.store.get(b.id);"object"===typeof c&&(a=this._alarmConfig.get("alarmDefaultPriority",c.type))}return this._alarmConfig.formatPriority(a)},
_formatAlarmSource:function(a,b){var c="";try{c=a.toString(),b.isBacnet&&rc.sys.desc.data&&(c=rc.sys.desc.getBacnetDeviceName(a)+" ("+a.toString()+")")}catch(U){c=""}return c},_styleAlarm:function(a,b){var c=b[0];c&&(c.restored?z.add(a,"alarmRestored"):c.acknowledged?z.add(a,"alarmAck"):z.add(a,"alarm"));return a},_saveSettings:function(){var b={},c=this._grid._columnHiderRules;a.forEach(this._grid.subRows[0],function(a,f){b[a.id]={index:f};a.hasOwnProperty("width")&&(b[a.id].width=a.width);b[a.id].hidden=
c.hasOwnProperty(a.id)});b.sort=this._grid.get("sort");f("al",C.stringify(b),{expires:365,path:"/"})},fetchUnackedAlarms:function(){var a=new u;this.own(a);a.resolve(!0);T.loadOnce().then(k.hitch(this,function(){var a,b;for(b in T.data)b.match(/DEV/)&&(a=b.split("DEV")[0],T.hasFlag(b,"ServicesSupport1",8)&&rc.xhr.request({gid:"ALARMP",type:"bacnet",s:new O({device:a},{af:new M(2,9)})}))}));return a.promise},print:function(){this.printDGrid(this._grid)},exportCsv:function(){this.exportToCSV(this._grid,
"alarm.csv",this.fullTitle)},destroy:function(){this._fetchDef&&this._fetchDef.cancel();this._loadEventHandle&&this._loadEventHandle.remove();this.syncDef&&this.syncDef.cancel();null!==this._syncLoadEvent&&this._syncLoadEvent.remove();clearInterval(this.syncTimer);this._buttons=this._sendCache=null;this.inherited(arguments)}})})},"dgrid/extensions/ColumnHider":function(){define("dojo/_base/declare dojo/has dojo/on ../util/misc put-selector/put dojo/i18n!./nls/columnHider xstyle/css!../css/extensions/ColumnHider.css".split(" "),
function(r,p,m,l,h,c){var g,d,n=p("ie"),a=n&&p("quirks"),b=8>n||a?"htmlFor":"for";return r(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:c,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var a=this.subRows,b=!0,c,f,d,g;delete this._columnHiderFirstCheckbox;d=0;for(c=a.length;d<c;d++)for(g=0,f=a[d].length;g<f;g++)this._renderHiderMenuEntry(a[d][g]),b&&(b=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[a[d][g].id])},
_renderHiderMenuEntry:function(a){var c=a.id,d=l.escapeCssIdentifier(c,"-"),f,g;a.hidden&&(a.hidden=!1,this._hideColumn(c),a.hidden=!0);a.unhidable||(f=h("div.dgrid-hider-menu-row"),g=this.domNode.id+"-hider-menu-check-"+d,c=this._columnHiderCheckboxes[c]=h(f,"input.dgrid-hider-menu-check.hider-menu-check-"+d+"[type\x3dcheckbox]"),c.id=g,h(f,"label.dgrid-hider-menu-label.hider-menu-label-"+d+"["+b+"\x3d"+g+"]",a.label||a.field||""),h(this.hiderMenuNode,f),a.hidden||(c.checked=!0))},renderHeader:function(){function b(a){a.stopPropagation()}
var c=this,q=this.hiderMenuNode,f=this.hiderToggleNode,u;this.inherited(arguments);if(q){for(u in this._columnHiderRules)this._columnHiderRules[u].remove();q.innerHTML=""}else f=this.hiderToggleNode=h(this.domNode,"button.ui-icon.dgrid-hider-toggle[type\x3dbutton][aria-label\x3d"+this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(m(f,"click",function(a){c._toggleColumnHiderMenu(a)})),q=this.hiderMenuNode=h("div.dgrid-hider-menu[role\x3ddialog][aria-label\x3d"+this.i18nColumnHider.popupLabel+
"]"),q.id=this.id+"-hider-menu",this._listeners.push(m(q,"keyup",function(a){27===(a.charCode||a.keyCode)&&(c._toggleColumnHiderMenu(a),f.focus())})),q.style.display="none",h(this.domNode,q),this._listeners.push(m(q,".dgrid-hider-menu-check:"+(9>n||a?"click":"change"),function(a){c._updateColumnHiddenState(a.target.id.substr(c.id.length+18),!a.target.checked)})),this._listeners.push(m(q,"mousedown",b),m(f,"mousedown",b)),d||(d=m.pausable(document,"mousedown",function(a){g&&g._toggleColumnHiderMenu(a)}),
d.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);for(var a in this._columnHiderRules)this._columnHiderRules[a].remove()},left:function(a,b){return this.right(a,-b)},right:function(a,b){a.element||(a=this.cell(a));for(var c=this.inherited(arguments),f=a;c.column.hidden;){c=this.inherited(arguments,[c,0<b?1:-1]);if(f.element===c.element)return a;f=c}return c},isColumnHidden:function(a){return!!this._columnHiderRules[a]},
_toggleColumnHiderMenu:function(){var a=this._hiderMenuOpened,b=this.hiderMenuNode,c=this.domNode,f;b.style.display=a?"none":"";a?b.style.height="":(b.offsetHeight>c.offsetHeight-12&&(b.style.height=c.offsetHeight-12+"px"),(f=this._columnHiderFirstCheckbox)&&f.focus());d[a?"pause":"resume"]();g=a?null:this;this._hiderMenuOpened=!a},_hideColumn:function(a){var b=this,c="#"+l.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-",f;this._columnHiderRules[a]||(this._columnHiderRules[a]=l.addCssRule(c+
l.escapeCssIdentifier(a,"-"),"display: none;"),8!==p("ie")&&10!==p("ie")||p("quirks")||(f=l.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){f.remove();b.resize()},0)))},_showColumn:function(a){this._columnHiderRules[a]&&(this._columnHiderRules[a].remove(),delete this._columnHiderRules[a])},_updateColumnHiddenState:function(a,b){this[b?"_hideColumn":"_showColumn"](a);this.columns[a].hidden=b;m.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[a],
hidden:b,bubbles:!0});this.resize()},toggleColumnHiddenState:function(a,b){"undefined"===typeof b&&(b=!this._columnHiderRules[a]);this._updateColumnHiddenState(a,b);this._columnHiderCheckboxes[a].checked=!b}})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/on dojo/query dojo/dnd/Source put-selector/put xstyle/css!../css/extensions/ColumnReorder.css".split(" "),function(r,p,m,l,h,c,g){function d(a,b){var c=b[2],f=a[c?"columnSets":"subRows"][b[1]];
return c?f[b[2]]:f}function n(a,b,c){b[2]?a.columnSets[b[1]][b[2]]=c:a.subRows[b[1]]=c}function a(a,b){return b.slice(("dgrid-"+a+"-").length)}var b=/(\d+)(?:-(\d+))?$/;r=p(c,{copyState:function(){return!1},checkAcceptance:function(a,b){return a==this},_legalMouseDown:function(a){return-1<a.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(c){var g=this.grid,q=b.exec(a(g.id,c[0].getAttribute("dndType"))),f=q[2]?"columnSets":"subRows",u=d(g,q),h=
g.columns;this.inherited(arguments);q&&setTimeout(function(){var a=m.map(c[0].parentNode.childNodes,function(a){return h[a.columnId]});n(g,q,a);a={grid:g,subRow:a,column:h[c[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};a[f]=g[f];l.emit(g.domNode,"dgrid-columnreorder",a)?g.set(f,g[f]):(n(g,q,u),g.renderHeader(),this._sort&&this._sort.length&&this.updateSortArrow(this._sort))},0)}});p=p(null,{columnDndConstructor:r,_initSubRowDnd:function(a,b){var c,f,d,k;f=0;for(d=a.length;f<d;f++)k=a[f],
!1!==k.reorderable&&(k=k.headerNode,"TH"!=k.tagName&&(k=k.parentNode),g(k,".dojoDndItem[dndType\x3d"+b+"]"),c||(c=k.parentNode));c&&this._columnDndSources.push(new this.columnDndConstructor(c,{horizontal:!0,grid:this}))},renderHeader:function(){var a="dgrid-"+this.id+"-",b,c;this.inherited(arguments);this._columnDndSources=[];if(this.columnSets)for(c=0,b=this.columnSets.length;c<b;c++)m.forEach(this.columnSets[c],function(b,d){this._initSubRowDnd(b,a+c+"-"+d)},this);else m.forEach(this.subRows,function(b,
c){this._initSubRowDnd(b,a+c)},this)},_destroyColumns:function(){this._columnDndSources&&m.forEach(this._columnDndSources,function(a){a.destroy()});this.inherited(arguments)}});p.ColumnDndSource=r;return p})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t){m.isAsync||d(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});
var k=p("dojo.dnd.Source",b,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,b){l.mixin(this,l.mixin({},b));var c=this.accept;if(c.length){this.accept={};for(var f=0;f<c.length;++f)this.accept[c[f]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&h.add(this.node,"dojoDndSource");this.targetState=
"";this.accept&&h.add(this.node,"dojoDndTarget");this.horizontal&&h.add(this.node,"dojoDndHorizontal");this.topics=[n.subscribe("/dnd/source/over",l.hitch(this,"onDndSourceOver")),n.subscribe("/dnd/start",l.hitch(this,"onDndStart")),n.subscribe("/dnd/drop",l.hitch(this,"onDndDrop")),n.subscribe("/dnd/cancel",l.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var f=a.getItem(b[c].id).type,d=!1,g=0;g<f.length;++g)if(f[g]in
this.accept){d=!0;break}if(!d)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==t.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){k.superclass.destroy.call(this);r.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(b){if(!this.isDragging||"Disabled"!=this.targetState){k.superclass.onMouseMove.call(this,b);var f=t.manager();if(!this.isDragging&&this.mouseDown&&
this.isSource&&(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&f.startDrag(this,d,this.copyState(a.getCopyKeyState(b),!0))}this.isDragging&&(d=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=c.position(this.current,!0)),d=this.horizontal?b.pageX-this.targetBox.x<this.targetBox.w/2==c.isBodyLtr(this.current.ownerDocument):b.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||
d!=this.before)&&(this._markTargetAnchor(d),f.canDrop(!this.current||f.source!=this||!(this.current.id in this.selection)))}},onMouseDown:function(b){this.mouseDown||!this._legalMouseDown(b)||this.skipForm&&a.isFormElement(b)||(this.mouseDown=!0,this._lastX=b.pageX,this._lastY=b.pageY,k.superclass.onMouseDown.call(this,b))},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,k.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):
this.isDragging&&(a=t.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?"":"Disabled");this==a&&t.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&
(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(b,c,d){var f=this._normalizedCreator;this._normalizedCreator=this.creator?function(a,c){return f.call(this,b.getItem(a.id).data,c)}:d?function(c){var f=b.getItem(c.id);c=c.cloneNode(!0);c.id=a.getUniqueId();return{node:c,
data:f.data,type:f.type}}:function(a){var c=b.getItem(a.id);b.delItem(a.id);return{node:a,data:c.data,type:c.type}};this.selectNone();d||this.creator||b.selectNone();this.insertNodes(!0,c,this.before,this.current);!d&&this.creator&&b.deleteSelectedNodes();this._normalizedCreator=f},onDropInternal:function(b,c){var f=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(c)this._normalizedCreator=this.creator?function(a,b){return f.call(this,this.getItem(a.id).data,b)}:function(b){var c=
this.getItem(b.id);b=b.cloneNode(!0);b.id=a.getUniqueId();return{node:b,data:c.data,type:c.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,b,this.before,this.current);this._normalizedCreator=f}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){k.superclass.onOverEvent.call(this);t.manager().overSource(this);if(this.isDragging&&"Disabled"!=
this.targetState)this.onDraggingOver()},onOutEvent:function(){k.superclass.onOutEvent.call(this);t.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(this.current!=this.targetAnchor||this.before!=a)this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":
"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!g.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(h.contains(a,"dojoDndHandle"))return!0;if(h.contains(a,"dojoDndItem")||h.contains(a,
"dojoDndIgnore"))break}return!1}});return k})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t){var k=p("dojo.dnd.Selector",t,{constructor:function(b,c){c||(c={});this.singular=c.singular;this.autoSync=c.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(n(this.node,a.press,l.hitch(this,
"onMouseDown")),n(this.node,a.release,l.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new d,c=b._empty,g;for(g in this.selection)g in c||a.push(h.byId(g));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(h.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=b._empty,f;for(f in this.selection)if(!(f in a)){var d=
h.byId(f);this.delItem(f);c.destroy(d)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,c){c=c||m.global;var f=this.selection,d=b._empty,g;for(g in f)g in d||a.call(c,this.getItem(g),g,this)},sync:function(){k.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],c=b._empty,d;for(d in this.selection)d in c||this.getItem(d)||a.push(d);r.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,
b,c,d){var f=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=f.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,"Selected"),this._removeItemClass(d.node,"Anchor"));return d};k.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=
f;return this},destroy:function(){k.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!b.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,g.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){b.getCopyKeyState(a)||this._removeSelection();var c=this.getAllNodes();if(c.length&&(this.anchor||(this.anchor=c[0],this._addItemClass(this.anchor,
"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var d=0,k;d<c.length&&(k=c[d],k!=this.anchor&&k!=this.current);++d);for(++d;d<c.length;++d){k=c[d];if(k==this.anchor||k==this.current)break;this._addItemClass(k,"Selected");this.selection[k.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?b.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,
"Anchor"),this.selection[this.current.id]=1):b.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||
(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=n(this.node,a.move,l.hitch(this,"onMouseMove"))},
onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=b._empty,c;for(c in this.selection)if(!(c in a)){var d=h.byId(c);d&&this._removeItemClass(d,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return k})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){p=p("dojo.dnd.Container",n,{skipForm:!1,allowNested:!1,constructor:function(a,d){this.node=c.byId(a);d||(d={});this.creator=d.creator||null;this.skipForm=d.skipForm;this.parent=d.dropParent&&c.byId(d.dropParent);this.map={};this.current=null;this.containerState="";g.add(this.node,"dojoDndContainer");d&&d._skipStartup||this.startup();this.events=[b(this.node,k.over,l.hitch(this,"onMouseOver")),b(this.node,k.out,l.hitch(this,"onMouseOut")),b(this.node,"dragstart",
l.hitch(this,"onSelectStart")),b(this.node,"selectstart",l.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||m.global;var c=this.map,f=q._empty,d;for(d in c)d in f||a.call(b,c[d],d,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return t((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=
this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=q.getUniqueId();var c=b.getAttribute("dndType"),f=b.getAttribute("dndData");a[b.id]={data:f||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var f;if(c)for(b=0;b<a.length;++b)f=this._normalizedCreator(a[b]),this.setItem(f.node.id,{data:f.data,type:f.type}),c.parentNode.insertBefore(f.node,c);else for(b=0;b<
a.length;++b)f=this._normalizedCreator(a[b]),this.setItem(f.node.id,{data:f.data,type:f.type}),this.parent.appendChild(f.node);return this},destroy:function(){r.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=
a[0])}this.defaultCreator=q._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&b!=this.node;)try{b=b.parentNode}catch(w){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(u){a=null}}this.current&&
(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){this.skipForm&&q.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a,f=a.toLowerCase()+"State";g.replace(this.node,c+b,c+this[f]);this[f]=b},_addItemClass:function(a,b){g.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){g.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=
a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&g.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,b){var c=(this.creator||this.defaultCreator).call(this,a,b);l.isArray(c.type)||(c.type=["text"]);c.node.id||(c.node.id=q.getUniqueId());g.add(c.node,"dojoDndItem");return c}});q._createNode=function(a){return a?function(b){return d.create(a,{innerHTML:b})}:q._createSpan};q._createTrTd=function(a){var b=d.create("tr");d.create("td",
{innerHTML:a},b);return b};q._createSpan=function(a){return d.create("span",{innerHTML:a})};q._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};q._defaultCreator=function(a){a=a.tagName.toLowerCase();var b="tbody"==a||"thead"==a?q._createTrTd:q._createNode(q._defaultCreatorNodes[a]);return function(a,c){var f=a&&l.isObject(a),d,g;f&&a.tagName&&a.nodeType&&a.getAttribute?(d=a.getAttribute("dndData")||a.innerHTML,f=(f=a.getAttribute("dndType"))?f.split(/\s*,\s*/):["text"],g=a):(d=f&&a.data?a.data:
a,f=f&&a.type?a.type:["text"],g=("avatar"==c?q._createSpan:b)(String(d)));g.id||(g.id=q.getUniqueId());return{node:g,data:d,type:f}}};return p})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){var f=p("dojo.dnd.Manager",[c],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;
this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:g("touch")?4:16,OFFSET_Y:g("touch")?4:16,overSource:function(b){this.avatar&&(this.target=b&&"Disabled"!=b.targetState?b:null,this.canDropFlag=!!this.target,this.avatar.update());a.publish("/dnd/source/over",b)},outSource:function(b){this.avatar?this.target==b&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),a.publish("/dnd/source/over",null)):a.publish("/dnd/source/over",null)},startDrag:function(c,f,d){function g(a){a.preventDefault();
a.stopPropagation()}k.autoScrollStart(l.doc);this.source=c;this.nodes=f;this.copy=!!d;this.avatar=this.makeAvatar();l.body().appendChild(this.avatar.node);a.publish("/dnd/start",c,f,this.copy);this.events=[n(l.doc,b.move,m.hitch(this,"onMouseMove")),n(l.doc,b.release,m.hitch(this,"onMouseUp")),n(l.doc,"keydown",m.hitch(this,"onKeyDown")),n(l.doc,"keyup",m.hitch(this,"onKeyUp")),n(l.doc,"dragstart",g),n(l.body(),"selectstart",g)];c="dojoDnd"+(d?"Copy":"Move");h.add(l.body(),c)},canDrop:function(a){a=
!(!this.target||!a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){h.remove(l.body(),["dojoDndCopy","dojoDndMove"]);r.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new q(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(k.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=
a.pageY+this.OFFSET_Y+"px",b=!!this.source.copyState(t.getCopyKeyState(a)),this.copy!=b&&this._setCopyStatus(b));g("touch")&&a.preventDefault()},onMouseUp:function(b){if(this.avatar){if(this.target&&this.canDropFlag){var c=!!this.source.copyState(t.getCopyKeyState(b));a.publish("/dnd/drop/before",this.source,this.nodes,c,this.target,b);a.publish("/dnd/drop",this.source,this.nodes,c,this.target,b)}else a.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(b){if(this.avatar)switch(b.keyCode){case d.CTRL:b=
!!this.source.copyState(!0);this.copy!=b&&this._setCopyStatus(b);break;case d.ESCAPE:a.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==d.CTRL&&(a=!!this.source.copyState(!1),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();h.replace(l.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});t._manager=null;f.manager=t.manager=function(){t._manager||
(t._manager=new f);return t._manager};return f})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),function(r,p,m,l,h,c,g,d){return r("dojo.dnd.Avatar",null,{constructor:function(c){this.manager=c;this.construct()},construct:function(){var d=c.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),a=this.manager.source,b,h=c.create("tbody",null,d),k=c.create("tr",
null,h),q=c.create("td",null,k),f=Math.min(5,this.manager.nodes.length),u=0;g("highcontrast")&&c.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},q);c.create("span",{innerHTML:a.generateText?this._generateText():""},q);for(l.set(k,{"class":"dojoDndAvatarHeader",style:{opacity:.9}});u<f;++u)a.creator?b=a._normalizedCreator(a.getItem(this.manager.nodes[u].id).data,"avatar").node:(b=this.manager.nodes[u].cloneNode(!0),"tr"==b.tagName.toLowerCase()&&(k=c.create("table"),c.create("tbody",
null,k).appendChild(b),b=k)),b.id="",k=c.create("tr",null,h),q=c.create("td",null,k),q.appendChild(b),l.set(k,{"class":"dojoDndAvatarItem",style:{opacity:(9-u)/10}});this.node=d},destroy:function(){c.destroy(this.node);this.node=!1},update:function(){h.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(g("highcontrast")){var c=m.byId("a11yIcon"),a="+";this.manager.canDropFlag&&!this.manager.copy?a="\x3c ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(a="x"):
a="o";c.innerHTML=a}d("tr.dojoDndAvatarHeader td span"+(g("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-geometry dojo/has ../util/misc put-selector/put dojo/_base/html xstyle/css!../css/extensions/ColumnResizer.css".split(" "),
function(r,p,m,l,h,c,g,d,n){function a(a){for(var b=a.length,c=b,f=a[0].length,d=Array(b);b--;)d[b]=Array(f);for(var g={},b=0;b<c;b++)for(var k=d[b],q=a[b],n=0,h=0;n<f;n++){var l=q[h],t;if("undefined"==typeof k[n]){k[n]=l.id;if(l.rowSpan&&1<l.rowSpan){t=d;for(var m=l.rowSpan,p=b,J=n,r=l.id,I=1;I<m;I++)t[p+I][J]=r}if(0<b&&l.colSpan&&1<l.colSpan)for(t=1;t<l.colSpan;t++)if(k[++n]=l.id,l.rowSpan&&1<l.rowSpan)for(var m=d,p=l.rowSpan,J=b,r=n,I=l.id,K=1;K<p;K++)m[J+K][r]=I;g[l.id]=a[0][n].id;h++}}return g}
function b(a,b,c,g,k){if(!(0>=c)){var f=a.columns[b],q;if(f&&(q={grid:a,columnId:b,width:c,bubbles:!0,cancelable:!0},g&&(q.parentType=g),!a._resizedColumns||p.emit(a.headerNode,"dgrid-columnresize",q)))return"auto"===c?delete f.width:(f.width=c,c+="px"),(g=a._columnSizes[b])?g.set("width",c):g=d.addCssRule("#"+d.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+d.escapeCssIdentifier(b,"-"),"width: "+c+";"),a._columnSizes[b]=g,!1!==k&&a.resize(),!0}}var t,k=0,q={create:function(){t=n("div.dgrid-column-resizer")},
destroy:function(){n(t,"!");t=null},show:function(a){a=c.position(a.domNode,!0);t.style.top=a.y+"px";t.style.height=a.h+"px";n(document.body,t)},move:function(a){t.style.left=a+"px"},hide:function(){t.parentNode.removeChild(t)}};return r(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);k++||q.create()},destroy:function(){this.inherited(arguments);for(var a in this._columnSizes)this._columnSizes[a].remove();--k||q.destroy()},
resizeColumnWidth:function(a,c){return b(this,a,c)},configStructure:function(){var a=this._oldColumnSizes=l.mixin({},this._columnSizes),b;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(b in a)b in this._columnSizes||a[b].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,c;"width"in a&&((c=this._oldColumnSizes[b])?c.set("width",a.width+"px"):c=d.addCssRule("#"+d.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+d.escapeCssIdentifier(b,
"-"),"width: "+a.width+"px;"),this._columnSizes[b]=c)},renderHeader:function(){this.inherited(arguments);var b=this,c;if(this.columnSets&&this.columnSets.length)for(var k=this.columnSets.length;k--;)c=l.mixin(c||{},a(this.columnSets[k]));else this.subRows&&1<this.subRows.length&&(c=a(this.subRows));for(var k=m(".dgrid-cell",b.headerNode),q=k.length;q--;){var h=k[q],t=h.columnId,v=b.columns[t],r=h.childNodes;if(v&&!1!==v.resizable){v=n("div.dgrid-resize-header-container");for(h.contents=v;0<r.length;)n(v,
r[0]);n(h,v,"div.dgrid-resize-handle.resizeNode-"+d.escapeCssIdentifier(t,"-")).columnId=c&&c[t]||t}}b.mouseMoveListen||(p(b.headerNode,".dgrid-resize-handle:mousedown"+(g("touch")?",.dgrid-resize-handle:touchstart":""),function(a){b._resizeMouseDown(a,this);b.mouseMoveListen.resume();b.mouseUpListen.resume()}),b._listeners.push(b.mouseMoveListen=p.pausable(document,"mousemove"+(g("touch")?",touchmove":""),d.throttleDelayed(function(a){b._updateResizerPosition(a)}))),b._listeners.push(b.mouseUpListen=
p.pausable(document,"mouseup"+(g("touch")?",touchend":""),function(a){b._resizeMouseUp(a);b.mouseMoveListen.pause();b.mouseUpListen.pause()})),b.mouseMoveListen.pause(),b.mouseUpListen.pause())},_resizeMouseDown:function(a,b){a.preventDefault();h.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(a);this._targetCell=m(".dgrid-column-"+d.escapeCssIdentifier(b.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(a);q.show(this)},_resizeMouseUp:function(a){var c=this._columnSizes,
f,g,k;this.adjustLastColumn&&(k=this.headerNode.clientWidth-1);this._resizedColumns||(f=m(".dgrid-cell",this.headerNode),this.columnSets&&this.columnSets.length?f=f.filter(function(a){return"0"==a.columnId.split("-")[0]&&!(a.columnId in c)}):this.subRows&&1<this.subRows.length&&(f=f.filter(function(a){return"0"==a.columnId.charAt(0)&&!(a.columnId in c)})),g=f.map(function(a){return a.offsetWidth}),f.forEach(function(a,c){b(this,a.columnId,g[c],null,!1)},this),this._resizedColumns=!0);h.setSelectable(this.domNode,
!0);f=this._targetCell;var n=this._getResizeMouseLocation(a)-this._startX,l=f.offsetWidth+n,t=this._getResizedColumnWidths(),p=t.totalWidth,t=t.lastColId,r=m(".dgrid-column-"+d.escapeCssIdentifier(t,"-"),this.headerNode)[0].offsetWidth;l<this.minWidth&&(l=this.minWidth);b(this,f.columnId,l,a.type)&&f.columnId!=t&&this.adjustLastColumn&&(p+n<k?b(this,t,"auto",a.type):r-n<=this.minWidth&&b(this,t,this.minWidth,a.type));q.hide();delete this._startX;delete this._targetCell},_updateResizerPosition:function(a){if(this._targetCell){a=
this._getResizeMouseLocation(a);var b=this._targetCell.offsetWidth,c=a;b+(a-this._startX)<this.minWidth&&(c=this._startX-(b-this.minWidth));q.move(c)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=m((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),c=b.length;if(!c)return{};for(var d=b[c-1].columnId;c--;)a+=
b[c].offsetWidth;return{totalWidth:a,lastColId:d}}})})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(r,p,m,l,h,c,g,d){return r("dijit.form.Form",[h,c,g,d],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(c){p.set(this.domNode,"encType",c);l("ie")&&(this.domNode.encoding=c);this._set("encType",c)},reset:function(c){var a={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:c?c.target:this.domNode,target:c?c.target:this.domNode};!1!==this.onReset(a)&&a.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(c){this.reset(c);c.stopPropagation();c.preventDefault();return!1},_onSubmit:function(c){var a=this.constructor.prototype;if(this.execute!=a.execute||this.onExecute!=a.onExecute)m.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(c)&&(c.stopPropagation(),c.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"rc/reliable/MobileAlarm":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","./Alarm"],function(r,p,m,l){return r("rc/reliable/MobileAlarm",[l],{_createToolbar:function(){this._toolbar=this.inherited(arguments);this._columnsButton=this._toolbar.addButton("Columns","gridIcon","center");return this._toolbar},_createGrid:function(){this.inherited(arguments);this.own(m(this._columnsButton.domNode,"click",p.hitch(this._grid,
this._grid._toggleColumnHiderMenu)));this._grid.set("selectionMode","toggle")}})})},"rc/reliable/AnnualSchedule":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/url dojo/aspect dojo/Deferred dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!rc/nls/cal dojo/on dojo/query dojo/string dojo/topic dojo/text!./_annual/templates/Annual.html require ./_annual/_Calendar ../_base/Error ../_base/util ../_base/test ../_Widget ../session ../util/encoding/base64 ../util/notices ../widget/Retry ../xhr dijit/Dialog dijit/form/Button dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/Toolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D){return m("rc/reliable/AnnualSchedule",v,{templateString:f,rcCalendarStrings:a,rcStrings:n,src:"",LEAP_YEAR_BIT:59,mouseDown:!1,_anSched:null,_updating:!1,testMode:!1,_canEdit:!1,_buttons:null,pointInstance:1,mainController:1,subController:0,subnet:0,mnemonic:"",_fetchPath:u.toUrl("rc/tests/proxy.php"),_url:"",constructor:function(a){this._anSched=[];this._buttons=[];this._canEdit=rc.session.isPrivate()&&rc.session.hasRole(rc.session.roles.asChg)},
postCreate:function(){this.inherited(arguments);this.own(b(this,"sendReasonAdded",l.hitch(this,this.send)));this._retryHandler=new B;var a=new h(window.location);this._url=a.scheme+"://"+a.host;this._createToolbarConnections();this._container.startup();this.own(b(this.containerNode,"mousedown",l.hitch(this,this._mouseDownEvent)),b(this.containerNode,"mouseup",l.hitch(this,this._mouseUpEvent)));for(var c=a=0;6>c;c++){var f=d.create("div",{className:"dijitCalendarRow"});this.containerNode.appendChild(f);
for(var g=0;2>g;g++){var k=new w({month:a});f.appendChild(k.domNode);this._canEdit?this.own(b(k,"change",l.hitch(this,this.makeDirty))):k.setReadOnly();a++}}p.forEach(this._getChildren(),function(a){a.parent=this},this);y.isLive()&&0==this.testMode&&this.fetch();this._eraseWarningDlg&&this._supportingWidgets.push(this._eraseWarningDlg)},_createToolbarConnections:function(){this._canEdit&&(this._saveButton=this._toolbar.getButton("Save"),this._clearButton=this._toolbar.getButton("clearAll"),this.own(b(this._saveButton.domNode,
"click",l.hitch(this,this.sendWithReason)),b(this._clearButton.domNode,"click",l.hitch(this,this.showEraseWarningDlg))));this._printButton=this._toolbar.getButton("Print");this._printButton.domNode&&this.own(b(this._printButton.domNode,"click",l.hitch(this,this.print)))},_mouseDownEvent:function(a){this.mouseDown=!0;return!1},_mouseUpEvent:function(a){this.mouseDown=!1},_beginUpdate:function(){if(this._updating)return!1;this._updating=!0;E.widget.clear();p.forEach(this._buttons,"item.set('disabled', true);");
return!0},_endUpdate:function(){this._updating&&(p.forEach(this._buttons,"item.set('disabled', false);"),this._updating=!1)},fetch:function(){return this._beginUpdate()?this._retryHandler.notifyRetry({action:l.hitch(this,this._fetchSequence),retryMsg:n.communicationProblem+" "+n.retryingIn,failMsg:k.substitute(n.communicationFail,[window.location.href])}).then(l.hitch(this,function(a){this._endUpdate();this.onInitSuccess();return a}),l.hitch(this,function(a){this._endUpdate();this._onInitError(a)})):
null},_fetchSequence:function(){var a=this._fetch();this.own(a);a.then(l.hitch(this,function(a){if(1>a.length)throw new z({name:k.substitute(n.xNotFound,[n.as]),message:this._replace(n.couldNotLoad)+" "+n.objNotFound,suggestion:n.objNotFoundFix});return this._decode(a)})).then(l.hitch(this,function(a){return this._render(a)})).then(l.hitch(this,function(a){return a}));return a},_fetch:function(){this._anSched=[];var a=new g;this.own(a);var b={gid:"AS",type:"rcp",method:"GET",cmdObj:{dest:this.mainController,
subt:this.subnet,subd:this.subController,src:0,cmd:18,xl:this.pointInstance-1,xh:0,cnt:0},load:l.hitch(this,function(b){a.resolve(b.data)}),error:l.hitch(this,function(b){a.reject(new z({name:k.substitute(n.xNotFound,[n.as]),message:this._replace(n.couldNotLoad)+" "+k.substitute(n.hostXOffline,[this.mainController]),suggestion:n.hostOfflineFix,e:b}))})};this.own(rc.xhr.request(b));return a.promise},_decode:function(a){try{return p.forEach(a,function(a){for(var b=0;8>b;b++)this._anSched.push(a&1<<
b?1:0)},this),this._anSched}catch(H){throw new z({name:this._replace(n.problemInX),message:this._replace(n.couldNotLoad)+" "+n.dataProblem,suggestion:n.dataProblemFix,e:H});}},_render:function(a){try{var b=0,c=1,f=0;p.forEach(this._getChildren(),function(a){for(var d=0;d<a.numDays;d++)b+d==this.LEAP_YEAR_BIT&&(new Date).getFullYear()%4&&f++,a.dayArray[d]=this._anSched[f++];a._flushSelectArray();b+=a.numDays;c++},this);this.makeClean()}catch(I){throw this.safeError(I,{name:x.escapeHtml(this._replace(n.problemInX)),
message:n.unexpected,suggestion:n.unexpectedFix,renderHtml:!0});}},_encode:function(){var a=0;p.forEach(this._getChildren(),function(b){p.forEach(b.dayArray,function(b,c){a+c==this.LEAP_YEAR_BIT-1?(this._anSched[a+c]=b,(new Date).getFullYear()%4&&(this._anSched[a+c+1]=0,a++)):this._anSched[a+c]=b},this);a+=b.numDays},this);for(var b=[],c=0,f=0;f<this._anSched.length;f+=8){for(var d=b[c]=0;8>d;d++)b[c]|=this._anSched[f+d]<<d;c++}return b},send:function(a){rc.session.reasonRequired()&&!a?this.showChangeReasonError():
this._beginUpdate()&&(a=this._send(),this.own(a),a.then(l.hitch(this,function(){this._addAuditTrail(this._changeReason);return this._fetchSequence()})).then(l.hitch(this,function(){E.widget.clear();q.publish("alert",{type:"success",message:n.savedChanges});this._endUpdate()})),a.otherwise(l.hitch(this,function(a){this._endUpdate();q.publish("sticky",{message:n.couldNotSave+" "+n.pleaseTryAgain});return a})))},_send:function(){var a=C.encode(this._encode());return rc.xhr.request({gid:"AS",type:"rcp",
method:"POST",cmdObj:{dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:118,xl:this.pointInstance-1,xh:0,cnt:a.length,data:a}})},_replace:function(a){return k.substitute(a,[n.as.toLowerCase()])},_getChildren:function(){return t("[widgetId]",this.containerNode).map(r.byNode)},getNumDaysInMonth:function(a,b){return 32-(new Date(b,a,32)).getDate()},showEraseWarningDlg:function(a){this._eraseWarningDlg.show()},eraseOK:function(){this._eraseWarningDlg.hide();this._clearSchedule()},
eraseCancel:function(a){this._eraseWarningDlg.hide()},_clearSchedule:function(){this._anSched=[];this._render(this._anSched);this.makeDirty()},destroy:function(){this._retryHandler&&(this._retryHandler.shutdownRetryQueue(),this._retryHandler.reset(),this._retryHandler.destroyRecursive(),this._retryHandler=null);rc.xhr.removeGroup("AS");this._anSched=this._buttons=null;this.inherited(arguments)},print:function(a){this.printWithPreview(l.clone(this.domNode))}})})},"rc/reliable/_annual/_Calendar":function(){define("dijit/_Contained dojo/_base/declare dojo/_base/lang dojo/cldr/supplemental dojo/dom dojo/query dojo/text!rc/bacnet/_calendar/templates/_Calendar.html ../../widget/_Calendar".split(" "),
function(r,p,m,l,h,c,g,d){return p("rc/reliable/_annual/_Calendar",[d,r],{templateString:g,value:new Date,dayWidth:"narrow",month:"",postCreate:function(){h.setSelectable(this.domNode,!1);var d=m.hitch(this,function(a,b){for(var d=c(a,this.domNode)[0],f=0;f<b;f++)d.parentNode.appendChild(d.cloneNode(!0))});d(".dijitCalendarDayLabelTemplate",6);d(".dijitCalendarDateTemplate",6);d(".dijitCalendarWeekTemplate",5);var a=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),b=l.getFirstDayOfWeek(this.lang);
c(".dijitCalendarDayLabel",this.domNode).forEach(function(c,d){this._setText(c,a[(d+b)%7])},this);this.value=null;this.setValue(this.date)},onValueSelected:function(c){this.emit("valueSelected",c)},onChange:function(c){this.emit("change",c)},isDisabledDate:function(c,a){},getClassForDate:function(c,a){},exportSelections:function(){return this.dayArray}})})},"rc/reliable/AuditTrail":function(){define("dgrid/Grid dgrid/extensions/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/OnDemandGrid dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/url dojo/aspect dojo/cookie dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!rc/nls/audit dojo/json dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./_auditTrail/templates/AuditTrail.html dojo/topic require ./_auditTrail/AuditTrailFilterDialog ../_base/Error ../_base/util ../_Widget ../date ../widget/Retry dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/Toolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H){return g("rc/reliable/AuditTrail",D,{templateString:y,defaultSort:[{attribute:"datestamp",descending:!0}],rcStrings:k,src:"",pointInstance:1,mainController:1,subController:1,subnet:0,mnemonic:"",instance:null,controller:null,testMode:!1,updating:!1,_fetchPath:A.toUrl("rc/tests/proxy.php"),_grid:null,_url:"",_updating:!1,_filterQuery:"",_filterDlg:null,constructor:function(){this._gridStore=new z(new w({idProperty:"datestamp"}))},postCreate:function(){if(rc.session.hasRole(rc.session.roles.audit)){this.inherited(arguments);
this._createToolbarConnections();this._createGrid();this._container.startup();this._retryHandler=new H;var a=new n(window.location);this._url=a.scheme+"://"+a.host;this.testMode||this.fetch()}else setTimeout(d.hitch(this,function(){var a=new E({name:k.permissionDenied,message:x.substitute(k.notAuthToViewX,[k.theAuditTrail.toLowerCase()])});this._onInitError(a)}),1)},_getTitle:function(){this._setTitle(k.auditTrail)},_setTitle:function(a){this.fullTitle=this.title=a;this._toolbar&&this.title&&this._toolbar.setTitle(this.title);
this.onSetTitle(this.title)},_createToolbarConnections:function(){this._printButton=this._toolbar.getButton("Print");this.own(u(this._printButton,"click",d.hitch(this,this.print)));this._exportButton=this._toolbar.getButton("Export");this.own(u(this._exportButton,"click",d.hitch(this,this.exportCsv)));this._filterButton=this._toolbar.addButton("filter","lookIcon","center");this._filterButton.set("label",k.filter);this.own(u(this._filterButton,"click",d.hitch(this,this.filter)))},_mixCookieStructure:function(){var a=
b("at"),c={};if(a)try{c=f.parse(a)}catch(I){console.error(this.declaredClass+" - _mixCookieStructure(): Error using saved settings",I),b("at",null,{expires:-1,path:"/"}),window.location.reload()}a&&void 0!==c.sort||(c.sort=this.defaultSort);return c},_getColumnStructure:function(a){var b=[];null===a?(b.push({id:"timeCol",label:k.auditTime,field:"time",hidden:!1,formatter:F.format}),b.push({id:"userCol",label:k.auditUser,field:"userLC",hidden:!1,formatter:this._formatUser}),b.push({id:"pointNameCol",
label:k.auditPointName,field:"pointName",hidden:!1,formatter:this._nlsPointName}),b.push({id:"actionCol",label:k.auditAction,field:"action",hidden:!1,formatter:this._nlsAction}),b.push({id:"detailsCol",label:k.auditDetails,field:"details",hidden:!1,formatter:this._nlsDetails}),b.push({id:"reasonCol",label:k.reason,field:"reason",hidden:!1})):(b[a.timeCol.index]={id:"timeCol",label:k.auditTime,field:"time",width:a.timeCol.width,hidden:a.timeCol.hidden,formatter:F.format},b[a.userCol.index]={id:"userCol",
label:k.auditUser,field:"userLC",width:a.userCol.width,hidden:a.userCol.hidden,formatter:this._formatUser},b[a.pointNameCol.index]={id:"pointNameCol",label:k.auditPointName,field:"pointName",width:a.pointNameCol.width,hidden:a.pointNameCol.hidden,formatter:this._nlsPointName},b[a.actionCol.index]={id:"actionCol",label:k.auditAction,field:"action",width:a.actionCol.width,hidden:a.actionCol.hidden,formatter:this._nlsAction},b[a.detailsCol.index]={id:"detailsCol",label:k.auditDetails,field:"details",
width:a.detailsCol.width,hidden:a.detailsCol.hidden,formatter:this._nlsDetails},b[a.reasonCol.index]={id:"reasonCol",label:k.reason,field:"reason",width:a.reasonCol.width,hidden:a.reasonCol.hidden});return b},_createGrid:function(){var a=this._mixCookieStructure();1===Object.keys(a).length&&a.hasOwnProperty("sort")&&(a=null);null===this._grid&&(this._grid=new (g([r,h,p,m,l]))({columns:this._getColumnStructure(a),sort:null!==a?a.sort:this.defaultSort,store:this._gridStore,noDataMessage:this._getLoadingString(),
isPagingGrid:!1,maxRowsPerPage:128,bufferRows:16},this.gridNode),this._grid.startup(),this._connectGrid())},_connectGrid:function(){this.own(u(this._grid,"dgrid-columnreorder",d.hitch(this,this._saveSettings)),u(this._grid,"dgrid-columnresize",d.hitch(this,this._saveSettings)),u(this._grid,"dgrid-columnstatechange",d.hitch(this,this._saveSettings)),a.after(this._grid,"updateSortArrow",d.hitch(this,this._saveSettings)),u(this._grid,"dgrid-refresh-complete",d.hitch(this._grid,"resize")))},_beginUpdate:function(){if(this._updating)return!1;
this._updating=!0;c.forEach(this._buttons,"item.set('disabled', true);");return!0},_endUpdate:function(){this._updating&&(c.forEach(this._buttons,"item.set('disabled', false);"),this._updating=!1)},fetch:function(){if(!this._beginUpdate())return null;var a=new t;this.own(a);this._retryHandler.reset();var b=this._retryHandler.notifyRetry({action:d.hitch(this,this._fetchSequence),retryMsg:k.communicationProblem+" "+k.retryingIn,failMsg:x.substitute(k.communicationFail,[window.location.href])}).then(d.hitch(this,
function(a){this._errMsg=k.couldNotFinish;this._endUpdate();this.onInitSuccess();return a}),d.hitch(this,function(a){this._endUpdate();this._onInitError(a)}));this.own(b);return a.promise},_fetchSequence:function(){var a=this._fetch(),b=new t;this.own(b);a.then(d.hitch(this,function(a){return this._decode(a.data)})).then(d.hitch(this,function(a){b.resolve(a)}));return b.promise},_fetch:function(){var a=new t;this.own(a);rc.xhr.request({gid:"AUDIT",type:"text",url:"logs/audit.log",load:d.hitch(this,
function(b){a.resolve(b)}),error:d.hitch(this,function(b){a.reject(this.safeError(b,{name:x.substitute(k.xNotFound,[k.rc_reliable_AuditTrail]),message:this._replace(k.couldNotLoad)+" "+k.objNotFound,suggestion:k.objNotFoundFix}))})});return a.promise},_decode:function(a){var b=new t;this.own(b);var c=[];a?(a.split("\n").forEach(d.hitch(this,this._sanitizeEntry,c)),b.resolve(c),this._populateGridStore(c)):b.resolve(c);return b.promise},_getLoadingString:function(){return'\x3cdiv class\x3d"loadingContainer"\x3e\x3cspan class\x3d"waiting"\x3e\x3c/span\x3e\x3cspan class\x3d"loadingMessage"\x3e'+
x.substitute(this.rcStrings.loadingX,[this.rcStrings.auditTrail])+"\x3c/span\x3e\x3c/div\x3e"},_populateGridStore:function(a){this._grid.set("noDataMessage",k.noData);this._grid.store.setData(a);this._grid.refresh()},_saveSettings:function(){var a={},d=this._grid._columnHiderRules;c.forEach(this._grid.subRows[0],function(b,c){a[b.id]={index:c};b.hasOwnProperty("width")&&(a[b.id].width=b.width);a[b.id].hidden=d.hasOwnProperty(b.id)});a.sort=this._grid.get("sort");b("at",f.stringify(a),{expires:365,
path:"/"})},_sanitizeEntry:function(a,b,c){var d;try{if(b=b.replace(/,\s*$/,""),b=b.replace(/([^\\])\\\'/g,"$1'")){d=f.parse(b);d.rowNum=c+1;d.datestamp*=1E3;var g=new Date(d.datestamp),k=new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds());d.timestamp=this._timeInMs(g);d.time=k;d.userLC=d.user.toLowerCase();d.pointName=d.pointName?B.unescapeHtml(d.pointName):"";d.action=d.action||"";d.details=d.details||"";d.reason=d.reason||"";d.action=
this._nlsAction(d.action);d.details=this._nlsDetails(d.details);d.pointName=this._nlsPointName(d.pointName);a.push(d)}}catch(O){console.error("Could not parse entry",b,O)}},_nlsAction:function(a){a=a||"";-1<a.indexOf("Logged out")?a=q.loggedOut:-1<a.indexOf("Logged in")?a=q.loggedIn:-1<a.indexOf("Changed analog value")?a=q.changedAnalog:-1<a.indexOf("Changed analog output")?a=q.changedAnalogOutput:-1<a.indexOf("Changed analog input")?a=q.changedAnalogInput:-1<a.indexOf("Changed binary input")?a=q.changedBinaryInput:
-1<a.indexOf("Changed binary output")?a=q.changedBinaryOutput:-1<a.indexOf("Changed binary value")?a=q.changedBinary:-1<a.indexOf("Changed Array")||-1<a.indexOf("Changed array")||-1<a.indexOf("Changed ay.")?a=q.changedArrayValue:-1<a.indexOf("Changed variable")?a=q.changedVariable:-1<a.indexOf("Changed output")?a=q.changedOutput:-1<a.indexOf("Changed Advanced BACnet Property")?a=q.changedAdvBacnet:-1<a.indexOf("Server started")?a=q.serverStarted:-1<a.indexOf("Firmware upgraded")?a=q.firmwareUpgraded:
-1<a.indexOf("Unsuccessful login attempt")?a=q.unsuccessfulLogin:-1<a.indexOf("Web Users updated")?a=q.webUsersUpdated:-1<a.indexOf("Web Users deleted")?a=q.webUsersDeleted:-1<a.indexOf("Saved Schedule")?a=q.savedSchedule:-1<a.indexOf("Saved Calendar")?a=q.savedCalendar:-1<a.indexOf("Relinquished")?a=k.relinquished:-1<a.indexOf("Sent new system date and time")?a=q.sentNewSystemDateTime:-1<a.indexOf("Add new Trend Log")?a=a.replace("Add new Trend Log",q.addedTrendLog):-1<a.indexOf("Deleted Trend Log")?
a=a.replace("Deleted Trend Log",q.deletedTrendLog):-1<a.indexOf("Acknowledged alarm(s)")?a=a.replace("Acknowledged alarm(s)",q.acknowledgedAlarms):-1<a.indexOf("Auto cleanup Enterprise Schedule")?a=a.replace("Auto cleanup Enterprise Schedule",q.autoCleanupES):-1<a.indexOf("Auto cleanup error Enterprise Schedule")?a=a.replace("Auto cleanup error Enterprise Schedule",q.autoCleanupErrorES):-1<a.indexOf("Cleared alarm(s)")?a=a.replace("Cleared alarm(s)",q.clearedAlarms):-1<a.indexOf("Modified point in points report")?
a=a.replace("Modified point in points report",q.modifiedPoint):-1<a.indexOf("Saved annual schedule")?a=a.replace("Saved annual schedule",q.savedAnnualSched):-1<a.indexOf("Saved Enterprise Schedule")?a=a.replace("Saved Enterprise Schedule",q.savedES):-1<a.indexOf("Updated Trend Log")?a=a.replace("Updated Trend Log",q.updatedTrendLog):-1<a.indexOf("Changed input")?a=a.replace("Changed input",q.changedInput):-1<a.indexOf("Changed multistate output")?a=a.replace("Changed multistate output",q.changedMultistateOutput):
-1<a.indexOf("Changed multistate value")?a=a.replace("Changed multistate value",q.changedMultistateValue):-1<a.indexOf("Changed pid-loop")?a=a.replace("Changed pid-loop",q.changedPIDLoop):-1<a.indexOf("Manual cleanup Enterprise Schedule")?a=a.replace("Manual cleanup Enterprise Schedule",q.manualCleanupES):-1<a.indexOf("Remove schedule from block")?a=a.replace("Remove schedule from block",q.removeSchedFromBlock):-1<a.indexOf("Saved weekly schedule")?a=a.replace("Saved weekly schedule",q.savedWeeklySched):
-1<a.indexOf("Save Error Enterprise Schedule")?a=a.replace("Save Error Enterprise Schedule",q.savedErrorEnterprise):-1<a.indexOf("Update schedule events from database error Enterprise Schedule")?a=a.replace("Update schedule events from database error Enterprise Schedule",q.updateEventsEnterpriseSchedule):-1<a.indexOf("Update schedule error Enterprise Schedule")&&(a=a.replace("Update schedule error Enterprise Schedule",q.updateScheduleEnterpriseSchedule));return a},_nlsDetails:function(a){a=a||"";
-1<a.indexOf("Added new Trend Log")?a=a.replace("Added new Trend Log",q.addedTrendLog):-1<a.indexOf("Deleted Trend Log")?a=a.replace("Deleted Trend Log",q.deletedTrendLog):-1<a.indexOf("Acknowledged alarm(s)")?a=a.replace("Acknowledged alarm(s)",q.acknowledgedAlarms):-1<a.indexOf("Cleared alarm(s)")?a=a.replace("Cleared alarm(s)",q.clearedAlarms):-1<a.indexOf("Updated Trend Log")?a=a.replace("Updated Trend Log",q.updatedTrendLog):-1<a.indexOf("Cleanup with errors")?a=a.replace("Cleanup with errors",
q.cleanupWithErrors):-1<a.indexOf("Cleanup without errors")?a=a.replace("Cleanup without errors",q.cleanupWithoutErrors):-1<a.indexOf("Edit saved without errors")?a=a.replace("Edit saved without errors",q.savedWithoutErrors):-1<a.indexOf("Invalid column name")?a=a.replace("Invalid column name",q.invalidColumnName):-1<a.indexOf("System not found")?a=a.replace("System not found",q.systemNotFound):-1<a.indexOf("Point changed to ")?a=a.replace("Point changed to ",q.pointChangedTo):-1<a.indexOf("Active users will be logged out")?
a=q.activeUsersLoggedOut:-1<a.indexOf("All users will be logged out")?a=q.allUsersLoggedOut:-1<a.indexOf("BACnet Abort: Device not found")?a=q.BACnetErrorDeviceNotFound:-1<a.indexOf("BACnet Error Code: Unknown object")?a=q.BACnetErrorUnknownObject:-1<a.indexOf("Block saved with errors")?a=q.blockSavedWithErrors:-1<a.indexOf("Block saved without errors")?a=q.blockSavedWithoutErrors:-1<a.indexOf("The given key was not present in the dictionary")?a=q.givenKeyNotFound:-1<a.indexOf("Events record missing")?
a=q.eventsRecordMissing:-1<a.indexOf("Edit with errors")?a=q.editWithErrors:-1<a.indexOf("Edit saved without errors")?a=q.editWithoutErrors:-1<a.indexOf("Property value changed to ")&&(a=a.replace("Property value changed to ",q.propertyChangedTo));-1<a.indexOf("Auto")?a=a.replace("Auto",k.auto):-1<a.indexOf("Manual")?a=a.replace("Manual",k.manual):-1<a.indexOf("Timed Override")&&(a=a.replace("Timed Override",k.timedOverride));-1<a.indexOf("On")?a=a.replace("On",k.on):-1<a.indexOf("Off")?a=a.replace("Off",
k.off):-1<a.indexOf("Start")?a=a.replace("Start",k.spStart):-1<a.indexOf("Open Switch")&&(a=a.replace("Open Switch",q.openSwitch));-1<a.indexOf("Old version")&&(a=a.replace("Old version",q.oldVersion));-1<a.indexOf("Edited times")&&(a=q.editedTimes);-1<a.indexOf("New value")&&(a=a.replace("New value",q.newValue));-1<a.indexOf(" to ")&&(a=a.replace(" to "," "+q.to+" "));-1<a.indexOf(" for ")&&(a=a.replace(" for "," "+q.wvFor+" "));-1<a.indexOf("Monday")&&(a=a.replace("Monday",q.monday));-1<a.indexOf("Tuesday")&&
(a=a.replace("Tuesday",q.tuesday));-1<a.indexOf("Wednesday")&&(a=a.replace("Wednesday",q.wednesday));-1<a.indexOf("Thursday")&&(a=a.replace("Thursday",q.thursday));-1<a.indexOf("Friday")&&(a=a.replace("Friday",q.friday));-1<a.indexOf("Saturday")&&(a=a.replace("Saturday",q.saturday));-1<a.indexOf("Sunday")&&(a=a.replace("Sunday",q.sunday));-1<a.indexOf("January")&&(a=a.replace(/January/g,q.jan));-1<a.indexOf("February")&&(a=a.replace(/February/g,q.feb));-1<a.indexOf("March")&&(a=a.replace(/March/g,
q.mar));-1<a.indexOf("April")&&(a=a.replace(/April/g,q.apr));-1<a.indexOf("May")&&(a=a.replace(/May/g,q.may));-1<a.indexOf("June")&&(a=a.replace(/June/g,q.june));-1<a.indexOf("July")&&(a=a.replace(/July/g,q.july));-1<a.indexOf("August")&&(a=a.replace(/August/g,q.aug));-1<a.indexOf("September")&&(a=a.replace(/September/g,q.sep));-1<a.indexOf("October")&&(a=a.replace(/October/g,q.oct));-1<a.indexOf("November")&&(a=a.replace(/November/g,q.nov));-1<a.indexOf("December")&&(a=a.replace(/December/g,q.dec));
-1<a.indexOf("DST disabled")&&(a=a.replace("DST disabled",q.dstDisabled));-1<a.indexOf("DST enabled")&&(a=a.replace("DST enabled",q.dstEnabled));return a},resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(d.hitch(this,function(){this._grid.resize()}),1)},_nlsPointName:function(a){a&&-1<a.indexOf("Alarms")&&(a=a.replace("Alarms",k.alarms));return a},_showFilter:function(){null===this._filterDlg?(this._filterDlg=new C,this.own(u(this._filterDlg,"applyFilter",d.hitch(this,function(a){this._filterQuery=
a;this._grid.set("query",d.hitch(this,this._filterFunction))})))):this._filterDlg.set("filterQuery",this._filterQuery);this._filterDlg.show()},filter:function(){this._showFilter()},destroy:function(){rc.xhr.removeGroup("AUDIT");null!==this._filterDlg&&this._filterDlg.hide();this.inherited(arguments)},_filterByTextInputs:function(a){for(var b=Object.keys(this._filterQuery).filter(function(a){return"dateRange"!==a&&"timeRange"!==a}),c=b.length-1;0<=c;--c){var f=b[c];if(!0===this._filterQuery[f].isUsed)if(!0===
this._filterQuery[f].isExact)if(this._filterQuery[f].isExclude){if(a[f]===this._filterQuery[f].filterString)return!1}else{if(a[f]!==this._filterQuery[f].filterString)return!1}else if(this._filterQuery[f].isExclude){if(-1!==a[f].toLowerCase().indexOf(this._filterQuery[f].filterString.toLowerCase()))return!1}else if(-1===a[f].toLowerCase().indexOf(this._filterQuery[f].filterString.toLowerCase()))return!1}return!0},_filterFunction:function(a){if(!1===this._filterByTextInputs(a))return!1;if(!0===this._filterQuery.dateRange.isUsed){if(null!==
this._filterQuery.dateRange.max){var b=this._filterQuery.dateRange.max,b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0);if(a.datestamp>b)return!1}if(null!==this._filterQuery.dateRange.min&&(b=this._filterQuery.dateRange.min,b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0),a.datestamp<b))return!1}return!0===this._filterQuery.timeRange.isUsed&&(null!==this._filterQuery.timeRange.max&&(b=this._filterQuery.timeRange.max,b=new Date(1970,0,1,b.getHours(),b.getMinutes(),b.getSeconds()),
a.timestamp>b.getTime())||null!==this._filterQuery.timeRange.min&&(b=this._filterQuery.timeRange.min,b=new Date(1970,0,1,b.getHours(),b.getMinutes(),b.getSeconds()),a.timestamp<b.getTime()))?!1:!0},_addEntry:function(){var a={datestamp:parseInt((new Date).getTime()/1E3,10).toFixed(),pointName:k.rc_reliable_AuditTrail,user:rc.session.getUsername(),action:q.purged,details:q.clearedAll,reason:k.na};v.publish("audit",a);return a},_timeInMs:function(a){return(new Date(1970,0,1,a.getUTCHours(),a.getUTCMinutes(),
a.getUTCSeconds())).getTime()},_formatUser:function(a,b,c){try{var f=c.grid._by_idx[b].item.user;return f=B.escapeHtml(f)}catch(L){return a}},print:function(){this.printDGrid(this._grid)},exportCsv:function(){this.exportToCSV(this._grid,"audit.csv",this.fullTitle)}})})},"rc/reliable/_auditTrail/AuditTrailFilterDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/i18n!rc/nls/all dojo/on dojo/text!./templates/AuditTrailFilterDialog.html dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/ValidationTextBox rc/widget/DateTextBox rc/widget/TimeTextBox".split(" "),
function(r,p,m,l,h,c,g){return p("rc/reliable/_auditTrail/AuditTrailFilterDialog",r,{templateString:g,baseClass:"rcFilterDialog",rcStrings:h,title:h.filterTitle,filterQuery:{},MAX_DATE:new Date(2154,11,31,0,0,0,0),buildRendering:function(){this.inherited(arguments);this._setupLabels();this._setupChangeListeners()},postCreate:function(){this.inherited(arguments);this._filterForm.startup();this._createButtonConnections()},_clearCheckboxes:function(){this.userExactCB.set("checked",!1);this.userExcludeCB.set("checked",
!1);this.pointNameExactCB.set("checked",!1);this.pointNameExcludeCB.set("checked",!1);this.actionExactCB.set("checked",!1);this.actionExcludeCB.set("checked",!1);this.detailsExactCB.set("checked",!1);this.detailsExcludeCB.set("checked",!1);this.reasonExactCB.set("checked",!1);this.reasonExcludeCB.set("checked",!1)},_clearFilters:function(){this.userFilter.set("value","");this.pointNameFilter.set("value","");this.actionFilter.set("value","");this.detailsFilter.set("value","");this.reasonFilter.set("value",
"");this.dateFrom.set("value",null);this.dateTo.set("value",null);this.timeFrom.set("value",null);this.timeTo.set("value",null);this._clearCheckboxes()},_createButtonConnections:function(){this.own(c(this.okButton.domNode,"click",m.hitch(this,this._onClickOk)),c(this.applyButton.domNode,"click",m.hitch(this,this._submitFilters)),c(this.clearButton.domNode,"click",m.hitch(this,this._clearFilters)))},_onClickOk:function(){this._submitFilters();this.hide()},onApplyFilter:function(c){this.emit("applyFilter",
c)},_setFilterQueryAttr:function(c){Object.keys(c).length&&(this.filterQuery=c,this.userFilter.set("value",this.filterQuery.userLC.filterString),this.userExactCB.set("checked",this.filterQuery.userLC.isExact),this.userExcludeCB.set("checked",this.filterQuery.userLC.isExclude),this.pointNameFilter.set("value",this.filterQuery.pointName.filterString),this.pointNameExactCB.set("checked",this.filterQuery.pointName.isExact),this.pointNameExcludeCB.set("checked",this.filterQuery.pointName.isExclude),this.actionFilter.set("value",
this.filterQuery.action.filterString),this.actionExactCB.set("checked",this.filterQuery.action.isExact),this.actionExcludeCB.set("checked",this.filterQuery.action.isExclude),this.detailsFilter.set("value",this.filterQuery.details.filterString),this.detailsExactCB.set("checked",this.filterQuery.details.isExact),this.detailsExcludeCB.set("checked",this.filterQuery.details.isExclude),this.reasonFilter.set("value",this.filterQuery.reason.filterString),this.reasonExactCB.set("checked",this.filterQuery.reason.isExact),
this.reasonExcludeCB.set("checked",this.filterQuery.reason.isExclude),this.dateFrom.set("value",this.filterQuery.dateRange.min),this.dateTo.set("value",this.filterQuery.dateRange.max),this.timeFrom.set("value",this.filterQuery.timeRange.min),this.timeTo.set("value",this.filterQuery.timeRange.max))},_setupChangeListeners:function(){this.own(c(this.dateFrom,"change",m.hitch(this,function(c){this.dateTo.set("constraints",{min:null!==c?c:new Date(null)})})),c(this.dateTo,"change",m.hitch(this,function(c){this.dateFrom.set("constraints",
{max:null!==c?c:this.MAX_DATE})})),c(this.timeFrom,"change",m.hitch(this,function(c){var d=this.timeTo.get("value");this.timeTo.set("constraints",{timePattern:"h:mm:ss a",min:null!==c?c:new Date(1970,0,1,0,0,0,0)});this.timeTo.set("value",d)})),c(this.timeTo,"change",m.hitch(this,function(c){var d=this.timeFrom.get("value");this.timeFrom.set("constraints",{timePattern:"h:mm:ss a",max:null!==c?c:new Date(1970,0,1,23,59,59,99)});this.timeFrom.set("value",d)})))},_setupLabels:function(){l.set(this.userLabel,
"for",this.userFilter.get("id"));l.set(this.pointNameLabel,"for",this.pointNameFilter.get("id"));l.set(this.actionLabel,"for",this.actionFilter.get("id"));l.set(this.detailsLabel,"for",this.detailsFilter.get("id"));l.set(this.reasonLabel,"for",this.reasonFilter.get("id"));l.set(this.dateFromLabel,"for",this.dateFrom.get("id"));l.set(this.dateToLabel,"for",this.dateTo.get("id"));l.set(this.timeFromLabel,"for",this.timeFrom.get("id"));l.set(this.timeToLabel,"for",this.timeTo.get("id"))},_submitFilters:function(){this.filterQuery=
{};var c=this.userFilter.get("value");this.filterQuery.userLC={isUsed:""!==c||this.userExactCB.get("checked")||this.userExcludeCB.get("checked"),isExact:this.userExactCB.get("checked"),isExclude:this.userExcludeCB.get("checked"),filterString:c};c=this.pointNameFilter.get("value");this.filterQuery.pointName={isUsed:""!==c||this.pointNameExactCB.get("checked")||this.pointNameExcludeCB.get("checked"),isExact:this.pointNameExactCB.get("checked"),isExclude:this.pointNameExcludeCB.get("checked"),filterString:c};
c=this.actionFilter.get("value");this.filterQuery.action={isUsed:""!==c||this.actionExactCB.get("checked")||this.actionExcludeCB.get("checked"),isExact:this.actionExactCB.get("checked"),isExclude:this.actionExcludeCB.get("checked"),filterString:c};c=this.detailsFilter.get("value");this.filterQuery.details={isUsed:""!==c||this.detailsExactCB.get("checked")||this.detailsExcludeCB.get("checked"),isExact:this.detailsExactCB.get("checked"),isExclude:this.detailsExcludeCB.get("checked"),filterString:c};
c=this.reasonFilter.get("value");this.filterQuery.reason={isUsed:""!==c||this.reasonExactCB.get("checked")||this.reasonExcludeCB.get("checked"),isExact:this.reasonExactCB.get("checked"),isExclude:this.reasonExcludeCB.get("checked"),filterString:c};var c=this.dateFrom.get("value"),g=this.dateTo.get("value");this.filterQuery.dateRange={isUsed:null!==c||null!==g,min:c,max:g};c=this.timeFrom.get("value");g=this.timeTo.get("value");this.filterQuery.timeRange={isUsed:null!==c||null!==g,min:c,max:g};this.onApplyFilter(this.filterQuery)}})})},
"rc/widget/TimeTextBox":function(){define("dijit/form/TimeTextBox dojo/_base/declare dojo/dom-class dojo/dom-style dojo/has dojo/text!./templates/TimeTextBox.html".split(" "),function(r,p,m,l,h,c){return p("rc/widget/TimeTextBox",r,{templateString:c,openOnClick:!0,parentClass:null,buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");if(this.openOnClick||!this.hasDownArrow)this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick"},
_setValueAttr:function(c,d,n){if(void 0!==c){if("string"==typeof c||this._isInvalidDate(c))c=null;c instanceof Date&&!(this.dateClassObj instanceof Date)&&(c=new this.dateClassObj(c))}this.inherited(arguments);this.dropDown&&this.dropDown.set("value",c,!1)},postCreate:function(){8>h("ie")&&l.set(this.iconWrapper,{display:"block",position:"absolute",right:"0px"});this.inherited(arguments);null!==this.parentClass&&m.add(this.iconWrapper,this.parentClass)}})})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare",
"dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(r,p,m,l,h){return r("dijit.form.TimeTextBox",h,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:l,_selector:"time",value:new Date(""),maxHeight:-1,openDropDown:function(c){this.inherited(arguments);this.dropDown.on("input",m.hitch(this,function(){this.set("value",this.dropDown.get("value"),!1)}))},_onInput:function(){this.inherited(arguments);var c=this.get("displayedValue");this.filterString=c&&!this.parse(c,
this.constraints)?c.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return h("dijit._TimePicker",[f,u],{baseClass:"dijitTimePicker",pickerMin:"T00:00:00",
pickerMax:"T23:59:59",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:l.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){d.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},
_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,f){a=this.ownerDocument.createDocumentFragment();for(b=0;b<this._maxIncrement;b++)(c=this._createOption(b))&&a.appendChild(c);return a},_showText:function(){var a=l.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);var b=function(a){return 3600*a.getHours()+
60*a.getMinutes()+a.getSeconds()},c=b(this._clickableIncrementDate),b=b(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=a(this.pickerMin);this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=b/c;a=a(this.pickerMax);a.setFullYear(1970,0,1);a=.001*(a.getTime()-this._refDate.getTime());this._maxIncrement=Math.ceil((a+1)/c);c=this._getFilteredNodes();!c.firstChild&&this.filterString?(this.filterString="",this._showText()):this.domNode.appendChild(c)},
constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in{clickableIncrement:1,visibleIncrement:1,pickerMin:1,pickerMax:1})b in a&&(this[b]=a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var b=new Date(this._refDate),c=this._clickableIncrementDate;b.setHours(b.getHours()+c.getHours()*a,b.getMinutes()+c.getMinutes()*a,b.getSeconds()+c.getSeconds()*a);
"time"==this.constraints.selector&&b.setFullYear(1970,0,1);var f=m.format(b,this.constraints);if(this.filterString&&0!==f.toLowerCase().indexOf(this.filterString))return null;c=this.ownerDocument.createElement("div");c.className=this.baseClass+"Item";c.date=b;c.idx=a;g.create("div",{"class":this.baseClass+"ItemInner",innerHTML:f},c);f=1>a%this._visibleIncrement&&-1<a%this._visibleIncrement;a=!f&&!(a%this._clickableIncrement);f?c.className+=" "+this.baseClass+"Marker":a&&(c.className+=" "+this.baseClass+
"Tick");this.isDisabledDate(b)&&(c.className+=" "+this.baseClass+"ItemDisabled");this.value&&!p.compare(this.value,b,this.constraints.selector)&&(c.selected=!0,c.className+=" "+this.baseClass+"ItemSelected",this._selectedDiv=c,f?c.className+=" "+this.baseClass+"MarkerSelected":a&&(c.className+=" "+this.baseClass+"TickSelected"),this._highlightOption(c,!0));return c},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(a,b){var c=a.target.date||
a.target.parentNode.date;c&&!this.isDisabledDate(c)&&(this._set("value",c),this.emit("input"),b&&(this._highlighted_option=null,this.set("value",c),this.onChange(c)))},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}c.toggle(a,this.baseClass+"ItemHover",b);c.contains(a,this.baseClass+"Marker")?c.toggle(a,this.baseClass+
"MarkerHover",b):c.toggle(a,this.baseClass+"TickHover",b)}},handleKey:function(a){if(a.keyCode==n.DOWN_ARROW)return this.selectNextNode(),this._onOptionSelected({target:this._highlighted_option},!1),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==n.UP_ARROW)return this.selectPreviousNode(),this._onOptionSelected({target:this._highlighted_option},!1),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==n.ENTER||a.keyCode===n.TAB){if(!this._keyboardSelected&&a.keyCode===n.TAB)return!0;this._highlighted_option&&
this._onOptionSelected({target:this._highlighted_option},!0);return a.keyCode===n.TAB}},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,!1)},onClick:function(a){this._onOptionSelected({target:a},!0)}})})},"rc/reliable/Group":function(){define("dijit/Menu dijit/MenuItem dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/dom-style dojo/has dojo/i18n!rc/nls/all dojo/json dojo/on dojo/query dojo/string dojo/text!rc/reliable/_group/templates/Group.html ./_group/io/Group ../_base/tooltip ../_base/util ../_Widget ../bacnet/enums ../bacnet/io/Array ../bacnet/io/Error ../bacnet/io/Number ../bacnet/io/Object ../bacnet/io/service/ReadPropertyMultiple ../reliable/Point ../sys/desc ../sys/enhgrp ../sys/job ../widget/Retry ../widget/Toolbar dijit/layout/BorderContainer dijit/layout/ContentPane ./_group/Stage".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K){return h("rc/reliable/group",y,{templateString:u,backgroundColour:"",backgroundImageSet:!0,pointType:11,pointInstance:1,mainController:1,subController:0,subnet:0,solidColourSet:!1,pointName:null,imageHeight:null,imageWidth:null,isFlashDependant:!1,isGlobalGroup:0,isSSC:0,isOpen:0,isPyramid:0,isSuspendedUpdate:!1,backgroundFile:"",groupJSONFile:"",groupJSONFileExists:!1,isEnhancedGroup:!1,flashEnabled:!1,deviceId:-1,_buttons:null,
origPoint:null,_menuItems:null,_tooltipIds:null,constructor:function(){this.ioObject=new w},postCreate:function(){this._tooltipIds=[];this.setUpToolbar(this._container);this._menuItems=this._scaleMenu.getChildren();this.stg.ioObject=this.ioObject;this.inherited(arguments);this.pointName=new F(this.mainController,this.subnet,this.subController,this.pointType,this.pointInstance);this._retryHandler=new I;G.loadOnce().always(c.hitch(this,this._isFlashEnabled)).always(c.hitch(this,this._getGroupDetails)).then(c.hitch(this,
this._detailsLoaded));this._container.startup();this.own(k(this.stg,"initSuccess",c.hitch(this,this._onInitSuccess)));this._checkScaleMenuItem(this.stg.scaleToFit)},_isFlashEnabled:function(){var a=this._isFlashAvailable();a.then(c.hitch(this,function(){this.flashEnabled=!0}),c.hitch(this,function(){this.flashEnabled=!1}));return a},_isFlashAvailable:function(){var a=new g;try{var b=this._getFlashVersion();b.major?9>b.major?a.reject():a.resolve():a.reject()}catch(O){a.reject()}return a.promise},_getFlashVersion:function(){return a("ie")?
function(){for(var a=10,b=null;!b&&7<a;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a--)}catch(O){}return b?(a=b.GetVariable("$version").split(" ")[1].split(","),{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}():function(){var a=navigator.plugins["Shockwave Flash"];return a&&a.description?(a=a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=a[0]?parseInt(a[0]):
0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}()},load:function(a){this.stg.load()},loadWidget:function(a){window.location=x.mnemonicToUri(a)},onInitSuccess:function(){this.inherited(arguments);var a=m.byNode(q(".rcTreeView")[0]);this.own(k(a,"pageBlur",c.hitch(this,this.pause)),k(a,"pageFocus",c.hitch(this,this.play)))},pause:function(){this.stg.pause()},play:function(){this.stg.play()},print:function(){this.stg.ioBkgnd.isHTML?this.printAsImage(this.stg.containerNode,
this.stg.domNode.clientWidth):(n.set(this.stg.containerNode,"maxWidth",this.stg.ioBkgnd.be.clientWidth/this.stg.domNode.clientWidth*100+"%"),this.printWithPreview(this.domNode).then(c.hitch(this,function(){n.set(this.stg.containerNode,"maxWidth","")})))},renderAuditTrail:function(){this.loadWidget(this.mainController+"AUDIT")},replace:function(a){return this._replace(a)},toggleScaleToFit:function(a){a=a.target.parentNode;var b=a.rowIndex;void 0===b&&(b=a.parentNode.rowIndex);this.stg.setScaleToFit(b);
this._checkScaleMenuItem(b)},_checkForFlashRequired:function(a){this.isEnhancedGroup?this._setIsHTMLOnly().then(c.hitch(this,a.resolve),c.hitch(this,a.reject)):(this.isFlashDependant=this.flashEnabled,a.resolve())},_checkForGroupJsonFile:function(a){var b=new g;this.own(b);this.groupJSONFile="/job/pic/grp/json/"+a+".json";J.loadOnce(this.groupJSONFile).then(c.hitch(this,function(a){this._validateJsonFile(a)?(this.groupJSONFileExists=!0,b.resolve()):b.reject()}),function(a){b.reject(a)});return b.promise},
_checkScaleMenuItem:function(a){for(var b=0;b<this._menuItems.length;b++)this._menuItems[b].set("iconClass",b==a?"checkIcon":""),b==a&&this._buttonScaleToFit.set("label",this._menuItems[b].get("label"))},_createToolbar:function(){var a=new K({region:"top",buttons:{Print:!0},customHelp:"grp",showTitle:!1},d.create("div",{}));this._printButton=a.getButton("Print");this.own(k(this._printButton,"click",c.hitch(this,this.print)));this._scaleMenu=new r({baseClass:"scaleMenu"});l.forEach([b.tbFullsize,b.tbScaled,
b.tbStretched],function(a){this._scaleMenu.addChild(new p({onClick:c.hitch(this,this.toggleScaleToFit),label:a}))},this);this._buttonScaleToFit=a.addDropDownButton("Scale-to-fit","scaleIcon","center",{dropDown:this._scaleMenu,baseClass:"scaleDropDownButtonItem"});var f=z.add(this._buttonScaleToFit.domNode,b.ttScale,{margin:"1.5em 0 0 2.5em"},"grp");this._tooltipIds.push(f);return a},_decodeGroupLoad:function(a,b){for(var c=null,f=null,d=0;d<b.o.length;++d)for(var c=b.o[d],g=0;g<c.pl.length;++g)f=
c.pl[g],this._decodeProperty(f);this.backgroundImageSet&&(this.solidColourSet=!1,this.imageHeight=this.imageWidth=null);a.resolve()},_decodeProperty:function(a){switch(a.p.v){case v.propertyTypes.PROPID_PP_GRAPHIC_FILE_NAME:this._propertyInError(a.v)||(this.backgroundImageSet=""!==a.v.getString());break;case v.propertyTypes.PROPID_PP_GROUP_COMPATIBILITY:this._propertyInError(a.v)?this.isEnhancedGroup=!1:this.isEnhancedGroup=1===a.v.valueOf();break;case v.propertyTypes.PROPID_PP_BACKGROUND_COLOUR:if(this._propertyInError(a.v))a.v.isUnknownProperty()&&
(this.solidColourSet=!1);else if(a=a.v.v,0===(a&4278190080))try{this.backgroundColour=x.rgbToHexString(a),this.solidColourSet=!0}catch(M){console.error("Invalid colour specified",a)}break;case v.propertyTypes.PROPID_PP_BACKGROUND_WIDTH:this._propertyInError(a.v)||(this.imageWidth=a.v.v);break;case v.propertyTypes.PROPID_PP_BACKGROUND_HEIGHT:this._propertyInError(a.v)||(this.imageHeight=a.v.v)}},_detailsLoaded:function(){var a=null,b=new g;this.own(b);var f=this.deviceId+"DEV"+this.deviceId;this.isPyramid=
G.isPyramid(f);if(this.isEnhancedGroup){a=this.pointName;this.isPyramid&&this.pointName.hasOwnProperty("mainController")&&this.deviceId===this.pointName.mainController&&(a=G.getReliablePoint(this.pointName));var d=a.toArray().join("");this._checkForGroupJsonFile(d).then(c.hitch(this,this._checkForFlashRequired,b),c.hitch(this,function(a){b.reject(this._getJsonNotFoundError(a))}))}else this.isFlashDependant=this.flashEnabled,b.resolve();b.then(c.hitch(this,this._groupJsonChecked,f,a),c.hitch(this,
this.onInitError))},_getGroupDetails:function(){var a=new g;this.own(a);this.deviceId=Number(G.getAnyProperty(this.pointName,"BACnetDeviceNum"))||0;0===this.deviceId&&(this.deviceId=Number(this.mainController));G.hasProprietarySupportBit(this.deviceId+"DEV"+this.deviceId,21)?this._sendGroupDataRequest(a):(this.isEnhancedGroup=!1,a.resolve());return a.promise},_groupJsonChecked:function(a,b){(this.isGlobalGroup=G.hasProprietarySupportBit(a,10)||this.isEnhancedGroup)&&G.hasProprietarySupportBit(a,32)&&
this._setSuspendUpdateFlag();this.isOpen=G.isOpen(a);this.isSSC=G.isSSC(a);this.isLC=G.isLC(this.pointName);this.isGlobalGroup||this.isSSC||this.isLC||!(1>this.pointName.mainController||125<this.pointName.mainController)||(b=G.getReliablePoint(this.pointName),null!==b&&(this.pointName=b));this.origPoint=this.pointName;this.isEnhancedGroup&&this.isPyramid&&125>this.pointName.mainController&&this.groupJSONFileExists&&(b=G.getBACnetPoint(this.pointName),null!==b&&(this.pointName=b));this.stg.setStartupInfo({group:this}).otherwise(c.hitch(this,
function(a){this._onInitError(a)}))},_getJsonNotFoundError:function(a){return new rc.Error({name:f.substitute(b.couldNotLoad,[b.group]),message:f.substitute(b.xNotFound,[this.pointName.toArray().join("")+".json"]),suggestion:b.objNotFoundFix,e:a})},_getTitle:function(){H.loadOnce().always(c.hitch(this,this._descriptorsLoaded))},_onInitSuccess:function(){this.onInitSuccess()},_propertyInError:function(a){return a instanceof C},_sendGroupDataRequest:function(a){var b=[{o:new B(v.objectTypes.OBJID_GLOBAL_GROUP,
this.pointInstance),pl:[{p:new E(v.propertyTypes.PROPID_PP_GRAPHIC_FILE_NAME,v.primitiveTypes.ENUMERATED),i:-1,v:new A([],v.primitiveTypes.CHARACTER_STRING)},{p:new E(v.propertyTypes.PROPID_PP_GROUP_COMPATIBILITY,v.primitiveTypes.ENUMERATED),i:-1,v:new E(0,v.primitiveTypes.BINARY)},{p:new E(v.propertyTypes.PROPID_PP_BACKGROUND_COLOUR,v.primitiveTypes.ENUMERATED),i:-1,v:new E(0,v.primitiveTypes.UNSIGNED_INTEGER)},{p:new E(v.propertyTypes.PROPID_PP_BACKGROUND_WIDTH,v.primitiveTypes.ENUMERATED),i:-1,
v:new E(0,v.primitiveTypes.UNSIGNED_INTEGER)},{p:new E(v.propertyTypes.PROPID_PP_BACKGROUND_HEIGHT,v.primitiveTypes.ENUMERATED),i:-1,v:new E(0,v.primitiveTypes.UNSIGNED_INTEGER)}]}];rc.xhr.request({type:"bacnet",s:new D({device:this.deviceId},b)}).then(c.hitch(this,this._decodeGroupLoad,a),c.hitch(this,function(){this.isEnhancedGroup=this.isEnhancedSystemGroup=!1;a.resolve()}))},_setIsHTMLOnly:function(){var a=new g;this.own(a);var b=J.loadOnce(this.groupJSONFile);this.own(b);b.then(c.hitch(this,
function(b){try{var c=t.parse(b);this.solidColourSet||(!this.backgroundFile&&c.hasOwnProperty("background_image")&&(this.backgroundFile=c.background_image),"undefined"!==typeof c.background_height&&(this.imageHeight=c.background_height),"undefined"!==typeof c.background_width&&(this.imageWidth=c.background_width));c.hasOwnProperty("flash_dependent")?this.isFlashDependant=c.flash_dependent&&this.flashEnabled:c.hasOwnProperty("contains_swf")?this.isFlashDependant=c.contains_swf&&this.flashEnabled:this.isFlashDependant=
this.flashEnabled}catch(Q){this.isFlashDependant=this.flashEnabled}a.resolve()}),c.hitch(this,function(b){this.isFlashDependant=this.flashEnabled;a.reject(this._getJsonNotFoundError(b))}));return a},_setSuspendUpdateFlag:function(){var a=[{o:new B(v.objectTypes.OBJID_GLOBAL_GROUP,this.pointName.mainInstance),pl:[{p:new E(v.propertyTypes.PROPID_PP_GRP_SUSPEND_UPDATES,v.primitiveTypes.ENUMERATED),i:-1,v:new E(0,v.primitiveTypes.BINARY)}]}],a=new D({device:this.deviceId},a,!0);rc.xhr.request({gid:"GRP",
type:"bacnet",s:a,load:c.hitch(this,function(a){try{this.isSuspendedUpdate=1===Number(a.o[0].pl[0].v.v)?!0:!1}catch(O){this.isSuspendedUpdate=!1}}),error:c.hitch(this,function(a){this.isSuspendedUpdate=!1})})},_updateButtons:function(){l.forEach(this._buttons,"item.set('disabled', "+this.stg._updating+");")},_validateJsonFile:function(a){var b=!0;if(0<a.length)try{t.parse(a)}catch(O){b=!1}else b=!1;return b},destroy:function(){l.forEach(this._tooltipIds,function(a){z.remove(a)},this);if(this._startupWidgets)for(var a=
this._startupWidgets.length-1;0<=a;--a)this._startupWidgets[a].destroyRecursive(),this._startupWidgets.splice(a,1);this.stg&&this.stg.destroyRecursive();this.inherited(arguments)}})})},"rc/reliable/_group/io/Group":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented ../../../bacnet/enums ../../../bacnet/io/Array ../../../bacnet/io/Number ../../../bacnet/io/Object ../../../bacnet/io/service/AtomicReadFile ../../../bacnet/io/service/ReadPropertyMultiple ../../../bacnet/Object ../../../sys/desc ../../../sys/grplc ../../../sys/job ../../../util/encoding/base16 ../../../xhr".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w){return p("rc/reliable/_group/io/Group",[r,h],{name:"",label:"",pictureFile:"",mode:0,BANK_SIZE:16,_instance:1,_d:null,load:function(b){this.pictureFile=this.label=this.name="";this.mode=0;var h=null,t=b.pointName;this._instance=t.comInstance;this._d=new l;f.loadOnce().always(m.hitch(this,function(){if(b.isGlobalGroup)return k.loadOnce().always(m.hitch(this,function(){this.label=this.name=this._getDescriptorForGroup(t);this.mode=1;this._fetchPictureFile(t)})),
this._d.promise;if(b.isSSC){var f={o:new n(c.objectTypes.OBJID_FILE,132),a:{t:0,s:new d(0,3),c:new d(471,2),v:new g([],6)}};h=new a({device:t.mainController},f);return rc.xhr.request({type:"bacnet",gid:"GRP",t:0,s:h,load:m.hitch(this,function(a){0===a.o.a.v.ary.length?(this._d.reject(a),this.onError(a)):this._onLoadGroup(a.o.a.v.ary)}),error:m.hitch(this,function(a){this._d.reject(a);this.onError(a)})})}if(b.isLC)return q.loadOnce(t).then(m.hitch(this,function(a){a=q.getGroupBytes(t.comInstance);
this._onLoadGroupLc(a)}),m.hitch(this,function(a){this._d.reject(a);this.onError(a)})),this._d.promise;if(1>t.mainController||125<t.mainController||t.subnetType&&(1>t.subController||124<t.subController))f=Error("RCP controller instance out of range: '"+t.toMnemonic()+"'"),this._d.reject(f),this.onError(f);f=t.toPointNameObject();return rc.xhr.request({gid:"GRP",type:"rcp",cmdObj:{dest:t.mainController,subt:t.subnetType,subd:t.subController,src:0,cmd:20,xl:f.xl,xh:f.xh,cnt:0},handle:m.hitch(this,function(a){a instanceof
Error||"undefined"===typeof a.data||0===a.data.length?(this._d.reject(a),this.onError(a)):this._onLoadGroup(a.data)})})}));return this._d.promise},_fetchPictureFile:function(a){var f=[{o:new n(c.objectTypes.OBJID_GLOBAL_GROUP,a.mainInstance),pl:[{p:new d(c.propertyTypes.PROPID_PP_GRAPHIC_FILE_NAME,c.primitiveTypes.ENUMERATED),i:-1,v:new g([],c.primitiveTypes.CHARACTER_STRING)}]}];a=new b({device:a.mainController},f,!0);rc.xhr.request({gid:"GRP",type:"bacnet",s:a}).then(m.hitch(this,function(a){if(a.e)this.pictureFile=
"";else try{this.pictureFile=a.o[0].pl[0].v.getString()}catch(v){console.error(v),this.pictureFile=""}this.onLoad(this);this._d.resolve(this)}),m.hitch(this,function(a){this._d.reject(a);this.onError(a)}))},_getDescriptorForGroup:function(a){return k.getBestName(new t(a.mainController,c.objectTypes.OBJID_GLOBAL_GROUP,a.mainInstance))},_onLoadGroup:function(a){try{a=a.slice(0,44),this.name=u.toCharString(a.slice(0,22)),this.label=u.toCharString(a.slice(22,32)),this.pictureFile=u.toCharString(a.slice(32,
43)),this.mode=a[43],this.onLoad(this),this._d.resolve(this)}catch(x){this._d.reject(x),this.onError(x)}},_onLoadGroupLc:function(a){try{this.name=u.toCharString(a.slice(0,10)),this.label="",this.pictureFile=u.toCharString(a.slice(10,19)),this.mode=a[19],this.onLoad(this),this._d.resolve(this)}catch(x){this._d.reject(x),this.onError(x)}},onLoad:function(a){this.emit("load",a)},onError:function(a){this.emit("error",a)},destroy:function(){this._d&&this._d.cancel();this.inherited(arguments)}})})},"rc/bacnet/io/service/AtomicReadFile":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./_Service","../../error","../../../util/encoding/base64"],function(r,p,m,l,h){return r("rc/bacnet/io/service/AtomicReadFile",m,{constructor:function(c,g){this.t=0;this.s=6;this.r=c;this.o=g},eof:!1,_d:null,encode:function(){this.buff=[];var c=this.o;this.buff=this.buff.concat(c.o.encode(196));this.buff.push(c.a.t?30:14);this.buff=this.buff.concat(c.a.s.encode());this.buff=this.buff.concat(c.a.c.encode());this.buff.push(c.a.t?31:15);return this.buff},decode:function(c){this.idx=
0;this.buff=c;try{80==(c[this.idx]&248)&&this._decodeClassCodeError(c,this.idx+3);switch(c[this.idx++]){case 16:break;case 17:this.eof=!0;break;default:l.throwError(65,63)}14==c[this.idx]&&(this.idx++,this.idx=this.o.a.s.decode(c,this.idx),this.o.a.v.decode(c,this.idx),this._d=this._d.concat(this.o.a.v.ary),this.eof&&(this.o.a.c.v=this._d.length,this.o.a.s.v=0,this.o.a.v.ary=this._d,this._d=null))}catch(g){c={},"classCode"in g&&(c.classCode=g.classCode),this._throwError(g.message,c)}},_toQueryObject:function(){var c=
h.encode(this.encode()),c={type:this.t,service:this.s,ASDU:c,cnt:c.length};p.mixin(c,this.r);return c},toQueryObjects:function(){this.qObjsIdx=0;this.qObjs=[this._toQueryObject()];this.eof=!1;this._d=[]},processQuery:function(c){c=h.decode(c);if(0===c.length)throw c=Error("BACnet request returned no data"),c.s=this,c;this.decode(c);this.eof||(this.o.a.s.v=this._d.length,this.qObjs.push(this._toQueryObject()))},toString:function(){var c=this.inherited(arguments),c=c.slice(0,-1);0==this.o.a.t&&(c=c+
", stream:{"+("fileStartPosition:"+this.o.a.s),c+=", requestOctetCount:"+this.o.a.c,c+=", fileData:"+this.o.a.v,c+="}");return c+"}"}})})},"rc/reliable/_group/Stage":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/Color dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/cookie dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/Evented dojo/has dojo/i18n!rc/nls/all dojo/i18n!rc/nls/grp dojo/i18n!rc/nls/units dojo/json dojo/on dojo/promise/all dojo/query dojo/string dojo/text!rc/reliable/_group/templates/Stage.html dojo/topic require ./DialogEdit ./GroupElement ./io/Background ./io/GroupElements ./TextEditDialog ../Point ../ReliableEnums ../unit ../../_base/test ../../_base/util ../../bacnet/_widget/DialogEventParameter ../../bacnet/_widget/DialogListElement ../../bacnet/enums ../../bacnet/Object ../../bacnet/property ../../bacnet/unit ../../date ../../sys/canim ../../sys/cunit ../../sys/decpnt ../../sys/desc ../../sys/flashCompatibility ../../sys/grplc ../../sys/hlink ../../sys/job ../../sys/sysname ../../util/pointObject ../../util/numberUtil dojo/sniff".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U,W,da,Y,V,X,Z,ca,ha,ea,fa,ba,ja,ia,ga){return c("rc/reliable/_group/Stage",[p,r,m,w],{group:null,updateTimeout:5E3,scaleToFit:1,_baseFontPoints:10,_gesToLoop:null,_loopInterval:null,_loopDeleted:!1,_pConnects:null,_keyView:!1,_keyHandlers:null,_flashCompatibilityMap:null,_flashMinVersion:9,_box:null,_cbox:null,_testMode:T.NO_PROXY,_playing:!0,_updating:!1,_updateTimer:0,_initialized:!1,_errMsg:"",_firstLoad:!0,
_updatedGroupElements:!1,_loadingImgs:!1,_dialog:null,_textDialog:null,_defaultTextColor:"inherit",initialResizePerformed:!1,ioObject:null,ioGrpEls:null,ioBkgnd:null,_flashGemQ:null,_flashGemQTimer:null,_flashGemQTimeout:500,SCALE_NONE:0,SCALE_PROP:1,SCALE_NOT_PROP:2,SCALE_LAST:3,VGAWIDTH:640,VGAHEIGHT:480,FLT_MAX_32:(2-Math.pow(2,-23))*Math.pow(2,127),ANIMATION_TYPE:{LOOP:4,MULTISTATE:6,LOOP_N_STOP:8},DISPLAY_TYPE:{LABEL_VALUE:10,NAME_VALUE:8,LABEL_VALUE_UNITS:11,NAME_VALUE_UNITS:9,VALUE:0,VALUE_UNITS:1,
BOX_COLORED:4,BOX_INVISIBLE:12,POLYGON:6,POLYGON_GRADIENT:5,ANIMATION:7,REFERENCE_POINT:253,REPLACE_COLOR:254,ANIMATION_POINT:255},NODE_TYPE:{box:0,text:1,img:2,multistate:3,loopstop:4,loop:5,noRender:6,landingPad:7},NODE_TYPE_TO_CLASS:{0:"box",1:"text",2:"img",3:"multistate",4:"loopstop",5:"loop",6:"no-render"},arTextSize:[6,14,8,16,10,18,12,20],_analogInsProp:[0,111,81,35,36,117,113,72,45,59,25,52,17,118],_analogOutsVarsProp:[22,106,65,69,104,0,111,81,35,36,117,113,72,45,59,25,52,17],_binInsProp:[33,
15,84,0,111,81,35,36,113,17,35,72,6],_binOutsVarsProp:[104,66,67,33,15,84,0,111,81,35,36,113,17,35,72,6],_msInsProp:[104,74,0,111,81,35,36,113,35,17],_msOutsVarsProp:[104,74,0,111,81,35,36,113,35,17],_devProp:[119,120,98,10,11,24],_schedProp:[111,81,88,36],_loopProp:[0,82,111,81,103,118,82,21,20,108,93,94,49,50,26,27,14,68,61,88,22,34,35,72],_trendProp:[0,111,36,133,134,128,144,140,141,145,173],_trendMultiProp:[0,111,36,133,134,128,144,140,141,145,173,197,193,205,195],_aryProp:[1070],_aunitRangeHigh:{7:1,
11:5,6:20,13:20,14:20,22:100,23:100,31:100,4:250,5:250,24:255,8:1E3,9:1E3,12:1E3,21:1E3,48:2E3,3:3E3,10:1E4,15:1E4,36:1E4},_subscribeIdGrpLks:"groupLinks",_subscribeAnimationMouseOver:"animationMouseOver",widgetsInTemplate:!0,templateString:F,constructor:function(){this.ioGrpEls=new L;this.ioBkgnd=new K;this._pConnects={};this._keyHandlers=[];this._gesToLoop=[];this.own(H.subscribe("editableLinkToClicked",d.hitch(this,this._landingPadIconWithEditableLinkToHandler)))},postCreate:function(){this.inherited(arguments);
this._box={l:0,t:0,w:this.VGAWIDTH,h:this.VGAHEIGHT,sx:1,sy:1};var b=a("g");b&&(b=A.parse(b),this.scaleToFit="sf"in b?b.sf:this.SCALE_PROP);null!=this.group&&this.setStartupInfo({group:this.group});this._imageQ=[];T.mode>=this._testMode&&this._connectKeys();this.own(C(this.ioBkgnd,"loadFlash",d.hitch(this,this.causeReload)));this.own(C(this.ioBkgnd,"destroyFlash",d.hitch(this,this.showWaiting)));this.subscribe(this._subscribeIdGrpLks,"_groupLinkHandler");this.subscribe(this._subscribeAnimationMouseOver,
"_animationMouseOver");this.subscribe("groupElementModified","onGroupElementModified");this.subscribe("groupFloodFillClicked","onGroupFloodFillClicked");this.subscribe("groupElementClicked","onGroupElementClicked")},setStartupInfo:function(a){d.mixin(this,a);this._retryHandler=this.group._retryHandler;this.own(C(this.ioBkgnd,"loadBackgroundImage",d.hitch(this,this.renderBackgroundImage)),C(this.ioBkgnd,"groupElementClicked",d.hitch(this,this.onGroupElementClicked)),C(this.ioBkgnd,"groupElementModified",
d.hitch(this,this.onGroupElementModified)),C(this.ioBkgnd,"groupFloodFillClicked",d.hitch(this,this.onGroupFloodFillClicked)),C(this.ioBkgnd,"groupElementLoadError",d.hitch(this,this.onGroupElementLoadError)),C(this.ioGrpEls,"load",d.hitch(this,this._groupElementsLoaded)),C(this.ioGrpEls,"error",d.hitch(this,this._updateFail)),C(this.ioGrpEls,"loadElement",d.hitch(this,this.renderGroupElement)),C(this.ioGrpEls,"loadBacnetElement",d.hitch(this,this.renderGroupElement)));return this.load()},setViewportExt:function(a,
b){this._box.w=this.VGAWIDTH=a;this._box.h=this.VGAHEIGHT=b;this.resize()},createGetDialog:function(){this._dialog||(this._dialog=new G({}),T.mode>=this._testMode&&this.own(C(this._dialog,"hide",d.hitch(this,this._connectKeys)),n.after(this._dialog,"show",d.hitch(this,this._disconnectKeys))),this._supportingWidgets.push(this._dialog));return this._dialog},showDialog:function(a){a.bacnetError||(this.createGetDialog(),this._dialog.show(a,this))},onGroupElementLoadError:function(a){this.emit("groupElementLoadError",
a);a=this.ioGrpEls.ges[a];a.animMissing=!0;a.isRendered=!1},createGetListElementDialog:function(){this._dialogListElement||(this._dialogListElement=new aa({}),this._supportingWidgets.push(this._dialogListElement));return this._dialogListElement},_createAndDisplayEventParameterDialog:function(a){},createGetEventParameterDialog:function(){this._dialogEventParameter||(this._dialogEventParameter=new S({}),this._supportingWidgets.push(this._dialogEventParameter));return this._dialogEventParameter},onGroupElementClicked:function(a){a.clickEvent.currentTarget.index=
a.index;this.pointClickHandler(a.clickEvent)},onGroupFloodFillClicked:function(a){this.pointClickHandler({currentTarget:{index:a}})},onGroupElementModified:function(a,b){this.emit("groupElementModified",a,b);this.createGetDialog();2<=arguments.length&&(null==this._flashGemQ&&(this._flashGemQ={}),this._flashGemQ[a]=b);if(this._dialog.isOpen())null==this._flashGemQTimer&&(this._flashGemQTimer=setTimeout(d.hitch(this,this.onGroupElementModified),this._flashGemQTimeout));else if(this._updateBegin()){clearTimeout(this._flashGemQTimer);
this._flashGemQTimer=null;for(var c in this._flashGemQ){var f=this.ioGrpEls.ges[c];b=this._flashGemQ[c];if(!this._canEdit(f)){this._updateEnd();return}this._dialog.setSaveValues("gValue"in b?b.gValue:"uValue"in b?b.uValue:f.pointValue,"bAutoMan"in b?b.bAutoMan:f.autoManual,"Modified by interactive Flash control",f,this)}this._flashGemQ=null;this._updateEnd()}else null==this._flashGemQTimer&&(this._flashGemQTimer=setTimeout(d.hitch(this,this.onGroupElementModified),this._flashGemQTimeout))},load:function(){if(!this._updateBegin())return this.hideWaiting(),
null;var a=new b;V.loadOnce().always(d.hitch(this,function(){ha.loadOnce().then(d.hitch(this,function(b){this._flashCompatibilityMap=b;this._loadJob(a)}),d.hitch(this,this._loadJob,a))}));a.promise.always(d.hitch(this,this.hideWaiting));return a.promise},_animationMouseOver:function(a){var b=this.ioBkgnd.bh._animsObj[a.index],c=this.ioBkgnd.bh._animationsInteractiveArea[a.index];if(b&&c){var f=function(a){u.set(b.n,{"pointer-events":!0===a?"auto":"none"})};this._coordsInRectangle({x:a.pageX,y:a.pageY},
c)||(f(!1),b.mouseOverListener=C(window,"mousemove",d.hitch(this,function(a){a=this._getMouseCoordsInAnimation(b,a);if(0>a.x||0>a.y||a.x>b.n.offsetWidth||a.y>b.n.offsetHeight)b.mouseOverListener&&(b.mouseOverListener.remove(),b.mouseOverListener=null),f(!0);this._coordsInRectangle(a,c)&&f(!0)})),this.own(b.mouseOverListener))}},_getMouseCoordsInAnimation:function(a,b){var c=f.position(a.n);return{x:b.pageX-c.x,y:b.pageY-c.y}},_coordsInRectangle:function(a,b){return a.x>=b.x&&a.x<=b.x+b.width&&a.y>=
b.y&&a.y<=b.y+b.height},_loadAtAllCosts:function(){this._retryHandler.reset();this.ioGrpEls.clearPending();rc.xhr.removeGroup("GRP");this._imageQ=[];this._updating&&this._updateEnd();this.load()},_loadGroup:function(){if(arguments.length&&arguments[0]instanceof Error)return null;var a=new b,c=d.hitch(this,function(b){b=new rc.Error({name:D.substitute(x.xNotFound,[x.grp]),message:this.group.replace(x.couldNotLoad)+" "+x.objNotFound,suggestion:x.objNotFoundFix,e:b});a.reject(b)});this._retryHandler.reset();
this._retryHandler.notifyRetry({action:d.hitch(this.ioObject,this.ioObject.load,this.group),retryMsg:D.substitute(x.couldNotLoad,[x.grp])+" "+x.retryingIn,failMsg:D.substitute(x.communicationFail,[window.location.href])}).then(d.hitch(this,function(){this._loadBackgroundImage().then(d.hitch(this,a.resolve),d.hitch(this,c))}),d.hitch(this,c));return a.promise},_containerLoaded:function(a){this._loadGroup().then(d.hitch(this,a.resolve),d.hitch(this,function(b){this._updateEnd();a.reject(b)}))},_loadJob:function(a){var b=
E([ba.loadOnce(),fa.loadOnce()]);this._firstLoad?b.always(d.hitch(this,function(){this.ioBkgnd.loadContainer(this.containerNode,this._styleBackground(),this.group,null!==this._flashCompatibilityMap).always(d.hitch(this,this._containerLoaded,a))})):b.always(d.hitch(this,this._containerLoaded,a))},_loadBackgroundImage:function(){if(arguments.length&&arguments[0]instanceof Error)return null;this._clearLoops();this.ioGrpEls.removeAll();var a=new b;this.own(a);var c=new b;this.own(c);if(this._firstLoad){this._firstLoad=
!1;var f=[];this.own(C(this.ioBkgnd,"loadContainer",d.hitch(this,this._loadAtAllCosts)));var g=[X,Z,ca,ja];this.group.isEnhancedGroup||(g=g.concat([V,fa]));l.forEach(g,function(a){f.push(a.loadOnce())},this);E(f).then(d.hitch(this,c.resolve),d.hitch(this,a.reject));ba.loadOnce().then(d.hitch(this,function(){this.arCTr=ba.colours.r;this.arCTg=ba.colours.g;this.arCTb=ba.colours.b}))}else c.resolve();c.then(d.hitch(this,function(){var b=this.ioBkgnd.loadBackgroundImage(this.ioObject.pictureFile,this.group);
this.own(b);b.always(d.hitch(this,this._loadGroupElements,a))}));a.promise.otherwise(d.hitch(this,function(a){return this.group.safeError(a,{name:D.substitute(x.xNotFound,[x.grp]),message:this.group.replace(x.couldNotLoad)+" "+x.objNotFound,suggestion:x.objNotFoundFix})}));return a.promise},_loadGroupElementsFinished:function(a,b){this.hideWaiting();var c=!1,f;for(f in b.ges)if("undefined"!==typeof f){c=!0;break}c||this.ioBkgnd.bImg&&this.ioBkgnd.bImg.src.length||640!=this.ioBkgnd.box.w||480!=this.ioBkgnd.box.h?
(this.onInitSuccess(),this.ioBkgnd.loadPrintBackground(),a.resolve(b)):a.reject(new rc.Error("Group has no background or GELs"))},_loadGroupElements:function(a){var b=this._retryHandler.notifyRetry({action:d.hitch(this.ioGrpEls,this.ioGrpEls.load,this.group,this.ioBkgnd),retryMsg:null,failMsg:D.substitute(x.communicationFail,[window.location.href])});b.always(d.hitch(this,this._loadGroupElementsFinished,a));return b},update:function(){this._dialog&&this._dialog.isOpen()||!this._updateBegin()||(this._retryHandler.reset(),
this._retryHandler.notifyRetry({action:d.hitch(this.ioGrpEls,this.ioGrpEls.load,this.group,this.ioBkgnd),retryMsg:null,failMsg:x.updateProblem}))},renderBackgroundImage:function(){null!==this.group.imageHeight&&null!==this.group.imageWidth?(this._box.h=this.group.imageHeight,this._box.w=this.group.imageWidth):d.mixin(this._box,this.ioBkgnd.getDimensions());this.initialResizePerformed=!0},_groupElementsLoaded:function(){this._updateEnd()},renderGroupElements:function(){if(null!=this.ioGrpEls){var a=
this.ioGrpEls.ges,b;for(b in a)(isNaN(a[b].pointName)||a[b].isKeyword)&&this.renderGroupElement(a[b])}},renderGroupElement:function(a){if(this.initialResizePerformed&&!a.isUnsupportedPoint()){this._setNodeType(a);try{var b={},b=null!==a.relativeHeight?{hp:a.relativeHeight,lp:a.relativeX,tp:a.relativeY,wp:a.relativeWidth,x:a.x,y:a.y}:this._getBoxCoords(a),c=0;a.nodeType!==this.NODE_TYPE.noRender&&(c=this.arTextSize[a.fontSize]);a.isEnhanced&&(c=a.fontSize);a.displayConfig==this.DISPLAY_TYPE.ANIMATION&&
!a.animMissing||a.nodeType===this.NODE_TYPE.noRender||(c=c*this._box.sy/this._baseFontPoints*100);var f="";a.isAnimated&&(f=u.get(this._wrapperNode,"fontFamily").split(",")[0]);try{a.flashObject=this._buildFlashObject(a)}catch(na){return}null!=this.ioGrpEls.gesHidden&&a.index in this.ioGrpEls.gesHidden||(a.isRendered||(this.ioGrpEls.destroyElementNodes(a),a.isAnimated&&this._loadAnimation(a,b,c+"pt",f),a.domNode=this._buildPointContainer(a,b,c),a.nodeType!==this.NODE_TYPE.noRender&&(a.textNode=this._buildPointContent(a),
this._addNodeTypeClass(a.domNode,a.nodeType),q.place(a.textNode,a.domNode,"first"))),this._updatePointContent(a,b),a.nodeType!==this.NODE_TYPE.noRender&&u.set(a.domNode,"fontSize",c+"%"),this._displayAutoManual(a,b.hp,b.wp),a.isFloodFill&&this._floodFill(b,a,a.flashObject),a.isAnimated&&(this.ioBkgnd.bf.f||this.ioBkgnd.bh)&&(this._isLoopAnimatedGif(a),this.ioBkgnd.setElementValues(a.index,d.mixin(a.flashObject,{x:b.lp,y:b.tp,width:b.wp,height:b.hp,ntextSize:parseInt(c,10),textName:f}),this.ioGrpEls.ges,
this.group.origPoint)),a.isRendered||(a.nodeType!==this.NODE_TYPE.noRender&&q.place(a.domNode,this.containerNode,"last"),a.isRendered=!0),a.isReplaceColour&&this._replaceColour(b,a),this._connectClickEvent(a))}catch(na){}}},_isLoopAnimatedGif:function(a){var b=a.isEnhanced?a.getAnimationFiles():V.get(this.group.origPoint,a.index,"File");a.isFlash&&3==a.animationPoint&&a.useLimits&&-1!=b[0].indexOf(".gif")&&(a.pointValue<=a.flashObject.gRangeLo&&(a.flashObject.gValue="0"),a.pointValue>=a.flashObject.gRangeHi&&
(a.flashObject.gValue="0"))},_addNodeTypeClass:function(a,b){"undefined"!==typeof this.NODE_TYPE_TO_CLASS[b]&&k.add(a,"rcPoint"+this.NODE_TYPE_TO_CLASS[b])},_buildPointContainer:function(a,b,c){b=q.create("div",{className:"rcPoint","data-gel-id":"gel_"+a.index,style:{position:"absolute",left:b.lp+"%",top:b.tp+"%",zIndex:a.zIndex||0}});a.nodeType!==this.NODE_TYPE.noRender&&(this._setEditClass(b,this._canEdit(a),a),a.isFlash&&(b.className+=" rcPointFlash"),a.animMissing&&(b.className+=" rcAnimMissing"),
a.isUnsupportedPoint()&&(b.className+=" rcPointUnsupported"),T.mode>=this._testMode&&(c=a.mnemonic,a.isKeyword&&(c=this._getKeywordValues(a).text),q.create("div",{className:"rcPointNumber",innerHTML:a.index},b,"last"),q.create("div",{className:"rcPointId",innerHTML:c},b,"last")));b.index=a.index;return b},_buildPointIcon:function(a){if(a.showStatus)return q.create("img",{className:"rcManualIcon",src:J.toUrl("rc/reliable")+"/_group/resources/hand.png",alt:"in manual override"},a.domNode,"last")},_buildErrorIcon:function(a){if(a.bacnetError&&
a.showStatus){var b="";a.bacnetError&&a.bacnetError.toStringMsg?b=a.bacnetError.toStringMsg():a.bacnetError&&a.bacnetError.message&&(b=a.bacnetError.message);b+=" ("+a.pointName.toMnemonic()+")";a.errNode?t.set(a.errNode,"title",b):(null===a.domNode.parentElement&&q.place(a.domNode,this.containerNode,"last"),a.errNode=q.create("span",{className:"in-error-icon",title:b},a.domNode,"last"));k.add(a.domNode,"rcPointError");this._setEditClass(a.domNode,!1,a);a.textNode&&t.set(a.textNode,"title",b);a.nodeType!==
this.NODE_TYPE.text||this._isLinkablePoint(a)||t.set(a.textNode,{innerHTML:"???",title:b})}},_buildPointContent:function(a){var b={},b=a.isKeyword||a.secondaryLink?this._getKeywordValues(a):this._getObjectValues(a),c;switch(a.displayConfig){case this.DISPLAY_TYPE.LABEL_VALUE:case this.DISPLAY_TYPE.LABEL_VALUE_UNITS:case this.DISPLAY_TYPE.NAME_VALUE:case this.DISPLAY_TYPE.NAME_VALUE_UNITS:case this.DISPLAY_TYPE.VALUE:case this.DISPLAY_TYPE.VALUE_UNITS:a.isKeyword&&a.units===a.KW_STATIC_IMAGE?c=this._buildStaticImageNode(b,
a):a.landingPad?(b.href&&(b.text=q.create("a",{href:b.href,innerHTML:b.text,title:b.title}).outerHTML),a.landingPad.set({displayValue:b.text}),c=a.landingPad.domNode):c=this._buildTextNode(b,a.flashObject._textColor,a);break;case this.DISPLAY_TYPE.BOX_COLORED:c=this._buildBoxNode(b,a.flashObject._textColor);break;case this.DISPLAY_TYPE.BOX_INVISIBLE:c=this._buildBoxNode(b,"transparent");break;case this.DISPLAY_TYPE.POLYGON:case this.DISPLAY_TYPE.POLYGON_GRADIENT:case this.DISPLAY_TYPE.REPLACE_COLOR:c=
this._buildBoxNode(b,a.flashObject._textColor);break;case this.DISPLAY_TYPE.ANIMATION:if(a.altNode=this._buildTextNode(b,this._defaultTextColor,a),k.add(a.altNode,"rcAltContent"),q.place(a.altNode,a.domNode,"first"),a.animMissing)c=this._buildBoxNode(b,"transparent");else if(a.isFlash)c=this._buildBoxNode(b,"transparent");else switch(c=this._buildImgNode(b,a.imgNode),a.animationPoint){case this.ANIMATION_TYPE.LOOP:this._updateLoopStop(a,this._getValueAsIndex(a));break;case this.ANIMATION_TYPE.MULTISTATE:this._updateMultistate(a.imgFrames,
this._scaleMultistateAnimation(a));break;case this.ANIMATION_TYPE.LOOP_N_STOP:this._updateLoopStop(a,this._getValueAsIndex(a))}}return c},_scaleMultistateAnimation:function(a){var b=function(a,b,c,f){var d=0;if(a>=b)d=f-1;else if(!(a<=c))for(b=parseFloat(((b-c)/f).toFixed(7)),c+=b,d=0;d<f&&!(c>=a);d++)c+=b;return d};try{var c=this._getValueAsIndex(a);if(a.digitalAnalog&&a.imgFrames instanceof Array){var f=a.imgFrames.length;"strMSString"in a.flashObject||(c=0===a.highLimit-a.lowLimit?a.units?b(a.pointValue,
a.flashObject.gRangeHi,a.flashObject.gRangeLo,f):0>a.pointValue?0:f-1:b(a.pointValue,a.highLimit,a.lowLimit,f))}return 0>c?0:c}catch(na){return console.error("Error in rc.reliable._group.state._scaleMultistateAnimation: error, ge",na,a),0}},_updatePointContent:function(a,b){if(a.displayConfig===this.DISPLAY_TYPE.REFERENCE_POINT)k.add(a.domNode,"hidden");else if(a.bacnetError)switch(a.nodeType){case this.NODE_TYPE.landingPad:this._setLandingPadStyle(a);break;default:this._buildErrorIcon(a)}else{a.errNode&&
(q.destroy(a.errNode),delete a.errNode);k.remove(a.domNode,"rcPointError");var c={required:!1},f;f=a.isKeyword?this._getKeywordValues(a):this._getObjectValues(a);switch(a.nodeType){case this.NODE_TYPE.box:c=a.displayConfig===this.DISPLAY_TYPE.BOX_COLORED?a.flashObject._textColor:"transparent";a.titleText=f.title;this._updateBoxNode(f,b,c,a.textNode);break;case this.NODE_TYPE.text:this._updateTextNode(f,a.flashObject._textColor,a.textNode,c);this._updateTextNode(f,a.flashObject._textColor,a.altNode,
c);c.required&&(a.isRendered=!1);break;case this.NODE_TYPE.landingPad:f.text=q.create("span",{innerHTML:f.text,title:f.title}).outerHTML;a.landingPad.set("displayValue",f.text);this._setLandingPadStyle(a);break;case this.NODE_TYPE.img:this._updateImgNode(b,a);break;case this.NODE_TYPE.multistate:this._updateImgNode(b,a);this._updateMultistate(a.imgFrames,this._scaleMultistateAnimation(a));break;case this.NODE_TYPE.loop:case this.NODE_TYPE.loopstop:this._updateImgNode(b,a);this._updateLoopStop(a,this._getValueAsIndex(a));
break;case this.NODE_TYPE.noRender:a.titleText=f.title}a.altNode&&this._updateTextNode(f,a.flashObject._textColor,a.altNode);a.showStatus&&this._toggleFaultIcon(a);a.nodeType!==this.NODE_TYPE.noRender&&(a.nodeType===this.NODE_TYPE.landingPad?(this._setNodeTitle(f,a.landingPad.valueContainer),a.landingPad.hasLinkOnLeftIcon()||(c=a.landingPad.get("leftIconNode"),null!==c&&this._setNodeTitle(f,c)),a.landingPad.hasLinkOnRightIcon()||(c=a.landingPad.get("rightIconNode"),null!==c&&this._setNodeTitle(f,
c))):this._setNodeTitle(f,a.textNode),this._setEditClass(a.domNode,this._canEdit(a),a));this._connectClickEvent(a)}},_setLandingPadStyle:function(a){a.landingPad.set({scaleX:this._box.sx,scaleY:this._box.sy});u.set(a.domNode,{color:this._hexColour(a.flashObject._textColor),height:a.relativeHeight+"%",width:a.relativeWidth+"%"})},_toggleFaultIcon:function(a){var b=a.getLimitErrorMessage(),c=a.isInFault()||null!==b;a.faultNode?k.toggle(a.faultNode,"hidden",!c):c&&(null===a.domNode.parentElement&&q.place(a.domNode,
this.containerNode,"last"),a.faultNode=q.create("span",{className:"in-fault-icon hidden"},a.domNode,"last"));null!==b&&t.set(a.faultNode,"title",b);a.iconNode&&k.toggle(a.iconNode,"hidden",c)},_setNodeType:function(a){switch(a.displayConfig){case this.DISPLAY_TYPE.LABEL_VALUE:case this.DISPLAY_TYPE.LABEL_VALUE_UNITS:case this.DISPLAY_TYPE.NAME_VALUE:case this.DISPLAY_TYPE.NAME_VALUE_UNITS:case this.DISPLAY_TYPE.VALUE:case this.DISPLAY_TYPE.VALUE_UNITS:a.nodeType=a.landingPad?this.NODE_TYPE.landingPad:
this.NODE_TYPE.text;break;case this.DISPLAY_TYPE.BOX_COLORED:case this.DISPLAY_TYPE.BOX_INVISIBLE:a.nodeType=this.NODE_TYPE.box;break;case this.DISPLAY_TYPE.REFERENCE_POINT:a.nodeType=this.NODE_TYPE.noRender;break;case this.DISPLAY_TYPE.POLYGON:case this.DISPLAY_TYPE.POLYGON_GRADIENT:case this.DISPLAY_TYPE.REPLACE_COLOR:a.nodeType=this.NODE_TYPE.box;break;case this.DISPLAY_TYPE.ANIMATION:if(a.animMissing)a.nodeType=this.NODE_TYPE.text;else if(a.isFlash)a.nodeType=this.NODE_TYPE.box;else switch(a.nodeType=
this.NODE_TYPE.img,a.animationPoint){case this.ANIMATION_TYPE.LOOP:a.nodeType=this.NODE_TYPE.loop;break;case this.ANIMATION_TYPE.MULTISTATE:a.nodeType=this.NODE_TYPE.multistate;break;case this.ANIMATION_TYPE.LOOP_N_STOP:a.nodeType=this.NODE_TYPE.loopstop}break;default:a.nodeType=-1}a.isKeyword&&a.units===a.KW_STATIC_IMAGE&&(a.nodeType=this.NODE_TYPE.img)},_setBYEKeywordValues:function(a){a.text=y.bye;a.href=rc.loginPath+"?logoff\x3d1";a.title=x.logout;return a},_buildSecondaryFileLink:function(a,
b){var c={text:"",title:"",href:""};if(null==a)return c.text="Unknown link",c;a.href&&(c.href=a.href,c.title=D.substitute(this._buildGotoText(groupElement),[a.text]),c.target=a.target?a.target:"_self");c.text=R.escapeHtml(b);return c},_buildSecondaryKeyWord:function(a){var b={text:"",title:"",href:""},c={ALARMS:a.KW_ALARMS,BYE:a.KW_BYE,PREVIOUS:a.KW_PREVIOUS};if(a.secondaryLink&&c.hasOwnProperty(a.secondaryLink.toUpperCase()))switch(c[a.secondaryLink.toUpperCase()]){case a.KW_PREVIOUS:b.text=a.isEnhanced&&
a.hyperlink?a.hyperlink:y.previous;b.title=D.substitute(this._buildGotoText(a),[y.previous]);break;case a.KW_ALARMS:b.text=a.isEnhanced&&a.hyperlink?a.hyperlink:y.alarms;b.title=D.substitute(this._buildGotoText(a),[y.alarms]);break;case a.KW_BYE:b=this._setBYEKeywordValues(b),b.text=a.isEnhanced&&a.hyperlink?a.hyperlink:b.text}else a.secondaryLink&&(c=this._getSecondaryLinkDescriptorMnemonicPair(a),c=c.descriptor?c.descriptor+" ("+c.mnemonic+")":c.mnemonic,b.title=D.substitute(this._buildEditText(a),
[c]));return b},_getKeywordValues:function(a){var b={text:"",title:"",href:""};if(a.displayConfig!==this.DISPLAY_TYPE.BOX_COLORED&&a.displayConfig!==this.DISPLAY_TYPE.BOX_INVISIBLE&&a.displayConfig!==this.DISPLAY_TYPE.LABEL_VALUE&&a.displayConfig!==this.DISPLAY_TYPE.NAME_VALUE&&a.displayConfig!==this.DISPLAY_TYPE.LABEL_VALUE_UNITS&&a.displayConfig!==this.DISPLAY_TYPE.NAME_VALUE_UNITS&&a.displayConfig!==this.DISPLAY_TYPE.POLYGON&&a.displayConfig!==this.DISPLAY_TYPE.REPLACE_COLOR&&a.displayConfig!==
this.DISPLAY_TYPE.POLYGON_GRADIENT)return b;switch(a.units){case a.KW_PREVIOUS:b.text=y.previous;b.title=D.substitute(this._buildGotoText(a),[b.text]);break;case a.KW_TBLS:var c=a.kwPanelString+"TBLS";b.text=c;b.title=c;break;case a.KW_ALARMS:b.text=y.alarms;b.href=R.mnemonicToUri("ALARM");b.title=D.substitute(this._buildGotoText(a),[b.text]);break;case a.KW_BYE:b=this._setBYEKeywordValues(b);break;case a.KW_STATIC_TEXT:this._isFilelink(a)?(b=a.getFileLink(),b=this._buildSecondaryFileLink(b,a.hyperlink)):
(b=this._buildSecondaryKeyWord(a),""===b.text&&(b.text=a.isEnhanced?a.hyperlink:""));break;case a.KW_STATIC_IMAGE:this._isFilelink(a)?(b=a.getFileLink(),b=this._buildSecondaryFileLink(b,a.hyperlink)):b=this._buildSecondaryKeyWord(a);break;case a.KW_HYPERLINK:c=a.isEnhanced?a.getHyperLink():fa.get(this.group.pointName.toDashMnemonic(),a.index);if(null==c){b.text="Unknown link";break}c.href&&(b.href=c.href,a.canEdit&&(b.title=D.substitute(this._buildGotoText(a),[c.text])),b.target=c.target?c.target:
"_self");b.text=R.escapeHtml(c.text);break;case a.KW_RTS:b.text=a.pointName.toMnemonic();b.href=R.mnemonicToUri(b.text);b.title=D.substitute(this._buildGotoText(a),[b.text]);break;case a.KW_RTREPORT:b.text=a.pointName.device+x.rtReport,b.href=R.mnemonicToUri(a.pointName.device+"RT-REPORT"),b.title=D.substitute(this._buildGotoText(a),[b.text])}a.secondaryLink&&this._canEdit(a)&&!a.isKeyword&&(c=this._getSecondaryKeywordTitle(a),b.text=c,b.title=D.substitute(this._buildGotoText(a),[c]));a.textKWTitle&&
(b.href="",b.text=b.title=a.textKWTitle,b.title=D.substitute(this._buildEditText(a),[a.textKWTitle]));b.href&&!this._canEdit(a)&&(b.href=null);b.title=R.unescapeHtml(b.title);return b},_getObjectValues:function(a){var b={text:"",title:"",href:""},c="";switch(a.pointName.comType){case 7:this.bacnetPropObj||(b.title=x.blankX);break;case 12:0==a.units||this._supportsArrayUnits(a.pointName)?b.title=x.blankX:b.title=this._buildEditText(a);break;case 1:case 2:case 3:case 4:b.title=this._buildEditText(a);
break;default:if(a.isBacnet){if(this._isPropertyObjectSet(a)||this._canEditAdvancedBacnet(a)){b.title=this._buildEditText(a);break}if(15==a.pointName.type||8==a.pointName.type||28==a.pointName.type){b.title=x.blankX;break}}b.href=R.mnemonicToUri(a.mnemonic);b.title=this._buildGotoText(a)}var f=a.pointName.toMnemonic(),d=a.displayName;this.group.isView&&""===d&&(d=f);var g=""!==d,k=this._getDisplayName(a),q="";a.secondaryLink?(f=this._getSecondaryLinkDescriptorMnemonicPair(a),k=f.descriptor,f=f.mnemonic):
(k.length||(k=ca.get(a.pointName,1)),-1<a.arrayIdx&&(c="[ "+a.arrayIdx+" ]",k.length?(k+=c+"  ",f+=c):f+=c+"  "),this._isBacnetPropertyReference(a)&&(q=": "+a.property));this._canEdit(a)?b.title=D.substitute(b.title,[(k.length&&k!==f?k+" ("+f+")":f)+q]):b.title=a.textNode?a.textNode.innerText:"";k=a.pointName;if(a.isBacnetRTL){var k=a.pointName.getBACnetObjectFromRuntime(),n=g?d:ca.getBestName(a.pointName,a.nameLabel),f=k.toMnemonic(),q=":33";n!==f&&(n+=" ("+f+":33)");b.title=D.substitute(x.gotoX,
[n+" - "+x.rc_reliable_RuntimeLog.toLowerCase()])}else a.property&&Number(a.property)===N.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE&&(n=g?d:ca.getBestName(a.pointName,a.nameLabel),f=a.pointName.toMnemonic(),n!=f&&(n+=" ("+f+":1330)"),b.title=D.substitute(x.gotoX,[n+" - "+x.rc_reliable_RuntimeLog.toLowerCase()]));switch(a.displayConfig){case this.DISPLAY_TYPE.LABEL_VALUE:case this.DISPLAY_TYPE.LABEL_VALUE_UNITS:case this.DISPLAY_TYPE.NAME_VALUE:case this.DISPLAY_TYPE.NAME_VALUE_UNITS:b.text+=(g?d:
ca.getBestName(k,a.nameLabel)+q+c)+" ";break;case this.DISPLAY_TYPE.ANIMATION:b.text+=(g?d:ca.getBestName(k,0)+q+c)+" "}switch(a.displayConfig){case this.DISPLAY_TYPE.LABEL_VALUE:case this.DISPLAY_TYPE.LABEL_VALUE_UNITS:case this.DISPLAY_TYPE.NAME_VALUE:case this.DISPLAY_TYPE.NAME_VALUE_UNITS:case this.DISPLAY_TYPE.VALUE:case this.DISPLAY_TYPE.VALUE_UNITS:case this.DISPLAY_TYPE.ANIMATION:switch(a.pointName.comType){case 7:case 10:case 11:this._isBacnetPropertyReference(a)&&(b.text+=a.flashObject.strValue);
break;default:if(!a.isBacnet||8!=a.pointName.type&&15!=a.pointName.type||85!=a.property)b.text+=a.flashObject.strValue}}a.decomissioned&&a.displayConfig!=this.DISPLAY_TYPE.BOX_INVISIBLE&&(b.text+="-D");b.href&&!this._canEdit(a)&&(b.href=null);b.title=R.unescapeHtml(b.title);return b},_getSecondaryKeywordTitle:function(a){a=this._getSecondaryLinkDescriptorMnemonicPair(a);return a.descriptor?a.descriptor+" ("+a.mnemonic+")":a.mnemonic},_buildEditText:function(a){var b=x.blankX;a.isAutoTrendLogLink()?
b=x.gotoX:this._canEdit(a)&&(b=a.secondaryLink?this._isLinkableSecondary(a.secondaryLink)?x.gotoX:(a=ca.mnemonicToObject(a.secondaryLink))&&a.isEditableLinkTo()?x.editX:x.gotoX:x.editX);return b},_buildGotoText:function(a){return this._canEdit(a)?x.gotoX:x.blankX},_buildGenericNode:function(){return q.create("div",{className:"rcPointContent"})},_getSecondaryLinkDescriptorMnemonicPair:function(a){var b={descriptor:"",mnemonic:a.secondaryLink};if(!this._isLinkableSecondary(a.secondaryLink)){/^[a-z]/i.test(a.secondaryLink)&&
(a.secondaryLink=this.group.deviceId+a.secondaryLink);var c=ia.getInfoFromMnemonic(a.secondaryLink,this.group.device);b.descriptor=c.isWorksheet?b.mnemonic:ca.get(ca.mnemonicToObject(a.secondaryLink));b.mnemonic=a.secondaryLink}return b},_setNodeTitle:function(a,b){a.href&&a.href.length&&b.firstChild?b.firstChild.title=a.title:b.title=a.title},_landingPadIconWithEditableLinkToHandler:function(a,b){this._useSecondaryLink(a,b)},_setEditClass:function(a,b,c){b&&c.units!==c.KW_STATIC_TEXT?(k.add(a,"rcPointEditable"),
c.isAnimated&&c.animationType==c.ANIM_INTERACTIVE&&!c.animMissing?k.add(a,"rcPointInteractive"):k.remove(a,"rcPointInteractive")):(k.remove(a,"rcPointEditable"),c.isAnimated&&c.animationType==c.ANIM_INTERACTIVE&&k.remove(a,"rcPointInteractive"));this._isLinkablePoint(c)&&k.add(a,"rcPointLinkable")},_isFilelink:function(a){return!this._isLinkableSecondary(a.secondaryLink)&&-1!=a.secondaryLink.indexOf(".")},_isLinkablePoint:function(a){return 5==a.pointName.comType||6==a.pointName.comType||9==a.pointName.comType||
10==a.pointName.comType||11==a.pointName.comType||a.property===N.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE||a.units===a.KW_STATIC_TEXT&&this._isSupportedStaticTextLink(a.secondaryLink)},_isSupportedStaticTextLink:function(a){if(!a)return!1;a=a.toLowerCase();return"alarms"===a||"previous"===a||"bye"===a},_buildStaticImageNode:function(a,b){var c=this._buildGenericNode();q.create("img",{src:b.imageKWPath,alt:a.text,title:a.title,height:"100%",width:"100%"},c,"only");u.set(c,{height:"100%",width:"100%"});
return c},_buildTextNode:function(a,b,c){var f=this._buildGenericNode();b=this._buildTextStyle(b);u.set(f,b);a.href&&a.href.length||c.secondaryLink?(q.create("a",{href:a.href,title:a.title,innerHTML:a.text},f,"first"),"target"in a&&(f.firstChild.target=a.target),u.set(f,"cursor","pointer"),u.set(f.firstChild,b)):(t.set(f,{innerHTML:a.text,title:a.title}),a.title?u.set(f,"cursor","pointer"):u.set(f,"cursor","default"));return f},_updateTextNode:function(a,b,c,f){c&&(b=this._buildTextStyle(b),u.set(c,
b),a.href&&a.href.length?c.firstChild&&(t.set(c.firstChild,"innerHTML",a.text),u.set(c.firstChild,b)):(b=c.clientWidth,t.set(c,"innerHTML",a.text),c.clientWidth>b&&(f.required=!0)),a.title&&u.set(c,"cursor","pointer"))},_buildBoxNode:function(a,b){var c=this._buildGenericNode(),f=this._buildBoxStyle(b);u.set(c,f);a.href&&a.href.length&&(q.create("a",{href:a.href,title:a.title,innerHTML:"\x26nbsp;"},c,"first"),f.width="100%",f.height="100%",u.set(c.firstChild,f),"target"in a&&(c.firstChild.target=
a.target));c.title=a.title;return c},_updateBoxNode:function(a,b,c,f){c=this._buildBoxStyle(c);u.set(f,c);a.href&&a.href.length&&u.set(f.firstChild,c);this._styleBoxContainer(f.parentNode,b)},_styleBackground:function(){var a="";""!==this.group.backgroundColour&&(a=this.group.backgroundColour);""!==a&&u.set(this.containerNode,{backgroundColor:a});return a},_styleBoxContainer:function(a,b){u.set(a,{width:b.wp+"%",height:b.hp+"%"})},_buildBoxStyle:function(a){return{width:"100%",height:"100%",cssFloat:"left",
backgroundColor:this._hexColour(a),border:"1px solid "+a}},_buildTextStyle:function(a){return{color:this._hexColour(a)}},_buildImgNode:function(a,b){var c=this._buildGenericNode();u.set(c,{width:"100%",height:"100%"});if(a.href&&a.href.length){var f=q.create("a",{href:a.href,title:a.title,style:{width:"100%",height:"100%"}},c,"first");q.place(b,f,"first")}else c.title=a.title,q.place(b,c,"first");return c},_updateImgNode:function(a,b){this._styleBoxContainer(b.domNode,a)},_buildImgStack:function(a,
b){if(0!==a.length){var c="";switch(b.animationPoint){case this.ANIMATION_TYPE.LOOP:c="Loop";break;case this.ANIMATION_TYPE.MULTISTATE:c="Multistate";break;case this.ANIMATION_TYPE.LOOP_N_STOP:c="LoopStop";break;default:c="Single"}b.imgNode=q.create("div",{className:"rcPointImages rcPointImages"+c});u.set(b.imgNode,{width:"100%",height:"100%"});b.imgFrames=[];l.forEach(a,function(a,c){b.imgFrames.push(q.create("img",{className:"rcPointImage"+c,style:{width:"100%",height:"100%"}},b.imgNode,"last"));
var f={node:b.imgFrames[c],src:rc.xhr.toSysUrl("job/pic/Animation/"+a)};f.node.geIdx=b.index;this._imageQ.push(f)},this);this._loadingImgs||this._loadImage()}},_loadImage:function(){if(0===this._imageQ.length)this._loadingImgs=!1;else try{this._loadingImgs=!0;var a=this._imageQ.shift();this._pConnects.load&&this._pConnects.load.remove&&this._pConnects.load.remove();this._pConnects.error&&this._pConnects.error.remove&&this._pConnects.error.remove();this._pConnects.load=C(a.node,"load",d.hitch(this,
this._loadImage));this._pConnects.error=C(a.node,"error",d.hitch(this,this._onErrorLoadingImage));this._imgTimer&&clearTimeout(this._imgTimer);this._imgTimer=setTimeout(d.hitch(this,function(a){H.publish("log",{message:"Stage._loadImage timed out: "+a});this._loadImage()},a.src),500);z("trident")?setTimeout(d.hitch(this,function(){a.node.src=a.src}),1):a.node.src=a.src}catch(la){}},_onErrorLoadingImage:function(a){this.onGroupElementLoadError(a.target.geIdx)},_updateMultistate:function(a,b){l.forEach(a,
function(a){try{k.remove(a,"rcPointImageCurrent")}catch(pa){}});try{b>=a.length&&(b=a.length-1),k.add(a[b],"rcPointImageCurrent")}catch(ma){}},_updateLoopStop:function(a,b){b?a.looping||(this._updateMultistate(a.imgFrames,a.currentFrame?a.currentFrame:a.firstFrame),this._startLoop(a)):!1!==a.looping&&(this._stopLoop(a),this._updateMultistate(a.imgFrames,0))},_startLoop:function(a){0>l.indexOf(this._gesToLoop,a.index)&&this._gesToLoop.push(a.index);a.looping=!0;null==this._loopInterval&&(this._loopInterval=
setInterval(d.hitch(this,this._loopImages),500))},_stopLoop:function(a){var b=l.indexOf(this._gesToLoop,a.index);-1<b&&(this._loopDeleted=!0,this._gesToLoop[b]=null);a instanceof I&&d.isArray(a.imgFrames)&&(a.looping=!1,null!=a.currentFrame&&k.remove(a.imgFrames[a.currentFrame],"rcPointImageCurrent"),a.currentFrame=a.imgFrames.length-1);1>this._gesToLoop.length&&this._clearLoops()},_clearLoops:function(){this._gesToLoop=[];clearInterval(this._loopInterval);this._loopInterval=null},_cleanupLoops:function(){this._loopDeleted&&
(this._gesToLoop=l.filter(this._gesToLoop,function(a){return null!=a}),this._loopDeleted=!1)},_loopImages:function(){l.forEach(this._gesToLoop,function(a){try{if(this.ioGrpEls.ges&&this.ioGrpEls.ges.hasOwnProperty(a)){var b=this.ioGrpEls.ges[a];b&&b.animMissing?this._stopLoop(b):(null!=b.currentFrame&&k.remove(b.imgFrames[b.currentFrame++],"rcPointImageCurrent"),b.currentFrame>=b.imgFrames.length&&(b.currentFrame=b.firstFrame),b.currentFrame||(b.currentFrame=b.firstFrame),k.add(b.imgFrames[b.currentFrame],
"rcPointImageCurrent"))}}catch(ma){b=b||{index:a},this._stopLoop(b)}},this);this._cleanupLoops()},_displayAutoManual:function(a,b,c){a.isKeyword||a.isAnimated||!a.showStatus||(a.autoManual?(a.iconNode||(null===a.domNode.parentElement&&q.place(a.domNode,this.containerNode,"last"),a.iconNode=this._buildPointIcon(a),a.nodeType===this.NODE_TYPE.noRender&&q.create("div",{className:"rcPointContent",style:"height:100%; width: 100%; float: left;"},a.domNode,"first")),a.nodeType===this.NODE_TYPE.noRender&&
(u.set(a.domNode,"height",b.toString()+"%"),u.set(a.domNode,"width",c.toString()+"%")),k.add(a.iconNode,"rcpManual"),k.remove(a.iconNode,"rcpAuto")):a.iconNode&&(k.remove(a.iconNode,"rcpManual"),k.add(a.iconNode,"rcpAuto")))},_getAnimationFile:function(a){a=a.isEnhanced?a.getAnimationFiles():V.get(this.group.origPoint,a.index,"File");if(0<a.length){var b=encodeURIComponent("\\"),c=this._getFlashCompatibilityAnimation(a[0])||a[0],f=c.split(b);!/\.js$/i.test(c)||2===f.length&&f[0]===f[f.length-1].replace(".js",
"")?a[0]=c:a[0]=f[0]+b+f[0]+".js"}return a},_getFlashCompatibilityAnimation:function(a){var b;/\.swf|\.gif$/.test(a)&&this._flashCompatibilityMap&&"undefined"!==typeof this._flashCompatibilityMap[a]&&(b=this._flashCompatibilityMap[a].replace(/\.rca$/i,""),b=b+encodeURIComponent("\\")+b+".js");return b},_loadAnimation:function(a,b,c,f){a.isFlash=!1;var g;if(!a.animMissing)switch(a.animationPoint){case 6:g=this._getAnimationFile(a);g.length?this._buildImgStack(g,a):a.animMissing=!0;break;case 4:case 8:g=
this._getAnimationFile(a);if(g.length){if(this._buildImgStack(g,a),a.firstFrame=4==a.animationPoint?0:1,a.currentFrame||(a.currentFrame=a.firstFrame),0<a.imgFrames.length){var k=[],q=C(a.imgFrames[a.imgFrames.length-1],"load",d.hitch(this,function(){q.remove();l.forEach(k,d.hitch(this,function(a){a.remove()}));k=[];this._updateLoopStop(a,this._getValueAsIndex(a))}));l.forEach(a.imgFrames,function(a){k.push(C(a,"error",function(){q.remove();l.forEach(k,d.hitch(this,function(a){a.remove()}));k=[]}))},
this)}}else a.animMissing=!0;break;case 3:case 5:case 7:case 47:g=this._getAnimationFile(a);a.isFlash=!0;g.length?this._loadSwf(a,b,c,f,g[0]):a.animMissing=!0;break;case 13:case 15:case 16:case 17:case 21:g="An"+a.animationPoint+".gif";var n=this._getFlashCompatibilityAnimation(g);a.isFlash=!0;n?this._loadSwf(a,b,c,f,n):this._loadSwf(a,b,c,f,"SysAn/"+g);break;default:g="An"+a.animationPoint+".swf",n=this._getFlashCompatibilityAnimation(g),a.isFlash=!0,n?this._loadSwf(a,b,c,f,n):this._loadSwf(a,b,
c,f,"SysAn/"+g)}},_loadSwf:function(a,b,c,f,g){this.ioGrpEls.ges&&this.ioGrpEls.ges.hasOwnProperty(a.index)&&this.ioBkgnd.loadAnimation(a.index,g,d.mixin(a.flashObject,{x:b.lp,y:b.tp,width:b.wp,height:b.hp,ntextSize:parseInt(c,10),textName:f}),d.mixin({},this.ioGrpEls.ges)).otherwise(d.hitch(this,function(a){a.animMissing=!0},a))},resize:function(){arguments.length&&(this._cbox=arguments[0]);z("ff")||u.set(this._wrapperNode,"overflow",this.scaleToFit?"hidden":"auto");null!=this.ioBkgnd&&null!=this.ioBkgnd.be&&
this._cbox&&(this.scaleToFit!=this.SCALE_NONE?(this.scaleToFit==this.SCALE_PROP?this._box.sx=this._box.h*this._cbox.w/this._box.w<this._cbox.h?this._box.sy=this._cbox.w/this._box.w:this._box.sy=this._cbox.h/this._box.h:(this._box.sx=this._cbox.w/this._box.w,this._box.sy=this._cbox.h/this._box.h),z("ff")&&(this._box.sy-=.005)):this._box.sx=this._box.sy=1,this.scaleToFit?u.set(this.containerNode,{width:this._box.sx*this._box.w+"px",height:this._box.sy*this._box.h+"px"}):u.set(this.containerNode,{width:this._box.w+
"px",height:this._box.h+"px"}));u.set(this.containerNode,{fontSize:this._baseFontPoints+"pt"});this.ioBkgnd.resize();this.renderGroupElements()},causeReload:function(){this.group.isEnhancedGroup&&this.group.groupJSONFileExists&&(this.ioGrpEls.ges=[],this.update())},showWaiting:function(){this.waiting=this.waiting||q.create("div",{className:"waiting fullsize",id:"waiting"},this.domNode);u.set(this.waiting,{opacity:.99,display:"block"})},hideWaiting:function(){this.waiting&&g.fadeOut({node:"waiting",
duration:500,onEnd:d.hitch(this,function(a){u.set(a,"display","none")})}).play()},_scaleUp:function(a){var b,c;b=this._box.w>this.VGAWIDTH?1E3*this._box.w/this.VGAWIDTH:1E3;c=this._box.h>this.VGAHEIGHT?1E3*this._box.h/this.VGAHEIGHT:1E3;"x"in a&&(a.x=a.x*b/1E3,a.y=a.y*c/1E3);"w"in a&&(a.w=a.w*b/1E3,a.h=a.h*c/1E3);return a},_floodFill:function(a,b,c){var f=null,d,g,k,q,n=!1;if("strMSString"in c&&c.strMSString.length){d=c.gRangeLo;g=c.gRangeHi;var l=c.strMSString.split(";");if(2<l.length){k=q=b.isBacnet?
1:0;for(var t=0;t<l.length;t++)if(l[t]==c.strValue){k=t+q;break}}else{this.ioBkgnd.floodFill(b,a.x,a.y,this._parseColourValue(c.gcolorCur));return}}else d=b.lowLimit,g=b.highLimit,k=b.pointValue;g==d&&k==g?(f="undefined"!==typeof c.gcolorNorm?c.gcolorNorm:this.arCTr[b.normalColor]<<16|this.arCTg[b.normalColor]<<8|this.arCTb[b.normalColor],n=!1):k>=g?(f="undefined"!==typeof c.gcolorHi?c.gcolorHi:this.arCTr[b.onHighColor]<<16|this.arCTg[b.onHighColor]<<8|this.arCTb[b.onHighColor],n=!0):k<=d&&(f="undefined"!==
typeof c.gcolorLo?c.gcolorLo:this.arCTr[b.offLowColor]<<16|this.arCTg[b.offLowColor]<<8|this.arCTb[b.offLowColor],n=!0);if(!1===b.useLimits||!n||b.isKeyword)n=q=f="","undefined"!==typeof c.gcolorNorm?b.displayConfig===this.DISPLAY_TYPE.POLYGON_GRADIENT?(n=new h,n.setColor(this._hexColour(c.gcolorNorm)),f=n.toRgb(),n.setColor(this._hexColour(c.gcolorHi)),q=n.toRgb(),n.setColor(this._hexColour(c.gcolorLo)),n=n.toRgb(),c=this._computeGradientValue(k,b,d,g),f=this._computeGradientColor(f,q,n,c,b)):f=
c.gcolorNorm:b.displayConfig===this.DISPLAY_TYPE.POLYGON_GRADIENT?(f=[this.arCTr[b.normalColor],this.arCTg[b.normalColor],this.arCTb[b.normalColor]],q=[this.arCTr[b.onHighColor],this.arCTg[b.onHighColor],this.arCTb[b.onHighColor]],n=[this.arCTr[b.offLowColor],this.arCTg[b.offLowColor],this.arCTb[b.offLowColor]],c=this._computeGradientValue(k,b,d,g),f=this._computeGradientColor(f,q,n,c,b)):f=this.arCTr[b.normalColor]<<16|this.arCTg[b.normalColor]<<8|this.arCTb[b.normalColor];this.ioBkgnd.floodFill(b,
a.x,a.y,this._parseColourValue(f))},_computeGradientColor:function(a,b,c,f,d){var g;!1===d.useLimits&&(c=b=a);0<=f&&127>=f?(d=((128-f)*c[0]+f*a[0])/128,g=((128-f)*c[1]+f*a[1])/128,a=((128-f)*c[2]+f*a[2])/128):(f-=128,d=((128-f)*a[0]+f*b[0])/128,g=((128-f)*a[1]+f*b[1])/128,a=((128-f)*a[2]+f*b[2])/128);return d<<16|g<<8|a},_computeGradientValue:function(a,b,c,f){a=a.toFixed(-1===b.decimalPointOverride?Z.get(b.units):b.decimalPointOverride);a=256*(a-c);!1!==b.useLimits&&(a/=f-c);return a},_replaceColour:function(a,
b){var c={},c=0;if(b.isBacnet)switch(b.pointName.type){case N.objectTypes.OBJID_ANALOG_INPUT:case N.objectTypes.OBJID_ANALOG_OUTPUT:case N.objectTypes.OBJID_ANALOG_VALUE:case N.objectTypes.OBJID_PP_ARRAY:case N.objectTypes.OBJID_LOOP:c=Math.floor(b.pointValue)-1;break;case N.objectTypes.OBJID_BINARY_INPUT:case N.objectTypes.OBJID_BINARY_OUTPUT:case N.objectTypes.OBJID_BINARY_VALUE:c=b.pointValue;break;case N.objectTypes.OBJID_MULTI_STATE_INPUT:case N.objectTypes.OBJID_MULTI_STATE_OUTPUT:case N.objectTypes.OBJID_MULTI_STATE_VALUE:c=
b.pointValue-1}else c=b.flashObject.bAnalog?Math.floor(b.pointValue)-1:b.pointValue;0>c?c=0:c>b.replaceColourArray.length-1&&(c=b.replaceColourArray.length-1);if(b.enhancedPresentValueLoaded||this.group.isSuspendedUpdate)c=R.getColourObject(b.replaceColourArray[c]),this.ioBkgnd.replaceColour(b,a.x,a.y,c)},_decodeColors:function(a){var b={},c=new h,f=null,d=l.map(["onHighColor","normalColor","offLowColor"],function(b){a.isRGB?(f=R.getColourObject(a[b]),c.setColor([f.red,f.green,f.blue])):c.setColor([this.arCTr[a[b]],
this.arCTg[a[b]],this.arCTb[a[b]]]);return"#"+c.toHex().slice(1)},this);b.gcolorHi=d[0];b.gcolorNorm=d[1];b.gcolorLo=d[2];a.isBacnet||7!=a.pointName.comType&&10!=a.pointName.comType&&11!=a.pointName.comType||(b.gcolorLo=b.gcolorHi=b.gcolorNorm);return b},_getBoxCoords:function(a){var b={x:0,y:0,w:0,h:0,l:0,t:0,wp:0,hp:0,lp:0,tp:0};a.format&&(b.x=a.graphicXCoordinate,b.y=a.graphicYCoordinate);b.w=a.textXCoordinate;b.h=a.textYCoordinate;this.group.isEnhanced||(b=this._scaleUp(b));b.wp=b.w/this._box.w*
100;b.hp=b.h/this._box.h*100;b.w*=this._box.sx;b.h*=this._box.sy;b.lp=b.x/this._box.w*100;b.tp=b.y/this._box.h*100;return b},_configureMSControls55to67:function(a,b){if(!(55>b.animationPoint||67<b.animationPoint||b.animMissing)){var c={55:[v.binaryOff,v.digitalOn],56:[v.multiOff,v.digitalOn,v.digitalAuto],57:[v.binaryOff,v.digitalAuto],58:[v.digitalCool,v.digitalHeat],59:[v.digitalCool,v.digitalHeat,v.digitalAuto],60:[v.digitalCool,v.digitalHeat,v.digitalAuto,v.multiOff],61:[v.digitalCool,v.digitalHeat,
v.multiOff],62:[v.digitalLow,v.digitalHigh],63:[v.digitalLow,v.digitalHigh,v.digitalAuto],64:[v.multiOff,v.digitalLow,v.digitalHigh],65:[v.multiOff,v.digitalLow,v.digitalHigh,v.digitalAuto],66:[v.multiOff,v.digitalLow,v.digitalMedium,v.digitalHigh]};if(c[b.animationPoint]){var c=c[b.animationPoint],f,d,g;a._range?(d=a._range,g=a._rangeValue):(d=a._range=[],g=a._rangeValue=b.pointValue,0===b.highLimit-b.lowLimit&&(b.lowLimit=a.gRangeLo,b.highLimit=a.gRangeHi));d.length&&d.length<c.length?(c=c.slice(0,
d.length),f=d.length):f=c.length;a.strMSString=c.join(";");a.strDigitalOff=c[0];a.strDigitalOn=c[c.length-1];a.strDigitalMid&&(3<=c.length?(d=l.indexOf(d,a.strDigitalMid),d>=c.length&&(d=Math.floor((c.length-1)/2)),a.strDigitalMid=c[d]):(delete a.strDigitalMid,a.bTriState=0));0!=b.lowLimit&&(g<=b.lowLimit?(b.pointValue=b.lowLimit,g=0):g>=b.lowLimit+f?(b.pointValue=b.lowLimit+f-1,g=f-1):g=b.pointValue-b.lowLimit,a._rangeValue=g);g>=c.length?g=a._rangeValue=c.length-1:0>g&&(g=a._rangeValue=0);b.isBacnet&&
b.pointName.isMultistate()?(a.gRangeLo=1,a.gRangeHi=f):0==b.lowLimit?(a.gRangeLo=0,a.gRangeHi=f-1):(a.gRangeLo=b.lowLimit,a.gRangeHi=b.highLimit);0==b.lowLimit&&(b.isBacnet?b.pointName.isMultistate()?b.pointValue=g+1:b.pointValue=g:b.digitalAnalog&&(b.pointValue=g));a.strValue=c[g];a._range=c}}},setDigitalInfo:function(a,b){var c,f;c=b.units;this.group.isSSC&&b.pointName.isBinary()&&(19===c||64===c)?c=Q.getDigitalRangeByIndex(64):(3==b.pointName.comType&&!b.isBacnet&&51<=c&&!b.digitalAnalog&&(c-=
51),c=b.isBacnet&&d.isArray(b.bacnetStateText)?b.bacnetStateText:Q.getDigitalRange(b));c=c||[];a._range=c;a.strMSString=c.join(";");a.strDigitalOff=c[0]?c[0]:v.binaryOff;a.strDigitalOn=c[c.length-1]?c[c.length-1]:v.digitalOn;b.isBacnet?2>=c.length&&!b.pointName.isMultistate()?f=b.pointValue%2?1:0:(f=1<=b.pointValue&&b.pointValue<=c.length?b.pointValue-1:0,a.strDigitalMid=c[Math.floor((c.length-1)/2)]):38<=b.pointValue&&40>=b.pointValue?(a.strDigitalMid=c[Math.floor((c.length-1)/2)],f=b.pointValue-
38):b.pointValue<c.length?(3<=c.length&&(a.strDigitalMid=c[Math.floor((c.length-1)/2)]),f=b.pointValue):f=b.pointValue%2?1:0;"strDigitalMid"in a&&(a.bTriState=1);f>=c.length&&(f=c.length-1);a.strValue=c[f];a._rangeValue=f;if(2==c.length&&b.isBacnet&&b.property===N.propertyTypes.PROPID_PRESENT_VALUE||!b.isBacnet)b.lowLimit=0,b.highLimit=1;a.gRangeLo=b.lowLimit;a.gRangeHi=b.highLimit;return 2<c.length&&b.isBacnet?f+1:f},_buildFlashObject:function(a){var b=this._decodeColors(a);if(a.isKeyword){if(a.units==
a.KW_MULTIPOINT&&this._updatedGroupElements)throw Error("Multipoint support not implemented");b._textColor=b.gcolorNorm}else b.animationType=a.animationType,b.animationPoint=a.animationPoint,b.bBACnet=a.isBacnet,a.mnemonic=a.pointName.toMnemonic(),b.strName=this._getDisplayName(a),b.bAnalog=a.digitalAnalog,b.uValue=a.pointValue.toFixed(0),b.bAutoMan=a.autoManual,b.units=a.getUnits(),this._buildDisplayValue(b,a),this._configureMSControls55to67(b,a),b.hasOwnProperty("strMSString")&&b.strMSString.length?
(b.bUnits=0,b.bAnalog=0,b.gValue=b.strValue):(20!==a.getUnits()&&a.pointName.comType!==P.pointTypes.RCP_RUNTIME?b.gValue=ga.formatFloat(a.pointValue,b.nNumDecimal,2==a.pointName.comType&&30==a.getUnits()):b.gValue=b.strValue,b.bUnits=1);return b},_getAnalogRange:function(a){switch(a){case 1:return[-50,150];case 2:return[-40,250];default:return a=this._aunitRangeHigh[a],[0,a?a:this.FLT_MAX_32]}},_getDisplayName:function(a){return""!==a.displayName?a.displayName:this.group.isView?a.pointName.toMnemonic():
ca.get(a.pointName,0)||a.mnemonic},_getValueAsIndex:function(a){return a.flashObject.strMSString?a.flashObject._rangeValue:a.pointValue},_supportsArrayUnits:function(a){return ba.isOpen(a)||ba.isNewton(a)},_buildDisplayValue:function(a,b){var c,f=b.pointValue;a.strValue=f.toString();a.bTriState=0;a.Units="";a.nNumDecimal=1;a.strMSString=[];if(!b.digitalAnalog||b.pointName.type===N.objectTypes.OBJID_SCHEDULE&&b.pointName.subType===N.primitiveTypes.UNSIGNED_INTEGER)f=this.setDigitalInfo(a,b);else if(12===
b.pointName.comType){a.strValue="";if(b.getUnits()||b.bacnetArrayUnits){b.bacnetArrayUnits&&(b.units=b.bacnetArrayUnits);var d=(c=this._supportsArrayUnits(b.pointName))?b.arrayIdx:b.getUnits();b.isBacnet&&0===d&&(b.units=0);var g="",k=b.getUnits();c&&(k=Q.getAnalogIndex(b.getUnits(),b.pointName),g=Q.getAnalog(k,da));-1<d&&(a.strName+="[ "+d+" ]");-1<d&&(20===b.getUnits()&&c?a.strValue=Y.getTimeUnitValue(b.pointValue):a.strValue=-1!==b.decimalPointOverride?ga.formatFloat(b.pointValue,b.decimalPointOverride,
0):c?rc.sys.job.supportsAdditionalUnits(b.pointName)?ga.formatFloat(b.pointValue,rc.sys.decpnt.get(b.getUnits()),0):ga.formatFloat(b.pointValue,rc.sys.decpnt.get(k),0):ga.formatFloat(b.pointValue,rc.sys.decpnt.get(0),0),b.showUnits&&20!=b.getUnits()&&(a.strValue+=" "+g,a.Units=g))}else-1<b.arrayIdx&&(a.strValue=ga.formatFloat(b.pointValue,-1!==b.decimalPointOverride?b.decimalPointOverride:Z.get(0),0));a.gRangeLo=0;a.gRangeHi=this.FLT_MAX_32}else switch(b.getUnits()){case 20:a.strValue=Y.getTimeUnitValue(b.pointValue);
a.gRangeLo=0;a.gRangeHi=this.FLT_MAX_32;break;case 30:c=Q.getAnalog(b.getUnits(),da);a.nNumDecimal=-1!==b.decimalPointOverride?b.decimalPointOverride:Z.get(b.getUnits());a.strValue=ga.formatFloat(b.pointValue,a.nNumDecimal,0);b.showUnits&&3==b.pointName.comType&&(a.strValue+=" "+c);a.uValue=b.pointValue.toFixed(a.nNumDecimal);a.gRangeLo=0;a.gRangeHi=4294967296;break;default:b.isMultiStateUnit()?f=this.setDigitalInfo(a,b):(c=Q.getAnalogIndex(b.getUnits(),b.pointName),9==b.pointName.comType?b.pointName.isInstanceOf(O)?
a.strValue=b.pointValue.toFixed(1):(f=this._suspendedUpdateRuntimevalue(b,f),d=Y.msecToAccumulation(1E3*f,!1).split(":"),g=d[0],4>g.toString().length&&(g=("0000"+d[0]).slice(-4)),a.strValue=[g,":",("00"+d[1]).slice(-2)].join("")):(a.nNumDecimal=2==b.pointName.comType?-1!==b.decimalPointOverride?b.decimalPointOverride:Z.get(Q.newUnitsDecimalIndex(c)):-1!==b.decimalPointOverride?b.decimalPointOverride:rc.sys.job.supportsAdditionalUnits(b.pointName)?Z.get(b.getUnits()):Z.get(c),a.strValue=ga.formatFloat(b.pointValue,
a.nNumDecimal,2==b.pointName.comType&&30==b.getUnits())),3!=b.pointName.comType||23!=c?(b.showUnits&&(a.strValue+=" "+Q.getAnalog(c,da),a.Units=Q.getAnalog(c,da)),c=this._getAnalogRange(c),a.gRangeLo=c[0],a.gRangeHi=c[1]):(b.showUnits&&(a.strValue+=" "+v.analogRH,a.Units=Q.getAnalog(c,da)),a.gRangeLo=0,a.gRangeHi=100))}0!==b.highLimit-b.lowLimit&&(a.gRangeLo=b.lowLimit,a.gRangeHi=b.highLimit);a._textColor=a.gcolorNorm;this._supportsHighLowColours(b)&&(b.useLimits&&(b.highLimit==b.lowLimit&&f==b.highLimit?
a._textColor=a.gcolorNorm:f>=b.highLimit?a._textColor=a.gcolorHi:f<=b.lowLimit&&(a._textColor=a.gcolorLo)),b.landingPad&&b.landingPad.enableLimits&&(b.highLimit==b.lowLimit&&f==b.highLimit?b.landingPad.setBackgroundToNormalColour():f>=b.highLimit?b.landingPad.setBackgroundToHighColour():f<=b.lowLimit?b.landingPad.setBackgroundToLowColour():b.landingPad.setBackgroundToNormalColour()));a.gcolorCur=a._textColor;if(b.isBacnet){f=0;if(85==b.property)switch(f=null!=b.bacnetStatusFlags&&b.bacnetStatusFlags.getBit(2)?
1:0,b.pointName.type){case N.objectTypes.OBJID_ANALOG_OUTPUT:case N.objectTypes.OBJID_BINARY_OUTPUT:case N.objectTypes.OBJID_MULTI_STATE_OUTPUT:case N.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT:null!=b.bacnetPriorityArray8&&0!=b.bacnetPriorityArray8.t&&(f=1);break;case N.objectTypes.OBJID_ANALOG_VALUE:case N.objectTypes.OBJID_BINARY_VALUE:case N.objectTypes.OBJID_MULTI_STATE_VALUE:null!=b.bacnetPriorityArray8&&0!=b.bacnetPriorityArray8.t&&(f=1);case N.objectTypes.OBJID_ANALOG_INPUT:case N.objectTypes.OBJID_BINARY_INPUT:case N.objectTypes.OBJID_MULTI_STATE_INPUT:case N.objectTypes.OBJID_LOOP:case N.objectTypes.OBJID_PROGRAM:case N.objectTypes.OBJID_SCHEDULE:case N.objectTypes.OBJID_ACCUMULATOR:case N.objectTypes.OBJID_PULSE_CONVERTER:"undefined"!==
typeof b.outOfService&&(f=b.outOfService);null!=b.bacnetStatusFlags&&b.bacnetStatusFlags.getBit(3)&&(f=1);break;case N.objectTypes.OBJID_CALENDAR:b.autoManual&&(f=1)}else if(this._isBacnetPropertyReference(b))if(a.strValue=" ",this._isPropertyObjectSet(b))a.strValue=b.bacnetPropObj.stringValue,c=b.bacnetPropObj.propertyObject,3<=c.t&&5>=c.t&&(a.strValue=ga.formatFloat(c.v,-1!==b.decimalPointOverride?b.decimalPointOverride:Z.get(0),0));else{c=null;switch(b.pointName.type){case 0:c=this._analogInsProp;
break;case 1:case 2:c=this._analogOutsVarsProp;break;case 3:c=this._binInsProp;break;case 4:case 5:c=this._binOutsVarsProp;break;case 13:c=this._msInsProp;break;case 14:case 19:c=this._msOutsVarsProp;break;case 8:c=this._devProp;break;case 17:c=this._schedProp;break;case 12:c=this._loopProp;break;case 27:case 20:c=this._trendProp;break;case 142:c=this._aryProp}null!=c&&-1!=l.indexOf(c,b.property)&&(a.strValue=this._buildPropStr(b.property,b.pointValue))}b.autoManual=f}b.isBacnet&&null!=b.bacnetError&&
(b.bacnetError.toStringMsg?a.strValue=b.bacnetError.toStringMsg():b.bacnetError.message&&(a.strValue=b.bacnetError.message));0===a.strMSString.length&&delete a.strMSString},_suspendedUpdateRuntimevalue:function(a,b){this.group.isSuspendedUpdate&&a.bacnetPropObj&&a.bacnetPropObj.propertyObject&&(b=a.bacnetPropObj.propertyObject.valueOf());return b},_supportsHighLowColours:function(a){var b=!1;if(a.pointName.type!==N.objectTypes.OBJID_DEVICE&&a.pointName.comType!==P.pointTypes.RCP_PROGRAM)switch(a.pointName.comType){case P.pointTypes.RCP_ARRAY:if(this._isArrayIndexedPoint(a)){b=
!0;break}case P.pointTypes.RCP_GROUP:case P.pointTypes.RCP_TRENDLOG:case P.pointTypes.RCP_TABLE:case P.pointTypes.INVALID:break;default:b=!0}else a.isBacnet&&a.property!==N.propertyTypes.PROPID_PRESENT_VALUE&&(b=!0);return b},_isArrayIndexedPoint:function(a){var b=!0;a.pointName.comType===P.pointTypes.RCP_ARRAY&&(a.isBacnet?0===a.arrayIdx&&(b=!1):a.units||(b=!1));return b},_buildPropStr:function(a,b){switch(a){case 111:return["Alm",b&8?1:0,"Flt",b&4?1:0,"OOS",b&1?1:0,"OvrRdn",b&2?1:0].join(" ");case 81:case 133:case 24:case 193:case 205:case 144:return b?
"Yes":"No";case 117:case 94:case 82:case 50:case 27:case 20:return da.getAbbreviation(b);default:return b+""}},loadDescriptors:function(){this.renderGroupElements()},setScaleToFit:function(b){this.scaleToFit=b;b=(b=a("g"))?A.parse(b):{};b.sf=this.scaleToFit;a("g",A.stringify(b),{expires:365,path:"/"});this.resize()},pause:function(){window.clearTimeout(this._updateTimer);this._playing=!1},play:function(){this._playing||this._dialog&&this._dialog.isOpen&&this._dialog.isOpen()||(this._playing=!0,this._updating=
!1,window.clearTimeout(this._updateTimer),this.update())},onUpdateBegin:function(){this.emit("updateBegin",null)},onUpdateEnd:function(){this.emit("updateEnd",null)},onUpdateFail:function(){this.emit("updateFail",null)},_updateBegin:function(){if(this._updating)return!1;this._updating=!0;this._updateTimer&&window.clearTimeout(this._updateTimer);this._retryHandler.reset();this.onUpdateBegin();return!0},_updateEnd:function(){this._updating&&(this._updateTimer&&clearTimeout(this._updateTimer),this._updateTimer=
window.setTimeout(d.hitch(this,this.update),this.updateTimeout),this._updating=!1,this.onUpdateEnd())},_updateFail:function(){this._retryHandler.fail(x.updateProblem);this.onUpdateFail();this._updateEnd()},loadHandler:function(){this._updating&&this._updateEnd()},errorHandler:function(){this.load()},_groupLinkHandler:function(a){try{var b={fromAnimation:!0,currentTarget:{index:a}},c=this.ioGrpEls.ges[a];c&&this._canEdit(c)&&this.pointClickHandler(b)}catch(pa){}},_getLink:function(a){return location.href.split("#")[0]+
a},_hasPermissionToPoint:function(a){var b=!0;if(a)switch(a.comType){case N.comTypes.OUTPUT:b=rc.session.hasRole(rc.session.roles.outChg);break;case N.comTypes.INPUT:b=rc.session.hasRole(rc.session.roles.inChg);break;case N.comTypes.VALUE:b=rc.session.hasRole(rc.session.roles.varChg);break;case N.comTypes.LOOP:b=rc.session.hasRole(rc.session.roles.conChg);break;case N.comTypes.ARRAY:b=rc.session.hasRole(rc.session.roles.aryChg);break;default:b=!0}return b},_hasPermissionToSecondaryLink:function(a){var b=
!0;a.secondaryLink&&!this._isLinkableSecondary(a.secondaryLink)&&(pointObject=ca.mnemonicToObject(a.secondaryLink),b=this._hasPermissionToPoint(pointObject));return b},pointClickHandler:function(a){var b,c=this.ioGrpEls.ges[a.currentTarget.index];if(c){var f=function(b){/^[a-z]/i.test(b)&&(b=this.group.deviceId+b);b=R.mnemonicToUri(b,!0);R.redirectToHash(b,a)};if(c.isAutoTrendLogLink())f(c.getAutoTrendLogMnemonic());else if(c.secondaryLink){if(this._hasPermissionToSecondaryLink(c))return this._isFilelink(c)?
this._useFileLink(c,a):this._useSecondaryLink(c.secondaryLink,a)}else if(c.isKeyword)if(c.textKWTitle)this._textDialog||(this._textDialog=new M({ge:c}),this._supportingWidgets.push(this._textDialog)),rc.session.isPublic()||this._isReadOnly(c)?this._textDialog.showReadOnly(c.textKWTitle):this._textDialog.show(c.textKWTitle);else switch(c.units){case c.KW_PREVIOUS:window.history.back();break;case c.KW_BYE:rc.session.logout();break;case c.KW_ALARMS:if(a.fromAnimation||c.isFloodFill)b=R.mnemonicToUri("ALARM",
!0),R.redirectToHash(b,a);break;case c.KW_HYPERLINK:(b=c.isEnhanced?c.getHyperLink():fa.get(this.group.pointName.toDashMnemonic(),c.index))&&b.href&&R.gotoExternalLink(b.href,a);break;case c.KW_RTREPORT:if(a.fromAnimation||c.isFloodFill)b=R.mnemonicToUri(c.pointName.device+"RT-REPORT"),R.redirectToHash(b,a)}else switch(c.pointName.comType){case N.comTypes.ARRAY:case N.comTypes.OUTPUT:case N.comTypes.INPUT:case N.comTypes.VALUE:case N.comTypes.LOOP:c.property!==N.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE&&
this.showDialog(c);break;case N.comTypes.GROUP:case N.comTypes.SCHEDULE:case N.comTypes.CALENDAR:if(!this._isBacnetPropertyReference(c)){f(c.mnemonic);break}default:(this._isBoxDisplay(c)||c.displayConfig===this.DISPLAY_TYPE.ANIMATION)&&this._isLinkablePoint(c)&&f(c.mnemonic);if(1===c.animationType&&(b=this._getObjectValues(c),b.href.length)){location.href=this._getLink(b.href);break}this._isBacnetPropertyReference(c)?(new W(c.property)).canAddRemoveListElement()?(this.createGetListElementDialog(),
this._dialogListElement.show(c,this)):c.pointName.type!==N.objectTypes.OBJID_EVENT_ENROLLMENT||c.property!==N.propertyTypes.PROPID_EVENT_PARAMETERS&&c.property!==N.propertyTypes.PROPID_PRESENT_VALUE?this.showDialog(c):this._createAndDisplayEventParameterDialog(c):c.pointName.type!==N.objectTypes.OBJID_COMMAND&&c.pointName.type!==N.objectTypes.OBJID_ACCUMULATOR&&c.pointName.type!==N.objectTypes.OBJID_PULSE_CONVERTER||c.property!==N.propertyTypes.PROPID_PRESENT_VALUE?f(c.mnemonic):this.showDialog(c)}}},
_isBoxDisplay:function(a){return a.displayConfig===this.DISPLAY_TYPE.POLYGON||a.displayConfig===this.DISPLAY_TYPE.POLYGON_GRADIENT||a.displayConfig===this.DISPLAY_TYPE.REPLACE_COLOR||a.displayConfig===this.DISPLAY_TYPE.BOX_COLORED||a.displayConfig===this.DISPLAY_TYPE.BOX_INVISIBLE},_connectClickEvent:function(a){a.clickConnect&&a.clickConnect.remove();if(a.isAutoTrendLogLink()||(a.animationType!=a.ANIM_INTERACTIVE||a.animMissing)&&!a.isUnsupportedPoint()&&this._canEdit(a)){if(a.nodeType===this.NODE_TYPE.landingPad){var b=
d.hitch(this,function(b){b.currentTarget.index=a.index;this.pointClickHandler(b)});a.clickConnect=C(a.landingPad.valueContainer,"click",b);a.landingPad.set("clickHandlerForIcons",b)}else a.clickConnect=C(a.domNode,"click",d.hitch(this,this.pointClickHandler));this._pConnects[a.index]&&this._pConnects[a.index].remove&&this._pConnects[a.index].remove();this._pConnects[a.index]=a.clickConnect}},_isBacnetPropertyReference:function(a){return!a.isBacnet||85==a.property&&a.pointName.type!==N.objectTypes.OBJID_EVENT_ENROLLMENT?
!1:!0},_isPropertyObjectSet:function(a){return a.bacnetPropObj&&a.bacnetPropObj.isSet?!0:!1},_canEditAdvancedBacnet:function(a){return a.isBacnet&&rc.session.hasRole(rc.session.roles.bacnetAdvChg)&&((new W(a.property)).canAddRemoveListElement()||(7==a.pointName.type||23==a.pointName.type||24==a.pointName.type)&&85==a.property)?!0:!1},_canEdit:function(a){if(a.isKeyword&&a.units===a.KW_STATIC_IMAGE&&!a.secondaryLink)return a.canEdit=!1;if(a.secondaryLink&&!a.isKeyword){var b=ca.mnemonicToObject(a.secondaryLink),
c={pointName:b};a.canEdit=b?this._isLinkableSecondary(a.secondaryLink)||this._isLinkablePoint(c):this._isLinkableSecondary(a.secondaryLink);return a.canEdit}a.canEditAdvancedBacnet=this._canEditAdvancedBacnet(a);if(a.canEditAdvancedBacnet)return a.canEdit=!0;if((b=this._isBacnetPropertyReference(a))&&!this._isPropertyObjectSet(a)&&!a.canEditAdvancedBacnet||a.isBacnet&&!b&&5!=a.pointName.comType&&6!=a.pointName.comType&&10!=a.pointName.comType&&11!=a.pointName.comType&&12!=a.pointName.comType&&null==
a.bacnetStatusFlags||12==a.pointName.comType&&0>a.arrayIdx||a.pointName&&(28==a.pointName.type||7==a.pointName.comType)&&!b)return a.canEdit=!1;if(a.isKeyword&&a.textKWTitle)return a.canEdit=!0;if(a.secondaryLink&&!this._isLinkableSecondary(a.secondaryLink)&&!this._hasPermissionToSecondaryLink(a))return a.canEdit=!1;c=!0;if(this._isCheckSecurity(a))return b=a.isEnhanced?a.security:a.level,a.pointValue!==b&&(a.isRendered=!1),a.canEdit=rc.session.getAttribute("AccessLevel")>=b,a.canEdit;if(5===a.pointName.comType||
6===a.pointName.comType)return a.canEdit=!0;c=0===a.role?rc.session.hasRole(rc.session.roles.operator):rc.session.hasRole(rc.session.roles.endUser);if(!c)return a.canEdit=!1;c=!0;c=[a.pointName];a.secondaryLink&&!this._isLinkableSecondary(a.secondaryLink)&&(pointObject=ca.mnemonicToObject(a.secondaryLink),c.push(pointObject));c=l.some(c,function(a){return this._hasPermissionToPoint(a)},this);a.units==a.KW_ALARMS&&(c=!rc.session.hasRole(rc.session.roles.alarmDisable));!c&&a.secondaryLink&&this._isLinkableSecondary(a.secondaryLink)&&
(c=!0);b&&(c=rc.session.hasRole(rc.session.roles.bacnetAdvChg));return a.canEdit=c},_isCheckSecurity:function(a){return!this._isBacnetPropertyReference(a)&&(a.isKeyword||a.pointName&&("object"===typeof a.pointName&&a.pointName.isWorksheet()||11===a.pointName.comType||10===a.pointName.comType))},_isReadOnly:function(a){var b=0===a.role?rc.session.hasRole(rc.session.roles.operator):rc.session.hasRole(rc.session.roles.endUser);a=rc.session.getAttribute("AccessLevel")>=a.level;return!(b&&a)},_connectKeys:function(){this._keyHandlers.push(C(document,
"keydown",d.hitch(this,this._keydownHandler)));this._keyHandlers.push(C(document,"keyup",d.hitch(this,this._keyupHandler)));l.forEach(this._keyHandlers,d.hitch(this,function(a){this.own(a)}))},_disconnectKeys:function(){l.forEach(this._keyHandlers,function(a){a.remove()});this._keyHandlers=[]},_keydownHandler:function(a){this._keyView||(78==a.keyCode?(this._keyView=!0,k.add(this.domNode,"rcViewNumbers")):80==a.keyCode&&(this._keyView=!0,k.add(this.domNode,"rcViewPoints")))},_keyupHandler:function(a){this._keyView&&
(k.remove(this.domNode,"rcViewNumbers"),k.remove(this.domNode,"rcViewPoints"),this._keyView=!1)},_useFileLink:function(a,b){if(a.units==a.KW_STATIC_IMAGE){var c=a.getFileLink();c&&c.href&&R.gotoExternalLink(c.href,b)}},_useSecondaryLink:function(a,b){var c=/^[a-z]/i;"PREVIOUS"===a.toUpperCase()?window.history.back():"BYE"===a.toUpperCase()?rc.session.logout():this._isLinkableSecondary(a)?R.gotoExternalLink(a,b):("ALARMS"===a.toUpperCase()?a="ALARM":c.test(a)&&(a=this.group.deviceId+a),a=R.mnemonicToUri(a,
!0),R.redirectToHash(a,b))},_hexColour:function(a){isNaN(parseInt(a,16))||(a="#"+a.slice(2));return a},_parseColourValue:function(a){if("number"===typeof a)return a;a.toString().startsWith("#")&&(a=a.slice(1));return parseInt(a,16)},_isLinkableSecondary:function(a){return/^(https?:\/\/|www|mailto:|ftp:\/\/|telnet:\/\/)/i.test(a)},onInitSuccess:function(){this.emit("initSuccess",null)},destroy:function(){this.update=function(){};window.clearTimeout(this._updateTimer);this._retryHandler&&(this._retryHandler.shutdownRetryQueue(),
this._retryHandler.reset(),this._retryHandler.destroyRecursive());null!=this._flashGemQTimer&&window.clearTimeout(this._flashGemQTimer);this._disconnectKeys();this._clearLoops();rc.xhr.removeGroup("GRP");this._imageQ=[];this._pConnects&&Object.values(this._pConnects).forEach(function(a){a&&a.remove&&a.remove()});this._pConnects=null;this.waiting&&(q.destroy(this.waiting),this.waiting=null);this.ioBkgnd.destroyRecursive();this.ioGrpEls.destroyRecursive();this.ioObject.destroyRecursive();ea.reset();
this.inherited(arguments)}})})},"rc/reliable/_group/DialogEdit":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/i18n!rc/nls/grp dojo/i18n!rc/nls/all dojo/i18n!rc/nls/systemData dojo/on dojo/query dojo/store/Memory dojo/string dojo/text!rc/reliable/_group/templates/DialogEdit.html dojo/topic ./DialogRelinquish ./io/bacnet ../ReliableEnums ../../_base/util ../../bacnet/enums ../../bacnet/io/AnyPrimitive ../../bacnet/io/Number ../../bacnet/io/Object ../../bacnet/io/service/WritePropertyMultiple ../../sys/job dijit/Dialog dijit/form/TextBox dijit/form/ValidationTextBox dijit/form/FilteringSelect dijit/form/Button dijit/form/Select ../../widget/Dialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G){return h("rc/reliable/_group/DialogEdit",[p,r,m],{widgetsInTemplate:!0,templateString:x,priorityArraySupported:!1,rcStrings:k,_rangeIndex:0,_rangeOffset:0,_autoManualState:0,_amtAry:null,_fullMnemonic:null,_timedOverrideSupported:!1,_timedOverrideMinutes:0,_multiStateAry:null,invalidMsgNumber:"",invalidMsgTime:"",ge:null,_usingTextArea:!1,_relinquishDialog:null,_autoManualClickConnect:null,_valueAtOpen:null,ioBacnet:null,postCreate:function(){this.inherited(arguments);
this.ioBacnet=new A;this._amtAry=[k.auto,k.manual,k.timed,k.overridden,k.spSwitch];this.invalidMsgNumber=k.invalidNumber;this.invalidMsgTime=k.invalidTime;this._errorDialog.set("title",k.invalidInput);this._errOk.set("label",k.btnOk);this._valueTB.set("tooltipPosition",["above"]);this._valueTB.set("invalidMessage",this.invalidMsgNumber);this.own(f(this._dialog,"hide",c.hitch(this,function(){this.onHide()})));this._autoManualFS.textbox.onkeypress=this._autoManualFS.textbox.onkeydown=this._multiStateFS.textbox.onkeypress=
this._multiStateFS.textbox.onkeydown=c.hitch(this,function(a){E.stopEvent(a)});this.own(f(this._multiStateFS.textbox,"click",c.hitch(this,this._onClickMultiState)),f(this._reasonTB,"blur",c.hitch(this,this._setRequiredReason)));this._dialog.set("title",q.editObject);this._errorDialog.set("title",k.invalidInput);n.create("span",{innerHTML:k.requiredInfoMissing},this.errorTextContainer);b("touch")&&(this._multiStateFS.textbox.readOnly=!0,this._autoManualFS.textbox.readOnly=!0);this._timedOverrideTB.set("invalidMessage",
k.invalidTimedOverride);this._loading.title=t.checkTimedOverride;this._setFilterSelectStores();this._reasonConnects=[]},_getValueAttr:function(){return this._hasStates()?Number(this._multiStateFS.get("value"))+this._rangeOffset:this._usingTextArea?this._textArea.get("value"):this._valueTB.get("value")},_setPriorityArraySupportedAttr:function(b){this.ge.isBacnet&&b&&!this.ge.bacnetPropObj&&rc.session.hasRole(rc.session.roles.autoManual)?a.set(this.relinquishButtonContainer,"visibility",""):a.set(this.relinquishButtonContainer,
"visibility","hidden");this._set("priorityArraySupported",b)},capitalizeString:function(a){return a.toUpperCase()},_setFilterSelectStores:function(){var a={identifier:"value",label:"name"};a.items=[{name:this._amtAry[0],value:0},{name:this._amtAry[1],value:1}];this._autoManualFS.store=new w({data:c.clone(a)});a.items=[{name:this._amtAry[3],value:3},{name:this._amtAry[4],value:4}];this._handOverrideFS.store=new w({data:c.clone(a)})},show:function(a,b,f){f="undefined"===typeof f?!0:f;this.ge=a;this.stg=
b;this.stg.pause();this._timedOverrideSupported=!1;this._autoManualState=this.ge.autoManual;this.set("priorityArraySupported",!1);this._show(f);f&&this._dialog.show();rc.session.validate().then(c.hitch(this,function(a){this._enableAutoManual(!1);if(a.pointName.comType===C.pointTypes.RCP_ARRAY||a.bacnetPropObj)this._autoManualState=this.ge.autoManual,this._showDialog();else{d.add(this.relinquishButtonContainer,"hidden");d.add(this._loading,"dijitContentPaneLoading");d.add(this.autoManContainer,"auto-man-container");
this._ok.set("title",t.checkTimedOverride);var b=[{property:B.propertyTypes.PROPID_PRIORITY_ARRAY,index:8,value:new D}];a.pointName.isInOutVar()&&(G.isMachPro(a.pointName)||G.isSSC(a.pointName))&&b.push({property:B.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES,index:-1,value:new F(0,B.primitiveTypes.UNSIGNED_INTEGER)});a=this.ioBacnet.readProperties(b,this.ge);this.own(a);a.then(c.hitch(this,function(a){for(var b=0;b<a.o.length;++b)for(var c,f=0;f<a.o[b].pl.length;++f)switch(c=a.o[b].pl[f],c.p.v){case B.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES:c.v instanceof
F&&(this._timedOverrideMinutes=c.v.v,this._timedOverrideSupported=!0,this._autoManualFS.store.query({name:k.timed}).length||this._autoManualFS.store.put({name:this._amtAry[2],value:2}));break;case B.propertyTypes.PROPID_PRIORITY_ARRAY:var d=null;c.v instanceof F?d=c.v:c.v&&c.v.v instanceof F&&(d=c.v.v);this.ge.bacnetPriorityArray8=d;this.set("priorityArraySupported",d instanceof F)}}),c.hitch(this,function(){this._timedOverrideSupported=!1;this.ge.bacnetPriorityArray8=null;this.set("priorityArraySupported",
!1)}));a.always(c.hitch(this,function(a){this._autoManualState=this._timedOverrideMinutes&&this._timedOverrideSupported?2:this.ge.autoManual?1:0;rc.session.hasRole(rc.session.roles.autoManual)&&(this._enableAutoManual(!0),d.remove(this.autoManContainer,"auto-man-container"));d.remove(this.relinquishButtonContainer,"hidden");d.remove(this._loading,"dijitContentPaneLoading");this._ok.set("title","");this._showDialog()}))}},a))},_showDialog:function(){this._ok.set("disabled",!1);this._valueTB.set("disabled",
!1);this._updateAutoManual()},_show:function(){this._ok.set("disabled",!0);this._fullMnemonic=this.ge.mnemonic;null!==this.ge.property&&this.ge.property!==B.propertyTypes.PROPID_PRESENT_VALUE&&(this._fullMnemonic+=":"+this.ge.property);this.ge.pointName.comType===B.comTypes.ARRAY&&0<this.ge.arrayIdx&&(this._fullMnemonic+="["+this.ge.arrayIdx+"]");this._displayName.innerHTML=this.ge.flashObject.strName+(this.ge.flashObject.strName!==this.ge.mnemonic?" ("+this._fullMnemonic+")":"");if(this._hasStates()){var b=
{identifier:"value",label:"name",items:[]};this._multiStateAry=this.ge.flashObject.strMSString.split(";");this._rangeIndex=0;var f=this.ge.flashObject.strValue.toString();l.forEach(this._multiStateAry,function(a,c){a===f&&(this._rangeIndex=c);b.items.push({name:a,value:c})},this);this._multiStateFS.store=new w({data:c.clone(b)});this._multiStateFS.set("value",this._rangeIndex);this._rangeOffset=this.ge.pointValue-this._rangeIndex;this._valueAtOpen=this.ge.pointValue;d.add(this._valueTBContainer,"hideContainer");
d.remove(this._multiStateFSContainer,"hideContainer")}else this._valueAtOpen=this.ge.flashObject.strValue.toString().split(" ")[0],this._valueTB.set("value",this._valueAtOpen),20!=this.ge.getUnits()||!0!==this.ge.isBacnet&&this.ge.pointName.comType===C.pointTypes.RCP_ARRAY?(this._valueTB.set("invalidMessage",this.invalidMsgNumber),this._valueTB.set("pattern","[+|-]{0,1}(\\d+|\\d+\\.\\d+){1}([e|E]{1}\\+\\d+){0,1}")):(this._valueTB.set("invalidMessage",this.invalidMsgTime),this._valueTB.set("pattern",
"(\\d+)(:(\\d|[012345]\\d){1}){2}")),d.remove(this._valueTBContainer,"hideContainer"),d.add(this._multiStateFSContainer,"hideContainer");a.set(this._textArea.domNode,"display","none");a.set(this._valueTB.domNode,"display","inline-block");if(this.ge.bacnetPropObj){var g=this.ge.bacnetPropObj;this._usingTextArea=g.isCharString();this._valueTB.set("invalidMessage",g.prompt);this._valueTB.set("pattern",g.regExp);this._usingTextArea?(this._textArea.set("value",g.stringValue),a.set(this._textArea.domNode,
"display","inline"),a.set(this._valueTB.domNode,"display","none")):this._valueTB.set("value",g.stringValue);this._valueAtOpen=g.stringValue;a.set(this._autoManualFS.domNode,"display","none")}else a.set(this._autoManualFS.domNode,"display","inline-block");this._reasonTB.set("value","");this._reasonTB.set("required",!1);this._toggleRequiredNotes(rc.session.reasonRequired());this._updateAutoManual()},_setRequiredReason:function(){var a=rc.session.reasonRequired();this._reasonTB.set("required",a);this._toggleRequiredNotes(a)},
_toggleRequiredNotes:function(a){u(".required-sign",this._dialog.domNode).forEach(c.hitch(this,function(b){d.toggle(b,"hidden",!a)}))},_closeErrorDialog:function(){this._errorDialog.hide()},_onChangeMultiState:function(a){this.ge.bacnetPropObj||(this._rangeIndex=parseInt(a,10))},_onClickMultiState:function(){this._rangeIndex++;this._rangeIndex>=this._multiStateAry.length&&(this._rangeIndex=0);this._multiStateFS.set("value",this._rangeIndex)},_updateAutoManual:function(){this.ge.isBacnet&&null!=this.ge.bacnetStatusFlags&&
this.ge.bacnetStatusFlags.getBit(2)?(this._autoManualState=this.ge.pointName.comType===C.pointTypes.RCP_OUTPUT?4:3,d.add(this.autoManContainer,"hideContainer"),d.remove(this.handOverrideContainer,"hideContainer"),this._handOverrideFS.set("value",this._autoManualState),this._handOverrideFS.set("disabled",!0),this.ge.property!==B.propertyTypes.PROPID_PRESENT_VALUE||this.ge.pointName.type!=B.objectTypes.OBJID_ANALOG_VALUE&&this.ge.pointName.type!=B.objectTypes.OBJID_BINARY_VALUE&&this.ge.pointName.type!=
B.objectTypes.OBJID_MULTI_STATE_VALUE||(this._ok.set("disabled",!0),this._valueTB.set("disabled",!0))):(d.add(this.handOverrideContainer,"hideContainer"),d.remove(this.autoManContainer,"hideContainer"),this._autoManualFS.set("value",this._autoManualState));if(2===this._autoManualState){var a=this._timedOverrideMinutes?this._timedOverrideMinutes:30,b=Math.floor(a/60),a=a-60*b,c="";10>b&&(c+="0");c+=b+":";10>a&&(c+="0");this._timedOverrideTB.set("value",c+a);d.remove(this._timedOverrideTB.domNode,"hidden")}else d.add(this._timedOverrideTB.domNode,
"hidden");this._timedOverrideSupported||2<this._autoManualFS.store.data.length&&this._autoManualFS.store.data[2].name===this._amtAry[2]&&this._autoManualFS.store.data.splice(2,1)},_onClickAutoManual:function(){var a=this._autoManualFS.value+1;a>1+this._timedOverrideSupported&&(a=0);this._autoManualFS.set("value",a)},_onChangeAutoManual:function(a){this._autoManualState=a;this._autoManualState>=2+this._timedOverrideSupported&&(this._autoManualState=0);this._updateAutoManual()},_enableAutoManual:function(a){this._autoManualFS.set("disabled",
!a);this._autoManualFS.set("required",a);a?this._autoManualClickConnect||(this._autoManualClickConnect=f(this._autoManualFS.textbox,"click",c.hitch(this,this._onClickAutoManual))):(this._autoManualClickConnect&&this._autoManualClickConnect.remove(),this._autoManualClickConnect=null)},_onClickRelinquish:function(){null===this._relinquishDialog?(this._relinquishDialog=new v({groupElement:this.ge}),this._supportingWidgets.push(this._relinquishDialog)):this._relinquishDialog.set("groupElement",this.ge);
this._relinquishDialog.show()},_validate:function(){this._setRequiredReason();var a;this._usingTextArea?a=this._textArea.get("value").length?!0:!1:(a=!1,a=this._hasStates()?this._multiStateFS.isValid():this._valueTB.isValid(),this._timedOverrideSupported&&2===this._autoManualState&&!this._timedOverrideTB.isValid()&&(a=!1));var b=!0,c=this._handOverrideFS&&this._handOverrideFS.item&&4===this._handOverrideFS.item.value;this.ge.pointName.comType===C.pointTypes.RCP_OUTPUT||!1!==this._handOverrideFS.get("disabled")||
c||(b=this._autoManualFS.isValid());return this._reasonTB.isValid()&&a&&b},_hasStates:function(){return"strMSString"in this.ge.flashObject&&this.ge.flashObject.strMSString.length&&!this.ge.bacnetPropObj?!0:!1},_onClickOk:function(){if(this._validate()){rc.xhr.setCacheId(this.stg.group.pointName.toMnemonic()+"_"+ ++this.stg.xhrCacheIndex);if(this.ge.bacnetPropObj)this._setBACnetPropertyValue();else{var a=[];this._updateGroupElement();if(this.ge.isBacnet)this._getUpdatedBACnetProperties(a,this.ge.pointName);
else{var b=this._createAuditEntry();this.stg.ioGrpEls.saveElement(this.ge).then(c.hitch(this,this._onWrite,b))}this._timedOverrideSupported&&this._hasTimedOverrideChanged()&&this._addTimedOverrideWrite(a);this._writeBACnetProperties(a)}this.stg.renderGroupElement(this.ge);this._dialog.hide()}else this._errorDialog.show()},_onClickCancel:function(){this._dialog.hide()},isOpen:function(){return this._dialog.open},setSaveValues:function(a,b,f,d,k){var q=g.after(this,"_showDialog",c.hitch(this,function(){q.remove();
if(this._hasStates()){if(!c.isString(a)){var g=d.flashObject.strMSString.split(";");d.isBacnet&&d.pointName.isMultistate()&&a--;55<=d.animationPoint&&67>=d.animationPoint&&!d.animMissing&&0!=d.lowLimit&&(a-=d.lowLimit);a=g[a]}for(g=20;this._multiStateFS._lastDisplayedValue!=a&&g--;)this._onClickMultiState()}else this._valueTB.set("value",a);this._autoManualState=b?1:0;this._reasonTB.set("value",f);this._validate()&&this._onClickOk()}));this.show(d,k,!1)},_updateGroupElement:function(){var a=-1,a=
this.ge.pointName;this.ge.autoManual=this._autoManualState?1:0;this._hasStates()?this.ge.pointValue=parseFloat(this._rangeIndex+this._rangeOffset):a.comType===C.pointTypes.RCP_INPUT&&30==this.ge.getUnits()?this.ge.pointValue=parseInt(this._valueTB.get("value"),10):20!=this.ge.getUnits()||!this.ge.isBacnet&&a.comType===C.pointTypes.RCP_ARRAY?this.ge.pointValue=parseFloat(this._valueTB.get("value")):(a=this._valueTB.get("value").split(":"),this.ge.pointValue=100*parseInt(a[0],10)+(60*parseInt(a[1],
10)+parseInt(a[2],10))/36)},_createAuditEntry:function(){var a=this.ge.pointName,b="",c=B.primitiveTypes.REAL,b=this._hasStates()?this._multiStateAry[this._rangeIndex]:b+this.ge.pointValue,c="";if(a.isInOutVar()){var f=["output","input","variable"];if(this.ge.isBacnet){var c=this.ge.pointName.type,d="";a.isAnalog()||c===C.pointTypes.RCP_ARRAY?d="analog":a.isBinary()?d="binary":a.isMultistate()&&(d="multistate");c=k[d]+" ";f[2]="value"}c+=k[f[a.comType-1]]}else a=a.toArray(),a=a[2<=a.length?a.length-
2:0].toLowerCase(),c+=k[a]||a;a=rc.sys.job.getControllerName(this.ge.isBacnet,this.ge.pointName,this.ge.flashObject.strName,this.ge.property);c=z.substitute(k.changedX,[c.toLowerCase()]);b=z.substitute(t.pointChangedTo,[b+" "+this._amtAry[this._autoManualState]]);null!==this.ge.property&&this.ge.property!==B.propertyTypes.PROPID_PRESENT_VALUE&&(b=z.substitute(t.propertyValueChangedTo,[this.ge.bacnetPropObj.stringValue]),c=k.changedAdvBacnet);return{pointName:a,user:rc.session.getUsername(),action:c,
details:b,reason:this._reasonTB.get("value")}},_publishAuditTrail:function(a){y.publish("audit",a)},_addOutOfServiceWrite:function(a,b){switch(b){case B.objectTypes.OBJID_ANALOG_VALUE:case B.objectTypes.OBJID_BINARY_VALUE:case B.objectTypes.OBJID_MULTI_STATE_VALUE:case B.objectTypes.OBJID_ANALOG_INPUT:case B.objectTypes.OBJID_BINARY_INPUT:case B.objectTypes.OBJID_MULTI_STATE_INPUT:case B.objectTypes.OBJID_LOOP:case B.objectTypes.OBJID_SCHEDULE:case B.objectTypes.OBJID_ACCUMULATOR:case B.objectTypes.OBJID_PULSE_CONVERTER:case B.objectTypes.OBJID_PROGRAM:var c=
this._autoManualState?1:0;this.ge.bacnetStatusFlags&&this.ge.bacnetStatusFlags.getBit(3)!==c&&(a.push({p:new F(B.propertyTypes.PROPID_OUT_OF_SERVICE,B.primitiveTypes.ENUMERATED),i:-1,v:new F(c,B.primitiveTypes.BINARY)}),this.ge.bacnetStatusFlags.ary[1]=1===this._autoManualState?this.ge.bacnetStatusFlags.ary[1]|16:this.ge.bacnetStatusFlags.ary[1]&239)}},_addPresentValueRelinquish:function(a){a.push({p:new F(B.propertyTypes.PROPID_PRESENT_VALUE,B.primitiveTypes.ENUMERATED),i:-1,v:new F(0,B.primitiveTypes.NULL),
pr:new F(8,B.primitiveTypes.UNSIGNED_INTEGER)})},_addPresentValueWrite:function(a,b,c,f,d){var g=B.primitiveTypes.REAL;b.isAnalog()?g=B.primitiveTypes.REAL:b.isBinary()?(g=B.primitiveTypes.ENUMERATED,c=this._rangeIndex):b.isMultistate()&&(g=B.primitiveTypes.UNSIGNED_INTEGER);a.push({p:new F(B.propertyTypes.PROPID_PRESENT_VALUE,B.primitiveTypes.ENUMERATED),i:-1,v:new F(c,g),pr:d?new F(f,B.primitiveTypes.UNSIGNED_INTEGER):null})},_addRCPArrayPropertyWrite:function(a){var b=-1===this.ge.arrayIdx?-1:
new F(this.ge.arrayIdx,B.primitiveTypes.UNSIGNED_INTEGER),c=0!==this.ge.arrayIdx?new F(this.ge.pointValue,B.primitiveTypes.REAL):new F(this.ge.pointValue,B.primitiveTypes.UNSIGNED_INTEGER);a.push({p:new F(B.propertyTypes.PROPID_PP_ARRAY_VALUES,B.primitiveTypes.ENUMERATED),i:b,v:c,pr:new F(10,B.primitiveTypes.UNSIGNED_INTEGER)})},_addTimedOverrideWrite:function(a){a.push({p:new F(B.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES,B.primitiveTypes.ENUMERATED),i:-1,v:new F(this._timedOverrideMinutes,2)})},
_getSaveSuccessMessage:function(){return k.success},_getUpdatedBACnetProperties:function(a,b){if(this.ge.pointName.comType===C.pointTypes.RCP_ARRAY)this._addRCPArrayPropertyWrite(a);else{var c,f=null!==this.ge.bacnetPriorityArray8;this._addOutOfServiceWrite(a,b.type);0===this._autoManualState?(b.hasPriorityArray()&&f&&(this._addPresentValueRelinquish(a),this.ge.bacnetPriorityArray8.t=B.primitiveTypes.NULL),c=10):(b.hasPriorityArray()&&f&&(this.ge.bacnetPriorityArray8.t=B.primitiveTypes.REAL),c=8);
var d=this.ge.pointValue;this._hasPointValueChanged(d,c,f)&&this._addPresentValueWrite(a,b,d,c,f)}},_hasPointValueChanged:function(a,b,c){return a.toString()!==(Number(this._valueAtOpen)?Number(this._valueAtOpen).toString():this._valueAtOpen).toString()||8===b&&c},_hasTimedOverrideChanged:function(){var a=this._timedOverrideMinutes;if(2===this._autoManualState){var b=this._timedOverrideTB.get("value").split(":"),c=parseInt(b[0],10),b=parseInt(b[1],10);this._timedOverrideMinutes=60*c+b}else this._timedOverrideMinutes=
0;this._timedOverrideMinutes&&(this.ge.autoManual=1);return this._timedOverrideMinutes!==a},onHide:function(){this.stg.play()},_onWrite:function(a){this._publishAuditTrail(a);y.publish("alert",{message:this._getSaveSuccessMessage(),type:"success"})},_onWriteError:function(a){a.message&&y.publish("sticky",{message:a.message,type:"error"})},_setBACnetPropertyValue:function(){var a=this._usingTextArea?this._textArea.get("value"):this._valueTB.get("value");this._writeBACnetProperty(a)},_makeWriteRequest:function(a){return rc.xhr.requestNow(a)},
_writeBACnetProperties:function(a){if(0<a.length){var b,f=0;if(this.ge.isBacnet)f=this.ge.psdDevice,b=this.ge.pointName.type;else switch(f=G.rcpToBACnetDeviceID(this.ge.pointName.toPanel()),this.ge.pointName.comType){case 1:b=193;break;case 2:b=192;break;case 3:b=194}a=[{o:new H(b,this.ge.pointName.comInstance),pl:a}];f=new J({device:f},a);a=this._createAuditEntry();this.own(this._makeWriteRequest({gid:"UpdatePoint",type:"bacnet",s:f}).then(c.hitch(this,this._onWrite,a),c.hitch(this,this._onWriteError)))}},
_writeBACnetProperty:function(a){this.ge.bacnetPropObj.setValue(a);a=this._createAuditEntry();this.ioBacnet.writeProperty(this.ge.property,this.ge.arrayIdx,this.ge.bacnetPropObj.propertyObject,-1,this.ge).then(c.hitch(this,this._onWrite,a)).otherwise(c.hitch(this,function(a){this.ge.bacnetError=a}))},destroy:function(){this.inherited(arguments);l.forEach(this._reasonConnects,function(a){a.remove()});this._autoManualClickConnect&&this._autoManualClickConnect.remove()}})})},"rc/reliable/_group/DialogRelinquish":function(){define("dgrid/Grid dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/_WidgetsInTemplateMixin dijit/Dialog dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!rc/nls/grp dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/DialogRelinquish.html dojo/topic rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/service/WritePropertyMultiple rc/reliable/ReliableEnums rc/xhr dijit/Dialog dijit/form/Button".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J){return n("rc/reliable/_group/DialogRelinquish",[c,h],{baseClass:"",priorityNames:"",templateString:y,title:k.priorityName,_checkBoxClass:null,_gridStore:null,constructor:function(){this.rcStrings=k;this._gridStore=new z(new w({idProperty:"pnumber"}));this._createColumnStructure()},postCreate:function(){this.inherited(arguments);this.priorityNames=k.priorityNames;this._createGrid()},capitalizeString:function(a){return a.toUpperCase()},
_connectGrid:function(){this.own(f(this._grid,["dgrid-select","dgrid-deselect"],a.hitch(this,function(){this._relinquishB.set("disabled",0===Object.keys(this._grid.selection).length)})))},_createColumnStructure:function(){this._columnStructure=[l({selectorType:a.hitch(this,this._createSelectorCheckbox),id:"selectorCol",label:"",field:"pcheckbox",sortable:!1}),{id:"numberCol",label:"#",field:"pnumber",sortable:!1},{id:"nameCol",label:k.priorityName,field:"pname",sortable:!1},{id:"valueCol",label:k.value,
field:"value",sortable:!1}]},_createGrid:function(){this._grid=new (n([r,p,m]))({selectionMode:"none",columns:this._columnStructure,sort:[{attribute:"pnumber",descending:!1}],store:this._gridStore},this.gridNode);this._connectGrid()},_createSelectorCheckbox:function(b,c,f){b=new g({checked:b,onChange:a.hitch(this,function(a,b){b?this._grid.select(a):this._grid.deselect(a)},f.pnumber),value:!0});this._checkBoxClass&&b.set("baseClass",this._checkBoxClass);t.place(b.domNode,c,"only");return b.domNode},
_decode:function(b){d.forEach(b.o[0].pl[0].v.l,a.hitch(this,function(a,b){this._gridStore.put({pcheckbox:!1,pnumber:b+1,pname:this.priorityNames[b+1]||k.available+" "+(b+1),value:0===a.v.t?k.relinquish:a.v.valueOf()})}));this._grid.resize();this._setHeight()},_fetch:function(){var c=new b;this.own(c);this._setDevice();var f=[{o:this._getObjectProperty(),pl:[{p:new B(A.propertyTypes.PROPID_PRIORITY_ARRAY,A.primitiveTypes.ENUMERATED),i:-1,v:new E(new C(0,A.primitiveTypes.UNSIGNED_INTEGER))}]}],f=new F({device:this._device},
f,!0);rc.xhr.requestNow({gid:"PriorityArrayRequest",type:"bacnet",s:f}).then(a.hitch(this,function(a){this._decode(a);c.resolve(a)}),a.hitch(this,function(a){console.error(this.declaredClass+" - _fetch(): Error fetching priority array",a);c.reject(a)}));return c.promise},_getChangeReason:function(){return""},_getObjectProperty:function(){var a;if(this.groupElement.isBacnet)a=this.groupElement.pointName.type;else switch(this.groupElement.pointName.comType){case J.pointTypes.RCP_OUTPUT:a=A.objectTypes.OBJID_PP_RCP_OUTPUTS;
break;case J.pointTypes.RCP_INPUT:a=A.objectTypes.OBJID_PP_RCP_INPUTS;break;case J.pointTypes.RCP_VARIABLE:a=A.objectTypes.OBJID_PP_RCP_VARIABLES}return new D(a,this.groupElement.pointName.comInstance)},_makeWriteRequest:function(a){return rc.xhr.requestNow(a)},_onClickRelinquish:function(){for(var b=Object.keys(this._grid.selection),c=[],f=[],d=b.length-1;0<=d;--d){var g=this._gridStore.get(b[d]);c.push(g.pname);f.push({p:new B(A.propertyTypes.PROPID_PRESENT_VALUE,A.primitiveTypes.ENUMERATED),i:-1,
v:new B(0,A.primitiveTypes.NULL),pr:new B(g.pnumber,A.primitiveTypes.UNSIGNED_INTEGER)})}b=[{o:this._getObjectProperty(),pl:f}];b=new H({device:this._device},b);this._makeWriteRequest({gid:"RelinquishRequest",type:"bacnet",s:b}).then(a.hitch(this,this._relinquishComplete,c),a.hitch(this,this._relinquishError))},_relinquishComplete:function(a){var b=rc.sys.job.getControllerName(this.groupElement.isBacnet,this.groupElement.pointName,this.groupElement.flashObject.strName);v.publish("audit",{pointName:b,
user:rc.session.getUsername(),action:q.relinquished,details:x.substitute(q.prioritiesRelinquished,[a.join(", ")]),reason:this._getChangeReason()});this._fetch();this._grid.clearSelection()},_relinquishError:function(a){console.error(this.declaredClass+" - _onClickRelinquish(): Error relinquishing priorities",a)},_setDevice:function(){this._device=this.groupElement.isBacnet?this.groupElement.psdDevice:rc.sys.job.getBacnetDeviceNum(this.groupElement.pointName)},_setGroupElementAttr:function(a){this.groupElement=
a;this._objName.innerHTML=this.groupElement.flashObject.strName+(this.groupElement.flashObject.strName!==this.groupElement.mnemonic?" ("+this.groupElement.mnemonic+")":"");this._fetch()},_setHeight:function(){var a=u(".prioritiesGrid .dgrid-scroller")[0].offsetTop,a=u(".prioritiesGrid .dgrid-content")[0].clientHeight+a;this._grid.domNode.style.height=a+"px"}})})},"dgrid/selector":function(){define("dojo/_base/kernel dojo/_base/array dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),
function(r,p,m,l,h,c){return function(g,d){function n(a){return!q.allowSelect(q.row(a))}function a(a){return function(b){var c=b.rows,d=c.length;b="false";var k;for(k=0;k<d;k++){var n=q.cell(c[k],g.id).element;n&&(n=(n.contents||n).input)&&!n.disabled&&(n.checked=a,n.setAttribute("aria-checked",a))}if("checkbox"==f.type){c=q.selection;d=!1;for(k in c)if(c[k]!=q.allSelected){d=!0;break}f.indeterminate=d;f.checked=q.allSelected;d?b="mixed":q.allSelected&&(b="true");f.setAttribute("aria-checked",b)}}}
function b(b){if("click"==b.type||32==b.keyCode||!h("opera")&&13==b.keyCode||0===b.keyCode){var f=q.row(b);q._selectionTriggerEvent=b;if(f){if(q.allowSelect(f)){var g=q._lastSelected&&q.row(q._lastSelected);"radio"==d?g&&g.id==f.id||(q.clearSelection(),q.select(f,null,!0),q._lastSelected=f.element):f&&(b.shiftKey?a(!0)({rows:[f]}):g=null,g=b.shiftKey?g:null,q.select(g||f,f,g?void 0:null),q._lastSelected=f.element)}}else c(this,(q.allSelected?"!":".")+"dgrid-select-all"),q[q.allSelected?"clearSelection":
"selectAll"]();q._selectionTriggerEvent=null}}function t(){q._hasSelectorInputListener=!0;k.push(q.on(".dgrid-selector:click,.dgrid-selector:keydown",b));var c=q._handleSelect;q._handleSelect=function(a){this.cell(a).column!=g&&c.apply(this,arguments)};if("function"==typeof g.disabled){var f=q.allowSelect,d=g.disabled;q.allowSelect=function(a){var b=f.call(this,a);return d===n?b:b&&!d.call(g,a.data)}}g.disabled=n;k.push(q.on("dgrid-select",a(!0)));k.push(q.on("dgrid-deselect",a(!1)))}var k=[],q,f;
g||(g={});g.type&&(g.selectorType=g.type,r.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4"));g.selectorType=d=d||g.selectorType||"checkbox";g.sortable=!1;var u="function"==typeof d?d:function(a,b,f){var k=b.parentNode,n;q._hasSelectorInputListener||t();n=g.disabled;c(k&&k.contents?k:b,".dgrid-selector");b=b.input||(b.input=c(b,"input[type\x3d"+d+"]",{tabIndex:isNaN(g.tabIndex)?-1:g.tabIndex,disabled:n&&("function"==typeof n?n.call(g,f):n),checked:a}));b.setAttribute("aria-checked",
!!a);return b};l.after(g,"init",function(){q=g.grid});l.after(g,"destroy",function(){p.forEach(k,function(a){a.remove()});q._hasSelectorInputListener=!1});g.renderCell=function(a,b,c,f,d){b=(b=a&&q.row(a))&&q.selection[b.id];u(b,c,a)};g.renderHeaderCell=function(a){var b="label"in g?g.label:g.field||"";"radio"!=d&&q.allowSelectAll?u(!1,a,{}):(a.appendChild(document.createTextNode(b)),q._hasSelectorInputListener||t());f=a.lastChild};return g}})},"rc/reliable/ReliableEnums":function(){define([],function(){return{pointTypes:{INVALID:-1,
RCP_OUTPUT:1,RCP_INPUT:2,RCP_VARIABLE:3,RCP_PID_LOOP:4,RCP_WEEKLY_SCHEDULE:5,RCP_ANNUAL_SCHEDULE:6,RCP_PROGRAM:7,RCP_RUNTIME:9,RCP_TRENDLOG:10,RCP_GROUP:11,RCP_ARRAY:12,RCP_TABLE:13},subType:{NULL_POINT:0,OUTPUTS:1,INPUTS:2,VARIABLES_1_32:3,CONTROLLERS:4,WEEKLY_SCHEDULES:5,ANNUAL_SCHEDULES:6,PROGRAMS:7,RUNTIME_LOGS_33_64:8,RUNTIME_LOGS_1_32:9,TREND_LOGS:10,GROUPS:11,ARRAYS:12,VARIABLES_33_64:13,VARIABLES_65_96:14,VARIABLES_97_128:15}}})},"rc/reliable/_group/io/bacnet":function(){require(["dojo/ready",
"rc/sys/job"],function(r,p){r(function(){p.loadOnce()})});define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented ../../../bacnet/enums ../../../bacnet/io/Number ../../../bacnet/io/Object ../../../bacnet/io/service/ReadPropertyMultiple ../../../bacnet/io/service/WritePropertyMultiple ../../../sys/job".split(" "),function(r,p,m,l,h,c,g,d,n,a){return r("rc/reliable/_group/io/bacnet",[l],{readProperties:function(b,n){var k=new m,q,f;if(n.isBacnet)f=n.psdDevice,q=n.pointName.type;else{f=
a.getBacnetDeviceNum(n.pointName);if(-1==f)return k.reject(Error("Couldn't find device id")),k.promise;switch(n.pointName.comType){case 1:q=193;break;case 2:q=192;break;case 3:q=194}}q=[{o:new g(q,n.pointName.comInstance),pl:[]}];for(var l,t=0;t<b.length;++t)l=b[t],q[0].pl.push({p:new c(l.property,h.primitiveTypes.ENUMERATED),i:-1===l.index?l.index:new c(l.index,h.primitiveTypes.UNSIGNED_INTEGER),v:l.value});0<q[0].pl.length?(f=new d({device:f},q),rc.xhr.request({gid:"GRP",type:"bacnet",s:f,index:n.index,
handle:p.hitch(this,this._onReadProperty,k),silentError:!0})):k.reject("No properties specified");return k.promise},_onReadProperty:function(a,c){c instanceof Error?a.reject(c):(c.e&&console.error("rc.reliable._group.io.bacnet.readProperty failed"),a.resolve(c));this.onReadProperty()},onReadProperty:function(){this.emit("readProperty")},getWritePropertyRequestObject:function(b,d,k,q,f,l){var t,u;if(f.isBacnet)u=f.psdDevice,t=f.pointName.type;else{u=a.getBacnetDeviceNum(f.pointName);if(-1==u)return l.reject(Error("Couldn't find device id")),
l.promise;switch(f.pointName.comType){case 1:t=193;break;case 2:t=192;break;case 3:t=194}}b=[{o:new g(t,f.pointName.comInstance),pl:[{p:new c(b,h.primitiveTypes.ENUMERATED),i:-1==d?d:c(d,h.primitiveTypes.UNSIGNED_INTEGER),v:k}]}];1<=q&&16>=q&&(b[0].pl[0].pr=new c(q,2));q=new n({device:u},b);q.dfd=l;return{gid:"GRP",type:"bacnet",s:q,dfd:l,index:f.index,handle:p.hitch(this,this._onWriteProperty)}},writeProperty:function(b,c,d,g,f){var k=new m;if(!f.isBacnet&&-1==a.getBacnetDeviceNum(f.pointName))return k.reject(Error("Couldn't find device id")),
k.promise;rc.xhr.request(this.getWritePropertyRequestObject(b,c,d,g,f,k));return k.promise},_onWriteProperty:function(a){a instanceof Error?a.s.dfd.reject(a):a.e?a.dfd.reject(Error("Save Present Value failed")):a.dfd.resolve();this.onWriteProperty(a)},onWriteProperty:function(a){this.emit("writeProperty",a);return a},onError:function(){this.emit("error")}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x){function y(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(d.hitch(this,a,b))}}var v=p("dijit.form._SelectMenu",k,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(n(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;
d.isArray(b)&&(b=b[b.length-1]);b&&r.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)}});h=p("dijit.form.Select"+(a("dojo-bidi")?"_NoBidi":""),[b,t,w],{baseClass:"dijitSelect dijitValidationTextBox",templateString:x,_buttonInputDisabled:a("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=a?a:0].value)}this.dropDown=new v({id:this.id+"_menu",parentWidget:this});l.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(a.value||a.label){var b=d.hitch(this,"_setValueAttr",a);a=new q({option:a,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a.label)||this.emptyLabel,
onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a}return new f({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(A){}},focusChild:function(a){a&&this.set("value",
a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=z.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,f){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{r.forEach(this._getChildren(),function(a){a.destroyRecursive()});
var b=new q({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);m.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",
_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline '+
this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?u.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):u.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||
"")},reset:function(){this.inherited(arguments);u.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=c.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(n(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[g.LEFT_ARROW];delete a[g.RIGHT_ARROW]},_setStyleAttr:function(a){this.inherited(arguments);
l.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);u.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){u.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
a("dojo-bidi")&&(h=p("dijit.form.Select",h,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));h._Menu=v;h.prototype._onContainerKeydown=y("_onContainerKeydown");h.prototype._onContainerKeypress=y("_onContainerKeypress");return h})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return h("dijit.form._FormSelectWidget",k,{multiple:!1,options:null,store:null,_setStoreAttr:function(a){this._created&&this._deprecatedSetStore(a)},query:null,_setQueryAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:a})},queryOptions:null,_setQueryOptionsAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:a})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(a){var b=this.options||[];if(null==a)return b;if(n.isArrayLike(a))return r.map(a,"return this.getOptions(item);",this);n.isString(a)&&(a={value:a});n.isObject(a)&&(r.some(b,function(b,c){for(var f in a)if(!(f in b)||b[f]!=a[f])return!1;a=c;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){r.forEach(n.isArrayLike(a)?a:[a],function(a){a&&n.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(n.isArrayLike(a)?
a:[a]);r.forEach(a,function(a){a&&(this.options=r.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){r.forEach(n.isArrayLike(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(a,b,c){d.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(a,b,c)},_deprecatedSetStore:function(a,c,d){var f=this.store;d=d||{};if(f!==a){for(var g;g=this._notifyConnections.pop();)g.remove();a.get||(n.mixin(a,{_oldAPI:!0,get:function(a){var b=new p;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new p(function(){f.abort&&f.abort()});c.total=new p;var f=this.fetch(n.mixin({query:a,onBegin:function(a){c.total.resolve(a)},
onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return new t(c)}}),a.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[m.after(a,"onNew",n.hitch(this,"_onNewItem"),!0),m.after(a,"onDelete",n.hitch(this,"_onDeleteItem"),!0),m.after(a,"onSet",n.hitch(this,"_onSetItem"),!0)]));this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);d.query&&this._set("query",d.query);d.queryOptions&&this._set("queryOptions",d.queryOptions);a&&a.query&&(this._loadingStore=!0,this.onLoadDeferred=new p,this._queryRes=a.query(this.query,this.queryOptions),b(this._queryRes,n.hitch(this,function(b){if(this.sortByLabel&&!d.sort&&b.length)if(a.getValue)b.sort(l.createSortFunction([{attribute:a.getLabelAttributes(b[0])[0]}],a));else{var f=this.labelAttr;b.sort(function(a,b){return a[f]>b[f]?1:b[f]>
a[f]?-1:0})}d.onFetch&&(b=d.onFetch.call(this,b,d));r.forEach(b,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(n.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:c);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(b):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),n.hitch(this,function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)})));return f},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=n.isArrayLike(a)?r.map(a,function(a){return n.isObject(a)?a:{value:a}}):n.isObject(a)?[a]:[{value:a}];a=r.filter(this.getOptions(a),function(a){return a&&a.value});var c=this.getOptions()||[];this.multiple||a[0]&&a[0].value||!c.length||(a[0]=
c[0]);r.forEach(c,function(b){b.selected=r.some(a,function(a){return a.value===b.value})});c=r.map(a,function(a){return a.value});if("undefined"!=typeof c&&"undefined"!=typeof c[0]){var f=r.map(a,function(a){return a.label});this._setDisplay(this.multiple?f:f[0]);this.inherited(arguments,[this.multiple?c:c[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=r.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?
a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(r.forEach(this._getChildren(),function(a){a.destroyRecursive()}),r.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var b=this;r.forEach(this._getChildren(),function(c){var f=r.some(a,function(a){return c.option&&
a===c.option.value});f&&!b.multiple&&(b.focusedChild=c);g.toggle(c.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),f);c.domNode.setAttribute("aria-selected",f?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=r.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?r.map(r.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},
_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},
scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);c.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?a("\x3e *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+d._scopeName+"-value")||a.getAttribute("value"),
label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);m.after(this,"onChange",n.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(a,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"rc/widget/Dialog":function(){define("dijit/Dialog dijit/layout/utils dojo/_base/array dojo/_base/declare dojo/dom-geometry dojo/dom-style dojo/sniff dojo/window".split(" "),function(r,p,m,l,h,c,g,d){return l("rc/widget/Dialog",[r],{resize:function(d){if("none"!==this.domNode.style.display){this._checkIfSingleChild();!d&&this._shrunk&&(this._singleChild&&"undefined"!==
typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),m.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&c.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");if(d){h.setMarginBox(this.domNode,d);var a=[];this.titleBar&&a.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&a.push({domNode:this.actionBarNode,
region:"bottom"});var b={domNode:this.containerNode,region:"center"};a.push(b);var n=p.marginBox2contentBox(this.domNode,d);p.layoutChildren(this.domNode,n,a);this._singleChild?(a=p.marginBox2contentBox(this.containerNode,b),this._singleChild.resize({w:a.w,h:a.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();g("touch")||d||this._position()}}})})},"rc/reliable/_group/GroupElement":function(){define("dojo/_base/array dojo/_base/Color dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/number dojo/on dojo/string rc/_base/Error ./widgets/displayTypes/landingPad/LandingPad ./widgets/displayTypes/landingPad/LandingPadBorderSettings ../Point ../ReliableEnums ../unit ../../bacnet/io/AnyPrimitive ../../bacnet/io/Array ../../bacnet/io/Error ../../bacnet/io/Number ../../bacnet/io/Object ../../bacnet/io/service/ReadPropertyMultiple ../../bacnet/io/util ../../bacnet/Object ../../bacnet/property ../../bacnet/unit ../../sys/job ../../util/encoding/base16 rc/bacnet/enums rc/reliable/_trend/io/Loader rc/bacnet/_trend/io/Loader rc/sys/canim".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L){return m("rc/reliable/_group/GroupElement",[c],{point:null,pointName:0,pointValue:0,decomissioned:0,dynamicColourLocations:null,security:99,nameLabel:0,format:0,role:0,digitalAnalog:0,autoManual:0,enhancedPresentValueLoaded:!1,landingPad:null,units:0,textYCoordinate:0,textXCoordinate:0,animationPoint:0,msbpanel:0,multipointReference:!1,normalColor:0,fontSize:0,highLimit:0,lowLimit:0,dynamicHighEquation:null,dynamicLowEquation:null,
dynamicLimitErrors:null,useLimits:!0,onHighColor:0,graphicYCoordinate:0,doBox:0,showUnits:0,showStatus:!0,displayName:"",decimalPointOverride:-1,equipmentData:null,graphicXCoordinate:0,offLowColor:0,displayPoint:0,animationUnits:0,network:0,arrayIdx:-1,psdService:0,psdDevice:0,reliablePoint:0,powerup:0,status:0,frequency:0,enabled:0,level:99,property:null,index:0,isRendered:!1,isUpdated:!1,isDeleted:!1,isAnimated:!1,isFloodFill:!1,isReplaceColour:!1,isBox:!1,isBacnet:!1,isBacnetRTL:!1,isKeyword:!1,
isEnhanced:!1,isRGB:!1,relativeHeight:null,relativeWidth:null,relativeX:null,relativeY:null,animMissing:!1,textKWTitle:"",imageKWPath:"",animated:!1,displayConfig:0,animationType:0,domNode:null,noUpdate:0,group:null,loadDeferred:null,unitsDeferred:null,subTypeLoaded:!1,animation:null,mnemonic:"1GRP1",unknownProperties:null,groupElements:null,groupElementsLinks:null,SAMPLE_SIZE:512,bacnetPresentValue:null,bacnetPriorityArray8:null,bacnetStatusFlags:null,bacnetStateText:null,bacnetDateType:0,bacnetError:null,
bacnetIoPending:!1,bacnetPropObj:null,hyperlink:null,io:null,updateButtonClicked:!1,chartItems:[],zIndex:0,_bacnetOffset:20,_logType:null,pointInstance:0,mainController:0,_recordCount:0,_objects:null,_totalRecordCount:0,_bufferSize:0,_colors:"#06F #6f0 cyan #93f red #fc0 #f60 #666".split(" "),_letters:"ABCDEFGH".split(""),ANIM_LOOP:0,ANIM_MULTISTATE:1,ANIM_INTERACTIVE:2,knownUnsupportedTypes:[G.comTypes.PROGRAM,G.mnemonicToType.tbl],supportedWorksheets:[],animToAnimTypeLookup:[0,0,0,0,0,1,0,0,0,0,
0,0,0,0,0,0,0,0,1,1,0,0,2,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],KW_PREVIOUS:17,KW_ALARMS:34,KW_BYE:38,KW_HYPERLINK:85,KW_MULTIPOINT:86,KW_STATIC_IMAGE:90,KW_STATIC_TEXT:87,KW_RTS:47,KW_RTREPORT:52,KW_TEXT:68,KW_TBLS:46,kwPanelString:"",isLC:!1,pointJSON:null,bFirstLiveRecord:!1,ehPVFields:0,PT_TYPE_LABEL_VALUE:10,PT_TYPE_NAME_VALUE:8,PT_TYPE_LABEL_VALUE_UNITS:11,PT_TYPE_NAME_VALUE_UNITS:9,PT_TYPE_VALUE:0,PT_TYPE_VALUE_UNITS:1,PT_TYPE_COLORED_BOX:4,
PT_TYPE_INV_BOX:12,PT_TYPE_POLYGON:6,PT_TYPE_GRAD_POLYGON:5,PT_TYPE_ANIMATION:7,PT_TYPE_REFERENCE_POINT:253,PT_TYPE_REPLACE_COLOR:254,PT_TYPE_ANIMATION_POINT:255,EH_UNITS:1,EH_STATUS:2,EH_MANUAL:4,EH_DECOM:8,EH_TIMEDOVR:16,EH_SECURITY:32,EH_ANALOG:64,EH_PRESENT_VALUE:128,arCTr:[0,0,0,0,127,127,127,192,127,0,0,0,255,255,255,255],arCTg:[0,0,127,127,0,0,127,192,127,0,255,255,0,0,255,255],arCTb:[0,127,0,127,0,127,0,192,127,255,0,255,0,255,0,255],OBJECT_TYPES:{BACnet_OBJECT:-1,KEYWORD:0,RCP_POINT:1},constructor:function(a){this.group=
a.group||1;this.dynamicLimitErrors={};this.unknownProperties=[]},hasEHProperty:function(a){var b=!1;this.isEnhanced&&(this.ehPVFields&a)===a&&(b=!0);return b},get:function(a){var b="";this.hasOwnProperty(a)&&(b=this[a]);return b},set:function(a,b){this[a]=b},isHTMLAnimationOldFormat:function(a){try{switch(this.animationPoint){case 6:case 4:case 8:case 3:case 5:case 7:case 47:var b=this.isEnhanced?this.getAnimationFiles():L.get(a,this.index,"File");if(b&&b.length&&-1!==b[0].search(/\.js$/i))return!0}}catch(P){}return!1},
isFlashAnimation:function(a){var b=!1;try{var c=null;switch(this.animationPoint){case 6:case 4:case 8:case 3:case 5:case 7:case 47:c=this.isEnhanced?this.getAnimationFiles():L.get(a,this.index,"File");break;default:b=!0}a="";c&&c.length&&(a=c[0]);-1!==a.search(/\.swf|.gif$/)&&(b=!0)}catch(Q){}return b},initializeDataLoad:function(){"function"===typeof this.pointName.isTrendLog&&this.pointName.isTrendLog()&&!0===this.multipointReference&&(this.set("sampleSize",this.SAMPLE_SIZE),!0===this.isBacnet?
(this._logType=this.pointName.type,this.pointInstance=this.pointName.instance,this.mainController=this.pointName.device,this.io=new K,this._onClearTimeout=function(){a.emit(this,"clearTimeout")}):this.io=new I)},getAnimationFiles:function(){var a=[];try{if(this.pointJSON&&this.pointJSON.animation)for(var b=0;b<this.pointJSON.animation.length;b++)a.push(encodeURIComponent(this.pointJSON.animation[b].filename))}catch(P){}return a},getCustomAttributes:function(){var a=null;try{this.pointJSON&&this.pointJSON.hasOwnProperty("custom_attributes")&&
(a=this.pointJSON.custom_attributes)}catch(O){}return a},getAnimationGroupElements:function(){var a=[];this.pointJSON&&this.pointJSON.GroupElements&&(a=this.pointJSON.GroupElements);return a},getAnimationGroupElementsLinks:function(){var a=[];this.pointJSON&&this.pointJSON.GroupElementsLinks&&(a=this.pointJSON.GroupElementsLinks);return a},getDeviceId:function(){if(this.isKeyword)return-1;var a=this.isBacnet,b=this.pointName;this.property===G.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME&&(b=b.getBACnetObjectFromRuntime(),
a=!0);return a?b.device:b.toPanel()},getEnhancedPresentValueObject:function(){if(!this.enhancedPresentValueLoaded)return{};var a={enhancedPresentValueLoaded:!0,isUpdated:!0};(this._pointHasEnhancedValue()||0!==this.ehPVFields)&&l.mixin(a,{ehPVFields:this.ehPVFields,pointValue:this.pointValue,digitalAnalog:this.digitalAnalog,units:this.units,bacnetStatusFlags:this.bacnetStatusFlags,autoManual:this.autoManual,bacnetPriorityArray8:this.bacnetPriorityArray8,decomissioned:this.decomissioned,security:this.security,
bacnetError:this.bacnetError,bacnetStateText:this.bacnetStateText});return a},needToLoadProperty:function(){return!this.enhancedPresentValueLoaded||null===this.bacnetPropObj||this.bacnetPropObj.propertyObject.t===G.primitiveTypes.NULL||"undefined"!==typeof this.bacnetPropObj.propertyObject.ary&&0===this.bacnetPropObj.propertyObject.ary.length},_decodeDisplayType:function(a){this.showUnits=this.nameLabel=this.doBox=0;this.displayConfig=this.PT_TYPE_NAME_VALUE;this.displayPoint=1;if(a.hasOwnProperty("display_type"))switch(a.display_type){case "label + value":this.displayConfig=
this.PT_TYPE_LABEL_VALUE;this.nameLabel=this.displayPoint=1;break;case "label + value + units":this.displayConfig=this.PT_TYPE_LABEL_VALUE_UNITS;this.showUnits=this.nameLabel=this.displayPoint=1;break;case "name + value + units":this.displayConfig=this.PT_TYPE_NAME_VALUE_UNITS;this.showUnits=this.displayPoint=1;break;case "value":this.displayConfig=this.PT_TYPE_VALUE;break;case "value + units":this.displayConfig=this.PT_TYPE_VALUE_UNITS;this.showUnits=1;break;case "coloured box":this.displayConfig=
this.PT_TYPE_COLORED_BOX;this.doBox=1;break;case "invisible box":this.displayConfig=this.PT_TYPE_INV_BOX;this.displayPoint=this.doBox=1;break;case "polygon":this.displayConfig=this.PT_TYPE_POLYGON;this.nameLabel=this.doBox=1;break;case "gradient polygon":this.displayConfig=this.PT_TYPE_GRAD_POLYGON;this.showUnits=this.doBox=1;break;case "animation":this.displayConfig=this.PT_TYPE_ANIMATION;this.nameLabel=this.showUnits=this.doBox=1;break;case "replace color":this.displayConfig=this.PT_TYPE_REPLACE_COLOR;
this.nameLabel=this.doBox=1;break;case "point":this.displayConfig=this.PT_TYPE_ANIMATION_POINT}},_decodeJSONPoint:function(b){var c=!1;try{if(b.hasOwnProperty("BACnet_point"))this.isBacnet=!0,this.psdService=0,this.psdDevice=b.BACnet_device,4194303==this.psdDevice&&(this.psdDevice=parseInt(this.group.pointName.mainController,10)),this.pointName=new B(this.psdDevice,b.BACnet_object_type,b.BACnet_instance),b.BACnet_object_type===G.objectTypes.OBJID_SCHEDULE&&a(this.pointName,"subTypeLoaded",l.hitch(this,
this._subTypeLoaded)),this.property=b.BACnet_property,b.hasOwnProperty("BACnet_array_index")&&0<b.BACnet_array_index?this.arrayIdx=b.BACnet_array_index:this.arrayIdx=-1,this.reliablePoint=-1,this.enabled=this.frequency=this.status=this.powerup=0,c=!0;else if(b.hasOwnProperty("RCP_point")){this.isBacnet=!1;var d=0;0<b.RCP_subpanel&&(d=b.Sub_B?2:1);this.pointName=new f(b.RCP_panel,d,b.RCP_subpanel,b.RCP_datatype,b.RCP_instance);this.msbpanel=b.hasOwnProperty("msbpanel")?b.msbpanel:0;b.hasOwnProperty("RCP_array_index")&&
this.pointName.comType==u.pointTypes.RCP_ARRAY?this.arrayIdx=b.RCP_array_index:this.arrayIdx=-1;c=!0}b.hasOwnProperty("multipoint_reference")&&(this.multipointReference="true"===b.multipoint_reference)}catch(Q){}return c},_loadScheduleUnits:function(){var a=[{o:new A(G.objectTypes.OBJID_SCHEDULE,this.pointName.instance),pl:[{p:new v(G.propertyTypes.PROPID_PP_OPEN_UNIT,G.primitiveTypes.ENUMERATED),i:-1,v:new v(null,G.primitiveTypes.ENUMERATED)},{p:new v(G.propertyTypes.PROPID_PRESENT_VALUE,G.primitiveTypes.ENUMERATED),
i:-1,v:new z}]}];rc.xhr.request({type:"bacnet",gid:"SCHED",s:new C({device:this.pointName.device},a)}).then(l.hitch(this,function(a){if(0===a.e)for(var b=0;b<a.o.length;++b)for(var c=0;c<a.o[b].pl.length;++c)switch(a.o[b].pl[c].p.v){case G.propertyTypes.PROPID_PP_OPEN_UNIT:this.units=a.o[b].pl[c].v.v;break;case G.propertyTypes.PROPID_PRESENT_VALUE:this.pointName.subType=a.o[b].pl[c].v.v.t}this.unitsDeferred&&(!1===this.subTypeLoaded&&this._subTypeLoaded(),this.unitsDeferred.resolve(!0))}),l.hitch(this,
this._onErrorElements))},_scheduleUnitsLoaded:function(){this.subTypeLoaded&&this.unitsDeferred.isResolved()&&(this.digitalAnalog=this.pointName.isAnalog()||this.pointName.isMultistate(),this._checkOpenUnits(),this.onElementLoaded())},_subTypeLoaded:function(){this.subTypeLoaded=!0},_thirdPartyAnalogPointWithNoUnits:function(a){return this.pointName.isAnalog&&this.pointName.isAnalog()&&95==a&&rc.sys.job.isThirdParty({device:this.pointName.device})},onElementLoaded:function(){this.loaded=!0;this.emit("elementLoaded")},
_replace:function(a){return a},safeError:function(a,b){var c;a instanceof t?c=a:"object"===typeof b?(c=new t(b),c.e=a):c=new t({name:g.unexpectedError,message:g.unexpected,suggestion:g.unexpectedFix,renderHtml:!0,e:a});return c},_formatValue:function(a,b,c){return"Time"!=c?n.round(a,b):a},onRestartTimer:function(a){return a},loadTrendData:function(){if(this.io){this.io.resetData(this);var a=new h;this.io.load(this).always(l.hitch(this,function(){try{this.chartItems=this.io.getChartItems(),a.resolve(!0)}catch(O){console.error("Failed Fetch: ",
this,O,O.message),a.reject(O)}}));return a.promise}},getLimitErrorMessage:function(){if(0===Object.keys(this.dynamicLimitErrors).length)return null;var a=d.coloringLogicError+":";Object.keys(this.dynamicLimitErrors).forEach(l.hitch(this,function(b){a+="\n\t"+b+" - "+this.dynamicLimitErrors[b]}));return a},getHyperLink:function(){var a,b;if(b=this.hyperlink)if(a={},a.text=b,a.text){if(0===a.text.toLowerCase().indexOf("www."))return a.href="http://"+a.text,a;if(r.some(["http://","https://","mailto:",
"ftp://","telnet://"],function(b){return 0===a.text.toLowerCase().indexOf(b.toLowerCase())},this)){a.href=a.text;try{a.href===decodeURI(a.href)&&(a.href=encodeURI(a.href))}catch(P){}}else{a.href=rc.rootPath+"job/"+a.text;try{a.href===decodeURI(a.href)&&(a.href=encodeURI(a.href),a.target="_self")}catch(P){}}}return a},getFileLink:function(){var a,b;if(b=this.secondaryLink.replace(/.*[\/]/i,""))if(a={},a.text=b,a.text){a.href=window.location.origin+window.location.pathname+"job/"+a.text;try{a.href===
decodeURI(a.href)&&(a.href=encodeURI(a.href),a.target="_self")}catch(P){}}return a},_decodeHyperlinkKeyword:function(a){this.hyperlink=a.hasOwnProperty("hyperlink")?a.hyperlink:""},_decodeJSONKeyword:function(a){var b=!1;try{switch(this.pointName=0,this.isKeyword=!0,this.units=a.keyword_instance,this.units){case this.KW_ALARMS:case this.KW_BYE:case this.KW_PREVIOUS:case this.KW_MULTIPOINT:b=!0;break;case this.KW_STATIC_IMAGE:b=this._decodeStaticImage(a);break;case this.KW_STATIC_TEXT:case this.KW_HYPERLINK:this._decodeHyperlinkKeyword(a);
b=!0;break;case this.KW_RTS:this._decodeRunTimeKeyword(a);b=!0;break;case this.KW_RTREPORT:this._decodeRunTimeReportKeyword(a),b=!0}}catch(P){}return b},_decodeJSONTextFile:function(a){var c=!1;try{a.hasOwnProperty("external_file")&&(this.isKeyword=!0,this.textKWTitle=b.trim(a.external_file),".txt"==this.textKWTitle.slice(-4).toLowerCase()&&(this.textKWTitle=this.textKWTitle.slice(0,-4)),c=!0)}catch(P){}return c},_decodeRunTimeKeyword:function(a){var b=0;0<a.RCP_subpanel&&(b=a.Sub_B?2:1);this.pointName=
new f(a.RCP_panel,b,a.RCP_subpanel,9,-2)},_decodeRunTimeReportKeyword:function(a){this.psdDevice=a.BACnet_device;4194303==this.psdDevice&&(this.psdDevice=parseInt(this.group.pointName.mainController,10));this.pointName=new B(this.psdDevice,297,-2)},_decodeStaticImage:function(a){var b=!1;a.hasOwnProperty("external_file")&&(this.imageKWPath=rc.xhr.toSysUrl("job/"+a.external_file),b=!0);return b},_unitsValid:function(){if("undefined"===typeof this.units)return!1;var a=parseInt(this.units);return 0<=
a&&0==this._needsUnits(a)},_checkOpenUnits:function(){this.isBacnet&&!rc.sys.job.isThirdParty({device:this.pointName.device})&&this._unitsValid()&&(this.pointName.isBinary()||this.pointName.isMultistate())&&this.property!==G.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME&&(this.pointName.device==this.group.deviceId?this.group.isPyramid&&!this.group.isEnhancedGroup?40==this.units&&(this.units=0):(this.group.isOpen||this.group.isEnhancedGroup)&&this.updateOpenUnits():H.supportsOpenUnits({device:this.group.deviceId})&&
H.supportsOpenUnits(this.pointName)&&this.updateOpenUnits(),(this.bacnetStateText=w.getDigitalRange(this))&&0==this.bacnetStateText.length&&(this.bacnetStateText=null),this.pointName.type===G.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT&&(this.units=0))},isMultiStateUnit:function(){return this.isBacnet&&this.pointName.isAnalog()?!1:(95!=this.getUnits()&&64<=this.getUnits()&&this.getUnits()<F.firstBACnetUnit||l.isArray(this.bacnetStateText))&&9!=this.pointName.comType},updateOpenUnits:function(){var a=
this.pointName.type;a===G.objectTypes.OBJID_SCHEDULE&&(a=this._getSchedulePointType(this.pointName.subType));switch(a){case G.objectTypes.OBJID_BINARY_INPUT:case G.objectTypes.OBJID_BINARY_OUTPUT:19==this.units&&(this.units=0);break;case G.objectTypes.OBJID_BINARY_VALUE:19==this.units?(this.units=64,this.digitalAnalog||(this.units+=51)):20==this.units&&(this.units=0);break;case G.objectTypes.OBJID_MULTI_STATE_OUTPUT:this.isEnhanced&&0==this.units?this.units=19:this.isEnhanced||1!=this.units||(this.units=
19);break;case G.objectTypes.OBJID_MULTI_STATE_VALUE:this.units=15==this.units?65:this.units+65;break;case G.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT:this.units=0}},isEnhancedAnalog:function(a){var b=!1;if(a.isBACnet)b=a.isDigigalAnalog();else switch(this.pointName.comType){case u.pointTypes.RCP_ANNUAL_SCHEDULE:case u.pointTypes.RCP_WEEKLY_SCHEDULE:case u.pointTypes.RCP_TRENDLOG:case u.pointTypes.RCP_WEEKLY_SCHEDULE:b=!1;break;case u.pointTypes.RCP_PID_LOOP:case u.pointTypes.RCP_ARRAY:case u.pointTypes.RCP_RUNTIME:b=
!0}return b},_getSchedulePointType:function(a){var b=G.objectTypes.OBJID_BINARY_VALUE;switch(a){case G.primitiveTypes.UNSIGNED_INTEGER:b=G.objectTypes.OBJID_MULTI_STATE_VALUE;break;case G.primitiveTypes.REAL:b=G.objectTypes.OBJID_ANALOG_VALUE;break;default:b=G.objectTypes.OBJID_BINARY_VALUE}return b},_pointHasEnhancedValue:function(){var a=!0;if(this.isBacnet)switch(this.pointName.type){case G.objectTypes.OBJID_TREND_LOG:case G.objectTypes.OBJID_TREND_LOG_MULTIPLE:case G.objectTypes.OBJID_DEVICE:case G.objectTypes.OBJID_PROGRAM:case G.objectTypes.OBJID_GROUP:case G.objectTypes.OBJID_PP_RCP_GROUP:case G.objectTypes.OBJID_PP_SSC_GROUP:case G.objectTypes.OBJID_GLOBAL_GROUP:case G.objectTypes.OBJID_PP_ENHANCED_VIEW:case G.objectTypes.OBJID_PP_RCP_TABLE:case G.objectTypes.OBJID_PP_BACSET_TABLE:case G.objectTypes.OBJID_NOTIFICATION_CLASS:a=
!1;break;case G.objectTypes.OBJID_PP_RCP_ARRAY:case G.objectTypes.OBJID_PP_ARRAY:if(0==this.pointName.instance||0==this.arrayIdx)a=!1}return a},updateEnhancedPresentValue:function(a){try{var b=!1;if(0===this.noUpdate){this.ehPVFields=0;a.presentValue&&null!==a.presentValue.v&&(this.ehPVFields|=this.EH_PRESENT_VALUE,this.pointValue=a.presentValue.valueOf(),isNaN(this.pointValue)&&(this.pointValue=0),this.isBacnet||(this.digitalAnalog=this.isEnhancedAnalog(a)),!0===a.isBACnet&&this.property!==G.propertyTypes.PROPID_PRESENT_VALUE&&
this._setBACnetPropertyObject(a));if(a.units&&!this._thirdPartyAnalogPointWithNoUnits(a.units)){var c=a.units.valueOf();this.pointName.type===G.objectTypes.OBJID_SCHEDULE&&this.pointName.isAnalog()||(this.units!=c&&this._needsUnits(c)&&(b=!0,this.bacnetStateText=null),this.units=c,this.ehPVFields|=this.EH_UNITS,a.isBACnet&&this.pointName.isAnalog()?this.units=F.toRcUnit(this.units,rc.sys.job.isSSC(this.pointName)):a.isBACnet&&95==a.units||this.pointName.type===G.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT?
this.units=0:this.pointName.comType==u.pointTypes.RCP_RUNTIME&&(this.units=20))}else this.pointName.comType==u.pointTypes.RCP_RUNTIME&&(this.digitalAnalog=!0,this.units=-1);a.status&&(this.bacnetStatusFlags=a.status.valueOf(),this.ehPVFields|=this.EH_STATUS);if(a.manual)switch(this.outOfService=this.autoManual=0==a.manual.valueOf()?0:1,this.ehPVFields|=this.EH_MANUAL,this.pointName.type){case G.objectTypes.OBJID_ANALOG_OUTPUT:case G.objectTypes.OBJID_BINARY_OUTPUT:case G.objectTypes.OBJID_MULTI_STATE_OUTPUT:case G.objectTypes.OBJID_ANALOG_VALUE:case G.objectTypes.OBJID_BINARY_VALUE:case G.objectTypes.OBJID_MULTI_STATE_VALUE:case G.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT:this.bacnetPriorityArray8=
this.autoManual?new v(1,G.primitiveTypes.REAL):new v(null,G.primitiveTypes.NULL)}a.decomissioned?(this.decomissioned=0==a.decomissioned.valueOf()?0:1,this.ehPVFields|=this.EH_DECOM):this.decomissioned=0;a.timedOverride&&(this.ehPVFields|=this.EH_TIMEDOVR);a.security&&(this.security=a.security.valueOf(),this.ehPVFields|=this.EH_SECURITY);!a.analog||this.isBacnet||this.pointName.comType!=u.pointTypes.RCP_INPUT&&this.pointName.comType!=u.pointTypes.RCP_OUTPUT&&this.pointName.comType!=u.pointTypes.RCP_VARIABLE||
(this.digitalAnalog=0==a.analog.valueOf()?0:1,this.ehPVFields|=this.EH_ANALOG);this.bacnetError=a.accessError?new y(new v(a.accessError.cl,G.primitiveTypes.ENUMERATED),new v(a.accessError.co,G.primitiveTypes.ENUMERATED)):null;this._checkOpenUnits()}this.enhancedPresentValueLoaded&&1!=b||(this.isUpdated=this.enhancedPresentValueLoaded=!0,this.onElementLoaded());this.isUpdated=this.enhancedPresentValueLoaded=!0;this.noUpdate--;0>this.noUpdate&&(this.noUpdate=0)}catch(Q){console.error(this.declaredClass+
" - updateEnhancedPresentValue(): Could not update PVE",Q)}},getUnits:function(){var a=this.units;"undefined"!==typeof this.bacnetUnits&&(a=this.bacnetUnits);5===this.decimalPointOverride&&this.group.isView&&(a=20);return a},isInFault:function(){return null!==this.bacnetStatusFlags&&1===this.bacnetStatusFlags.getBit(1)},_createLandingPad:function(a){if(a.enabled){var b=new q;b.fromLandingPadData(a);this.landingPad=new k({backgroundColourNormal:a.colour,backgroundColourHigh:a.colour_high,backgroundColourLow:a.colour_low,
enableLimits:a.enable_limits,backgroundImage:a.image,border:b,icons:a.icons,localDevice:this.group.pointName.mainController,positioning:{horizontalAlignment:a.align_h,horizontalMargin:a.padding_h,verticalAlignment:a.align_v,verticalMargin:a.padding_v}})}},_deleteWorksheet:function(){var a=!1;this.isBacnet&&(this.pointName.isWorksheet()&&-1===this.supportedWorksheets.indexOf(this.pointName.type)||141==this.pointName.type)&&(a=!0);return a},_setBACnetPropertyObject:function(a){this.bacnetPropObj?this.bacnetPropObj.set(this.property,
this.pointName,this.pointValue,this.arrayIdx,this.psdDevice):this.bacnetPropObj=new D(this.property,this.pointName,this.pointValue,this.arrayIdx,this.psdDevice);this.bacnetPropObj.updateValueFromValueObject(a.presentValue.v)},decodeJSON:function(a){try{this.isDeleted=!1;this.isEnhanced=this.isUpdated=!0;this.pointName instanceof B||(this.pointName=0);this.groupElementsLinks=this.groupElements=null;var b=!1,c=!1;switch(a.gel_type){case "point":b=this._decodeJSONPoint(a);c=!0;break;case "keyword":b=
this._decodeJSONKeyword(a);break;case "text file":b=this._decodeJSONTextFile(a);break;default:this.isDeleted=!0}b?(this.isKeyword&&""===this.textKWTitle&&this.units==this.KW_MULTIPOINT&&(this.displayConfig=this.PT_TYPE_ANIMATION,this.animationPoint=47,this._addUniqueProperties(a)),this.decomissioned=a.hasOwnProperty("decom")&&"normal"===a.decom?0:1,this.level=this.security=a.hasOwnProperty("security")?a.security:99,this.pointValue=a.hasOwnProperty("value")?a.value:0,this.format=a.hasOwnProperty("format")&&
!1===a.format?0:1,this.role=a.hasOwnProperty("role")&&"operator"===a.role?0:1,this.digitalAnalog=a.hasOwnProperty("digital/analog")&&"digital"===a["digital/analog"]?0:1,c&&this.isBacnet&&(this.digitalAnalog=this.pointName.isAnalog()||this.pointName.isMultistate()?1:0),this.autoManual=a.hasOwnProperty("auto/manual")&&"manual"===a["auto/manual"]?1:0,this.isKeyword||(this.units=a.hasOwnProperty("units")?a.units:0),this.graphicXCoordinate=a.hasOwnProperty("x-pos")?a["x-pos"]:0,this.graphicYCoordinate=
a.hasOwnProperty("y-pos")?a["y-pos"]:0,this.x=this.graphicXCoordinate,this.y=this.graphicYCoordinate,this.zIndex=a.hasOwnProperty("z-pos")?a["z-pos"]:0,this.textXCoordinate=a.hasOwnProperty("width")?a.width:0,this.textYCoordinate=a.hasOwnProperty("height")?a.height:0,this.animationPoint=a.hasOwnProperty("animation_index")?a.animation_index:0,this.secondaryLink=a.hasOwnProperty("secondary_link")?a.secondary_link:null,a.hasOwnProperty("normal_colour_RGB")&&a.hasOwnProperty("off_low_colour_RGB")&&a.hasOwnProperty("on_high_colour_RGB")?
(this.normalColor=a.normal_colour_RGB,this.offLowColor=a.off_low_colour_RGB,this.onHighColor=a.on_high_colour_RGB,this.isRGB=!0):(this.normalColor=a.hasOwnProperty("normal_colour")?a.normal_colour:0,this.offLowColor=a.hasOwnProperty("off_low_colour")?a.off_low_colour:0,this.onHighColor=a.hasOwnProperty("on_high_colour")?a.on_high_colour:0,this.isRGB=!1),"undefined"!==typeof a.show_status&&(this.showStatus=a.show_status),"undefined"!==typeof a.display_text&&(this.displayName=a.display_text),this.useLimits=
a.hasOwnProperty("enable_limits")?a.enable_limits:!0,this.fontSize=a.hasOwnProperty("font_size")?a.font_size:0,this._decodeDisplayType(a),"undefined"!==typeof a.equipment_data&&this.group.isView&&this.displayConfig!==this.PT_TYPE_ANIMATION&&(this.equipmentData=a.equipment_data,this.decimalPointOverride="undefined"!==this.equipmentData.decimal_time?this.equipmentData.decimal_time:-1),"undefined"!==typeof a.landing_pad&&this._createLandingPad(a.landing_pad),this.displayConfig===this.PT_TYPE_REPLACE_COLOR&&
(this.replaceColourArray=a.replace_colour,this.isReplaceColour=!0),"undefined"!==typeof a.dynamic_colour_locations&&(this.dynamicColourLocations=a.dynamic_colour_locations),"undefined"!==typeof a.relative_height&&(this.relativeHeight=a.relative_height,this.relativeWidth=a.relative_width,this.relativeX=a["x-relative"],this.relativeY=a["y-relative"]),"undefined"!==typeof a.dynamic_limits?(this.dynamicHighEquation=a.dynamic_limits.high||0,this.dynamicLowEquation=a.dynamic_limits.low||0):(this.highLimit=
a.hasOwnProperty("high_limit")?a.high_limit:0,this.lowLimit=a.hasOwnProperty("low_limit")?a.low_limit:0),30==this.units&&this.pointName.comType==u.pointTypes.RCP_INPUT&&(this.pointValue=a.hasOwnProperty("uvalue")?a.uvalue:0),this.animationUnits=a.hasOwnProperty("show_animation_units")&&a.show_animation_units?1:0,(this.isAnimated=7==this.displayConfig?!0:!1)&&0==this.animationUnits&&(this.showUnits=0),this.animationType=this.isAnimated?this.animToAnimTypeLookup[this.animationPoint]:0,this.isFloodFill=
5==this.displayConfig||6==this.displayConfig?!0:!1,this.isBox=4==this.displayConfig||12==this.displayConfig?!0:!1,this.isLC=H.isLC(this.pointName),this.pointJSON=a,this._checkOpenUnits(),this._setAnalogDigitalBit(),this._deleteWorksheet()&&(this.isDeleted=!0),this.pointName.type===G.objectTypes.OBJID_SCHEDULE&&H.supportsOpenUnits(this.pointName)&&(this.unitsDeferred=new h,this.unitsDeferred.then(l.hitch(this,this._scheduleUnitsLoaded)),this._loadScheduleUnits())):this.isDeleted=!0}catch(Q){console.error(this.declaredClass+
"failed to decode",Q)}},_addUniqueProperties:function(a){Object.keys(a).forEach(l.hitch(this,function(b){"undefined"===typeof this[b]&&(this[b]=a[b])}))},decode:function(a,b){var c=0,d=!1,g=J.toIntEnd(a.slice(b,b+2));this.isDeleted=!1;this.isUpdated=!0;this.groupElementsLinks=this.groupElements=null;this._resetPointName(a,b);if(0===a[b+8])return g===this.OBJECT_TYPES.BACnet_OBJECT?b+=this._bacnetOffset:this.group.isGlobalGroup&&b++,this.isDeleted=!0,b+this._bacnetOffset;if(g===this.OBJECT_TYPES.KEYWORD){if(d=
this._decodeKeyWord(a,b),this.isDeleted)return b+=this._bacnetOffset,this.group.isGlobalGroup?b+1:b}else this.subnetType=this.group.pointName.subnetType,g===this.OBJECT_TYPES.BACnet_OBJECT?(c=this._decodeBACnetPoint(a,b+this._bacnetOffset),c-=b+this._bacnetOffset):this._decodeRCPPoint(g);b+=2;var k=a.slice(b,b+=4),n=J.toUnsignedEnd(l.clone(k));this.group.isSuspendedUpdate||0!==this.noUpdate||(this.pointValue=J.toFloatEnd(k));b=this._decodeGenericData(a,b);var k=a.slice(b,b+=2),q=a.slice(b,b+=2);if(g!==
this.OBJECT_TYPES.BACnet_OBJECT)if(0!==this.units&&this.pointName.comType===u.pointTypes.RCP_ARRAY&&(this.arrayIdx=this.units),30===this.units&&this.pointName.comType===u.pointTypes.RCP_INPUT&&0===this.noUpdate&&(this.pointValue=n),this.pointName.mainController=this._getRealPanel(),this.format&&(this.pointName.comType===u.pointTypes.RCP_PROGRAM||this.pointName.comType===u.pointTypes.RCP_TRENDLOG||this.pointName.comType===u.pointTypes.RCP_GROUP||this.pointName.comType===u.pointTypes.RCP_RUNTIME&&this.pointName.isWorksheet())){var t,
m=this.pointName.comInstance;this.pointName.isWorksheet()||(m=0!==this.units?this.units:m);if(this.pointName.isInstanceOf(f)){if(t=J.toIntEnd(k),0!==t){var v=J.toIntEnd(q);this._decodeRCPAddress(t,v,m)}}else t=J.toIntEnd(k.concat(q)),0!==t&&this.pointName.set(t,this.pointName.type,m)}else this._decodeHighLowLimit(k,q);else this._decodeHighLowLimit(k,q);if(this.isKeyword||l.isObject(this.pointName)&&(this.pointName.comType===u.pointTypes.RCP_PROGRAM||this.pointName.comType===u.pointTypes.RCP_TRENDLOG||
this.pointName.comType===u.pointTypes.RCP_GROUP||this.pointName.isWorksheet()))this.level=this.pointValue%100;b=this._decodeGraphics(a,b);this.isKeyword&&(this.showUnits=0,d&&this._decodeTextFile(k,q));this._decodeDisplayConfig(d,n);g!==this.OBJECT_TYPES.BACnet_OBJECT&&(b+=c);this.group.isGlobalGroup&&b++;if(this._deleteWorksheet())return this.isDeleted=!0,b;this._checkOpenUnits();this.isLC=H.isLC(this.pointName);if(this.pointName.type===G.objectTypes.OBJID_SCHEDULE&&H.supportsOpenUnits(this.pointName))this.unitsDeferred=
new h,this.unitsDeferred.then(l.hitch(this,this._scheduleUnitsLoaded)),this._loadScheduleUnits();else this.onElementLoaded();this.noUpdate--;0>this.noUpdate&&(this.noUpdate=0);return b},encode:function(){var a=[],b,a=a.concat(this.pointName.toPointNameArray().reverse()),a=this.pointName.comType==u.pointTypes.RCP_INPUT&&30==this.getUnits()?a.concat(J.intToHexEnd(this.pointValue,4)):a.concat(J.floatToHexEnd(this.pointValue));b=0|this.decomissioned<<7;b|=this.security<<5;b|=this.nameLabel<<4;b|=this.format<<
3;b|=this.role<<2;b|=this.digitalAnalog<<1;b|=this.autoManual;a.push(b);this.pointName.comType==u.pointTypes.RCP_ARRAY&&0==this.units?a.push(this.arrayIdx):a.push(this.units);a.push(this.textYCoordinate,this.textXCoordinate);this.isLC||(b=0|(this.animationPoint&1)<<15,b=b|0|(this.animationPoint&126)<<6,b|=(this.normalColor&15)<<3,b|=this.fontSize&7,a.push(b&255,(b&65280)>>>8));this.isLC&&(a=a.slice(0,8));return a},isUnsupportedPoint:function(){return(-1!==this.knownUnsupportedTypes.indexOf(this.pointName.comType)||
-1!==this.knownUnsupportedTypes.indexOf(this.pointName.type))&&this.isBacnet&&this.property===G.propertyTypes.PROPID_PRESENT_VALUE},_needsUnits:function(a){var b=!1;if(240==a)b=!0;else if(H.supportsOpenUnits(this.pointName))switch(this.pointName.type){case G.objectTypes.OBJID_BINARY_OUTPUT:case G.objectTypes.OBJID_BINARY_INPUT:case G.objectTypes.OBJID_BINARY_VALUE:a>w.binaryValueUnits.bvrLAST_BINARY&&(b=!0);break;case G.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT:a>w.binaryValueUnits.bvrLAST_BINARY&&
a!=w.binaryValueUnits.bloLATCHING_LIGHTING&&a!=w.binaryValueUnits.bloNON_LATCHING_LIGHTING&&(b=!0);break;case G.objectTypes.OBJID_MULTI_STATE_VALUE:a>w.multiStateValueUnits.mvrLAST_MULTISTATE_VALUE_UNIT&&(b=!0);break;case G.objectTypes.OBJID_MULTI_STATE_OUTPUT:a>w.multiStateOutputUnits.morLAST_MULTISTATE_OUTPUT_UNIT&&(b=!0)}return b},_decodeBACnetPoint:function(b,c){this.isBacnet=!0;if(this.group.isGlobalGroup){this.psdService=0;var f=b[c];this.psdDevice=f.dop.d?f.dop.d.i:parseInt(this.group.pointName.mainController,
10);4194303==this.psdDevice&&(this.psdDevice=parseInt(this.group.pointName.mainController,10));this.pointName=new B(this.psdDevice,f.dop.o.t,f.dop.o.i);f.dop.o.t===G.objectTypes.OBJID_SCHEDULE&&a(this.pointName,"subTypeLoaded",l.hitch(this,this._subTypeLoaded));this.property=f.dop.p.v;this.arrayIdx=null!=f.dop.i?f.dop.i.v:-1;this.reliablePoint=-1;this.enabled=this.frequency=this.status=this.powerup=0}else{f=[2];c+=5;this.arrayIdx=J.toIntEnd(b.slice(c,c+2));c+=2;this.network=b[c]&128;f[0]=(b[c]&127)<<
1;c+=2;var d=J.toIntEnd(b.slice(c,c+4));f[1]=(d&4278190080)>>>24;this.psdService=(d&12582912)>>>22;this.psdDevice=d&4194303;4194303==this.psdDevice&&this.group.isSSC&&(this.psdDevice=parseInt(this.group.pointName.mainController,10));c+=4;var d=J.toIntEnd(b.slice(c,c+4))>>>22,g=J.toIntEnd(b.slice(c,c+4))&4194303;this.pointName=new B(this.psdDevice,d,g);c+=4;this.reliablePoint=J.toIntEnd(b.slice(c,c+2));c+=2;this.group.isSSC&&this.pointName.device==parseInt(this.group.pointName.mainController,10)&&
this.pointName.isAnalog()&&(this.units=F.toRcUnit(this.units,rc.sys.job.isSSC(this.pointName)));f[0]|=(b[c]&128)>>>7;this.powerup=(b[c]&64)>>>6;this.status=(b[c]&48)>>>4;this.frequency=(b[c]&14)>>>1;this.enabled=b[c++]&1;this.property=J.toInt(f);this.pointName.comType==u.pointTypes.RCP_ARRAY||E.isPropertyAnArray(this.property)||(this.arrayIdx=-1)}this.digitalAnalog=this.pointName.isAnalog()||this.pointName.isMultistate();this.pointName.type==G.objectTypes.OBJID_PP_ARRAY&&(this.digitalAnalog=1);return c},
_decodeDisplayConfig:function(a,b){var c=0;this.displayPoint&&(c+=8);this.doBox&&(c+=4);this.nameLabel&&(c+=2);this.showUnits&&(c+=1);if(15===c||14===c||13===c)c=12;if(3===c||2===c)c=0;this.isKeyword&&this.units===this.KW_MULTIPOINT&&!a&&(c=7,this.animationPoint=47,this.textXCoordinate+=(b&255)>>>0<<8,this.textYCoordinate+=(b&65280)>>>0<<0);c!==this.displayConfig&&(this.isRendered=!1);this.displayConfig=c;(this.isAnimated=7===this.displayConfig?!0:!1)&&0===this.animationUnits&&(this.showUnits=0);
this.animationType=this.isAnimated?this.animToAnimTypeLookup[this.animationPoint]:0;this.isFloodFill=5===this.displayConfig||6===this.displayConfig?!0:!1;this.isBox=4===this.displayConfig||12===this.displayConfig?!0:!1},_decodeGenericData:function(a,b){this.decomissioned=(a[b]&128)>>>7;this.security=(a[b]&96)>>>5;this.nameLabel=(a[b]&16)>>>4;this.format=(a[b]&8)>>>3;this.role=(a[b]&4)>>>2;this.digitalAnalog=(a[b]&2)>>>1;var c=a[b++]&1;0===this.noUpdate&&(this.autoManual=c);this.units=a[b++];this._setAnalogDigitalBit();
this._setSSCUnits();this.textYCoordinate=a[b++];this.textXCoordinate=a[b++];c=J.toIntEnd(a.slice(b,b+=2));this.animationPoint=(c&32768)>>>15;this.msbpanel=(c&24576)>>>13;this.animationPoint|=(c&8064)>>>6;this.normalColor=(c&120)>>>3;this.normalColorRGB=this._getHexColor((c&120)>>>3);this.fontSize=c&7;return b},_decodeGraphics:function(a,b){var c=J.toIntEnd(a.slice(b,b+2));this.onHighColor=(c&61440)>>>12;this.onHighColorRGB=this._getHexColor((c&61440)>>>12);this.graphicYCoordinate=(c&4092)>>>2;this.doBox=
(c&2)>>>1;this.showUnits=c&1;b+=2;c=J.toIntEnd(a.slice(b,b+2));this.graphicXCoordinate=(c&65472)>>>6;this.offLowColor=(c&60)>>>2;this.offLowColorRGB=this._getHexColor((c&60)>>>2);this.displayPoint=(c&2)>>>1;this.animationUnits=c&1;return b+2},_decodeHighLowLimit:function(a,b){this.highLimit=J.halfFloatToFloatEnd(a);this.lowLimit=J.halfFloatToFloatEnd(b)},_decodeKeyWord:function(a,b){switch(a[b+6]&3){case 1:this.isKeyword=!0;switch(a[b+7]){case this.KW_ALARMS:case this.KW_BYE:case this.KW_HYPERLINK:case this.KW_PREVIOUS:case this.KW_MULTIPOINT:break;
case this.KW_RTS:this.pointName=new f(1,0,9,-2);this.units=-1;break;case this.KW_RTREPORT:this.pointName=new B(1,297,-2);this.units=-1;break;default:b+=20,this.group.isGlobalGroup&&b++,this.isDeleted=!0}break;case 0:if(!(0<(a[b+6]&128)))return this.isKeyword=!0;default:this.isDeleted=!0}return!1},_decodeRCPAddress:function(a,b,c){var f;b&127?128>=b?f=1:(f=2,b-=128):b=f=0;this.pointName.set(a,f,b&127,this.pointName.comType,c)},_decodeRCPPoint:function(a){var b=l.clone(this.group.pointName);if(this.group.isSSC||
this.group.isGlobalGroup)this.subnetType=0,b.mainController=1;this.pointName=new f(a,b)},_decodeTextFile:function(a,c){this.textKWTitle="";this.units&&(this.textKWTitle+=String.fromCharCode(this.units));1<this.textYCoordinate&&(this.textKWTitle+=String.fromCharCode(this.textYCoordinate));this.textXCoordinate&&(this.textKWTitle+=String.fromCharCode(this.textXCoordinate));a[3]&&(this.textKWTitle+=String.fromCharCode(a[3]));a[2]&&(this.textKWTitle+=String.fromCharCode(a[2]));c[3]&&(this.textKWTitle+=
String.fromCharCode(c[3]));c[2]&&(this.textKWTitle+=String.fromCharCode(c[2]));this.offLowColor<<4|this.onHighColor&&(this.textKWTitle+=String.fromCharCode(this.offLowColor<<4|this.onHighColor));this.textKWTitle=b.trim(this.textKWTitle)},_getRealPanel:function(){var a,b,c;if(this.pointName.subnetType)c=this.pointName.mainController;else switch(b=this.pointName.mainController,a=(b-1)%32+1,this.msbpanel){case 0:c=b;break;case 1:c=32<b?a:a+32;break;case 2:c=64<b?a+32:a+64;break;case 3:c=96<b?a+64:a+
96}return c},_getHexColor:function(a){var b;Number(a)>>0===Number(a)&&(b=p.fromArray([this.arCTr[a],this.arCTg[a],this.arCTb[a]]));return b},_resetPointName:function(a,b){this.pointName instanceof B||(this.pointName=0)},_setAnalogDigitalBit:function(){this.isBacnet&&(this.digitalAnalog=this.pointName.isAnalog()||this.pointName.isMultistate(),this.pointName.type!=G.objectTypes.OBJID_BINARY_INPUT&&this.pointName.type!=G.objectTypes.OBJID_BINARY_OUTPUT&&this.pointName.type!=G.objectTypes.OBJID_BINARY_VALUE||
this.property!=G.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME||!H.hasProprietarySupportBit(this.pointName,5)||(this.isBacnet=!1,this.isBacnetRTL=!0,this.autoManual=0,this.digitalAnalog=1,this.pointName.set(this.pointName.device,297,1E3*this.pointName.type+this.pointName.instance),this.units=-1),this.pointName.type==G.objectTypes.OBJID_PP_ARRAY&&(this.digitalAnalog=1))},_setSSCUnits:function(){this.group.isSSC&&this.pointName.device==parseInt(this.group.pointName.mainController,10)&&this.pointName.isAnalog()&&
(this.units=F.toRcUnit(this.units,rc.sys.job.isSSC(this.pointName)))},getAutoTrendLogMnemonic:function(){return this.isAutoTrendLogLink()?this._autoTrendLogMnemonic||this.pointName.device+"STL"+this.bacnetPropObj.propertyObject.i:null},setAutoTrendLogMnemonic:function(a){this._autoTrendLogMnemonic=a},isAutoTrendLogLink:function(){return this.property===G.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE&&this.bacnetPropObj&&this.bacnetPropObj.propertyObject&&this.bacnetPropObj.propertyObject.i&&Number(this.bacnetPropObj.propertyObject.t)===
G.objectTypes.OBJID_TREND_LOG||this._autoTrendLogMnemonic}})})},"rc/reliable/_group/widgets/displayTypes/landingPad/LandingPad":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/text!./templates/LandingPad.html ./LandingPadIcon ../../../../../_base/util".split(" "),function(r,p,m,l,h,c,g,d){return m("rc/reliable/_group/widgets/displayTypes/landingPad/LandingPad",[p,r],{backgroundColour:0,backgroundColourNormal:0,backgroundColourHigh:0,
backgroundColourLow:0,border:null,displayValue:"",horizontalAlignment:"center",horizontalMargin:0,icons:[],localDevice:-1,scaleX:1,scaleY:1,templateString:c,verticalAlignment:"middle",verticalMargin:0,_borderStyleMap:{0:"solid",1:"dashed",2:"dotted",3:"hidden",solid:0,dashed:1,dotted:2,hidden:3},_horizontalAlignmentMap:{0:"flex-start",1:"center",2:"flex-end",left:0,center:1,right:2},_iconMap:null,_iconPositionMap:{0:"first",1:"last"},_iconPurposeMap:{left:0,right:1},_iconPurposeToBorderSettingMap:{0:["borderTopLeftRadius",
"borderBottomLeftRadius"],1:["borderTopRightRadius","borderBottomRightRadius"]},_imageSet:!1,_verticalAlignmentMap:{0:"flex-start",1:"center",2:"flex-end",top:0,middle:1,bottom:2},constructor:function(){this._iconMap={}},postCreate:function(){this.set("backgroundColour",this.backgroundColourNormal)},_setBackgroundColourAttr:function(c){var a="transparent";if(!this._imageSet)try{a=d.rgbToHexString(c)}catch(b){console.error(this.declaredClass+"Invalid background colour, defaulting to transparent",c,
b),a="transparent"}h.set(this.domNode,"backgroundColor",a);this._set("backgroundColour",c)},_setBackgroundImageAttr:function(c){if(c){var a=rc.xhr.toSysUrl("job/pic/"+c);h.set(this.valueContainer,{backgroundImage:"url('"+a+"')",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"});this._imageSet=!0;this.set("backgroundColour","transparent")}else h.set(this.valueContainer,"backgroundImage","none"),this._imageSet=!1;this._set("backgroundImage",c)},_setBorderAttr:function(c){var a={borderColor:"#000000",
borderRadius:Math.round(c.radius*this.scaleY)+"px",borderStyle:this._borderStyleMap[this._borderStyleMap.hidden],borderWidth:c.isShown?Math.round(c.width*this.scaleY)+"px":0};try{a.borderColor=d.rgbToHexString(c.colour)}catch(b){console.error(this.declaredClass+"Invalid colour for border, defaulting to black",c.colour,b),a.borderColor="#000000"}a.borderStyle=this._borderStyleMap[c.style];"undefined"===typeof a.borderStyle&&(console.error(this.declaredClass+"Invalid border style, defaulting to hidden",
c.style),a.borderStyle=this._borderStyleMap[this._borderStyleMap.hidden]);h.set(this.domNode,a);this._set("border",c)},_setClickHandlerForIconsAttr:function(c){this.hasLeftIcon()&&!this.hasLinkOnLeftIcon()&&this._iconMap[0].set("clickHandler",c);this.hasRightIcon()&&!this.hasLinkOnRightIcon()&&this._iconMap[1].set("clickHandler",c)},_setDisplayValueAttr:{node:"textContainer",type:"innerHTML"},_setHorizontalAlignmentAttr:function(c){var a=this._horizontalAlignmentMap[c];"undefined"===typeof a&&(console.error(this.declaredClass+
"Invalid horizontal alignment, defaulting to center aligned",c),a=this._horizontalAlignmentMap[this._horizontalAlignmentMap.center]);h.set(this.valueContainer,"justifyContent",a);this._set("horizontalAlignment",c)},_setHorizontalMarginAttr:function(c){var a="",b=c;0>c&&(console.error("Invalid horizontal margin, defaulting to zero"),c=0);h.set(this.textContainer,{marginLeft:0,marginRight:0});var d=this.get("horizontalAlignment");d===this._horizontalAlignmentMap.left?a="marginLeft":d===this._horizontalAlignmentMap.right&&
(a="marginRight");a&&h.set(this.textContainer,a,Math.round(b*this.scaleX)+"px");this._set("horizontalMargin",c)},_setIconsAttr:function(c){c||(c=[]);this._removeAllIcons();c.forEach(l.hitch(this,this._setSingleIcon));this._set("icons",c)},_getLeftIconNodeAttr:function(){return this._iconMap[0]?this._iconMap[0].domNode:null},_getLeftIconLinkAttr:function(){return this.hasLeftIcon()?this._iconMap[0].link:null},_setLocalDeviceAttr:function(c){-1!==c&&(Object.values(this._iconMap).forEach(function(a){a.set("localDevice",
c)}),this._set("localDevice",c))},_setPositioningAttr:function(c){this.set("horizontalAlignment",c.horizontalAlignment);this.set("verticalAlignment",c.verticalAlignment);this.set("horizontalMargin",c.horizontalMargin);this.set("verticalMargin",c.verticalMargin);this._set("positioning",c)},_setScaleXAttr:function(c){this._set("scaleX",c);this.set("horizontalMargin",this.get("horizontalMargin"))},_getRightIconLinkAttr:function(){return this.hasRightIcon()?this._iconMap[1].link:null},_getRightIconNodeAttr:function(){return this._iconMap[1]?
this._iconMap[1].domNode:null},_setScaleYAttr:function(c){this._set("scaleY",c);this.set("border",this.get("border"));this.set("verticalMargin",this.get("verticalMargin"))},_setVerticalAlignmentAttr:function(c){var a=this._verticalAlignmentMap[c];"undefined"===typeof a&&(console.error(this.declaredClass+"Invalid vertical alignment, defaulting to middle aligned",c),a=this._verticalAlignmentMap[this._verticalAlignmentMap.center]);h.set(this.valueContainer,"alignItems",a);this._set("verticalAlignment",
c)},_setVerticalMarginAttr:function(c){var a="",b=c;0>c&&(console.error("Invalid vertical margin, defaulting to zero"),c=0);h.set(this.textContainer,{marginBottom:0,marginTop:0});var d=this.get("verticalAlignment");d===this._verticalAlignmentMap.top?a="marginTop":d===this._verticalAlignmentMap.bottom&&(a="marginBottom");a&&h.set(this.textContainer,a,Math.round(b*this.scaleX)+"px");this._set("verticalMargin",c)},hasLeftIcon:function(){return this._iconMap[0]},hasLinkOnLeftIcon:function(){return this.hasLeftIcon()&&
0<this._iconMap[0].link.length},hasLinkOnRightIcon:function(){return this.hasRightIcon()&&0<this._iconMap[1].link.length},hasRightIcon:function(){return this._iconMap[1]},overrideLeftLink:function(c){this._overrideIconLink(this._iconMap[0],c)},overrideRightLink:function(c){this._overrideIconLink(this._iconMap[1],c)},setBackgroundToHighColour:function(){this.set("backgroundColour",this.backgroundColourHigh)},setBackgroundToLowColour:function(){this.set("backgroundColour",this.backgroundColourLow)},
setBackgroundToNormalColour:function(){this.set("backgroundColour",this.backgroundColourNormal)},_overrideIconLink:function(c,a){c&&c.set("link",a)},_removeAllIcons:function(){Object.keys(this._iconMap).forEach(l.hitch(this,this._removeSingleIcon))},_removeSingleIcon:function(c){var a=this._iconMap[c];a&&a.destroy&&(a.destroy(),delete this._iconMap[c])},_setSingleIcon:function(c){var a=this._iconMap[c.purpose],b=this._iconPositionMap[c.purpose];"undefined"!==typeof b?("undefined"===typeof a&&(a=new g),
a.set({localDevice:this.localDevice,imagePath:c.image,link:c.link,purpose:c.purpose}),a.placeAt(this.domNode,b),this.own(a),this._iconMap[c.purpose]=a):"undefined"===typeof a&&delete this._iconMap[c.purpose]},destroy:function(){this._removeAllIcons();this.inherited(arguments)}})})},"rc/reliable/_group/widgets/displayTypes/landingPad/LandingPadIcon":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/text!./templates/LandingPadIcon.html ./LandingPadIconDestinationConfig".split(" "),
function(r,p,m,l,h,c,g,d,n){return m("rc/reliable/_group/widgets/displayTypes/landingPad/LandingPadIcon",[p,r],{imagePath:"",link:"",localDevice:-1,purpose:-1,templateString:d,_classPositionMap:{0:"left-landing-pad-icon",1:"right-landing-pad-icon","-1":"hidden",left:0,right:1,hidden:-1},_clickHandler:null,_destinationConfig:null,_setClickHandlerAttr:function(a){this._clickFunctionChanged(a)},_setImagePathAttr:function(a){h.set(this.imageNode,"src",rc.xhr.toSysUrl("job/pic/"+a));this._set("imagePath",
a)},_setLinkAttr:function(a){this._clickHandler&&this._clickHandler.remove();this._destinationConfig||(this._destinationConfig=new n,this.own(this._destinationConfig.watch(l.hitch(this,this._destinationConfigChanged))));-1!==this.localDevice&&this._destinationConfig.fromDestinationAndDevice(a,this.localDevice);this._set("link",a)},_setLocalDeviceAttr:function(a){-1!==a&&(this._set("localDevice",a),this.set("link",this.link))},_setPurposeAttr:function(a){var b=this._classPositionMap[a];c.remove(this.domNode);
"undefined"===typeof b&&(console.error(this.declaredClass+"Invalid purpose, hiding icon",a),b=this._classPositionMap[this._classPositionMap.hidden]);c.add(this.domNode,b);this._set("purpose",a)},_clickFunctionChanged:function(a){this._clickHandler&&this._clickHandler.remove();null!==a&&(this._clickHandler=g(this.domNode,"click",l.hitch(this,this._gotoLink,a)),this.own(this._clickHandler))},_destinationConfigChanged:function(a,b,c){switch(a){case "clickFunction":this._clickFunctionChanged(c);break;
case "titleText":this._titleTextChanged(c)}},_gotoLink:function(a,b){b.cancelBubble=!0;b.stopPropagation();a(b)},_titleTextChanged:function(a){""!==a?h.set(this.domNode,{title:a,alt:a}):(h.remove(this.domNode,"title"),h.remove(this.domNode,"alt"))},destroy:function(){this._clickHandler&&(this._clickHandler.remove(),this._clickHandler=null);this.inherited(arguments)}})})},"rc/reliable/_group/widgets/displayTypes/landingPad/LandingPadIconDestinationConfig":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/hash dojo/i18n!../../../../../nls/all dojo/string dojo/topic ../../../../../_base/util ../../../../../sys/desc".split(" "),
function(r,p,m,l,h,c,g,d,n){return p("rc/reliable/_group/widgets/displayTypes/landingPad/LandingPadIconDestinationConfig",[r],{titleText:"",destination:"",clickFunction:null,fromDestinationAndDevice:function(a,b){a?/^(?:https?:\/\/|www|mailto|ftp:\/\/|telnet:\/\/)/i.test(a)?this._setupExternalLink(a):this._setupMnemonicLink(a,b):this._resetProperties()},_gotoMnemonic:function(a,b){a=d.mnemonicToUri(a,!0);d.redirectToHash(a,b)},_resetProperties:function(){this.set("titleText","");this.set("destination",
"");this.set("clickFunction",null)},_setupExternalLink:function(a){this.set("titleText",c.substitute(h.gotoX,[a]));this.set("destination",a);this.set("clickFunction",m.hitch(this,d.gotoExternalLink,a))},_setupMnemonicLink:function(a,b){/^[a-z]/i.test(a)&&(a=b+a);a=a.toUpperCase();var d=n.mnemonicToObject(a),k=a.includes("[");if(null===d)this.set("clickFunction",null);else{var q=decodeURI(n.get(d)),f=document.createElement("textarea");f.innerHTML=q;q=f.value;q=""!==q?q+" ("+a+")":a;d.isNavLink()?(q=
c.substitute(h.gotoX,[q]),this.set("clickFunction",m.hitch(this,this._gotoMnemonic,a))):d.isEditableLinkTo(k)?(q=c.substitute(h.editX,[q]),this.set("clickFunction",m.hitch(this,g.publish,"editableLinkToClicked",a))):(q="",this.set("clickFunction",null));this.set("titleText",q);this.set("destination",a)}}})})},"rc/reliable/_group/widgets/displayTypes/landingPad/LandingPadBorderSettings":function(){define(["dojo/_base/declare"],function(r){return r("rc/reliable/_group/widgets/displayTypes/landingPad/LandingPadBorderSettings",
null,{colour:0,isShown:!1,radius:0,style:0,width:0,fromLandingPadData:function(p){this.colour=p.colour_border;this.isShown=p.border;this.radius=p.corner_radius;this.style=p.border_style;this.width=p.border_weight}})})},"rc/reliable/_group/io/Background":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/on dojo/topic ./BackgroundFlash ./BackgroundHtml ../../../xhr".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){return m("rc/reliable/_group/io/Background",[r,n],{f:null,be:null,parentNode:null,bImg:null,box:null,pf:null,bf:null,bh:null,isHTML:!1,_pconnects:null,_pconnectsTmp:null,_retries:0,constructor:function(){var a;this._pconnects=[];this._pconnectsTmp=[];this.bf=new k;this.bh=new q;a=b(this.bf,"destroyFlash",this.onDestroyFlash);this._pconnects.push(a);a=b(this.bf,"load",l.hitch(this,function(){this.onLoadFlash()}));b(this.bh,"groupElementClicked",l.hitch(this,
this.onGroupElementClicked));this._pconnects.push(a)},loadContainer:function(a,b,c,f){this.bgColor=b;this.parentNode=a;this.bf.parentNode=a;this.bh.parentNode=a;var d=new h;c.isFlashDependant?this.bf.load(a,b).then(l.hitch(this,function(){this.onLoadContainer();this.isHTML=!1;d.resolve()}),l.hitch(this,function(){this.bh.load(a,b).then(l.hitch(this,function(){this.onLoadContainer();this.isHTML=!0;d.resolve(!0)}),l.hitch(this,function(a){d.reject(a)}))})):this.bh.load(a,b).then(l.hitch(this,function(){this.onLoadContainer();
this.isHTML=!0;d.resolve(!0)}),l.hitch(this,function(a){d.reject(a)}));return d.promise},loadAnimation:function(a,b,c,f){var d=new h,g=0,k=l.hitch(this,function(){d.resolve(!0)}),q=l.hitch(this,function(n){/\.js|\.gif$/i.test(b)&&0===g++?this.bh.loadAnimation(a,b,c,f).then(k,q):d.reject(n)});this.isHTML?q():-1!==b.search(/\.swf|.gif$/)?this.bf.loadAnimation(a,b,c).then(k,q):q("No Flash nor HTML animation found!");return d.promise},removeAnimation:function(a){this.isHTML?this.bh.removeAnimation(a):
this.bf.removeAnimation(a)},loadFileExtension:function(a,b,c){if(c){if(0<b.length)return a=b.split("\\").slice(-1),b=new h,b.resolve({data:[a]}),b.promise;if(0===a.length)return b=new h,b.resolve({data:[""]}),b.promise}return rc.xhr.request({gid:"GRP",type:"cmd",cmdObj:{cmd:3,file:"/job/pic/"+a+".*"}})},loadBackgroundImage:function(a,b){this.be&&g.destroy(this.be);this.be=g.create("div",{},this.parentNode,1);return b.solidColourSet?this._loadFromSolidColour(b):this._loadFromImageFile(a,b)},setToDefaultSize:function(){this.box=
{w:640,h:480};c.add(this.be,"groupBg")},loadPrintBackground:function(){var f=new h;f.promise.always(l.hitch(this,function(){c.add(this.be,"groupBg")}));if(this.pf)try{if(-1===this.pf.indexOf(".swf")){var k=l.hitch(this,function(){try{if(c.remove(this.be,"groupBg"),this.bImg.width)this.box={w:this.bImg.width,h:this.bImg.height},f.resolve();else{if(0>=this._retries--)throw new rc.Error({name:a.error,message:a.errorPageLoad+" "+a.problemWithBg,suggestion:a.unexpectedFix,renderHtml:!0});setTimeout(l.hitch(this,
k),10)}}catch(z){f.reject(z)}});if(this.bh.c){this.bImg&&g.destroy(this.bImg);this.bImg=this.bh.bi;this.be.appendChild(this.bImg);this._retries=100;k();return}this._pconnectsTmp.push(b(this.bImg,"load",l.hitch(this,function(){this._retries=100;k()})));this.bImg.src=rc.xhr.toSysUrl("job/pic/"+this.pf)}else f.reject("loadPrintBackground can't load a swf directly into html.")}catch(z){f.reject(z)}else this.setToDefaultSize(),d.set(this.be,{height:this.box.h+"px",width:this.box.w+"px"}),f.reject("Group has no background image.");
return f.promise},_fileExtensionLoaded:function(a,c,f){this.pf=f.data[0];if(this.pf=encodeURIComponent(this.pf)){this.bImg&&g.destroy(this.bImg);this.bImg=g.create("img",{},this.be);this._startProgressUpdates();var d=l.hitch(this,function(){p.forEach(this._pconnectsTmp,function(a){a.remove()},this);this._pconnectsTmp=[];this._stopProgressUpdates();this.bf.flashSupported()?this.box=this.bf.getBackgroundDimensions():this.box=this.bh.getBackgroundDimensions();c.resolve(this);this.onLoadBackgroundImage()});
try{if(!this.isHTML&&this.bf.flashSupported())if(this.bf._loadingFlash)var k=b(this.bf.f,"loadFlash",l.hitch(this,function(){this.bf.loadBackgroundImage(this.pf).always(l.hitch(this,d));k.remove()}));else this.bf.loadBackgroundImage(this.pf).always(l.hitch(this,d));else this.bh.loadBackgroundImage(this.pf,a.groupJSONFile).always(l.hitch(this,d))}catch(v){this.onLoadBackgroundImage(),c.reject(v)}}else this.onLoadBackgroundImage(),c.resolve(this)},_loadFromSolidColour:function(a){var b=new h;this.pf=
"";this.box={w:a.imageWidth,h:a.imageHeight};c.add(this.be,"groupBg");this.onLoadBackgroundImage();b.resolve();return b.promise},_loadFromImageFile:function(a,b){var c=new h;this.setToDefaultSize();a||b.backgroundFile?this.loadFileExtension(a,b.backgroundFile,b.isEnhancedGroup).then(l.hitch(this,this._fileExtensionLoaded,b,c),l.hitch(this,function(a){this.onLoadBackgroundImage();c.reject(a)})):(this.onLoadBackgroundImage(),c.resolve());return c.promise},_startProgressUpdates:function(){this._updating=
!0;this._postProgress()},_stopProgressUpdates:function(){this._updating=!1},_postProgress:function(){this._updating&&setTimeout(l.hitch(this,this._postProgress),1E4)},getElementValues:function(a,b){return b=this.isHTML?this.bh.getElementValues(a,b):this.bf.getElementValues(a,b)},setElementValues:function(a,b,c,f){!this.isHTML&&c[a].isFlashAnimation(f)?this.bf.setElementValues(a,b):this.bh.setElementValues(a,b,c)},getDimensions:function(){return this.box},replaceColour:function(a,b,c,f){this.isHTML?
this.bh.replaceColour(a,b,c,f):this.bf.replaceColour(a.index,b,c,f)},floodFill:function(a,b,c,f){this.isHTML?(f={red:f>>16&255,green:f>>8&255,blue:f&255,alpha:255},a.dynamicColourLocations?this.bh.replaceColour(a,b,c,f):this.bh.floodFill(a,b,c,f)):this.bf.floodFill(a,b,c,f)},decToHex:function(a){for(a=a.toString(16);6!==a.length;)a="0"+a;return a},removeFloodFill:function(){this.isHTML?this.bh.removeFloodFill():this.bf.removeFloodFill()},getBackgroundColor:function(a,b){return this.isHTML?this.bh.getBackgroundColor(a,
b):this.bf.getBackgroundColor(a,b)},resize:function(a){this.bh.resize(a)},onDestroyFlash:function(){this.emit("destroyFlash",null)},onLoadFlash:function(){this.emit("loadFlash",null)},onLoadContainer:function(){this.emit("loadContainer",null)},onLoadAnimination:function(){this.emit("loadAnimation",null)},onLoadBackgroundImage:function(){this.emit("loadBackgroundImage",null)},onGroupElementLoadError:function(a){this.emit("groupElementLoadError",a)},onGroupElementModified:function(a,b){this.emit("groupElementModified",
a,b)},onGroupElementClicked:function(a){this.emit("groupElementClicked",a)},onError:function(){this.emit("error",null)},destroy:function(){p.forEach(this._pconnects,function(a){a.remove()},this);p.forEach(this._pconnectsTmp,function(a){a.remove()},this);this.bf.destroyRecursive();this.bh.destroyRecursive();g.destroy(this.be);this.bImg=this.be=this.parentNode=null;this.inherited(arguments)}})})},"rc/reliable/_group/io/BackgroundFlash":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/Evented dojo/has dojo/on dojo/query dojo/topic dojox/embed/Flash require ../Flash ../../../util/flash dojo/sniff".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){return m("rc/reliable/_group/io/BackgroundFlash",[r,g],{f:null,be:null,parentNode:null,box:null,pf:null,bf:null,bh:null,_flashLoadConnect:null,_pconnects:null,_pconnectsTmp:null,_retries:0,constructor:function(){this._pconnects=[];this._pconnectsTmp=[]},load:function(a,b){this.bgColor=b;this.parentNode=a;this._loadingFlash=!0;var f=""===b?"transparent":"opaque",g=new c,u=k.toUrl("rc/reliable/_group/resources/"),m="gc"+(new Date).getTime();this.f=new q({path:u+
"GroupContainer.swf",id:m,allowScriptAccess:"always",params:{scale:"noscale",wmode:f,menu:"false",name:m,bgcolor:this.bgColor},width:"100%",height:"100%"},this.parentNode);null!==this._flashLoadConnect&&(this._flashLoadConnect.remove(),this._flashLoadConnect=null);this._flashLoadConnect=h.after(this.f,"onLoad",l.hitch(this,function(){t.proxy(this.f,"avm2SetJsInfo avm2AddStageMouseListener avm2AddElement avm2ChangeColor avm2RemoveElement avm2SetElementValues avm2GetElementValues avm2SetBackgroundImage avm2GetBackgroundColor avm2FloodFill avm2RemoveFloodFill avm2Resize avm2GetBackgroundDimensions avm2CheckLoaded avm2FindElementsModified avm2DisableEI avm1SetJsInfo avm1AddElement avm1RemoveElement avm1SetElementValues avm1GetElementValues avm1FindElementsModified avm1DisableEI avm1Resize".split(" "));
this._flashLoadConnect.remove();this._flashLoadConnect=null}),!0);f=n.once(this.f,"loadFlash",l.hitch(this,function(a){d("trident")&&this.callFlashFunction("avm2AddStageMouseListener");this._loadingFlash?(this._loadingFlash=!1,this.onLoad(),g.resolve(this.f)):(this.onDestroyFlash(),p.forEach(this._pconnects,function(a){a.remove()},this),p.forEach(this._pconnectsTmp,function(a){a.remove()},this),this.f.destroy(),this.loadContainer(this.parentNode,this.bgColor))}),!0);this._pconnects.push(f);f=h.after(this.f,
"onError",l.hitch(this,function(a){p.forEach(this._pconnects,function(a){a.remove()},this);p.forEach(this._pconnectsTmp,function(a){a.remove()},this);this._pconnectsTmp=[];this._loadingFlash=!1;if(-1!==a.indexOf("Flash is not installed"))this.f.destroy(),this.f=null,this.onError();else this.onError(a);g.reject(a)}),!0);this._pconnectsTmp.push(f);f=n(this.f,"groupElementModified",l.hitch(this,this.onGroupElementModified),!0);this._pconnects.push(f);f=n(this.f,"groupElementLoadError",l.hitch(this,this.onGroupElementLoadError),
!0);this._pconnects.push(f);return g.promise},flashSupported:function(){return null==this.f?!1:!0},onDestroyFlash:function(){this.emit("destroyFlash",null)},onLoad:function(){this.emit("load",null)},loadAnimation:function(a,b,f){var d=new c,g=l.hitch(this,function(){p.forEach(this._pconnectsTmp,function(a){a.remove()},this);this._pconnectsTmp=[];d.resolve();this.onLoadAnimation()}),k=l.hitch(this,function(a){p.forEach(this._pconnectsTmp,function(a){a.remove()},this);this._pconnectsTmp=[];d.reject("No Flash animation found!");
this.onGroupElementLoadError(a)});this.f&&"avm2AddElement"in this.f?(this._pconnectsTmp.push(n(this.f,"loadGroupElements",l.hitch(this,g,!0))),this._pconnectsTmp.push(n(this.f,"groupElementLoadError",l.hitch(this,k,!0))),this.callFlashFunction("avm2AddElement",a,rc.xhr.toSysUrl("job/pic/Animation/"+b),f)):k(Error("Flash not supported"));return d.promise},onLoadAnimation:function(){this.emit("loadAnimation")},loadBackgroundImage:function(a){var b=new c;try{this.f?(this._pconnectsTmp.push(n(this.f,
"loadGroupElements",l.hitch(this,function(){this.box=this.callFlashFunction("avm2GetBackgroundDimensions");b.resolve()}))),this.callFlashFunction("avm2SetBackgroundImage",rc.xhr.toSysUrl("job/pic/"+a))):b.reject("Flash not enabled.")}catch(z){b.reject(z)}return b.promise},getBackgroundDimensions:function(){return this.callFlashFunction("avm2GetBackgroundDimensions")},onGroupElementLoadError:function(a){this.emit("groupElementLoadError",a)},onGroupElementModified:function(a,c){b.publish("groupElementModified",
a,c);this.emit("groupElementModified",a,c)},onGroupFloodFillClicked:function(a){this.emit("groupFloodFillClicked",a)},removeAnimation:function(a){this.callFlashFunction("avm2RemoveElement",a)},getElementValues:function(a,b){return this.f?this.callFlashFunction("avm2GetElementValues",a,b):b},setElementValues:function(a,b){this.callFlashFunction("avm2SetElementValues",a,b)},floodFill:function(a,b,c,f){this.callFlashFunction("avm2FloodFill",a.index,b,c,4278190080|f)},removeFloodFill:function(){this.callFlashFunction("avm2RemoveFloodFill")},
replaceColour:function(a,b,c,f){a=parseInt(f.red<<16)|parseInt(f.green<<8)|parseInt(f.blue);this.callFlashFunction("avm2ChangeColor",b,c,4278190080|a)},getBackgroundColor:function(a,b){return this.f?this.callFlashFunction("avm2GetBackgroundColor",a,b):"#000000"},callFlashFunction:function(){if(!this.f)return null;var a=Array.prototype.slice.call(arguments,0);a.unshift(this.f.id);return f.callFlashFunction.apply(f,a)},onError:function(){},_startProgressUpdates:function(){this._updating=!0;this._postProgress()},
_stopProgressUpdates:function(){this._updating=!1},_postProgress:function(){this._updating&&setTimeout(l.hitch(this,this._postProgress),1E4)},destroy:function(){null!==this._flashLoadConnect&&(this._flashLoadConnect.remove(),this._flashLoadConnect=null);p.forEach(this._pconnects,function(a){a.remove()},this);p.forEach(this._pconnectsTmp,function(a){a.remove()},this);this.f&&(this.f.removeMovieFromRcUtilFlash(),this.f.id&&a("#"+this.f.id,this.parentNode).length&&"avm2DisableEI"in this.f&&this.callFlashFunction("avm2DisableEI"),
this.f.destroy());this.inherited(arguments)}})})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(r,p,m,l,h,c,g,d,n){function a(a){a=r.delegate(q,a);if(!("path"in a))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),null;"id"in a||(a.id="dojox-embed-flash-"+k++);return a}var b,t,k=0,q={expressInstall:!1,width:320,height:240,swLiveConnect:"true",
allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};h("ie")?(b=function(b){b=a(b);if(!b)return null;var c,f=b.path;if(b.vars){var d=[];for(c in b.vars)d.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(b.vars[c]));b.params.FlashVars=d.join("\x26");delete b.vars}f='\x3cobject id\x3d"'+n.escape(String(b.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+n.escape(String(b.width))+'" height\x3d"'+n.escape(String(b.height))+'"'+(b.style?' style\x3d"'+
n.escape(String(b.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+n.escape(String(f))+'" /\x3e';if(b.params)for(c in b.params)f+='\x3cparam name\x3d"'+n.escape(c)+'" value\x3d"'+n.escape(String(b.params[c]))+'" /\x3e';return{id:b.id,markup:f+"\x3c/object\x3e"}},t=function(){for(var a=10,b=null;!b&&7<a;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a--)}catch(z){}return b?(a=b.GetVariable("$version").split(" ")[1].split(","),{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?
parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}(),p.addOnWindowUnload(function(){var a=function(){};l("object").reverse().style("display","none").forEach(function(b){for(var c in b)if("FlashVars"!=c&&"function"==typeof b[c])try{b[c]=a}catch(x){}})})):(b=function(b){b=a(b);if(!b)return null;var c,f=b.path;if(b.vars){var d=[];for(c in b.vars)d.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(b.vars[c]));b.params.flashVars=d.join("\x26");delete b.vars}f='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+
n.escape(String(f))+'" id\x3d"'+n.escape(String(b.id))+'" width\x3d"'+n.escape(String(b.width))+'" height\x3d"'+n.escape(String(b.height))+'"'+(b.style?' style\x3d"'+n.escape(String(b.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(b.params)for(c in b.params)f+=" "+n.escape(c)+'\x3d"'+n.escape(String(b.params[c]))+'"';return{id:b.id,markup:f+" /\x3e"}},t=function(){var a=navigator.plugins["Shockwave Flash"];return a&&a.description?(a=a.description.replace(/([a-zA-Z]|\s)+/,
"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}());var f=function(a,b){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");this.available=t.major;this.minimumVersion=a.minimumVersion||9;this.domNode=this.movie=this.id=
null;b&&(b=c.byId(b));setTimeout(r.hitch(this,function(){if(a.expressInstall||this.available&&this.available>=this.minimumVersion)if(a&&b)this.init(a,b);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),100)};r.extend(f,{onReady:function(a){},onLoad:function(a){},onError:function(a){},_onload:function(){clearInterval(this._poller);
delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(a,b){this.destroy();b=c.byId(b||this.domNode);if(!b)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var d=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;f.initialized&&(this.id=f.place(a,b),this.domNode=b,setTimeout(r.hitch(this,function(){this.movie=this.byId(this.id,a.doc);this.onReady(this.movie);this._poller=setInterval(r.hitch(this,function(){try{d=
this.movie.PercentLoaded()}catch(x){}if(100==d)this._onload();else if(0==d&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(u){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var a=r.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),b;for(b in this)a[b]||delete this[b];this._poller?g(this,"Load",this,"_destroy"):this._destroy()}},
byId:function(a,b){b=b||document;return b.embeds[a]?b.embeds[a]:b[a]?b[a]:window[a]?window[a]:document[a]?document[a]:null}});r.mixin(f,{minSupported:8,available:t.major,supported:t.major>=t.required,minimumRequired:t.required,version:t,initialized:!1,onInitialize:function(){f.initialized=!0},__ie_markup__:function(a){return b(a)},proxy:function(a,b){m.forEach(b instanceof Array?b:[b],function(a){this[a]=r.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+
a+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+m.map(arguments,function(a){return __flash__toXML(a)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},a)}});f.place=function(a,f){var g=b(a);f=c.byId(f);f||(f=d.doc.createElement("div"),f.id=g.id+"-container",d.body().appendChild(f));return g?(f.innerHTML=g.markup,g.id):null};f.onInitialize();r.setObject("dojox.embed.Flash",f);return f})},"rc/reliable/_group/Flash":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/Evented dojo/has dojo/dom-construct dojo/dom-style dojo/topic dojox/embed/Flash ../../util/flash dojo/sniff".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return r("rc/reliable/_group/Flash",[n,l],{_fscommandTimer:null,_fscommandPending:0,_fscommandScript:null,init:function(b,d){var g=Array.prototype.slice.call(arguments,0);h("trident")&&(this._fscommandScript=c.create("script",{type:"text/javascript",event:"FSCommand(command,args)","for":b.id},m.doc.getElementsByTagName("head")[0],"last"),this._fscommandScript.text=b.id+"_DoFSCommand(arguments);");window[b.id]||(window[b.id+"_DoFSCommand"]=p.hitch(this,this.onDoFSCommand));
this.inherited(arguments,g);this._pollMax=300;a.addMovie(this)},onDoFSCommand:function(a,c){var b=p.hitch(this,function(){"avm2FindElementsModified"in this&&this.avm2FindElementsModified()});null==this._fscommandTimer?(this._fscommandPending=0,b(),this._fscommandTimer=setTimeout(p.hitch(this,function(){this._fscommandPending&&b();this._fscommandTimer=null}),1E3)):this._fscommandPending++;this.emit("doFSCommand",a,c)},onLoadFlash:function(a){this.emit("loadFlash",a)},onLoadGroupElements:function(a){this.emit("loadGroupElements",
a)},onGroupElementLoadError:function(a){this.emit("groupElementLoadError",a)},onGroupElementModified:function(a,c){this.emit("groupElementModified",a,c)},_onLoadFlashCallback:function(){this.onLoadFlash(this.movie)},_onLoadGroupElementsCallback:function(){this.onLoadGroupElements(this.movie)},_onGroupElementLoadErrorCallback:function(a){this.onGroupElementLoadError(a)},_onGroupElementModified:function(){this.onGroupElementModified.apply(this,arguments)},_onStageMouseEvent:function(){d.publish("pagetitle",
{})},onGroupFloodFillClicked:function(a){d.publish("groupFloodFillClicked",a)},_destroy:function(){try{if(h("trident")){var a=this.movie;g.set(a,"display","none");for(var c in a)if("FlashVars"!=c&&p.isFunction(a[c]))try{a[c]=null}catch(k){}}this.domNode.removeChild(this.movie)}catch(k){}this.id=this.movie=this.domNode=null},removeMovieFromRcUtilFlash:function(){a.removeMovie(this)},destroy:function(){if(this.movie){a.removeMovie(this);this._fscommandScript&&c.destroy(this._fscommandScript);if(this.id&&
this.id+"_DoFSCommand"in window){window[this.id+"_DoFSCommand"]=null;try{delete window[this.id+"_DoFSCommand"]}catch(b){}}this.inherited(arguments)}}})})},"rc/util/flash":function(){define([],function(){rc.util.flash={callFlashFunction:function(){if(2>arguments.length)return null;var r=Array.prototype.slice.call(arguments,0),p=r.shift(),m=r.shift();return p in this&&m in this[p]?this[p][m].apply(this[p],r):null},addMovie:function(r){this[r.id]=r},removeMovie:function(r){delete this[r.id]}};return rc.util.flash})},
"rc/reliable/_group/io/BackgroundHtml":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/Evented dojo/has dojo/on dojo/topic dojo/touch require rc/date rc/util/html/canvas ./WorkerManager libgif-js/libgif".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A){return m("rc/reliable/_group/io/BackgroundHtml",[r,k],{bi:null,
parentNode:null,c:null,_c:null,_c2d:null,rawImge:null,rawImageData:null,_MaxLoadAttempts:5,_replaceColorTimer:null,_pconnects:null,_pconnectsTmp:null,_floodFillsObj:null,_replaceColourObject:null,_animsObj:null,_animationsInteractiveArea:null,_drawTimeout:null,_grpElsMods:null,_grpElsModsTimer:null,_grpElsModsPending:0,_floodFillData:{},_firstLoad:!0,_resizeImageTimer:null,_resizeTimeout:null,_workerManager:null,baseUrl:"rc/reliable/_group/resources/html/",constructor:function(){this._pconnects=[];
this._pconnectsTmp=[];this._floodFillsObj={};this._replaceColourObject={};this._animsObj={};this._grpElsMods={};this._animationsInteractiveArea={}},load:function(b,c){var f,d=new g;this.parentNode=b;f=this._getNodeDimensions(b);this.c||(this.c=a.create("canvas",{width:f.w,height:f.h||400,style:{position:"absolute"}},b,"first"));this._c||(this._c=a.create("canvas",{id:"canvas2",width:f.w,height:f.h||400,style:{position:"absolute",left:"-10000px",top:"-10000px",zIndex:2E4}},b,"first"),this._c2d=this._c.getContext("2d"),
this.rawImage=this._c.getContext("2d"));d.resolve(!0);return d.promise},resize:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(l.hitch(this,this._resize),50)},_resize:function(){this._resizeCanvas();Object.keys(this._animsObj).forEach(l.hitch(this,this._resizeAnimation))},_resizeAnimation:function(a){a=this._animsObj[a];var c,f;null!==a&&a.ready&&(c=b.position(a.n),f=c.w/a.w.stageWidth,c=c.h/a.w.stageHeight,f="scale("+f+","+c+")",t.set(a.f.contentDocument.body,
{MozTransformOrigin:"0 0",MozTransform:f,webkitTransformOrigin:"0 0",webkitTransform:f,oTransformOrigin:"0 0",oTransform:f,msTransformOrigin:"0 0",msTransform:f,transformOrigin:"0 0",transform:f,overflow:"hidden"}),a.w&&a.w.resize&&a.w.resize())},_resizeCanvas:function(){var a,b=this._getNodeDimensions(this.parentNode);!this.c||Number(d.get(this.c,"height"))===b.h&&Number(d.get(this.c,"width"))===b.w||(this._resizeImageTimer&&clearInterval(this._resizeImageTimer),this._resizeImageTimer&&clearInterval(this._resizeImageTimer),
this._resizeImageTimer&&clearInterval(this._resizeImageTimer),d.set(this.c,{width:b.w,height:b.h}),this.bi&&this.bi.complete&&(this.rawImageData||(this._c2d.drawImage(this.bi,0,0),this.rawImage.drawImage(this.bi,0,0),this.rawImageData=this.rawImage.getImageData(0,0,this.rawImage.canvas.width,this.rawImage.canvas.height)),Object.keys(this._floodFillsObj).forEach(l.hitch(this,function(b){a=this._floodFillsObj[b];this.floodFill(a.element,a.x,a.y,a.colour,!0)})),Object.values(this._replaceColourObject).forEach(l.hitch(this,
this._doReplaceColour))))},getBackgroundDimensions:function(){return this._getNodeDimensions(this.bi)},_getNodeDimensions:function(a){return a?b.getMarginBox(a):{w:640,h:480}},loadBackgroundImage:function(b){var c,k,q,n=new g;this.bi||(this.bi=a.create("img",{},h.body(),"last"));q=l.hitch(this,function(){p.forEach(this._pconnectsTmp,function(a){a.remove()},this);this._pconnectsTmp=[];c=this.bi.naturalWidth;k=this.bi.naturalHeight;this._c&&d.set(this._c,{width:c,height:k});this.resize();n.resolve()});
q=f(this.bi,"load",q);this._pconnectsTmp.push(q);q=l.hitch(this,function(a){p.forEach(this._pconnectsTmp,function(a){a.remove()},this);this._pconnectsTmp=[];this.bi=null;n.reject(a)});q=f(this.bi,"error",q);this._pconnectsTmp.push(q);this.bi.src=rc.xhr.toSysUrl("job/pic/"+b);return n.promise},_getPath:function(){return rc.xhr.toSysUrl("job/pic/Animation")},loadAnimation:function(b,d,k,q){var n=new g;if(this._animsObj.hasOwnProperty(b))return n.resolve(!0),n.promise;var h=d.replace(/%5C/g,"/"),m,u,
v;d=this._getPath();m=a.create("div",{id:"grpIndex"+b,style:{position:"absolute",left:k.x+"%",top:k.y+"%",width:k.width+"%",height:k.height+"%",overflow:"hidden",zIndex:q[b].zIndex}},this.parentNode);u=a.create("iframe",{id:"grpFrameIndex"+b,style:{display:"hidden",width:"100%",height:"100%"},allowtransparency:"true",frameborder:"0",src:this._buildAnimationSourceUrl(h,d,b)},m);this.own(f(u.contentWindow,"mousemove",l.hitch(this,function(){rc.activity.onActivity()})));null==this._animsObj[b]&&(v=this._animsObj[b]=
{n:m,f:u,w:null,objs:null,ready:!1});var p=/.gif$/i.test(h),B=function(a){!p&&null==v.f.contentWindow.animation||p&&"complete"!==v.f.contentDocument.readyState?a<this._MaxLoadAttempts?setTimeout(l.hitch(this,B,++a),100):n.reject("No HTML animation found!"):(t.set(v.f,{display:"block"}),a=[],k.groupElementIndex=b,a.push(k),v.f.contentWindow.animation?(this._setAnimationObjectData(q,b,a),this.applyCustomAttibutes(a,q[b]),this.addUniqueProperties(a,q[b]),v.w=u.contentWindow.animation,v.objs=a,v.ready=
!0,this.own(c.after(v.w,"InteractiveAreaCallback",l.hitch(this,this._updateAnimationInteractiveArea),!0)),this._sendGroupElements(v,a),this._resizeAnimation(b,k),this.own(c.after(v.w,"groupElementTouched",l.hitch(this,this._linkTouched),!0),c.after(v.w,"animationMouseOver",l.hitch(this,this._animationMouseOver),!0),c.after(v.w,"dataUpdated",l.hitch(this,this._dataUpdated),!0))):(t.set(u.contentDocument.body,"overflow","hidden"),a=u.contentDocument.getElementsByTagName("img")[0],this._animsObj[b].gifHandle=
new A({gif:a,max_width:v.f.offsetWidth,progressbar_height:0}),this._animsObj[b].gifHandle.load(l.hitch(this,function(){this._animsObj[b].ready=!0;this._setGifValues(b,k,q)}))),n.resolve(!0))};f.once(u,"load",l.hitch(this,B,0));return n.promise},_buildAnimationSourceUrl:function(a,b,c){return/.js$/i.test(a)?z.toUrl(this.baseUrl)+"animLoader.html?anim\x3d"+a+"\x26path\x3d"+b+"\x26gelIndex\x3d"+c:b+"/"+a},_decodeAttributeGroup:function(a,b,c){var f="",d="";a=a.attribute;for(var g=Object.keys(a),k=g.length-
1;0<=k;--k){var q=a[g[k]],f=q.variable,d=q.value;q.hasOwnProperty("type")&&("color"!==q.type||/^#([a-f0-9]{2}){3}$/i.test(d)||(/^([a-f0-9]{2}){3}$/i.test(d)?d="#"+d:/^0x([a-f0-9]{2}){3}/i.test(d)&&(d=d.replace(/(0x)/,"#"))),"bool"===q.type&&(d="true"==d?!0:!1),"number"===q.type.toLowerCase()&&(d=Number(d)));b[c][f]=d}},applyCustomAttibutes:function(a,b){if(b.getCustomAttributes){var c=b.getCustomAttributes();if(null!==c&&c.hasOwnProperty("attribute_group"))for(var c=c.attribute_group,f=c.length-1;0<=
f;--f){var d=c[f];d.hasOwnProperty("attribute")&&this._decodeAttributeGroup(d,a,0)}}},addUniqueProperties:function(a,b){Object.keys(b).forEach(l.hitch(this,function(c){"undefined"===typeof a[c]&&(a[0][c]=b[c])}))},removeAnimation:function(b){var c;c=this._animsObj[b];if(null!=c&&c.ready){try{c.w.destroy(),a.destroy(c.f),a.destroy(c.n)}catch(B){}delete this._animsObj[b];delete this._animationsInteractiveArea[b]}},getElementValues:function(a,b){var c=this._animsObj[a];return null!=c&&c.ready?c.w.getGroupElements():
{}},setElementValues:function(a,b,c){var f=this._animsObj[a];f&&(f.gifHandle?this._setGifValues(a,b,c):this._setAnimationValue(a,b,c))},_setAnimationValue:function(a,b,c){var f=[],d=this._animsObj[a];null!=d&&d.ready&&(t.set(d.n,{left:b.x+"%",top:b.y+"%",width:b.width+"%",height:b.height+"%"}),this._resizeAnimation(a,b),b.groupElementIndex=a,f.push(b),this._setAnimationObjectData(c,a,f),this.applyCustomAttibutes(f,c[a]),this.addUniqueProperties(f,c[a]),d.objs=f,this._sendGroupElements(d,f))},_setGifValues:function(a,
b,c){c=c[a];a=this._animsObj[a];var f=0;b.hasOwnProperty("strMSString")?(f=b.strMSString.split(";"),f=Math.max(f.indexOf(b.strValue),0)):(f=a.gifHandle.get_length(),f=this._calcGifFramePos(Number(b.gValue),f,b.gRangeLo,b.gRangeHi));switch(b.animationType){default:case 0:b.hasOwnProperty("strMSString")?0<f?0===a.gifHandle.get_current_frame()&&(a.gifHandle.move_to(1),a.gifHandle.play()):(a.gifHandle.pause(),a.gifHandle.move_to(0)):(b=Number(b.gValue),0===b||1==c.useLimits&&b<c.lowLimit||0==c.useLimits&&
0>b?(a.gifHandle.pause(),a.gifHandle.move_to(0)):0===a.gifHandle.get_current_frame()&&(a.gifHandle.move_to(1),a.gifHandle.play()));break;case 1:a.gifHandle.pause(),a.gifHandle.move_to(f);case 2:}},_calcGifFramePos:function(a,b,c,f){if(a>=f)return b-1;if(a<c)return 0;f=(f-c)/b;c+=f;for(var d=0;d<b&&!(c>=a);d++)c+=f;return d},_sendGroupElements:function(a,b){a.w.gels=b;a.w.setGroupElements(b);a.w.UpdateData()},_setAnimationObjectData:function(a,b,c){var f=null,d=-1;if(a[b].isFlashAnimation(a[b].group.origPoint)||
a[b].isHTMLAnimationOldFormat(a[b].group.origPoint))a[b].groupElements||(a[b].groupElements=[]),0===a[b].groupElements.length&&(a[b].groupElements.push(b),a[b].groupElementsLinks=[]);if(a[b].groupElements instanceof Array){var g=null,k=null,q=null;"undefined"!==typeof a[b].GroupElementsLocations&&(g=a[b].GroupElementsLocations.split(";"));"undefined"!==typeof a[b].GroupElementsPurpose&&(k=a[b].GroupElementsPurpose.split(","));"undefined"!==typeof a[b].GroupElementsDisplayNames&&(q=a[b].GroupElementsDisplayNames);
for(var n=0;n<a[b].groupElements.length;n++)d=Number(a[b].groupElements[n]),-1<d?(f=l.mixin({},a[d].flashObject),null!=f&&(f.groupElementIndex=d,f.groupElementLinkIndex=a[b].groupElementsLinks[n],null!==g&&(f.groupElementLocation=g[n]),null!==k&&(f.groupElementPurpose=k[n]),null!==q&&(f.groupElementDisplayName=q[n])),a[d].isEnhanced&&a[d].chartItems&&0<a[d].chartItems.length?this._setTrendlogAnimationData(a[d],c,f):c.push(f)):c.push(void 0)}},_setTrendlogAnimationData:function(a,b,c){for(var f=0;f<
a.chartItems.length;f++){var d=l.mixin({},c),g=a.mainController;d.Units=a.chartItems[f].unit?a.chartItems[f].unit:"";var k=d,q=a.chartItems[f],n=/^(\d+)\D+.*/,h="",t=null;q.name&&(h=null!==(t=n.exec(q.mnemonic))&&Number(t[1])!==g?"{"+t[1]+"}"+q.name:q.name);k.strName=h;d.gValue=[];g=!1;for(k=0;k<a.chartItems[f].data.length;k++)null!=a.chartItems[f].data[k]&&null!=a.chartItems[f].data[k].x&&(g=x.formatUTCDateToAny(new Date(a.chartItems[f].data[k].x),"yyyy/MM/dd HH:mm:ss"),d.gValue.push({x:g,y:null!=
a.chartItems[f].data[k].y?a.chartItems[f].data[k].y:0}),g=!0);g&&b.push(d)}},_updateCanvas:function(){var a=this._getNodeDimensions(this.parentNode);this.c.getContext("2d").drawImage(this._c,0,0,a.w,a.h)},_dataUpdated:function(a){var b;"length"in a||(a=[a]);var c=l.hitch(this,function(){for(var a in this._grpElsMods)b=this._grpElsMods[a],u.publish("groupElementModified",b.groupElementIndex,b);this._grpElsMods={}});p.forEach(a,function(a){this._grpElsMods[a.groupElementIndex]=a},this);null==this._grpElsModsTimer?
(this._grpElsModsPending=0,c(),this._grpElsModsTimer=setTimeout(l.hitch(this,function(){this._grpElsModsPending&&c();this._grpElsModsTimer=null}),1E3)):this._grpElsModsPending++},_linkTouched:function(a){u.publish("groupLinks",a)},_animationMouseOver:function(a){u.publish("animationMouseOver",a)},_updateAnimationInteractiveArea:function(a,b){this._animationsInteractiveArea[a]=b},replaceColour:function(a,b,c,f,d){var g=a.index;"undefined"===typeof this._replaceColourObject[a.index]?(d=a.dynamicColourLocations?
!0:!1,this._replaceColourObject[a.index]={x:b,y:c,colour:f,locations:a.dynamicColourLocations||[],locationSearchComplete:d,element:a},d?this._doReplaceColour(this._replaceColourObject[g]):this._replaceColorTimer||(this._replaceColorTimer=window.setInterval(l.hitch(this,this._checkReplaceColorObjects),1))):this._replaceColourObject[g].locationSearchComplete&&(d||this._coloursChanged(g,b,c,f,this._replaceColourObject)||this._workerNeedsData(a))?(l.mixin(this._replaceColourObject[g],{x:b,y:c,colour:f}),
this._doReplaceColour(this._replaceColourObject[g])):this._replaceColourObject[g].locations&&(b="","undefined"!==typeof this._replaceColourObject[g].element.titleText&&(b=this._replaceColourObject[g].element.titleText),this._createWorkerManager(),a.canEdit&&this._workerManager.addData({locations:this._replaceColourObject[g].locations,index:this._replaceColourObject[g].element.index,title:b,type:"colourreplace"}))},_checkReplaceColorObjects:function(){var a=p.some(Object.keys(this._replaceColourObject),
function(a){if(this._replaceColourObject[a].locationSearchComplete)return!1;this._doReplaceColour(this._replaceColourObject[a]);return!0},this),a=p.some(Object.keys(this._replaceColourObject),function(a){return!this._replaceColourObject[a].locationSearchComplete},this);!a&&this._replaceColorTimer&&(window.clearInterval(this._replaceColorTimer),this._replaceColorTimer=null)},_clearDrawTimeout:function(){this._drawTimeout&&(window.clearTimeout(this._drawTimeout),this._drawTimeout=null)},_doReplaceColour:function(a){if(this.rawImageData){y.replaceColour(this._c2d,
a,this.rawImageData);n.add(this.bi,"hidden");if(a.element.canEdit&&(this._createWorkerManager(),a.locations)){var b="";"undefined"!==typeof a.element.titleText&&""!==a.element.titleText?b=a.element.titleText:"undefined"!==typeof a.element.hyperlink&&(b="Go to "+a.element.hyperlink);a.element.canEdit&&this._workerManager.addData({locations:a.locations,index:a.element.index,title:b,type:"colourreplace"})}this._clearDrawTimeout();this._drawTimeout=window.setTimeout(l.hitch(this,this._updateCanvas),10)}},
_doFloodFill:function(a){if(this.rawImageData){y.floodFill(this._c2d,a,this.rawImageData);n.add(this.bi,"hidden");if(a.element.canEdit&&(this._createWorkerManager(),a.locations)){var b="";"undefined"!==typeof a.element.titleText&&(b=a.element.titleText);this._workerManager.addData({locations:a.locations,index:a.element.index,title:b,type:"floodfill"})}this._clearDrawTimeout();this._drawTimeout=window.setTimeout(l.hitch(this,this._updateCanvas),10)}},_coloursChanged:function(a,b,c,f,d){a=d[a];d=!1;
if(a.x!==b||a.y!==c)d=!0;if(a.colour.red!==f.red||a.colour.green!==f.green||a.colour.blue!==f.blue||a.colour.alpha!==f.alpha)d=!0;return d},_createWorkerManager:function(){null===this._workerManager&&(this._workerManager=new v({width:this._c2d.canvas.width,height:this._c2d.canvas.height,canvas:this.c,workerPath:z.toUrl("rc/webworkers/checkInLocations.js")}),this.own(f(this.c,[w.out],l.hitch(this,function(){this._workerManager.removeCursor()})),f(this.c,[w.press,w.move],l.hitch(this._workerManager,
this._workerManager.displayCursor,this.c)),f(this._workerManager,"elementClicked",l.hitch(this,this.onGroupElementClicked))))},floodFill:function(a,b,c,f,d){var g=a.index;"undefined"===typeof this._floodFillsObj[g]?(this._floodFillsObj[g]={x:b,y:c,colour:f,locations:[],element:a},this._doFloodFill(this._floodFillsObj[g])):d||this._coloursChanged(g,b,c,f,this._floodFillsObj)?(l.mixin(this._floodFillsObj[g],{x:b,y:c,colour:f}),this._doFloodFill(this._floodFillsObj[g])):this._floodFillsObj[g].element.canEdit&&
(this._createWorkerManager(),this._floodFillsObj[g].locations&&(a="","undefined"!==typeof this._floodFillsObj[g].element.titleText&&(a=this._floodFillsObj[g].element.titleText),this._workerManager.addData({locations:this._floodFillsObj[g].locations,index:this._floodFillsObj[g].element.index,title:a,type:"floodfill"})))},removeFloodFill:function(){this.bi&&0!==Object.keys(this._floodFillsObj).length&&(Object.keys(this._floodFillsObj).forEach(l.hitch(this,function(a){this._floodFillsObj[a].colour.alpha=
0})),this.resize(),this._floodFillsObj={})},removeReplaceColour:function(){this.bi&&0!==Object.keys(this._replaceColourObject).length&&(Object.keys(this._replaceColourObject).forEach(l.hitch(this,function(a){delete this._replaceColourObject[a]})),this._replaceColourObject={clear:{x:0,y:0,colour:{red:0,green:0,blue:0,alpha:0},locations:[]}},this.resize(),this._replaceColourObject={})},getBackgroundColor:function(a,b){},onLoadAnimation:function(){this.emit("loadAnimation",null)},onErrorAnimation:function(){this.emit("errorAnimation",
null)},onLoad:function(){this.emit("load",null)},onGroupElementLoadError:function(a){this.emit("groupElementLoadError",a)},onGroupElementModified:function(a,b){this.emit("groupElementModified",a,b)},onGroupElementClicked:function(a,b){this.emit("groupElementClicked",{index:a,clickEvent:b})},_workerNeedsData:function(a){return a.canEdit?null===this._workerManager||!this._workerManager.hasData(a.index):!1},destroy:function(){var b;this.removeReplaceColour();p.forEach(this._pconnects,function(a){a.remove()},
this);p.forEach(this._pconnectsTmp,function(a){a.remove()},this);for(b in this._animsObj)this.removeAnimation(b);this._replaceColorTimer&&(window.clearInterval(this._replaceColorTimer),this._replaceColorTimer=null);this._resizeImageTimer&&(window.clearInterval(this._resizeImageTimer),this._resizeImageTimer=null);this._resizeTimeout&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=null);null!==this._workerManager&&(this._workerManager.destroyRecursive(),this._workerManager=null);this._clearDrawTimeout();
y.reset();a.destroy(this.c);a.destroy(this._c);delete this.c;delete this._c;delete this.bi;delete this._floodFillsObj;delete this._replaceColourObject;delete this.rawImage;delete this.rawImageData;this.inherited(arguments)}})})},"rc/util/html/canvas":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(r,p){return new (r("rc/util/html/canvas",null,{DefaultAlphaValue:255,tolerance:8,_contextImageData:null,_drawTimeout:null,reset:function(){this._contextImageData=null;this._cancelDrawTimeout()},
setPixelColour:function(m,l){this._contextImageData.data[m]=l.red;this._contextImageData.data[m+1]=l.green;this._contextImageData.data[m+2]=l.blue;this._contextImageData.data[m+3]=l.alpha},colourMatchTolerance:function(m,l){var h=this._contextImageData.data[m],c=this._contextImageData.data[m+1],g=this._contextImageData.data[m+2],d=this._contextImageData.data[m+3];return h>=l.red.min&&h<=l.red.max&&c>=l.green.min&&c<=l.green.max&&g>=l.blue.min&&g<=l.blue.max&&d===l.alpha},floodFill:function(m,l,h){var c=
l.colour;l.locations||(l.locations=[]);null===this._contextImageData&&(this._contextImageData=m.getImageData(0,0,h.width,h.height));0===l.locations.length?this._doInitialFloodFill(m,c,l):this._doStoredFloodFill(m,c,l.locations)},getColourBounds:function(m,l,h,c){c={red:{min:0,max:255},green:{min:0,max:255},blue:{min:0,max:255},alpha:c||this.DefaultAlphaValue};c.red.min=Math.max(m-this.tolerance,0);c.red.max=Math.min(m+this.tolerance,255);c.green.min=Math.max(l-this.tolerance,0);c.green.max=Math.min(l+
this.tolerance,255);c.blue.min=Math.max(h-this.tolerance,0);c.blue.max=Math.min(h+this.tolerance,255);return c},replaceColour:function(m,l,h){var c=m.canvas.width,g=m.canvas.height,d=l.colour;null===this._contextImageData&&(this._contextImageData=m.getImageData(0,0,c,g));if(0!==d.alpha)if(l.locationSearchComplete)this._updateImageData(m,l.locations,d);else{l.locations||(l.locations=[]);for(var c=l.y*c+l.x<<2,c=this.getColourBounds(this._contextImageData.data[c],this._contextImageData.data[c+1],this._contextImageData.data[c+
2],this._contextImageData.data[c+3]),g=!0,n=!1,a=0;a<h.data.length;a+=4)this.colourMatchTolerance(a,c)?(this.setPixelColour(a,d),g&&(l.locations.push(a),g=!1,n=!0)):n&&(l.locations.push(a),g=!0,n=!1);a>=h.data.length&&(l.locationSearchComplete=!0,!0===n&&l.locations.push(a));this._cancelDrawTimeout();this._drawTimeout=window.setTimeout(p.hitch(this,this._drawToCanvas,m),10)}else this._clearColours(),this._drawToCanvas(m)},_cancelDrawTimeout:function(){null!==this._drawTimeout&&(window.clearTimeout(this._drawTimeout),
this._drawTimeout=null)},_clearColours:function(){for(var m=this._contextImageData.data.length-1;0<=m;--m)this._contextImageData.data[m]=0},_drawToCanvas:function(m){m.putImageData(this._contextImageData,0,0)},_doInitialFloodFill:function(m,l,h){for(var c=Math.floor(h.x),g=Math.floor(h.y),d=m.canvas.width,n=m.canvas.height,a=g*d+c<<2,b=this.getColourBounds(this._contextImageData.data[a],this._contextImageData.data[a+1],this._contextImageData.data[a+2],this._contextImageData.data[a+3]),t=[[c,g]],g=
[],k={};0<t.length;)g=t.pop(),c=g[0],g=g[1],0>c||c>=d||0>g||g>=n||(a=g*d+c<<2,this.colourMatchTolerance(a,b)&&(this.setPixelColour(a,l),h.locations.push(a),k[a>>2]=1,"undefined"===typeof k[g*d+(c+1)]&&c+1<d&&t.push([c+1,g]),"undefined"===typeof k[g*d+(c-1)]&&0<c&&t.push([c-1,g]),"undefined"===typeof k[(g+1)*d+c]&&g+1<n&&t.push([c,g+1]),"undefined"===typeof k[(g-1)*d+c]&&0<g&&t.push([c,g-1])));m.putImageData(this._contextImageData,0,0);h.locations=h.locations.sort(function(a,b){return a-b})},_doStoredFloodFill:function(m,
l,h){for(var c=0,g=0;g<h.length;++g)c=h[g],this.setPixelColour(c,l);m.putImageData(this._contextImageData,0,0)},_updateImageData:function(m,l,h){for(var c=0,g=0;g<l.length;g+=2)for(c=l[g];c<l[g+1];)this.setPixelColour(c,h),c+=4;this._cancelDrawTimeout();this._drawTimeout=window.setTimeout(p.hitch(this,this._drawToCanvas,m),10)}}))})},"rc/reliable/_group/io/WorkerManager":function(){define(["dijit/_Widget","dojo/_base/declare","dojo/_base/lang","dojo/on"],function(r,p,m,l){return p("rc/reliable/_group/io/WorkerManager",
r,{width:0,height:0,canvas:null,workerPath:null,_indexes:null,_onClickHandle:null,_webWorker:null,postCreate:function(){this.inherited(arguments);this._indexes=[];null!==this.workerPath&&(this._webWorker=new Worker(this.workerPath),this._webWorker.onmessage=m.hitch(this,this.setCursor))},addData:function(h){this._webWorker.postMessage({action:"addData",data:h});this._indexes.push(h.index)},displayCursor:function(h,c){var g=this._getLinearPosition(c.layerX,c.layerY);this._webWorker.postMessage({action:"checkLocation",
linearPosition:g})},hasData:function(h){return this._indexes.includes(h)},removeCursor:function(){null!==this.canvas&&(document.body.style.cursor="default",this.canvas.title="")},setCursor:function(h){null!==this._onClickHandle&&(this._onClickHandle.remove(),this._onClickHandle=null);""!==h.data.index?h.data.clickEvent?(h.data.clickEvent.currentTarget={},this.onElementClicked(h.data.index,h.data.clickEvent)):(document.body.style.cursor="pointer",this.canvas.title=h.data.title,this._onClickHandle=
l.once(this.canvas,"click",m.hitch(this,this.onElementClicked,h.data.index)),this.own(this._onClickHandle)):this.removeCursor()},onElementClicked:function(h){},_getLinearPosition:function(h,c){var g=this.height/this.canvas.height;h=Math.round(this.width/this.canvas.width*h);c=Math.round(c*g);return c*this.width+h<<2},destroy:function(){this.removeCursor();this._webWorker.terminate();this._webWorker=null;this.inherited(arguments)}})})},"libgif-js/libgif":function(){(function(r,p){"function"===typeof define&&
define.amd?define([],p):"object"===typeof exports?module.exports=p():r.SuperGif=p()})(this,function(){var r=function(c){return c.reduce(function(c,d){return 2*c+d},0)},p=function(c){for(var g=[],d=7;0<=d;d--)g.push(!!(c&1<<d));return g},m=function(c){this.data=c;this.len=this.data.length;this.pos=0;this.readByte=function(){if(this.pos>=this.data.length)throw Error("Attempted to read past end of stream.");return c instanceof Uint8Array?c[this.pos++]:c.charCodeAt(this.pos++)&255};this.readBytes=function(c){for(var d=
[],g=0;g<c;g++)d.push(this.readByte());return d};this.read=function(c){for(var d="",g=0;g<c;g++)d+=String.fromCharCode(this.readByte());return d};this.readUnsigned=function(){var c=this.readBytes(2);return(c[1]<<8)+c[0]}},l=function(c,g){for(var d=0,n=function(a){for(var b=0,c=0;c<a;c++)g.charCodeAt(d>>3)&1<<(d&7)&&(b|=1<<c),d++;return b},a=[],b=1<<c,h=b+1,k=c+1,q=[],f=function(){q=[];k=c+1;for(var a=0;a<b;a++)q[a]=[a];q[b]=[];q[h]=null},l,m;;)if(m=l,l=n(k),l===b)f();else{if(l===h)break;if(l<q.length)m!==
b&&q.push(q[m].concat(q[l][0]));else{if(l!==q.length)throw Error("Invalid LZW code.");q.push(q[m].concat(q[m][0]))}a.push.apply(a,q[l]);q.length===1<<k&&12>k&&k++}return a},h=function(c,g){g||(g={});var d=function(a){for(var b=[],d=0;d<a;d++)b.push(c.readBytes(3));return b},n=function(){var a,b;b="";do a=c.readByte(),b+=c.read(a);while(0!==a);return b},a=function(a){var b=function(a){c.readByte();var b=p(c.readByte());a.reserved=b.splice(0,3);a.disposalMethod=r(b.splice(0,3));a.userInput=b.shift();
a.transparencyGiven=b.shift();a.delayTime=c.readUnsigned();a.transparencyIndex=c.readByte();a.terminator=c.readByte();g.gce&&g.gce(a)},d=function(a){a.comment=n();g.com&&g.com(a)},f=function(a){c.readByte();a.ptHeader=c.readBytes(12);a.ptData=n();g.pte&&g.pte(a)},h=function(a){var b=function(a){c.readByte();a.unknown=c.readByte();a.iterations=c.readUnsigned();a.terminator=c.readByte();g.app&&g.app.NETSCAPE&&g.app.NETSCAPE(a)},f=function(a){a.appData=n();g.app&&g.app[a.identifier]&&g.app[a.identifier](a)};
c.readByte();a.identifier=c.read(8);a.authCode=c.read(3);switch(a.identifier){case "NETSCAPE":b(a);break;default:f(a)}},l=function(a){a.data=n();g.unknown&&g.unknown(a)};a.label=c.readByte();switch(a.label){case 249:a.extType="gce";b(a);break;case 254:a.extType="com";d(a);break;case 1:a.extType="pte";f(a);break;case 255:a.extType="app";h(a);break;default:a.extType="unknown",l(a)}},b=function(){var h={};h.sentinel=c.readByte();switch(String.fromCharCode(h.sentinel)){case "!":h.type="ext";a(h);break;
case ",":h.type="img";h.leftPos=c.readUnsigned();h.topPos=c.readUnsigned();h.width=c.readUnsigned();h.height=c.readUnsigned();var k=p(c.readByte());h.lctFlag=k.shift();h.interlaced=k.shift();h.sorted=k.shift();h.reserved=k.splice(0,2);h.lctSize=r(k.splice(0,3));h.lctFlag&&(h.lct=d(1<<h.lctSize+1));h.lzwMinCodeSize=c.readByte();k=n();h.pixels=l(h.lzwMinCodeSize,k);if(h.interlaced){for(var k=h.pixels,q=h.width,f=Array(k.length),m=k.length/q,w=[0,4,2,1],z=[8,8,4,2],x=0,y=0;4>y;y++)for(var v=w[y];v<m;v+=
z[y]){var A=v,C=k.slice(x*q,(x+1)*q);f.splice.apply(f,[A*q,q].concat(C));x++}h.pixels=f}g.img&&g.img(h);break;case ";":h.type="eof";g.eof&&g.eof(h);break;default:throw Error("Unknown block: 0x"+h.sentinel.toString(16));}"eof"!==h.type&&setTimeout(b,0)};(function(){var a={};a.sig=c.read(3);a.ver=c.read(3);if("GIF"!==a.sig)throw Error("Not a GIF file.");a.width=c.readUnsigned();a.height=c.readUnsigned();var b=p(c.readByte());a.gctFlag=b.shift();a.colorRes=r(b.splice(0,3));a.sorted=b.shift();a.gctSize=
r(b.splice(0,3));a.bgColor=c.readByte();a.pixelAspectRatio=c.readByte();a.gctFlag&&(a.gct=d(1<<a.gctSize+1));g.hdr&&g.hdr(a)})();setTimeout(b,0)};return function(c){var g={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null},d;for(d in c)g[d]=c[d];g.vp_w&&g.vp_h&&(g.is_vp=!0);var n,a,b=null,l=!1,k=null,q=null,f=null,u=null,p=null,r=null,x=null,y=!0,v=!1,A=[],C=[],E=g.gif;"undefined"==typeof g.auto_play&&(g.auto_play=!E.getAttribute("rel:auto_play")||"1"==E.getAttribute("rel:auto_play"));var B=g.hasOwnProperty("on_end")?
g.on_end:null,D=g.hasOwnProperty("loop_delay")?g.loop_delay:0,F=g.hasOwnProperty("loop_mode")?g.loop_mode:"auto",H=g.hasOwnProperty("draw_while_loading")?g.draw_while_loading:!0,J=H?g.hasOwnProperty("show_progress_bar")?g.show_progress_bar:!0:!1,G=g.hasOwnProperty("progressbar_height")?g.progressbar_height:25,I=g.hasOwnProperty("progressbar_background_color")?g.progressbar_background_color:"rgba(255,255,255,0.4)",K=g.hasOwnProperty("progressbar_foreground_color")?g.progressbar_foreground_color:"rgba(255,0,22,.8)",
L=function(){q=k=null;p=f;r=f=null},M=function(){try{h(n,S)}catch(ca){Q("parse")}},O=function(a,b){U.width=a*N();U.height=b*N();da.style.minWidth=a*N()+"px";Y.width=a;Y.height=b;Y.style.width=a+"px";Y.style.height=b+"px";Y.getContext("2d").setTransform(1,0,0,1,0,0)},P=function(a,b,c){if(c&&J){c=G;var f,d;g.is_vp?v?(d=(g.vp_t+g.vp_h-c)/N(),c/=N(),f=g.vp_l/N(),a=f+a/b*(g.vp_w/N()),b=U.width/N()):(d=g.vp_t+g.vp_h-c,f=g.vp_l,a=f+a/b*g.vp_w,b=U.width):(d=(U.height-c)/(v?N():1),a=a/b*U.width/(v?N():1),
b=U.width/(v?N():1),c/=v?N():1);W.fillStyle=I;W.fillRect(a,d,b-a,c);W.fillStyle=K;W.fillRect(0,d,a,c)}},Q=function(c){b=c;a={width:E.width,height:E.height};A=[];W.fillStyle="black";W.fillRect(0,0,g.c_w?g.c_w:a.width,g.c_h?g.c_h:a.height);W.strokeStyle="red";W.lineWidth=3;W.moveTo(0,0);W.lineTo(g.c_w?g.c_w:a.width,g.c_h?g.c_h:a.height);W.moveTo(0,g.c_h?g.c_h:a.height);W.lineTo(g.c_w?g.c_w:a.width,0);W.stroke()},T=function(){r&&(A.push({data:r.getImageData(0,0,a.width,a.height),delay:q}),C.push({x:0,
y:0}))},R=function(){var a=-1,c=0,f=function(b){a+=b;k()},d=function(){var b=!1,d=function(){null!==B&&B(E);c++;!1!==F||0>c?g():y=b=!1},g=function(){if(b=y){f(1);var c=10*A[a].delay;c||(c=100);0===(a+1+A.length)%A.length?(c+=D,setTimeout(d,c)):setTimeout(g,c)}};return function(){b||setTimeout(g,0)}}(),k=function(){var b;a=parseInt(a,10);a>A.length-1&&(a=0);0>a&&(a=0);b=C[a];Y.getContext("2d").putImageData(A[a].data,b.x,b.y);W.globalCompositeOperation="copy";W.drawImage(Y,0,0)};return{init:function(){b||
(g.c_w&&g.c_h||W.scale(N(),N()),g.auto_play?d():(a=0,k()))},step:d,play:function(){y=!0;d()},pause:function(){y=!1},playing:y,move_relative:f,current_frame:function(){return a},length:function(){return A.length},move_to:function(b){a=b;k()}}}();c=function(){};d=function(a,b){return function(c){a(c);P(n.pos,n.data.length,b)}};var S={hdr:d(function(b){a=b;O(a.width,a.height)}),gce:d(function(a){T();L();k=a.transparencyGiven?a.transparencyIndex:null;q=a.delayTime;f=a.disposalMethod}),com:d(c),app:{NETSCAPE:d(c)},
img:d(function(b){r||(r=Y.getContext("2d"));var c=A.length,f=b.lctFlag?b.lct:a.gct;0<c&&(3===p?null!==u?r.putImageData(A[u].data,0,0):r.clearRect(x.leftPos,x.topPos,x.width,x.height):u=c-1,2===p&&r.clearRect(x.leftPos,x.topPos,x.width,x.height));var d=r.getImageData(b.leftPos,b.topPos,b.width,b.height);b.pixels.forEach(function(a,b){a!==k&&(d.data[4*b+0]=f[a][0],d.data[4*b+1]=f[a][1],d.data[4*b+2]=f[a][2],d.data[4*b+3]=255)});r.putImageData(d,b.leftPos,b.topPos);v||(W.scale(N(),N()),v=!0);H&&(W.drawImage(Y,
0,0),H=g.auto_play);x=b},!0),eof:function(b){T();P(n.pos,n.data.length,!1);g.c_w&&g.c_h||(U.width=a.width*N(),U.height=a.height*N());R.init();l=!1;X&&X(E)}},aa=function(){var a=E.parentNode,b=document.createElement("div");U=document.createElement("canvas");W=U.getContext("2d");da=document.createElement("div");Y=document.createElement("canvas");b.width=U.width=E.width;b.height=U.height=E.height;da.style.minWidth=E.width+"px";b.className="jsgif";da.className="jsgif_toolbar";b.appendChild(U);b.appendChild(da);
a.insertBefore(b,E);a.removeChild(E);g.c_w&&g.c_h&&O(g.c_w,g.c_h);V=!0},N=function(){return g.max_width&&a&&a.width>g.max_width?g.max_width/a.width:1},U,W,da,Y,V=!1,X=!1,Z=function(a){if(l)return!1;X=a?a:!1;l=!0;A=[];L();x=r=p=u=null;return!0};return{play:R.play,pause:R.pause,move_relative:R.move_relative,move_to:R.move_to,get_playing:function(){return y},get_canvas:function(){return U},get_canvas_scale:function(){return N()},get_loading:function(){return l},get_auto_play:function(){return g.auto_play},
get_length:function(){return R.length()},get_current_frame:function(){return R.current_frame()},load_url:function(a,b){if(Z(b)){var c=new XMLHttpRequest;c.open("GET",a,!0);"overrideMimeType"in c?c.overrideMimeType("text/plain; charset\x3dx-user-defined"):"responseType"in c?c.responseType="arraybuffer":c.setRequestHeader("Accept-Charset","x-user-defined");c.onloadstart=function(){V||aa()};c.onload=function(a){200!=this.status&&Q("xhr - response");"response"in this||(this.response=(new VBArray(this.responseText)).toArray().map(String.fromCharCode).join(""));
a=this.response;0<a.toString().indexOf("ArrayBuffer")&&(a=new Uint8Array(a));n=new m(a);setTimeout(M,0)};c.onprogress=function(a){a.lengthComputable&&P(a.loaded,a.total,!0)};c.onerror=function(){Q("xhr")};c.send()}},load:function(a){this.load_url(E.getAttribute("rel:animated_src")||E.src,a)},load_raw:function(a,b){Z(b)&&(V||aa(),n=new m(a),setTimeout(M,0))},set_frame_offset:function(a,b){C[a]?("undefined"!==typeof b.x&&(C[a].x=b.x),"undefined"!==typeof b.y&&(C[a].y=b.y)):C[a]=b}}}})},"rc/reliable/_group/io/GroupElements":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/Evented dojo/json dojo/on dojo/promise/all dojo/promise/Promise ./groupMapEntries/BACnetMapEntry ./groupMapEntries/RCPMapEntry ../GroupElement ../../../bacnet/enums ../../../bacnet/io/AnyPrimitive ../../../bacnet/io/Array ../../../bacnet/io/Error ../../../bacnet/io/List ../../../bacnet/io/Number ../../../bacnet/io/Object ../../../bacnet/io/ReliableGroupElement ../../../bacnet/io/ReliablePresentValueEnhanced ../../../bacnet/io/service/AtomicReadFile ../../../bacnet/io/service/ReadPropertyMultiple ../../../bacnet/io/util ../../../bacnet/property ../../../bacnet/unit ../../../sys/canim ../../../sys/enhgrp ../../../sys/grplc ../../../sys/job ../../../util/encoding/base64 ../../../util/pointObject".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M){return m("rc/reliable/_group/io/GroupElements",[r,g],{group:null,ioBkgnd:null,ges:null,gesHidden:null,pointsGroupedPerAPDU:null,_d:null,bacnetEnums:null,OVERHEAD_PER_OBJECT:7,OVERHEAD_PER_PROPERTY:5,OVERHEAD_PER_APDU:3,DEFAULT_APDU_SIZE:480,_bacElsIoQ:null,BACNET_PROPERTY_UPDATE_INTERVAL:5E3,_bpNextUpdate:0,_loadTrendDataTimer:null,_maxEHLoadAttempts:10,_defaultTrendTimer:2E4,_pointMap:null,animationElements:null,animationElementLinks:null,
constructor:function(){this._bacElsIoQ=[];this._pointMap={};this.animationElements=[];this.animationElementLinks=[]},clearPending:function(){this._bacElsIoQ=[];this._bpNextUpdate=0},destroyElementNodes:function(a){null!=a&&(null!=a.domNode&&(c.destroy(a.domNode),a.domNode=null,a.altNode=null,a.iconNode=null,a.textNode=null,a.imgNode=null,a.imgFrames=null),null!=this.ioBkgnd&&this.ioBkgnd.removeAnimation(a.index))},hasPriorityArray:function(a){return this._pointMap[a.pointName.device].noPriority||
!a.pointName.hasPriorityArray||!a.pointName.hasPriorityArray()||rc.sys.job.isSSC({device:a.psdDevice})&&1!==a.pointName.comType?!1:!0},isError:function(a){var b=!0;a.isInstanceOf&&(b=a.isInstanceOf(z));return b},load:function(a,b){var c=Date.now();c>=this._bpNextUpdate?(this._bpNextUpdate=c+this.BACNET_PROPERTY_UPDATE_INTERVAL,this.group=a,this.ioBkgnd=b,this._d=new h,0===this._bacElsIoQ.length?this._load():this.loadBacnet()):this.defer(l.hitch(this,this.load,a,b),c-this._bpNextUpdate);return this._d.promise},
loadBacnet:function(){if(this._bacElsIoQ&&this._bacElsIoQ.length){var a=this.ges[this._bacElsIoQ.pop()];this._canLoadBacnetPropReference(a)&&a.needToLoadProperty()?this.loadBacnetPropertyObj(a):a.property===f.propertyTypes.PROPID_PRESENT_VALUE&&this.loadBacnetElement(a)}else this.onLoad(this)},loadBacnetElement:function(b){var c=null,d=0,g=0,k=0,h=[],q=[],n=b.getDeviceId(),t=this._pointMap[n].effectiveAPDU,m=0,u=[];Object.values(this._pointMap[n]).forEach(l.hitch(this,function(a){isNaN(a)&&Object.values(a).forEach(l.hitch(this,
function(a){u.push(a)}))}));for(var v=[],p=0;p<u.length;++p)if(c=u[p].groupElements[0],void 0!==c&&!c.bacnetIoPending){var x=c.index;if(0===Object.values(u[p].properties).filter(function(a){return!1===a.isSet||!0===a.loadOnUpdate}).length)u[p].groupElements.forEach(l.hitch(this,function(a){a.property===f.propertyTypes.PROPID_PRESENT_VALUE&&this._removeEntryFromQueue(a)}));else if(this._canLoadBacnetPropReference(c)&&1==u[p].groupElements.length)this.loadBacnetPropertyObj(c);else if(u[p].groupElements.forEach(l.hitch(this,
function(a){a.property===f.propertyTypes.PROPID_PRESENT_VALUE&&this._removeEntryFromQueue(a)})),d=this._buildObjectPropertyList(u[p].properties,c),0!==d.pl.length)if(h.push(d),d=this._getObjectSize(c),d>t)this._forceSingleRead(c);else{0===m&&(m=x);void 0!==this.pointsGroupedPerAPDU[n]&&this.pointsGroupedPerAPDU[n].currentAPDUSize+d>this.pointsGroupedPerAPDU[n].effectiveAPDU&&(q=h.slice(k,h.length-1),v.push(this._readProperties(q,b.psdDevice,m)),k=h.length-1,m=x);for(;void 0!==this.pointsGroupedPerAPDU[n]&&
!this.pointsGroupedPerAPDU[n].hasOwnProperty(x)&&this.pointsGroupedPerAPDU[n].currentAPDUSize+d>this.pointsGroupedPerAPDU[n].effectiveAPDU;)n=c.psdDevice+"."+g++;void 0===this.pointsGroupedPerAPDU[n]&&(this.pointsGroupedPerAPDU[n]={effectiveAPDU:t,currentAPDUSize:0});this.pointsGroupedPerAPDU[n].currentAPDUSize+=d;this.pointsGroupedPerAPDU[n][x]=c}}q=h.slice(k,h.length);0<q.length&&v.push(this._readProperties(q,b.psdDevice,m));a(v).then(l.hitch(this,function(){this._loadNext()}))},loadBacnetPropertyObj:function(a){try{var c=
new h;this.own(c);var d=this._getEntryFromPointMapByGroupElement(a),g=d.groupElements.filter(function(b){return b.property===a.property&&b.arrayIdx===a.arrayIdx});if(0<g.length){g.forEach(l.hitch(this,this._removeEntryFromQueue));var k=g[0];if(-1<k.unknownProperties.indexOf(k.property))this._removeEntryFromQueue(a),this._loadNext();else{var q=k.pointName;k.pointName.type===f.objectTypes.OBJID_PP_RUNTIME_LOG&&(q=k.pointName.getBACnetObjectFromRuntime());k.bacnetPropObj?k.bacnetPropObj.set(k.property,
q,k.pointValue,k.arrayIdx,k.psdDevice):k.bacnetPropObj=new F(k.property,q,k.pointValue,k.arrayIdx,k.psdDevice);k.bacnetIoPending=!0;this._bacGeIdx=k.index;var n=k.bacnetPropObj.fetch(k.index);n instanceof b?n.always(l.hitch(this,function(a,b){b instanceof Error||"rc/bacnet/io/Error"===b.declaredClass?k.bacnetError=b:b.index=a;c.resolve(k)},k.index)):(null==n&&(k.bacnetPropObj=n),c.resolve(k));c.then(l.hitch(this,function(b){b.bacnetPropObj.propertyObject instanceof z?(b.bacnetError=b.bacnetPropObj.propertyObject,
(b.bacnetError.isUnknownProperty()||b.bacnetError.isInvalidTag())&&-1===b.unknownProperties.indexOf(b.property)&&b.unknownProperties.push(b.property)):b.bacnetError=null;g.forEach(l.hitch(this,function(a){a.unknownProperties=b.unknownProperties;a.bacnetError=b.bacnetError;a.bacnetIoPending=!1;d.updateProperty(a.property,{index:a.arrayIdx,value:{p:new y(a.property,f.primitiveTypes.ENUMERATED),i:-1<a.arrayIdx?new y(a.arrayIdx,f.primitiveTypes.ENUMERATED):-1,v:b.bacnetPropObj.propertyObject}})}));d.isChanged&&
d.groupElements.forEach(l.hitch(this,function(b,c){c.property===a.property&&(c.bacnetPropObj.updateValueFromValueObject(b.v),this.onLoadBacnetElement(c))},d.properties[a.property][a.arrayIdx]));this._loadNext()}))}}else this._removeEntryFromQueue(a),this._loadNext()}catch(N){console.error("rc.reliable._group.GroupElements.loadBacnetPropertyObj: error, gel, this",N,a,this)}},onDelete:function(a){this.emit("delete",a)},onError:function(a){this.emit("error",a)},onLoad:function(a){this.emit("load",a)},
onLoadElement:function(a){this.emit("loadElement",a)},onLoadBacnetElement:function(a){this.ges[a.index]=a;this.emit("loadBacnetElement",a)},onSaveElement:function(){this.emit("saveElement",null)},pointGrouped:function(a){for(var b in this.pointsGroupedPerAPDU)for(var c in this.pointsGroupedPerAPDU[b])if(c===a.toString())return!0;return!1},remove:function(a){null!=a&&(this.destroyElementNodes(a),delete this.ges[a.index])},removeAll:function(){for(var a in this.ges)this.remove(this.ges[a]);this.ges=
{};this._bpNextUpdate=0},saveElement:function(a){var b=L.encode(a.encode());return rc.xhr.request({gid:"GRP",type:"rcp",method:"POST",cmdObj:{dest:a.pointName.mainController,subt:a.pointName.subnetType,subd:a.pointName.subController,src:0,cmd:125,xl:0,xh:0,data:b,cnt:b.length},index:a.index,load:l.hitch(this,this.onSaveElement)})},_addDefaultProperties:function(a,b){var c=!1,d=b.pointName;if(this.group.isSuspendedUpdate)switch(a.addProperty(f.propertyTypes.PROPID_PRESENT_VALUE,{index:-1<b.arrayIdx?
b.arrayIdx:-1,value:{p:new y(f.propertyTypes.PROPID_PRESENT_VALUE,f.primitiveTypes.ENUMERATED),i:-1<b.arrayIdx?new y(b.arrayIdx,f.primitiveTypes.ENUMERATED):-1,v:new u}},!0,!0),d.type){case f.objectTypes.OBJID_ANALOG_INPUT:case f.objectTypes.OBJID_ANALOG_OUTPUT:"undefined"!==typeof b.unknownProperties&&-1!==b.unknownProperties.indexOf(f.propertyTypes.PROPID_UNITS)||a.addProperty(f.propertyTypes.PROPID_UNITS,{index:-1,value:{p:new y(f.propertyTypes.PROPID_UNITS,f.primitiveTypes.ENUMERATED),i:-1,v:new y(0,
f.primitiveTypes.ENUMERATED)}},!1,!0);break;case f.objectTypes.OBJID_ANALOG_VALUE:case f.objectTypes.OBJID_PROGRAM:case f.objectTypes.OBJID_ACCUMULATOR:case f.objectTypes.OBJID_PULSE_CONVERTER:"undefined"!==typeof b.unknownProperties&&-1!==b.unknownProperties.indexOf(f.propertyTypes.PROPID_UNITS)||a.addProperty(f.propertyTypes.PROPID_UNITS,{index:-1,value:{p:new y(f.propertyTypes.PROPID_UNITS,f.primitiveTypes.ENUMERATED),i:-1,v:new y(0,f.primitiveTypes.ENUMERATED)}},!1,!0);K.supportsOpenUnits(d)&&
("undefined"!==typeof b.unknownProperties&&-1!==b.unknownProperties.indexOf(f.propertyTypes.PROPID_PP_OPEN_UNIT)||a.addProperty(f.propertyTypes.PROPID_PP_OPEN_UNIT,{index:-1,value:{p:new y(f.propertyTypes.PROPID_PP_OPEN_UNIT,f.primitiveTypes.ENUMERATED),i:-1,v:new y(0,f.primitiveTypes.ENUMERATED)}},!1,!0));break;case f.objectTypes.OBJID_MULTI_STATE_INPUT:case f.objectTypes.OBJID_MULTI_STATE_OUTPUT:case f.objectTypes.OBJID_MULTI_STATE_VALUE:case f.objectTypes.OBJID_BINARY_INPUT:case f.objectTypes.OBJID_BINARY_OUTPUT:case f.objectTypes.OBJID_BINARY_VALUE:K.supportsOpenUnits(d)&&
("undefined"!==typeof b.unknownProperties&&-1!==b.unknownProperties.indexOf(f.propertyTypes.PROPID_PP_OPEN_UNIT)||a.addProperty(f.propertyTypes.PROPID_PP_OPEN_UNIT,{index:-1,value:{p:new y(f.propertyTypes.PROPID_PP_OPEN_UNIT,f.primitiveTypes.ENUMERATED),i:-1,v:new y(0,f.primitiveTypes.ENUMERATED)}},!1,!0),this.group.isSuspendedUpdate&&(this._addStateTextToRequiredProperties(d,a,b),c=!0))}b.hasEHProperty(b.EH_MANUAL)||!this.hasPriorityArray(b)||"undefined"!==typeof b.unknownProperties&&-1!==b.unknownProperties.indexOf(f.propertyTypes.PROPID_PRIORITY_ARRAY)||
a.addProperty(f.propertyTypes.PROPID_PRIORITY_ARRAY,{index:8,value:{p:new y(f.propertyTypes.PROPID_PRIORITY_ARRAY,f.primitiveTypes.ENUMERATED),i:new y(8,f.primitiveTypes.UNSIGNED_INTEGER),v:new u}},!0,!0);switch(d.type){case f.objectTypes.OBJID_ANALOG_INPUT:case f.objectTypes.OBJID_BINARY_INPUT:case f.objectTypes.OBJID_MULTI_STATE_INPUT:case f.objectTypes.OBJID_LOOP:case f.objectTypes.OBJID_PROGRAM:case f.objectTypes.OBJID_SCHEDULE:case f.objectTypes.OBJID_ACCUMULATOR:case f.objectTypes.OBJID_PULSE_CONVERTER:b.hasEHProperty(b.EH_MANUAL)||
"undefined"!==typeof b.unknownProperties&&-1!==b.unknownProperties.indexOf(f.propertyTypes.PROPID_OUT_OF_SERVICE)||a.addProperty(f.propertyTypes.PROPID_OUT_OF_SERVICE,{index:-1,value:{p:new y(f.propertyTypes.PROPID_OUT_OF_SERVICE,f.primitiveTypes.ENUMERATED),i:-1,v:new y(0,f.primitiveTypes.BINARY)}},!0,!0)}d.type===f.objectTypes.OBJID_SCHEDULE||null!==b.bacnetStateText&&void 0!==b.bacnetStateText||c||this._addStateTextToRequiredProperties(d,a,b);b.hasEHProperty(b.EH_STATUS)||!d.hasStatusFlags||!d.hasStatusFlags()||
"undefined"!==typeof b.unknownProperties&&-1!==b.unknownProperties.indexOf(f.propertyTypes.PROPID_STATUS_FLAGS)||a.addProperty(f.propertyTypes.PROPID_STATUS_FLAGS,{index:-1,value:{p:new y(f.propertyTypes.PROPID_STATUS_FLAGS,f.primitiveTypes.ENUMERATED),i:-1,v:new w([],f.primitiveTypes.BIT_STRING)}},!0,!0);!b.hasEHProperty(b.EH_UNITS)&&Number(b.group.deviceId)!==d.device&&142===d.type&&0<b.arrayIdx&&K.hasProprietarySupportBit(d,22)&&("undefined"===typeof b.unknownProperties||-1===b.unknownProperties.indexOf(f.propertyTypes.PROPID_UNITS))&&
a.addProperty(f.propertyTypes.PROPID_UNITS,{index:-1,value:{p:new y(f.propertyTypes.PROPID_UNITS,f.primitiveTypes.ENUMERATED),i:-1,v:new u}},!1,!0);return a},_addStateTextToRequiredProperties:function(a,b,c){a.isBinary&&a.isBinary()&&a.type!==f.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT?("undefined"!==typeof c.unknownProperties&&-1!==c.unknownProperties.indexOf(f.propertyTypes.PROPID_INACTIVE_TEXT)||b.addProperty(f.propertyTypes.PROPID_INACTIVE_TEXT,{index:-1,value:{p:new y(f.propertyTypes.PROPID_INACTIVE_TEXT,
f.primitiveTypes.ENUMERATED),i:-1,v:new w([],f.primitiveTypes.CHARACTER_STRING)}},!1,!0),"undefined"!==typeof c.unknownProperties&&-1!==c.unknownProperties.indexOf(f.propertyTypes.PROPID_ACTIVE_TEXT)||b.addProperty(f.propertyTypes.PROPID_ACTIVE_TEXT,{index:-1,value:{p:new y(f.propertyTypes.PROPID_ACTIVE_TEXT,f.primitiveTypes.ENUMERATED),i:-1,v:new w([],f.primitiveTypes.CHARACTER_STRING)}},!1,!0)):a.isMultistate&&a.isMultistate()&&("undefined"===typeof c.unknownProperties||-1===c.unknownProperties.indexOf(f.propertyTypes.PROPID_STATE_TEXT))&&
b.addProperty(f.propertyTypes.PROPID_STATE_TEXT,{index:-1,value:{p:new y(f.propertyTypes.PROPID_STATE_TEXT,f.primitiveTypes.ENUMERATED),i:-1,v:new x(new w([],f.primitiveTypes.CHARACTER_STRING))}},!1,!0)},_addGELToPointMap:function(a){!this._ignoreFromPointMap(a)||this.animationElements.includes(a.index)&&!this.animationElementLinks.includes(a.index)?this._addOrUpdatePointMapEntry(a):a.displayConfig===a.PT_TYPE_ANIMATION&&"undefined"!==typeof a.GroupElements&&"undefined"!==typeof a.GroupElementsLinks&&
(p.forEach(a.GroupElements.split(","),function(a){this.animationElements.push(Number(a))},this),p.forEach(a.GroupElementsLinks.split(","),function(a){this.animationElementLinks.push(Number(a))},this))},_addOrUpdatePointMapEntry:function(a){if(!(a.isKeyword||a.property===f.propertyTypes.PROPID_PRESENT_VALUE&&a.pointName.shouldIgnorePresentValueOnGroup())){var b=a.pointName,c=a.isBacnet;a.property===f.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME&&(b=b.getBACnetObjectFromRuntime(),c=!0);var d,g,q;c?(d=b.device.toString(),
g=b.type.toString(),b=b.instance.toString(),q=a.property.toString()):(d=b.toPanel().toString(),g=b.mainType.toString(),b=b.mainInstance.toString());"undefined"===typeof this._pointMap[d]&&(this._pointMap[d]={});d=this._pointMap[d];"undefined"===typeof d[g]&&(d[g]={});g=d[g];"undefined"===typeof g[b]&&(g[b]=c?new t({groupElements:[],isChanged:!0}):new k({groupElements:[],isChanged:!0}));d=0===g[b].groupElements.filter(function(b){return b.index===a.index}).length;if(c&&d)if(a.property===f.propertyTypes.PROPID_PRESENT_VALUE)a.isEnhanced&&
!this.group.isSuspendedUpdate?this.own(n.once(a,"elementLoaded",l.hitch(this,this._addDefaultProperties,g[b],a))):this._addDefaultProperties(g[b],a);else{a.bacnetPropObj=new F(a.property,a.pointName,a.pointValue,a.arrayIdx,a.psdDevice);if("undefined"===typeof a.bacnetPropObj.propertyObject)return;g[b].addProperty(q,{index:a.arrayIdx,value:{p:new y(a.property,f.primitiveTypes.ENUMERATED),i:-1<a.arrayIdx?new y(a.arrayIdx,f.primitiveTypes.ENUMERATED):-1,v:a.bacnetPropObj.propertyObject}},!0,!1)}d&&g[b].groupElements.push(a)}},
_addSecondaryObjectLinks:function(a,b,c){b.property===f.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE&&(a[b.mainPanel]||(a[b.mainPanel]={}),a[b.mainPanel][c]?a[b.mainPanel][c].elements.push(groupElement):a[b.mainPanel][c]={elements:[groupElement],o:new v(f.mnemonics.indexOf(b.objectType),b.instance),pl:[{p:new y(f.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE,f.primitiveTypes.ENUMERATED),i:-1,v:new v}]})},_buildObjectPropertyList:function(a,b){var c=b.pointName.getBACnetObjectFromRuntime(),f={o:new v(c.type,
c.instance),pl:[]};Object.keys(a).forEach(function(c){if(-1===b.unknownProperties.indexOf(Number(c))){var d=a[c];(!1===d.isSet||d.loadOnUpdate)&&d.isDefaultProperty&&Object.keys(d).forEach(function(a){isNaN(a)||f.pl.push(l.clone(d[a]))})}});0<f.pl.length&&(b.bacnetIoPending=!0);return f},_canLoadBacnetPropReference:function(a){return this.group.isSuspendedUpdate&&a.pointName.type===f.objectTypes.OBJID_PP_RUNTIME_LOG||a.isBacnet&&a.property!==f.propertyTypes.PROPID_PRESENT_VALUE?!0:!1},_createGroupElement:function(){return new q({group:this.group})},
_findHiddenElements:function(){this.gesHidden={};var a,b,c,f;for(a in this.ges)if(b=this.ges[a],b.isKeyword&&b.units===b.KW_MULTIPOINT){c=b.isEnhanced?b.getAnimationGroupElementsLinks():J.getGroupElementsLinks(this.group.origPoint,b.index);f=b.isEnhanced?b.getAnimationGroupElements():J.getGroupElements(this.group.origPoint,b.index);if("string"===typeof f)f=f.split(",");else if(!(f instanceof Array)){console.error(this.declaredClass+" - _onLoadElements(): Unsupported animated group elements object",
f);break}if(null==c)c=[],p.forEach(f,function(){c.push(-1)},this);else if("string"===typeof c)c=c.split(",");else if(!(c instanceof Array)){console.error(this.declaredClass+" - _onLoadElements(): Unsupported link object",c);break}for(var d=0;d<c.length;d++)this.gesHidden[c[d]]=1;for(d=0;d<f.length;d++)this.gesHidden[f[d]]=1;b.groupElementsLinks=c;b.groupElements=f}else this._isUnimplementedWorkSheet(b)&&(this.gesHidden[a]=1),b.groupElements=[],b.groupElementsLinks=[]},_forceSingleRead:function(a){var b=
this._buildObjectPropertyList(this._getEntryFromPointMapByGroupElement(a).properties,a),c=!1;if(this.pointGrouped(a.index))for(var f in this.pointsGroupedPerAPDU){for(var d in this.pointsGroupedPerAPDU[f])if(d===a.index.toString()){this.pointsGroupedPerAPDU[f].currentAPDU-=this._getObjectSize(a);delete this.pointsGroupedPerAPDU[f][d];c=!0;break}if(c)break}0===b.pl.length?a.bacnetIoPending=!1:(b=new B({device:a.psdDevice},[b],!0),b.index=a.index,rc.xhr.request({gid:"GRP",type:"bacnet",s:b,silentError:!0}).then(l.hitch(this,
function(a,b){a.bacnetIoPending=!1;this._onLoadBacnetElement(b)},a),l.hitch(this,function(a,b){var c=this._getEntryFromPointMapByGroupElement(a);"undefined"!==typeof b.classCode&&c.groupElements.forEach(l.hitch(this,function(a){a.bacnetIoPending=!1;a.bacnetError=b.classCode;this.onLoadBacnetElement(a)}))},a)))},_getEntryFromPointMapByDOP:function(a){var b=a.d.i.toString(),c=a.o.t.toString();a=a.o.i.toString();return"undefined"!==typeof this._pointMap[b]&&"undefined"!==typeof this._pointMap[b][c]&&
"undefined"!==typeof this._pointMap[b][c][a]?this._pointMap[b][c][a]:null},_getEntryFromPointMapByPointName:function(a){var b=a.toPanel().toString(),c=a.mainType.toString();a=a.mainInstance.toString();return"undefined"!==typeof this._pointMap[b]&&"undefined"!==typeof this._pointMap[b][c]&&"undefined"!==typeof this._pointMap[b][c][a]?this._pointMap[b][c][a]:null},_getEntryFromPointMapByGroupElement:function(a){var b=a.pointName,c=a.isBacnet;a.property===f.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME&&
(b=b.getBACnetObjectFromRuntime(),c=!0);c?(a=b.device.toString(),c=b.type.toString(),b=b.instance.toString()):(a=b.toPanel().toString(),c=b.mainType.toString(),b=b.mainInstance.toString());return"undefined"!==typeof this._pointMap[a]&&"undefined"!==typeof this._pointMap[a][c]&&"undefined"!==typeof this._pointMap[a][c][b]?this._pointMap[a][c][b]:null},_getFirstPendingPoint:function(){var a=null,b;for(b in this.ges)if(a=this.ges[b],a.hasOwnProperty("bacnetIoPending")&&a.bacnetIoPending)break;return a},
_getObjectSize:function(a){var b=a.pointName,c=D.getResponseSize(a.property)+this.OVERHEAD_PER_OBJECT+this.OVERHEAD_PER_PROPERTY;this.group.isSuspendedUpdate&&(c+=D.getResponseSize(f.propertyTypes.PROPID_UNITS)+this.OVERHEAD_PER_PROPERTY);!a.hasEHProperty(a.EH_MANUAL)&&this.hasPriorityArray(a)&&(c+=D.getResponseSize(f.propertyTypes.PROPID_PRIORITY_FOR_WRITING)+this.OVERHEAD_PER_PROPERTY);b.isBinary()&&b.type!==f.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT?(c+=D.getResponseSize(f.propertyTypes.PROPID_ACTIVE_TEXT)+
this.OVERHEAD_PER_PROPERTY,c+=D.getResponseSize(f.propertyTypes.PROPID_INACTIVE_TEXT)+this.OVERHEAD_PER_PROPERTY):b.isMultistate()&&(c+=D.getResponseSize(f.propertyTypes.PROPID_STATE_TEXT)+this.OVERHEAD_PER_PROPERTY);!a.hasEHProperty(a.EH_STATUS)&&b.hasStatusFlags()&&(c+=D.getResponseSize(f.propertyTypes.PROPID_STATUS_FLAGS)+this.OVERHEAD_PER_PROPERTY);!a.hasEHProperty(a.EH_UNITS)&&Number(a.group.deviceId)!==b.device&&142===b.type&&0<a.arrayIdx&&K.hasProprietarySupportBit(b,22)&&(c+=D.getResponseSize(f.propertyTypes.PROPID_UNITS)+
this.OVERHEAD_PER_PROPERTY);return c},_getPointsPerAPDUByPointIndex:function(a,b){var c=!1,f={deviceId:a,points:[]};if(this._canLoadBacnetPropReference(this.ges[b]))f.deviceId=-1,f.points=[this.ges[b]];else{for(var d in this.pointsGroupedPerAPDU)if(this.pointsGroupedPerAPDU[d].hasOwnProperty(b)){c=!0;f.deviceId=d;break}if(c)for(var g in this.pointsGroupedPerAPDU[f.deviceId])"effectiveAPDU"!==g&&"currentAPDUSize"!==g&&f.points.push(this.pointsGroupedPerAPDU[f.deviceId][g]);else f.deviceId=-1,f.points=
[this.ges[b]]}return f},_hasPropertiesToGet:function(a){var b=!1,c=a.pointName;if(!a.isBacnet||a.property!==f.propertyTypes.PROPID_PRESENT_VALUE&&!a.needToLoadProperty())return!1;if(this.group.isSuspendedUpdate&&a.pointName.type===f.objectTypes.OBJID_PP_RUNTIME_LOG||a.property!==f.propertyTypes.PROPID_PRESENT_VALUE)return!0;if(c.shouldIgnorePresentValueOnGroup())return!1;try{if(this.group.isSuspendedUpdate)return!0;!a.hasEHProperty(a.EH_MANUAL)&&this.hasPriorityArray(a)?b=!0:!a.bacnetStateText&&c.type!==
f.objectTypes.OBJID_SCHEDULE&&(c.isBinary&&c.isBinary()&&c.type!==f.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT||c.isMultistate&&c.isMultistate())?b=!0:!a.hasEHProperty(a.EH_STATUS)&&c.hasStatusFlags&&c.hasStatusFlags()?b=!0:!a.hasEHProperty(a.EH_UNITS)&&Number(a.group.deviceId)!==c.device&&142===c.type&&0<a.arrayIdx&&K.hasProprietarySupportBit(c,22)&&(b=!0)}catch(T){b=!1}return b},_ignoreFromPointMap:function(a){return a.isKeyword||a.property===f.propertyTypes.PROPID_PRESENT_VALUE&&a.pointName.shouldIgnorePresentValueOnGroup()?
!0:!1},_isUnimplementedWorkSheet:function(a){var b=!1;if(0>a.pointName.comInstance)switch(a.pointName.type){case f.objectTypes.OBJID_PP_RUNTIME_LOG:b=!1;break;default:b=9===a.pointName.mainType?!1:!0}return b},_isUnknownProperty:function(a){var b=!1;a instanceof z&&(b=a.isUnknownProperty());return b},_jobLoaded:function(a){if(this.group.isEnhancedGroup&&this.group.groupJSONFileExists)return G.needToLoad(this.group.groupJSONFile)||null===this.ges||0===Object.keys(this.ges).length?G.loadOnce(this.group.groupJSONFile).then(l.hitch(this,
this._onLoadElementsEnhancedGroup),l.hitch(this,this._onErrorElements)):this._loadEnhancedPresentValues(a,0),this._d.promise;if(this.group.isGlobalGroup){var b=[{o:new v(f.objectTypes.OBJID_GLOBAL_GROUP,a.mainInstance),pl:[{p:new y(f.propertyTypes.PROPID_PP_GEL_DATA,f.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new x(new A)}]}],b=new B({device:a.mainController},b,!0);rc.xhr.request({gid:"GRP",type:"bacnet",s:b}).then(l.hitch(this,function(a){var b=[];if(a.e)this._onErrorElements(a);else{a=a.o[0].pl[0].v.l;
if(0===a.length||1===a.length&&-1==a[0].idx.v)a=[];for(var c=0;c<a.length;c++)b=b.concat(a[c].gel.ary),b.push(a[c]);this._onLoadElements(b)}}),l.hitch(this,this._onErrorElements));return this._d}return this.group.isSSC?(b={o:new v(f.objectTypes.OBJID_FILE,296),a:{t:0,s:new y(0,3),c:new y(1200,2),v:new w([],6)}},b=new E({device:a.mainController},b),rc.xhr.request({gid:"GRP",type:"bacnet",s:b,load:l.hitch(this,function(a){this._onLoadElements(a.o.a.v.ary)}),error:l.hitch(this,function(a){this._onErrorElements(a)})})):
rc.xhr.request({gid:"GRP",type:"rcp",cmdObj:{dest:a.mainController,subt:a.subnetType,subd:a.subController,src:0,cmd:19,xl:a.comInstance-1&255,xh:a.comInstance-1>>>8&255,cnt:0},handle:l.hitch(this,function(b){b instanceof Error?this._onErrorElements(b):(this.group.isLC&&(I.setPointInfos(a.comInstance,b.data),b.data=I.getGroupElementBytes(a.comInstance)),this._onLoadElements(b.data))})})},_load:function(){var a=this.group.pointName;K.loadOnce().always(l.hitch(this,this._jobLoaded,a));return this._d},
_loadEnhancedPresentValues:function(a,b){if(this.group.isSuspendedUpdate)return this._onLoadEnhancedPresentValue([]),this._d;var c=[{o:new v(this.group.isView?f.objectTypes.OBJID_PP_ENHANCED_VIEW:f.objectTypes.OBJID_GLOBAL_GROUP,a.mainInstance),pl:[{p:new y(f.propertyTypes.PROPID_PP_PRESENT_VALUE_ENHANCED,f.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new x(new C(a))}]}],c=new B({device:a.mainController},c,!0);rc.xhr.request({gid:"GRP",type:"bacnet",s:c}).then(l.hitch(this,function(b,c){var f=c.o[0].pl[0].v.l;
0===f.length&&b<this._maxEHLoadAttempts?this.defer(l.hitch(this,this._loadEnhancedPresentValues,a,++b),250):this._onLoadEnhancedPresentValue(f)},b),l.hitch(this,this._onErrorElements));return this._d},_loadNext:function(){this.loadBacnet()},_loadSecondaryLinkProperties:function(){var b=[],c={},f;for(f in this.ges){groupElement=this.ges[f];var d=null;groupElement.secondaryLink&&(d=M.getInfoFromMnemonic(groupElement.secondaryLink,this.group.device))&&this._addSecondaryObjectLinks(c,d,groupElement.secondaryLink);
if(groupElement.landingPad){if(groupElement.landingPad.hasLinkOnLeftIcon()){var g=groupElement.landingPad.get("leftIconLink");(d=M.getInfoFromMnemonic(g,this.group.device))&&this._addSecondaryObjectLinks(c,d,g)}groupElement.landingPad.hasLinkOnRightIcon()&&(g=groupElement.landingPad.get("rightIconLink"),(d=M.getInfoFromMnemonic(g,this.group.device))&&this._addSecondaryObjectLinks(c,d,g))}}Object.keys(c).forEach(l.hitch(this,function(a){var f=new h;b.push(f);var d=c[a],g=[];Object.keys(d).forEach(function(a){a=
d[a];g.push({o:a.o,pl:a.pl})});rc.xhr.request({type:"bacnet",gid:"TL",s:new B({device:a},g),load:l.hitch(this,function(a,b,c){this._updateSecondaryLinksWithProperties(d,b,c);a.resolve()},f,a),error:f.resolve})}));return a(b)},_loadTrendData:function(){for(var a in this.ges){var b=this.ges[a];b.io&&b.loadTrendData()}},_onErrorElements:function(a){this._d.reject(a);this.onError(a);0<this._bacElsIoQ.length&&this.loadBacnetElement(this.ges[this._bacElsIoQ[0]])},_onLoadBacnetElement:function(a){if(0!==
this._bacElsIoQ.length||void 0!==a){var b=-1,c=-1;void 0===a?(c=this.ges[this._bacElsIoQ[0]],b=c.index,c=c.psdDevice):a instanceof Error?(b=a.s.index,c=a.s.r.device):(b=a.index,c=a.r.device);var b=this._getPointsPerAPDUByPointIndex(c,b),d=b.points,g=!1;if(a&&(a instanceof Error||d.length===a.o.length)){for(var k=null,d=0;d<a.o.length;d++){var k=a.o[d],q=this._getEntryFromPointMapByDOP({d:{i:c},o:k.o});if(null!==q){var h=q.groupElements[0];if(a instanceof Error)this._putRequestInError(h,a),g=!0,this.onLoadBacnetElement(h);
else if(l.isObject(a)&&a.isInstanceOf(B)){var n=!1,g=!0;if(null!==h){this.pointsGroupedPerAPDU.hasOwnProperty(b.deviceId)&&this.pointsGroupedPerAPDU[b.deviceId].hasOwnProperty(h.index)&&(this.pointsGroupedPerAPDU[b.deviceId].currentAPDUSize-=this._getObjectSize(h),delete this.pointsGroupedPerAPDU[b.deviceId][h.index]);q.groupElements.forEach(l.hitch(this,function(a){a.bacnetError=null;a.bacnetIoPending=!1}));for(var t=null,m=0;m<k.pl.length;++m){t=k.pl[m];t.v instanceof z&&t.v.isUnknownObject()&&
(q.groupElements.forEach(l.hitch(this,function(a){a.bacnetError=t.v})),n=!0);if(n)break;if(this._isUnknownProperty(t.v)&&-1===h.unknownProperties.indexOf(t.p.v)){if(q.groupElements.forEach(l.hitch(this,function(a){a.unknownProperties.push(t.p.v);t.p.v===f.propertyTypes.PROPID_PRESENT_VALUE&&(a.bacnetError=t.v,n=!0)})),n)break}else if(!(-1<h.unknownProperties.indexOf(t.p.v)||null===t.i||"undefined"===typeof t.i)){q.updateProperty(t.p.v,{index:t.i,value:t});var u=q.groupElements.filter(l.hitch(this,
function(a){return a.property===t.p.v&&a.arrayIdx===t.i.valueOf()||a.property!==t.p.v}));switch(t.p.v){case f.propertyTypes.PROPID_PRESENT_VALUE:u.forEach(l.hitch(this,function(a){a.pointValue=t.v.v.v}));break;case f.propertyTypes.PROPID_PP_OPEN_UNIT:var v;v="undefined"!==typeof t.v.v.v?t.v.v.v:t.v.v;u.forEach(l.hitch(this,function(a){a.bacnetUnits=v}));break;case f.propertyTypes.PROPID_UNITS:v="undefined"!==typeof t.v.v.v?H.toRcUnit(t.v.v.v,rc.sys.job.isSSC({device:h.psdDevice})):H.toRcUnit(t.v.v,
rc.sys.job.isSSC({device:h.psdDevice}));u.forEach(l.hitch(this,function(a){a.bacnetUnits=v}));break;case f.propertyTypes.PROPID_PRIORITY_ARRAY:u.forEach(l.hitch(this,function(a){a.bacnetPriorityArray8=t.v.v}));break;case f.propertyTypes.PROPID_ACTIVE_TEXT:u.forEach(l.hitch(this,function(a){a.bacnetStateText instanceof Array&&1<a.bacnetStateText.length?a.bacnetStateText[1]=H.getBACnetStateString(t.v.getString(),"on"):a.bacnetStateText=[null,H.getBACnetStateString(t.v.getString(),"on")]}));break;case f.propertyTypes.PROPID_INACTIVE_TEXT:u.forEach(l.hitch(this,
function(a){a.bacnetStateText instanceof Array&&1<a.bacnetStateText.length?a.bacnetStateText[0]=H.getBACnetStateString(t.v.getString(),"off"):a.bacnetStateText=[H.getBACnetStateString(t.v.getString(),"off"),null]}));break;case f.propertyTypes.PROPID_STATE_TEXT:for(var p=[],x=t.v.l,w,r=0;r<x.length;++r)(w=H.getBACnetStateString(x[r].getString()))||(w=(r+1).toString()),p.push(w);u.forEach(l.hitch(this,function(a){a.bacnetStateText=p}));break;case f.propertyTypes.PROPID_STATUS_FLAGS:u.forEach(l.hitch(this,
function(a){a.bacnetStatusFlags=t.v}));break;case f.propertyTypes.PROPID_OUT_OF_SERVICE:u.forEach(l.hitch(this,function(a){a.outOfService=t.v.v}))}}}q.isChanged&&(q.groupElements.forEach(l.hitch(this,function(a){this.onLoadBacnetElement(a)})),q.isChanged=!1)}}}}delete this.pointsGroupedPerAPDU[b.deviceId]}else if(this.pointsGroupedPerAPDU.hasOwnProperty(b.deviceId)){for(k in this.pointsGroupedPerAPDU[b.deviceId])isNaN(k)||(a=this.pointsGroupedPerAPDU[b.deviceId][k],a.bacnetIoPending=!1,this.onLoadBacnetElement(a));
delete this.pointsGroupedPerAPDU[b.deviceId]}g&&this._loadNext()}},_onLoadComplete:function(a,b){var c=this.ges[a];if(!0===c.loaded&&!0===c.loadedLinks)if(5===c.pointName.comType&&c.pointName.isAnalog&&(c.digitalAnalog=c.pointName.isAnalog()),c.isDeleted)this.remove(this.ges[a]);else if(c.isUpdated=!1,!this.group.isSuspendedUpdate||!this._hasPropertiesToGet(c)||!this.group.isSuspendedUpdate&&b)this.onLoadElement(c)},_onLoadElements:function(a){var b,c;this.ges||(this.ges={});null===this.pointsGroupedPerAPDU&&
(this.pointsGroupedPerAPDU={});for(var d=0;d<a.length;){b=this.group.isGlobalGroup?a[d+20].idx.v:d/10;this.ges[b]||(this.ges[b]=this._createGroupElement(),this.own(n(this.ges[b],"elementLoaded",l.hitch(this,this._onLoadComplete,b,!1))));this.ges[b].index=b;var d=this.ges[b].decode(a,d),g=this.ges[b];g.isDeleted||g.isUnsupportedPoint()?delete this.ges[b]:(this._addGELToPointMap(g),this._setEffectiveAPDUForDevice(g))}b=Date.now();d=0===this._bacElsIoQ.length;this._findHiddenElements();for(c in this.ges)a=
this.ges[c],a.loadedLinks=!0,a.loadTime=b,a.loadBacEls=d,(a.isBacnet||this.group.isSuspendedUpdate&&a.pointName.type===f.objectTypes.OBJID_PP_RUNTIME_LOG)&&d&&this._hasPropertiesToGet(a)&&this._bacElsIoQ.push(c.toString());this._loadSecondaryLinkProperties().then(l.hitch(this,function(){this._d&&!this._d.isFulfilled()&&this._d.resolve(this)}));this.loadBacnet()},_onLoadElementsEnhancedGroup:function(a){a=d.parse(a,!1);a.points||(a.points=[]);var b,c;this.group.solidColourSet||a.hasOwnProperty("background_height")&&
a.hasOwnProperty("background_width")&&this.group.stg.setViewportExt(a.background_width,a.background_height);this.ges||(this.ges={});null===this.pointsGroupedPerAPDU&&(this.pointsGroupedPerAPDU={});for(var f=0,f=0;f<a.points.length;f++){b=a.points[f].gel_index;if("gradient polygon"===a.points[f].display_type||"polygon"===a.points[f].display_type||"replace color"===a.points[f].display_type)a.points[f].height=0,a.points[f].width=0;this.ges[b]||(this.ges[b]=this._createGroupElement(),this.own(n(this.ges[b],
"elementLoaded",l.hitch(this,this._onLoadComplete,b,!0))));this.ges[b].index=b;this.ges[b].decodeJSON(a.points[f]);var g=this.ges[b];g.isDeleted||g.isUnsupportedPoint()?delete this.ges[b]:(this._addGELToPointMap(g),this._setEffectiveAPDUForDevice(g))}b=(new Date).getTime();f=0===this._bacElsIoQ.length;this._findHiddenElements();g=!1;for(c in this.ges)a=this.ges[c],this.animationElements.includes(a.index)&&!this.animationElementLinks.includes(a.index)&&a.initializeDataLoad(),a.io&&(g=!0),a.loadedLinks=
!0,a.loadTime=b,a.loadBacEls=f;g&&(this._loadTrendData(),this._loadTrendDataTimer=setInterval(l.hitch(this,this._loadTrendData),this._defaultTrendTimer));this._loadSecondaryLinkProperties().then(l.hitch(this,function(){this._loadEnhancedPresentValues(this.group.pointName,0)}))},_onLoadEnhancedPresentValue:function(a){if(null!==this.ges&&0<Object.keys(this.ges).length){for(var b=0;b<a.length;b++){var c=-1,d=f.propertyTypes.PROPID_PRESENT_VALUE,g,k=null;a[b].dop?(k=this._getEntryFromPointMapByDOP(a[b].dop),
c=a[b].dop.i?a[b].dop.i.valueOf():-1,d=a[b].dop.p?a[b].dop.p.valueOf():f.propertyTypes.PROPID_PRESENT_VALUE,g=a[b].dop.o.t?a[b].dop.o.t.valueOf():f.objectTypes.OBJID_ANALOG_INPUT):a[b].pointName&&a[b].pointName.pointName&&(k=this._getEntryFromPointMapByPointName(a[b].pointName.pointName),g=a[b].pointName.pointName.comType);if(null!==k){var q={};if(0<k.groupElements.length){var h=k.groupElements.filter(function(a){return(g===f.objectTypes.OBJID_PP_ARRAY&&f.propertyTypes.PROPID_PP_ARRAY_VALUES===d||
g!==f.objectTypes.OBJID_PP_ARRAY&&a.property===d)&&a.arrayIdx===c});if(!h||0===h.length){var n="";a[b].dop?n=a[b].dop.toMnemonic():a[b].pointName&&(n=a[b].pointName.toMnemonic());h=k.groupElements.filter(function(a){var b=a.pointName.toMnemonic();a.arrayIdx&&-1<a.arrayIdx&&(b+="[ "+a.arrayIdx+" ]");return b===n})}if(h&&0<h.length)for(h[0].updateEnhancedPresentValue(a[b]),q=h[0].getEnhancedPresentValueObject(),this.ges.hasOwnProperty(h[0].index)&&l.mixin(this.ges[h[0].index],q),k=1;k<h.length;k++)h[k].isUnsupportedPoint()||
h[k].arrayIdx!==c||(l.mixin(h[k],q),this.ges.hasOwnProperty(h[k].index)&&l.mixin(this.ges[h[k].index],q))}}}b=0===this._bacElsIoQ.length;this._findHiddenElements();for(var t in this.ges){a=this.ges[t];a.isUpdated=!0;this._setEffectiveAPDUForDevice(a);q=this._hasPropertiesToGet(a);(a.isBacnet||this.group.isSuspendedUpdate&&a.pointName.type===f.objectTypes.OBJID_PP_RUNTIME_LOG)&&b&&q&&this._bacElsIoQ.push(t.toString());if(!this.group.isSuspendedUpdate||!q)this.onLoadElement(a);a.dynamicHighEquation&&
(a.highLimit=this._buildDynamicValue(a,a.dynamicHighEquation));a.dynamicLowEquation&&(a.lowLimit=this._buildDynamicValue(a,a.dynamicLowEquation))}}this._d&&!this._d.isFulfilled()&&this._d.resolve(this);this.loadBacnet()},_buildDynamicValue:function(a,b){var c=b,f=/\{(\d+)\}/g,d,g,k;do if(d=f.exec(b))g=this.ges[d[1]],k=g.pointName.toMnemonic(),g.displayConfig=g.PT_TYPE_REFERENCE_POINT,c=c.replace(d[0],Number(g.pointValue)),null!==g.bacnetError?a.dynamicLimitErrors[k]=g.bacnetError.toStringMsg():"undefined"!==
typeof a.dynamicLimitErrors[k]&&delete a.dynamicLimitErrors[k];while(d);var c=c.replace(/[\s;]+/g,""),h;try{if(h=eval(c),isNaN(h))return console.error("Evaluated to not a number, defaulting to 0",h,c,a),0}catch(U){return console.error("Invalid equation, defaulting to 0",U,c,a),0}return Number(h)},_putRequestInError:function(a,b){a.bacnetIoPending=!1;a.bacnetError=b},_readProperties:function(a,b,c){var f=new h;0<a.length?(a=new B({device:b},a),this._bacGeIdx=a.index=c,rc.xhr.request({gid:"GRP",type:"bacnet",
s:a,silentError:!0,load:l.hitch(this,function(a){this._onLoadBacnetElement(a);f.resolve()}),error:l.hitch(this,function(a,b,c){f.resolve();var d=null;c instanceof z?void 0!==c&&c.classCode&&this._shouldAttemptReadPopertySingle(c.classCode.cl.v,c.classCode.co.v)?void 0!==c&&c.hasOwnProperty("s")&&c.s.hasOwnProperty("r")?d=this._getPointsPerAPDUByPointIndex(a,b):(d=this._getFirstPendingPoint(),d=this._getPointsPerAPDUByPointIndex(d.psdDevice,d.index)):(d=this._getPointsPerAPDUByPointIndex(a,b),c&&this._onLoadBacnetElement(c)):
d=this._getPointsPerAPDUByPointIndex(a,b);for(a=0;a<d.points.length;a++)this._forceSingleRead(d.points[a]);delete this.pointsGroupedPerAPDU[d.deviceId]},b,c)})):f.resolve();return f},_removeEntryFromQueue:function(a){a=this._bacElsIoQ.indexOf(a.index.toString());-1<a&&this._bacElsIoQ.splice(a,1)},_setEffectiveAPDUForDevice:function(a){if(!this._ignoreFromPointMap(a)&&(a=a.getDeviceId(),"undefined"===typeof this._pointMap[a.toString()]||"undefined"===typeof this._pointMap[a.toString()].effectiveAPDU)){var b=
Number(K.getAnyProperty(a+"DEV"+a,"EffectiveAPDU")),b=isNaN(b)||1>b?this.DEFAULT_APDU_SIZE-this.OVERHEAD_PER_APDU:b-this.OVERHEAD_PER_APDU;this._pointMap[a.toString()].effectiveAPDU=b}},_shouldAttemptReadPopertySingle:function(a,b){var c=!1;if(7===a)51===b&&(c=!0);else if(65===a){if(1===b||59==b)c=!0}else 66===a&&1===b&&(c=!0);return c},_updateSecondaryLinksWithProperties:function(a,b,c){Object.keys(a).forEach(function(d){for(var g=a[d],k=0;k<c.o.length;k++)if(g.o.t===c.o[k].o.t&&g.o.i===c.o[k].o.i){p.forEach(g.elements,
function(a){var g=c.o[k].pl[0].v;g&&g.t&&1023!==g.t&&g.i&&(g=b+f.mnemonics[g.t]+g.i,a.secondaryLink===d&&a.setAutoTrendLogMnemonic(g),a.landingPad&&(a.landingPad.get("leftIconLink")===d&&a.landingPad.overrideLeftLink(g),a.landingPad.get("rightIconLink")===d&&a.landingPad.overrideRightLink(g)))},this);c.o.splice(k,1);break}})},destroy:function(){this._bacElsIoQ=null;this.removeAll();this.gesHidden=this.ges=null;null!==this._loadTrendDataTimer&&clearInterval(this._loadTrendDataTimer);this._d&&this._d.cancel();
this._d=null;this.inherited(arguments)}})})},"rc/reliable/_group/io/groupMapEntries/BACnetMapEntry":function(){define(["dojo/_base/declare","./GroupMapEntry","../../../../bacnet/io/Number"],function(r,p,m){return r("rc/reliable/_group/io/groupMapEntries/BACnetMapEntry",[p],{properties:null,constructor:function(){this.properties={}},addProperty:function(l,h,c,g){"undefined"===typeof this.properties[l]&&(this.properties[l]={isSet:!1});!0!==this.properties[l].loadOnUpdate&&(this.properties[l].loadOnUpdate=
c);!0===g&&(this.properties[l].isDefaultProperty=g);this.properties[l][h.index]=h.value},updateProperty:function(l,h){var c=h.index;c instanceof m&&(c=h.index.v);this.properties[l].isSet=!0;var g=this.properties[l][c];if(null===g||g.v.toString()!==h.value.v.toString())this.isChanged=!0;this.properties[l][c]=h.value}})})},"rc/reliable/_group/io/groupMapEntries/GroupMapEntry":function(){define(["dijit/Destroyable","dojo/_base/declare","dojo/Stateful"],function(r,p,m){return p("rc/reliable/_group/io/groupMapEntries/GroupMapEntry",
[m,r],{groupElements:null,isChanged:!1,constructor:function(){this.groupElements=[]}})})},"rc/reliable/_group/io/groupMapEntries/RCPMapEntry":function(){define(["dojo/_base/declare","./GroupMapEntry"],function(r,p){return r("rc/reliable/_group/io/groupMapEntries/RCPMapEntry",[p],{value:null})})},"rc/bacnet/io/ReliableGroupElement":function(){define("dojo/_base/declare ./Array ./DeviceObjectPropertyReference ./Number ../enums ../error".split(" "),function(r,p,m,l,h,c){return r("rc/bacnet/io/ReliableGroupElement",
null,{idx:-1,gel:[],dop:null,constructor:function(c,d,n){this.idx=c||new l(-1,h.primitiveTypes.UNSIGNED_INTEGER);this.gel=d||new p([],h.primitiveTypes.OCTET_STRING);this.dop=n},encode:function(c){},decode:function(g,d){if(14==g[d]&&15==g[d+1])return d+2;d=this.idx.decode(g,d);d=this.gel.decode(g,d);46==g[d]?(d++,null==this.dop&&(this.dop=new m),d=this.dop.decode(g,d),47!=g[d++]&&c.throwError(65,62)):this.dop=null;return d},toString:function(){var c="{index:"+this.idx.toString()+", gel:"+this.gel.toString();
this.dop&&(c+=", dop:"+this.dop.toString());return c+"}"}})})},"rc/bacnet/io/ReliablePresentValueEnhanced":function(){define("dojo/_base/declare ./AnyPrimitive ./Array ./DeviceObjectPropertyReference ./Error ./Number ./Object ./ReliablePointInfo ../enums ../error ../../sys/job".split(" "),function(r,p,m,l,h,c,g,d,n,a,b){return r("rc/bacnet/io/ReliablePresentValueEnhanced",null,{idx:-1,gel:[],dop:null,thePoint:null,pointName:null,presentValue:null,units:null,status:null,manual:null,decomissioned:null,
timedOverride:null,security:null,analog:null,accessError:null,isBACnet:!1,constructor:function(a){this.idx=new c(-1,n.primitiveTypes.UNSIGNED_INTEGER);this.gel=new m([],n.primitiveTypes.OCTET_STRING);this.dop=null;this.thePoint=a||null;this.presentValue=this.pointName=null},encode:function(a){},decode:function(t,k){if(14==t[k]&&15==t[k+1])return k+2;if(14==t[k]){k++;null==this.dop&&(this.dop=new l);k=this.dop.decode(t,k);var q=null;this.thePoint&&"device"in this.thePoint?q=this.thePoint.device:this.thePoint&&
"mainController"in this.thePoint&&(q=this.thePoint.mainController);null==this.dop.d&&(this.dop.d=new g(n.objectTypes.OBJID_DEVICE,q));if(15!=t[k++])return a.throwError(65,62),k;this.isBACnet=!0}else if(30==t[k]){k++;if(null==this.pointName){q="";this.thePoint&&"device"in this.thePoint?q=this.thePoint.device+"DEV"+this.thePoint.device:this.thePoint&&"mainController"in this.thePoint&&(q=this.thePoint.mainController+"DEV"+this.thePoint.mainController);var f=this.thePoint;b.isPyramid(q)&&(f=b.getReliablePoint(this.thePoint));
this.pointName=new d(f)}k=this.pointName.decode(t,k);if(31!=t[k++])return a.throwError(65,62),k;this.isBACnet=!1}if(46==t[k]){k++;k++;this.presentValue=new p;k=this.presentValue.decode(t,k);k++;q=t[k];47!=q&&16==(q&240)&&(this.units=new c(0,n.primitiveTypes.UNSIGNED_INTEGER),k=this.units.decode(t,k),q=t[k]);47!=q&&32==(q&240)&&(this.units=new c(0,n.primitiveTypes.UNSIGNED_INTEGER),k=this.units.decode(t,k),q=t[k]);47!=q&&48==(q&240)&&(this.status=new m([],8),k=this.status.decode(t,k),q=t[k]);47!=q&&
64==(q&240)&&(this.manual=new c(0,n.primitiveTypes.BINARY),k=this.manual.decode(t,k),q=t[k]);47!=q&&80==(q&240)&&(this.decomissioned=new c(0,n.primitiveTypes.BINARY),k=this.decomissioned.decode(t,k),q=t[k]);47!=q&&96==(q&240)&&(this.timedOverride=new c(0,n.primitiveTypes.UNSIGNED_INTEGER),k=this.timedOverride.decode(t,k),q=t[k]);47!=q&&112==(q&240)&&(this.security=new c(0,n.primitiveTypes.ENUMERATED),k=this.security.decode(t,k),q=t[k]);47!=q&&128==(q&240)&&(this.analog=new c(0,n.primitiveTypes.BINARY),
k=this.analog.decode(t,k),q=t[k]);if(47!=q)return a.throwError(65,62),k;k++}else 62==t[k]&&(k++,this.accessError=new h,k=this.accessError.decode(t,k),63!=t[k++]&&a.throwError(65,62));return k},isDigigalAnalog:function(){var a;if(null!==this.presentValue)switch(this.presentValue.v.t){case n.primitiveTypes.UNSIGNED_INTEGER:case n.primitiveTypes.SIGNED_INTEGER:case n.primitiveTypes.REAL:case n.primitiveTypes.DOUBLE:case n.primitiveTypes.DATE:case n.primitiveTypes.TIME:a=!0;break;default:a=!1}else a=
!1;return a},toString:function(){var a="{index:"+this.idx.toString()+", gel:"+this.gel.toString();this.dop&&(a+=", dop:"+this.dop.toString());this.rcpRef&&(a+=", rcpRef:"+this.rcpRef.toString());this.thePoint&&(a+=", thePoint:"+this.thePoint.toString());this.presentValue&&(a+=", presentValue:"+this.presentValue.toString());this.units&&(a+=", units:"+this.units.toString());this.status&&(a+=", status:"+this.status.toString());this.manual&&(a+=", manual:"+this.manual.toString());this.decomissioned&&
(a+=", decomissioned:"+this.decomissioned.toString());this.timedOverride&&(a+=", timedOverride:"+this.timedOverride.toString());this.security&&(a+=", security:"+this.security.toString());this.analog&&(a+=", analog:"+this.analog.toString());this.accessError&&(a+=", accessError:"+this.accessError.toString());return a+"}"}})})},"rc/bacnet/io/ReliablePointInfo":function(){define(["dojo/_base/declare","./Number","./Object","../enums","../../reliable/Point"],function(r,p,m,l,h){return r("rc/bacnet/io/ReliablePointInfo",
null,{pointName:null,msbPanel:null,arrayOfs:null,thePoint:null,mainPanel:null,subNet:null,constructor:function(c){this.thePoint=c||new h(1,0,11,1);this.pointName=null;this.msbPanel=new p(0,l.primitiveTypes.UNSIGNED_INTEGER);this.arrayOfs=new p(0,l.primitiveTypes.UNSIGNED_INTEGER);this.mainPanel=new p(0,l.primitiveTypes.UNSIGNED_INTEGER);this.subNet=new p(0,l.primitiveTypes.UNSIGNED_INTEGER)},encode:function(){},decode:function(c,g){var d=new p(0,l.primitiveTypes.UNSIGNED_INTEGER);g=d.decode(c,g);
g=this.msbPanel.decode(c,g);g=this.arrayOfs.decode(c,g);this.pointName=new h(d,this.thePoint);this.pointName.mainController=this._getRealPanel();var n=c[g],a=!1;31!=n&&0==(n&240)&&(g=this.mainPanel.decode(c,g),n=c[g]);31!=n&&16==(n&240)&&(g=this.subNet.decode(c,g),a=!0);a&&(this.thePoint=new h(this.mainPanel.valueOf(),0,11,1),this.pointName=new h(d,this.thePoint),this.pointName.subType=this.subNet.valueOf(),this.thePoint.subController=this.pointName.subController,this.thePoint.subnetType=this.pointName.subType+
1,this.pointName=new h(d,this.thePoint));return g},toString:function(){var c="{";this.thePoint&&(c+="thePoint:"+this.thePoint.toString());this.pointName&&(c+=", pointName:"+this.pointName.toString());this.msbPanel&&(c+=", msbPanel:"+this.msbPanel.toString());this.arrayOfs&&(c+=", arrayOfs:"+this.arrayOfs.toString());return c+"}"},toMnemonic:function(){var c;c=this.arrayOfs&&this.arrayOfs&4294967295&&-1!==(this.arrayOfs&4294967295)?this.arrayOfs.hasOwnProperty("v")&&this.arrayOfs.v&4294967295&&-1!==
(this.arrayOfs.v&4294967295)?"[ "+this.arrayOfs.v+" ]":"":"";return this.pointName.toMnemonic()+c},_getRealPanel:function(){var c,g,d;d=this.pointName.mainController;if(this.pointName.subnetType)d=this.pointName.mainController;else if(this.msbPanel)switch(g=this.pointName.mainController,c=(g-1)%32+1,this.msbPanel.valueOf()){case 0:d=g;break;case 1:d=32<g?c:c+32;break;case 2:d=64<g?c+32:c+64;break;case 3:d=96<g?c+64:c+96}return d}})})},"rc/reliable/_group/TextEditDialog":function(){define("dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/_base/window dojo/Deferred dojo/dom-geometry dojo/dom-style dojo/i18n!rc/nls/grp dojo/i18n!rc/nls/all dojo/string dojo/text!rc/reliable/_group/templates/TextEditDialog.html dojo/topic dojo/query ../../session ../../xhr dijit/Dialog dijit/form/SimpleTextarea dijit/form/Button".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){return l("rc/reliable/_group/TextEditDialog",[r,p,m],{widgetsInTemplate:!0,templateString:q,text:{},_fileName:"",_fileNameNoExt:"",isReadOnly:!1,postCreate:function(){this.inherited(arguments);this.setReadOnly(!0)},setReadOnly:function(b){b?(this.isReadOnly||(a.set(this._ok.domNode,{display:"none"}),this._cancel.set("label","Close"),this._textArea.set("readOnly",!0)),this.isReadOnly=!0):(this.isReadOnly&&(a.set(this._ok.domNode,{display:""}),this._cancel.set("label",
"Cancel"),this._textArea.set("readOnly",!1)),this.isReadOnly=!1)},show:function(a){this.setReadOnly(!1);this._show(a)},showReadOnly:function(a){this.setReadOnly(!0);this._show(a)},_show:function(a){this._setTitle(a);this._sizeAndShow();this._loadText()},_setTitle:function(a){this._fileNameNoExt=a;this._fileName=a+".txt";this._dialog.set("title",t.edit+" "+this._fileName)},_sizeAndShow:function(){var b=n.getMarginBox(g.body());a.set(this._textArea.textbox,{width:(200>b.w/2?200:b.w/2)+"px",height:(100>
b.h/3?100:b.h/3)+"px"});this._showWaiting();this._dialog.show();return this.load()},_showWaiting:function(){a.set(this._waitingIcon,{display:"block",opacity:1})},_hideWaiting:function(){h.fadeOut({node:this._waitingIcon,duration:200,onEnd:c.hitch(this,function(b){a.set(b,"display","none")})}).play()},load:function(){return rc.xhr.request({gid:"GRP",type:"text",url:"job/"+encodeURIComponent(this._fileName),handle:c.hitch(this,function(a){if(a instanceof Error){if(404!=a.status){this.onError(a);return}this.warningTextContainer.innerHTML=
k.substitute(b.noTextFileWarningX,[this._fileName,this._fileName]);this._warningDlg.show();this.text=""}else a.data.match(/<HTML><HEAD><TITLE>404/)?this.text="":this.text=a.data;this._textArea.set("value",this.text);this._hideWaiting();this.onLoad()})})},send:function(a,b){a&&(a=a.replace(/\n/g,"\r\n"));var f=new d,g={gid:"GRP",type:"cmd",method:"POST",cmdObj:{cmd:7,filename:this._fileNameNoExt,data:encodeURIComponent(a)},load:c.hitch(this,function(a,c){f.resolve(this._addAuditTrail(b))}),error:c.hitch(this,
function(a){f.reject(a)})};rc.xhr.request(g);return f.promise},_addAuditTrail:function(a){a=a?"editedX":"createdX";f.publish("audit",{datestamp:parseInt((new Date).getTime()/1E3).toFixed(),pointName:"",user:rc.session.getUsername(),action:k.substitute(t[a],[t.textFile.toLowerCase()]),details:k.substitute(t[a],["\u201c"+this._fileName+"\u201d"]),reason:"",mnemonic:this._fileName})},onError:function(a){},_onClickOk:function(){this._dialog.hide();this.send(this._textArea.get("value"),!0)},onLoad:function(){},
_onClickCancel:function(){this._dialog.hide()},isOpen:function(){return this._dialog.open},_createEmptyFileYes:function(a){this.send(this._textArea.get("value"),!1);this._warningDlg.hide()},_createEmptyFileNo:function(a){this._warningDlg.hide();this._dialog.hide()},_loadText:function(){try{this._warningDlg.set("title",t.warningFileNotFound),this._okBtnTxt=u(".dijitButtonText",this._ok.domNode)[0],this._cancelBtnTxt=u(".dijitButtonText",this._cancel.domNode)[0],this._yesBtnTxt=u(".dijitButtonText",
this._yes.domNode)[0],this._noBtnTxt=u(".dijitButtonText",this._no.domNode)[0],this._okBtnTxt.innerHTML=t.btnOk,this._cancelBtnTxt.innerHTML=t.btnCancel,this._yesBtnTxt.innerHTML=t.yes,this._noBtnTxt.innerHTML=t.no}catch(x){console.error("where are the Warning - File Not Found elements?",x)}}})})},"rc/bacnet/_widget/DialogEventParameter":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/on dojo/string dojo/text!./templates/DialogEventParameter.html dojo/topic ../enums ../io/Error ../io/EventParameter ../io/FaultParameters ../io/Number ../io/Object ../io/service/ReadPropertyMultiple ../io/service/WritePropertyMultiple ../../widget/Retry dijit/Dialog dijit/form/Button dijit/form/ValidationTextBox ./EventParameterEditor ../../widget/ErrorDialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C){return h("rc/bacnet/_widget/DialogEventParameter",[p,r,m],{templateString:k,src:"",_eventParameter:null,_faultParameter:null,ge:null,postCreate:function(){this.inherited(arguments);this._supportingWidgets.push(this._dialog);this._supportingWidgets.push(this._errorDialog);this._supportingWidgets.push(this._eventParameterEditor);this._retryHandler=new C;d.add(this._dialog.domNode,"rcEventParameterDialog");this.own(b(this._dialog,"hide",g.hitch(this,
this._onHide)));this._reasonConnects=[]},_fetch:function(){var a=[{o:new y(9,this.ge.pointName.comInstance),pl:[{p:new x(f.propertyTypes.PROPID_EVENT_PARAMETERS,f.primitiveTypes.ENUMERATED),i:-1,v:new w},{p:new x(f.propertyTypes.PROPID_TIME_DELAY_NORMAL,f.primitiveTypes.ENUMERATED),i:-1,v:new x(0,f.primitiveTypes.UNSIGNED_INTEGER)},{p:new x(f.propertyTypes.PROPID_FAULT_PARAMETERS,f.primitiveTypes.ENUMERATED),i:-1,v:new z}]}],a=new v({device:this.ge.psdDevice},a);return rc.xhr.request({gid:"GRP",type:"bacnet",
s:a,handle:g.hitch(this,"_onFetchEventParameter")})},_isValid:function(){this._setRequiredReason();return this._reasonTB.isValid()},_onFetchEventParameter:function(a){if(a instanceof Error)a.s.dfd.reject(a);else{var b=null,c=null,f=null;a.o[0].pl[0]&&(b=a.o[0].pl[0].v);a.o[0].pl[1]&&(c=a.o[0].pl[1].v);a.o[0].pl[2]&&(f=this._propertyInError(a.o[0].pl[2].v)?null:a.o[0].pl[2].v);this._eventParameterEditor.initialize(b,c,f)}},_propertyInError:function(a){return a instanceof u},fetch:function(){this._showFullWaiting();
var b=this._retryHandler.notifyRetry({action:g.hitch(this,this._fetch),retryMsg:a.communicationProblem+" "+a.retryingIn});b.then(g.hitch(this,function(a){this._hideFullWaiting();return a}),g.hitch(this,function(a){this._hideFullWaiting();this._dialog.hide();return a}));return b},send:function(){this._showFullWaiting();var b=this._retryHandler.notifyRetry({action:g.hitch(this,this._send),tries:3,delay:5,retryMsg:a.communicationProblem+" "+a.retryingIn});b.then(g.hitch(this,function(a){this._dialog.hide();
return a}),g.hitch(this,function(a){this._hideFullWaiting();this._dialog.hide();return a}));return b},_send:function(){var a=[{p:new x(f.propertyTypes.PROPID_EVENT_PARAMETERS,f.primitiveTypes.ENUMERATED),i:-1,v:this._eventParameter}];this._timeDelayNormal&&a.push({p:new x(f.propertyTypes.PROPID_TIME_DELAY_NORMAL,f.primitiveTypes.ENUMERATED),i:-1,v:new x(this._timeDelayNormal,f.primitiveTypes.UNSIGNED_INTEGER)});this._faultParameter&&a.push({p:new x(f.propertyTypes.PROPID_FAULT_PARAMETERS,f.primitiveTypes.ENUMERATED),
i:-1,v:this._faultParameter});a=[{o:new y(9,this.ge.pointName.comInstance),pl:a}];a=new A({device:this.ge.psdDevice},a);return rc.xhr.request({gid:"BTLWrite",type:"bacnet",s:a,handle:g.hitch(this,function(a){})})},show:function(a,c){this.ge=a;this.stg=c;this._reasonTB.set("value","");this._reasonLabel.innerHTML=rc.session.reasonRequired()?"Reason*:":"Reason:";this._reasonTB.set("required",!1);this._reasonConnects.push(b(this._reasonTB,"blur",g.hitch(this,this._setRequiredReason)));this._dialog.show();
this.fetch()},_setRequiredReason:function(){l.forEach(this._reasonConnects,function(a){a.remove()},this);this._reasonConnects=[];this._reasonTB.set("required",rc.session.reasonRequired())},_onClickCancel:function(){this._dialog.hide()},_onHide:function(){this.stg.updating&&this.stg.update();this._eventParameterEditor.reset()},_onClickOk:function(){this._isValid()&&this._eventParameterEditor.isValid()?this._eventParameterEditor.getObject().then(g.hitch(this,function(a){this._eventParameter=a.eventParameter;
this._timeDelayNormal=a.timeDelayNormal;this._faultParameter=a.faultParameter;this._addAuditTrail();rc.xhr.setCacheId(this.stg.group.pointName.toMnemonic()+"_"+ ++this.stg.xhrCacheIndex);this.send()}),g.hitch(this,function(a){})):this._errorDialog.show()},_onClickErrorOk:function(){},_onClickErrorCancel:function(){},_addAuditTrail:function(){var b=this.ge.pointName.toArray(),b=b[2<=b.length?b.length-2:0].toLowerCase(),b=a[b]||b,c=rc.sys.job.getControllerName(this.ge.isBacnet,this.ge.pointName,this.ge.flashObject.strName);
q.publish("audit",{pointName:c,user:rc.session.getUsername(),action:t.substitute(a.changedX,[b.toLowerCase()]),details:t.substitute(a.editedX,[a.eventParameter.toLowerCase()]),reason:this._reasonTB.get("value")})},_showFullWaiting:function(){n.set(this._waitingBlock,{display:"block",opacity:1})},_hideFullWaiting:function(){c.fadeOut({node:this._waitingBlock,duration:200,onEnd:g.hitch(this,function(a){n.set(a,"display","none")})}).play()}})})},"rc/bacnet/io/EventParameter":function(){define("dojo/_base/declare ./Array ./CovCriteria ./DeviceObjectPropertyReference ./List ./Number ./PropertyState ../enums ../error".split(" "),
function(r,p,m,l,h,c,g,d,n){return r("rc/bacnet/io/EventParameter",null,{c:0,d:null,constructor:function(a,b){this.c=a||0;this.d=b||null},encode:function(){var a=[],b=14;if(this.d&&this.d.length)switch(b+=16*this.c,this.c>=d.eventType.SIGNED_OUT_OF_RANGE?(a.push(254),a.push(this.c)):a.push(b),this.c){case d.eventType.CHANGE_OF_BITSTRING:a=a.concat(this.d[0].encode(9));a=a.concat(this.d[1].encode(26));a.push(46);a=a.concat(this.d[2].encode());a.push(47);break;case d.eventType.CHANGE_OF_STATE:a=a.concat(this.d[0].encode(9));
a.push(30);a=a.concat(this.d[1].encode());a.push(31);break;case d.eventType.CHANGE_OF_VALUE:a=a.concat(this.d[0].encode(9));a.push(30);a=a.concat(this.d[1].encode());a.push(31);break;case d.eventType.COMMAND_FAILURE:a=a.concat(this.d[0].encode(9));a.push(30);a=a.concat(this.d[1].encode());a.push(31);break;case d.eventType.FLOATING_LIMIT:a=a.concat(this.d[0].encode(9));a.push(30);a=a.concat(this.d[1].encode());a.push(31);a=a.concat(this.d[2].encode(44));a=a.concat(this.d[3].encode(60));a=a.concat(this.d[4].encode(76));
break;case d.eventType.OUT_OF_RANGE:a=a.concat(this.d[0].encode(9));a=a.concat(this.d[1].encode(28));a=a.concat(this.d[2].encode(44));a=a.concat(this.d[3].encode(60));break;case d.eventType.SIGNED_OUT_OF_RANGE:a=a.concat(this.d[0].encode(9));a=a.concat(this.d[1].encode(25));a=a.concat(this.d[2].encode(41));a=a.concat(this.d[3].encode(57));break;case d.eventType.UNSIGNED_OUT_OF_RANGE:a=a.concat(this.d[0].encode(9));a=a.concat(this.d[1].encode(25));a=a.concat(this.d[2].encode(41));a=a.concat(this.d[3].encode(57));
break;case d.eventType.DOUBLE_OUT_OF_RANGE:a=a.concat(this.d[0].encode(9));a=a.concat(this.d[1].encode(29));a=a.concat(this.d[2].encode(45));a=a.concat(this.d[3].encode(61));break;case d.eventType.CHANGE_OF_LIFE_SAFETY:a=a.concat(this.d[0].encode(9));a.push(30);a=a.concat(this.d[1].encode());a.push(31);a.push(46);a=a.concat(this.d[2].encode());a.push(47);a.push(62);a=a.concat(this.d[3].encode());a.push(63);break;case d.eventType.BUFFER_READY:a=a.concat(this.d[0].encode(9));a=a.concat(this.d[1].encode(25));
break;case d.eventType.UNSIGNED_RANGE:a=a.concat(this.d[0].encode(9)),a=a.concat(this.d[1].encode(25)),a=a.concat(this.d[2].encode(41))}this.c>=d.eventType.SIGNED_OUT_OF_RANGE?(a.push(255),a.push(this.c)):a.push(++b);return a},decode:function(a,b){var t=null,k=null;if(b<a.length){var q;this.c=254===a[b]?a[++b]:(a[b]&240)>>4;b++;switch(this.c){case d.eventType.CHANGE_OF_BITSTRING:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);t=new p([],d.primitiveTypes.BIT_STRING);b=t.decode(a,b);b++;
k=new h(new p([],d.primitiveTypes.BIT_STRING),[]);b=k.decode(a,b);b++;this.d=[q,t,k];break;case d.eventType.CHANGE_OF_STATE:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);b++;t=new h(new g,[]);b=t.decode(a,b);b++;this.d=[q,t];break;case d.eventType.CHANGE_OF_VALUE:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);t=new m;30==a[b]?(b++,b=t.decode(a,b),b++):b=t.decode(a,b);this.d=[q,t];break;case d.eventType.COMMAND_FAILURE:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,
b);b++;t=new l;b=t.decode(a,b);b++;this.d=[q,t];break;case d.eventType.FLOATING_LIMIT:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);b++;t=new l;b=t.decode(a,b);b++;var f=new c(0,d.primitiveTypes.REAL);b=f.decode(a,b);var u=c(0,d.primitiveTypes.REAL);b=u.decode(a,b);k=c(0,d.primitiveTypes.REAL);b=k.decode(a,b);this.d=[q,t,f,u,k];break;case d.eventType.OUT_OF_RANGE:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);t=new c(0,d.primitiveTypes.REAL);b=t.decode(a,b);f=c(0,d.primitiveTypes.REAL);
b=f.decode(a,b);k=c(0,d.primitiveTypes.REAL);b=k.decode(a,b);this.d=[q,t,f,k];break;case d.eventType.CHANGE_OF_LIFE_SAFETY:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);b++;k=new h(new c(0,d.primitiveTypes.ENUMERATED),[]);b=k.decode(a,b);b++;b++;f=new h(new c(0,d.primitiveTypes.ENUMERATED),[]);b=f.decode(a,b);b++;b++;t=new l;b=t.decode(a,b);b++;this.d=[q,k,f,t];break;case d.eventType.BUFFER_READY:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);t=c(0,d.primitiveTypes.UNSIGNED_INTEGER);
b=t.decode(a,b);this.d=[q,t];break;case d.eventType.UNSIGNED_RANGE:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);t=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=t.decode(a,b);f=c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=f.decode(a,b);this.d=[q,t,f];break;case d.eventType.DOUBLE_OUT_OF_RANGE:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);t=new c(0,d.primitiveTypes.DOUBLE);b=t.decode(a,b);f=c(0,d.primitiveTypes.DOUBLE);b=f.decode(a,b);k=c(0,d.primitiveTypes.DOUBLE);b=k.decode(a,
b);this.d=[q,t,f,k];break;case d.eventType.SIGNED_OUT_OF_RANGE:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);t=new c(0,d.primitiveTypes.SIGNED_INTEGER);b=t.decode(a,b);f=c(0,d.primitiveTypes.SIGNED_INTEGER);b=f.decode(a,b);k=c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=k.decode(a,b);this.d=[q,t,f,k];break;case d.eventType.UNSIGNED_OUT_OF_RANGE:q=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=q.decode(a,b);t=new c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=t.decode(a,b);f=c(0,d.primitiveTypes.UNSIGNED_INTEGER);
b=f.decode(a,b);k=c(0,d.primitiveTypes.UNSIGNED_INTEGER);b=k.decode(a,b);this.d=[q,t,f,k];break;default:n.throwError(65,62)}}this.c>=d.eventType.SIGNED_OUT_OF_RANGE&&b++;b++;return b},toString:function(){var a="{choice:"+this.c+", data:";switch(this.c){case 0:case 1:case 2:case 3:case 4:case 5:case 8:case 9:case 10:case 11:case 14:case 15:case 16:for(var b=0;b<this.d.length;b++)a+=this.d[b].toString()+", ";this.d.length&&(a=a.slice(0,-2));break;default:a+="Decode Error}"}return a+"}"}})})},"rc/bacnet/io/FaultParameters":function(){define("dojo/_base/declare ./AnyPrimitive ./Array ./CovCriteria ./DeviceObjectPropertyReference ./List ./Number ./PropertyState ../enums ../error".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return r("rc/bacnet/io/FaultParameters",null,{faultType:0,d:null,constructor:function(a,c){this.faultType=a||n.faultType.NONE;this.d=c||[new g(0,n.primitiveTypes.NULL)];this.d||(this.d=[null])},encode:function(){var a=[],c=14;if(this.d&&this.d.length)switch(c+=16*this.faultType,a.push(c),this.faultType){case n.faultType.NONE:a=a.concat(this.d[0].encode());break;case n.faultType.STATE:a.push(14);for(var d=0;d<this.d.length;d++)a=a.concat(this.d[d].encode());a.push(15);
break;case n.faultType.OUT_OF_RANGE:a.push(14),a=a.concat(this.d[0].encode()),a.push(15),a.push(30),a=a.concat(this.d[1].encode()),a.push(31)}a.push(++c);return a},decode:function(b,c){if(c<b.length)switch(this.faultType=(b[c]&240)>>4,c++,this.faultType){case n.faultType.NONE:var k=new g(0,n.primitiveTypes.NULL);c=k.decode(b,c);this.d=[k];break;case n.faultType.STATE:this.d=[];if(14==b[c]){for(c++;15!=b[c]&&c<b.length;)state=new d(0,n.primitiveTypes.UNSIGNED_INTEGER),c=state.decode(b,c),this.d.push(state);
c++}break;case n.faultType.OUT_OF_RANGE:k=new p;14==b[c]&&(c++,c=k.decode(b,c),c++);var h=new p;30==b[c]&&(c++,c=h.decode(b,c),c++);this.d=[k,h];break;default:a.throwError(65,62)}c++;return c},toString:function(){var a="{choice:"+this.c+", data:";switch(this.faultType){case n.faultType.OUT_OF_RANGE:for(var c=0;c<this.d.length;c++)a+=this.d[c].toString()+", ";this.d.length&&(a=a.slice(0,-2));break;default:a+="Decode Error"}return a+"}"}})})},"rc/bacnet/_widget/EventParameterEditor":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/Selection dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/FilteringSelect dijit/form/ValidationTextBox dojo/_base/array dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/text!./templates/EventParameterEditor.html dojox/grid/cells/dijit ../enums ../io/Array ../io/CovCriteria ../io/DeviceObjectPropertyReference ../io/EventParameter ../io/FaultParameters ../io/List ../io/Number ../io/PropertyState ../property ../unit dijit/Dialog dijit/form/Button dijit/form/TextBox dijit/form/RadioButton ./DeviceObjectPropertyReferenceEditor".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O){return b("rc/bacnet/_widget/EventParameterEditor",[c,h,g],{templateString:C,src:"",_eventParameter:null,_showFunctions:null,_currentGrid:null,_currentNewItem:null,_grids:[],_gridItems:null,_alarmSafetyValuesGrid:null,_alarmValuesGrid:null,_bitStringGrid:null,_stateGrid:null,_selectConnect:null,_newBitStringItem:null,_newAlarmValueItem:null,_newStateItem:null,_valueBox:null,_currentStateGridRowSelected:0,_stateColumnStructure:null,
_stores:null,_choice:null,_propertyStateStore:null,_valueStore:null,constructor:function(){for(var a=[],b=B.propertyStates,c=0;c<b.length;c++)a.push({name:b[c],id:c});this._propertyStateStore=new v({data:k.clone(a)});this._stores=[];a=[];a.push({name:"Off",id:0});a.push({name:"On",id:1});this._valueStore=new v({data:k.clone(a)});this._stores.push(this._valueStore);a=[];a.push({name:"InActive",id:0});a.push({name:"Active",id:1});this._stores.push(new v({data:k.clone(a)}));a=[];b=B.eventType;for(c=
0;c<b.length;c++)a.push({name:B.eventTypeNames[c],id:c});this._stores.push(new v({data:k.clone(a)}));a=[];a.push({name:"Normal",id:0});a.push({name:"Reverse",id:1});this._stores.push(new v({data:k.clone(a)}));a=[];b=B.programChange;for(c=0;c<b.length;c++)a.push({name:b[c],id:c});this._stores.push(new v({data:k.clone(a)}));a=[];b=B.programState;for(c=0;c<b.length;c++)a.push({name:b[c],id:c});this._stores.push(new v({data:k.clone(a)}));a=[];b=B.programError;for(c=0;c<b.length;c++)a.push({name:b[c],
id:c});this._stores.push(new v({data:k.clone(a)}));a=[];b=B.reliability;for(c=0;c<b.length;c++)a.push({name:b[c],id:c});this._stores.push(new v({data:k.clone(a)}));a=[];b=B.eventState;for(c=0;c<b.length;c++)a.push({name:b[c],id:c});this._stores.push(new v({data:k.clone(a)}));a=[];b=B.deviceStatus;for(c=0;c<b.length;c++)a.push({name:b[c],id:c});this._stores.push(new v({data:k.clone(a)}));a=[];for(c=0;189>c;c++)a.push({name:O.getUnit(c),id:c});this._stores.push(new v({data:k.clone(a)}));this._stores.push(null);
a=[];b=B.lifeSafetyMode;for(c=0;c<b.length;c++)a.push({name:b[c],id:c});this._stores.push(new v({data:k.clone(a)}));a=[];b=B.lifeSafetyState;for(c=0;c<b.length;c++)a.push({name:b[c],id:c});this._stores.push(new v({data:k.clone(a)}))},postCreate:function(){this.inherited(arguments);this._supportingWidgets.push(this._errorDialog);this._newBitStringItem={value:"0"};this._newAlarmValueItem={value:"0"};this._newStateItem={state:"0",value:"0",object:{state:0,value:0}};this._bitStringGrid=this._createBitStringGrid();
this._grids.push(this._bitStringGrid);this._stateGrid=this._createStateGrid();this._grids.push(this._stateGrid);this._createAlarmValueGrids();this._propertyStateFS.set("store",this._propertyStateStore);this._propertyStateFS.set("value",0);this._buildValueFS(this._valueStore);this.own(x(this._propertyStateFS,"change",k.hitch(this,this._onChangePropertyFS)),q.after(this._propertyStateFS,"_selectOption",k.hitch(this,this._onSelectPropertyOption)));this._showFunctions=[k.hitch(this,this._showBitString),
k.hitch(this,this._showState),k.hitch(this,this._showCOVCriteria),k.hitch(this,this._showCommandFailure),k.hitch(this,this._showFloatingLimit),k.hitch(this,this._showOutOfRange),null,null,k.hitch(this,this._showLifeSafety),null,k.hitch(this,this._showBufferReady),k.hitch(this,this._showUnsignedRange),null,null,k.hitch(this,this._showDoubleOutOfRange),k.hitch(this,this._showSignedOutOfRange),k.hitch(this,this._showUnsignedOutOfRange),k.hitch(this,this._showFaultOutOfRange)];this.own(x(window,"resize",
k.hitch(this,this._closeChangeOfStateSelects)))},resizeGrids:function(){a.forEach(this._grids,function(a){a.resize()})},_buildStateColumnStructure:function(){this._stateColumnStructure=[p({id:"propertyStateCol",label:"Property state",field:"state",width:10,editor:d,editOn:"click",editorArgs:{store:this._propertyStateStore,baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!0},formatter:k.hitch(this,this._formatPropertyStateCell)}),p({id:"valueCol",label:"Value",field:"value",width:10,editor:d,
editOn:"click",editorArgs:{store:this._stores[0],baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!0},formatter:k.hitch(this,this._formatPropertyStateValueCell)})]},_formatlifeSafetyAlarmValueCell:function(a,b){var c=a,c=this._stores[this._stores.length-1];return c=c.data.hasOwnProperty(a)?c.data[a].name:c.data["0"].name},_formatPropertyStateValueCell:function(a,b){var c=a,f=this._stateGrid.store.get(b.rowId);this._stores.hasOwnProperty(f.state)&&(c=this._stores[f.state],c=c.data.hasOwnProperty(a)?
c.data[a].name:c.data["0"].name);return c},_formatPropertyStateCell:function(a,b){var c=a;this._propertyStateStore.data.hasOwnProperty(a)&&(c=this._propertyStateStore.data[a].name);return c},_createStateGrid:function(){this._buildStateColumnStructure();var a=new (b([r,m,l]))({columns:this._stateColumnStructure,store:new A(new v({idProperty:"rowId"}))},this._stateGridContainer);a.startup();this.own(x(a,".dgrid-column-propertyStateCol:dgrid-datachange",k.hitch(this,this._onPropertyStateChanged)),x(a,
".dgrid-column-valueCol:dgrid-datachange",k.hitch(this,this._onPropertyValueChanged)),x(a,".dgrid-column-valueCol:dgrid-editor-show",k.hitch(this,this._onValueColEditorOn)));return a},_onValueColEditorOn:function(a){var b=this._stateGrid.store.get(a.cell.row.id);this._stores.hasOwnProperty(b.state)&&(a.editor.set("store",this._stores[b.state]),a.editor.set("value",b.value))},_onPropertyStateChanged:function(a){var b=this._stateGrid.store.get(a.rowId);this._stores.hasOwnProperty(a.value)&&(b.state=
a.value,b.object.state=parseInt(a.value,10));this._stateGrid.store.put(b);this._stateGrid.refresh()},_onPropertyValueChanged:function(a){var b=this._stateGrid.store.get(a.rowId);b.value=a.value;b.object.value=parseInt(a.value,10);this._stateGrid.store.put(b)},_onBitStringGridValueChanged:function(a){var b=this._bitStringGrid.store.get(a.rowId);b.value=a.value;this._bitStringGrid.store.put(b)},_onlifeSafetyAlarmValuesChanged:function(a){var b=this._alarmSafetyValuesGrid.store.get(a.rowId);b.value=
a.value;this._alarmSafetyValuesGrid.store.put(b)},_onlifeAlarmValuesChanged:function(a){var b=this._alarmValuesGrid.store.get(a.rowId);b.value=a.value;this._alarmValuesGrid.store.put(b)},_closeChangeOfStateSelects:function(){this._togglePropertyContainer(!1);this._toggleValueContainer(!1)},_onClickStateGridCells:function(a){this._currentStateGridRowSelected=a.rowIndex;var b=this._stateGrid.store.get(this._currentStateGridRowSelected).object,c=t.coords(a.cellNode);0==a.cellIndex?this._togglePropertyContainer(!0,
c,b.state):(this.buildValueFS(b.state),this._toggleValueContainer(!0,c,b.value,b.state))},_onSelectValueOption:function(a){this._toggleValueContainer(!1);this._setStateGridValue()},_setStateGridValue:function(){var a=this._stateGrid.store.get(this._currentStateGridRowSelected);if(a){var b=a.object;b.value=parseInt(this._valueBox.get("value"),10);this._valueBox.store?(a.object=b,a.value=this._valueBox.store.get(this._valueBox.get("value")).name):a.value=0;this._stateGrid.store.put(a)}},_onSelectPropertyOption:function(){this._togglePropertyContainer(!1);
var a=this._stateGrid.store.get(this._currentStateGridRowSelected);if(a){var b=a.object;b.state=parseInt(this._propertyStateFS.get("value"),10);this._valueBox.store?(a.object=b,a.value=this._valueBox.store.get(this._valueBox.get("value")).name):a.value=0;a.state=this._propertyStateFS.store.get(this._propertyStateFS.get("value")).name;this._stateGrid.store.put(a)}},_onChangePropertyFS:function(a){this.buildValueFS(a);u.add(this._valueBoxContainer,"hideContainer")},buildValueFS:function(a){this._valueBox.destroyRecursive();
if(11!=a)try{this._buildValueFS(this._stores[a]),this._setStateGridValue()}catch(Q){}else this._valueBox=new n({required:!0,invalidMessage:"Positive numbers only.",missingMessage:"A number is required.",pattern:"\\d+",value:0},w.create("input",null,this._valueBoxContainer)),this._setStateGridValue()},_buildValueFS:function(a){var b=this._stateGrid.store.get(this._currentStateGridRowSelected),c=0;b&&(c=b.object.value,c>a.store._arrayOfAllItems.length&&(c=0));this._valueBox=new d({required:!0,searchAttr:"name",
store:a,invalidMessage:"Select one of property state options.",missingMessage:"A selection is needed.",value:c||0},w.create("input",null,this._valueBoxContainer));null!==this._selectConnect&&(this._selectConnect.remove(),this._selectConnect=null);this._selectConnect=q.after(this._valueBox,"_selectOption",k.hitch(this,this._onSelectValueOption))},_togglePropertyContainer:function(a,b,c){a?(u.add(this._valueBoxContainer,"hideContainer"),u.remove(this._propertyFSContainer,"hideContainer"),this._position(this._propertyFSContainer,
b),this._propertyStateFS.focus(),this._propertyStateFS.set("value",c||0)):u.add(this._propertyFSContainer,"hideContainer")},_position:function(a,b){z.set(a,{left:b.x+1+"px",top:b.y-1+"px"})},_toggleValueContainer:function(a,b,c){a?(u.add(this._propertyFSContainer,"hideContainer"),u.remove(this._valueBoxContainer,"hideContainer"),this._position(this._valueBoxContainer,b),this._valueBox.focus(),null!=c&&this._valueBox.set("value",c)):u.add(this._valueBoxContainer,"hideContainer")},_deletePropertyStateRow:function(){this._togglePropertyContainer(!1);
this._toggleValueContainer(!1);for(var a=Object.keys(this._stateGrid.selection),b=a.length-1;0<=b;--b)this._stateGrid.store.remove(a[b])},_getComboBox:function(){},_createAlarmValueGrids:function(){var a=new (b([r,m,l]))({columns:[p({id:"valueCol",label:"Alarm values",field:"value",width:10,editor:d,editOn:"click",editorArgs:{store:this._stores[this._stores.length-1],baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!0},formatter:k.hitch(this,this._formatlifeSafetyAlarmValueCell)})],store:new A(new v({idProperty:"rowId"})),
sort:[{attribute:"rowId",descending:!1}]},this._alarmValuesGridContainer);a.startup();this._alarmValuesGrid=a;this._grids.push(this._alarmValuesGrid);this.own(x(a,".dgrid-column-valueCol:dgrid-datachange",k.hitch(this,this._onlifeAlarmValuesChanged)));a=new (b([r,m,l]))({columns:[p({id:"valueCol",label:"Alarm safety values",field:"value",width:10,editor:d,editOn:"click",editorArgs:{store:this._stores[this._stores.length-1],baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!0},formatter:k.hitch(this,
this._formatlifeSafetyAlarmValueCell)})],store:new A(new v({idProperty:"rowId"})),sort:[{attribute:"rowId",descending:!1}]},this._alarmSaftyValuesGridContainer);a.startup();this.own(x(a,".dgrid-column-valueCol:dgrid-datachange",k.hitch(this,this._onlifeSafetyAlarmValuesChanged)));this._alarmSafetyValuesGrid=a;this._grids.push(this._alarmSafetyValuesGrid)},_createBitStringGrid:function(){var a=new (b([r,m,l]))({columns:[p({editor:n,editOn:"click",id:"valueCol",field:"value",label:"Bit string ex. 1,1,1",
className:"colourlessLink",editorArgs:{baseClass:"rcTextBox",pattern:"((0|1),){0,31}(0|1)"}})],store:new A(new v({idProperty:"rowId"})),sort:[{attribute:"rowId",descending:!1}]},this._bitStringGridContainer);a.startup();this.own(x(a,".dgrid-column-valueCol:dgrid-datachange",k.hitch(this,this._onBitStringGridValueChanged)));return a},initialize:function(a,b,c){a?(this._eventParameter=a,this._timeDelayNormal=b.v,this._faultParameter=c,this._setValues(a.c,a.d,c)):(this.reset(),this._showBitString());
this.resizeGrids()},_setValues:function(a,b,c){c&&c.faultType==B.faultType.OUT_OF_RANGE&&(a=this._showFunctions.length-1,b=c.d);this._showFunctions[a]?(this._choice=a,(a=this._showFunctions[a])&&a(null,b)):console.error("Unsupported event parameter type")},getValues:function(){return this._getParameterValues(this._choice)},_getParameterValues:function(b){var c=new M(B.propertyTypes.PROPID_PRESENT_VALUE),d=[],g,h=new f,q=new K(parseInt(this._timeDelayTB.get("value"),10),B.primitiveTypes.UNSIGNED_INTEGER),
n=parseInt(this._timeDelayNormalTB.get("value"),10);this._dopr||(this._dopr=new H);var l=function(a,b){a?h.resolve({eventParameter:a,timeDelayNormal:n,faultParameter:b}):h.reject([])};switch(b){case B.eventType.CHANGE_OF_BITSTRING:g=this._getGridItems(this._bitStringGrid,"value");g.then(k.hitch(this,function(){var f=c.bitArrayToBacnetBitString(this._bitStringBitmaskTB.get("value").split(","),new D([],B.primitiveTypes.BIT_STRING)),g=new I(new D([],B.primitiveTypes.BIT_STRING));a.forEach(this._gridItems,
function(a){g.l.push(c.bitArrayToBacnetBitString(a.split(","),new D([],B.primitiveTypes.BIT_STRING)))},this);d=[q,f,g];l(new J(b,d),new G)}));break;case B.eventType.CHANGE_OF_STATE:g=this._getGridItems(this._stateGrid,"object");g.then(k.hitch(this,function(c){var f=new I(new L);a.forEach(c,function(a){f.l.push(new L(a.state,a.value))},this);d=[q,f];l(new J(b,d),new G)}));break;case B.eventType.CHANGE_OF_VALUE:var t=(g=this._realRB.get("checked")?1:0)?this._createBacnetNumber(this._realIncTB.get("value"),
B.primitiveTypes.REAL):c.bitArrayToBacnetBitString(this._bitmaskTB.get("value").split(","),new D([],B.primitiveTypes.BIT_STRING));g=new F(g,t);d=[q,g];l(new J(b,d),new G);break;case B.eventType.COMMAND_FAILURE:d=[q,this._dopr];l(new J(b,d),new G);break;case B.eventType.FLOATING_LIMIT:g=this._createBacnetNumber(this._lowLimitTB.get("value"),B.primitiveTypes.REAL);var t=this._createBacnetNumber(this._highLimitTB.get("value"),B.primitiveTypes.REAL),m=this._createBacnetNumber(this._deadbandTB.get("value"),
B.primitiveTypes.REAL),d=[q,this._dopr,g,t,m];l(new J(b,d),new G);break;case B.eventType.OUT_OF_RANGE:g=this._createBacnetNumber(this._lowLimitTB.get("value"),B.primitiveTypes.REAL);t=this._createBacnetNumber(this._highLimitTB.get("value"),B.primitiveTypes.REAL);m=this._createBacnetNumber(this._deadbandTB.get("value"),B.primitiveTypes.REAL);d=[q,g,t,m];l(new J(b,d),new G);break;case B.eventType.CHANGE_OF_LIFE_SAFETY:g=this._getGridItems(this._alarmSafetyValuesGrid,"value");g.then(k.hitch(this,function(c){var f=
new I(new K(0,B.primitiveTypes.ENUMERATED));a.forEach(c,function(a){a=parseInt(a,10);f.l.push(new K(a,B.primitiveTypes.ENUMERATED))},this);this._getGridItems(this._alarmValuesGrid,"value").then(k.hitch(this,function(c){var g=new I(new K(0,B.primitiveTypes.ENUMERATED));a.forEach(c,function(a){a=parseInt(a,10);g.l.push(new K(a,B.primitiveTypes.ENUMERATED))},this);d=[q,f,g,this._dopr];l(new J(b,d),new G)}))}));break;case B.eventType.UNSIGNED_OUT_OF_RANGE:g=this._createBacnetNumber(this._lowLimitTB.get("value"),
B.primitiveTypes.UNSIGNED_INTEGER);t=this._createBacnetNumber(this._highLimitTB.get("value"),B.primitiveTypes.UNSIGNED_INTEGER);m=this._createBacnetNumber(this._deadbandTB.get("value"),B.primitiveTypes.UNSIGNED_INTEGER);d=[q,g,t,m];l(new J(b,d),new G);break;case B.eventType.BUFFER_READY:g=new K(parseInt(this._thresholdTB.get("value"),10),B.primitiveTypes.UNSIGNED_INTEGER);t=new K(parseInt(this._countTB.get("value"),10),B.primitiveTypes.UNSIGNED_INTEGER);d=[g,t];l(new J(b,d),new G);break;case B.eventType.UNSIGNED_RANGE:g=
this._createBacnetNumber(this._lowLimitTB.get("value"),B.primitiveTypes.UNSIGNED_INTEGER);t=this._createBacnetNumber(this._highLimitTB.get("value"),B.primitiveTypes.UNSIGNED_INTEGER);m=this._createBacnetNumber(this._deadbandTB.get("value"),B.primitiveTypes.UNSIGNED_INTEGER);d=[q,g,t,m];l(new J(b,d),new G);break;case B.eventType.DOUBLE_OUT_OF_RANGE:g=this._createBacnetNumber(this._lowLimitTB.get("value"),B.primitiveTypes.DOUBLE);t=this._createBacnetNumber(this._highLimitTB.get("value"),B.primitiveTypes.DOUBLE);
m=this._createBacnetNumber(this._deadbandTB.get("value"),B.primitiveTypes.DOUBLE);d=[q,g,t,m];l(new J(b,d),new G);break;case B.eventType.SIGNED_OUT_OF_RANGE:g=this._createBacnetNumber(this._lowLimitTB.get("value"),B.primitiveTypes.SIGNED_INTEGER);t=this._createBacnetNumber(this._highLimitTB.get("value"),B.primitiveTypes.SIGNED_INTEGER);m=this._createBacnetNumber(this._deadbandTB.get("value"),B.primitiveTypes.UNSIGNED_INTEGER);d=[q,g,t,m];l(new J(b,d),new G);break;default:g=this._createBacnetNumber(this._lowLimitTB.get("value"),
B.primitiveTypes.UNSIGNED_INTEGER),t=this._createBacnetNumber(this._highLimitTB.get("value"),B.primitiveTypes.UNSIGNED_INTEGER),d=[g,t],l(this._eventParameter,new G(B.faultType.OUT_OF_RANGE,d))}return h.promise},_createBacnetNumber:function(a,b){var c=this._getInfinityValues(a),c=parseFloat(c);return new K(c,b)},_getGridItems:function(a,b){var c=new f;this._gridItems=[];a.store.query(null).forEach(k.hitch(this,function(a){this._gridItems.push(a[b])}));c.resolve(this._gridItems);return c.promise},
getObject:function(){return this.getValues()},_bitStringToString:function(a){return 1===a.ary.length?"0":(new M(B.propertyTypes.PROPID_PRESENT_VALUE)).bitStringToString(a)},_getInfinityValues:function(a){"infinity"==a?a=3.40282E39:"-infinity"==a&&(a=-3.4028234E39);return a},_showBitString:function(a,b){this._choice=B.eventType.CHANGE_OF_BITSTRING;this._bitStringRB.set("checked",!0);this._currentGrid=this._bitStringGrid;this._currentNewItem=this._newBitStringItem;if(b){this._timeDelayTB.set("value",
b[0].v);this._timeDelayNormalTB.set("value",this._timeDelayNormal);this._bitStringBitmaskTB.set("value",this._bitStringToString(b[1]));var c=b[2].l;if(c.length)for(var f=this._bitStringGrid.store.data.length,d=0;d<c.length;d++)this._bitStringGrid.store.put({rowId:f+d,value:this._bitStringToString(c[d])});else this._addNewGridRow()}else this._bitStringGrid.store.data.length||this._addNewGridRow();this._show(this._changeOfBitString)},_showState:function(a,b){this._closeChangeOfStateSelects();this._choice=
B.eventType.CHANGE_OF_STATE;this._stateRB.set("checked",!0);this._currentGrid=this._stateGrid;this._currentNewItem=this._newStateItem;var c,f,d,g;if(b){this._timeDelayTB.set("value",b[0].v);this._timeDelayNormalTB.set("value",this._timeDelayNormal);var k=b[1].l;if(k.length)for(var h=0;h<k.length;h++)c=k[h],d=c.c.toString(),f=c.v.v,g={state:c.c,value:c.v.v},11!=c.c?(c=this._stores[c.c],f=f.toString(),c.get(f)&&this._stateGrid.store.add({state:d,value:f,object:g})):this._stateGrid.store.add({state:d,
value:f,object:g});else this._addNewGridRow()}else this._stateGrid.store.data.length||this._addNewGridRow();this._show(this._changeOfState)},_showCOVCriteria:function(a,b){this._choice=B.eventType.CHANGE_OF_VALUE;this._valueRB.set("checked",!0);if(b){this._timeDelayTB.set("value",b[0].v);this._timeDelayNormalTB.set("value",this._timeDelayNormal);var c=b[1];1==c.c?(this._realRB.set("checked",!0),this._realIncTB.set("value",c.d.v)):(this._bitmaskRB.set("checked",!0),this._bitmaskTB.set("value",this._bitStringToString(c.d)))}else this._bitmaskRB.set("checked",
!0);this._toggleCOV();this._show(this._changeOfValue)},_resetDoprEditor:function(){this._dopr=null;this._doprTB.set("value","");this._doprEditor.reset()},_showCommandFailure:function(a,b){this._choice=B.eventType.COMMAND_FAILURE;this._commandFailureRB.set("checked",!0);b&&(this._timeDelayTB.set("value",b[0].v),this._timeDelayNormalTB.set("value",this._timeDelayNormal),this._dopr=b[1],this._doprEditor.initialize(this._dopr),this._doprTB.set("value",this._doprEditor.toString()));this._doprLabel.innerHTML=
"Feedback property*:";this._show(this._commandFailure);u.remove(this._doprContainer,"hideContainer")},_showFloatingLimit:function(a,b){this._choice=B.eventType.FLOATING_LIMIT;this._floatingLimitRB.set("checked",!0);b&&(this._timeDelayTB.set("value",b[0].v),this._timeDelayNormalTB.set("value",this._timeDelayNormal),this._dopr=b[1],this._doprEditor.initialize(this._dopr),this._doprTB.set("value",this._doprEditor.toString()),this._lowLimitTB.set("value",b[2].v),this._highLimitTB.set("value",b[3].v),
this._deadbandTB.set("value",b[4].v));this._show(this._outOfRange);this._highLimitLabel.innerHTML="High differential limit:*";this._lowLimitLabel.innerHTML="Low differential limit:*";this._doprLabel.innerHTML="Setpoint reference*:";u.remove(this._doprContainer,"hideContainer");u.toggle(this._differentialContainer,"hideContainer",!1)},_showOutOfRange:function(a,b){this._choice=B.eventType.OUT_OF_RANGE;this._outOfRangeRB.set("checked",!0);this._highLimitLabel.innerHTML="High limit:*";this._lowLimitLabel.innerHTML=
"Low limit:*";b&&(this._timeDelayTB.set("value",b[0].v),this._timeDelayNormalTB.set("value",this._timeDelayNormal),this._lowLimitTB.set("value",b[1].v),this._highLimitTB.set("value",b[2].v),b[3]&&this._deadbandTB.set("value",b[3].v));u.add(this._doprContainer,"hideContainer");this._show(this._outOfRange);u.toggle(this._differentialContainer,"hideContainer",!1)},_showBufferReady:function(a,b){this._choice=B.eventType.BUFFER_READY;this._bufferReadyRB.set("checked",!0);b&&(this._thresholdTB.set("value",
b[0].v),this._countTB.set("value",b[1].v));this._show(this._bufferReady);u.add(this._timeDelayContainer,"hideContainer")},_showDoubleOutOfRange:function(a,b){this._choice=B.eventType.DOUBLE_OUT_OF_RANGE;this._doubleOutOfRangeRB.set("checked",!0);this._showOutOfRangeInputs(b);u.toggle(this._differentialContainer,"hideContainer",!1)},_showSignedOutOfRange:function(a,b){this._choice=B.eventType.SIGNED_OUT_OF_RANGE;this._signedOutOfRange.set("checked",!0);this._showOutOfRangeInputs(b);u.toggle(this._differentialContainer,
"hideContainer",!1)},_showUnsignedOutOfRange:function(a,b){this._choice=B.eventType.UNSIGNED_OUT_OF_RANGE;this._unsignedOutOfRange.set("checked",!0);this._showOutOfRangeInputs(b);u.toggle(this._differentialContainer,"hideContainer",!1)},_showUnsignedRange:function(a,b){this._choice=B.eventType.UNSIGNED_RANGE;this._unsignedOutOfRange.set("checked",!0);this._showOutOfRangeInputs(b)},_showFaultOutOfRange:function(a,b){this._choice=this._showFunctions.length-1;this._faultOutOfRange.set("checked",!0);
this._showFaultOutOfRangeInputs(b)},_showFaultOutOfRangeInputs:function(a){this._highLimitLabel.innerHTML="Max. normal value:*";this._lowLimitLabel.innerHTML="Min. normal value:*";u.toggle(this._differentialContainer,"hideContainer",!0);a&&(this._lowLimitTB.set("value",a[0].v.v),this._highLimitTB.set("value",a[1].v.v),this._timeDelayNormalTB.set("value",this._timeDelayNormal));u.add(this._doprContainer,"hideContainer");this._show(this._outOfRange);u.add(this._timeContainer,"hideContainer")},_showOutOfRangeInputs:function(a){this._highLimitLabel.innerHTML=
"High limit:*";this._lowLimitLabel.innerHTML="Low limit:*";u.toggle(this._differentialContainer,"hideContainer",!0);a&&(this._timeDelayTB.set("value",a[0].v),this._timeDelayNormalTB.set("value",this._timeDelayNormal),this._lowLimitTB.set("value",a[1].v),this._highLimitTB.set("value",a[2].v),a[3]&&this._deadbandTB.set("value",a[3].v));u.add(this._doprContainer,"hideContainer");this._show(this._outOfRange)},_showLifeSafety:function(a,b){this._choice=8;this._lifeSafetyRB.set("checked",!0);if(b){this._timeDelayTB.set("value",
b[0].v);this._timeDelayNormalTB.set("value",this._timeDelayNormal);var c=0,f,d=this._stores[this._stores.length-1],g=b[1].l;if(g.length)for(c=0;c<g.length;c++){f=g[c];f=f.v.toString();var k=d.get(f);k&&this._alarmSafetyValuesGrid.store.add({value:f})}else this._addSafetyValuesRow();g=b[2].l;if(g.length)for(c=0;c<g.length;c++)for(f=g[c],c=0;c<g.length;c++)f=g[c],f=f.v.toString(),(k=d.get(f))&&this._alarmValuesGrid.store.add({value:f});else this._addAlarmValuesRow();this._dopr=b[3];this._doprEditor.initialize(this._dopr);
this._doprTB.set("value",this._doprEditor.toString())}else this._alarmValuesGrid.store.data.length||this._addAlarmValuesRow(),this._alarmSafetyValuesGrid.store.data.length||this._addSafetyValuesRow();this._doprLabel.innerHTML="Mode property*:";this._show(this._changeOfLifeSafety);u.remove(this._doprContainer,"hideContainer")},_show:function(a){u.remove(this._timeContainer,"hideContainer");u.remove(this._timeDelayContainer,"hideContainer");u.add(this._doprContainer,"hideContainer");y(".eventParameterChoiceContext \x3e div").forEach(function(a){u.remove(a,
"eventParameterChoiceContextSelected")});u.add(a,"eventParameterChoiceContextSelected");this.resizeGrids()},isValid:function(){switch(this._choice){case B.eventType.CHANGE_OF_BITSTRING:if(this._bitStringBitmaskTB.isValid()&&this._timeDelayTB.isValid())return!0;break;case B.eventType.CHANGE_OF_STATE:if(this._timeDelayTB.isValid()&&this._valueBox.isValid()&&this._propertyStateFS.isValid())return!0;break;case B.eventType.CHANGE_OF_VALUE:if(this._realRB.get("checked")&&this._realIncTB.isValid()||this._bitmaskTB.isValid())return!0;
break;case B.eventType.COMMAND_FAILURE:if(this._timeDelayTB.isValid()&&""!=this._doprTB.get("value")&&this._doprEditor.isValid())return!0;break;case B.eventType.FLOATING_LIMIT:if(this._highLimitTB.isValid()&&this._lowLimitTB.isValid()&&this._deadbandTB.isValid()&&this._timeDelayTB.isValid()&&""!=this._doprTB.get("value")&&this._doprEditor.isValid())return!0;break;case B.eventType.UNSIGNED_RANGE:if(this._highLimitTB.isValid()&&this._lowLimitTB.isValid()&&this._timeDelayTB.isValid())return!0;break;
case B.eventType.OUT_OF_RANGE:case B.eventType.DOUBLE_OUT_OF_RANGE:case B.eventType.SIGNED_OUT_OF_RANGE:case B.eventType.UNSIGNED_OUT_OF_RANGE:if(this._highLimitTB.isValid()&&this._lowLimitTB.isValid()&&this._deadbandTB.isValid()&&this._timeDelayTB.isValid())return!0;break;case B.eventType.CHANGE_OF_LIFE_SAFETY:if(this._timeDelayTB.isValid()&&""!=this._doprTB.get("value")&&this._doprEditor.isValid())return!0;break;case B.eventType.BUFFER_READY:if(this._thresholdTB.isValid()&&this._countTB.isValid())return!0;
break;default:if(this._choice==this._showFunctions.length-1)return!0}return!1},reset:function(){this._resetDoprEditor();this._timeDelayTB.set("value",0);this._timeDelayNormalTB.set("value",0);a.forEach(this._grids,function(a){for(var b=a.store.query(null),c=b.length-1;0<=c;--c)a.store.remove(b[c].rowId)},this);this._bitmaskRB.set("checked",!0);this._bitmaskTB.set("value",0);this._bitStringBitmaskTB.set("value",0);this._realIncTB.set("value",0);this._highLimitTB.set("value",0);this._lowLimitTB.set("value",
0);this._deadbandTB.set("value",0);this._thresholdTB.set("value",0);this._countTB.set("value",0)},_onClickEditObjectProperty:function(){this._dopr||this._doprEditor.reset();this._doprDialog.show()},_toggleCOV:function(){this._bitmaskRB.get("checked")?(u.remove(this.bitmaskTBContainer,"hideContainer"),u.add(this.incrementTBContainer,"hideContainer")):(u.remove(this.incrementTBContainer,"hideContainer"),u.add(this.bitmaskTBContainer,"hideContainer"))},_onClickAddRow:function(){this._addNewGridRow()},
_addNewGridRow:function(){var a=this._currentGrid.store.data.length,b=k.clone(this._currentNewItem);b.rowId=a;this._currentGrid.store.put(b)},_addAlarmValuesRow:function(){var a=this._alarmValuesGrid.store.data.length,b=k.clone(this._newAlarmValueItem);b.rowId=a;this._alarmValuesGrid.store.put(b)},_addSafetyValuesRow:function(){var a=this._alarmSafetyValuesGrid.store.data.length,b=k.clone(this._newAlarmValueItem);b.rowId=a;this._alarmSafetyValuesGrid.store.put(b)},_onClickDeleteRow:function(){for(var a=
Object.keys(this._currentGrid.selection),b=a.length-1;0<=b;--b)this._currentGrid.store.remove(a[b])},_deleteAlarmValueRow:function(){for(var a=Object.keys(this._alarmValuesGrid.selection),b=a.length-1;0<=b;--b)this._alarmValuesGrid.store.remove(a[b])},_deleteSafetyValueRow:function(){for(var a=Object.keys(this._alarmSafetyValuesGrid.selection),b=a.length-1;0<=b;--b)this._alarmSafetyValuesGrid.store.remove(a[b])},_onClickOkDOPR:function(){this._doprEditor.isValid()&&(this._dopr=this._doprEditor.getObject(),
this._doprTB.set("value",this._doprEditor.toString()),this._doprDialog.hide())},_onClickCancelDOPR:function(){this._doprDialog.hide()}})})},"dojox/grid/cells/dijit":function(){define("dojo/_base/kernel ../../main dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/json dojo/_base/connect dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/data/ItemFileReadStore dijit/form/DateTextBox dijit/form/TimeTextBox dijit/form/ComboBox dijit/form/CheckBox dijit/form/TextBox dijit/form/NumberSpinner dijit/form/NumberTextBox dijit/form/CurrencyTextBox dijit/form/HorizontalSlider dijit/form/_TextBoxMixin dijit/Editor ../util ./_base".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F){p={};var H=p._Widget=m("dojox.grid.cells._Widget",F,{widgetClass:x,constructor:function(a){this.widget=null;"string"==typeof this.widgetClass&&(r.deprecated("Passing a string to widgetClass is deprecated","pass the widget class object instead","2.0"),this.widgetClass=h.getObject(this.widgetClass))},formatEditing:function(a,b){this.needFormatNode(a,b);return"\x3cdiv\x3e\x3c/div\x3e"},getValue:function(a){return this.widget.get("value")},
_unescapeHTML:function(a){return a&&a.replace&&this.grid.escapeHTMLInData?a.replace(/&lt;/g,"\x3c").replace(/&amp;/g,"\x26"):a},setValue:function(a,b){if(this.widget&&this.widget.set)if(b=this._unescapeHTML(b),this.widget.onLoadDeferred){var c=this;this.widget.onLoadDeferred.addCallback(function(){c.widget.set("value",null===b?"":b)})}else this.widget.set("value",b);else this.inherited(arguments)},getWidgetProps:function(a){return h.mixin({dir:this.dir,lang:this.lang},this.widgetProps||{},{constraints:h.mixin({},
this.constraint)||{},required:(this.constraint||{}).required,value:this._unescapeHTML(a)})},createWidget:function(a,b,c){return new this.widgetClass(this.getWidgetProps(b),a)},attachWidget:function(a,b,c){a.appendChild(this.widget.domNode);this.setValue(c,b)},formatNode:function(a,b,c){if(!this.widgetClass)return b;this.widget?this.attachWidget.apply(this,arguments):this.widget=this.createWidget.apply(this,arguments);this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(c);this.grid.scroller.rowHeightChanged(c,
!0);this.focus()},sizeWidget:function(a,b,c){a=this.getNode(c);r.marginBox(this.widget.domNode,{w:t.get(a,"width")})},focus:function(a,b){this.widget&&setTimeout(h.hitch(this.widget,function(){D.fire(this,"focus");this.focusNode&&"INPUT"===this.focusNode.tagName&&E.selectInputText(this.focusNode)}),0)},_finish:function(a){this.inherited(arguments);D.removeNode(this.widget.domNode);d("ie")&&n.setSelectable(this.widget.domNode,!0)}});H.markupFactory=function(b,f){F.markupFactory(b,f);var d=h.trim(a.get(b,
"widgetProps")||""),g=h.trim(a.get(b,"constraint")||""),k=h.trim(a.get(b,"widgetClass")||"");d&&(f.widgetProps=c.fromJson(d));g&&(f.constraint=c.fromJson(g));k&&(f.widgetClass=h.getObject(k))};w=p.ComboBox=m("dojox.grid.cells.ComboBox",H,{widgetClass:w,getWidgetProps:function(a){var b=[];l.forEach(this.options,function(a){b.push({name:a,value:a})});var c=new q({data:{identifier:"name",items:b}});return h.mixin({},this.widgetProps||{},{value:a,store:c})},getValue:function(){var a=this.widget;a.set("displayedValue",
a.get("displayedValue"));return a.get("value")}});w.markupFactory=function(b,c){H.markupFactory(b,c);var f=h.trim(a.get(b,"options")||"");if(f){var d=f.split(",");d[0]!=f&&(c.options=d)}};f=p.DateTextBox=m("dojox.grid.cells.DateTextBox",H,{widgetClass:f,setValue:function(a,b){this.widget?this.widget.set("value",new Date(b)):this.inherited(arguments)},getWidgetProps:function(a){return h.mixin(this.inherited(arguments),{value:new Date(a)})}});f.markupFactory=function(a,b){H.markupFactory(a,b)};z=p.CheckBox=
m("dojox.grid.cells.CheckBox",H,{widgetClass:z,getValue:function(){return this.widget.checked},setValue:function(a,b){this.widget&&this.widget.attributeMap.checked?this.widget.set("checked",b):this.inherited(arguments)},sizeWidget:function(a,b,c){}});z.markupFactory=function(a,b){H.markupFactory(a,b)};B=p.Editor=m("dojox.grid.cells.Editor",H,{widgetClass:B,getWidgetProps:function(a){return h.mixin({},this.widgetProps||{},{height:this.widgetHeight||"100px"})},createWidget:function(a,b,c){a=new this.widgetClass(this.getWidgetProps(b),
a);a.onLoadDeferred.then(h.hitch(this,"populateEditor"));return a},formatNode:function(a,c,f){this.content=c;this.inherited(arguments);if(d("mozilla")){var g=this.widget;g.open();this.widgetToolbar&&b.place(g.toolbar.domNode,g.editingArea,"before")}},populateEditor:function(){this.widget.set("value",this.content);this.widget.placeCursorAtEnd()}});B.markupFactory=function(b,c){H.markupFactory(b,c);var f=h.trim(a.get(b,"widgetHeight")||"");f&&("auto"!=f&&"em"!=f.substr(-2)&&(f=parseInt(f,10)+"px"),
c.widgetHeight=f)};return p})},"dijit/form/CurrencyTextBox":function(){define(["dojo/currency","dojo/_base/declare","dojo/_base/lang","./NumberTextBox"],function(r,p,m,l){return p("dijit.form.CurrencyTextBox",l,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",_formatter:r.format,_parser:r.parse,_regExpGenerator:r.regexp,parse:function(h,c){var g=this.inherited(arguments);isNaN(g)&&/\d+/.test(h)&&(g=m.hitch(m.delegate(this,{_parser:l.prototype._parser}),"inherited")(arguments));return g},
_setConstraintsAttr:function(h){!h.currency&&this.currency&&(h.currency=this.currency);this.inherited(arguments,[r._mixInDefaults(m.mixin(h,{exponent:!1}))])}})})},"dojo/currency":function(){define("./_base/array ./_base/lang ./number ./i18n ./i18n!./cldr/nls/currency ./cldr/monetary".split(" "),function(r,p,m,l,h,c){var g={};p.setObject("dojo.currency",g);g._mixInDefaults=function(d){d=d||{};d.type="currency";var g=l.getLocalization("dojo.cldr","currency",d.locale)||{},a=d.currency,b=c.getData(a);
r.forEach(["displayName","symbol","group","decimal"],function(c){b[c]=g[a+"_"+c]});b.fractional=[!0,!1];return p.mixin(b,d)};g.format=function(c,h){return m.format(c,g._mixInDefaults(h))};g.regexp=function(c){return m.regexp(g._mixInDefaults(c))};g.parse=function(c,h){return m.parse(c,g._mixInDefaults(h))};return g})},"dojo/cldr/monetary":function(){define(["../_base/kernel","../_base/lang"],function(r,p){var m={};p.setObject("dojo.cldr.monetary",m);m.getData=function(l){var h={ADP:0,AFN:0,ALL:0,
AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:2,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0}[l];l={}[l];"undefined"==typeof h&&(h=2);"undefined"==typeof l&&(l=0);return{places:h,round:l}};return m})},"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B){function D(a){return new y({command:a.name})}function F(a){return new y({buttonClass:x,command:a.name})}m=m("dijit.Editor",E,{plugins:null,extraPlugins:null,constructor:function(){b.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",v]);this._plugins=
[];this._editInterval=1E3*this.editActionInterval;if(t("ie")||t("trident")||t("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new l;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);b.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=h.getLocalization("dijit._editor",
"commands",this.lang);t("webkit")&&n.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new u({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));p.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);g.add(this.iframe.parentNode,"dijitEditorIFrameContainer");g.add(this.iframe,"dijitEditorIFrame");c.set(this.iframe,"allowTransparency",
!0);this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){p.forEach(this._plugins,function(a){a&&a.destroy&&a.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(a,c){var f=b.isString(a)?{name:a}:b.isFunction(a)?{ctor:a}:a;if(!f.setEditor){var d={args:f,plugin:null,editor:this};f.name&&(y.registry[f.name]?d.plugin=y.registry[f.name](f):q.publish(B._scopeName+".Editor.getPlugin",d));if(!d.plugin)try{var g=
f.ctor||b.getObject(f.name)||r(f.name);g&&(d.plugin=new g(f))}catch(L){throw Error(this.id+": cannot find plugin ["+f.name+"]");}if(!d.plugin)throw Error(this.id+": cannot find plugin ["+f.name+"]");a=d.plugin}1<arguments.length?this._plugins[c]=a:this._plugins.push(a);a.setEditor(this);b.isFunction(a.setToolbar)&&a.setToolbar(this.toolbar)},resize:function(a){a&&z.prototype.resize.apply(this,arguments)},layout:function(){var a=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+d.getPadBorderExtents(this.iframe.parentNode).h+
d.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=a+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(a){var b,c=this.document.body,f=c.clientWidth,d=c.clientHeight,g=c.clientLeft,k=c.offsetWidth,h=c.offsetHeight,q=c.offsetLeft;/^rtl$/i.test(c.dir||"")?f<k&&a.x>f&&a.x<k&&(b=!0):a.x<g&&a.x>q&&(b=!0);b||d<h&&a.y>d&&a.y<h&&(b=!0);b||(delete this._cursorToStart,delete this._savedSelection,"BODY"==a.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(a){this.customUndo&&this.endEditing(!0);"BODY"!=a.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(a){this._inEditing||(this._inEditing=!0,this._beginEditing(a));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(a){if(!this.customUndo||
"undo"!=a&&"redo"!=a){this.customUndo&&(this.endEditing(),this._beginEditing());var b=this.inherited(arguments);this.customUndo&&this._endEditing();return b}return this[a]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(a){var b;try{if(b=this.document.execCommand(a,!1,null),t("webkit")&&!b)throw{};}catch(G){b=k.substitute,alert(b(this.commands.systemShortcut,
[this.commands[a],b(this.commands[t("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[a]])])),b=!1}return b},queryCommandEnabled:function(a){return!this.customUndo||"undo"!=a&&"redo"!=a?this.inherited(arguments):"undo"==a?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(a){var c=a.mark,f=a.mark;a=a.isCollapsed;var d,g,k;f&&(9>t("ie")||9===t("ie")&&t("quirks")?b.isArray(f)?(c=[],p.forEach(f,function(a){c.push(C.getNode(a,this.editNode))},this),this.selection.moveToBookmark({mark:c,
isCollapsed:a})):f.startContainer&&f.endContainer&&(k=C.getSelection(this.window))&&k.removeAllRanges&&(k.removeAllRanges(),a=C.create(this.window),d=C.getNode(f.startContainer,this.editNode),g=C.getNode(f.endContainer,this.editNode),d&&g&&(a.setStart(d,f.startOffset),a.setEnd(g,f.endOffset),k.addRange(a))):(k=C.getSelection(this.window))&&k.removeAllRanges&&(k.removeAllRanges(),a=C.create(this.window),d=C.getNode(f.startContainer,this.editNode),g=C.getNode(f.endContainer,this.editNode),d&&g&&(a.setStart(d,
f.startOffset),a.setEnd(g,f.endOffset),k.addRange(a))))},_changeToStep:function(a,b){this.setValue(b.text);var c=b.bookmark;c&&this._moveToBookmark(c)},undo:function(){var a=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._steps.pop();b&&0<this._steps.length&&(this.focus(),this._changeToStep(b,this._steps[this._steps.length-1]),this._undoedSteps.push(b),this.onDisplayChanged(),delete this._undoRedoActive,a=!0);delete this._undoRedoActive}return a},redo:function(){var a=
!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._undoedSteps.pop();b&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],b),this._steps.push(b),this.onDisplayChanged(),a=!0);delete this._undoRedoActive}return a},endEditing:function(a){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(a),this._inEditing=!1)},_getBookmark:function(){var a=this.selection.getBookmark(),c=[];if(a&&a.mark){var f=
a.mark;if(9>t("ie")||9===t("ie")&&t("quirks")){var d=C.getSelection(this.window);if(b.isArray(f))p.forEach(a.mark,function(a){c.push(C.getIndex(a,this.editNode).o)},this),a.mark=c;else if(d){var g;d.rangeCount&&(g=d.getRangeAt(0));a.mark=g?g.cloneRange():this.selection.getBookmark()}}try{a.mark&&a.mark.startContainer&&(c=C.getIndex(a.mark.startContainer,this.editNode).o,a.mark={startContainer:c,startOffset:a.mark.startOffset,endContainer:a.mark.endContainer===a.mark.startContainer?c:C.getIndex(a.mark.endContainer,
this.editNode).o,endOffset:a.mark.endOffset})}catch(L){a.mark=null}}return a},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:A.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var a=A.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(b){t("ie")||this.iframe||b.keyCode!=a.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var c=b.keyCode;if(b.ctrlKey&&
!b.shiftKey&&!b.altKey){if(90==c||122==c){b.stopPropagation();b.preventDefault();this.undo();return}if(89==c||121==c){b.stopPropagation();b.preventDefault();this.redo();return}}this.inherited(arguments);switch(c){case a.ENTER:case a.BACKSPACE:case a.DELETE:this.beginEditing();break;case 88:case 86:if(b.ctrlKey&&!b.altKey&&!b.metaKey){this.endEditing();88==b.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!b.ctrlKey&&!b.altKey&&!b.metaKey&&(b.keyCode<
a.F1||b.keyCode>a.F15)){this.beginEditing();break}case a.ALT:this.endEditing();break;case a.UP_ARROW:case a.DOWN_ARROW:case a.LEFT_ARROW:case a.RIGHT_ARROW:case a.HOME:case a.END:case a.PAGE_UP:case a.PAGE_DOWN:this.endEditing(!0);case a.CTRL:case a.SHIFT:case a.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(H){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(a){this.customUndo?this.isClosed?this.setValue(a):(this.beginEditing(),a||(a="\x26#160;"),this.setValue(a),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(a){this.setValueDeferred.then(b.hitch(this,function(){!this.disabled&&a||!this._buttonEnabledPlugins&&a?
p.forEach(this._plugins,function(a){a.set("disabled",!0)}):this.disabled&&!a&&p.forEach(this._plugins,function(a){a.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&n.set(this.document.body,"color",n.get(this.iframe,"color"))}catch(H){}}});b.mixin(y.registry,{undo:D,redo:D,cut:D,copy:D,paste:D,insertOrderedList:D,insertUnorderedList:D,indent:D,outdent:D,justifyCenter:D,justifyFull:D,justifyLeft:D,justifyRight:D,
"delete":D,selectAll:D,removeFormat:D,unlink:D,insertHorizontalRule:D,bold:F,italic:F,underline:F,strikethrough:F,subscript:F,superscript:F,"|":function(){return new y({setEditor:function(a){this.editor=a;this.button=new w({ownerDocument:a.ownerDocument})}})}});return m})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(r,p,m,l,h,c,g,d){m("dijit-legacy-requires")&&h(0,function(){r(["dijit/ToolbarSeparator"])});
return p("dijit.Toolbar",[c,d,g],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(r,p,m,l){return r("dijit.ToolbarSeparator",[m,l],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',
buildRendering:function(){this.inherited(arguments);p.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(r,p,m,l,h){p=p("dijit._editor._Plugin",l,{constructor:function(c){this.params=c||{};m.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:h,
disabled:!1,getLabel:function(c){return this.editor.commands[c]},_initButton:function(){if(this.command.length){var c=this.getLabel(this.command),g=this.editor,d=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(c=m.mixin({label:c,ownerDocument:g.ownerDocument,dir:g.dir,lang:g.lang,showLabel:!1,iconClass:d,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete c.name,this.button=new this.buttonClass(c))}this.get("disabled")&&
this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(c,g,d){this.own(r.connect(c,g,this,d))},updateState:function(){var c=this.editor,g=this.command,d,h;if(c&&c.isLoaded&&g.length){var a=this.get("disabled");if(this.button)try{h=!a&&c.queryCommandEnabled(g),this.enabled!==h&&(this.enabled=h,this.button.set("disabled",!h)),h&&"boolean"==typeof this.button.checked&&(d=c.queryCommandState(g),
this.checked!==d&&(this.checked=d,this.button.set("checked",c.queryCommandState(g))))}catch(b){}}},setEditor:function(c){this.editor=c;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",m.hitch(this.editor,"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",m.hitch(this,"updateState")))},setToolbar:function(c){this.button&&c.addChild(this.button)},
set:function(c,g){if("object"===typeof c){for(var d in c)this.set(d,c[d]);return this}d=this._getAttrNames(c);if(this[d.s])var h=this[d.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(c,g);return h||this},get:function(c){var g=this._getAttrNames(c);return this[g.g]?this[g.g]():this[c]},_setDisabledAttr:function(c){this._set("disabled",c);this.updateState()},_getAttrNames:function(c){var g=this._attrPairNames;if(g[c])return g[c];var d=c.charAt(0).toUpperCase()+c.substr(1);return g[c]=
{s:"_set"+d+"Attr",g:"_get"+d+"Attr"}},_set:function(c,g){this[c]=g}});p.registry={};return p})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),function(r,p,m,l,h,c,g,d,n,a,b){return r("dijit._editor.plugins.EnterKeyHandling",n,{blockNodeForEnter:"BR",constructor:function(a){a&&("blockNodeForEnter"in a&&(a.blockNodeForEnter=a.blockNodeForEnter.toUpperCase()),
l.mixin(this,a))},setEditor:function(a){if(this.editor!==a)if(this.editor=a,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,a.onLoadDeferred.then(l.hitch(this,function(b){this.own(h(a.document,"keydown",l.hitch(this,function(a){if(a.keyCode==m.ENTER){var b=l.mixin({},a);b.shiftKey=!0;this.handleEnterKey(b)||(a.stopPropagation(),a.preventDefault())}})));9<=c("ie")&&10>=c("ie")&&this.own(h(a.document,"paste",l.hitch(this,function(a){setTimeout(l.hitch(this,function(){var a=this.editor.document.selection.createRange();
a.move("character",-1);a.select();a.move("character",1);a.select()}),0)})));return b}));else if(this.blockNodeForEnter){var b=l.hitch(this,"handleEnterKey");a.addKeyHandler(13,0,0,b);a.addKeyHandler(13,0,1,b);this.own(this.editor.on("KeyPressed",l.hitch(this,"onKeyPressed")))}},onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var d=this.editor.selection.getAncestorElement("LI");if(d){c("mozilla")&&"LI"==d.parentNode.parentNode.nodeName&&(d=d.parentNode.parentNode);
var g=d.firstChild;!g||1!=g.nodeType||"UL"!=g.nodeName&&"OL"!=g.nodeName||(d.insertBefore(g.ownerDocument.createTextNode("\u00a0"),g),g=b.create(this.editor.window),g.setStart(d.firstChild,0),d=b.getSelection(this.editor.window,!0),d.removeAllRanges(),d.addRange(g))}else a.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter),(d=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(d.innerHTML=this.bogusHtmlContent,9>=c("ie")&&(d=this.editor.document.selection.createRange(),
d.move("character",-1),d.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(g){var k,h,f,n,l=this.editor.document,t,m,r;if(g.shiftKey){g=this.editor.selection.getParentElement();if(n=b.getAncestor(g,
this.blockNodes)){if("LI"==n.tagName)return!0;g=b.getSelection(this.editor.window);k=g.getRangeAt(0);k.collapsed||(k.deleteContents(),g=b.getSelection(this.editor.window),k=g.getRangeAt(0));if(b.atBeginningOfContainer(n,k.startContainer,k.startOffset))t=l.createElement("br"),k=b.create(this.editor.window),n.insertBefore(t,n.firstChild),k.setStartAfter(t),g.removeAllRanges(),g.addRange(k);else if(b.atEndOfContainer(n,k.startContainer,k.startOffset))k=b.create(this.editor.window),t=l.createElement("br"),
n.appendChild(t),n.appendChild(l.createTextNode("\u00a0")),k.setStart(n.lastChild,0),g.removeAllRanges(),g.addRange(k);else return(m=k.startContainer)&&3==m.nodeType?(r=m.nodeValue,h=l.createTextNode(r.substring(0,k.startOffset)),f=l.createTextNode(r.substring(k.startOffset)),n=l.createElement("br"),""==f.nodeValue&&c("webkit")&&(f=l.createTextNode("\u00a0")),p.place(h,m,"after"),p.place(n,h,"after"),p.place(f,n,"after"),p.destroy(m),k=b.create(this.editor.window),k.setStart(f,0),g.removeAllRanges(),
g.addRange(k),!1):!0}else g=b.getSelection(this.editor.window),g.rangeCount?(k=g.getRangeAt(0))&&k.startContainer&&(k.collapsed||(k.deleteContents(),g=b.getSelection(this.editor.window),k=g.getRangeAt(0)),(m=k.startContainer)&&3==m.nodeType?(n=k.startOffset,m.length<n&&(f=this._adjustNodeAndOffset(m,n),m=f.node,n=f.offset),r=m.nodeValue,h=l.createTextNode(r.substring(0,n)),f=l.createTextNode(r.substring(n)),n=l.createElement("br"),f.length||(f=l.createTextNode("\u00a0")),h.length?p.place(h,m,"after"):
h=m,p.place(n,h,"after"),p.place(f,n,"after"),p.destroy(m)):(0<=k.startOffset&&(t=m.childNodes[k.startOffset]),n=l.createElement("br"),f=l.createTextNode("\u00a0"),t?(p.place(n,t,"before"),p.place(f,n,"after")):(m.appendChild(n),m.appendChild(f))),k=b.create(this.editor.window),k.setStart(f,0),k.setEnd(f,f.length),g.removeAllRanges(),g.addRange(k),this.editor.selection.collapse(!0)):a.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var v=!0;g=b.getSelection(this.editor.window);
k=g.getRangeAt(0);k.collapsed||(k.deleteContents(),g=b.getSelection(this.editor.window),k=g.getRangeAt(0));t=b.getBlockAncestor(k.endContainer,null,this.editor.editNode);var A=t.blockNode;if(this._checkListLater=A&&("LI"==A.nodeName||"LI"==A.parentNode.nodeName))return c("mozilla")&&(this._pressedEnterInBlock=A),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(A.innerHTML)&&(A.innerHTML="",c("webkit")&&(k=b.create(this.editor.window),
k.setStart(A,0),g.removeAllRanges(),g.addRange(k)),this._checkListLater=!1),!0;if(!t.blockNode||t.blockNode===this.editor.editNode){try{a.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(C){}t={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),blockContainer:this.editor.editNode};if(t.blockNode){if(t.blockNode!=this.editor.editNode&&!(t.blockNode.textContent||t.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(t.blockNode),
!1}else t.blockNode=this.editor.editNode;g=b.getSelection(this.editor.window);k=g.getRangeAt(0)}A=l.createElement(this.blockNodeForEnter);A.innerHTML=this.bogusHtmlContent;this.editor.queryCommandState("justifyleft")?A.align="left":this.editor.queryCommandState("justifyright")?A.align="right":A.align="center";this.removeTrailingBr(t.blockNode);f=k.endOffset;v=k.endContainer;v.length<f&&(f=this._adjustNodeAndOffset(v,f),v=f.node,f=f.offset);if(b.atEndOfContainer(t.blockNode,v,f))t.blockNode===t.blockContainer?
t.blockNode.appendChild(A):p.place(A,t.blockNode,"after"),v=!1,k=b.create(this.editor.window),k.setStart(A,0),g.removeAllRanges(),g.addRange(k),this.editor.height&&d.scrollIntoView(A);else if(b.atBeginningOfContainer(t.blockNode,k.startContainer,k.startOffset))p.place(A,t.blockNode,t.blockNode===t.blockContainer?"first":"before"),A.nextSibling&&this.editor.height&&(k=b.create(this.editor.window),k.setStart(A.nextSibling,0),g.removeAllRanges(),g.addRange(k),d.scrollIntoView(A.nextSibling)),v=!1;else{t.blockNode===
t.blockContainer?t.blockNode.appendChild(A):p.place(A,t.blockNode,"after");v=!1;t.blockNode.style&&A.style&&t.blockNode.style.cssText&&(A.style.cssText=t.blockNode.style.cssText);if((m=k.startContainer)&&3==m.nodeType){f=k.endOffset;m.length<f&&(f=this._adjustNodeAndOffset(m,f),m=f.node,f=f.offset);r=m.nodeValue;h=l.createTextNode(r.substring(0,f));f=l.createTextNode(r.substring(f,r.length));p.place(h,m,"before");p.place(f,m,"after");p.destroy(m);for(k=h.parentNode;k!==t.blockNode;){r=l.createElement(k.tagName);
k.style&&r.style&&k.style.cssText&&(r.style.cssText=k.style.cssText);"FONT"===k.tagName&&(k.color&&(r.color=k.color),k.face&&(r.face=k.face),k.size&&(r.size=k.size));for(;f;)m=f.nextSibling,r.appendChild(f),f=m;p.place(r,k,"after");h=k;f=r;k=k.parentNode}if(1==f.nodeType||3==f.nodeType&&f.nodeValue)A.innerHTML="";for(h=f;f;)m=f.nextSibling,A.appendChild(f),f=m}k=b.create(this.editor.window);l=h;if("BR"!==this.blockNodeForEnter){for(;l;)n=l,l=m=l.firstChild;n&&n.parentNode?(A=n.parentNode,k.setStart(A,
0),g.removeAllRanges(),g.addRange(k),this.editor.height&&d.scrollIntoView(A),c("mozilla")&&(this._pressedEnterInBlock=t.blockNode)):v=!0}else k.setStart(A,0),g.removeAllRanges(),g.addRange(k),this.editor.height&&d.scrollIntoView(A),c("mozilla")&&(this._pressedEnterInBlock=t.blockNode)}return v},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3==a.nextSibling.nodeType;)b-=a.length,a=a.nextSibling;return{node:a,offset:b}},removeTrailingBr:function(a){if(a=/P|DIV|LI/i.test(a.tagName)?
a:this.editor.selection.getParentOfType(a,["P","DIV","LI"]))a.lastChild&&(1<a.childNodes.length&&3==a.lastChild.nodeType&&/^[\s\xAD]*$/.test(a.lastChild.nodeValue)||"BR"==a.lastChild.tagName)&&p.destroy(a.lastChild),a.childNodes.length||(a.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J){var G=m("dijit._editor.RichText",[C,E],{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};a&&k.isString(a.value)&&(this.value=a.value);this.onLoadDeferred=new l},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){this.domNode.tagName.toLowerCase();this.contentPreFilters=[k.trim,k.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);w("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));w("webkit")&&
(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(w("ie")||w("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[k.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[k.hitch(this,"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);
x.publish(J._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=k.hitch(this,function(a,b){return function(){return!this.execCommand(a,b)}}),b={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:a("formatblock","h1"),2:a("formatblock","h2"),3:a("formatblock","h3"),4:a("formatblock","h4"),"\\":a("insertunorderedlist")};
w("ie")||(b.Z=a("redo"));for(var c in b)this.addKeyHandler(c,!0,!1,b[c])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(G._editorCommandsLocalized)this._local2NativeFormatNames=G._local2NativeFormatNames,this._native2LocalFormatNames=G._native2LocalFormatNames;else{G._editorCommandsLocalized=!0;G._local2NativeFormatNames={};G._native2LocalFormatNames={};this._local2NativeFormatNames=G._local2NativeFormatNames;this._native2LocalFormatNames=
G._native2LocalFormatNames;for(var a="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),b="",c,f=0;c=a[f++];)b="l"!==c.charAt(1)?b+("\x3c"+c+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+c+"\x3e\x3cbr/\x3e"):b+("\x3c"+c+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+c+"\x3e\x3cbr/\x3e");var g=d.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:b});this.ownerDocumentBody.appendChild(g);a=k.hitch(this,function(){for(var a=g.firstChild;a;)try{this.selection.selectElement(a.firstChild);
var b=a.tagName.toLowerCase();this._local2NativeFormatNames[b]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[b]]=b;a=a.nextSibling.nextSibling}catch(T){}d.destroy(g)});this.defer(a)}},open:function(b){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new l;this.isClosed||this.close();x.publish(J._scopeName+"._editor.RichText::open",this);1===arguments.length&&b.nodeName&&(this.domNode=b);var f=this.domNode,n;if(k.isString(this.value))n=
this.value,f.innerHTML="";else if(f.nodeName&&"textarea"==f.nodeName.toLowerCase()){var t=this.textarea=f;this.name=t.name;n=t.value;f=this.domNode=this.ownerDocument.createElement("div");f.setAttribute("widgetId",this.id);t.removeAttribute("widgetId");f.cssText=t.cssText;f.className+=" "+t.className;d.place(f,t,"before");var m=k.hitch(this,function(){a.set(t,{display:"block",position:"absolute",top:"-1000px"});if(w("ie")){var b=t.style;this.__overflow=b.overflow;b.overflow="hidden"}});w("ie")?this.defer(m,
10):m();if(t.form){var u=t.value;this.reset=function(){this.getValue()!==u&&this.replaceValue(u)};q(t.form,"submit",k.hitch(this,function(){c.set(t,"disabled",this.disabled);t.value=this.getValue()}))}}else n=F.getChildrenHtml(f),f.innerHTML="";this.value=n;f.nodeName&&"LI"===f.nodeName&&(f.innerHTML=" \x3cbr\x3e");this.header=f.ownerDocument.createElement("div");f.appendChild(this.header);this.editingArea=f.ownerDocument.createElement("div");f.appendChild(this.editingArea);this.footer=f.ownerDocument.createElement("div");
f.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!p.useXDomain||p.allowXdRichTextSave)){if((n=h.byId(J._scopeName+"._editor.RichText.value"))&&""!==n.value)for(var m=n.value.split(this._SEPARATOR),v=0,r;r=m[v++];)if(r=r.split(this._NAME_CONTENT_SEP),r[0]===this.name){this.value=r[1];m=m.splice(v,1);n.value=m.join(this._SEPARATOR);break}G._globalSaveHandler||(G._globalSaveHandler={},y.addOnUnload(function(){for(var a in G._globalSaveHandler){var b=G._globalSaveHandler[a];
k.isFunction(b)&&b()}}));G._globalSaveHandler[this.id]=k.hitch(this,"_saveContent")}this.isClosed=!1;n=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");n.id=this.id+"_iframe";n.style.border="none";n.style.width="100%";this._layoutMode?n.style.height="100%":7<=w("ie")?(this.height&&(n.style.height=this.height),this.minHeight&&(n.style.minHeight=this.minHeight)):n.style.height=this.height?this.height:this.minHeight;n.frameBorder=0;n._loadFunc=k.hitch(this,function(a){this.window=
a;this.document=a.document;this.selection=new B.SelectionManager(a);w("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});m=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");m=11>w("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+m+"');document.close()":"javascript: '"+m+"'";this.editingArea.appendChild(n);n.src=m;"LI"===f.nodeName&&(f.lastChild.style.marginTop="-1.2em");g.add(this.domNode,
this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var c=a.getComputedStyle(this.domNode),d;if(this["aria-label"])d=this["aria-label"];else{var g=f('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||h.byId(this["aria-labelledby"],this.ownerDocument);g&&(d=g.textContent||g.innerHTML||"")}var g="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+(d?" aria-label\x3d'"+z.escape(d)+"'":"")+"\x3e\x3c/div\x3e",n=[c.fontWeight,
c.fontSize,c.fontFamily].join(" "),q=c.lineHeight,q=0<=q.indexOf("px")?parseFloat(q)/parseFloat(c.fontSize):0<=q.indexOf("em")?parseFloat(q):"normal",l="",t=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(b){b=b.replace(/^;/ig,"")+";";var c=b.split(":")[0];if(c){var c=k.trim(c),c=c.toLowerCase(),f,d="";for(f=0;f<c.length;f++){var g=c.charAt(f);switch(g){case "-":f++,g=c.charAt(f).toUpperCase();default:d+=g}}a.set(t.domNode,d,"")}l+=b+";"});this.iframe.setAttribute("title",d);return["\x3c!DOCTYPE html\x3e",
"\x3chtml lang\x3d'"+(this.lang||b.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",d?"\x3ctitle\x3e"+z.escape(d)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":
"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",n,";\n",this.height||w("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",q,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",w("ie")||w("trident")||w("edge")?"":"\tli{ min-height:1.2em; }\n","\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",
d?" aria-label\x3d'"+z.escape(d)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+l+"'\x3e",g,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];this.styleSheets&&(a=this.styleSheets.split(";"),this.styleSheets="");a=a.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var b="",c=0,f,d=A.get(this.ownerDocument);f=
a[c++];)f=(new v(d.location,f)).toString(),this.editingAreaStyleSheets.push(f),b+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+f+'"/\x3e';return b},addStyleSheet:function(a){var b=a.toString(),c=A.get(this.ownerDocument);if("."===b.charAt(0)||"/"!==b.charAt(0)&&!a.host)b=(new v(c.location,b)).toString();-1<r.indexOf(this.editingAreaStyleSheets,b)||(this.editingAreaStyleSheets.push(b),this.onLoadDeferred.then(k.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(b);
else{var a=this.document.getElementsByTagName("head")[0],c=this.document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;a.appendChild(c)}})))},removeStyleSheet:function(a){var b=a.toString(),c=A.get(this.ownerDocument);if("."===b.charAt(0)||"/"!==b.charAt(0)&&!a.host)b=(new v(c.location,b)).toString();a=r.indexOf(this.editingAreaStyleSheets,b);-1!==a&&(delete this.editingAreaStyleSheets[a],f('link[href\x3d"'+b+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},
_setDisabledAttr:function(a){a=!!a;this._set("disabled",a);if(this.isLoaded){var b=w("ie")&&(this.isLoaded||!this.focusOnLoad);b&&(this.editNode.unselectable="on");this.editNode.contentEditable=!a;this.editNode.tabIndex=a?"-1":this.tabIndex;b&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(w("mozilla")&&!a&&this._mozSettingProps){a=this._mozSettingProps;for(var c in a)if(a.hasOwnProperty(c))try{this.document.execCommand(c,!1,a[c])}catch(M){}}this._disabledOK=!0}},onLoad:function(a){this.window.__registeredWindow||
(this.window.__registeredWindow=!0,this._iframeRegHandle=H.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var b=this;this.beforeIframeNode=d.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=d.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){b.editNode.focus()};this.focusNode=this.editNode;var c=this.events.concat(this.captureEvents),f=this.iframe?this.document:
this.editNode;this.own.apply(this,r.map(c,function(a){var b=a.toLowerCase().replace(/^on/,"");return q(f,b,k.hitch(this,a))},this));this.own(q(f,"mouseup",k.hitch(this,"onClick")));w("ie")&&(this.own(q(this.document,"mousedown",k.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);w("webkit")&&(this._webkitListener=this.own(q(this.document,"mouseup",k.hitch(this,"onDisplayChanged")))[0],this.own(q(this.document,"mousedown",k.hitch(this,function(a){a=a.target;!a||a!==this.document.body&&a!==
this.document||this.defer("placeCursorAtEnd")}))));if(w("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(O){}this.isLoaded=!0;this.set("disabled",this.disabled);c=k.hitch(this,function(){this.setValue(a);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&u(k.hitch(this,"defer","focus",this.updateInterval));this.value=this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(c):
c()},onKeyDown:function(a){if(a.keyCode===t.SHIFT||a.keyCode===t.ALT||a.keyCode===t.META||a.keyCode===t.CTRL)return!0;a.keyCode===t.TAB&&this.isTabIndent&&(a.stopPropagation(),a.preventDefault(),this.queryCommandEnabled(a.shiftKey?"outdent":"indent")&&this.execCommand(a.shiftKey?"outdent":"indent"));if(a.keyCode==t.TAB&&!this.isTabIndent&&!a.ctrlKey&&!a.altKey)return a.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),!0;9>w("ie")&&a.keyCode===t.BACKSPACE&&"Control"===this.document.selection.type&&
(a.stopPropagation(),a.preventDefault(),this.execCommand("delete"));w("ff")&&(a.keyCode===t.PAGE_UP||a.keyCode===t.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&a.preventDefault();var b=this._keyHandlers[a.keyCode],c=arguments;b&&!a.altKey&&r.some(b,function(b){if(!(b.shift^a.shiftKey||b.ctrl^(a.ctrlKey||a.metaKey)))return b.handler.apply(this,c)||a.preventDefault(),!0},this);this.defer("onKeyPressed",1);return!0},onKeyUp:function(){},setDisabled:function(a){b.deprecated("dijit.Editor::setDisabled is deprecated",
'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(a){this.document?c.set(this.document.body,"spellcheck",!a):this.onLoadDeferred.then(k.hitch(this,function(){c.set(this.document.body,"spellcheck",!a)}));this._set("disableSpellCheck",a)},addKeyHandler:function(a,b,c,f){"string"==typeof a&&(a=a.toUpperCase().charCodeAt(0));k.isArray(this._keyHandlers[a])||(this._keyHandlers[a]=[]);this._keyHandlers[a].push({shift:c||
!1,ctrl:b||!1,handler:f})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(a){(w("ie")||w("trident"))&&this.defer(function(){H.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var b=this.getValue(!0);if(b!==this.value)this.onChange(b);this._set("value",b)},_onFocus:function(a){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},
blur:function(){!w("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>w("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",
this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(a,b){var c=a.toLowerCase();"formatblock"===c?w("safari")&&void 0===b&&(c="heading"):"hilitecolor"!==c||w("mozilla")||(c="backcolor");return c},_qcaCache:{},queryCommandAvailable:function(a){var b=this._qcaCache[a];return void 0!==b?b:this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){switch(a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return w("ie")||w("trident")||w("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!w("webkit");default:return!1}},execCommand:function(a,b){var c;this.focused&&this.focus();a=this._normalizeCommand(a,b);if(void 0!==b){if("heading"===a)throw Error("unimplemented");"formatblock"===
a&&(w("ie")||w("trident"))&&(b="\x3c"+b+"\x3e")}var f="_"+a+"Impl";if(this[f])c=this[f](b);else if((b=1<arguments.length?b:null)||"createlink"!==a)c=this.document.execCommand(a,!1,b);this.onDisplayChanged();return c},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);var b="_"+a+"EnabledImpl";return this[b]?this[b](a):this._browserQueryCommandEnabled(a)},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);
try{return this.document.queryCommandState(a)}catch(K){return!1}},queryCommandValue:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);if(w("ie")&&"formatblock"===a)a=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(w("mozilla")&&"hilitecolor"===a){var b;try{b=this.document.queryCommandValue("styleWithCSS")}catch(L){b=!1}this.document.execCommand("styleWithCSS",!1,!0);a=this.document.queryCommandValue(a);this.document.execCommand("styleWithCSS",
!1,b)}else a=this.document.queryCommandValue(a);return a},_sCall:function(a,b){return this.selection[a].apply(this.selection,b)},placeCursorAtStart:function(){this.focus();var a=!1;if(w("mozilla"))for(var b=this.editNode.firstChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this.selection.selectElement(b);break}}else if(1===b.nodeType){var a=!0,c=b.tagName?b.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(c)?this.selection.selectElement(b):
this.selection.selectElementChildren(b);break}b=b.nextSibling}else a=!0,this.selection.selectElementChildren(this.editNode);a&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var a=!1;if(w("mozilla"))for(var b=this.editNode.lastChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this.selection.selectElement(b);break}}else if(1===b.nodeType){a=!0;this.selection.selectElement(b.lastChild||b);break}b=b.previousSibling}else a=!0,this.selection.selectElementChildren(this.editNode);
a&&this.selection.collapse(!1)},getValue:function(a){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,a):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(a){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){a=this._preFilterContent(a);var b=this.isClosed?this.domNode:this.editNode;b.innerHTML=a;this._preDomFilterContent(b)}else this.textarea.value=a;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(k.hitch(this,function(){this.setValue(a)}))},replaceValue:function(a){this.isClosed?this.setValue(a):this.window&&this.window.getSelection&&!w("mozilla")?this.setValue(a):this.window&&this.window.getSelection?(a=this._preFilterContent(a),this.execCommand("selectall"),this.execCommand("inserthtml",a),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(a);this._set("value",this.getValue(!0))},_preFilterContent:function(a){var b=
a;r.forEach(this.contentPreFilters,function(a){a&&(b=a(b))});return b},_preDomFilterContent:function(a){a=a||this.editNode;r.forEach(this.contentDomPreFilters,function(b){b&&k.isFunction(b)&&b(a)},this)},_postFilterContent:function(a,b){var c;k.isString(a)?c=a:(a=a||this.editNode,this.contentDomPostFilters.length&&(b&&(a=k.clone(a)),r.forEach(this.contentDomPostFilters,function(b){a=b(a)})),c=F.getChildrenHtml(a));k.trim(c.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(c="");r.forEach(this.contentPostFilters,
function(a){c=a(c)});return c},_saveContent:function(){var a=h.byId(J._scopeName+"._editor.RichText.value");a&&(a.value&&(a.value+=this._SEPARATOR),a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(a,b){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");b||(a=a.replace(/'/gm,"\x26#39;"));return a},getNodeHtml:function(a){b.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return F.getNodeHtml(a)},getNodeChildrenHtml:function(a){b.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return F.getChildrenHtml(a)},close:function(a){if(!this.isClosed){arguments.length||(a=!0);a&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);w("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var b=this.textarea.style;b.position="";b.left=b.top="";w("ie")&&(b.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;d.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;g.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);G._globalSaveHandler&&delete G._globalSaveHandler[this.id]},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){a=a.replace(/\sclass="webkit-block-placeholder"/gi,"");a=a.replace(/\sclass="apple-style-span"/gi,
"");return a=a.replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"\x3c$1b$2").replace(/<(\/)?em([ \>])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(a){if(!a)return!1;
var b=9>w("ie")?this.document.selection.createRange():this.document;try{return b.queryCommandEnabled(a)}catch(L){return!1}},_createlinkEnabledImpl:function(){var a=!0;return a=w("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var a=!0;return a=w("mozilla")||w("webkit")?this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var a=
!0;return a=w("mozilla")||w("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var a=!0;w("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("cut");return a},_copyEnabledImpl:function(){var a=!0;w("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("copy");return a},_pasteEnabledImpl:function(){var a=!0;return w("webkit")?!0:a=this._browserQueryCommandEnabled("paste")},
_inserthorizontalruleImpl:function(a){return w("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,a)},_unlinkImpl:function(a){return this.queryCommandEnabled("unlink")&&(w("mozilla")||w("webkit"))?(a=this.selection.getAncestorElement("a"),this.selection.selectElement(a),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",!1,a)},_hilitecolorImpl:function(a){var b;this._handleTextColorOrProperties("hilitecolor",a)||(w("mozilla")?
(this.document.execCommand("styleWithCSS",!1,!0),b=this.document.execCommand("hilitecolor",!1,a),this.document.execCommand("styleWithCSS",!1,!1)):b=this.document.execCommand("hilitecolor",!1,a));return b},_backcolorImpl:function(a){w("ie")&&(a=a?a:null);var b=this._handleTextColorOrProperties("backcolor",a);b||(b=this.document.execCommand("backcolor",!1,a));return b},_forecolorImpl:function(a){w("ie")&&(a=a?a:null);var b=!1;(b=this._handleTextColorOrProperties("forecolor",a))||(b=this.document.execCommand("forecolor",
!1,a));return b},_inserthtmlImpl:function(a){a=this._preFilterContent(a);var b=!0;if(9>w("ie")){var c=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var f=c.item(0);c.length;)c.remove(c.item(0));f.outerHTML=a}else c.pasteHTML(a);c.select()}else if(8>w("trident")){var g=D.getSelection(this.window);if(g&&g.rangeCount&&g.getRangeAt){c=g.getRangeAt(0);c.deleteContents();var k=d.create("div");k.innerHTML=a;for(var h,f=this.document.createDocumentFragment();a=
k.firstChild;)h=f.appendChild(a);c.insertNode(f);h&&(c=c.cloneRange(),c.setStartAfter(h),c.collapse(!1),g.removeAllRanges(),g.addRange(c))}}else w("mozilla")&&!a.length?this.selection.remove():b=this.document.execCommand("inserthtml",!1,a);return b},_boldImpl:function(a){var b=!1;if(w("ie")||w("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("bold");b||(b=this.document.execCommand("bold",!1,a));return b},_italicImpl:function(a){var b=!1;if(w("ie")||w("trident"))this._adaptIESelection(),
b=this._adaptIEFormatAreaAndExec("italic");b||(b=this.document.execCommand("italic",!1,a));return b},_underlineImpl:function(a){var b=!1;if(w("ie")||w("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("underline");b||(b=this.document.execCommand("underline",!1,a));return b},_strikethroughImpl:function(a){var b=!1;if(w("ie")||w("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("strikethrough");b||(b=this.document.execCommand("strikethrough",!1,a));return b},_superscriptImpl:function(a){var b=
!1;if(w("ie")||w("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("superscript");b||(b=this.document.execCommand("superscript",!1,a));return b},_subscriptImpl:function(a){var b=!1;if(w("ie")||w("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("subscript");b||(b=this.document.execCommand("subscript",!1,a));return b},_fontnameImpl:function(a){var b;if(w("ie")||w("trident"))b=this._handleTextColorOrProperties("fontname",a);b||(b=this.document.execCommand("fontname",
!1,a));return b},_fontsizeImpl:function(a){var b;if(w("ie")||w("trident"))b=this._handleTextColorOrProperties("fontsize",a);b||(b=this.document.execCommand("fontsize",!1,a));return b},_insertorderedlistImpl:function(a){var b=!1;if(w("ie")||w("trident")||w("edge"))b=this._adaptIEList("insertorderedlist",a);b||(b=this.document.execCommand("insertorderedlist",!1,a));return b},_insertunorderedlistImpl:function(a){var b=!1;if(w("ie")||w("trident")||w("edge"))b=this._adaptIEList("insertunorderedlist",a);
b||(b=this.document.execCommand("insertunorderedlist",!1,a));return b},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(a){var b=0;if(a&&a.childNodes){var c;for(c=0;c<a.childNodes.length;c++)var f=n.position(a.childNodes[c]),b=b+f.h}return b},_isNodeEmpty:function(a,b){return 1===a.nodeType?0<a.childNodes.length?this._isNodeEmpty(a.childNodes[0],b):!0:3===a.nodeType?
""===a.nodeValue.substring(b):!1},_removeStartingRangeFromRange:function(a,b){if(a.nextSibling)b.setStart(a.nextSibling,0);else{for(var c=a.parentNode;c&&null==c.nextSibling;)c=c.parentNode;c&&b.setStart(c.nextSibling,0)}return b},_adaptIESelection:function(){var a=D.getSelection(this.window);if(a&&a.rangeCount&&!a.isCollapsed){for(var b=a.getRangeAt(0),c=b.startContainer,f=b.startOffset;3===c.nodeType&&f>=c.length&&c.nextSibling;)f-=c.length,c=c.nextSibling;for(var d=null;this._isNodeEmpty(c,f)&&
c!==d;)d=c,b=this._removeStartingRangeFromRange(c,b),c=b.startContainer,f=0;a.removeAllRanges();a.addRange(b)}},_adaptIEFormatAreaAndExec:function(a){var b=D.getSelection(this.window),c=this.document,f,g,k,h,n,q,l;if(a&&b&&b.isCollapsed){if(this.queryCommandValue(a)){a=this._tagNamesForCommand(a);k=b.getRangeAt(0);h=k.startContainer;3===h.nodeType&&(g=k.endOffset,h.length<g&&(g=this._adjustNodeAndOffset(f,g),h=g.node,g=g.offset));for(;h&&h!==this.editNode;){f=h.tagName?h.tagName.toLowerCase():"";
if(-1<r.indexOf(a,f)){l=h;break}h=h.parentNode}if(l&&(f=k.startContainer,a=c.createElement(l.tagName),d.place(a,l,"after"),f&&3===f.nodeType)){g=k.endOffset;f.length<g&&(g=this._adjustNodeAndOffset(f,g),f=g.node,g=g.offset);h=f.nodeValue;k=c.createTextNode(h.substring(0,g));var t=h.substring(g,h.length);t&&(n=c.createTextNode(t));d.place(k,f,"before");n&&(q=c.createElement("span"),q.className="ieFormatBreakerSpan",d.place(q,f,"after"),d.place(n,q,"after"),n=q);d.destroy(f);g=k.parentNode;for(f=[];g!==
l;){h=g.tagName;k={tagName:h};f.push(k);h=c.createElement(h);g.style&&h.style&&g.style.cssText&&(h.style.cssText=g.style.cssText,k.cssText=g.style.cssText);"FONT"===g.tagName&&(g.color&&(h.color=g.color,k.color=g.color),g.face&&(h.face=g.face,k.face=g.face),g.size&&(h.size=g.size,k.size=g.size));g.className&&(h.className=g.className,k.className=g.className);if(n)for(;n;)k=n.nextSibling,h.appendChild(n),n=k;h.tagName==g.tagName?(q=c.createElement("span"),q.className="ieFormatBreakerSpan",d.place(q,
g,"after"),d.place(h,q,"after")):d.place(h,g,"after");k=g;n=h;g=g.parentNode}if(n){if(1===n.nodeType||3===n.nodeType&&n.nodeValue)a.innerHTML="";for(;n;)k=n.nextSibling,a.appendChild(n),n=k}if(f.length){k=f.pop();n=c.createElement(k.tagName);k.cssText&&n.style&&(n.style.cssText=k.cssText);k.className&&(n.className=k.className);"FONT"===k.tagName&&(k.color&&(n.color=k.color),k.face&&(n.face=k.face),k.size&&(n.size=k.size));for(d.place(n,a,"before");f.length;)k=f.pop(),l=c.createElement(k.tagName),
k.cssText&&l.style&&(l.style.cssText=k.cssText),k.className&&(l.className=k.className),"FONT"===k.tagName&&(k.color&&(l.color=k.color),k.face&&(l.face=k.face),k.size&&(l.size=k.size)),n.appendChild(l),n=l;l=c.createTextNode(".");q.appendChild(l);n.appendChild(l)}else q=c.createElement("span"),q.className="ieFormatBreakerSpan",l=c.createTextNode("."),q.appendChild(l),d.place(q,a,"before");n=D.create(this.window);n.setStart(l,0);n.setEnd(l,l.length);b.removeAllRanges();b.addRange(n);this.selection.collapse(!1);
l.parentNode.innerHTML="";a.firstChild||d.destroy(a);return!0}return!1}k=b.getRangeAt(0);if((f=k.startContainer)&&3===f.nodeType)return g=k.startOffset,f.length<g&&(g=this._adjustNodeAndOffset(f,g),f=g.node,g=g.offset),h=f.nodeValue,k=c.createTextNode(h.substring(0,g)),t=h.substring(g),""!==t&&(n=c.createTextNode(h.substring(g))),q=c.createElement("span"),l=c.createTextNode("."),q.appendChild(l),k.length?d.place(k,f,"after"):k=f,d.place(q,k,"after"),n&&d.place(n,q,"after"),d.destroy(f),n=D.create(this.window),
n.setStart(l,0),n.setEnd(l,l.length),b.removeAllRanges(),b.addRange(n),c.execCommand(a),d.place(q.firstChild,q,"before"),d.destroy(q),n.setStart(l,0),n.setEnd(l,l.length),b.removeAllRanges(),b.addRange(n),this.selection.collapse(!1),l.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(a){var b=D.getSelection(this.window);if(b.isCollapsed&&b.rangeCount&&!this.queryCommandValue(a)){var c=b.getRangeAt(0),f=c.startContainer;if(f&&3==f.nodeType&&!c.startOffset)return c="ul","insertorderedlist"===
a&&(c="ol"),a=this.document.createElement(c),c=d.create("li",null,a),d.place(a,f,"before"),c.appendChild(f),d.create("br",null,a,"after"),a=D.create(this.window),a.setStart(f,0),a.setEnd(f,f.length),b.removeAllRanges(),b.addRange(a),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(b,c){var f=D.getSelection(this.window),g=this.document,k,h,n,q,l;c=c||null;if(b&&f&&f.isCollapsed&&f.rangeCount&&(h=f.getRangeAt(0),(k=h.startContainer)&&3===k.nodeType)){l=h.startOffset;k.length<
l&&(h=this._adjustNodeAndOffset(k,l),k=h.node,l=h.offset);n=k.nodeValue;h=g.createTextNode(n.substring(0,l));""!==n.substring(l)&&(q=g.createTextNode(n.substring(l)));n=g.createElement("span");l=g.createTextNode(".");n.appendChild(l);g=g.createElement("span");n.appendChild(g);h.length?d.place(h,k,"after"):h=k;d.place(n,h,"after");q&&d.place(q,n,"after");d.destroy(k);k=D.create(this.window);k.setStart(l,0);k.setEnd(l,l.length);f.removeAllRanges();f.addRange(k);if(w("webkit")){f="color";if("hilitecolor"===
b||"backcolor"===b)f="backgroundColor";a.set(n,f,c);this.selection.remove();d.destroy(g);n.innerHTML="\x26#160;";this.selection.selectElement(n);this.focus()}else this.execCommand(b,c),d.place(n.firstChild,n,"before"),d.destroy(n),k.setStart(l,0),k.setEnd(l,l.length),f.removeAllRanges(),f.addRange(k),this.selection.collapse(!1),l.parentNode.removeChild(l);return!0}return!1},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3===a.nextSibling.nodeType;)b-=a.length,a=a.nextSibling;return{node:a,
offset:b}},_tagNamesForCommand:function(a){return"bold"===a?["b","strong"]:"italic"===a?["i","em"]:"strikethrough"===a?["s","strike"]:"superscript"===a?["sup"]:"subscript"===a?["sub"]:"underline"===a?["u"]:[]},_stripBreakerNodes:function(a){if(this.isLoaded)return f(".ieFormatBreakerSpan",a).forEach(function(a){for(;a.firstChild;)d.place(a.firstChild,a,"before");d.destroy(a)}),a},_stripTrailingEmptyNodes:function(a){function b(a){return/^(p|div|br)$/i.test(a.nodeName)&&0==a.children.length&&/^[\s\xA0]*$/.test(a.textContent||
a.innerText||"")||3===a.nodeType&&/^[\s\xA0]*$/.test(a.nodeValue)}for(;a.lastChild&&b(a.lastChild);)d.destroy(a.lastChild);return a},_setTextDirAttr:function(a){this._set("textDir",a);this.onLoadDeferred.then(k.hitch(this,function(){this.editNode.dir=a}))}});return G})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),function(r,p,m,l,h,c){var g=function(d){var a=d.document;this.getType=function(){if(a.getSelection){var b=
"text",c;try{c=d.getSelection()}catch(k){}c&&1==c.rangeCount&&(c=c.getRangeAt(0),c.startContainer==c.endContainer&&1==c.endOffset-c.startOffset&&3!=c.startContainer.nodeType&&(b="control"));return b}return a.selection.type.toLowerCase()};this.getSelectedText=function(){if(a.getSelection){var b=d.getSelection();return b?b.toString():""}return"control"==this.getType()?null:a.selection.createRange().text};this.getSelectedHtml=function(){if(a.getSelection){var b=d.getSelection();if(b&&b.rangeCount){var c,
g="";for(c=0;c<b.rangeCount;c++){var h=b.getRangeAt(c).cloneContents(),f=a.createElement("div");f.appendChild(h);g+=f.innerHTML}return g}return null}return"control"==this.getType()?null:a.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(a.getSelection){var b=d.getSelection();return b.anchorNode.childNodes[b.anchorOffset]}if((b=a.selection.createRange())&&b.item)return a.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==
this.getType()){var b=this.getSelectedElement();if(b)return b.parentNode}else if(a.getSelection){if(b=a.getSelection()){for(b=b.anchorNode;b&&1!=b.nodeType;)b=b.parentNode;return b}}else return b=a.selection.createRange(),b.collapse(!0),b.parentElement();return null};this.hasAncestorElement=function(a){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(a){var b=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(b,arguments)};this.isTag=
function(a,c){if(a&&a.tagName)for(var b=a.tagName.toLowerCase(),d=0;d<c.length;d++){var f=String(c[d]).toLowerCase();if(b==f)return f}return""};this.getParentOfType=function(a,c){for(;a;){if(this.isTag(a,c).length)return a;a=a.parentNode}return null};this.collapse=function(b){if(a.getSelection){var c=d.getSelection();c.removeAllRanges?b?c.collapseToStart():c.collapseToEnd():c.collapse(b)}else c=a.selection.createRange(),c.collapse(b),c.select()};this.remove=function(){var b=a.selection;a.getSelection?
(b=d.getSelection(),b.deleteFromDocument()):"none"!=b.type.toLowerCase()&&b.clear();return b};this.selectElementChildren=function(b,c){var g;b=p.byId(b);if(a.getSelection){var h=d.getSelection();l("opera")?(g=h.rangeCount?h.getRangeAt(0):a.createRange(),g.setStart(b,0),g.setEnd(b,3==b.nodeType?b.length:b.childNodes.length),h.addRange(g)):h.selectAllChildren(b)}else if(g=b.ownerDocument.body.createTextRange(),g.moveToElementText(b),!c)try{g.select()}catch(f){}};this.selectElement=function(b,c){var d;
b=p.byId(b);if(a.getSelection){var g=a.getSelection();d=a.createRange();g.removeAllRanges&&(l("opera")&&g.getRangeAt(0)&&(d=g.getRangeAt(0)),d.selectNode(b),g.removeAllRanges(),g.addRange(d))}else try{g=b.tagName?b.tagName.toLowerCase():"",d="img"===g||"table"===g?h.body(a).createControlRange():h.body(a).createRange(),d.addElement(b),c||d.select()}catch(f){this.selectElementChildren(b,c)}};this.inSelection=function(b){if(b){var c,g;if(a.getSelection){var h=d.getSelection();h&&0<h.rangeCount&&(g=h.getRangeAt(0));
if(g&&g.compareBoundaryPoints&&a.createRange)try{if(c=a.createRange(),c.setStart(b,0),1===g.compareBoundaryPoints(g.START_TO_END,c))return!0}catch(f){}}else{g=a.selection.createRange();try{c=b.ownerDocument.body.createTextRange(),c.moveToElementText(b)}catch(f){}if(g&&c&&1===g.compareEndPoints("EndToStart",c))return!0}}return!1};this.getBookmark=function(){var b,g,k=a.selection,h=c.curNode;if(a.getSelection){if(k=d.getSelection())if(k.isCollapsed){if(b=h?h.tagName:"")if(b=b.toLowerCase(),"textarea"==
b||"input"==b&&(!h.type||"text"==h.type.toLowerCase()))return k={start:h.selectionStart,end:h.selectionEnd,node:h,pRange:!0},{isCollapsed:k.end<=k.start,mark:k};b={isCollapsed:!0};k.rangeCount&&(b.mark=k.getRangeAt(0).cloneRange())}else g=k.getRangeAt(0),b={isCollapsed:!1,mark:g.cloneRange()}}else if(k){b=h?h.tagName:"";b=b.toLowerCase();if(h&&b&&("button"==b||"textarea"==b||"input"==b)){if(k.type&&"none"==k.type.toLowerCase())return{isCollapsed:!0,mark:null};g=k.createRange();return{isCollapsed:g.text&&
g.text.length?!1:!0,mark:{range:g,pRange:!0}}}b={};try{g=k.createRange(),b.isCollapsed=!("Text"==k.type?g.htmlText.length:g.length)}catch(f){return b.isCollapsed=!0,b}if("CONTROL"==k.type.toUpperCase())if(g.length)for(b.mark=[],k=0,h=g.length;k<h;)b.mark.push(g.item(k++));else b.isCollapsed=!0,b.mark=null;else b.mark=g.getBookmark()}return b};this.moveToBookmark=function(b){if(b=b.mark)if(a.getSelection){var c=d.getSelection();c&&c.removeAllRanges&&(b.pRange?(c=b.node,c.selectionStart=b.start,c.selectionEnd=
b.end):(c.removeAllRanges(),c.addRange(b)))}else if(a.selection&&b){var g;b.pRange?g=b.range:m.isArray(b)?(g=a.body.createControlRange(),r.forEach(b,function(a){g.addElement(a)})):(g=a.body.createTextRange(),g.moveToBookmark(b));g.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},d=new g(window);d.SelectionManager=g;return d})},"dijit/_editor/range":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(r,p,m){var l={getIndex:function(c,
d){for(var g=[],a=[],b=c,h,k;c!=d;){var l=0;for(h=c.parentNode;k=h.childNodes[l++];)if(k===c){--l;break}g.unshift(l);a.unshift(l-h.childNodes.length);c=h}if(0<g.length&&3==b.nodeType){for(k=b.previousSibling;k&&3==k.nodeType;)g[g.length-1]--,k=k.previousSibling;for(k=b.nextSibling;k&&3==k.nodeType;)a[a.length-1]++,k=k.nextSibling}return{o:g,r:a}},getNode:function(c,d){if(!m.isArray(c)||0==c.length)return d;var g=d;r.every(c,function(a){if(0<=a&&a<g.childNodes.length)g=g.childNodes[a];else return g=
null,!1;return!0});return g},getCommonAncestor:function(c,d,h){h=h||c.ownerDocument.body;var a=function(a){for(var b=[];a;)if(b.unshift(a),a!==h)a=a.parentNode;else break;return b};c=a(c);d=a(d);for(var a=Math.min(c.length,d.length),b=c[0],g=1;g<a;g++)if(c[g]===d[g])b=c[g];else break;return b},getAncestor:function(c,d,h){for(h=h||c.ownerDocument.body;c&&c!==h;){var a=c.nodeName.toUpperCase();if(d.test(a))return c;c=c.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,
getBlockAncestor:function(c,d,h){h=h||c.ownerDocument.body;d=d||l.BlockTagNames;for(var a=null,b;c&&c!==h;){var g=c.nodeName.toUpperCase();!a&&d.test(g)&&(a=c);!b&&/^(?:BODY|TD|TH|CAPTION)$/.test(g)&&(b=c);c=c.parentNode}return{blockNode:a,blockContainer:b||c.ownerDocument.body}},atBeginningOfContainer:function(c,d,h){var a=!1,b=0==h;b||3!=d.nodeType||/^[\s\xA0]+$/.test(d.nodeValue.substr(0,h))&&(b=!0);if(b)for(a=!0;d&&d!==c;){if(d.previousSibling){a=!1;break}d=d.parentNode}return a},atEndOfContainer:function(c,
d,h){var a=!1,b=h==(d.length||d.childNodes.length);b||3!=d.nodeType||/^[\s\xA0]+$/.test(d.nodeValue.substr(h))&&(b=!0);if(b)for(a=!0;d&&d!==c;){if(d.nextSibling){a=!1;break}d=d.parentNode}return a},adjacentNoneTextNode:function(c,d){for(var g=c,a=0-c.length||0,b=d?"nextSibling":"previousSibling";g&&3==g.nodeType;)a+=g.length,g=g[b];return[g,a]},create:function(g){g=g||window;return g.getSelection?g.document.createRange():new c},getSelection:function(c,d){if(c.getSelection)return c.getSelection();
var g=new h.selection(c);d||g._getCurrentSelection();return g}};if(!window.getSelection)var h=l.ie={cachedSelection:{},selection:function(g){this._ranges=[];this.addRange=function(c,g){this._ranges.push(c);g||c._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(c){return this._ranges[c]};this._getCurrentSelection=function(){this.removeAllRanges();var d;d=g.document.selection.createRange();d="CONTROL"==g.document.selection.type.toUpperCase()?
new c(h.decomposeControlRange(d)):new c(h.decomposeTextRange(d));this.addRange(d,!0),this.isCollapsed=d.collapsed}},decomposeControlRange:function(c){var d=c.item(0),g=c.item(c.length-1);c=d.parentNode;var a=g.parentNode,d=l.getIndex(d,c).o[0],g=l.getIndex(g,a).o[0]+1;return[c,d,a,g]},getEndPoint:function(c,d){var g=c.duplicate();g.collapse(!d);var a="EndTo"+(d?"End":"Start"),b=g.parentElement(),h,k,q;0<b.childNodes.length?r.every(b.childNodes,function(f,d){var n;if(3!=f.nodeType)if(g.moveToElementText(f),
0<g.compareEndPoints(a,c))if(q&&3==q.nodeType)h=q,n=!0;else return h=b,k=d,!1;else{if(d==b.childNodes.length-1)return h=b,k=b.childNodes.length,!1}else d==b.childNodes.length-1&&(h=f,n=!0);if(n&&h){h=(n=l.adjacentNoneTextNode(h)[0])?n.nextSibling:b.firstChild;var m=l.adjacentNoneTextNode(h);n=m[0];m=m[1];n?(g.moveToElementText(n),g.collapse(!1)):g.moveToElementText(b);g.setEndPoint(a,c);k=g.text.length-m;return!1}q=f;return!0}):(h=b,k=0);if(!d&&1==h.nodeType&&k==h.childNodes.length){var f=h.nextSibling;
f&&3==f.nodeType&&(h=f,k=0)}return[h,k]},setEndPoint:function(c,d,h){c=c.duplicate();var a;if(3!=d.nodeType)if(0<h){if(a=d.childNodes[h-1])if(3==a.nodeType)d=a,h=a.length;else if(a.nextSibling&&3==a.nextSibling.nodeType)d=a.nextSibling,h=0;else{c.moveToElementText(a.nextSibling?a:d);var b=a.parentNode;a=b.insertBefore(a.ownerDocument.createTextNode(" "),a.nextSibling);c.collapse(!1);b.removeChild(a)}}else c.moveToElementText(d),c.collapse(!0);3==d.nodeType&&(a=l.adjacentNoneTextNode(d),b=a[0],a=a[1],
b?(c.moveToElementText(b),c.collapse(!1),"inherit"!=b.contentEditable&&a++):(c.moveToElementText(d.parentNode),c.collapse(!0),c.move("character",1),c.move("character",-1)),h+=a,0<h&&c.move("character",h)!=h&&console.error("Error when moving!"));return c},decomposeTextRange:function(c){var d=h.getEndPoint(c),g=d[0],a=d[1],b=d[0],d=d[1];c.htmlText.length&&(c.htmlText==c.text?d=a+c.text.length:(d=h.getEndPoint(c,!0),b=d[0],d=d[1]));return[g,a,b,d]},setRange:function(c,d,n,a,b,l){d=h.setEndPoint(c,d,
n);c.setEndPoint("StartToStart",d);if(!l)var g=h.setEndPoint(c,a,b);c.setEndPoint("EndToEnd",g||d);return c}},c=l.W3CRange=p(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=this.startContainer!==this.endContainer?l.getCommonAncestor(this.startContainer,
this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(c,d){d=parseInt(d);if(this.startContainer!==c||this.startOffset!=d)delete this._cachedBookmark,this.startContainer=c,this.startOffset=d,this.endContainer?this._updateInternal():this.setEnd(c,d)},setEnd:function(c,d){d=parseInt(d);if(this.endContainer!==c||this.endOffset!=d)delete this._cachedBookmark,this.endContainer=c,this.endOffset=d,this.startContainer?
this._updateInternal():this.setStart(c,d)},setStartAfter:function(c,d){this._setPoint("setStart",c,d,1)},setStartBefore:function(c,d){this._setPoint("setStart",c,d,0)},setEndAfter:function(c,d){this._setPoint("setEnd",c,d,1)},setEndBefore:function(c,d){this._setPoint("setEnd",c,d,0)},_setPoint:function(c,d,h,a){h=l.getIndex(d,d.parentNode).o;this[c](d.parentNode,h.pop()+a)},_getIERange:function(){var c=(this._body||this.endContainer.ownerDocument.body).createTextRange();h.setRange(c,this.startContainer,
this.startOffset,this.endContainer,this.endOffset,this.collapsed);return c},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var c=this.startContainer,d=this._getIERange();3!==c.nodeType||this.startOffset||this.setStartBefore(c);d.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var g=new c([this.startContainer,this.startOffset,
this.endContainer,this.endOffset]);g._body=this._body;return g},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});m.setObject("dijit.range",l);return l})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(r,p,m){var l={};p.setObject("dijit._editor.html",l);var h=l.escapeXml=function(c,g){c=c.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,
"\x26gt;").replace(/"/gm,"\x26quot;");g||(c=c.replace(/'/gm,"\x26#39;"));return c};l.getNodeHtml=function(c){var g=[];l.getNodeHtmlHelper(c,g);return g.join("")};l.getNodeHtmlHelper=function(c,g){switch(c.nodeType){case 1:var d=c.nodeName.toLowerCase();if(!d||"/"==d.charAt(0))return"";g.push("\x3c",d);var n=[],a={},b;if(m("dom-attributes-explicit")||m("dom-attributes-specified-flag"))for(var t=0;b=c.attributes[t++];){var k=b.name;"_dj"===k.substr(0,3)||m("dom-attributes-specified-flag")&&!b.specified||
k in a||(b=b.value,("src"==k||"href"==k)&&c.getAttribute("_djrealurl")&&(b=c.getAttribute("_djrealurl")),8===m("ie")&&"style"===k&&(b=b.replace("HEIGHT:","height:").replace("WIDTH:","width:")),n.push([k,b]),a[k]=b)}else{var q=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML,a=q.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi),q=q.substr(0,q.indexOf("\x3e"));r.forEach(a,function(a){if(a){var b=a.indexOf("\x3d");if(0<b&&(a=a.substring(0,b),"_dj"!=a.substr(0,3)))if("src"!=a&&"href"!=a||!c.getAttribute("_djrealurl")){var f;
switch(a){case "style":f=c.style.cssText.toLowerCase();break;case "class":f=c.className;break;case "width":if("img"===d){(b=/width=(\S+)/i.exec(q))&&(f=b[1]);break}case "height":if("img"===d){(b=/height=(\S+)/i.exec(q))&&(f=b[1]);break}default:f=c.getAttribute(a)}null!=f&&n.push([a,f.toString()])}else n.push([a,c.getAttribute("_djrealurl")])}},this)}n.sort(function(a,b){return a[0]<b[0]?-1:a[0]==b[0]?0:1});for(a=0;b=n[a++];)g.push(" ",b[0],'\x3d"',"string"===typeof b[1]?h(b[1],!0):b[1],'"');switch(d){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":g.push(" /\x3e");
break;case "script":g.push("\x3e",c.innerHTML,"\x3c/",d,"\x3e");break;default:g.push("\x3e"),c.hasChildNodes()&&l.getChildrenHtmlHelper(c,g),g.push("\x3c/",d,"\x3e")}break;case 4:case 3:g.push(h(c.nodeValue,!0));break;case 8:g.push("\x3c!--",h(c.nodeValue,!0),"--\x3e");break;default:g.push("\x3c!-- Element not recognized - Type: ",c.nodeType," Name: ",c.nodeName,"--\x3e")}};l.getChildrenHtml=function(c){var g=[];l.getChildrenHtmlHelper(c,g);return g.join("")};l.getChildrenHtmlHelper=function(c,g){if(c)for(var d=
c.childNodes||c,h=!m("ie")||d!==c,a,b=0;a=d[b++];)h&&a.parentNode!=c||l.getNodeHtmlHelper(a,g)};return l})},"dojox/grid/util":function(){define(["../main","dojo/_base/lang","dojo/dom"],function(r,p,m){var l=p.getObject("grid.util",!0,r);l.na="...";l.rowIndexTag="gridRowIndex";l.gridViewTag="gridView";l.fire=function(h,c,g){var d=h&&c&&h[c];return d&&(g?d.apply(h,g):h[c]())};l.setStyleHeightPx=function(h,c){if(0<=c){var g=h.style,d=c+"px";h&&g.height!=d&&(g.height=d)}};l.mouseEvents="mouseover mouseout mousedown mouseup click dblclick contextmenu".split(" ");
l.keyEvents=["keyup","keydown","keypress"];l.funnelEvents=function(h,c,g,d){d=d?d:l.mouseEvents.concat(l.keyEvents);for(var n=0,a=d.length;n<a;n++)c.connect(h,"on"+d[n],g)};l.removeNode=function(h){(h=m.byId(h))&&h.parentNode&&h.parentNode.removeChild(h);return h};l.arrayCompare=function(h,c){for(var g=0,d=h.length;g<d;g++)if(h[g]!=c[g])return!1;return h.length==c.length};l.arrayInsert=function(h,c,g){h.length<=c?h[c]=g:h.splice(c,0,g)};l.arrayRemove=function(h,c){h.splice(c,1)};l.arraySwap=function(h,
c,g){var d=h[c];h[c]=h[g];h[g]=d};return l})},"dojox/grid/cells/_base":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/_base/connect dojo/_base/array dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dijit/_Widget ../util".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t){var k=p("dojox.grid._DeferredTextWidget",b,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&this.deferred.addBoth(m.hitch(this,function(a){this.domNode&&(this.domNode.innerHTML=
a)}))}}),q=function(){setTimeout(m.hitch.apply(r,arguments),0)},f=p("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(a){this._props=a||{};m.mixin(this,a);void 0===this.draggable&&(this.draggable=!0)},_defaultFormat:function(b,c){var f=this.grid.formatterScope||this,d=this.formatter;d&&f&&"string"==typeof d&&(d=this.formatter=f[d]);
f=b!=this.defaultValue&&d?d.apply(f,c):b;if("undefined"==typeof f)return this.defaultValue;f&&f.addBoth&&(f=new k({deferred:f},a.create("span",{innerHTML:this.defaultValue})));return f&&f.declaredClass&&f.startup?"\x3cdiv class\x3d'dojoxGridStubNode' linkWidget\x3d'"+f.id+"' cellIdx\x3d'"+this.index+"'\x3e"+this.defaultValue+"\x3c/div\x3e":f},format:function(a,b){var c=this.grid.edit.info,f=this.get?this.get(a,b):this.value||this.defaultValue,f=f&&f.replace&&this.grid.escapeHTMLInData?f.replace(/&/g,
"\x26amp;").replace(/</g,"\x26lt;"):f;return this.editable&&(this.alwaysEditing||c.rowIndex==a&&c.cell==this)?this.formatEditing(c.value?c.value:f,a):this._defaultFormat(f,[f,a,this])},formatEditing:function(a,b){},getNode:function(a){return this.view.getCellNode(a,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(a){return(this.getNode(a)||0).firstChild||0},canResize:function(){var a=this.unitWidth;return a&&"auto"!==a},isFlex:function(){var a=
this.unitWidth;return a&&m.isString(a)&&("auto"==a||"%"==a.slice(-1))},applyEdit:function(a,b){this.getNode(b)&&this.grid.edit.applyCellEdit(a,this,b)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){this.grid.edit.isEditCell(a,this.index)&&this.grid.edit.apply()},registerOnBlur:function(a,b){this.commitOnBlur&&h.connect(a,"onblur",function(a){setTimeout(m.hitch(this,"_onEditBlur",b),250)})},needFormatNode:function(a,b){this._formatPending=!0;q(this,"_formatNode",a,b)},cancelFormatNode:function(){this._formatPending=
!1},_formatNode:function(a,b){this._formatPending&&(this._formatPending=!1,g("ie")||d.setSelectable(this.grid.domNode,!0),this.formatNode(this.getEditNode(b),a,b))},formatNode:function(a,b,c){g("ie")?q(this,"focus",c,a):this.focus(c,a)},dispatchEvent:function(a,b){if(a in this)return this[a](b)},getValue:function(a){return this.getEditNode(a)[this._valueProp]},setValue:function(a,b){var c=this.getEditNode(a);c&&(c[this._valueProp]=b)},focus:function(a,b){var c=b||this.getEditNode(a);try{t.fire(c,
"focus"),t.fire(c,"select")}catch(v){}},save:function(a){this.value=this.value||this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(a){d.setSelectable(this.grid.domNode,!1);this.cancelFormatNode()},apply:function(a){this.applyEdit(this.getValue(a),a);this._finish(a)},cancel:function(a){this.cancelEdit(a);this._finish(a)}});f.markupFactory=function(a,b){var c=m.trim(n.get(a,"formatter")||"");c&&(b.formatter=m.getObject(c)||c);if(c=m.trim(n.get(a,"get")||""))b.get=m.getObject(c);
c=function(b,c,f){var d=m.trim(n.get(a,b)||"");d&&(c[f||b]="false"!=d.toLowerCase())};c("sortDesc",b);c("editable",b);c("alwaysEditing",b);c("noresize",b);c("draggable",b);if(c=m.trim(n.get(a,"loadingText")||n.get(a,"defaultValue")||""))b.defaultValue=c;c=function(b,c,f){var d=m.trim(n.get(a,b)||"")||void 0;d&&(c[f||b]=d)};c("styles",b);c("headerStyles",b);c("cellStyles",b);c("classes",b);c("headerClasses",b);c("cellClasses",b)};var u=f.Cell=p("dojox.grid.cells.Cell",f,{constructor:function(){this.keyFilter=
this.keyFilter},keyFilter:null,formatEditing:function(a,b){this.needFormatNode(a,b);return'\x3cinput class\x3d"dojoxGridInput" type\x3d"text" value\x3d"'+a+'"\x3e'},formatNode:function(a,b,c){this.inherited(arguments);this.registerOnBlur(a,c)},doKey:function(a){this.keyFilter&&-1==String.fromCharCode(a.charCode).search(this.keyFilter)&&l.stop(a)},_finish:function(a){this.inherited(arguments);var b=this.getEditNode(a);try{t.fire(b,"blur")}catch(y){}}});u.markupFactory=function(a,b){f.markupFactory(a,
b);var c=m.trim(n.get(a,"keyFilter")||"");c&&(b.keyFilter=new RegExp(c))};(f.RowIndex=p("dojox.grid.cells.RowIndex",u,{name:"Row",postscript:function(){this.editable=!1},get:function(a){return a+1}})).markupFactory=function(a,b){u.markupFactory(a,b)};(f.Select=p("dojox.grid.cells.Select",u,{options:null,values:null,returnIndex:-1,constructor:function(a){this.values=this.values||this.options},formatEditing:function(a,b){this.needFormatNode(a,b);for(var c=['\x3cselect class\x3d"dojoxGridSelect"\x3e'],
f=0,d,g;void 0!==(d=this.options[f])&&void 0!==(g=this.values[f]);f++)g=g.replace?g.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):g,d=d.replace?d.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):d,c.push("\x3coption",a==g?" selected":"",' value\x3d"'+g+'"',"\x3e",d,"\x3c/option\x3e");c.push("\x3c/select\x3e");return c.join("")},_defaultFormat:function(a,b){var f=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var d=c.indexOf(this.values,f);0<=d&&(f=this.options[d])}return f},
getValue:function(a){var b=this.getEditNode(a);if(b)return a=b.selectedIndex,b=b.options[a],-1<this.returnIndex?a:b.value||b.innerHTML}})).markupFactory=function(a,b){u.markupFactory(a,b);var c=m.trim(n.get(a,"options")||"");if(c){var f=c.split(",");f[0]!=c&&(b.options=f)}if(c=m.trim(n.get(a,"values")||""))f=c.split(","),f[0]!=c&&(b.values=f)};var w=f.AlwaysEdit=p("dojox.grid.cells.AlwaysEdit",u,{alwaysEditing:!0,_formatNode:function(a,b){this.formatNode(this.getEditNode(b),a,b)},applyStaticValue:function(a){var b=
this.grid.edit;b.applyCellEdit(this.getValue(a),this,a);b.start(this,a,!0)}});w.markupFactory=function(a,b){u.markupFactory(a,b)};(f.Bool=p("dojox.grid.cells.Bool",w,{_valueProp:"checked",formatEditing:function(a,b){return'\x3cinput class\x3d"dojoxGridInput" type\x3d"checkbox"'+(a?' checked\x3d"checked"':"")+' style\x3d"width: auto" /\x3e'},doclick:function(a){"INPUT"==a.target.tagName&&this.applyStaticValue(a.rowIndex)}})).markupFactory=function(a,b){w.markupFactory(a,b)};return f})},"rc/bacnet/_widget/DeviceObjectPropertyReferenceEditor":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/text!./templates/DeviceObjectPropertyReferenceEditor.html ../io/DeviceObjectPropertyReference ../io/Number ../Object dijit/form/ValidationTextBox ./ObjectIDEditor".split(" "),
function(r,p,m,l,h,c,g,d){return l("rc/bacnet/_widget/DeviceObjectPropertyReferenceEditor",[p,r,m],{templateString:h,src:"",_deviceObjectPropertyReference:null,postCreate:function(){this.inherited(arguments);this._supportingWidgets.push(this._objectIDEditor);this._supportingWidgets.push(this._deviceObjectIDEditor)},initialize:function(c){c?(this._deviceObjectPropertyReference=c,this._setValues(c)):this.reset()},_setValues:function(c){this._objectIDEditor.initialize(c.o);this._propertyTB.reset();this._propertyTB.set("value",
c.p.v);this._arrayIdxTB.reset();this._arrayIdxTB.set("value",c.i?c.i.v:"");this._deviceObjectIDEditor.initialize(c.d||null)},_getValues:function(){var d=this._objectIDEditor.getObject(),a=new g(parseInt(this._propertyTB.get("value"),10),9),b=this._arrayIdxTB.get("value"),h;""!=b&&(h=new g(parseInt(b,10),2));b=null;""!=this._deviceObjectIDEditor._instanceTB.get("value")&&this._deviceObjectIDEditor.isValid()&&(b=this._deviceObjectIDEditor.getObject());this._deviceObjectPropertyReference=new c(b,d,a,
h)},getObject:function(){this._getValues();return this._deviceObjectPropertyReference},toString:function(){var c=this._deviceObjectPropertyReference,a=c.d?c.d.i:"",b=c.i?c.i.v:"",g=":"+c.p.v;b&&(g+="["+b+"]");return(new d(a,c.o.t,c.o.i)).toMnemonic()+g},isValid:function(){var c=!1;this._objectIDEditor.isValid()&&this._propertyTB.isValid()&&(c=""!=this._arrayIdxTB.get("value")?this._arrayIdxTB.isValid():!0);return c},reset:function(){this._objectIDEditor.initialize();this._propertyTB.reset();this._propertyTB.set("value",
85);this._arrayIdxTB.reset();this._deviceObjectIDEditor.initialize()}})})},"rc/bacnet/_widget/ObjectIDEditor":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on dojo/store/Memory dojo/text!./templates/ObjectIDEditor.html ../enums ../io/Object dijit/form/FilteringSelect dijit/form/ValidationTextBox".split(" "),function(r,p,m,l,h,c,g,d,n,a,b){return l("rc/bacnet/_widget/ObjectIDEditor",[p,r,m],{templateString:n,
src:"",_typeStore:null,_objectID:null,_isShowingReservedVendor:!1,required:!0,viewMode:"any",constructor:function(){for(var b=[],c=a.objectNames,g=0;g<Object.keys(c).length;g++)c[g]&&0<c[g].length&&b.push({name:c[g],id:g});this._typeStore=new d({data:b})},postCreate:function(){this.inherited(arguments);this._typeFS.set("store",this._typeStore);this.own(g(this._typeFS,"change",h.hitch(this,this._onSelectType)));this.required||this._toggleRequired(!1);"device"==this.viewMode&&this._disableTypeFS()},
_disableTypeFS:function(){this._typeFS.set("value",8);this._typeFS.set("readOnly",!0);this._labelSpan.innerHTML="Device ID:"},hideLabel:function(){c.remove(this._labelSpan,"showContainer");c.add(this._labelSpan,"hideContainer")},initialize:function(a){a?(this._objectID=a,this._setValues(a.t,a.i)):this.reset()},_setValues:function(b,c){128<=b?(this._isShowingReservedVendor=!0,this._toggleReservedVendorTB(this._isShowingReservedVendor),this._reservedVendorTB.set("value",b),this._typeFS.set("value",
Object.keys(a.objectNames).length-1)):b>Object.keys(a.objectNames).length?this._typeFS.set("value",Object.keys(a.objectNames).length-2):this._typeFS.set("value",b);this._instanceTB.set("value",c)},getValues:function(){var a=parseInt(this._typeFS.get("value"),10),c=parseInt(this._instanceTB.get("value"),10);this._objectID=new b(a,c)},getObject:function(){this.getValues();return this._objectID},isValid:function(){var a=!1;"any"==this.viewMode?this._typeFS.isValid()&&this._instanceTB.isValid()&&(a=this._reservedVendorTB.get("required")?
this._reservedVendorTB.isValid():!0):"device"==this.viewMode&&(a=this._instanceTB.isValid());return a},_toggleRequired:function(a){this._typeFS.set("required",a);this._instanceTB.set("required",a);this._typeLabel.innerHTML=a?"Type*:":"Type:";this._instanceLabel.innerHTML=a?"Instance*:":"Instance:";this.required=a},reset:function(){this._instanceTB.reset();"device"!=this.viewMode&&(this._typeFS.reset(),this._typeFS.set("value",0),this._instanceTB.set("value",0));this.required&&this._instanceTB.set("value",
0);this._isShowingReservedVendor=!1;this._toggleReservedVendorTB(this._isShowingReservedVendor);this._reservedVendorTB.reset();this._reservedVendorTB.set("value",0)},_toggleReservedVendorTB:function(a){c.toggle(this._reservedVendorTBContainer,"showContainer",a)},_onSelectType:function(b){b==Object.keys(a.objectNames).length-1?this._isShowingReservedVendor=!0:this._isShowingReservedVendor=!1;this._reservedVendorTB.set("required",this._isShowingReservedVendor);this._toggleReservedVendorTB(this._isShowingReservedVendor)}})})},
"rc/widget/ErrorDialog":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/text!rc/widget/templates/ErrorDialog.html dijit/Dialog dijit/form/Button".split(" "),function(r,p,m,l,h,c,g,d){return l("rc/widget/ErrorDialog",[p,r,m,c],{templateString:d,src:"",_msg:null,viewMode:"error",constructor:function(){this.rcStrings=g},postCreate:function(){this.inherited(arguments);this._supportingWidgets.push(this._dialog);
this.setMessage(g.dataMissing);"warning"===this.viewMode&&h.set(this.canceButton,{display:"block"})},show:function(c){c&&this.setMessage(c);this._dialog.show()},showCancelButton:function(){},onClickOk:function(){this._dialog.hide();this.emit("clickOk")},onClickCancel:function(){this._dialog.hide();this.emit("clickCancel")},setMessage:function(c){c?this._errorTextContainer.innerHTML=c:console.error("no error message provided")},setTitle:function(c){c?this._dialog.title=c:console.error("no title message provided")}})})},
"rc/bacnet/_widget/DialogListElement":function(){define("dgrid/Grid dgrid/OnDemandGrid dgrid/Selection dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!rc/nls/all dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/DialogListElement.html dojo/topic ./DialogEditElement ../enums ../io/Array ../io/CalendarEntryList ../io/DestinationList ../io/DeviceObjectPropertyReferenceList ../io/Error ../io/List ../io/Number ../io/Object ../io/RecipientList ../io/ReadRange ../io/service/ReadRange ../io/service/AddListElement ../io/service/ReadPropertyMultiple ../io/service/RemoveListElement ../../widget/Retry dijit/Dialog dijit/form/Button dijit/form/CheckBox dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/ValidationTextBox dijit/layout/ContentPane rc/widget/ErrorDialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q){return d("rc/bacnet/_widget/DialogListElement",[h,l,c,k],{templateString:x,WILD_CARD:255,ge:null,_propertyInfo:null,info:null,_elements:null,_grid:null,_gridRowEditing:null,_dialogEditElement:null,_loadViaReadRange:!1,_readRangePosition:1,_loadEntireList:!0,constructor:function(){this._propertyInfo={102:{name:(q.recipient+" "+q.listElements+".").toLowerCase(),elementName:q.destination,className:B},54:{name:(q.objectPropertyReference+
" "+q.listElements+".").toLowerCase(),elementName:q.deviceObjectPropertyReference,className:D},23:{name:(q.date+" "+q.listElements+".").toLowerCase(),elementName:q.calendarEntry,className:E},116:{name:(q.timeSynchronizationRecipients+" "+q.listElements+".").toLowerCase(),elementName:q.recipient,className:I}}},postCreate:function(){this.inherited(arguments);this.own(f(this._dialog,"hide",n.hitch(this,this.onHide)));this._retryHandler=new Q;b.add(this._dialog.domNode,"rcEditPointDialog");this._createGrid();
this._supportingWidgets.push(this._dialog);this._supportingWidgets.push(this._errorDialog);this._reasonConnects=[]},_onCellClick:function(a){var b=this._grid.store.get(a.rowId).object;this._gridRowEditing=a.rowId;this.createGetEditElementDialog();this._dialogEditElement.show(this.ge.property,b)},createGetEditElementDialog:function(){this._dialogEditElement||(this._dialogEditElement=new v({}),this._supportingWidgets.push(this._dialogEditElement),this.own(f(this._dialogEditElement,"validOK",n.hitch(this,
this._onOKEditElement)),f(this._dialogEditElement,"clickCancel",n.hitch(this,this._onCancelEditElement))));return this._dialogEditElement},_onOKEditElement:function(){var a=this._dialogEditElement.getElement();a&&(this._addObjectValueToGrid(this._gridRowEditing,a),this._gridRowEditing=null)},_onCancelEditElement:function(){null===this._grid.store.get(this._gridRowEditing).object&&1<this._grid.store.data.length&&this._grid.remove(this._gridRowEditing);this._gridRowEditing=null},_addObjectValueToGrid:function(a,
b){try{var c=this._grid.store.get(a);c&&(c.object=b,c.value=this._getValueStr(b),this._grid.store.put(c))}catch(aa){}},_getValueStr:function(a){var b="";switch(this.ge.property){case A.propertyTypes.PROPID_RECIPIENT_LIST:b=this._dialogEditElement._recipientEditor.toString(a.r);break;case A.propertyTypes.PROPID_DATELIST:b=this._getCalendarEntryStrValue(a);break;case A.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:b=this._dialogEditElement._doprEditor.toString();break;case A.propertyTypes.PROPID_TIME_SYNCHRONIZATION_RECIPIENTS:b=
this._dialogEditElement._recipientEditor.toString(a)}return b},formatDate:function(a){return a.d+"/"+a.m+"/"+(255==a.y?a.y:a.y+1900)},_getCalendarEntryStrValue:function(a){var b="",c=a.d;switch(a.c){case 0:b=this.formatDate(c);break;case 1:b=this.formatDate(c.ds)+" - "+this.formatDate(c.de);break;case 2:b=this._decodeRecurrenceValues(c)}return b},_decodeRecurrenceValues:function(a){var b=a.getByte(0),c=a.getByte(1);a=a.getByte(2);var f=this._dialogEditElement._periodEditor,b=b===this.WILD_CARD?f.moyValues[f.moyValues.length-
1].name:f.moyValues[b-1].name,c=c===this.WILD_CARD?f.womValues[f.womValues.length-1].name:f.womValues[c-1].name;a=a===this.WILD_CARD?f.dowValues[f.dowValues.length-1].name:f.dowValues[a-1].name;return b+", "+c+", "+a},_onClickAddRow:function(){this._addNewGridRow()},_addNewGridRow:function(){var a=this._grid.store.query(null).length;this._grid.store.put({rowId:a,Element:this.info.elementName,value:q.none,object:null})},_resetGrid:function(){for(var a=this._grid.store.query(null),b=a.length-1;0<=b;--b)this._grid.store.remove(a[b].rowId)},
_onClickDeleteRow:function(){var a=Object.keys(this._grid.selection)[0];this._grid.store.remove(a)},_onClickValue:function(){},_getGridStructure:function(){return[{id:"elementCol",label:"Element",field:"Element",sortable:!1,formatter:function(a,b){return a+" "+(b.rowId+1)}},{id:"valueCol",label:"Value",field:"value",sortable:!1,renderCell:n.hitch(this,function(a,b,c){t.create("span",{innerHTML:b,"class":"gridRowSpan"},c,"only");this.own(f(c,"click",n.hitch(this,this._onCellClick,a)))})}]},_getSaveSuccessMessage:function(){return q.success},
_createGrid:function(){null===this._grid&&(this._grid=new (d([r,p,m]))({selectionMode:"single",columns:this._getGridStructure(),store:new w(new u({idProperty:"rowId"})),sort:[{attribute:"rowId",descending:!1}]},this._gridContainer),this._grid.startup())},show:function(a,b){this.ge=a;this.stg=b;this._elements=[];this._propertyStr=this.ge.property+"";this.info=this._propertyInfo[this._propertyStr];var c=this.ge.mnemonic+":"+this._propertyStr;this._displayName.innerHTML=this.ge.flashObject.strName+(this.ge.flashObject.strName!=
this.ge.mnemonic?" ("+c+")":"");this._propertyDisplayName.innerHTML=" "+this.info.name;this._reasonTB.set("value","");this._reasonLabel.innerHTML=rc.session.reasonRequired()?"Reason*:":"Reason:";this._reasonTB.set("required",!1);this._reasonConnects.push(f(this._reasonTB,"blur",n.hitch(this,this._setRequiredReason)));this._load().always(n.hitch(this,function(){this._dialog.show();this._grid.resize()}))},_setRequiredReason:function(){g.forEach(this._reasonConnects,function(a){a.remove()},this);this._reasonConnects=
[];this._reasonTB.set("required",rc.session.reasonRequired())},onHide:function(){this.stg.updating&&this.stg.update();this._resetGrid();this.emit("hide")},_isValid:function(){this._setRequiredReason();return this._reasonTB.isValid()},__onLoadReadRangeChecked:function(a){this._loadViaReadRange=a;b.toggle(this._readRangeOptions,"hidden",!a)},_clickedLoadEntire:function(){this._loadEntireList=!0;b.add(this._readRangePositionOptions,"hidden")},_clickedLoadSingle:function(){this._loadEntireList=!1;b.remove(this._readRangePositionOptions,
"hidden")},_onClickOk:function(){this._getGridElements().then(n.hitch(this,function(a){this._isValid()?(0<this._elements.length&&(rc.xhr.setCacheId(this.stg.group.pointName.toMnemonic()+"_"+ ++this.stg.xhrCacheIndex),this.send().then(n.hitch(this,function(){y.publish("alert",{message:this._getSaveSuccessMessage(),type:"success"});this._addAuditTrail()})).otherwise(n.hitch(this,function(a){return a}))),this._dialog.hide()):this._errorDialog.show()}),n.hitch(this,function(a){this._dialog.hide();return a}))},
_addAuditTrail:function(){var a=this.ge.pointName.toArray(),a=a[2<=a.length?a.length-2:0].toLowerCase(),a=q[a]||a,b=rc.sys.job.getControllerName(this.ge.isBacnet,this.ge.pointName,this.ge.flashObject.strName);y.publish("audit",{pointName:b,user:rc.session.getUsername(),action:z.substitute(q.changedX,[a.toLowerCase()]),details:(this._addButton.get("checked")?q.add:q.remove)+" "+this.info.name,reason:this._reasonTB.get("value")})},_getGridElements:function(){for(var b=new a,c=this._grid.store.query(null),
f=0;f<c.length;++f)null!==c[f].object&&this._elements.push(c[f].object);b.resolve(this._elements);return b.promise},send:function(){return this._retryHandler.notifyRetry({action:n.hitch(this,this._send),tries:3,delay:5,retryMsg:q.communicationProblem+" "+q.retryingIn})},_load:function(){var b=new a;this._fetchListElements().then(n.hitch(this,function(a){if(a&&a.length)for(var c=0;c<a.length;c++){var f=q.none;"undefined"!==typeof a[c].toString&&(f=a[c].toString());var d=this._grid.store.query(null).length;
this._grid.store.put({rowId:d,Element:this.info.elementName,value:f,object:n.clone(a[c])})}b.resolve()}));return b.promise},_fetchListElements:function(){return!1===this._loadViaReadRange?this._fetchReadPropertyMultiple():this._fetchReadRange()},_fetchReadRange:function(){var b=new a;this.own(b);var c=this.info.className,f=isNaN(this._readRangePosition.get("value"))?1:this._readRangePosition.get("value"),d=null,d=!0===this._loadEntireList?new K({f:new C([],A.primitiveTypes.BIT_STRING),d:new H(new c),
fs:new J(0,A.primitiveTypes.UNSIGNED_INTEGER)},1):new K({i:new J(f,A.primitiveTypes.UNSIGNED_INTEGER),f:new C([],A.primitiveTypes.BIT_STRING),c:new J(1,A.primitiveTypes.SIGNED_INTEGER),d:new H(new c),fs:new J(0,A.primitiveTypes.UNSIGNED_INTEGER)},3),c=[{o:new G(this.ge.pointName.type,this.ge.pointName.comInstance),pl:[{p:new J(this.ge.property,A.primitiveTypes.ENUMERATED),i:-1,rr:d}]}],c=new L({device:this.ge.psdDevice},c);rc.xhr.request({type:"bacnet",gid:"GRP",s:c,load:n.hitch(this,function(a){var c=
a.o[0].pl[0];c.v&&c.v instanceof F?b.reject(e):(c=[],a.o[0].pl[0].rr.r.d.l&&a.o[0].pl[0].rr.r.d.l.length&&(c=a.o[0].pl[0].rr.r.d.l[0].l),b.resolve(c))}),error:n.hitch(this,function(a){b.reject(a)})});return b.promise},_fetchReadPropertyMultiple:function(){var b=new a;this.own(b);var c=this.info.className,c=[{o:new G(this.ge.pointName.type,this.ge.pointName.comInstance),pl:[{p:new J(this.ge.property,A.primitiveTypes.ENUMERATED),i:-1,v:new c}]}],c=new O({device:this.ge.psdDevice},c);rc.xhr.request({type:"bacnet",
gid:"GRP",s:c,load:n.hitch(this,function(a){var c=a.o[0].pl[0];c.v&&c.v instanceof F?b.reject(e):(c=[],a.o[0].pl[0].v.l&&(c=a.o[0].pl[0].v.l),b.resolve(c))}),error:n.hitch(this,function(a){b.reject(a)})});return b.promise},_send:function(){var a=new this.info.className(this._elements),a={o:new G(this.ge.pointName.type,this.ge.pointName.comInstance),p:new J(this.ge.property,9),i:-1,l:a},a=this._addButton.get("checked")?new M({device:this.ge.psdDevice},a):new P({device:this.ge.psdDevice},a);return this._makeWriteRequest({gid:"GRP",
type:"bacnet",s:a,error:function(a,b){}})},_makeWriteRequest:function(a){return rc.xhr.request(a)},_onClickCancel:function(){this._dialog.hide()},_onLoad:function(){this._elements=[];this._resetGrid();this._load().always(n.hitch(this,function(){this._grid.resize()}))}})})},"rc/bacnet/_widget/DialogEditElement":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-class dojo/Evented dojo/i18n!rc/nls/all dojo/query dojo/text!./templates/DialogEditElement.html ../enums ../io/Array ../io/CalendarEntry ../io/Date ../io/DateRange dijit/Dialog dijit/form/Button ./DestinationEditor ./DeviceObjectPropertyReferenceEditor ./PeriodEditor ./RecipientEditor ../../widget/ErrorDialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return l("rc/bacnet/_widget/DialogEditElement",[p,r,m,c],{templateString:n,_element:null,_elementsProperty:null,_sizeDialogClass:"destinationSize",postCreate:function(){this.inherited(arguments);this._supportingWidgets.push(this._periodEditor);this._supportingWidgets.push(this._destinationEditor);this._supportingWidgets.push(this._recipientEditor);this._supportingWidgets.push(this._doprEditor);this._supportingWidgets.push(this._dialog);this._supportingWidgets.push(this._errorDialog);
this._periodEditor._legendLabel.innerHTML="Calendar entry"},show:function(b,c){this._element=c;switch(b){case a.propertyTypes.PROPID_RECIPIENT_LIST:this._showDestination(c);break;case a.propertyTypes.PROPID_DATELIST:this._showCalendarEntryValue(c);break;case a.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:this._showDeviceObjectPropertyReference(c);break;case a.propertyTypes.PROPID_TIME_SYNCHRONIZATION_RECIPIENTS:this._showRecipient(c);break;default:console.error("unsupported bacnet object property",
b);return}this._elementsProperty=b;this._dialog.show()},_sizeDialog:function(a){this._sizeDialogClass!=a&&(h.remove(this._dialog.domNode,this._sizeDialogClass),this._sizeDialogClass=a,h.add(this._dialog.domNode,this._sizeDialogClass))},_showDestination:function(a){this._sizeDialog("destinationSize");this._destinationEditor.initialize(a);this._showElement(this._destinationElem)},_showCalendarEntryValue:function(a){this._sizeDialog("calendarSize");var b,c=[];if(a)switch(b=a.d,a=a.c,a){case 0:c=[b,a];
break;case 1:c=[b.ds,b.de,a];break;case 2:c=[b.ary,a]}else b=new Date,b={d:b.getDate(),m:b.getMonth()+1,y:b.getFullYear()-1900,dow:b.getDay()},c=[b,b,1];this._periodEditor.showPeriod(c,null);this._showElement(this._calendarEntryElem)},_showRecipient:function(a){this._sizeDialog("recipientSize");this._recipientEditor.initialize(a);this._showElement(this._recipientElem)},_showDeviceObjectPropertyReference:function(a){this._sizeDialog("doprSize");this._doprEditor.initialize(a);this._showElement(this._deviceObjectPropertyReferenceElem)},
_onClickOk:function(){this.isValid()?(this._element=this._getElement(),this._dialog.hide(),this._onValidOK()):this._errorDialog.show()},_onValidOK:function(){this.emit("validOK")},isValid:function(){this._errorDialog.setMessage(g.dataMissing);switch(this._elementsProperty){case a.propertyTypes.PROPID_RECIPIENT_LIST:if(this._destinationEditor.isValid())return!0;break;case a.propertyTypes.PROPID_DATELIST:if(0<this._periodEditor.getDates().length)return!0;break;case a.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:if(this._doprEditor.isValid())return!0;
break;case a.propertyTypes.PROPID_TIME_SYNCHRONIZATION_RECIPIENTS:if(this._recipientEditor.isValid())return!0}return!1},getElement:function(){return this._element},_getElement:function(){var b={};switch(this._elementsProperty){case a.propertyTypes.PROPID_RECIPIENT_LIST:b=this._destinationEditor.getObject();break;case a.propertyTypes.PROPID_DATELIST:b=this._getCalendarEntryValues();break;case a.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:b=this._doprEditor.getObject();break;case a.propertyTypes.PROPID_TIME_SYNCHRONIZATION_RECIPIENTS:b=
this._recipientEditor.getObject()}return b},_getCalendarEntryValues:function(){var a=this._periodEditor.getDates(),c,d=a[0].type;switch(d){case 0:c=new k(a[0].date.y,a[0].date.m,a[0].date.d,a[0].date.dow);break;case 1:c=new q(new k(a[0].date.y,a[0].date.m,a[0].date.d,a[0].date.dow),new k(a[1].date.y,a[1].date.m,a[1].date.d,a[1].date.dow));break;case 2:c=new b([a[0].date.nums.moy,a[0].date.nums.wom,a[0].date.nums.dow],6)}return new t(d,c)},_onClickCancel:function(){this._dialog.hide()},_showElement:function(a){d(".elementDialogContext \x3e div").forEach(function(a){h.remove(a,
"elementDialogContextDisplay")});h.add(a,"elementDialogContextDisplay")},_closeErrorDialog:function(){this._errorDialog.hide()}})})},"rc/bacnet/_widget/DestinationEditor":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/text!./templates/DestinationEditor.html ../io/Array ../io/Destination ../io/Number ../io/Time ../property dijit/form/CheckBox dijit/form/ValidationTextBox ./RecipientEditor".split(" "),function(r,p,m,
l,h,c,g,d,n,a,b){return h("rc/bacnet/_widget/DestinationEditor",[p,r,m],{templateString:c,src:"",_destination:null,postCreate:function(){this.inherited(arguments);this._supportingWidgets.push(this._recipientEditor)},initialize:function(a){a?(this._destination=a,this._setValues(a)):this.reset()},_setValues:function(a){this._recipientEditor.initialize(a.r);this._mondayCB.set("checked",a.vDays.getBit(1)?!0:!1);this._tuesdayCB.set("checked",a.vDays.getBit(2)?!0:!1);this._wednesdayCB.set("checked",a.vDays.getBit(3)?
!0:!1);this._thursdayCB.set("checked",a.vDays.getBit(4)?!0:!1);this._fridayCB.set("checked",a.vDays.getBit(5)?!0:!1);this._saturdayCB.set("checked",a.vDays.getBit(6)?!0:!1);this._sundayCB.set("checked",a.vDays.getBit(7)?!0:!1);this._toTB.set("value",a.tt.h+":"+a.tt.m+":"+a.tt.s+"."+a.tt.hh);this._fromTB.set("value",a.ft.h+":"+a.ft.m+":"+a.ft.s+"."+a.ft.hh);this._offNormalCB.set("checked",a.t.getBit(1)?!0:!1);this._faultCB.set("checked",a.t.getBit(2)?!0:!1);this._normalCB.set("checked",a.t.getBit(3)?
!0:!1);this._processIDTB.set("value",a.pID.v);this._issueConfirmedNotificationsCB.set("checked",a.icn.v?!0:!1)},getValues:function(){var c=new b(85),k=this._recipientEditor.getObject(),h=function(a){var b=0;l.forEach(a,function(a,c){b+=a<<7-c&255});return b},f=[this._mondayCB.get("checked")?1:0,this._tuesdayCB.get("checked")?1:0,this._wednesdayCB.get("checked")?1:0,this._thursdayCB.get("checked")?1:0,this._fridayCB.get("checked")?1:0,this._saturdayCB.get("checked")?1:0,this._sundayCB.get("checked")?
1:0],f=new g([1,h(f)],8),m=c.setTimeValue(new a,this._fromTB.get("value")),c=c.setTimeValue(new a,this._toTB.get("value")),p=[this._offNormalCB.get("checked")?1:0,this._faultCB.get("checked")?1:0,this._normalCB.get("checked")?1:0],h=new g([5,h(p)],8),p=new n(parseInt(this._processIDTB.get("value"),10),2),r=new n(this._issueConfirmedNotificationsCB.get("checked")?1:0,1);this._destination=new d(f,m,c,k,p,r,h)},getObject:function(){this.getValues();return this._destination},isValid:function(){if(this._recipientEditor.isValid()&&
this._fromTB.isValid()&&this._toTB.isValid()&&this._processIDTB.isValid()){var a=this._timeStrToSeconds(this._toTB.get("value"));return this._timeStrToSeconds(this._fromTB.get("value"))>a?!1:!0}return!1},_timeStrToSeconds:function(a){var b=a.split(":"),c=b[2].split(".");a=parseInt(b[0],10);var b=parseInt(b[1],10),f=parseInt(c[0],10),c=parseInt(c[1],10);return 3600*a+60*b+f+c/60},reset:function(){this._recipientEditor.initialize();this._mondayCB.set("checked",!1);this._tuesdayCB.set("checked",!1);
this._wednesdayCB.set("checked",!1);this._thursdayCB.set("checked",!1);this._fridayCB.set("checked",!1);this._saturdayCB.set("checked",!1);this._sundayCB.set("checked",!1);this._toTB.reset();this._fromTB.reset();this._toTB.set("value","23:59:59.0");this._fromTB.set("value","00:00:00.0");this._offNormalCB.set("checked",!1);this._faultCB.set("checked",!1);this._normalCB.set("checked",!1);this._processIDTB.reset();this._processIDTB.set("value",0);this._issueConfirmedNotificationsCB.set("checked",!1)}})})},
"rc/bacnet/io/Destination":function(){define("dojo/_base/declare ./Array ./Number ./Recipient ./Time ../enums".split(" "),function(r,p,m,l,h,c){return r("rc/bacnet/io/Destination",null,{vDays:null,ft:null,tt:null,r:null,pID:null,icn:null,t:null,constructor:function(g,d,n,a,b,t,k){this.vDays=g||new p([1,254],c.primitiveTypes.BIT_STRING);this.ft=d||new h;this.tt=n||new h;this.r=a||new l;this.pID=b||new m(0,c.primitiveTypes.UNSIGNED_INTEGER);this.icn=t||new m(0,c.primitiveTypes.BINARY);this.t=k||new p([5,
7],c.primitiveTypes.BIT_STRING)},encode:function(){var c=[],c=c.concat(this.vDays.encode()),c=c.concat(this.ft.encode()),c=c.concat(this.tt.encode()),c=c.concat(this.r.encode()),c=c.concat(this.pID.encode()),c=c.concat(this.icn.encode());return c=c.concat(this.t.encode())},decode:function(c,d){d=this.vDays.decode(c,d);d=this.ft.decode(c,d);d=this.tt.decode(c,d);d=this.r.decode(c,d);d=this.pID.decode(c,d);d=this.icn.decode(c,d);return d=this.t.decode(c,d)},toString:function(){var c="{valid days: "+
this.vDays,c=c+(", from times: "+this.ft),c=c+(", to times: "+this.tt),c=c+(", recipients "+this.r),c=c+(", process IDs "+this.pID),c=c+(", issue confirmed notifications? "+this.icn),c=c+", event transitions: ["+(this.t.getBit(0)+", "+this.t.getBit(1)+", "+this.t.getBit(2)+"]");return c+"}"}})})},"rc/bacnet/io/Recipient":function(){define(["dojo/_base/declare","./Address","./Object","../error"],function(r,p,m,l){return r("rc/bacnet/io/Recipient",null,{c:0,d:null,constructor:function(h,c){this.c=h||
0;this.d=c||new m(8,1E3)},encode:function(){var h=[];switch(this.c){case 0:h=h.concat(this.d.encode(12));break;case 1:h=h.concat(this.d.encode())}return h},decode:function(h,c){switch(h[c]){case 12:this.c=0;this.d=new m;c=this.d.decode(h,c);break;case 30:this.c=1;this.d=new p;c++;c=this.d.decode(h,c);c++;break;default:l.throwError(65,62)}return c},toString:function(){var h="{choice:"+this.c+", data:";switch(this.c){case 0:case 1:h+=this.d.toString()+"}";break;default:h+="Decode Error}"}return h}})})},
"rc/bacnet/io/Address":function(){define(["dojo/_base/declare","./Array","./Number","../enums"],function(r,p,m,l){return r("rc/bacnet/io/Address",null,{net:null,addr:null,constructor:function(h,c){this.net=h&&0<=h?h:new m(0,l.primitiveTypes.UNSIGNED_INTEGER);this.addr=c||new p([],l.primitiveTypes.OCTET_STRING)},encode:function(){var h=[];h.push(30);h=h.concat(this.net.encode());h=h.concat(this.addr.encode());h.push(31);return h},decode:function(h,c){c=this.net.decode(h,c);return c=this.addr.decode(h,
c)},toString:function(){return"{network:"+this.net+", MAC address:"+this.addr}})})},"rc/bacnet/_widget/RecipientEditor":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/text!./templates/RecipientEditor.html ../io/Address ../io/Array ../io/Number ../io/Recipient dijit/form/RadioButton dijit/form/ValidationTextBox ./ObjectIDEditor".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k){return h("rc/bacnet/_widget/RecipientEditor",
[p,r,m],{templateString:n,src:"",_recipient:null,_isShowingDeviceType:!0,postCreate:function(){this.inherited(arguments);this._supportingWidgets.push(this._objectIDEditor);this.own(g.after(this._deviceRB,"click",c.hitch(this,this._onSelectType)),g.after(this._addressRB,"click",c.hitch(this,this._onSelectType)));this._objectIDEditor.hideLabel()},initialize:function(a){a?(this._recipient=a,this._setValues(a.c,a.d)):this.reset()},_setValues:function(a,b){(this._isShowingDeviceType=a?!1:!0)?this._objectIDEditor.initialize(b):
(this._deviceRB.set("checked",this._isShowingDeviceType),this._addressRB.set("checked",!0),this._toggleTypes(this._isShowingDeviceType),this._MACAddressTB.reset(),b.addr.ary.length&&this._MACAddressTB.set("value",b.addr.ary.join(".")),this._networkTB.set("value",b.net.v))},getValues:function(){var c,f;this._isShowingDeviceType&&this._deviceRB.get("checked")?(c=0,f=this._objectIDEditor.getObject()):(c=parseInt(this._networkTB.get("value"),10),f=this._decodeAddress(this._MACAddressTB.get("value")),
f=new a(new t(c,2),new b(f,6)),c=1);this._recipient=new k(c,f)},_decodeAddress:function(a){if(""==a)return[];var b=a.split(".");l.forEach(b,function(a,c){b[c]=parseInt(a,10)});return b},getObject:function(){this.getValues();return this._recipient},isValid:function(){if(this._isShowingDeviceType)return this._objectIDEditor.isValid();var a=this._networkTB.isValid();return""!=this._MACAddressTB.get("value")?a&&this._MACAddressTB.isValid():a},reset:function(){this._isShowingDeviceType=!0;this._deviceRB.set("checked",
this._isShowingDeviceType);this._toggleTypes(this._isShowingDeviceType);this._objectIDEditor.reset();this._networkTB.reset();this._networkTB.set("value",0);this._MACAddressTB.reset()},_toggleTypes:function(a){a?(d.add(this._addressContainer,"hideContainer"),d.remove(this._objectIDContainer,"hideContainer")):(d.remove(this._addressContainer,"hideContainer"),d.add(this._objectIDContainer,"hideContainer"))},_onSelectType:function(a){this._deviceRB.get("checked")?this._isShowingDeviceType=!0:this._isShowingDeviceType=
!1;this._networkTB.set("required",!this._isShowingDeviceType);this._toggleTypes(this._isShowingDeviceType)},toString:function(a){a||(a=this._recipient);var b="";if(0==a.c)b="Device: "+a.d.i;else if(1==a.c){var b="Network",c=a.d.net.v;a=a.d.addr.ary;b=0===a.length?65535==c?"Global Broadcast":b+(": "+c):b+(": "+c+", Address: "+a.join(" "))}return b}})})},"rc/bacnet/io/DestinationList":function(){define(["dojo/_base/declare","./Destination","./List"],function(r,p,m){return r("rc/bacnet/io/DestinationList",
m,{constructor:function(l){this.o=new p;this.l=l||[]}})})},"rc/bacnet/io/RecipientList":function(){define(["dojo/_base/declare","./List","./Recipient"],function(r,p,m){return r("rc/bacnet/io/RecipientList",p,{constructor:function(l){this.o=new m;this.l=l||[]}})})},"rc/bacnet/io/service/AddListElement":function(){define(["dojo/_base/declare","./_Service","../Number","../../enums"],function(r,p,m,l){return r("rc/bacnet/io/service/AddListElement",p,{constructor:function(h,c){this.t=0;this.s=8;this.r=
h;this.o=c;this._firstFailedElement=null},encode:function(){this.buff=[];var h=this.o;this.buff=this.buff.concat(h.o.encode(12));var c=25;this.buff=this.buff.concat(h.p.encode(c));-1!=h.i&&(c+=16,h.i=new m(h.i,l.primitiveTypes.UNSIGNED_INTEGER),this.buff=this.buff.concat(h.i.encode(c)));this.buff.push(62);this.buff=this.buff.concat(h.l.encode());this.buff.push(63);return this.buff},decode:function(h){this.e=this.idx=0;80==(h[this.idx]&248)&&this._decodeClassCodeError(h,this.idx+3)},toString:function(){var h=
this.inherited(arguments),h=h.slice(0,-1),h=h+(" object:"+this.o.o.toString()),h=h+(", property:"+this.o.p.toString()),h=h+(", index:"+this.o.i.toString()),h=h+(", list:"+this.o.l.toString());return h+"}"}})})},"rc/bacnet/io/service/RemoveListElement":function(){define(["dojo/_base/declare","./AddListElement"],function(r,p){return r("rc/bacnet/io/service/RemoveListElement",p,{constructor:function(m,l){this.s=9}})})},"rc/sys/flashCompatibility":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/Deferred","dojo/request/xhr"],function(r,p,m,l){r=r("rc/sys/flashCompatibility",[],{_compatibilityMap:null,_loadDfd:null,load:function(){return l.get(rc.appPath+"/job/FlashCompatibility.json",{handleAs:"json",preventCache:!0}).then(p.hitch(this,function(h){return this._compatibilityMap=h}))},loadOnce:function(){null===this._loadDfd&&(this._loadDfd=new m,this.load().then(p.hitch(this._loadDfd,this._loadDfd.resolve),p.hitch(this._loadDfd,this._loadDfd.reject)));return this._loadDfd.promise}});
rc.FlashCompatibility||(rc.FlashCompatibility=new r);return rc.FlashCompatibility})},"rc/util/numberUtil":function(){define(["dojo/_base/declare"],function(r){return r("rc/util/numberUtil",null,{_scientificRange:999999999,formatFloat:function(p,m,l){var h="";p>this._scientificRange||p<-this._scientificRange||l?(p=p.toExponential(m).split("+"),p[1]="000".slice(0,3-p[1].length)+p[1],h=p.join("+")):h=p.toFixed(m);return h}})()})},"rc/reliable/View":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!../nls/all dojo/string ./Group ./_group/io/View ../bacnet/enums ../bacnet/io/Array ../bacnet/io/Number ../bacnet/io/Object ../bacnet/io/service/ReadPropertyMultiple ../sys/enhgrp".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return r("rc/reliable/View",[c],{isView:!0,isEnhancedGroup:!0,isEquipmentView:!1,isFlashDependant:!1,isPyramid:!1,isSuspendedUpdate:!1,pointType:d.objectTypes.OBJID_PP_ENHANCED_VIEW,constructor:function(){this.ioObject=new g},_decodeProperty:function(a){this.inherited(arguments);switch(a.p.v){case d.propertyTypes.PROPID_PP_VISION_GROUP_TYPE:this._propertyInError(a.v)||(this.isEquipmentView=a.v.valueOf()===this.ioObject.ViewTypes.EquipmentView)}},_detailsLoaded:function(){var a=
this.pointName,b=new m;this.own(b);if(this.isEquipmentView){var c=this.deviceId+"DEV"+this.deviceId,d=a.toMnemonic();this._checkForGroupJsonFile(d).then(p.hitch(this,this._setDisplayProperties),p.hitch(this,function(a){b.reject(this._getJsonNotFoundError(a))})).then(p.hitch(this,b.resolve),p.hitch(this,b.reject))}else b.reject(this._getUnsupportedViewError("Only EQUIPMENTviews are supported"));b.then(p.hitch(this,this._groupJsonChecked,c,a),p.hitch(this,this.onInitError))},_getUnsupportedViewError:function(a){return new rc.Error({name:h.substitute(l.couldNotLoad,
[l.view]),message:h.substitute(l.unsupportedX,[this.pointName.toMnemonic()]),suggestion:l.unsupportedFix,e:a})},_sendGroupDataRequest:function(c){var f=[{o:new b(this.pointType,this.pointInstance),pl:[{p:new a(d.propertyTypes.PROPID_PP_VISION_GROUP_TYPE,d.primitiveTypes.ENUMERATED),i:-1,v:new a(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new a(d.propertyTypes.PROPID_PP_GRAPHIC_FILE_NAME,d.primitiveTypes.ENUMERATED),i:-1,v:new n([],d.primitiveTypes.CHARACTER_STRING)},{p:new a(d.propertyTypes.PROPID_PP_BACKGROUND_COLOUR,
d.primitiveTypes.ENUMERATED),i:-1,v:new a(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new a(d.propertyTypes.PROPID_PP_BACKGROUND_WIDTH,d.primitiveTypes.ENUMERATED),i:-1,v:new a(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new a(d.propertyTypes.PROPID_PP_BACKGROUND_HEIGHT,d.primitiveTypes.ENUMERATED),i:-1,v:new a(0,d.primitiveTypes.UNSIGNED_INTEGER)}]}];rc.xhr.request({type:"bacnet",s:new t({device:this.deviceId},f)}).then(p.hitch(this,this._decodeGroupLoad,c),p.hitch(this,function(){this.isEquipmentView=
!1;c.resolve()}))},_setDisplayProperties:function(){var a=new m;this.own(a);var b=k.loadOnce(this.groupJSONFile);this.own(b);b.then(p.hitch(this,function(b){try{var c=JSON.parse(b);"undefined"!==typeof c.background_image&&(this.backgroundFile=c.background_image);"undefined"!==typeof c.background_height&&(this.imageHeight=c.background_height);"undefined"!==typeof c.background_width&&(this.imageWidth=c.background_width)}catch(z){console.error("Could not parse view json",z),a.reject(this._getJsonNotFoundError(z))}a.resolve()}),
p.hitch(this,function(b){a.reject(this._getJsonNotFoundError(b))}));return a},_setSuspendUpdateFlag:function(){this.isSuspendedUpdate=!1}})})},"rc/reliable/_group/io/View":function(){define(["dojo/_base/declare","./Group","../../../bacnet/Object","../../../sys/desc"],function(r,p,m,l){return r("rc/reliable/_group/io/View",[p],{ViewTypes:{UndefinedView:0,FirstAppView:1,StatView:1,SpaceView:2,ListView:3,LastAppView:3,ConfigurationView:4,AlarmView:5,ScheduleView:6,TrendView:7,RuntimeReportView:8,ContactView:9,
EquipmentView:10,ManualPointsReportView:11,DiagnosticView:12,ListOfViewsView:13,LastValidView:13},_fetchPictureFile:function(){this.pictureFile="";this.onLoad(this);this._d.resolve(this)},_getDescriptorForGroup:function(h){return l.getBestName(new m(h.mainController,h.mainType,h.mainInstance))}})})},"rc/reliable/RuntimeLog":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!rc/nls/tl dojo/string dojo/topic ./_runtime/io/Archive ./_runtime/DataManager ./_RuntimeLog ./Point ../_base/Error ../date ../sys/desc ../util/encoding/base16 ../widget/RuntimeLog ../xhr".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x){return p("rc/reliable/RuntimeLog",[z,t],{_currIndex:0,_wrapped:0,_bufferSize:0,gid:"RT",a:null,datam:null,postCreate:function(){this.a=new a;this.datam=new b;this.pointName=new k(this.mainController,this.subnet,this.subController,9,this.pointInstance);this._init();this.inherited(arguments)},_getTitle:function(){if(!this.title){var a=this._fetchResources(),b=new h;a.always(m.hitch(this,function(){b.resolve(!0)}));b.then(m.hitch(this,function(){return this._fetchSummary()})).then(m.hitch(this,
function(a){return this._decodeSummary(a.data)})).then(m.hitch(this,function(a){if(a)try{var b=a[this.pointInstance].point,b=b?b+"-RT":this.mnemonic;this._setTitle(b)}catch(E){this._setTitle(this.mnemonic)}}))}},fetch:function(){this._beginUpdate()&&this._fetchResources().always(m.hitch(this,function(){this._retryHandler.notifyRetry({action:m.hitch(this,this._fetchSequence),retryMsg:c.communicationProblem+" "+c.retryingIn,failMsg:d.substitute(c.communicationFail,[window.location.href])}).then(m.hitch(this,
function(a){this._endUpdate();this.onInitSuccess();return a}),m.hitch(this,function(a){this._endUpdate();this._onInitError(a)}))}))},_fetchSequence:function(){var a,b,f=new h,l=new h,n={dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:9,xl:Math.floor((this.pointInstance-1)/this.BANK_SIZE),xh:0,cnt:0},t={sampleSize:2E3,dateFirst:0,dateLast:(new Date).getTime()+this.MSEC_PER_DAY};f.then(m.hitch(this,function(){this.datam.formatGridItems(t.sampleSize);this.render(this.datam.gridItems)}));
this.datam.clearData();var u=this._fetch(n);u.then(m.hitch(this,function(h){l.resolve();h=h.data;if(1>h.length)throw new q("Fetched headers are empty.");if(this.isLC){b=15;a=(this.pointInstance-1)%this.BANK_SIZE*b;if(p=w.toUnsignedEnd(h.slice(a+0,a+2)))t.pointLogged=new k(p,this.pointName);this._currIndex=parseInt(h[a+10],10);this._wrapped=h[a+11]?1:0;this._bufferSize=150}else{b=20;a=(this.pointInstance-1)%this.BANK_SIZE*b;var p=w.toUnsignedEnd(h.slice(a+0,a+2));p&&(t.pointLogged=new k(p,this.pointName));
this._currIndex=w.toIntEnd(h.slice(a+10,a+12));this._wrapped=h[a+12]?1:0;this._bufferSize=h[a+17]}n={dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:23,xl:this.pointInstance-1,xh:0,cnt:0};this._errMsg=d.substitute(c.couldNotLoad,[g.logData])+c.dataMissing;u=this._fetch(n);u.then(m.hitch(this,function(a){a=a.data;if(1>a.length&&!this.isLC)throw new q("Fetched data is empty.");this.decode(a)})).then(m.hitch(this,function(){this._checkArchive(f,t)}),m.hitch(this,function(a){l.reject(this.safeError(a,
{name:d.substitute(c.xNotFound,[c.rt]),message:this._replace(c.couldNotLoad)+" "+c.objNotFound,suggestion:c.objNotFoundFix}))}))}),m.hitch(this,function(a){l.reject(this.safeError(a,{name:d.substitute(c.xNotFound,[c.rt]),message:this._replace(c.couldNotLoad)+" "+c.objNotFound,suggestion:c.objNotFoundFix}))}));return l.promise},_checkArchive:function(a,b){var c=this.a.checkForWebService(),f=m.hitch(this,function(c){try{if(this.a.enabled=1===Number(c)?!0:!1,this.a.enabled){var f=this.a._fetchTotalRecordCount(this.pointName.toMnemonic()),
d=m.hitch(this,function(c){this.totalArchiveRecords=c;0<this.totalArchiveRecords?this._fetchArchive(a,b):a.resolve()});f.always(m.hitch(this,d))}else a.resolve()}catch(F){console.error("There was an error when checking for the archive service: ",F),a.resolve()}});c.always(m.hitch(this,f))},_nullDate:function(a){a=l.parse(a,{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a",locale:"en-us"});return null==a||1900===a.getFullYear()&&0===a.getMonth()&&1===a.getDate()&&0===a.getHours()&&0===a.getMinutes()&&
0===a.getSeconds()},_fetchArchive:function(a,b){var c=this.a._fetchArchiveData(this,b.sampleSize,b.dateFirst,b.dateLast);this.own(c);var f=m.hitch(this,function(b,c){c&&(c.Error?console.error(c.Error):b.pointLogged.toMnemonic()!==c.Point||this._nullDate(c.DateLast)||this.datam.addArchiveData(c));a.resolve()});c.always(m.hitch(this,f,b))},_fetch:function(a){var b=new h;this.own(b);a={gid:this.gid,type:"rcp",method:"GET",cmdObj:a,load:m.hitch(this,function(a){b.resolve(a)}),error:m.hitch(this,function(a){b.reject(new q({name:d.substitute(c.xNotFound,
[c.rt]),message:this._replace(c.couldNotLoad)+" "+d.substitute(c.hostXOffline,[this.mainController]),suggestion:c.hostOfflineFix,e:a}))})};rc.xhr.request(a);return b.promise},decode:function(a){try{var b=[],f,d,g,k;this._wrapped?(d=f=4*this._currIndex,g=4*this._bufferSize,k=f,b.push(1E3*w.toIntEnd(a.slice(k,k+4))),f+=4):(f=0,d=4*this._currIndex,g=d+4);for(k=f;k!==d;)b.push(1E3*w.toIntEnd(a.slice(k,k+4))),k=(k+4)%g;f=this._wrapped?this._currIndex%2?1:0:0;a=!0;for(k=f;k<b.length;k++)this.datam.addLiveData({timeVal:b[k],
onVal:a}),a=!a}catch(D){throw new q({name:this._replace(c.problemInX),message:this._replace(c.couldNotLoad)+" "+c.dataProblem,suggestion:c.dataProblemFix,e:D});}},_disableButtons:function(a){this._buttons&&this._buttons.length&&(r.forEach(this._buttons,function(b){b.set("disabled",a)}),a||0!==this._grid.store.data.length||(this._printButton.set("disabled",!0),this._exportButton.set("disabled",!0)))},_formatDate:function(a){return 0===a?"":f.formatUTC(a)},_formatTime:function(a){return 0===a?"":f.msecToAccumulation(a,
!0)},_decodeSummary:function(a){try{for(var b={},c,f=1,d=0;d<a.length;d+=this.RUNTIME_LOG_SIZE)c=(c=w.toUnsignedEnd(a.slice(d+0,d+2)))?this._getBestName(c):"",b[f++]={point:c};return b}catch(B){}},_getBestName:function(a){a=new k(a,this.pointName);return u.getBestRcp(a)}})})},"rc/reliable/_RuntimeLog":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/promise/all dojo/string dojo/topic ../_base/Error ../sys/desc ../sys/job".split(" "),function(r,p,m,l,h,
c,g,d,n,a){return r("rc/reliable/_RuntimeLog",null,{RUNTIME_LOG_SIZE:20,BANK_SIZE:32,isLC:!1,doneDeferred:null,name:"",_fetchResources:function(){var b=new m,c=a.loadOnce(),d=n.loadOnce();this.own(b,c,d);h([c,d]).always(p.hitch(this,function(c){if(this.isLC=a.isLC(this.pointName))this.BANK_SIZE=4,this.RUNTIME_LOG_SIZE=15;b.resolve(c)}));return b.promise},_fetchSummary:function(){var a=new m;this.own(a);var g=[],k={gid:this.gid,type:"rcp",method:"GET",cmdObj:{dest:this.mainController,subt:this.subnet,
subd:this.subController,src:0,cmd:9,xl:0,xh:0,cnt:0}},h=p.hitch(this,function(b){var c=this.isLC?1:7;g=g.concat(b.data);b.data.length<this.RUNTIME_LOG_SIZE*this.BANK_SIZE||b.cmdObj.xl===c?(b.data=g,a.resolve(b)):(b.cmdObj.xl++,rc.xhr.request({gid:this.gid,type:"rcp",method:"GET",cmdObj:b.cmdObj}).then(p.hitch(this,h),p.hitch(this,f)))}),f=p.hitch(this,function(b){a.reject(new d({name:c.substitute(l.xNotFound,[this.type]),message:this._replace(l.couldNotLoad)+" "+c.substitute(l.hostXOffline,[this.mainController]),
suggestion:l.hostOfflineFix,e:b}))});rc.xhr.request(k).then(p.hitch(this,h),p.hitch(this,f));return a.promise},_getDescriptors:function(){if(this.isLC=a.isLC(this.pointName))this.BANK_SIZE=4,this.RUNTIME_LOG_SIZE=15;return n.loadOnce()}})})},"rc/reliable/RuntimeLogWorksheet":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/string dojo/topic ./_RuntimeLog ./Point ../_base/Error ../sys/desc ../sys/job ../util/encoding/base16 ../widget/RuntimeLogWorksheet".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return r("rc/reliable/RuntimeLogWorksheet",[k,g],{gid:"RTS",postCreate:function(){this.pointName=new d(this.mainController,this.subnet,this.subController,0,this.pointInstance);this._init();this.inherited(arguments)},decode:function(b){var c=new m;this.own(c);try{var g=[],k,h,q,p,v,r,C,E,B,D,F,H;k=1;for(var J=0;J<b.length;J+=this.RUNTIME_LOG_SIZE)(q=t.toUnsignedEnd(b.slice(J+0,J+2)))?(q=h=new d(q,this.pointName),H=a.getBestName(h),this.isLC?(p=t.toUnsignedEnd(b.slice(J+
14,J+15)),v=t.toUnsignedEnd(b.slice(J+2,J+4)),C=t.toUnsignedEnd(b.slice(J+4,J+8))):(p=t.toUnsignedEnd(b.slice(J+3,J+4)),v=t.toUnsignedEnd(b.slice(J+4,J+6)),C=t.toUnsignedEnd(b.slice(J+6,J+10))),r=1E3*(3600*v+60*p),E=new Date(1E3*C)):(q=new d,H="",r=0,E=new Date(0)),this.isLC?(D=t.toUnsignedEnd(b.slice(J+8,J+10)),F=t.toUnsignedEnd(b.slice(J+12,J+13)),B=75):(D=t.toUnsignedEnd(b.slice(J+14,J+16)),F=t.toUnsignedEnd(b.slice(J+16,J+17)),B=t.toUnsignedEnd(b.slice(J+17,J+18))),g.push({index:k++,point:q,pointStr:H,
onTime:r,startDate:E,length:B,total:D,today:F});c.resolve(g)}catch(G){c.reject(new n({name:this._replace(l.problemInX),message:this._replace(l.couldNotLoad)+" "+l.dataProblem,suggestion:l.dataProblemFix,e:G}))}return c.promise},fetch:function(){var a=new m;this.own(a);if(!this._beginUpdate())return null;this._fetchResources().always(p.hitch(this,function(){this._retryHandler.notifyRetry({action:p.hitch(this,this._fetchSequence),retryMsg:l.communicationProblem+" "+l.retryingIn,failMsg:h.substitute(l.communicationFail,
[window.location.href])}).then(p.hitch(this,function(b){this._endUpdate();this.onInitSuccess();a.resolve(b);return b}),p.hitch(this,function(b){this._endUpdate();this._onInitError(b);a.reject(b)}))}));return a.promise},getLinkTextTitle:function(a){var b=a.pointStr;a=(new d(this.mainController,this.subnet,this.subController,9,a.index)).toMnemonic();return[b,b?b+"-RT ("+a+")":a,a]},_fetchSequence:function(){var a=new m;this._fetchSummary().then(p.hitch(this,function(a){return this.decode(a.data)})).then(p.hitch(this,
function(a){return this.render(a)})).then(p.hitch(this,function(b){a.resolve(b)}));return a.promise},_getTitle:function(){b.loadOnce().always(p.hitch(this,function(){var a=b.getAnyProperty(this.pointName,"name")||this.pointName.toPanelName().split("#")[1];this._setTitle(a+" - "+l.runtimeLogs)}))}})})},"rc/reliable/WeeklySchedule":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dijit/form/ValidationTextBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/url dojo/date/locale dojo/Deferred dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!rc/reliable/_weekly/templates/WeeklySchedule.html dojo/topic require ../_base/Error ../_base/util ../_Widget ../date ../util/encoding/base64 ../util/notices ../widget/Retry ../widget/Toolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H){return c("rc/reliable/WeeklySchedule",E,{templateString:x,testMode:!1,pointInstance:1,mainController:1,subController:0,subnet:0,mnemonic:"",_updating:!1,_canEdit:!0,_buttons:null,_dow:"mon tue wed thu fri sat sun or1 or2".split(" "),_fetchPath:v.toUrl("rc/tests/proxy.php"),_url:"",constructor:function(){this._canEdit=rc.session.isPrivate()&&rc.session.hasRole(rc.session.roles.wsChg);this._gridStore=new w(new u)},postCreate:function(){this.inherited(arguments);
this.own(q(this,"sendReasonAdded",g.hitch(this,this.send)));this._retryHandler=new H;this._createToolbarConnections();this._buttons=this._toolbar.getPageButtons();this.setTooltips();this._grid=this._createGrid();var a=new d(window.location);this._url=a.scheme+"://"+a.host;h.forEach(this._buttons,"item.set('disabled', false);");rc.test.isLive()&&this.fetch()},_createToolbarConnections:function(){this._canEdit&&(this._saveButton=this._toolbar.getButton("Save"),this.own(q(this._saveButton,"click",g.hitch(this,
this.sendWithReason))));this._printButton=this._toolbar.getButton("Print");this._exportButton=this._toolbar.getButton("Export");this.own(q(this._printButton,"click",g.hitch(this,this.print)),q(this._exportButton,"click",g.hitch(this,this.exportCsv)))},_createGrid:function(){var a=n.getNames("days","abbr","format"),b=a.shift();a.push(b,"Or1","Or2");a=this._getColumnStructure(a);a=new (c([r,m]))({className:"dgrid-autoheight",sort:[{attribute:"id"}],columns:a,isPagingGrid:!1,maxRowsPerPage:128,bufferRows:16,
toString:C.gridToString,store:this._gridStore},this.gridNode);a.startup();this.own(q(a,"dgrid-datachange",g.hitch(this,this._performGridChange)));return a},_performGridChange:function(a){this._grid.dirty[a.rowId]={};this._grid.dirty[a.rowId][a.cell.column.field]=a.value;this._validAgainstOtherRows(Number(a.rowId)-1,a.value,a.cell.column.field)?b.remove(a.cell.element,"rcWeeklyCellError"):b.add(a.cell.element,"rcWeeklyCellError");this._reevaluateOtherRows(a.rowId,a.cell.column.field);a=0<f(".rcWeeklyCellError",
this._grid.domNode).length;a||(this._grid.save(),this.makeDirty());this._canEdit&&this._saveButton.set("disabled",a)},_reevaluateOtherRows:function(a,c){for(var f="00:00",d=-1,g=null,k=this._gridStore.query(function(b){return b.id!==Number(a)}),h=k.length-1;0<=h;--h)"00:00"!==k[h][c]&&(d=k[h].id,f=this._grid.dirty.hasOwnProperty(k[h].id)&&this._grid.dirty[d].hasOwnProperty(c)?this._grid.dirty[d][c]:k[h][c],g=this._grid.cell(d,c).element,this._validAgainstOtherRows(d-1,f,c)?b.remove(g,"rcWeeklyCellError"):
b.add(g,"rcWeeklyCellError"))},_validAgainstOtherRows:function(a,b,c){if(""===b||"00:00"===b)return!0;var f=a+1,d="00:00",d=null,g=/(\d{2}):(\d{2})/,d=g.exec(b);b=Number(d[1]);for(var k=Number(d[2]);0<=a;){d=this._grid.dirty.hasOwnProperty(a)&&this._grid.dirty[a].hasOwnProperty(c)?this._grid.dirty[a][c]:this._gridStore.get(a)[c];if("00:00"!==d&&""!==d&&(d=g.exec(d),null!==d&&(Number(d[1])>b||Number(d[1])===b&&Number(d[2])>=k)))return!1;a--}for(a=f+1;a<=this._gridStore.data.length-1;){d=this._grid.dirty.hasOwnProperty(a)&&
this._grid.dirty[a].hasOwnProperty(c)?this._grid.dirty[a][c]:this._gridStore.get(a)[c];if("00:00"!==d&&""!==d&&(d=g.exec(d),null!==d&&(Number(d[1])<b||Number(d[1])===b&&Number(d[2])<=k)))return!1;a++}return!0},_getColumnStructure:function(a){var b=[{field:"rowHead",label:"",id:"rowHeadCol",sortable:!1}];h.forEach(this._dow,function(c,f){b.push(p({editor:l,editOn:"click",field:c+"Col",label:a[f],id:c+"Col",sortable:!1,className:7>f?rc.session.hasRole(rc.session.roles.wsChg)?"linkable":"":rc.session.hasRole(rc.session.roles.esChg)?
"linkable":"",editorArgs:{pattern:"^(?:(?:0|1)\\d|2[0-3]):[0-5]\\d$"},canEdit:g.hitch(this,function(a){return 7>a?rc.session.hasRole(rc.session.roles.wsChg):rc.session.hasRole(rc.session.roles.esChg)},f),formatter:function(a){return"00:00"===a?"":a}}))});return b},_beginUpdate:function(){if(this._updating)return!1;this._updating=!0;F.widget.clear();h.forEach(this._buttons,"item.set('disabled', true);");return!0},_endUpdate:function(){this._updating&&(h.forEach(this._buttons,"item.set('disabled', false);"),
this._updating=!1)},fetch:function(){if(!this._beginUpdate())return null;var a=this._retryHandler.notifyRetry({action:g.hitch(this,this._fetchSequence),retryMsg:k.communicationProblem+" "+k.retryingIn,failMsg:z.substitute(k.communicationFail,[window.location.href])});a.then(g.hitch(this,function(a){this._endUpdate();this.onInitSuccess();return a}),g.hitch(this,function(a){this._endUpdate();this._onInitError(a)}));return a},_fetchSequence:function(){var b=new a;this._fetch().then(g.hitch(this,function(a){if(1>
a.data.length)throw new A({name:z.substitute(k.xNotFound,[k.ws]),message:this._replace(k.couldNotLoad)+" "+k.objNotFound,suggestion:k.objNotFoundFix});if(144!==a.data.length)throw new A({name:this._replace(k.problemInX),message:this._replace(k.couldNotLoad)+" "+k.dataProblem,suggestion:k.dataProblemFix});return this._decode(a.data)})).then(g.hitch(this,function(a){h.forEach(a,function(a,b){a.id=b});return this._render(a)})).then(g.hitch(this,function(a){b.resolve(a)})).otherwise(g.hitch(this,function(a){b.reject(a)}));
return b.promise},_fetch:function(){var b=new a;this.own(b);var c={gid:"WS",type:"rcp",method:"GET",cmdObj:{dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:17,xl:this.pointInstance-1,xh:0,cnt:0},load:g.hitch(this,function(a){b.resolve(a)}),error:g.hitch(this,function(a){b.reject(new A({name:z.substitute(k.xNotFound,[k.ws]),message:this._replace(k.couldNotLoad)+" "+z.substitute(k.hostXOffline,[this.mainController]),suggestion:k.hostOfflineFix,e:a}))})};rc.xhr.request(c);
return b.promise},_decode:function(a){try{for(var b,c,f=[],d=0;8>d;d++)b={},b.rowHead=(d+1)%2?(d/2+1|0)+"-"+k.rtlOn:k.rtlOff,c=2*d,b.id=d,h.forEach(this._dow,function(f){b[f+"Col"]=B.pad2(a[c+1])+":"+B.pad2(a[c]);b[f+"ColValid"]=!0;c+=16},this),f.push(b);return f}catch(M){throw new A({name:this._replace(k.problemInX),message:this._replace(k.couldNotLoad)+" "+k.dataProblem,suggestion:k.dataProblemFix,e:M});}},_render:function(a){try{return this._gridStore.setData(a),this._grid.refresh(),this.makeClean(),
a}catch(G){throw this.safeError(G,{name:C.escapeHtml(this._replace(k.problemInX)),message:k.unexpected,suggestion:k.unexpectedFix,renderHtml:!0});}},_encode:function(){for(var a,b=[],c=this._grid.store.data,f=0;f<this._dow.length;f++)for(var d=0;8>d;d++)a=c[d][this._dow[f]+"Col"].split(":"),b.push(Number(a[1])),b.push(Number(a[0]));return b},send:function(a){if(rc.session.reasonRequired()&&!a)this.showChangeReasonError();else{if(!this._beginUpdate())return null;this._send().then(g.hitch(this,function(){this._addAuditTrail(this._changeReason);
return this._fetchSequence()})).then(g.hitch(this,function(a){F.widget.clear();y.publish("alert",{type:"success",message:k.savedChanges});this._endUpdate();return a})).otherwise(g.hitch(this,function(a){this._endUpdate();y.publish("sticky",{message:k.couldNotSave+" "+k.pleaseTryAgain});return a}))}},_send:function(){var a=D.encode(this._encode());return rc.xhr.request({gid:"WS",type:"rcp",method:"POST",cmdObj:{dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:117,xl:this.pointInstance-
1,xh:0,cnt:a.length,data:a}})},_replace:function(a){return z.substitute(a,[k.ws.toLowerCase()])},print:function(){this.printDGrid(this._grid)},exportCsv:function(){C.exportGridToCSV("weeklyschedule.csv",this.fullTitle,this._grid)},destroy:function(){this._retryHandler&&(this._retryHandler.shutdownRetryQueue(),this._retryHandler.reset(),this._retryHandler.destroyRecursive());rc.xhr.removeGroup("WS");this.inherited(arguments)}})})},"webview/ReliableSystem":function(){define("dijit/layout/BorderContainer dijit/layout/ContentPane dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/hash dojo/i18n!rc/nls/all dojo/i18n!rc/nls/auth dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/query dojo/request/xhr dojo/ready dojo/string dojo/text!./admin/templates/index.html dojo/topic dojox/html/entities rc/_base/test rc/_base/util rc/ReliableSystem rc/util/encoding/base16 rc/util/encoding/base64 rc/util/notices ./_base/tooltip ./_ContextManagerMixin ./_WithRightSideFlyoutMixin ./systemTree/_SystemTreeMixin ./features/leftSideFlyout/LeftSideTreeContainer ./util/pointObject ./util/widgetPicker ./widget/DateTimeDialog ./widget/NotificationPullout ./widget/UserToolBar ./widget/WarningDialog ./widget/WarningDialogEnums ./widget/whatsNew/_WhatsNewMixin dojo/sniff ./_Widget ./admin/widget/TreePaneFlyout ./reliable/Alarm ./util/audit ./widget/AlarmLoader ./bacnet/Calendar ./reliable/_group/io/Group".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U,W){return m("webview/ReliableSystem",[H,W,O,M],{templateString:C,_adminTreeCheckTime:100,_adminWidgetMnemonics:["users"],_dateTimeDialog:null,_esQueue:null,_genericConfirmDialog:null,_maxMisses:10,_navTreeLoadDeferred:null,_notificationPullout:null,_serviceMap:{0:"RCWebviewService",RCWebviewService:{identity:0,url:"CMD/CheckService",counter:0},1:"RCWebAppService",RCWebAppService:{identity:1,url:"CMD/CheckService",
counter:0}},_servicePoll:null,_servicePollTime:3E4,postCreate:function(){this._redirectIfAdminWidget()||(this.inherited(arguments),this._startServicePolling(),rc.session.enforceChangeApproval=this.enforceChangeApproval)},onCreate:function(){rc.reliableSystem=this;this.emit("create")},redirectWithSystem:function(){if(!k()){var a=rc.session.getAttribute("GroupRedirect");if(a&&(Q.getByMnemonic(a),this.typeRequiresSystem(Q.typeAbbr)&&(a=rc.session.getAttribute("SystemRedirect"))&&a.length))return a=webview.pathUtil.getInfo(window.location.pathname).sitePath+
"/"+a+"/",rc.session.setRedirect(a),window.location=a,!0}return!1},_homeRedirectPath:function(){var a=rc.session.getAttribute("GroupRedirect")||"";if(0<a.length){Q.getByMnemonic(a);var a="#"+a,b=webview.pathUtil.getInfo(window.location.pathname).sitePath;if(this.typeRequiresSystem(Q.typeAbbr)){var c=rc.session.getAttribute("SystemRedirect");c&&c.length&&(a=b+"/"+c+"/"+a)}else a=b+"/"+a}return 0<a.length?a:"#"},_loadAlarmNotification:function(b){if(!this._notificationPullout){var f=[];rc.session.hasRole(rc.session.roles2.popupAHAC,
!0)&&f.push({notificationType:"AHACRequests",fetch:!0});rc.session.hasRole(rc.session.roles.viewAlarms)&&!rc.session.hasRole(rc.session.roles.alarmDisable)&&f.push({notificationType:"Alarm",fetch:b});(b=this._siteId())?(rc.session.hasRole(rc.session.roles2.modifyAfterHoursEvents,!0)||rc.session.hasRole(rc.session.roles2.modifyDefaultSchedule,!0))&&f.push({notificationType:"ESQueue",fetch:!0,siteId:b}):console.error(this.declaredClass+"Could not get site id");0<f.length?(this._notificationPullout=
new S({notifications:f},a.create("div",{},this.content.containerNode,"last")),setTimeout(h.hitch(this,function(){this._attachPoints.push("_notificationPullout");this._notificationPullout.startup()}),1500)):n.add(this.alarmInfoContainer,"hidden");this.own(c.after(this,"onPageBlur",h.hitch(this,function(){E.publish("alarmloader",!1)})),c.after(this,"onPageFocus",h.hitch(this,function(){E.publish("alarmloader",!0)})));this.onPageFocus();this.own(z(this,"hashChange",h.hitch(this,function(){this._loading=
!0})),z(this,"load",h.hitch(this,function(){this._loading=!1;!this._blurred&&this._notificationPullout&&this._notificationPullout.play()})))}},_redirectIfAdminWidget:function(){var a=!1,b=k(),b=b.split("?")[0],b=b.split("/")[0];-1<this._adminWidgetMnemonics.indexOf(b.toLowerCase())&&(window.location=window.location.href.replace(rc.pathInfo.path,"/Admin/"),a=!0);return a},_hostInfoLoaded:function(){this.inherited(arguments)},_loadTree:function(){this._makeRightSideFlyoutContainer();var a=new g;this._makeLeftSideFlyoutContainer(a);
this.onMadeTreePane(this._leftSideTreeContainer);return a.promise},_makeLeftSideFlyoutContainer:function(a){this._leftSideTreeContainer=new P({defaultToAdminTree:!1,treePaneFlyout:this.treePaneFlyout,rightSideFlyout:this.rightSideFlyout});this.own(c.after(this._leftSideTreeContainer,"resize",h.hitch(this,function(){this.w&&this.w.resize();this.treePaneFlyout.resize()})),z(this._leftSideTreeContainer,"loadedAdminTreeData",h.hitch(this,function(a,b){this.componentMap=b;null!=this.w&&("undefined"!==
typeof this.w.setupUserToolBar&&this.w.setupUserToolBar(),this.w.isSearchable&&this.w.isSearchable()&&this.w.publishSearchable())})),z(this._leftSideTreeContainer,"loadedNavigationTreeData",h.hitch(this,function(){a.resolve()})),z(this._leftSideTreeContainer,"navigationTreeNodeClick",h.hitch(this,this._onNavigationTreeNodeClick)),z(this._leftSideTreeContainer,"adminTreeNodeClick",h.hitch(this,this._onAdminTreeNodeClick)));this.own(this._leftSideTreeContainer);this.container.addChild(this._leftSideTreeContainer);
this._leftSideTreeContainer.startup();this._attachPoints.push("_leftSideTreeContainer");var b=K.add(x("#rcSystemNav_splitter")[0],q.ttSliderLeft);this._tooltipIds.push(b)},_onAdminTreeNodeClick:function(a,b,c){this._discardChanges=!1;this._confirm().then(h.hitch(this,function(c){this._savePromptConfirmed=this._discardChanges=!0;this._checkAndStopWizard();if(a.widget)if(c=a.widget.toLowerCase(),"device"===c||"system"===c)this.treePaneFlyout.toggle(a);else if(null!=a.access&&0==a.access)b.expandoNode.click();
else if("site"===a.widget.toLowerCase()&&!rc.session.hasRole(rc.session.roles.usersAdmin))b.expandoNode.click();else if(a.hash){c=a.hash[0];var f=window.location.hash;window.location.assign(F.getWindowLocationOrigin()+rc.adminUrl+c);f===c&&this._onHashChange(c)}}))},_onNavigationTreeNodeClick:function(a,b,c){this._discardChanges=!1;this._confirm().then(h.hitch(this,function(){this._savePromptConfirmed=this._discardChanges=!0;this._checkAndStopWizard();var f="";a.widget&&(f=a.widget!==rc.pathInfo.app+
"#"?encodeURI(a.widget):"");if(a.pointType){switch(a.pointType.toUpperCase()){case "HYPERLINK":f=a.widget;break;case "FOLDER":b.isExpandable&&b.expandoNode.click();return}"site"===a.pointType&&(f=window.location.origin,f+=rc.pathInfo.rootPath,f+=a.name);c&&l.stop(c);c.ctrlKey?window.open(f,"_blank"):f===window.location.pathname+window.location.hash?this._onHashChange(f):(this._clearContent(),window.location=f)}}))},_serviceNotAvailable:function(a){a=this._serviceMap[a];++this._serviceMap[a].counter>=
this._maxMisses&&(this._serviceMap[a].counter=0,I.widget.clear(),E.publish("sticky",{type:"error",message:A.substitute(w.serviceNotResponding,[a])}))},_startServicePolling:function(){y.get(this._serviceMap.RCWebviewService.url,{handleAs:"json",preventCache:!0,query:{serviceToCheck:this._serviceMap.RCWebviewService.identity||0}}).otherwise(h.hitch(this,this._serviceNotAvailable,this._serviceMap.RCWebviewService.identity));this._servicePoll=setTimeout(h.hitch(this,this._startWebAppPolling),this._servicePollTime)},
_startWebAppPolling:function(){y.get(this._serviceMap.RCWebAppService.url,{handleAs:"json",preventCache:!0,query:{serviceToCheck:this._serviceMap.RCWebAppService.identity||1}}).otherwise(h.hitch(this,this._serviceNotAvailable,this._serviceMap.RCWebAppService.identity));this._servicePoll=setTimeout(h.hitch(this,this._startServicePolling),this._servicePollTime)},_loadUserToolBar:function(){this.tbContent=a.create("div",{"class":"userToolBarContainer"},this._userToolBarAnchor);this._createUserToolBar()},
_createUserToolBar:function(){this._utb=new aa({region:"right"});this._utb.toggleChangeApprovalPasswordItem(rc.session.enforceChangeApproval||rc.session.isSiteAdminUser());this.own(z(this._utb,"logout",h.hitch(this,function(a){a.preventDefault();this._confirm().then(h.hitch(this,function(){rc.session.logout()}))})),z(this._utb,"showWhatsNewDialog",h.hitch(this,this._showWhatsNewDialog)),z(this._utb,"showSystemTime",h.hitch(this,this._showSetSystemTime)));a.place(this._utb.domNode,this.tbContent)},
_confirm:function(){var a=new g;this.own(a);if(this.w&&this.w.isDirty&&this.w.isDirty()&&rc.session.getID()&&!this._discardChanges){null===this._genericConfirmDialog&&(this._genericConfirmDialog=new N({type:U.types.binaryConfirm,closeButtonVisible:!1,title:u.confirmUnsavedChanges,text:w.unsavedChangesContinue}));var b=this._genericConfirmDialog.on("close",h.hitch(this,function(c){switch(c){case U.returnValues.oneOrYes:a.resolve();break;case U.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+
" - _confirm(): Unknown choice",c)}b.remove()}));this.own(b);this._genericConfirmDialog.open()}else a.resolve();return a.promise},_onHashChange:function(a){try{this._discardChanges=!1,!0===this._savePromptConfirmed?(this._savePromptConfirmed=!1,this._doLocationChange()):this._confirm().then(h.hitch(this,this._doLocationChange),h.hitch(this,this._undoLocationChange))}catch(Y){this.showError(Y)}},_doLocationChange:function(){this._discardChanges=!0;0<this._hashQ.length||(this._hashQ.push(k),this.treePaneFlyout.forceHide(),
this._leftSideTreeContainer.closeSearch(),this._loading=!0,this._showLoader(),this._clearContent(),rc.session.validate().then(h.hitch(this,function(){try{this._loadContent(),this._selectTreeNode()}catch(da){this.showError(da)}}),h.hitch(this,function(a){rc.session.resetWithSession(a)||(a=this.safeError(a,{name:q.errorPageLoad,message:f[a.status]||q.unexpected}),this.showError(a))})))},_undoLocationChange:function(){this.hashChangeEvent.remove();window.history.back();setTimeout(h.hitch(this,function(){this.hashChangeEvent=
this.subscribe("/dojo/hashchange",h.hitch(this,this._onHashChange))}),100)},_showSetSystemTime:function(){null===this._dateTimeDialog&&(this._dateTimeDialog=new R,this._supportingWidgets.push(this._dateTimeDialog),this.own(c.after(this._dateTimeDialog,"destroy",h.hitch(this,function(){this._dateTimeDialog=null}))));this.w.site&&this.w.system&&(this._dateTimeDialog.set({site:this.w.site,system:this.w.system}),this._dateTimeDialog.show())},_loadWidget:function(a,b,c){null!==this._navTreeLoadDeferred&&
this._navTreeLoadDeferred.cancel();this._navTreeLoadDeferred=new g;var f=setInterval(h.hitch(this,function(){this.navAdminTree&&(this.navAdminTree.showHideSearch(!1),clearInterval(f),this._navTreeLoadDeferred.resolve())}),this._adminTreeCheckTime);this._leftSideTreeContainer.closeSearch();this.nav&&n.remove(this.nav.domNode,"no-scroll");v(h.hitch(this,this._domIsReady,a,b,c))},_domIsReady:function(b,f,d){this.contentContainer=a.create("div",{style:{width:"100%",height:"100%"}},this.content.containerNode,
"last");this._resetTimer(30);f=f.rawObject;f.site=this.site;f.rightSideFlyout=this.rightSideFlyout;this.w=new (m([L,d]))(f,this.contentContainer,"first",this._utb);c.after(this.w,"destroy",this._navTreeLoadDeferred.cancel);this._connectLoadEvents(this.w);this._restartTimerConnect=z(this.w,"restartTimer",h.hitch(this,this._resetTimer));this.own(this._restartTimerConnect);this._clearTimeoutConnect=z(this.w,"clearTimeout",h.hitch(this,function(){this._timeout&&clearTimeout(this._timeout)}));null!==this._genericConfirmDialog&&
(this._genericConfirmDialog.destroy(),this._genericConfirmDialog=null);b.resolve()},_systemAvailable:function(){var a=new g,b=webview.pathUtil.getInfo(window.location.pathname);0===b.system.length?a.resolve():rc.xhr.request({path:"SystemAvailable",type:"rest",method:"GET",systemId:Number(b.system),error:h.hitch(this,function(b){a.reject(w.currentlyUnavailable)})}).then(h.hitch(this,function(b){200===b.data.errStatus?a.resolve():a.reject(w.currentlyUnavailable)}),h.hitch(this,function(b){a.reject(w.currentlyUnavailable)}));
return a.promise},_loadContent:function(){var a=new g;this._systemAvailable().then(h.hitch(this,function(){try{this._loadAfterCheckForAvailability().then(h.hitch(this,a.resolve),h.hitch(this,a.reject))}catch(Y){this.showError(Y),a.reject(Y)}}),h.hitch(this,function(b){b=this.safeError(b,{name:q.errorPageLoad,message:b});this.showError(b);a.reject(b)}));return a.promise},_loadAfterCheckForAvailability:function(){this._showLoader();var a=new g;this.own(a);this._loadWhatsNew();var b=h.hitch(this,function(b){var c=
null,f=rc.session.getAttribute("SystemRedirect");b&&b.length?T.getPointForMnemonic(b).then(h.hitch(this,function(d){if(!this.typeRequiresSystem(d.typeAbbr)||f&&f.length)try{this.mne=b;var g=d.typeAbbr;b.split("/")[1]&&(g+="/"+b.split("/")[1],d.typeAbbr=g);c=T.getWidgetFor(d);c.then(h.hitch(this,function(b){var c=h.clone(d);try{require([b.module],h.hitch(this,this._loadWidget,a,c))}catch(ia){a.reject(ia),console.error(this.declaredClass+" - loadContent(): Error failed to load the content or content dependencies",
ia,ia.message)}}),h.hitch(this,function(c){this.showError(this.safeError(c,{name:A.substitute(q.xNotFound,[q.content]),message:A.substitute(q.unsupportedX,[b]),suggestion:q.unsupportedFix}));a.reject(c)}))}catch(ba){this.showError(this.safeError(ba,{name:A.substitute(q.xNotFound,[q.content]),message:A.substitute(q.unsupportedX,[b]),suggestion:q.unsupportedFix})),a.reject(ba)}else this._loadWelcome()}),h.hitch(this,function(c){this.showError(this.safeError(c,{name:A.substitute(q.xNotFound,[q.content]),
message:A.substitute(q.unsupportedX,[b]),suggestion:q.unsupportedFix}));a.reject(c)})):this._loadWelcome()}),c=new g;this.own(c);c.resolve(!0);var f=k();f?(f=this._getWidgetMnemonic(f),c.then(h.hitch(this,b,f))):c.then(h.hitch(this,b,rc.session.getAttribute("GroupRedirect")));return a.promise},_loadContentContainer:function(){this.contentContainer=this._createDefaultContainer();this._widgetContainer=new r({style:{width:"100%",height:"100%"}},this.contentContainer);this._utb.resetMenusAndHelp(null);
var a=new p({region:"center"});this._widgetContainer.addChild(a);return a},_getWelcomeString:function(){return u.noGroupRedirect},_getWidgetMnemonic:function(a){D.mode<D.PROXY_LIVE&&(a=a.split("?")[0],a=J.toCharString(G.decode(a)));return a=a.split("?")[0]},typeRequiresSystem:function(a){var b=!1;switch(a){case "AS":case "GRP":case "RT":case "BRT":case "RTS":case "RT-REPORT":case "WS":case "TL":case "CAL":case "SCHED":case "BTL":case "STL":case "BTLM":case "MTL":case "VIEW":case "PRG":b=!0}b&&(b=
0===webview.pathUtil.getInfo(window.location.pathname).system.length);return b},_checkAndStopWizard:function(){rc.setupWizard&&rc.setupWizard.stop()},_loadHeader:function(){this.header=new p({id:"rcSystemHeader",region:"top"});this._attachPoints.push("header");var b=K.add(this.header.containerNode,u.ttBanner,{margin:"1em 0 0 7em"});this._tooltipIds.push(b);this.container.addChild(this.header);var c=this._homeRedirectPath().split("#")[0];this._logo=a.create("div",{className:"rclogo",onclick:h.hitch(this,
function(){window.location.href=c}),cursor:"pointer"},this.header.containerNode);this._attachPoints.push("_logo");this._rightContainer=a.create("div",{className:"rightheader"},this.header.containerNode);this._attachPoints.push("_rightContainer");this._centerContainer=a.create("div",{className:"centerheader"},this.header.containerNode);this._attachPoints.push("_centerContainer");this._userToolBarAnchor=a.create("h1",{},this._centerContainer);this._attachPoints.push("_userToolBarAnchor");this._loadUserToolBar();
this._pageTitleAnchor=a.create("a",{href:c,onclick:h.hitch(this,function(){window.location.hash.length||this._onHashChange(F.mnemonicToUri(""))})},this._userToolBarAnchor);this._getSiteInfo();this._loadSysName().always(h.hitch(this,function(a){null!=a&&this._setTitle()}))},_removeWidgetConnects:function(){this.inherited(arguments);a.destroy(this.contentContainer)},_getSiteInfo:function(){rc.xhr.request({path:"SiteInfo/",preventCache:!0,type:"rest",method:"GET"}).then(h.hitch(this,function(c){null!==
c.data?(this.siteName=c.data.siteName,!1!==c.data.showTitle?(d.set(this._pageTitleAnchor,"title",q.home+": "+B.decode(F.unescapeHtml(this.siteName))),d.set(this._pageTitleAnchor,"innerHTML",this.siteName)):(d.remove(this._pageTitleAnchor,"title"),d.set(this._pageTitleAnchor,"innerHTML","")),null!==c.data.bannerImage&&b.set(this.header.domNode,"backgroundImage",'url("'+rc.rootPath+"Uploads/BannerImages/"+c.data.bannerImage+'")'),null!==c.data.logoImage&&(n.add(this._logo,"rclogoImgCust"),b.set(this._logo,
"backgroundImage",'url("'+rc.rootPath+"Uploads/BannerImages/"+c.data.logoImage+'")'),this._logoText=a.create("div",{className:"rclogoText",innerHTML:q.customLogo},this._logo),this._attachPoints.push("_logoText"))):console.error(this.declaredClass+" - _getSiteInfo(): Could not get Site name",c)}),h.hitch(this,function(a){console.error(this.declaredClass+" - _getSiteInfo(): Unexpected Error getting site name",a)}))},onLoad:function(){this.inherited(arguments);this._discardChanges=!1},onbeforeunload:function(a){a=
a||window.event;var b=q.unsavedWarning;if(this.w&&this.w.isDirty&&this.w.isDirty()&&!this._discardChanges&&rc.session.getID())return a&&(a.returnValue=b),b},_shouldDestroyPopupNode:function(a){return!(K.showing&&n.contains(a,"dijitTooltipDialogPopup"))&&!n.contains(a,"userToolBarPopup")&&!n.contains(a,"user-tool-bar-submenuPopup")},destroy:function(){null!==this._servicePoll&&clearTimeout(this._servicePoll);this.inherited(arguments)}})})},"webview/_base/tooltip":function(){define(["dojo/_base/lang",
"rc/_base/tooltip","./_ToolTip"],function(r,p,m){return r.mixin(p,new m)})},"webview/_base/_ToolTip":function(){define(["dojo/_base/declare","dojo/string","rc/_base/_ToolTip","../util/HelpUtil"],function(r,p,m,l){return r("webview/_base/_ToolTip",[m],{_insertHelpLink:function(h){return p.substitute(h,[l.getContextSensitiveHelpLink()])}})})},"webview/util/HelpUtil":function(){define("dojo/_base/declare dojo/io-query dojo/has dojo/hash rc/util/encoding/base16 rc/util/encoding/base64".split(" "),function(r,
p,m,l,h,c){return new (r("webview/util/HelpUtil",[],{getContextSensitiveHelpLink:function(){var c="Help/Index/",d=this._getCurrentPage();return null===d?c+"Welcome":c+d},_getCurrentPage:function(){var g,d=/^([a-z]+)(\/([a-z]+))*(\?(.*))$/i,n=/\d+([a|b])\d+([a-z|\-]+)\d+/i,a=/\d+([a|b])\d+([a-z|\-]+)/i,b=/\d+([a-z|\-]+)/i,m=/\d+([a-z|\-]+)\d+/i,k=/([a-z|\-]+)\d+/i;-1<window.location.href.toLowerCase().indexOf("admin")?(d=d.exec(l().toLowerCase()),l()&&null!=d?(n=p.queryToObject(d[5]),g=d[1],"schedule"===
g?"scheduletree"===n.view?g=n.view:"userview"===n.view&&(g="userviewes"):"trendlogworksheet"===g?g=n.mne:"site"===g&&"security"===n.view?g="sitesecurity":"users"===g?g=d[2]:"pointreports"===g?g="prps":"pointsreport"===g&&(g="prp")):g="Welcome"):l()?(test.mode<test.PROXY_LIVE&&(g=h.toCharString(c.decode(l()))),null!==n.exec(g)?g=n.exec(g)[2]:null!==a.exec(g)?g=a.exec(g)[2]:null!==b.exec(g)?g=b.exec(g)[1]:null!==m.exec(g)?g=m.exec(g)[1]:null!==k.exec(g)&&(g=k.exec(g)[1])):g="Welcome";return g}}))})},
"webview/_ContextManagerMixin":function(){define(["dojo/_base/declare","./util/AlarmUtil","./util/audit"],function(r,p,m){return r("webview/_ContextManagerMixin",[],{shouldSetContext:!0,constructor:function(){this.clearContext()},clearContext:function(){"undefined"!==typeof m.clearContextData&&m.clearContextData();"undefined"!==typeof p.clearContextData&&p.clearContextData()}})})},"webview/util/AlarmUtil":function(){define("dojo/_base/declare dojox/validate rc/_base/util ./pointObject ../sys/desc ../sys/job".split(" "),
function(r,p,m,l,h,c){return new (r("webview/util/AlarmUtil",null,{clearContextData:function(){sessionStorage.removeItem("alarmContextFilter")},getInnerText:function(c){var d=/>(.*)</g.exec(c);null!==d&&(c=d[1]);return c},parseAlarmAction:function(c){var d=/\(["']?([^"']*)["']?\)/i,g=new RegExp(/(#r\s*)/.source+d.source,"i"),a=new RegExp(/(#m\s*)/.source+d.source,"i"),b=null,h="",k="";null!==(b=(new RegExp(/(#g\s*)/.source+d.source,"i")).exec(c))?(h="group",k=b[2]):null!==(b=g.exec(c))?(h="run",k=
b[2]):null!==(b=a.exec(c))&&(k=h="");return{action:this._formatActionUrl(k,h),actionType:h,messageParts:b}},setAlarmContextForBACnetDevice:function(g,d){var n=c.bacnetDeviceIdToRCPPanel(d),a=d+"DEV"+d,b=h.getDescriptorFromMnemonic(Number(g),a);b===a&&n&&(a=l.getByMnemonic(n+"VAR1"),b=c.getControllerNameOfRCPPoint(a));this._setAlarmContextData(g,d,n,b)},setAlarmContextForRcpPoint:function(g,d){var h=d.toPanel(),a=c.rcpToBACnetDeviceID(h),b=c.getControllerNameOfRCPPoint(d);this._setAlarmContextData(g,
a,h,b)},_formatActionUrl:function(c,d){c=c.trim();""!==c&&(c=m.escapeHtml(c),"run"===d&&(p.isUrl(c)?c.match(/:\/\//gi)||c.match(/mailto:/gi)||(c="http://"+c):c=""));return c},_setAlarmContextData:function(c,d,h,a){h&&(h=h.toString());sessionStorage.setItem("alarmContextFilter",JSON.stringify({system:c,deviceId:d,rcpPanel:h,deviceName:a+(" ("+(d||h)+")")}))}}))})},"webview/util/pointObject":function(){define("dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!../nls/afterHoursReport dojo/i18n!../nls/all dojo/i18n!../nls/panelfiles rc/bacnet/enums rc/util/pointObject dojo/sniff".split(" "),
function(r,p,m,l,h,c,g){r.mixin(g,{mnemonicMap:{AFTERHOURSREPORT:"webview/reliable/FacilityManagerReport",AHACREQUESTS:"webview/reliable/AHACRequests",ALARM:"webview/reliable/Alarm",ALARMS:"webview/reliable/Alarm",ALARMHISTORY:"webview/reliable/AlarmHistory",AS:"webview/reliable/AnnualSchedule",AUDIT:"webview/reliable/AuditTrail",BTLPROPS:"webview/bacnet/BTLProperties",BRT:"webview/bacnet/RuntimeLog",BTL:"webview/bacnet/Trend",BTLM:"webview/bacnet/TrendMultiple",CAL:"webview/bacnet/Calendar",ENTERPRISESCHEDULE:"webview/reliable/EnterpriseSchedule",
FACILITYMANAGERREPORT:"webview/reliable/FacilityManagerReport",GRP:"webview/reliable/Group",MOBILEALARM:"webview/reliable/MobileAlarm",MTL:"webview/bacnet/TrendMultiple","MTL/Points":"webview/admin/worksheets/trendLogs/TrendLogPoints",MTLS:"webview/admin/worksheets/trendLogs/TrendLogsView",NAVIGATIONGROUP:"webview/reliable/NavGroup","PAN-FILE":"webview/admin/panelFiles/PanelFiles","PAN-FILES":"webview/admin/panelFiles/PanelFiles",PRG:"webview/admin/programs/Program",PRGS:"webview/admin/worksheets/programs/ProgramsWorksheet",
PRP:"webview/reliable/PointsReport",PRPS:"webview/reliable/PointsReportWorksheet","RT-REPORT":"webview/bacnet/RuntimeLogWorksheet",RT:"webview/reliable/RuntimeLog",RTS:"webview/reliable/RuntimeLogWorksheet",SCHED:"webview/bacnet/Schedule",STL:"webview/bacnet/Trend","STL/Points":"webview/admin/worksheets/trendLogs/TrendLogPoints",STLS:"webview/admin/worksheets/trendLogs/TrendLogsView",TENANTREPORT:"webview/reliable/TenantReport",TL:"webview/reliable/Trend",WS:"webview/reliable/WeeklySchedule",VIEW:"webview/reliable/View"},
_comTypeToPermissionKey:null,_mnemonicToFunctionMap:{AHACREQUESTS:"_ahacRequestsGetByMnemonic",AFTERHOURSREPORT:"_ahacRequestsGetByMnemonic",AUDIT:"_auditGetByMnemonic",BTLPROPS:"_btlPropsGetByMnemonic",MTLS:"_trendGetByMnemonic",STLS:"_trendGetByMnemonic",RTS:"_runtimeGetByMnemonic","RT-REPORT":"_runtimeGetByMnemonic",ENTERPRISESCHEDULE:"_enterpriseGetByMnemonic",NAVIGATIONGROUP:"_navigationGroupGetByMnemonic",TENANTREPORT:"_ahacReportGetByMnemonic","PAN-FILE":"_panFileGetByMnemonic","PAN-FILES":"_panFilesGetByMnemonic",
PRGS:"_cbasRequestsGetByMnemonic",PRP:"_pointsReportGetByMnemonic",PRPS:"_pointsReportWSGetByMnemonic"},_systemWideTypes:"ahacrequests enterpriseschedule facilitymanagerreport navigationgroup prp prps tenantreport".split(" "),buildComTypeToPermissionMap:function(){null===this._comTypeToPermissionKey&&(this._comTypeToPermissionKey={},this._comTypeToPermissionKey[c.comTypes.OUTPUT]={key:rc.session.roles.outChg,isExtended:!1},this._comTypeToPermissionKey[c.comTypes.INPUT]={key:rc.session.roles.inChg,
isExtended:!1},this._comTypeToPermissionKey[c.comTypes.VALUE]={key:rc.session.roles.varChg,isExtended:!1},this._comTypeToPermissionKey[c.comTypes.LOOP]={key:rc.session.roles.conChg,isExtended:!1},this._comTypeToPermissionKey[c.comTypes.SCHEDULE]={key:rc.session.roles.wsChg|rc.session.roles.esChg,isExtended:!1},this._comTypeToPermissionKey[c.comTypes.CALENDAR]={key:rc.session.roles.asChg,isExtended:!1},this._comTypeToPermissionKey[c.comTypes.ARRAY]={key:rc.session.roles.aryChg,isExtended:!1})},canEditByMnemonic:function(c){this.buildComTypeToPermissionMap();
c=this.getByMnemonic(c);c=this._comTypeToPermissionKey[c.comType];return"undefined"!==typeof c?rc.session.hasRole(c.key,c.isExtended):!1},canFilterWithMnemonic:function(c){var d=!1;c=this._mnemonicRegex.exec(c);var a=this._mnemonicRegexGroupIndexMap.instanceNumber;c&&"undefined"!==typeof c[a]&&"S"!==c[a].toUpperCase()&&(d=!0);return d},_ahacReportGetByMnemonic:function(){return m.afterHoursSummary},_ahacRequestsGetByMnemonic:function(){return m.afterHoursRequests},_cbasRequestsGetByMnemonic:function(c,
g){return g.mainController+" "+l.programs},_enterpriseGetByMnemonic:function(c,g){this.rawObject.pointInstance=g.pointInstance;return p.rc_reliable_EnterpriseSchedule},_getPointObject:function(c,g){var a;if(null===c)a=this._getNonStandards(g);else{var b=this._getPointInstance(c);a={mnemonic:g,mainController:this._getMainController(c),subController:c[this._mnemonicRegexGroupIndexMap.subpanel]?Number(c[this._mnemonicRegexGroupIndexMap.subpanel]):0,subnet:this._getSubnet(c),type:this._getTypeMne(c),
pointInstance:b.instanceNumber};0!==a.type&&(a.type=a.type.toUpperCase(),b.isWorksheet&&(a.type+="S"))}a.device=a.mainController;a.mne=a.pointInstance;a.system=rc.pathInfo.system||-1;a.site=-1;return a},_navigationGroupGetByMnemonic:function(c,g){this.rawObject.pointInstance=g.pointInstance;return p.navigationGroup},_panFileGetByMnemonic:function(c,g){return g.mainController+" "+h.panelFile},_panFilesGetByMnemonic:function(c,g){return g.mainController+" "+h.panelFiles},_pointsReportGetByMnemonic:function(c,
g){this.rawObject.mainController=125;this.rawObject.pointInstance=g.pointInstance;return l.pointReport},_pointsReportWSGetByMnemonic:function(){return l.pointReports}});return g})},"webview/_WithRightSideFlyoutMixin":function(){define(["dojo/_base/declare","./widget/RightSideFlyout"],function(r,p){return r("webview/_WithRightSideFlyoutMixin",[],{_makeRightSideFlyoutContainer:function(){this.rightSideFlyout||(this.rightSideFlyout=new p({treePane:this._leftSideTreeContainer}),this.own(this.rightSideFlyout),
this.container.addChild(this.rightSideFlyout),this.rightSideFlyout.startup())},onMadeTreePane:function(m){this.rightSideFlyout.set("treePane",m)}})})},"webview/widget/RightSideFlyout":function(){define("dijit/registry dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query dojo/window dojox/layout/ExpandoPane".split(" "),function(r,p,m,l,h,c,g,d,n,a){return p("webview/widget/RightSideFlyout",[a],{MIN_PANE_SIZE:50,baseClass:"right-side-flyout",
id:"rightSideFlyout",splitter:!0,startExpanded:!1,region:"trailing",SPLITTER_CORRECTION_THRESHOLD:10,style:{width:"400px"},startup:function(){this.inherited(arguments);(this.paneSplitter=d("#rightSideFlyout_splitter")[0])&&l.add(this.paneSplitter,"right-side-flyout-splitter");this._toggleSplitterVisibility()},_getMaxWidth:function(){return.4*n.getBox().w},hide:function(){this._showing&&(this.toggle(),!0===this._treeWasShowing&&!1===this.treePane._showing&&this.treePane.toggle())},closePane:function(){this._hideWrapper();
this._showing=!1;this.resize({w:0})},onBeforeAddObjects:function(){this.treePane._showing||this.treePane.toggle()},resize:function(a){var b=this._getMaxWidth();this._showing&&a&&(a.w>b||g.get(this.domNode,"width")>b)&&(a.w=b);this.inherited(arguments,[a]);g.set(this.containerNode,"height",null)},show:function(a){this._setContent(a);this._titleHeight=20;this._showSize>this._getMaxWidth()&&(this._showSize=this._getMaxWidth());this._showing||(this.toggle(),this.treePane._showing?(this.treePane.toggle(),
this._treeWasShowing=!0):this._treeWasShowing=!1,this.searchResultsPane&&this.searchResultsPane.closeSearch())},_afterResize:function(){var a=this._currentSize;this._currentSize=c.getMarginBox(this.domNode);var d=r.byId("mpw");Math.abs(this._splitterWidget.domNode.offsetLeft-(n.getBox().w-this._currentSize.w))>this.SPLITTER_CORRECTION_THRESHOLD&&"undefined"!==typeof d&&d.resize();d=this._currentSize.w;d>this.MIN_PANE_SIZE?(this._showing||(this._showing=!this._showing,this._showEnd()),this._showSize=
d,this._setupAnims()):(this._showSize=a.w,this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(89,!0))},_hideEnd:function(){this.inherited(arguments);this._toggleSplitterVisibility();g.set(this.domNode,"width",0)},_hideWrapper:function(){l.add(this.domNode,"dojoxExpandoClosed");g.set(this.cwrapper,{overflow:"hidden"})},_setContent:function(a){this._content!==a&&(this._content&&l.add(this._content,"hidden"),this._content=a,h.place(this._content,this.containerNode,"first"),l.remove(this._content,
"hidden"))},_showEnd:function(){l.remove(this.domNode,"dojoxExpandoClosed");setTimeout(m.hitch(this._container,"layout"),1);this._toggleSplitterVisibility()},_toggleSplitterVisibility:function(){this.paneSplitter&&l.toggle(this.paneSplitter,"hidden",!this._showing)}})})},"webview/systemTree/_SystemTreeMixin":function(){define("dojo/_base/declare dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/i18n!webview/nls/panelfiles dojo/i18n!webview/nls/remoteAlarmNotifications dojo/i18n!webview/nls/roles".split(" "),
function(r,p,m,l,h,c){return r("webview/systemTree/_SystemTreeMixin",[],{_buildTitleText:function(g,d,n){var a="",b="";switch(g.toLowerCase()){case "site":b=this.componentMap[g][d]?this.componentMap[g][d]:m.treeSite;a=b+" "+m.settings;break;case "navgroup":b=this.componentMap[g][d]?this.componentMap[g][d]:m.navGroup;a=b+" "+m.settings;break;case "system":case "addarchive":g="system";b=this.componentMap[g][d]?this.componentMap[g][d]:m.system;a=b+" "+m.settings;break;case "tree":b=this.componentMap[g][d]?
this.componentMap[g][d]:m.tree;a=b+" "+m.settings;break;case "schedule":b=this.componentMap[g][d]?this.componentMap[g][d]:m.enterpriseSchedule;a=b+" "+m.settings;break;case "remotealarmnotifications":a=h.emailAlarmRecipients;break;case "reporttemplate":b=this.componentMap[g][d]?this.componentMap[g][d]:p.reportTemplate;a=b+" "+m.settings;break;case "panelfiles":this.componentMap.system[n]&&(b=this.componentMap.system[n]);a=b+" "+l.backupRestore;break;case "program":a=m.programs;break;case "device":null!==
this.componentMap&&(a=this.componentMap[g][n][d]);""===a&&(a=g);break;case "addsite":a=m.wvAddSite;break;case "systems":a=m.wvSystemsList;break;case "addsystem":a=m.wvAddSystem;break;case "reporttemplates":a=p.reportTemplates;break;case "trees":a=m.wvTreesList;break;case "roleslist":a=c.roleList;break;case "rolepermissions":a=c.rolePermissions;break;case "rolelogininfo":a=c.roleLoginInfo;break;case "schedules":a=m.wvSchedulesList;break;case "users":a=m.listUsers;break;case "users/permissions":a=m.userPermissions;
break;case "users/permittedschedules":a=m.enterpriseSchedulePermissions;break;case "users/logininfo":a=m.loginInfo;break;case "users/adduser":a=m.addUser;break;case "setupfinished":a=m.setupFinished;break;case "navgroups":a=m.navGroupsList;break;case "sites":case "":a=m.wvSitesList;break;case "trendlogworksheet":a=m.trendLogWorksheet;break;case "notificationclasses":a=m.notificationClasses;break;case "pointreports":b="";this.componentMap.system[n]&&(b=this.componentMap.system[n]+"/");a=b+m.pointReports+
" (PRPS)";break;case "pointsreport":a=m.pointReports;break;default:a=""}return a},_buildToolTipText:function(g){switch(g.toLowerCase()){case "sites":g=m.treeSites;break;case "site":g=m.treeSite;break;case "systems":g=m.treeSystems;break;case "system":g=m.treeSystem;break;case "device":g=m.deviceActions;break;case "schedules":g=m.treeSchedules;break;case "schedule":g=m.treeSchedule;break;case "remotealarmnotifications":g=h.emailAlarmRecipients;break;case "reporttemplate":g=m.treeReport;break;case "reporttemplates":g=
m.treeReports;break;case "navgroups":g=m.treeNavGroups;break;case "navgroup":g=m.treeNavGroup;break;case "roleslist":g=c.roleList;break;case "rolepermissions":g=c.rolePermissions;break;case "rolelogininfo":g=c.roleLoginInfo;break;case "trees":g=m.treeTrees;break;case "tree":g=m.treeTree;break;case "users":g=m.treeUsers;break;case "users/logininfo":g=m.treeLoginInfo;break;case "trendlogworksheet":g=m.treeTrendLogWorksheet;break;case "notificationclasses":g=m.notificationClasses;break;default:g=""}return g}})})},
"webview/features/leftSideFlyout/LeftSideTreeContainer":function(){define("dijit/form/Button dijit/registry dojo/_base/declare dojo/_base/lang dojo/cookie dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/topic dojox/layout/ExpandoPane ./_AdminTreeMixin ./_KeywordSelectorMixin ./_NavigationTreeMixin ./_ObjectSelectorMixin ../../systemTree/_SystemTreeMixin".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return m("webview/features/LeftSideTreeContainer",[b,
t,k,q,f,u],{baseClass:"navTree",defaultToAdminTree:!1,id:"rcSystemNav",splitter:!0,startExpanded:!0,region:"leading",style:{width:"16em"},_currentTree:null,_lastOpenedWidget:null,_searchForObject:null,_searchClosedHandle:null,_searchableWidgetSubscription:null,_openOverlayWidgets:null,_unsearchableWidgetSubscription:null,postCreate:function(){this.inherited(arguments);this._openOverlayWidgets={};this._makeTreeContainer();this._updateAdminTree();this._loadNavigationTree();this.own(a.subscribe("updateNavTree",
l.hitch(this,this._updateAdminTree)),a.subscribe("searchableWidget",l.hitch(this,this._widgetIsSearchable)),a.subscribe("unsearchableWidget",l.hitch(this,this._widgetIsNotSearchable)),a.subscribe("filterRequested",l.hitch(this,this._showSearchForObject)),a.subscribe("filterRequestedSite",l.hitch(this,function(a){this._expandPane();a=this._getSiteTreeNodeBySiteId(a);this._showSearchForObject(a)})),a.subscribe("showKeywordSelector",l.hitch(this,function(a){this._expandPane();this._showKeywordSelector(a)})))},
closeSearch:function(){null!==this._searchForObject&&this._searchForObject.get("isOpen")&&(this._searchForObject.closeSearch(),this._closedTreeOverlay(this._searchForObject));this._closeKeywordSelector()},startup:function(){this.inherited(arguments)},_closedTreeOverlay:function(a){this._openOverlayWidgets[a.id]&&delete this._openOverlayWidgets[a.id];0>=Object.keys(this._openOverlayWidgets).length&&this._currentTree&&c.remove(this._currentTree.domNode,"hidden")},_expandPane:function(){this._showing||
this.iconNode.click()},_makeTreeContainer:function(){this._treeButtonContainer=g.create("div",{"class":"tree-buttons"},this.containerNode,"last")},_placeTreeSelectButtons:function(){this.adminTree&&this.userNavigationTree?(c.remove(this._treeButtonContainer,"hidden"),this._adminTreeButton||(this._adminTreeButton=new r({iconClass:"treeButtonIcon svg-adminTreeIcon",baseClass:"treeButton adminButton",title:n.systemTree,onClick:l.hitch(this,this._toggleShownTree,!0,!0)}),g.place(this._adminTreeButton.domNode,
this._treeButtonContainer)),this._userTreeButton||(this._userTreeButton=new r({iconClass:"treeButtonIcon svg-userTreeIcon",baseClass:"treeButton userButton",title:n.tree,onClick:l.hitch(this,this._toggleShownTree,!1,!0)}),g.place(this._userTreeButton.domNode,this._treeButtonContainer)),this._toggleShownTree(this.defaultToAdminTree,!0)):(this.adminTree&&this._toggleShownTree(!0,!0),c.add(this._treeButtonContainer,"hidden"));this._toggleContainerVisible(null!==this.adminTree&&1<this.adminTree.model.store.query().length||
null!==this.userNavigationTree)},_showScrollbar:function(){this.keywordSelectorOpen||this.objectSelectorOpen||(this.cwrapper.scrollTop=this._currentScroll,c.remove(this.domNode,"no-scroll"))},_showingTreeOverlay:function(b){this._openOverlayWidgets[b.id]=b;if(this._lastOpenedWidget&&this._lastOpenedWidget!=b.id){var f=this._openOverlayWidgets[this._lastOpenedWidget];f&&c.add(f.domNode,"hidden")}this._lastOpenedWidget=b.id;this._currentTree&&this._currentTree.domNode||(this._currentTree=this.adminTree);
this._currentTree&&this._currentTree.domNode||a.publish("sticky",{type:"error",message:"\x3cp\x3e"+d.unexpected+"\x3c/p\x3e\x3cp\x3e"+d.unexpectedFix+"\x3c/p\x3e"});c.add(this._currentTree.domNode,"hidden")},_toggleContainerVisible:function(a){var b=p.byId("rcSystemNav"),f=p.byId("rcSystemNav_splitter");!0===a?(c.remove(b.domNode,"hidden"),f&&c.remove(f.domNode,"hidden")):(c.add(b.domNode,"hidden"),f&&c.add(f.domNode,"hidden"));p.byId("mpw").resize()},_toggleShownTree:function(a,b){if(this.adminTree||
this.userNavigationTree){var f=!1;!1!==b&&null!==this._searchForObject&&this._searchForObject.get("isOpen")&&(this._searchForObject.closeSearch(),f=!0);!1!==b&&this._keywordSelector&&this._keywordSelector.get("isOpen")&&(this._keywordSelector.closeKeywordSelector(),f=!0);this.treePaneFlyout.forceHide();!a&&this.userNavigationTree?(this.adminTree&&c.add(this.adminTree.domNode,"hidden"),f||c.remove(this.userNavigationTree.domNode,"hidden"),this._userTreeButton&&(c.add(this._userTreeButton.domNode,"selected"),
c.remove(this._adminTreeButton.domNode,"selected")),this._currentTree=this.userNavigationTree):(this.userNavigationTree&&c.add(this.userNavigationTree.domNode,"hidden"),this.adminTree&&!f&&c.remove(this.adminTree.domNode,"hidden"),this._adminTreeButton&&(c.add(this._adminTreeButton.domNode,"selected"),c.remove(this._userTreeButton.domNode,"selected")),this._currentTree=this.adminTree)}},destroy:function(){this._destroyNavigationTree();this._destroySearchForObject();this.inherited(arguments)}})})},
"webview/features/leftSideFlyout/_AdminTreeMixin":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/store/Memory ../../admin/widget/Tree ../../systemTree/_SystemTreeMixin".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k){return c("webview/features/leftSideFlyout/_AdminTreeMixin",[],{_searchForObject:null,_resultsFetchedHandle:null,adminTree:null,
onAdminTreeNodeClick:function(a,b,c){},onLoadedAdminTreeData:function(a,b){},_buildAdminTree:function(c){var f=!1,k=this.defaultToAdminTree;this.adminTree&&(f=d.contains(this.adminTree.domNode,"searchEnabled"),k=!d.contains(this.adminTree.domNode,"hidden"),this.adminTree.destroy());var h=new b({data:{identifier:"id",items:c,label:"name"},getChildren:function(a){var b=[];if(a.children)for(var c=0;c<a.children.length;c++)b.push(this.query({id:a.children[c]._reference})[0]);return b}}),h=new l({store:h,
query:{type:"root"},mayHaveChildren:function(a){return void 0!==a.children&&0<a.children.length}});this.adminTree=new t({persist:!0,id:"adminNavTree",model:h,showRoot:!1,getIconClass:g.hitch(this,function(a){var b="dijitTreeIcon dijitLeaf ";if(a.widget&&a.widget.length){var c=a.widget.toLowerCase();if(a.type)switch(a.type.toLowerCase()){case "user":c="users";break;case "device":a.deviceModel=a.deviceModel.replace(/3rd/i,"third-party"),c=a.deviceModel.toLowerCase()}b+="adminTree svg-"+c+"Icon"}return b}),
getTooltip:g.hitch(this,function(a){var b="";"device"!==a.type?b=this._buildTitleText(a.widget.toLocaleLowerCase(),a.widgetId):this._buildTitleText(a.widget.toLocaleLowerCase(),a.widgetId,a.systemId);""===b&&(b=a.name);a=this._buildToolTipText(a.widget);return b+" ("+a+")"})},n.create("div",{},this.containerNode));k||d.add(this.adminTree.domNode,"hidden");d.toggle(this.adminTree.domNode,"searchEnabled",f);this.own(a(this.adminTree,"click",g.hitch(this,this._onAdminTreeNodeClick)));this.adminTree.onLoadDeferred.then(g.hitch(this,
this._onLoadedAdminTreeData,c,this.componentMap))},_buildComponentMap:function(a){this.componentMap={site:{},system:{},schedule:{},reporttemplate:{},navgroup:{},tree:{},user:{},device:{}};a=h.filter(a,function(a){return void 0!==a.widgetId});h.forEach(a,g.hitch(this,function(a){a.type&&"user"===a.type.toLowerCase()?this.componentMap.user[a.widgetId]=a.name:a.type&&"device"===a.type.toLowerCase()?(this.componentMap[a.widget.toLowerCase()][a.systemId]={},this.componentMap[a.widget.toLowerCase()][a.systemId][a.widgetId]=
a.name):"undefined"!==typeof this.componentMap[a.widget.toLowerCase()]&&(this.componentMap[a.widget.toLowerCase()][a.widgetId]=a.name)}))},_getSiteTreeNodeBySiteId:function(a){a=this.adminTree.model.store.query({site:a,widget:"site"})[0];if(!this.adminTree.getNodesByItem(a)[0]){var b=this.adminTree.model.store.query({widget:"sites"})[0],b=this.adminTree.getNodesByItem(b)[0];this.adminTree._expandNode(b)}return a},_onAdminTreeNodeClick:function(a,b,c){this.onAdminTreeNodeClick(a,b,c)},_onLoadedAdminTreeData:function(a,
b){this._placeTreeSelectButtons();this.onLoadedAdminTreeData(a,b)},_updateAdminTree:function(){rc.xhr.request({type:"json",url:"data/adminlinks.json",preventCache:!0,load:g.hitch(this,function(a){a.data&&a.data.length&&(this._buildComponentMap(a.data),this._buildAdminTree(a.data))})})}})})},"webview/admin/widget/Tree":function(){define("dijit/Tree dojo/_base/array dojo/_base/lang dojo/cookie dojo/_base/declare dojo/dom-class dojo/has dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all ./_TreeNode".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return h("webview/admin/widget/Tree",[r],{getLabel:function(a){if(a.widget)switch(a.widget.toLowerCase()){case "sites":return n.wvSites;case "systems":return n.wvSystems;case "trees":return n.wvTrees;case "schedules":return n.wvSchedules;case "reporttemplates":return d.reportTemplates;case "navgroups":return n.navGroups;case "users":return n.wvUsers;case "trendlogworksheet":return n.trendLogWorksheet;default:return this.model.getLabel(a)}else return this.model.getLabel(a)},
resize:function(a){},showHideSearch:function(a,d,g){c.toggle(this.domNode,"searchEnabled",a);this._showHideMagnifyingGlass(this.model.store.query(),!0);a=null;if(d){d=this.model.store.query(m.hitch(this,this._getNodesInSpecificSystem,d));"undefined"!==typeof g&&(d=d.concat(this.model.store.query(function(a){return"site"===a.widget&&a.site===g})));var b=d.map(function(a){return a.id});a=this.model.store.query(function(a){return-1===b.indexOf(a.id)});this._showHideMagnifyingGlass(a,!1)}else"undefined"!==
typeof g&&(a=this.model.store.query(function(a){return a.site!==g}),this._showHideMagnifyingGlass(a,!1))},_createTreeNode:function(b){return new a(b)},_getNodesInSpecificSystem:function(a,c){return"undefined"!==typeof c.systemId?Number(c.systemId)===Number(a):"system"===c.widget?Number(c.widgetId)===Number(a):!1},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],c;for(c in this._openedNodes)a.push(c);l(this.cookieName,a.join(","),{expires:365,path:webview.pathUtil.currentSiteInfo.rootPath})}},
_showHideMagnifyingGlass:function(a,d){for(var b=0;b<a.length;++b)this.getNodesByItem(a[b]).filter(function(a){return"undefined"!==typeof a}).forEach(function(a){c.toggle(a.domNode,"node-searchable",d);a.searchEnabled=!d})},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=l(this.cookieName);a&&p.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_onDblClick:function(){}})})},"webview/admin/widget/_TreeNode":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./templates/TreeNode.html dojo/topic dojo/i18n!webview/nls/all dojox/html/entities ../../widget/NavTreeNode".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return r("webview/admin/widget/_TreeNode",[a],{searchIcon:null,_searchableWidgets:["site","system","device"],templateString:c,_addChild:function(a){this.addChild(a)},_addSearch:function(a,c){m.toggle(a.domNode,"no-search",a.searchEnabled);this.clickArea=l.create("div",{"class":"clickArea searchIcon",title:d.searchHint},a.rowNode);this.searchIcon=l.create("div",{"class":"treeMagnifingGlass rcIcon searchIcon",title:d.searchHint},this.clickArea);this.own(h(this.clickArea,
"click",p.hitch(this,this._publishFilterRequest,c)))},_createNode:function(a,c,d){a=this.tree._createTreeNode({dir:a.dir,indent:this.indent+1,isExpandable:c.mayHaveChildren(d),item:d,label:n.decode(a.getLabel(d)),lang:a.lang,ownerDocument:a.ownerDocument,searchEnabled:this.searchEnabled,textDir:a.textDir,tooltip:n.decode(a.getTooltip(d)),tree:a});this._addLink(a,d);-1<this._searchableWidgets.indexOf(d.widget.toLowerCase())&&this._addSearch(a,d);return a},getLinkHref:function(a){var b=rc.adminUrl,
c="",d=function(b,f,d){a&&f&&a[f]&&null!==a[f]&&(c+=(d?"?":"\x26")+b,c+="\x3d"+encodeURIComponent(a[f]))};if(a.widget){var f=a.widget.toLowerCase(),c="#"+a.widget;if("sites"!==f)switch(d("site","site",!0),f.toLowerCase()){case "system":case "tree":case "navgroup":case "schedule":case "reporttemplate":case "trendlogworksheet":d(f,"widgetId");break;case "users/logininfo":d("userID","widgetId"),d("ID","userId")}b+=c;a.hash=[c]}return b},_publishFilterRequest:function(a,c){c.preventDefault();c.stopPropagation();
g.publish("filterRequested",a)}})})},"webview/widget/NavTreeNode":function(){define("dijit/_Container dijit/Tree dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-style dojo/dom-construct dojo/promise/all".split(" "),function(r,p,m,l,h,c,g,d,n){function a(a){return h.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}return l("webview/widget/_TreeNode",[p._TreeNode],{collapse:function(){g.set(this.tree.domNode,"overflowX","hidden");
var a=this.inherited(arguments);a.then(h.hitch(this,function(){g.set(this.tree.domNode,"overflowX","visible")}));return a},expand:function(){g.set(this.tree.domNode,"overflowX","hidden");var a=this.inherited(arguments);a.then(h.hitch(this,function(){g.set(this.tree.domNode,"overflowX","visible")}));return a},setChildItems:function(b){var c=this.tree,d=c.model,g=[],f=this.getChildren();m.forEach(f,function(a){r.prototype.removeChild.call(this,a)},this);var h=c.focusedChild;this.defer(function(){m.forEach(f,
function(a){this._destroyNodes(a,c,d,h)})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,m.forEach(b,function(a){var b=d.getIdentity(a),f=c._itemNodesMap[b],k;if(f)for(var h=0;h<f.length;h++)if(f[h]&&!f[h].getParent()){k=f[h];k.set("indent",this.indent+1);break}k||(k=this._createNode(c,d,a),f?f.push(k):c._itemNodesMap[b]=[k]);this._addChild(k);(this.tree.autoExpand||this.tree._state(k))&&g.push(c._expandNode(k))},this),m.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=
!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=n(g);this.tree._startPaint(b);return a(b)},_addLink:function(a,c){var b=[];m.forEach(a.contentNode.childNodes,function(a){b.push(h.clone(a))},this);d.empty(a.contentNode);for(var g=d.create("a",{href:this.getLinkHref(c),target:"_self"},a.rowNode),f=0;f<b.length;f++)d.place(b[f],g,"last")},_destroyNodes:function(a,d,g,h){if(!a._destroyed&&!a.getParent()){var b=function(a){var c=g.getIdentity(a.item),f=d._itemNodesMap[c];
1===f.length?delete d._itemNodesMap[c]:(c=m.indexOf(f,a),-1!==c&&f.splice(c,1));m.forEach(a.getChildren(),b)};d.dndController.removeTreeNode(a);b(a);if(d.persist){var k=m.map(a.getTreePath(),function(a){return d.model.getIdentity(a)}).join("/"),l;for(l in d._openedNodes)l.substr(0,k.length)===k&&delete d._openedNodes[l];d._saveExpandedNodes()}d.lastFocusedChild&&!c.isDescendant(d.lastFocusedChild,d.domNode)&&delete d.lastFocusedChild;h&&!c.isDescendant(h,d.domNode)&&d.focus();a.destroyRecursive()}}})})},
"webview/features/leftSideFlyout/_KeywordSelectorMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/on"],function(r,p,m,l,h){return r("webview/features/leftSideFlyout/_KeywordSelectorMixin",[],{_closeKeywordSelector:function(){this._keywordSelector&&this._keywordSelector.closeKeywordSelector()},_showKeywordSelector:function(c){this._showingTreeOverlay(c);this._keywordSelector=c;var g=this.adminTree;l.place(c.domNode,this.containerNode,1);var d=
this._getSiteTreeNodeBySiteId(c.siteId);this._currentScroll=this.cwrapper.scrollTop;g=g.getNodesByItem(d)[0];g=p.clone(g.domNode);this.own(h.once(g,"click",p.hitch(this,function(c){c.preventDefault();this._closeKeywordSelector()})));c.performInitialDisplay(g);c.resize(this.containerNode.offsetHeight);this.cwrapper.scrollTop=0;m.add(this.domNode,"no-scroll");this.own(h(c,"close",p.hitch(this,function(){this.keywordSelectorOpen=!1;this._showScrollbar();this._closedTreeOverlay(c)})),h(c,"beforeReShow",
p.hitch(this,function(){this.keywordSelectorOpen=!0;this.cwrapper.scrollTop=0;m.add(this.domNode,"no-scroll")})));this.keywordSelectorOpen=!0}})})},"webview/features/leftSideFlyout/_NavigationTreeMixin":function(){define("dijit/tree/ObjectStoreModel dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/on dojo/store/Memory rc/sys/links ../../util/pointObject ../../widget/Tree".split(" "),function(r,p,m,l,h,c,g,d,n,a){return p("webview/features/leftSideFlyout/_NavigationTreeMixin",
[],{userNavigationTree:null,onLoadedNavigationTreeData:function(){},onNavigationTreeNodeClick:function(a,c,d){},_buildNavigationTree:function(b){this._linkStore=new g({data:m.clone(b),getChildren:function(a){var b=null;if(a.children)for(var b=[],c=0;c<a.children.length;c++)b.push(this.query({id:a.children[c]._reference})[0]);return b}});this._linkModel=new r({store:this._linkStore,query:{pointType:"root"},mayHaveChildren:function(a){return void 0!==a.children&&0<a.children.length}});this._attachPoints.push("_linkModel");
this.userNavigationTree&&this.userNavigationTree.destroy();this.userNavigationTree=new a({model:this._linkModel,persist:!0,id:"webviewUserNavTree",showRoot:!1,openOnClick:!1,openOnDblClick:!0,getTooltip:m.hitch(this,function(a){var b=a.title?a.title:a.widget;return b?(b=n.fixTLMnemonic(b),a.name+" ("+b+")"):""})},h.create("div",{},this.containerNode));this._toggleShownTree(!0,!0);this.own(c(this.userNavigationTree,"click",m.hitch(this,this._onNavigationTreeNodeClick)))},_loadNavigationTree:function(){d.load(!0).then(m.hitch(this,
function(a){try{a.items&&1<a.items.length?this._buildNavigationTree(a):this._destroyNavigationTree(),this._placeTreeSelectButtons()}catch(t){}this._onLoadedNavigationTreeData();return a}))},_onLoadedNavigationTreeData:function(){this.onLoadedNavigationTreeData()},_onNavigationTreeNodeClick:function(a,c,d){this.onNavigationTreeNodeClick(a,c,d)},_destroyNavigationTree:function(){this._toggleShownTree(!0,!0);this._userTreeButton&&(this._userTreeButton.destroy(),this._userTreeButton=null);this._adminTreeButton&&
(this._adminTreeButton.destroy(),this._adminTreeButton=null);this.userNavigationTree&&(this.userNavigationTree.destroy(),this.userNavigationTree=null)}})})},"webview/widget/Tree":function(){define(["dijit/Tree","dojo/_base/array","dojo/_base/declare","./_TreeNode"],function(r,p,m,l){return m("webview/widget/Tree",[r],{getIconClass:function(h,c){var g="dijitLeaf";h&&"Folder"!==h.pointType||(g=c?"dijitFolderOpened":"dijitFolderClosed");return g},_createTreeNode:function(h){return new l(h)},_initState:function(){this._openedNodes=
{};if(this.persist&&this.cookieName){var h=localStorage.getItem(this.cookieName);h&&p.forEach(h.split(","),function(c){this._openedNodes[c]=!0},this)}},_onDblClick:function(){},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var h=[],c;for(c in this._openedNodes)h.push(c);localStorage.setItem(this.cookieName,h.join(","))}},_state:function(h,c){if(!this.persist)return!1;var g=p.map(h.getTreePath(),function(c){return this.model.getIdentity(c)},this).join("/");if(1===arguments.length)return this._openedNodes[g];
c?this._openedNodes[g]=!0:delete this._openedNodes[g];this._saveExpandedNodes()}})})},"webview/widget/_TreeNode":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/text!../admin/widget/templates/TreeNode.html dojox/html/entities ../util/globalConstants ../util/util ./NavTreeNode".split(" "),function(r,p,m,l,h,c,g,d,n,a){return r("webview/widget/_TreeNode",[a],{templateString:c,constructor:function(){var a=dojoConfig.baseUrl.lastIndexOf("/"),a=dojoConfig.baseUrl.substr(a);
this.PATH_TO_DEFAULT_ICONS=a+"/webview/themes/rcblack/images/DefaultNavTreeIcons/";this.PATH_TO_TREE_ICONS=a+"/webview/themes/rcblack/images/tree-sprite.png"},getLinkHref:function(a){var b="";switch(a.pointType.toUpperCase()){case "HYPERLINK":b=a.widget;break;case "FOLDER":b=window.location.href;break;default:b=rc.rootPath+n.mnemonicToUri(a.widget),a.widget=b}return b},_addChild:function(a){0<a.indent?this.addChild(a,0):this.addChild(a)},_applyClassAndStyle:function(a,c,g){var b="_"+c+"Class";c+=
"Node";var f=this[b];this[b]=this.tree["get"+g+"Class"](a,this.isExpanded);if("iconNode"===c&&this._isDefaultFolder()&&"undefined"!==typeof f)if("dijitFolderClosed"===f){var k=h(".svg-folderIcon",this.domNode)[0];p.replace(k,this[b]||"",f||"");p.replace(this.iconNode,this[b]||"",f||"")}else"dijitFolderOpened"===f&&(k=h(".svg-folderIcon",this.domNode)[0],p.replace(k,this[b]||"",f||""),p.replace(this.iconNode,this[b]||"",f||""));p.replace(this[c],this[b]||"",f||"");l.set(this[c],this.tree["get"+g+"Style"](a,
this.isExpanded)||{});"iconNode"===c&&(a.pointType&&null===a.iconFile&&(g=a.pointType.toLowerCase().replace(" ","-")+"-tree-icon",p.add(this.iconNode,g)),void 0!==a.iconFile&&null!==a.iconFile&&(g="","Trend Logs"===a.pointType&&(-1!==a.widget.toUpperCase().indexOf("STL")?(a.pointType="Single Point Trend Log",a.iconFile="single-trendlog.png"):(a.pointType="Multi Point Trend Log",a.iconFile="multi-trendlog.png")),"undefined"!==typeof d.DEFAULT_NAV_TREE_ICONS_CLASSES[a.iconFile]?(g=rc.rootPath+this.PATH_TO_TREE_ICONS,
g="svg-"+d.DEFAULT_NAV_TREE_ICONS_CLASSES[a.iconFile],p.add(this.iconNode,"dijitTreeIcon "+g)):(g=rc.rootPath+"Uploads/NavTreeIcons/"+a.iconFile,m.create("img",{src:g,alt:a.pointType,"class":"dijitTreeIcon dijitTreeCustomIcon"},this.iconNode,"first"),p.remove(this.iconNode,"dijitTreeIcon"),p.remove(this.iconNode,"dijitFolderClosed"))))},_createNode:function(a,c,d){a=this.tree._createTreeNode({item:d,tree:a,isExpandable:c.mayHaveChildren(d),label:g.decode(a.getLabel(d)),labelType:a.model&&a.model.labelType||
"text",tooltip:g.decode(a.getTooltip(d)),ownerDocument:a.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir,indent:this.indent+1});this._addLink(a,d);return a},_isDefaultFolder:function(){return"Folder"===this.item.pointType&&"folder.png"===this.item.iconFile}})})},"webview/util/globalConstants":function(){define({CurrencyToSymbol:{USD:"\x26dollar;",EUR:"\x26euro;",GBP:"\x26pound;",MXN:"\u20b1",CNY:"\x26yen;"},PanelFileCompatibilityTypes:{rcp:0,pyramidProCom:1,pyramidProSys:2,pyramidProWebCom:3,
pyramidProWebSys:4,proAir:5,ssc:6,sscMaxwell:7,proZone:8,proOne:9,proTwo:10,thirdParty:11,proWebComV8:12,proWebSysV8:13,proView:14,proViewRouter:15,proLight:16,proAirV8:17,proZoneV8:18,rcFlexAir:19,none:20,1:"MACH-ProCom",2:"MACH-ProSys",3:"MACH-ProWebCom",4:"MACH-ProWebSys",5:"MACH-ProAir-Legacy",6:"Smart Space Controller",7:"Smart Space Controller(Rev E)",8:"MACH-ProZone-Legacy",9:"MACH-Pro1",10:"MACH-Pro2",11:"Third Party",12:"MACH-Pro(Web)Com",13:"MACH-Pro(Web)Sys",14:"MACH-ProView",15:"MACH-ProView /R",
16:"MACH-ProLight",17:"MACH-ProAir",18:"MACH-ProZone",19:"RC-FlexAir"},REPEAT_WEEKLY:0,REPEAT_EXCEPTION:1,REPEAT_RANGE:2,REPEAT_RECURRENCE:3,REPEAT_CALENDAR:4,REPEAT_OVERRIDE:5,MAX_PRIORITY:19,WILDCARD:255,SINGLE_FREQ:0,DATE_RANGE_FREQ:1,DAILY_FREQ:2,WEEKLY_FREQ:3,MONTHLY_FREQ:4,YEARLY_FREQ:5,DATATYPE_MULTI_STATE:2,DATATYPE_ANALOG:4,DATATYPE_BINARY:9,DAY_IN_MILLISECONDS:864E5,WEEK_IN_MILLISECONDS:6048E5,DEFAULT_NAV_TREE_ICONS:"workstation-group.png system-group.png schedules.png calendar.png single-trendlog.png multi-trendlog.png runtime.png alarms.png navigation-group.png hyperlink.png folder.png folder-2.png after-hours.png requests.png cbas.png point-report.png equipment-view.png".split(" "),
DEFAULT_NAV_TREE_ICONS_CLASSES:{"workstation-group.png":"workstationIcon","system-group.png":"systemGroupIcon","schedules.png":"schedulesIcon","calendar.png":"calendarIcon","single-trendlog.png":"single-trendlogIcon","multi-trendlog.png":"multi-trendlogIcon","runtime.png":"runtimeIcon","alarms.png":"alarmsIcon","navigation-group.png":"navgroupsIcon","hyperlink.png":"hyperlinkIcon","folder.png":"folderIcon","folder-2.png":"folderIcon","after-hours.png":"afterHoursReportIcon","requests.png":"afterHoursRequestIcon",
"cbas.png":"programsIcon","point-report.png":"pointreportIcon","equipment-view.png":"equipmentViewIcon"}})},"webview/features/leftSideFlyout/_ObjectSelectorMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/request/xhr dojo/topic ../../admin/widget/SearchForObject".split(" "),function(r,p,m,l,h,c,g,d){return r("webview/features/leftSideFlyout/_ObjectSelectorMixin",[],{_createSearchForObject:function(c,a){this._destroySearchForObject();this._searchForObject=
new d({searchPath:this.searchableWidget.searchPath,systems:c,filterableObjects:this.filterableObjects,"class":"hidden",isBacnetOnly:a,extraSearchParameters:this.searchableWidget.extraSearchParameters},l.create("div",{},this.containerNode));this._resultsFetchedHandle=h(this._searchForObject,"resultsFetched",p.hitch(this,function(a,c,d){"undefined"!==typeof this.searchableWidget.showResults&&this.searchableWidget.showResults(a,c,d)}));this._searchClosedHandle=h(this._searchForObject,"close",p.hitch(this,
function(){"undefined"!==typeof this.searchableWidget.closeResults&&this.searchableWidget.closeResults();this.objectSelectorOpen=!1;this._showScrollbar();this._closedTreeOverlay(this._searchForObject)}));this._searchUpdateHandle=g.subscribe("updateRange",p.hitch(this,function(a){null!==this._searchForObject&&this._searchForObject.set("range",a)}));this._searchClosedSubscribeHandle=g.subscribe("closeResults",p.hitch(this,function(){null!==this._searchForObject&&this._searchForObject.closeSearch()}));
this.rightSideFlyout&&this.rightSideFlyout.set("searchResultsPane",this._searchForObject)},_destroySearchForObject:function(){this._searchForObject&&(this._searchForObject.destroy(),l.destroy(this._searchForObject.domNode));this._resultsFetchedHandle&&this._resultsFetchedHandle.remove();this._searchClosedHandle&&this._searchClosedHandle.remove();this._searchUpdateHandle&&this._searchUpdateHandle.remove();this._searchClosedSubscribeHandle&&this._searchClosedSubscribeHandle.remove()},_showSearchForObject:function(c){null===
this._searchForObject&&this._createSearchForObject();this._showingTreeOverlay(this._searchForObject);this._currentScroll=this.cwrapper.scrollTop;var a=this.adminTree.getNodesByItem(c)[0],b=p.clone(a.domNode);this.own(h.once(b,"click",p.hitch(this,function(a){a.preventDefault();this._searchForObject.closeSearch()})));a={top:a.domNode.offsetTop-this._currentScroll,left:a.domNode.offsetLeft};this._searchForObject.set("isBacnetOnly",this.searchableWidget.bacnetOnly);this._searchForObject.filterRequested(c,
b,a);this.cwrapper.scrollTop=0;m.add(this.domNode,"no-scroll");this.objectSelectorOpen=!0},_systemsRetrieved:function(c,a,b,d,g){c=p.clone(c);g=g.filter(function(a){return a.siteId==this},a).map(function(a){return a.id});if(0<g.length)for(var k in c)0>g.indexOf(Number(k))&&delete c[k];this._createSearchForObject(c,d);this.adminTree&&this.adminTree.showHideSearch(!0,b,a)},_widgetIsNotSearchable:function(){this.adminTree&&this.adminTree.showHideSearch(!1);this._searchForObject&&this._searchForObject.closeSearch()},
_widgetIsSearchable:function(d,a,b){if(this.componentMap){this.searchableWidget=a;this.filterableObjects=d;d=this.componentMap.system;if(a=Number(this.searchableWidget.system))d={},d[a]=this.componentMap.system[a];var g=null;isNaN(this.searchableWidget.siteId)?isNaN(this.searchableWidget.site)||(g=Number(this.searchableWidget.site)):g=Number(this.searchableWidget.siteId);g?c.get("GetPermittedSystems",{handleAs:"json",preventCache:!0}).then(p.hitch(this,this._systemsRetrieved,d,g,a,b)):console.error("Invalid siteId, can't load searchable systems")}else setTimeout(p.hitch(this,
this._widgetIsSearchable,d,a,b),150)}})})},"webview/admin/widget/SearchForObject":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/fx dojo/i18n!../../nls/all dojo/json dojo/on dojo/query dojo/request/xhr dojo/text!./templates/SearchForObject.html ../_objectTypeMap ../../widget/SearchByField ../../widget/TitlePane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v){return c("webview/admin/widget/SearchForObject",[p,r,m],{baseClass:"",extraSearchParameters:{},isBacnetOnly:!1,isOpen:!1,rangeHigh:49,rangeLow:0,searchPath:"tree/objects",templateString:y,webviewStrings:f,_MaxDeviceFilterTries:4,_MinSystemsShown:4,_PaddingBuffer:8,_ItemHeight:22,_TitleBarHeight:48,_TreeButtonHeight:67,_currentObjectFilter:null,_currentSystemFilter:null,_filterMap:null,_requestTimeout:null,_searchEnabled:!0,_searchObjectsQueue:[],
constructor:function(){this._filterMap={};this._currentObjectFilter=[];this._currentSystemFilter=[]},buildRendering:function(){this.inherited(arguments);this._buildSystemFilters();this._buildObjectFilters();this._setupSearchBox();this._filterPanes=[this.systemFilterContainer,this.deviceFilterContainer,this.objectFilterContainer];h.forEach(this._filterPanes,d.hitch(this,function(a){this.own(w(a,"toggle",d.hitch(this,function(a){a.open&&this._scrollAllPanes()},a)))}));this.own(w(this.closeButton,"click",
d.hitch(this,this._onClose)))},closeSearch:function(){this._onClose()},filterRequested:function(a,b,c){this.isOpen||(c.top-=this._TreeButtonHeight,this._animateOpen(b,c),this.isOpen=!0);this.siteId=a.site;this._clearFilters();setTimeout(d.hitch(this,function(a){var b=null,b=null;switch(a.widget){case "site":a=Object.keys(this._filterMap.systemFilters);1===a.length&&this._filterMap.systemFilters[a[0]].checkbox.set("checked",!0);this._shrinkEmptyDevices(!0);break;case "system":b=this._filterMap.systemFilters[a.widgetId];
b.checkbox.set("checked",!0);break;case "device":b=this._filterMap.systemFilters[a.systemId];b.checkbox.set("checked",!0);b=b.devices[a.widgetId];b.checkbox.set("checked",!0);break;default:console.error(this.declaredClass+" - filterRequested(): Unsupported widget type",a.widget)}},a),100)},onClose:function(){},onResultsFetched:function(){},_animateClose:function(){var c=new a;this.own(c);h.forEach(this._filterPanes,function(a){a.set("open",!1,!0)});var f=this._getMoveTitleAnimation({start:0,end:this._treeNodePosition.top},
{start:0,end:this._treeNodePosition.left}),g=q.combine([this._getFadeAnimation(1,0,this.searchFilters),this._getFadeAnimation(1,0,this.textSearchContainer)]),f=q.chain([g,f]).play();n.after(f,"onEnd",d.hitch(this,function(){b.add(this.domNode,"hidden");c.resolve()}));return c.promise},_animateOpen:function(a,c){this._treeNodePosition=c;this._cleanClonedNode(a);t.place(a,this.searchedTreeNodeContainer,"only");b.remove(this.domNode,"hidden");var f=this._getMoveTitleAnimation({start:c.top,end:0},{start:c.left,
end:0});f.onEnd=d.hitch(this,function(){k.set(this.textSearchContainer,"marginTop",a.clientHeight+this._PaddingBuffer+"px")});var g=q.combine([this._getFadeAnimation(0,1,this.searchFilters),this._getFadeAnimation(0,1,this.textSearchContainer)]),f=q.chain([f,g]).play();n.after(f,"onEnd",d.hitch(this,function(){h.forEach(this._filterPanes,function(a){a.set("open",!0,!0)})}))},_buildDeviceFilters:function(a,b,c){for(var f={},d=null,g=null,k=0;k<c.length;++k)d=c[k],g=this._buildFilterCheckbox({label:[b,
d.deviceName,d.deviceNumber].join("-"),searchLabel:{device:d.deviceNumber,isRcp:d.rcpPanel,system:Number(a)}},"devices",!0),t.place(g.domNode,this.deviceFilter),f[d.deviceNumber]=g;this._filterMap.systemFilters[a].devices=f},_buildFilterCheckbox:function(a,b,c){c=t.create("div",{"class":c?"object-search-filter hidden":"object-search-filter",title:a.label});b=new l({value:a.searchLabel,checked:!1,onChange:d.hitch(this,this._updateFilter,b,a.searchLabel)});t.place(b.domNode,c,"first");t.create("label",
{"for":b.id,innerHTML:a.label},c,"last");return{checkbox:b,domNode:c}},_buildObjectFilters:function(){for(var a={},b=h.filter(Object.keys(v),function(a){return isNaN(a)}),c="",f=c=null,g=0;g<b.length;++g)c=b[g],c=v[c],f=this._buildFilterCheckbox(c,"objectTypes"),t.place(f.domNode,this.objectFilter),d.mixin(f,{identity:c.identity}),a[c.searchLabel]=f;this._filterMap.objectFilters=a},_buildSystemFilters:function(){for(var a={},c=Object.keys(this.systems).sort(d.hitch(this,function(a,b){var c=this.systems[a],
f=this.systems[b],d=0;c>f?d=1:c<f&&(d=-1);return d})),f=-1,g=null,h=null,l=c.length,n=0;n<l;++n)f=Number(c[n]),g=this.systems[f],h=this._buildFilterCheckbox({label:g,searchLabel:f},"systems"),t.place(h.domNode,this.systemFilter),a[f]=h,this._retrieveAndBuildDeviceFilters(f,g);k.set(this.systemFilterContainer.domNode,{"min-height":this._TitleBarHeight+this._ItemHeight*Math.min(this._MinSystemsShown,l)+"px"});b.toggle(this.systemFilterContainer.domNode,"hidden",2>c.length);this._filterMap.systemFilters=
a},_cancelSearchRequests:function(){for(var a=0;a<this._searchObjectsQueue.length;a++)this._searchObjectsQueue[a].isResolved()||this._searchObjectsQueue[a].cancel();this._searchObjectsQueue=[]},_cleanClonedNode:function(a){z(".dijitTreeNode",a).forEach(t.destroy);z(".treeMagnifingGlass",a).forEach(t.destroy);z(".dijitTreeExpando",a).forEach(t.destroy);k.set(a.firstElementChild,"paddingLeft","0px")},_clearFilters:function(){this.textSearchField._reset();for(var a=this._currentSystemFilter.length-1;0<=
a;--a)this._filterMap.systemFilters[this._currentSystemFilter[a].sysId].checkbox.set("checked",!1);for(a=this._currentObjectFilter.length-1;0<=a;--a)this._filterMap.objectFilters[this._currentObjectFilter[a]].checkbox.set("checked",!1)},_getCleanSystemFilter:function(){for(var a=d.clone(this._currentSystemFilter),b=!1,c=0;c<a.length;++c)if(0<a[c].deviceNumbers.length||0<a[c].rcpPanels.length){b=!0;break}if(b)for(c=a.length-1;0<=c;--c)0===a[c].deviceNumbers.length&&0===a[c].rcpPanels.length&&a.splice(c,
1);return a},_getFadeAnimation:function(a,b,c){return g.animateProperty({node:c,duration:650,properties:{opacity:{start:a,end:b}}})},_getMoveTitleAnimation:function(a,b){return g.animateProperty({node:this.searchedTreeNodeContainer,properties:{top:a,left:b}})},_identityInFilterObjects:function(a){for(var b=0;b<this.filterableObjects.length;++b)if(this.filterableObjects[b].identity===a)return!0;return!1},_onClose:function(){this.isOpen&&(this._animateClose().then(d.hitch(this,this.onClose)),this.isOpen=
!1)},_requestResults:function(){null!==this._requestTimeout&&clearTimeout(this._requestTimeout);this._requestTimeout=setTimeout(d.hitch(this,this._searchObjects),500)},_resultsFetched:function(a,b,c){this.onResultsFetched(a,b,c)},_retrieveAndBuildDeviceFilters:function(a,b){x.get("tree/devices",{handleAs:"json",preventCache:!0,query:{systemId:a}}).then(d.hitch(this,this._buildDeviceFilters,a,b))},_scrollAllPanes:function(){if(0<this._currentObjectFilter.length){var a=this._filterMap.objectFilters[this._currentObjectFilter[this._currentObjectFilter.length-
1]];a&&a.domNode.scrollIntoViewIfNeeded()}if(0<this._currentSystemFilter.length){var a=this._currentSystemFilter[this._currentSystemFilter.length-1],b=this._filterMap.systemFilters[a.sysId];b&&(b.domNode.scrollIntoViewIfNeeded(),0<a.deviceNumbers.length&&(a=b.devices[a.deviceNumbers[a.deviceNumbers.length-1]])&&a.domNode.scrollIntoViewIfNeeded())}},_searchObjects:function(){this._cancelSearchRequests();var a=u.stringify(this._currentObjectFilter);0===this._currentObjectFilter.length&&(a=[],h.forEach(this.filterableObjects,
function(b){a.push(b.searchLabel)}),a=u.stringify(a));var b=this._getCleanSystemFilter(),b={rangeLow:this.rangeLow,rangeHigh:this.rangeHigh,bacnetOnly:this.isBacnetOnly,searchParam:this.textSearchField.searchBox.value,systems:u.stringify(b),objectTypes:a,siteId:this.siteId};d.mixin(b,this.extraSearchParameters);b=x.get(this.searchPath,{handleAs:"json",preventCache:!0,query:b}).then(d.hitch(this,this._resultsFetched,this.rangeLow,this.rangeHigh));this._searchObjectsQueue.push(b);this._requestTimeout=
null},_setFilterableObjectsAttr:function(){this.inherited(arguments);for(var a=null,a="",c=Object.keys(this._filterMap.objectFilters),f=0;f<c.length;++f)a=c[f],a=this._filterMap.objectFilters[a],b.toggle(a.domNode,"hidden",!this._identityInFilterObjects(a.identity));b.toggle(this.objectFilterContainer.domNode,"hidden",2>this.filterableObjects.length)},_setIsBacnetOnlyAttr:function(a){this.isBacnetOnly=!0===a?!0:!1},_setRangeAttr:function(a){this.rangeHigh=a.high;this.rangeLow=a.low;this._requestResults()},
_setupSearchBox:function(){this.own(w(this.textSearchField,"searchClicked",d.hitch(this,this._requestResults)),w(this.textSearchField.searchBox,"keyup",d.hitch(this,function(){this.set("range",{high:this.rangeHigh-this.rangeLow,low:0})})),n.after(this.textSearchField,"_reset",d.hitch(this,this._requestResults)))},_shrinkEmptyDevices:function(a){b.toggle(this.deviceFilterContainer.domNode,"no-items",a)},_showHideDeviceFilters:function(a,c,f){var g=this._filterMap.systemFilters[a].devices;if("undefined"!==
typeof g){a=Object.keys(g);var k="",k=null;f=a.length;for(var h=0;h<f;++h)k=a[h],k=g[k],b.toggle(k.domNode,"hidden",!c)}else f<this._MaxDeviceFilterTries&&setTimeout(d.hitch(this,this._showHideDeviceFilters,a,c,++f),250)},_toggleDeviceInSystemFilter:function(a,b){var c=h.filter(this._currentSystemFilter,function(b){return b.sysId===a.system});if(0<c.length){var c=c[0],f=c.deviceNumbers;a.isRcp&&(f=c.rcpPanels);if(b)f.push(a.device);else{for(c=0;c<f.length&&f[c]!==a.device;++c);f.splice(c,1)}}},_toggleObjectFilter:function(a,
b){if(b)this._currentObjectFilter.push(a);else{var c=this._currentObjectFilter.indexOf(a);this._currentObjectFilter.splice(c,1)}},_toggleSystemFilter:function(a,b){if(b)this._currentSystemFilter.push({sysId:a,deviceNumbers:[],rcpPanels:[]});else{for(var c=0;c<this._currentSystemFilter.length;++c)if(this._currentSystemFilter[c].sysId===a){for(var f=this._currentSystemFilter[c].deviceNumbers,d=null,g=0;g<f.length;++g)d=this._filterMap.systemFilters[a].devices[f[g]].checkbox,d.set("checked",!1);break}this._currentSystemFilter.splice(c,
1)}this._shrinkEmptyDevices(0==this._currentSystemFilter.length)},_updateFilter:function(a,b,c){switch(a){case "systems":this._showHideDeviceFilters(Number(b),c,0);this._toggleSystemFilter(Number(b),c);this._scrollAllPanes();break;case "devices":this._toggleDeviceInSystemFilter(b,c);break;case "objectTypes":this._toggleObjectFilter(b,c)}this.set("range",{high:this.rangeHigh-this.rangeLow,low:0})},destroy:function(){null!==this._requestTimeout&&clearTimeout(this._requestTimeout)}})})},"webview/admin/_objectTypeMap":function(){define(["dojo/i18n!rc/nls/all",
"dojo/i18n!../nls/all","dojo/i18n!../nls/pointReports"],function(r,p,m){return{0:"systemGroups",systemGroups:{identity:0,label:r.helpGrp,searchLabel:"System Groups"},1:"equipmentViews",equipmentViews:{identity:1,label:p.equipmentViews,searchLabel:"Equipment Views"},2:"workstationGroups",workstationGroups:{identity:2,label:p.workstationGrps,searchLabel:"Workstation Groups"},3:"inputs",inputs:{identity:3,label:p.inputs,searchLabel:"Inputs"},4:"outputs",outputs:{identity:4,label:p.outputs,searchLabel:"Outputs"},
5:"variables",variables:{identity:5,label:p.values,searchLabel:"Variables"},6:"loops",loops:{identity:6,label:p.loops,searchLabel:"Loops"},7:"schedules",schedules:{identity:7,label:p.schedules,searchLabel:"Schedules"},8:"calendars",calendars:{identity:8,label:p.calendars,searchLabel:"Calendars"},9:"trendLogs",trendLogs:{identity:9,label:r.helpTl,searchLabel:"Trend Logs"},10:"trendLogWorksheets",trendLogWorksheets:{identity:10,label:p.trendLogWorksheet,searchLabel:"Trend Log Worksheets"},11:"runtimeLogs",
runtimeLogs:{identity:11,label:r.runtimeLogs,searchLabel:"Runtime Logs"},12:"arrays",arrays:{identity:12,label:p.arrays,searchLabel:"Arrays"},13:"programs",programs:{identity:13,label:p.programs,searchLabel:"Programs"},14:"programsWorksheets",programsWorksheets:{identity:14,label:p.programsWorksheet,searchLabel:"Programs Worksheets"},15:"pointReports",pointReports:{identity:15,label:p.pointReports,searchLabel:"Point Reports"},16:"pointReportWorksheet",pointReportWorksheet:{identity:16,label:m.pointReportWorksheet,
searchLabel:"Point Report Worksheet"}}})},"webview/widget/SearchByField":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/form/DropDownButton dijit/Menu dijit/MenuItem dijit/popup dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/Evented dojo/has dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/text!./templates/SearchByField.html dojo/window ../util/util dojo/sniff".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,
w,z,x,y){return d("webview/widget/SearchByField",[p,r,k],{templateString:z,"class":"searchform",anyLabel:u.searchAnyField,anyField:"*",selectedField:null,value:null,prevValue:null,prevSearchResult:null,defaultLabel:u.searchHint,hasMenu:!0,disabled:!1,constructor:function(){this.fields=[];this.rcStrings=f},postCreate:function(){if(this.hasMenu){var a=new l({style:"display: none;"});1!==this.fields.length&&a.addChild(new h({label:this.anyLabel,onClick:n.hitch(this,function(){this._searchByField({field:this.anyField,
fieldName:this.anyLabel})})}));var b;g.forEach(this.fields,function(c){c.searchable&&(b=new h({label:c.label,onClick:n.hitch(this,function(a,b){this._searchByField(a)},{field:c.field,fieldName:c.label})}),a.addChild(b))},this);this.searchButton=new m({label:"",dropDown:a,openDropDown:n.hitch(this.searchButton,this.openDropDown),onClick:n.hitch(this,function(){this._clearSearchBoxValue()})},this._buttonNode)}else this.searchButton=new m({label:"",dropDown:new l({baseClass:"hidden"}),openDropDown:n.hitch(this.searchButton,
this.openDropDown),onClick:n.hitch(this,this.onSearchClicked)},this._buttonNode);this.own(w(this.searchBox,"keyup",n.hitch(this,this._onKeyUp)))},_setDisabledAttr:function(c){b.toggle(this.searchBox,"disabled",c);a.set(this.searchBox,"disabled",c);this._set("disabled",c)},_clearSearchBoxValue:function(){this.searchBox.value===this.defaultLabel?this.searchBox.value="":this.searchBox.value===this.prevSearchResult&&(this.searchBox.value=this.prevValue)},_searchByField:function(a){this.searchBox.value&&
(this.set("value",{field:a.field,fieldName:a.fieldName,value:this.searchBox.value}),this.onEdit())},_showHideReset:function(){b.toggle(this.clearField,"hidden",""===this.searchBox.value)},onSearchClicked:function(){this.emit("searchClicked")},onEdit:function(){this.emit("edit")},_onChange:function(a){a.value&&(this.searchBox.value="'"+a.value+"' "+u.wvIn+" "+a.fieldName,this.prevValue=a.value,this.prevSearchResult=this.searchBox.value);this._showHideReset();this.onChange(a)},onChange:function(a){this.emit("change",
a)},_onKeyUp:function(){this._showHideReset();this.onKeyUp()},onKeyUp:function(){this.emit("keyup")},_setValueAttr:function(a){a=a||{};var b=a.value||"";this.value=b;this.searchBox.value=b||"";this.selectedField=a.field||"";this.selectedFieldName=a.fieldName||this._findName(this.selectedField);this._onChange(this.get("value"))},_findName:function(a){var b=a;g.some(this.fields,function(c){return c.field===a?(b=c.name,!0):!1},this);return b},_getTypedValueAttr:function(){return this.searchBox.value},
_getValueAttr:function(){return{value:this.value,field:this.selectedField,fieldName:this.selectedFieldName}},_reset:function(a){y.stopEvent(a);this.reset();this._showHideReset();this.onEdit()},reset:function(){this.set("value",null)},openDropDown:function(){var f=this.dropDown,d=f.domNode,g=this._aroundNode||this.domNode,k=this,h=c.open({parent:this,popup:f,around:g,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){k.closeDropDown(!0)},onCancel:function(){k.closeDropDown(!0)},
onClose:function(){a.set(k._popupStateNode,"popupActive",!1);b.remove(k._popupStateNode,"dijitHasDropDownOpen");k._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&g.offsetWidth>f._popupWrapper.offsetWidth){var g=g.offsetWidth-f._popupWrapper.offsetWidth,l={w:f.domNode.offsetWidth+g};this._origStyle=d.style.cssText;n.isFunction(f.resize)?f.resize(l):t.setMarginBox(d,l);"R"===h.corner[1]&&(f._popupWrapper.style.left=f._popupWrapper.style.left.replace("px","")-g+"px")}a.set(this._popupStateNode,
"popupActive","true");b.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",f.id);"presentation"===d.getAttribute("role")||d.getAttribute("aria-labelledby")||d.setAttribute("aria-labelledby",this.id);q("touch")&&!q("ios")&&(d=x.getBox(),g=t.getMarginBox(f._popupWrapper),t.setMarginBox(f._popupWrapper,{l:eval(g.l-d.l),t:eval(g.t-d.t)}));return h}})})},"webview/widget/TitlePane":function(){define("dijit/TitlePane dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/TitlePane.html".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return m("webview/widget/TitlePane",r,{templateString:t,iconId:"",_setIconIdAttr:{node:"iconHolder",type:"class"},postCreate:function(){this.inherited(arguments);p.forEach([this._wipeIn,this._wipeOut],l.hitch(this,function(a){this.own(h.after(a,"onEnd",l.hitch(this,function(a){a&&(n.set(this.wipeNode,"overflow",""),n.set(this.wipeNode,"height",""));this.onToggle(a)},open)))}))},buildRendering:function(){this.inherited(arguments);b[this.title]?this.title=b[this.title]:
a[this.title]&&(this.title=a[this.title]);c.setSelectable(this.titleNode,!1)},_setCss:function(){var a=this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass="dijit"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");d.replace(a,this._titleBarClass,b||"");d.toggle(this.arrowNodeInner,"pane-expanded",this.open);d.toggle(this.domNode,"pane-open",this.open)},_setOpenAttr:function(a,b){p.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});this.onWillToggle(a);
b?this[a?"_wipeIn":"_wipeOut"].play():(this.hideNode.style.display=this.wipeNode.style.display=a?"":"none",this.onToggle(a));if(this._started)if(a)this._onShow();else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},onToggle:function(a){},onWillToggle:function(a){}})})},"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){p=p("dijit.TitlePane",[k,t,b],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:f.defaultDuration,baseClass:"dijitTitlePane",templateString:q,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);m.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,
this.baseClass+"Title");var a=this.hideNode,b=this.wipeNode;this._wipeIn=g.wipeIn({node:b,duration:this.duration,beforeBegin:function(){a.style.display=""}});this._wipeOut=g.wipeOut({node:b,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){r.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();
else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(l.remove(this.focusNode,"aria-controls"),l.remove(this.focusNode,
"tabIndex"),l.remove(this.focusNode,"aria-pressed"));this._set("toggleable",a);this._setCss()},_setContentAttr:function(a){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),c.setMarginBox(this.wipeNode,{h:c.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=
this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");h.replace(a,this._titleBarClass,b||"");h.replace(a,this._titleBarClass.replace("TitlePaneTitle",""),(b||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(b){b.keyCode==a.DOWN_ARROW&&this.open&&(this.containerNode.focus(),b.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},
setTitle:function(a){n.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",a)}});d("dojo-bidi")&&p.extend({_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(a){this._set("tooltip",a);this.textDir&&(a=this.enforceTextDirWithUcc(null,a));l.set(this.focusNode,"title",a)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",
this.title),this.set("tooltip",this.tooltip))}});return p})},"webview/util/widgetPicker":function(){define(["dojo/_base/lang","rc/util/widgetPicker"],function(r,p){r.mixin(p,{_runtimeLogWidget:"webview/bacnet/TrendAsRuntimeLog",_trendLogWidget:"webview/bacnet/Trend"});return p})},"webview/widget/DateTimeDialog":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!rc/nls/all dojo/query dojo/string dojo/topic rc/bacnet/io/service/TimeSynchronization rc/bacnet/io/service/UtcTimeSynchronization rc/widget/DateTimeDialog ../changeApproval/_ApprovalSessionMixin".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return r("webview/widget/DateTimeDialog",[b,t],{postCreate:function(){this.inherited(arguments);c(".dijitButton",this.domNode).forEach(function(a){l.add(a,"webviewButton")})},_performWriteRequest:function(a,b,c){c&&c.approvalToken&&0<c.approvalToken.length&&(this._approvalToken=c.approvalToken,this._reason=c.reason||h.na);"rcp"===a?b.cmdObj.approvalToken=this._approvalToken:b.s.approvalToken=this._approvalToken;return rc.xhr.request(b)},_send:function(a,b){var c,
d;b.systemId=this.system;var g=new m;"rcp"===a?(c={gid:"DT",type:a,method:"POST",cmdObj:b,error:function(a,b){}},d=this._getRCPValidateRequestData(c)):(c={gid:"DT",type:a,s:b,method:"POST",error:function(a,b){}},d=this._getBACnetValidateRequestData(c,this._approvalToken));this._validateApprovalSessionWithReason(d,!1,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(p.hitch(this,this._performWriteRequest,a,c),p.hitch(this,function(){this._hideFullWaiting();g.cancel()})).then(g.resolve,g.reject);return g.promise},
_sendSequence:function(){var b=new m;this._approvalToken=null;this._reason=h.na;if(this.canDoBacnetDST){var c=this._convertGMTCheckBox.get("checked")?a:n;this._send("bacnet",new c({network:65535},this._data.bacnet)).then(p.hitch(this,function(){var a=this.buildTimeRequest("dst","write");a.approvalToken=this._approvalToken;a.systemId=this.system;var a={type:"bacnet",s:a,method:"POST"},c=this._getBACnetValidateRequestData(a,this._approvalToken);this._validateApprovalSession(c,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(p.hitch(this,
function(a,c){c&&c.approvalToken&&0<c.approvalToken.length&&(this._approvalToken=c.approvalToken);return rc.xhr.request(a).then(p.hitch(b,b.resolve),p.hitch(b,b.reject))},a),p.hitch(this,this._hideFullWaiting))}))}else c={dest:127,subt:0,subd:0,src:0,xl:0,xh:0},this._convertGMTCheckBox.get("checked")?this._sendRCPDST(c,b):(c.cmd=121,c.cnt=this._data.rcp.length,c.data=this._data.rcp,this._send("rcp",c).then(p.hitch(this,this._sendRCPDST,c,b)));b.then(p.hitch(this,this._addAuditWithReason));return b.promise},
_addAuditTrail:function(){},_addAuditWithReason:function(){var a={datestamp:parseInt((new Date).getTime()/1E3,10).toFixed(),pointName:" ",user:rc.session.getUsername(),action:h.setTime,details:g.substitute(h.newValueX,[this._data.newStr]),reason:this._reason};d.publish("audit",a)}})})},"webview/widget/NotificationPullout":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on dojo/string dojo/text!./templates/NotificationPullout.html dojo/topic rc/widget/Toaster rc/_base/util ./AHACNotification ./AlarmNotification ../_base/tooltip ../reliable/EnterpriseScheduleQueue".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w){return h("webview/widget/NotificationPullout",[p,r,m],{duration:4E3,hasESQueue:!1,notifications:[],queueCount:0,templateString:a,_ahacManager:null,_alarmManager:null,_esQueueManager:null,_setQueueCountAttr:{node:"queueCountContainer",type:"innerHTML"},_toaster:null,_tooltipIds:null,_traysOpenMask:0,NOTIFICATION_TYPE:{ALARM:"Alarm",AHAC:"AHACRequests",ES_QUEUE:"ESQueue"},constructor:function(){this._tooltipIds=[]},startup:function(){this.inherited(arguments);
this._toaster=new t({duration:this.duration,defaultToastClass:"AlarmToast"},this.toasterNode);this.own(d(this._toaster,"showMessage",c.hitch(this,this._nextPopup)));this._setUnread(!0);this.notifications.forEach(c.hitch(this,function(a){var b=null;switch(a.notificationType){case this.NOTIFICATION_TYPE.ALARM:this._alarmManager=b=new f({_fetchNow:a.fetch,linkNode:this.allLink},this.alarmsContainer);this.own(d(this,"toggleAlarmsTray",c.hitch(b,b.toggle)));break;case this.NOTIFICATION_TYPE.AHAC:this._ahacManager=
b=new q({_fetchNow:a.fetch,linkNode:this.allLink},this.requestsContainer);this.own(d(this,"toggleAlarmsTray",c.hitch(b,b.toggle)));break;case this.NOTIFICATION_TYPE.ES_QUEUE:this._esQueueManager=b=this.esQueueManager=new w({siteId:a.siteId||-1,calculateYOffset:c.hitch(this,function(){return this.miniBar.clientHeight+1})},this.esQueueContainer);b.watch("queueCount",c.hitch(this,function(a,b,c){this.set("queueCount",c)}));g.remove(this.esQueueInfoContainer,"hidden");this.own(d(this.esQueueInfoContainer,
"click",c.hitch(this,this._onToggleQueue)));this.own(d(this,"toggleQueue",c.hitch(b,b.toggle)));break;default:return}this.own(d(b,"addTooltip",c.hitch(this,this._addTooltip)),d(b,"updatePopupEnabled",c.hitch(this,this._togglePopupOption,b)));b.watch("isOpen",c.hitch(this,function(a,b,c,f){f?this._onTrayOpen(a):this._onTrayClosed(a)},b.bitMask));b.watch("popupQueue",c.hitch(this,function(){this._toaster.hasMessages()||this._nextPopup(b)}));b.watch("notificationCount",c.hitch(this,function(){this._setNotificationCount()}))}));
if(this._alarmManager||this._ahacManager)g.remove(this.alarmInfoContainer,"hidden"),this.own(d(this.alarmInfoContainer,"click",c.hitch(this,this._onToggleAlarmsTray)))},pause:function(){b.publish("alarmloader",[!1])},play:function(){b.publish("alarmloader",[!0])},onToggleAlarmsTray:function(){},onTrayClosed:function(){},onToggleQueue:function(){},_addTooltip:function(a,b){var c=k.mnemonicToUri(b),c=u.add(this.miniBar,n.substitute(a,[window.location.origin+window.location.pathname+c]),{margin:"-4em 0 0 2.5em"});
this._tooltipIds.push(c)},_onToggleAlarmsTray:function(){if(this._esQueueManager&&this._esQueueManager.isOpen)this._esQueueManager.set("isOpen",!1),this.own(d.once(this,"trayClosed",c.hitch(this,this.onToggleAlarmsTray)));else this.onToggleAlarmsTray()},_onTrayClosed:function(a){this._traysOpenMask&=~a;this._esQueueManager&&this._esQueueManager.bitMask==a&&g.toggle(this.allLink,"hidden");0===this._traysOpenMask&&(g.replace(this.domNode,"dijitCollapsed","dijitExpanded"),g.remove(this._toaster.domNode,
"hidden"),this._toaster.play());this.onTrayClosed()},_onTrayOpen:function(a){this._esQueueManager&&this._esQueueManager.bitMask==a&&g.toggle(this.allLink,"hidden");this._traysOpenMask|=a;g.replace(this.domNode,"dijitExpanded","dijitCollapsed");g.add(this._toaster.domNode,"hidden");this._toaster.stop()},_onToggleQueue:function(){if(this._alarmManager&&this._alarmManager.isOpen||this._ahacManager&&this._ahacManager.isOpen)this._onToggleAlarmsTray(),this.own(d.once(this,"trayClosed",c.hitch(this,this.onToggleQueue)));
else this.onToggleQueue()},_nextPopup:function(a){if(!a.popupClass)if(a.message&&a.message.manager&&a.message.manager.popupClass)a=a.message.manager;else return;if(a.popupQueue.length){var b=a.popupQueue.shift(),b=a._filterAlerts([b]);0===b.length?this._nextPopup(a):(b=b[0],a.addToasterMessage(this,b),a._grid.store&&(b=a._grid.store.get(b.id),b.shown=1,a._grid.store.put(b)))}else l.some(this._notificationManagers,c.hitch(this,function(a){if(a.popupQueue.length)return this._nextPopup(a),!0}))},_setNotificationCount:function(){var a=
0;this._alarmManager&&(a+=this._alarmManager.get("notificationCount"));this._ahacManager&&(a+=this._ahacManager.get("notificationCount"));this._notificationCountContainer.innerHTML=a},_setUnread:function(a){a?g.add(this._notificationCountContainer,"rcNotificationCountUpdated"):g.remove(this._notificationCountContainer,"rcNotificationCountUpdated")},destroy:function(){l.forEach(this._tooltipIds,function(a){u.remove(a)},this);this._toaster.destroyRecursive();this._alarmManager&&this._alarmManager.destroyRecursive();
this._ahacManager&&this._ahacManager.destroyRecursive();this._esQueueManager&&this._esQueueManager.destroyRecursive();this.inherited(arguments)}})})},"webview/widget/AHACNotification":function(){define("dgrid/Grid dgrid/OnDemandGrid dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/Button dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/cookie dojo/Deferred dojo/dom-construct dojo/Evented dojo/has dojo/i18n!webview/nls/afterHoursReport dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/AHACNotification.html rc/_base/util ./PopupNotificationMixin ../reliable/AHACRequests".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D){return d("webview/widget/AHACNotification",[B,D,m,l,q],{defaultSort:[{attribute:"id",descending:!0}],popupClass:"AHACRequests",bitMask:1,templateString:C,_defaultQuery:{},_numChanged:0,constructor:function(){this.inherited(arguments);this._acceptButtons={};this._refuseButtons={};this.popupQueue=[];this._gridStore=new v(new y({idProperty:"id",data:[]}))},_getQueryObjectAttr:function(){return{filterShown:!0}},postCreate:function(){this.inherited(arguments);
this._initialize();this._updateAlerts()},addToasterMessage:function(a,b){var c=this._buildAlertMessage(b);c.manager=this;a._toaster.addMessage({message:c,type:"warning",loader:this,item:b,toastClass:"AHACRequestToast",widgetDir:"webview/widget/"});0!==b.status&&x.put("AHACRequestShown/",{handleAs:"json",data:{requestId:b.id,shown:!0}})},_addButtonConnect:function(a,b){"undefined"===typeof b[a.id]&&(b[a.id]=a)},_addTooltip:function(){this.emit("addTooltip",u.ttRequests,this.popupClass)},_buildAlertMessage:function(a){var b=
k.create("div"),c=k.create("div",{"class":"title"});c.appendChild(k.create("p",{innerHTML:A.substitute(u.requestPopup,[a.esId,a.esName])}));var f=k.create("div",{"class":"message"});f.appendChild(k.create("p",{innerHTML:a.user}));f.appendChild(k.create("p",{innerHTML:a.eventName}));f.appendChild(k.create("p",{innerHTML:a.eventDate+" | "+a.startTime+"-"+a.endTime}));0!==a.status&&f.appendChild(k.create("p",{innerHTML:this._statusMap[this._statusMap[a.status]].label}));b.appendChild(c);b.appendChild(f);
return b},_createGrid:function(){var b=[{field:"id",id:"timeCol",width:"15.5em",styles:"text-align: left;",formatter:n.hitch(this,this._formatRequestListing),renderHeaderCell:n.hitch(this,this._renderRequestHeaderCell)},{label:" ",field:"action",id:"actionCol",width:"3.5em",styles:"text-align: left;",renderCell:n.hitch(this,this._formatListButtons)}];if(7===f("chrome")||18===f("chrome"))b[0].width="22px",b[2].width="65px";this._grid=new (d([r,p]))({store:this._gridStore,columns:b,noDataMessage:u.noRequests,
sort:this.defaultSort});this.headerNode=z(".dgrid-header .field-id",this._grid.domNode)[0];this.own(a.after(this.headerNode,"onclick",n.hitch(this,this._onClickTogglePulloutSection)))},_createLink:function(){var a=k.create("p",null,this.linkNode,"first");k.create("a",{href:E.mnemonicToUri(this.popupClass),innerHTML:u.viewRequests},a)},_filterAlerts:function(a){var b=[];return b=g.filter(a,function(a){var b=!a.shown||0===a.shown,c=rc.session.hasRole(rc.session.roles2.approveAfterHoursEvents,!0);return b&&
(c&&0===a.status||0!==a.status&&!1===a.tenantShown)},this)},_formatListButtons:function(a,b,c){if(rc.session.hasRole(rc.session.roles2.approveAfterHoursEvents,!0)){b=k.create("div",{},c);var f=k.create("div",{},b),d=k.create("div",{},b),g="";c=!1;switch(this._statusMap[a.status]){case "pending":c=!0;break;case "approve":g+=" accepted";break;case "reject":g+=" refused"}var f=new h({baseClass:"rc24Icon acceptIcon "+g},f),d=new h({baseClass:"rc24Icon refuseIcon "+g},d),l=g=null;c?(g=w(f,"click",n.hitch(this,
function(a){this._updateStatus([a.id],1,null)},a)),this.own(g),l=w(d,"click",n.hitch(this,function(a){this._showReasonEditor(a.reason,null).then(n.hitch(this,function(b){this._updateStatus([a.id],2,b)}))},a)),this.own(l)):(f.set("disabled",!0),d.set("disabled",!0));this._addButtonConnect({id:a.id,connect:g,widget:f},this._acceptButtons);this._addButtonConnect({id:a.id,connect:l,widget:d},this._refuseButtons);return b}},_formatRequestListing:function(a,b){var c="\x3cp\x3e"+b.eventName+"\x3c/p\x3e",
c=c+("\x3cp class\x3d'srcSchedule' title\x3d'"+b.sourceSchedule+"'\x3e"+b.sourceSchedule+"\x3c/p\x3e"),c=c+('\x3cp class\x3d"note"\x3e'+b.eventDate+" | "+b.startTime+"-"+b.endTime+"\x3c/p\x3e");return c+='\x3cp class\x3d"status"\x3e'+this._statusMap[this._statusMap[b.status]].label+"\x3c/p\x3e"},_mergeStats:function(a){var b=!1;this._numChanged=0;if(0===this._grid.store.data.length)b=!0,this._numChanged=a.length;else{var c=a.map(function(a){return a.id}),f=this._grid.store.query().filter(function(a){return-1===
c.indexOf(a.id)});g.forEach(f,n.hitch(this,function(a){this._removeButton(a.id,this._acceptButtons);this._removeButton(a.id,this._refuseButtons);this._grid.store.remove(a.id);b=!0}));var d;this._numChanged=a.filter(function(a){d=this._grid.store.get(a.id);return!d||d.status!==a.status},this).length;b=b||0<this._numChanged}b&&this._grid.store.setData(a);return b},_removeButton:function(a,b){if("undefined"!==typeof b[a]){var c=b[a];c.widget&&c.widget.destroyRecursive();c.connect&&c.connect.remove();
delete b[a]}},_renderRequestHeaderCell:function(a){a=k.create("div",{className:"notificationsHeader"},a,"first");var f=k.create("div",{className:"notificationsLabel"},a,"first");this.header=k.create("div",{innerHTML:u.afterHoursRequests,className:"notificationName"},f,"first");this.updateNotice=k.create("div",{innerHTML:"",className:"updateNotice"},f,"last");this._checkBox=new c({name:"alarmsCheckBox","Checked Title":"Enabled Popups",onClick:n.hitch(this,function(a){a.stopPropagation();this._setPopupsEnabledCookie(this._checkBox.checked)})});
k.place(this._checkBox.domNode,a,"first");a=b(this._popupCookieName);"undefined"===typeof a&&(a=this._showAllPopup);this._checkBox.set("checked",(this.bitMask&a)===this.bitMask);this.own(w(this.updateNotice,"click",n.hitch(this,this._updateOnDemand)))},_updateAlerts:function(){this._updateStore().then(n.hitch(this,function(a){this.isOpen&&a?this._refreshUpdateNotice(this._numChanged):a&&this._updateGrid()})).always(n.hitch(this,this._resetTimer))},_updateOnDemand:function(a){E.stopEvent(a);this._updateGrid();
this._clearUpdateNotice()},_updateStore:function(){var a=new t;this.own(a);try{this._fetchData().then(n.hitch(this,function(b){a.resolve(this._mergeStats(b.data))}))}catch(H){a.reject(H)}return a.promise}})})},"webview/widget/PopupNotificationMixin":function(){define("dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/cookie dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/fx dojo/i18n!rc/nls/alarms dojo/query dojo/string rc/_base/util".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){return m("webview/widget/PopupNotificationMixin",[],{header:null,isExpanded:!1,isOpen:!1,notificationCount:0,updateNotice:null,popupQueue:null,_checkBox:null,_popupCookieName:"popupToast",_startingHeight:315,_updateInterval:1E4,_updateTimer:null,_setIsExpandedAttr:function(b){var c=0;b?c=this._startingHeight:(c=k(".dgrid-scroller",this._grid.domNode)[0],c=a.get(c,"marginTop"));l.animateProperty({node:this._grid.domNode,duration:500,properties:{height:c},onEnd:h.hitch(this,
function(){this._set("isExpanded",b)})}).play()},_setIsOpenAttr:function(c){var f=h.hitch(this,function(){this._set("isOpen",c)});c?(a.set(this._grid.domNode,"visibility","visible"),this.clearPopups(),b.wipeIn({node:this.listContainer,beforeBegin:f}).play()):(b.wipeOut({node:this.listContainer,onEnd:f}).play(),this._updateCachedMessages())},clearPopups:function(){this.set("popupQueue",[])},toggle:function(){this.set("isOpen",!this.isOpen)},_clearUpdateNotice:function(){g.set(this.updateNotice,"innerHTML",
"");d.add(this.header,"noUpdateNotice")},_initialize:function(){this._createGrid();this._createLink();a.set(this.listContainer,{visibility:"visible",height:"100%",display:"block"});n.place(this._grid.domNode,this.listContainer);this._grid.startup();a.set(this._grid.domNode,{height:this._startingHeight+"px",visibility:"hidden"});a.set(this.listContainer,"visibility","hidden");this.set("isOpen",!1);this.set("isExpanded",!0)},_onClickTogglePulloutSection:function(a){f.stopEvent(a);this.set("isExpanded",
!this.isExpanded)},_popupsEnabled:function(){return this._checkBox.checked},_refreshUpdateNotice:function(a){if(0<a){var b=0<a?t.showXchanges:t.showXchange,b=q.substitute(b,[a]);this.updateNotice.innerHTML=b;d.remove(this.header,"noUpdateNotice")}},_resetTimer:function(){this._updateTimer&&clearTimeout(this._updateTimer);this._updateTimer=setTimeout(h.hitch(this,this._updateAlerts),this._updateInterval)},_setPopupsEnabledCookie:function(a){var b=c(this._popupCookieName);a?b|=this.bitMask:(b&=~this.bitMask,
this.clearPopups());c(this._popupCookieName,b,{expires:365,path:webview.pathUtil.currentSiteInfo.sitePath})},_updateCachedMessages:function(a){f.stopEvent(a);this._clearUpdateNotice();this._updateAlerts()},_updateGrid:function(){var a=this._grid.refresh();this.own(a);a.then(h.hitch(this,function(a){a.length&&(a=this._filterAlerts(a),a.length&&this._popupsEnabled()&&this.set("popupQueue",this.popupQueue.concat(a)));this.set("notificationCount",this._grid.store.data.length);this._grid.set("query",this._defaultQuery)}),
h.hitch(this,function(a){}))},destroy:function(){this.inherited(arguments);this._grid&&this._grid.destroy();clearTimeout(this._updateTimer)}})})},"webview/reliable/AHACRequests":function(){define("dgrid/Grid dgrid/extensions/ColumnResizer dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/date/locale dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../nls/afterHoursReport dojo/i18n!../nls/all dojo/i18n!../nls/errorMessages dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!./_afterHours/templates/AHACRequests.html dojo/topic rc/_Widget ./_afterHours/formatUtilities ./_afterHours/RangePicker ./_afterHours/ReasonDialog dijit/layout/BorderContainer dijit/layout/ContentPane ./_afterHours/AHACRequestsToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G){return d("webview/reliable/AHACRequests",[F],{templateString:B,afterHoursStrings:w,rcStrings:u,viewRangeStart:null,viewRangeEnd:null,webviewStrings:z,_eventTypeMap:{1:w.repeatedDaily,2:w.repeatedWeekly,3:w.repeatedMonthly,4:w.repeatedYearly,5:w.dateRange},_ErrorCodeToMessageMap:{504:x.unexpectedError,505:x.siteDoesNotExist,506:x.generalInsufficientPrivileges,403:x.accessForbidden},_canApprove:!1,_grid:null,_gridStore:null,_periodSelector:null,
_reasonDialog:null,_statusMap:{0:"pending",pending:{value:0,label:w.pending},1:"approve",approve:{value:1,label:w.approved},2:"reject",reject:{value:2,label:w.rejected}},_SuccessCode:200,_UnexpectedCode:504,constructor:function(){this._gridStore=new E(new C({data:[]}));this._canApprove=rc.session.hasRole(rc.session.roles2.approveAfterHoursEvents,!0);this._buildColumnStructure()},postCreate:function(){this.inherited(arguments);"webview/reliable/AHACRequests"===this.declaredClass&&(this._setDefaultRequestPeriod(),
this.own(y(this.requestDates,"click",n.hitch(this,this._showReportPeriodSelector))));this.initailize()},initailize:function(){this._fetchData().then(n.hitch(this,this._onInitSuccess),n.hitch(this,this._onInitError))},_buildAuditLogTitle:function(){return rc.pathInfo.site+" "+this.fullTitle},_buildAuditLogContext:function(){if("webview/reliable/AHACRequests"===this.declaredClass){var a=this._buildAuditLogTitle();webview.auditUtil.setContextData(rc.pathInfo.site,[{objectName:"#AHACRequests"}],a)}},
_getQueryObjectAttr:function(){return{periodStart:b.format(this.viewRangeStart,{selector:"date",datePattern:"dd/MM/yyyy"}),periodEnd:b.format(this.viewRangeEnd,{selector:"date",datePattern:"dd/MM/yyyy"})}},_setReportPeriodAttr:function(a){if("undefined"===typeof a.start||"undefined"===typeof a.end)throw this.declaredClass+" - _setReportPeriodAttr(): New value must have both start and end value.";this.viewRangeStart=a.start;this.viewRangeEnd=a.end;a=b.format(this.viewRangeStart,{selector:"date",formatLength:"short"});
var c=b.format(this.viewRangeEnd,{selector:"date",formatLength:"short"});k.set(this.requestDates,"innerHTML",a+" - "+c)},_addToolbarListeners:function(){this._rejectButton=this._toolbar.getButton("reject");this._approveButton=this._toolbar.getButton("approve");this._selectAllButton=this._toolbar.getButton("selectAll");this.own(y(this._toolbar,"approveClicked",n.hitch(this,this._changeStatus,this._statusMap.approve.value)),y(this._toolbar,"rejectClicked",n.hitch(this,this._changeStatus,this._statusMap.reject.value)),
y(this._toolbar,"selectAllClicked",n.hitch(this,this._selectAll)));this.setTooltips()},_buildColumnStructure:function(){this._columnStructure=[{label:this.afterHoursStrings.request,field:"requestDate",id:"requestCol",formatter:H._formatDate},{label:this.webviewStrings.wvUser,field:"user",id:"userCol"},{label:this.webviewStrings.specialEvent,field:"eventName",id:"eventCol"},{label:this.webviewStrings.enterpriseSchedule,field:"esName",id:"esNameCol"},{label:this.afterHoursStrings.eventSource,field:"sourceSchedule",
id:"eventSourceCol"},{label:this.afterHoursStrings.service,field:"eventDate",id:"servicecol",formatter:n.hitch(this,this._formatService)},{label:this.webviewStrings.startLabel,field:"startTime",id:"startCol",formatter:H._formatTime},{label:this.webviewStrings.endLabel,field:"endTime",id:"endCol",formatter:H._formatTime},{label:this.afterHoursStrings.rate,field:"rate",id:"rateCol",formatter:n.hitch(this,function(a,b){return H._formatPrice(a,b)+this.webviewStrings.scheduleRate})},{label:this.afterHoursStrings.hours,
field:"hours",id:"hoursCol"},{label:this.webviewStrings.scheduleCost,field:"cost",id:"costCol",formatter:H._formatPrice},{label:this.afterHoursStrings.status,field:"status",id:"statusCol",formatter:n.hitch(this,this._formatStatus)},{label:this.rcStrings.reason,field:"reason",id:"reasonCol",renderCell:n.hitch(this,this._buildReasonColumn)}];this._canApprove&&this._columnStructure.unshift(h({selectorType:n.hitch(this,H._createSelectorCheckbox),id:"selectorCol",label:"",field:"id",sortable:!1}))},_buildReasonColumn:function(a,
b,c){return a.status===this._statusMap.approve.value?f.create("div",{innerHTML:"-"},c,"only"):H._truncatedText.apply(this,[this._showReasonEditor,a,b,c])},_changeStatus:function(a){var b=Object.keys(this._grid.selection);a===this._statusMap.approve.value?this._updateStatus(b,a,null):a===this._statusMap.reject.value&&this._showReasonEditor("",null).then(n.hitch(this,this._updateStatus,b,a))},_sortDate:function(a,c,f,d){f=b.parse(f[c],{selector:"date",datePattern:"dd/MM/yyyy"});c=b.parse(d[c],{selector:"date",
datePattern:"dd/MM/yyyy"});if(null===f||null===c)return console.error(this.declaredClass+" - _sortDate(): Must be a date in the format dd/MM/yyyy"),0;d=0;d=f.getTime()>c.getTime()?-1:f.getTime()<c.getTime()?1:0;return a?d:-1*d},_customGridSort:function(a){a instanceof Event&&a.preventDefault();var b=a.sort[0],c=null,f=!1,c="undefined"!==typeof this._grid.sortObject?this._grid.sortObject:this._grid.get("sort")[0];c.attribute===b.attribute&&(f=!1===c.descending);this._grid.sortObject=b;this._grid.sortObject.descending=
f;this._grid.set("sort",n.hitch(this,this._sortDate,f,b.attribute));this._grid.updateSortArrow(a.sort,!1)},_createGridConnections:function(){this.own(y(this._grid,[".dgrid-column-requestCol:dgrid-sort",".dgrid-column-servicecol:dgrid-sort"],n.hitch(this,this._customGridSort)))},_createGrid:function(){if(null===this._grid){this._grid=new (d([r,m,p,l]))({columns:this._columnStructure,minRowsPerPage:25,maxEmptySpace:25,bufferRows:10,selectionMode:this._canApprove?"extended":"none",sort:[{attribute:"requestDate",
descending:!1}],store:this._gridStore,showLoadingMessage:!0,noDataMessage:this.webviewStrings.noResultsFound,deselectOnRefresh:!0},this.gridNode);this._grid.startup();if(this._canApprove)this._grid.on(["dgrid-select","dgrid-deselect"],n.hitch(this,this._onSelectionChange));this._createGridConnections();this._customGridSort({sort:[{attribute:"eventDate",descending:!0}]})}},_dataFetched:function(a){a.errStatus===this._SuccessCode?this._gridStore.setData(a.data):(this._displayErrors(a.errStatus),this._gridStore.setData([]));
null!==this._grid&&this._grid.refresh()},_displayErrors:function(a){var b=this._ErrorCodeToMessageMap[this._UnexpectedCode];"undefined"!==typeof this._ErrorCodeToMessageMap[a]&&(b=this._ErrorCodeToMessageMap[a]);D.publish("sticky",{type:"error",message:b})},_fetchData:function(){var a=A.get("AHACRequest/",{handleAs:"json",preventCache:!0,query:this.get("queryObject")});this.own(a);return a},_formatNumber:H._formatNumber,_formatService:function(a,b){var c=H._formatDate(a);0<b.eventType&&"undefined"!==
typeof this._eventTypeMap[b.eventType]&&(c+=" ("+this._eventTypeMap[b.eventType]+")");return c},_formatStatus:function(a){var b="";"undefined"!==typeof this._statusMap[a]&&"undefined"!==typeof this._statusMap[this._statusMap[a]]&&(b=this._statusMap[this._statusMap[a]].label);return b},_onInitSuccess:function(a){this.onInitSuccess();this._canApprove&&this._toolbar&&this._addToolbarListeners();this.own(y.once(this,"resize",n.hitch(this,function(){this._dataFetched(a);this._createGrid()})))},_onSelectionChange:function(a){var b=
"dgrid-select"===a.type,f=null,d=null,k=!0,h=null,l=[],q;for(q in this._grid.selection)!0===this._grid.selection[q]&&l.push(Number(q));if(0<l.length)for(q=0;q<l.length;++q){if(h=this._gridStore.get(l[q]),h.status!==this._statusMap.pending.value){k=!1;break}}else k=!1;this._canApprove&&(this._rejectButton.set("disabled",!k),this._approveButton.set("disabled",!k));g.forEach(a.rows,n.hitch(this,function(a){f=v(".request-checkbox",a.element)[0];d=c.byNode(f);d.set("checked",b)}));this._updateSelectAll()},
print:function(){this.printDGrid(this._grid)},resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(n.hitch(this,function(){this._grid.resize()}),1)},_selectAll:function(){this._toolbar.selectAll?this._grid.clearSelection():this._grid.selectAll();this._updateSelectAll()},_setDefaultRequestPeriod:function(){var a=new Date((new Date).setDate(1));this.set("reportPeriod",{start:a,end:new Date})},_setTitle:function(){this.fullTitle=this.afterHoursStrings.afterHoursRequests;this._toolbar&&
this._toolbar.set("title",this.fullTitle);this.onSetTitle(this.fullTitle);this._buildAuditLogContext()},_showReportPeriodSelector:function(){null===this._periodSelector&&(this._periodSelector=new J({value:{start:this.viewRangeStart,end:this.viewRangeEnd}}),this.own(a.after(this._periodSelector,"execute",n.hitch(this,function(a){this.set("reportPeriod",{start:a.start,end:a.end});this._fetchData().then(n.hitch(this,this._dataFetched),n.hitch(this,this._displayErrors))}),!0)));this._periodSelector.show()},
_showReasonEditor:function(b,c){var f=new t;this.own(f);null===this._reasonDialog?this._reasonDialog=new G({title:this.rcStrings.reason,labelText:this.rcStrings.reason,value:b}):this._reasonDialog.set("value",b);this._reasonDialog.setReadOnly(null!==c);if(null===c){var d=a.after(this._reasonDialog,"execute",n.hitch(this,function(a){f.resolve(a)}),!0);this.own(d);this.own(y.once(this._reasonDialog,"hide",n.hitch(this,function(){d.remove();!1===f.isResolved()&&f.reject()})))}this._reasonDialog.show();
return f.promise},_updateComplete:function(a){a.errStatus!==this._SuccessCode&&this._displayErrors(a.errStatus)},_updateSelectAll:function(){var a=[],b;for(b in this._grid.selection)!0===this._grid.selection[b]&&a.push(b);this._toolbar.set("selectAll",0<a.length)},_updateStatus:function(a,b,c){for(var f=null,d=[],f={},g=0;g<a.length;++g)f=this._gridStore.get(a[g]),"undefined"!==typeof f&&(f.reason=c,f.status=b,d.push(f.id),this._gridStore.put(f));0<d.length&&(f={requestIds:d,statusEnum:b,rejectReason:c},
A.put("AHACRequest/",{handleAs:"json",data:f}).then(n.hitch(this,this._updateComplete)));this._grid.refresh()}})})},"webview/reliable/_afterHours/formatUtilities":function(){define("dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/currency dojo/date/locale dojo/dom-class dojo/dom-construct dojo/number dojo/on webview/util/globalConstants".split(" "),function(r,p,m,l,h,c,g,d,n,a){var b=p("webview/reliable/_afterHours/formattingUtilities",null,{_createSelectorCheckbox:function(a,b,d){a=new r({value:!0,
checked:!1,definedValue:d.id});c.add(a.domNode,"request-checkbox");g.place(a.domNode,b,"only");a.set("onChange",m.hitch(this,function(a){a.get("checked")?this._grid.select(a.get("definedValue")):this._grid.deselect(a.get("definedValue"))},a));return a.domNode},_formatDate:function(a){a=h.parse(a,{selector:"date",datePattern:"dd/MM/yyyy"});return h.format(a,{selector:"date",formatLength:"short"})},_formatNumber:function(a){return d.format(a,{type:"decimal",places:2})},_formatPrice:function(c,d){var g=
b.prototype._formatNumber(c);null!==d.currency&&a.CurrencyToSymbol.hasOwnProperty(d.currency)&&(g=l.format(c,{currency:d.currency,symbol:a.CurrencyToSymbol[d.currency]}));return g},_formatTime:function(a){if("string"===typeof a){a=a.split(":");var b=new Date(0);switch(a.length){case 1:b=b.setHours(a[0],0,0,0);break;case 2:b=b.setHours(a[0],a[1],0,0);break;case 3:b=b.setHours(a[0],a[1],a[2],0);break;default:throw"Invalid time format";}a=new Date(b)}else if(!1===a instanceof Date)throw"Time must be either a date object or a time string";
return h.format(a,{selector:"time",formatLength:"short"})},_truncatedText:function(a,b,d,f){b=g.create("div",{"class":"description-container"},f,"only");g.create("span",{title:d,innerHTML:null===d||""===d?"-":d,"class":"description-text"},b,"first");g.create("span",{"class":"webviewIcon textEditIcon"},b,"last");this.own(n(f,"click",m.hitch(this,a,d)));c.add(f,"linkable");return b}});return new b})},"webview/reliable/_afterHours/RangePicker":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/cldr/supplemental dojo/date dojo/date/locale dojo/i18n!dojo/cldr/nls/generic dojo/i18n!dojo/cldr/nls/gregorian dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/keys dojo/on dojo/text!./templates/RangePicker.html dijit/form/Button dijit/form/DateTextBox dijit/form/ValidationTextBox webview/widget/CalendarPicker".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return p("webview/reliable/_afterHours/RangePicker",[r],{templateString:k,formatStrings:d,title:a.selectPeriodRange,startDate:null,endDate:null,genericStrings:g,_datePattern:null,_jumpMap:{week:0,month:1,year:2},constructor:function(){this.rcStrings=n;this.webviewStrings=a;this._datePattern="^"+c.regexp({selector:"date",formatLength:"short"})+"$";this._datePattern=this._datePattern.replace(/\\/g,"\\\\")},postCreate:function(){this.inherited(arguments);this.own(t(this.startDateString,
"change",m.hitch(this,this._inputChanged,"startDate")),t(this.endDateString,"change",m.hitch(this,this._inputChanged,"endDate")),t(this.startCalendarPicker,"change",m.hitch(this,this._setDate,"startDate")),t(this.endCalendarPicker,"change",m.hitch(this,this._setDate,"endDate")),t(this.jumpToWeek,"click",m.hitch(this,this._jumpToRange,this._jumpMap.week)),t(this.jumpToMonth,"click",m.hitch(this,this._jumpToRange,this._jumpMap.month)),t(this.jumpToYear,"click",m.hitch(this,this._jumpToRange,this._jumpMap.year)))},
_getValueAttr:function(){return{start:this.startCalendarPicker.get("value"),end:this.endCalendarPicker.get("value")}},_jumpToRange:function(a){var b={start:new Date,end:new Date};switch(a){case this._jumpMap.week:a=l.getFirstDayOfWeek();var c=-b.start.getDay();b.start=h.add(b.start,"day",c+a);b.end=h.add(b.start,"day",6);break;case this._jumpMap.month:b.start=b.start.setFullYear(b.start.getFullYear(),b.start.getMonth(),1);b.end=b.end.setFullYear(b.end.getFullYear(),b.end.getMonth()+1,0);break;case this._jumpMap.year:b.start=
b.start.setFullYear(b.start.getFullYear(),0,1),b.end=b.end.setFullYear(b.end.getFullYear()+1,-1,31)}this.set("value",b)},_inputChanged:function(a,b){this._validateInputs();this._setDate(a,c.parse(b,{selector:"date",formatLength:"short"}))},_onKey:function(a){this.inherited(arguments);a.keyCode===b.ENTER&&this._validateInputs()&&(this.startDateString.onChange(this.startDateString.get("value")),this.endDateString.onChange(this.endDateString.get("value")),a.stopPropagation(),a.preventDefault(),this._onSubmit())},
_setDate:function(a,b){if(-1===["startDate","endDate"].indexOf(a))throw"Date to update must be either startDate or endDate";this[a].getTime()!==b.getTime()&&(this[a]=b,this.set("value",{start:this.startDate,end:this.endDate}))},_setValueAttr:function(a){if("undefined"===typeof a.start||"undefined"===typeof a.end)throw"Value must have start and end values";this.startDate=new Date(a.start);this.endDate=new Date(a.end);this.startCalendarPicker.set("value",this.startDate);this.endCalendarPicker.set("value",
this.endDate);this.startDateString.set("value",c.format(this.startDate,{selector:"date",formatLength:"short"}));this.endDateString.set("value",c.format(this.endDate,{selector:"date",formatLength:"short"}))},_validateInputs:function(){var a=!1;if(this.startDateString.isValid()&&this.endDateString.isValid())var a=c.parse(this.startDateString.get("value"),{selector:"date",formatLength:"short"}).getTime(),b=c.parse(this.endDateString.get("value"),{selector:"date",formatLength:"short"}).getTime(),a=a<=
b;this.okButton.set("disabled",!a);return a}})})},"webview/widget/CalendarPicker":function(){define("dijit/Calendar dijit/DropDownMenu dijit/form/DropDownButton dijit/MenuItem dojo/_base/declare dojo/_base/lang dojo/dom-construct".split(" "),function(r,p,m,l,h,c,g){return h("webview/widget/CalendarPicker",r,{baseClass:"webview-calendar-picker",yearPicker:null,startingYear:2E3,totalYears:40,constructor:function(){c.extend(r._MonthDropDown,{baseClass:this.baseClass+"-menu"})},buildRendering:function(){this.inherited(arguments);
var c=g.create("div",{},this.monthWidget.domNode,"after");this.yearWidget=this._createYearWidget(c)},_createYearWidget:function(d){if(null===this.yearPicker){for(var g=new p({baseClass:this.baseClass+"-year-menu"}),a=0;a<this.totalYears;++a)g.addChild(new l({label:this.startingYear+a+"",baseClass:this.baseClass+"-year-item",onClick:c.hitch(this,this._setYear,this.startingYear+a)}));this.yearPicker=new m({label:this.startingYear+"",baseClass:"year-selector",dropDown:g},d)}return this.yearPicker},_setCurrentFocusAttr:function(c){this.inherited(arguments);
null!==this.yearPicker&&c.getFullYear()!==this.yearPicker.get("label")&&this.yearPicker.set("label",c.getFullYear())},_setValueAttr:function(c){this.inherited(arguments);var d=new Date(c);!1===isNaN(d.getTime())&&this.yearPicker.set("label",d.getFullYear())},_setYear:function(c){this.set("currentFocus",new Date((new Date(this.currentFocus)).setFullYear(c)))}})})},"webview/reliable/_afterHours/ReasonDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/i18n!rc/nls/all dojo/on dojo/text!./templates/ReasonDialog.html dijit/form/Button dijit/form/Textarea".split(" "),
function(r,p,m,l,h,c,g,d){return p("webview/reliable/_afterHours/ReasonDialog",r,{templateString:d,labelText:c.reason,title:c.reason,value:null,rcStrings:c,buildRendering:function(){this.inherited(arguments);l.set(this.reasonLabel,"for",this.reasonInput.id);this._checkForText();this.own(g(this.reasonInput,"keyup",m.hitch(this,this._checkForText)))},setReadOnly:function(c){h.toggle(this.okButton.domNode,"hidden",c);h.toggle(this.cancelButton.domNode,"hidden",c);this.reasonInput.set("disabled",c);l.set(this.closeButtonNode,
"title",c?this.rcStrings.close:this.rcStrings.btnCancel)},_checkForText:function(){var c=this.reasonInput.get("value").trim();this.okButton.set("disabled",0===c.length)},_getValueAttr:function(){var c=this.reasonInput.get("value");0===c.trim().length&&(c=null);return c},_setValueAttr:function(c){this.value=c;this.reasonInput.set("value",this.value)}})})},"webview/reliable/_afterHours/AHACRequestsToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/afterHoursReport dojo/on dojo/text!./templates/AHACRequestsToolbar.html ../../widget/ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),
function(r,p,m,l,h,c,g,d,n){return r("webview/reliable/_pointsReport/AHACRequestsToolbar",[n],{afterHoursStrings:c,rcStrings:l,selectAll:!1,templateString:d,webviewStrings:h,_setSelectAllAttr:function(a){m.toggle(this.selectAllButton.toolbarButtonIcon,"svg-select-all-icon",!a);m.toggle(this.selectAllButton.toolbarButtonIcon,"svg-deselect-all-icon",a);this.selectAllButton.tooltip.set("label",a?this.webviewStrings.deselectAll:this.webviewStrings.selectAll);this._set("selectAll",a)},_setShowButtonsAttr:function(a){[this.selectAllButton,
this.approveButton,this.rejectButton].forEach(function(b){m.toggle(b.domNode,"hidden",!a)});this._set("showButtons",a)},onApproveClicked:function(){},onRejectClicked:function(){},onSelectAllClicked:function(a){},_createButtonMap:function(){this._buttons={approve:this.approveButton,reject:this.rejectButton,selectAll:this.selectAllButton}},_createConnections:function(){this.own(g(this.approveButton.domNode,"click",p.hitch(this,function(){if(!this.approveButton.get("disabled"))this.onApproveClicked()})),
g(this.rejectButton.domNode,"click",p.hitch(this,function(){if(!this.rejectButton.get("disabled"))this.onRejectClicked()})),g(this.selectAllButton.domNode,"click",p.hitch(this,function(){if(!this.selectAllButton.get("disabled"))this.onSelectAllClicked()})))}})})},"webview/widget/ClientWidgetToolbar":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-style".split(" "),function(r,p,m,l,h,c,g){return l("webview/widget/ClientWidgetToolbar",
[p,r,m],{_buttons:{},baseClass:"client-toolbar",region:"top",_resizeConstants:-1,_resizeTimeout:null,postCreate:function(){this._createButtonMap();this._createConnections()},_setTitleAttr:function(d){c.set(this._title,{innerHTML:d,title:d});this._set("title",d)},getButton:function(c){return this._buttons[c]},getPageButtons:function(){return this._buttons},resize:function(){null!==this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(h.hitch(this,function(){-1===this._resizeConstants&&
this._getResizeConstants();g.set(this._title,{width:this.domNode.clientWidth-this._resizeConstants+"px"})}),100)},setTitle:function(c){this.set("title",c)},_createButtonMap:function(){throw"_createButtonMap(): Child class must implement";},_createConnections:function(){throw"_createConnections(): Child class must implement";},_getResizeConstants:function(){var c=Object.values(this._buttons).reduce(function(a,b){var c=0;return c="number"!==typeof a?a.domNode.clientWidth+b.domNode.clientWidth+8:a+b.domNode.clientWidth+
4}),h=g.get(this.domNode,"marginRight")+g.get(this._title,"marginLeft")+g.get(this.buttonContainer,"marginRight");this._resizeConstants=c+h},destroy:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout);this.inherited(arguments)}})})},"webview/widget/ToolbarButton":function(){define("dijit/Tooltip dojo/_base/declare dojo/dom-class dojo/i18n!webview/nls/all dojo/text!./templates/ToolbarButton.html rc/_Widget".split(" "),function(r,p,m,l,h,c){return p("webview/widget/ToolbarButton",c,{templateString:h,
tooltip:null,constructor:function(){this.inherited(arguments);this.webviewStrings=l},postCreate:function(){this.inherited(arguments);this.tooltip=new r({connectId:this.buttonNode,label:'\x3cspan class\x3d"toolbar-button-tooltip"\x3e'+this.titleStr+"\x3c/span\x3e",position:["above"],showDelay:0});m.add(this.tooltip.domNode,"buttonBar");m.add(this.toolbarButtonIcon,this.iconClass)},hideToolTip:function(){null!==this.tooltip&&this.tooltip.set("state","DORMANT")},_setDisabledAttr:function(c){m.toggle(this.domNode,
"disabled",c);this._set("disabled",c)},_setTitleStrAttr:function(c){this.titleStr=c;null!==this.tooltip&&this.tooltip.set("label",this.titleStr)}})})},"webview/widget/AlarmNotification":function(){define("dgrid/Grid dgrid/OnDemandGrid dijit/form/Button dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/cookie dojo/dom-construct dojo/Evented dojo/has dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/alarms dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/AlarmNotification.html dojox/validate rc/_base/util rc/widget/AlarmNotification ./PopupNotificationMixin dojox/validate/web".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D){return c("webview/widget/AlarmNotification",[B,b,D],{defaultSort:[{attribute:"time",descending:!0},{attribute:"priority"}],popupClass:"Alarm",bitMask:2,templateString:A,_defaultQuery:{active:!0,enable:2,poppable:!0,cleared:!1},constructor:function(){this.inherited(arguments);this._listButtons={};this.popupQueue=[];this._gridStore=new y(new x({idProperty:"id",data:[]}))},postCreate:function(){this.inherited(arguments);rc.AlarmLoader&&((test.isLive()||
test.mode===test.PROXY_ALARM_LIVE||test.mode===test.PROXY_ALARM_CANNED)&&rc.AlarmLoader.addFetch(null,g.hitch(this,function(a){this._connectData();this._mergeStats();this._updateAlerts();return a}),g.hitch(this,function(a){return a}),this._fetchNow),this._addTooltip());this._initialize()},addToasterMessage:function(a,b){0<b.priority||this._alarmConfig.get("alarmDefaultPriority",b.type);var c=b.popFormat,f=this._buildAlertMessage(b);f.manager=this;var d=this._alarmConfig.formatPopupType(b.popup);a._toaster.addMessage({message:f,
type:d,alarmLoader:f.loader,itemToAck:b,showAck:this._showAck(b),showCancel:1===c||2===c,toastClass:"AlarmToast",widgetDir:"webview/widget/"})},initialize:function(){},_addTooltip:function(){this.emit("addTooltip",u.ttAlarmPopup,this.popupClass)},_buildAlertMessage:function(b){var c=a.create("div"),f=v.substitute(k.xAlarm,[this._alarmConfig.formatType(b.type)]),d=0<b.priority?b.priority:this._alarmConfig.get("alarmDefaultPriority",b.type),g=this._alarmConfig.formatMessage(b.messageText,b),h="";0===
b.controller[0]&&(h=+b.state[0]);c.appendChild(a.create("p",{"class":"type",innerHTML:f}));c.appendChild(a.create("p",{"class":"title",innerHTML:g+h}));f=a.create("div",{"class":"message"});f.appendChild(a.create("p",{innerHTML:k.priority+": "+this._alarmConfig.formatPriority(d)}));f.appendChild(a.create("p",{innerHTML:k.source+": "+b.source}));f.appendChild(a.create("p",{innerHTML:k.time+": "+this._alarmConfig.formatPopupTime(0==b.controller[0]?b.time[0]:parseInt(b.time,10),null,null,b)}));b.action&&
b.action[0]&&f.appendChild(a.create("p",{innerHTML:k.action+": "+this._formatAction(b),className:"actionLink"}));c.appendChild(f);c.loader=rc.AlarmLoader;return c},_createGrid:function(){var a=[{field:"time",id:"timeCol",width:"15.5em",styles:"text-align: left;",formatter:g.hitch(this,this._formatAlarmListing),renderHeaderCell:g.hitch(this,this._renderAlarmHeaderCell)},{label:" ",field:"action",id:"actionCol",width:"3.5em",styles:"text-align: left;",renderCell:g.hitch(this,this._formatListButtons)}];
if(7===t("chrome")||18===t("chrome"))a[0].width="22px",a[2].width="65px";this._grid=new (c([r,p]))({store:this._gridStore,columns:a,noDataMessage:this._noDataMsg,sort:this.defaultSort});this._grid.set("sort",[{attribute:"time",descending:!0},{attribute:"priority"}]);this.headerNode=z(".dgrid-header .field-time",this._grid.domNode)[0];this.own(d.before(this.headerNode,"onclick",g.hitch(this,this._onClickTogglePulloutSection,this.headerNode)),d.before(this._grid,"removeRow",g.hitch(this,this._cleanupRow)))},
_createLink:function(){if(rc.session.hasRole(rc.session.roles.viewAlarms)){var b=a.create("p",null,this.linkNode,"first");a.create("a",{href:this._linkToWidget(this.popupClass),innerHTML:u.viewAlarms},b)}},_filterAlerts:function(a){var b=[];return b=h.filter(a,function(a){var b=!a.shown||1===a.shown&&(2===a.popFormat||3===a.popFormat);if(b=a.poppable&&2===a.enable&&b){var c=!1;if(this._grid.store)try{c=!this._grid.store.get(a.id).cleared}catch(M){}b=b&&c}if(b){var f=!1,d;for(d in this.popupQueue)h.forEach(d,
function(b){b.messageText===a.messageText&&b.source===a.source&&(f=!0)},this);b=b&&!f}return b},this)},_formatAction:function(a){var b="";try{if(a.action){"group"!==a.actionType||/^\d+/.test(a.action)||(a.action=a.source+a.action);var c=C.isUrl(a.action)?a.action:E.mnemonicToUri(a.action),f=webview.pathUtil.getInfo(window.location.pathname);C.isUrl(a.action)||0!==f.system.length||(c=a.systemId+"/"+c);var d=v.substitute(q.gotoX,[a.action]),b='\x3ca href\x3d"'+c+'"\x3e'+d+"\x3c/a\x3e"}}catch(K){console.error("Error in formatAction: error, string",
K)}return b},_formatAlarmListing:function(a,b){var c="\x3cp\x3e"+this._alarmConfig.formatType(b.type)+" : "+this._alarmConfig.formatMessage(b.messageText,b);0===b.controller&&(c+=" "+b.state);c+='\x3c/p\x3e\x3cp class\x3d"note"\x3e'+this._alarmConfig.formatPopupTime(a,b,"time")+"\x3c/p\x3e";b.action&&(c+="\x3cp\x3e"+this._formatAction(b)+"\x3c/p\x3e");return c},_formatListButtons:function(b,c,f){if(!this._showAck(b))return this._listButtonRemoveItem(b),"";c=b.id;if("undefined"!==typeof this._listButtons[c])return this._listButtons[c].button.domNode;
f=a.create("div",{},f);var d=new m({baseClass:"rc24Icon alarmAckIcon"},f);this._supportingWidgets.push(d);var k=w(d,"click",g.hitch(this,function(){this._editAlarms(1,[b])}));this._listButtonAdd(c,d,k);return f},_renderAlarmHeaderCell:function(b){b=a.create("div",{className:"notificationsHeader"},b,"first");var c=a.create("div",{className:"notificationsLabel"},b,"first");this.header=a.create("div",{innerHTML:f.popupAlarms,className:"notificationName"},c,"first");this.updateNotice=a.create("div",{innerHTML:"",
className:"updateNotice"},c,"last");this._checkBox=new l({name:"alarmsCheckBox","Checked Title":"Enabled Popups",onClick:g.hitch(this,function(a){a.stopPropagation();this._setPopupsEnabledCookie(this._checkBox.checked)})});c=n(this._popupCookieName);"undefined"===typeof c&&(c=this._showAllPopup);this._checkBox.set("checked",(this.bitMask&c)===this.bitMask);a.place(this._checkBox.domNode,b,"first");this.own(w(this.updateNotice,"click",g.hitch(this,this._updateCachedMessages)))},_update:function(){this._updateGrid()},
_updateAlerts:function(){return this.inherited(arguments).always(g.hitch(this,this._resetTimer))}})})},"webview/reliable/EnterpriseScheduleQueue":function(){define("dgrid/OnDemandGrid dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-style dojo/fx dojo/i18n!rc/nls/all dojo/i18n!../nls/afterHoursReport dojo/i18n!../nls/enterpriseSchedules dojo/on dojo/query dojo/request/iframe dojo/store/Memory dojo/store/Observable dojo/text!./_enterpriseScheduleQueue/templates/EnterpriseScheduleQueue.html rc/bacnet/error ./_enterpriseScheduleQueue/ScheduleQueueEntry ../xhrEnhanced ../widget/ToolbarButton".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C){return h("webview/reliable/_enterpriseScheduleQueue/EnterpriseScheduleQueue",[m,p,l],{bitMask:4,enterpriseScheduleStrings:q,isOpen:!1,pendingCode:202,rcStrings:t,siteId:-1,templateString:y,queueCount:0,_pollInterval:5E3,_pollTimeout:null,_entryConnectionMap:{},_grid:null,_queueQuery:null,_gridStore:null,_requestPath:"ESQueue/GetQueue",_resizeDebounce:null,_retryPath:"ESQueue/RetrySchedules",_staticHeights:-1,_translationsMap:null,constructor:function(){this._gridStore=
new x(new z({idProperty:"scheduleId"}))},postCreate:function(){this.inherited(arguments);this._queueQuery={siteId:this.siteId};this.resize();this._setupClickListeners();this._buildColumnStructure();this._pollForChanges();this._createGrid()},_setIsOpenAttr:function(a){var b=c.hitch(this,function(){this._set("isOpen",a)});a?this._showQueue().then(b):this._hideQueue().then(b)},calculateYOffset:function(){return 0},resize:function(){this._resizeDebounce&&(window.clearTimeout(this._resizeDebounce),this._resizeDebounce=
null);this._resizeDebounce=window.setTimeout(c.hitch(this,this._resize),50)},toggle:function(){this.set("isOpen",!this.isOpen)},_buildColumnStructure:function(){this._columnStructure=[{id:"labelCol",field:"label",label:"",renderCell:c.hitch(this,this._renderLabelCell)}]},_buildTranslationsMap:function(){null===this._translationsMap&&(this._translationsMap={bacnetClasses:v.classes,bacnetCodes:v.codes,unexpectedError:this.rcStrings.unexpectedError,statusCodes:{202:k.pending,504:this.rcStrings.smFailed,
508:this.rcStrings.smFailed},headersStrings:{schedule:this.rcStrings.sched,status:k.status,details:this.rcStrings.auditDetails}})},_cancelPolling:function(){null!==this._pollTimeout&&(window.clearTimeout(this._pollTimeout),this._pollTimeout=null)},_createGrid:function(){null===this._grid&&(this._grid=new (h(r))({columns:this._columnStructure,farOffRemoval:500,keepScrollPosition:!0,minRowsPerPage:200,query:this._queueQuery,showFooter:!1,showHeader:!1,sort:[{attribute:"status",descending:!0},{attribute:"label",
descending:!0}],store:this._gridStore},this._gridNode),this.own(g.before(this._grid,"removeRow",c.hitch(this,this._destroyScheduleQueueWidget))),this._grid.startup())},_destroyScheduleQueueWidget:function(a){if((a=this._grid.cell(a,"labelCol"))&&a.element&&a.element.widget){var b=this._entryConnectionMap[a.row.id];"undefined"!==typeof b&&(b.retryLink.remove(),b.tooltipOpen.remove(),b.tooltipClose.remove(),delete this._entryConnectionMap[a.row.id]);a.element.widget.destroyRecursive()}},_exportQueue:function(){this._buildTranslationsMap();
w._currentDfd=null;w._fireNextRequest();w.post("ESQueue/Export",{handleAs:"document",data:{siteId:this.siteId,translationsMap:JSON.stringify(this._translationsMap)}})},_hideQueue:function(){var a=new d;b.wipeOut({node:this.domNode,onEnd:function(){a.resolve()}}).play();return a},_pollForChanges:function(){C.get("ESQueue/TotalCount",{handleAs:"json",preventCache:!0,query:{siteId:this.siteId}}).then(c.hitch(this,function(a){this.set("queueCount",a.totalCount)}));C.get("ESQueue/GetQueue",{handleAs:"json",
preventCache:!0,query:{siteId:this.siteId,count:1E3}}).then(c.hitch(this,this._updateGridData))},_renderLabelCell:function(a,b,f){b=new A(a);b.status!==this.pendingCode&&(n.add(f,"schedule-in-error"),this._entryConnectionMap[a.scheduleId]={retryLink:b.on("retrySchedules",c.hitch(this,this._retrySchedules)),tooltipOpen:b.tooltip.on("open",c.hitch(this,this._cancelPolling)),tooltipClose:b.tooltip.on("close",c.hitch(this,this._resetPolling))});f.widget=b;return b.domNode},_resetPolling:function(){this._cancelPolling();
this._pollTimeout=window.setTimeout(c.hitch(this,this._pollForChanges),this._pollInterval)},_resize:function(){var b=this.domNode.parentElement.parentElement,c=b.clientHeight-this.calculateYOffset();if(-1===this._staticHeights){var f=2*a.get(this.domNode,"borderWidth"),f=f+(a.get(this._gridNode,"marginTop")+a.get(this._gridNode,"marginBottom")),f=f+(a.get(this._queueHeader,"lineHeight")+a.get(this._queueHeader,"paddingTop")+a.get(this._queueHeader,"paddingBottom")),d=u(".client-toolbar",b);1===d.length&&
(d=d[0],f+=d.clientHeight+a.get(d,"marginTop"));b=u(".dijitGutter",b);1===b.length&&(f+=b[0].clientHeight);this._staticHeights=f}a.set(this._gridNode,"height",c-this._staticHeights+"px")},_retrySchedules:function(){this._resetPolling();C.put(this._retryPath,{handleAs:"json",data:{siteId:this.siteId}});this._gridStore.query(c.hitch(this,function(a){return a.status!==this.pendingCode})).forEach(c.hitch(this,function(a){a.status=this.pendingCode;a.bacnetError=null;this._gridStore.put(a)}))},_setupClickListeners:function(){this.own(f(this._closeButton.domNode,
"click",c.hitch(this,this.toggle)),f(this._exportButton.domNode,"click",c.hitch(this,this._exportQueue)))},_showQueue:function(){var a=new d;b.wipeIn({node:this.domNode,beforeBegin:function(){a.resolve()}}).play();return a},_updateGridData:function(a){this._gridStore.setData(a);this._grid.refresh();this._resetPolling()}})})},"webview/reliable/_enterpriseScheduleQueue/ScheduleQueueEntry":function(){define("dijit/popup dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/afterHoursReport dojo/i18n!../../nls/enterpriseSchedules dojo/mouse dojo/on dojo/text!./templates/ScheduleQueueEntry.html rc/bacnet/enums rc/bacnet/io/Error rc/bacnet/io/Number ../../widget/TooltipDialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w){return l("webview/reliable/_enterpriseScheduleQueue/ScheduleQueueEntry",[m,p],{enterpriseScheduleStrings:a,errorMessage:"",isHovered:!1,templateString:k,tooltip:null,_bacnetErrorCode:508,_checkForMouseTimer:200,_errorMessageMap:{202:n.pending,504:d.unexpectedError,508:d.bacnetError},_pendingCode:202,_unexpectedErrorCode:504,postCreate:function(){this.inherited(arguments);this.status!==this._pendingCode&&this._setupTooltip()},_getErrorMessageAttr:function(){var a=
"";if(this.status===this._bacnetErrorCode&&this.bacnetError)var a=new u(this.bacnetError.errorClass,q.primitiveTypes.ENUMERATED),b=new u(this.bacnetError.errorCode,q.primitiveTypes.ENUMERATED),a=(new f(a,b)).toStringMsg();else a="undefined"!==typeof this._errorMessageMap[this.status]?this._errorMessageMap[this.status]:this._errorMessageMap[this._unexpectedErrorCode];return a},_setLabelAttr:function(a){c.set(this._labelContainer,"innerHTML",a);c.set(this.domNode,"title",a);this._set("label",a)},onRetrySchedules:function(){},
_buildTooltipContents:function(){this.closeHandle&&this.closeHandle.remove();this.retryHandle&&this.retryHandle.remove();var a=g.create("div",{className:"schedule-queue-message-container"}),b=g.create("div",{className:"toastCloseIcon",innerHTML:"\x26times;"},a,"last"),c=g.create("div",{className:"schedule-queue-message",innerHTML:this.get("errorMessage")+"\x3cbr /\x3e"},a,"last"),c=g.create("span",{className:"schedule-queue-retry-link",innerHTML:this.enterpriseScheduleStrings.retryNow},c,"last");
this.closeHandle=t(b,"click",h.hitch(r,r.close,this.tooltip));this.retryHandle=t(c,"click",h.hitch(this,this._onRetrySchedules));this.own(this.closeHandle,this.retryHandle);return a},_closePopup:function(){this.tooltip.get("isHovered")||this.isHovered?this.defer(h.hitch(this,this._closePopup),this._checkForMouseTimer):r.close(this.tooltip)},_onRetrySchedules:function(){this.onRetrySchedules();this.isHovered=!1;this._closePopup()},_setupTooltip:function(){this.tooltip=new w({baseClass:"enterprise-schedule-queue-tooltip",
content:this._buildTooltipContents()});this.own(this.tooltip,t(this.domNode,b.enter,h.hitch(this,this._showTooltip)),t(this.domNode,b.leave,h.hitch(this,function(){this.isHovered=!1;this.defer(h.hitch(this,this._closePopup),this._checkForMouseTimer)})))},_showTooltip:function(){r.open({popup:this.tooltip,orient:["before-centered"],around:this.domNode});this.isHovered=!0},destroyRecursive:function(){this.tooltip&&r.close(this.tooltip);this.inherited(arguments)}})})},"webview/widget/TooltipDialog":function(){define("dijit/TooltipDialog dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/has dojo/mouse dojo/on".split(" "),
function(r,p,m,l,h,c,g){return p("webview/widget/TooltipDialog",[r],{isHovered:!1,_linkClickHandler:null,_setContentAttr:function(c){this.inherited(arguments);if(h("touch")){null!==this._linkClickHandler&&this._linkClickHandler.remove();var d=g(this.domNode,g.selector("a","click"),m.hitch(this,function(a){window.open(a.target.href)}));this.own(d);this._linkClickHandler=d}l.place(c,this.containerNode,"replace");this._set("content",c)},postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,
c.enter,m.hitch(this,this.set,"isHovered",!0)),g(this.domNode,c.leave,m.hitch(this,this.set,"isHovered",!1)))},destroy:function(){null!==this._linkClickHandler&&(this._linkClickHandler.remove(),this._linkClickHandler=null);this.inherited(arguments)}})})},"webview/widget/UserToolBar":function(){define("dijit/Dialog dijit/DropDownMenu dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/cookie dojo/dom-class dojo/dom-style dojo/Evented dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/alarms dojo/i18n!webview/nls/all dojo/i18n!webview/nls/whatsNew dojo/i18n!../nls/resetPassword dojo/on rc/_base/util rc/StyleSwitcher ./AboutDialog ./MenuBarItem ./PopupMenuBarItem ./passwords/ChangeApprovalPasswordDialog ./passwords/ChangePasswordDialog ../_base/tooltip ../util/HelpUtil ../util/util".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K){return n("webview/widget/UserToolBar",[l,f],{aboutDialog:null,baseClass:"userToolBar",changeDialog:null,changeDialogContent:null,dateTimeDialog:null,showTitle:!0,styleSwitcherHasListener:!1,_buttons:null,_changeApprovalPasswordDialogContent:null,_changeApprovalPasswordDialog:null,_helpMenu:null,_optionsMenu:null,_siteOptions:null,_userSites:null,LANGUAGES:{"en-us":w.english,de:w.german,es:w.spanish,fr:w.french,pt:w.portuguese,
zh:w.chinese,"zh-tw":w.traditionalChinese,"default":w.browserDefault},postCreate:function(){this.inherited(arguments);this._buttons={};this.addChild(new D({label:x.hello+" "+rc.session.getDisplayName(),iconClass:"noIcon",baseClass:this.baseClass+" userGreeting"}));this._optionsMenu=new p({baseClass:this.baseClass});this.addChild(new F({baseClass:this.baseClass+" userMenuItem",label:w.options,iconClass:"rcIcon moreIcon",popup:this._optionsMenu}));this._makeHelpMenu();var b=rc.session.isPrivate();if(b||
rc.session.showLogOut())this._buttons.LogoutButton=new D({label:b?x.logoff:w.login,iconClass:"rcIcon logoffIcon",baseClass:this.baseClass+" actionLink lastItem",onClick:a.hitch(this,this.onLogout)}),this.addChild(this._buttons.LogoutButton);var c;1===rc.session._attributes.SiteMapArray.length?c=rc.session._attributes.SiteMapArray[0]:rc.session._attributes.SiteMapArray.forEach(a.hitch(this,function(a){a.sitePath===rc.pathInfo.site&&(c=a)}));c?this._makeOptionsMenu(c):this._makeOptionsForAdminBasic()},
onFetchAlarms:function(){this.emit("fetchAlarms")},onLogout:function(a){this.emit("logout",a)},onPrint:function(){this.emit("print")},onShowSetSystemTime:function(){this.emit("showSystemTime")},onShowWhatsNewDialog:function(){this.emit("showWhatsNewDialog")},onSyncAlarms:function(){this.emit("syncAlarms")},onToggleToolbar:function(){var a="false"!==t("tToolbar");this._buttons.ToggleToolbar.set("label",a?x.showToolbar:x.hideToolbar);t("tToolbar",!a,{expires:365,path:"/"});this.emit("toggleToolbar",
a)},onToggleTree:function(){var a="false"!==t("tTree");this._buttons.ToggleTree.set("label",a?x.showTree:x.hideTree);t("tTree",!a,{expires:365,path:"/"});this.emit("toggleTree",a)},resetDialog:function(){this.aboutDialog=null},resetMenusAndHelp:function(a){if(this._buttons.Print){var b=a&&a.Print;this.showButton("Print",b);b||this._buttons.ChangePassword||this.showButton("Separator",!1)}this._buttons.Themes&&this.showButton("Themes",a&&!1!==a.Themes);this._buttons.ToggleToolbar&&this.showButton("ToggleToolbar",
a&&!1!==a.ToggleToolbar);this._buttons.ToggleTree&&this.showButton("ToggleTree",a&&!1!==a.ToggleTree);this._buttons.SyncAlarms&&(this.showButton("SyncAlarms",a&&a.AlarmOptions),this.showButton("FetchAlarms",a&&a.AlarmOptions),this.showButton("AlarmSeparator",a&&a.AlarmOptions))},setUserSite:function(b){if("sites"===b[1].widget){this._userSites=[];for(var c=2;c<b.length&&("site"!==b[c].widget||(this._userSites.push(b[c].name),this._userSites.length!==b[1].children.length));c++);}else this._userSites=
[b[1].name];this._userSites&&(null!==this._optionsMenu&&(this._optionsMenu.onClose(),d.forEach(this._optionsMenu.getChildren(),a.hitch(this,function(a){this._optionsMenu.removeChild(a);a.destroyRecursive()})),this._buttons={}),1<this._userSites.length?this._makeOptionsForAdmin():1===this._userSites.length?this._makeOptionsMenu(rc.session._attributes.SiteMapArray[0]):this._makeOptionsForAdminBasic())},showButton:function(a,b){this._buttons[a]&&k.toggle(this._buttons[a].domNode,"hidden",!b)},toggleChangeApprovalPasswordItem:function(a){this._buttons.ChangeApprovalPassword&&
this.showButton("ChangeApprovalPassword",a)},_addAlarmsMenuItem:function(b,c){var f=!1;rc.session.hasRole(rc.session.roles.viewAlarms)&&(b.addChild(this._makeMenu(w.alarms,a.hitch(this,this._gotoPage,"Alarm",c.sitePath))),b.addChild(this._makeMenu(z.alarmsHist,a.hitch(this,this._gotoPage,"AlarmHistory",c.sitePath))),f=!0);return f},_addAuditMenuItem:function(b,c){var f=!1;rc.session.hasRole(rc.session.roles.audit)&&(b.addChild(this._makeMenu(w.auditTrail,a.hitch(this,this._gotoPage,"audit",c.sitePath))),
f=!0);return f},_addChangePasswordMenuItem:function(b){rc.session.getIsLDAP()||rc.session.isPublic()||(this._buttons.ChangePassword=this._makeMenu(x.changePass,a.hitch(this,this._showPasswordDialog)),b.addChild(this._buttons.ChangePassword))},_addChangeApprovalPasswordMenuItem:function(b){rc.session.isPublic()||(this._buttons.ChangeApprovalPassword=this._makeMenu(v.changeApprovalPassword,a.hitch(this,this._showChangeApprovalPasswordDialog)),b.addChild(this._buttons.ChangeApprovalPassword),this.toggleChangeApprovalPasswordItem(!0))},
_addFontSizeMenu:function(a){if(E.getThemes()){var b=new m({baseClass:"user-tool-bar-submenu fontSizesSelectionItems"}),c;for(c in E.getFontSizes())b.addChild(new h({label:w[c.replace(/ |\(|\)/g,"").toLowerCase()],fontSize:c,onClick:function(){E.setActiveFontSize(window.document,this.fontSize)}}));b=new g({label:w.tbFontSize,baseClass:"dijitMenuItem fontSizePopupMenu",popup:b});q.set(b.arrowWrapper,"visibility","");a.addChild(b)}},_addLanguageMenu:function(b,f){var k=new m({baseClass:"user-tool-bar-submenu languageMenuItems"}),
l=t("locale");d.forEach(Object.keys(this.LANGUAGES),a.hitch(this,function(a){var b=this.LANGUAGES[a],c="";if(l===a||void 0===l&&"default"===a)c="checkIcon";var f=new Date;f.setYear(f.getFullYear()+100);f={path:"/",expires:f};t("defaultLocale",getLocale(),f);"default"===a&&(a=null);k.addChild(new h({label:b,locale:a,iconClass:c,onClick:function(){var b={path:"/"};null===a&&(b.expires=-1);t("locale",a,b);window.location.reload()}}))}));var n=new g({label:w.language,baseClass:"dijitMenuItem languagePopupMenuItem",
popup:k});q.set(n.arrowWrapper,"visibility","");b.addChild(n);f&&b.addChild(new c)},_addSetTimeMenuItem:function(b){rc.session.hasRole(rc.session.roles.setTime)&&""!==webview.pathUtil.getInfo(window.location.pathname).system&&b.addChild(new h({label:w.tbSystemTime,baseClass:"dijitMenuItem systemTimeMenuItem",iconClass:"",onClick:a.hitch(this,this.onShowSetSystemTime)}))},_addThemeMenu:function(a){if(E.getThemes()){delete E.themes["Kiosk optimized"];var b=new m({baseClass:"user-tool-bar-submenu themeSelectionItems"}),
c;for(c in E.getThemes())b.addChild(new h({label:w[c.replace(/ |\(|\)/g,"").toLowerCase()],baseClass:"dijitMenuItem "+c.replace(/ |\(|\)/g,"").toLowerCase()+"MenuItem",theme:c,iconClass:"",onClick:function(){E.setActiveStyleSheet(window.document,this.theme)}}));this._buttons.Themes=new g({label:w.tbTheme,baseClass:"dijitMenuItem themePopupMenu",popup:b});q.set(this._buttons.Themes.arrowWrapper,"visibility","");a.addChild(this._buttons.Themes)}},_addToggleToolbarButton:function(b){var c="false"===
t("tToolbar")?x.showToolbar:x.hideToolbar;this._buttons.ToggleToolbar=this._makeMenu(c,a.hitch(this,this.onToggleToolbar));b.addChild(this._buttons.ToggleToolbar)},_addToggleTreeButton:function(b){var c="false"===t("tTree")?x.showTree:x.hideTree;this._buttons.ToggleTree=this._makeMenu(c,a.hitch(this,this.onToggleTree));b.addChild(this._buttons.ToggleTree)},_gotoPage:function(a,b){var c=window.location.pathname.toLowerCase(),f=rc.rootPath.toLowerCase()+"admin",c=0===c.indexOf(f);b&&c?(c=C.getWindowLocationOrigin()+
rc.rootPath+encodeURIComponent(b)+"/"+C.mnemonicToUri(a),window.location.href=c):window.location=C.mnemonicToUri(a)},_makeHelpMenu:function(){null===this._helpMenu&&(this._helpMenu=new p({baseClass:this.baseClass+" dropDownMenu"}),this._helpMenu.addChild(new h({label:w.tbShowTips,baseClass:"dijitMenuItem showTooltipsMenuItem",iconClass:G.showing?"checkIcon":"",onClick:a.hitch(this,this._toggleTooltip)})),this._helpMenu.addChild(new h({label:x.tbUserGuide,baseClass:"dijitMenuItem userGuideMenuItem",
onClick:a.hitch(this,function(){var a=I.getContextSensitiveHelpLink();window.open(a,"_blank")})})),this._helpMenu.addChild(new h({label:y.title,baseClass:"dijitMenuItem aboutMenuItem",onClick:a.hitch(this,this.onShowWhatsNewDialog)})),this._helpMenu.addChild(new h({label:x.tbAbout,baseClass:"dijitMenuItem aboutMenuItem",onClick:a.hitch(this,this._showAboutDialog)})),this._helpMenu.addChild(new h({label:x.tbWebsiteLink,baseClass:"dijitMenuItem websiteLinkMenuItem",onClick:a.hitch(this,function(){window.open("https://www.reliablecontrols.com/",
"_blank")})})),this.addChild(new F({label:x.help,iconClass:"rcIcon helpIcon",baseClass:this.baseClass+" actionLink",popup:this._helpMenu})))},_makeMenu:function(a,b,c){a=new h({label:a});this.own(A(a.domNode,"click",b));k.toggle(a.domNode,"hidden",!0===c);return a},_makeOptionsForAdmin:function(){this._addChangePasswordMenuItem(this._optionsMenu);this._addChangeApprovalPasswordMenuItem(this._optionsMenu);this._buttons.Print=this._makeMenu(w.print,a.hitch(this,this.onPrint),!0);this._optionsMenu.addChild(this._buttons.Print);
this._optionsMenu.addChild(new c);rc.session._attributes.SiteMapArray.forEach(a.hitch(this,function(a){var b=new m({baseClass:"dijitMenuItem user-tool-bar-submenu MenuItem"});this._addAuditMenuItem(b,a);this._addAlarmsMenuItem(b,a);a=new g({label:a.siteName,popup:b});q.set(a.arrowWrapper,"visibility","");this._optionsMenu.addChild(a)}));this._optionsMenu.addChild(new c);this._addLanguageMenu(this._optionsMenu,!0);this._addToggleTreeButton(this._optionsMenu)},_makeOptionsForAdminBasic:function(){this._addChangePasswordMenuItem(this._optionsMenu);
this._addChangeApprovalPasswordMenuItem(this._optionsMenu);this._optionsMenu.addChild(new c);this._addLanguageMenu(this._optionsMenu,!0);this._addToggleTreeButton(this._optionsMenu)},_makeOptionsMenu:function(b){this._addChangePasswordMenuItem(this._optionsMenu);this._addChangeApprovalPasswordMenuItem(this._optionsMenu);this._buttons.Print=this._makeMenu(w.print,a.hitch(this,this.onPrint));this._optionsMenu.addChild(this._buttons.Print);this._buttons.Separator=new c;this._optionsMenu.addChild(this._buttons.Separator);
var f=this._addAuditMenuItem(this._optionsMenu,b);(f|=this._addAlarmsMenuItem(this._optionsMenu,b))&&this._optionsMenu.addChild(new c);this._addLanguageMenu(this._optionsMenu);K.isAdminPage()||(this._addThemeMenu(this._optionsMenu),this._addFontSizeMenu(this._optionsMenu));this._addSetTimeMenuItem(this._optionsMenu);this._optionsMenu.addChild(new c);this._addToggleToolbarButton(this._optionsMenu);this._addToggleTreeButton(this._optionsMenu);this._buttons.AlarmSeparator=new c;this._optionsMenu.addChild(this._buttons.AlarmSeparator);
k.toggle(this._buttons.AlarmSeparator.domNode,"hidden",!0);this._buttons.SyncAlarms=this._makeMenu(u.syncBacnetAlarms,a.hitch(this,this.onSyncAlarms),!0);this._optionsMenu.addChild(this._buttons.SyncAlarms);this._buttons.FetchAlarms=this._makeMenu(u.unackedAlarms,a.hitch(this,this.onFetchAlarms),!0);this._optionsMenu.addChild(this._buttons.FetchAlarms)},_showAboutDialog:function(){if(null===this.aboutDialog||null===this.aboutDialog.domNode.parentNode)this.aboutDialog=new B;this.aboutDialog.show()},
_showChangeApprovalPasswordDialog:function(){null===this._changeApprovalPasswordDialogContent&&(this._changeApprovalPasswordDialogContent=new H,this._changeApprovalPasswordDialog=new r({title:v.changeApprovalPassword,content:this._changeApprovalPasswordDialogContent,baseClass:"changePasswordDialogBox"}),this.own(A(this._changeApprovalPasswordDialogContent,"finished",a.hitch(this,function(){this._changeApprovalPasswordDialog.hide()})),A(this._changeApprovalPasswordDialog,"hide",a.hitch(this,function(){this._changeApprovalPasswordDialogContent.onHide()})),
b.after(this._changeApprovalPasswordDialog,"destroy",a.hitch(this,function(){this._changeApprovalPasswordDialogContent=this._changeApprovalPasswordDialog=null}))));this._changeApprovalPasswordDialog.show()},_showPasswordDialog:function(){null===this.changeDialogContent&&(this.changeDialogContent=new J,this.changeDialog=new r({title:x.changePass,content:this.changeDialogContent,baseClass:"changePasswordDialogBox"}),this.own(A(this.changeDialogContent,"finished",a.hitch(this,function(){this.changeDialog.hide()})),
A(this.changeDialog,"hide",a.hitch(this,function(){this.changeDialogContent.onHide()})),b.after(this.changeDialog,"destroy",a.hitch(this,function(){this.changeDialogContent=this.changeDialog=null}))));this.changeDialog.show()},_toggleTooltip:function(){var a=this._helpMenu.getChildren()[0];a.set("iconClass",0===a.get("iconClass").length?"checkIcon":"");a.get("iconClass").length?G.show():G.hide()}})})},"dijit/MenuBar":function(){define(["dojo/_base/declare","dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],
function(r,p,m,l){return r("dijit.MenuBar",m,{templateString:l,baseClass:"dijitMenuBar",popupDelay:0,_isMenuBar:!0,_orient:["below"],_moveToPopup:function(h){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,h)},focusChild:function(h){this.inherited(arguments);this.activated&&h.popup&&!h.disabled&&this._openItemPopup(h,!0)},_onChildDeselect:function(h){this.currentPopupItem==h&&(this.currentPopupItem=null,h._closePopup());this.inherited(arguments)},
_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()},_onDownArrow:function(h){this._moveToPopup(h)},_onUpArrow:function(){},onItemClick:function(h,c){!h.popup||!h.popup.isShowingNow||/^key/.test(c.type)&&c.keyCode===p.DOWN_ARROW?this.inherited(arguments):(h.focusNode.focus(),this._cleanUp(!0))}})})},"webview/widget/AboutDialog":function(){define("dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/string dojo/text!./templates/AboutDialog.html rc/_base/Error rc/_Widget rc/widget/Dialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return m("webview/widget/AboutDialog",[b,r,p,t],{templateString:n,draggable:!1,initialized:!1,rcStrings:h,webviewStrings:c,postCreate:function(){this.inherited(arguments);this.fetch()},show:function(){this.inherited(arguments);this.initialized||this.setUpOnClicks()},setUpOnClicks:function(){this.initialized=!0;this.own(g(dijit._underlay.domNode,"click",l.hitch(this,this.hide)),g(this.domNode,"click",l.hitch(this,this.hide)))},render:function(a){this.versionNumber.innerHTML=
c.rcwebview+" "+webview.version.toStringAll();this.licenseInfo.innerHTML="\x3cspan\x3e"+c.name+": "+a.customerName+"\x3c/span\x3e\x3cspan\x3e"+c.licenseSerial+a.serialNumber+"\x3c/span\x3e\x3cspan\x3e"+d.substitute(c.licenseAuthorized,[a.licensedSystems])+"\x3c/span\x3e\x3cspan\x3e"+c.licenseExpires+a.licenseExpiry+"\x3c/span\x3e";this.copyright.innerHTML=d.substitute(c.copyright2014X,[rc.buildYear])},fetch:function(){var b={type:"rest",method:"GET",path:"License",load:l.hitch(this,function(a){void 0!==
a.data&&null!==a.data&&this.render(a.data)}),error:l.hitch(this,function(b){this._onInitError(new a({name:h.loadFailed,message:c.failToLoadLicense,e:b}))})};rc.xhr.requestNow(b)}})})},"webview/widget/MenuBarItem":function(){define(["dijit/MenuItem","dojo/_base/declare","dojo/text!webview/widget/templates/MenuBarItem.html"],function(r,p,m){m=p("webview/widget/_MenuBarItemMixin",null,{templateString:m});r=p("webview/widget/MenuBarItem",[r,m],{});r._MenuBarItemMixin=m;return r})},"webview/widget/PopupMenuBarItem":function(){define("dijit/PopupMenuItem dijit/popup dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/has dojo/window ./MenuBarItem dojo/sniff".split(" "),
function(r,p,m,l,h,c,g,d){return m("webview/widget/PopupMenuBarItem",[r,d._MenuBarItemMixin],{_openPopup:function(d,a){var b=this.popup;p.open(l.delegate(d,{popup:this.popup,around:this.domNode}));a&&b.focus&&b.focus();if(c("touch")&&!c("ios")){var n=g.getBox(),k=h.getMarginBox(b._popupWrapper);h.setMarginBox(b._popupWrapper,{l:eval(k.l-n.l),t:eval(k.t-n.t)})}}})})},"webview/widget/passwords/ChangeApprovalPasswordDialog":function(){define(["dojo/_base/declare","dojo/dom-class","./_ChangePasswordMixin"],
function(r,p,m){return r("webview/widget/passwords/ChangeApprovalPasswordDialog",[m],{changePasswordUrl:"ChangeApprovalPassword",constructor:function(){this.templateContentStrings={newPasswordLabel:this.resetPasswordStrings.newApprovalPassword,newPasswordVerifyLabel:this.webviewStrings.verifyApprovalPassword}},validate:function(){var l=!0;this.currPass.get("value")===this.newPass.get("value")&&(this._validationFailedForNewPassword(),l=!1);return l},_validationFailedForNewPassword:function(){p.add(this.newPass.domNode,
"invalid");this.onError(this.resetPasswordStrings.loginMustNotMatchApproval)}})})},"webview/widget/passwords/_ChangePasswordMixin":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!webview/nls/resetPassword dojo/on dojo/query dojo/text!webview/widget/passwords/templates/ChangePasswordDialog.html dojo/topic dojox/html/entities rc/util/notices ../../util/util ../../xhrEnhanced".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y){return h("webview/widget/passwords/_ChangePasswordMixin",[p,r,m],{_IncorrectLoginCode:501,_LockedOutCode:507,_LockedOutRequiresAdminCode:509,_LoginMatchesApproval:504,_SuccessCode:200,_UnexpectedCode:508,changePasswordUrl:null,templateString:f,templateContentStrings:null,constructor:function(){this.webviewStrings=a;this.errorStrings=b;this.rcStrings=n;this.resetPasswordStrings=t},postCreate:function(){this._setupOnClicks()},clearFields:function(){this.currPass.set("value",
"");this.newPass.set("value","");this.verifyPass.set("value","")},onCancelClick:function(){z.widget.clear();this._onFinished()},onError:function(a){z.widget.clear();u.publish("sticky",{type:"error",message:a});this.emit("error",{message:a})},onFinished:function(){this.emit("finished")},onHide:function(){this.clearFields();this._clearWarnings()},onSaveClick:function(){z.widget.clear();this._saveChanges()},_changePassword:function(a){y.post(this.changePasswordUrl,{handleAs:"json",data:{userId:rc.session.getAttribute("userId"),
loginPassword:a.encryptedLogInPassword,newPassword:a.encryptedNewPassword}}).then(c.hitch(this,function(a){a.errStatus===this._SuccessCode?(this._onPasswordChangeSuccess(),this._onFinished()):a.errStatus===this._LockedOutCode||a.errStatus===this._LockedOutRequiresAdminCode?this._redirectLogin():this._displayErrorMessage(a)}),c.hitch(this,this._displayErrorMessage,{errStatus:this._UnexpectedCode,errMsg:"Rejected"}))},_clearWarnings:function(){var a=q(".invalid",this.dialogContent);l.forEach(a,function(a){d.remove(a,
"invalid")})},_displayErrorMessage:function(a){a.errStatus===this._IncorrectLoginCode?this._passwordInvalid("wrong"):a.errStatus===this._LoginMatchesApproval?this.validate():this._passwordInvalid("error")},_encryptPasswords:function(){var a=new g;this.own(a);x.getRSAKeys().then(c.hitch(this,function(b){var c=w.encode(this.currPass.get("value")),f=w.encode(this.newPass.get("value"));b={encryptedLogInPassword:x.encrypt(c,b),encryptedNewPassword:x.encrypt(f,b)};a.resolve(b)}));return a.promise},_onFinished:function(){this.clearFields();
this.onFinished()},_onPasswordChangeSuccess:function(){u.publish("alert",{type:"success",message:this.errorStrings.successfulSave})},_passwordInvalid:function(a){var b="";switch(a){case "wrong":d.add(this.currPass.domNode,"invalid");b=this.errorStrings.incorrectCurrPass;break;case "matching":d.add(this.newPass.domNode,"invalid");d.add(this.verifyPass.domNode,"invalid");b=this.errorStrings.pwDoNotMatch;break;case "length":d.add(this.newPass.domNode,"invalid");b=this.errorStrings.loginPassEmpty;break;
default:b=this.errorStrings.changeFailed,console.error(this.declaredClass+" - passwordInvalid(): Invalid reason",a)}this.onError(b)},_redirectLogin:function(){window.location=rc.loginURI},_saveChanges:function(){this._clearWarnings();this._validate()},_setupOnClicks:function(){this.own(k(this.saveButton,"click",c.hitch(this,this.onSaveClick)),k(this.cancelButton,"click",c.hitch(this,this.onCancelClick)))},_validate:function(){if(!1===this._validateEmptyFields())this.onError(this.errorStrings.loginPassEmpty);
else this.newPass.get("value")!==this.verifyPass.get("value")?this._passwordInvalid("matching"):!0===this.validate()&&this._encryptPasswords().then(c.hitch(this,function(a){this._changePassword(a)}))},_validateEmptyFields:function(){var a=!0;1>this.currPass.get("value").length&&(a=!1,d.add(this.currPass.domNode,"invalid"));1>this.newPass.get("value").trim().length&&(a=!1,d.add(this.newPass.domNode,"invalid"));return a}})})},"webview/widget/passwords/ChangePasswordDialog":function(){define(["dojo/_base/declare",
"./_ChangePasswordMixin"],function(r,p){return r("webview/widget/passwords/ChangePasswordDialog",[p],{changePasswordUrl:"ChangeLoginPassword",constructor:function(){this.templateContentStrings={newPasswordLabel:this.webviewStrings.newPass,newPasswordVerifyLabel:this.webviewStrings.confirmationPassword}},validate:function(){return!0}})})},"webview/widget/WarningDialog":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/WarningDialog.html dojo/on ./WarningDialogEnums dijit/Dialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return l("webview/widget/WarningDialog",[p,r,m],{baseClass:"warningDialog",buttonClass:"webviewButton",closeButtonVisible:!0,content:null,text:"",templateString:n,title:"",type:b.types.binary,widgetsInTemplate:!0,binaryAllOptions:{all:d.all,cancel:d.cancel},binaryConfirmOptions:{yes:d.yes,no:d.no},binaryOptions:{yes:d.yes,cancel:d.cancel},binarySaveOptions:{save:d.save,cancel:d.cancel},deleteCancelOptions:{deleteOption:d.rcbDelete,cancel:d.cancel},multiOptions:{one:d.justOne,
all:d.all,cancel:d.cancel},saveDiscardOptions:{save:d.save,discard:d.discard},saveOptions:{yes:d.yes,no:d.no,cancel:d.cancel},informativeOptions:{ok:d.okay},_setBaseClassAttr:{node:"dialog",type:"attribute",attribute:"class"},_setCloseButtonVisibleAttr:function(a){a="boolean"===typeof a?a:!0;this.dialog.set("closable",a);this._set("closeButtonVisible",a)},_setContentAttr:function(a){g.place(a,this.dialogContent,"only")},_setTextAttr:{node:"dialogText",type:"innerHTML"},_setTitleAttr:{node:"dialog",
type:"attribute",attribute:"title"},_setTypeAttr:function(a){c.add(this.dialogButtons,"hidden");c.remove(this.dialogButtonsOneOrYes.domNode,"hidden");c.remove(this.dialogButtonsAllOrNo.domNode,"hidden");c.remove(this.dialogButtonsCancel.domNode,"hidden");this.set("closeButtonVisible",!1);switch(a){case b.types.multi:this.dialogButtonsOneOrYes.set("label",this.multiOptions.one);this.dialogButtonsAllOrNo.set("label",this.multiOptions.all);this.dialogButtonsCancel.set("label",this.multiOptions.cancel);
break;case b.types.binary:this.dialogButtonsOneOrYes.set("label",this.binaryOptions.yes);c.add(this.dialogButtonsAllOrNo.domNode,"hidden");this.dialogButtonsCancel.set("label",this.binaryOptions.cancel);break;case b.types.binarySave:this.dialogButtonsOneOrYes.set("label",this.binarySaveOptions.save);c.add(this.dialogButtonsAllOrNo.domNode,"hidden");this.dialogButtonsCancel.set("label",this.binarySaveOptions.cancel);break;case b.types.binaryAll:this.dialogButtonsOneOrYes.set("label",this.binaryAllOptions.all);
c.add(this.dialogButtonsAllOrNo.domNode,"hidden");this.dialogButtonsCancel.set("label",this.binaryAllOptions.cancel);break;case b.types.binaryConfirm:this.dialogButtonsOneOrYes.set("label",this.binaryConfirmOptions.yes);this.dialogButtonsAllOrNo.set("label",this.binaryConfirmOptions.no);c.add(this.dialogButtonsCancel.domNode,"hidden");break;case b.types.deleteCancel:this.dialogButtonsOneOrYes.set("label",this.deleteCancelOptions.deleteOption);this.dialogButtonsAllOrNo.set("label",this.deleteCancelOptions.cancel);
c.add(this.dialogButtonsCancel.domNode,"hidden");break;case b.types.save:this.dialogButtonsOneOrYes.set("label",this.saveOptions.yes);this.dialogButtonsAllOrNo.set("label",this.saveOptions.no);this.dialogButtonsCancel.set("label",this.saveOptions.cancel);break;case b.types.saveDiscard:this.dialogButtonsOneOrYes.set("label",this.saveDiscardOptions.save);this.dialogButtonsAllOrNo.set("label",this.saveDiscardOptions.discard);c.add(this.dialogButtonsCancel.domNode,"hidden");break;case b.types.informative:this.dialogButtonsOneOrYes.set("label",
this.informativeOptions.ok);c.add(this.dialogButtonsAllOrNo.domNode,"hidden");c.add(this.dialogButtonsCancel.domNode,"hidden");this.set("closeButtonVisible",!0);break;case b.types.blank:c.add(this.dialogButtonsOneOrYes.domNode,"hidden");c.add(this.dialogButtonsAllOrNo.domNode,"hidden");c.add(this.dialogButtonsCancel.domNode,"hidden");this.set("closeButtonVisible",!0);break;default:console.error(this.declaredClass+" - postCreate: Invalid dialog type ",a)}c.remove(this.dialogButtons,"hidden")},close:function(){this.dialog.hide()},
buildRendering:function(){this.inherited(arguments);this.own(this.dialogButtonsOneOrYes.on("click",h.hitch(this,function(){this.onOneOrYesEvent()})));this.own(this.dialogButtonsAllOrNo.on("click",h.hitch(this,function(){this.onAllOrNoEvent()})));this.own(this.dialogButtonsCancel.on("click",h.hitch(this,function(){this.onCancelEvent()})))},onOneOrYesEvent:function(){this.onClose(b.returnValues.oneOrYes)},onAllOrNoEvent:function(){this.onClose(b.returnValues.allOrNo)},onCancelEvent:function(){this.onClose(b.returnValues.none)},
onClose:function(a){this.dialog.hide();return a},open:function(){this.dialog.show()},destroy:function(){this.inherited(arguments)}})})},"webview/widget/WarningDialogEnums":function(){define([],function(){return{returnValues:{oneOrYes:"yes",allOrNo:"no",none:"none"},types:{binary:"binary",binaryAll:"binaryAll",binaryConfirm:"binaryConfirm",binarySave:"binarySave",deleteCancel:"deleteCancel",informative:"informative",multi:"multi",save:"save",saveDiscard:"saveDiscard",blank:"blank"}}})},"webview/widget/whatsNew/_WhatsNewMixin":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/aspect","./WhatsNewDialog"],function(r,p,m,l){return r("webview/widget/whatsNew/_WhatsNewMixin",[],{whatsNewDialog:null,_getOptOutVersion:function(){var h=rc.session.getAttribute("whatsNewOptOutVersion");return this._parseVersionNumber(h)},_loadWhatsNew:function(){rc.session.getNewLogin()&&(this._needsWhatsNew()&&this._showWhatsNewDialog(),rc.session.clearNewLogin())},_optedOutOfCurrentVersion:function(){var h=this._getOptOutVersion();return h.major===webview.version.major&&
h.minor===webview.version.minor&&h.patch===webview.version.patch},_needsWhatsNew:function(){var h=!1;webview.mode.isDevelopmentMode()||(h=!this._optedOutOfCurrentVersion());return h},_parseVersionNumber:function(h){h=h.match(/^([0-9]+).([0-9]+).([0-9]+)/)||[1,1,1,1];return{major:Number(h[1]),minor:Number(h[2]),patch:Number(h[3])}},_showWhatsNewDialog:function(){null===this.whatsNewDialog&&(this.whatsNewDialog=new l({optOutVersion:this._getOptOutVersion(),currentVersion:webview.version}),this._supportingWidgets.push(this.whatsNewDialog),
this.own(m.after(this.whatsNewDialog,"destroy",p.hitch(this,function(){this.whatsNewDialog=null}))));this.whatsNewDialog.show()}})})},"webview/widget/whatsNew/WhatsNewDialog":function(){define("dijit/_WidgetsInTemplateMixin dijit/Dialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!../../nls/whatsNew dojo/on dojo/text!./templates/WhatsNewDialog.html dojox/widget/Rotator ./ContentPane ./PaneIndicator ./_WhatsNewContent ../../admin/_ErrorMessageMixin ../../xhrEnhanced dijit/form/Button dojox/widget/rotator/Pan".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return l("webview/widget/WhatsNew/WhatsNewDialog",[q,p,f,r],{currentVersion:null,optOutVersion:null,displayedContentList:null,rotatorInstance:null,startOfNewContent:0,templateString:a,whatsNewStrings:d,_helpLink:"Welcome",_panesForRotator:null,_savedOptOutVersion:null,constructor:function(){this.displayedContentList=[];this._panesForRotator=[];this._indexToIndicatorMap={}},postCreate:function(){this.inherited(arguments);this.displayedContentList=[];var a=
0;m.forEach(this.contentList,function(b){this._hasContentVersionBeenOptedOut(b)&&(this.startOfNewContent=a+1);var c=new t(b);this._panesForRotator.push({className:"pane",innerHTML:c.domNode.innerHTML});this.displayedContentList.push(b);this._createIndicator(b,a++)},this);2>this.contentList.length&&c.add(this.carouselContainer,"hidden");this.own(n(this.optOutButton,"click",h.hitch(this,this._onOptOut)))},show:function(){var a=this.inherited(arguments).then(h.hitch(this,function(){this._createRotator();
this._goToPane(this.startOfNewContent);this.own(n(dijit._underlay,"click",h.hitch(this,this.hide)))})),b=rc.session.getAttribute("userId");u.get("WhatsNew",{handleAs:"json",query:{userId:b}}).then(h.hitch(this,function(a){this.savedOptOutVersion=a.data.optOutVersion}),h.hitch(this,function(a){console.error("Unexpected error: "+a.Message,a)}));return a},_createIndicator:function(a,b){var c=new k({active:!1,title:a.title});this._indexToIndicatorMap[b]=c;this.own(n(c,"click",h.hitch(this,this._goToPane,
b)));g.place(c.domNode,this.rotatorIndicator,"last")},_createRotator:function(){this.rotatorInstance||(this.rotatorInstance=new b({transition:"dojox.widget.rotator.pan",panes:this._panesForRotator},this.rotator))},_goToNext:function(){var a=Number(this.rotatorInstance.idx)+1;a>this.rotatorInstance.panes.length-1&&(a=0);this._goToPane(a)},_goToPane:function(a){a>this.contentList.length-1&&(a=this.contentList.length-1);Object.values(this._indexToIndicatorMap).filter(function(a){return a.get("active")}).forEach(function(a){a.set("active",
!1)});this._helpLink=this.contentList[a].helpURL;this._indexToIndicatorMap[a].set("active",!0);this.rotatorInstance.go(a)},_goToPrevious:function(){var a=Number(this.rotatorInstance.idx)-1;0>a&&(a=this.rotatorInstance.panes.length-1);this._goToPane(a)},_hasContentVersionBeenOptedOut:function(a){var b=!1;a.version.major<this.currentVersion.major?b=!0:a.version.major===this.currentVersion.major&&a.version.minor<this.currentVersion.minor?b=!0:a.version.major===this.currentVersion.major&&a.version.minor===
this.currentVersion.minor&&a.version.patch<=this.currentVersion.patch&&(b=!0);return b},_onOptOut:function(){var a=this.currentVersion.major+"."+this.currentVersion.minor+"."+this.currentVersion.patch;u.put("WhatsNew",{handleAs:"json",data:{userId:rc.session.getAttribute("userId"),optOutVersion:a}}).then(h.hitch(this,function(a){a.errStatus===this.SuccessCode?this.hide():this._displayError(a)}),h.hitch(this,function(a){this._displayError({errStatus:this.UnexpectedCode,errMSG:a.message})}))},_onReadMore:function(){window.open("Help/Index/"+
this._helpLink,"_blank")}})})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){p=p("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(c,
k){l.mixin(this,c);var m=this,u=m.transition,p=m._transitions={},v=m._idMap={},r=m.transitionParams=eval("({ "+m.transitionParams+" })");k=m._domNode=g.byId(k);m._domNodeContentBox=a.getContentBox(k);var w={left:0,top:0},E=function(a,b){};m.id=k.id||(new Date).getTime();"static"==b.get(k,"position")&&b.set(k,"position","relative");p[u]=l.getObject(u);p[u]||(p[m.transition="dojox.widget.rotator.swap"]=l.getObject("dojox.widget.rotator.swap"));r.duration||(r.duration=500);h.forEach(m.panes,function(a){n.create("div",
a,k)});var B=m.panes=[];f("\x3e *",k).forEach(function(a,c){var g={node:a,idx:c,params:l.mixin({},r,eval("({ "+(d.get(a,"transitionParams")||"")+" })"))},k=g.trans=d.get(a,"transition")||m.transition;h.forEach(["id","title","duration","waitForEvent"],function(b){g[b]=d.get(a,b)});g.id&&(v[g.id]=c);p[k]||(p[k]=l.getObject(k))||E(k,g.trans=m.transition);w.position="absolute";w.display="none";if(null==m.idx||d.get(a,"selected"))null!=m.idx&&b.set(B[m.idx].node,"display","none"),m.idx=c,w.display="";
b.set(a,w);f("\x3e script[type^\x3d'dojo/method']",a).orphan().forEach(function(a){var b=d.get(a,"event");b&&(g[b]=q._functionFromScript(a))});B.push(g)});m._controlSub=t.subscribe(m.id+"/rotator/control",l.hitch(m,this.control))},destroy:function(){h.forEach([this._controlSub,this.wfe],function(a){a.remove()});n.destroy(this._domNode)},next:function(){return this.go(this.idx+1)},prev:function(){return this.go(this.idx-1)},go:function(a){var c=this,f=c.idx,d=c.panes,g=d.length,k=c._idMap[a];c._resetWaitForEvent();
a=null!=k?k:a||0;a=a<g?0>a?g-1:a:0;if(a==f||c.anim)return null;var h=d[f],n=d[a];b.set(h.node,"zIndex",2);b.set(n.node,"zIndex",1);var q={current:h,next:n,rotator:c};if(f=c.anim=c._transitions[n.trans](l.mixin({rotatorBox:c._domNodeContentBox},q,n.params))){var u=new m,p=n.waitForEvent,F=r.after(f,"onEnd",function(){b.set(h.node,{display:"none",left:0,opacity:1,top:0,zIndex:0});F.remove();c.anim=null;c.idx=a;if(h.onAfterOut)h.onAfterOut(q);if(n.onAfterIn)n.onAfterIn(q);c.onUpdate("onAfterTransition");
p||(c._resetWaitForEvent(),u.callback())},!0);c.wfe=p?t.subscribe(p,function(){c._resetWaitForEvent();u.callback(!0)}):null;c.onUpdate("onBeforeTransition");if(h.onBeforeOut)h.onBeforeOut(q);if(n.onBeforeIn)n.onBeforeIn(q);f.play();return u}},onUpdate:function(a,b){t.publish(this.id+"/rotator/update",a,this,b||{})},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(a){var b=l._toArray(arguments),c=this;b.shift();c._resetWaitForEvent();c[a]&&((b=c[a].apply(c,
b))&&b.addCallback(function(){c.onUpdate(a)}),c.onManualChange(a))},resize:function(b,c){var f=this._domNodeContentBox={w:b,h:c};a.setContentSize(this._domNode,f);h.forEach(this.panes,function(b){a.setContentSize(b.node,f)})},onManualChange:function(){}});l.setObject("dojox.widget.rotator.swap",function(a){return new c.Animation({play:function(){b.set(a.current.node,"display","none");b.set(a.next.node,"display","");this._fire("onEnd")}})});return p})},"webview/widget/whatsNew/ContentPane":function(){define(["dijit/_TemplatedMixin",
"dijit/_WidgetBase","dojo/_base/declare","dojo/text!./templates/ContentPane.html"],function(r,p,m,l){return m("webview/widget/ContentPane",[p,r],{templateString:l,_setVersionStringAttr:{node:"versionContainer",attribute:"innerHTML"},_setTextAttr:{node:"textContainer",attribute:"innerHTML"},_setTitleAttr:{node:"titleContainer",attribute:"innerHTML"},constructor:function(){}})})},"webview/widget/whatsNew/PaneIndicator":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare",
"dojo/dom-class","dojo/text!./templates/PaneIndicator.html"],function(r,p,m,l,h){return m("webview/widget/WhatsNew/PaneIndicator",[p,r],{active:!1,templateString:h,_setActiveAttr:function(c){l.toggle(this.domNode,"active",c);this._set("active",c)}})})},"webview/widget/whatsNew/_WhatsNewContent":function(){define(["dojo/_base/declare","dojo/i18n!../../nls/all","dojo/i18n!../../nls/whatsNew"],function(r,p,m){return r("webview/widget/_WhatsNewContent",[],{contentList:[{imageClass:"nav-trees-whats-new",
title:m.navTreesTitle,text:m.navTreesContent,helpURL:"Trees",version:{major:3,minor:14,patch:1},versionString:"3.14.1"}]})})},"webview/admin/_ErrorMessageMixin":function(){define(["dojo/_base/declare","dojo/i18n!rc/nls/all","dojo/i18n!webview/nls/errorMessages","../util/util"],function(r,p,m,l){return r("webview/admin/_ErrorMessageMixin",null,{BACnetErrorCode:508,ErrorMessageMap:{200:p.success,403:m.accessForbidden,501:m.cannotAccessSystem,502:m.userHasNoAccess,504:m.unexpectedError,505:m.siteDoesNotExist,
506:m.insufficientPriviledges,510:m.operationInProgress,511:m.userCancelled,513:m.rcwvsError,522:m.descriptorIsPredefined,517:m.systemDoesNotExist},OperationInProgressCode:510,BACnetError:512,SuccessCode:200,UnexpectedCode:504,_getErrorMessage:function(h,c){var g="";"undefined"!==typeof this.ErrorMessageMap[h]?g=this.ErrorMessageMap[h]:h===this.BACnetErrorCode?g=this._decodeBACnetError(c):(g=this.errorStrings.unexpectedError,console.error("Unexpected Error: ",c));return g},_decodeBACnetError:function(h){return l.decodeBACnetError(h)}})})},
"dojox/widget/rotator/Pan":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/dom-style dojo/_base/fx dojo/fx".split(" "),function(r,p,m,l,h,c){function g(a,b){var d=b.next.node,g=b.rotatorBox,n=a%2,f=n?"left":"top",g=(n?g.w:g.h)*(2>a?-1:1),n={},m={};l.set(d,"display","");n[f]={start:0,end:-g};m[f]={start:g,end:0};return c.combine([h.animateProperty({node:b.current.node,duration:b.duration,properties:n,easing:b.easing}),h.animateProperty({node:d,duration:b.duration,properties:m,
easing:b.easing})])}function d(a,b){l.set(a,"zIndex",b)}var n={pan:function(a){var b=a.wrap,h=a.rotator.panes,k=h.length,n=k,f=a.current.idx,u=a.next.idx,w=Math.abs(u-f),z=Math.abs(k-Math.max(f,u)+Math.min(f,u))%k,x=f<u,y=3,v=[],A=[],C=a.duration;if(!b&&!x||b&&(x&&w>z||!x&&w<z))y=1;if(a.continuous){a.quick&&(C=Math.round(C/(b?Math.min(z,w):w)));d(h[f].node,n--);for(b=3==y;;){w=f;b?++f>=k&&(f=0):0>--f&&(f=k-1);w=h[w];z=h[f];d(z.node,n--);v.push(g(y,m.mixin({easing:function(a){return a}},a,{current:w,
next:z,duration:C})));if(b&&f==u||!b&&f==u)break;A.push(z.node)}a=c.chain(v);var E=p.connect(a,"onEnd",function(){p.disconnect(E);r.forEach(A,function(a){l.set(a,{display:"none",left:0,opacity:1,top:0,zIndex:0})})});return a}return g(y,a)},panDown:function(a){return g(0,a)},panRight:function(a){return g(1,a)},panUp:function(a){return g(2,a)},panLeft:function(a){return g(3,a)}};m.mixin(m.getObject("dojox.widget.rotator"),n);return n})},"webview/admin/widget/TreePaneFlyout":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dojo/text!./templates/TreePaneFlyout.html ./DeviceFlyoutContent ./SystemFlyoutContent".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return l("webview/admin/widget/TreePaneFlyout",[p,r],{templateString:q,baseClass:"treePaneFlyout",_animationTime:250,_currentItemIdentifier:-1,_currentWidth:0,_flyoutContent:null,_showing:!1,_minOpenWidth:260,_maxWidth:260,_minWidth:0,forceHide:function(){this._showing&&this._hide()},resize:function(){try{var a=g.byId("rcSystemHeader"),c=g.byId("rcSystemFooter"),f=a?a.clientHeight:0,d=document.body.clientHeight-((f||0)+((c?c.clientHeight:0)||0)),k=g.byId("rcSystemNav_splitter"),
h=g.byId("rcSystemNav").clientWidth+(k?k.clientWidth:0);b.set(this.domNode,{top:f+"px",height:d+"px",left:h+"px"})}catch(C){}},toggle:function(a){var b=a.widgetId;"device"===a.widget.toLowerCase()&&(b=a.systemId+"|"+b);this._showing&&b===this._currentItemIdentifier?this._hide():this._show(a)},_animate:function(){n.remove(this.domNode,"hidden");for(var a=b.get(g.byId("titleBarIconAndTextLabel"),"width"),f=g.byId("titleBarIconAndTextDevice"),d=b.get(f,"width"),l=k(".titleBarRowIcon",this.domNode),q=
0,m=0;m<l.length;m++)q+=l[m].clientWidth;this._maxWidth=Math.max(this._minOpenWidth,a+q);this._maxWidth=this._findWidestOptionItem();0<a?b.set(f,"width",Math.min(d,a)+1+"px"):b.set(f,"width",this._maxWidth-q+"px");h.animateProperty({node:this.domNode,duration:this._animationTime,properties:{width:{start:this._currentWidth,end:this._maxWidth}},onEnd:c.hitch(this,function(){this._showing=!0;this._currentWidth=this._maxWidth})}).play()},_findWidestOptionItem:function(){for(var a=k(".flyoutOption",this.domNode),
b=this._maxWidth,c=0;c<a.length;c++){var f=k(".iconBorder",a[c])[0].clientWidth,d=k(".flyoutIcon",a[0])[0].clientWidth,f=2*k(".iconBorder",a[c])[0].offsetLeft+(f-d),f=k(".flyoutOptionLine",a[c])[0].clientWidth+f;f>b&&(b=f)}return b},_hide:function(){h.animateProperty({node:this.domNode,duration:this._animationTime,properties:{width:{start:this._currentWidth,end:this._minWidth}},onEnd:c.hitch(this,function(){n.add(this.domNode,"hidden");this._showing=!1;this._currentWidth=this._minWidth})}).play()},
_show:function(h){b.set(g.byId("titleBarIconAndTextDevice"),"width","auto");this._flyoutContent&&this._flyoutContent.destroyRecursive(!0);"device"===h.widget.toLowerCase()?this._flyoutContent=new f({device:h.widgetId,deviceModel:h.deviceModel,site:h.site,supportedWorksheets:h.supportedWorksheets,system:h.systemId,protocolType:h.protocolType,supportsBACnet:h.supportsBACnet,iconClass:"flyoutTitleIcon svg-"+h.deviceModel.replace(/3rd/i,"third-party").toLowerCase()+"Icon",title:h.name}):"system"===h.widget.toLowerCase()&&
(this._flyoutContent=new u({site:h.site,system:h.widgetId,iconClass:"flyoutTitleIcon svg-system",title:h.name}));this._currentItemIdentifier=this._flyoutContent.get("identifier");h=this._flyoutContent.get("contentNode");m.forEach(k("li",h),c.hitch(this,function(a){this.own(t(a,"click",c.hitch(this,this._hide)))}));a.place(h,this.selectionOptions,"only");var l=this.baseClass+"SelectionOptions";0===h.children.length?d.set(this.selectionOptions,"class","emptyOptions "+l):d.set(this.selectionOptions,
"class","selectionOptions "+l);d.set(this.iconNode,"class",this._flyoutContent.get("iconClass"));d.set(this.titleBarDevice,"innerHTML",this._flyoutContent.get("title"));d.set(this.titleBarLabel,"innerHTML",this._flyoutContent.get("titleBarLabel"));this.resize();this._animate()}})})},"webview/admin/widget/DeviceFlyoutContent":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!webview/nls/all dojo/i18n!webview/nls/panelfiles dojo/on rc/_base/util ./_FlyoutContent ./FlyoutOption ../../util/util".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return p("webview/admin/widget/DeviceFlyoutContent",[n],{device:-1,deviceModel:null,protocolType:null,supportsBACnet:!1,supportedWorksheets:null,titleBarLabel:h.deviceActions,_mneToUrl:{stls:"#trendlogworksheet/View",mtls:"#trendlogworksheet/View","not-cls":"#notificationClasses",prgs:"#programsworksheet"},_worksheetOrder:null,_worksheetPosition:{stls:0,mtls:1,"not-cls":2,prgs:3},constructor:function(){this.supportedWorksheets=[]},buildRendering:function(){this.inherited(arguments);
this._worksheetOrder=Array(4);for(var b=0;b<this._worksheetOrder.length;b++)this._worksheetOrder[b]=null;this.supportedWorksheets=r.filter(this.supportedWorksheets,m.hitch(this,function(a){return"PRGS"===a.mne&&!rc.session.hasRole(rc.session.roles2.programsWorksheet,!0)||("STLS"===a.mne||"MTLS"===a.mne)&&!rc.session.hasRole(rc.session.adminRoles.editTrendlogs,!1)||"NOT-CLS"===a.mne&&!rc.session.hasRole(rc.session.roles2.notChg,!0)?!1:this._mneToUrl.hasOwnProperty(a.mne.toLowerCase())}));this.supportedWorksheets=
r.filter(this.supportedWorksheets,m.hitch(this,function(a){return this._mneToUrl.hasOwnProperty(a.mne.toLowerCase())}));this._setWorksheetLabels();0<this.supportedWorksheets.length&&(!this.protocolType||"rcp"!==this.protocolType)&&!0===this.supportsBACnet?(this.contentNode=l.create("ul"),r.forEach(this.supportedWorksheets,m.hitch(this,function(b){var c=new a({displayText:b.label,iconClass:"svg-"+b.mne.toLowerCase()+"Icon"});this.own(g(c.domNode,"click",m.hitch(this,function(){this._goToWorksheet(b.mne)})));
this._mapWorksheetsOrder(c,b.mne.toLowerCase())})),r.forEach(this._worksheetOrder,m.hitch(this,function(a){null!==a&&l.place(a.domNode,this.contentNode,"last")})),this._hasBackupRestorePermissions()&&(b=new a({displayText:c.backupRestore,listItemClass:"divider",iconClass:"svg-backup-restore-icon"}),this.own(g(b.domNode,"click",m.hitch(this,this._gotoBackupRestore))),l.place(b.domNode,this.contentNode,"last"))):rc.session.hasRole(rc.session.roles2.panFileBackup,!0)||rc.session.hasRole(rc.session.roles2.panFileRestore,
!0)?(b=new a({displayText:c.backupRestore,iconClass:"svg-backup-restore-icon"}),this.own(g(b.domNode,"click",m.hitch(this,this._gotoBackupRestore))),l.place(b.domNode,this.contentNode,"last")):this.contentNode=l.create("div",{innerHTML:h.noSupportedDeviceActions})},_getIdentifier:function(){return this.system+"|"+this.device},_hasBackupRestorePermissions:function(){return!(0===this.supportedWorksheets.length||!rc.session.hasRole(rc.session.roles2.panFileBackup,!0)&&!rc.session.hasRole(rc.session.roles2.panFileRestore,
!0))},_gotoBackupRestore:function(){if(b.isAdminPage())window.location.hash="#panelfiles?site\x3d"+this.site+"\x26system\x3d"+this.system+"\x26device\x3d"+this.device;else{var a=b.getObfuscatedHash("#"+this.device+"PAN-FILE");window.location=this._getClientUrl(a)}},_goToWorksheet:function(a){var b=m.hitch(this,function(a){var b=this._getWidgetURLFromMne(a),b=b+("?site\x3d"+this.site+"\x26system\x3d"+this.system+"\x26device\x3d"+this.device+"\x26mne\x3d"+a);window.location=d.getWindowLocationOrigin()+
rc.adminUrl+b});rc.setupWizard?rc.setupWizard.warn().then(m.hitch(this,function(a,c){c.stopWizard&&rc.setupWizard.stop();c.navigate&&b(a)},a)):b(a)},_getWidgetURLFromMne:function(a){return this._mneToUrl[a.toLowerCase()]},_mapWorksheetsOrder:function(a,b){this._worksheetOrder[this._worksheetPosition[b]]=a},_setWorksheetLabels:function(){r.forEach(this.supportedWorksheets,m.hitch(this,function(a){if(a.mne)switch(a.mne.toLowerCase()){case "mtls":a.label=h.multipointTrendLogs;break;case "stls":a.label=
h.singlePointTrendLogs;break;case "not-cls":a.label=h.notificationClasses;break;case "prgs":a.label=h.programs}}))}})})},"webview/admin/widget/_FlyoutContent":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/text!./templates/_FlyoutContent.html","rc/_base/util"],function(r,p,m,l,h){return r("webview/admin/widget/_FlyoutContent",[m,p],{contentNode:null,iconClass:"",identifier:-1,site:-1,system:-1,templateString:l,title:"",titleBarLabel:"",postCreate:function(){this.identifier=
this._getIdentifier()},_getClientUrl:function(c){var g=this.site,d=rc.session._attributes.SiteMapArray.find(function(c){return c.siteId===g});return h.getWindowLocationOrigin()+rc.rootPath+d.sitePath+"/"+this.system+"/"+c},_getIdentifier:function(){throw"Must be implemented by child class";}})})},"webview/admin/widget/FlyoutOption":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare","dojo/text!./templates/FlyoutOption.html"],function(r,p,m,l){return m("webview/admin/widget/FlyoutOption",
[p,r],{templateString:l,displayText:"",iconClass:"",listItemClass:""})})},"webview/admin/widget/SystemFlyoutContent":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!webview/nls/all dojo/i18n!webview/nls/panelfiles dojo/on rc/_base/util ./FlyoutOption ../../util/util ./_FlyoutContent".split(" "),function(r,p,m,l,h,c,g,d,n,a){return r("webview/admin/widget/SystemFlyoutContent",[a],{buildRendering:function(){this.inherited(arguments);if(this._hasSettingsPermissions()){var a=
new d({displayText:l.settings,iconClass:"svg-options-icon",listItemClass:"site-settings"});this.own(c(a.domNode,"click",p.hitch(this,this._goToSettings)));m.place(a.domNode,this.contentNode,"last")}this._hasBackupRestorePermissions()&&(a=new d({displayText:h.backupRestore,iconClass:"svg-backup-restore-icon"}),this.own(c(a.domNode,"click",p.hitch(this,this._goToBackupRestore))),m.place(a.domNode,this.contentNode,"last"));a=new d({displayText:l.pointReports,iconClass:"svg-point-report-icon"});this.own(c(a.domNode,
"click",p.hitch(this,this._goToPointReports)));m.place(a.domNode,this.contentNode,"last")},_getIdentifier:function(){return this.system},_hasSettingsPermissions:function(){return rc.session.hasRole(rc.session.adminRoles.admin)},_goToSettings:function(){var a="#system?site\x3d"+this.site+"\x26system\x3d"+this.system;window.location=g.getWindowLocationOrigin()+rc.adminUrl+a},_hasBackupRestorePermissions:function(){return rc.session.hasRole(rc.session.roles2.panFileBackup,!0)||rc.session.hasRole(rc.session.roles2.panFileRestore,
!0)},_goToBackupRestore:function(){if(n.isAdminPage())window.location.hash="#panelfiles?site\x3d"+this.site+"\x26system\x3d"+this.system;else{var a=n.getObfuscatedHash("#PAN-FILE");window.location=this._getClientUrl(a)}},_goToPointReports:function(){if(n.isAdminPage())window.location.hash="#pointreports?site\x3d"+this.site+"\x26system\x3d"+this.system;else{var a=n.getObfuscatedHash("#PRPS");window.location=this._getClientUrl(a)}}})})},"webview/reliable/Alarm":function(){define("dgrid/Grid dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/OnDemandGrid dgrid/Selection dojo/_base/declare dojo/_base/lang dojo/cookie dojo/Deferred dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/string dojo/text!./_alarm/templates/Alarm.html rc/bacnet/io/Number rc/bacnet/io/service/GetEnrollmentSummary rc/reliable/Alarm rc/sys/job ./_alarm/AlarmItemFilter ./_alarm/AlarmWorksheetCommon ../sys/device ../util/AlarmUtil ../util/util ../widget/ColumnHider ../widget/dGridExtensions/dGridExcelExporterMixin ../widget/WarningDialog ../widget/WarningDialogEnums dijit/layout/BorderContainer dijit/layout/ContentPane ./_alarm/AlarmToolbar dojox/validate/web".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H){return c("webview/reliable/Alarm",[z,v,D],{allSelected:!1,deviceNames:null,templateString:f,webviewStrings:t,_alarmFilter:null,_contextFilter:null,_defaultAlarmColumns:{},_filteredSystems:[],constructor:function(){this._contextFilter=JSON.parse(sessionStorage.getItem("alarmContextFilter"));null!=this._contextFilter&&(this._alarmFilter=new y(this._contextFilter));this._enforceChangeApproval=rc.session.enforceChangeApproval},clearAlarm:function(){var a=
this._getSelectedRows(),b=new n;this.own(b);this.allSelected?this._buildConfirmDialog(b):b.resolve();b.then(g.hitch(this,this._editAlarms,0,a))},clearContext:function(){},fetch:function(a){this._stopSync();if(!this._beginUpdate())return null;this.deviceNames=A;a=this.deviceNames.loadOnce();a.always(g.hitch(this,function(){var a=this.cacheEnabled;this.cacheEnabled=!1;this._fetchDef&&this._fetchDef.cancel();this._fetchDef=this._retryHandler.notifyRetry({action:g.hitch(this,this._fetch),retryMsg:b.communicationProblem+
" "+b.retryingIn,failMsg:q.substitute(b.communicationFail,[window.location.href]),tries:3});this._fetchDef.then(g.hitch(this,function(a){this.onInitSuccess();this._endUpdate();return a}),g.hitch(this,function(a){this._endUpdate();a=this.safeError(a,{name:q.substitute(b.xNotFound,[b.rc_reliable_Alarm]),message:this._replace(b.couldNotLoad)+" "+b.objNotFound,suggestion:t.objNotFoundFix});this._onInitError(a)}));this._fetchDef.always(g.hitch(this,function(){this.cacheEnabled=a}));return this._fetchDef}));
return a},fetchFresh:function(a){var c;a||(a=0);this._stopSync();if(!this._beginUpdate())return null;this.deviceNames=A;c=this.deviceNames.loadOnce();c.always(g.hitch(this,function(){var c=this.cacheEnabled;this.cacheEnabled=!1;this._fetchDef=this._fetchRefresh();this._fetchDef.then(g.hitch(this,function(a){this.onInitSuccess();this._endUpdate();return a}),g.hitch(this,function(c){this._endUpdate();3<=a?(c=this.safeError(c,{name:q.substitute(b.xNotFound,[b.rc_reliable_Alarm]),message:this._replace(b.couldNotLoad)+
" "+b.objNotFound,suggestion:t.objNotFoundFix}),this._onInitError(c)):this.fetchFresh(++a)}));this._fetchDef.always(g.hitch(this,function(){this.cacheEnabled=c}));return this._fetchDef}));return c},fetchUnackedAlarms:function(){var a=[];if(0<this._filteredSystems.length)a=this._filteredSystems;else for(var b in this.deviceNames.data)a.push(this.deviceNames.data[b].systemId);x.loadArrayOfSystems(a).then(g.hitch(this,function(){for(var b,c=0;c<a.length;c++)for(var f in x.adminData[a[c]].data)f.match(/DEV/)&&
(b=f.split("DEV")[0],x.hasFlag_SiteContext(f,"ServicesSupport1",8,a[c])&&rc.xhr.request({gid:"ALARMP",type:"bacnet",s:new w({device:b,systemId:a[c]},{af:new u(2,9)}),silentError:!0}))}))},formatGridDataValue:function(a,b){var c="";return c="action"===b&&null!==a[b]?C.getInnerText(this.inherited(arguments)):this.inherited(arguments)},selectAllNone:function(a){this.selectAll(a)},setToolBarMenus:function(a){rc.session.hasRole(rc.session.roles.bacnetAdvChg)?(a.AlarmOptions=!0,this.own(k(this.userToolBar,
"syncAlarms",g.hitch(this,this.syncBacnet))),this.own(k(this.userToolBar,"fetchAlarms",g.hitch(this,this.fetchUnackedAlarms)))):a.AlarmOptions=!1;this.inherited(arguments)},syncBacnet:function(a){var b=new n;this.own(b);try{if(!this._beginUpdate())return b.resolve(!0),b.promise;rc.AlarmLoader.syncBacnet(null).then(g.hitch(this,function(a){b.resolve(a)}));this.onInitSuccess();this._endUpdate()}catch(I){b.reject(Error("Error in rc.reliable.alarm.syncBacnet"))}return b.promise},_addColumnToStructure:function(a,
b){var c=this._defaultAlarmColumns[b];a&&"undefined"!==typeof a[b]?(c=g.mixin(c,{width:a[b].width,hidden:a[b].hidden}),this._cols[a[b].index]=c):this._cols.push(c)},_animateLoadButton:function(){this._startAnimation(this._loadButton)},_autoLoadAlarms:function(a){this[a]();this._loadCache();this._grid.clearSelection();this._toolbar.set("isSelectAll",!0)},_buildDefaultAlarmColumns:function(){0===Object.keys(this._defaultAlarmColumns).length&&(this._defaultAlarmColumns={AlarmTimeCol:{field:"time",label:a.alarmTime,
id:"AlarmTimeCol",className:"alarmTimeCell",formatter:g.hitch(this,function(a,b){return this._alarmConfig.formatTime(a,b,"time")})},AlarmTypeCol:{field:"type",label:a.alarmType,id:"AlarmTypeCol",className:"alarmTypeCell",formatter:g.hitch(this._alarmConfig,this._alarmConfig.formatType)},AlarmMessageCol:{field:"messageText",label:a.alarmMessage,id:"AlarmMessageCol",className:"alarmMessageCell",formatter:g.hitch(this._alarmConfig,this._alarmConfig.formatMessage)},AlarmStateCol:{field:"state",label:a.state,
id:"AlarmStateCol",className:"alarmStateCell"},AlarmPriorityCol:{field:"priority",label:a.alarmPriority,id:"AlarmPriorityCol",className:"alarmPriorityCell",formatter:g.hitch(this,this._formatAlarmPriority)},AlarmSourceCol:{field:"source",label:a.alarmSource,id:"AlarmSourceCol",className:"alarmSourceCell",formatter:g.hitch(this._alarmConfig,this._alarmConfig.formatAlarmSource)},AlarmAckCol:{field:"timeAck",label:a.alarmTimeAck,id:"AlarmAckCol",className:"alarmTimeAckCell",formatter:g.hitch(this,this._alarmConfig.formatTime),
hidden:!0},AlarmTimeResetCol:{field:"timeReset",label:a.alarmTimeReset,id:"AlarmTimeResetCol",className:"alarmTimeResetCell",formatter:g.hitch(this,this._alarmConfig.formatTime),hidden:!0},AlarmActionCol:{field:"action",label:a.action,id:"AlarmActionCol",className:"alarmActionCell",formatter:g.hitch(this,this._alarmConfig.formatAction),hidden:!0},AlarmSystemCol:{field:"systemName",label:a.system,id:"AlarmSystemCol",className:"alarmSystemCell",sortable:!0}})},_buildConfirmDialog:function(b){this._confirmDlg||
(this._confirmDlg=new F({title:a.warning,text:a.confirmClearAlarms,type:H.types.binaryConfirm}));this._confirmDlg.on("close",g.hitch(this,function(a){switch(a){case H.returnValues.oneOrYes:b.resolve();break;case H.returnValues.allOrNo:b.reject();break;default:console.error(this.declaredClass+' - _confirmDlg.on("close"): Unknown choice',a),b.reject()}}));this._confirmDlg.open()},_connectGrid:function(){this.inherited(arguments);this.own(k(this._grid,[".dgrid-column-AlarmSourceCol:dgrid-sort"],g.hitch(this,
this._customColumnSort)));this.own(k(this._grid,[".dgrid-column-AlarmMessageCol:dgrid-sort"],g.hitch(this,this._customColumnSort)))},_constructGrid:function(a){null===this._grid&&(this._grid=new (c([r,l,h,B,p,m]))({region:"center",sort:null!==a?a.sort:this.defaultSort,store:this._gridStore,columns:this._cols,isPagingGrid:!1,maxRowsPerPage:128,bufferRows:16,maxEmptySpace:10,selectionMode:this._canEdit?"extended":"none",allowTextSelection:!1,noDataMessage:this._noDataMsg},this.gridNode),this._grid.startup(),
this.container.addChild(this.gridContainer))},_createToolbar:function(){this.own(k(this._toolbar,"systemFilter",g.hitch(this,function(a){this._filteredSystems=a;rc.AlarmLoader.setFilteredSystems(a);this.fetch()})));""!==webview.pathUtil.currentSiteInfo.system&&(this._filteredSystems=[Number(webview.pathUtil.currentSiteInfo.system)],rc.AlarmLoader.setFilteredSystems(webview.pathUtil.currentSiteInfo.system));this._setHasFilter();this.own(k(this._toolbar,"toggleColumnsClicked",g.hitch(this,this._positionAndShowColumnSelector)),
k(this._toolbar,"clearFilterClicked",g.hitch(this,this._onClearFilter)),k(this._toolbar,"exportClicked",g.hitch(this,this.exportCsv)));this._canEdit&&(this.own(k(this._toolbar,"selectAllClicked",g.hitch(this,this.selectAllNone)),k(this._toolbar,"ackClicked",g.hitch(this,this._autoLoadAlarms,"ackAlarm")),k(this._toolbar,"clearClicked",g.hitch(this,this._autoLoadAlarms,"clearAlarm"))),this._clearButton=this._toolbar.getButton("clear"),this._ackButton=this._toolbar.getButton("ack"),this._clearFilterButton=
this._toolbar.getButton("clearFilter"));this._toolbar.set("canEdit",this._canEdit);if(this._loadButton=this._toolbar.getButton("load").domNode)this._loadEventHandle&&this._loadEventHandle.remove(),this._loadEventHandle=k(this._toolbar,"loadClicked",g.hitch(this,this.fetchFresh)),this.own(this._loadEventHandle);this.connectExportButton();return this._toolbar},_customColumnSort:function(a){a.preventDefault();var b={source:this._sortSource,messagetext:this._sortMessage},c=null,f=a.sort[0],c=null,d=!1,
c="undefined"!==typeof this._grid.sortObject?this._grid.sortObject:this._grid.get("sort")[0];c.attribute===f.attribute&&(d=!1===c.descending);b.hasOwnProperty(f.attribute.toLowerCase())?(c=b[f.attribute.toLowerCase()],this._grid.sortObject=f,this._grid.sortObject.descending=d,this._grid.set("sort",g.hitch(this,c,d)),this._grid.updateSortArrow(a.sort,!1)):console.error(this.declaredClass+" - _customColumnSort(): Unexpected sort attribute",f)},_disableButtons:function(a){!1!==a?Object.values(this._toolbar.getPageButtons()).forEach(g.hitch(this,
function(a){a.set("previousState",a.get("disabled"));a.set("disabled",!0)})):this._enableButtons()},_enableButtons:function(){Object.values(this._toolbar.getPageButtons()).forEach(g.hitch(this,function(a){var b=a.get("previousState");a.set("disabled",!1!==b)}))},_fetchRefresh:function(){var a=new n;this._fetchIndex=rc.AlarmLoader.addFetch(null,g.hitch(this,function(b){this._connectData();this._mergeStats();this._loadCache();a.resolve(b);return b}),g.hitch(this,function(b){a.reject(b)}),!0);return a.promise},
_filterAlarmItems:function(a){return null!=this._alarmFilter?a.filter(g.hitch(this,function(a){return this._alarmFilter.doesAlarmMatchFilter(a)})):a},_endUpdate:function(){this.inherited(arguments);this._clearFilterButton.set("disabled",0===this._filteredSystems.length&&null===this._contextFilter)},_getGridStructure:function(a){this._buildDefaultAlarmColumns();this._cols=[];Object.keys(this._defaultAlarmColumns).forEach(g.hitch(this,this._addColumnToStructure,a));this._cols=this._cols.filter(function(a){return"undefined"!==
typeof a})},_hasPermissions:function(){return rc.session.hasRole(rc.session.roles.viewAlarms)},_mixCookieStructure:function(){var a=d("al"),b={};if(a&&a)try{b=JSON.parse(a)}catch(I){console.error(this.declaredClass+" - _mixCookieStructure(): Error using saved settings",I),d("al",null,{expires:-1,path:webview.pathUtil.currentSiteInfo.sitePath}),window.location.reload()}a&&void 0!==b.sort||(b.sort=this.defaultSort);return b},_onClearFilter:function(){this._alarmFilter&&(C.clearContextData(),this._alarmFilter=
this._contextFilter=null,this._filteredSystems=[],this._setHasFilter(),this._grid.store.setData([]),this._timeChanged=null,this.fetchFresh());this._setTitle()},_putAlarmIntoGrid:function(a){var b=!0;null!=this._alarmFilter&&(b=this._alarmFilter.doesAlarmMatchFilter(a));b&&this._grid.store.put(a)},_resetLoadButton:function(){this._loadEventHandle&&this._loadEventHandle.remove();this._loadEventHandle=k(this._toolbar,"loadClicked",g.hitch(this,this.fetchFresh));this.own(this._loadEventHandle)},_setButtonState:function(a){if(this._canEdit){var b=
0>=a.length,c=!0;if(!b){var f;a.forEach(g.hitch(this,function(a){(f=this._grid.store.get(a))&&0===f.acknowledged&&(c=!1)}))}this._ackButton.set("disabled",c);this._clearButton.set("disabled",b)}},_setHasFilter:function(){this._toolbar.set("hasFilter",null!==this._alarmFilter,0<this._filteredSystems.length)},_setTitle:function(a){this._alarmWorksheetCommonSetTitle(a).then(g.hitch(this,function(a){this._toolbar&&"undefined"!==typeof a&&null!==a&&this._toolbar.set("title",a);this.onSetTitle(a)}))},_sortMessage:function(a,
b,c){b=this._alarmConfig.formatMessage(b.messageText,b);c=this._alarmConfig.formatMessage(c.messageText,c);return a?E.alphaNumericSort(b,c):-1*E.alphaNumericSort(b,c)},_sortSource:function(a,b,c){return a?E.alphaNumericSort(b.source.toString(),c.source.toString()):-1*E.alphaNumericSort(b.source.toString(),c.source.toString())},_startSyncAnimation:function(){this._syncAnimation=this._startAnimation(this._syncButton.domNode)},_stopSync:function(){this._syncButton&&(this.syncDef&&1!=this.syncDef.fired&&
this.syncDef.cancel(),rc.AlarmLoader.stopSync())},_updateCache:function(){this._mergeStats();this.cacheEnabled?(this._loadEventHandle&&this._loadEventHandle.remove(),this._loadEventHandle=k(this._toolbar,"loadClicked",g.hitch(this,this._loadCache)),this.own(this._loadEventHandle),this._animateLoadButton()):this._loadCache()},_updateGridStore:function(a){a=this._filterAlarmItems(a);this._grid.store.setData(a)}})})},"webview/reliable/_alarm/AlarmItemFilter":function(){define(["dojo/_base/declare","rc/bacnet/enums"],
function(r,p){return r("webview/reliable/_alarm/AlarmItemFilter",[],{_bacnetDeviceId:null,_rcpPanel:null,_systemId:null,constructor:function(m){this._bacnetDeviceId=Number(m.deviceId);this._systemId=Number(m.system);m.rcpPanel&&(this._rcpPanel=m.rcpPanel.toString().toUpperCase())},doesAlarmMatchFilter:function(m){return m.systemId===this._systemId?m.isBacnet?this._matchBACnetFilter(m.sourceIoObject):this._matchRCPPanelFilter(m.source):!1},_matchBACnetFilter:function(m){return m.t===p.objectTypes.OBJID_DEVICE&&
m.i===this._bacnetDeviceId},_matchRCPPanelFilter:function(m){return m.toString().toUpperCase()===this._rcpPanel}})})},"webview/reliable/_alarm/AlarmWorksheetCommon":function(){define(["dojo/_base/lang","dojo/Deferred","dijit/_WidgetBase","dojo/_base/declare","dojo/dom-style"],function(r,p,m,l,h){return l("webview/reliable/_alarm/AlarmWorksheetCommon",[m],{_positionAndShowColumnSelector:function(){var c=this._toolbar.getButton("toggleColumn");h.set(this._grid.hiderMenuNode,"top",c.buttonNode.getBoundingClientRect().bottom+
"px");this._grid._toggleColumnHiderMenu(c)},_alarmWorksheetCommonSetTitle:function(c){var g=new p;this.title=c||this.title||"";var d="",h=this.title+this._getFilteredDeviceName();webview.pathUtil.getSystemName().then(r.hitch(this,function(a){var b=this._getFilteredDeviceName();b?("undefined"!==typeof a&&null!==a&&(d+=a+"/"),h=this.title+(""!==d||""!==b?" - ":"")+d+b):h=this.title;g.resolve(h)}),r.hitch(this,function(){return g.resolve(h)}));return g.promise},_getFilteredDeviceName:function(){var c=
"",g=JSON.parse(sessionStorage.getItem("alarmContextFilter"));g&&(c+=g.deviceName);return c}})})},"webview/widget/ColumnHider":function(){define("dgrid/util/misc dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/has dojo/i18n!dgrid/extensions/nls/columnHider dojo/on put-selector/put xstyle/css!dgrid/css/extensions/ColumnHider.css".split(" "),function(r,p,m,l,h,c,g,d,n,a){return m("webview/widget/ColumnHider",null,{hiderMenuNode:null,hiderToggleNode:null,
i18nColumnHider:d,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_activeGrid:null,_bodyListener:null,_renderHiderMenuEntries:function(){var a=this.subRows,c=!0,d,g,f,h;delete this._columnHiderFirstCheckbox;f=0;for(d=a.length;f<d;f++)for(h=0,g=a[f].length;h<g;h++){this._renderHiderMenuEntry(a[f][h]);var l=!0!==a[f][h].hidden&&!0!==a[f][h].unhidable;c&&l&&(c=!1,this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[a[f][h].id])}},_renderHiderMenuEntry:function(b){var d=b.id,
g=r.escapeCssIdentifier(d,"-"),h,f,m;b.hidden&&(b.hidden=!1,this._hideColumn(d),b.hidden=!0);if(!b.unhidable){h=a("div.dgrid-hider-menu-row");f=this.domNode.id+"-hider-menu-check-"+g;var w=l.hitch(this,function(a){var b=!m.get("checked");m.set("checked",b);this.contentNode&&n.emit(this.hiderMenuNode,"columnChange",{columnId:a,isHide:!b})},d);this._listeners.push(n(h,"click",w));m=this._columnHiderCheckboxes[d]=new p({value:g,onClick:w});a(h,m.domNode);c.create("label",{innerHTML:b.label||b.field||
""},h,"last");m.id=f;a(this.hiderMenuNode,h);m.set("checked",!b.hidden)}},renderHeader:function(b){function c(a){a.stopPropagation()}if(b)return this.inherited(arguments);var d=this,g=this.hiderMenuNode,f=this.hiderToggleNode,h;this.inherited(arguments);if(g){for(h in this._columnHiderRules)this._columnHiderRules[h].remove();g.innerHTML=""}else f=this.hiderToggleNode=a(this.domNode,"button.ui-icon.dgrid-hider-toggle[type\x3dbutton][aria-label\x3d"+this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(n(f,
"click",function(a){d._toggleColumnHiderMenu(a)})),g=this.hiderMenuNode=a("div.dgrid-hider-menu[role\x3ddialog][aria-label\x3d"+this.i18nColumnHider.popupLabel+"]"),g.id=this.id+"-hider-menu",this._listeners.push(n(g,"keyup",function(a){27===(a.charCode||a.keyCode)&&(d._toggleColumnHiderMenu(a),f.focus())})),g.style.display="none",a(this.domNode,g),this._listeners.push(n(g,"columnChange",function(a){d._updateColumnHiddenState(a.columnId,a.isHide)})),this._listeners.push(n(g,"mousedown",c),n(f,"mousedown",
c)),this._bodyListener||(this._bodyListener=n.pausable(document,"mousedown",function(a){this._activeGrid&&this._activeGrid._toggleColumnHiderMenu(a)}),this._bodyListener.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);for(var a in this._columnHiderRules)this._columnHiderRules[a].remove()},getColumnHiderMenuState:function(){return this._hiderMenuOpened},left:function(a,c){return this.right(a,-c)},right:function(a,
c){a.element||(a=this.cell(a));for(var b=this.inherited(arguments),d=a;b.column.hidden;){b=this.inherited(arguments,[b,0<c?1:-1]);if(d.element===b.element)return a;d=b}return b},isColumnHidden:function(a){return!!this._columnHiderRules[a]},_toggleColumnHiderMenu:function(a){var b=this._hiderMenuOpened,c=this.hiderMenuNode,d=this.domNode,f;a&&h.toggle(a.domNode||a,"open",!b);c.style.display=b?"none":"";b?c.style.height="":(c.offsetHeight>d.offsetHeight-12&&(c.style.height=d.offsetHeight-12+"px"),(f=
this._columnHiderFirstCheckbox.domNode)&&f.focus());this._bodyListener[b?"pause":"resume"]();this._activeGrid=b?null:this;this._hiderMenuOpened=!b},_hideColumn:function(a){var b="#"+r.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-";this._columnHiderRules[a]||(this._columnHiderRules[a]=r.addCssRule(b+r.escapeCssIdentifier(a,"-"),"display: none;"))},_showColumn:function(a){this._columnHiderRules[a]&&(this._columnHiderRules[a].remove(),delete this._columnHiderRules[a])},_updateColumnHiddenState:function(a,
c){this[c?"_hideColumn":"_showColumn"](a);this.columns[a].hidden=c;n.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[a],hidden:c,bubbles:!0});this.resize()},toggleColumnHiddenState:function(a,c){"undefined"===typeof c&&(c=!this._columnHiderRules[a]);this._updateColumnHiddenState(a,c);this._columnHiderCheckboxes[a].set("checked",!c)}})})},"webview/widget/dGridExtensions/dGridExcelExporterMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojox/html/entities dojo/on dojo/request/iframe".split(" "),
function(r,p,m,l,h,c,g,d){return p("webview/widget/dGridExtensions/dGridExcelExporterMixin",[],{_exportPath:"ExportExcel",_exportColumnStructure:null,connectExportButton:function(){this._enableExcelExportButton();this.own(g(this._toolbar,"excelExportClicked",m.hitch(this,this.exportGridAsExcel)));rc.session.enforceChangeApproval&&this._disableCSVExportButton()},exportGridAsExcel:function(){if(!this._grid.store)return exportDeferred.reject("Grid does not contain a store"),exportDeferred.promise;var c=
this._grid.store.query(this._grid.query,this.getGridQueryOptions(this._grid));c instanceof dojo.Deferred?c.then(m.hitch(this,this._exportExcel)):this._exportExcel(c)},_disableCSVExportButton:function(){this._toolbar.exportButton.set("disabled",!0);l.add(this._toolbar.exportButton.domNode,"hidden")},_enableExcelExportButton:function(){this._toolbar.excelButton.set("disabled",!1);l.remove(this._toolbar.excelButton.domNode,"hidden")},_exportExcel:function(g){d._currentDfd=null;d._fireNextRequest();d.post(this._exportPath,
{handleAs:"document",data:{documentName:this.fullTitle||this._toolbar.title||this.title,gridData:c.encode(JSON.stringify(this._parseGridData(g))),siteId:this.site}})},_parseGridData:function(c,a){for(var b=[],d="",g=[],h=this._getVisibleColumns(this._grid),f=Object.keys(h),l=0;l<f.length;++l){d=this._grid.column(h[f[l]]).label;if(null===d||void 0===d)d="";g.push(d)}b.push(g);r.forEach(c,m.hitch(this,this._parseVisibleGridData,b,f,h));return b},_parseVisibleGridData:function(c,a,b,d){tempStringArray=
[];var g=!1;"undefined"!==typeof d.name&&d.name===this.PlaceHolderName&&(g=!0);for(var h=0;h<=a.length;++h)formattedValue="",!g&&d.hasOwnProperty(a[h])&&(formattedValue=this.formatGridDataValue(d,a[h],b)),tempStringArray.push(formattedValue||"");c.push(tempStringArray)},formatGridDataValue:function(c,a,b){var d="";b=this._grid.columns[b[a]];return d="exporter"in b?b.exporter(c[a],c):"editor"in b?"logtype"===a?[this.webviewStrings.polled,this.webviewStrings.cov,this.webviewStrings.triggered][parseInt(c[a])]:
"increment"===a?1===c.logtype?c.increment:"":"interval"===a?0===c.logtype?c.interval:"":"enable"===a?c[a]?"TRUE":"FALSE":"useHalfFloat"===a?c[a]?"2":"4":c[a]:"renderCell"in b?b.renderCell(c,c[a],h.create("span")).innerText:"formatter"in b?b.formatter(c[a],c):c[a]}})})},"webview/reliable/_alarm/AlarmToolbar":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/request/xhr dojo/store/Memory dojo/text!./templates/AlarmToolbar.html rc/_base/util ../../widget/ClientWidgetToolbar ../../widget/form/SystemFilterSelector ../../widget/toolbarMixins/_ContextFilteringToolbarMixin ../../widget/ToolbarButton".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return p("webview/reliable/_alarm/AlarmToolbar",[q,u],{deselectAllClass:"svg-deselect-all-icon",hasFilter:!1,isSelectAll:!0,rcStrings:g,selectAllClass:"svg-select-all-icon",templateString:t,webviewStrings:d,_elevatedButtons:["ack","clear","selectAll"],_currentFilteredSystems:[],postCreate:function(){this.inherited(arguments);this._createSystemSelectorStore().then(m.hitch(this,this._createSystemSelector))},_setCanEditAttr:function(a){r.forEach(this._elevatedButtons,
function(b){(b=this.getButton(b))&&h.toggle(b.domNode,"hidden",!a)},this);this._set("canEdit",a)},_setEnforceChangeApprovalAttr:function(a){var b=a&&rc.session.hasRole(rc.session.roles.alarmDisable);h.toggle(this.clearFilterButton.domNode,"hidden",b);this.disableClearFilter(b);this._set("enforceChangeApproval",a)},_setHasFilterAttr:function(a,b){this.disableClearFilter(!a&&!b);this.systemSelector&&this._toggleSystemSelectorDisabled(a||1>=this.systemSelector.store.data.length);this._set("hasFilter",
a)},_setIsSelectAllAttr:function(a){h.replace(this.selectAllButton.toolbarButtonIcon,a?this.selectAllClass:this.deselectAllClass,a?this.deselectAllClass:this.selectAllClass);this.selectAllButton.set("titleStr",a?this.webviewStrings.selectAll:this.webviewStrings.deselectAll);this._set("isSelectAll",a)},onAckClicked:function(){},onClearClicked:function(){},onExcelExportClicked:function(){},onExportClicked:function(){},onLoadClicked:function(){},onToggleColumnsClicked:function(){},onSelectAllClicked:function(a){},
onSystemFilter:function(a){},_createButtonMap:function(){this._buttons={load:this.loadButton,ack:this.ackButton,clear:this.clearButton,"export":this.exportButton,excelExport:this.excelButton,clearFilter:this.clearFilterButton,toggleColumn:this.toggleColumnsButton,selectAll:this.selectAllButton}},_createConnections:function(){this.inherited(arguments);this.own(n(this.excelButton.domNode,"click",m.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),n(this.loadButton.domNode,
"click",m.hitch(this,function(){if(!1===this.loadButton.get("disabled"))this.onLoadClicked()})),n(this.ackButton.domNode,"click",m.hitch(this,function(){if(!1===this.ackButton.get("disabled")&&this.canEdit)this.onAckClicked()})),n(this.clearButton.domNode,"click",m.hitch(this,function(){if(!1===this.clearButton.get("disabled")&&this.canEdit)this.onClearClicked()})),n(this.exportButton.domNode,"click",m.hitch(this,function(){this.onExportClicked()})),n(this.toggleColumnsButton.domNode,"click",m.hitch(this,
function(){this.onToggleColumnsClicked()})),n(this.selectAllButton.domNode,"click",m.hitch(this,function(){!1===this.selectAllButton.get("disabled")&&this.canEdit&&this._toggleSelectAllClicked()})))},_createSystemSelector:function(a){var b=[];-1!==this.system?(b=[a.get(this.system)],this._currentFilteredSystems=[this.system]):this._currentFilteredSystems=[];this.systemSelector=new f({store:a,labelAttr:"name",value:b});this._toggleSystemSelectorDisabled(this.hasFilter||1>=a.data.length);c.place(this.systemSelector.domNode,
this.systemFilterContainer,"first");this.own(n(this.systemSelector,"change",m.hitch(this,this._onSystemFilterChanged)))},_createSystemSelectorStore:function(){var c=new l;this.own(c);var f=a.get("GetPermittedSystems",{handleAs:"json",preventCache:!0,query:{filterBySite:!0}});this.own(f);f.then(m.hitch(this,function(a){a=new b({data:a});c.resolve(a)}),m.hitch(this,c.reject));return c.promise},_getResizeConstants:function(){this.inherited(arguments);this._resizeConstants+=this.systemFilterContainer.clientWidth},
onClearFilterClicked:function(){this._onSystemFilterChanged([[]]);this.systemSelector.set("value",[])},_onSystemFilterChanged:function(a){k.arraysAreSame(a[0],this._currentFilteredSystems)||(this._currentFilteredSystems=a[0],this.onSystemFilter(this._currentFilteredSystems))},_toggleSelectAllClicked:function(){this.onSelectAllClicked(this.isSelectAll);this.set("isSelectAll",!this.isSelectAll)},_toggleSystemSelectorDisabled:function(a){this.systemSelector.set("disabled",a);h.toggle(this.systemSelector.domNode,
"hidden",a)}})})},"webview/widget/form/SystemFilterSelector":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!../../nls/all dojo/on dojo/string ./MultiSelector".split(" "),function(r,p,m,l,h,c){return r("webview/widget/form/SystemFilterSelector",[c],{required:!1,webviewStrings:m,_getMenuItemForOption:function(){var c=this.inherited(arguments);this.own(l(c.checkboxNode,"change",p.hitch(this,this._updateDisplay)));return c},_setDisplay:function(c){c=0<c.length?c.length+" "+this.webviewStrings.systems+
" "+this.webviewStrings.selected:h.substitute(this.webviewStrings.filterByX,[this.webviewStrings.systems]);this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline "'+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+c+"\x3c/span\x3e"},_updateDisplay:function(){this._setDisplay(this.get("value"))}})})},"webview/widget/form/MultiSelector":function(){define("dijit/form/Select dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on ./DropDownMultiMenu ./MultiMenuItem".split(" "),
function(r,p,m,l,h,c,g,d,n){return m("webview/widget/form/MultiSelector",[r],{baseClass:"rcSelectBox",multiple:!0,required:!0,_getValueAttr:function(){return this.dropDown.get("value")},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=l.isArrayLike(a)?p.map(a,this._getNewValueObject):l.isObject(a)?[a]:[{value:a}];a=p.filter(this.getOptions(a),function(a){return a&&void 0!==a.value&&null!==a.value});var c=this.getOptions()||[];
this.multiple||a[0]&&a[0].value||!c.length||(a[0]=c[0]);p.forEach(c,function(b){b.selected=p.some(a,function(a){return a.value===b.value})});var d=p.map(a,function(a){return a.value});"undefined"===typeof d||0<d.length&&"undefined"===typeof d[0]||(c=p.map(a,function(a){return a.label}),this._setDisplay(c),this.dropDown&&this.dropDown.set("value",a),this.defer(l.hitch(this,function(){this._handleOnChange([this.multiple?d:d[0],b]);this._updateSelection();h.set(this.valueNode,"value",this.get("value"));
this._refreshState()})))}},isValid:function(){var a=this.get("value");return"undefined"!==typeof a[0]?!this.required||this._allItemsInStore(a):!this.required},refreshItems:function(){this.store&&this.store.query().forEach(l.hitch(this,function(a){this._getMenuItemForOption(this._getNewValueObject(a))}))},_allItemsInStore:function(a){for(var b=0<a.length,c=0;c<a.length;++c)if("undefined"===typeof this.store.get(a[c].type)){b=!1;break}return b},_fillContent:function(){this.options||(this.options=[]);
this.value?"string"===typeof this.value&&this._set("value",this.value.split(", ")):this._set("value",this._getValueFromOpts());this.dropDown=new d({id:this.id+"_menu",parentWidget:this});this.refreshItems();this.own(g(this.dropDown,"blur",l.hitch(this,this._setValue)));c.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){a=new n({option:a,value:a.value,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,
"\x26lt;"):a.label)||this.emptyLabel,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});this.dropDown.addItemToMap(a);return a},_getNewValueObject:function(a){return{label:a.name,value:a.id}},_getValueFromOpts:function(){var a=this.getOptions()||[];return a.length?p.map(p.filter(a,function(a){return a.selected}),function(a){return a.item})||[]:""},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a)||
this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline "'+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a.join(", ")+"\x3c/span\x3e"},_setValue:function(){this.set("value",this.dropDown.get("value"))}})})},"webview/widget/form/DropDownMultiMenu":function(){define(["dijit/form/Select","dojo/_base/declare"],function(r,p){return p("webview/widget/form/DropDownMultiMenu",[r._Menu],{_widgetMap:{},_getValueAttr:function(){return Object.values(this._widgetMap).filter(function(m){if("undefined"!==
typeof m.checkboxNode)return m.checkboxNode.get("checked")}).map(function(m){return m.option.item})},_setValueAttr:function(m){this._removeSelection();for(var l=0;l<m.length;++l)"undefined"!==typeof this._widgetMap[m[l].value]&&"undefined"!==typeof this._widgetMap[m[l].value].checkboxNode&&this._widgetMap[m[l].value].checkboxNode.set("checked",!0);this._set("value",m)},addItemToMap:function(m){this._widgetMap[m.value]=m},onItemClick:function(){},_removeSelection:function(){Object.values(this._widgetMap).forEach(function(m){"undefined"!==
typeof m.checkboxNode&&m.checkboxNode.set("checked",!1)})},destroy:function(){this._widgetMap={};this.inherited(arguments)}})})},"webview/widget/form/MultiMenuItem":function(){define("dijit/MenuItem dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/on dojo/text!./templates/MultiMenuItem.html dijit/form/CheckBox".split(" "),function(r,p,m,l,h,c,g){return m("webview/widget/form/MultiMenuItem",[r,p],{label:"",templateString:g,_setDisabledAttr:function(c){this.checkboxNode.set("disabled",
c);this._set("disabled",c)},_setIconClassAttr:null,_setLabelAttr:function(c){this._set("label",c);var d="",a;a=c.search(/{\S}/);if(0<=a){var d=c.charAt(a+1),b=c.substr(0,a);c=c.substr(a+3);a=b+d+c;c=b+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+d+"\x3c/span\x3e"+c}else a=c;this.domNode.setAttribute("aria-label",a+" "+this.accelKey);this.labelNode.innerHTML=c;this._set("shortcutKey",d)},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,"click",l.hitch(this,function(c){"td"===
c.target.tagName.toLowerCase()&&this.checkboxNode.set("checked",!this.checkboxNode.get("checked"))})));h.set(this.labelNode,"for",this.checkboxNode.id)}})})},"webview/widget/toolbarMixins/_ContextFilteringToolbarMixin":function(){define(["dijit/_WidgetBase","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/on"],function(r,p,m,l,h){return p("webview/widget/toolbarMixins/_ContextFilteringToolbarMixin",[r],{_setEnforceChangeApprovalAttr:function(c){if(!this.clearFilterButton)throw"Inheriting class must contain a clearFilterButton";
var g=c&&!rc.session.isSiteAdminUser();l.toggle(this.clearFilterButton.domNode,"hidden",g);this.disableClearFilter(g);this._set("enforceChangeApproval",c)},disableClearFilter:function(c){if(!this.clearFilterButton)throw"Inheriting class must contain a clearFilterButton";c||rc.session.enforceChangeApproval&&!rc.session.isSiteAdminUser()?this.clearFilterButton.set("disabled",!0):this.clearFilterButton.set("disabled",!1)},onClearFilterClicked:function(){},_createConnections:function(){this.own(h(this.clearFilterButton.domNode,
"click",m.hitch(this,function(){if(!this.clearFilterButton.get("disabled"))this.onClearFilterClicked()})))}})})},"webview/widget/AlarmLoader":function(){define("dojo/_base/array dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/errorMessages dojo/json dojo/promise/all dojo/string dojo/topic rc/bacnet/io/Array rc/bacnet/io/Date rc/bacnet/io/DateTime rc/bacnet/io/Number rc/bacnet/io/ReliableAlarm rc/bacnet/io/ReliableCurrentAlarms rc/bacnet/io/ReliableDeleteAlarms rc/bacnet/io/service/AcknowledgeAlarm rc/bacnet/io/service/ConfirmedPrivateTransfer rc/bacnet/io/service/UnconfirmedPrivateTransfer rc/bacnet/io/Time rc/sys/desc rc/util/encoding/base16 rc/util/encoding/base64 rc/widget/AlarmLoader webview/bacnet/io/DeviceObjectReference webview/util/AlarmUtil ../bacnet/Object".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H){p.mixin(B,{ERROR_GENERAL:{success:200,authenticationFailed:410,forbidden:403,cannotAccessSystem:501,noAccess:502,userNotEnabled:503,noAdminAccess:504,encryptionFailed:506,userDoesNotExist:507,unknown:508},filteringSystems:"",_loadPageTimer:null,setFilteredSystems:function(a){this.filteringSystems=a.toString()},_fetchNext:function(a,b,c,f,d){1>=arguments.length&&(b=null,c=[],f=255,d=0);this._watchdog=1;var k={type:"rest",path:"alarms/",
method:"GET",cmdObj:g.stringify({systems:this.filteringSystems}),load:p.hitch(this,function(g){void 0!==g.data&&null!==g.data&&(r.forEach(g.data,p.hitch(this,function(g){if(g.errStatus===this.ERROR_GENERAL.success)try{var k=[];if(g.asdu&&0<g.asdu.length){var h=new x(null,b,new u,6,35);h.processQuery(g.asdu);f=this._generateCrc(h.buff,f);d+=h.buff.length;if(h.spd.d.length&&(k=k.concat(h.spd.d),h.spd.moreAlarmsId))return this._fetchNext(a,h.spd.moreAlarmsId,c,f,d),[];c=c.concat(this._decode(k,!1,g.systemName,
g.systemId))}else{var l=r.filter(this.data,function(a){return a.systemId==g.systemId});c=c.concat(l)}}catch(S){}else g.errStatus!==this.ERROR_GENERAL.forbidden&&g.errStatus!==this.ERROR_GENERAL.userDoesNotExist||rc.session.reset()})),this._merge(c,this.touchedStates.OLD,!0,!1));a.resolve(c)}),error:function(b){console.error("error",b);a.reject(b)}};return this._q.add(this.gid,rc.xhr,rc.xhr.request,k)},_fetchNextRefresh:function(a,b,c,f,d){1>=arguments.length&&(b=null,c=[],f=255,d=0);this._watchdog=
1;var k={type:"rest",path:"alarms/",method:"GET",cmdObj:g.stringify({systems:this.filteringSystems,refresh:!0}),load:p.hitch(this,function(g){void 0!==g.data&&null!==g.data&&(r.forEach(g.data,p.hitch(this,function(g){if(g.errStatus===this.ERROR_GENERAL.success)try{var k=[];if(g.asdu&&0<g.asdu.length){var h=new x(null,b,new u,6,35);h.processQuery(g.asdu);f=this._generateCrc(h.buff,f);d+=h.buff.length;if(h.spd.d.length&&(k=k.concat(h.spd.d),h.spd.moreAlarmsId))return this._fetchNext(a,h.spd.moreAlarmsId,
c,f,d),[];c=c.concat(this._decode(k,!1,g.systemName,g.systemId))}else{var l=r.filter(this.data,function(a){return a.systemId==g.systemId});c=c.concat(l)}}catch(S){}else g.errStatus!==this.ERROR_GENERAL.forbidden&&g.errStatus!==this.ERROR_GENERAL.userDoesNotExist||rc.session.reset()})),this._merge(c,this.touchedStates.OLD,!0,!1));a.resolve(c)}),error:function(b){console.error("error",b);a.reject(b)}};return this._q.add(this.gid,rc.xhr,rc.xhr.request,k)},_endUpdateLoadPageTimer:function(){if(!this._updating)return!1;
this._updating=!1;this.updateTime=500;this._resetTimer();this._loadPageTimer&&(clearTimeout(this._loadPageTimer),this._loadPageTimer=null);this._loadPageTimer=setTimeout(p.hitch(this,"_loadPageHandler"),1E4);return!0},_loadPageHandler:function(){this._loadPageTimer&&(clearTimeout(this._loadPageTimer),this._loadPageTimer=null);this.updateTime=5E3},_fetchRefresh:function(){var a=new m;this._reloadCounter=0;this._fetchNextRefresh(a);return a.promise},_maskRetrievedRefresh:function(a,b){this._fetchRefresh().always(p.hitch(this,
function(c){this._endUpdateLoadPageTimer();c instanceof Error||(c=b?p.clone(c):[]);a.resolve(c)}))},_ackBacnet:function(c,f){var d=new Date,g=d.getDay();6==g&&(g=7);d={api:new q(0,2),eoi:f.eventIoObject,esa:new q(1==f.eventState?1:2,9),ts:f.timeObj.d,as:new b(rc.session.getUsername(),7),ta:new k(new t(d.getFullYear(),d.getMonth()+1,d.getDate(),g),new v(d.getHours(),d.getMinutes(),d.getSeconds(),Math.floor(d.getMilliseconds()/10)))};d={type:"bacnetSystem",gid:this.gid,systemId:f.systemId,s:new z({device:f.source},
d),error:function(b){console.error("rc/AlarmLoader._send error ",b.message,b);a.publish(this.progressTopic,h.smFailed," ");c.reject(b)}};return this._q.add("ALARM",rc.xhr,rc.xhr.request,d)},_send:function(a){this._watchdog=1;var b=new m,c=new m,f=[],g=[];if(0===a.length)return b.resolve(!0),b.promise;r.forEach(a,function(a,c){0===a.ack&&0==a.controller?g.push(new D(a.sourceIoObject,a.eventIoObject,a.systemId)):a.acknowledged&&(0==a.controller?f.push(this._ackBacnet(b,a)):f.push(this._sendRcp(b,a)))},
this);if(g.length){var k=[],l=[];r.forEach(g,function(a){0!==k.length&&k[0].systemId!=a.systemId&&(l.push(p.clone(k)),k=[]);k.push(p.clone(a));25===k.length&&(l.push(p.clone(k)),k=[])},this);k.length&&l.push(p.clone(k));r.forEach(l,function(a){f.push(this._deleteBacnet(b,a,"0%"))},this)}d(f).then(p.hitch(this,function(){c.resolve()}),p.hitch(this,function(a){c.reject(Error({name:h.communicationProblem,message:h.communicationProblem}))}));return c.promise},_deleteBacnet:function(b,c,f){c={type:"bacnetSystem",
gid:this.gid,systemId:c[0].systemId,s:new y(1E3,new w({c:0,d:c}),null,7,35),error:function(c){console.error("rc/AlarmLoader._clear error ",c.message);a.publish(this.progressTopic,h.smFailed," ");b.reject(c)}};return this._q.add(this.gid,rc.xhr,rc.xhr.request,c)},_sendRcp:function(b,c){var f=E.encode(this._encode(c));return this._q.add("ALARM",rc.xhr,rc.xhr.request,{gid:this.gid,type:"rcpSystem",method:"POST",cmdObj:{dest:127,subt:this.subnet,subd:this.subController,src:0,cmd:204,xl:0,xh:0,cnt:f.length,
data:f,systemName:c.systemName,systemId:c.systemId},error:function(c){console.error("rc/AlarmLoader._send error ",c.message);a.publish(this.progressTopic,h.smFailed," ");b.reject(c)}})},_compareAlarms:function(a,b){return a&&b?0==a.controller?a.source==b.source&&a.systemId==b.systemId&&a.eventObject.type==b.eventObject.type&&a.eventObject.instance==b.eventObject.instance:a.message==b.message&&a.systemId==b.systemId&&a.controller==b.controller&&a.subcontroller==b.subcontroller:!1},_decode:function(a,
b,c,d){for(var g=[],k,h=0;h<a.length;){if(b){k=a.slice(h,h+88);k=this._decodeRcp(k,d);if(null==k)return[];h+=88}else k=a[h],k=k instanceof f?this._decodeBacnet(k,d):this._decodeRcp(k,d),h++;null!=k&&("undefined"===typeof k.enable||0<k.enable)&&(k.systemName=c,k.systemId=d,g.push(k))}return g},_getErrorMessage:function(a,b,f){var d=c.unexpectedError;switch(a){case this.ERROR_GENERAL.authenticationFailed:d=c.authenticationFailedBody;break;case this.ERROR_GENERAL.forbidden:d=c.forbiddenHeader;break;
case this.ERROR_GENERAL.cannotAccessSystem:d=n.substitute(c.systemAccessError,[b]);break;case this.ERROR_GENERAL.noAccess:d=c.noAccesError;break;case this.ERROR_GENERAL.userNotEnabled:d=c.userNotEnabled;break;case this.ERROR_GENERAL.noAdminAccess:d=c.adminAccess;break;case this.ERROR_GENERAL.encryptionFailed:d=c.internalEncryption;break;case this.ERROR_GENERAL.userDoesNotExist:d=c.userNotEnabled;break;case this.ERROR_GENERAL.unknown:d=c.unexpectedError;console.error(this.declaredClass+" - errorMSG.unexpectedError ",
f);break;default:console.error(this.declaredClass+" - _getErrorMessage(): Unknown error status",a)}return d},_addAuditTrail:function(b,c){r.forEach(c,function(c){var f=b?l.acked:l.cleared,d=" "+h.alarm_s.toLowerCase()+".";c={datestamp:parseInt((new Date).getTime()/1E3,10).toFixed(),pointName:1==c.isBacnet?h.alarms:c.source.toString(),user:rc.session.getUsername(),action:f+d,details:f+d,reason:h.na,systemId:c.systemId,mnemonic:c.mnemonic?c.mnemonic:c.source.toString(),systemName:""};a.publish("audit",
c)},this)},_fetchNewAlarms:function(){var a=new m,b=new m;this._watchdog=1;b.resolve();var c={gid:this.gid,type:"cmd",method:"GET",cmdObj:{cmd:13,xl:0,systems:this.filteringSystems}};switch(this._updateState){case this.STATE_DISCONNECT:c.cmdObj.disconnect=1;case this.STATE_REQUEST_ALARMS:if(this._needsRefresh()){var f=new m;b.then(p.hitch(this,function(){return this._fetch().always(p.hitch(this,f.resolve))}));return f.promise}c.cmdObj.mask=this._mask}var d=p.hitch(this,function(b){if(void 0!==b.data&&
null!==b.data){var c=[];r.forEach(g.parse(b.data),p.hitch(this,function(a){if(a.errStatus===this.ERROR_GENERAL.success)switch(this._updateState){case this.STATE_REQUEST_MASK:this.updateTime=5E3;this._reloadCounterMax=12;this._mask=1;break;case this.STATE_REQUEST_ALARMS:var b=255,f=[];if(a.asdu&&0<a.asdu.length){var d=new x(null,null,new u,6,35);d.processQuery(a.asdu);b=this._generateCrc(d.buff,b);d.spd.d.length&&(f=f.concat(d.spd.d));c=c.concat(this._decode(f,!1,a.systemName,a.systemId))}}else a.errStatus!==
this.ERROR_GENERAL.forbidden&&a.errStatus!==this.ERROR_GENERAL.userDoesNotExist||rc.session.reset()}));0<c.length&&this._merge(c,this.touchedStates.MERGE_NO_UPDATE,!1,!0);this._updateState==this.STATE_REQUEST_MASK&&(this._updateState=this.STATE_REQUEST_ALARMS);a.resolve([])}}),k=p.hitch(this,function(b){a.reject(b)});b.then(p.hitch(this,function(){var a=rc.xhr.request(c);a.then(p.hitch(this,d),p.hitch(this,k));return a}));return a.promise},syncBacnet:function(){var a={type:"rest",path:"alarms/BACnetSync/",
method:"GET",cmdObj:g.stringify({systems:this.filteringSystems}),load:p.hitch(this,function(a){return a}),error:p.hitch(this,function(a){(new m).reject(Error("Error in rc.reliable.alarm.syncBacnet"))})};return this._q.add(this.gid,rc.xhr,rc.xhr.request,a)},_decodeBacnet:function(a,c){var f={};try{f.isBacnet=!0;f.id=this._getNextId();f.systemId=c;f.touched=this.touchedStates.NEW;f.shown=0;f.eventState=a.en.tState.v;f.controller=0;f.restored=0;f.acknowledged=0;f.priority=a.en.p.v;f.timeReset=0;f.timeAck=
0;null!=a.a&&(f.acknowledged=1,f.timeAck=this._bacnetTimestampToMilliseconds(a.a.ts),f.timeAckObj=a.a.ts,f.ackPriority=a.a.p?a.a.p.v:0);null!=a.r&&(f.restored=1,f.timeReset=this._bacnetTimestampToMilliseconds(a.r.ts),f.timeResetObj=a.r.ts,f.resetPriority=a.r.p?a.r.p.v:0);f.active=!this._isDeleted(f);f.className=a.declaredClass;f.time=this._bacnetTimestampToMilliseconds(a.en.ts);f.timeObj=a.en.ts;var d=new H(a.en.idi.i,a.en.eoi.t,a.en.eoi.i);f.eventIoObject=a.en.eoi;f.eventObject=d;f.state=this._getState(f);
f.mnemonic=d.toMnemonic();f.desc=A.getDescriptorFromMnemonic(c,f.mnemonic);f.proprietary=!1;a.en.ev&&9==a.en.ev.c&&35==a.en.ev.d[0].vID.v&&(f.proprietary=!0);a.en.mt||(a.en.mt=new b(C.strToHex(this._stateToReliableString(f.eventState,f.state)),7));f=this._decodeMessageAction(f,a.en.mt.getString());f.source=a.en.idi.i;f.sourceIoObject=a.en.idi;f.type=a.en.nc.v;f.selected=!1;f=this._setConfig(f)}catch(L){}return f},_decodeMessageAction:function(a,b){a.message=b;var c=F.parseAlarmAction(b);null!==c.messageParts&&
(b=b.replace(c.messageParts[0],""));a.messageText=b;a.action=c.action;a.actionType=c.actionType;return a},_decodeRcp:function(a,b){var c={},f,d=0;c.isBacnet=!1;c.systemId=b;c.touched=this.touchedStates.NEW;c.shown=0;c.acknowledged=(a[d]&128)>>>7;c.portD=(a[d]&64)>>>6;c.printer=(a[d]&32)>>>5;c.restored=(a[d]&16)>>>4;c.networkPort=(a[d]&8)>>>3;c.modemPort=(a[d]&4)>>>2;c.localPort=(a[d]&2)>>>1;c.alarm=a[d++]&1;1==c.restored&&(c.shown=0);c.controller=a[d++];if(0==c.controller)return null;c.id=this._getNextId();
c.time=1E3*C.toIntEnd(a.slice(d,d+4));d+=4;c.where1=a[d++];f=C.toIntEnd(a.slice(d,d+2));c.systemAlarm=(f&32768)>>>15;c.reserved=(f&16384)>>>14;c.priority=(f&16320)>>>6;c.rawType=f&63;c.type=c.systemAlarm?0:0<c.rawType?c.rawType:1;d+=2;c=this._setConfig(c);c.alarmCount=a[d++];c.originalMessage=a.slice(d,d+c.alarmCount);c=this._decodeMessageAction(c,C.toCharString(a.slice(d,d+c.alarmCount),C.charStringEncodingTypes.DBCS));c.source=c.controller;c.timeReset=0;c.timeAck=0;d+=69;c.subAB=(a[d]&128)>>7;c.subcontroller=
a[d]&127;c.subcontroller&&(c.source=c.controller+(c.subAB?"B":"A")+c.subcontroller);c.state=this._getState(c);c.active=!this._isDeleted(c);c.selected=!1;d+=1;c.timeAck=1E3*C.toIntEnd(a.slice(d,d+4));d+=4;c.timeReset=1E3*C.toIntEnd(a.slice(d,d+4));d+=4;return c},editAlarms:function(a,b){var c=new m,f=new m;this.own(c,f);if(!this._beginUpdate())return c.reject(Error({name:h.communicationProblem,message:h.updatesInProgress})),c.promise;var d=[];try{for(var g=r.map(b,function(a){var b={},c;for(c in a)"_0"!==
c&&"_RI"!==c&&"_S"!==c&&(b[c]=a[c]);return b}),g=this._mergeAlarms(g,this.data,!0),k=0;k<g.length;k++){var l=g[k].acknowledged,n=g[k].restored;g[k].ack=a;g[k].acknowledged=1;a||(g[k].restored=1);l&&(n||a)||d.push(g[k])}f.resolve(!0)}catch(T){c.reject(Error({name:h.unexpectedError,message:h.unexpected,e:T}))}d.length?(f.then(p.hitch(this,function(){this._addAuditTrail(a,d);this._send(d).then(p.hitch(this,function(){c.resolve()}),p.hitch(this,function(a){c.reject(a)}))}),p.hitch(this,function(a){c.reject(a);
return a})),f.promise.always(p.hitch(this,function(){return this._fetch()}))):f.then(p.hitch(this,function(a){c.resolve(a);return a}));c.promise.always(p.hitch(this,function(a){this._endUpdate();return a}));return c.promise},destroy:function(){this.inherited(arguments);this._loadPageTimer&&(clearTimeout(this._loadPageTimer),this._loadPageTimer=null);this._updating=!1}});rc.AlarmLoader||(rc.AlarmLoader=B);return rc.AlarmLoader})},"webview/bacnet/io/DeviceObjectReference":function(){define(["dojo/_base/declare",
"rc/bacnet/io/DeviceObjectReference","../Object"],function(r,p,m){return r("webview/bacnet/io/DeviceObjectReference",p,{systemId:null,constructor:function(l,h,c){this.o=h||new m(0,1);this.d=l||null;this.systemId=c||null}})})},"webview/bacnet/Calendar":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/promise/all dojo/text!./_calendar/templates/Calendar.html rc/bacnet/Calendar ../sys/desc ../sys/job ../util/AlarmUtil ../util/audit ../widget/WarningDialog ../widget/WarningDialogEnums dijit/Dialog dijit/form/Button dijit/layout/BorderContainer dijit/layout/ContentPane ./_calendar/EventDialog ../widget/ClientToolBar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return r("webview/bacnet/Calendar",g,{templateString:c,postCreate:function(){this.inherited(arguments);this.own(h([n.loadOnce(),d.loadOnce()]).then(p.hitch(this,this._setAlarmContext)))},_buildAuditLogContext:function(){var a=[{systemId:Number(this.system),objectName:this.mnemonic}];null!=this.fullTitle&&b.setContextDataWithSiteId(this.site,a,this.fullTitle)},_buildConfirmDialog:function(){this._eraseWarningDlg||(this._eraseWarningDlg=new t({title:this.rcStrings.warning,
text:this.rcCalendarStrings.eraseConfirm,type:k.types.binaryConfirm}),this._supportingWidgets.push(this._eraseWarningDlg),this._eraseWarningDlg.on("close",p.hitch(this,function(a){a===k.returnValues.oneOrYes&&this._clearCalendar()})));this._eraseWarningDlg.open()},_createToolbarConnections:function(){this._canEdit&&(this._saveButton=this._toolbar.addToolBarItem(l.save,"save","rc24Icon saveIcon",p.hitch(this,this.sendWithReason,"calendar")),this._clearButton=this._toolbar.addToolBarItem(m.clearAll,
"clearAll","rc24Icon xIcon",p.hitch(this,this._buildConfirmDialog)),this.setTooltips());this._buildAuditLogContext()},_handleSendFailure:function(a){a!==this.changeApprovalCancelledError?this.inherited(arguments):this._endUpdate()},_makeWriteRequest:function(a){var b=this._getBACnetValidateRequestData(a);return this._validateApprovalSession(b).then(p.hitch(this,function(){return rc.xhr.request(a)}))},_populateCalendars:function(a){this.inherited(arguments);this._buildAuditLogContext()},_setAlarmContext:function(){a.setAlarmContextForBACnetDevice(this.system,
this.device)}})})},"webview/bacnet/_calendar/EventDialog":function(){define(["dojo/_base/declare","dojo/text!webview/bacnet/_calendar/templates/EventDialog.html","rc/bacnet/_calendar/EventDialog","../_widget/PeriodEditor"],function(r,p,m){return r("webview/bacnet/_calendar/EventDialog",[m],{templateString:p})})},"webview/bacnet/_widget/PeriodEditor":function(){define(["dojo/_base/declare","dojo/text!./templates/PeriodEditor.html","rc/bacnet/_widget/PeriodEditor","./BacnetDatePicker"],function(r,p,
m){return r("webview/bacnet/_widget/PeriodEditor",[m],{templateString:p})})},"webview/bacnet/_widget/BacnetDatePicker":function(){define(["dojo/_base/declare","dojo/text!./templates/BacnetDatePicker.html","rc/bacnet/_widget/BacnetDatePicker","rc/widget/DateTextBox"],function(r,p,m){return r("webview/bacnet/_widget/BacnetDatePicker",[m],{templateString:p})})},"webview/widget/ClientToolBar":function(){define("dijit/_TemplatedMixin dijit/Menu dijit/form/Button dijit/layout/ContentPane dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/Evented dojo/i18n!webview/nls/alarms dojo/i18n!rc/nls/all dojo/on dojo/text!./templates/ClientToolBar.html ./ChecklistButton ./MenuBarZoomTools ./PopupMenuBarItem".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){return c("webview/widget/ClientToolBar",[l,r,b],{baseClass:"clientToolBar",region:"top",_rightMargin:10,_itemPoistion:0,_buttons:null,templateString:f,postCreate:function(){this.inherited(arguments);this._init()},_init:function(){this._buttons={}},addToolBarItem:function(b,c,f,d){b=this._makeToolBarItem(b,c,f,d);this._buttons[c]=b;n.place(b.domNode,this.buttonContainer,"first");c=a.get(this.buttonContainer,"width");a.set(this.buttonContainer,"width",c+
40+"px");return b},addMenuDropDownItem:function(b,c,f,d){b=this._makeMenuDropDownItem(b,c,f,d);n.place(b.menu.domNode,this.buttonContainer,"first");f=a.get(this.buttonContainer,"width");a.set(this.buttonContainer,"width",f+40+"px");this._buttons[c]=b.menu;return b.dropDown},_makeToolBarItem:function(a,b,c,f){return new m({region:"right",tooltipLabel:a||"",label:"",baseClass:this.baseClass+"Item "+b+" "+a+" toolbarButton",iconClass:"clientToolBarIcon "+c,onClick:f||""})},_makeMenuDropDownItem:function(a,
b,c,f){var d=new p({tooltipLabel:a||"",baseClass:this.baseClass+"Item "+b+" "+a});a=new z({label:"",baseClass:this.baseClass+"Item "+b+" "+a,iconClass:"rc24Icon clientToolBarIcon "+c,popup:f.dropDown});d.addChild(a);return{menu:d,dropDown:a}},addZoomTools:function(){this._zoomTools&&(this._buttons.zoomTools=null,this.zoomTools.destroyRecursive(),delete this._buttons.zoomTools);this._zoomTools=new w({baseClass:"toolBarZoomer clientToolBarZoomer ",iconBaseClass:"webviewIcon clientToolBarIcon",menuBar:this});
return this._buttons.zoomTools=this._zoomTools},_userIsAdmin:function(){return"admin"===rc.session.getUsername().toLowerCase()},makeSystemFilter:function(){var b=null,b=this._userIsAdmin()?rc.xhr.request({path:"GetSystemsForSite",type:"rest",method:"GET"}):rc.xhr.request({path:"GetPermittedSystems/",type:"rest",method:"GET"});b.always(g.hitch(this,function(b){if(b.data){if(1<b.data.length){var c=[];h.forEach(b.data,g.hitch(this,function(a){c.push({name:a.name,value:a.id,checked:Number(webview.pathUtil.currentSiteInfo.system)===
a.id?!0:!1})}));var f=new u({className:"clientToolBarItem system-filter-menu-item",label:t.filterBySystem,list:c,name:k.systems,templateString:"\x3cspan\x3e\x3c/span\x3e"});this.own(q(f,"editEnd",g.hitch(this,function(){this.onSystemFilter(f.get("value"))})));this._buttons.SystemFilter=f;n.place(f.domNode,this.buttonContainer,"first");b=a.get(this.buttonContainer,"width");a.set(this.buttonContainer,"width",b+150+"px")}}else console.error(this.declaredClass+" - _createSystemFilter(): Error getting permitted systems",
b)}))},onSystemFilter:function(a){this.emit("systemFilter",a);return a},getPageButtons:function(){return this._buttons},getButton:function(a){return this._buttons[a]},setTitle:function(a){d.set(this._title,{innerHTML:a,title:a})},destroy:function(){Object.keys(this._buttons).forEach(g.hitch(this,function(a){this._buttons[a].tooltip&&this._buttons[a].tooltip.destroyRecursive();this._buttons[a].destroyRecursive()}));this._buttons=[];this.inherited(arguments)}})})},"webview/widget/ChecklistButton":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/CheckedMenuItem dijit/form/DropDownButton dijit/popup dojo dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/Evented dojo/has dojo/i18n!webview/nls/all dojo/on dojo/window rc/_base/util ./DijitMenu dojo/sniff".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v){return d("webview/widget/ChecklistButton",[p,r,f],{templateString:"\x3cdiv\x3e\x3c/div\x3e",label:w.choose,list:null,name:"","class":"checklist-button",saveAsArray:!1,disabled:!1,idProperty:"value",constructor:function(a){this.label=a.label||this.label;this.button=new l({label:this.label,dropDown:this.menu,openDropDown:n.hitch(this.button,this.openDropDown)});this.set("itemList",a.list||[]);this.valueNode=k.create("input",{type:"hidden",name:a.name||
this.name})},postCreate:function(){this.set("disabled",this.disabled);k.place(this.valueNode,this.domNode);k.place(this.button.domNode,this.domNode);this.button.startup();this.own(z(this.button,"click",n.hitch(this,this._onClickButton)));this.own(a.after(this.button,"closeDropDown",n.hitch(this,this.onClose),!0));this.own(z(this,"blur",n.hitch(this,function(){this.set("value",this.get("value"))})));this.own(z(this.button,"change",n.hitch(this,this.onChange)));this.own(z(this.menu,"itemClick",n.hitch(this,
function(){this.useAltValue=!1})));this.smi&&this.own(z(this.smi,"addCat",n.hitch(this,this.closeDD)))},_setItemListAttr:function(a){this.menu&&this.menu.destroyRecursive();this.menu=new v({onItemClick:this._onListItemClick});this.list=a;this.listMap={};g.forEach(this.list,function(a){this.listMap[a.value]=a.name;var b=new m({label:y.escapeHtml(a.name),value:a.value||a.id,checked:a.checked?a.checked:!1});if("*"===a.value)b.on("click",n.hitch(this,this.onAnySelect));else b.on("click",n.hitch(this,
this.notAny));this.menu.addChild(b)},this);this.button.set("dropDown",this.menu)},_setDisabledAttr:function(a){this.disabled=a;this.button.set("disabled",a)},_getDisabledAttr:function(){return this.disabled},closeDD:function(){this.button.closeDropDown()},onEditEnd:function(){this.emit("editEnd",this._getSelectedItems(this.idProperty))},onEdit:function(){this.emit("edit")},_onClickButton:function(a){if(this.menu.isShowingNow)this.onEdit(this.get(this.idProperty));else this.onClose()},onClose:function(){this.updateLabel();
this.onEditEnd();this.emit("close")},onAnySelect:function(){this.selectAll();this.updateLabel();this.closeDD()},notAny:function(a){a&&(this.updateLabel(),this.onNotAny())},onNotAny:function(){this.emit("notAny")},updateLabel:function(){var a=this.get(this.idProperty);0!==a.length?this.button.set("label",a.length+" "+this.name+" "+w.selected):this.button.set("label",this.label)},_onListItemClick:function(a,b){"undefined"===typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled)return!1;
a.popup?this._openPopup("keypress"==b.type):a._onClick?a._onClick(b):a.onClick(b)},focus:function(){this.inherited(arguments);this.button.openDropDown();this.button.dropDown.focus()},_getValueAttr:function(){return!0===this.useAltValue?this.altValue:this._getSelectedItems(this.idProperty)},_setValueAttr:function(a){n.isArray(a)||(a=[]);this.altValue=n.clone(a);for(var b=0;b<a.length;b++)if(void 0===this.listMap[a[b]]){this.useAltValue=!0;break}b=this.button.dropDown.getChildren();g.forEach(b,function(b){var c=
void 0!==b.label?b.label:b.get(this.idProperty).toString();a.length&&c?g.some(a,function(f,d){return 0===c.indexOf(f)&&c.length===f.length||b.value.toString()===f.toString()?(b.set("checked",!0),a.splice(d,1),!0):!1},this)||b.set("checked",!1):b.set("checked",!1)},this);this.updateLabel()},_getSelectedAttr:function(){return this._getSelectedItems(this.idProperty)},_getSelectedItems:function(a){var b=g.map(this.button.dropDown.getChildren(),function(b){return b.get("checked")?y.unescapeHtml(b[a]):
null});return b=g.filter(b,function(a){return null!=a&&""!=a})},clearAll:function(){var a=this.button.dropDown.getChildren();g.forEach(a,function(a){a.set("checked",!1)});this.updateLabel()},selectAll:function(){var a=this.button.dropDown.getChildren();g.forEach(a,function(a){a.set("checked",!0)})},toggleSpecific:function(a){var b=this.button.dropDown.getChildren();g.forEach(b,function(b){b.value===a&&b.set("checked",!1)})},setMultiple:function(a,b){var c=this.button.dropDown.getChildren();g.forEach(c,
function(c){-1!==a.indexOf(c.value)?c.set("checked",b):c.set("checked",!b)});this.updateLabel()},destroy:function(){this.inherited(arguments);g.forEach([this.menu,this.button],function(a){a&&a.destroy()})},openDropDown:function(){var a=this.dropDown,c=a.domNode,f=this._aroundNode||this.domNode,d=this,g=h.open({parent:this,popup:a,around:f,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){d.closeDropDown(!0)},onCancel:function(){d.closeDropDown(!0)},onClose:function(){b.set(d._popupStateNode,
"popupActive",!1);t.remove(d._popupStateNode,"dijitHasDropDownOpen");d._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&f.offsetWidth>a._popupWrapper.offsetWidth){var f=f.offsetWidth-a._popupWrapper.offsetWidth,k={w:a.domNode.offsetWidth+f};this._origStyle=c.style.cssText;n.isFunction(a.resize)?a.resize(k):q.setMarginBox(c,k);"R"==g.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-f+"px")}b.set(this._popupStateNode,"popupActive","true");t.add(this._popupStateNode,
"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===c.getAttribute("role")||c.getAttribute("aria-labelledby")||c.setAttribute("aria-labelledby",this.id);u("touch")&&!u("ios")&&(c=x.getBox(),f=q.getMarginBox(a._popupWrapper),q.setMarginBox(a._popupWrapper,{l:eval(f.l-c.l),t:eval(f.t-c.t)}));return g}})})},"webview/widget/DijitMenu":function(){define(["dojo/_base/declare","dijit/Menu"],
function(r,p){return r("webview/widget/DijitMenu",p,{_onKeyPress:function(m){if(!m.ctrlKey&&!m.altKey)switch(m.charOrCode){case this._openSubMenuKey:this._moveToPopup(m);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1)}}})})},"webview/widget/MenuBarZoomTools":function(){define("dijit/_Widget dijit/form/Button dojo/_base/declare dojo/_base/lang dojo/i18n!webview/nls/all ./MenuBarItem".split(" "),function(r,p,m,l,h,
c){return m("webview/widget/ClientToolBar",[r],{_buttons:{},baseClass:null,zoomFactor:0,MAX_ZOOM_LEVEL:2,ZOOM_FACTOR:.2,isEnabled:!0,menuBar:null,postCreate:function(){this.inherited(arguments);this.zoomOut=new p({tooltipLabel:h.zoomOut,label:"",baseClass:"clientToolBarItem menuBarZoomOut",iconClass:"rc24Icon clientToolBarIcon zoomOutIcon",onClick:l.hitch(this,this._zoomOut)});this.zoomIn=new p({tooltipLabel:h.zoomIn,label:"",baseClass:"clientToolBarItem menuBarZoomIn",iconClass:"rc24Icon clientToolBarIcon zoomInIcon",
onClick:l.hitch(this,this._zoomIn)});this.zoomState=new c({tooltipLabel:h.zoomOut,label:"",baseClass:"clientToolBarLabel menuBarZoomState",iconClass:"noIcon"});this.menuBar.addChild(this.zoomOut);this.menuBar.addChild(this.zoomState);this.menuBar.addChild(this.zoomIn)},_zoomIn:function(){this.zoomFactor!==this.MAX_ZOOM_LEVEL&&this.isEnabled&&this._onZoom(!0)},_zoomOut:function(){this.zoomFactor!==-1*this.MAX_ZOOM_LEVEL&&this.isEnabled&&this._onZoom(!1)},disableZoom:function(c){this.isEnabled=!c},
_setZoomState:function(){var c;0===this.zoomFactor?c="":0<this.zoomFactor?c=Math.round(100*(this.zoomFactor+1)):0>this.zoomFactor&&(c=Math.round(1/(Math.abs(this.zoomFactor)+1)*100));this.zoomState.set("label",c+(""!==c?"%":""))},_onZoom:function(c){this.zoomFactor=c?this.zoomFactor+this.ZOOM_FACTOR:this.zoomFactor-this.ZOOM_FACTOR;this.zoomFactor=Math.round(10*this.zoomFactor)/10;this._setZoomState(this.zoomFactor);this.onZoom({isReset:!1,zoomFactor:this.zoomFactor})},onZoom:function(c){return c},
resetZoom:function(){this.zoomFactor=0;this._setZoomState()}})})},"webview/reliable/_group/io/Group":function(){define("dojo/_base/lang dojo/Deferred dojo/json rc/bacnet/enums rc/bacnet/io/Array rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/AtomicReadFile rc/bacnet/io/service/ReadPropertyMultiple rc/reliable/_group/io/Group rc/sys/desc rc/sys/enhgrp rc/sys/grplc rc/sys/job rc/util/encoding/base16 rc/xhr ../../../bacnet/Object".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w){r.extend(a,
{cMAX_CONTROLGROUPWS:512,cMAX_CONTROLGROUPWS_BANKSIZE:128,load:function(a){this.pictureFile=this.label=this.name="";this.mode=0;var b=a.pointName;this._instance=b.comInstance;this._d=new p;q.loadOnce().then(r.hitch(this,this._jobLoaded,b,a));return this._d.promise},_getDescriptorForGroup:function(a){return b.getBestName(new w(a.mainController,l.objectTypes.OBJID_GLOBAL_GROUP,a.mainInstance))},_globalGroupDescLoaded:function(a,c){this.label=this.name=this._getDescriptorForGroup(a);webview.pathUtil.getSystemName().then(r.hitch(this,
function(c){var f="";null!==c&&(f=c+"/");c=b.getBacnetDeviceName(a.mainController);""!==c&&(f+=c+"/");this.label=f+=this.label;this.mode=1;this._fetchPictureFile(a);this.emit("globalGroupDescLoaded",this.label)}))},_jobLoaded:function(a,f){if(f.isEnhancedGroup&&f.isWorkstationGroup&&f.workstationJSONFileExists)return t.loadOnce(f.workstationJSONFile).then(r.hitch(this,function(b){this._onLoadWkStnGroupJSON(b,a,f)}),r.hitch(this,function(a){this._d.reject(a);this.onError(a)})),this._d.promise;if(f.isGlobalGroup)return b.loadOnce().always(r.hitch(this,
this._globalGroupDescLoaded,a,f)),this._d.promise;if(f.isSSC){var n={o:new g(l.objectTypes.OBJID_FILE,132),a:{t:0,s:new c(0,3),c:new c(471,2),v:new h([],6)}},n=new d({device:a.mainController},n);return rc.xhr.request({type:"bacnet",gid:"GRP",t:0,s:n,load:r.hitch(this,function(a){0===a.o.a.v.ary.length?(this._d.reject(a),this.onError(a)):this._onLoadGroup(a.o.a.v.ary)}),error:r.hitch(this,function(a){this._d.reject(a);this.onError(a)})})}if(f.isLC)return k.loadOnce(a).then(r.hitch(this,function(b){b=
k.getGroupBytes(a.comInstance);this._onLoadGroupLc(b)}),r.hitch(this,function(a){this._d.reject(a);this.onError(a)})),this._d.promise;if(1>a.mainController||125<a.mainController||a.subnetType&&(1>a.subController||124<a.subController))n=Error('RCP controller instance out of range: "'+a.toMnemonic()+'"'),this._d.reject(n),this.onError(n);a.mainController==q.workstationPanel()&&(this.BANK_SIZE=this.cMAX_CONTROLGROUPWS_BANKSIZE);if(f.isWorkstationGroup)return rc.xhr.request({gid:"GRP",type:"rcp",cmdObj:{dest:a.mainController,
subt:a.subnetType,subd:a.subController,src:0,cmd:11,xl:Math.floor((this._instance-1)/this.BANK_SIZE),xh:0,cnt:0},handle:r.hitch(this,function(a){a instanceof Error?(this._d.reject(a),this.onError(a)):0===a.data.length?(this._d.reject(a),this.onError(a)):this._onLoadWSGroup(a.data)})});n=a.toPointNameObject();return rc.xhr.request({gid:"GRP",type:"rcp",cmdObj:{dest:a.mainController,subt:a.subnetType,subd:a.subController,src:0,cmd:20,xl:n.xl,xh:n.xh,cnt:0},handle:r.hitch(this,function(a){a instanceof
Error||0===a.data.length?(this._d.reject(a),this.onError(a)):this._onLoadGroup(a.data)})})},_onLoadWkStnGroupJSON:function(a,b,c){try{a=m.parse(a,!1);var f="group "+b.comInstance;if(a.hasOwnProperty(f)){var d=a[f];d.hasOwnProperty("enhanced")&&(c.isEnhancedGroup=d.enhanced);if(c.isEnhancedGroup)d.hasOwnProperty("graphic_file")&&(this.pictureFile=d.graphic_file),b.toPointNameObject(),this.onLoad(this),this._d.resolve(this);else return rc.xhr.request({gid:"GRP",type:"rcp",cmdObj:{dest:b.mainController,
subt:b.subnetType,subd:b.subController,src:0,cmd:11,xl:Math.floor((this._instance-1)/this.BANK_SIZE),xh:0,cnt:0},handle:r.hitch(this,function(a){a instanceof Error?(this._d.reject(a),this.onError(a)):0===a.data.length?(this._d.reject(a),this.onError(a)):this._onLoadWSGroup(a.data)})})}}catch(C){}},_onLoadWSGroup:function(a){try{var b=(this._instance-1)%this.BANK_SIZE*44;a=a.slice(b,b+44);this.name=f.toCharString(a.slice(0,22));this.label=f.toCharString(a.slice(22,32));this.pictureFile=f.toCharString(a.slice(32,
43));this.mode=a[43];this.onLoad(this);this._d.resolve(this)}catch(y){this._d.reject(y),this.onError(y)}}})})},"webview/webview-includes":function(){require("webview/_base/_ToolTip webview/admin/schedules/Schedule webview/admin/panelFiles/PanelFiles webview/admin/programs/Program webview/admin/worksheets/programs/ProgramsWorksheet webview/admin/worksheets/trendLogs/TrendLogsView webview/admin/worksheets/trendLogs/TrendLogPoints webview/bacnet/_runtime/io/Archive webview/bacnet/_trend/io/Archive webview/bacnet/BTLProperties webview/bacnet/Calendar webview/bacnet/Object webview/bacnet/RuntimeLog webview/bacnet/RuntimeLogWorksheet webview/bacnet/Schedule webview/bacnet/Trend webview/bacnet/TrendAsRuntimeLog webview/bacnet/TrendMultiple webview/reliable/_group/GroupElement webview/reliable/_group/io/Group webview/reliable/_group/io/GroupElements webview/reliable/_group/Stage webview/reliable/_runtime/io/Archive webview/reliable/_RuntimeLog webview/reliable/_trend/io/Archive webview/reliable/_trend/io/Header webview/reliable/AHACRequests webview/reliable/Alarm webview/reliable/AlarmHistory webview/reliable/AnnualSchedule webview/reliable/AuditTrail webview/reliable/EnterpriseSchedule webview/reliable/FacilityManagerReport webview/reliable/Group webview/reliable/View webview/reliable/MobileAlarm webview/reliable/NavGroup webview/reliable/PointsReport webview/reliable/PointsReportWorksheet webview/reliable/RuntimeLog webview/reliable/RuntimeLogWorksheet webview/reliable/TenantReport webview/reliable/Trend webview/reliable/WeeklySchedule webview/ReliableSystem webview/util/audit webview/util/xport webview/widget/AHACNotification webview/widget/AHACRequestToast webview/widget/AlarmLoader webview/widget/AlarmNotification webview/widget/ClientToolBar webview/widget/NotificationPullout webview/widget/UserToolBar webview/widget/ZoomTools".split(" "))},
"webview/admin/schedules/Schedule":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/hash dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/io-query dojo/on dojo/json dojo/query dojo/store/Memory dojo/string dojo/text!./templates/schedule.html dojo/text!./templates/scheduleItem.html dojo/topic dojox/html/entities rc/_base/test rc/bacnet/enums rc/util/encoding/base16 rc/util/encoding/base64 rc/util/notices ./ColourSelectorItem ./ScheduleTreeItem ../_dndTreeBase ../trees/NavTreeAvatar ../../widget/WarningDialog ../../widget/WarningDialogEnums dijit/form/FilteringSelect dijit/form/NumberTextBox dijit/form/RadioButton ./DataTypeColourSelector ./NavScheduleToolbar ../widget/SearchForObjectResults ../widget/AdminToolbar ../../widget/CommitButtons ../../widget/SearchByField ../../widget/TitlePane ../../widget/ToolbarButton ../../widget/WebviewContentPane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P){return m("webview/admin/schedules/Schedule",[L],{templateString:A,bacnetOnly:!0,_path:"schedule/",_hash:"schedule",cancelHandle:null,schedule:null,esDataType:null,defaultColours:null,_buttonArray:null,_views:null,dataType:null,esName:"",approvalRequired:!1,esType:null,cleanupEnabled:"",schedulesDialog:null,preventDuplicates:!0,saveDeferred:null,_processId:null,_MAX_DEPTH:6,_isSelectAll:!0,view:"properties",_schedNameChanged:!1,
_nameListener:null,_defaultColourListener:null,_summaryColourListener:null,_cleanupListener:null,_numDaysListener:null,_cleanupTimeListener:null,_incrementListener:null,_currencyListener:null,_approvalRequiredListener:null,_numDaysOnDemandListener:null,_userContent:null,_userViewOnClick:null,_originalScheduleStore:null,_defaultRate:0,_treeNodeClass:"scheduleTreeItem",ahacStrings:q,rcStrings:k,postCreate:function(){this.inherited(arguments);g.set(this.approvalLabel,"for",this.approvalRequiredCB.id);
this._buildHash();this._buttonArray=[];this._iconArray=[];this.saveButton=this.scheduleTreeToolbar.saveButton;this.selectAllButton=this.scheduleTreeToolbar.selectAllButton;this.deleteButton=this.scheduleTreeToolbar.deleteButton;this.viewButton=this.scheduleTreeToolbar.viewButton;this.cancelSaveButton=this.scheduleTreeToolbar.cancelSaveButton;this.selectAllTooltip=this.selectAllButton.tooltip;this._createButtons();this._setupOnClicks();this.setupCommitButtons();this._views=[];this._createViews();this.fetch();
this.schedulesDialog=new O({title:"",type:P.types.binary,text:""});this.own(w(this,"destroyUserContent",l.hitch(this,this._goToPage,"scheduleTree")));this._switchView(this.view);this.setTabIndex()},_goToPage:function(a,b){this.goToPage(this._hash+"\x26view\x3d"+a)},setTabIndex:function(){g.set(this.nameTB.textbox,"tabindex",1);this.minuteIncrementSelect.set("tabindex",1);this.currencySelect.set("tabindex",1);g.set(this.numDaysTB.textbox,"tabindex",1);g.set(this.cleanupTimeTB.textbox,"tabindex",1);
g.set(this.numDaysOnDemandTB.textbox,"tabindex",1)},_afterDrop:function(){this.inherited(arguments);this._setTotals()},_buildHash:function(){var a=t();this.isAdminPage()||D.mode<D.PROXY_LIVE&&(a=H.toCharString(J.decode(a)));if(0===a.indexOf(this._hash))this._hash+="?site\x3d"+this.site,this._hash+="\x26schedule\x3d"+encodeURIComponent(this.schedule);else{var b=a.substring(a.indexOf("?")+1,a.length),b=u.queryToObject(b);this._hash=a.split("\x26")[0];this.view=b.view;this.site=b.site;this.schedule=
this._hash.split("?")[0].replace("EnterpriseSchedule","")}},_setLabels:function(){this.propertiesButton.set("label",this.webviewStrings.propertiesButton.toLocaleUpperCase());this.scheduleTreeButton.set("label",this.webviewStrings.scheduleTreeLabel.toLocaleUpperCase());this.clearSchedulesButton.set("label",this.webviewStrings.wipeSchedules.toLocaleUpperCase())},_createButtons:function(){this.own(w(this.propertiesButton.domNode,"click",l.hitch(this,this._goToPage,"properties")));d.add(this.propertiesButton.domNode,
"selected");this._buttonArray.push(this.propertiesButton);this.own(w(this.scheduleTreeButton.domNode,"click",l.hitch(this,this._goToPage,"scheduleTree")));this._buttonArray.push(this.scheduleTreeButton);this._iconArray.push(this.scheduleTreeToolbar);this._iconArray.push(this.propertiesCommitButtons);this.buttonBar.replaceAllButtons(this._buttonArray);this.buttonBar.replaceAllIcons(this._iconArray);this.own(w(this.clearSchedulesButton.domNode,"click",l.hitch(this,this._confirmClearSchedules)));this.own(w(this.clearExpiredEventsNowButton.domNode,
"click",l.hitch(this,this._confirmClearExpiredEvents)))},_setupOnClicks:function(){this._userViewOnClick=w(this.scheduleTreeToolbar,"viewClicked",l.hitch(this,this._goToPage,"userView"));this.own(w(this.scheduleTreeToolbar,"selectAllClicked",l.hitch(this,this._onSelectAllClicked)),w(this.scheduleTreeToolbar,"deleteClicked",l.hitch(this,this.onDeleteClicked)));w(this.scheduleTreeToolbar,"saveClicked",l.hitch(this,function(){this.scheduleTreeToolbar.showCancelOption(!0);this._validateScheduleTree()}));
w(this.scheduleTreeToolbar,"cancelClicked",l.hitch(this,function(){this.revertPendingChanges();this.fetch()}),this._userViewOnClick)},_createViews:function(){this.esProperties.setMainContent(this.propertiesContainer);this._views.push(this.esProperties.domNode);this._views.push(this.scheduleTreeContainerNode)},_switchView:function(a){p.forEach(this._views,function(a){d.add(a,"hidden")});p.forEach(this._buttonArray,function(a){d.remove(a.domNode,"selected")});switch(a){case "properties":d.remove(this.esProperties.domNode,
"hidden");d.add(this.propertiesButton.domNode,"selected");d.remove(this.propertiesCommitButtons.domNode,"hidden");d.add(this.propertiesCommitButtons.domNode,"selected");d.add(this.scheduleTreeToolbar.domNode,"hidden");d.remove(this.scheduleTreeToolbar.domNode,"selected");break;case "scheduleTree":d.remove(this.scheduleTreeContainerNode,"hidden");d.add(this.scheduleTreeButton.domNode,"selected");d.remove(this.propertiesCommitButtons.domNode,"selected");d.add(this.propertiesCommitButtons.domNode,"hidden");
d.add(this.scheduleTreeToolbar.domNode,"selected");d.remove(this.scheduleTreeToolbar.domNode,"hidden");this.publishSearchable();break;case "userView":this.loadUserContent();break;default:d.remove(this.propertiesCommitButtons.domNode,"hidden"),d.add(this.propertiesCommitButtons.domNode,"selected"),d.add(this.scheduleTreeToolbar.domNode,"hidden"),d.remove(this.scheduleTreeToolbar.domNode,"selected"),console.error(this.declaredClass+" - _switchView(): Invalid View",a)}},_confirmClearSchedules:function(){this.schedulesDialog.set("type",
P.types.binary);this.schedulesDialog.set("title",this.errorStrings.confirmWipeSchedules);this.schedulesDialog.set("text",this.errorStrings.confirmWipeSchedulesBody);var a=this.schedulesDialog.on("close",l.hitch(this,function(b){switch(b){case P.returnValues.oneOrYes:this._clearSchedules();break;case P.returnValues.none:break;default:console.error(this.declaredClass+" - _confirmClearSchedules(): Unknown choice",b)}a.remove()}));this.own(a);this.schedulesDialog.open()},_clearSchedules:function(){var a=
{path:"ClearSchedulesForES",type:"rest",method:"POST",enterpriseScheduleId:this.schedule,siteId:this.site,load:l.hitch(this,function(a){return this._checkProgress(a.data,"ClearSchedulesForES")}),error:l.hitch(this,function(a){this.saveDeferred.reject(a);return a})};this.saveDeferred=new c;this._validateApprovalSessionWithReason(a).then(function(){rc.xhr.request(a)},function(){});this.saveDeferred.then(l.hitch(this,function(a){200===a.progress.errStatus?E.publish("alert",{type:"success",message:this.errorStrings.successfulClear}):
508===a.progress.errStatus?p.forEach(a.progress.error,l.hitch(this,function(a){E.publish("sticky",{type:"error",message:v.substitute(this.errorStrings.failedToWipeXinX,[a.schedule,a.systemName])});console.error(this.declaredClass+" - _clearSchedules(): Could not wipe schedule",a)})):(a=this._getErrorMessage(a.progress.errStatus),E.publish(a.noticeType,{type:a.type,message:a.msg}))}),l.hitch(this,function(a){var b=this._getErrorMessage(504);E.publish(b.noticeType,{type:b.type,message:b.msg});console.error(this.declaredClass+
" - _clearSchedules(): Unexpected Error",a)}))},_confirmClearExpiredEvents:function(){this.schedulesDialog.set("type",P.types.binary);this.schedulesDialog.set("title",this.webviewStrings.confirmCleanupTitle);this.schedulesDialog.set("text",this.webviewStrings.confirmCleanup);var a=this.schedulesDialog.on("close",l.hitch(this,function(b){switch(b){case P.returnValues.oneOrYes:this._clearExpiredEvents();break;case P.returnValues.none:break;default:console.error(this.declaredClass+" - _confirmClearExpiredEvents(): Unknown choice",
b)}a.remove()}));this.own(a);this.schedulesDialog.open()},_clearExpiredEvents:function(){var a={path:"CleanupSchedulesForEnterpriseSchedule",type:"rest",method:"POST",enterpriseScheduleId:this.schedule,daysOfDormancy:this.numDaysOnDemandTB,load:l.hitch(this,function(a){return this._checkProgress(a.data,"CleanupSchedulesForEnterpriseSchedule")}),error:l.hitch(this,function(a){this.saveDeferred.reject(a);return a})};this.saveDeferred=new c;rc.xhr.request(a);this.saveDeferred.then(l.hitch(this,function(a){200===
a.progress.errStatus?E.publish("alert",{type:"success",message:this.webviewStrings.successfullyClearedExpiredEvents}):508===a.progress.errStatus?p.forEach(a.progress.error,l.hitch(this,function(a){E.publish("sticky",{type:"error",message:v.substitute(this.webviewStrings.failedToClearExpiredEvents,[a.schedule,a.systemName])});console.error(this.declaredClass+" - _clearExpiredEvents(): Could not clear expired events",a)})):(a=this._getErrorMessage(a.progress.errStatus),E.publish(a.noticeType,{type:a.type,
message:a.msg}))}),l.hitch(this,function(a){var b=this._getErrorMessage(504);E.publish(b.noticeType,{type:b.type,message:b.msg});console.error(this.declaredClass+" - _clearExpiredEvents(): Unexpected Error",a)}))},_toggleHintArea:function(){this.inherited(arguments);this.viewButton.set("disabled",0>=Object.keys(this._treeList.map).length)},setupCommitButtons:function(){this.own(w(this.propertiesCommitButtons.saveButton.toolbarButtonIcon,"click",l.hitch(this,function(){this.propertiesCommitButtons.showCancelOption(!0);
this.getProperties(this.propertiesCommitButtons)})));this.own(w(this.propertiesCommitButtons.cancelButton.toolbarButtonIcon,"click",l.hitch(this,function(){this.fetch()})))},showColourSelector:function(a){this.colourSelector.setType(a)},_resize:function(){this.inherited(arguments);var b=a.get(this.colourSelection,"width"),c=a.get(this.enterpriseCleanupConfiguration,"width"),f=a.get(this.propertiesContainer,"width"),b=b+c>f;d.toggle(this.colourSelection,"colour-prevent-overlap",b);d.toggle(this.enterpriseCleanupConfiguration,
"cleanup-prevent-overlap",b)},_save:function(a,b){if(this._beginUpdate()){var c=this._checkValidation();if(c.valid){var f=rc.xhr.request(a),d=w(b.cancelSaveButton.toolbarButtonIcon,"click",function(){f.cancel("User Cancelled");d.remove()});f.then(l.hitch(this,function(a){this._endUpdate();if(200===a.data.errStatus)"scheduleTree"===this.view&&(this._treeStore.data=[]),this.fetch(),E.publish("alert",{type:"success",message:this.errorStrings.successfulSave}),this.resultsWidget.onClose(),E.publish("updateNavTree",
!1);else{var b=this._getErrorMessage(a.data.errStatus);E.publish(b.noticeType,{message:b.msg,type:b.type})}return a}),l.hitch(this,function(a){this._onInitError(a);this._endUpdate();return a}));f.always(l.hitch(this,function(){b.showCancelOption(!1)}));return f}this._endUpdate();b&&b.showCancelOption(!1);c.msg?E.publish("sticky",{type:"error",message:c.msg}):console.error("Schedule.js - _save(): Invalid input but no message",c)}},_checkValidation:function(){var a="",b=!0;"properties"===this.view&&
0===this.nameTB.get("value").replace(/^\s+|\s+$/gm,"").length&&(b=!1,a=this.errorStrings.emptyESName);return{valid:b,msg:a}},_cancellableSave:function(a,b){this._beginUpdate()&&(this.saveDeferred=new c,rc.xhr.requestNow(a),this.cancelPath="scheduleTree/",this.saveDeferred.then(l.hitch(this,this._parseSaveResponse,b),l.hitch(this,this._parseSaveError)))},_parseSaveResponse:function(a,b){this._endUpdate();a.showCancelOption(!1);G.widget.clear();200===b.errStatus?(this._treeStore.data=[],this.fetch(),
E.publish("alert",{type:"success",message:this.errorStrings.successfulSave}),this.resultsWidget.onCloseResults()):this._displayErrorMessage(b.errStatus);return b},_parseSaveError:function(a,b){this._endUpdate();a.showCancelOption(!1);G.widget.clear();b===this.errorStrings.userCancelled?this._displayErrorMessage(511):console.error(this.declaredClass+" - _cancellableSave(): Unexpected error",e);return b},_displayErrorMessage:function(a){a=this._getErrorMessage(a);E.publish(a.noticeType,{message:a.msg,
type:a.type})},isInTreeList:function(a){var b=0,c;for(c in this._treeList.map)this._treeList.map[c].data.objId===a.objId&&b++;return 1<b},removeDuplicates:function(a,b){var c=[];p.forEach(b,l.hitch(this,function(b){var f=0,d;for(d in this._treeList.map)this._treeList.map[d].data.objId===a.map[b.id].data.objId&&f++;1<f&&c.push(a.map[b.id].data.objId)}));0<c.length&&this.buildDialogBox(c,null,this._dndInvalidTypes.DuplicateSchedule,!0)},fetch:function(){this.scheduleTreeToolbar.showCancelOption(!1);
if(this._beginUpdate()){var a=rc.xhr.request({path:"scheduletree/",type:"rest",method:"GET",siteId:this.site,enterpriseScheduleId:this.schedule,view:this.view});a.then(l.hitch(this,function(a){502===a.data.errStatus?this._onInitError(this._getErrorMessage(a.data.errStatus)):this._parseScheduleTreeFetch(a);return a}),l.hitch(this,function(a){this._onInitError(a);return a}));a.always(l.hitch(this,this._endUpdate));return a}},_parseScheduleTreeFetch:function(a){G.widget.clear();this._schedNameChanged&&
(this._hash="schedule",this._buildHash(),window.location.hash=this._hash);this.fillFields(a);this.resetSelectAll();"properties"===this.view?this.setDirty(!1,this.propertiesCommitButtons.saveButton):"scheduleTree"===this.view&&(this.setDirty(!1,this.saveButton),this.scheduleTreeToolbar.resetSelectAll());this.onInitSuccess()},defaultColoursChanged:function(){var a=this.defaultColours;p.forEach(this._treeStore.data,function(b){b.set("defaultColours",a)})},_setupPropertyListeners:function(){null===this._nameListener&&
(this._nameListener=w(this.nameTB,"change",l.hitch(this,function(a){this.setDirty(a!==this.esName,this.propertiesCommitButtons.saveButton)})));null===this._defaultColourListener&&(this._defaultColourListener=w(this.defaultColourSelector,"change",l.hitch(this,function(){this.setDirty(!0,this.propertiesCommitButtons.saveButton)})));null===this._summaryColourListener&&(this._summaryColourListener=w(this.colourSelector,"change",l.hitch(this,function(){this.setDirty(!0,this.propertiesCommitButtons.saveButton)})));
null===this._cleanupListener&&(this._cleanupListener=w(this.enabledCleanup,"change",l.hitch(this,function(a){this.setDirty(a!==this.cleanupEnabled,this.propertiesCommitButtons.saveButton);this.enabledCleanup.getValue()?(d.remove(this.daysToExpireSettings,"hidden"),d.remove(this.timeToRun,"hidden")):(d.add(this.daysToExpireSettings,"hidden"),d.add(this.timeToRun,"hidden"))})));null===this._numDaysListener&&(this._numDaysListener=w(this.numDaysTB,"change",l.hitch(this,function(a){this.setDirty(a!==
this.cleanupDaysDormant,this.propertiesCommitButtons.saveButton)})));null===this._numDaysOnDemandListener&&(this._numDaysOnDemandListener=w(this.numDaysOnDemandTB,"keyup",l.hitch(this,function(){isNaN(this.numDaysOnDemandTB.get("value"))?this.clearExpiredEventsNowButton.set("disabled",!0):this.clearExpiredEventsNowButton.set("disabled",!1)})));null===this._cleanupTimeListener&&(this._cleanupTimeListener=w(this.cleanupTimeTB,"change",l.hitch(this,function(a){this.setDirty(a!==this.cleanupTime,this.propertiesCommitButtons.saveButton)})));
null===this._incrementListener&&(this._incrementListener=w(this.minuteIncrementSelect,"change",l.hitch(this,function(a){this.setDirty(Number(a)!==this.minuteIncrement,this.propertiesCommitButtons.saveButton)})));null===this._currencyListener&&(this._currencyListener=w(this.currencySelect,"change",l.hitch(this,function(a){var b=!1,b="none"===a?"none"!==this.currency&&null!==this.currency:a!==this.currency;this.setDirty(b,this.propertiesCommitButtons.saveButton)})));null===this._approvalRequiredListener&&
(this._approvalRequiredListener=w(this.approvalRequiredCB,"change",l.hitch(this,function(){this.setDirty(this.approvalRequiredCB.get("checked")!==this.approvalRequired,this.propertiesCommitButtons.saveButton)})))},_getErrorMessage:function(a){var b={msg:this.errorStrings.unexpectedError,type:"error",noticeType:"sticky"};switch(a){case 501:b.msg=this.errorStrings.duplicateSchedule;break;case 502:b.msg=this.errorStrings.scheduleDoesNotExist;break;case 504:b.msg=this.errorStrings.unexpectedError;break;
case 505:b.msg=this.errorStrings.siteDoesNotExist;break;case 506:b.msg=this.errorStrings.insufficientPriviledges;break;case 510:b.msg=this.errorStrings.validationInProgress;b.type="info";break;case 511:b.msg=this.errorStrings.userCancelled;b.type="info";break;case 517:b.msg=this.errorStrings.systemDoesNotExist;break;default:console.error(this.declaredClass+" - _getErrorMessage(): Invalid Error Status",a)}return b},fillFields:function(a){var b=this.esDataType=a.data.esDataType;"properties"===this.view&&
this._fillProperties(a.data.properties,b);"scheduleTree"===this.view&&(this.defaultColours=a.data.properties.defaultColours,this._fillScheduleTree(a.data.scheduleTree));this._setLabels();this._buildAuditLogContext()},_buildAuditLogContext:function(){webview.auditUtil.setContextDataWithSiteId(this.site,[{systemId:null,objectName:"#EnterpriseSchedule"+this.schedule}],this.title)},_fillScheduleTree:function(a){for(var b=x(".treeItemContainer",this._treeList.node),c=0;c<b.length;c++)n.destroy(b[c]),this._treeStore.remove(b[c].id);
this._treeList.clearItems();var f=[];p.forEach(a,l.hitch(this,function(a){this._flattenScheduleTree(a,f)}));this._originalScheduleStore=new y({data:f});this.createNodesBasedOnData(f);this._setTotals()},_fillProperties:function(a,b){this.defaultColours=a.defaultColours;this.defaultColoursChanged();this.esName=B.decode(a.esName);this.nameTB.set("value",this.esName);g.set(this.dataTypeContainer,"innerHTML",b);this.showColourSelector(b);0<this.defaultColours.length&&(this.defaultColourSelector.set("DEFAULT_COLOURS",
this.defaultColours),this.defaultColourSelector.setType("default"));"undefined"!==typeof a.approvalRequired&&(this.approvalRequired=a.approvalRequired,this.approvalRequiredCB.set("checked",this.approvalRequired));var c=null;this.colourSelector.setType(b);d.add(this.currencySelectionContainer,"hidden");switch(b){case F.primitiveTypes.ENUMERATED:d.remove(this.currencySelectionContainer,"hidden");this.esType=F.primitiveTypes.ENUMERATED;g.set(this.dataTypeContainer,"innerHTML",this.rcStrings.binary);
c=a.binaryColours;void 0===c.onColour&&(c.onColour="#0000FF");void 0===c.offColour&&(c.offColour="#FF0000");this.colourSelector.updateBinaryColours([c.onColour,c.offColour]);break;case F.primitiveTypes.REAL:this.esType=F.primitiveTypes.REAL;c=a.analogColours;g.set(this.dataTypeContainer,"innerHTML",this.rcStrings.analog);p.forEach(c,l.hitch(this,function(a){this.colourSelector.addRow(new I({colour:a.colour,state:a.value.toString(),dataType:b}))}));break;case F.primitiveTypes.UNSIGNED_INTEGER:this.esType=
F.primitiveTypes.UNSIGNED_INTEGER;c=a.multiStateColours;g.set(this.dataTypeContainer,"innerHTML",this.webviewStrings.multistate);p.forEach(c,l.hitch(this,function(a){this.colourSelector.addRow(new I({colour:a.colour,state:a.label,dataType:b}))}));break;default:console.error(this.declaredClass+" - fillFields(): Invalid Data Type",this.esDataType)}this.currency=null===a.currency?"none":a.currency;this.currencySelect.set("value",this.currency);this.minuteIncrement=a.minuteIncrement;this.minuteIncrementSelect.set("value",
this.minuteIncrement);this.cleanupEnabled=a.cleanupEnabled;this.enabledCleanup.set("checked",this.cleanupEnabled);this.disabledCleanup.set("checked",!this.cleanupEnabled);this.cleanupDaysDormant=a.cleanupDaysDormant;this.numDaysTB.set("value",this.cleanupDaysDormant);this.cleanupTime=a.cleanupTime;this.cleanupTimeTB.set("value",this.cleanupTime);this.cleanupTimeTB.set("validator",l.hitch(this,function(a){return this.timeValidation(a)}));this.clearExpiredEventsNowButton.set("disabled",!0);null!==this._nameListener&&
(this._nameListener.remove(),this._nameListener=null);null!==this._defaultColourListener&&(this._defaultColourListener.remove(),this._defaultColourListener=null);null!==this._summaryColourListener&&(this._summaryColourListener.remove(),this._summaryColourListener=null);null!==this._cleanupListener&&(this._cleanupListener.remove(),this._cleanupListener=null);null!==this._numDaysListener&&(this._numDaysListener.remove(),this._numDaysListener=null);null!==this._cleanupTimeListener&&(this._cleanupTimeListener.remove(),
this._cleanupTimeListener=null);null!==this._numDaysOnDemandListener&&(this._numDaysOnDemandListener.remove(),this._numDaysOnDemandListener=null);this._setupPropertyListeners()},timeValidation:function(a){var b=!1;a.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9]):([0-5]?[0-9])$/)?b=!0:a.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])$/)&&(b=!0);return b},_flattenScheduleTree:function(a,b){var c=p.filter(b,function(b){return b.id===a.id});0>=c&&b.push(a);for(var f=0;f<a.schedules.length;f++)0<a.schedules[f].schedules.length?
this._flattenScheduleTree(a.schedules[f],b):(c=[],c=p.filter(b,function(b){return b.id===a.schedules[f].id}),0>=c&&b.push(a.schedules[f]))},createNodesBasedOnData:function(a){for(var b=0;b<a.length;b++){var c=this.generateScheduleTreeObject(a[b]),f=null;if("null"!==a[b].parent){var f=p.filter(a,function(c){return c.id===a[b].parent})[0],d;for(d in this._treeList.map)if(this._treeList.map[d].data.objId===f.mnemonic+"|"+f.systemId){c.parent=d;break}f=r.byId(c.parent)}this._treeList.insertNodes(!1,[c]);
var g=r.byId(Object.keys(this._treeList.map).pop());this.indentChild=void 0!==c.parent;this._placeNewNode(null,[g.node],f,g)}this._toggleHintArea()},generateScheduleTreeObject:function(a){return{scheduleColor:a.color,objId:a.mnemonic+"|"+a.systemId,schedName:B.decode(a.label),bacnetID:a.mnemonic,systemId:a.systemId?a.systemId:-1,sysName:a.sysName,colourSet:!0,defaultColours:this.defaultColours,rate:Number(a.rate)||this._defaultRate,childItems:[]}},treeNodeCreator:function(a){var b=new K({currency:this.currency,
scheduleColor:a.scheduleColor,objId:a.bacnetID+"|"+a.systemId,schedName:B.decode(a.schedName),bacnetID:a.bacnetID,systemId:a.systemId?a.systemId:-1,sysName:a.sysName,depth:a.depth,colourSet:a.colourSet||!1,parent:void 0!==a.parent?a.parent:null,esDataType:this.esDataType,defaultColours:this.defaultColours,childItems:void 0!==a.childItems?a.childItems:[],rate:a.rate?a.rate:this._defaultRate});b.on("delete",l.hitch(this,this._deleteTreeNode));b.setDepth(b.depth,this.indentSize);b.on("editModeChange",
l.hitch(this,this.disableDnD));b.on("change",l.hitch(this,function(a){this._treeList.selectNone();d.add(a.domNode,"dojoDndItem");this.setDirty(!0,this.saveButton)},b));b.on("rateChange",l.hitch(this,function(a,b){a.rate=b;this._setTotals()},b));0>=p.filter(this._treeStore.data,function(b){return b.bacnetID+"|"+b.systemId===a.bacnetID+"|"+a.systemId}).length&&this._treeStore.put(b);return{node:b.domNode,data:a,type:["treeNode"]}},_pointsNodeCreator:function(a,b){var c=null;"avatar"===b?c=(new M({sysId:a.systemId,
deviceName:a.deviceName,pointName:a.schedName,pointMnemonic:a.bacnetID,pointType:"Schedules",childItems:a.childItems,sysName:a.sysName,siteUrlPath:a.urlPath?a.urlPath:this.siteUrl,displayName:a.schedName})).domNode:(c=n.toDom(v.substitute(C,{currency:this.currency,sysName:a.sysName||this.site,bacnetID:a.bacnetID,deviceName:a.deviceName,schedName:a.schedName,systemId:a.systemId?a.systemId:-1,objId:a.bacnetID+"|"+a.systemId,rate:a.rate||this._defaultRate})),g.set(c,"title",a.schedName+"("+a.bacnetID+
")"));return{node:c,data:a,type:["resultNode"]}},_setupPointSourceListeners:function(a){this.own(h.after(a,"onDndDrop",a.selectNone))},insertPoint:function(a,b){a.insertNodes(!1,[{sysName:b.sysName,systemId:b.sysId?b.sysId:-1,bacnetID:b.pointMnemonic,schedName:b.pointName,deviceName:b.deviceName,objId:b.pointMnemonic+"|"+b.sysId,depth:-1}])},_setSupportedTypes:function(){this._supportedObjectTypes=[this.objectTypeMap.schedules]},_validateScheduleTree:function(){var a={path:"validateScheduleTree/",
type:"rest",method:"POST",load:l.hitch(this,function(a){return this._checkProgress(a.data,"validateScheduleTree")}),error:l.hitch(this,function(a){this.saveDeferred.reject(a);return a}),params:z.stringify({siteId:this.site,entId:this.schedule,scheduleTree:this._getChildArray()})};G.widget.clear();this.saveDeferred=new c;this.cancelPath="schedule/dataType";rc.xhr.request(a);this.cancelHandle=w(this.scheduleTreeToolbar.cancelSaveButton.toolbarButtonIcon,"click",l.hitch(this,function(){this._cancelRequest();
this.saveDeferred.cancel(this.errorStrings.userCancelled);this.saveDeferred=null;this.cancelHandle.remove()}));this.saveDeferred.then(l.hitch(this,this._treeValidationComplete),l.hitch(this,function(a){this.scheduleTreeToolbar.showCancelOption(!1);G.widget.clear();if(a===this.errorStrings.userCancelled){var b=this._getErrorMessage(511);E.publish(b.noticeType,{message:b.msg,type:b.type})}else console.error(this.declaredClass+" - _validateDataType(): Unexpected error occured",a);return a}))},_treeValidationComplete:function(a){G.widget.clear();
0===a.schedules.length||0===a.users.length?this._validateDataType():this.buildDialogBox(a.schedules,a.users,this._dndInvalidTypes.PermissionsReset,!1,!0)},_validateDataType:function(){this.scheduleTreeToolbar.disableCancelSaveOption(!0);this.cancelHandle.remove();var a=[];p.forEach(this._treeStore.data,function(b){a.push({bacnetID:b.bacnetID,systemId:b.systemId})});var b={path:"schedule/dataType",type:"rest",method:"POST",timeout:4E4,load:l.hitch(this,function(a){return this._checkProgress(a.data,
"schedule/dataType")}),error:l.hitch(this,function(a){this.saveDeferred.reject(a);return a}),params:z.stringify({esDataType:this.esDataType,entId:this.schedule,siteId:this.site,schedules:a})};G.widget.clear();this.saveDeferred=new c;this.cancelPath="schedule/dataType";rc.xhr.request(b);this.saveDeferred.then(l.hitch(this,this._validationComplete),l.hitch(this,function(a){this.scheduleTreeToolbar.showCancelOption(!1);G.widget.clear();if(a===this.errorStrings.userCancelled){var b=this._getErrorMessage(511);
E.publish(b.noticeType,{message:b.msg,type:b.type})}else console.error(this.declaredClass+" - _validateDataType(): Unexpected error occured",a);return a}))},_validationComplete:function(a){for(var b={},c=[],f=[],d=l.hitch(this,function(){E.publish("alert",{type:"success",message:this.errorStrings.successfulValidate});var a={path:"scheduleTree/",type:"rest",method:"POST",load:l.hitch(this,function(a){return this._checkProgress(a.data,"scheduleTree")}),error:l.hitch(this,function(a){this.saveDeferred.reject(a);
return a}),siteId:this.site,params:z.stringify({siteId:this.site,entId:this.schedule,esDataType:this.esDataType,properties:null,scheduleTree:this._getChildArray()})};this._validateApprovalSessionWithReason(a).then(l.hitch(this,function(){G.widget.clear();E.publish("alert",{type:"info",message:this.errorStrings.saveInProgress});this._cancellableSave(a,this.scheduleTreeToolbar)}),function(){})}),g=l.hitch(this,function(){this.scheduleTreeToolbar.onsaveClicked()}),f=x(".treeFolder \x3e .treeItemContainer \x3e .scheduleTreeItem \x3e .bacnetLabel",
this.scheduleTreeContainerNode),h=0;h<f.length;h++)f[h]=f[h].innerHTML;p.forEach(a.results,l.hitch(this,function(a){if(!b[a.bacnetID]){b[a.bacnetID]=a;for(var d=0;d<f.length;d++)a.bacnetID===f[d]&&c.push(a)}}));if(1===a.results.length&&200===a.results[0].errStatus)d();else{var n=[],q=[],m=[],u=[],t=!1;a=l.hitch(this,function(a){0===this._originalScheduleStore.query(l.hitch(this,this.scheduleExistedBefore,a)).length&&(t=!0);switch(a.errStatus){case 507:n.push(a.bacnetID+"|"+a.systemId);break;case 508:q.push(a.bacnetID+
"|"+a.systemId);break;case 509:m.push(a.bacnetID+"|"+a.systemId);break;case 513:u.push(a.bacnetID+"|"+a.systemId)}});p.forEach(c,a);0<m.length?this.buildDialogBox(m,null,this._dndInvalidTypes.AlreadyInUse,!1,t,d,g):0<n.length?this.buildDialogBox(n,null,this._dndInvalidTypes.InvalidDataType,!1,t,d,g):0<u.length?this.buildDialogBox(u,null,this._dndInvalidTypes.WrongRev,!0,t,d,g):0<q.length?this.buildDialogBox(q,null,this._dndInvalidTypes.Unreachable,!1,t,d,g):(E.publish("sticky",{type:"error",message:"\x3cp\x3e"+
k.unexpected+"\x3c/p\x3e\x3cp\x3e"+k.couldNotSave+" "+k.pleaseTryAgain+"\x3c/p\x3e"}),this.scheduleTreeToolbar.showCancelOption(!1));m=q=n=null}},scheduleExistedBefore:function(a,b){return a.bacnetID===b.mnemonic&&Number(a.systemId)===Number(b.systemId)},_checkProgress:function(a,b){var c=-1;"scheduleTree"===b||"validateScheduleTree"===b?(this._processId=a.processId,c=a.errStatus):(this._processId=a.progress.processId,c=a.progress.errStatus);if(510===c){if("CleanupSchedulesForEnterpriseSchedule"===
b||"ClearSchedulesForES"===b||"schedule/dataType"===b)c="",c="schedule/dataType"===b?this.errorStrings.validationInProgress:this.errorStrings.clearingSchedules,c=[c,"\x3cbr /\x3e",a.progress.completed,this.webviewStrings.outOf,a.progress.outOf].join(" "),E.publish("alert",{type:"info",message:c});this._pollForStatus(b)}else this.saveDeferred.resolve(a)},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_pollForStatus:function(a){this._clearPollingTimer();this._pollForStatusTimer=
setTimeout(l.hitch(this,function(){return rc.xhr.request({type:"rest",method:"GET",path:a+"/status",processId:this._processId||-1,abort:0,load:l.hitch(this,function(b){if(b.data)return this._checkProgress(b.data,a)}),error:l.hitch(this,function(a){E.publish("sticky",{type:"error",message:"\x3cp\x3e"+k.unexpected+"\x3c/p\x3e\x3cp\x3e"+k.couldNotSave+" "+k.pleaseTryAgain+"\x3c/p\x3e"});this.scheduleTreeToolbar.showCancelOption(!1);this.saveDeferred.reject(a);return a})})}),500);return this.saveDeferred},
_cancelRequest:function(){this._clearPollingTimer();rc.xhr.requestNow({type:"rest",method:"GET",path:this.cancelPath+"/status",processId:this._processId||-1,abort:1});this._processId=-1},getNodeByObjId:function(a,b,c){if(null===a||void 0===a)return null;var f=null,d;for(d in b.map)if(b.map[d].data.objId===a&&(f=d,!c))break;return f},buildDialogBox:function(a,b,c,f,d,g,k){b=this.buildDialogMessage(c,a,b,f,d);this.schedulesDialog.set("text",b);var h=this.schedulesDialog.on("close",l.hitch(this,function(b){f&&
p.forEach(a,l.hitch(this,function(a){a=this.getNodeByObjId(a,this._treeList,f);a=r.byId(a);this._deleteTreeNode(a)}));switch(b){case P.returnValues.oneOrYes:switch(c){case this._dndInvalidTypes.InvalidDataType:case this._dndInvalidTypes.Unreachable:"function"===typeof g&&g();break;case this._dndInvalidTypes.DepthOutOfRange:case this._dndInvalidTypes.DuplicateSchedule:break;case this._dndInvalidTypes.AlreadyInUse:d=!0;this.scheduleTreeToolbar.showCancelOption(!1);break;case this._dndInvalidTypes.PermissionsReset:this._validateDataType();
break;default:"function"===typeof k&&k(),this.scheduleTreeToolbar.showCancelOption(!1)}break;case P.returnValues.none:this._cancelSave();this.scheduleTreeToolbar.showCancelOption(!1);break;default:console.error(this.declaredClass+" - buildDialogBox(): Unknown choice",b)}h.remove()}));this.own(h);G.widget.clear();this.schedulesDialog.open()},buildDialogMessage:function(a,b,c,f,d){var g=d="";switch(a){case this._dndInvalidTypes.InvalidDataType:this.schedulesDialog.set("type",P.types.binary);this.schedulesDialog.set("title",
this.webviewStrings.invalidDataTypeTitle);d=this.webviewStrings.invalidDataTypePre;g=this.webviewStrings.invalidDataTypePost;break;case this._dndInvalidTypes.Unreachable:this.schedulesDialog.set("type",P.types.binarySave);this.schedulesDialog.set("title",this.webviewStrings.unreachableScheduleTitle);d=this.webviewStrings.unreachableSchedulePre;g=this.webviewStrings.unreachableSchedulePost;break;case this._dndInvalidTypes.AlreadyInUse:this.schedulesDialog.set("type",P.types.informative);this.schedulesDialog.set("title",
this.webviewStrings.alreadyInUseScheduleTitle);d=this.webviewStrings.alreadyInUseSchedulePre;g=this.webviewStrings.alreadyInUseSchedulePost;break;case this._dndInvalidTypes.DuplicateSchedule:this.schedulesDialog.set("type",P.types.informative);this.schedulesDialog.set("title",this.webviewStrings.duplicateBlockTitle);d=this.webviewStrings.duplicateBlockPre;g=this.webviewStrings.duplicateBlockPost;break;case this._dndInvalidTypes.DepthOutOfRange:this.schedulesDialog.set("type",P.types.informative);
this.schedulesDialog.set("title",this.webviewStrings.depthOutOfRangeTitle);d=this.webviewStrings.depthOutOfRangePre;g=this.webviewStrings.depthOutOfRangePost;break;case this._dndInvalidTypes.WrongRev:this.schedulesDialog.set("type",P.types.informative);this.schedulesDialog.set("title",this.webviewStrings.wrongRevisionTitle);d=this.webviewStrings.wrongRevisionPre;g=this.webviewStrings.wrongRevisionPost;break;case this._dndInvalidTypes.PermissionsReset:this.schedulesDialog.set("type",P.types.binary);
this.schedulesDialog.set("title",this.webviewStrings.permissionsReset);d=this.webviewStrings.permissionsResetPre;g=this.webviewStrings.permissionsResetPost;g+="\x3cul \x3e";p.forEach(c,l.hitch(this,function(a){g+='\x3cli class\x3d"warningDialogItem"\x3e'+a.name+"\x3c/li\x3e"}));g+="\x3c/ul\x3e";break;default:console.error(this.declaredClass+" - buildDialogBox(): Invalid invalidType",a)}var k=d+'\x3cul class\x3d"warningDialogItems"\x3e';a===this._dndInvalidTypes.PermissionsReset?p.forEach(b,l.hitch(this,
function(a){null!==a.name&&(k+='\x3cli class\x3d"warningDialogItem"\x3e'+a.name+"\x3c/li\x3e")})):p.forEach(b,l.hitch(this,function(b){b=this.getNodeByObjId(b,this._treeList,f);if(b=r.byId(b))b.wipe=a===this._dndInvalidTypes.InvalidDataType?!0:!1,a!==this._dndInvalidTypes.DepthOutOfRange&&b.setInvalid(),k+='\x3cli class\x3d"warningDialogItem"\x3e'+b.schedName+" ("+b.bacnetID+")\x3c/li\x3e"}));return k+='\x3c/ul\x3e\x3cspan class\x3d"mainDialogText"\x3e'+g+"\x3c/span\x3e"},getProperties:function(a){var b=
this.currencySelect.get("value"),b={siteId:this.site,entId:this.schedule,esDataType:this.esDataType,esName:B.encode(this.nameTB.get("value")),cleanupEnabled:this.enabledCleanup.checked,cleanupDaysDormant:this.numDaysTB.get("value"),cleanupTime:this.cleanupTimeTB.get("value"),currency:"none"===b||this.esDataType!==F.primitiveTypes.ENUMERATED?null:b,approvalRequired:this.approvalRequiredCB.get("checked"),minuteIncrement:Number(this.minuteIncrementSelect.get("value")),properties:{defaultColours:null,
binaryColours:null,multiStateColours:null,analogColours:null},scheduleTree:null};b.properties.defaultColours=this.defaultColourSelector.getData();switch(this.esDataType){case F.primitiveTypes.ENUMERATED:b.properties.binaryColours=this.colourSelector.getData();break;case F.primitiveTypes.REAL:b.properties.analogColours=this.colourSelector.getData();break;case F.primitiveTypes.UNSIGNED_INTEGER:b.properties.multiStateColours=this.colourSelector.getData();break;default:console.error(this.declaredClass+
" - getProperties(): Invalid Data Type",this.esDataType)}b={path:"schedule/properties",type:"rest",method:"POST",params:z.stringify(b)};this._save(b,a)},_onSelectAllClicked:function(){var a=x(".tree-item-checkbox",this.builderWidget.domNode);p.forEach(a,l.hitch(this,function(a){r.byNode(a).set("checked",this._isSelectAll)}));var b;this._isSelectAll?(a="selectAllIcon",b="deselectAllIcon",this.selectAllTooltip.set("label",f.deselectAll)):(a="deselectAllIcon",b="selectAllIcon",this.selectAllTooltip.set("label",
f.selectAll));d.remove(this.selectAllButton.toolbarButtonIcon,a);d.add(this.selectAllButton.toolbarButtonIcon,b);this._isSelectAll=!this._isSelectAll},onDeleteClicked:function(){var a=this._getSelectedNodes();p.forEach(a,l.hitch(this,function(a){a&&this._deleteTreeNode(a)}));this.resetSelectAll();this.emit("deleteClicked")},resetSelectAll:function(){this._isSelectAll=!0;d.remove(this.selectAllButton.toolbarButtonIcon,"deselectAllIcon");d.add(this.selectAllButton.toolbarButtonIcon,"selectAllIcon")},
_getChildCosts:function(a){var b=a.rate;if(0===a.childItems.length)return a.set("total",0),a.rate;for(var c=0;c<a.childItems.length;++c)b+=this._getChildCosts(a.childItems[c]);b!==a.rate?a.set("total",b):a.set("total",0);return b},_setTotals:function(){this._treeStore.query({parent:null}).forEach(l.hitch(this,this._getChildCosts))},_cancelSave:function(){this.saveDeferred&&(this._cancelRequest(),this.saveDeferred.cancel(),this.saveDeferred=null)},destroy:function(){this._clearPollingTimer();null!==
this._treeStore&&p.forEach(this._treeStore.data,function(a){a.destroy()});this._treeStore=null;null!==this._treeList&&this._treeList.destroy();this.manager=null;null!==this.schedulesDialog&&this.schedulesDialog.destroy();null!==this._nameListener&&(this._nameListener.remove(),this._nameListener=null);null!==this._defaultColourListener&&(this._defaultColourListener.remove(),this._defaultColourListener=null);null!==this._summaryColourListener&&(this._summaryColourListener.remove(),this._summaryColourListener=
null);null!==this._cleanupListener&&(this._cleanupListener.remove(),this._cleanupListener=null);null!==this._numDaysListener&&(this._numDaysListener.remove(),this._numDaysListener=null);null!==this._cleanupTimeListener&&(this._cleanupTimeListener.remove(),this._cleanupTimeListener=null);null!==this._numDaysOnDemandListener&&(this._numDaysOnDemandListener.remove(),this._numDaysOnDemandListener=null);null!==this._userContent&&this._userContent.destroy();this._cancelSave();this.inherited(arguments)},
loadUserContent:function(){this._userContent||(d.add(this.containerNode,"hidden"),d.add(this._topContent,"hidden"),this._loadUserContent("EnterpriseSchedule"+this.schedule))},destroyRecursive:function(){this.destroy();this.inherited(arguments)}})})},"webview/admin/schedules/ColourSelectorItem":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/ValidationTextBox dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/Evented dojo/on dojo/text!./templates/colourSelectorItem.html dojox/html/entities rc/bacnet/enums ../../widget/ColorPicker".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return h("webview/admin/schedules/ColourSelectorItem",[p,m,r,n],{templateString:b,state:"",dataType:"",colour:"#4A2150",_colorPicker:null,_valueInput:null,postCreate:function(){this.inherited(arguments);this._buildContent()},_buildContent:function(){this._setupColourPicker();var b="rcTextBox";switch(this.dataType){case k.primitiveTypes.ENUMERATED:case "default":d.add(this.deleteNode,"hidden");d.remove(this.valueLabel,"hidden");b+=" hidden";break;case k.primitiveTypes.REAL:d.add(this.valueLabel,
"hidden");break;case k.primitiveTypes.UNSIGNED_INTEGER:d.remove(this.valueLabel,"hidden");b+=" hidden";break;default:console.error("ColourSelectorItem.js - _buildContent(): Invalid Data Type",this.dataType)}this._valueInput=new l({baseClass:b,required:!0,validator:c.hitch(this,this.validateInput),value:t.decode(this.state)},this.valueInputContainer);g.set(this.valueLabel,"innerHTML",this.state);this.own(a(this._valueInput,"change",c.hitch(this,this.onChange)));this.own(a(this.deleteNode,"click",c.hitch(this,
this.remove)))},_setupColourPicker:function(){this._colorPicker=new q({color:this.colour},this.colorPickerNode);this.own(a(this._colorPicker,"blurred",c.hitch(this,function(a){if(this.colour.toLowerCase()!==a.toLowerCase())this.onChange(a)})))},onChange:function(a){this.emit("change",a)},validateInput:function(a){return this.type!==k.primitiveTypes.REAL&&this.type!==k.primitiveTypes.UNSIGNED_INTEGER?!0:this.type===k.primitiveTypes.UNSIGNED_INTEGER?""!==a:!isNaN(a)&&""!==a},updateValues:function(){this._valueInput.isValid()&&
(this.state=t.encode(this._valueInput.get("value")),this.colour=this._colorPicker.get("color"))},setColourValue:function(a){this.colour=a;this._colorPicker.set("color",this.colour)},remove:function(){this.emit("delete",this)}})})},"webview/widget/ColorPicker":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/Evented dojo/on dojo/text!webview/widget/templates/ColorPicker.html webview/widget/DojoxColorPicker".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return l("webview/widget/ColorPicker",[p,m,r,d],{widgetsInTemplate:!0,templateString:a,DEFAULT_COLOR:"#cccccc",color:null,postCreate:function(){this.inherited(arguments);null===this.color&&this.set("color",this.DEFAULT_COLOR);this.colorPicker=new b({value:this.color,showHsv:!1,webSafe:!1,baseClass:"rcColorPicker",liveUpdate:!0},this.colorPickerNode);g.set(this.colorIndicator,"backgroundColor",this.color);this.own(n(this.colorPicker,"blur",h.hitch(this,function(){c.add(this.colorPickerContainer,
"hidden");this.colorPicker.Rval.blur();this.colorPicker.Bval.blur();this.colorPicker.Gval.blur();this.set("color",this.colorPicker.get("value"));g.set(this.colorIndicator,"backgroundColor",this.color);this.onBlurred(this.color)})));this.own(n(this.colorPicker.hexCode,"keyup",h.hitch(this,function(a){7===a.target.value.length&&this.colorPicker.set("value",a.target.value)})));this.own(n(this.colorIndicator,"click",h.hitch(this,function(){c.remove(this.colorPickerContainer,"hidden");this.colorPicker.startup();
this.colorPicker.focus()})));this.own(n(this.colorPicker,"change",h.hitch(this,"onChange")))},onBlurred:function(a){this.emit("blurred",a);return a},onChange:function(a){this.set("color",a);this.emit("change")},_formatHexColourString:function(a){a.startsWith("0x")&&(a=a.substring(2));a.startsWith("#")||(a="#"+a);return a},_setColorAttr:function(a){a=a?this._formatHexColourString(a):this.color;this._set("color",a);this.colorPicker&&(this.colorPicker.value=this.color);g.set(this.colorIndicator,"backgroundColor",
this.color)}})})},"webview/widget/DojoxColorPicker":function(){define("dijit/_base/focus dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/fx dojo/has dojox/widget/ColorPicker".split(" "),function(r,p,m,l,h,c,g){return p("webview/widget/ColorPicker",g,{_setPoint:function(d){var g=this.PICKER_SAT_SELECTOR_H/2,a=this.PICKER_SAT_SELECTOR_W/2;c("ff")?(g=d.layerY-g,a=d.layerX-a):(g=d.offsetY-g,a=d.offsetX-a);d&&r.focus(d.target);this.animatePoint?h.slideTo({node:this.cursorNode,duration:this.slideDuration,
top:g,left:a,onEnd:l.hitch(this,function(){this._updateColor(!0);r.focus(this.cursorNode)})}).play():(m.style(this.cursorNode,{left:a+"px",top:g+"px"}),this._updateColor(!1))},_setHuePoint:function(c){c=c.offsetY-this.PICKER_HUE_SELECTOR_H/2;this.animatePoint?h.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:c,left:0,onEnd:l.hitch(this,function(){this._updateColor(!1);r.focus(this.hueCursorNode)})}).play():(m.style(this.hueCursorNode,"top",c+"px"),this._updateColor(!1))}})})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),
function(r,p,m,l,h,c,g,d){c.focus=function(g){if(g){var a="node"in g?g.node:g,b=g.bookmark;g=g.openedForWindow;var l=b?b.isCollapsed:!1;if(a){var k="iframe"==a.tagName.toLowerCase()?a.contentWindow:a;if(k&&k.focus)try{k.focus()}catch(q){}c._onFocusNode(a)}if(b&&h.withGlobal(g||h.global,d.isCollapsed)&&!l){g&&g.focus();try{h.withGlobal(g||h.global,d.moveToBookmark,null,[b])}catch(q){}}}};c.watch("curNode",function(c,a,b){d._curFocus=b;d._prevFocus=a;b&&l.publish("focusNode",b)});c.watch("activeStack",
function(c,a,b){d._activeStack=b});c.on("widget-blur",function(c,a){l.publish("widgetBlur",c,a)});c.on("widget-focus",function(c,a){l.publish("widgetFocus",c,a)});m.mixin(d,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return d.getBookmark().isCollapsed},getBookmark:function(){return(h.global==window?g:new g.SelectionManager(h.global)).getBookmark()},moveToBookmark:function(c){return(h.global==window?g:new g.SelectionManager(h.global)).moveToBookmark(c)},getFocus:function(g,a){var b=!c.curNode||
g&&p.isDescendant(c.curNode,g.domNode)?d._prevFocus:c.curNode;return{node:b,bookmark:b&&b==c.curNode&&h.withGlobal(a||h.global,d.getBookmark),openedForWindow:a}},_activeStack:[],registerIframe:function(d){return c.registerIframe(d)},unregisterIframe:function(c){c&&c.remove()},registerWin:function(d,a){return c.registerWin(d,a)},unregisterWin:function(c){c&&c.remove()}});return d})},"dojox/widget/ColorPicker":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/connect dojo/_base/sniff dojo/_base/window dojo/_base/event dojo/dom dojo/dom-class dojo/keys dojo/fx dojo/dnd/move dijit/registry dijit/_base/focus dijit/form/_FormWidget dijit/typematic dojox/color dojo/i18n dojo/i18n!./nls/ColorPicker dojo/i18n!dojo/cldr/nls/number dojo/text!./ColorPicker/ColorPicker.html".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C){r.experimental("dojox.widget.ColorPicker");return p("dojox.widget.ColorPicker",w,{showRgb:!0,showHsv:!0,showHex:!0,webSafe:!0,animatePoint:!0,slideDuration:250,liveUpdate:!1,PICKER_HUE_H:150,PICKER_SAT_VAL_H:150,PICKER_SAT_VAL_W:150,PICKER_HUE_SELECTOR_H:8,PICKER_SAT_SELECTOR_H:10,PICKER_SAT_SELECTOR_W:10,value:"#ffffff",_underlay:require.toUrl("dojox/widget/ColorPicker/images/underlay.png"),_hueUnderlay:require.toUrl("dojox/widget/ColorPicker/images/hue.png"),
_pickerPointer:require.toUrl("dojox/widget/ColorPicker/images/pickerPointer.png"),_huePickerPointer:require.toUrl("dojox/widget/ColorPicker/images/hueHandle.png"),_huePickerPointerAlly:require.toUrl("dojox/widget/ColorPicker/images/hueHandleA11y.png"),templateString:C,postMixInProperties:function(){b.contains(d.body(),"dijit_a11y")&&(this._huePickerPointer=this._huePickerPointerAlly);this._uId=f.getUniqueId(this.id);m.mixin(this,y.getLocalization("dojox.widget","ColorPicker"));m.mixin(this,y.getLocalization("dojo.cldr",
"number"));this.inherited(arguments)},postCreate:function(){this.inherited(arguments);7>g("ie")&&(this.colorUnderlay.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this._underlay+"', sizingMethod\x3d'scale')",this.colorUnderlay.src=this._blankGif.toString());this.showRgb||(this.rgbNode.style.visibility="hidden");this.showHsv||(this.hsvNode.style.visibility="hidden");this.showHex||(this.hexNode.style.visibility="hidden");this.webSafe||(this.safePreviewNode.style.visibility=
"hidden")},startup:function(){this._started||(this._started=!0,this.set("value",this.value),this._mover=new q.boxConstrainedMoveable(this.cursorNode,{box:{t:-(this.PICKER_SAT_SELECTOR_H/2),l:-(this.PICKER_SAT_SELECTOR_W/2),w:this.PICKER_SAT_VAL_W,h:this.PICKER_SAT_VAL_H}}),this._hueMover=new q.boxConstrainedMoveable(this.hueCursorNode,{box:{t:-(this.PICKER_HUE_SELECTOR_H/2),l:0,w:0,h:this.PICKER_HUE_H}}),this._subs=[],this._subs.push(c.subscribe("/dnd/move/stop",m.hitch(this,"_clearTimer"))),this._subs.push(c.subscribe("/dnd/move/start",
m.hitch(this,"_setTimer"))),this._keyListeners=[],this._connects.push(z.addKeyListener(this.hueCursorNode,{charOrCode:t.UP_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,m.hitch(this,this._updateHueCursorNode),25,25)),this._connects.push(z.addKeyListener(this.hueCursorNode,{charOrCode:t.DOWN_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,m.hitch(this,this._updateHueCursorNode),25,25)),this._connects.push(z.addKeyListener(this.cursorNode,{charOrCode:t.UP_ARROW,shiftKey:!1,metaKey:!1,
ctrlKey:!1,altKey:!1},this,m.hitch(this,this._updateCursorNode),25,25)),this._connects.push(z.addKeyListener(this.cursorNode,{charOrCode:t.DOWN_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,m.hitch(this,this._updateCursorNode),25,25)),this._connects.push(z.addKeyListener(this.cursorNode,{charOrCode:t.LEFT_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,m.hitch(this,this._updateCursorNode),25,25)),this._connects.push(z.addKeyListener(this.cursorNode,{charOrCode:t.RIGHT_ARROW,shiftKey:!1,
metaKey:!1,ctrlKey:!1,altKey:!1},this,m.hitch(this,this._updateCursorNode),25,25)))},_setValueAttr:function(a,b){this._started&&this.setColor(a,b)},setColor:function(a,b){a=x.fromString(a);this._updatePickerLocations(a);this._updateColorInputs(a);this._updateValue(a,b)},_setTimer:function(b){if(b.node==this.cursorNode||b.node==this.hueCursorNode)u.focus(b.node),a.setSelectable(this.domNode,!1),this._timer=setInterval(m.hitch(this,"_updateColor"),45)},_clearTimer:function(b){this._timer&&(clearInterval(this._timer),
this._timer=null,this.onChange(this.value),a.setSelectable(this.domNode,!0))},_setHue:function(a){h.style(this.colorUnderlay,"backgroundColor",x.fromHsv(a,100,100).toHex())},_updateHueCursorNode:function(a,b,c){if(-1!==a){a=h.style(this.hueCursorNode,"top");b=this.PICKER_HUE_SELECTOR_H/2;a+=b;var f=!1;c.charOrCode==t.UP_ARROW?0<a&&(--a,f=!0):c.charOrCode==t.DOWN_ARROW&&a<this.PICKER_HUE_H&&(a+=1,f=!0);f&&h.style(this.hueCursorNode,"top",a-b+"px")}else this._updateColor(!0)},_updateCursorNode:function(a,
b,c){b=this.PICKER_SAT_SELECTOR_H/2;var f=this.PICKER_SAT_SELECTOR_W/2;if(-1!==a){a=h.style(this.cursorNode,"top");var d=h.style(this.cursorNode,"left");a+=b;var d=d+f,g=!1;c.charOrCode==t.UP_ARROW?0<a&&(--a,g=!0):c.charOrCode==t.DOWN_ARROW?a<this.PICKER_SAT_VAL_H&&(a+=1,g=!0):c.charOrCode==t.LEFT_ARROW?0<d&&(--d,g=!0):c.charOrCode==t.RIGHT_ARROW&&d<this.PICKER_SAT_VAL_W&&(d+=1,g=!0);g&&(d-=f,h.style(this.cursorNode,"top",a-b+"px"),h.style(this.cursorNode,"left",d+"px"))}else this._updateColor(!0)},
_updateColor:function(a){var b=this.PICKER_HUE_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_H/2,f=this.PICKER_SAT_SELECTOR_W/2,b=h.style(this.hueCursorNode,"top")+b,c=h.style(this.cursorNode,"top")+c,f=h.style(this.cursorNode,"left")+f,b=Math.round(360-b/this.PICKER_HUE_H*360),f=x.fromHsv(b,f/this.PICKER_SAT_VAL_W*100,100-c/this.PICKER_SAT_VAL_H*100);this._updateColorInputs(f);this._updateValue(f,a);b!=this._hue&&this._setHue(b)},_colorInputChange:function(a){var b,c=!1;switch(a.target){case this.hexCode:b=
x.fromString(a.target.value);c=!0;break;case this.Rval:case this.Gval:case this.Bval:b=x.fromArray([this.Rval.value,this.Gval.value,this.Bval.value]);c=!0;break;case this.Hval:case this.Sval:case this.Vval:b=x.fromHsv(this.Hval.value,this.Sval.value,this.Vval.value),c=!0}c&&(this._updatePickerLocations(b),this._updateColorInputs(b),this._updateValue(b,!0))},_updateValue:function(a,b){var c=a.toHex();this.value=this.valueNode.value=c;if(b&&(!this._timer||this.liveUpdate))this.onChange(c)},_updatePickerLocations:function(a){var b=
this.PICKER_HUE_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_H/2,f=this.PICKER_SAT_SELECTOR_W/2;a=a.toHsv();b=Math.round(this.PICKER_HUE_H-a.h/360*this.PICKER_HUE_H)-b;f=Math.round(a.s/100*this.PICKER_SAT_VAL_W)-f;c=Math.round(this.PICKER_SAT_VAL_H-a.v/100*this.PICKER_SAT_VAL_H)-c;this.animatePoint?(k.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:b,left:0}).play(),k.slideTo({node:this.cursorNode,duration:this.slideDuration,top:c,left:f}).play()):(h.style(this.hueCursorNode,"top",b+"px"),
h.style(this.cursorNode,{left:f+"px",top:c+"px"}));a.h!=this._hue&&this._setHue(a.h)},_updateColorInputs:function(a){var b=a.toHex();this.showRgb&&(this.Rval.value=a.r,this.Gval.value=a.g,this.Bval.value=a.b);this.showHsv&&(a=a.toHsv(),this.Hval.value=Math.round(a.h),this.Sval.value=Math.round(a.s),this.Vval.value=Math.round(a.v));this.showHex&&(this.hexCode.value=b);this.previewNode.style.backgroundColor=b;this.webSafe&&(this.safePreviewNode.style.backgroundColor=b)},_setHuePoint:function(a){var b=
this.PICKER_HUE_SELECTOR_H/2;a=a.layerY||a.y-a.target.getBoundingClientRect().top;a-=b;this.animatePoint?k.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:a,left:0,onEnd:m.hitch(this,function(){this._updateColor(!0);u.focus(this.hueCursorNode)})}).play():(h.style(this.hueCursorNode,"top",a+"px"),this._updateColor(!0))},_setPoint:function(a){var b=this.PICKER_SAT_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_W/2,f=a.layerY||a.y-a.target.getBoundingClientRect().top,f=f-b,b=a.layerX||a.x-
a.target.getBoundingClientRect().left,b=b-c;a&&u.focus(a.target);this.animatePoint?k.slideTo({node:this.cursorNode,duration:this.slideDuration,top:f,left:b,onEnd:m.hitch(this,function(){this._updateColor(!0);u.focus(this.cursorNode)})}).play():(h.style(this.cursorNode,{left:b+"px",top:f+"px"}),this._updateColor(!0))},_handleKey:function(a){},focus:function(){this.focused||u.focus(this.focusNode)},_stopDrag:function(a){n.stop(a)},destroy:function(){this.inherited(arguments);l.forEach(this._subs,function(a){c.unsubscribe(a)});
delete this._subs}})})},"dojox/color":function(){define(["./color/_base"],function(r){return r})},"webview/admin/schedules/ScheduleTreeItem":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/DropDownMenu dijit/form/CheckBox dijit/form/DropDownButton dijit/MenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/currency dojo/dom-attr dojo/dom-class dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/string dojo/text!./templates/scheduleTreeItem.html dojo/topic dojox/html/entities dojox/widget/ColorPicker rc/bacnet/enums ../../util/globalConstants ../widget/DialogRateEdit dijit/InlineEditBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H){return n("webview/admin/schedules/ScheduleTreeItem",[p,r,m,u],{templateString:A,_colorPicker:null,_dialogRateEdit:null,editMenu:null,scheduleColor:"#4A2150",schedName:"",currency:null,rateString:null,rate:0,total:0,bacnetID:"",systemId:-1,id:"",childItems:null,scheduleDataArray:null,wipe:!1,esDataType:"",cbNode:null,colourSet:!1,depth:-1,parent:null,hiddenFields:null,indentSize:30,defaultColours:null,MAX_NAME_LENGTH:50,constructor:function(){this.webviewStrings=
z;this.rcStrings=w;this.errorStrings=x},postCreate:function(){this.inherited(arguments);this.scheduleDataArray=[];this.hiddenFields={};if(null===this.defaultColours||void 0===this.defaultColours)this.defaultColours="#2C97DE #E94B35 #F2C500 #008D9C #0F527D #CB10B7 #336633".split(" ");this.buildEditMenu();f.set(this.scheduleColorIndicator,"backgroundColor",this.scheduleColor);this.cbNode=new h({},this.scheduleTreeCBContainer);q.add(this.cbNode.domNode,"tree-item-checkbox");this.createHiddenFields();
this.setOnClicks();this._showChildren(this,!0);this.setValue("schedName",E.encode(this.schedName));this.set("rate",this.rate)},_setSchedNameAttr:function(a){this._set("schedName",a.replace(/[\n\r]/g," "))},buildEditMenu:function(){null!==this.editMenu&&(this.editMenu=null);this.editMenu=new l({baseClass:"webviewContextMenu"});this.editMenu.addChild(new g({label:this.webviewStrings.editScheduleName,baseClass:"webviewContextMenuItem",onClick:a.hitch(this,this.editSchedName)}));this.editMenu.addChild(new g({label:this.webviewStrings.defaultColour,
baseClass:"webviewContextMenuItem",onClick:a.hitch(this,function(){this.colourSet=!1;this.setDepth(this.depth,this.indentSize,!0);this.onChange()})}));this.editMenu.addChild(new g({label:this.webviewStrings.setScheduleColour,baseClass:"webviewContextMenuItem",onClick:a.hitch(this,this.openColourPicker)}));this.esDataType===D.primitiveTypes.ENUMERATED&&this.editMenu.addChild(new g({label:this.webviewStrings.setScheduleRate,baseClass:"webviewContextMenuItem",onClick:a.hitch(this,this.openRateEditor)}));
this.editMenu.addChild(new g({label:this.webviewStrings.editScheduleDelete,baseClass:"webviewContextMenuItem",onClick:a.hitch(this,this.remove)}));new c({showLabel:!1,dropDown:this.editMenu,iconClass:"rc24Icon editIcon",baseClass:"webviewDropDownButton"},this.enableEditNode)},buildColourPicker:function(){null===this._colorPicker&&(this._colorPicker=new B({value:this.scheduleColor,showHsv:!1,webSafe:!1,baseClass:"rcColorPicker",liveUpdate:!0},this.colorPickerNode),this.own(y(this._colorPicker,"blur",
a.hitch(this,this.onColorUpdated))),this.own(y(this._colorPicker,"click",a.hitch(this,this.onColorUpdated))),this.own(y(this._colorPicker.cursorNode,"click",a.hitch(this,this.onColorUpdated))),this.own(y(this._colorPicker.hexCode,"keyup",a.hitch(this,function(a){7===a.target.value.length&&this._colorPicker.set("value",a.target.value)}))))},onColorUpdated:function(){var a=this._colorPicker.get("value");q.add(this.colorPickerContainer,"hidden");this._colorPicker.Rval.blur();this._colorPicker.Bval.blur();
this._colorPicker.Gval.blur();this.colourSet=!0;if(a.toLowerCase()!==this.scheduleColor.toLowerCase().trim())this.onChange();this.scheduleColor=this._colorPicker.get("value");f.set(this.scheduleColorIndicator,"backgroundColor",this.scheduleColor);this.onEditModeChange(!1)},buildRateDialog:function(){null===this._dialogRateEdit&&(this._dialogRateEdit=new H({value:this.rate,valueName:this.schedName}),this.own(b.after(this._dialogRateEdit._dialog,"hide",a.hitch(this,function(){this.onEditModeChange(!1)}))))},
createHiddenFields:function(){this.hiddenFields.schedNameTB=this.scheduleName;this.own(this.scheduleName.watch("value",a.hitch(this,function(a,b,c){c=E.encode(c);c!==b&&this.setValue("schedName",c)})))},setOnClicks:function(){this.own(y(this.scheduleColorIndicator,"click",a.hitch(this,this.openColourPicker)),y(window,"click",a.hitch(this,this._closeScheduleNameEditor)));this.own(y(this.expandNode,"click",a.hitch(this,function(){q.contains(this.expandNode,"expandIcon")?this._showChildren(this,!0):
q.contains(this.expandNode,"collapseIcon")&&this._showChildren(this,!1)})));this.own(y(this.editNodeIcon,"click",a.hitch(this,function(){"none"!==f.get(this.editMenu,"display")&&null!==this.editMenu&&this.editMenu.focus()})))},openColourPicker:function(){this.buildColourPicker();this.onEditModeChange(!0);q.remove(this.colorPickerContainer,"hidden");this._colorPicker.value=this.scheduleColor;this._colorPicker.startup();this._colorPicker.focus()},openRateEditor:function(){this.buildRateDialog();this.onEditModeChange(!0);
this._dialogRateEdit.show(this.rate,this)},editSchedName:function(){this.scheduleName.edit()},revertPendingChanges:function(){this.setValue("schedName",this.schedName);this.onEditModeChange(!1)},setValue:function(a,b){if("rate"===a)this.set("rate",b);else{if("schedName"===a){if(b.length>this.MAX_NAME_LENGTH){this.hiddenFields.schedNameTB.set("value",this.schedName);C.publish("sticky",{type:"info",message:v.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])});return}if(this.schedName!==
b)this.onChange();this.scheduleName.set("value",E.decode(b))}this[a]=E.decode(b)}},onEditModeChange:function(a){q.toggle(this.domNode,"dojoDndItem",!a);this.emit("editModeChange",a)},modifyChildren:function(a,b){for(var c=0;c<this.childItems.length&&this.childItems[c].id!==a.id;c++);b?this.childItems.splice(c,1):(c<this.childItems.length&&this.childItems.splice(c,1),this.childItems.push(a));0<this.childItems.length?f.set(this.expandNode,"visibility","visible"):f.set(this.expandNode,"visibility","hidden")},
getData:function(a,b){a||(this.scheduleDataArray=[],a=this,b=this.scheduleDataArray);for(var c=0;c<a.childItems.length;c++){a.childItems[c].scheduleDataArray=[];var f=this.getData(a.childItems[c],a.childItems[c].scheduleDataArray);0>=d.filter(b,function(a){return a.uniqueId===f.uniqueId}).length&&b.push(f)}return{uniqueId:a.objId,label:E.encode(a.schedName),mnemonic:a.bacnetID,systemId:a.systemId,color:a.scheduleColor,rate:this.esDataType===D.primitiveTypes.ENUMERATED?a.rate:0,wipe:a.wipe,schedules:b}},
_closeScheduleNameEditor:function(a){this.scheduleName.editing&&!1===("INPUT"===a.target.nodeName||q.contains(a.target,"rcTextBox"))&&this.scheduleName.save()},_showChildren:function(b,c){c?(q.remove(b.expandNode,"expandIcon"),q.add(b.expandNode,"collapseIcon")):(q.add(b.expandNode,"expandIcon"),q.remove(b.expandNode,"collapseIcon"));d.forEach(b.childItems,a.hitch(this,function(a){q.toggle(a.domNode,"collapsedChild",!c);0<a.childItems.length&&this._showChildren(a,c)}))},setInvalid:function(){q.add(this.contentNode,
"invalid")},setDepth:function(a,b,c){var d=void 0!==this.depth&&this.depth!==a;this.depth=a;if(d||c)this.scheduleColor=this.getDefaultColour(),this.buildColourPicker(),this._colorPicker.set("value",this.scheduleColor);f.set(this.scheduleColorIndicator,"backgroundColor",this.scheduleColor);a=f.get(this.expandNode,"width");c=b*this.depth;f.set(this.contentNode,"marginLeft",c+a+"px");f.set(this.expandNode,"marginLeft",c+"px");if(0<this.childItems.length)for(a=0;a<this.childItems.length;a++)this.childItems[a].setDepth(this.depth+
1,b)},_setRateAttr:function(a){var b="";0<a&&(null!==this.currency&&F.CurrencyToSymbol.hasOwnProperty(this.currency)?this.rateString=t.format(a,{currency:this.currency,symbol:F.CurrencyToSymbol[this.currency]}):this.rateString=a.toFixed(2),b=this.rateString+z.scheduleRate);if(0<this.total)var c="",c=null!==this.currency&&F.CurrencyToSymbol.hasOwnProperty(this.currency)?t.format(this.total,{currency:this.currency,symbol:F.CurrencyToSymbol[this.currency]}):this.total.toFixed(2),c=[" (",c,z.scheduleRate,
" ",this.rcStrings.rtrTotal.toLowerCase(),")"],b=b+c.join("");k.set(this.rateLabel,"innerHTML",b);k.set(this.rateLabel,"title",b);q.toggle(this.rateLabel,"hidden",0===a&&0===this.total);if(this.rate!==a)this.onRateChange(a);this.rate=a},_setTotalAttr:function(a){this.total=a;this.set("rate",this.rate)},onRateChange:function(a){this.emit("rateChange",a);this.onChange()},onChange:function(){this.emit("change",null)},getDefaultColour:function(){return this.defaultColours[this.depth%this.defaultColours.length]},
remove:function(){this.emit("delete",this)},destroy:function(){this.inherited(arguments);this.hiddenFields=null}})})},"webview/admin/widget/DialogRateEdit":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/string dojo/text!webview/admin/widget/templates/DialogRateEdit.html dojo/_base/declare dijit/Dialog dijit/form/ValidationTextBox dijit/form/Button".split(" "),function(r,p,m,l,h,c,g,d,n){return n("rc/reliable/_group/DialogEdit",
[p,r,m],{value:null,valueName:null,templateString:d,webviewStrings:c,rcStrings:h,treeItem:null,buildRendering:function(){this.inherited(arguments);this._valueRate.set("invalidMessage",g.substitute(this.webviewStrings.valueMustHaveLessThanXDecimal,["2"]));l.set(this.errorTextContainer,"innerHTML",g.substitute(this.webviewStrings.valueMustHaveLessThanXDecimal,["2"]))},postCreate:function(){this.inherited(arguments);this._errorDialog.set("title",h.invalidInput)},show:function(a,b){void 0!==a&&(this.value=
a);null!==this.valueName&&(this._dialog.titleNode.innerHTML=this.webviewStrings.setScheduleRateDlg+this.valueName);this.treeItem=b;this._valueRate.set("value",this.value.toFixed(2));this._dialog.show();this._valueRate.focus();this._valueRate.focusNode.select()},_onClickCancel:function(){this._dialog.hide()},_onClickOk:function(){this._valueRate.isValid()?(this.treeItem.set("rate",Number(this._valueRate.value)),this._dialog.hide()):this._errorDialog.show()},_closeErrorDialog:function(){this._errorDialog.hide()}})})},
"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,
x,y,v,A,C,E,B){x=l("dijit._InlineEditor",[z,x,y],{templateString:B,contextRequire:r,postMixInProperties:function(){this.inherited(arguments);this.messages=n.getLocalization("dijit","common",this.lang);p.forEach(["buttonSave","buttonCancel"],function(a){this[a]||(this[a]=this.messages[a])},this)},buildRendering:function(){this.inherited(arguments);var a="string"==typeof this.editor?t.getObject(this.editor)||r(this.editor):this.editor,b=this.sourceStyle,c="line-height:"+b.lineHeight+";",f=d.getComputedStyle(this.domNode);
p.forEach(["Weight","Family","Size","Style"],function(a){f["font"+a]!=b["font"+a]&&(c+="font-"+a+":"+b["font"+a]+";")},this);p.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(a){this.domNode.style[a]=b[a]},this);var k=this.inlineEditBox.width;"100%"==k?(c+="width:100%;",this.domNode.style.display="block"):c+="width:"+(k+(Number(k)==k?"px":""))+";";k=t.delegate(this.inlineEditBox.editorParams,{style:c,dir:this.dir,lang:this.lang,
textDir:this.textDir});this.editWidget=new a(k,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,g.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var a=this.editWidget;this.inlineEditBox.autoSave?this.own(m.after(a,"onChange",t.hitch(this,"_onChange"),!0),k(a,"keydown",t.hitch(this,"_onKeyDown"))):"intermediateChanges"in a&&(a.set("intermediateChanges",!0),this.own(m.after(a,
"onChange",t.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var a=this.editWidget;return String(a.get("displayedValue"in a||"_getDisplayedValueAttr"in a?"displayedValue":"value"))},_onKeyDown:function(a){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&!a.altKey&&!a.ctrlKey&&(a.keyCode==b.ESCAPE?(a.stopPropagation(),a.preventDefault(),this.cancel(!0)):a.keyCode==b.ENTER&&"INPUT"==a.target.tagName&&(a.stopPropagation(),a.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&
this.enableSave()&&w.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(w._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){C.selectInputText(this.editWidget.focusNode)}))}});z=l("dijit.InlineEditBox"+(q("dojo-bidi")?"_NoBidi":""),z,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",renderAsHtml:!1,editor:E,
editorWrapper:x,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=q("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(k(this.displayNode,u,t.hitch(this,"_onClick")),k(this.displayNode,"mouseover, focus",t.hitch(this,"_onMouseOver")),k(this.displayNode,"mouseout, blur",t.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=t.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);c.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(b){a.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",b)},_setDisabledAttr:function(a){this.domNode.setAttribute("aria-disabled",a?"true":"false");a?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);c.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",a);this._set("disabled",a)},_onMouseOver:function(){this.disabled||c.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){c.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(a){this.disabled||(a&&(a.stopPropagation(),a.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
h.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var a=g.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?t.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:d.getComputedStyle(this.displayNode),save:t.hitch(this,"save"),cancel:t.hitch(this,"cancel"),
textDir:this.textDir},a);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var b=this.wrapperWidget;c.add(this.displayNode,"dijitOffScreen");c.remove(b.domNode,"dijitOffScreen");d.set(b.domNode,{visibility:"visible"});h.set(this.displayNode,"tabIndex","-1");var k=b.editWidget,l=this;f(k.onLoadDeferred,t.hitch(b,function(){k.set("displayedValue"in k||"_setDisplayedValueAttr"in k?"displayedValue":"value",l.value);this.defer(function(){b.saveButton&&b.saveButton.set("disabled",
"intermediateChanges"in k);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(a){var b=this.wrapperWidget;d.set(b.domNode,{visibility:"hidden"});c.add(b.domNode,"dijitOffScreen");c.remove(this.displayNode,"dijitOffScreen");h.set(this.displayNode,"tabIndex",this._savedTabIndex);a&&
w.focus(this.displayNode)},save:function(a){if(!this.disabled&&this.editing){this._set("editing",!1);var b=this.wrapperWidget.getValue();this.set("value",b);this._showText(a)}},setValue:function(b){a.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(a){a=t.trim(a);var b=this.renderAsHtml?a:a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":b||this.noValueIndicator;this._set("value",a);this._started&&this.defer(function(){this.onChange(a)})},getValue:function(){a.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(a){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(a))}});q("dojo-bidi")&&(z=l("dijit.InlineEditBox",
z,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));z._InlineEditor=x;return z})},"webview/admin/_dndTreeBase":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dnd/Manager dojo/dnd/Source dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/store/Memory dojo/store/Observable ./_dndAvatar ./_Widget ./SearchableWidget".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w){return m("webview/admin/_dndTreeBase",
[u,w],{_dirty:!1,_dndInvalidTypes:{AlreadyInUse:"alredyInUse",DepthOutOfRange:"depthOutOfRange",DuplicateSchedule:"duplicateSchedule",InvalidDataType:"invalidDataType",PermissionsReset:"permissionsReset",Unreachable:"unreachable",WrongRev:"wrongRev"},_path:"",_treeList:null,_treeStore:null,_updating:!1,DEFAULT_DELAY:15,dndAvatar:f,dndItemClass:"treeItemContainer",indentChild:!1,indentSize:30,manager:null,outdentChild:-1,placeBefore:!1,preventDuplicates:!0,constructor:function(){this._setSupportedTypes()},
postCreate:function(){this.inherited(arguments);this._setupManager();this._createTreeBuilder()},buildDialogBox:function(a,b,c){},checkAcceptance:function(a,b){return this.inherited(arguments)},disableDnD:function(a){this._treeList.delay=a?Number.MAX_VALUE:this.DEFAULT_DELAY;a||this._treeList.selectNone()},isInTreeList:function(a){},removeDuplicates:function(a,b){},revertPendingChanges:function(){for(var a=t(".treeItemContainer ",this._treeList.node),b,c=0;c<a.length;c++)a[c].id&&(b=r.byId(a[c].id),
b.revertPendingChanges())},setDirty:function(a,b){this._dirty=a;this._setDirty([b],a)},treeNodeCreator:function(a){},_addChild:function(b,c){a.place(c.domNode,b.domNode,"after");if(0<c.childItems.length)for(var f=0;f<c.childItems.length;f++)c.indentSize!==b.indentSize&&this._addParent(c,b),this._addChild(c,c.childItems[f])},_addParent:function(a,b){this._getParents(b,[]);if(this.preventDuplicates){var c=[];b.depth>=this._MAX_DEPTH&&(c.push(a.objId),b=r.byId(b.parent));c=this._enforceMaxDepth(a,b,
b.depth+1,c);0<c.length&&this.buildDialogBox(c,null,this._dndInvalidTypes.DepthOutOfRange,!1)}a.parent=b.id;a.setDepth(b.depth+1,this.indentSize);for(var c=t("."+this.dndItemClass,this._treeList.node),f=[],d=c.length;d;d--){var g=r.byId(c[d-1].id);g&&g.depth===a.depth&&g.parent===a.parent&&f.push(r.byId(c[d-1].id))}p.forEach(f,l.hitch(this,function(a){b.modifyChildren(a,!1);this._addChild(b,a)}));this._treeStore.put(b,{overwrite:!0})},_afterDrop:function(a,c,f,d,g){c=this._reduceNodeList(c);f=null;
g=g.target;if(!n.contains(g,"rootFolder")){if(g&&!1===n.contains(g,this._treeNodeClass))if(!1===n.contains(g,"dojoDndItem"))g=g.parentNode;else{f=null;for(var k=g.children.length-1;0<=k;--k)if(f=g.children[k],n.contains(f,this._treeNodeClass)){g=f;break}}f=this._getNearestDijitNode(g)}try{this._placeNewNode(a,c,f,null,d);var h="."+this._treeNodeClass,l=t(h,c[0])[0];for(g=!1;l&&f&&b.get(t(h,f.domNode)[0],"marginLeft")>b.get(l,"marginLeft")&&f.parent;){var q=r.byId(f.parent);if(null===q)break;else g=
!0,f=q}g&&this._placeNewNode(a,c,f,null,d)}catch(F){if("HierarchyRequestError"!==F.name||!this.preventDuplicates)throw console.error(this.declaredClass+" - _createTreeBuilder(): Unexpected error occured while trying to place node",F),F;}this.preventDuplicates&&this.removeDuplicates(a,c)},_beginUpdate:function(){return this._updating?!1:this._updating=!0},_checkForIndent:function(a){this._showRootNodePreview(!1);var c=t(".treeFolder").position();if((n.contains(a.target.parentNode,this.dndItemClass)||
n.contains(a.target.parentNode,"treeFolder")||n.contains(a.target.parentNode,"treeContainer"))&&this._treeList.isDragging){var f=null;this.placeBefore=!1;if(n.contains(a.target,"rootFolder"))if(a.touches){var d=a.touches[0];b.get(this._treeList.node,"paddingTop")>d.pageY-c[0].y&&(this.placeBefore=!0,this._showRootNodePreview(!0))}else b.get(this._treeList.node,"paddingTop")>a.offsetY&&0<a.offsetY&&(this.placeBefore=!0,this._showRootNodePreview(!0));else f=this._getNearestDijitNode(a.target),this._showRootNodePreview(!1);
null!==f&&(this.indentChild=!1,this.outdentChild=-1,this._treeList.before=!1,d=0,a.touches?(d=a.touches[0],f.depth*this.indentSize<=d.pageX-c[0].x-this.indentSize?(this.indentChild=!0,d=this.indentSize*(f.depth+1)):(f.depth-1)*this.indentSize>d.pageX-c[0].x-this.indentSize?(this.outdentChild=Math.floor((d.pageX-c[0].x)/this.indentSize),d=this.indentSize*this.outdentChild):d=this.indentSize*f.depth):f.depth*this.indentSize<=a.offsetX-this.indentSize?(this.indentChild=!0,d=this.indentSize*(f.depth+
1)):(f.depth-1)*this.indentSize>a.offsetX-this.indentSize?(this.outdentChild=Math.floor(a.offsetX/this.indentSize),d=this.indentSize*this.outdentChild):d=this.indentSize*f.depth,d+=b.get(f.expandNode,"width"),b.set(f.afterPlaceHolder,"marginLeft",d+"px"))}},_createTreeBuilder:function(){var b=a.create("div",{"class":"treeContainer treeContainerBordered"});this.treeContainerDomNode=b;a.create("span",{"class":"dndHint",innerHTML:this.webviewStrings.dndHintNavTree},b,"last");var c=a.create("div",{"class":"treeFolder rootFolder treeContainer"},
b,"last");this._treeStore=new q(new k({}));this._treeList=new d(c,{creator:l.hitch(this,this.treeNodeCreator),copyOnly:!1,allowNested:!0,autoSync:!0,delay:this.DEFAULT_DELAY,skipForm:!0,accept:["treeNode","resultNode"],maxNodes:this.MAX_NODES,checkAcceptance:l.hitch(this._treeList,this.checkAcceptance)});this.own(h.before(this._treeList,"onDndStart",l.hitch(this,function(a,b){a===this._treeList&&p.forEach(b,l.hitch(this,function(a){var b=r.byId(a.id);0<b.childItems.length&&this._hideChildren(b);n.add(a,
"hidden")}))})));this.own(h.after(this._treeList,"onMouseMove",l.hitch(this,function(a,b){this._checkForIndent(b[0])})));this.own(h.after(this._treeList,"onMouseDown",l.hitch(this,function(a){t(".dojoDndTarget div").removeClass("customSelected");this._highlightSelectedNodes(this._treeList.getSelectedNodes())})));this.own(h.after(this._treeList,"onDndDrop",l.hitch(this,this._afterDrop),!0));this.own(h.after(this._treeList,"onDndCancel",l.hitch(this,function(){this._treeList.selectNone();for(var a in this._treeList.map){var c=
r.byId(a).domNode;n.remove(c,"hidden")}this._toggleHintArea();a=t(".dojoDndItemBefore",b);p.forEach(a,function(a){n.remove(a,"dojoDndItemBefore")});this._showRootNodePreview(!1)})));this.builderWidget.setMainContent(b)},_deleteTreeNode:function(a){this._removeAllChildren(a);this._removeSingleNode(a);this._toggleHintArea()},_endUpdate:function(){this._updating&&(this._updating=!1)},_enforceMaxDepth:function(a,b,f,d){if(f>=this._MAX_DEPTH)this._setChildrensParent(a,b,d);else{var g=new c;p.forEach(a.childItems,
l.hitch(this,function(b){g.then(l.hitch(this,this._enforceMaxDepth,b,a,f+1,d))}));this.own(g);g.resolve()}return d},_findLastChild:function(a){0<a.childItems.length&&(a=this._findLastChild(a.childItems[0]));return a},_getChildArray:function(){this._treeList.sync();var a=t("."+this.dndItemClass,this._treeList.node),a=p.filter(a,function(a){return null===r.byId(a.id).parent||void 0===r.byId(a.id).parent}),b=[];p.forEach(a,function(a){a=r.byId(a.id);b.push(a.getData())});return b},_getNearestDijitNode:function(a){for(var b=
r.byId(a.id);!b;)a=a.parentNode,b=r.byId(a.id);return b?b:null},_getParentAtDepth:function(a,b){return-1===b?null:null===a.parent||void 0===a.parent||a.depth===b?a:this._getParentAtDepth(r.byId(a.parent),b)},_getParents:function(a,b){if(null===a.parent)return b;var c=r.byId(a.parent);b.push(c);this._getParents(c,b)},_getSelectedNodes:function(){var a=t(".tree-item-checkbox",this.builderWidget.domNode),a=p.filter(a,function(a){return r.byNode(a).get("checked")}),b=[];p.forEach(a,function(a){b.push(r.byNode(a.parentElement.parentElement))});
return b},_hideChildren:function(a){for(var b=0;b<a.childItems.length;b++)0<a.childItems[b].childItems.length&&this._hideChildren(a.childItems[b]),n.add(a.childItems[b].domNode,"hidden")},_highlightSelectedNodes:function(a){p.forEach(a,l.hitch(this,function(a){n.add(a,"customSelected");a=this._treeStore.query({id:a.id});0<a.length&&(a=a[0],0<a.childItems.length&&this._highlightAllChildren(a.childItems))}))},_highlightAllChildren:function(a){p.forEach(a,l.hitch(this,function(a){n.add(a.domNode,"customSelected");
0<a.childItems.length&&this._highlightAllChildren(a.childItems)}))},_placeNewNode:function(b,c,f,d,g){for(var k=c.length-1;0<=k;k--){var h=c[k];if(void 0===d||null===d)if(b===g)d=r.byId(h.id);else for(var h=b.getItem(h.id),l=Object.keys(g.map),q=l.length-1;0<=q;q--){var m=l[q];if(g.map[m].data===h.data){d=r.byId(m);break}}if(null===f||d.id!==f.id){l=null;if(this.indentChild&&f)d.parent!==f.id&&(l=r.byId(d.parent),null!==l&&(l.modifyChildren(d,!0),this._treeStore.put(l,{overwrite:!0}))),this._addChild(f,
d),this._addParent(d,f);else if(f&&f.parent)h=null,h=-1<this.outdentChild?this._getParentAtDepth(r.byId(f.parent),this.outdentChild-1):r.byId(f.parent),null!==d&&(l=r.byId(d.parent)),null!==l&&(l.modifyChildren(d,!0),this._treeStore.put(l,{overwrite:!0})),-1<this.outdentChild?(this._addChild(f,d),null!==h?this._addParent(d,h):(d.parent=null,d.setDepth(0,this.indentSize))):(l=this._findLastChild(f),this._addChild(l,d),this._addParent(d,h));else{null!==d&&(l=r.byId(d.parent));null!==l&&(l.modifyChildren(d,
!0),this._treeStore.put(l,{overwrite:!0}));d.parent=null;d.setDepth(0,this.indentSize);this.placeBefore&&a.place(d.domNode,this._treeList.node.firstChild,"before");if(d.childItems&&0<d.childItems.length)for(h=0;h<d.childItems.length;h++)this._addChild(d,d.childItems[h]);if(f&&f.childItems&&0<f.childItems.length)for(h=0;h<f.childItems.length;h++)this._addChild(f,f.childItems[h])}d._showChildren(d,n.contains(d.expandNode,"collapseIcon"));this._treeStore.put(d,{overwrite:!0});d=null}}this.placeBefore=
this.indentChild=!1;this.outdentChild=-1;this.setDirty(!0,this.saveButton)},_reduceNodeList:function(a){var b=[],c=a.filter(function(a){return-1===a.id.indexOf("dojo")}).map(function(a){return a.id});for(i=0;i<c.length;i++)for(var f=this._treeStore.query({id:c[i]}),f=0<f.length?f[0].parent:null,d=c[i];f;)-1<c.indexOf(f)&&-1===b.indexOf(d)&&b.push(d),d=f,f=this._treeStore.query({id:f}),f=0<f.length?f[0].parent:null;return a=a.filter(function(a){return-1===b.indexOf(a.id)})},_removeAllChildren:function(a){if(0===
a.childItems.length)this._removeSingleNode(a);else for(;0<a.childItems.length;)this._removeAllChildren(a.childItems[0])},_removeSingleNode:function(b){b.parent&&r.byId(b.parent).modifyChildren(b,!0);this._treeList.delItem(b.domNode.id);a.destroy(b.domNode);this._treeStore.remove(b.id);this.setDirty(!0,this.saveButton)},_setChildrensParent:function(a,b,c){p.forEach(a.childItems,l.hitch(this,function(a){c.push(a.objId);this._setChildrensParent(a,b,c);this._addParent(a,b)}));a.childItems=[];a.modifyChildren(null,
!0)},_setDirty:function(a,b){var c=b?n.remove:n.add,f=b?n.add:n.remove;p.forEach(a,l.hitch(this,function(a){f(a.toolbarButtonIcon,"dirtySaveIcon");c(a.toolbarButtonIcon,"saveIcon")}))},_setupManager:function(){this.manager=g.manager();this.manager.OFFSET_X=-10;this.manager.OFFSET_Y=10;this.manager.makeAvatar=l.hitch(this,function(){return new this.dndAvatar(this.manager)})},_showRootNodePreview:function(a){try{var c=r.byId(this._treeList.node.firstChild.id);c&&(b.set(c.beforePlaceHolder,"marginLeft",
b.get(c.expandNode,"width")+"px"),n.toggle(c.beforePlaceHolder,"hidden",!a))}catch(y){}},_toggleHintArea:function(){var a=null,b=null;if(0>=Object.keys(this._treeList.map).length){if(a=t(".noBorder",this.builderWidget.domNode)[0])b=t(".dndHint",a)[0],n.add(a,"treeContainerBordered"),n.remove(a,"noBorder"),n.remove(b,"hidden")}else if(a=t(".treeContainerBordered",this.builderWidget.domNode)[0])b=t(".dndHint",a)[0],n.remove(a,"treeContainerBordered"),n.add(a,"noBorder"),n.add(b,"hidden")},destroy:function(){this.inherited(arguments);
this._treeStore=null;null!==this._treeList&&this._treeList.destroy();this.manager=null}})})},"webview/admin/_dndAvatar":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dnd/Avatar dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/query dojo/hccss".split(" "),function(r,p,m,l,h,c,g,d,n,a,b){return m("webview/admin/_dndAvatar",h,{maximumAvatarItems:10,construct:function(){var d=this.getAvatarWidth(),d=g.create("div",{"class":"dojoDndAvatar webviewAdminScheduleTreeAvatar",
style:{position:"fixed",zIndex:"1999",marginLeft:"0",width:d+"px"}}),k=this.manager.source,h,f;a("highcontrast")&&g.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},f);h=null;for(var l=this.manager.nodes.length,m=0;m<this.maximumAvatarItems+1&&m<l;m++)h=this.manager.nodes[m],k._normalizedCreator&&((f=k.getItem(h.id).data)?(f=k._normalizedCreator(f,"avatar"),h=f.node||f.domNode):(r.byId(h.id),f&&(h=k._normalizedCreator(f,"avatar").node,c.add(h,"navTreeAvatar"))),this.manager.OFFSET_X=
-Number(n.get(h,"marginLeft"))),h.id="",f=g.create("span",{"class":"dojoDndAvatarItem webviewAdminScheduleTreeAvatar"},d),h.classList.contains("navTreeAvatar")&&(d.classList.add("navTreeAvatarParent"),f.classList.add("navTreeAvatarParent")),f.appendChild(h);this.node=d;l>this.maximumAvatarItems&&(f.appendChild(h),d=l-this.maximumAvatarItems,c.add(h,"lastAvatarNode"),"undefined"!==typeof h&&(h.innerHTML="\x3cdiv\x3e+ "+d+(1===d?" other":" others")+"\x3c/div\x3e"),g.destroy(b(".navIcon",h)[0]))},getAvatarWidth:function(){var a=
b(".treeContainer","rcSystemContent")[0];return d.getMarginBox(a,n.getComputedStyle(a)).w}})})},"webview/admin/_Widget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/ready dojo/request/xhr dojo/string dojo/topic dojox/html/entities rc/_base/Error rc/_base/util rc/_Widget rc/util/pointObject ./_ErrorMessageMixin ../_base/tooltip ../util/util ../util/widgetPicker ../widget/WarningDialog ../widget/WarningDialogEnums".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D){return r("webview/admin/_Widget",[x,v],{baseUrl:null,errorStrings:a,rcStrings:d,smtp:null,webviewStrings:n,wizardOnNextFunction:null,_destroyConnect:null,_firstLoad:!0,_genericConfirmDialog:null,_getSitePromise:null,postCreate:function(){this.inherited(arguments);this.title&&(this.title=u.decode(z.unescapeHtml(this.title)),h.set(this.domNode,"title",this.title));this.site&&!1===isNaN(this.site)&&(this._getSitePromise=k.get("site/",{preventCache:!0,
handleAs:"json",query:{siteId:this.site}}).then(p.hitch(this,function(a){200===a.errStatus&&(this.baseUrl=a.properties.baseUrl?decodeURIComponent(a.properties.baseUrl):null,this.smtp=a.properties.smtp&&a.properties.smtp.enabled,this.set("siteUrl",a.properties.urlName))})))},isDirty:function(){var a=this.inherited(arguments);!a&&this._userContent&&(a=this._userContent.isDirty());return a},_displayError:function(a){var b="sticky",c="error",d=a.errStatus;a=this._getErrorMessage(a.errStatus,a.errMSG);
d===this.SuccessCode?(b="alert",c="success"):510===d&&(b="alert",c="info");f.publish(b,{type:c,message:a})},getObfuscatedHash:C.getObfuscatedHash,getUnobfuscatedHash:C.getUnobfuscatedHash,isAdminPage:C.isAdminPage,_setTitle:function(a){!1===this.isAdminPage()&&this.buttonBar.addTitle(a);this.onSetTitle(a)},_throwFullscreenError:function(a){if("undefined"===typeof a.name||"undefined"===typeof a.message||"undefined"===typeof a.suggestion)throw"errorDetails must contain name, message and suggestion";
this.defer(p.hitch(this,this.onInitError,new w(a)),100)},_maxCharacters:function(a){return""===a?(this.invalidMessage="Field is empty",!1):a.length>this.constraints.maxChars?(this.invalidMessage="Field cannot be more than "+this.constraints.maxChars+" characters",!1):!0},startWizard:function(a){rc.setupWizard||(rc.setupWizard=new a,rc.setupWizard.init(this.domNode,"before",this))},onStartWizard:function(){this.emit("startWizard",null);rc.setupWizard&&(rc.setupWizard.complete&&!rc.setupWizard.onLastStep?
rc.setupWizard.stop():(this.promptNode&&c.remove(this.promptNode,"hidden"),null===this._destroyConnect&&(this._destroyConnect=m.after(rc.setupWizard,"destroy",p.hitch(this,this.onDestroyWizard)))))},onDestroyWizard:function(){this.emit("destroyWizard",null);this._destroyConnect&&(this._destroyConnect.remove(),this._destroyConnect=null);this.domNode&&(this.promptNode&&c.add(this.promptNode,"hidden"),this.wizardNextContainer&&c.add(this.wizardNextContainer,"hidden"))},_onClickWizardCancel:function(){},
_onClickWizardNext:function(a){if(rc.setupWizard)rc.setupWizard.onClickNext();a&&z.stopEvent(a)},destroy:function(){this._destroyConnect&&(this._destroyConnect.remove(),this._destroyConnect=null);void 0!==this._userContent&&null!==this._userContent&&this._userContent.destroy();this.inherited(arguments)},_onInitError:function(a){a=this.safeError(a,{name:this._replace(d.problemInX),message:a.msg,suggestion:d.unexpectedFix});this.onInitError(a)},_loadUserContent:function(a){var c=null,k=null;try{E.getPointForMnemonic(a).then(p.hitch(this,
function(a){c=E.getWidgetFor(a);k=p.clone(a);k.rawObject.site=this.site;k.rawObject.system=this.system}),p.hitch(this,function(b){f.publish(q.substitute(d.xNotFound,[d.content]),q.substitute(d.unsupportedX,[a]),d.unsupportedFix)}))}catch(G){f.publish(q.substitute(d.xNotFound,[d.content]),q.substitute(d.unsupportedX,[a]),d.unsupportedFix);return}c.then(p.hitch(this,function(a){try{require([a.module],p.hitch(this,function(a){t(p.hitch(this,function(){this.contentContainer=g.create("div",{style:{width:"100%",
height:"100%"}},this.containerNode.parentNode,"last");this._userContent=new a(k.rawObject,this.contentContainer,"first");this._setUpUserViewReturn();this._userContent._toolbar&&(this._toolbar=this._userContent.getToolBar());this._connectLoadEvents(this._userContent);b(this._userContent,"restartTimer",p.hitch(this,function(a){b.emit(this,"restartTimer",a)}))}))}))}catch(I){console.error(this.declaredClass+" - loadContent(): Error failed to load the content or content dependencies",I,I.message)}}),
p.hitch(this,function(a){console.error(this.declaredClass+" - loadContent(): Error failed to load the content or content dependencies",a,a.message)}))},setReturnUserView:function(a){this._userViewOnClick.remove();this.own(b(this.viewButton.toolbarButtonIcon,"click",a))},_setUpUserViewReturn:function(){var a=p.hitch(this,this._destroyUserContent);this._userContent.setReturnToAdmin(a)},_destroyUserContent:function(){this._userContent.destroy();this._userContent=null;this.emit("destroyUserContent")},
_clearLoadEvents:function(){null!==this._loadConnect&&(this._loadConnect.remove(),this._loadConnect=null)},_connectLoadEvents:function(a){this._errConnect=b(a,"initError",p.hitch(this,function(a){this.emit("initError",a)}));this._loadConnect=m.after(a,a.onInitSuccess?"onInitSuccess":a._endUpdate?"_endUpdate":"_render",p.hitch(this,function(){this._clearLoadEvents();A.showing&&A.show();this.onInitSuccess()}))},_onSave:function(){this.emit("save")},setToolBarMenus:function(a){a.Print=!1;a.Themes=!1;
a.UserToolBar=!1;this.userToolBar.resetMenusAndHelp(a)},goToPage:function(a){this._confirm().then(p.hitch(this,function(){this._dirty=!1;window.location.hash=this.getUri(a)}))},_confirm:function(){var a=new l;this.own(a);this.isDirty()?this._genericConfirmDialog=this.createConfirmDialog(a,this._genericConfirmDialog):a.resolve();return a.promise},createConfirmDialog:function(b,c){null===c&&(c=new B({type:D.types.binaryConfirm,title:n.confirmUnsavedChanges,text:a.unsavedChangesContinue,closeButtonVisible:!1}));
var f=c.on("close",p.hitch(this,function(a){switch(a){case D.returnValues.oneOrYes:b.resolve();break;case D.returnValues.allOrNo:b.reject();break;default:console.error(this.declaredClass+" - _confirm(): Invalid Choice",a)}f.remove()}));this.own(f);c.open();return c}})})},"webview/admin/SearchableWidget":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/dnd/Source dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/fx dojo/on dojo/query dojo/topic ./_objectTypeMap ./widget/SearchForObjectResults".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return p("webview/admin/SearchableWidget",null,{objectTypeMap:u,bacnetOnly:!1,extraSearchParameters:{},searchPath:"tree/objects",_BannerHeight:60,_CloseDuration:250,_DefaultPagingBarHeight:42,_FadeDuration:250,_closeHandle:null,_footerHeight:0,_headerHeight:0,_rangeChangeHandle:null,_resultsOpened:!1,_isSearchable:!1,_supportedObjectTypes:[],_toolbarHeight:0,RESIZE_BUFFER:5,closeResults:function(){this._resultsOpened=!1;this._closeResults()},createSource:function(a){return new c(a,
{creator:l.hitch(this,this._pointsNodeCreator),copyOnly:!0,singular:!1,generateText:!1,selfAccept:!1,skipForm:!0})},isSearchable:function(){return!0===this._isSearchable},publishSearchable:function(){this._isSearchable=!0;f.publish("searchableWidget",this._supportedObjectTypes,this)},publishUnsearchable:function(){this.closeResults();this._isSearchable=!1;f.publish("unsearchableWidget",this)},showResults:function(a,b,c){this._resultsOpened||this._openResults();var f=n.create("div",null);null!==c.dataArray&&
0<c.dataArray.length?(f=this._getPointsNode(c.dataArray),this._totalCount=c.totalCount,-1===b&&(b=this._totalCount-1),this._itemsPerPage=b+1-a,this._currentPage=this._totalCount>b+1?Math.floor((b+1)/c.dataArray.length):Math.ceil(this._totalCount/this._itemsPerPage)):(this._itemsPerPage=this._totalCount=0,this._currentPage=1);this.resultsWidget.buildResults(f,this._totalCount,this._itemsPerPage,this._currentPage)},updateRange:function(a){var b=a.get("currPage");a=a.get("itemsPerPage");var c={};1>b?
b=1:b>Math.ceil(this._totalCount/a)&&(b=Math.ceil(this._totalCount/a));200<a?(c.low=0,c.high=-1):(c.low=Math.floor((b-1)*a),c.high=Math.floor(b*a-1));f.publish("updateRange",c)},_clearHandles:function(){null!==this._rangeChangeHandle&&(this._rangeChangeHandle.remove(),this._rangeChangeHandle=null);null!==this._closeHandle&&(this._closeHandle.remove(),this._closeHandle=null)},_closeResults:function(){this._clearHandles();var a=this.resultsWidget.domNode.clientWidth,c=m.animateProperty({node:this.resultsWidget.contents,
duration:this._FadeDuration,properties:{opacity:{start:1,end:0}}}),f=m.animateProperty({node:this.resultsWidget.resultsTitle,duration:this._FadeDuration,properties:{opacity:{start:1,end:0}}}),d=m.animateProperty({node:this.resultsWidget.closeButton,duration:this._FadeDuration,properties:{opacity:{start:1,end:0}}}),a=m.animateProperty({node:this.resultsWidget.domNode,duration:this._CloseDuration,properties:{width:{start:a,end:0,units:"px"}}}),g=m.animateProperty({node:this.builderContainer,duration:this._CloseDuration,
properties:{width:{start:66,end:100,units:"%"}},onEnd:function(a){b.set(a,"margin-right","0%")}}),c=t.combine([c,f,d]),f=t.combine([a,g]),c=t.chain([c,f]).play();h.after(c,"onEnd",l.hitch(this,this._onClose))},_getFooterHeight:function(){if(1>this._footerHeight){var c=g.byId("rcSystemFooter");if(null!==c){var f=b.getComputedStyle(c);this._footerHeight=a.getMarginBox(c,f).h}}return this._footerHeight},_getHeaderHeight:function(){if(1>this._headerHeight){var c=g.byId("rcAdminContentHeader");null===
c&&(c=q(".rcContentHeader")[0]);if(c){var f=b.getComputedStyle(c);this._headerHeight=a.getMarginBox(c,f).h}}return this._headerHeight},_getPointsNode:function(a){var b=n.create("div",null),c=this.createSource(b);this._setupPointSourceListeners(c);r.forEach(a,l.hitch(this,this.insertPoint,c));return b},_getToolbarHeight:function(){if(1>this._toolbarHeight){var c=q(".admin-toolbar",this.domNode)[0];null==c&&(c=q(".client-toolbar",this.domNode)[0]);if(c){var f=b.getComputedStyle(c);this._toolbarHeight=
a.getMarginBox(c,f).h}}return this._toolbarHeight},_onClose:function(){d.add(this.resultsWidget.domNode,"hidden");this._searchResultExpandToFill=!1;b.set(this.builderContainer,"position","");b.set(this.resultsWidget.domNode,"z-index","");b.set(this.resultsWidget.domNode,"padding-right","");this.onCloseSearchResults()},_openResults:function(){var a;this._rangeChangeHandle=k(this.resultsWidget,"rangeChange",l.hitch(this,this.updateRange));this._closeHandle=k(this.resultsWidget,"closeResults",l.hitch(this,
function(){f.publish("closeResults")}));if(this._searchResultExpandToFill)a=this.domNode.clientWidth,b.set(this.builderContainer,"position","fixed"),b.set(this.resultsWidget.domNode,"z-index","2147483647"),b.set(this.resultsWidget.domNode,"padding-right","0");else if(a=.3*this.domNode.clientWidth,this._editAnimationContent)this._editAnimationContent.onClose();this._resize(a);d.remove(this.resultsWidget.domNode,"hidden");var c=m.animateProperty({node:this.resultsWidget.domNode,duration:this._CloseDuration,
properties:{width:{start:0,end:a,units:"px"}}}),g=m.animateProperty({node:this.builderContainer,duration:this._CloseDuration,properties:{width:{start:98,end:68,units:"%"}},onEnd:function(a){b.set(a,"margin-right","0.6%")}}),n=m.animateProperty({node:this.resultsWidget.contents,duration:this._FadeDuration,properties:{opacity:{start:0,end:1}}}),q=m.animateProperty({node:this.resultsWidget.resultsTitle,duration:this._FadeDuration,properties:{opacity:{start:0,end:1}}}),u=m.animateProperty({node:this.resultsWidget.closeButton,
duration:this._FadeDuration,properties:{opacity:{start:0,end:1}}}),n=t.combine([n,q,u]),c=t.combine([c,g]),c=t.chain([c,n]).play();this.own(h.after(c,"onEnd",l.hitch(this,function(){this.resultsWidget.resize();this.onOpenSearchResults()})));b.set(this.resultsWidget.resultsTitle,"width",a-40+"px");this._resultsOpened=!0},getSearchResultsMaxHeight:function(){var a=window.innerHeight-this._BannerHeight,a=a-this._getFooterHeight(),a=a-this._getHeaderHeight(),a=a-this._getToolbarHeight();this.gridNode?
a-=2*b.get(this.gridNode,"marginTop")+10:this.builderWidget?a-=2*b.get(this.builderWidget.domNode,"paddingTop")+10:this.builderContainer&&(a-=2*b.get(this.builderContainer,"paddingTop")+10);return a},onCloseSearchResults:function(){},onOpenSearchResults:function(){},_resize:function(a){this.resultsWidget&&(this._resultsOpened&&Math.abs(b.get(this.resultsWidget.domNode,"width")-a)>this.RESIZE_BUFFER&&(b.set(this.resultsWidget.domNode,"width",a+"px"),b.set(this.resultsWidget.resultsTitle,"width",a-
40+"px"),this.resultsWidget.resize()),a=this.getSearchResultsMaxHeight(),Math.abs(b.get(this.resultsWidget.domNode,"height")-a)>this.RESIZE_BUFFER&&(b.set(this.resultsWidget.domNode,"height",a+"px"),this.resultsWidget.resize()))},destroy:function(){this._clearHandles();this.inherited(arguments)}})})},"webview/admin/widget/SearchForObjectResults":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!../../nls/all dojo/on dojo/text!./templates/SearchForObjectResults.html ./PagingBar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return l("webview/admin/widget/SearchForObjectResults",[p,r,m],{baseClass:"",paneTitle:"Search Results",templateString:b,webviewStrings:n,_ResultsHeaderHeight:40,_TotalPaddingHeight:32,postCreate:function(){this.inherited(arguments);this.own(a(this._bottomPagingBar,["countChange","pageChange"],h.hitch(this,this._onRangeChange,this._bottomPagingBar)),a(this.closeButton,"click",h.hitch(this,this._onCloseResults)),a(this.resultsContainer,"click",h.hitch(this,this._removeSearchFocus)))},
onClose:function(){this._onCloseResults()},onCloseResults:function(){},onRangeChange:function(){},buildResults:function(a,b,c,f){this._updatePagingBar(this._bottomPagingBar,b,c,f);0<b?g.place(a,this.resultsContainer,"only"):g.place(g.create("span",{innerHTML:this.webviewStrings.noPointsFound}),this.resultsContainer,"only")},resize:function(){var a=this.domNode.clientHeight,a=a-(this._ResultsHeaderHeight+this._TotalPaddingHeight);d.set(this.contentPaneBody,"height",a+"px");this._bottomPagingBar.resize();
var b=this._bottomPagingBar.domNode.clientHeight,c=d.get(this._bottomPagingBar.domNode,"marginTop");d.set(this.resultsContainer,"height",a-b-c+"px")},_onCloseResults:function(){this.onCloseResults()},_onRangeChange:function(a){this.onRangeChange(a)},_removeSearchFocus:function(){this._focusManager.curNode&&"searchBox"===this._focusManager.curNode.dataset.dojoAttachPoint&&this._focusManager.curNode.blur()},_updatePagingBar:function(a,b,g,f){b===g?a.set({totalCount:b,currPage:f}):a.set({totalCount:b,
itemsPerPage:g,currPage:f});c.toggle(a.domNode,"hidden",!1);d.set(a.domNode,"opacity",0===b?0:1)}})})},"webview/admin/widget/PagingBar":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-style dojo/Evented dojo/i18n!webview/nls/all dojo/keys dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/PagingBar.html dijit/form/FilteringSelect dijit/form/TextBox".split(" "),function(r,
p,m,l,h,c,g,d,n,a,b,t,k,q,f){return l("webview/admin/widget/PagingBar",[p,r,m,n],{templateString:f,totalCount:0,webviewStrings:a,itemsPerPage:50,currPage:1,_AllItems:2E3,_viewOptions:null,_lastPage:-1,RESIZE_BUFFER:5,OPTIONS_WIDTH_SCALER:.6,constructor:function(){this.itemsPerPageStore=new q(new k({data:[{id:25,name:25},{id:50,name:50},{id:100,name:100},{id:200,name:200},{id:this._AllItems,name:this.webviewStrings.pagingbarAll}]}))},buildRendering:function(){this.inherited(arguments);this.viewItemOptions.set("store",
this.itemsPerPageStore);this.set("totalCount",this.totalCount);this.own(t(this.viewItemOptions,"change",h.hitch(this,this._setItemsPerPage)))},postCreate:function(){this._setupListeners();this.currPageOption.set("value",this.currPage)},resize:function(){g.toggle(this.itemCount,"hidden",!1);g.toggle(this.viewItemOptionsContainer,"hidden",!1);var a=this.domNode.clientWidth-(this.itemCount.clientWidth+this.pageJumping.clientWidth),b=a*this.OPTIONS_WIDTH_SCALER;Math.abs(this.viewItemOptionsContainer.clientWidth-
b)>=this.RESIZE_BUFFER&&d.set(this.viewItemOptionsContainer,"width",b+"px");g.toggle(this.viewItemOptionsContainer,"hidden",a<this.viewItemOptions.domNode.clientWidth+.3*this.pageJumping.clientWidth);g.toggle(this.itemCount,"hidden",this.domNode.clientWidth<this.itemCount.clientWidth+1.3*this.pageJumping.clientWidth)},_setupListeners:function(){this.own(t(this.firstPage,"click",h.hitch(this,this._goToPage,"first")),t(this.prevPage,"click",h.hitch(this,this._goToPage,"prev")),t(this.nextPage,"click",
h.hitch(this,this._goToPage,"next")),t(this.lastPage,"click",h.hitch(this,this._goToPage,"last")));this.own(t(this.currPageOption,"keypress",h.hitch(this,function(a){a.charOrCode===b.ENTER&&this._goToPage(this.currPageOption.get("value"))})))},setTotalCount:function(a){this.set("totalCount",a)},updateItemCount:function(){this._lastPage=Math.ceil(this.totalCount/this.itemsPerPage);var b=(this.currPage-1)*this.itemsPerPage+1;0>b&&(b=0);c.set(this.itemCount,"innerHTML",b+" - "+(this.currPage<this._lastPage?
this.currPage*this.itemsPerPage:this.totalCount)+" "+a.pagingbarOf+" "+this.totalCount+" "+a.pagingbarItems);this.resize()},updateItemsPerPage:function(a){var b=this.itemsPerPage*(this.currPage-1);this.itemsPerPage=Number(a);200>=this.itemsPerPage?this.viewItemOptions.set("value",this.itemsPerPage):this.viewItemOptions.set("value",this._AllItems);a=1;200>=this.itemsPerPage&&(a=b/this.itemsPerPage+1);this.updateCurrentPage(a)},_setItemsPerPage:function(a){this.set("itemsPerPage",Number(a))},onCountChange:function(){this.emit("countChange");
return this.itemsPerPage},updateCurrentPage:function(a){this.currPage=Number(a);isNaN(this.currPage)&&(this.currPage=1);"Infinity"===this._lastPage&&(this._lastPage=1);this.currPageOption.set("value",this.currPage);this.updateItemCount()},_goToPage:function(a){switch(a){case "first":this.updateCurrentPage(1);break;case "prev":1>this.currPage-1?this.updateCurrentPage(this.currPage):this.updateCurrentPage(--this.currPage);break;case "next":this.currPage+1>this._lastPage?this.updateCurrentPage(this.currPage):
this.updateCurrentPage(++this.currPage);break;case "last":this.updateCurrentPage(this._lastPage);break;default:this.updateCurrentPage(a)}this.onPageChange()},onPageChange:function(){this.emit("pageChange");return this.currPage},_setCurrPageAttr:function(a){this.currPage!==a&&this.updateCurrentPage(a)},_setItemsPerPageAttr:function(a){this.itemsPerPage!==a&&(this.itemsPerPage=a,this.onCountChange());this.updateItemsPerPage(a)},_setTotalCountAttr:function(a){this.totalCount!==a&&(this.totalCount=a,
this.updateItemCount())}})})},"webview/admin/trees/NavTreeAvatar":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-attr dojo/text!webview/admin/trees/templates/navTreeAvatar.html dojox/html/entities ./NavTreeItem".split(" "),function(r,p,m,l,h,c,g,d){return l("webview/admin/trees/NavTreeAvatar",[p,r,m,d],{templateString:c,Initialize:function(){""===this.displayName&&(this.displayName=this.pointName+" ("+this.pointMnemonic+")");h.set(this.domNode,
"title",g.decode(this.buildTitleText()));h.set(this.displayLabel,"innerHTML",this.displayName);this.setIconImage()}})})},"webview/admin/trees/NavTreeItem":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/DropDownMenu dijit/form/CheckBox dijit/form/DropDownButton dijit/form/ValidationTextBox dijit/MenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!webview/admin/trees/templates/navTreeItem.html dojo/query dojo/topic dojox/html/entities ../../util/globalConstants dijit/InlineEditBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B){return a("webview/admin/trees/NavTreeItem",[p,r,m,u],{templateString:v,widgetsInTemplate:!0,sysId:-1,site:"",id:"",pointType:"",displayName:"",pointMnemonic:"",customIcon:null,urlPath:"",uniqueId:null,pointName:"",deviceName:"",cbNode:null,depth:0,parent:null,hiddenFields:null,indentSize:30,siteUrlPath:"",childItems:null,childPointsArray:null,defaultColours:null,RELATIVE_PATH_TO_DEFAULT_ICONS:"../.."+dojoConfig.baseUrl+"/webview/themes/rcblack/images/DefaultNavTreeIcons/",
defaultIconMap:{alarm:"alarms.png",calendars:"calendar.png","enterprise schedule":"schedules.png",folder:"folder.png",hyperlink:"hyperlink.png","navigation group":"navigation-group.png","runtime logs":"runtime.png",schedules:"schedules.png","system groups":"system-group.png","single point trend log":"single-trendlog.png","multi point trend log":"multi-trendlog.png","workstation groups":"workstation-group.png","after hours report":"after-hours.png","after hours requests":"requests.png",programs:"cbas.png",
"point report":"point-report.png","equipment views":"equipment-view.png"},constructor:function(){this.rcStrings=w;this.webviewStrings=z;this.errorStrings=x},postCreate:function(){this.inherited(arguments);this.childPointsArray=[];this.hiddenFields={};this.Initialize()},_setDisplayNameAttr:function(a){this._set("displayName",a.replace(/[\n\r]/g," "))},Initialize:function(){""===this.displayName&&(this.displayName=this.pointName+" ("+this.pointMnemonic+")");t.set(this.domNode,"title",E.decode(this.buildTitleText()));
this.buildEditMenu();this.cbNode=new h({},this.navTreeCBContainer);k.add(this.cbNode.domNode,"tree-item-checkbox");this.createHiddenFields();this.setOnClicks();this.setIconImage();this._showChildren(this,!0);this.setValue("displayName",E.encode(this.displayName))},buildTitleText:function(){var a=this.displayName,b=this.pointMnemonic;if(this.sysName||""===this.sysName){if(""===this.sysName)switch(this.pointType.toLowerCase()){case "alarm":b="Alarm";break;case "folder":b=this.displayName;break;case "hyperlink":b=
this.urlPath;break;case "after hours report":b="AfterHoursReport";break;case "after hours requests":b="AfterHoursRequests";break;default:b=null}b||(a=this.pointName.indexOf("#"),b=this.pointName.substring(a+1));a=this.sysName;a+=this.sysName?"/"+b:b}return a},buildEditMenu:function(){var a=new l({baseClass:"webviewContextMenu"},"mainMenu");"hyperlink"===this.pointType.toLowerCase()&&(k.remove(this.urlPathLabel,"hidden"),t.set(this.urlPathLabel,"innerHTML",E.encode(this.urlPath)));a.addChild(new d({label:w.edit,
baseClass:"webviewContextMenuItem",onClick:b.hitch(this,this._onEditContents)}));a.addChild(new d({label:z.deleteItems,baseClass:"webviewContextMenuItem",onClick:b.hitch(this,this.remove)}));new c({showLabel:!1,dropDown:a,iconClass:"rc24Icon editIcon",baseClass:"webviewDropDownButton"},this.enableEditNode)},createHiddenFields:function(){this.displayNameInput.set("value",E.decode(this.displayName));this.hiddenFields.displayNameTB=this.displayNameInput;this.own(y(this.displayNameInput,"change",b.hitch(this,
function(a){this.setValue("displayName",E.encode(a))})));this.hiddenFields.urlPathTB=new g({baseClass:"rcTextBox",required:!0,invalidMessage:this.errorStrings.invalidURL,"class":"hidden",value:decodeURIComponent(this.urlPath),onBlur:b.hitch(this,function(){if(this.hiddenFields.urlPathTB.isValid()){var a=E.encode(this.hiddenFields.urlPathTB.get("value"));this.setValue("urlPath",a);this.onEditModeChange(!1)}else this.hiddenFields.urlPathTB.focus()})},this.urlPathContainer);this.hiddenFields.urlPathTB.set("validator",
b.hitch(this,this.urlValidator,this.hiddenFields.urlPathTB));this.hiddenFields.urlPathTB.isValid()},setOnClicks:function(){this.own(y(this.navIcon,"click",b.hitch(this,this._onOpenGallery)),y(this.urlPathLabel,"click",b.hitch(this,this.editUrlPath)),y(window,"click",b.hitch(this,this._closeEditors)));this.own(y(this.expandNode,"click",b.hitch(this,function(){k.contains(this.expandNode,"expandIcon")?this._showChildren(this,!0):k.contains(this.expandNode,"collapseIcon")&&this._showChildren(this,!1)})))},
setCustomIcon:function(a){this.customIcon=a;this.setIconImage()},setIconImage:function(){q.empty(this.navIcon);var a=q.create("img",{"class":"navTreeIcon",alt:this.pointType}),b=rc.rootPath+"Uploads/NavTreeIcons/";if(null===this.customIcon||null===this.customIcon.filename)b=this.RELATIVE_PATH_TO_DEFAULT_ICONS,this.defaultIconMap.hasOwnProperty(this.pointType.toLowerCase())?this.customIcon={id:null,filename:this.defaultIconMap[this.pointType.toLowerCase()]}:console.error(this.declaredClass+" - setIconClass(): Invalid point type:",
this.pointType);"trendlog.png"===this.customIcon.filename&&(-1!==this.pointName.toUpperCase().indexOf("STL")?(this.pointType="Single Point Trend Log",this.customIcon.filename="single-trendlog.png"):(this.pointType="Multi Point Trend Log",this.customIcon.filename="multi-trendlog.png"));if(null===this.customIcon.id||-1===this.customIcon.id||-1<B.DEFAULT_NAV_TREE_ICONS.indexOf(this.customIcon.filename))b=this.RELATIVE_PATH_TO_DEFAULT_ICONS;t.set(a,"src",b+this.customIcon.filename);q.place(a,this.navIcon,
"first");this.onChange()},editUrlPath:function(){k.remove(this.hiddenFields.urlPathTB.domNode,"hidden");k.add(this.urlPathLabel,"hidden");this.hiddenFields.urlPathTB.focus();this.onEditModeChange(!0)},urlValidator:function(a,b,c){var f=!1,f="hyperlink"!==this.pointType.toLowerCase()?!0:"http://"!==b&&(!a.required||!a._isEmpty(b))&&(a._isEmpty(b)||void 0!==a.parse(b,c));this.toggleInvalid(!f);return f},revertPendingChanges:function(){this.setValue("displayName",this.displayName);this.setValue("urlPath",
this.urlPath);this.onEditModeChange(!1)},editDisplayName:function(){this.displayName.edit()},onEditModeChange:function(a){k.toggle(this.domNode,"dojoDndItem",!a);this.emit("editModeChange",a)},setValue:function(a,b){switch(a){case "displayName":b!==this.displayName&&(this.displayName=E.decode(b),this.displayNameInput.set("value",this.displayName),this.onChange());break;case "urlPath":var c=E.decode(b);t.set(this.urlPathLabel,"innerHTML",b);this.hiddenFields.urlPathTB.set("value",b);k.add(this.hiddenFields.urlPathTB.domNode,
"hidden");k.remove(this.urlPathLabel,"hidden");if(c!==this.urlPath)this.onChange();this.urlPath=c;break;default:console.error(this.declaredClass+" - setValue(): Unknown Attribute",a)}},modifyChildren:function(a,b){for(var c=0;c<this.childItems.length&&this.childItems[c].id!==a.id;c++);b?this.childItems.splice(c,1):(c<this.childItems.length&&this.childItems.splice(c,1),this.childItems.push(a));0<this.childItems.length?f.set(this.expandNode,"visibility","visible"):f.set(this.expandNode,"visibility",
"hidden");this.toggleFolderIcon()},validate:function(){var a={valid:!0,msg:"Success"};this.hiddenFields.urlPathTB.isValid()||(a.valid=!1,a.msg=this.hiddenFields.urlPathTB.invalidMessage);return a},getData:function(a,b){var c={};a||(this.childPointsArray=[],a=this,b=this.childPointsArray);c=a.validate();if(!c.valid)return a.toggleInvalid(!0),C.publish("sticky",{type:"error",message:c.msg}),{invalid:!0};for(c=0;c<a.childItems.length;c++){b||(b=[]);var f=this.getData(a.childItems[c],a.childItems[c].childPointArray);
if(f.invalid)return{invalid:!0};b.push(f)}c="/";switch(a.pointType.toLowerCase()){case "alarm":c=this.siteUrlPath+"/#Alarm";break;case "navigation group":case "enterprise schedule":c=a.pointName;break;case "folder":c=null;break;case "hyperlink":c=encodeURI(a.urlPath);break;case "after hours report":c=this.siteUrlPath+"/#AfterHoursReport";break;case "after hours requests":c=this.siteUrlPath+"/#AHACRequests";break;default:c=this.siteUrlPath+"/"+a.sysId+"/#"+a.pointMnemonic}return{name:E.encode(a.displayName),
widget:c,pointType:a.pointType,iconFileId:a.customIcon.id,iconFile:a.customIcon.filename,sysId:0<a.sysId?a.sysId:null,sysName:a.sysName,children:void 0!==b?b:[]}},onChange:function(){this.emit("change",null)},_closeEditors:function(a){this.displayNameInput.editing&&!1===("INPUT"===a.target.nodeName||k.contains(a.target,"rcTextBox"))&&this.displayNameInput.save()},_onOpenGallery:function(){this.onOpenGallery()},onOpenGallery:function(){this.emit("openGallery")},_onEditContents:function(){this.onEditContents()},
onEditContents:function(){this.emit("editContents")},_showChildren:function(a,c){k.toggle(a.expandNode,"expandIcon",!c);k.toggle(a.expandNode,"collapseIcon",c);this.toggleFolderIcon();n.forEach(a.childItems,b.hitch(this,function(a){k.toggle(a.domNode,"collapsedChild",!c);0<a.childItems.length&&this._showChildren(a,c)}))},toggleFolderIcon:function(){if("folder.png"===this.customIcon.filename){var a=A(".navTreeIcon",this.domNode);if(0<a.length){var c=k.contains(this.expandNode,"collapseIcon")&&0<this.childItems.length?
"folder-2.png":"folder.png";t.set(a[0],"src",this.RELATIVE_PATH_TO_DEFAULT_ICONS+c);n.forEach(this.childItems,b.hitch(this,function(a){a.toggleFolderIcon()}))}}},toggleInvalid:function(a){k.toggle(this.contentNode,"invalid",a)},setDepth:function(a,b){this.depth=a;var c=f.get(this.expandNode,"width"),d=b*this.depth;f.set(this.contentNode,"marginLeft",d+c+"px");f.set(this.expandNode,"marginLeft",d+"px");if(0<this.childItems.length)for(c=0;c<this.childItems.length;c++)this.childItems[c].setDepth(this.depth+
1,b)},setChecked:function(a){this.cbNode.set("checked",a)},getChecked:function(){return this.cbNode.get("checked")},remove:function(){this.emit("delete",this)},destroy:function(){this.inherited(arguments);this.hiddenFields=null}})})},"webview/admin/schedules/DataTypeColourSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/query dojo/string dojo/text!./templates/dataTypeColourSelector.html dojox/html/entities rc/bacnet/enums ./ColourSelectorItem dijit/form/ValidationTextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x){return c("webview/admin/schedules/DataTypeColourSelector",[p,r,m,b],{templateString:u,type:"",colours:null,DEFAULT_COLOURS:"#2C97DE #E94B35 #F2C500 #008D9C #0F527D #CB10B7 #336633".split(" "),constructor:function(){this.webviewStrings=k;this.rcStrings=t},postCreate:function(){this.colours=[];this.setTitle();this.showHideAddContainer();this.valueInput.set("validator",g.hitch(this,this.validateInput))},setTitle:function(){switch(this.type){case z.primitiveTypes.ENUMERATED:d.set(this.titleContainer,
"innerHTML",k.setupBinaryColours);break;case z.primitiveTypes.UNSIGNED_INTEGER:d.set(this.titleContainer,"innerHTML",k.setupMultiStateColours);break;case z.primitiveTypes.REAL:d.set(this.titleContainer,"innerHTML",k.setupAnalogColours);break;case "default":d.set(this.titleContainer,"innerHTML",k.setupDefaultColours)}},updateBinaryColours:function(a){for(var b=0;b<a.length;b++)this.colours[b].setColourValue(a[b])},showHideAddContainer:function(){var a=null;if(this.type===z.primitiveTypes.ENUMERATED)n.add(this.addItemContainer,
"hidden"),a=new x({state:t.on,dataType:this.type,colour:"#0000FF"}),this.addRow(a),a=new x({state:t.off,dataType:this.type,colour:"#FF0000"}),this.addRow(a);else if("default"===this.type){n.add(this.addItemContainer,"hidden");for(var b=1;b<=this.DEFAULT_COLOURS.length;b++)a=new x({state:f.substitute(k.levelX,[b.toString()]),dataType:this.type,colour:this.DEFAULT_COLOURS[b-1]}),this.addRow(a)}else n.remove(this.addItemContainer,"hidden")},setType:function(a){this.type=a;this._removeAllRows();this.showHideAddContainer();
this.setTitle()},addRow:function(b){if(this.type===z.primitiveTypes.REAL){for(var c=0,f=null,c=0;c<this.colours.length;c++)if(Number(b.state)<=Number(this.colours[c].state)){f=this.colours[c];break}null!==f?a.place(b.domNode,f.domNode,"before"):null===f&&0<c?(f=this.colours[c-1],a.place(b.domNode,f.domNode,"after")):this.itemContainer.appendChild(b.domNode);this.colours.splice(c,0,b)}else this.itemContainer.appendChild(b.domNode),this.colours.push(b);b.on("delete",g.hitch(this,this.deleteRow));b.on("change",
g.hitch(this,function(){this.onChange()}));this.onChange()},deleteRow:function(b){var c=h.indexOf(this.colours,b);this.colours.splice(c,1);a.destroy(b.domNode);this.onChange()},getData:function(){var a=0,b=null,c=null;h.forEach(this.colours,function(a){a.updateValues()});var f=q(".colourSelectorSingleItem",this.itemContainer);switch(this.type){case z.primitiveTypes.ENUMERATED:c={onColour:this.colours[0].colour,offColour:this.colours[1].colour};break;case z.primitiveTypes.REAL:c=[];for(a=0;a<f.length;a++)b=
l.byNode(f[a]),c.push({value:b.state,colour:b.colour,index:a});break;case z.primitiveTypes.UNSIGNED_INTEGER:c=[];for(a=0;a<f.length;a++)b=l.byNode(f[a]),c.push({value:w.encode(b.state),colour:b.colour,index:a+1});break;case "default":c=[];for(a=0;a<f.length;a++)b=l.byNode(f[a]),c.push(b.colour);break;default:console.error(this.declaredClass+" - getData(): Invalid Type",this.type)}return c},onChange:function(){this.emit("change")},validateInput:function(a){return this.type!==z.primitiveTypes.REAL&&
this.type!==z.primitiveTypes.UNSIGNED_INTEGER?!0:this.type===z.primitiveTypes.UNSIGNED_INTEGER?""!==a:!isNaN(a)&&""!==a},_removeAllRows:function(){for(;void 0!==this.colours[0];)this.deleteRow(this.colours[0])},_onAddItem:function(){if(this.valueInput.isValid()){var a=new x({state:w.encode(this.valueInput.get("value")),dataType:this.type});this.addRow(a);this.valueInput.set("value","")}}})})},"webview/admin/schedules/NavScheduleToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/text!webview/admin/schedules/templates/NavScheduleToolbar.html ../_Widget".split(" "),
function(r,p,m,l,h,c,g,d){return r("webview/admin/Schedule/NavScheduleToolbar",[d],{templateString:g,_buttons:null,constructor:function(){this.webviewStrings=h;this.nlsStrings=l},postCreate:function(){this.inherited(arguments);this._setupOnClicks()},_setupOnClicks:function(){this.own(c(this.selectAllButton.toolbarButtonIcon,"click",p.hitch(this,this._onSelectAllClicked)),c(this.deleteButton.toolbarButtonIcon,"click",p.hitch(this,this.onDeleteClicked)),c(this.saveButton.toolbarButtonIcon,"click",p.hitch(this,
this.onSaveClicked)),c(this.cancelButton.toolbarButtonIcon,"click",p.hitch(this,this.onCancelClicked)),c(this.viewButton.toolbarButtonIcon,"click",p.hitch(this,function(){if(!this.viewButton.get("disabled"))this.onViewClicked()})),c(this.viewButton.toolbarButtonIcon,"click",p.hitch(this,this.onCancelSaveClicked)))},showCancelOption:function(c){c?(this.disableCancelSaveOption(!1),m.remove(this.cancelSaveButton.domNode,"hidden"),m.add(this.saveButton.domNode,"disabled"),m.add(this.cancelButton.domNode,
"hidden")):(m.add(this.cancelSaveButton.domNode,"hidden"),m.remove(this.saveButton.domNode,"disabled"),m.remove(this.cancelButton.domNode,"hidden"))},disableCancelSaveOption:function(c){this.cancelSaveButton.set("disabled",c)},_onSelectAllClicked:function(){this.onSelectAllClicked(this._isSelectAll);var c,a;this._isSelectAll?(c="selectAllIcon",a="deselectAllIcon"):(c="deselectAllIcon",a="selectAllIcon");m.remove(this.selectAllButton.toolbarButtonIcon,c);m.add(this.selectAllButton.toolbarButtonIcon,
a);this._isSelectAll=!this._isSelectAll},onSelectAllClicked:function(c){this.emit("selectAllClicked");return c},onDeleteClicked:function(){this.emit("deleteClicked");this.resetSelectAll()},onSaveClicked:function(){this.emit("saveClicked")},onCancelClicked:function(){this.emit("cancelClicked")},onViewClicked:function(){this.emit("viewClicked");this.viewButton.tooltip.close()},onCancelSaveClicked:function(){this.emit("cancelSaveClicked")},resetSelectAll:function(){this._isSelectAll=!0;m.remove(this.selectAllButton.toolbarButtonIcon,
"deselectAllIcon");m.add(this.selectAllButton.toolbarButtonIcon,"selectAllIcon")}})})},"webview/admin/widget/AdminToolbar":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/text!webview/admin/widget/templates/AdminToolbar.html dijit/_TemplatedMixin dijit/_Widget".split(" "),function(r,p,m,l,h,c,g,d){return p("webview/admin/widget/AdminToolbar",[d,g],{templateString:c,_buttonArray:null,_iconArray:null,postCreate:function(){null===this._buttonArray&&
(this._buttonArray=[]);null===this._iconArray&&(this._iconArray=[])},addButton:function(c){l.remove(this.buttonsContainer,"hidden");h.place(c.domNode,this.buttonsContainer);this._buttonArray.push(c)},addIcon:function(c){l.remove(this.iconContainer,"hidden");h.place(c.domNode,this.iconContainer);this._iconArray.push(c)},addMultipleButtons:function(c){r.forEach(c,m.hitch(this,this.addButton))},addMultipleIcons:function(c){r.forEach(c,m.hitch(this,this.addIcon))},addTitle:function(c){h.create("div",
{"class":"button-bar-title",innerHTML:c,title:c},this.buttonsContainer,"only")},replaceAllButtons:function(c){this.removeAllButtons();this.addMultipleButtons(c)},replaceAllIcons:function(c){this.removeAllIcons();this.addMultipleIcons(c)},removeButtonFromIndex:function(c){h.destroy(this._buttonArray[c].domNode);this._buttonArray.splice(c,1)},removeAllButtons:function(){h.empty(this.buttonsContainer);this._buttonArray=[]},removeAllIcons:function(){h.empty(this.iconContainer);this._iconArray=[]}})})},
"webview/widget/CommitButtons":function(){define("dojo/_base/declare dojo/dom-class dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/CommitButtons.html rc/_Widget ./ToolbarButton".split(" "),function(r,p,m,l,h){return r("webview/widget/CommitButtons",h,{templateString:l,constructor:function(){this.inherited(arguments);this.webviewStrings=m},showCancelOption:function(c){c?(p.remove(this.cancelSaveButton,"hidden"),p.add(this.saveButton,"hidden"),p.add(this.cancelButton,"hidden")):(p.add(this.cancelSaveButton,
"hidden"),p.remove(this.saveButton,"hidden"),p.remove(this.cancelButton,"hidden"))}})})},"webview/widget/WebviewContentPane":function(){define("dijit/_TemplatedMixin dijit/_Widget dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/declare dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/WebviewContentPane.html".split(" "),function(r,p,m,l,h,c,g,d,n){return c("webview/widget/WebviewContentPane",[p,r],{templateString:n,titleLabel:"",postCreate:function(){""!==
this.titleLabel&&(this.titleLabel=void 0!==d[this.titleLabel]?d[this.titleLabel]:this.titleLabel,this.setTitleContent(this.titleLabel,"left"))},setTitleContent:function(a,b){var c=null;l.remove(this.titleBar,"hidden");switch(b){case "right":this.rightContent=a;c=this.rightTitleContentNode;c.appendChild(a);break;default:this.leftContent=a,c=this.leftTitleContentNode,m.set(c,"innerHTML",a)}},addLeftTitleContent:function(a){this.leftTitleContentNode.appendChild(a)},setMainContent:function(a){this.contents.appendChild(a)},
clearMainContent:function(){h.empty(this.contents)}})})},"webview/admin/panelFiles/PanelFiles":function(){define("dgrid/Grid dgrid/extensions/ColumnResizer dgrid/OnDemandGrid dgrid/Selection dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/i18n!../../nls/panelfiles dojo/i18n!../../nls/programs dojo/json dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/PanelFiles.html ./widget/AutoNetworkBackup ../_Widget ../widget/NetworkTree ../widget/ResultsDialog ../../util/globalConstants ../../widget/dialogs/PromptForPassword ../../widget/WarningDialog ../../widget/WarningDialogEnums ../../xhrEnhanced rc/bacnet/enums rc/date ./PanelFilesToolbar ../widget/AdminToolbar ../../widget/WebviewContentPane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q){return g("webview/admin/panelFiles/PanelFiles",[H],{errorStrings:z,panfileStrings:x,programStrings:y,rcStrings:u,templateString:D,webviewStrings:w,_autoNetworkBackupDialog:null,_backupRestoreMap:null,_constantHeights:-1,_descriptionMap:null,_dependentChange:null,_EmptyPasswordAllowedCode:67,_IncorrectPassword:1,_GoodPasswordRestore:49,_GoodPasswordBackup:3,_OperationInProgress:510,_grid:null,_gridStore:null,_lastSavedPanelFileStore:null,
_thirdPartyPanelFileOperation:!1,_thirdPartyOperationAttempts:0,_thirdPartyPassword:"",_selectedNodes:[],_type:"",_messageMap:null,_overwriteConfirmDialog:null,_passwordDialog:null,_rejectedPanelFileTypes:[],_resultsDialog:null,_updateFilterTimeout:null,constructor:function(){this._views=[];this._backupRestoreMap={backup:{title:this.panfileStrings.backupInProgress,completeMessage:this.panfileStrings.backupFinished,path:this.getPathForFiles()+"/backup"},restore:{title:this.panfileStrings.restoreInProgress,
completeMessage:this.panfileStrings.restoreFinished,path:this.getPathForFiles()+"/restore"}};this._gridStore=new E(new C({idProperty:"name"}));this._lastSavedPanelFileStore=new E(new C({idProperty:"bacnetDeviceNumber"}));this._rejectedPanelFileTypes=[I.PanelFileCompatibilityTypes.rcp,I.PanelFileCompatibilityTypes.none];this._messageMap={backup:{0:this.panfileStrings.idle,200:this.panfileStrings.successfulBackups,201:this.panfileStrings.backupSuccessfulWithRetries,501:this.errorStrings.cannotAccessSystem,
504:this.panfileStrings.panelBackupCRCErrors,505:this.panfileStrings.backupErrors,506:this.panfileStrings.backupInsufficientPrivileges,508:this.panfileStrings.BACnetError,510:this.panfileStrings.backupInProgress,511:this.panfileStrings.backupUserCancelled,515:this.panfileStrings.overwritePermission},restore:{0:this.panfileStrings.idle,200:this.panfileStrings.restoreSuccessful,201:this.panfileStrings.restoreSuccessfulWithRetries,501:this.errorStrings.cannotAccessSystem,504:this.panfileStrings.restoreSuccessfulWithErrors,
508:this.panfileStrings.BACnetError,510:this.panfileStrings.restoreInProgress,511:this.panfileStrings.restoreUserCancelled}};this._descriptionMap={0:this.panfileStrings.emptyString,1:this.panfileStrings.incorrectPassword,2:this.panfileStrings.continuing,3:this.panfileStrings.startingBackup,4:this.panfileStrings.gettingControllerStatusX,5:this.panfileStrings.controllerStatusErrorX,7:this.panfileStrings.controllerOperational,8:this.panfileStrings.controllerStatusError,9:this.panfileStrings.noErrorContinue,
10:this.panfileStrings.successRetrievedConfigFiles,11:this.panfileStrings.gettingConfigFilesInfoXOfX,12:this.panfileStrings.passwordIncorrect,13:this.panfileStrings.fileObjectsAccessMethodsReceived,14:this.panfileStrings.controllerStateNotChanged,15:this.panfileStrings.backupFailed,16:this.panfileStrings.restoreFailed,17:this.panfileStrings.gettingControllerStatus,18:this.panfileStrings.backupFailed,19:this.panfileStrings.restoreFailed,20:this.panfileStrings.errorGettingFileObject,21:this.panfileStrings.controllerXRecordsReturned,
22:this.panfileStrings.controllerXBytesStream,23:this.panfileStrings.controllerSuccessfullyRetrieved,24:this.panfileStrings.unauthModOfConfigFileXDuringBackup,25:this.panfileStrings.unexpectedStateDuringBackup,26:this.panfileStrings.controllerBackupCRCErrors,27:this.panfileStrings.backupHadErrors,28:this.panfileStrings.restoreHadErrors,29:this.panfileStrings.backupCompletedWithRetries,30:this.panfileStrings.backupCompletedSuccessfully,31:this.panfileStrings.restoreCompletedWithRetries,32:this.panfileStrings.restoreCompletedSuccessfully,
33:this.panfileStrings.groupXMLJSONBackupSuccess,34:this.panfileStrings.getXMLJSONError,35:this.panfileStrings.getConfigError,36:this.panfileStrings.getFileAccessMethodsError,37:this.panfileStrings.recordDataForXRetrieved,38:this.panfileStrings.fileObjectRestoreSuccess,39:this.panfileStrings.streamDataForXRetrieved,40:this.panfileStrings.fileObjectDataReadSuccess,41:this.panfileStrings.errorX,42:this.panfileStrings.panelFileNumXDoesNotMatchControllerNum,43:this.panfileStrings.incompatibleFileTypeX,
44:this.panfileStrings.invalidFileNameX,45:this.panfileStrings.fileNotFoundX,46:this.panfileStrings.errorOpeningFileX,47:this.panfileStrings.internalFileErrorX,48:this.panfileStrings.deviceBackupRestoreInProgress,49:this.panfileStrings.startingRestore,50:this.panfileStrings.groupConfigDataRestoredSuccess,51:this.panfileStrings.restoreFileObjectError,52:this.panfileStrings.restoredXSuccess,53:this.panfileStrings.restoringXObjectToOldFirmware,54:this.panfileStrings.zeroedX,55:this.panfileStrings.invalidConfigDataTryingToRestoreXObj,
56:this.panfileStrings.restoreXSuccessXrecordsFromX,57:this.panfileStrings.restoreXSuccessXStreamSizeX,58:this.panfileStrings.restoreWasSuccessful,59:this.panfileStrings.cannotOpenPanelFile,60:this.panfileStrings.invalidPanelFileName,61:this.panfileStrings.panelFilePathTooBig,62:this.panfileStrings.unableToCreatePanelFile,63:this.panfileStrings.errorLoadingDescriptors,64:this.panfileStrings.loadingDescriptors,65:this.panfileStrings.descriptorsFinishedLoading,66:this.panfileStrings.descriptorsFinishedLoadingWithErrors,
67:this.panfileStrings.emptyPasswordAllowed,68:this.panfileStrings.clientCreated,69:this.panfileStrings.clientTerminated,70:this.panfileStrings.errorTimeout,71:this.panfileStrings.fileSystemLocked,72:this.panfileStrings.errorUnknown,73:this.panfileStrings.fileSystemBusy,74:this.panfileStrings.alreadyMounted,75:this.panfileStrings.notMounted,76:this.panfileStrings.badParameter,77:this.panfileStrings.fileNotFound,78:this.panfileStrings.cannotCreateFile,79:this.panfileStrings.invalidCRC,80:this.panfileStrings.internalError,
81:this.panfileStrings.insufficientMemory,82:this.panfileStrings.directoryListingFailed,83:this.panfileStrings.systemStatusLoadFailed,84:this.panfileStrings.fileSystemStarting,85:this.panfileStrings.fileFull,86:this.panfileStrings.fileReadError,87:this.panfileStrings.fileWriteError,88:this.panfileStrings.badPacket,89:this.panfileStrings.unknownObject,90:this.panfileStrings.fileNameTooLong,91:this.panfileStrings.invalidFileName,92:this.panfileStrings.directoryPathTooLong,93:this.panfileStrings.invalidDirectoryName,
94:this.panfileStrings.cannotCreateDirectory,95:this.panfileStrings.fileTooLarge,96:this.panfileStrings.alreadyConnected,97:this.panfileStrings.notConnected,98:this.panfileStrings.file_d_of_d_s,99:this.panfileStrings.directoryListingComplete,100:this.panfileStrings.backupDirectoryCannotBeCreated,101:this.panfileStrings.fileDownloadComplete,102:this.panfileStrings.fileUpdloadComplete,103:this.panfileStrings.filesStoredInPanelFile,104:this.panfileStrings.temporaryMPVUpdateFolderDeleted,105:this.panfileStrings.mpvFilesDeleted,
106:this.panfileStrings.startingFilesDownload,107:this.panfileStrings.noResourcesFoundToBackUp,108:this.panfileStrings.noResourcesFoundToRestore};d.mixin(this.ErrorMessageMap,{515:this.panfileStrings.overwritePermission})},postCreate:function(){this.inherited(arguments);var a=rc.session._attributes.permittedSystems.find(d.hitch(this,function(a){return a.id===Number(this.system)}));if(rc.session.hasRole(rc.session.roles2.panFileBackup,!0)||rc.session.hasRole(rc.session.roles2.panFileRestore,!0))if(a)webview.auditUtil.setContextDataWithSiteId(this.site,
[{systemId:this.system,objectName:"#PanelFile"}],this.title),this._setupLabels(),this._createViews(),this._createButtons(),this._buildColumnStructure(),this._getSystemTree().then(d.hitch(this,function(a){this.onInitSuccess();this._buildSystemTree(a);this._getPanelFiles().then(d.hitch(this,this._parsePanelFiles));this._buildGrid()})),this._toolbar.autoBackupButton.set("disabled",!rc.session.hasRole(rc.session.roles2.panFileBackup,!0));else{if(0<rc.session._attributes.SiteMapArray.length)var b=rc.session._attributes.SiteMapArray[0].systems.find(d.hitch(this,
function(a){return a.systemId===Number(this.system)}));this._throwFullscreenError({name:this.rcStrings.permissionDenied,message:B.substitute(this.errorStrings.systemAccessError,[b?b.systemName:this.system]),suggestion:"",e:null})}else this._throwFullscreenError({name:this.errorStrings.insufficientPermissions,message:this.panfileStrings.permissionErrorMessage,suggestion:this.errorStrings.contactAdmin,e:null})},formatDetailsCell:function(a,b){var c={1:!0,5:!0,8:!0,12:!0,15:!0,16:!0,18:!0,19:!0,20:!0,
24:!0,25:!0,26:!0,27:!0,28:!0,34:!0,35:!0,36:!0,41:!0,42:!0,43:!0,44:!0,45:!0,46:!0,47:!0,51:!0,55:!0,59:!0,60:!0,61:!0,62:!0,63:!0,66:!0},f=this.inherited(arguments);"undefined"!==typeof b.detailsDescription&&"undefined"!==typeof b.detailsDescription.baseDescription&&"undefined"!==typeof c[b.detailsDescription.baseDescription]&&(f="\x3cspan class\x3d'detail-is-error'\x3e"+f+"\x3c/span\x3e");return f},getPathForFiles:function(){return"PanelFile"},getPathForTree:function(){return"SystemTree"},setToolBarMenus:function(a){a.Print=
!1;this.userToolBar.resetMenusAndHelp(a)},_addDependentListener:function(){this._removeDependentListener();this._dependentChange=A(this._systemTree,"checkedChange",d.hitch(this,this._updateDependants));this.own(this._dependentChange)},_addToolbarListeners:function(){this.own(A(this._toolbar,"backup",d.hitch(this,this._backupPanelFile)),A(this._toolbar,"restore",d.hitch(this,this._restorePanelFile)),A(this._toolbar,"autoBackup",d.hitch(this,this._showAutoBackup)),A(this._toolbar,"log",d.hitch(this,
this._showLog)))},_askUserForOverwrite:function(){var b=new a;this.own(b);null===this._overwriteConfirmDialog&&(this._overwriteConfirmDialog=new L({type:M.types.binaryConfirm,closeButtonVisible:!1,title:this.panfileStrings.fileOverwrite,text:this.panfileStrings.confirmOverwrite}));var c=this._overwriteConfirmDialog.on("close",d.hitch(this,function(a){switch(a){case M.returnValues.oneOrYes:b.resolve();break;case M.returnValues.allOrNo:b.reject();break;default:console.error(this.declaredClass+" - _confirm(): Unknown choice",
a)}c.remove()}));this.own(c);this._overwriteConfirmDialog.open();return b.promise},_backupPanelFile:function(){var a=this._systemTree.get("checked");this._prepareBackupRestoreObject(a,"backup").then(d.hitch(this,this._performBackupRestore)).then(d.hitch(this,this._parseBackupRestoreResults))},_buildColumnStructure:function(){this._columnStructure=[{id:"nameCol",field:"name",label:this.webviewStrings.name,sortable:!0,renderCell:d.hitch(this,this._buildFilenameCell)},{id:"typeCol",field:"compatibilityType",
label:this.webviewStrings.trendlogType,sortable:!0,formatter:d.hitch(this,this._getPanelFileType)},{id:"deviceCol",field:"device",label:this.panfileStrings.device,sortable:!0},{id:"sizeCol",field:"size",label:this.panfileStrings.size,sortable:!0,formatter:d.hitch(this,function(a){var b=a;1E9<a?b=(a/1E9>>>0)+"GB":1E6<a?b=(a/1E6>>>0)+"MB":1E3<a&&(b=(a/1E3>>>0)+"KB");return b})},{id:"modifiedCol",field:"modified",label:this.panfileStrings.modified,sortable:!0,formatter:d.hitch(this,function(a){return n.format(new Date(a),
{formatLength:"medium"})})}]},_buildFilenameCell:function(a,b,c){c=q.create("div",{"class":"filename-cell"},c,"only");q.create("div",{"class":"filename-icon svg-16px svg-"+a.deviceModel.split(" ")[0].toLowerCase()+"Icon"},c,"first");q.create("span",{innerHTML:b},c,"last");return c},_buildGrid:function(){null===this._grid&&(this._grid=new (g([r,m,l,p]))({columns:this._columnStructure,sort:[{attribute:"name",descending:!1}],store:this._gridStore,maxRowsPerPage:256,minRowsPerPage:128,maxEmptySpace:10,
keepScrollPosition:!0,noDataMessage:B.substitute(this.webviewStrings.noXFound,[this.panfileStrings.panelFiles]),selectionMode:"single"},this.gridNode),this._grid.startup(),this.own(A(this._grid,["dgrid-select","dgrid-deselect"],d.hitch(this,this._gridSelectionChanged))))},_buildSystemTree:function(a){a=a.filter(d.hitch(this,function(a){return"device"!==a.type||-1===this._rejectedPanelFileTypes.indexOf(a.compatibilityType)}));a=new E(new C({data:a,getChildren:function(a){return this.query({parent:a.id})}}));
var b=a.query(d.hitch(a,function(a){return"network"!==a.type||0<this.getChildren(a).length}));a.setData(b);b=new h({store:a,query:{type:"root"},labelAttr:"name",mayHaveChildren:function(a){return 0<this.store.query({parent:a.id}).length}});this._systemTree=new J({model:b,showRoot:!1});this._systemTree.placeAt(this.deviceGutter);this._systemTree.startup();if(this.device){var c=a.query(d.hitch(this,function(a){return"device"===a.widget&&Number(a.widgetId)===Number(this.device)}));1===c.length&&this.own(A.once(this._systemTree,
"load",d.hitch(this,function(){this._systemTree.expandToNode(c[0]).then(d.hitch(this,function(){this._systemTree.setCheckboxState(c[0],!0)}))})))}this.own(A(this._systemTree,"checkedChange",d.hitch(this,function(){null!==this._updateFilterTimeout&&(clearTimeout(this._updateFilterTimeout),this._updateFilterTimeout=null);this._updateFilterTimeout=setTimeout(d.hitch(this,this._updateFilteredFiles),100)})));this._addDependentListener()},_canBackUpRestoreSelectedDevices:function(a){var b=!1;switch(a.length){case 0:b=
!1;break;case 1:b=!0;break;default:b=a.some(function(a){return a.compatibilityType!==I.PanelFileCompatibilityTypes.thirdParty})}return b},_checkTestPasswordStatus:function(a,b,f){var g=function(a,c){1==c?O.get(b+"/status",{handleAs:"json",preventCache:!0,query:{systemId:this.system,userId:rc.session._attributes.userId,processId:f.processId,abort:!0}}):O.get(b+"/status",{handleAs:"json",preventCache:!0,query:{systemId:this.system,userId:rc.session._attributes.userId,processId:f.processId,removeOpOnCompletion:!1}}).then(d.hitch(this,
this._checkTestPasswordStatus,a,b))},k=!1,h=!1;"undefined"!==typeof f.results&&0<f.results.length&&(h=f.results,k=c.some(h,d.hitch(this,function(a){return c.some(a.detailsDescriptions,d.hitch(this,function(a){return a.baseDescription===this._GoodPasswordRestore||a.baseDescription===this._GoodPasswordBackup}))})),h=c.some(h,d.hitch(this,function(a){return c.some(a.detailsDescriptions,d.hitch(this,function(a){a=a.subDescriptions;for(var b=0;b<a.length;b++)if(2==a[b].type)try{var c=v.parse(a[b].value);
if(4===c.errorClass&&26===c.errorCode)return!0}catch(X){}return!1}))})));!1===k&&!1===h&&f.completed!==f.total?setTimeout(d.hitch(this,g,a,!1),250):!0===h||f.errStatus&&508===f.errStatus?(setTimeout(d.hitch(this,g,a,!0),10),this._promptForPassword(a)):a.resolve({passwordSuccess:!0,password:""})},_createAutoNetworkBackupDialog:function(){this._autoNetworkBackupDialog=new F({title:this.panfileStrings.autoNetworkBackup,queryParams:{systemId:this.system}})},_createButtons:function(){this.buttonBar.addIcon(this._toolbar);
this.setTooltips();this._addToolbarListeners()},_createResultsDialog:function(){null===this._resultsDialog&&(this._resultsDialog=new G({formatDetailsCell:this.formatDetailsCell,staticTitle:"",headerMap:{name:this.panfileStrings.panelName,object:this.rcStrings.file,details:this.programStrings.smDetails},completeMessageMap:{backup:this.panfileStrings.backupFinished,restore:this.panfileStrings.restoreFinished},messageMap:{backup:d.hitch(this,this._decodeBackupRestoreDetails),restore:d.hitch(this,this._decodeBackupRestoreDetails)},
typeMap:{backup:this.panfileStrings.successfulBackups,restore:"Successful Restores"}}),this.own(A(this._resultsDialog,"done",d.hitch(this,function(){this._getPanelFiles().then(d.hitch(this,this._parsePanelFiles))}))))},_createViews:function(){this.panelFilesWidget.setMainContent(this.panelFilesContent);this._views.push(this.panelFilesWidget)},_decodeBackupRestoreDetails:function(a,b,c){var f=a;if(c.detailsDescription){if(a=c.detailsDescription,f=this._descriptionMap[a.baseDescription],a.subDescriptions)for(a=
a.subDescriptions,b=0;b<a.length;b++)switch(a[b].type){case 1:c=P.objectNames[a[b].value];c=void 0===c?this.panfileStrings.fileObject+" "+a[b].value:c;f=f.replace("%s",c);break;case 2:f=f.replace("%s",this._decodeBACnetError(a[b].value).replace(":\x3cbr \x3e"," - "));break;case 3:f=f.replace("%d",a[b].value);break;case 4:f=f.replace("%s",Q.formatUTC(parseInt(a[b].value)));break;case 5:f=f.replace("%s",a[b].value);break;default:console.error(this.declaredClass+" - _decodeBackupRestoreDetails(): Unknown choice",
a[b].type)}}else"undefined"!==typeof this._messageMap[b]&&"undefined"!==typeof this._messageMap[b][a]&&(f=this._messageMap[b][a]);return f},_getConstantHeights:function(){-1===this._constantHeights&&(this._constantHeights=0,b.byId("rcAdminContentHeader")&&(this._constantHeights=f.get("rcAdminContentHeader","height"),this._constantHeights+=f.get("rcAdminContentHeader","paddingTop")),b.byId("rcSystemFooter")&&(this._constantHeights+=f.get("rcSystemFooter","height")),this._constantHeights+=f.get(this.buttonBar.domNode,
"height"),this._constantHeights+=f.get(this.buttonBar.domNode,"marginTop"),this._constantHeights+=f.get(this.buttonBar.domNode,"marginBottom"));return this._constantHeights},_getPanelFiles:function(){var b=new a;this.own(b);O.get(this.getPathForFiles(),{handleAs:"json",preventCache:!0,query:{systemId:this.system}}).then(d.hitch(this,b.resolve),d.hitch(this,b.reject));return b.promise},_getPanelFileType:function(a){var b="Unkwnown";"undefined"!==typeof I.PanelFileCompatibilityTypes[a]?b=I.PanelFileCompatibilityTypes[a]:
console.error(this.declaredClass+"_getPanelFileType(): Unknown type",a);return b},_getSystemTree:function(){var b=new a;this.own(b);O.get(this.getPathForTree(),{handleAs:"json",preventCache:!0,query:{userId:rc.session._attributes.userId,systemId:this.system}}).then(d.hitch(this,b.resolve),d.hitch(this,b.reject));return b.promise},_gridSelectionChanged:function(a){"dgrid-select"===a.type?this.panelFileTB.set("value",a.rows[0].data.name):this.panelFileTB.set("value","")},_parsePanelFiles:function(a){a.errStatus===
this.SuccessCode?(this._gridStore.setData(a.panelFiles),this._lastSavedPanelFileStore.setData(a.lastSavedPanelFile),this._grid.refresh(),this._toolbar.logButton.set("disabled",a.systemHasLoggedResult?!1:!0)):this._displayError(a)},_parseBackupRestoreResults:function(b){if(b.errStatus!==this.SuccessCode)this._displayError(b);else{var c=new a;this._thirdPartyPanelFileOperation&&0==this._thirdPartyOperationAttempts?this._checkTestPasswordStatus(c,this._backupRestoreMap[b.type].path,{results:[],processId:b.processId,
completed:0,total:1}):c.resolve({passwordSuccess:!0,password:""});c.then(d.hitch(this,function(a){1==a.passwordSuccess?(this._createResultsDialog(),this._resultsDialog.show(),this._resultsDialog.set("queryParams",{systemId:this.system,userId:rc.session._attributes.userId,processId:b.processId}),this._resultsDialog.set({title:this._backupRestoreMap[b.type].title,path:this._backupRestoreMap[b.type].path+"/status"})):(this._thirdPartyPassword=a.password,this._prepareBackupRestoreObject(this._selectedNodes,
this._type,1).then(d.hitch(this,this._performBackupRestore)).then(d.hitch(this,this._parseBackupRestoreResults)))}))}},_performBackupRestore:function(b){var c=new a,f=b.selectedNodes;1<f.length&&(f=f.filter(function(a){return a.compatibilityType!==I.PanelFileCompatibilityTypes.thirdParty}));var g=f.filter(function(a){return"device"===a.type}).map(function(a){return a.widgetId}),k;0<f.length&&(f.some(function(a){return a.compatibilityType===I.PanelFileCompatibilityTypes.thirdParty})?(this._thirdPartyPanelFileOperation=
!0,c.resolve(this._thirdPartyPassword)):c.resolve(""),k=c.then(d.hitch(this,function(a){var c=this._backupRestoreMap[b.type].path,f={userId:rc.session._attributes.userId,systemId:this.system,devices:g,filename:1<g.length?"":b.filename,encryptedPassword:a};if("backup"===b.type)d.mixin(f,{needsBundling:b.needsBundling,filePrefix:b.filePrefix});else if("restore"===b.type)return this._validateApprovalSessionWithReason(f).then(d.hitch(this,function(){return O.put(c,{handleAs:"json",preventCache:!0,data:f})}));
return O.put(c,{handleAs:"json",preventCache:!0,data:f})})));return k},_prepareBackupRestoreObject:function(b,c,f){this._thirdPartyOperationAttempts=f?f:0;this._thirdPartyPanelFileOperation=!1;0===this._thirdPartyOperationAttempts&&(this._thirdPartyPassword="");this._selectedNodes=b;this._type=c;f=new a;this.own(f);var g=[],k=this.filePrefixTB.get("value").trim(),h=b.some(function(a){return"device"!==a.type});if(!h){var l=this.panelFileTB.get("value").trim();1===b.length&&""!==l?g.push(l):g=b.map(function(a){return[k,
a.widgetId].join("")})}b={type:c,selectedNodes:b,needsBundling:h,filePrefix:k,filename:1===g.length?g[0]:""};h||"restore"===c||0===this._gridStore.query(function(a){return-1<g.indexOf(a.name)}).length?f.resolve(b):rc.session.hasRole(rc.session.roles2.panFileOverwrite,!0)?this._askUserForOverwrite().then(d.hitch(this,f.resolve,b),d.hitch(this,f.reject)):(this._displayError({errStatus:515}),f.reject());return f.promise},_promptForPassword:function(a){null===this._passwordDialog&&(this._passwordDialog=
new K({title:this.webviewStrings.devicePassword}),this._passwordDialog.startup());this._passwordDialog.set("encryptedDeferred",a);this.own(A(this._passwordDialog,"cancel",d.hitch(this,function(){a.reject()})));this._passwordDialog.show()},_removeDependentListener:function(){null!==this._dependentChange&&(this._dependentChange.remove(),this._dependentChange=null)},_removeParentSelection:function(b){for(var c=new a,f=[];b&&"system"!==b.widget;)b=this._systemTree.model.store.get(b.parent),f.push(b);
f.forEach(d.hitch(this,function(a){this._systemTree.setCheckboxState(a,!1)}));this.defer(c.resolve);return c.promise},_resize:function(){var a=f.get(this.domNode.parentElement,"height"),a=a-this._getConstantHeights(),a=a-2*f.get(this.panelFilesWidget.domNode,"paddingTop"),a=a-2*f.get(this.panelFilesWidget.contentPaneBody,"paddingTop"),a=a-f.get(this.panelFileSettings,"height"),b=f.get(this.panelFilesWidget.contentPaneBody,"width"),b=b-2*f.get(this.panelFilesWidget.contentPaneBody,"paddingLeft");f.set(this.deviceGutter,
{height:a+"px",width:.3*b+"px"});f.set(this.gridNode,{height:a+"px",width:.7*b+"px"});this._grid&&this._grid.resize()},_restorePanelFile:function(){var a=this._systemTree.get("checked");this._prepareBackupRestoreObject(a,"restore").then(d.hitch(this,this._performBackupRestore)).then(d.hitch(this,this._parseBackupRestoreResults))},_setupLabels:function(){t.set(this.panelFileLB,"for",this.panelFileTB.id);t.set(this.filePrefixLB,"for",this.filePrefixTB.id)},_showAutoBackup:function(){null===this._autoNetworkBackupDialog&&
this._createAutoNetworkBackupDialog();this._autoNetworkBackupDialog.show()},_showLog:function(){this._createResultsDialog();this._resultsDialog._getErrorMessage=function(){return""};this._resultsDialog.show();this._resultsDialog.set("queryParams",{systemId:this.system});this._resultsDialog.set({title:"",path:this.getPathForFiles()+"/Log"})},_toggleFields:function(a){var b=this._systemTree.get("checked");this._toolbar.backupButton.set("disabled",!this._canBackUpRestoreSelectedDevices(b)||!rc.session.hasRole(rc.session.roles2.panFileBackup,
!0));(a=1!==b.length||a)?(this.controllerNumberValueLB.innerText="",this.panelFileTB.set("value","")):(this.controllerNumberValueLB.innerText=b[0].widgetId,b=this._lastSavedPanelFileStore.get(b[0].widgetId),this.panelFileTB.set("value","undefined"!==typeof b?b.lastSavedFilename:""));this.panelFileTB.set("disabled",a);k.toggle(this.controllerNumberLB,"disabled",a);k.toggle(this.panelFileLB,"disabled",a)},_toggleGridAndFields:function(a){this._grid.set("selectionMode",a?"none":"single");k.toggle(this.gridNode,
"disabled",a);this._toggleFields(a)},_updateDependants:function(a,b){"system"===a.widget?this._systemTree.model.store.query({widget:"network"}).forEach(d.hitch(this,function(a){this._systemTree.expandToNode(a).then(d.hitch(this,function(){this._systemTree.setCheckboxState(a,b)}))})):"network"===a.widget?this._systemTree.model.store.query({parent:a.id}).forEach(d.hitch(this,function(a){this._systemTree.expandToNode(a).then(d.hitch(this,function(){this._systemTree.setCheckboxState(a,b)}))})):b||(this._removeDependentListener(),
this._removeParentSelection(a).then(d.hitch(this,this._addDependentListener)))},_updateFilteredFiles:function(){var a=this._systemTree.get("checked");this._toolbar.restoreButton.set("disabled",!this._canBackUpRestoreSelectedDevices(a)||!rc.session.hasRole(rc.session.roles2.panFileRestore,!0));if(0===a.length||a.some(function(a){return"system"===a.widget}))this._grid.set("query",{});else{var b=[];a.forEach(function(a){-1===b.indexOf(a.compatibilityType)&&b.push(a.compatibilityType)});a.filter(function(a){return"network"===
a.widget}).forEach(d.hitch(this,function(a){this._systemTree.model.store.query({parent:a.id}).forEach(function(a){-1===b.indexOf(a.compatibilityType)&&b.push(a.compatibilityType)})}));this._grid.set("query",function(a){return-1<b.indexOf(a.compatibilityType)})}1<a.length||a.some(d.hitch(this,function(a){return-1<this._rejectedPanelFileTypes.indexOf(a.compatibilityType)||"system"===a.widget||"network"===a.widget}))?this._toggleGridAndFields(!0):this._toggleGridAndFields(!1)},destroy:function(){this.inherited(arguments);
O.clearAllRequests();null!==this._updateFilterTimeout&&(clearTimeout(this._updateFilterTimeout),this._updateFilterTimeout=null)}})})},"webview/admin/panelFiles/widget/AutoNetworkBackup":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!../../../nls/all dojo/i18n!../../../nls/errorMessages dojo/i18n!../../../nls/panelfiles dojo/on dojo/query dojo/request/xhr dojo/text!./templates/AutoNetworkBackup.html dojo/topic dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/RadioButton dijit/form/Select dijit/form/ValidationTextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return p("webview/admin/panelFiles/widget/AutoNetworkBackup",[r],{closable:!1,isEnabled:!1,isOkButtonEnabled:!1,panfileStrings:n,queryParams:{},radioSelection:0,rcStrings:c,templateString:k,webviewStrings:g,_autoBackupTypeMap:{Daily:0,Weekly:1,Monthly:2},_autoNetworkBackupPreferences:{},_ErrorMap:{501:d.cannotAccessSystem,505:d.systemDoesNotExist,506:n.backupInsufficientPrivileges},_path:"AutoNetworkBackup",_radioLookup:null,_successCode:200,postCreate:function(){this.inherited(arguments);
var a=[];l.getNames("days","wide").forEach(function(b,c){a.push({label:b,value:c})});a[0].selected=!0;this.daysOfWeekDD.options=a;h.set(this.enableLabel,"for",this.enableCheckbox.id);this._radioLookup={0:this.dailyRecurrence,1:this.weeklyRecurrence,2:this.monthlyRecurrence};this._setupListeners();this._fetchData()},_setIsEnabledAttr:function(a){this.dailyRecurrence.set("disabled",!a);this.weeklyRecurrence.set("disabled",!a);this.monthlyRecurrence.set("disabled",!a);this.daysOfWeekDD.set("disabled",
!a||this._autoBackupTypeMap.Weekly!==this.radioSelection);this.dayOfMonthTB.set("disabled",!a||this._autoBackupTypeMap.Monthly!==this.radioSelection);this._set("isEnabled",a)},_setIsOkButtonEnabledAttr:function(a){this.okButton.set("disabled",!a);this._set("isOkButtonEnabled",a)},_setRadioSelectionAttr:function(a){this.daysOfWeekDD.set("disabled",!this.isEnabled||this._autoBackupTypeMap.Weekly!==a);this.dayOfMonthTB.set("disabled",!this.isEnabled||this._autoBackupTypeMap.Monthly!==a);this._set("radioSelection",
a)},_checkThenSetOkButtonState:function(){this.set("isOkButtonEnabled",this.timeTB.isValid()&&(this.dayOfMonthTB.isValid()||2!==this.radioSelection||!this.isEnabled))},_fetchData:function(){t.get(this._path,{handleAs:"json",preventCache:!0,query:this.queryParams}).then(m.hitch(this,this._parseFetch))},_getErrorMessage:function(a){var b=a.errMSG;"undefined"!==typeof this._ErrorMap[a.errStatus]&&(b=this._ErrorMap[a.errStatus]);return b},_onCancel:function(){this.hide();this._fetchData()},_onOk:function(){this.hide();
this._sendData()},_parseFetch:function(a){a.errStatus===this._successCode&&a.autoNetworkBackupPreferences&&(this._autoNetworkBackupPreferences=a.autoNetworkBackupPreferences,this.filenamePrefixTB.set("value",this._autoNetworkBackupPreferences.filenamePrefix),this.daysOfWeekDD.set("value",this._autoNetworkBackupPreferences.dayOfWeek),this.dayOfMonthTB.set("value",this._autoNetworkBackupPreferences.dayOfMonth),this.timeTB.set("value",this._autoNetworkBackupPreferences.time.slice(0,5)),"undefined"!==
typeof this._radioLookup[this._autoNetworkBackupPreferences.type]&&(this._radioLookup[this._autoNetworkBackupPreferences.type].set("checked",!0),this.set("radioSelection",this._autoNetworkBackupPreferences.type)),this.enableCheckbox.set("checked",this._autoNetworkBackupPreferences.enabled),this.set("isEnabled",this._autoNetworkBackupPreferences.enabled));this._checkThenSetOkButtonState()},_parseSave:function(a){a.errStatus!==this._successCode&&(a=this._getErrorMessage(a),q.publish("sticky",{type:"error",
message:a}))},_sendData:function(){this._autoNetworkBackupPreferences={filenamePrefix:this.filenamePrefixTB.get("value"),enabled:this.isEnabled,type:this.radioSelection,dayOfWeek:this.daysOfWeekDD.get("value"),dayOfMonth:""===this.dayOfMonthTB.get("value")?1:this.dayOfMonthTB.get("value"),time:""===this.timeTB.get("value")?"00:00":this.timeTB.get("value")};t.put(this._path,{handleAs:"json",data:{userId:rc.session._attributes.userId,systemId:this.queryParams.systemId,autoNetworkBackupPreferences:JSON.stringify(this._autoNetworkBackupPreferences)}}).then(m.hitch(this,
this._parseSave))},_setupListeners:function(){this.own(a(this.okButton,"click",m.hitch(this,this._onOk)),a(this.cancelButton,"click",m.hitch(this,this._onCancel)),a(this.enableCheckbox,"change",m.hitch(this,function(a){this.set("isEnabled",a);this._checkThenSetOkButtonState()})),a(this.dayOfMonthTB,"change",m.hitch(this,function(){this._checkThenSetOkButtonState()})),a(this.timeTB,"change",m.hitch(this,function(){this._checkThenSetOkButtonState()})),a(b("[name\x3d'_autoBackupType']"),"change",m.hitch(this,
function(){setTimeout(m.hitch(this,function(){this.set("radioSelection",Number(this._autoBackupForm.get("value")._autoBackupType));this._checkThenSetOkButtonState()}),1)})))}})})},"webview/admin/widget/NetworkTree":function(){define(["dijit/Tree","dojo/_base/declare","dojo/_base/lang","dojo/store/Memory","./NetworkTreeNode"],function(r,p,m,l,h){return p("webview/admin/panelFiles/widget/NetworkTree",[r],{_selectedCheckboxStore:null,constructor:function(){this._selectedCheckboxStore=new l},expandToNode:function(c){var g=
dijit.defaultDuration;dijit.defaultDuration=20;var d=[c.id];c=c.parent;for(var h=null;null!==c;)d.unshift(c),h=this.model.store.query({id:c}),c=1===h.length?h[0].parent:null;return this.set("path",d).then(m.hitch(this,function(a){dijit.defaultDuration=a},g))},getIconClass:function(c){var g="dijitTreeIcon dijitLeaf ";if(c.widget&&c.widget.length){var d=c.widget.toLowerCase();if(c.type)switch(c.type.toLowerCase()){case "user":d="users";break;case "device":c.deviceModel=c.deviceModel.replace(/3rd/i,
"third-party"),d=c.deviceModel.toLowerCase()}g+="svg-"+d+"Icon"}return g},onCheckedChange:function(c,g){},setCheckboxState:function(c,g){var d=this.getNodesByItem(c);1===d.length&&"undefined"!==typeof d[0]&&d[0].selectorNode&&d[0].selectorNode.set("checked",g)},updateSelectedStore:function(c,g){g?this._selectedCheckboxStore.put(c,{overwrite:!0}):this._selectedCheckboxStore.remove(c.id);this.onCheckedChange(c,g)},_createTreeNode:function(c){return new h(c)},_getCheckedAttr:function(){return this._selectedCheckboxStore.data},
_onDblClick:function(){}})})},"webview/admin/widget/NetworkTreeNode":function(){define("dijit/_WidgetsInTemplateMixin dijit/Tree dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on dojo/i18n!../../nls/all dojo/text!./templates/TreeNode.html dijit/form/CheckBox".split(" "),function(r,p,m,l,h,c,g,d){return m("webview/admin/widget/NetworkTreeNode",[p._TreeNode,r],{templateString:d,webviewStrings:g,postCreate:function(){this.inherited(arguments);this.set("nodeType",this.item.type);this._setupListeners()},
_setNodeTypeAttr:function(c){h.add(this.domNode,"node-type-"+c);this._set("nodeType",c)},_setLabelAttr:function(c){c=c.replace(/network/i,this.webviewStrings.network);this.inherited(arguments)},_setupListeners:function(){this.own(c(this.contentNode,"click",l.hitch(this,this._toggleCheckbox)),c(this.selectorNode,"change",l.hitch(this,function(c){this.setSelected(!1);this.tree.updateSelectedStore(this.item,c)})))},_toggleCheckbox:function(){this.selectorNode.set("checked",!this.selectorNode.get("checked"))}})})},
"webview/admin/widget/ResultsDialog":function(){define("dgrid/extensions/ColumnResizer dgrid/Grid dgrid/OnDemandGrid dgrid/tree dijit/_WidgetsInTemplateMixin dijit/Dialog dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!./templates/ResultsDialog.html ./_GridDialogMixin ../../util/util rc/date dijit/form/Button".split(" "),function(r,p,m,l,h,c,g,
d,n,a,b,t,k,q,f,u,w,z,x,y,v){return g("webview/admin/widget/ResultsDialog",[x,h],{closable:!0,completeMessage:"",headerMap:{},messageMap:{},currentTaskMap:{},pollInterval:500,queryParams:{},rcStrings:t,resultType:"",templateString:z,totalControllers:0,totalSuccessful:0,typeMap:{},webviewStrings:k,_BACnetErrorCode:508,_grid:null,_processId:-1,_successStatuses:{inProgress:0,failed:1,successful:2},constructor:function(){this._gridStore=new w(new u({mayHaveChildren:function(a){return 0!==this.query({parent:a.id}).total},
getChildren:function(a,b){return this.query({parent:a.id})}}))},postCreate:function(){this.inherited(arguments);this._buildColumnStructure();this._buildGrid();this.own(q(this.cancelActionButton,"click",d.hitch(this,this.onCancel)))},_setPathAttr:function(a){this._set("path",a);this._fetchData()},_setResultTypeAttr:function(a){if("undefined"===typeof this.typeMap[a])throw"Result type is not defined in type map.  Make sure type map is set before setting result type";this._set("resultType",a);n.set(this.resultTypeLabel,
{innerHTML:this.typeMap[a]})},_setStaticTitleAttr:function(a){this._set("staticTitle",a);this.set("title",this.title)},_setTitleAttr:function(a){this._set("title",a);a=""===this.staticTitle?"":this.staticTitle+" - ";""===this.title?n.set(this.titleNode,"innerHTML",this.staticTitle):n.set(this.titleNode,"innerHTML",a+this.title)},_setTotalControllersAttr:{node:"totalControllerContainer",type:"innerHTML"},_setTotalSuccessfulAttr:{node:"totalSuccessfulContainer",type:"innerHTML"},formatDetailsCell:function(a,
b){var c=a;a===this._BACnetErrorCode&&null!==b.bacnetError?c=y.decodeBACnetError(b.bacnetError).replace(":\x3cbr \x3e"," - "):"function"===typeof this.messageMap[this.resultType]&&(c=this.messageMap[this.resultType](a,this.resultType,b));return c+=" @"+v.formatUTC(b.timestamp)},onCancel:function(){clearTimeout(this._simulateDelay);var a=this.path;!1===/\/status$/i.test(a)&&(a+="/status");if(-1!==this._processId){var b=d.mixin(this.queryParams,{processId:this._processId,abort:!0});f.get(a,{handleAs:"json",
preventCache:!0,query:b})}},onDone:function(a){},show:function(){this._reset();return this.inherited(arguments)},_buildColumnStructure:function(){if("undefined"===typeof this.headerMap.name||"undefined"===typeof this.headerMap.object||"undefined"===typeof this.headerMap.details)throw"Header map must be defined in constructor";this._columnStructure=[l({id:"nameCol",field:"name",label:this.headerMap.name,sortable:!1,shouldExpand:function(){return!1},renderCell:d.hitch(this,this._buildNameCell)}),{id:"objectCol",
field:"object",label:this.headerMap.object,shouldExpand:function(){return!1},sortable:!1},{id:"detailsCol",field:"details",label:this.headerMap.details,sortable:!1,shouldExpand:function(){return!1},formatter:d.hitch(this,this.formatDetailsCell)}]},_buildGrid:function(){null===this._grid&&(this._grid=new (g([p,m,r,l]))({columns:this._columnStructure,sort:[{attribute:"id",descending:!1}],store:this._gridStore,maxEmptySpace:10,keepScrollPosition:!0,style:{height:"400px"},noDataMessage:"loading..."},
this.gridNode),this._grid.startup())},_buildNameCell:function(a,c,f){f=b.create("div",{"class":"name-cell"},f,"only");switch(a.success){case this._successStatuses.failed:a="svg-clear-icon";break;case this._successStatuses.successful:a="svg-check-icon";break;case this._successStatuses.inProgress:a="svg-waiting";break;default:a=""}b.create("span",{"class":"status-icon "+a},f,"first");b.create("span",{innerHTML:c},f,"last");return f},_fetchData:function(){f.get(this.path,{handleAs:"json",preventCache:!0,
query:this.queryParams}).then(d.hitch(this,this._parseFetch))},_parseFetch:function(a){var b=a.results;this.set({resultType:a.type,totalControllers:a.total});this._processId=a.processId;var c=a.completed===a.total;b.forEach(d.hitch(this,function(a){if(a.detailsDescriptions&&(a.parent=null,a.detailsDescription=a.detailsDescriptions.pop(),a.timestamp=a.detailsDescription.timestamp,c))for(var b=0;b<a.detailsDescriptions.length;b++){var f={};f.detailsDescription=a.detailsDescriptions[b];f.parent=a.id;
f.id=f.parent+"-"+b;f.timestamp=f.detailsDescription.timestamp;f.name="";f.success=null;this._gridStore.put(f)}this._gridStore.put(a)}));c&&b.forEach(d.hitch(this,function(a){a.detailsDescriptions&&this._grid.expand(a.id,!1,!0)}));c?(this._processId=-1,this.set("title",this.completeMessageMap[this.resultType]),a=this._gridStore.query({success:this._successStatuses.successful}),this.set("totalSuccessful",a.length),this._toggleSummary(!0),this.onDone(a)):this._simulateDelay=setTimeout(d.hitch(this,
function(){this.set("queryParams",d.mixin(this.queryParams,{processId:this._processId}));this._fetchData()}),this.pollInterval)},_reset:function(){this._gridStore.setData([]);this._grid.refresh();this.set({title:"",totalControllers:0,totalSuccessful:0,_processId:-1});this._toggleSummary(!1)},_toggleSummary:function(b){a.toggle(this.summaryContainer,"hidden",!b);a.toggle(this.buttonContainer,"hidden",b)}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),
function(r,p,m,l,h,c,g,d,n,a){function b(b,c,d,g){g=this.grid.isRTL?"right":"left";var f=".dgrid-expando-icon";c&&(f+=".ui-icon.ui-icon-triangle-1-"+(d?"se":"e"));b=a("div"+f+"[style\x3dmargin-"+g+": "+b*(this.indentWidth||9)+"px; float: "+g+"]");b.innerHTML="\x26nbsp;";return b}function t(b){var c=this,d=this.style.height;d&&(this.style.display="0px"==d?"none":"block");b&&(a(this,".dgrid-tree-resetting"),setTimeout(function(){a(c,"!dgrid-tree-resetting")}));this.style.height=""}function k(k){var f=
k.renderCell||d.defaultRenderCell,q,r;k||(k={});k.shouldExpand=k.shouldExpand||function(a,b,c){return c};c.after(k,"init",function(){var f=k.grid,d=".dgrid-content .dgrid-column-"+k.id,u=[];f.cleanEmptyObservers=!1;if(!f.store)throw Error("dgrid tree column plugin requires a store to operate.");k.renderExpando||(k.renderExpando=b);u.push(f.on(k.expandOn||".dgrid-expando-icon:click,"+d+":dblclick,"+d+":keydown",function(a){var b=f.row(a);f.store.mayHaveChildren&&!f.store.mayHaveChildren(b.data)||"keydown"==
a.type&&32!=a.keyCode||"dblclick"==a.type&&r&&1<r.count&&b.id==r.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||f.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(r&&r.id==f.row(a).id?r.count++:r={id:f.row(a).id,count:1})}));g("touch")&&u.push(f.on(n.selector(d,n.dbltap),function(){f.expand(this)}));f._expanded||(f._expanded={});u.push(c.after(f,"insertRow",function(a){var b=this.row(a);k.shouldExpand(b,q,this._expanded[b.id])&&this.expand(a,!0,!0);return a}));u.push(c.before(f,
"removeRow",function(b,c){var d=b.connected;d&&(l("\x3e.dgrid-row",d).forEach(function(a){f.removeRow(a,!0)}),c||a(d,"!"))}));k.collapseOnRefresh&&u.push(c.after(f,"cleanup",function(){this._expanded={}}));f._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};f.expand=function(b,c,d){var n=b.element?b:f.row(b),q=g("transitionend");b=new m;var u=b.promise;b.resolve();b=n.element;b=-1<b.className.indexOf("dgrid-expando-icon")?b:l(".dgrid-expando-icon",b)[0];d=d||
!1===k.enableTransitions;if(b&&b.mayHaveChildren&&(d||c!==!!this._expanded[n.id])){var p=void 0===c?!this._expanded[n.id]:c;a(b,".ui-icon-triangle-1-"+(p?"se":"e")+"!ui-icon-triangle-1-"+(p?"e":"se"));c=n.element;var v=c.connected,r,x,w={originalQuery:this.query};if(!v){var v=w.container=c.connected=a(c,"+div.dgrid-tree-container"),y=function(a){return f.store.getChildren(n.data,a)};k.allowDuplicates&&(w.parentId=n.id);"level"in b&&(y.level=b.level);u=u.then(function(){if(f.renderQuery)return f.renderQuery(y,
w);var b=a(v,"div"),c=f.renderArray(y(w),b,"level"in y?{queryLevel:y.level}:{});m.when(c,function(){a(b,"!")});return c});q?h(v,q,t):t.call(v)}v.hidden=!p;r=v.style;!q||d?(r.display=p?"block":"none",r.height=""):(p?(r.display="block",x=v.scrollHeight,r.height="0px"):(a(v,".dgrid-tree-resetting"),r.height=v.scrollHeight+"px"),setTimeout(function(){a(v,"!dgrid-tree-resetting");r.height=p?x?x+"px":"auto":"0px"}));p?this._expanded[n.id]=!0:delete this._expanded[n.id]}return u};c.after(k,"destroy",function(){p.forEach(u,
function(a){a.remove()});delete f.expand;delete f._calcRowHeight})});k.renderCell=function(b,c,d,g){var h=k.grid,l=Number(g&&g.queryLevel)+1,n=!h.store.mayHaveChildren||h.store.mayHaveChildren(b),m=g.parentId,l=q=isNaN(l)?0:l,h=k.renderExpando(l,n,h._expanded[(m?m+"-":"")+h.store.getIdentity(b)],b);h.level=l;h.mayHaveChildren=n;(b=f.call(k,b,c,d,g))&&b.nodeType?(a(d,h),a(d,b)):d.insertBefore(h,d.firstChild)};return k}k.defaultRenderExpando=b;return k})},"webview/admin/widget/_GridDialogMixin":function(){define(["dijit/_WidgetsInTemplateMixin",
"dijit/Dialog","dojo/_base/declare","dojo/_base/lang"],function(r,p,m,l){return m("webview/admin/widget/_GridDialogMixin",[p],{_grid:null,resize:function(){this.inherited(arguments);this._position()},show:function(){var h=this.inherited(arguments);h.then(l.hitch(this,function(){this._grid.resize()}));return h}})})},"webview/widget/dialogs/PromptForPassword":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/keys dojo/on dojo/text!./templates/PromptForPassword.html dojox/html/entities ../../util/util dijit/form/Form dijit/form/TextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return p("webview/widget/dialogs/PromptForPassword",[r],{rcStrings:c,encryptedDeferred:null,templateString:a,title:g.enterPassword,postCreate:function(){this.inherited(arguments);h.set(this.passwordLB,"for",this.passwordTB.id);this.passwordForm.onSubmit=function(){return!1};this.own(n(this,"keypress",m.hitch(this,this._checkForEnter)),n(this.passwordForm,"submit",m.hitch(this,this._onSubmit)));null===this.encryptedDeferred&&(this.encryptedDeferred=new l)},_setEncryptedDeferredAttr:function(a){this.encryptedDeferred=
a},_getValueAttr:function(){return this.passwordForm.get("value")},show:function(){this.passwordForm.reset();this.inherited(arguments)},_checkForEnter:function(a){a.code===d.ENTER&&this._onSubmit()},_onSubmit:function(){this.inherited(arguments);var a=this.get("value");"undefined"!==typeof a.password&&""!==a.password?t.encryptPassword(b.encode(a.password)).then(m.hitch(this,function(a){this.encryptedDeferred.resolve({password:a,passwordSuccess:!1})})):this.encryptedDeferred.resolve({password:"",passwordSuccess:!1})}})})},
"webview/admin/panelFiles/PanelFilesToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!../../nls/panelfiles dojo/on dojo/text!./templates/PanelFilesToolbar.html ../_Widget ../../widget/ToolbarButton".split(" "),function(r,p,m,l,h,c){return r("webview/admin/worksheets/programs/PanelFilesToolbar",[c],{panfileStrings:m,templateString:h,_buttons:null,postCreate:function(){this.inherited(arguments);this._setupOnClicks();this._buildButtonMap()},clearDirty:function(){},getButton:function(c){return this._buttons[c]},
getPageButtons:function(){return this._buttons},makeDirty:function(){},setTitle:function(){},_buildButtonMap:function(){this._buttons={backupButton:this.backupButton,restoreButton:this.restoreButton,autoBackupButton:this.autoBackupButton,logButton:this.logButton}},_setupOnClicks:function(){this.own(l(this.backupButton.domNode,"click",p.hitch(this,function(){this.backupButton.get("disabled")||l.emit(this,"backup")})),l(this.restoreButton.domNode,"click",p.hitch(this,function(){this.restoreButton.get("disabled")||
l.emit(this,"restore")})),l(this.autoBackupButton.domNode,"click",p.hitch(this,function(){this.autoBackupButton.get("disabled")||l.emit(this,"autoBackup")})),l(this.logButton.domNode,"click",p.hitch(this,function(){this.logButton.get("disabled")||l.emit(this,"log")})))}})})},"webview/admin/programs/Program":function(){define("dijit/Dialog dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/fx dojo/i18n!rc/nls/all dojo/i18n!rc/nls/systemData dojo/i18n!../../nls/all dojo/i18n!../../nls/programs dojo/on dojo/promise/all dojo/query dojo/request/xhr dojo/string dojo/topic dojo/text!./templates/program.html rc/bacnet/enums rc/bacnet/property rc/sys/decpnt ./PointMenu ./WatchPointMenu ./widget/OptionsDialog ./widget/ProgramDndPoint ./widget/SaveFileDialog ../_Widget ../SearchableWidget ../widget/DevicePullout ../widget/FileSelector ../widget/ResultsDialog ../../sys/job ../../util/AlarmUtil ../../util/pointObject ../../util/util ../../widget/EditPointDialog ../../widget/WarningDialog ../../widget/WarningDialogEnums ./ProgramToolbar ../widget/SearchForObjectResults ../widget/AdminToolbar ../../widget/WebviewContentPane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U){return p("webview/admin/programs/Program",[K,L],{bacnetOnly:!0,baseClass:"",programStrings:u,rcStrings:k,searchPath:"Program/objects",templateString:C,titleString:null,traces:[],useDescriptors:!0,showInlineValues:!1,userOptions:null,watches:[],_resultsDialog:null,webviewStrings:f,_CompilerErrorsCode:515,_DefaultGutterWidth:24,_ResizeBufferSize:16,_canEditTypes:{input:!0,output:!0,value:!0},_cancelHandle:null,
_confirmDialog:null,_deviceName:"",_devicePullout:null,_descriptorRe:/^(.+?)(:\d+)?(\[(?: ?)\d+(?: ?)\])?$/,_descriptorToMnemonicMap:null,_editableMnemonicRe:/(\d+)?((?:ai|ao|av|bi|bo|bv|blo|mi|mo|mv)(?:\d+))(:\d+)?$/i,_editor:null,_editorChangeListener:null,_editPointDialog:null,_fetchInterval:null,_fileSelector:null,_firstLoad:!0,_gutterRefreshTimer:null,_inlineValuesRe:/<(\S+)>/g,_intervalTime:500,_keyListener:null,_lastOpenedFilename:null,_loadFileDialog:null,_okHandle:null,_optionsDialog:null,
_pointMenu:null,_pollForStatusTimer:null,_pollForMultipleStatusTimer:null,_propertyIdentifierRe:/:(\d+)/,_propertyUtility:null,_refreshDefer:null,_replaceTitleTextSet:!1,_saveFileDialog:null,_supportedContextMenu:{input:!0,rcpInput:!0,output:!0,rcpOutput:!0,value:!0,rcpValue:!0,loop:!0,schedule:!0,array:!0,calendar:!0},_valuesLoadInterval:5E3,_valuesLoadTimer:null,_views:null,_watchListMenu:null,constructor:function(){this._views=[];this.readOnly=!rc.session.hasRole(rc.session.roles2.modifyPrograms,
!0);this._propertyUtility=new B;this._messageMap={sendMultiple:{200:this.programStrings.smUpdatedSuccessfully,508:this.programStrings.smUpdateHadErrors,510:this.programStrings.smSendInProgress}};this._setSupportedTypes();D.loadOnce()},postCreate:function(){this.inherited(arguments);if(!rc.session.hasRole(rc.session.roles2.accessPrograms,!0))return setTimeout(l.hitch(this,function(){var a=this.safeError(null,{name:this.rcStrings.permissionDenied,message:v.substitute(this.rcStrings.notAuthToViewX,[this.webviewStrings.programs]),
suggestion:""});this._onInitError(a)}),500),null;this._createViews();this._setupEditor();this._createButtons();this._addToolbarListeners();this._fetchUserPreferences(!1);this._createFileSelector();!1===this.isAdminPage()&&(this.mnemonic=null);this._buildExtraSearchParameters();z([this._fetch(),this._fetchDeviceName(),this._buildDescriptorArrays(),Q.loadForAdmin(this.system)]).then(l.hitch(this,function(a){this._setAlarmContext();this._editor.session.setMode("ace/mode/cbas");this._deviceName=a[1].deviceName;
this._parseFetch(a[0]);this._setReadOnly()}),l.hitch(this,function(a){this._onInitError(a)}));this.own(h.after(this.resultsWidget,"resize",l.hitch(this,this.resize)))},createSource:function(a){return a},getPathForFetch:function(){return"Program"},insertPoint:function(b,c){var f=new G({sysId:null!==c.sysId?c.sysId:-1,sysName:null!==c.sysName?c.sysName:"",deviceName:null!==c.deviceName?c.deviceName:"",pointName:null!==c.pointName?c.pointName:"",pointMnemonic:null!==c.pointMnemonic?c.pointMnemonic:"",
pointType:null!==c.pointType?c.pointType:"",programDevice:Number(this.device)});this.own(h.before(f,"drag",l.hitch(this,function(a){a.set("useDescriptors",this.useDescriptors)},f)));a.place(f.domNode,b,"last")},makeClean:function(){this.inherited(arguments);this._toolbar.clearDirty&&(this._toolbar.clearDirty(),this._toolbar.sendButton.set("disabled",!0))},makeDirty:function(){this.inherited(arguments);this._toolbar.makeDirty&&(this._toolbar.makeDirty(),this._toolbar.sendButton.set("disabled",this.readOnly))},
print:function(){var a=l.clone(this.editorNode);b.set(a,"backgroundColor","white");var c=x("style",this.domNode);c&&a.appendChild(l.clone(c[0]));x("textarea, .ace_scrollbar",a).forEach(function(b){a.removeChild(b)});x(".ace_marker-layer, .ace_cursor-layer",a).forEach(function(a){b.set(a,"display","none")});this.printWithPreview(a)},publishSearchable:function(){A.publish("searchableWidget",this._supportedObjectTypes,this,!0)},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_addOptionsDialogListeners:function(){this.own(w(this._optionsDialog,
"cancel",l.hitch(this,this._fetchUserPreferences,!1)),w(this._optionsDialog,"ok",l.hitch(this,this._onOptionsDialogOk)),w(this._optionsDialog,"restore",l.hitch(this,this._fetchUserPreferences,!0)))},_addToolbarListeners:function(){this.own(w(this._toolbar,"send",l.hitch(this,this._sendChanges)),w(this._toolbar,"cancel",l.hitch(this,this._revertChanges)),w(this._toolbar,"renumber",l.hitch(this,this._fetchRenumberProgram)),w(this._toolbar,"sendMultiple",l.hitch(this,this._onSendMultipleClicked)),w(this._toolbar,
"saveFile",l.hitch(this,this._showSaveFileDialog)),w(this._toolbar,"openFile",l.hitch(this,this._showLoadFileDialog)),w(this._toolbar,"toggleAutoComplete",l.hitch(this,this._toggleAutoComplete)),w(this._toolbar,"toggleTrace",l.hitch(this,this._toggleTrace)),w(this._toolbar,"toggleMnemonics",l.hitch(this,this._toggleMnemonicsValidation)),w(this._toolbar,"toggleValues",l.hitch(this,this._toggleValuesValidation)),w(this._toolbar,"replace",l.hitch(this,this._showReplaceDialog)),w(this._toolbar,"clearTrace",
l.hitch(this,this._clearTrace)),w(this._toolbar,"showOptions",l.hitch(this,this._showOptions)))},_addToWatch:function(a,b){var c=this._getDetailsFromPoint(a);c.mnemonic&&(c=this._buildPointMnemonic(c,b),y.put("ProgramWatchList",{handleAs:"json",data:{systemId:this.system,userId:rc.session._attributes.userId,programMnemonic:this._getProgramMnemonic(),pointMnemonic:c}}).then(l.hitch(this,this._watchChanged)))},_applyGeneralEditorSettings:function(){var a="";this.userOptions.underscore&&(a="underline");
this.userOptions.strikethrough&&(a+=" line-through");var c=x(".ace_text-layer",this.editorNode);"undefined"!==typeof c&&b.set(c[0],{"text-decoration":a});b.set(this.editorNode,{"font-size":this.userOptions.fontSize+"pt","background-color":this.userOptions.syntaxHighlighting?this.userOptions.colours.background:"#24252E",color:this.userOptions.colours.normal,"font-weight":this.userOptions.bold?"bold":"","font-style":this.userOptions.italicize?"italic":""})},_applySyntaxHighlighting:function(){var b=
x("style",this.domNode);"undefined"!==typeof b[0]&&a.destroy(b[0]);a.create("style",{innerHTML:(this.userOptions.syntaxHighlighting?[".ace_comment { color: "+this.userOptions.colours.comments+" !important; }",".ace_statement { color: "+this.userOptions.colours.statements+" !important; }",".ace_function { color: "+this.userOptions.colours.functions+" !important; }",".ace_linenumber { color: "+this.userOptions.colours.lineNumbers+" !important; }",".ace_alarm_text { color: "+this.userOptions.colours.alarmText+
" !important; }",".ace_input { color: "+this.userOptions.colours.inputs+" !important; }",".ace_rcpInput { color: "+this.userOptions.colours.inputs+" !important; }",".ace_output { color: "+this.userOptions.colours.outputs+" !important; }",".ace_rcpOutput { color: "+this.userOptions.colours.outputs+" !important; }",".ace_value { color: "+this.userOptions.colours.valuesAndArrays+" !important; }",".ace_rcpValue { color: "+this.userOptions.colours.valuesAndArrays+" !important; }",".ace_array { color: "+
this.userOptions.colours.valuesAndArrays+" !important; }",".ace_object { color: "+this.userOptions.colours.otherObjects+" !important; }",".ace_present_value { color: "+this.userOptions.colours.presentValues+" !important; }",".ace_calendar { color: "+this.userOptions.colours.otherObjects+" !important; }",".ace_schedule { color: "+this.userOptions.colours.otherObjects+" !important; }",".ace_loop { color: "+this.userOptions.colours.otherObjects+" !important; }"]:[".ace_comment { color: "+this.userOptions.colours.normal+
" !important; }",".ace_statement { color: "+this.userOptions.colours.normal+" !important; }",".ace_function { color: "+this.userOptions.colours.normal+" !important; }",".ace_linenumber { color: "+this.userOptions.colours.normal+" !important; }",".ace_alarm_text { color: "+this.userOptions.colours.normal+" !important; }",".ace_input { color: "+this.userOptions.colours.normal+" !important; }",".ace_rcpInput { color: "+this.userOptions.colours.normal+" !important; }",".ace_output { color: "+this.userOptions.colours.normal+
" !important; }",".ace_rcpOutput { color: "+this.userOptions.colours.normal+" !important; }",".ace_value { color: "+this.userOptions.colours.normal+" !important; }",".ace_rcpValue { color: "+this.userOptions.colours.normal+" !important; }",".ace_array { color: "+this.userOptions.colours.normal+" !important; }",".ace_object { color: "+this.userOptions.colours.normal+" !important; }",".ace_present_value { color: "+this.userOptions.colours.normal+" !important; }",".ace_calendar { color: "+this.userOptions.colours.normal+
" !important; }",".ace_schedule { color: "+this.userOptions.colours.normal+" !important; }",".ace_loop { color: "+this.userOptions.colours.normal+" !important; }"]).join("\n")},this.domNode,"last")},_buildAuditLogContext:function(a){var b=[],c=l.hitch(this,function(a,b){b.push({systemId:this.system,objectName:a})}),f=[];a.inlineValues&&(f=Object.keys(a.inlineValues));for(var d=0;d<a.programPointsCount&&d<f.length;d++)c(f[d],b);f=c(this._getProgramMnemonic(),b);a=this._buildAuditLogTitle(a.name);webview.auditUtil.setContextDataWithSiteId(this.site,
b,a)},_buildAuditLogTitle:function(a){return this._deviceName+" ("+this.device+") - "+a+" ("+this._getProgramMnemonic()+")"},_buildDescriptorArrays:function(){var a=new c;this.own(a);y.get("Program/Descriptors",{handleAs:"json",query:{deviceId:this.device,systemId:this.system},preventCache:!0}).then(l.hitch(this,function(b){200===b.errStatus?("undefined"!==typeof this._editor.session.$modes["ace/mode/cbas"]&&delete this._editor.session.$modes["ace/mode/cbas"],this._descriptorToMnemonicMap=b.lookup,
ace.config.inputDescriptors=b.inputDescriptors,ace.config.outputDescriptors=b.outputDescriptors,ace.config.valueDescriptors=b.valueDescriptors,ace.config.rcpInputDescriptors=b.rcpInputDescriptors,ace.config.rcpOutputDescriptors=b.rcpOutputDescriptors,ace.config.rcpValueDescriptors=b.rcpValueDescriptors,ace.config.scheduleDescriptors=b.scheduleDescriptors,ace.config.loopDescriptors=b.loopDescriptors,ace.config.arrayDescriptors=b.arrayDescriptors,ace.config.calendarDescriptors=b.calendarDescriptors,
ace.config.otherDescriptors=b.otherDescriptors):console.error("Could not load descriptors",b);a.resolve()}));return a.promise},_buildExtraSearchParameters:function(){this.extraSearchParameters={deviceNumber:this.device}},_buildFullPointName:function(a,b,c,f){return"{"+a+"} "+b+" ("+c+(f&&f!=E.propertyTypes.PROPID_PRESENT_VALUE?":"+f.toString():"")+")"},_buildPointMnemonic:function(a,b){var c=a.mnemonic;a.property&&a.property!==E.propertyTypes.PROPID_PRESENT_VALUE&&(c+=":"+a.property);a.arrayIndex&&
-1!==a.arrayIndex&&(c+="array"===b?"[ "+a.arrayIndex+" ]":"["+a.arrayIndex+"]");return c},_buildSingleWatch:function(b,c){var f=this.useDescriptors?c.name:c.mne,d="";if(c.error.code===this.SuccessCode)switch(c.value.type){case "analog":d=c.value.value;null!==c.units&&(d+=" "+c.units[0]);break;case "multi-state":case "binary":d=S.tryTranslateStateText(c.units[c.value.value]);break;default:d=c.value.value}else{var g=this.ErrorMessageMap[510];this.ErrorMessageMap[510]=v.substitute(this.rcStrings.loadingX,
[this.rcStrings.value]);d=this._getErrorMessage(c.error.code,c.error.msg);this.ErrorMessageMap[510]=g}f=a.create("p",{"class":"watch-point"+(c.local?" local-watch":" custom-watch"),innerHTML:f+" \x3d "+d},b,"last");!1===c.local&&this.own(w(f,"click",l.hitch(this,this._showWatchMenu,c.mne)))},_buildTitle:function(a){a=this._deviceName+" ("+this.device+") - "+a+" ("+this._getProgramMnemonic()+")";this._setTitle(a)},_buildWatchDisplay:function(){var b=a.create("article",{"class":"local-watch-container"},
this.traceGutter,"last");this.watches.filter(function(a){return a.local}).forEach(l.hitch(this,this._buildSingleWatch,b));a.create("div",{"class":"watch-separator",innerHTML:"\x26nbsp;"},this.traceGutter,"last");b=this.watches.filter(function(a){return!1===a.local});b.forEach(l.hitch(this,this._buildSingleWatch,this.traceGutter));b.some(function(a){return 510===a.error.code})&&(null!==this._refreshDefer&&this._refreshDefer.remove(),this._refreshDefer=this.defer(l.hitch(this,this._refreshWatches),
5E3))},_clearFetchInterval:function(){null!==this._fetchInterval&&(clearInterval(this._fetchInterval),this._fetchInterval=null)},_clearPollingTimer:function(a){clearTimeout(a)},_clearTrace:function(){var a=new c;a.then(l.hitch(this,function(){this._fetch(!0,!0).then(l.hitch(this,this._parseFetch))}));this._promptWhenDirty(a)},_createButtons:function(){this.buttonBar.addIcon(this._toolbar);this.setTooltips();this._setReadOnly()},_createDevicePullout:function(){this._devicePullout=new M({device:this.device,
isBACnetOnly:!0,systemId:this.system,relativeNode:this.builderWidget.contentPaneBody,okLabel:this.programStrings.sendMultiple});this.own(w(this._devicePullout,"clickOk",l.hitch(this,this._sendMultiple)));a.place(this._devicePullout.domNode,this.builderWidget.contentPaneBody,"last")},_createFileSelector:function(){this._fileSelector=new O({searchParams:"*.bas",systemId:this.system})},_createLoadFileDialog:function(){this._loadFileDialog=new r({title:this.programStrings.controlBasicFile,draggable:!0,
content:this._fileSelector,baseClass:"basFileSelectorDialogBox"});this._loadFileDialog.content.okButton.set({iconClass:"rcIcon openIcon",label:this.programStrings.open});this._setupLoadFileListeners()},_createOptionsDialog:function(){this._optionsDialog=new J({title:"Options",userOptions:this.userOptions,draggable:!1});this._addOptionsDialogListeners()},_createSaveFileDialog:function(){this._saveFileDialog=new I({title:this.programStrings.controlBasicFile,lastOpenedFilename:this._lastOpenedFilename,
draggable:!1});this._setupSaveFileListeners()},_createViews:function(){this.builderWidget.setMainContent(this.programsContent);this._views.push(this.builderWidget)},_decodeSendMultipleDetails:function(a,b){var c=a;"undefined"!==typeof this._messageMap[b]&&"undefined"!==typeof this._messageMap[b][a]&&(c=this._messageMap[b][a]);return c},_displayCompilerErrors:function(b){a.empty(this.traceGutter);this._resizeGutter(!0).then(l.hitch(this,function(){for(var c=0;c<b.length;++c)a.create("div",{"class":"compiler-error",
innerHTML:b[c]},this.traceGutter,"last")}))},_drawTraces:function(){var a=this._getLineHeight(),c=x(".trace-indicator",this.programsContent);if("undefined"!==typeof c)for(var f=0;f<c.length;f++)b.set(c[f],{"font-size":this.userOptions.fontSize+"pt",height:a+"px","line-height":a+"px"});b.set(this.traceGutter,{visibility:"visible"})},_editPoint:function(a){a=this._getDetailsFromPoint(a);a.mnemonic&&this._editableMnemonicRe.test(a.mnemonic)&&this._showEditPointDialog(a)},_editorValueSet:function(){this._editor.session.getUndoManager().reset();
this._removeEditorChangeListener(this._editorChangeListener);this._editorChangeListener=this._editor.getSession().on("change",l.hitch(this,function(){this.defer(l.hitch(this,function(){!1===this._editor.session.$undoManager.isClean()?this.makeDirty():this.makeClean()}))}));this._editor.onScrollLeftChange();this._toggleTrace(!this._toolbar.get("isShowingWatch"))},_fetch:function(a,b){this._clearFetchInterval();var c=this.getPathForFetch();return y.get(c,{handleAs:"json",query:{systemId:this.system,
device:this.device,instance:this.mne,descriptors:this.useDescriptors,inlineValues:this.showInlineValues,forceReload:a?a:!1,clearTrace:b?b:!1},preventCache:!0})},_fetchDeviceName:function(){return y.get("DeviceName",{handleAs:"json",query:{systemId:this.system,deviceNumber:this.device}})},_fetchRenumberProgram:function(){var a=this._editor.getValue().split("\n");y.put("RenumberProgram",{handleAs:"json",data:{programLines:a,systemId:this.system},preventCache:!0}).then(l.hitch(this,function(a){this._editor.setValue(a.programLines.join("\n"),
-1);a.errStatus===this._CompilerErrorsCode?this._displayCompilerErrors(a.compilerMsgs):this._displayError(a)}))},_fetchProgramFile:function(a){y.get("ProgramFile",{handleAs:"json",query:{filePath:a}}).then(l.hitch(this,function(a){200===a.errStatus?this._editor&&this._editor.setValue(a.programLines?a.programLines.join("\n"):"",-1):this._displayError(a)}))},_fetchUserPreferences:function(a){y.get("ProgramPreferences",{handleAs:"json",query:{userId:a?-1:rc.session._attributes.userId}}).then(l.hitch(this,
function(a){this._parseUserPreferencesFetch(a);this._updateEditorCss()}))},_getDescriptorForMnemonic:function(a){for(var b in this._descriptorToMnemonicMap)if(this._descriptorToMnemonicMap[b]===a)return b;return""},_getErrorMessage:function(a,b){var c="";if("undefined"!==typeof this.ErrorMessageMap[a]){if(c=this.ErrorMessageMap[a],a===this.SuccessCode){var f=b.match(/(\d+) bytes/);f&&(c=v.substitute(u.sendSuccess,[f[1]]))}}else 508===a?c=this._decodeBACnetError(b):(c=this.errorStrings.unexpectedError,
console.error("Unexpected Error: ",b));return c},_getLineHeight:function(){var a=x(".ace_line",this.editorNode);return 0<a.length?b.get(a[0],"height"):0},_getDetailsFromPoint:function(a){var b=R.getInfoFromMnemonic(a,this.device),c=null,f=null,d=E.propertyTypes.PROPID_PRESENT_VALUE,g=-1;null!==b?(f=b.pointMnemonic,d=b.property,g=b.arrayIndex,c=this._getDescriptorForMnemonic(b.pointMnemonic)):(b=this._descriptorRe.exec(a))?(c=a,"undefined"!==typeof this._descriptorToMnemonicMap[b[1]]?(f=this._descriptorToMnemonicMap[b[1]],
"undefined"!==typeof b[2]&&(d=Number(b[2].substr(1))),"undefined"!==typeof b[3]&&(g=Number(/(\d+)/.exec(b[3])[1]))):console.error(this.declaredClass+" - _getDetailsFromPoint(): Could not find mnemonic",a)):console.error(this.declaredClass+" - _getDetailsFromPoint(): Point does not match descriptors",a);return{descriptor:c,mnemonic:f,property:d,arrayIndex:g}},_getProgramMnemonic:function(){return this.device+"PRG"+this.mne},_onClose:function(){this.inherited(arguments);this.resize()},_onOptionsDialogOk:function(){this.userOptions=
this._optionsDialog.get("userOptions");this._sendUserOptions();this._updateEditorCss()},_onEditorClick:function(a){var b=this._editor.getCursorPosition(),c=l.clone(this._editor.session.getTokenAt(b.row,b.column)),f=this._editor.selection.getLineRange(b.row,!0),d=!1;if(null!==c){var g=this._editor.session.getTokenAt(b.row,c.start+c.value.length+1),k=null;null!==g&&(null!==(k=/(\[(?: ?)\d+(?: ?)\])/.exec(g.value))?c.value+=k[1]:"array"===c.type&&(d=!0))}null!==c&&"undefined"!==typeof this._supportedContextMenu[c.type]&&
b.column!==f.end.column?this._showPointMenu(a,c,d):null!==this._pointMenu&&this._pointMenu.hide()},_onSendMultipleClicked:function(){null===this._devicePullout&&this._createDevicePullout();this._devicePullout.show()},_parseFetch:function(a){a.errStatus===this.SuccessCode?a.initialLoad?(this._clearFetchInterval(),this._firstLoad&&(this._firstLoad=!1,this.onInitSuccess(),this.publishSearchable()),this._buildTitle(a.name),this.watches=a.watches,this.traces=a.traces||[],this.makeClean(),this._removeEditorChangeListener(this._editorChangeListener),
null!==a.inlineValues&&this._parseInlineValues(a),this._editor&&(this._editor.setValue(a.programLines?a.programLines.join("\n"):"",-1),this.defer(l.hitch(this,this._editorValueSet))),this._buildAuditLogContext(a)):this._setFetchInterval():(this._clearFetchInterval(),this._displayError(a));this._toolbar.toggleFetchers(!1)},_parseInlineValues:function(a){for(var b in a.programLines)for(var c;null!==(c=this._inlineValuesRe.exec(a.programLines[b]));){var f=a.inlineValues[c[1]],d;if(f)if(200===f.error.code){switch(f.value.type){case "binary":case "multi-state":if(f.units&&
Array.isArray(f.units)){d=S.tryTranslateStateText(f.units[f.value.value]);break}default:d=f.value.value}"string"===typeof d?d=d.replace(/ /g,String.fromCharCode(183)):"number"===typeof d&&(d+="")}else 508===f.error.code&&(d=this._decodeBACnetError(f.error.msg),d=d.replace("\x3cbr \x3e"," "),d=d.replace(/ /g,String.fromCharCode(183)));a.programLines[b]=a.programLines[b].replace(c[0],"\x3c"+d+"\x3e");this._inlineValuesRe.lastIndex+=d.length-c[1].length}},_parseUserPreferencesFetch:function(a){a.errStatus===
this.SuccessCode?(this.userOptions=a.userOptions,null===this._optionsDialog?this._createOptionsDialog():this._optionsDialog.refreshContent(this.userOptions),this._setEditorAutoComplete(this.userOptions.autoComplete),this._toolbar.set("autoComplete",this.userOptions.autoComplete)):this._displayError(a)},_promptWhenDirty:function(a){this.isDirty()?this._showConfirmDialog().then(l.hitch(this,function(){a.resolve()}),l.hitch(this,function(){a.reject()})):a.resolve()},_pointMenuRemoveFromWatchClicked:function(a,
b){var c=this._getDetailsFromPoint(a);c.mnemonic&&(c=this._buildPointMnemonic(c,b),this._removeFromWatch([c]))},_pollForStatus:function(a,b){this._clearPollingTimer(b);b=setTimeout(l.hitch(this,function(){y.get(a+"/status",{handleAs:"json",query:{processId:this._processId||-1,abort:0},preventCache:!0}).then(l.hitch(this,function(c){510===c.errStatus?(this._processId=c.processId,this._pollForStatus(a,b)):c.errStatus===this._CompilerErrorsCode?this._displayCompilerErrors(c.compilerMsgs):(c.errStatus===
this.SuccessCode&&(this.makeClean(),this._editorValueSet([]),this._fetch(!0).then(l.hitch(this,this._parseFetch))),this._displayError(c))}))}),500)},_refreshWatches:function(){this._refreshDefer&&(this._refreshDefer=null);y.get("ProgramWatches",{handleAs:"json",query:{userId:rc.session._attributes.userId,systemId:this.system,programMnemonic:this._getProgramMnemonic()}}).then(l.hitch(this,this._watchChanged))},_reloadData:function(){this._fetch().then(l.hitch(this,this._parseFetch))},_removeEditorChangeListener:function(a){null!==
a&&(this._editor.session.off("change",a),a=null)},_removeFromWatch:function(a){y.del("ProgramWatchList",{handleAs:"json",data:{systemId:this.system,userId:rc.session._attributes.userId,programMnemonic:this._getProgramMnemonic(),pointMnemonics:a}}).then(l.hitch(this,this._watchChanged))},_resize:function(){this.inherited(arguments);this._resizeContainer();this._editor&&this._editor.resize();this._devicePullout&&this._devicePullout.resize()},_resizeContainer:function(){var a=g.byId("rcSystemContent").clientHeight;
g.byId("rcAdminContentHeader")&&(a-=g.byId("rcAdminContentHeader").clientHeight);var a=a-this.buttonBar.domNode.clientHeight,a=a-2*b.get(this.buttonBar.domNode,"marginTop"),a=a-2*b.get(this.builderWidget.domNode,"paddingTop"),a=a-2*b.get(this.builderWidget.contentPaneBody,"paddingTop"),a=a-this._ResizeBufferSize,c=this.traceGutter.clientWidth+this._ResizeBufferSize;b.set(this.traceGutter,{height:a+"px"});b.set(this.editorNode,{height:a+"px",width:this.builderWidget.contents.clientWidth-(c+this._ResizeBufferSize)+
"px"})},_resizeGutter:function(a){var f=new c;this.own(f);var d=b.get(this.programsContent,"width"),g=b.get(this.traceGutter,"width"),k=b.get(this.editorNode,"width");a=a?.3*d-this._ResizeBufferSize:this._DefaultGutterWidth;d=d-(a+this._ResizeBufferSize)-this._ResizeBufferSize;g=m.animateProperty({node:this.traceGutter,duration:300,properties:{width:{start:g,end:a,units:"px"}}});k=m.animateProperty({node:this.editorNode,duration:300,properties:{width:{start:k,end:d,units:"px"}}});k=t.combine([g,k]).play();
this.own(h.after(k,"onEnd",l.hitch(this,function(){this._editor.resize();f.resolve()})));return f.promise},_revertChanges:function(){this._fetch().then(l.hitch(this,this._parseFetch))},_sendMultipleComplete:function(a){this._dirty&&a.some(l.hitch(this,function(a){return Number(a.object)===Number(this.device)}))&&this.makeClean()},_setAlarmContext:function(){T.setAlarmContextForBACnetDevice(this.system,this.device)},_showLoadFileDialog:function(){null===this._fileSelector&&this._createFileSelector();
null===this._loadFileDialog&&this._createLoadFileDialog();this._loadFileDialog.show()},_showSaveFileDialog:function(){null===this._saveFileDialog&&this._createSaveFileDialog();var a=this._fileSelector.store.query({root:!1});this._saveFileDialog.currentFiles=[];for(var b=0;b<a.length;b++)this._saveFileDialog.currentFiles.push(a[b].name);this._saveFileDialog.show()},_showOptions:function(){null===this._optionsDialog&&this._createOptionsDialog();this._optionsDialog.show()},_showSendMultipleStatusLog:function(a,
b){null===this._resultsDialog&&(this._resultsDialog=new P({staticTitle:"",currentTaskMap:this.ErrorMessageMap,headerMap:{name:this.programStrings.smDeviceName,object:this.programStrings.smDeviceNum,details:this.programStrings.smDetails},completeMessageMap:{sendMultiple:this.programStrings.smComplete},messageMap:{sendMultiple:l.hitch(this,this._decodeSendMultipleDetails)},typeMap:{sendMultiple:this.programStrings.smSuccessfulSend}}),this.own(w(this._resultsDialog,"done",l.hitch(this,this._sendMultipleComplete))));
this._resultsDialog.show();this._resultsDialog.set("queryParams",{processId:b});this._resultsDialog.set({title:this.programStrings.smInProgress,completeMessage:this.programStrings.smComplete,path:a})},_sendChanges:function(){var a=this._editor.getValue().split("\n").map(function(a){return encodeURIComponent(a).replace("%0D","")}),b={siteId:this.site,systemId:this.system,device:this.device,instance:this.mne,programLines:a};this._validateApprovalSessionWithReason(b).then(l.hitch(this,function(){y.put("Program",
{handleAs:"json",data:b}).then(l.hitch(this,function(a){510===a.errStatus?(this._processId=a.processId,this._pollForStatus(this.getPathForFetch(),this._pollForStatusTimer)):a.errStatus===this._CompilerErrorsCode?this._displayCompilerErrors(a.compilerMsgs):(a.errStatus===this.SuccessCode&&(this.makeClean(),this._editorValueSet([]),this._fetch(!0).then(l.hitch(this,this._parseFetch))),this._displayError(a))}),l.hitch(this,function(a){console.error(this.declaredClass+" - _sendChanges(): Could not save",
a)}))}),function(){})},_sendMultiple:function(a){var b=this._editor.getValue().split("\n").map(function(a){return encodeURIComponent(a).replace("%0D","")}),c={siteId:this.site,systemId:this.system,device:this.device,instance:this.mne,programLines:b,devices:a};this._validateApprovalSessionWithReason(c).then(l.hitch(this,function(){y.put("SendMultipleProgram",{handleAs:"json",data:c}).then(l.hitch(this,function(a){510===a.errStatus?(this._processId=a.processId,this._showSendMultipleStatusLog("SendMultipleProgram/status",
this._processId)):a.errStatus===this._CompilerErrorsCode?this._displayCompilerErrors(a.compilerMsgs):(a.errStatus===this.SuccessCode&&(this.makeClean(),this._editorValueSet([])),this._displayError(a))}),l.hitch(this,function(a){console.error(this.declaredClass+" - _sendChanges(): Could not save",a)}))}),function(){})},_saveProgramFile:function(a){var b=this._editor.getValue().split("\n");y.put("ProgramFile",{handleAs:"json",data:{fileName:a,programLines:b,systemId:Number(this.system)}}).then(l.hitch(this,
function(a){200===a.errStatus?A.publish("alert",{type:"success",message:this.errorStrings.successfulSave}):this._displayError(a);this._fileSelector.fetch()}))},_sendUserOptions:function(){y.put("ProgramPreferences",{handleAs:"json",data:{userId:rc.session._attributes.userId,userOptions:JSON.stringify(this.userOptions)}})},_setEditorAutoComplete:function(a){this._editor.setOptions({enableBasicAutocompletion:a,enableLiveAutocompletion:a})},_setFetchInterval:function(){this._clearFetchInterval();this._fetchInterval=
setInterval(l.hitch(this,this._reloadData),this._intervalTime)},_setLabelsForReplaceDialog:function(){if(!this._replaceTitleTextSet){var a=x(".ace_search",this.editorNode)[0];if("undefined"===typeof a)this.defer(l.hitch(this,this._setLabelsForReplaceDialog),5);else{var b=x(".ace_replace_form \x3e [action\x3d'replaceAll']",a)[0],c=28;"undefined"!==typeof b&&(c=9*b.textContent.length+20);this._setupReplaceSection(c);this._setupSearchSection(c);this._setupOptionsSection(c);n.add(a,"showing");this._replaceTitleTextSet=
!0}}},_setReadOnly:function(a){a=a||this.readOnly;this._setSendMultipleButtonEnabled(a);this._toolbar.filesMenu.set("disabled",a);this._toolbar.replaceButton.set("disabled",a);this._toolbar.renumberButton.set("disabled",a);this._editor.setReadOnly(a)},_setSendMultipleButtonEnabled:function(a){a=a||!rc.sys.job.isOpen({device:this.device})||!rc.session.hasRole(rc.session.roles2.sendMultiplePrograms,!0);this._toolbar.sendMultipleButton.set("disabled",a)},_setSupportedTypes:function(){this._supportedObjectTypes=
[this.objectTypeMap.inputs,this.objectTypeMap.outputs,this.objectTypeMap.variables,this.objectTypeMap.loops,this.objectTypeMap.schedules,this.objectTypeMap.calendars,this.objectTypeMap.arrays,this.objectTypeMap.programs,this.objectTypeMap.runtimeLogs,this.objectTypeMap.trendLogs]},_setTraces:function(a){null!==this._gutterRefreshTimer&&(clearTimeout(this._gutterRefreshTimer),this._gutterRefreshTimer=null);this._gutterRefreshTimer=setTimeout(l.hitch(this,function(){this._setTracesDebounce(a);this._gutterRefreshTimer=
null}),this._intervalTime)},_setTracesDebounce:function(b){a.empty(this.traceGutter);var c=this._getLineHeight();this._resizeGutter(!1).then(l.hitch(this,function(){for(var f=0;f<b.length;++f)a.create("div",{"class":"trace-indicator",innerHTML:b[f]?"T":"\x26nbsp;",style:{"font-size":this.userOptions.fontSize+"pt",height:c+"px","line-height":c+"px"}},this.traceGutter,"last")}))},_setupEditor:function(){var a=ace.require("ace/ext/language_tools");this._editor=ace.edit(this.editorNode);this._editor.$blockScrolling=
Infinity;a.setCompleters([a.keyWordCompleter]);this._editor.setOptions({fontFamily:"courier",fontSize:"10pt",showFoldWidgets:!1,showGutter:!1,showLineNumbers:!1,showPrintMargin:!1,wrap:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!0,readOnly:this.readOnly});this._editor.commands.removeCommand("find");this.own(h.after(this._editor.commands.byName.replace,"exec",l.hitch(this,this._setLabelsForReplaceDialog)));this._editor.session.on("changeScrollTop",l.hitch(this,function(a){this.traceGutter.scrollTop=
a}));this._editor.on("paste",function(a){a.text=a.text.replace(/\t/g," ")});this.own(w(this.editorNode,"click",l.hitch(this,this._onEditorClick)),w(this.editorNode,"dragenter",l.hitch(this,function(){n.add(this.editorNode,"dragging")})),w(this.editorNode,"dragleave, drop",l.hitch(this,function(){n.remove(this.editorNode,"dragging")})))},_setupLoadFileListeners:function(){this.own(w(window,"resize",l.hitch(this,function(){this._loadFileDialog.open&&this._loadFileDialog._position()})),w(this._fileSelector,
"save",l.hitch(this,function(a){this._loadFileDialog.hide();this._fetchProgramFile(a.path);this._setSaveFileDialogFilename(a.name)})),w(this._fileSelector,"cancel",l.hitch(this,function(){this._loadFileDialog.hide()})))},_setupOptionsSection:function(){var a=x(".ace_search",this.editorNode)[0],b=x(".ace_search_options \x3e [action\x3d'toggleRegexpMode']",a)[0];"undefined"!==typeof b&&d.set(b,"title",this.programStrings.regexpSearch);b=x(".ace_search_options \x3e [action\x3d'toggleCaseSensitive']",
a)[0];"undefined"!==typeof b&&d.set(b,"title",this.programStrings.matchCase);b=x(".ace_search_options \x3e [action\x3d'toggleWholeWords']",a)[0];"undefined"!==typeof b&&d.set(b,"title",this.programStrings.matchWholeWord);a=x(".ace_search_options \x3e [action\x3d'searchInSelection']",a)[0];"undefined"!==typeof a&&d.set(a,"title",this.programStrings.searchInSelection)},_setupPointSourceListeners:function(a){this.own(h.after(a,"onDndDrop",a.selectNone))},_setupReplaceSection:function(a){var c=x(".ace_search",
this.editorNode)[0],f=x(".ace_replace_form \x3e [action\x3d'replaceAll']",c)[0];"undefined"!==typeof f&&(d.set(f,{innerHTML:this.webviewStrings.all,title:this.programStrings.replaceAll}),b.set(f,"width",a+"px"));f=x(".ace_replace_form \x3e input",c)[0];if("undefined"!==typeof f){d.set(f,"placeholder",this.programStrings.replaceWith);var g=b.get(f,"width");b.set(f,"width",g-a+"px")}c=x(".ace_replace_form \x3e [action\x3d'replaceAndFindNext']",c)[0];"undefined"!==typeof c&&(d.set(c,{innerHTML:"",title:this.programStrings.replace}),
b.set(c,"width",a+"px"))},_setupSaveFileListeners:function(){this.own(w(this._saveFileDialog,"save",l.hitch(this,function(){var a=this._saveFileDialog.filenameTB.value;a.match(/\.bas$/)||(a+=".bas");this._saveProgramFile(a)})))},_setSaveFileDialogFilename:function(a){null!==this._saveFileDialog&&this._saveFileDialog.set("lastOpenedFilename",a);this._lastOpenedFilename=a},_setupSearchSection:function(a){var c=x(".ace_search",this.editorNode)[0],f=x(".ace_search_form \x3e input",c)[0];"undefined"!==
typeof f&&(d.set(f,"placeholder",this.programStrings.findWhat),this.defer(l.hitch(this,function(){f.focus()}),50));var g=x(".ace_search_form \x3e [action\x3d'findPrev']",c)[0];"undefined"!==typeof g&&(d.set(g,"title",this.programStrings.findPreviousBtnToolTip),b.set(g,"width",a+"px"));g=x(".ace_search_form \x3e [action\x3d'findNext']",c)[0];"undefined"!==typeof g&&(d.set(g,"title",this.programStrings.findNextBtnToolTip),b.set(g,"width",a+"px"));c=x(".ace_search_form \x3e [action\x3d'findAll']",c)[0];
"undefined"!==typeof c&&(d.set(c,"innerHTML",this.webviewStrings.all),b.set(c,"width",a+"px"))},_showConfirmDialog:function(){var a=new c;null===this._confirmDialog&&(this._confirmDialog=new N({title:f.unsavedChanges,text:u.unsavedChanges,type:U.types.binaryConfirm}));var b=this._confirmDialog.on("close",l.hitch(this,function(c){switch(c){case U.returnValues.oneOrYes:a.resolve();break;case U.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+" - _showConfirmDialog(): Unknown choice",
c)}b.remove()}));this.own(b);this._confirmDialog.open();return a.promise},_showEditPointDialog:function(a){null===this._editPointDialog&&(this._editPointDialog=new aa({title:q.editObject,system:this.system,site:this.site,reasonRequired:rc.session.reasonRequired()}));a.name=this._buildFullPointName(this._deviceName,a.descriptor,a.mnemonic,a.property);this._editPointDialog.set("data",a);this._editPointDialog.show()},_showPointMenu:function(a,b,c){null===this._pointMenu&&(this._pointMenu=new F,this.own(w(this._pointMenu,
"edit",l.hitch(this,this._editPoint)),w(this._pointMenu,"addToWatch",l.hitch(this,this._addToWatch)),w(this._pointMenu,"removeFromWatch",l.hitch(this,this._pointMenuRemoveFromWatchClicked))));var f=this._getDetailsFromPoint(b.value),d=this.watches.filter(function(a){return!1===a.local}).some(l.hitch(this,function(a){var c=this._buildPointMnemonic(f,b.type);return a.mne===c})),g="undefined"!==typeof this._canEditTypes[b.type],k=this._propertyIdentifierRe.exec(b.value);k&&(k=this._propertyUtility._getSupportedType(Number(k[k.length-
1])),k===E.primitiveTypes.BACNET_OBJECT_IDENTIFIER||k===E.primitiveTypes.COMPLEX)&&(g=!1);this._pointMenu.set({canEdit:g,disableWatch:c,point:b.value,pointType:b.type,isRemove:d});this._pointMenu.show(a)},_showReplaceDialog:function(){this._editor.execCommand("replace")},_showWatch:function(){null!==this._gutterRefreshTimer&&(clearTimeout(this._gutterRefreshTimer),this._gutterRefreshTimer=null);this._gutterRefreshTimer=setTimeout(l.hitch(this,function(){this._showWatchDebounce();this._gutterRefreshTimer=
null}),this._intervalTime)},_showWatchDebounce:function(){a.empty(this.traceGutter);this._resizeGutter(!0).then(l.hitch(this,this._buildWatchDisplay))},_showWatchMenu:function(a,b){null===this._watchListMenu&&(this._watchListMenu=new H,this.own(w(this._watchListMenu,"removeSingle",l.hitch(this,this._removeFromWatch)),w(this._watchListMenu,"removeAll",l.hitch(this,function(){var a=this.watches.filter(function(a){return!1===a.local}).map(function(a){return a.mne});this._removeFromWatch(a)})),w(window.document,
"click",l.hitch(this,function(a){!1===n.contains(a.target,"custom-watch")&&this._watchListMenu.hide()}))));this._watchListMenu.set("point",a);this._watchListMenu.show(b)},_toggleAutoComplete:function(){this._setEditorAutoComplete(this._toolbar.get("autoComplete"));this.userOptions.autoComplete=this._toolbar.get("autoComplete");this._sendUserOptions()},_toggleMnemonics:function(){this._toolbar.toggleFetchers(!0);this.useDescriptors=!this.useDescriptors;this._reloadData()},_toggleMnemonicsValidation:function(){var a=
new c;a.then(l.hitch(this,this._toggleMnemonics));this._promptWhenDirty(a)},_toggleTrace:function(a){a?this._setTraces(this.traces):this._showWatch()},_toggleValues:function(a){this.showInlineValues=!a;this._toolbar.toggleFetchers(!0);this._setReadOnly(this.showInlineValues);this.showInlineValues?(this._valuesLoadTimer=setInterval(l.hitch(this,this._reloadData),this._valuesLoadInterval),this._keyListener=w(this._editor.textInput.getElement(),"keydown",l.hitch(this,function(a){this._toolbar.set("showValues",
!1);S.stopEvent(a)})),this.own(this._keyListener)):(null!==this._valuesLoadTimer&&(clearInterval(this._valuesLoadTimer),this._valuesLoadTimer=null),null!==this._keyListener&&(this._keyListener.remove(),this._keyListener=null));this._reloadData()},_toggleValuesValidation:function(a){var b=new c;b.then(l.hitch(this,this._toggleValues,a),l.hitch(this._toolbar,this._toolbar.resetToggleValues));this._promptWhenDirty(b)},_updateEditorCss:function(){var a=b.get(this.editorNode,"font-size");this._applyGeneralEditorSettings();
a!==b.get(this.editorNode,"font-size")&&(b.set(this.traceGutter,{visibility:"hidden"}),this.defer(l.hitch(this,this._drawTraces),500));this._applySyntaxHighlighting()},_watchChanged:function(a){a.errStatus===this.SuccessCode&&(this.watches=a.watches);this._toggleTrace(!this._toolbar.get("isShowingWatch"))},destroy:function(){this.traces=[];this.watches=[];null!==this._pointMenu&&this._pointMenu.destroyRecursive();this._editor&&(this._removeEditorChangeListener(this._editorChangeListener),this._editor.session.removeAllListeners("changeScrollTop"),
this._editor.destroy());this._refreshDefer&&this._refreshDefer.remove();this._clearPollingTimer(this._pollForStatusTimer);this._clearPollingTimer(this._pollForMultipleStatusTimer);this._clearPollingTimer(this._gutterRefreshTimer);clearInterval(this._fetchInterval);clearInterval(this._valuesLoadTimer);this.inherited(arguments)}})})},"webview/admin/programs/PointMenu":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../../nls/programs dojo/keys dojo/on dojo/text!./templates/PointMenu.html".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return m("webview/admin/programs/PointMenu",[p,r],{baseClass:"",canEdit:!1,disableWatch:!1,programStrings:a,rcStrings:n,templateString:k,_EnglishHeight:58,_EnglishWidth:134,postCreate:function(){this.inherited(arguments);g.place(this.domNode,window.document.body,"last");this._buildEventItemMap();this.own(t(this.editItem,"click",l.hitch(this,this._itemClicked,"edit")),t(this.addToWatchItem,"click",l.hitch(this,this._itemClicked,"addToWatch")),t(this.cancelItem,"click",
l.hitch(this,this._itemClicked,"cancel")),t(window,"keydown",l.hitch(this,function(a){a.keyCode===b.ESCAPE&&this.hide()})))},hide:function(){c.add(this.domNode,"hidden")},onAddToWatch:function(a,b){},onEdit:function(a,b){},onRemoveFromWatch:function(a,b){},show:function(a){var b=window.document.body.clientWidth,g=window.document.body.clientHeight,k="left",h="right",l="bottom",n="top",m=a.clientX,q=a.clientY;0>=b-(a.clientX+this._EnglishWidth)&&(k="right",h="left",m=b-a.clientX);0>=g-(a.clientY+this._EnglishHeight)&&
(n="bottom",l="top",q=g-a.clientY);d.set(this.domNode,k,m+"px");d.set(this.domNode,n,q+"px");d.set(this.domNode,h,"");d.set(this.domNode,l,"");c.remove(this.domNode,"hidden")},_buildEventItemMap:function(){this._itemEventMap={addToWatch:"_onAddToWatch",edit:"_onEdit",cancel:"hide"}},_itemClicked:function(a){a=this._itemEventMap[a];"undefined"!==typeof a&&(this[a](this.point,this.pointType),this.hide())},_onAddToWatch:function(a,b){if(!this.disableWatch)if(this.isRemove)this.onRemoveFromWatch(a,b);
else this.onAddToWatch(a,b)},_onEdit:function(a,b){if(this.canEdit)this.onEdit(a,b)},_setCanEditAttr:function(a){this.inherited(arguments);this.canEdit=a;c.toggle(this.editItem,"disabled",!this.canEdit)},_setDisableWatchAttr:function(a){this.inherited(arguments);this.disableWatch=a;c.toggle(this.addToWatchItem,"disabled",this.disableWatch)},_setIsRemoveAttr:function(a){this.inherited(arguments);this.isRemove=a;h.set(this.addToWatchItem,"innerHTML",this.isRemove?this.programStrings.removeFromWatchlist:
this.programStrings.addToWatchList)}})})},"webview/admin/programs/WatchPointMenu":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!../../nls/all dojo/i18n!../../nls/programs dojo/keys dojo/on dojo/text!./templates/WatchPointMenu.html".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t){return m("webview/admin/programs/PointMenu",[p,r],{baseClass:"",programStrings:n,templateString:t,webviewStrings:d,_EnglishHeight:58,
_EnglishWidth:134,postCreate:function(){this.inherited(arguments);c.place(this.domNode,window.document.body,"last");this._buildEventItemMap();this.own(b(this.removeSingle,"click",l.hitch(this,this._itemClicked,"removeSingle")),b(this.removeAll,"click",l.hitch(this,this._itemClicked,"removeAll")),b(this.cancelItem,"click",l.hitch(this,this._itemClicked,"cancel")),b(window,"keydown",l.hitch(this,function(b){b.keyCode===a.ESCAPE&&this.hide()})))},hide:function(){h.add(this.domNode,"hidden")},onCancel:function(){this.hide()},
onRemoveAll:function(){},onRemoveSingle:function(a){},show:function(a){var b=window.document.body.clientWidth,c=window.document.body.clientHeight,d="left",k="right",l="bottom",n="top",m=a.clientX,p=a.clientY;0>=b-(a.clientX+this._EnglishWidth)&&(d="right",k="left",m=b-a.clientX);0>=c-(a.clientY+this._EnglishHeight)&&(n="bottom",l="top",p=c-a.clientY);g.set(this.domNode,d,m+"px");g.set(this.domNode,n,p+"px");g.set(this.domNode,k,"");g.set(this.domNode,l,"");h.remove(this.domNode,"hidden")},_buildEventItemMap:function(){this._itemEventMap=
{removeAll:"onRemoveAll",removeSingle:"onRemoveSingle",cancel:"onCancel"}},_itemClicked:function(a){a=this._itemEventMap[a];"undefined"!==typeof a&&(this[a]([this.point]),this.hide())}})})},"webview/admin/programs/widget/OptionsDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/programs dojo/on dojo/text!./templates/OptionsDialog.html ../../../widget/ButtonGroupButton dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select ../../../widget/ButtonGroup webview/widget/ColorPicker".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return p("webview/admin/programs/widget/OptionsDialog",[r],{templateString:n,buttonGroupButtons:null,userOptions:null,rcStrings:h,webviewStrings:c,programStrings:g,postCreate:function(){this.inherited(arguments);this._buildButtonGroup();this._populateDialog();this._setupOnClicks();this._setupStylingListeners();this._styleFontSample()},_getUserOptionsAttr:function(){this._syncUserOptions();return this.userOptions},onOk:function(){},onCancel:function(){},onRestore:function(){},
refreshContent:function(a){this.userOptions=a;this._populateDialog();this._styleFontSample()},_buildButtonGroup:function(){null===this.buttonGroupButtons&&(this.buttonGroupButtons={},this.buttonGroupButtons.bold=new a({content:"\x3cstrong\x3eB\x3c/strong\x3e"}),this.buttonGroupButtons.italic=new a({content:"\x3cem\x3eI\x3c/em\x3e"}),this.buttonGroupButtons.underline=new a({content:"\x3cu\x3eU\x3c/u\x3e"}),this.buttonGroupButtons.strikethrough=new a({content:"\x3cstrike\x3eS\x3c/strike\x3e"}),this.buttonGroup.addButton(this.buttonGroupButtons.bold.domNode),
this.buttonGroup.addButton(this.buttonGroupButtons.italic.domNode),this.buttonGroup.addButton(this.buttonGroupButtons.underline.domNode),this.buttonGroup.addButton(this.buttonGroupButtons.strikethrough.domNode))},_onCancel:function(){this.onCancel()},_onOk:function(){this.onOk()},_onRestore:function(){this.onRestore()},_setupOnClicks:function(){this.own(d(this.restoreButton,"click",m.hitch(this,this._onRestore)),d(this.okButton,"click",m.hitch(this,this._onOk)),d(this.cancelButton,"click",m.hitch(this,
this._onCancel)))},_setupStylingListeners:function(){this.own(d(this.fontSize,"change",m.hitch(this,function(){this._syncUserOptions();this._styleFontSample()})),d(this.normalColourPicker,"blurred",m.hitch(this,function(){this._syncUserOptions();this._styleFontSample()})),d(this.buttonGroup,"change",m.hitch(this,function(){this._syncUserOptions();this._styleFontSample()})))},_syncUserOptions:function(){this.userOptions.fontSize=this.fontSize.get("value");this.userOptions.colours.normal=this.normalColourPicker.get("color");
this.userOptions.bold=this.buttonGroupButtons.bold.get("checked");this.userOptions.italicize=this.buttonGroupButtons.italic.get("checked");this.userOptions.underscore=this.buttonGroupButtons.underline.get("checked");this.userOptions.strikethrough=this.buttonGroupButtons.strikethrough.get("checked");this.userOptions.syntaxHighlighting=this.syntaxHighlightingCheckBox.get("checked");this.userOptions.colours.comments=this.commentColourPicker.get("color");this.userOptions.colours.statements=this.statementsColourPicker.get("color");
this.userOptions.colours.functions=this.functionsColourPicker.get("color");this.userOptions.colours.lineNumbers=this.lineNumbersColourPicker.get("color");this.userOptions.colours.alarmText=this.alarmTextColourPicker.get("color");this.userOptions.colours.inputs=this.inputsColourPicker.get("color");this.userOptions.colours.outputs=this.outputsColourPicker.get("color");this.userOptions.colours.valuesAndArrays=this.ValuesAndArraysColourPicker.get("color");this.userOptions.colours.otherObjects=this.otherObjectsColourPicker.get("color");
this.userOptions.colours.background=this.backgroundColourPicker.get("color");this.userOptions.colours.presentValues=this.presentValuesColourPicker.get("color")},_populateDialog:function(){this.fontSize.set("value",this.userOptions.fontSize);this.normalColourPicker.set("color",this.userOptions.colours.normal);this.buttonGroupButtons.bold.set("checked",this.userOptions.bold);this.buttonGroupButtons.italic.set("checked",this.userOptions.italicize);this.buttonGroupButtons.underline.set("checked",this.userOptions.underscore);
this.buttonGroupButtons.strikethrough.set("checked",this.userOptions.strikethrough);this.syntaxHighlightingCheckBox.set("checked",this.userOptions.syntaxHighlighting);this.commentColourPicker.set("color",this.userOptions.colours.comments);this.statementsColourPicker.set("color",this.userOptions.colours.statements);this.functionsColourPicker.set("color",this.userOptions.colours.functions);this.lineNumbersColourPicker.set("color",this.userOptions.colours.lineNumbers);this.alarmTextColourPicker.set("color",
this.userOptions.colours.alarmText);this.inputsColourPicker.set("color",this.userOptions.colours.inputs);this.outputsColourPicker.set("color",this.userOptions.colours.outputs);this.ValuesAndArraysColourPicker.set("color",this.userOptions.colours.valuesAndArrays);this.otherObjectsColourPicker.set("color",this.userOptions.colours.otherObjects);this.backgroundColourPicker.set("color",this.userOptions.colours.background);this.presentValuesColourPicker.set("color",this.userOptions.colours.presentValues)},
_styleFontSample:function(){var a="";this.userOptions.underscore&&(a="underline");this.userOptions.strikethrough&&(a+=" line-through");l.set(this.fontSample,{"font-size":this.userOptions.fontSize+"pt",color:this.userOptions.colours.normal,"text-decoration":a,"font-weight":this.userOptions.bold?"bold":"","font-style":this.userOptions.italicize?"italic":""})}})})},"webview/widget/ButtonGroupButton":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/text!webview/widget/templates/ButtonGroupButton.html dijit/form/CheckBox".split(" "),
function(r,p,m,l,h){return l("webview/widget/ButtonGroupButton",[p,r,m],{templateString:h,baseClass:"",content:"\x26nbsp;",_getCheckedAttr:function(){return this.checkBox.get("checked")},_setCheckedAttr:function(c){this.checkBox.set("checked",c)}})})},"webview/widget/ButtonGroup":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","dojo/dom-construct","dojo/text!webview/widget/templates/ButtonGroup.html"],function(r,p,m,l,h){return m("webview/widget/ButtonGroup",[p,r],
{templateString:h,baseClass:"",addButton:function(c){l.place(c,this.buttonsContainer)}})})},"webview/admin/programs/widget/ProgramDndPoint":function(){define(["dojo/_base/declare","dojo/dom-class","../../widget/NativeDndPoint"],function(r,p,m){return r("webview/admin/programs/widget/ProgramDndPoint",[m],{useDescriptors:!1,programDevice:-1,drag:function(l){p.add(this.domNode,"dragging");l.dataTransfer.effectAllowed=this.effectAllowed;if(this.useDescriptors){var h=this._getDescriptorForProgram();l.dataTransfer.setData("text",
" "+h)}else l.dataTransfer.setData("text"," "+this.pointMnemonic)},_getDescriptorForProgram:function(){var l=this.pointName.replace(/ /g,String.fromCharCode(183)),h=null;null!==(h=/^(\d+)(?:[a-z])+?\d+?/i.exec(this.pointMnemonic))&&(h=Number(h[1]),h!==this.programDevice&&(l="{"+h+"}"+l));return l}})})},"webview/admin/widget/NativeDndPoint":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare","dojo/dom-class","dojo/text!./templates/NativeDndPoint.html"],function(r,p,
m,l,h){return m("webview/admin/widget/NativeDndPoint",[p,r],{templateString:h,deviceName:"",effectAllowed:"copy",pointName:"",pointMnemonic:"",drag:function(c){l.add(this.domNode,"dragging");c.dataTransfer.effectAllowed=this.effectAllowed;c.dataTransfer.setData("text"," "+this.pointMnemonic)},stopDrag:function(){l.remove(this.domNode,"dragging")}})})},"webview/admin/programs/widget/SaveFileDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/programs dojo/on dojo/text!./templates/SaveFileDialog.html ../../../widget/WarningDialog ../../../widget/WarningDialogEnums dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return p("webview/admin/programs/widget/SaveFileDialog",[r],{currentFiles:[],lastOpenedFilename:null,placeholderName:"program.bas",programStrings:c,rcStrings:l,templateString:d,webviewStrings:h,_confirmOverwriteDialog:null,postCreate:function(){this.inherited(arguments);this._setupOnClicks();this.okButton.set("label",this.rcStrings.rcbSave)},_setLastOpenedFilenameAttr:function(a){this.filenameTB.set("value",a);this._set("lastOpenedFilename",a)},onSave:function(){},onCancel:function(){},
_createConfirmOverwriteDialog:function(){this._confirmOverwriteDialog=new n({title:this.webviewStrings.overwriteDialogTitle,type:a.types.binary,text:this.webviewStrings.overwriteDialogBody})},_onCancel:function(){this.onCancel()},_onSave:function(){this.onSave()},_onSubmit:function(){this._wouldOverwrite()?this._showConfirmOverwriteDialog():(this.inherited(arguments),this._onSave())},_setupOnClicks:function(){this.own(g(this.cancelButton,"click",m.hitch(this,this._onCancel)))},_showConfirmOverwriteDialog:function(){null===
this._confirmOverwriteDialog&&this._createConfirmOverwriteDialog();var b=this._confirmOverwriteDialog.on("close",m.hitch(this,function(c){switch(c){case a.returnValues.oneOrYes:this.onExecute();this.execute(this.get("value"));this._onSave();break;case a.returnValues.none:break;default:console.error(this.declaredClass+" - _createConfirmOverwriteDialog(): Unknown choice",c)}b.remove()}));this.own(b);this._confirmOverwriteDialog.open()},_wouldOverwrite:function(){var a=this.filenameTB.value;a.match(/\.bas$/)||
(a+=".bas");for(var c=0;c<this.currentFiles.length;c++)if(a===this.currentFiles[c])return!0;return!1}})})},"webview/admin/widget/DevicePullout":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/fx dojo/i18n!rc/nls/all dojo/on dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!./templates/DevicePullout.html ./NetworkTree ../../util/globalConstants dijit/form/Button".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y){return c("webview/admin/widget/DevicePullout",[p,r,m],{baseClass:"",rcStrings:k,templateString:z,_MinPulloutWidth:328,_deviceCheckboxes:[],_isOpen:!1,_networkTree:null,_totalVerticalPadding:0,_treeLoaded:!1,postCreate:function(){this.inherited(arguments);this._fetchDevices()},hide:function(){h.forEach(this._deviceCheckboxes,function(a){a.set("checked",!1)});var a=b.get(this.domNode,"width"),a=g.animateProperty({node:this.domNode,properties:{width:{start:a,
end:0}}}),c=g.animateProperty({node:this.contents,duration:150,properties:{opacity:{start:1,end:0}},onEnd:d.hitch(this,function(){n.add(this.contents,"hidden");this._removeDeviceSelection()})});t.chain([c,a]).play();this._isOpen=!1},onClickCancel:function(){},onClickOk:function(a){},resize:function(){if(this._isOpen){var a=.3*b.get(this.relativeNode,"width"),a=Math.max(a,this._MinPulloutWidth),c=b.get(this.relativeNode,"height");b.set(this.domNode,{height:c+this._totalVerticalPadding+"px",width:a+
"px"});this._setDeviceContainerMaxHeight()}},show:function(){if(!this._isOpen){var a=.3*b.get(this.relativeNode,"width"),a=Math.max(a,this._MinPulloutWidth),a=g.animateProperty({node:this.domNode,properties:{width:{start:0,end:a}},onEnd:d.hitch(this,function(){n.remove(this.contents,"hidden");this._setDeviceContainerMaxHeight();this._selectDeviceNode()})}),c=g.animateProperty({node:this.contents,duration:150,properties:{opacity:{start:0,end:1}}});t.chain([a,c]).play();this._isOpen=!0}},_buildNetworkTree:function(a){var b=
[y.PanelFileCompatibilityTypes.pyramidProCom,y.PanelFileCompatibilityTypes.pyramidProSys,y.PanelFileCompatibilityTypes.pyramidProWebCom,y.PanelFileCompatibilityTypes.pyramidProWebSys,y.PanelFileCompatibilityTypes.ssc,y.PanelFileCompatibilityTypes.sscMaxwell,y.PanelFileCompatibilityTypes.thirdParty];a=a.filter(function(a){return-1===b.indexOf(a.compatibilityType)});a=new w(new u({data:a,getChildren:function(a){return this.query({parent:a.id})}}));var c=a.query(d.hitch(a,function(a){return"network"!==
a.type||0<this.getChildren(a).length}));a.setData(c);a=new l({store:a,query:{type:"root"},labelAttr:"name",mayHaveChildren:function(a){return 0<this.store.query({parent:a.id}).length}});this._networkTree=new x({model:a,showRoot:!1});this._networkTree.placeAt(this.deviceContainer);this._networkTree.startup();this.own(q.once(this._networkTree,"load",d.hitch(this,function(){this._treeLoaded=!0})))},_fetchDevices:function(){return f.get("GetDeviceForPullout",{handleAs:"json",query:{userId:rc.session._attributes.userId,
systemId:this.systemId}}).then(d.hitch(this,this._buildNetworkTree))},_onClickCancel:function(){this.onClickCancel();this.hide()},_onClickOk:function(){var a=this._networkTree.get("checked").filter(function(a){return"device"===a.type}).map(function(a){return a.widgetId});this.onClickOk(a);this.hide()},_removeDeviceSelection:function(){this._networkTree.get("checked").forEach(d.hitch(this,function(a){this._networkTree.setCheckboxState(a,!1)}))},_selectDeviceNode:function(){if(this.device&&null!==this._networkTree){var a=
this._networkTree.model.store.query(d.hitch(this,function(a){return"device"===a.widget&&Number(a.widgetId)===Number(this.device)}));1===a.length&&(!1===this._treeLoaded?this.own(q.once(this._networkTree,"load",d.hitch(this,function(){this._networkTree.expandToNode(a[0]).then(d.hitch(this,function(){this._networkTree.setCheckboxState(a[0],!0)}))}))):this._networkTree.expandToNode(a[0]).then(d.hitch(this,function(){this._networkTree.setCheckboxState(a[0],!0)})))}},_setDeviceContainerMaxHeight:function(){var c=
b.get(this.domNode,"height"),f=b.getComputedStyle(this.buttonContainer),f=a.getMarginBox(this.buttonContainer,f);b.set(this.deviceContainer,{maxHeight:c-f.h+"px"})},_setRelativeNodeAttr:function(a){this.inherited(arguments);this.relativeNode=a;var c=b.get(this.relativeNode,"height");this._totalVerticalPadding=b.get(this.relativeNode,"paddingTop")+b.get(this.relativeNode,"paddingBottom")-1;b.set(this.domNode,{height:c+this._totalVerticalPadding+"px"})}})})},"webview/admin/widget/FileSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/tree/ObjectStoreModel dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/Evented dojo/json dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!webview/admin/widget/templates/FileSelector.html ./FileTreeServer dijit/form/Button".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return h("webview/admin/widget/FileSelector",[p,r,m,n],{templateString:f,tree:null,model:null,selectedFile:null,_jobFileStore:null,store:null,_updating:!1,searchParams:"*",systemId:null,path:"FileService",postCreate:function(){this.inherited(arguments);this.fetch()},_createTree:function(a){null!==this.store&&(this.store=null);this.store=new q(new k({data:a,getChildren:function(a){return this.query({parent:a.id})}}));null!==this.model&&this.model.destroy();
this.model=new l({store:this.store,query:{root:!0},mayHaveChildren:function(a){return a.directory}});null!==this.tree&&this.tree.destroy();this.tree=new u({model:this.model,onClick:c.hitch(this,"onFileClicked"),onDblClick:c.hitch(this,"chooseAndSave"),requestPath:this.path,searchParams:this.searchParams});d.place(this.tree.domNode,this.fileTree,"only");this.tree.startup()},chooseAndSave:function(a){a.directory||(this.selectedFile=a,this._onSave())},fetch:function(){if(!this._beginUpdate())return null;
var a=t.get(this.path,{handleAs:"json",preventCache:!0,query:{path:null,search:this.searchParams,id:null,parent:null,systemId:this.systemId}});a.then(c.hitch(this,function(a){this._createTree(a);return a}),c.hitch(this,function(a){return a})).always(c.hitch(this,this._endUpdate));return a},_beginUpdate:function(){return this._updating?!1:this._updating=!0},_endUpdate:function(){this._updating&&(this._updating=!1)},onFileClicked:function(a,c){var f=b(".dijitTreeContent.selected");0<f.length&&g.remove(f[0],
"selected");a.directory?(c.expandoNode.click(),this.okButton.set("disabled",!0),this.selectedFile=null):(this.okButton.set("disabled",!1),this.selectedFile=a);g.add(this.tree.selectedNode.contentNode,"selected");this.emit("fileClicked",a,c);return a},_onSave:function(){if(null!==this.selectedFile)this.onSave(this.selectedFile);else console.error("FileSelector.js - _onSave(): No file has been selected")},onSave:function(a){this.emit("save",a);return a},onCancel:function(){this.emit("cancel",null);
this.selectedFile=null}})})},"webview/admin/widget/FileTreeServer":function(){define("dijit/Tree dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/json dojo/request/xhr".split(" "),function(r,p,m,l,h,c){return p("webview/admin/FileTreeServer",[r],{requestPath:"",searchParams:"",persist:!1,postCreate:function(){this.inherited(arguments)},_expandNode:function(c){if(c._expandNodeDeferred)return c._expandNodeDeferred;var d=this.model,g=c.item,a=this;c._loadDeferred||(c.markProcessing(),c._loadDeferred=
new l,d.getChildren(g,m.hitch(this,function(b){var d=new l;b.length?d.resolve(b):this._getDirectoryInfo(c).then(m.hitch(this,function(a){b=a;d.resolve(b)}),m.hitch(this,function(b){console.error(a,": error loading files from server"+c.label+" children: ",b);c._loadDeferred.reject(b)}));d.then(m.hitch(this,function(a){c.unmarkProcessing();c.setChildItems(a).then(function(){c._loadDeferred.resolve(a)})}))}),function(b){console.error(a,": error loading "+c.label+" children: ",b);c._loadDeferred.reject(b)}));
d=c._loadDeferred.then(m.hitch(this,function(){var a=c.expand();this.onOpen(c.item,c);this._state(c,!0);return a}));this._startPaint(d);return d},_getDirectoryInfo:function(g){g=g.item;return c.get(this.requestPath,{handleAs:"json",query:{path:g.path,search:this.searchParams,id:g.id,parent:g.parent}})},_onDblClick:function(){}})})},"webview/widget/EditPointDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!rc/nls/grp dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/promise/all dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/EditPointDialog.html dojo/topic rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/Array rc/bacnet/io/Error rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/service/WritePropertyMultiple rc/bacnet/unit rc/reliable/unit rc/util/numberUtil ../bacnet/Object ../bacnet/property ../sys/job ../changeApproval/_ApprovalSessionMixin ./_PointEditAuditLoggerMixin ./DialogRelinquish dijit/form/Button dijit/form/FilteringSelect dijit/form/SimpleTextarea dijit/form/ValidationTextBox ../bacnet/_widget/TimedInput".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T){return p("webview/widget/EditPointDialog",[r,P,Q],{arrayIndex:-1,reasonRequired:!1,rcStrings:n,webviewStrings:b,templateString:x,_autoManualStates:{auto:0,manual:1,timed:2},_autoManualStore:null,_device:-1,_fetchingDataDfd:null,_currentInputType:0,_inputTypes:{analog:0,digital:1,text:2},_instance:-1,_pointRoleMap:{},_statusFlags:null,_priority8:null,_rangeIndex:0,_relinquishDialog:null,_stateText:[],_supportsAutoManual:!1,
_supportsPriorityArray:!1,_supportsTimedOverride:!1,_timedOverrideMinutes:0,_type:-1,_units:-1,_approvalToken:null,_writeDeferred:null,isSSC:!1,constructor:function(){this._autoManualStore=new w(new u({data:[{id:0,name:n.auto},{id:1,name:n.manual}]}));this._digitalInputStore=new u;this._buildPointRoleMap()},postCreate:function(){this.autoManualSelector.set({store:this._autoManualStore,value:0});this.own(k(this.digitalValueInput.textbox,"click",l.hitch(this,this._onClickMultiState)));this.own(k(this.autoManualSelector.textbox,
"click",l.hitch(this,this._onClickAutoManual)));this.own(k(this.autoManualSelector,"change",l.hitch(this,this._toggleTimedField)));this._implementUserPermissions();this.inherited(arguments);this.own(k(this.numericValueInput,"keyup",l.hitch(this,function(){this.okButton.set("disabled",!this._shouldShowSubmit())})))},hide:function(){this.inherited(arguments);this._cancelFetchDfd();g.remove(this.loadingOverlay,"hidden");g.add(this.loadingAnimation,"hidden");d.set(this.loadingOverlay,"opacity",1);g.add(this.errorOverlay,
"hidden");this.reasonField.reset()},_addRCPArrayPropertyWrite:function(a){var b=Number(this._inputField.get("value")),b=new D(b,v.primitiveTypes.REAL);a.push({p:new D(v.propertyTypes.PROPID_PP_ARRAY_VALUES,v.primitiveTypes.ENUMERATED),i:new D(this.arrayIndex,v.primitiveTypes.UNSIGNED_INTEGER),v:b,pr:new D(10,v.primitiveTypes.UNSIGNED_INTEGER)})},_buildPointRoleMap:function(){this._pointRoleMap={1:rc.session.roles.outChg,2:rc.session.roles.inChg,3:rc.session.roles.varChg,4:rc.session.roles.conChg,
12:rc.session.roles.aryChg}},_cancelFetchDfd:function(){null!==this._fetchingDataDfd&&!1===this._fetchingDataDfd.isFulfilled()&&(this._fetchingDataDfd.cancel(),this._fetchingDataDfd=null)},_displayInitialFetchErrors:function(a){var b="";if(a instanceof Array){for(var b={},f=0;f<a.length;++f)b[a[f].message]=1;b=Object.keys(b).join("\x3cbr /\x3e")}else b=a.message;c.set(this.errorMessageContainer,"innerHTML",b);this._fetchingDataDfd.reject(!0)},_getDescriptorAndProperty:function(){var a=new h;this.own(a);
var b=new h;this.own(b);var c=[{o:new F(this._type,this._instance),pl:[{p:new D(v.propertyTypes.PROPID_OBJECT_NAME,v.primitiveTypes.ENUMERATED),i:-1,v:new C([],v.primitiveTypes.CHARACTER_STRING)},{p:new D(this.property,v.primitiveTypes.ENUMERATED),i:-1!==this.arrayIndex?new D(this.arrayIndex,v.primitiveTypes.ENUMERATED):-1,v:new A}]}];this._bacnetPropertyObject=new M(this.property,this._bacnetObject,null,this.arrayIndex,this._device);this._bacnetPropertyObject.systemId=this.system;rc.xhr.request({type:"bacnetSystem",
s:new H({device:this._device},c),systemId:this.system,preventCache:this.preventCache,load:l.hitch(this,function(a){this._parseDescriptorAndPropertyRead(a).then(l.hitch(this,b.resolve),l.hitch(this,b.reject))}),error:l.hitch(this,function(a){b.reject(a)})});q([this._bacnetPropertyObject.fetch(this.arrayIndex),b.promise]).then(l.hitch(this,a.resolve),l.hitch(this,a.reject));return a.promise},_getPropertiesToWrite:function(){var a=new F(this._type,this._instance),b=[];if(this._bacnetObject.type===v.objectTypes.OBJID_PP_ARRAY)this._addRCPArrayPropertyWrite(b);
else if(this.property!==v.propertyTypes.PROPID_PRESENT_VALUE)this._bacnetPropertyObject.setValue(this._inputField.get("value")),b.push({p:new D(this.property,v.primitiveTypes.ENUMERATED),i:-1!==this.arrayIndex?new D(this.arrayIndex,v.primitiveTypes.ENUMERATED):-1,v:new A(this._bacnetPropertyObject.propertyObject)});else{var c=8,f=null!==this._priority8,d=Number(this.autoManualSelector.get("value")),g=1<=d?this._autoManualStates.manual:this._autoManualStates.auto;switch(this._bacnetObject.type){case v.objectTypes.OBJID_ANALOG_VALUE:case v.objectTypes.OBJID_BINARY_VALUE:case v.objectTypes.OBJID_MULTI_STATE_VALUE:case v.objectTypes.OBJID_ANALOG_INPUT:case v.objectTypes.OBJID_BINARY_INPUT:case v.objectTypes.OBJID_MULTI_STATE_INPUT:case v.objectTypes.OBJID_LOOP:case v.objectTypes.OBJID_SCHEDULE:case v.objectTypes.OBJID_ACCUMULATOR:case v.objectTypes.OBJID_PULSE_CONVERTER:case v.objectTypes.OBJID_PROGRAM:this._statusFlags&&
this._statusFlags.getBit(3)!==g&&b.push({p:new D(v.propertyTypes.PROPID_OUT_OF_SERVICE,v.primitiveTypes.ENUMERATED),i:-1,v:new D(g?1:0,v.primitiveTypes.BINARY)})}d===this._autoManualStates.auto?(this._bacnetObject.hasPriorityArray()&&f&&b.push({p:new D(v.propertyTypes.PROPID_PRESENT_VALUE,v.primitiveTypes.ENUMERATED),i:-1,v:new D(0,v.primitiveTypes.NULL),pr:new D(8,v.primitiveTypes.UNSIGNED_INTEGER)}),c=10):this._supportsTimedOverride&&(f=0,d===this._autoManualStates.timed&&(f=this._timedOverrideTB.get("value")),
b.push({p:new D(v.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES,v.primitiveTypes.ENUMERATED),i:-1,v:new D(f,v.primitiveTypes.UNSIGNED_INTEGER)}));d=Number(this._inputField.get("value"));(d!==this._value.v||8===c&&this._supportsPriorityArray)&&b.push({p:new D(v.propertyTypes.PROPID_PRESENT_VALUE,v.primitiveTypes.ENUMERATED),i:-1,v:new D(d,this._value.t),pr:this._supportsPriorityArray?new D(c,v.primitiveTypes.UNSIGNED_INTEGER):null})}return[{o:a,pl:b}]},_getSaveSuccessMessage:function(){return t.successfulSave},
_fadeLoading:function(a){a&&g.remove(this.errorOverlay,"hidden");m.fadeOut({node:this.loadingOverlay,onEnd:l.hitch(this,function(){g.add(this.loadingOverlay,"hidden")})}).play()},_fetchOtherProperties:function(){var a=new h;if(this.property!==v.propertyTypes.PROPID_PRESENT_VALUE)a.resolve();else{var b=[];this._bacnetObject.hasStateText()?this._bacnetObject.isBinary()?(b.push({p:new D(v.propertyTypes.PROPID_ACTIVE_TEXT,v.primitiveTypes.ENUMERATED),i:-1,v:new C([],v.primitiveTypes.CHARACTER_STRING)}),
b.push({p:new D(v.propertyTypes.PROPID_INACTIVE_TEXT,v.primitiveTypes.ENUMERATED),i:-1,v:new C([],v.primitiveTypes.CHARACTER_STRING)})):b.push({p:new D(v.propertyTypes.PROPID_STATE_TEXT,v.primitiveTypes.ENUMERATED),i:-1,v:new B(new C([],v.primitiveTypes.CHARACTER_STRING))}):this._hasUnits()&&b.push({p:new D(v.propertyTypes.PROPID_UNITS,v.primitiveTypes.ENUMERATED),i:-1,v:new D(0,v.primitiveTypes.UNSIGNED_INTEGER)});this._bacnetObject.hasPriorityArray()&&b.push({p:new D(v.propertyTypes.PROPID_PRIORITY_ARRAY,
v.primitiveTypes.ENUMERATED),i:new D(8,v.primitiveTypes.ENUMERATED),v:new A});this._bacnetObject.hasStatusFlags()&&b.push({p:new D(v.propertyTypes.PROPID_STATUS_FLAGS,v.primitiveTypes.ENUMERATED),i:-1,v:new C([],v.primitiveTypes.BIT_STRING)});b.push({p:new D(v.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES,v.primitiveTypes.ENUMERATED),i:-1,v:new D(0,v.primitiveTypes.UNSIGNED_INTEGER)});b=[{o:new F(this._type,this._instance),pl:b}];rc.xhr.request({type:"bacnetSystem",s:new H({device:this._device},
b),systemId:this.system,preventCache:this.preventCache,load:l.hitch(this,function(b){this._parseFetch(b);a.resolve()}),error:l.hitch(this,function(b){a.reject(b)})})}return a.promise},_hasUnits:function(){return this._bacnetObject.type<=v.objectTypes.OBJID_ANALOG_VALUE||this._bacnetObject.type==v.objectTypes.OBJID_PP_ARRAY},_hideInputs:function(){f(".second-column",this.containerNode).forEach(l.hitch(this,function(a){g.add(a,"hidden")}));g.add(this.valueInputContainer,"no-buttons");d.set(this.relinquishButtonContainer,
"visibility","hidden");g.add(this.numericValueInput.domNode,"hidden");g.add(this.textValueInput.domNode,"hidden");g.add(this.digitalValueInput.domNode,"hidden")},_isBinaryObject:function(a){return this._bacnetObject.type==v.objectTypes.OBJID_BINARY_INPUT||this._bacnetObject.type==v.objectTypes.OBJID_BINARY_VALUE||this._bacnetObject.type==v.objectTypes.OBJID_BINARY_OUTPUT?!0:!1},_isMultistateObject:function(a){return this._bacnetObject.type==v.objectTypes.OBJID_MULTI_STATE_INPUT||this._bacnetObject.type==
v.objectTypes.OBJID_MULTI_STATE_VALUE||this._bacnetObject.type==v.objectTypes.OBJID_MULTI_STATE_OUTPUT?!0:!1},_implementUserPermissions:function(){this.autoManualSelector.set("disabled",!rc.session.hasRole(rc.session.roles.autoManual));this.reasonRequired?this.own(k(this.reasonField,"keyup",l.hitch(this,function(a){this.okButton.set("disabled",!this._shouldShowSubmit())}))):(this.okButton.set("disabled",!this._shouldShowSubmit()),f(".requiredNote",this.containerNode).forEach(l.hitch(this,function(a){g.add(a,
"hidden")})),f(".required-sign",this.containerNode).forEach(l.hitch(this,function(a){g.add(a,"hidden")})))},_getDecimalPlaces:function(){return this._hasUnits()?rc.sys.decpnt.get(this._units):this._bacnetObject.type==v.objectTypes.OBJID_LOOP?rc.sys.decpnt.get(I.analogUnits.PERCENT):null},_makeWriteRequest:function(a){var b=this._getBACnetSystemValidateRequestData(a,this._approvalToken);return this._validateApprovalSession(b,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(l.hitch(this,function(b){b&&
b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=b.approvalToken);a.s.approvalToken=this._approvalToken;return rc.xhr.request(a)}),function(){})},_onClickAutoManual:function(){var a=this.autoManualSelector.value+1;a>1+this._supportsTimedOverride&&(a=0);this.autoManualSelector.set("value",a)},_onClickMultiState:function(){this._rangeIndex++;this._isBinaryObject(this._bacnetObject.type)&&this._rangeIndex>=this._stateText.length&&(this._rangeIndex=0);this._isMultistateObject(this._bacnetObject.type)&&
this._rangeIndex>=this._stateText.length+1&&(this._rangeIndex=1);this.digitalValueInput.set("value",this._rangeIndex)},_onClickRelinquish:function(){null===this._relinquishDialog&&(this._relinquishDialog=new T({isReadOnly:!1===rc.session.hasRole(this._pointRoleMap[this._bacnetObject.comType]),mnemonic:this.mnemonic,site:this.site,reasonRequired:this.reasonRequired}));this._relinquishDialog.set({mnemonic:this.mnemonic,system:this.system,device:this._device,type:this._type,instance:this._instance});
this._relinquishDialog.set("displayName",this._objectName+" ("+this.mnemonic+")");this._relinquishDialog.show()},_onSubmit:function(){this._approvalToken=null;null===this._writeDeferred&&(this.okButton.set("disabled",!0),this._writeDeferred=this._writeValue(),this._writeDeferred.then(l.hitch(this,this._writeSuccess),l.hitch(this,this._writeFailed)))},_parseDescriptorAndPropertyRead:function(a){var b=new h,c=!1,f=[];a=a.o;for(var d=null,g=0;g<a.length;++g)for(var d=a[g].pl,k=0;k<d.length;++k)if(d[k].v instanceof
E)c=!0,f.push({message:d[k].v.toStringMsg()});else switch(d[k].p.v){case v.propertyTypes.PROPID_OBJECT_NAME:this._setPointName(d[k].v.getString());break;default:this._objectType=d[k].v.v.t,this._rangeIndex=this._value=d[k].v.v,this._inputField=this._objectType===v.primitiveTypes.CHARACTER_STRING?this.textValueInput:this.numericValueInput}c?b.reject(f):b.resolve();return b.promise},_parseFetch:function(a){this._stateText=[];this._supportsPriorityArray=this._supportsTimedOverride=this._supportsAutoManual=
!1;this._timedOverrideMinutes=0;this._priority8=this._statusFlags=null;a=a.o;var b=null;this.autoManualSelector.set("value",0);for(var c=0;c<a.length;++c)for(var b=a[c].pl,f=0;f<b.length;++f)if(!1===b[f].v instanceof E)switch(b[f].p.v){case v.propertyTypes.PROPID_INACTIVE_TEXT:this._inputField=this.digitalValueInput;this._stateText[0]={id:0,name:b[f].v.getString()};break;case v.propertyTypes.PROPID_ACTIVE_TEXT:this._inputField=this.digitalValueInput;this._stateText[1]={id:1,name:b[f].v.getString()};
break;case v.propertyTypes.PROPID_STATE_TEXT:this._inputField=this.digitalValueInput;this._stateText=[];for(var d=0;d<b[f].v.l.length;++d)this._stateText.push({id:d+1,name:b[f].v.l[d].getString()});break;case v.propertyTypes.PROPID_PRIORITY_ARRAY:this._supportsPriorityArray=!0;b[f].v.v.t!==v.primitiveTypes.NULL&&(this._priority8=b[f].v.v.v);break;case v.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES:this._supportsTimedOverride=!0;this._timedOverrideMinutes=b[f].v.v;break;case v.propertyTypes.PROPID_STATUS_FLAGS:this._statusFlags=
b[f].v;this._supportsAutoManual=!0;break;case v.propertyTypes.PROPID_UNITS:this._units=G.toRcUnit(b[f].v.v,this.isSSC)}this._digitalInputStore.setData(this._stateText);this.digitalValueInput.set("store",this._digitalInputStore)},_setDataAttr:function(a){this._cancelFetchDfd();this.defer(l.hitch(this,function(){g.remove(this.loadingAnimation,"hidden")}),500);this._hideInputs();this._fetchingDataDfd=new h;this.name=a.name;this.mnemonic=a.mnemonic;this.property=a.property;this.arrayIndex=a.arrayIndex;
if(a=/^(\d+)(.+?)(\d+)$/.exec(a.mnemonic))this._device=Number(a[1]),this._type=v.mnemonicToType[a[2].toLowerCase()],this._instance=Number(a[3]),this._bacnetObject=new L(this._device,this._type,this._instance),this.isSSC=O.isSSC({device:this._device});this._getDescriptorAndProperty().then(l.hitch(this,this._fetchOtherProperties)).then(l.hitch(this,function(){null!==this._fetchingDataDfd&&(this._showInputs(),this._fetchingDataDfd.resolve(!1))})).otherwise(l.hitch(this,this._displayInitialFetchErrors));
this._fetchingDataDfd.then(l.hitch(this,this._fadeLoading),l.hitch(this,this._fadeLoading,!0))},_setPointName:function(a){this._objectName=a;a=a+" ("+this.mnemonic;this.property!==v.propertyTypes.PROPID_PRESENT_VALUE&&(a+=":"+this.property);c.set(this.pointName,"innerHTML",a+")")},_shouldShowSubmit:function(){var a=this._inputField!==this.numericValueInput||this.numericValueInput.isValid(),b=0>=this._timedOverrideMinutes||this._timedOverrideTB.isValid(),c=this.reasonRequired?this.reasonField.isValid():
!0,f=!0;this._statusFlags&&this._bacnetObject&&this._statusFlags.getBit(2)&&this.property===v.propertyTypes.PROPID_PRESENT_VALUE&&(this._bacnetObject.type==v.objectTypes.OBJID_ANALOG_VALUE||this._bacnetObject.type==v.objectTypes.OBJID_BINARY_VALUE||this._bacnetObject.type==v.objectTypes.OBJID_MULTI_STATE_VALUE)&&(f=!1);return a&&b&&c&&f},_showInputs:function(){switch(this._value.t){case v.primitiveTypes.CHARACTER_STRING:case v.primitiveTypes.BIT_STRING:this._inputField=this.textValueInput;this._inputField.set("value",
this._bacnetPropertyObject.stringValue);break;default:var a;a=this._getDecimalPlaces();a=0<=Number(a)?K.formatFloat(this._value.v,a,0):this._value.valueOf();this._inputField.set("value",a)}g.remove(this._inputField.domNode,"hidden");c.set(this.valueLabel,"for",this._inputField.id);if(this.property===v.propertyTypes.PROPID_PRESENT_VALUE){if(this._supportsPriorityArray||this._supportsAutoManual)a=null!==this._priority8||1===this._statusFlags.getBit(3)?this._autoManualStates.manual:this._autoManualStates.auto,
g.remove(this.relinquishAndAutoManualContainer,"hidden"),g.remove(this.valueInputContainer,"no-buttons"),this._supportsPriorityArray&&d.set(this.relinquishButtonContainer,"visibility","visible"),this.autoManualSelector.set("value",a);this._supportsTimedOverride?(this._autoManualStore.put({id:this._autoManualStates.timed,name:this.rcStrings.timed}),0<this._timedOverrideMinutes?(this._timedOverrideTB.set("value",this._timedOverrideMinutes),this.autoManualSelector.set("value",this._autoManualStates.timed)):
this._timedOverrideTB.set("value",0)):this._autoManualStore.remove(this._autoManualStates.timed)}this.okButton.set("disabled",!this._shouldShowSubmit());this._toggleReadOnly()},_toggleReadOnly:function(){var a=!1===rc.session.hasRole(this._pointRoleMap[this._bacnetObject.comType]),b=this._statusFlags&&this._statusFlags.getBit(2),c=this.property===v.propertyTypes.PROPID_PRESENT_VALUE&&(this._bacnetObject.type==v.objectTypes.OBJID_ANALOG_VALUE||this._bacnetObject.type==v.objectTypes.OBJID_BINARY_VALUE||
this._bacnetObject.type==v.objectTypes.OBJID_MULTI_STATE_VALUE);this._inputField.set("disabled",!!(a||c&&b));this.autoManualSelector.set("disabled",!(!a&&!b&&!1!==rc.session.hasRole(rc.session.roles.autoManual)));this._timedOverrideTB.set("disabled",a);g.toggle(this.okButton.domNode,"hidden",a);d.set(this.reasonField.domNode,"visibility",a?"hidden":"");d.set(this.reasonLabel,"visibility",a?"hidden":"")},_toggleTimedField:function(a){a===this._autoManualStates.timed?(g.remove(this.reasonField.domNode,
"timed-hidden"),g.remove(this.timedContainer,"hidden")):(g.add(this.reasonField.domNode,"timed-hidden"),g.add(this.timedContainer,"hidden"))},_getAutoManualStateForAuditEntry:function(){return this._autoManualState},_getBACnetPropertyForAuditEntry:function(){return this.property},_getMnemonicForAuditEntry:function(){return this.mnemonic},_getPointTypeForAuditEntry:function(){var a;this._bacnetObject.isAnalog()?a="analog ":this._bacnetObject.isBinary()?a="binary ":this._bacnetObject.isMultistate()&&
(a="multistate ");return a+=["output","input","value"][this.pointName.comType-1]},_getPropertyValueForAuditEntry:function(){return this._inputField.get("value")},_getReasonForAuditEntry:function(){return this.reasonField.get("value")},_getStringValueForAuditEntry:function(){var a="";0<this._stateText.length?(a=this._digitalInputStore.get(this._inputField.get("value")).name,a=this._unlocalizeStateValue(a)):a=this._inputField.get("value");return a},_getSystemForAuditEntry:function(){return this.system},
_writeComplete:function(){this.okButton.set("disabled",!1);this._writeDeferred=null},_writeFailed:function(a){this._writeComplete();a instanceof Error&&y.publish("sticky",{type:"error",message:a.message})},_writeSuccess:function(){this._writeComplete();this._writeAuditEntry();y.publish("alert",{message:this._getSaveSuccessMessage(),type:"success"});this.onExecute();this.execute(this.get("value"))},_writeValue:function(){var a=new h;this.own(a);var b=this._getPropertiesToWrite();0<b[0].pl.length?(b=
new J({device:this._device},b),this._makeWriteRequest({type:"bacnetSystem",s:b,systemId:this.system,preventCache:this.preventCache,load:l.hitch(this,a.resolve),error:l.hitch(this,function(b){a.reject(b)})})):a.resolve();return a},destroy:function(){this._cancelFetchDfd();this.inherited(arguments)}})})},"webview/bacnet/property":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred rc/_base/Error rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/Array rc/bacnet/io/Date rc/bacnet/io/DeviceObjectPropertyReference rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/Time rc/bacnet/io/util rc/bacnet/property".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){return r("webview/bacnet/property",[f],{systemId:-1,_fetch:function(f,r){var u=null,x=new m;r||(r=this.type);switch(r){case h.primitiveTypes.BINARY:case h.primitiveTypes.UNSIGNED_INTEGER:case h.primitiveTypes.SIGNED_INTEGER:case h.primitiveTypes.REAL:case h.primitiveTypes.DOUBLE:case h.primitiveTypes.ENUMERATED:u=new a(0,r);break;case h.primitiveTypes.DATE:u=new d(0,0,0,0);break;case h.primitiveTypes.TIME:u=new k(0,0,0,0);break;case h.primitiveTypes.OCTET_STRING:case h.primitiveTypes.CHARACTER_STRING:case h.primitiveTypes.BIT_STRING:u=
new g([],r);break;case h.primitiveTypes.ANY_PRIMITIVE:u=new c;break;case h.primitiveTypes.BACNET_OBJECT_IDENTIFIER:u=new b(0,0);break;case h.primitiveTypes.NULL:case h.primitiveTypes.COMPLEX:this.property===h.propertyTypes.PROPID_OBJECT_PROPERTY_REFERENCE&&(u=new n(new b(h.objectTypes.OBJID_DEVICE,this.device)))}null===u&&x.resolve(null);u=[{o:new b(this.hostObject.type,this.hostObject.instance),pl:[{p:new a(this.property,h.primitiveTypes.ENUMERATED),i:q.isPropertyAnArray(this.property)?new a(this.arrayIndex,
h.primitiveTypes.UNSIGNED_INTEGER):-1,v:u}]}];u=new t({device:this.device,index:f},u);rc.xhr.request({type:"bacnetSystem",s:u,systemId:this.systemId,handle:p.hitch(this,function(a){a instanceof l?x.resolve(a):p.isObject(a)&&a.isInstanceOf(t)&&this._onFetch(a.o[0].pl[0].v);x.resolve(this.propertyObject)}),silentError:!0});return x.promise}})})},"webview/widget/_PointEditAuditLoggerMixin":function(){define(["dojo/_base/declare","dojo/i18n!rc/nls/units","rc/bacnet/enums","../xhrEnhanced"],function(r,
p,m,l){return r("webview/widget/_PointEditAuditLoggerMixin",[],{unitStrings:p,_getAutoManualStateForAuditEntry:function(){throw"_getAutoManualStateForAuditEntry must be implemented";},_getBACnetPropertyForAuditEntry:function(){throw"_getBACnetPropertyForAuditEntry must be implemented";},_getMnemonicForAuditEntry:function(){throw"_getMnemonicForAuditEntry must be implemented";},_getPointTypeForAuditEntry:function(){throw"_getPointTypeForAuditEntry must be implemented";},_getPropertyValueForAuditEntry:function(){throw"_getPropertyValueForAuditEntry must be implemented";
},_getReasonForAuditEntry:function(){throw"_getReasonForAuditEntry must be implemented";},_getStringValueForAuditEntry:function(){throw"_getStringValueForAuditEntry must be implemented";},_getSystemForAuditEntry:function(){throw"_getSystemForAuditEntry must be implemented";},_writeAuditEntry:function(){var h={mnemonic:this._getMnemonicForAuditEntry(),reason:this._getReasonForAuditEntry(),systemId:this._getSystemForAuditEntry()},c=this._getBACnetPropertyForAuditEntry();null!=c&&c!==m.propertyTypes.PROPID_PRESENT_VALUE?
(h.value=this._getPropertyValueForAuditEntry(),h.property=c,l.put("BACnetPropertyAuditEntry/",{handleAs:"json",data:{auditEntry:JSON.stringify(h)}})):(h.autoManual=this._getAutoManualStateForAuditEntry(),h.pointType=this._getPointTypeForAuditEntry(),h.value=this._getStringValueForAuditEntry(),l.put("PointChangedAuditEntry/",{handleAs:"json",data:{auditEntry:JSON.stringify(h)}}))},_unlocalizeStateValue:function(h){var c=Object.entries(this.unitStrings.__proto__).find(function(c){return c[1]===h}),
g;c&&2===c.length&&(g=this.unitStrings[c[0]+"Unlocalized"]);return void 0===g?h:g}})})},"webview/widget/DialogRelinquish":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!rc/nls/grp dojo/string dojo/topic rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/service/WritePropertyMultiple ../reliable/_group/DialogRelinquish".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w){return r("webview/widget/DialogRelinquish",[w],{device:-1,instance:-1,mnemonic:null,site:null,type:-1,_approvalToken:null,_fetch:function(){var c=new m;this.own(c);this._setDevice();var d=[{o:this._getObjectProperty(),pl:[{p:new k(a.propertyTypes.PROPID_PRIORITY_ARRAY,a.primitiveTypes.ENUMERATED),i:-1,v:new t(new b(0,a.primitiveTypes.UNSIGNED_INTEGER))}]}],d=new f({device:this._device},d,!0);rc.xhr.requestNow({gid:"PriorityArrayRequest",type:"bacnetSystem",
s:d,systemId:this.system}).then(p.hitch(this,function(a){this._decode(a);c.resolve(a)}),p.hitch(this,function(a){console.error(this.declaredClass+" - _fetch(): Error fetching priority array",a);c.reject(a)}));return c.promise},_getObjectProperty:function(){return new q(this.type,this.instance)},_makeWriteRequest:function(a){var b=this._getBACnetSystemValidateRequestData(a,this._approvalToken);return this.reasonRequired?this._validateApprovalSessionWithReason(b,!1,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(p.hitch(this,
function(b,c){this.reasonEntered=b;c&&0<c.length&&(this._approvalToken=c);return rc.xhr.requestNow(a)})):this._validateApprovalSession(b,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(p.hitch(this,function(b){this.reasonEntered=null;b&&b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=approvalToken);return rc.xhr.requestNow(a)}))},_onClickRelinquish:function(){if(!1===this.isReadOnly){for(var b=Object.keys(this._grid.selection),c=[],f=[],d=b.length-1;0<=d;--d){var g=this._gridStore.get(b[d]);
c.push(g.pname);f.push({p:new k(a.propertyTypes.PROPID_PRESENT_VALUE,a.primitiveTypes.ENUMERATED),i:-1,v:new k(0,a.primitiveTypes.NULL),pr:new k(g.pnumber,a.primitiveTypes.UNSIGNED_INTEGER)})}b=[{o:this._getObjectProperty(),pl:f}];b=new u({device:this._device},b);this._makeWriteRequest({gid:"RelinquishRequest",type:"bacnetSystem",s:b,systemId:this.system}).then(p.hitch(this,this._relinquishComplete,c),p.hitch(this,function(a){console.error(this.declaredClass+" - _onClickRelinquish(): Error relinquishing priorities",
a)}))}},_relinquishComplete:function(a){n.publish("audit",{systemId:this.system,mnemonic:this.mnemonic,action:c.relinquished,details:d.substitute(g.prioritiesRelinquished,[a.join(", ")]),reason:this._getChangeReason()});this._fetch();this._grid.clearSelection()},_setDisplayNameAttr:function(a){l.set(this._objName,"innerHTML",a);this._fetch()},_setDevice:function(){this._device=this.device},_setGroupElementAttr:function(){throw"Not supported";},_setIsReadOnlyAttr:function(a){this.inherited(arguments);
this.isReadOnly=a;h.set(this._relinquishB.domNode,"visibility",a?"hidden":"")}})})},"webview/reliable/_group/DialogRelinquish":function(){define("dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!webview/nls/all dojo/text!./templates/DialogRelinquish.html rc/reliable/_group/DialogRelinquish ../../changeApproval/_ApprovalSessionMixin".split(" "),function(r,p,m,l,h,c,g,d){return p("webview/reliable/_group/DialogRelinquish",[g,d],{templateString:c,title:h.priorities,
reasonEntered:null,reasonRequired:!1,_approvalToken:null,_createSelectorCheckbox:function(c,a,b){c=new r({checked:c,onChange:m.hitch(this,function(a,b){b?this._grid.select(a):this._grid.deselect(a)},b.pnumber),value:!0});l.place(c.domNode,a,"only");return c.domNode},_getChangeReason:function(){return this.reasonEntered},_onClickRelinquish:function(){this._approvalToken=null;return this.inherited(arguments)},_relinquishError:function(c){c!==this.changeApprovalCancelledError&&this.inherited(arguments)},
_makeWriteRequest:function(c){var a=this._getBACnetValidateRequestData(c,this._approvalToken);return this.reasonRequired?this._validateApprovalSessionWithReason(a,!1,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(m.hitch(this,function(a){this.reasonEntered=a?a.reason:null;a&&a.approvalToken&&0<a.approvalToken.length&&(this._approvalToken=a.approvalToken);c.s.approvalToken=this._approvalToken;return rc.xhr.requestNow(c)})):this._validateApprovalSession(a,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(m.hitch(this,
function(a){this.reasonEntered=null;a&&a.approvalToken&&0<a.approvalToken.length&&(this._approvalToken=approvalToken);c.s.approvalToken=this._approvalToken;return rc.xhr.requestNow(c)}))}})})},"webview/bacnet/_widget/TimedInput":function(){define(["dijit/form/ValidationTextBox","dojo/_base/declare"],function(r,p){return p("webview/bacnet/_widget/TimedInput",r,{defaultValue:30,trim:!0,useSeconds:!1,useDefault:!0,buildRendering:function(){this.useSeconds?this.set("pattern","^(?:[0-9]{2}:){2}[0-9]{2}$"):
this.set("pattern","^[0-9]{2}:[0-9]{2}$");this.inherited(arguments)},_getMinutesString:function(m){var l=Math.floor(m/60);m%=60;var h="";10>l&&(h="0");h+=l+":";10>m&&(h+="0");return h+m},_getSecondsString:function(m){var l=Math.floor(m/3600),h=Math.floor(m/60);m%=60;var c="";10>l&&(c="0");c+=l+":";10>h&&(c+="0");c+=h+":";10>m&&(c+="0");return c+m},_getValueAttr:function(){var m=this.inherited(arguments),m=m.split(":"),l=0,h=0,c=0;switch(m.length){case 1:this.useSeconds?c=Number(m[0]):h=Number(m[0]);
break;case 2:this.useSeconds?(h=Number(m[0]),c=Number(m[1])):(l=Number(m[0]),h=Number(m[1]));break;case 3:if(this.useSeconds){l=Number(m[0]);h=Number(m[1]);c=Number(m[2]);break}default:throw"Invalid input";}return m=this.useSeconds?3600*l+60*h+c:60*l+h},_setValueAttr:function(m){if(isNaN(m))throw"Value must be a number";0>=m&&this.useDefault&&(m=this.defaultValue);m=this.useSeconds?this._getSecondsString(m):this._getMinutesString(m);this.inherited(arguments,[m])}})})},"webview/admin/programs/ProgramToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/programs dojo/i18n!../../nls/worksheets dojo/on dojo/text!./templates/ProgramToolbar.html ./widget/FilesMenu ../_Widget ../../widget/ToolbarButton".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return r("webview/admin/programs/ProgramToolbar",[t],{_isAutoCompleteEnabled:!0,isShowingWatch:!1,programStrings:g,rcStrings:h,templateString:a,webviewStrings:c,worksheetStrings:d,_buttons:null,_filesMenu:null,_hideIconClass:"svg-value-dis",_isShowingValues:!1,_showIconClass:"svg-value-en",postCreate:function(){this.inherited(arguments);this._setupOnClicks();this._buildButtonMap();this.toggleMnemonicsButton.set("state","mnemonic")},clearDirty:function(){m.remove(this.sendButton.toolbarButtonIcon,
"dirty")},getButton:function(a){return this._buttons[a]},getPageButtons:function(){return this._buttons},makeDirty:function(){m.add(this.sendButton.toolbarButtonIcon,"dirty")},onToggleAutoComplete:function(a){n.emit(this,"toggleAutoComplete",a)},onToggleValues:function(a){n.emit(this,"toggleValues",a);this._isShowingValues=!this._isShowingValues},onToggleTrace:function(a){n.emit(this,"toggleTrace",a);this.isShowingWatch=!this.isShowingWatch},resetToggleValues:function(){this._isShowingValues=!1;this._displayValuesButton()},
setTitle:function(a){},toggleFetchers:function(a){this.toggleMnemonicsButton.set("disabled",a);this.toggleValuesButton.set("disabled",a)},_buildButtonMap:function(){this._buttons={sendButton:this.sendButton,cancelButton:this.cancelButton,sendMultipleButton:this.sendMultipleButton,toggleMnemonicsButton:this.toggleMnemonicsButton,toggleTraceButton:this.toggleTraceButton,toggleValuesButton:this.toggleValuesButton,replaceButton:this.replaceButton,renumberButton:this.renumberButton,clearTraceButton:this.clearTraceButton,
optionsButton:this.optionsButton}},_displayValuesButton:function(){this.toggleValuesButton.set("titleStr",this.programStrings.displayValues);m.replace(this.toggleValuesButton.toolbarButtonIcon,this._showIconClass,this._hideIconClass)},_getAutoCompleteAttr:function(){return this._isAutoCompleteEnabled},_getShowingValuesAttr:function(){return this._isShowingValues},_hideValuesButton:function(){this.toggleValuesButton.set("titleStr",this.programStrings.hideValues);m.replace(this.toggleValuesButton.toolbarButtonIcon,
this._hideIconClass,this._showIconClass)},_setAutoCompleteAttr:function(a){(this._isAutoCompleteEnabled=a)?(a=this.programStrings.disableAutoComplete,m.add(this.autoCompleteButton.toolbarButtonIcon,"enabled")):(a=this.programStrings.enableAutoComplete,m.remove(this.autoCompleteButton.toolbarButtonIcon,"enabled"));this.autoCompleteButton.set("titleStr",a)},_setShowValuesAttr:function(a){this._isShowingValues!==a&&this._onToggleValues()},_setupFilesMenuListeners:function(){this.own(n(this._filesMenu,
"save",p.hitch(this,function(){n.emit(this,"saveFile");this._filesMenu.hide()})),n(this._filesMenu,"open",p.hitch(this,function(){n.emit(this,"openFile");this._filesMenu.hide()})))},_setupOnClicks:function(){this.own(n(this.sendButton.domNode,"click",p.hitch(this,function(){this.sendButton.get("disabled")||n.emit(this,"send")})),n(this.cancelButton.domNode,"click",p.hitch(this,function(){this.cancelButton.get("disabled")||n.emit(this,"cancel")})),n(this.sendMultipleButton.domNode,"click",p.hitch(this,
function(){this.sendMultipleButton.get("disabled")||n.emit(this,"sendMultiple")})),n(this.filesMenu.domNode,"click",p.hitch(this,this._onFilesMenu)),n(this.toggleTraceButton.domNode,"click",p.hitch(this,function(){this.toggleTraceButton.get("disabled")||this._onToggleTrace()})),n(this.toggleMnemonicsButton.domNode,"click",p.hitch(this,function(){this.toggleMnemonicsButton.get("disabled")||this._onToggleMnemonic()})),n(this.toggleValuesButton.domNode,"click",p.hitch(this,function(){this.toggleValuesButton.get("disabled")||
this._onToggleValues()})),n(this.replaceButton.domNode,"click",p.hitch(this,function(){this.replaceButton.get("disabled")||n.emit(this,"replace")})),n(this.renumberButton.domNode,"click",p.hitch(this,function(){this.renumberButton.get("disabled")||n.emit(this,"renumber")})),n(this.clearTraceButton.domNode,"click",p.hitch(this,function(){this.clearTraceButton.get("disabled")||n.emit(this,"clearTrace")})),n(this.optionsButton.domNode,"click",p.hitch(this,function(){this.optionsButton.get("disabled")||
n.emit(this,"showOptions")})),n(this.autoCompleteButton.domNode,"click",p.hitch(this,this._onToggleAutoComplete)))},_onFilesMenu:function(){null===this._filesMenu?(this._filesMenu=new b,l.place(this._filesMenu.domNode,this.filesMenu.domNode),this._setupFilesMenuListeners()):this._filesMenu.show()},_onToggleAutoComplete:function(){this.set("autoComplete",!this._isAutoCompleteEnabled);this.onToggleAutoComplete(this._isAutoCompleteEnabled)},_onToggleMnemonic:function(){"mnemonic"===this.toggleMnemonicsButton.get("state")?
(this.toggleMnemonicsButton.set("titleStr",this.webviewStrings.name),this.toggleMnemonicsButton.set("state","name")):(this.toggleMnemonicsButton.set("titleStr",this.rcStrings.mnemonic),this.toggleMnemonicsButton.set("state","mnemonic"));n.emit(this,"toggleMnemonics")},_onToggleTrace:function(){this.toggleTraceButton.get("disabled")||(this.toggleTraceButton.set("titleStr",this.isShowingWatch?this.programStrings.watch:this.programStrings.trace),this.onToggleTrace(this.isShowingWatch))},_onToggleValues:function(){this._isShowingValues?
this._displayValuesButton():this._hideValuesButton();this.onToggleValues(this._isShowingValues)}})})},"webview/admin/programs/widget/FilesMenu":function(){define("dijit/DropDownMenu dijit/MenuItem dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/programs dojo/keys dojo/on".split(" "),function(r,p,m,l,h,c,g,d,n){return m("webview/admin/programs/widget/FilesMenu",[r],{baseClass:"file-menu",programStrings:g,webviewStrings:c,_buttons:{},_clickListener:null,
_openSaveDropDown:null,postCreate:function(){this.inherited(arguments);this._buildButtons();this._setupListeners()},hide:function(){h.add(this.domNode,"hidden");null!==this._clickListener&&this._clickListener.remove()},onOpen:function(){},onSave:function(){},show:function(){h.remove(this.domNode,"hidden");this._clickListener=n(window,"click",l.hitch(this,function(a){a.target.classList&&a.target.classList.contains("svg-folder")||this.hide()}))},_buildButtons:function(){this._buttons.openButton=new p({label:this.programStrings.open,
baseClass:"menu-item",iconClass:""});this._buttons.saveButton=new p({label:this.webviewStrings.save,baseClass:"menu-item",iconClass:""});this.addChild(this._buttons.openButton);this.addChild(this._buttons.saveButton)},_setupListeners:function(){this.own(n(this._buttons.saveButton.domNode,"click",l.hitch(this,function(){this.onSave()})),n(this._buttons.openButton.domNode,"click",l.hitch(this,function(){this.onOpen()})),n(window,"keydown",l.hitch(this,function(a){a.keyCode===d.ESCAPE&&this.hide()})));
this._clickListener=n(window,"click",l.hitch(this,function(a){a.target.classList&&a.target.classList.contains("svg-folder")||this.hide()}))},destroy:function(){null!==this._clickListener&&this._clickListener.remove();this.inherited(arguments)}})})},"webview/admin/worksheets/programs/ProgramsWorksheet":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/Textarea dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!../../../nls/all dojo/i18n!../../../nls/worksheets dojo/json dojo/number dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/string dojo/text!./templates/ProgramsWorksheet.html dojo/topic ../../AdminWorksheetBase ../../../sys/job ../../../util/AlarmUtil ../../../widget/ColumnHider ../../../widget/dGridExtensions/ColumnReorder ./ProgramsWorksheetToolbar ../../widget/AdminToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O){return t("webview/admin/worksheets/programs/ProgramsWorksheet",[I],{dataTypeName:y.programs,identityProperty:"instance",MAX_NAME_LENGTH:32,templateString:J,TimerEnums:{enabled:"true",disabled:"false","true":"enabled","false":"disabled"},widgetName:y.programs,widgetNameKey:"programs",worksheetStrings:v,_autoManualStore:null,_columnStructure:null,_firstLoad:!0,_pollForStatusTimer:null,_programBaseURL:"",_timerStore:null,
_isThirdParty:0,postCreate:function(){this.inherited(arguments);if(rc.session._attributes.permittedSystems.find(k.hitch(this,function(a){return a.id===Number(this.system)})))k.mixin(this.ErrorMessageMap,{509:this.errorStrings.cannotCreateProgram,512:this.errorStrings.cannotDeleteProgram,520:this.errorStrings.cannotCreateProgram+". "+H.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH.toString()])+"."}),this._setCanEditFlag(),this._getTitle(),K.loadForAdmin(this.system).then(k.hitch(this,
function(a){this._setAlarmContext();this._isPyramid=K.isPyramid(this.device+"DEV"+this.device);this._isThirdParty=K.isThirdParty(this.device+"DEV"+this.device);this._buildColumnStructure();this._toolbar.sendButton.set("disabled",!0);this._setProgramBaseURL();K.isSSC(this.device+"DEV"+this.device)&&w.add(this.dbRemaining,"hidden");this._fetch().then(k.hitch(this,this._parseFetch),k.hitch(this,this._onInitError));this._intervalTime=500}));else{if(0<rc.session._attributes.SiteMapArray.length)var a=rc.session._attributes.SiteMapArray[0].systems.find(k.hitch(this,
function(a){return a.systemId===Number(this.system)}));this._throwFullscreenError({name:this.rcStrings.permissionDenied,message:H.substitute(this.errorStrings.systemAccessError,[a?a.systemName:this.system]),suggestion:"",e:null})}rc.session.hasRole(rc.session.roles2.programsWorksheet,!0)||w.add(this._toolbar.addButton.domNode,"disabled")},getPathForFetch:function(){return"ProgramsWorksheet/"},headerIconClass:function(){return"rcProgramsWorksheetHeaderIcon"},resize:function(){this.inherited(arguments);
if(this._adminTopContent){var a=this._adminTopContent.clientWidth,a=a-this._contentHeaderIcon.clientWidth;x.set(this._contentHeaderTitle,"width",a-50+"px")}},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_addToolbarListeners:function(){this.own(E(this._toolbar,"add",k.hitch(this,this._addDialog,this.worksheetStrings.createProgram,this.MAX_NAME_LENGTH)),E(this._toolbar,"cancel",k.hitch(this,this._revertChanges)),E(this._toolbar,"delete",k.hitch(this,this._removeProgram)),E(this._toolbar,
"edit",k.hitch(this,this._editProgram)),E(this._toolbar,"export",k.hitch(this,this._export)),E(this._toolbar,"send",k.hitch(this,this._sendChanges)),E(this._toolbar,"toggleColumns",k.hitch(this,this._positionAndShowColumnToggle)))},_buildAuditLogContextFilter:function(a){var b=[this.device+"PRG%"];a.forEach(k.hitch(this,function(a){a.mne&&(a=a.mne.split("PRG"),0<a.length&&a[0]!==this.device&&b.push(this.device+"PRG"+a[1]))}));this._buildAuditLogContext(b)},_buildColumnStructure:function(){this._columnStructure=
[h({selectorType:k.hitch(this,this._createSelectorCheckbox),id:"selectorCol",field:"mne",label:"",hidden:!rc.session.hasRole(rc.session.roles2.programsWorksheet,!0),unhidable:!0,sortable:!1,exporter:function(){return""}}),{id:"instanceCol",field:"instance",label:this.worksheetStrings.instance,sortable:!0,renderCell:k.hitch(this,this._buildProgramLinkCell)},p({editor:n,editOn:"click",label:this.webviewStrings.name,field:"name",id:"nameCol",className:"colourlessLink",sortable:!0,canEdit:k.hitch(this,
this._canEditRow),editorArgs:{baseClass:"rcTextBox",maxLength:this._isThirdParty?64:32},formatter:k.hitch(this,this._hideCellDataForEditor)}),p({editor:c,id:"runCol",field:"run",label:this.worksheetStrings.run,className:this._canEnableDisable?"colourlesslink":"",canEdit:k.hitch(this,this._checkCanEnableDisable),simplePrint:!0,editorArgs:{disabled:!1===this._canEnableDisable||1===this._isThirdParty,value:!0},formatter:k.hitch(this,this._hideCellDataForEditor)}),p({editor:g,editOn:"click",id:"autoManualCol",
field:"autoManual",label:this.rcStrings.autoManual,className:this._canEdit?"colourlessLink":"",sortable:!0,editorArgs:{store:this._autoManualStore,baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!1,queryExpr:"*${0}*"},canEdit:k.hitch(this,this._canEditRow),formatter:k.hitch(this,this.formatAutoManualCell),exporter:k.hitch(this,this.formatAutoManualCell)}),this._isPyramid?p({editor:g,editOn:"click",id:"timerCol",field:"timer",label:this.worksheetStrings.timer,className:this._canEdit?"colourlessLink":
"",editorArgs:{store:this._timerStore,baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!1},canEdit:k.hitch(this,this._canEditRow),formatter:k.hitch(this,this.formatTimerCell)}):null,this._isPyramid?p({editor:n,editOn:"click",id:"timeCol",field:"time",label:this.worksheetStrings.timeInterval,sortable:!0,className:this._canEdit?"colourlessLink":"",canEdit:k.hitch(this,this._canEditRow),editorArgs:{baseClass:"rcTextBox",maxLength:7,pattern:"^(?:\\d+:)*?\\d+$"}}):null,this._isPyramid?p({editor:n,
editOn:"click",id:"timeRemainingCol",field:"timeRemaining",label:this.worksheetStrings.timeRemaining,sortable:!0,className:this._canEdit?"colourlessLink":"",canEdit:k.hitch(this,this._canEditRow),editorArgs:{baseClass:"rcTextBox",maxLength:7,pattern:"^(?:\\d+:)*?\\d+$"}}):null,this._isThirdParty?null:{id:"sizeCol",field:"size",label:this.worksheetStrings.size,sortable:!0,formatter:k.hitch(this,this._hideCellDataForEditor)},{id:"exitCol",field:"exit",label:this.worksheetStrings.exit,sortable:!0,formatter:k.hitch(this,
this.formatBooleanCell)},p({editor:d,editOn:"none",id:"descriptionCol",field:"description",label:this.rcStrings.description,sortable:!0,renderCell:k.hitch(this,this._buildDescriptionCell)})].filter(function(a){return null!==a})},_buildGrid:function(){null===this._grid&&(this._grid=new (t([r,m,M,O,l,h]))({allowSelect:k.hitch(this,this.allowSelect),columns:this._columnStructure,deselectOnRefresh:!1,keepScrollPosition:!0,maxRowsPerPage:256,maxEmptySpace:10,minRowsPerPage:128,noDataMessage:this._getLoadingString(),
selectionMode:"none",sort:[{attribute:"instance",descending:!1}],store:this._gridStore},this.gridNode),this._grid.startup(),this._connectGrid(),this._toggleButtons())},_buildProgramLinkCell:function(a,b,c){var f=z.create("div",null,c,"only");if(a.name!==this.PlaceholderName){var d=this._programBaseURL;!1===/#\d+PRG/i.test(this._programBaseURL)&&(d+="\x26mne\x3d");d=this.getObfuscatedHash(d+b);f=z.create("div",{"class":"instance-container"},c,"only");rc.session.hasRole(rc.session.roles2.accessPrograms,
!0)?z.create("a",{"class":"linkable",href:d,innerHTML:b,title:H.substitute(this.rcStrings.gotoX,[a.name])},f,"first"):z.create("a",{innerHTML:b,title:H.substitute(this.rcStrings.gotoX,[a.name])},f,"first")}return f},_canEditDescription:function(a){return this._canEdit},_checkCanEnableDisable:function(a){return this._canEnableDisable&&a.name!==this.PlaceholderName},_checkValueChange:function(a,b,c){var f=!1;switch(c){case "autoManual":f=Number(b)!==a;break;default:f=b!==a}return f},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},
_connectGrid:function(){this.inherited(arguments);this.own(E(this._grid,"dgrid-select, dgrid-deselect",k.hitch(this,this._onSelectionChange)),E(this._grid,"dgrid-datachange",k.hitch(this,function(a){this.defer(k.hitch(this,this._toggleSendButton,a))})))},_createStores:function(){this.inherited(arguments);this._autoManualStore=new F({data:[{id:this.AutoManualEnums.auto,name:this.rcStrings.auto},{id:this.AutoManualEnums.manual,name:this.rcStrings.manual}]});this._timerStore=new F({data:[{id:this.TimerEnums.enabled,
name:this.webviewStrings.enabledLabel},{id:this.TimerEnums.disabled,name:this.webviewStrings.disabledLabel}]})},_deleteProgram:function(a){var c=new q,f=this.getPathForFetch(),d={siteId:this.site,systemId:this.system,device:this.device,instances:a};this._validateApprovalSessionWithReason(d).then(k.hitch(this,function(){D.del(f,{handleAs:"json",data:d}).then(k.hitch(this,function(f){f&&200===f.errStatus?(b.forEach(a,k.hitch(this,function(a){null!==a&&this._grid.store.remove(a)})),this._displayError(f),
c.resolve(),this._revertChanges()):c.reject(f.instances)}),k.hitch(this,function(b){G.publish("sticky",{type:"error",message:this.errorStrings.unexpectedError});console.error(this.declaredClass+" - _deleteProgram(): Could not delete program(s)",a,b);c.reject()}))}),function(){});return c.promise},_editProgram:function(){var a=this._getFirstSelectedRow(),b=this._programBaseURL;!1===/#\d+PRG/i.test(this._programBaseURL)&&(b+="\x26mne\x3d");b+=a.instance;b=this.getObfuscatedHash(b);window.location.hash=
b},_export:function(){this.exportToCSV(this._grid,"programs.csv",this.widgetName)},_fetch:function(a){this._clearFetchTimeout();var b=this.getPathForFetch();return D.get(b,{handleAs:"json",query:{systemId:this.system,device:this.device,forceReload:a?a:!1},preventCache:!0})},_getConstantHeights:function(){-1===this._constantHeights&&(this._constantHeights=0,f.byId("rcAdminContentHeader")&&(this._constantHeights=x.get("rcAdminContentHeader","height"),this._constantHeights+=x.get("rcAdminContentHeader",
"paddingTop")),this._constantHeights+=x.get(this.buttonBar.domNode,"height"),this._constantHeights+=x.get(this.buttonBar.domNode,"marginTop"),this._constantHeights+=x.get(this.buttonBar.domNode,"marginBottom"),this._constantHeights+=x.get(this._grid.headerNode,"paddingBottom"),this._constantHeights+=2*x.get(this._grid.domNode,"marginTop"),this._constantHeights+=2*x.get(this._grid.domNode,"borderWidth"),this._constantHeights+=x.get(this.dbRemaining,"height"));return this._constantHeights},_getRowIdentifier:function(a){return a.instance},
_onSelectionChange:function(c){var f="dgrid-select"===c.type,d=null,g=null;b.forEach(c.rows,k.hitch(this,function(b){d=B(".dijitCheckBox",b.element)[0];g=a.byNode(d);g.set("checked",f)}));c=Object.keys(this._grid.selection).filter(k.hitch(this,function(a){return this._grid.selection[a]}));this._toolbar.set("isSelectAll",c.length!==this._grid.store.data.filter(k.hitch(this,function(a){return this._canAccessRow(a)})).length);c=0<c.filter(k.hitch(this,function(a){return this._canEditRow(this._grid.store.get(a))})).length;
this._toolbar.deleteButton.set("disabled",!c)},_setTitle:function(a){this.inherited(arguments);this._contentHeaderTitle&&u.set(this._contentHeaderTitle,{innerHTML:a})},_parseFetch:function(a){a.errStatus===this.SuccessCode?(this._buildAuditLogContextFilter(a.data),this._gridStore.setData(a.data),this._setDatabaseRemaining(a.dbBytesRemaining,a.dbPercentRemaining,a.cbasBytesRemaining,a.cbasPercentRemaining),a.initialLoad&&this._firstLoad&&(this._intervalTime=5E3,this.onInitSuccess(),this._buildGrid(),
this._resizeGrid(),this._firstLoad=!1,this._grid.set("noDataMessage",y.noResultsFound)),this._setFetchTimeout(),this._refreshGridInPlace()):(a=this.safeError(a,{message:this._getErrorMessage(a.errStatus,a.errMSG)}),this.onInitError(a))},_performAdd:function(a){var b=this._worksheetItemInUse(a);if(b.inUse)G.publish("sticky",{message:b.message,type:"error"});else{var c=this.getPathForFetch(),f={siteId:this.site,systemId:this.system,device:this.device,instance:a.specificInstance,name:a.name};this._validateApprovalSessionWithReason(f).then(k.hitch(this,
function(){D.post(c,{handleAs:"json",data:f}).then(k.hitch(this,function(a){a&&200===a.errStatus&&this._revertChanges();this._displayError(a)}),k.hitch(this,function(a){G.publish("sticky",{message:this.errorStrings.unexpectedError,type:"error"});console.error(this.declaredClass+" - _performAdd(): Error Adding Program",a)}))}),function(){})}},_performDelete:function(){var a=[],b=this._grid.selection,c;for(c in b)a.push(Number(c));this._deleteProgram(a).otherwise(k.hitch(this,function(a){for(var b=
this.errorStrings.cannotDeleteProgram,c=0;c<a.length;c++)b+="\x3cbr /\x3e"+this._grid.store.get(a[c]).name;G.publish("sticky",{message:b,type:"error"})}))},_removeProgram:function(){if(!this._canEdit)return!1;var a=[],b=this._grid.selection,c;for(c in b)b[c]&&a.push(c);this._confirmDelete(a,this.worksheetStrings.confirmDeletePrograms)},_resizeGrid:function(){this.inherited(arguments);if(null!==this._grid){var a=x.get(this.domNode.parentElement,"height"),a=a-this._getConstantHeights();x.set(this._grid.domNode,
"height",a+"px")}},_revertChanges:function(){this.inherited(arguments);this._toolbar.sendButton.set("disabled",!0)},_sendChanges:function(){var a=Object.keys(this._grid.dirty).map(k.hitch(this,function(a){return k.mixin(this._gridStore.get(a),this._grid.dirty[a])})),b=this.getPathForFetch(),c={siteId:this.site,programs:A.stringify(a),systemId:this.system,device:this.device};this._validateApprovalSessionWithReason(c).then(k.hitch(this,function(){this._grid.save();D.put(b,{handleAs:"json",data:c}).then(k.hitch(this,
function(a){510===a.errStatus?(this._processId=a.processId,this._pollForStatus(this.getPathForFetch())):(this._displayError(a),a.errStatus===this.SuccessCode&&this._revertChanges())}))}),function(){})},_pollForStatus:function(a){this._clearPollingTimer();this._pollForStatusTimer=setTimeout(k.hitch(this,function(){D.get(a+"/status",{handleAs:"json",query:{processId:this._processId||-1,abort:0},preventCache:!0}).then(k.hitch(this,function(a){510===a.errStatus?(this._processId=a.processId,this._pollForStatus(this.getPathForFetch())):
(this._displayError(a),a.errStatus===this.SuccessCode&&this._revertChanges())}))}),500)},_setAlarmContext:function(){L.setAlarmContextForBACnetDevice(this.system,this.device)},_setCanEditFlag:function(){this._canEdit=rc.session.hasRole(rc.session.roles2.programsWorksheet,!0);this._canEnableDisable=rc.session.hasRole(rc.session.roles2.enableDisablePrograms,!0)},_setDatabaseRemaining:function(a,b,c,f){null!==c?u.set(this.dbRemaining,"innerHTML",H.substitute(this.worksheetStrings.cbasdbRemaining,[C.format(a),
b,C.format(c),f])):u.set(this.dbRemaining,"innerHTML",H.substitute(this.worksheetStrings.databaseRemaining,[C.format(a),b]))},_setProgramBaseURL:function(){var a=this.getUnobfuscatedHash(window.location.hash);/#\d+prgs/i.test(a)?this._programBaseURL=a.substring(0,a.length-1):this._programBaseURL=a.replace(/#.+\?/,"#program?").replace(/&mne=.+(?:&.+)?$/i,"")},_toggleButtons:function(){var a=this.inherited(arguments),b=this._getFirstSelectedRow(),b=!this._canEdit||"undefined"===typeof b;"undefined"!==
typeof this._toolbar.deleteButton&&this._toolbar.deleteButton.set("disabled",b);"undefined"!==typeof this._toolbar.editButton&&(1!==a&&(b=!0),this._toolbar.editButton.set("disabled",b))},_toggleSendButton:function(a){var b=this._gridStore.get(a.rowId),c=a.cell.column.field;if(!0===this._checkValueChange(b[c],a.value,c))this._toolbar.sendButton.set("disabled",!1),this.makeDirty();else{var f=this._grid.dirty;if(1===Object.keys(f).length&&"undefined"!==typeof f[a.rowId]){a=f[a.rowId];var f=!1,d;for(d in a)if(d!==
c&&a[d]!==b[d]){f=!0;break}!1===f&&(this._grid.revert(),this._toolbar.sendButton.set("disabled",!0),this.makeClean())}else"undefined"!==typeof f[a.rowId]&&(delete this._grid.dirty[a.rowId][c],0===Object.keys(this._grid.dirty[a.rowId]).length&&delete this._grid.dirty[a.rowId])}},destroy:function(){this.inherited(arguments);this._adminTopContent&&z.destroy(this._adminTopContent)},_updateGrid:function(a){this._buildAuditLogContextFilter(a.data);this._gridStore.setData(a.data);this._setDatabaseRemaining(a.dbBytesRemaining,
a.dbPercentRemaining,a.cbasBytesRemaining,a.cbasPercentRemaining);a.initialLoad&&this._firstLoad&&(this._buildGrid(),this._resizeGrid(),this._grid.set("noDataMessage",y.noResultsFound))}})})},"webview/admin/AdminWorksheetBase":function(){define("dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../nls/all dojo/i18n!../nls/worksheets dojo/on dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string ./_ConfirmGridDeleteMixin ./_GridAutoRefreshMixin ./_Widget ./worksheets/widgets/DescriptionEditor ./worksheets/widgets/NewWorksheetInstance ../util/GridCellFormatter ../widget/dGridExtensions/dGridExcelExporterMixin".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y){return p("webview/admin/AdminWorksheetBase",[u,x,q,f,y],{AutoManualEnums:{auto:0,manual:1,timed:2,0:"auto",1:"manual",2:"timed"},allowSpecificInstances:!0,dataTypeName:null,identityProperty:"id",rcStrings:c,webviewStrings:g,widgetName:null,widgetNameKey:null,worksheetStrings:d,_addPopup:null,_descriptionEditorDialog:null,_canEdit:!1,_constantHeights:-1,_deleteDialog:null,_fetchTimeout:null,_firstLoad:!0,_grid:null,_gridStore:null,_intervalTime:5E3,
_resizeTimeout:null,constructor:function(){this._createStores();this._setCanEditFlag()},postCreate:function(){this.inherited(arguments);this.connectExportButton();this._createButtons();this._addToolbarListeners()},formatNumberCell:function(a,b){return this._isPlaceholderRow(b)?"":this.inherited(arguments)},makeClean:function(){this.inherited(arguments);this._toolbar.clearDirty&&this._toolbar.clearDirty()},makeDirty:function(){this.inherited(arguments);this._toolbar.makeDirty&&this._toolbar.makeDirty()},
print:function(){this.printDGrid(this._grid)},_resize:function(){this.inherited(arguments);this._resizeGrid()},_resizeGrid:function(){null!==this._grid&&this._grid.resize()},_addDialog:function(a,b){this._canEdit&&(null===this._addPopup?this._addPopup=new z({allowSpecificInstances:this.allowSpecificInstances,title:a,maxLength:b?b:"",execute:m.hitch(this,this._performAdd)}):this._addPopup.reset(),this._addPopup.show())},_addToolbarListeners:function(){throw"_addToolbarListeners(): Must be implemented in child class";
},_buildAuditLogContext:function(a){var b=[];a.forEach(m.hitch(this,function(a){b.push({systemId:this.system,objectName:a})}));a=this.widgetNameKey;var c=this._buildMnemonicString();webview.auditUtil.setContextDataWithSiteIdForWorksheets(this.site,b,a,c)},_buildDescriptionCell:function(a,b,c){var f=this._canEditRow(a),f=h.create("div",{title:k.substitute(this.rcStrings.editX,[this.rcStrings.description]),"class":"description-container"+(f?" colourlessLink":"")},c,"only");b=b||"";h.create("span",{title:b,
innerHTML:b.replace(/\n/g,"\x3cbr /\x3e"),"class":"description-text"},f,"first");this._isPlaceholderRow(a)||(h.create("span",{"class":"webviewIcon textEditIcon"},f,"last"),this.own(n(c,"click",m.hitch(this,this._showDescriptionDialog,b,a))));return f},_buildColumnStructure:function(){throw"_buildColumnStructure(): Must be implemented in child class";},_buildGrid:function(){throw"_buildGrid(): Must be implemented in child class";},_buildMnemonicString:function(){return"programsworksheet"===this.type?
"("+this.device+"PRGS)":"("+this.mnemonic+")"},_buildTitle:function(a){if(null===this.widgetName)throw"Base class must set widget name";this.set("title",a.deviceName+" - "+this.widgetName);this._setTitle(this.title)},_canAccessRow:function(a){return!this._isPlaceholderRow(a)},_canEditDescription:function(a){return this._canEditRow(a)},_canEditRow:function(a){return this._canEdit&&this._canAccessRow(a)},_createButtons:function(){this.buttonBar.addIcon(this._toolbar);this.setTooltips()},_createDescriptionDialog:function(){null===
this._descriptionEditorDialog&&(this._descriptionEditorDialog=new w({baseClass:"viewDescriptionDialog"}))},_createSelectorCheckbox:function(a,b,c){a=this._isPlaceholderRow(c);var f=new r({checked:this._isRowSelected(c),definedValue:c[this.identityProperty],disabled:a});h.place(f.domNode,b,"only");a&&l.add(f.domNode,"hidden");this.own(n(f,"change",m.hitch(this,function(a,b){b?this._grid.select(a):this._grid.deselect(a)},this._getRowIdentifier(c))));return f.domNode},_createStores:function(){this._gridStore=
new t(new b({idProperty:this.identityProperty}))},_descriptionSet:function(a,b){if(a.description!==b){var c=this._grid.store.getIdentity(a),f=this._grid.cell(c,"descriptionCol"),d={grid:this._grid,cell:f,rowId:c,value:b,bubbles:!0,cancelable:!0};this._grid.updateDirty(c,"description",b);n.emit(f.element,"dgrid-datachange",d);this._grid.refresh({keepScrollPosition:!0})}},_fetch:function(a){throw"_fetch(): Must be implemented by child class";},_fetchDeviceName:function(){return a.get("DeviceName",{handleAs:"json",
query:{systemId:this.system,deviceNumber:this.device}})},_getFirstSelectedRow:function(){for(var a in this._grid.selection)if(this._grid.selection[a])break;return this._gridStore.get(a)},_getLoadingString:function(){if(null===this.dataTypeName)throw"_getLoadingString(): Child class must specify 'dataTypeName'";return'\x3cdiv class\x3d"loadingContainer"\x3e\x3cspan class\x3d"waiting"\x3e\x3c/span\x3e\x3cspan class\x3d"loadingMessage"\x3e'+k.substitute(this.rcStrings.loadingX,[this.dataTypeName])+"\x3c/span\x3e\x3c/div\x3e"},
_getRowIdentifier:function(a){return a.mne},_getTitle:function(){this._fetchDeviceName().then(m.hitch(this,this._buildTitle))},_getTotalRowSelection:function(){var a=0,b;for(b in this._grid.selection)this._grid.selection[b]&&++a;return a},_isPlaceholderRow:function(a){if("undefined"===typeof a.name)throw'_isPlaceholderRow() requires row to contain a "name" field';return a.name===this.PlaceholderName},_isRowSelected:function(a){return this._grid&&!0===this._grid.selection[this._getRowIdentifier(a)]},
_performAdd:function(){throw"_performAdd(): Must be implemented by child class";},_performDelete:function(){throw"_performDelete(): Must be implemented by child class";},_refreshGridInPlace:function(){this._grid&&this._grid.refresh({keepScrollPosition:!0})},_reloadData:function(a){this._fetch(a).then(m.hitch(this,this._parseFetch))},_revertChanges:function(){this._grid.revert();this.makeClean();this._reloadData(!0)},_setCanEditFlag:function(){throw"_setCanEditFlag(): Must be implemented by child class";
},_showDescriptionDialog:function(a,b){this._emitDialogEditorShowEvent(b,"descriptionCol");this._createDescriptionDialog();this._descriptionEditorDialog.set({title:b.name+" ("+b.mne+"): "+this.webviewStrings.description,value:a,canEdit:this._canEditDescription(b),execute:m.hitch(this,this._descriptionSet,b),onHide:m.hitch(this,this._emitDialogEditorHideEvent,b,"descriptionCol")});this._descriptionEditorDialog.show()},_toggleButtons:function(){return this._getTotalRowSelection()},_worksheetItemInUse:function(a){var b=
function(a,b){return b.instance===a&&b.name!==this.PlaceholderName},c=!1,f=null;0<this._gridStore.query({name:a.name}).length?(f=this.worksheetStrings.nameInUse,c=!0):-1!==a.specificInstance&&0<this._gridStore.query(m.hitch(this,b,a.specificInstance)).length&&(f=this.worksheetStrings.instanceInUse,c=!0);return{inUse:c,message:f}},destroy:function(){this.inherited(arguments);null!==this._addPopup&&this._addPopup.destroyRecursive()}})})},"webview/admin/_ConfirmGridDeleteMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!../nls/all ../widget/WarningDialog ../widget/WarningDialogEnums".split(" "),
function(r,p,m,l,h,c,g){return p("webview/admin/_ConfirmGridDeleteMixin",null,{webviewStrings:h,_deleteDialog:null,_grid:null,_confirmDelete:function(d,h){null===this._grid&&console.error(this.declaredClass+" - _confirmDelete(): Mixin must be added to class with _grid property");var a=l.create("div");null===this._deleteDialog&&(this._deleteDialog=new c({title:this.webviewStrings.confirmDeleteAction,type:g.types.binary,content:a}));var b="\x3cdiv\x3e"+h+"\x3cul\x3e";r.forEach(d,m.hitch(this,function(a){b+=
"\x3cli\x3e"+this._grid.store.get(a).name+"\x3c/li\x3e"}));b+="\x3c/ul\x3e\x3c/div\x3e";a=l.toDom(b);this._deleteDialog.set("content",a);var n=this._deleteDialog.on("close",m.hitch(this,function(a){switch(a){case g.returnValues.oneOrYes:this._performDelete();break;case g.returnValues.none:break;default:console.error(this.declaredClass+" - _confirmDelete(): Unknown choice",a)}n.remove()}));this.own(n);this._deleteDialog.open()},_performDelete:function(){throw"_performDelete must be implemented";}})})},
"webview/admin/_GridAutoRefreshMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on"],function(r,p,m){return r("webview/admin/_GridAutoRefreshMixin",null,{_dirty:!1,_fetchTimeout:null,_grid:null,_intervalTime:5E3,_autoReloadEnabled:!0,makeClean:function(){this.inherited(arguments);this._autoReloadEnabled=!0},makeDirty:function(){this.inherited(arguments);this._disableAutoReload()},_canAutoRefresh:function(){return!this._dirty},_clearFetchTimeout:function(){this._fetchTimeout&&
(clearTimeout(this._fetchTimeout),this._fetchTimeout=null)},_connectGrid:function(){this.own(m(this._grid,"dgrid-select, dgrid-deselect",p.hitch(this,this._onSelectionChange)),m(this._grid,"dgrid-editor-show",p.hitch(this,this._disableAutoReload)),m(this._grid,"dgrid-editor-hide",p.hitch(this,this._enableAutoReload)))},_disableAutoReload:function(){this._autoReloadEnabled=!1;this._clearFetchTimeout()},_emitDialogEditorShowEvent:function(l,h){var c=this._grid.store.getIdentity(l),c=this._grid.cell(c,
h);m.emit(c.element,"dgrid-editor-show",{bubbles:!0})},_emitDialogEditorHideEvent:function(l,h){var c=this._grid.store.getIdentity(l),c=this._grid.cell(c,h);m.emit(c.element,"dgrid-editor-hide",{bubbles:!0})},_enableAutoReload:function(){this._autoReloadEnabled=!0;this._canAutoRefresh()&&this._setFetchTimeout()},_parseFetch:function(l){!0===this._autoReloadEnabled&&(l.errStatus===this.SuccessCode?(this._updateGrid(l),l.initialLoad&&this._firstLoad&&(this._intervalTime=5E3,this.onInitSuccess(),this._firstLoad=
!1),this._refreshGridInPlace(),this._setFetchTimeout()):(this._clearFetchTimeout(),l=this.safeError(l,{message:this._getErrorMessage(l.errStatus,l.errMSG)}),this.onInitError(l)))},_reloadData:function(){throw"_reloadData must be implemented by inheriting class";},_setFetchTimeout:function(l){l||(this._clearFetchTimeout(),this._fetchTimeout=setTimeout(p.hitch(this,this._reloadData),this._intervalTime))},_updateGrid:function(l){throw"_updateGrid must be implemented by inheriting class";},destroy:function(){this.inherited(arguments);
this._clearFetchTimeout()}})})},"webview/admin/worksheets/widgets/DescriptionEditor":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!../../../nls/all dojo/text!./templates/DescriptionEditor.html dijit/form/Button dijit/form/Textarea".split(" "),function(r,p,m,l,h,c){return p("webview/admin/worksheets/widgets/DescriptionEditor",[r],{baseClass:"",canEdit:!0,rcStrings:l,templateString:c,maxCharacters:255,value:"",webviewStrings:h,_setValueAttr:{node:"descriptionInput",
attribute:"value"},postCreate:function(){this.inherited(arguments);m.set(this.inputLabel,"for",this.descriptionInput.id)},_getValueAttr:function(){return this.descriptionInput.get("value")},show:function(){this._enableFields();return this.inherited(arguments)},_enableFields:function(){this.descriptionInput.set("disabled",!this.canEdit);this.descriptionInput.set("maxLength",this.maxCharacters);m.set(this.inputLabel,"innerHTML",this.webviewStrings.description+":\x3cbr /\x3e("+this.webviewStrings.maxCharacters+
": "+this.maxCharacters+")");this.okButton.set("disabled",!this.canEdit)}})})},"webview/admin/worksheets/widgets/NewWorksheetInstance":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!rc/nls/all dojo/on dojo/topic dojo/text!./templates/NewWorksheetInstance.html dijit/form/Form dijit/form/RadioButton dijit/form/TextBox dijit/form/Button".split(" "),function(r,p,m,l,h,c,g,d,n,a){return p("webviewadminworksheetswidgetsNewWorksheetInstance",
r,{allowSpecificInstances:!0,maxLength:"",rcStrings:g,webviewStrings:h,templateString:a,InstanceTypes:{next:0,specific:1},checkForInstance:!1,postCreate:function(){this.inherited(arguments);this.name.set("maxLength",this.maxLength);this._createListeners();this._toggleOkButton()},reset:function(){this.nextInstanceType.set("checked",!0);this.name.set("value","");this.specificInstance.set("value","")},show:function(){this.inherited(arguments);setTimeout(m.hitch(this.name,this.name.focus),250)},_createListeners:function(){this.own(d(this.specificInstanceType,
"change",m.hitch(this,this._toggleInstanceContainer)),d(this.name,"change, keyup",m.hitch(this,this._toggleOkButton)),d(this.specificInstance,"change, keyup",m.hitch(this,this._toggleOkButton)),d(this.okButton,"click",m.hitch(this,this._validateName)),this.watch("checkForInstance",m.hitch(this,this._toggleOkButton)))},_getValueAttr:function(){var a={specificInstance:-1,name:this.name.get("value")};this.specificInstanceType.get("checked")&&(a.specificInstance=Number(this.specificInstance.get("value")));
return a},_setAllowSpecificInstancesAttr:function(a){l.toggle(this.instanceTypeContainer,"hidden",!a);a||this.reset();this._set("allowSpecificInstances",a)},_toggleInstanceContainer:function(a){l.toggle(this.specificContainer,"invisible",!a);this.set("checkForInstance",a);a&&this.specificInstance.focus()},_toggleOkButton:function(){var a=!0,c=this.name.get("value").trim();this.checkForInstance&&(a=""!==this.specificInstance.get("value").trim());""!==c&&/\*|\?|"|<|>|\/|\||:|\\/i.exec(c)&&(a=!1);this.okButton.set("disabled",
!a)},_validateName:function(){var a=this.name.get("value").trim();if(null!==/\*|\?|"|<|>|\/|\||:|\\/i.exec(a))return this.reset(),this.okButton.set("disabled",!0),n.publish("sticky",{message:c.invalidPointReportName,type:"error"}),!1}})})},"webview/util/GridCellFormatter":function(){define("dijit/form/CheckBox dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../nls/all dojo/number dojo/on dojo/store/Memory ./dateUtils ../widget/InlineEditBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w){return l("webview/util/GridCellFormatter",null,{PlaceholderName:"WV_PLACEHOLDER",displayEnums:{EDITABLE:1,READONLY:2,INVISIBLE:4},rcStrings:b,webviewStrings:t,allowSelect:function(a){return a.data.name!==this.PlaceholderName},buildClippedCell:function(a,b,c,f){a=n.create("div",{"class":"clipped-data-container"},a,"only");n.create("span",{innerHTML:b,title:c,"class":"clipped-data-text"},a,"first");n.create("span",{"class":"webviewIcon textEditIcon"},a,"last");
f&&this.own(q(a,"click",f));return a},formatAutoManualCell:function(a,b){var c="";if(b.name!==this.PlaceholderName)switch(c=this.rcStrings.auto,Number(a)){case 0:c=this.rcStrings.auto;break;case 1:c=this.rcStrings.manual;break;default:throw"Unsupported auto/manual type";}return c},formatBooleanCell:function(a,b){var c="";b.name!==this.PlaceholderName&&(c=a?this.webviewStrings.yes:this.webviewStrings.no);return c},formatByteSizeCell:function(a,b){var c="";b.name!==this.PlaceholderName&&(c="4"===a||
0==a?4:2);return c},formatDateTimeCell:function(a,b){var f="";null!==a&&(f=u.bacnetDateToJSDate(a.date),f.setHours(a.time.h,a.time.m,a.time.s),f=c.format(f,{formatLength:"short"}));return f},formatNumberCell:function(a){return k.format(a)},formatTimerCell:function(a,b){var c="";if(b.name!=this.PlaceholderName)switch(c=this.webviewStrings.enabledLabel,String(a)){case "false":c=this.webviewStrings.disabledLabel;break;case "true":c=this.webviewStrings.enabledLabel;break;default:throw"Unsupported enabled/disabled type";
}return c},getLabel:function(a){switch(a.toLowerCase()){case "name":return this.webviewStrings.name;case "point":case "point1":case "point2":case "point3":case "point4":case "point5":case "point6":case "point7":case "point8":var b="";try{b=this._pointIndexRegex.exec(a)[2]}catch(y){}return this.webviewStrings.point+" "+b;case "enable":return this.webviewStrings.enable;case "logtype":return this.webviewStrings.logType;case "increment":return this.webviewStrings.increment;case "interval":return this.webviewStrings.interval;
case "usehalffloat":return this.webviewStrings.bytes;case "length":return this.webviewStrings.length;case "description":return this.webviewStrings.description;case "advanced":return this.rcStrings.advanced;case "firstsample":return this.webviewStrings.firstSample;case "lastsample":return this.webviewStrings.lastSample;default:return a}},renderBooleanCell:function(a,b,c,f){a=new r({checked:c,disabled:a});b.name!==this.PlaceholderName?q(a,"change",h.hitch(this,function(a){q.emit(this,"checkboxChange",
a,b,f)})):d.add(a.domNode,"invisible");return a.domNode},renderDateTimeCell:function(a,b,f){f="";null!==b&&(f=u.bacnetDateToJSDate(b.date),f.setHours(b.time.h,b.time.m,b.time.s),f=c.format(f,{formatLength:"short"}));b=n.create("span",{innerHTML:f});a.name===this.PlaceholderName&&d.add(b,"invisible");return b},renderHourMinSecCell:function(a,b,c,f,g){0!==c.logtype&&(a=!0);a=(new w({value:f||"00:00:00",maxLength:b,hideOnDisabled:!0,pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}",disabled:a})).domNode;c.name===
this.PlaceholderName&&d.add(a,"invisible");return a},renderMultiStateCell:function(a,b,c,g,k){var l=[];m.forEach(a,function(a,b){l.push({id:b,name:a})});a=new f({data:l});b=new p({store:a,value:g,baseClass:"rcSelectBox",disabled:b});c.name!==this.PlaceholderName?q(b,"change",h.hitch(this,function(a){q.emit(this,"multistateChange",a,c,k)})):d.add(b.domNode,"invisible");return b.domNode},renderNumberCell:function(a,b,c,f){b.enable&&(a=!0);a=(new w({value:c,pattern:"[0-9]*",disabled:a})).domNode;b.name===
this.PlaceholderName&&d.add(a,"invisible");return a},renderPointCell:function(a,b,c){var f="";null!==b.name&&(f+=b.name);null!==b.mne&&(f+=" ("+b.mne+")");g.set(c,"title",f);b=n.create("span",{innerHTML:f});a.name===this.PlaceholderName&&d.add(b,"invisible");return b},renderTextCell:function(a,b,c,f,g){a=(new w({value:f,maxLength:b,pattern:".*",disabled:a})).domNode;c.name===this.PlaceholderName&&d.add(a,"invisible");return a},_hideCellDataForEditor:function(a,b){b.name===this.PlaceholderName&&(a=
"");return a},_positionAndShowColumnToggle:function(b){a.set(this._grid.hiderMenuNode,"top",b.currentTarget.getBoundingClientRect().bottom+"px");this._grid._toggleColumnHiderMenu(b.currentTarget)}})})},"webview/util/dateUtils":function(){define(["dojo/_base/declare","dojo/date/locale","dojo/i18n!webview/nls/all","dojox/calendar/time"],function(r,p,m,l){return new (r("webview/util/dateUtils",null,{MAX_MILLISECONDS_FROM_EPOCH:864E13,MILLISECONDS_IN_DAY:864E5,floorTime:function(h){h=new Date(h);null!==
h&&h.setHours(0,0,0,0);return h},ceilingTime:function(h){h=new Date(h);null!==h&&h.setHours(23,59,59,999);return h},isAllDay:function(h,c){return 0===h.getHours()&&0===h.getMinutes()&&23===c.getHours()&&59===c.getMinutes()},getBACnetDayLabelMap:function(h){h=p.getNames("days",h,"standalone");return{128:h[1],64:h[2],32:h[3],16:h[4],8:h[5],4:h[6],2:h[0]}},getFirstDayOfWeek:function(h){return l.floorToWeek(new Date(h),null,null,0)},getFirstDayOfMonth:function(h){return l.floorToMonth(new Date(h))},getLastDayOfMonth:function(h){h=
new Date(h);h.setMonth(h.getMonth()+1);h.setDate(-1);return h},getMonthAbbreviation:function(h){return m.monthAbbrsOfYear[h]},getDayOfWeek:function(h){return m.daysOfWeek[h]},isSameDate:function(h,c){return h.getFullYear()===c.getFullYear()&&h.getMonth()===c.getMonth()&&h.getDate()===c.getDate()},addMinutes:function(h,c){var g=new Date(h);g.setMinutes(g.getMinutes()+c);return g},bacnetDateToJSDate:function(h){var c=new Date;c.setDate(15);255<h.y?c.setFullYear(h.y):c.setFullYear(h.y+1900);c.setMonth(h.m);
c.setDate(h.dom);return c},jsDateToBACnetDate:function(h){return{y:h.getFullYear(),m:h.getMonth(),dom:h.getDate()}},getLastSundayOfMonth:function(h){var c=new Date(h);c.setDate(1);c.setMonth(h.getMonth()+1);c.setDate(0);c.setDate(c.getDate()-c.getDay());return c},isLastSundayofMonth:function(h){var c=this.getLastSundayOfMonth(h);return this.isSameDate(h,c)},isFirstDayOfMonthAndSunday:function(h){return 0===h.getDay()&&1===h.getDate()},getDaysInMonth:function(h){var c=new Date(h);c.setMonth(h.getMonth()+
1);c.setDate(0);return c.getDate()},getDOWOfFirstDayOfMonth:function(h){h=new Date(h);h.setDate(1);return h.getDay()}}))})},"dojox/calendar/time":function(){define(["dojo/_base/lang","dojo/date","dojo/cldr/supplemental","dojo/date/stamp"],function(r,p,m,l){var h={newDate:function(c,g){g=g||Date;var d;if("number"==typeof c)return new g(c);if(c.getTime)return new g(c.getTime());if(c.toGregorian)return d=c.toGregorian(),g!==Date&&(d=new g(d.getTime())),d;if("string"==typeof c){d=l.fromISOString(c);if(null===
d)throw Error("Cannot parse date string ("+c+'), specify a "decodeDate" function that translates this string into a Date object');g!==Date&&(d=new g(d.getTime()));return d}},floorToDay:function(c,g,d){d=d||Date;g||(c=h.newDate(c,d));c.setHours(0,0,0,0);return c},floorToMonth:function(c,g,d){d=d||Date;g||(c=h.newDate(c,d));c.setDate(1);c.setHours(0,0,0,0);return c},floorToWeek:function(c,g,d,l,a){g=g||Date;d=d||p;l=void 0==l||0>l?m.getFirstDayOfWeek(a):l;a=c.getDay();return a==l?c:h.floorToDay(d.add(c,
"day",a>l?-a+l:-a+l-7),!0,g)},floor:function(c,g,d,l,a){l=h.floorToDay(c,l,a);switch(g){case "week":return h.floorToWeek(l,firstDayOfWeek,dateModule,locale);case "minute":l.setHours(c.getHours());l.setMinutes(Math.floor(c.getMinutes()/d)*d);break;case "hour":l.setHours(Math.floor(c.getHours()/d)*d)}return l},isStartOfDay:function(c,g,d){d=d||p;return 0==d.compare(this.floorToDay(c,!1,g),c)},isToday:function(c,g){g=g||Date;var d=new g;return c.getFullYear()==d.getFullYear()&&c.getMonth()==d.getMonth()&&
c.getDate()==d.getDate()},isOverlapping:function(c,g,d,h,a,b){if(null==g||null==h||null==d||null==a)return!1;c=c.dateModule;if(b){if(1==c.compare(g,a)||1==c.compare(h,d))return!1}else if(-1!=c.compare(g,a)||-1!=c.compare(h,d))return!1;return!0}};return h})},"webview/widget/InlineEditBox":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/text!./templates/InlineEditBox.html dijit/form/ValidationTextBox".split(" "),
function(r,p,m,l,h,c,g,d,n){return l("webview/widget/InlineEditBox",[p,r,m],{templateString:n,value:"",maxLength:32,pattern:"*",disabled:!1,hideOnDisabled:!1,postCreate:function(){this.inherited(arguments);this._buildConnections();this.disabled&&(this.hideOnDisabled&&g.add(this.domNode,"hidden"),g.remove(this.valueText,"linkable"))},_buildConnections:function(){this.own(d(this.valueText,"click",h.hitch(this,function(){this.disabled||(g.remove(this.valueTextBox.domNode,"hidden"),g.add(this.valueText,
"hidden"),this.valueTextBox.focus())})));this.own(d(this.valueTextBox,"blur",h.hitch(this,function(){g.add(this.valueTextBox.domNode,"hidden");g.remove(this.valueText,"hidden");this.value=this.valueTextBox.get("value");c.set(this.valueText,"innerHTML",this.value)})))},_setDisabledAttr:function(a){this.inherited(arguments);this.disabled=a;g.toggle(this.valueText,"linkable",!a);this.hideOnDisabled&&g.toggle(this.domNode,"hidden",a)}})})},"webview/widget/dGridExtensions/ColumnReorder":function(){define(["dgrid/extensions/ColumnReorder",
"dojo/_base/declare"],function(r,p){return p("webview/widget/dGridExtensions/ColumnReorder",[r],{constructor:function(){this.columnDndConstructor=p(this.columnDndConstructor,{_legalMouseDown:function(m){return null==this.grid._activeCell&&this.inherited(arguments)}})}})})},"webview/admin/worksheets/programs/ProgramsWorksheetToolbar":function(){define(["dojo/_base/declare","dojo/text!./templates/ProgramsWorksheetToolbar.html","../widgets/WorksheetToolbar"],function(r,p,m){return r("webview/admin/worksheets/programs/ProgramsWorksheetToolbar",
[m],{templateString:p})})},"webview/admin/worksheets/widgets/WorksheetToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../../nls/all dojo/i18n!../../../nls/worksheets dojo/on ../../_Widget ../../../widget/IconButton ../../../widget/ToolbarButton".split(" "),function(r,p,m,l,h,c,g,d){return r("webview/admin/worksheets/widgets/WorksheetToolbar",[d],{rcStrings:l,webviewStrings:h,worksheetStrings:c,_buttons:null,postCreate:function(){this.inherited(arguments);
this._setupOnClicks();this._buildButtonMap()},clearDirty:function(){m.remove(this.sendButton.toolbarButtonIcon,"dirty")},getButton:function(c){return this._buttons[c]},getPageButtons:function(){return this._buttons},makeDirty:function(){m.add(this.sendButton.toolbarButtonIcon,"dirty")},onAdd:function(){g.emit(this,"add")},onCancel:function(){g.emit(this,"cancel")},onDelete:function(){g.emit(this,"delete")},onEdit:function(){g.emit(this,"edit");this.editButton.tooltip.close()},onExcelExportClicked:function(){g.emit(this,
"excelExportClicked")},onExport:function(){g.emit(this,"export")},onToggleColumns:function(c){g.emit(this,"toggleColumns",c)},onSend:function(){g.emit(this,"send")},setTitle:function(c){},_buildButtonMap:function(){this._buttons={sendButton:this.sendButton,cancelButton:this.cancelButton,editButton:this.editButton,exportButton:this.exportButton,excelExport:this.excelButton,toggleButton:this.toggleButton,addButton:this.addButton,deleteButton:this.deleteButton}},_setupOnClicks:function(){this.own(g(this.excelButton.domNode,
"click",p.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),g(this.sendButton.domNode,"click",p.hitch(this,function(){if(!this.sendButton.get("disabled"))this.onSend()})),g(this.cancelButton.domNode,"click",p.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancel()})),g(this.addButton.domNode,"click",p.hitch(this,function(){if(!this.addButton.get("disabled"))this.onAdd()})),g(this.deleteButton.domNode,"click",p.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onDelete()})),
g(this.editButton.domNode,"click",p.hitch(this,function(){if(!this.editButton.get("disabled"))this.onEdit()})),g(this.toggleButton.domNode,"click",p.hitch(this,function(c){if(!this.toggleButton.get("disabled"))this.onToggleColumns(c)})),g(this.exportButton.domNode,"click",p.hitch(this,function(){if(!this.exportButton.get("disabled"))this.onExport()})))}})})},"webview/widget/IconButton":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare","dojo/dom-class","dojo/text!./templates/IconButton.html"],
function(r,p,m,l,h){return m("webview/widget/IconButton",[p,r],{templateString:h,tooltipLabel:"",_isDisabled:!1,postCreate:function(){this.inherited(arguments);this.set("disabled",this._isDisabled)},_setDisabledAttr:function(c){this._isDisabled=c;l.toggle(this.domNode,"disabled",c)},_getDisabledAttr:function(){return this._isDisabled}})})},"webview/admin/worksheets/trendLogs/TrendLogsView":function(){define("dgrid/Grid dgrid/extensions/ColumnResizer dgrid/extensions/DijitRegistry dgrid/editor dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/ConfirmDialog dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/Textarea dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/hash dojo/json dojo/on dojo/query dojo/store/Memory dojo/string dojo/text!../../../widget/templates/ConfirmActionBar.html dojo/text!./templates/TrendLogsView.html dojo/topic rc/_base/test rc/_base/util rc/bacnet/enums rc/bacnet/error rc/util/encoding/base16 rc/util/encoding/base64 ../widgets/AdvancedTrendPropertyEditor ../../AdminWorksheetBase ../../../sys/job ../../../util/AlarmUtil ../../../util/util ../../../util/xport ../../../widget/ColumnHider ../../../widget/WarningDialog ../../../widget/WarningDialogEnums ../../../xhrEnhanced dijit/form/Button ./TrendLogToolbar ../../widget/AdminToolbar ../../../widget/ToolbarButton".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U,W,da,Y,V,X){return f("webview/admin/worksheets/trendLogs/TrendLogsView",[S],{templateString:I,_addTrendNameTB:null,_advancedPropertiesContent:null,_advancedPropertiesDialog:null,_BACnetErrorCode:508,_byteSizeOptions:null,_buttonArray:null,_canEdit:!1,_clearTrendDialog:null,_columnFields:{advanced:"advanced",description:"description",enable:"enable",increment:"increment",instance:"id",interval:"interval",
length:"length",logType:"logtype",name:"name"},_columnStructure:[],_confirmChangeLossesDialog:null,_descriptionIsEditable:!0,_iconArray:null,identityProperty:"id",defaultTrendObject:{mne:"",name:"",archived:!1,points:[],enable:!1,logtype:0,increment:.2,interval:"00:00:00",length:128,description:"",advanced:{start:{date:null,time:null,always:!0},end:{date:null,time:null,never:!0}},firstSample:null,lastSample:null},_deleteTrendsDialog:null,_fetchDeferred:null,_fieldThatClearData:["length","advanced"],
_firstLoad:!0,_grid:null,_hash:"trendlogworksheet/View",_instanceRegex:/(\d+)([a-z]+)(\d+)/i,_gridStore:null,_maxRows:0,_pointIndexRegex:/([a-zA-Z]*)(\d*)([a-zA-Z]*)/i,_pollForStatusTimer:null,_processId:-1,_remoteTrendlogStore:null,_trendlogBaseURL:"",_trendStates:{POLLED:0,COV:1,TRIGGERED:2},postCreate:function(){this._buttonArray=[];this._iconArray=[];u.mixin(this.ErrorMessageMap,{507:this.errorStrings.unsupportedTrendlog,509:this.errorStrings.unableToCreateTrendlog,512:this.errorStrings.unableToDeleteTrend});
"MTLS"===this.type||"MTLS"===this.mne?(this.widgetName=this.webviewStrings.multipointTrendLogs,this.widgetNameKey="multipointTrendLogs"):(this.widgetName=this.webviewStrings.singlePointTrendLogs,this.widgetNameKey="singlePointTrendLogs");this.inherited(arguments);this.system=this.system||rc.pathInfo.system;this._setTrendlogBaseURL();this._fetch().then(u.hitch(this,this._parseFetch),u.hitch(this,function(a){this._onInitError(a)}));aa.loadForAdmin(this.system).then(u.hitch(this,this._setAlarmContext));
this._intervalTime=500},exportToCSV:function(a,b,c){var f=[],d="",g=[],k=C("trident")?"\r\n":"\n",h=new w;this.own(h);if(!a.store)return h.reject("Grid does not contain a store"),h.promise;var l=this._getVisibleColumns(a),n=Object.keys(l);c&&f.push(c);for(c=0;c<n.length;++c)d=a.column(l[n[c]]).label,d=M.unescapeHtml(d),d=M.escapeCsv(d),d=M.escapeSpecialCharacters(d),g.push('"'+d+'"');f.push(g.join(","));var m=function(c){g=[];var k=!1;"undefined"!==typeof c.name&&c.name===this.PlaceHolderName&&(k=
!0);for(var h=0;h<n.length;++h)if(c.hasOwnProperty(n[h])||-1!==n[h].indexOf("point")){if(k)d="";else{var m=a.columns[l[n[h]]];if("editor"in m)d=m.field===this._columnFields.increment?c.logtype===this._trendStates.COV?c.increment:"":m.field===this._columnFields.interval?c.logtype===this._trendStates.POLLED?c.interval:"":c[n[h]];else if("renderCell"in m){var q="",q="pointCell"===m.className?c.points[Number(n[h].split("point")[1])-1]:c[n[h]];"undefined"!==typeof q?"advanced"===m.field?(m=!0===q.start.always?
"Always":this._formatAdvanced(q,!0),q=!0===q.end.never?"Never":this._formatAdvanced(q,!1),d="Start: "+m+" Stop: "+q):d=m.renderCell(c,q,v.create("span")).innerText:d=""}else d="formatter"in m?m.formatter(c[n[h]],c):c[n[h]];"alarm.csv"===b&&"action"===n[h]&&(q=/>(.*)</g.exec(d),null!==q&&(d=q[1]));"logtype"===n[h]?d=[this.webviewStrings.polled,this.webviewStrings.cov,this.webviewStrings.triggered][parseInt(d)]:"useHalfFloat"===n[h]&&(d=d?"2":"4");d=M.unescapeHtml(d);d=M.escapeCsv(d);d=M.escapeSpecialCharacters(d);
d=encodeURI(d)}g.push('"'+d+'"')}f.push(g.join(","))};c=a.store.query(a.get("query"),this.getGridQueryOptions(a));c instanceof dojo.Deferred?c.then(u.hitch(this,function(a){q.forEach(a,u.hitch(this,m));(new W).csv(b,f.join(k)).then(h.resolve,h.reject)})):(q.forEach(c,u.hitch(this,m)),(new W).csv(b,f.join(k)).then(h.resolve,h.reject));return h.promise},formatGridDataValue:function(a,b){var c="";if("advanced"===b)var c=!0===a.advanced.start.always?"Always":this._formatAdvanced(a.advanced,!0),f=!0===
a.advanced.end.never?"Never":this._formatAdvanced(a.advanced,!1),c="Start: "+c+" Stop: "+f;else c=this.inherited(arguments);return c},resize:function(){this.inherited(arguments);if(this._adminTopContent){var a=this._adminTopContent.clientWidth,a=a-this._contentHeaderIcon.clientWidth;A.set(this._contentHeaderTitle,"width",a-50+"px")}},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_goToPage:function(a,b){this.goToPage(this._hash)},_buildHash:function(){this._hash=E()},_advancedFieldChanged:function(a,
b){try{var c=[],f;for(f in a)if(void 0!==b[f]){if("object"===typeof a[f]&&null!==a[f]&&null!==b[f]){if(this._advancedFieldChanged(a[f],b[f]))return!0}else if(a[f]!==b[f])return!0;c.push(f)}else return!0;for(f in b)if(-1!==c.indexOf(f))return!0;return!1}catch(fa){return!0}},_addToolbarListeners:function(){this.own(D(this._toolbar,"add",u.hitch(this,this._addDialog,this.webviewStrings.createTrendLog)),D(this._toolbar,"cancel",u.hitch(this,this._revertChanges)),D(this._toolbar,"delete",u.hitch(this,
this._removeTrendlog)),D(this._toolbar,"export",u.hitch(this,this._export)),D(this._toolbar,"send",u.hitch(this,this._saveChanges)),D(this._toolbar,"toggleColumns",u.hitch(this,this._positionAndShowColumnToggle)));if(!this._canEdit){var a=this._toolbar.getPageButtons();Object.keys(a).forEach(function(b){"columnButton"!==b&&a[b].set("disabled",!0)})}},_buildDialogContent:function(){var a=v.create("div",{"class":"addTrendDialogContents"}),b=v.create("span",null,a,"last");this._addTrendNameTB=new t({baseClass:"rcTextBox"},
b,"last");v.create("label",{innerHTML:this.webviewStrings.trendLogName+":","for":this._addTrendNameTB.id},a,"first");return a},_buildGrid:function(a){null===this._grid?(this._maxRows=a.max,this._normalizeStructure(a.columns),this._grid=new (f([r,h,m,da,p,c]))({allowSelect:u.hitch(this,this.allowSelect),columns:this._columnStructure,deselectOnRefresh:!1,selectionMode:"none",sort:[{attribute:"id",descending:!1}],store:this._gridStore},this.gridNode),this._grid.startup(),this._resizeGrid(),this._toolbar.sendButton.set("disabled",
!0),this._toolbar.cancelButton.set("disabled",!0),this._toolbar.deleteButton.set("disabled",!0),this._connectGrid()):(a.initialLoad&&this._firstLoad&&(this._normalizeStructure(a.columns),this._grid.set("columns",this._columnStructure)),this._grid.refresh({keepScrollPosition:!0}),this._resetSaveButton())},_buildPointCell:function(a,b,c){var f="";null!==b.name&&(f+=b.name);null!==b.mne&&(f+=" ("+b.mne+")");b=v.create("div",{innerHTML:f,title:f});y.add(c,this._canEdit?"enabled":"disabled");a.name!==
this.PlaceholderName?this.own(D(c,"click",u.hitch(this,this._editTrendPoints,a.id))):(y.add(b,"invisible"),y.remove(c,"colourlessLink"));return b},_buildTrendlogLinkCell:function(a,b,c){var f=v.create("div",null,c,"only");if(a.name!==this.PlaceholderName){var d="";if(this.isAdminPage()){for(var g,f=0;f<rc.session._attributes.SiteMapArray.length;f++)if(rc.session._attributes.SiteMapArray[f].siteId===Number(this.site)){g=rc.session._attributes.SiteMapArray[f].sitePath;break}d=rc.pathInfo.app+g+"/"+
this.system+"/"}d+=this.getObfuscatedHash(this._trendlogBaseURL+b,!0);f=v.create("div",{"class":"instance-container"},c,"only");v.create("a",{"class":"linkable",href:d,innerHTML:b,title:J.substitute(this.rcStrings.gotoX,[a.name])},f,"first")}return f},_canEditDescription:function(){return this.inherited(arguments)&&this._descriptionIsEditable&&this._canEdit},_checkCanEdit:function(a,b){b.name===this.PlaceholderName&&(a=!0);return this._canEdit&&!a},_createButtons:function(){this._iconArray.push(this._toolbar);
this.buttonBar.replaceAllIcons(this._iconArray)},headerIconClass:function(){return"MTLS"===this.type?"rcTrendlogMultipleIcon":"rcTrendlogSingleIcon"},_connectGrid:function(){this.inherited(arguments);this.own(D(this._grid,"dgrid-datachange",u.hitch(this,function(a){var b=!1;"advanced"===a.cell.column.field&&(b=this._advancedFieldChanged(a.oldValue,a.value));if(b){var c=this._gridStore.get(a.rowId);c[a.cell.column.field]=a.value;this._gridStore.put(c,{id:a.rowId})}if("advanced"!==a.cell.column.field||
b)this._toolbar.sendButton.set("disabled",!1),this._toolbar.cancelButton.set("disabled",!1),this.makeDirty()})));this.own(D(this._grid,".dgrid-column-nameCol:dgrid-editor-hide",u.hitch(this,function(a){a.editor.isValid()||K.publish("sticky",{message:this.errorStrings.descriptorIsPredefined,type:"error"})})));this.own(D(this._grid,".dgrid-column-logtypeCol:dgrid-datachange",u.hitch(this,this._updateIntervalStyling)));this.own(D(this._grid,".dgrid-column-incrementCol:dgrid-sort",u.hitch(this,this._customGridSort)))},
_createStores:function(){this.inherited(arguments);this._byteSizeOptions=new H({data:[{id:"4",name:"4"},{id:"2",name:"2"}]})},_customGridSort:function(a){a.preventDefault();var b=null,c=a.sort[0],f=null,d=!1,f="undefined"!==typeof this._grid.sortObject?this._grid.sortObject:this._grid.get("sort")[0];f.attribute===c.attribute&&(d=!1===f.descending);switch(c.attribute){case "increment":b=this._sortIncrement;break;default:console.error(this.declaredClass+" - _customGridSort(): Unexpected sort attribute",
c)}this._grid.sortObject=c;this._grid.sortObject.descending=d;this._grid.set("sort",u.hitch(this,b,d));this._grid.updateSortArrow(a.sort,!1)},_deleteTrendlogs:function(a){var b=new w,c={siteId:this.site,instances:a,systemId:this.system};this._validateApprovalSessionWithReason(c).then(u.hitch(this,function(){X.del("TrendLogs",{handleAs:"json",preventCache:!0,data:c}).then(u.hitch(this,function(a){a.errStatus===this.SuccessCode?(a.errors&&Object.keys(a.errors).length?(this._displayDeleteErrorMessage(a.errors),
b.reject()):(this._displayDeleteSuccessMessage(),b.resolve()),a.successes.length&&this._removeDeletedTrendlogsFromGrid(a.successes)):(a.errors&&Object.keys(a.errors).length?this._displayDeleteErrorMessage(a.errors):this._displayError(a),b.reject())}),u.hitch(this,function(a){K.publish("sticky",{type:"error",message:this.errorStrings.unexpectedError});console.error(this.declaredClass+" - _deleteTrend(): Could not delete trend",trendMne,a);b.reject()}))}),function(){});return b.promise},_displayDeleteErrorMessage:function(a){a=
Object.keys(a);var b=this.errorStrings.followingTrendlogsFailedToDelete+"\x3cul\x3e";a.forEach(u.hitch(this,function(a){a=this._instanceRegex.exec(a);null!==a&&(b+="\x3cli\x3e"+this._grid.store.get(Number(a[3])).name+"\x3c/li\x3e")}));b+="\x3c/ul\x3e";K.publish("sticky",{message:b,type:"error"})},_displayDeleteSuccessMessage:function(){K.publish("alert",{message:this._getErrorMessage(this.SuccessCode,"Delete Successful"),type:"success"})},_displayUpdateErrorMessage:function(a){var b=Object.keys(a),
c=this.webviewStrings.couldNotSaveFollowingTrends+"\x3cul\x3e";b.forEach(u.hitch(this,function(b){var f=this._instanceRegex.exec(b);null!==f&&(c+="\x3cli\x3e"+this._grid.store.get(Number(f[3])).name);a[b].StatusCode==this._BACnetErrorCode&&(b=B.parse(a[b].ErrorMessage),c+=": "+P.codes.error[b.reason]);c+="\x3c/li\x3e"}));c+="\x3c/ul\x3e";K.publish("sticky",{message:c,type:"error"})},_editTrendPoints:function(a){if(this._canEdit)if(this._dirty){null===this._confirmChangeLossesDialog&&(this._confirmChangeLossesDialog=
new Y({title:this.rcStrings.warning,text:this.rcStrings.unsavedWarning+"  "+this.rcStrings.discardChanges,type:V.types.binary}));var b=this._confirmChangeLossesDialog.on("close",u.hitch(this,function(c){switch(c){case V.returnValues.oneOrYes:this.makeClean();this._goToEditPoints(a);break;case V.returnValues.none:break;default:console.error(this.declaredClass+" - _editTrendPoints(): Unknown choice",c)}b.remove()}));this.own(b);this._confirmChangeLossesDialog.open()}else this._goToEditPoints(a)},_export:function(){this.exportToCSV(this._grid,
"trendlogs.csv",this.widgetName)},_fetch:function(a){this._firstLoad=0===this._trendlogCount();this._clearFetchTimeout();var b=E();this.isAdminPage()||L.mode<L.PROXY_LIVE&&(b=Q.toCharString(T.decode(b)));return X.get("GetTrendLogs/",{handleAs:"json",preventCache:!0,query:{systemId:this.system,mne:this.mnemonic,forceReload:a?a:!1}})},_formatAdvanced:function(a,b){return b?a.start.date.dom+"/"+a.start.date.m+"/"+a.start.date.y+" "+a.start.time.h+":"+U.pad(a.start.time.m,2,0)+":"+U.pad(a.start.time.s,
2,0):a.end.date.dom+"/"+a.end.date.m+"/"+a.end.date.y+" "+a.end.time.h+":"+U.pad(a.end.time.m,2,0)+":"+U.pad(a.end.time.s,2,0)},_formatButtonText:function(a){return a.toUpperCase()},_getRowIdentifier:function(a){return a.instance},_goToEditPoints:function(a){a=this._gridStore.get(a).mne;var b;this.isAdminPage()?(b="#trendlogworksheet/Points?site\x3d"+this.site,b+="\x26system\x3d"+this.system+"\x26device\x3d"+this.device+"\x26mne\x3d"+a,window.location.hash=b):(b=window.location.hash,window.location.hash=
this.getObfuscatedHash("#"+a+"/Points"))},_normalizeStructure:function(c){this._columnStructure=[g({selectorType:u.hitch(this,this._createSelectorCheckbox),id:"selectorCol",field:"mne",label:"",hidden:!rc.session.hasRole(rc.session.adminRoles.editTrendlogs,!0),unhidable:!0,sortable:!1,exporter:function(){return""}}),{field:"id",label:this.webviewStrings.instance,id:"mneCol",renderCell:u.hitch(this,this._buildTrendlogLinkCell)}];for(var f=0;f<c.length;f++){var d=null,d=c[f],k=d.display!==this.displayEnums.EDITABLE;
switch(d.type.toLowerCase()){case "text":"name"!==d.id?("description"===d.id&&(this._descriptionIsEditable=!k),d=l({editor:b,editOn:"none",label:this.getLabel(d.id),field:d.id,id:d.id+"Col",sortable:!1,canEdit:!1,hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE,renderCell:u.hitch(this,this._buildDescriptionCell)})):d=l({editor:t,editOn:"click",label:this.getLabel(d.id),field:d.id,id:d.id+"Col",className:!this._canEdit||k?"":"colourlessLink",canEdit:u.hitch(this,
function(a,b){b.name===this.PlaceholderName&&(a=!0);return this._canEdit&&!a},k),hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE,editorArgs:{baseClass:"rcTextBox",maxLength:d.width||256,disabled:k,validator:u.hitch(this,this._validateNameField)},formatter:u.hitch(this,this._hideCellDataForEditor)});break;case "point":d={field:d.id,label:this.getLabel(d.id),id:d.id+"Col",className:"pointCell",hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===
this.displayEnums.INVISIBLE,sortable:!1,printContent:u.hitch(this,function(a,b){var c=/\w+(\d+)/i.exec(a.id)[1]-1;return b.points[c]?b.points[c].name+" ("+b.points[c].mne+")":""},d),get:u.hitch(this,function(a,b,c){a=Number(b.exec(a)[2])-1;return a<c.points.length?c.points[a]:{name:null,mne:null}},d.id,this._pointIndexRegex),renderCell:u.hitch(this,this._buildPointCell)};break;case "bool":d="enable"!==d.id?l({editor:a,editOn:"click",label:this.getLabel(d.id),field:d.id,id:d.id+"Col",className:!this._canEdit||
k?"":"colourlessLink",canEdit:u.hitch(this,this._checkCanEdit,k),hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE,resizable:!1,editorArgs:{disabled:k,store:this._byteSizeOptions,baseClass:"rcSelectBox"},set:function(a){return"4"===a.useHalfFloat?!1:!0},get:function(a){return a.useHalfFloat?"2":"4"},formatter:u.hitch(this,this.formatByteSizeCell)}):l({editor:n,label:this.getLabel(d.id),field:d.id,id:d.id+"Col",className:!this._canEdit||k?"":"colourlessLink",
canEdit:u.hitch(this,this._checkCanEdit,k),hidden:d.display===this.displayEnums.INVISIBLE,resizable:!1,simplePrint:!0,printContent:u.hitch(this,function(a,b){return"WV_PLACEHOLDER"===b.name?"":b.enable},d),editorArgs:{disabled:k,value:!0},formatter:u.hitch(this,this._hideCellDataForEditor)});break;case "multistate":var h=[];q.forEach(d.values,u.hitch(this,function(a){a=this._trendStates[a.toUpperCase()];var b="";switch(a){case 0:b=this.webviewStrings.polled;break;case 1:b=this.webviewStrings.cov;
break;case 2:b=this.webviewStrings.triggered}h.push({id:a,name:b})}));var m=new H({data:h}),d=l({editor:a,editOn:"click",field:d.id,label:this.getLabel(d.id),canEdit:u.hitch(this,this._checkCanEdit,k),id:d.id+"Col",className:!this._canEdit||k?"":"colourlessLink",resizable:!1,hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE,editorArgs:{store:m,baseClass:"rcSelectBox"},formatter:u.hitch(this,function(a,b,c){var f="";c.name!==this.PlaceholderName&&(f=a.get(b).name);
return f},m)});break;case "hourminsec":d=l({editor:t,editOn:"click",label:this.getLabel(d.id),field:d.id,id:d.id+"Col",className:!this._canEdit||k?"":"colourlessLink",resizable:!1,hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE,printContent:u.hitch(this,function(a,b){var c=this._gridStore.get(b.id);return 1===c.logtype||2===c.logtype||"WV_PLACEHOLDER"===b.name?"":b.interval},d),editorArgs:{baseClass:"rcTextBox",maxLength:d.width||256,disabled:k,pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"},
canEdit:u.hitch(this,function(a,b,c,f){if(!this._canEdit||c.name===this.PlaceholderName)return!1;f=this._grid.row(c.id);b=this._grid.cell(f,b);if(a||Number(c.logtype)!==this._trendStates.POLLED)return y.add(b.element,"hideValue"),y.remove(b.element,"colourlessLink"),!1;y.remove(b.element,"hideValue");this._canEdit&&y.add(b.element,"colourlessLink");return!0},k,d.id+"Col"),renderCell:u.hitch(this,function(a,b,c,f){c=v.create("span",{innerHTML:c});a||Number(b.logtype)!==this._trendStates.POLLED?(y.add(f,
"hideValue"),y.remove(f,"colourlessLink")):(y.remove(f,"hideValue"),this._canEdit&&y.add(f,"colourlessLink"));b.name===this.PlaceholderName&&(y.add(c,"invisible"),y.remove(f,"colourlessLink"));return c},k)});break;case "number":d="increment"!==d.id?l({editor:t,editOn:"click",label:this.getLabel(d.id),field:d.id,id:d.id+"Col",className:!this._canEdit||k?"":"colourlessLink",canEdit:u.hitch(this,this._checkCanEdit,k),resizable:!1,editorArgs:{baseClass:"rcTextBox",maxLength:d.width||256,disabled:k,pattern:"(\\d+)"},
hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE,formatter:u.hitch(this,this._hideCellDataForEditor)}):l({editor:t,editOn:"click",label:this.getLabel(d.id),field:d.id,id:d.id+"Col",resizable:!1,className:!this._canEdit&&k?"":"colourlessLink",hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE,editorArgs:{baseClass:"rcTextBox",maxLength:d.width||256,disabled:k,pattern:"^(-?)(\\d+)(\\.?)(\\d?)(\\d?)$"},canEdit:u.hitch(this,
function(a,b,c){if(!this._canEdit||c.name===this.PlaceholderName)return!1;var f=this._grid.row(c.id);b=this._grid.cell(f,b);if(a||Number(c.logtype)!==this._trendStates.COV)return y.add(b.element,"hideValue"),y.remove(b.element,"colourlessLink"),!1;y.remove(b.element,"hideValue");this._canEdit&&y.add(b.element,"colourlessLink");return!0},k,d.id+"Col"),printContent:u.hitch(this,function(a,b){var c=this._gridStore.get(b.id);return 0===c.logtype||2===c.logtype?"":c.increment},d),renderCell:u.hitch(this,
function(a,b,c,f){c=v.create("span",{innerHTML:c});a||Number(b.logtype)!==this._trendStates.COV?(y.add(f,"hideValue"),y.remove(f,"colourlessLink")):(y.remove(f,"hideValue"),this._canEdit&&y.add(f,"colourlessLink"));b.name===this.PlaceholderName&&(y.add(c,"invisible"),y.remove(f,"colourlessLink"));return c},k)});break;case "object":d={label:this.getLabel(d.id),field:d.id,id:d.id+"Col",resizable:!1,className:k?"":"colourlessLink",hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===
this.displayEnums.INVISIBLE,printContent:u.hitch(this,function(a,b){var c=this._gridStore.get(b.id).advanced,f="";c&&(f=!0===c.start.always?"Always":this._formatAdvanced(c,!0),c=!0===c.end.never?"Never":this._formatAdvanced(c,!1),f="Start: "+f+" Stop: "+c);return f},d),renderCell:u.hitch(this,function(a,b,c,f){c=v.create("div",{});v.create("span",{"class":"webviewIcon optionsIcon"},c,"first");b.name!==this.PlaceholderName?this.own(D(f,"click",u.hitch(this,this._showAdvancedOptionsDialog,a,b))):(y.add(c,
"invisible"),y.remove(f,"colourlessLink"));return c},d)};break;case "datetime":d={field:d.id,label:this.getLabel(d.id),id:d.id+"Col",resizable:!1,hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE,renderCell:u.hitch(this,this.renderDateTimeCell)};break;default:d={field:d.id,label:this.getLabel(d.id),id:d.id+"Col",hidden:d.display===this.displayEnums.INVISIBLE,unhidable:d.display===this.displayEnums.INVISIBLE}}this._columnStructure.push(d)}},_trendlogCount:function(){return this._grid&&
this._grid.store?this._grid.store.data.length:0},_onOkToSave:function(a,b){var c=a.map(u.hitch(this,function(a){a=u.mixin(this._grid.store.get(a),this._grid.dirty[a]);a.useHalfFloat=!0===a.useHalfFlat||"2"===a.useHalfFloat;return a}));this._saveTrendlogs(c).then(u.hitch(this,function(){K.publish("alert",{message:this.errorStrings.successfulSave,type:"success"});this._grid.save();this._reloadData(!0);this._resetSaveButton();b.resolve()}),u.hitch(this,function(){this._grid.revert();this._reloadData(!0);
this._resetSaveButton()}))},_onSelectionChange:function(a){var b="dgrid-select"===a.type,c=null,f=null;q.forEach(a.rows,u.hitch(this,function(a){c=F(".dijitCheckBox",a.element)[0];f=k.byNode(c);f.set("checked",b)}));a=Object.keys(this._grid.selection).filter(u.hitch(this,function(a){return this._grid.selection[a]}));this._toolbar.set("isSelectAll",a.length!==this._grid.store.data.filter(u.hitch(this,function(a){return this._canAccessRow(a)})).length);a=0<a.filter(u.hitch(this,function(a){return this._canEditRow(this._grid.store.get(a))})).length;
this._toolbar.deleteButton.set("disabled",!a)},_parseVisibleGridData:function(a,b,c,f){if(f.hasOwnProperty("points"))for(var d=0;d<f.points.length;++d)f["point"+(d+1)]=f.points[d];this.inherited(arguments)},_performAdd:function(a){var b=this._trendInUse(a);if(b.inUse)K.publish("sticky",{message:b.message,type:"error"});else{var c={siteId:this.site,mne:this.mnemonic,name:a.name,instance:a.specificInstance,systemId:this.system};this._validateApprovalSessionWithReason(c).then(u.hitch(this,function(){X.post("TrendLogs",
{handleAs:"json",preventCache:!0,data:c}).then(u.hitch(this,function(a){a.errStatus===this.SuccessCode&&this._reloadData(!0);this._displayError(a)}),u.hitch(this,function(a){K.publish("sticky",{message:this.errorStrings.unexpectedError,type:"error"});console.error(this.declaredClass+" - _performAdd(): Error Adding Trend Log",a)}))}),function(){})}},_performDelete:function(){var a=[],b=this._grid.selection,c;for(c in b)if(b[c]){var f=this._grid.store.get(c);a.push(f.mne)}this._deleteTrendlogs(a).then(u.hitch(this,
this._reloadData,!0))},_populateGridStore:function(a){var b=[],c=[this.mnemonic.substring(0,this.mnemonic.length-1)+"%"],f=u.hitch(this,function(a){var f=this._instanceRegex.exec(a.mne);f?(a.id=Number(f[3]),b.push(a),c.push(a.mne),a.points.forEach(function(a){c.push(a.mne)})):console.error(this.declaredClass+" - populateGridStore(dataToPopulate): Could not add trend log")});q.forEach(a,f);this._buildAuditLogContext(c);this._gridStore.setData(b)},_removeDeletedTrendlogsFromGrid:function(a){a.forEach(u.hitch(this,
function(a){a=this._instanceRegex.exec(a);null!==a&&this._grid.store.remove(Number(a[3]))}))},_removeTrendlog:function(){if(!this._canEdit)return!1;var a=[],b=this._grid.selection,c;for(c in b)b[c]&&a.push(c);this._confirmDelete(a,this.webviewStrings.confirmDeleteTrendlogs)},_resetSaveButton:function(){this.makeClean();this._toolbar.sendButton.set("disabled",!0);this._toolbar.cancelButton.set("disabled",!0)},_resizeGrid:function(){this.inherited(arguments);if(null!==this._grid){var a=A.get("rcSystemContent",
"height"),b=0;z.byId("rcAdminContentHeader")&&(b+=A.get("rcAdminContentHeader","height"));var c=A.get(this.buttonBar.domNode,"height"),f=A.get(this.buttonBar.domNode,"paddingTop"),d=A.get(this.buttonBar.domNode,"paddingBottom"),g=A.get(this.buttonBar.domNode,"marginTop"),k=A.get(this.buttonBar.domNode,"marginBottom"),c=c+f+d+g+k,f=2*A.get(this._grid.domNode,"marginTop"),d=2*A.get(this._grid.domNode,"borderWidth");A.set(this._grid.domNode,"height",a-(b+c+(f+d))+"px")}},_saveChanges:function(){if(this._canEdit){var a=
[],b=[],c=new w,f=null,d=null,g=Object.keys(this._grid.dirty);q.forEach(g,u.hitch(this,function(c){f=Object.keys(this._grid.dirty[c]);for(var g=0;g<f.length;g++)if(d=f[g],-1!==this._fieldThatClearData.indexOf(d)&&("advanced"!==d||this._grid.dirty[c].advanced.clearLogData)){b.push(this._grid.store.get(c).name);break}a.push(c)}));if(0<b.length){var k="\x3cul\x3e";q.forEach(b,function(a){k+="\x3cli\x3e"+a+"\x3c/li\x3e"});k+="\x3c/ul\x3e "+this.webviewStrings.wishToContinue;null===this._clearTrendDialog&&
(this._clearTrendDialog=new Y({title:this.webviewStrings.confirmClear,type:V.types.binary}));this._clearTrendDialog.set("content",k);this._clearTrendDialog.set("text",this.webviewStrings.wipeTrendLogs+": ");var h=this._clearTrendDialog.on("close",u.hitch(this,function(b){switch(b){case V.returnValues.oneOrYes:this._onOkToSave(a,c);break;case V.returnValues.none:break;default:console.error(this.declaredClass+" - _saveChanges(): Unknown choice",b)}h.remove()}));this.own(h);this._clearTrendDialog.open()}else this._onOkToSave(a,
c);return c.promise}},_saveTrendlogs:function(a){var b=new w,c={};a.forEach(function(a){c[a.mne]=B.stringify(a)});var f={siteId:this.site,systemId:this.system,instanceData:B.stringify(c)};this._validateApprovalSessionWithReason(f).then(u.hitch(this,function(){X.put("TrendLogs",{handleAs:"json",preventCache:"true",data:f}).then(u.hitch(this,function(a){a.errStatus===this.SuccessCode?a.errors&&Object.keys(a.errors).length?(this._displayUpdateErrorMessage(a.errors),b.reject()):b.resolve():(a.errors&&
Object.keys(a.errors).length?this._displayUpdateErrorMessage(a.errors):this._displayError(a),b.reject())}),u.hitch(this,function(a){K.publish("sticky",{message:this.errorStrings.unexpectedError,type:"error"});console.error(this.declaredClass+" - _saveTrendlogs(): Could not save trend log",a);b.reject()}))}),function(){});return b.promise},_setAlarmContext:function(){N.setAlarmContextForBACnetDevice(this.system,this.device)},_setCanEditFlag:function(){this._canEdit=rc.session.hasRole(rc.session.adminRoles.editTrendlogs)},
_setTitle:function(a){this.inherited(arguments);this._contentHeaderTitle&&x.set(this._contentHeaderTitle,{innerHTML:a})},_setTrendlogBaseURL:function(){var a=this.getUnobfuscatedHash(window.location.hash);/#\d+(m|s)tls/i.test(a)?this._trendlogBaseURL=a.substring(0,a.length-1):this._trendlogBaseURL="#"+this.mnemonic.substring(0,this.mnemonic.length-1)},_showAdvancedOptionsDialog:function(a,b){this._emitDialogEditorShowEvent(b,"advancedCol");var c=this._gridStore.get(b.id).advanced;null===this._advancedPropertiesDialog&&
(this._advancedPropertiesContent=new R({_canEdit:this._canEdit,disableEditStart:a.object.start.display!==this.displayEnums.EDITABLE,disableEditEnd:a.object.end.display!==this.displayEnums.EDITABLE,onHide:u.hitch(this,this._emitDialogEditorHideEvent,b,"advancedCol")}),this._advancedPropertiesDialog=new d({title:this.rcStrings.advanced,actionBarTemplate:G,content:this._advancedPropertiesContent.domNode}),this._advancedPropertiesDialog.cancelButton.set("label",this.webviewStrings.cancel.toLocaleUpperCase()));
this._advancedPropertiesDialog._onSubmit=u.hitch(this,function(a){if(this._advancedPropertiesContent.isValid()){var b=this._advancedPropertiesContent.get("value"),c=this._gridStore.get(a.id);this._advancedFieldChanged(c.advanced,b)&&(c.advanced=b,this._gridStore.put(c,{id:a.id}),this._grid.dirty.hasOwnProperty(a.id)?this._grid.dirty[a.id].advanced=b:this._grid.dirty[a.id]={advanced:b},this._toolbar.sendButton.set("disabled",!1),this._toolbar.cancelButton.set("disabled",!1),this.makeDirty());this._advancedPropertiesDialog.onExecute();
this._advancedPropertiesDialog.execute(this._advancedPropertiesDialog.get("value"))}},b);this._advancedPropertiesContent.set("value",c);this._advancedPropertiesDialog.show()},_sortIncrement:function(a,b,c){return a?U.alphaNumericSort(b.increment.toString(),c.increment.toString()):-1*U.alphaNumericSort(b.increment.toString(),c.increment.toString())},_trendInUse:function(a){var b=function(a,b){return b.id===a&&b.name!==this.PlaceholderName},c=!1,f=null;0<this._gridStore.query({name:a.name}).length?
(f=this.worksheetStrings.nameInUse,c=!0):-1!==a.specificInstance&&0<this._gridStore.query(u.hitch(this,b,a.specificInstance)).length&&(f=this.worksheetStrings.instanceInUse,c=!0);return{inUse:c,message:f}},_toggleButtons:function(){var a=this.inherited(arguments);"undefined"!==typeof this._toolbar.deleteButton&&this._toolbar.deleteButton.set("disabled",!this._canEdit||1>a)},_updateGrid:function(a){a.initialLoad&&(this._populateGridStore(a.data.data),this._buildGrid(a.data))},_updateIntervalStyling:function(a){var b=
a.cell.row,c=b.data,f=this._grid.cell(b,"intervalCol");void 0!==f.element&&(a.grid.columns.intervalCol.editorArgs.disabled||Number(c.logtype)!==this._trendStates.POLLED?(y.add(f.element,"hideValue"),y.remove(f.element,"colourlessLink")):(y.remove(f.element,"hideValue"),this._canEdit&&y.add(f.element,"colourlessLink")));b=this._grid.cell(b,"incrementCol");void 0!==b.element&&(a.grid.columns.incrementCol.editorArgs.disabled||Number(c.logtype)!==this._trendStates.COV?(y.add(b.element,"hideValue"),y.remove(b.element,
"colourlessLink")):(y.remove(b.element,"hideValue"),this._canEdit&&y.add(b.element,"colourlessLink")))},_validateNameField:function(a){a=a.toUpperCase().trim();var b=O.mnemonics.concat(["TBL","GRP","AY","SS"]);if(!a||!isNaN(a)||-1!==M.reservedKeywords.indexOf(a)||-1!==b.indexOf(a)||-1!=="ALARM-TYPE ALARM APDIAL CALL CLEAR CLOSE DALARM DECLARE DISABLE ENABLE END ELSE FOR GOSUB GOTO HANGUP IDLE IF IF- IF LET NEXT ON-ALARM ON-ERROR ON OPEN PHONE PRINT-AT PRINT RELINQUISH REMOTE-GET REMOTE-SET REM RETURN SET-PRINTER SET-PRIORITY SHARE-NET SHARE START STOP THEN WAIT WRITE".split(" ").indexOf(a))return!1;
var c=/(\d+)([a-z|\-]+)(\d+)/i.exec(a);if(null!==c)return-1===b.indexOf(c[2]);c=/([a-z|\-|\_|\s]+)(\d+)/i.exec(a);if(null!==c)return-1===b.indexOf(c[1]);c=/(\d+)([a-z|\-]+)/i.exec(a);return null!==c?-1===b.indexOf(c[2]):!0},destroy:function(){this.inherited(arguments);this._adminTopContent&&v.destroy(this._adminTopContent);this._clearFetchTimeout()}})})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(r,p,m){return r(null,{minSize:0,
maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){m.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var l=m.getEnclosingWidget(this.domNode.parentNode);l&&l.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);m.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},
resize:function(l){l&&p.setMarginBox(this.domNode,l);this.inherited(arguments)},_set:function(l,h){this[l]=h},watch:function(){},getParent:function(){return m.getEnclosingWidget(this.domNode.parentNode)}})})},"webview/admin/worksheets/widgets/AdvancedTrendPropertyEditor":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/focus dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/query dojo/text!./templates/AdvancedTrendPropertyEditor.html ../../../util/dateUtils dijit/form/CheckBox dijit/form/TimeTextBox rc/widget/DateTextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return c("webview/admin/worksheets/widgets/AdvancedTrendPropertyEditor",[p,r,m],{templateString:k,baseClass:"",clearLogData:!1,forClientSide:!1,end:{date:null,time:null,never:!0},start:{date:null,time:null,always:!0},stopWhenFull:!1,_canEdit:!1,constructor:function(){this.rcStrings=n;this.webviewStrings=a},postCreate:function(){this.inherited(arguments);d.toggle(this.clearLogDataContainer,"hidden",this.forClientSide);this._createConnections();this._toggleFields();
this._canEdit&&this._setDisabledState()},focus:function(){l.focus(this.domNode)},isValid:function(){var a=null,b=null;if(!this.alwaysStartCB.get("checked")){if(!this.startDate.isValid()||!this.startTime.isValid())return!1;var a=new Date(this.startDate.get("value")),c=new Date(this.startTime.get("value")),a=a.setHours(c.getHours(),c.getMinutes(),c.getSeconds())}if(!this.neverStopCB.get("checked")){if(!this.endDate.isValid()||!this.endTime.isValid())return!1;b=new Date(this.endDate.get("value"));c=
new Date(this.endTime.get("value"));b=b.setHours(c.getHours(),c.getMinutes(),c.getSeconds())}return null!==a&&null!==b&&a>b?(d.add(this.endDate.domNode,"dijitError"),d.add(this.endTime.domNode,"dijitError"),!1):!0},_cleanupInvalids:function(){var a=t(".dijitError",this.domNode);h.forEach(a,function(a){d.remove(a,"dijitError")})},_createConnections:function(){h.forEach([this.startTime,this.endTime],g.hitch(this,function(a){this.own(b(a,"blur",g.hitch(this,this.focus)))}));this.own(b(this.alwaysStartCB,
"change",g.hitch(this,function(a){this.startDate.set("disabled",a||this.disableEditStart);this.startTime.set("disabled",a||this.disableEditStart)})));this.own(b(this.neverStopCB,"change",g.hitch(this,function(a){this.endDate.set("disabled",a||this.disableEditEnd);this.endTime.set("disabled",a||this.disableEditEnd)})))},_setDisabledState:function(){this.startDate.set("disabled",this.alwaysStartCB.get("checked"));this.startTime.set("disabled",this.alwaysStartCB.get("checked"));this.endDate.set("disabled",
this.neverStopCB.get("checked"));this.endTime.set("disabled",this.neverStopCB.get("checked"))},_setValueAttr:function(a){if(a.start){this.start=a.start;var b=new Date;null!==this.start.date&&(this.start.date.m--,b=q.bacnetDateToJSDate(this.start.date));null!==this.start.time&&b.setHours(this.start.time.h,this.start.time.m,this.start.time.s);this.startDate.set("value",b);this.startTime.set("value",b);this.alwaysStartCB.set("checked",this.start.always)}a.end&&(this.end=a.end,b=new Date,null!==this.end.date&&
(this.end.date.m--,b=q.bacnetDateToJSDate(this.end.date)),null!==this.end.time&&b.setHours(this.end.time.h,this.end.time.m,this.end.time.s),this.endDate.set("value",b),this.endTime.set("value",b),this.neverStopCB.set("checked",this.end.never));a.hasOwnProperty("stopWhenFull")&&(this.stopWhenFull=a.stopWhenFull,this.stopWhenFullCB.set("checked",this.stopWhenFull));this.clearLogData=!1;this.clearLogDataCB.set("checked",!1);this._cleanupInvalids()},_toggleFields:function(){this.alwaysStartCB.set("disabled",
!this._canEdit);this.startDate.set("disabled",!this._canEdit);this.startTime.set("disabled",!this._canEdit);this.neverStopCB.set("disabled",!this._canEdit);this.endDate.set("disabled",!this._canEdit);this.endTime.set("disabled",!this._canEdit);this.stopWhenFullCB.set("disabled",!this._canEdit);this.clearLogDataCB.set("disabled",!this._canEdit)},_getDateValue:function(a){var b=new Date(this[a+"Date"].get("value"));a=new Date(this[a+"Time"].get("value"));a={date:{dom:255,m:255,y:255},time:{h:a.getHours(),
m:a.getMinutes(),s:a.getSeconds()}};a.date=q.jsDateToBACnetDate(b);a.date.m++;return a},_getValueAttr:function(){var a=this.start,b=this.end;this.alwaysStartCB.get("checked")?(a.date=null,a.time=null):a=this._getDateValue("start");a.always=this.alwaysStartCB.get("checked");this.neverStopCB.get("checked")?(b.date=null,b.time=null):b=this._getDateValue("end");b.never=this.neverStopCB.get("checked");return{start:a,end:b,stopWhenFull:this.stopWhenFullCB.get("checked"),clearLogData:this.clearLogDataCB.get("checked")}}})})},
"webview/admin/worksheets/trendLogs/TrendLogToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/text!./templates/TrendLogToolbar.html ../widgets/WorksheetToolbar webview/widget/IconButton".split(" "),function(r,p,m,l,h){return r("webview/admin/worksheets/trendLogs/TrendLogToolbar",[h],{templateString:l,_buttons:null,getPageButtons:function(){return this._buttons},_buildButtonMap:function(){this._buttons={sendButton:this.sendButton,cancelButton:this.cancelButton,addButton:this.addButton,
deleteButton:this.deleteButton,columnButton:this.columnButton}},_setupOnClicks:function(){this.own(m(this.excelButton.domNode,"click",p.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),m(this.sendButton.domNode,"click",p.hitch(this,function(){if(!this.sendButton.get("disabled"))this.onSend()})),m(this.cancelButton.domNode,"click",p.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancel()})),m(this.addButton.domNode,"click",p.hitch(this,function(){if(!this.addButton.get("disabled"))this.onAdd()})),
m(this.deleteButton.domNode,"click",p.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onDelete()})),m(this.columnButton.domNode,"click",p.hitch(this,function(c){if(!this.columnButton.get("disabled"))this.onToggleColumns(c)})),m(this.exportButton.domNode,"click",p.hitch(this,function(){if(!this.exportButton.get("disabled"))this.onExport()})))}})})},"webview/admin/worksheets/trendLogs/TrendLogPoints":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dnd/Source dojo/dom-class dojo/dom-construct dojo/json dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/TrendLogPoints.html dojo/text!../../templates/pointsItem.html dojo/topic rc/bacnet/enums rc/bacnet/io/Error rc/bacnet/io/Number ./TrendLogPointItem ../../_dndTreeBase ../../../changeApproval/_ApprovalSessionMixin ../../../widget/WarningDialog ../../../widget/WarningDialogEnums ../../../xhrEnhanced ../../widget/SearchForObjectResults ../../widget/AdminToolbar ../../../widget/CommitButtons ../../../widget/WebviewContentPane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D){return m("webview/admin/worksheets/trendLogs/TrendLogPoints",[A,C],{templateString:f,_fetchDeferred:null,_maxPoints:1,_processId:-1,_saveWarningDialog:null,_searchRequest:null,_trendData:{},_buttonArray:null,_fetchInterval:null,_intervalTime:500,_firstLoad:!0,postCreate:function(){this.inherited(arguments);if(!rc.session.hasRole(rc.session.adminRoles.editTrendlogs,!0))return setTimeout(l.hitch(this,function(){var a=this.safeError(null,
{name:this.rcStrings.permissionDenied,message:q.substitute(this.rcStrings.notAuthToViewX,[this.webviewStrings.trendLogPoints]),suggestion:""});this._onInitError(a)}),500),null;this.publishSearchable();this._iconArray=[];this._iconArray.push(this.commitButtons);this.buttonBar.replaceAllIcons(this._iconArray);null===this.mnemonic&&(this.mnemonic=this.mne);this._setFetchInterval();this._fetch().then(l.hitch(this,this._render),l.hitch(this,function(a){this._onInitError(a)}));this.setupCommitButtons()},
fetch:function(){var a=new c;this.own(a);this._fetch().then(l.hitch(this,function(b){200===b.errStatus?(this._render(b),this.set("title",b.data.trend.name),this._setTitle(this.title),a.resolve()):(b=this._getErrorMessage(b.errStatus,b.errMessage),w.publish("sticky",{message:b,type:"error"}),a.reject(b))}),l.hitch(this,function(b){w.publish("sticky",{message:this.errorStrings.unexpectedError,type:"error"});a.reject(b)}));return a.promise},publishSearchable:function(){w.publish("searchableWidget",this._supportedObjectTypes,
this,!0)},setupCommitButtons:function(){var a=this.commitButtons;this.own(b(a.saveButton.toolbarButtonIcon,"click",l.hitch(this,this._savePoints)),b(a.cancelButton.toolbarButtonIcon,"click",l.hitch(this,this._clearAndfetch)))},treeNodeCreator:function(a){var b=new v({pointMnemonic:a.pointMnemonic,pointName:a.pointName});b.on("delete",l.hitch(this,this._deleteNode));b.on("mnemonicChanged",l.hitch(this,this.setDirty,!0,this.commitButtons.saveButton));this._treeStore.put(b);return{node:b.domNode,data:a,
type:["treeNode"]}},_setFetchInterval:function(){this._clearFetchInterval();this._fetchInterval=setInterval(l.hitch(this,this._reloadData),this._intervalTime)},_clearFetchInterval:function(){null!=this._fetchInterval&&(clearInterval(this._fetchInterval),this._fetchInterval=null)},_reloadData:function(){this._fetch().then(l.hitch(this,this._render),l.hitch(this,function(a){this._onInitError(a)}))},_atLimit:function(a,b){var c="moved"===a.sourceState.toLowerCase()||this._treeList.getAllNodes().length+
b.length<=this._maxPoints;c||w.publish("alert",{message:this.webviewStrings.maxPointsReached,type:"info"});return c},_setupPointSourceListeners:function(a){this.own(h.after(a,"onDndDrop",a.selectNone))},insertPoint:function(a,b){a.insertNodes(!1,[{sysId:null!==b.sysId?b.sysId:-1,sysName:null!==b.sysName?b.sysName:"",deviceName:null!==b.deviceName?b.deviceName:"",pointName:null!==b.pointName?b.pointName:"",pointMnemonic:null!==b.pointMnemonic?b.pointMnemonic:"",pointType:null!==b.pointType?b.pointType:
"",urlPath:this.urlPath}])},_setSupportedTypes:function(){this._supportedObjectTypes=[this.objectTypeMap.inputs,this.objectTypeMap.outputs,this.objectTypeMap.variables,this.objectTypeMap.loops,this.objectTypeMap.schedules,this.objectTypeMap.calendars,this.objectTypeMap.arrays]},_clearAndfetch:function(){this._firstLoad=!0;var a=this._treeList.getAllNodes();p.forEach(a,l.hitch(this,function(a){this._deleteNode(r.byNode(a))}));this.fetch().then(l.hitch(this,this.setDirty,!1,this.commitButtons.saveButton))},
_createTreeBuilder:function(){var a=n.create("div",{"class":"treeContainer treeContainerBordered"});n.create("span",{"class":"dndHint",innerHTML:this.webviewStrings.dndHint},a,"last");var b=n.create("div",{"class":"treeFolder rootFolder treeContainer"},a,"last");this._treeStore=new k(new t({}));this._treeList=new g(b,{creator:l.hitch(this,this.treeNodeCreator),copyOnly:!1,allowNested:!0,autoSync:!0,delay:this.DEFAULT_DELAY,skipForm:!0,accept:["treeNode","resultNode"],checkAcceptance:l.hitch(this,
this._atLimit)});this.own(h.before(this._treeList,"onDndStart",l.hitch(this,function(a,b){a===this._treeList&&p.forEach(b,l.hitch(this,function(a){d.add(a,"hidden")}))})));this.own(h.after(this._treeList,"onDndCancel",l.hitch(this,function(){var a=Object.keys(this._treeList.map);p.forEach(a,function(a){a=r.byId(a).domNode;d.remove(a,"hidden")});this.setDirty(this._pointsHaveChanged(),this.commitButtons.saveButton);this._toggleHintArea()}),!0));this.builderWidget.setMainContent(a)},_deleteNode:function(a){this._treeList.delItem(a.domNode.id);
n.destroy(a.domNode);this._treeStore.remove(a.id);this.setDirty(this._pointsHaveChanged(),this.commitButtons.saveButton)},_fetch:function(){return D.get("GetTrendLogs/",{handleAs:"json",preventCache:!0,query:{systemId:this.system,mne:this.mnemonic,specificTrend:!0}})},_getCurrentPoints:function(){var a=this._treeList.getAllNodes(),b=[];p.forEach(a,l.hitch(this,function(a){a=r.byNode(a);b.push({mne:a.pointMnemonic,name:a.pointName})}));return b},_getErrorMessage:function(a,b){switch(a){case 200:return this.errorStrings.operationSuccessful;
case 403:return this.errorStrings.accessForbidden;case 501:return this.errorStrings.cannotAccessSystem;case 502:return this.errorStrings.userHasNoAccess;case 504:return this.errorStrings.unexpectedError;case 505:return this.errorStrings.siteDoesNotExist;case 506:return this.errorStrings.insufficientPriviledges;case 507:return this.errorStrings.unsupportedTrendlog;case 508:return this._getBACnetErrorMessage(b);case 509:return this.errorStrings.unableToCreateTrendlog;case 510:return this.errorStrings.operationInProgress;
case 511:return this.errorStrings.userCancelled;case 512:return this.unableToDeleteTrend;case 513:return this.errorStrings.rcwvsError;case 517:return this.errorStrings.systemDoesNotExist;default:return b}},_goBackToWorksheet:function(){var a=this.mnemonic.match(/MTL/i)?"MTLS":"STLS",b;this.isAdminPage()?(b="trendlogworksheet/View?site\x3d"+this.site,b+="\x26system\x3d"+this.system+"\x26device\x3d"+this.device+"\x26mne\x3d"+a):b=this.device+a;setTimeout(l.hitch(this,function(){window.location.hash=
this.getObfuscatedHash("#"+b)}),750)},_pointsHaveChanged:function(){var a=this._getCurrentPoints(),b=this._trendData.points;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c].name!==b[c].name||a[c].mne!==b[c].mne)return!0;return!1},_pointsNodeCreator:function(a,b){var c=null,c="avatar"===b?(new v({baseClass:"trendLogPoint",pointName:a.pointName,pointMnemonic:a.pointMnemonic})).domNode:n.toDom(q.substitute(u,{sysId:a.sysId,sysName:a.sysName?a.sysName:"",deviceName:a.deviceName,pointName:a.pointName,
pointMnemonic:a.pointMnemonic,siteUrlPath:a.urlPath}));return{node:c,data:a,type:["resultNode"]}},_saveErrorMsg:function(a){a=this._getErrorMessage(a.errStatus,a.errMSG);w.publish("sticky",{message:a,type:"error"})},_render:function(a){if(200===a.errStatus)a.initialLoad&&this._firstLoad&&(this._clearFetchInterval(),this._renderData(a.data),this.onInitSuccess(),this._firstLoad=!1);else{this._clearFetchInterval();var b=this._getErrorMessage(a.errStatus,a.errMSG);w.publish("sticky",{message:b,type:"error"});
this.onInitError(a.errMSG)}},_renderData:function(a){this.set("title",a.trend.name);this._setTitle(this.title);this._trendData=a.trend;this._maxPoints=a.maxPoints;for(var b=0;b<a.trend.points.length;b++){var c=a.trend.points[b];this._treeList.insertNodes(!1,[{pointMnemonic:c.mne,pointName:c.name}])}this._toggleHintArea()},_savePoints:function(){if(this._validatePoints()){var a=this._getCurrentPoints();this._trendData.points=a;this._dirty?this._showSaveConfirm():this._goBackToWorksheet()}else w.publish("sticky",
{message:this.webviewStrings.arraysMustHaveIndex,type:"error"})},_sendSaveRequest:function(){var b=new c;this.own(b);var f={};f[this.mnemonic]=a.stringify(this._trendData);var d={siteId:this.site,systemId:this.system,instanceData:a.stringify(f)};this._validateApprovalSessionWithReason(d).then(l.hitch(this,function(){D.put("TrendLogs",{handleAs:"json",preventCache:!0,data:d}).then(l.hitch(this,function(a){200===a.errStatus?(w.publish("alert",{message:this.errorStrings.successfulSave,type:"success"}),
this.setDirty(!1,this.commitButtons.saveButton),b.resolve()):b.reject(a)}),l.hitch(this,function(a){b.reject(a)}))}),function(){});return b.promise},_getBACnetErrorMessage:function(a){var b="";"object"===typeof a?(b="",a.hasOwnProperty("errorClass")?b=new x(new y(a.errorClass,z.primitiveTypes.UNSIGNED_INTEGER),new y(a.errorCode,z.primitiveTypes.UNSIGNED_INTEGER)):a.hasOwnProperty("type")&&(b=new x(new y(a.type,z.primitiveTypes.UNSIGNED_INTEGER),new y(a.reason,z.primitiveTypes.UNSIGNED_INTEGER))),
b=this.errorStrings.bacnetError+": "+b.toStringMsg()):(b=this.errorStrings.bacnetError,console.error("BACnet error",a));return b},_showSaveConfirm:function(){null===this._saveWarningDialog&&(this._saveWarningDialog=new E({title:this.rcStrings.warning,type:B.types.binary,text:this.webviewStrings.modifyingPointsResets}));var a=this._saveWarningDialog.on("close",l.hitch(this,function(b){switch(b){case B.returnValues.oneOrYes:this._sendSaveRequest().then(l.hitch(this,this._goBackToWorksheet),l.hitch(this,
this._saveErrorMsg));break;case B.returnValues.none:break;default:console.error(this.declaredClass+" - _showSaveConfirm(): Unknown choice",b)}a.remove()}));this.own(a);this._saveWarningDialog.open()},_validatePoints:function(){var a=/^(\d+)(\w+)(\d+)/i,b=this._treeList.getAllNodes(),c=!0;p.forEach(b,l.hitch(this,function(b){b=r.byNode(b);var f=a.exec(b.pointMnemonic);null!==f&&"ay"===f[2].toLowerCase()&&0>b.indexValue&&(b.setInvalid(),c=!1)}));return c},destroy:function(){this.inherited(arguments);
this._clearFetchInterval()}})})},"webview/admin/worksheets/trendLogs/TrendLogPointItem":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/ConfirmDialog dijit/DropDownMenu dijit/form/DropDownButton dijit/form/ValidationTextBox dijit/MenuItem dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!webview/widget/templates/ConfirmActionBar.html dojo/text!./templates/TrendLogPointItem.html dojo/topic rc/_base/util rc/bacnet/enums".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A){return n("webview/admin/worksheets/trendLogs/TrendLogPointItem",[p,r,m],{templateString:x,_getObjectRegex:/^(\d+)(\w+)(\d+)/i,_propertyDialog:null,_setPropertyTB:null,_lastDialog:"",_mnemonicPartAllRegex:/^(\w+)(:)(\d+)(\[)(\d+)(\])$/i,_mnemonicPartsPropertyRegex:/^(\w+)(:)(\d+)$/i,_menomincPartsIndexRegex:/^(\w+)(\[)(\d+)(\])$/i,indexValue:-1,property:85,pointMnemonic:"",pointName:"",constructor:function(){this.inherited(arguments);this.rcStrings=
q;this.webviewStrings=f;this.errorStrings=u},postMixInProperties:function(){this.inherited(arguments);if(this._mnemonicPartAllRegex.test(this.pointMnemonic)){var a=this._mnemonicPartAllRegex.exec(this.pointMnemonic);this.property=Number(a[3]);this.indexValue=Number(a[5])}else this._mnemonicPartsPropertyRegex.test(this.pointMnemonic)?this.property=Number(this._mnemonicPartsPropertyRegex.exec(this.pointMnemonic)[3]):this._menomincPartsIndexRegex.test(this.pointMnemonic)&&(this.indexValue=Number(this._menomincPartsIndexRegex.exec(this.pointMnemonic)[3]))},
buildRendering:function(){this.inherited(arguments);this._buildEditMenu()},setInvalid:function(){t.add(this.contentNode,"invalid")},_buildDialogContent:function(){var a=k.create("div",{"class":"setPropertyDialogContents"});k.create("label",{innerHTML:this.webviewStrings.value+":","for":"propertyInput"},a,"first");var b=k.create("span",null,a,"last");this._setPropertyTB=new g({baseClass:"rcTextBox",value:"",pattern:"(\\d+)"},b,"last");return a},_buildEditMenu:function(){var b=new h({baseClass:"webviewContextMenu trendLogPoint"});
b.addChild(new d({label:this.rcStrings.rcDelete,baseClass:"webviewContextMenuItem",onClick:a.hitch(this,this._onRemove)}));b.addChild(new d({label:this.webviewStrings.setPropertyValue,baseClass:"webviewContextMenuItem",onClick:a.hitch(this,this._setProperty)}));b.addChild(new d({label:this.webviewStrings.setIndexValue,baseClass:"webviewContextMenuItem",onClick:a.hitch(this,this._setIndex)}));b.startup();(new c({showLabel:!1,dropDown:b,iconClass:"rc24Icon editIcon",baseClass:"webviewDropDownButton",
onClick:function(){this.focus()}},this.editNode)).startup()},_createPropertyDialog:function(){this._propertyDialog=new l({title:"",baseClass:"setPropertyDialog",content:this._buildDialogContent(),actionBarTemplate:z});this.own(w(this._propertyDialog.okButton,"click",a.hitch(this,this._onConfirmDialogOk)));this.own(w(this._propertyDialog,"hide",a.hitch(this,this._onConfirmDialogHide)))},_onConfirmDialogOk:function(a){if(null===this._setPropertyTB)console.error("_setPropertyTB was not initialized");
else{var b=this._setPropertyTB.get("value").trim();"index"===this._lastDialog?this._trySetNewIndex(a,b):"property"===this._lastDialog&&this._trySetNewProperty(a,b)}},_onConfirmDialogHide:function(){this._setPropertyTB.set("value","")},_trySetNewIndex:function(a,b){if(""===b)b="-1";else if(!this._setPropertyTB.isValid()){v.stopEvent(a);return}this._setPointMnemonic(b,this.property)},_trySetNewProperty:function(a,b){""===b?(y.publish("sticky",{message:this.errorStrings.valueFieldEmpty,type:"error"}),
v.stopEvent(a)):this._setPropertyTB.isValid()?this._setPointMnemonic(this.indexValue,b):v.stopEvent(a)},_setPointMnemonic:function(a,b){var c=this.pointMnemonic;this.indexValue=Number(a);this.property=Number(b);var f=this._getPointMnemonic();c!==f&&(this.pointMnemonic=f,this._updatePointMnemonic())},_getPointMnemonic:function(){var a=null,a=this.pointMnemonic;this._getObjectRegex.test(this.pointMnemonic)&&(a=this._getObjectRegex.exec(this.pointMnemonic)[0]);a=this.property!==A.propertyTypes.PROPID_PRESENT_VALUE?
a+":"+this.property:a;-1!==this.indexValue&&(a+=["[",this.indexValue,"]"].join(""));return a},_updatePointMnemonic:function(){b.set(this.displayNode,"innerHTML",this.pointName+"\x26nbsp;("+this.pointMnemonic+")");w.emit(this.domNode,"mnemonicChanged",this)},_onRemove:function(){w.emit(this.domNode,"delete",this)},_setIndex:function(){null===this._propertyDialog&&this._createPropertyDialog();this._propertyDialog.set("title",this.webviewStrings.enterIndexValue);this._setPropertyTB.set("value",this.indexValue===
Number("-1")?"":this.indexValue);this._propertyDialog.show();this._lastDialog="index"},_setProperty:function(){null===this._propertyDialog&&this._createPropertyDialog();this._propertyDialog.set("title",this.webviewStrings.enterPropertyValue);this._setPropertyTB.set("value",this.property);this._propertyDialog.show();this._lastDialog="property"}})})},"webview/bacnet/BTLProperties":function(){define("dijit/form/FilteringSelect dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/store/Memory dojo/text!./_btlProperties/templates/BTLProperties.html rc/bacnet/BTLProperties ../widget/ClientToolBar".split(" "),
function(r,p,m,l,h,c,g,d,n){return p("webview/bacnet/BTLProperties",d,{systemStore:null,systemInput:null,systemSet:!1,templateString:g,_approvalToken:null,_buildSystemSelection:function(){null!==this.systemInput&&(this.systemInput.set({store:this.systemStore}),this.own(h(this.systemInput,"change",m.hitch(this,function(a){rc.sys.job.load(a).otherwise(m.hitch(this,function(a){console.error(this.declaredClass+" _buildSystemSelection(): Error getting job data",a)}))}))))},_buildObjectSelection:function(){null!==
this.objectRefInput&&(this.objectRefInput.set({store:this.objectTypeStore}),this.objectRefInput.startup())},_buildSystemStore:function(){null===this.systemStore?rc.xhr.request({type:"rest",method:"GET",path:"GetSystemsForSite"}).then(m.hitch(this,function(a){this.systemStore=new c({data:a.data});this._buildSystemSelection()})):this._buildSystemSelection()},_overrideJobLoad:function(a){this._loading++;a={type:this.dataType,path:this.filePath,systemId:a,load:m.hitch(this,function(a){this._onLoad({data:a.data.jobData})}),
error:m.hitch(this,function(a){this._onError(a)})};return this._d=rc.xhr.request(a)},postCreate:function(){this.inherited(arguments);this._buildSystemStore();this.own(h(this.addEntryButton,"click",m.hitch(this,this._setSystem,!0)),h(this.clearEntriesButton,"click",m.hitch(this,this._setSystem,!1)));rc.sys.job.dataType="rest";rc.sys.job.load=this._overrideJobLoad},_getToolbarButtons:function(){return[]},writeEntries:function(){this._approvalToken=null;return this.inherited(arguments)},_makeWriteRequest:function(a){var b=
this._getBACnetValidateRequestData(a,this._approvalToken);return this._validateApprovalSessionWithReason(b,!1,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(m.hitch(this,function(b){b&&b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=b.approvalToken);a.s.approvalToken=this._approvalToken;return rc.xhr.request(a)}),function(){})},_setSystem:function(a){this.systemSet!==a&&(a&&(this.systemId=Number(this.systemInput.get("value"))),this.systemInput.set("disabled",a),this.systemSet=a)},
_createToolbar:function(){return new n},setToolBarMenus:function(a){a.Print=!1;a.Export=!1;this.userToolBar.resetMenusAndHelp(a)}})})},"webview/bacnet/RuntimeLog":function(){define("dojo/_base/declare dojo/_base/lang rc/bacnet/enums rc/bacnet/RuntimeLog rc/reliable/Point ../util/AlarmUtil ../util/audit ../widget/RuntimeLogCommon dijit/layout/BorderContainer dijit/layout/ContentPane".split(" "),function(r,p,m,l,h,c,g,d){return r("webview/bacnet/RuntimeLog",[l,d],{render:function(){this.inherited(arguments);
this._buildAuditLogContext()},_buildAuditLogContext:function(){var c=[{systemId:this.system,objectName:this.pointName.toMnemonic()}];g.setContextData(rc.pathInfo.site,c,this.fullTitle)},_jobLoaded:function(){this.inherited(arguments);this._setAlarmContext()},_setAlarmContext:function(){c.setAlarmContextForBACnetDevice(this.system,this.device)}})})},"webview/widget/RuntimeLogCommon":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/text!./_runtime/templates/RuntimeLog.html ./dGridExtensions/dGridExcelExporterMixin ./_runtime/RuntimeLogToolbar".split(" "),
function(r,p,m,l,h){return r("webivew/widget/RuntimeLogCommon",h,{templateString:l,_createToolbarConnections:function(){this.own(m(this._toolbar,"exportClicked",p.hitch(this,this.exportCsv)));this.connectExportButton()}})})},"webview/widget/_runtime/RuntimeLogToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/text!./templates/RuntimeLogToolbar.html ../ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),function(r,p,m,l,h,
c,g){return r("webview/reliable/_runtime/RuntimeLogToolbar",[g],{rcStrings:m,webviewStrings:l,templateString:c,postCreate:function(){this.inherited(arguments)},onExcelExportClicked:function(){},onExportClicked:function(){},_createButtonMap:function(){this._buttons={"export":this.exportButton,excelButton:this.excelButton}},_createConnections:function(){this.own(h(this.excelButton.domNode,"click",p.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),h(this.exportButton.domNode,
"click",p.hitch(this,function(){this.onExportClicked()})))}})})},"webview/bacnet/RuntimeLogWorksheet":function(){define("dojo/_base/declare dojo/_base/lang dojo/text!../widget/templates/RuntimeLogWorksheet.html rc/bacnet/enums rc/bacnet/RuntimeLogWorksheet rc/reliable/Point ../util/AlarmUtil ../util/audit ../widget/RuntimeLogCommon dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/ClientToolBar".split(" "),function(r,p,m,l,h,c,g,d,n){return r("webview/bacnet/RuntimeLogWorksheet",[h,
n],{templateString:m,render:function(a){this.inherited(arguments);this._buildAuditLogContext(a)},_buildAuditLogContext:function(a){var b=[{systemId:this.system,objectName:this.mnemonic}];a.forEach(p.hitch(this,function(a){a&&a.point&&b.push({systemId:this.system,objectName:a.point.toMnemonic()})}));d.setContextData(rc.pathInfo.site,b,this.fullTitle)},_jobLoaded:function(){this.inherited(arguments);this._setAlarmContext()},_setAlarmContext:function(){g.setAlarmContextForBACnetDevice(this.system,this.device)}})})},
"webview/bacnet/Schedule":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!webview/nls/all dojo/promise/all dojo/text!./_schedule/templates/Schedule.html rc/bacnet/enums rc/bacnet/io/Object rc/bacnet/Schedule ../sys/desc ../sys/job ../util/AlarmUtil ../util/audit ../widget/ClientToolBar ./_schedule/WeeklySchedule".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return p("webview/bacnet/Schedule",[n],{templateString:c,_approvalToken:null,postCreate:function(){this.inherited(arguments);
this.own(h([b.loadOnce(),a.loadOnce()]).then(m.hitch(this,this._setAlarmContext)))},_buildAuditLogContext:function(){var a=[];r.forEach(this.deviceObjectPropertyReferenceList,m.hitch(this,function(b){b.d||(b.d=new d(g.objectTypes.OBJID_DEVICE,Number(this.device)));a.push({systemId:Number(this.system),objectName:b.toMnemonic()})}));a.push({systemId:Number(this.system),objectName:this.mnemonic});k.setContextDataWithSiteId(this.site,a,this.fullTitle)},_createToolbar:function(){var a=rc.session.isPrivate()&&
(rc.session.hasRole(rc.session.roles.wsChg)||rc.session.hasRole(rc.session.roles.esChg)),b=new q;a&&(this._saveButton=b.addToolBarItem(l.save,"save","rc24Icon saveIcon",m.hitch(this,this.sendWithReason,"schedule")));return b},_handleSendError:function(a,b){a!==this.changeApprovalCancelledError?this.inherited(arguments):b.reject(a)},_handleSendWeeklyWholeError:function(a,b){a!==this.changeApprovalCancelledError?this.inherited(arguments):b.reject(a)},_makeWriteRequest:function(a){var b=this._getBACnetValidateRequestData(a,
this._approvalToken);return this._validateApprovalSession(b,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(m.hitch(this,function(b){b&&b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=b.approvalToken);a.s.approvalToken=this._approvalToken;return rc.xhr.request(a)}))},_render:function(a){this.inherited(arguments);this._buildAuditLogContext();return a},_send:function(){this._approvalToken=null;return this.inherited(arguments)},_setAlarmContext:function(){t.setAlarmContextForBACnetDevice(this.system,
this.device)}})})},"webview/bacnet/_schedule/WeeklySchedule":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","rc/bacnet/_schedule/WeeklySchedule","./WeeklyScheduleEditDialog"],function(r,p,m,l,h){return r("rc/bacnet/_schedule/WeeklySchedule",[l],{_createEditDialog:function(){null===this.editDialog&&(this.editDialog=new h({parent:this,defaultValue:this.defaultValue,_scheduleDataType:this.dataType,_units:this._units}),this._supportingWidgets.push(this.editDialog),this.own(m(this.editDialog,
"closeDialog",p.hitch(this,this.onUpdate))))}})})},"webview/bacnet/_schedule/WeeklyScheduleEditDialog":function(){define(["dojo/_base/declare","dojo/text!webview/bacnet/_schedule/templates/WeeklyScheduleEditDialog.html","rc/bacnet/_schedule/WeeklyScheduleEditDialog"],function(r,p,m){return r("webview/bacnet/_schedule/WeeklyScheduleEditDialog",[m],{templateString:p})})},"webview/bacnet/Trend":function(){define(["dojo/_base/declare","rc/bacnet/Trend","../reliable/Trend","../util/AlarmUtil"],function(r,
p,m,l){return r("webview/bacnet/Trend",[p,m],{_setAlarmContext:function(){l.setAlarmContextForBACnetDevice(this.system,this.device)}})})},"webview/reliable/Trend":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/promise/all dojo/query dojo/request/xhr dojo/text!./_trend/templates/Trend.html dojo/text!../watermark.js rc/reliable/Trend rc/sys/cunit ../_base/tooltip ../sys/job ../util/AlarmUtil ../util/audit ../widget/dGridExtensions/dGridExcelExporterMixin ./_trend/TrendToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B){return r("webview/reliable/Trend",[x,B],{templateString:w,_legendClass:"webview-trend-legend",_isUpdateMode:!1,postCreate:function(){this.inherited(arguments);this.own(m.after(this._toolbar,"_showPasswordChangeDialog",p.hitch(this,function(){if(this.updateButtonClicked){this.stopUpdating();var a=m.after(this._toolbar.changeDialog,"hide",p.hitch(this,function(){this.update();a.remove()}))}})));this.own(a(this.io,"load",p.hitch(this,this._buildAuditLogContext)));
this.own(q([A.loadOnce(),y.loadOnce()]).then(p.hitch(this,this._setAlarmContext)))},exportGridAsExcel:function(){this._buildGrid();this.inherited(arguments)},_setAlarmContext:function(){C.setAlarmContextForRcpPoint(this.system,this.pointName)},_buildAuditLogContext:function(){var a=[{systemId:rc.pathInfo.system,objectName:this.mnemonic}];this.io.datam.objects.forEach(function(b){b&&b.mnemonic&&a.push({systemId:rc.pathInfo.system,objectName:b.mnemonic})});E.setContextData(rc.pathInfo.site,a,this._toolbar.title)},
_createToolbar:function(){this._updateButton=this._toolbar.getButton("mode");this._graphDataButton=this._toolbar.getButton("data");this._previousButton=this._toolbar.getButton("previous");this._nextButton=this._toolbar.getButton("next");this._legendButton=this._toolbar.getButton("legend");this._exportButton=this._toolbar.getButton("export");this._updateButton.iconNode=this._updateButton.domNode;this._graphDataButton.iconNode=this._graphDataButton.domNode;this._previousButton.iconNode=this._previousButton.domNode;
this._nextButton.iconNode=this._nextButton.domNode;this._legendButton.iconNode=this._legendButton.domNode;this._exportButton.iconNode=this._exportButton.domNode;this.own(a(this._toolbar,"modeClicked",p.hitch(this,this.update)),a(this._toolbar,"dataClicked",p.hitch(this,this._onClickDataGraph)),a(this._toolbar,"previousClicked",p.hitch(this,this._onClickFetchPrevious)),a(this._toolbar,"nextClicked",p.hitch(this,this._onClickFetchNext)),a(this._toolbar,"legendClicked",p.hitch(this,this._toggleLegend)),
a(this._toolbar,"exportClicked",p.hitch(this,this.exportCsv)));this.connectExportButton();return this._toolbar},_addButtons:function(){},toggleToolbar:function(){this.inherited(arguments);null!==this._trendLegend&&!1===this._toolbarShowing&&this._closeLegend()},_setButtonLabel:function(a,b){},_setUpdateLabel:function(){this._updateButton.set("tooltipLabel",this.updateButtonClicked?b.tbStopUpdating:b.update);this._updateButton.tooltip.close();this.setTooltips();this._updateButton.set("checked",this.updateButtonClicked)},
_stopUpdate:function(){window.clearTimeout(this._updateTimer);this._updateTimer=null;this._updateButton.set("checked",!1);this._updateButton.set("disabled",!1);this._updating=this.updateButtonClicked=!1},_stopUpdating:function(){this.updateButtonClicked&&(this._updating=!1,this.update(),this._updateButton.set("checked",!1),this._updateButton.set("disabled",!1))},_systemAvailable:function(){var a=new l,b=webview.pathUtil.getInfo(window.location.pathname);0===b.system.length?a.resolve():rc.xhr.request({path:"SystemAvailable",
type:"rest",method:"GET",systemId:Number(b.system),error:p.hitch(this,function(b){a.reject(k.currentlyUnavailable)})}).then(p.hitch(this,function(b){200===b.data.errStatus?a.resolve():a.reject(k.currentlyUnavailable)}),p.hitch(this,function(b){a.reject(k.currentlyUnavailable)}));return a.promise},_toggleDataGraph:function(){this._toolbar.toggleDataButton(this._isShowingChart);this._isShowingChart?(this._showData(),this._graphDataButton.set("tooltipLabel",b.tbShowGraph),this._graphDataButton.tooltip.close(),
this.setTooltips(),this._buildGrid(),this._setGridPaneSize()):(this._hideData(),this._graphDataButton.set("tooltipLabel",b.tbShowData),this._graphDataButton.tooltip.close(),this.setTooltips());this._isShowingChart=!this._isShowingChart;this._showLegendMenu();if(this._chartw){this._resizeChartConnect.remove();this._resizeChartConnect=null;this._borderContainer.resize();this._resizeChartConnect=m.after(this._chartCP,"resize",p.hitch(this,this._resizeChart));this._isShowingChart?this._resizeChart():
v.update();this._chartBoxCoords=g.position(this._chartDiv,!0);var a=g.getMarginBox(this._chartDiv);this._chartBoxCoords.l=a.l;this._chartBoxCoords.t=a.t}else v.update(),this._borderContainer.resize()},_toggleLegendArrow:function(){if(null!==this._trendLegend){var a=this._trendLegend.get("isShowing");h.toggle(this._legendButton.iconNode,"showing-legend",a)}},_endUpdate:function(){this._updating&&(this.updateButtonClicked&&!this._isLoading&&(this._updateTimer=window.setTimeout(p.hitch(this,function(){return this._systemAvailable().then(p.hitch(this,
function(){try{this.io.resetData(this),this._chartw.chart.setDateGetLatest()}catch(D){this._beginUpdate()&&this._endUpdate()}}),p.hitch(this,function(a){this._beginUpdate()&&this._endUpdate()}))}),this.updateTimeout)),this._isLoading=this._updating=!1,this._updateButtons(),this._chartw&&(this._chartw.chart.dateSelectorTextBox.set("disabled",!1),this._chartw.chart.sampleSizeTextBox.set("disabled",!1),this._chartw.chart.slider.set("disabled",!1)))},getSliderTooltip:function(){return t.ttZoomBar},getScaleTooltip:function(){return t.ttUnitScaleControls},
getShowDataBtnTooltipMargin:function(){return{margin:"1.5em 0px 0px .6em"}},getLegendBtnTooltipMargin:function(){return{margin:"1.5em 0px 0px .6em"}},getExportBtnTooltipMargin:function(){return{margin:"1.5em 0 0 .6em"}},getScaleTooltipCss:function(){return{margin:"0 0 0 2em"}},getDatePickerTooltip:function(){return t.ttDateTextBox},getDatePickerTooltipCss:function(){return!0===this.trend.io.a.enabled?{}:{visibility:"collapse"}},getSampleSizeTooltip:function(){return t.ttSampleSize},getSampleSizeTooltipCss:function(){return!0===
this.trend.io.a.enabled?{}:{visibility:"collapse"}},update:function(){this.updateButtonClicked=!this.updateButtonClicked;this._setUpdateLabel();this._isUpdateMode=!this._isUpdateMode;this._toolbar.toggleModeButton(this._isUpdateMode);if(this.updateButtonClicked)return this._systemAvailable().then(p.hitch(this,function(){try{this.io.resetData(this),this._chartw.chart.setDateGetLatest()}catch(D){}}),p.hitch(this,function(a){}));window.clearTimeout(this._updateTimer)},destroy:function(){this.updateButtonClicked=
!1;window.clearTimeout(this._updateTimer);this.inherited(arguments)},_waitingHidden:function(){var a=null,b=null,g=new l;u.get("Watermark/GetWatermarkForSite",{handleAs:"json",query:{siteId:this.get("site")}}).then(p.hitch(this,function(k){if(200==k.errStatus&&null!=k.data&&null!=k.data.fileSource){k=k.data.fileSource;var h=f(".rcTrend")[0],l=this._createWatermarkCanvas(null!=h);h?(a=d.get(h,"position"),b=d.get(h,"overflow"),d.set(h,{position:"relative",overflow:"hidden"}),c.place(l,h)):c.place(l,
document.body,"first");var m=this._createWatermarkImage(k);m.onload=function(){eval(z);window.setTimeout(g.resolve,100)};c.place(m,document.body)}else g.resolve();g.then(p.hitch(this,function(a,b){window.print();var f=n("ie")||n("touch")||n("trident")?1E3:1;window.setTimeout(p.hitch(this,function(){this._printReady();h&&d.set(h,{position:a,overflow:b});c.destroy(m);c.destroy(l)}),f)}),a,b)}))}})})},"webview/reliable/_trend/TrendToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/text!./templates/TrendToolbar.html ../../widget/ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),
function(r,p,m,l,h,c,g,d,n){return r("webview/reliable/_trend/TrendToolbar",[n],{rcStrings:h,templateString:d,webviewStrings:c,onExcelExportClicked:function(){},onModeClicked:function(){},onDataClicked:function(){},onPreviousClicked:function(){},onNextClicked:function(){},onLegendClicked:function(){},onExportClicked:function(){},toggleModeButton:function(a){l.toggle(this.modeButton.toolbarButtonIcon,"sticky",a)},toggleDataButton:function(a){l.toggle(this.dataButton.toolbarButtonIcon,"svg-table",!a);
l.toggle(this.dataButton.toolbarButtonIcon,"svg-stl",a)},_createButtonMap:function(){this._buttons={mode:this.modeButton,data:this.dataButton,previous:this.prevButton,next:this.nextButton,legend:this.legendButton,"export":this.exportButton,excelExport:this.excelButton}},_createConnections:function(){this.own(g(this.excelButton.domNode,"click",p.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),g(this.modeButton.domNode,"click",p.hitch(this,function(){if(!this.modeButton.get("disabled"))this.onModeClicked()})),
g(this.dataButton.domNode,"click",p.hitch(this,function(){if(!this.dataButton.get("disabled"))this.onDataClicked()})),g(this.prevButton.domNode,"click",p.hitch(this,function(){if(!this.prevButton.get("disabled"))this.onPreviousClicked()})),g(this.nextButton.domNode,"click",p.hitch(this,function(){if(!this.nextButton.get("disabled"))this.onNextClicked()})),g(this.legendButton.domNode,"click",p.hitch(this,function(){if(!this.legendButton.get("disabled"))this.onLegendClicked()})),g(this.exportButton.domNode,
"click",p.hitch(this,function(){if(!this.exportButton.get("disabled"))this.onExportClicked()})))}})})},"webview/bacnet/TrendAsRuntimeLog":function(){define("dojo/_base/declare rc/bacnet/TrendAsRuntimeLog ../util/AlarmUtil ../util/audit ../widget/RuntimeLogCommon dijit/layout/BorderContainer dijit/layout/ContentPane".split(" "),function(r,p,m,l,h){return r("webview/bacnet/TrendAsRuntimeLog",[p,h],{render:function(){this.inherited(arguments);this._buildAuditLogContext()},_buildAuditLogContext:function(){var c=
[{systemId:this.system,objectName:this.pointName.toMnemonic()}];l.setContextData(rc.pathInfo.site,c,this.fullTitle)},_jobLoaded:function(){this.inherited(arguments);this._setAlarmContext()},_setAlarmContext:function(){m.setAlarmContextForBACnetDevice(this.system,this.device)}})})},"webview/bacnet/TrendMultiple":function(){define(["dojo/_base/declare","rc/bacnet/TrendMultiple","./Trend"],function(r,p,m){return r("webview/bacnet/TrendMultiple",[p,m],{})})},"webview/reliable/_group/GroupElement":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang rc/bacnet/enums rc/reliable/Point rc/reliable/unit rc/reliable/_group/GroupElement rc/sys/job rc/util/encoding/base16 ../../bacnet/Object".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return p("webview/reliable/_group/GroupElement",g,{KW_PANFILE:27,KW_POINTSREPORTWS:88,KW_POINTSREPORT:89,isWorkStationRCPSubPoint:!1,WS_GROUP_SUB_POINTNAME:799,supportedWorksheets:[l.objectTypes.OBJID_TREND_LOG_MULTIPLE,l.objectTypes.OBJID_TREND_LOG,l.objectTypes.OBJID_PROGRAM],knownUnsupportedTypes:[l.mnemonicToType.tbl,l.mnemonicToType.view],isWorkStationGroupSubPoint:function(a,c,d){var b=!1;this.group.isWorkstationGroup&&a===this.WS_GROUP_SUB_POINTNAME&&void 0!==
c[d+20]&&(b=!0);return b},isUnsupportedPoint:function(){return!1},setWorkStationSubnetPointName:function(a,c){var b=n.toIntEnd(a.slice(c+20,c+22));this.pointName=new h(b,m.clone(this.group.pointName));b=a[c+22];this.pointName.setPanel(b&127,(b>>7)+1,this.pointName.subController)},_checkOpenUnits:function(){this.isBacnet&&!rc.sys.job.isThirdParty({device:this.pointName.device})&&this._unitsValid()&&(this.pointName.isBinary()||this.pointName.isMultistate())&&this.property!==l.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME&&
(this.pointName.device==this.group.deviceId?this.group.isPyramid&&!this.group.isEnhancedGroup?40==this.units&&(this.units=0):(this.group.isOpen||this.group.isEnhancedGroup)&&this.updateOpenUnits():(this.group.isWorkstationGroup&&d.supportsOpenUnits(this.pointName)||d.supportsOpenUnits({device:this.group.deviceId})&&d.supportsOpenUnits(this.pointName))&&this.updateOpenUnits(),(this.bacnetStateText=c.getDigitalRange(this))&&0==this.bacnetStateText.length&&(this.bacnetStateText=null))},_decodeRCPAddress:function(a,
c,d){var b;c&127?128>=c?b=1:(b=2,c-=128):c=b=0;this.group.isWorkstationGroup&&!this.isWorkStationRCPSubPoint&&11===this.pointName.comType?(d=this.pointName.comInstance,d+=64*a,this.pointName.mainInstance=d,this.pointName.comInstance=d):this.pointName.set(a,b,c&127,this.pointName.comType,d)},getHyperLink:function(){var a,c;if(c=this.hyperlink)if(a={},a.text=c,a.text){if(0===a.text.toLowerCase().indexOf("www."))return a.href="http://"+a.text,a;if(r.some(["http://","https://","mailto:","ftp://","telnet://"],
function(b){return 0===a.text.toLowerCase().indexOf(b.toLowerCase())},this)){a.href=a.text;try{a.href===decodeURI(a.href)&&(a.href=encodeURI(a.href))}catch(k){}}else{c=rc.pathInfo.sitePath+"/"+rc.pathInfo.system;c.lastIndexOf("/")!==c.length-1&&(c+="/");a.href=c+"job/"+a.text;try{a.href===decodeURI(a.href)&&(a.href=encodeURI(a.href),a.target="_self")}catch(k){}}}return a},_decodeJSONKeyword:function(a){var b=!1;try{switch(this.pointName=0,this.isKeyword=!0,this.units=a.keyword_instance,this.units){case this.KW_ALARMS:case this.KW_BYE:case this.KW_PANFILE:case this.KW_PREVIOUS:case this.KW_MULTIPOINT:b=
!0;break;case this.KW_STATIC_IMAGE:b=this._decodeStaticImage(a);break;case this.KW_STATIC_TEXT:case this.KW_HYPERLINK:this._decodeHyperlinkKeyword(a);b=!0;break;case this.KW_RTS:this._decodeRunTimeKeyword(a);b=!0;break;case this.KW_RTREPORT:this._decodeRunTimeReportKeyword(a);b=!0;break;case this.KW_POINTSREPORTWS:this._decodePointsReportWorksheetKeyword();b=!0;break;case this.KW_POINTSREPORT:this._decodePointsReportKeyword(a),b=!0}}catch(k){}return b},_decodeKeyWord:function(b,c){switch(b[c+6]&3){case 1:this.isKeyword=
!0;switch(b[c+7]){case this.KW_ALARMS:case this.KW_BYE:case this.KW_PANFILE:case this.KW_HYPERLINK:case this.KW_PREVIOUS:case this.KW_MULTIPOINT:break;case this.KW_RTS:this.pointName=new h(1,0,9,-2);this.units=-1;break;case this.KW_RTREPORT:this.pointName=new a(1,297,-2);this.units=-1;break;case this.KW_POINTSREPORTWS:this.instance="S";this.units=-1;break;case this.KW_POINTSREPORT:this.instance=b[c+12];this.units=-1;break;default:c+=20,this.group.isGlobalGroup&&c++,this.isDeleted=!0}break;case 0:if(!(0<
(b[c+6]&128)))return this.isKeyword=!0;default:this.isDeleted=!0}return!1},_decodePointsReportKeyword:function(a){this.instance=a.BACnet_instance},_decodePointsReportWorksheetKeyword:function(){this.instance="S"},_decodeRCPPoint:function(a){var b=m.clone(this.group.pointName);if(this.group.isSSC||this.group.isGlobalGroup)this.subnetType=0,b.mainController=1;this.isWorkStationRCPSubPoint||(this.pointName=new h(a,b))},_resetPointName:function(b,c){this.pointName instanceof a||(this.pointName=0);var d=
n.toIntEnd(b.slice(c,c+2));(this.isWorkStationRCPSubPoint=this.isWorkStationGroupSubPoint(d,b,c))&&this.setWorkStationSubnetPointName(b,c)}})})},"webview/reliable/_group/io/GroupElements":function(){define("dojo/_base/declare dojo/_base/lang rc/bacnet/enums rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/ReliablePresentValueEnhanced rc/bacnet/io/service/ReadPropertyMultiple rc/reliable/_group/io/GroupElements rc/util/encoding/base64 ../../../changeApproval/_ApprovalSessionMixin ../GroupElement ../../../util/pointObject".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return r("webview/reliable/_group/io/GroupElements",[n,b],{_approvalToken:null,buildAuditLogContext:function(a){var b=[],c;for(c in this.ges){var d=this.ges[c];d.secondaryLink&&k.canFilterWithMnemonic(d.secondaryLink)&&b.push({systemId:Number(a),objectName:d.secondaryLink});if(d.isKeyword)d.textKWTitle&&b.push({systemId:Number(a),objectName:d.textKWTitle+".txt"});else{var g=d.pointName.toMnemonic();k.canFilterWithMnemonic(g)&&b.push({systemId:Number(a),objectName:g});
if(null!==d.landingPad&&1==this._landingPadIconsAndParamsAreDefined(d)){var d=d.landingPad.params.icons,h;for(h in d)g=d[h].link,g=this._formatMnemonic(g,this.group.deviceId),k.canFilterWithMnemonic(g)&&b.push({systemId:Number(a),objectName:g})}}}return b},getAllMatchingGELs:function(a){var b=[],c,d=a.pointName.toMnemonic();-1<a.arrayIdx&&(d+="[ "+a.arrayIdx+" ]");for(c in this.ges){var g=this.ges[c];if(!g.isKeyword&&g.index!==a.index){var k=g.pointName.toMnemonic();-1<g.arrayIdx&&(k+="[ "+g.arrayIdx+
" ]");d===k&&b.push(g)}}return b},_addDefaultProperties:function(){this.group.isSuspendedUpdate||this.inherited(arguments)},_createGroupElement:function(){return new t({group:this.group})},_clearApprovalToken:function(){this._approvalToken=null},_formatMnemonic:function(a,b){var c=k._mnemonicRegex.exec(a);if(!c)return null;var f=c[k._mnemonicRegexGroupIndexMap.deviceNumber],d=[];void 0===f?d.push(b.toString()):d.push(f);d.push(c[k._mnemonicRegexGroupIndexMap.objectType]);d.push(c[k._mnemonicRegexGroupIndexMap.instanceNumber]);
return d.join("")},_landingPadIconsAndParamsAreDefined:function(a){return"undefined"!==typeof a.landingPad&&"undefined"!==typeof a.landingPad.params&&"undefined"!==typeof a.landingPad.params.icons},_loadEnhancedPresentValues:function(a,b){var f=[{o:new c(this.group.isView?m.objectTypes.OBJID_PP_ENHANCED_VIEW:m.objectTypes.OBJID_GLOBAL_GROUP,a.mainInstance),pl:[{p:new h(m.propertyTypes.PROPID_PP_PRESENT_VALUE_ENHANCED,m.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new l(new g(a))}]}],f=new d({device:a.mainController},
f,!0);rc.xhr.request({gid:"GRP",type:"bacnet",s:f}).then(p.hitch(this,function(b,c){var f=c.o[0].pl[0].v.l;0===f.length&&b<this._maxEHLoadAttempts?(f=250,f=b<this._maxEHLoadAttempts/2?250:b<this._maxEHLoadAttempts?500:this.BACNET_PROPERTY_UPDATE_INTERVAL,this.defer(p.hitch(this,this._loadEnhancedPresentValues,a,++b),f)):this._onLoadEnhancedPresentValue(f)},b),p.hitch(this,this._onErrorElements));return this._d},_onLoadElements:function(){this.group.isSuspendedUpdate=!1;this.inherited(arguments)},
_putRequestInError:function(a,b){a.bacnetIoPending=!1;b.data.asdu&&0<b.data.asdu.length&&(a.bacnetError=b)},_isUnimplementedWorkSheet:function(a){var b=!1;if(0>a.pointName.comInstance)switch(a.pointName.type){case m.objectTypes.OBJID_CALENDAR:case m.objectTypes.OBJID_LOOP:case m.objectTypes.OBJID_SCHEDULE:case m.objectTypes.OBJID_PP_RCP_TABLE:case m.objectTypes.OBJID_PP_ARRAY:case m.objectTypes.OBJID_GLOBAL_GROUP:b=!0}return b},saveElement:function(b){var c=a.encode(b.encode()),d={gid:"GRP",type:"rcp",
method:"POST",cmdObj:{dest:b.pointName.mainController,subt:b.pointName.subnetType,subd:b.pointName.subController,src:0,cmd:125,xl:0,xh:0,data:c,cnt:c.length},index:b.index,load:p.hitch(this,this.onSaveElement)};this.site=this.group.site;b=this._getRCPValidateRequestData(d,this._approvalToken);return this._validateApprovalSession(b,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(p.hitch(this,function(a){a&&a.approvalToken&&0<a.approvalToken.length&&(this._approvalToken=a.approvalToken);d.cmdObj.approvalToken=
this._approvalToken;return rc.xhr.request(d)}))}})})},"webview/reliable/_group/Stage":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!rc/nls/grp dojo/i18n!rc/nls/systemData dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/i18n!../../nls/panelfiles dojo/on dojo/string dojo/topic rc/_base/test rc/_base/util rc/bacnet/enums rc/bacnet/property rc/reliable/_group/Stage rc/sys/hlink rc/util/notices ./DialogEdit ./io/GroupElements ../../_base/mode ../../bacnet/_widget/DialogListElement ../../bacnet/Object rc/sys/canim ../../sys/desc ../../sys/flashCompatibility ../../util/audit ../../util/pointObject ../../util/util ../../widget/EditPointDialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K){return p("webview/reliabe/_group/Stage",z,{panfileStrings:a,rcStrings:h,unsupportedFileCharacters:/\&|\*|\%|\+/g,_editableMnemonicRe:/(\d+)?((?:ai|ao|av|bi|bo|bv|blo|mi|mo|mv)(?:\d+))(:\d+)?$/i,_editPointDialog:null,_testMode:C.DEVELOPMENT,_landingPadIconSubscriptionHandler:null,constructor:function(){this.ioGrpEls&&this.ioGrpEls.destroy();this.ioGrpEls=new A},createGetDialog:function(){this._dialog||(this._dialog=new v({site:this.group.site,
system:this.system,usesPointMap:this.group.usesPointMap,requireReason:rc.session.reasonRequired()}),q.mode>=this._testMode&&this.own(b(this._dialog,"hide",m.hitch(this,this._connectKeys)),b(this._dialog,"show",m.hitch(this,this._disconnectKeys))),this._supportingWidgets.push(this._dialog));return this._dialog},createGetListElementDialog:function(){this._dialogListElement||(this._dialogListElement=new E({site:this.group.site}),this._supportingWidgets.push(this._dialogListElement));return this._dialogListElement},
pointClickHandler:function(a){var b,c,f=this.ioGrpEls.ges[a.currentTarget.index];f.isAutoTrendLogLink()?this.inherited(arguments):(f.secondaryLink&&!this._isLinkableSecondary(f.secondaryLink)&&this._hasPermissionToSecondaryLink(f)&&(f=f.secondaryLink,(c=F.mnemonicToObject(f))&&(b=this._getDetailsFromPoint(f))),b&&c&&b.property!==u.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME&&c.isEditableLinkTo(0<b.arrayIndex)?this._showEditPointDialog(b):this.inherited(arguments))},setAlarmApiPath:function(a){this.ioBkgnd.setAlarmApiPath(a)},
update:function(){return this._systemAvailable().then(m.hitch(this,function(){try{this._update()}catch(L){0==this._updating&&(this._updating=!0,window.clearTimeout(this._updateTimer),this._retryHandler.reset(),this._updateEnd())}}),m.hitch(this,function(a){0==this._updating&&(this._updating=!0,window.clearTimeout(this._updateTimer),this._retryHandler.reset(),this._updateEnd())}))},load:function(){if(!this._updateBegin())return this.hideWaiting(),null;var a=new l;D.loadOnce().then(function(){}).then(m.hitch(this,
function(){H.loadOnce(this.system).then(m.hitch(this,function(b){this._flashCompatibilityMap=b;this._loadJob(a)}),m.hitch(this,this._loadJob,a))}));a.promise.always(m.hitch(this,this.hideWaiting));return a.promise},_buildAuditLogContext:function(){var a=this.ioGrpEls.buildAuditLogContext(this.system);J.setContextData(rc.session.getSitePath(this.group.site),a,this.group.fullTitle)},_buildErrorIcon:function(){rc.session.getHideBACnetErrors()||this.inherited(arguments)},_buildFullPointName:function(a,
b,c){return"{"+a+"} "+b+" ("+c+")"},_canEdit:function(a){a.canEditAdvancedBacnet=this._canEditAdvancedBacnet(a);if(a.canEditAdvancedBacnet)return a.canEdit=!0;var b=this._isBacnetPropertyReference(a);if(b&&!this._isPropertyObjectSet(a))return a.canEdit=!1;if(a.isBacnet&&!b&&a.pointName.comType!=u.comTypes.SCHEDULE&&a.pointName.comType!=u.comTypes.CALENDAR&&(a.pointName.comType!=u.comTypes.PROGRAM||a.property!=u.propertyTypes.PROPID_PRESENT_VALUE)&&a.pointName.comType!=u.comTypes.TREND_LOG&&a.pointName.comType!=
u.comTypes.GROUP&&a.pointName.comType!=u.comTypes.ARRAY){if(null==a.bacnetStatusFlags)return a.canEdit=!1}else if(a.pointName.comType==u.comTypes.PROGRAM&&!a.isBacnet)return a.canEdit=!1;if(a.pointName.comType==u.comTypes.PROGRAM&&1===rc.sys.job.isThirdParty(a.pointName.device+"DEV"+a.pointName.device)||a.pointName.comType==u.comTypes.ARRAY&&0>a.arrayIdx||a.pointName&&a.pointName.type==u.objectTypes.OBJID_LOAD_CONTROL&&!b)return a.canEdit=!1;if(a.isKeyword&&a.textKWTitle)return a.canEdit=!0;if(a.units===
a.KW_STATIC_IMAGE&&""===a.secondaryLink)return a.canEdit=!1;var c=!0;if(this._isCheckSecurity(a))return b=a.isEnhanced?a.security:a.level,a.pointValue!==b&&(a.isRendered=!1),a.canEdit=rc.session.getAttribute("AccessLevel")>=b,rc.session.getAttribute("AccessLevel")>=b;c=0===a.role?rc.session.hasRole(rc.session.roles.operator):rc.session.hasRole(rc.session.roles.endUser);if(!c)return a.canEdit=!1;c=!0;c=[a.pointName];a.secondaryLink&&!this._isLinkableSecondary(a.secondaryLink)&&(pointObject=F.mnemonicToObject(a.secondaryLink),
c.push(pointObject));c=r.some(c,function(a){return this._hasPermissionToPoint(a)},this);a.units===a.KW_ALARMS&&(c=!rc.session.hasRole(rc.session.roles.alarmDisable));!c&&a.secondaryLink&&this._isLinkableSecondary(a.secondaryLink)&&(c=!0);b&&(c=rc.session.hasRole(rc.session.roles.bacnetAdvChg));return a.canEdit=c},_canEditAdvancedBacnet:function(a){return a.isBacnet&&rc.session.hasRole(rc.session.roles.bacnetAdvChg)&&((new w(a.property)).canAddRemoveListElement()||a.pointName.type===u.objectTypes.OBJID_EVENT_ENROLLMENT&&
(a.property===u.propertyTypes.PROPID_EVENT_PARAMETERS||a.property===u.propertyTypes.PROPID_PRESENT_VALUE)||(a.pointName.type==u.objectTypes.OBJID_COMMAND||a.pointName.type==u.objectTypes.OBJID_ACCUMULATOR||a.pointName.type==u.objectTypes.OBJID_PULSE_CONVERTER)&&a.property==u.propertyTypes.PROPID_PRESENT_VALUE)?!0:!1},_createAndDisplayEventParameterDialog:function(a){this.createGetEventParameterDialog();this._dialogEventParameter.show(a,this)},_groupElementsLoaded:function(){this.inherited(arguments);
this._buildAuditLogContext()},_getDetailsFromPoint:function(a){var b=G.getInfoFromMnemonic(a,this.group.device),c=null,f=null,d=u.propertyTypes.PROPID_PRESENT_VALUE,g=-1;null!==b?(c=F.get(F.mnemonicToObject(a)),f=b.pointMnemonic,d=b.property,g=b.arrayIndex):console.error(this.declaredClass+" - _getDetailsFromPoint(): Could not find mnemonic",a);return{descriptor:c,mnemonic:f,property:d,arrayIndex:g}},_getDisplayName:function(a){return""!==a.displayName?a.displayName:this.group.isView?a.pointName.toMnemonic():
F.getDescriptorFromMnemonic(this.system,a.mnemonic)||a.mnemonic},_getKeywordValues:function(a){var b={text:"",title:"",href:""};if(a.displayConfig!==this.DISPLAY_TYPE.BOX_COLORED&&a.displayConfig!==this.DISPLAY_TYPE.BOX_INVISIBLE&&a.displayConfig!==this.DISPLAY_TYPE.LABEL_VALUE&&a.displayConfig!==this.DISPLAY_TYPE.NAME_VALUE&&a.displayConfig!==this.DISPLAY_TYPE.LABEL_VALUE_UNITS&&a.displayConfig!==this.DISPLAY_TYPE.NAME_VALUE_UNITS&&a.displayConfig!==this.DISPLAY_TYPE.POLYGON&&a.displayConfig!==this.DISPLAY_TYPE.REPLACE_COLOR&&
a.displayConfig!==this.DISPLAY_TYPE.POLYGON_GRADIENT)return b;switch(a.units){case a.KW_PREVIOUS:b.text=c.previous;b.title=t.substitute(this._buildGotoText(a),[b.text]);break;case a.KW_TBLS:var d=a.kwPanelString+"TBLS";b.text=d;b.title=d;break;case a.KW_ALARMS:b.text=c.alarms;b.href=I.mnemonicToUri("ALARM");b.title=t.substitute(this._buildGotoText(a),[b.text]);break;case a.KW_PANFILE:b.text=this.panfileStrings.panfileKeyword;b.href=this.group.isWorkstationGroup?I.mnemonicToUri("PAN-FILE"):I.mnemonicToUri(this.group.deviceId+
"PAN-FILE");break;case a.KW_BYE:b=this._setBYEKeywordValues(b);break;case a.KW_STATIC_TEXT:this._isFilelink(a)?(b=a.getFileLink(),b=this._buildSecondaryHyperlink(b,a.hyperlink)):(G.getInfoFromMnemonic(a.secondaryLink,this.group.device),b=this._buildSecondaryKeyWord(a),""===b.text&&(b.text=a.isEnhanced?a.hyperlink:""));break;case a.KW_STATIC_IMAGE:this._isFilelink(a)?(b=a.getFileLink(),b=this._buildSecondaryHyperlink(b,a.hyperlink)):b=this._buildSecondaryKeyWord(a);break;case a.KW_HYPERLINK:d=a.isEnhanced?
a.getHyperLink():x.get(this.group.pointName.toDashMnemonic(),a.index);if(null==d){b.text="Unknown link";break}d.href&&(b.href=d.href,a.canEdit&&(b.title=t.substitute(this._buildGotoText(a),[d.text]),b.target=d.target?d.target:"_self"));b.text=f.escapeHtml(d.text);break;case a.KW_RTS:b.text=a.pointName.toMnemonic();b.href=I.mnemonicToUri(b.text);b.title=t.substitute(this._buildGotoText(a),[b.text]);break;case a.KW_RTREPORT:b.text=a.pointName.device+h.rtReport;b.href=I.mnemonicToUri(a.pointName.device+
"RT-REPORT");b.title=t.substitute(this._buildGotoText(a),[b.text]);break;case a.KW_POINTSREPORT:d=F.lookUpPointsReportName("125PRP"+a.instance);b.text=d?d:"PRP"+a.instance;b.href=I.mnemonicToUri("PRP"+a.instance);b.title=t.substitute(this._buildGotoText(a),[b.text]);break;case a.KW_POINTSREPORTWS:b.text="PRP"+a.instance,b.href=I.mnemonicToUri("PRP"+a.instance),b.title=t.substitute(this._buildGotoText(a),[b.text])}a.textKWTitle&&(b.href="",b.text=b.title=a.textKWTitle,b.title=t.substitute(this._buildEditText(a),
[a.textKWTitle]));b.href&&!this._canEdit(a)&&(b.href=null);b.title=f.unescapeHtml(b.title);return b},_getObjectValues:function(a){var b={text:"",title:"",href:""},c="";switch(a.pointName.comType){case u.comTypes.PROGRAM:this.bacnetPropObj||(b.title=a.isBacnet?this._buildGotoText(a):h.blankX,a.property==u.propertyTypes.PROPID_PRESENT_VALUE&&(b.href=f.mnemonicToUri(a.mnemonic)));break;case u.comTypes.ARRAY:0==a.units||this._supportsArrayUnits(a.pointName)?b.title=h.blankX:b.title=this._buildEditText(a);
break;case u.comTypes.OUTPUT:case u.comTypes.INPUT:case u.comTypes.VALUE:case u.comTypes.LOOP:b.title=this._buildEditText(a);break;default:if(a.isBacnet){if(this._isPropertyObjectSet(a)||this._canEditAdvancedBacnet(a)){b.title=this._buildEditText(a);break}if(a.pointName.type==u.objectTypes.OBJID_NOTIFICATION_CLASS||a.pointName.type==u.objectTypes.OBJID_DEVICE||a.pointName.type==u.objectTypes.OBJID_LOAD_CONTROL){b.title=h.blankX;break}}b.href=f.mnemonicToUri(a.mnemonic);b.title=this._buildGotoText(a)}var d=
a.pointName.toMnemonic(),g=a.displayName;this.group.isView&&""===g&&(g=d);var k=""!==g,l=k?g:F.get(a.pointName,0),n="";a.secondaryLink?this._isLinkableSecondary(a.secondaryLink)?(l="",d=a.secondaryLink,a.landingPad&&(b.href=0!==d.indexOf("http")?"http://"+d:d)):(/^[a-z]/i.test(a.secondaryLink)&&(a.secondaryLink=this.group.deviceId+a.secondaryLink),l=G.getInfoFromMnemonic(a.secondaryLink,this.group.device).isWorksheet?d:F.get(F.mnemonicToObject(a.secondaryLink)),d=a.secondaryLink,a.landingPad&&(b.href=
"#"+d)):(l.length||(l=F.get(a.pointName,1)),-1<a.arrayIdx&&(c="[ "+a.arrayIdx+" ]",l.length?(l+=c+"  ",d+=c):d+=c+"  "),this._isBacnetPropertyReference(a)&&(n=": "+a.property));b.title=t.substitute(b.title,[(l.length?l+" ("+d+")":d)+n]);d=a.pointName;if(a.isBacnetRTL){var n=Math.floor(d.instance/1E3),d=new B(d.device,n,d.instance-1E3*n),l=F.getBestName(a.pointName,a.nameLabel),m=d.toMnemonic(),n=":33";l!=m&&(l+=" ("+m+":33)");b.title=t.substitute(h.gotoX,[l+" - "+h.rc_reliable_RuntimeLog.toLowerCase()])}switch(a.displayConfig){case this.DISPLAY_TYPE.LABEL_VALUE:case this.DISPLAY_TYPE.LABEL_VALUE_UNITS:case this.DISPLAY_TYPE.NAME_VALUE:case this.DISPLAY_TYPE.NAME_VALUE_UNITS:b.text+=
(k?g:F.getBestName(d,a.nameLabel)+n+c)+" ";break;case this.DISPLAY_TYPE.ANIMATION:b.text+=(k?g:F.getBestName(d,0)+n+c)+" "}switch(a.displayConfig){case this.DISPLAY_TYPE.LABEL_VALUE:case this.DISPLAY_TYPE.LABEL_VALUE_UNITS:case this.DISPLAY_TYPE.NAME_VALUE:case this.DISPLAY_TYPE.NAME_VALUE_UNITS:case this.DISPLAY_TYPE.VALUE:case this.DISPLAY_TYPE.VALUE_UNITS:case this.DISPLAY_TYPE.ANIMATION:switch(a.pointName.comType){case u.comTypes.PROGRAM:case u.comTypes.TREND_LOG:case u.comTypes.GROUP:this._isBacnetPropertyReference(a)&&
(b.text+=a.flashObject.strValue);break;default:if(!a.isBacnet||a.pointName.type!=u.objectTypes.OBJID_DEVICE&&a.pointName.type!=u.objectTypes.OBJID_NOTIFICATION_CLASS||a.property!=u.propertyTypes.PROPID_PRESENT_VALUE)b.text+=a.flashObject.strValue}}a.decomissioned&&a.displayConfig!=this.DISPLAY_TYPE.BOX_INVISIBLE&&(b.text+="-D");b.href&&!this._canEdit(a)&&(b.href=null);b.title=f.unescapeHtml(b.title);return b},_isCheckSecurity:function(a){return!this._isBacnetPropertyReference(a)&&(a.isKeyword||a.pointName&&
("object"===typeof a.pointName&&a.pointName.isWorksheet()||a.pointName.comType===u.comTypes.GROUP||a.pointName.comType===u.comTypes.TREND_LOG||a.pointName.comType===u.comTypes.PROGRAM))},_isLinkablePoint:function(a){return a.property===u.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE||a.pointName.comType===u.comTypes.PROGRAM||this.inherited(arguments)},_landingPadIconWithEditableLinkToHandler:function(a){(a=this._getDetailsFromPoint(a))&&this._showEditPointDialog(a)},_loadGroup:function(){if(arguments.length&&
arguments[0]instanceof Error)return null;this._retryHandler.reset();var a=this._retryHandler.notifyRetry({action:m.hitch(this.ioObject,"load",this.group),retryMsg:t.substitute(h.couldNotLoad,[h.grp])+" "+h.retryingIn,failMsg:rc.session.getHideBACnetErrors()?null:t.substitute(h.communicationFail,[window.location.href])});a.then(m.hitch(this,function(){y.widget.clear();""===this.ioObject.pictureFile?this.ioObject.pictureFile="\f":this.ioObject.pictureFile.match(this.unsupportedFileCharacters)&&(this.ioObject.pictureFile=
"\f",k.publish("sticky",{type:"error",message:n.invalidBackgroundImage}));this._loadBackgroundImage()}),m.hitch(this,function(a){return new rc.Error({name:t.substitute(h.xNotFound,[h.grp]),message:this.group.replace(h.couldNotLoad)+" "+h.objNotFound,suggestion:d.objNotFoundFix,e:a})}));return a},_loadGroupElements:function(a){var b=this._retryHandler.notifyRetry({action:m.hitch(this.ioGrpEls,this.ioGrpEls.load,this.group,this.ioBkgnd),retryMsg:null,failMsg:rc.session.getHideBACnetErrors()?null:t.substitute(h.communicationFail,
[window.location.href])});b.always(m.hitch(this,this._loadGroupElementsFinished,a));return b},_setBYEKeywordValues:function(a){a=this.inherited(arguments);a.href="#";return a},_setNodeType:function(a){this.inherited(arguments);a.pointName.comType!==u.comTypes.PROGRAM||a.isBacnet||(a.nodeType=this.NODE_TYPE.noRender)},_showEditPointDialog:function(a){null===this._editPointDialog&&(this._editPointDialog=new K({title:g.editObject,system:this.system,site:this.group.site,reasonRequired:rc.session.reasonRequired()}));
a.name=this._buildFullPointName(this._deviceName,a.descriptor,a.mnemonic);this._editPointDialog.set("data",a);this._editPointDialog.show()},_suspendedUpdateRuntimevalue:function(a,b){return b},_systemAvailable:function(){var a=new l,b=webview.pathUtil.getInfo(window.location.pathname);0===b.system.length?a.resolve():rc.xhr.request({path:"SystemAvailable",type:"rest",method:"GET",systemId:Number(b.system),error:m.hitch(this,function(b){a.reject(n.currentlyUnavailable)})}).then(m.hitch(this,function(b){200===
b.data.errStatus?a.resolve():a.reject(n.currentlyUnavailable)}),m.hitch(this,function(b){a.reject(n.currentlyUnavailable)}));return a.promise},_toggleFaultIcon:function(a){rc.session.getHideBACnetFaultIcons()||this.inherited(arguments)},_update:function(){this._dialog&&this._dialog.isOpen()||!this._updateBegin()||(this._retryHandler.reset(),this._retryHandler.notifyRetry({action:m.hitch(this.ioGrpEls,this.ioGrpEls.load,this.group,this.ioBkgnd),retryMsg:null,failMsg:null}))},update:function(){return this._systemAvailable().then(m.hitch(this,
function(){try{this._update()}catch(L){0==this._updating&&(this._updating=!0,window.clearTimeout(this._updateTimer),this._retryHandler.reset(),this._updateEnd())}}),m.hitch(this,function(a){0==this._updating&&(this._updating=!0,window.clearTimeout(this._updateTimer),this._retryHandler.reset(),this._updateEnd())}))},_updateFail:function(){this._retryHandler.fail(null);this.onUpdateFail();this._updateEnd()},destroy:function(){this._dialog&&(this._dialog.destroyRecursive(),this._dialog=null);this._editPointDialog&&
(this._editPointDialog.destroy(),this._editPointDialog=null);this._landingPadIconSubscriptionHandler&&(this._landingPadIconSubscriptionHandler.remove(),this._landingPadIconSubscriptionHandler=null);this.inherited(arguments)}})})},"webview/reliable/_group/DialogEdit":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/promise/all dojo/text!./templates/DialogEdit.html rc/reliable/_group/DialogEdit rc/reliable/ReliableEnums ./io/bacnet ./DialogRelinquish ../../changeApproval/_ApprovalSessionMixin ../../widget/_PointEditAuditLoggerMixin ../../xhrEnhanced".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){return r("webview/reliable/_group/DialogEdit",[n,k,q],{propertyChangedMask:{timed:1,value:2,autoManual:4},requireReason:!1,templateString:d,webviewStrings:h,_changeMask:0,_newRequest:!1,_relinquishDialog:null,_updateDeferred:null,_writeDeferred:null,_approvalToken:null,postCreate:function(){this.inherited(arguments);this.ioBacnet=new b},_addTimedOverrideWrite:function(){this.inherited(arguments);if(2===this.ge.autoManual||0!==(this._changeMask&this.propertyChangedMask.autoManual))this._changeMask|=
this.propertyChangedMask.timedOverride},_getAutoManualStateForAuditEntry:function(){return this._autoManualState},_getBACnetPropertyForAuditEntry:function(){return this.ge.property},_getMnemonicForAuditEntry:function(){return this.ge.mnemonic},_getPointTypeForAuditEntry:function(){var b=this.ge.pointName;if(b.isInOutVar()){var c="";this.ge.isBacnet&&(b.isAnalog()||this.ge.pointName.type===a.pointTypes.RCP_ARRAY?c="analog ":b.isBinary()?c="binary ":b.isMultistate()&&(c="multistate "));c+=["output",
"input","value"][b.comType-1]}else b=b.toArray(),c=b[2<=b.length?b.length-2:0].toLowerCase();return c},_getPropertyValueForAuditEntry:function(){return this.ge.bacnetPropObj.stringValue},_getReasonForAuditEntry:function(){return this._reasonTB.get("value")},_getSaveSuccessMessage:function(){return c.successfulSave},_getStringValueForAuditEntry:function(){this._hasStates()?(strValue=this._multiStateAry[this._rangeIndex],strValue=this._unlocalizeStateValue(strValue)):strValue=this.ge.pointValue;return strValue},
_getSystemForAuditEntry:function(){return this.system},_hasPointValueChanged:function(){var a=this.inherited(arguments);a&&(this._changeMask|=this.propertyChangedMask.value);return a},_makeWriteRequest:function(a){var b=this._getBACnetValidateRequestData(a,this._approvalToken);return this._validateApprovalSession(b,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(p.hitch(this,function(b){b&&b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=b.approvalToken);a.s.approvalToken=this._approvalToken;
return rc.xhr.requestNow(a)}))},_onChangeAutoManual:function(a){this.inherited(arguments);l.toggle(this.timedContainer,"hidden",2!==a);l.toggle(this._reasonTB.domNode,"timed-hidden",2!==a);this._changeMask=this.ge.autoManual!==a?this._changeMask|this.propertyChangedMask.autoManual:this._changeMask&~this.propertyChangedMask.autoManual},_onClickOk:function(){if(this._validate()){this._approvalToken=null;this.stg.ioGrpEls._clearApprovalToken();this._writeDeferred=new m;rc.xhr.setCacheId(this.stg.group.pointName.toMnemonic()+
"_"+ ++this.stg.xhrCacheIndex);if(this.ge.bacnetPropObj)this._setBACnetPropertyValue();else{var a=[];this._updateGroupElement();this.ge.isBacnet?(this._getUpdatedBACnetProperties(a,this.ge.pointName),this._timedOverrideSupported&&this._hasTimedOverrideChanged()&&this._addTimedOverrideWrite(a),this._writeBACnetProperties(a)):(a=this._createAuditEntry(),this.stg.ioGrpEls.saveElement(this.ge).then(p.hitch(this,this._saveGroupElementComplete,a)))}g([this._writeDeferred,this._updateDeferred]).then(p.hitch(this,
function(){this._dialog.hide();this.stg.renderGroupElement(this.ge);var a=this.stg.ioGrpEls.getAllMatchingGELs(this.ge);this.ge.noUpdate=2;var b,c=a.length;for(b=0;b<c;b++){var f=a[b];f.pointValue=this.ge.pointValue;f.autoManual=this.ge.autoManual;f.bacnetStatusFlags=this.ge.bacnetStatusFlags;f.noUpdate=2;this.stg.renderGroupElement(f)}}))}else this._errorDialog.show()},_onClickRelinquish:function(){null===this._relinquishDialog?(this._relinquishDialog=new t({site:this.site,groupElement:this.ge,reasonRequired:rc.session.reasonRequired()}),
this._supportingWidgets.push(this._relinquishDialog)):this._relinquishDialog.set("groupElement",this.ge);this._relinquishDialog.show()},_saveGroupElementComplete:function(a,b){this._approvalToken=b.approvalToken;if(this._timedOverrideSupported&&this._hasTimedOverrideChanged()){var c=[];this._addTimedOverrideWrite(c);this._writeBACnetProperties(c)}else this._onWrite(a)},_onWrite:function(a){this.inherited(arguments);this._writeDeferred.resolve()},_sendPointMapUpdate:function(a){this._updateDeferred=
new m;this.usesPointMap?(p.mixin(a,{changeMask:this._changeMask,sourceMnemonic:this.ge.group.mnemonic,mnemonic:this._fullMnemonic}),f.put("UpdatePointValue",{handleAs:"json",preventCache:!0,query:{pointJson:JSON.stringify(a)}}).then(p.hitch(this,this._updateDeferred.resolve))):this._updateDeferred.resolve()},_show:function(){this.inherited(arguments);this._changeMask=0},_writeBACnetProperties:function(a){0<a.length?(this.inherited(arguments),this.usesPointMap&&this._sendPointMapUpdate({value:this.ge.pointValue,
timedOverride:this.timedOverride||0})):this._writeDeferred.resolve()},_writeBACnetProperty:function(a){this.ge.bacnetPropObj.setValue(a);var b=this.ioBacnet.getWritePropertyRequestObject(this.ge.property,this.ge.arrayIdx,this.ge.bacnetPropObj.propertyObject,-1,this.ge,this._approvalToken),b=this._getBACnetValidateRequestData(b,this._approvalToken);this._validateApprovalSession(b,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(p.hitch(this,function(b){b&&b.approvalToken&&0<b.approvalToken.length&&
(this._approvalToken=b.approvalToken);this.ioBacnet.writeProperty(this.ge.property,this.ge.arrayIdx,this.ge.bacnetPropObj.propertyObject,-1,this.ge,this._approvalToken).then(p.hitch(this,this._onWrite)).otherwise(p.hitch(this,function(a){this.ge.bacnetError=a}));this._sendPointMapUpdate({value:a,priority:-1})}),function(){})}})})},"webview/reliable/_group/io/bacnet":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred rc/bacnet/enums rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/WritePropertyMultiple rc/reliable/_group/io/bacnet ../../../sys/job".split(" "),
function(r,p,m,l,h,c,g,d,n){return r("webview/reliable/_group/io/bacnet",d,{getWritePropertyRequestObject:function(a,b,d,k,m,f,u){var q,t;if(m.isBacnet)t=m.psdDevice,q=m.pointName.type;else{t=n.getBacnetDeviceNum(m.pointName);if(-1==t)return f.reject(Error("Couldn't find device id")),f.promise;switch(m.pointName.comType){case 1:q=193;break;case 2:q=192;break;case 3:q=194}}a=[{o:new c(q,m.pointName.comInstance),pl:[{p:new h(a,l.primitiveTypes.ENUMERATED),i:-1==b?b:h(b,l.primitiveTypes.UNSIGNED_INTEGER),
v:d}]}];1<=k&&16>=k&&(a[0].pl[0].pr=new h(k,2));k=new g({device:t},a);k.dfd=f;u&&(k.approvalToken=u);return{gid:"GRP",type:"bacnet",s:k,dfd:f,index:m.index,handle:p.hitch(this,this._onWriteProperty)}},writeProperty:function(a,b,c,d,g,f){var k=new m;if(!g.isBacnet&&-1==n.getBacnetDeviceNum(g.pointName))return k.reject(Error("Couldn't find device id")),k.promise;rc.xhr.request(this.getWritePropertyRequestObject(a,b,c,d,g,k,f));return k.promise}})})},"webview/bacnet/_widget/DialogListElement":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/i18n!../../nls/errorMessages","rc/bacnet/_widget/DialogListElement","../../changeApproval/_ApprovalSessionMixin"],function(r,p,m,l,h){return r("webview/bacnet/_widget/DialogListElement",[l,h],{_getSaveSuccessMessage:function(){return m.successfulSave},_makeWriteRequest:function(c){this.site=this.stg.group.site;var g=this._getBACnetValidateRequestData(c);return this._validateApprovalSession(g).then(p.hitch(this,function(){return rc.xhr.request(c)}))}})})},"webview/sys/flashCompatibility":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/Deferred","../xhrEnhanced"],function(r,p,m,l){r=r("webview/sys/flashCompatibility",[],{systemId:-1,_systemCompatibilityMap:{},_systemRequestMap:{},load:function(h){var c=new m;"undefined"!==typeof this._systemCompatibilityMap[h]?c.resolve(this._systemCompatibilityMap[h]):l.get("job/FlashCompatibility.json",{handleAs:"json",preventCache:!0,query:{systemId:h}}).then(p.hitch(this,function(g){this._systemCompatibilityMap[h]=g;c.resolve(this._systemCompatibilityMap[h])}),p.hitch(c,
c.reject));return c.promise},loadOnce:function(h){this._systemRequestMap[h]||(this._systemRequestMap[h]=new m,this.load(h).then(p.hitch(this._systemRequestMap[h],this._systemRequestMap[h].resolve),p.hitch(this._systemRequestMap[h],this._systemRequestMap[h].reject)));return this._systemRequestMap[h].promise}});webview.FlashCompatibility||(webview.FlashCompatibility=new r);return webview.FlashCompatibility})},"webview/reliable/_RuntimeLog":function(){define("dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/string rc/_base/Error rc/reliable/_RuntimeLog".split(" "),
function(r,p,m,l,h,c,g){r.mixin(g,{_fetchSummary:function(){var d=new p,g={gid:this.gid,type:"rcp",method:"GET",cmdObj:{dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:9,xl:0,xh:0,cnt:0}},a=r.hitch(this,function(c){var g=this.isLC?1:7;c.data.length<this.RUNTIME_LOG_SIZE*this.BANK_SIZE||c.cmdObj.xl==g?d.resolve(c):(c.cmdObj.xl++,t(c).then(r.hitch(this,a),r.hitch(this,b)))}),b=r.hitch(this,function(a){d.reject(new c({name:h.substitute(m.xNotFound,[this.type]),message:this._replace(m.couldNotLoad)+
" "+h.substitute(m.hostXOffline,[this.mainController]),suggestion:l.hostOfflineFix,e:a}))}),t=r.hitch(this,function(){return rc.xhr.request(g)});t(g).then(r.hitch(this,a),r.hitch(this,b));return d.promise}});return g})},"webview/reliable/_trend/io/Header":function(){define("dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all rc/_base/Error rc/reliable/_trend/io/Header".split(" "),function(r,p,m,l,h,c){r.extend(c,{_fetch:function(c){var d=c.pointName,g=new p,a,b={gid:"TL",
type:"rcp",method:"GET",cmdObj:{dest:d.mainController,subt:d.subnetType,subd:d.subController,src:0,cmd:10,xl:Math.floor((d.comInstance-1)/this.r.BANK_SIZE),xh:0,cnt:0},load:r.hitch(this,function(b){b=b.data;if(1>b.length)b=new h({name:c._replace(m.problemInX),message:c._replace(m.couldNotLoad)+" "+m.objNotFound,suggestion:l.objNotFoundFix}),g.reject(b);else{a=c.isLC?23:48;var k=(d.comInstance-1)%this.r.BANK_SIZE*a;b=b.slice(k,k+a);g.resolve(b)}}),error:r.hitch(this,function(a){console.error("_fetch",
"error",a);g.reject(a)})};rc.xhr.request(b);return g.promise}});return c})},"webview/reliable/AlarmHistory":function(){define("dgrid/Grid dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/Pagination dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/cookie dojo/dom-class dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/alarms dojo/i18n!webview/nls/all dojo/json dojo/on dojo/query dojo/store/Cache dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./_alarm/templates/AlarmHistory.html dojox/validate rc/_base/Error rc/_base/util rc/_Widget rc/sys/alarm ./_alarm/AlarmWorksheetCommon ./_alarm/widgets/cleanupHistoryDialog/CleanupHistoryDialog ../widget/AlarmHistoryFilter ../widget/ColumnHider ../widget/dGridExtensions/dGridExcelExporterMixin ../widget/storeExtensions/JsonRest ../util/AlarmUtil dojox/validate/web ./_alarm/AlarmHistoryToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M){return c("webview/reliable/AlarmHistory",[D,H,K],{templateString:A,defaultSort:[{attribute:"time",descending:!0}],rcStrings:t,stateFlags:{ALARM:0,ACK:1,RESET:2,CLEAR:1},webviewStrings:q,_contextFilter:null,_currentQuery:{},_filteredDeviceName:"",_grid:null,_isFirstLoad:!0,_isUpdating:!1,_loadEventHandle:null,_watchNotices:[],_cleanupHistoryDialog:null,constructor:function(){this._remoteStore=new L({target:"AlarmHistory",
idProperty:"Id",path:"AlarmHistory"});this._localStore=new y(new x({idProperty:"Id"}));this._gridStore=new z(this._remoteStore,this._localStore);this._contextFilter=f.parse(sessionStorage.getItem("alarmContextFilter"));this._enforceChangeApproval=rc.session.enforceChangeApproval},postCreate:function(){if(rc.session.hasRole(rc.session.roles.alarmDisable)&&!rc.session.hasRole(rc.session.roles.viewAlarms))setTimeout(g.hitch(this,function(){var a=new E({name:t.permissionDenied,message:v.substitute(t.notAuthToViewX,
[t.theAlarmList.toLowerCase()])});this._onInitError(a)}),1);else{this.inherited(arguments);this.setUpToolbar(this.container);var a=F.load();this.own(a);a.then(g.hitch(this,this._alarmConfigLoaded));this.container.startup()}},_setCurrentQueryAttr:function(a){this._contextFilter?a.context=this._contextFilter:a.hasOwnProperty("context")&&delete a.context;a.hasOwnProperty("systems")||(a.systems=this._currentQuery.systems);a.systems||delete a.systems;this._grid&&this._grid.set("query",a);this._set("_currentQuery",
a);this._setHasFilter()},clearContext:function(){},clearDialogFilter:function(){this.set("currentQuery",{systems:this._currentQuery.systems});this._clearFilterButton.set("disabled",0===this._currentQuery.systems.length)},exportCsv:function(){this.exportToCSV(this._grid,"Alarm History.csv",this.fullTitle)},fetch:function(a){this._grid.refresh()},filter:function(){this._createFilterDlg();this.filterDialog.show()},setDialogFilter:function(a){this.set("currentQuery",a);this._clearFilterButton.set("disabled",
!a)},setSystemFilter:function(a){this.set("currentQuery",{systems:a});this._clearFilterButton.set("disabled",0===a.length&&null===this._contextFilter)},resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(g.hitch(this,function(){this._grid.resize()}),1)},print:function(){this.printDGrid(this._grid)},_alarmConfigLoaded:function(){this.isMovingColumn=!1;var a=[];""!==webview.pathUtil.currentSiteInfo.system&&(a=[Number(webview.pathUtil.currentSiteInfo.system)]);this.setSystemFilter(a);
this._createGrid();this.onInitSuccess()},_beginUpdate:function(){if(this._isUpdating)return!1;this._isUpdating=!0;this._disableButtons();this._clearNotices();return!0},_clearFilter:function(){M.clearContextData();this._contextFilter=null;this.set("currentQuery",{systems:this._currentQuery.systems});this._setTitle()},_clearNotices:function(){h.forEach(this._watchNotices,function(a){a.clear()});this._watchNotices=[]},_connectGrid:function(){this.own(d.after(this._grid,"renderRow",g.hitch(this,this._styleAlarm)),
u(this._grid,"dgrid-columnreorder",g.hitch(this,this._saveSettings)),u(this._grid,"dgrid-columnresize",g.hitch(this,this._saveSettings)),u(this._grid,"dgrid-columnstatechange",g.hitch(this,this._saveSettings)),u.once(this._grid,"dgrid-refresh-complete",g.hitch(this,this._onFetchComplete)),u.once(this._grid,"dgrid-error",g.hitch(this,this._onFetchError)),d.after(this._grid,"updateSortArrow",g.hitch(this,this._saveSettings)))},_createFilterDlg:function(){this.filterDialog||(this.filterDialog=new G,
this.own(u(this.filterDialog,"filter",g.hitch(this,this.setDialogFilter))),this.own(u(this.filterDialog,"clear",g.hitch(this,this.clearDialogFilter))))},_createGrid:function(){var a=this._mixCookieStructure();1===Object.keys(a).length&&a.hasOwnProperty("sort")&&(a=null);null===this._grid&&(this._onFetchBegin(),this._grid=new (c([r,l,I,p,m]))({columns:this._getColumnStructure(a),sort:null!==a?a.sort:this.defaultSort,store:this._gridStore,query:this._currentQuery,loadingMessage:this._getLoadingString(),
noDataMessage:this.rcStrings.noData,className:"dgrid-autoheight",pagingLinks:1,rowsPerPage:25,pageSizeOptions:[25,50,100,200,4095],isPagingGrid:!0},this.gridNode),this._setMaxPageSizeOptionHTML(),this._connectGrid())},_createToolbar:function(){this.own(u(this._toolbar,"toggleColumnsClicked",g.hitch(this,this._positionAndShowColumnSelector)),u(this._toolbar,"exportClicked",g.hitch(this,this.exportCsv)),u(this._toolbar,"filterClicked",g.hitch(this,this.filter)),u(this._toolbar,"clearFilter",g.hitch(this,
this._clearFilter)),u(this._toolbar,"systemFilter",g.hitch(this,this.setSystemFilter)));var a=rc.session.hasRole(rc.session.roles2.cleanUpAlarmHistory,!0);this._toolbar.hideCleanupButton(!a);a&&this.own(u(this._toolbar,"cleanup",g.hitch(this,this._showCleanupDialog)));this._loadButton=this._toolbar.getButton("load").domNode;this._clearFilterButton=this._toolbar.getButton("clearFilter");this._loadButton&&(this._loadEventHandle=u(this._toolbar,"loadClicked",g.hitch(this,this.fetch)),this.own(this._loadEventHandle));
this.connectExportButton();return this._toolbar},_disableButtons:function(){Object.values(this._toolbar.getPageButtons()).forEach(g.hitch(this,function(a){a.set("previousState",a.get("disabled"));a.set("disabled",!0)}))},_decodeMessageAction:function(a,b){var c=M.parseAlarmAction(b);a.actionType=c.actionType;return c.action},_denyAccess:function(){var a=new E({name:t.permissionDenied,message:v.substitute(t.notAuthToViewX,[t.theAlarmList.toLowerCase()])});this._onInitError(a)},_enableButtons:function(){Object.values(this._toolbar.getPageButtons()).forEach(g.hitch(this,
function(a){a.set("disabled",a.get("previousState"))}))},_endUpdate:function(){if(!this._isUpdating)return!1;this._isUpdating=!1;this._enableButtons();return!0},_formatAlarmAction:function(a,b){var c=a;try{var f=b.action,d=b.systemId;if(f&&f.length){f=this._decodeMessageAction(b,f);if(""===f)return"";"group"!==b.actionType||/^\d+/.test(f)||(f=b.source+f);var g=rc.sys.desc.getDescriptorFromMnemonic(d,f);g.toUpperCase()!==f.toUpperCase()&&(g+="("+f+")");var k=C.isUrl(f)?f:B.mnemonicToUri(f),h=webview.pathUtil.getInfo(window.location.pathname);
C.isUrl(f)||0!==h.system.length||(k=d+"/"+k);var l=v.substitute(t.gotoX,[g]),c="\x3ca class\x3d'linkable' href\x3d\""+k+'"\x3e'+l+"\x3c/a\x3e"}}catch(W){console.error("error in this.formatMessage ",W,c)}return c},_formatAlarmPriority:function(a,b){0===a&&(a=F.get("alarmDefaultPriority",b.type));return F.formatPriority(a)},_formatAlarmSource:function(a,b){return null!==b.sourceName?b.sourceName+" ("+a+")":a},_formatAlarmState:function(a){var c=b.clearState;a===this.stateFlags.RESET?c=b.resetState:
a===this.stateFlags.ACK?c=b.ackedState:a===this.stateFlags.ALARM&&(c=b.alarmState);return c},_formatDateTime:function(a){return a&&0!==a.length?a:t.notAvailable},_formatMessage:function(a,c){a&&(-1<a.indexOf("Alarm time")?a=a.replace("Alarm time",b.alarmTime):-1<a.indexOf("Alarm type")?a=a.replace("Alarm type",b.alarmType):-1<a.indexOf("Message")?a=a.replace("Message",b.alarmMessage):-1<a.indexOf("State")?a=a.replace("State",b.state):-1<a.indexOf("Priority")?a=a.replace("Priority",b.alarmPriority):
-1<a.indexOf("Source")?a=a.replace("Source",b.alarmSource):-1<a.indexOf("Time acknowledged")?a=a.replace("Time acknowledged",b.alarmTimeAck):-1<a.indexOf("Time reset")?a=a.replace("Time reset",b.alarmTimeReset):-1<a.indexOf("General")?a=a.replace("General",b.general):-1<a.indexOf("System")?a=a.replace("System",b.system):-1<a.indexOf("Change of State")?a=a.replace("Change of State",b.changeOfState):-1<a.indexOf("DEVICE IS OFFLINE")?a=a.replace("DEVICE IS OFFLINE",b.deviceOffline):-1<a.indexOf("SUBPANEL IS OFFLINE")?
a=a.replace("SUBPANEL IS OFFLINE",b.subpanelOffline):-1<a.indexOf("PANEL HAS NO PROGRAM")?a=a.replace("PANEL HAS NO PROGRAM",b.panelNoProgram):-1<a.indexOf("DEVICE HAS NO PROGRAM")?a=a.replace("DEVICE HAS NO PROGRAM",b.deviceNoProgram):-1<a.indexOf("PANEL IS OFFLINE")?a=a.replace("PANEL IS OFFLINE",b.panelIsOffline):-1<a.indexOf("POWER FAILURE")?a=a.replace("POWER FAILURE",b.powerFailure):-1<a.indexOf("Out of Range")?a=a.replace("Out of Range",b.outOfRange):-1<a.indexOf("Critical")?a=a.replace("Critical",
b.critica):-1<a.indexOf("Informational")?a=a.replace("Informational",b.informational):-1<a.indexOf("Offline")?a=a.replace("Offline",b.offline):-1<a.indexOf("Off-Normal")?a=a.replace("Off-Normal",b.offNormal):-1<a.indexOf("Normal")?a=a.replace("Normal",b.normal):-1<a.indexOf("Fault")?a=a.replace("Fault",b.fault):-1<a.indexOf("High limit")?a=a.replace("High limit",b.highLimit):-1<a.indexOf("Low limit")?a=a.replace("Low limit",b.lowLimit):-1<a.indexOf("Life safety alarm")&&(a=a.replace("Life safety alarm",
b.lifeSafetyAlarm)),-1<a.indexOf("HIGH")?a=a.replace("HIGH",b.messageHigh):-1<a.indexOf("LOW")?a=a.replace("LOW",b.messageLow):-1<a.indexOf("FAILED")?a=a.replace("FAILED",b.messageFailed):-1<a.indexOf("OFFLINE")&&(a=a.replace("OFFLINE",b.messageOffline)));return a},_getColumnStructure:function(a){var c=[];null===a?c=[{id:"timeCol",label:b.alarmTime,field:"time"},{id:"typeCol",label:b.alarmType,field:"type",formatter:g.hitch(this,function(a){return F.formatType(a)})},{id:"messageCol",label:b.alarmMessage,
field:"messageText",styles:"text-align: left;",formatter:g.hitch(this,this._formatMessage)},{id:"stateCol",label:b.alarmState,field:"state",formatter:g.hitch(this,this._formatAlarmState)},{id:"priorityCol",label:b.alarmPriority,field:"priority",formatter:g.hitch(this,this._formatAlarmPriority)},{id:"sourceCol",label:b.alarmSource,field:"source",formatter:g.hitch(this,this._formatAlarmSource)},{id:"systemCol",label:b.system,field:"system",hidden:!0},{id:"timeAckCol",label:b.alarmTimeAck,field:"timeAck",
styles:"text-align: center;",formatter:g.hitch(this,this._formatDateTime),hidden:!0},{id:"timeResetCol",label:b.alarmTimeReset,field:"timeReset",styles:"text-align: center;",formatter:g.hitch(this,this._formatDateTime),hidden:!0},{id:"actionCol",label:b.action,field:"action",styles:"text-align: left;",formatter:g.hitch(this,this._formatAlarmAction),hidden:!0,sortable:!1},{id:"ackedUserCol",label:k.alarmAckByUser,field:"ackedUser",hidden:!0}]:(c[a.timeCol.index]={id:"timeCol",label:b.alarmTime,field:"time",
width:a.timeCol.width,hidden:a.timeCol.hidden},c[a.typeCol.index]={id:"typeCol",label:b.alarmType,field:"type",width:a.typeCol.width,hidden:a.typeCol.hidden,formatter:g.hitch(this,function(a){return F.formatType(a)})},c[a.messageCol.index]={id:"messageCol",label:b.alarmMessage,field:"messageText",styles:"text-align: left;",width:a.messageCol.width,hidden:a.messageCol.hidden,formatter:g.hitch(this,this._formatMessage)},c[a.stateCol.index]={id:"stateCol",label:b.alarmState,field:"state",width:a.stateCol.width,
hidden:a.stateCol.hidden,formatter:g.hitch(this,this._formatAlarmState)},c[a.priorityCol.index]={id:"priorityCol",label:b.alarmPriority,field:"priority",width:a.priorityCol.width,hidden:a.priorityCol.hidden,formatter:g.hitch(this,this._formatAlarmPriority)},c[a.sourceCol.index]={id:"sourceCol",label:b.alarmSource,field:"source",width:a.sourceCol.width,hidden:a.sourceCol.hidden,formatter:g.hitch(this,this._formatAlarmSource)},c[a.systemCol.index]={id:"systemCol",label:b.system,field:"system",width:a.systemCol.width,
hidden:a.systemCol.hidden},c[a.timeAckCol.index]={id:"timeAckCol",label:b.alarmTimeAck,field:"timeAck",styles:"text-align: center;",width:a.timeAckCol.width,hidden:a.timeAckCol.hidden,formatter:g.hitch(this,this._formatDateTime)},c[a.timeResetCol.index]={id:"timeResetCol",label:b.alarmTimeReset,field:"timeReset",styles:"text-align: center;",width:a.timeResetCol.width,hidden:a.timeResetCol.hidden,formatter:g.hitch(this,this._formatDateTime)},c[a.actionCol.index]={id:"actionCol",label:b.action,field:"action",
styles:"text-align: left;",width:a.actionCol.width,hidden:a.actionCol.hidden,formatter:g.hitch(this,this._formatAlarmAction),sortable:!1},c[a.ackedUserCol.index]={id:"ackedUserCol",label:k.alarmAckByUser,field:"ackedUser",width:a.ackedUserCol.width,hidden:a.ackedUserCol.hidden});return c},_setTitle:function(a){this._alarmWorksheetCommonSetTitle(a)},_getLoadingString:function(){return'\x3cdiv class\x3d"loadingContainer"\x3e\x3cspan class\x3d"waiting"\x3e\x3c/span\x3e\x3cspan class\x3d"loadingMessage"\x3e'+
v.substitute(this.rcStrings.loadingX,[k.theAlarmHistList])+"\x3c/span\x3e\x3c/div\x3e"},_mixCookieStructure:function(){var a=n("alh"),b={};if(a)try{b=f.parse(a)}catch(Q){console.error(this.declaredClass+" - _mixCookieStructure(): Error using saved settings",Q),n("alh",null,{expires:-1,path:webview.pathUtil.currentSiteInfo.sitePath}),window.location.reload()}a&&void 0!==b.sort||(b.sort=this.defaultSort);return b},_onFetchBegin:function(){this._beginUpdate()},_onFetchComplete:function(){this._endUpdate();
this._isFirstLoad&&(this.onInitSuccess(),this._setTitle(k.alarmsHist),this._isFirstLoad=!1)},_onFetchError:function(a){this._endUpdate();this._isFirstLoad&&(this._onInitError(a),this.emit("fetchError",a),this._isFirstLoad=!1)},_saveSettings:function(){var a={},b=this._grid._columnHiderRules;h.forEach(this._grid.subRows[0],function(c,f){a[c.id]={index:f};c.hasOwnProperty("width")&&(a[c.id].width=c.width);a[c.id].hidden=b.hasOwnProperty(c.id)});a.sort=this._grid.get("sort");n("alh",f.stringify(a),{expires:365,
path:webview.pathUtil.currentSiteInfo.sitePath})},_setHasFilter:function(){this._toolbar.set("hasFilter",null!==this._contextFilter)},_setMaxPageSizeOptionHTML:function(){w(".dgrid-page-size option").forEach(g.hitch(this,function(a){"4095"===a.innerHTML&&(a.innerHTML=this.rcStrings.max)}))},_setTitle:function(a){this._alarmWorksheetCommonSetTitle(a).then(g.hitch(this,function(a){this._toolbar&&"undefined"!==typeof a&&null!==a&&this._toolbar.set("title",a);this.onSetTitle(a)}))},_showCleanupDialog:function(){null===
this._cleanupHistoryDialog&&(this._cleanupHistoryDialog=new J(this.site),this.own(u(this._cleanupHistoryDialog,"cleanupComplete",g.hitch(this,function(){this.set("currentQuery",this._currentQuery)}))));this._cleanupHistoryDialog.showDialog(this._currentQuery.systems)},_styleAlarm:function(b,c){var f=c[0];f&&(a.remove(b,"alarmRestored"),a.remove(b,"alarmAck"),a.remove(b,"alarm"),a.remove(b,"alarmClear"),f=f.state,f===this.stateFlags.RESET?a.add(b,"alarmRestored"):f===this.stateFlags.ACK?a.add(b,"alarmAck"):
f===this.stateFlags.ALARM?a.add(b,"alarm"):a.add(b,"alarmClear"));return b},formatGridDataValue:function(a,b){var c="";return c="action"===b&&null!==a[b]?M.getInnerText(this.inherited(arguments)):this.inherited(arguments)},destroy:function(){this._cleanupHistoryDialog&&(this._cleanupHistoryDialog.destroy(),this._cleanupHistoryDialog=null);this._loadEventHandle&&(this._loadEventHandle.remove(),this._loadEventHandle=null);this.inherited(arguments)}})})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/on dojo/query dojo/string dojo/has put-selector/put ../util/misc dojo/i18n!./nls/pagination dojo/_base/sniff xstyle/css!../css/extensions/Pagination.css".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){function k(b){b.noDataNode?(a(b.noDataNode,"!"),delete b.noDataNode):b.cleanup();b.contentNode.innerHTML=""}function q(b){if(b.loadingNode)a(b.loadingNode,"!"),delete b.loadingNode;else if(b._oldPageNodes){for(var c in b._oldPageNodes)b.removeRow(b._oldPageNodes[c]);delete b._oldPageNodes;b._oldPageObserver&&(b._oldPageObserver.cancel(),b._numObservers--,delete b._oldPageObserver)}delete b._isLoading}return p(r,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,
firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:t,showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);var b=this,g=this.paginationNode=a(this.footerNode,"div.dgrid-pagination"),k=this.paginationStatusNode=a(g,"div.dgrid-status"),h=this.i18nPagination;k.tabIndex=0;this._updatePaginationSizeSelect();this._updateRowsPerPageOption();k.innerHTML=d.substitute(h.status,{start:1,end:1,total:0});g=this.paginationNavigationNode=
a(g,"div.dgrid-navigation");this.firstLastArrows&&(k=this.paginationFirstNode=a(g,"span.dgrid-first.dgrid-page-link","\u00ab"),k.setAttribute("aria-label",h.gotoFirst),k.tabIndex=0);this.previousNextArrows&&(k=this.paginationPreviousNode=a(g,"span.dgrid-previous.dgrid-page-link","\u2039"),k.setAttribute("aria-label",h.gotoPrev),k.tabIndex=0);this.paginationLinksNode=a(g,"span.dgrid-pagination-links");this.previousNextArrows&&(k=this.paginationNextNode=a(g,"span.dgrid-next.dgrid-page-link","\u203a"),
k.setAttribute("aria-label",h.gotoNext),k.tabIndex=0);this.firstLastArrows&&(k=this.paginationLastNode=a(g,"span.dgrid-last.dgrid-page-link","\u00bb"),k.setAttribute("aria-label",h.gotoLast),k.tabIndex=0);this._listeners.push(c(g,".dgrid-page-link:click,.dgrid-page-link:keydown",function(a){if("keydown"!==a.type||13===a.keyCode){a=this.className;var c,f;b._isLoading||-1<a.indexOf("dgrid-page-disabled")||(c=b._currentPage,f=Math.ceil(b._total/b.rowsPerPage),this===b.paginationPreviousNode?b.gotoPage(c-
1):this===b.paginationNextNode?b.gotoPage(c+1):this===b.paginationFirstNode?b.gotoPage(1):this===b.paginationLastNode?b.gotoPage(f):"dgrid-page-link"===a&&b.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var b=this.pageSizeOptions,d=this.paginationSizeSelect,g;if(b&&b.length){d||(d=this.paginationSizeSelect=a(this.paginationNode,"select.dgrid-page-size[aria-label\x3d"+
this.i18nPagination.rowsPerPage+"]"),g=this._paginationSizeChangeHandle=c(d,"change",l.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(g));for(g=d.options.length=0;g<b.length;g++)a(d,"option",b[g],{value:b[g],selected:this.rowsPerPage===b[g]});this._updateRowsPerPageOption()}else b&&b.length||!d||(a(d,"!"),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,
b){return a-b});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var a=this.rowsPerPage,b=this.pageSizeOptions,c=this.paginationSizeSelect;c&&(0>m.indexOf(b,a)?this._setPageSizeOptions(b.concat([a])):c.value=""+a)},_setRowsPerPage:function(a){this.rowsPerPage=a;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(){function f(b,f){var d,g;k.pagingTextBox&&b==n&&1<p?(d=a(l,"input.dgrid-page-input[type\x3dtext][value\x3d$]",n),d.setAttribute("aria-label",
h.jumpPage),k._pagingTextBoxHandle=c(d,"change",function(){var a=+this.value;!isNaN(a)&&0<a&&a<=p&&k.gotoPage(+this.value)}),r&&"INPUT"===r.tagName&&d.focus()):(g=b===n,d=a(l,"span"+(g?".dgrid-page-disabled":"")+".dgrid-page-link",b+(f?" ":"")),d.setAttribute("aria-label",h.gotoPage),d.tabIndex=g?-1:0,D===b&&(g?b<p?D++:F.focus():d.focus()),g||(F=d))}function d(b,c){a(b,(c?".":"!")+"dgrid-page-disabled");b.tabIndex=c?-1:0}var k=this,h=this.i18nPagination,l=this.paginationLinksNode,n=this._currentPage,
m=this.pagingLinks,q=this.paginationNavigationNode,p=Math.ceil(this._total/this.rowsPerPage),t=this._pagingTextBoxHandle,r=document.activeElement,D,F;r&&b.contains(this.paginationNavigationNode,r)?"dgrid-page-link"===r.className&&(D=+r.innerHTML):r=null;t&&t.remove();l.innerHTML="";g(".dgrid-first, .dgrid-previous",q).forEach(function(a){d(a,1===n)});g(".dgrid-last, .dgrid-next",q).forEach(function(a){d(a,n>=p)});if(m&&0<p){f(1,!0);q=n-m;for(2<q?a(l,"span.dgrid-page-skip","..."):q=2;q<Math.min(n+
m+1,p);q++)f(q,!0);n+m+1<p&&a(l,"span.dgrid-page-skip","...");1<p&&f(p)}else k.pagingTextBox&&f(n);r&&-1===r.tabIndex&&(m=g("[tabindex\x3d'0']",this.paginationNavigationNode),r===this.paginationPreviousNode||r===this.paginationFirstNode?r=m[0]:m.length&&(r=m[m.length-1]),r&&r.focus())},refresh:function(){var a=this;this.inherited(arguments);if(this.store)return this.gotoPage(1).then(function(b){setTimeout(function(){c.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a,results:b})},
0);return b})},_onNotification:function(a){a.length!==this._rowsOnPage&&this.gotoPage(this._currentPage)},renderArray:function(a,b){var c=this,f=this.inherited(arguments);this._lastCollection=null;b||(this._topLevelRequest&&this._topLevelRequest!==a&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof a.cancel&&(this._topLevelRequest=a),h.when(a,function(){c._topLevelRequest&&delete c._topLevelRequest}));return f},insertRow:function(){var a=this._oldPageNodes,b=this.inherited(arguments);
a&&b===a[b.id]&&delete a[b.id];return b},gotoPage:function(b){var c=this,f=new h;this._trackError(function(){var g=c.rowsPerPage,m=(b-1)*g,p=l.mixin(c.get("queryOptions"),{start:m,count:g}),t,u=c.contentNode,r,w,B;if(c.showLoadingMessage)k(c),r=c.loadingNode=a(u,"div.dgrid-loading"),r.innerHTML=c.loadingMessage;else{c._oldPageNodes=r={};u=u.children;w=0;for(B=u.length;w<B;w++)r[u[w].id]=u[w];c._oldPageObserver=c.observers.pop()}c._isLoading=!0;t=c.store.query(c.query,p);h.when(c.renderArray(t,null,
p),function(k){q(c);c.scrollTo({y:0});h.when(t.total,function(f){f||(c.noDataNode&&(a(c.noDataNode,"!"),delete c.noDataNode),c.noDataNode=a(c.contentNode,"div.dgrid-no-data"),c.noDataNode.innerHTML=c.noDataMessage);c.paginationStatusNode.innerHTML=d.substitute(c.i18nPagination.status,{start:Math.min(m+1,f),end:Math.min(f,m+g),total:f});c._total=f;c._currentPage=b;c._rowsOnPage=k.length;c._updateNavigation()});(7>n("ie")||n("ie")&&n("quirks"))&&c.resize();f.resolve(t)},function(a){q(c);f.reject(a)});
return f.promise})||f.reject();return f.promise}})})},"dojo/store/Cache":function(){define(["../_base/lang","../when"],function(r,p){var m=function(l,h,c){c=c||{};return r.delegate(l,{query:function(g,d){var n=l.query(g,d);n.forEach(function(a){c.isLoaded&&!c.isLoaded(a)||h.put(a)});return n},queryEngine:l.queryEngine||h.queryEngine,get:function(c,d){return p(h.get(c),function(g){return g||p(l.get(c,d),function(a){a&&h.put(a,{id:c});return a})})},add:function(c,d){return p(l.add(c,d),function(g){h.add(g&&
"object"==typeof g?g:c,d);return g})},put:function(c,d){h.remove(d&&d.id||this.getIdentity(c));return p(l.put(c,d),function(g){h.put(g&&"object"==typeof g?g:c,d);return g})},remove:function(c,d){return p(l.remove(c,d),function(g){return h.remove(c,d)})},evict:function(c){return h.remove(c)}})};r.setObject("dojo.store.Cache",m);return m})},"webview/reliable/_alarm/widgets/cleanupHistoryDialog/CleanupHistoryDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../../../nls/alarmHistoryCleanup dojo/i18n!../../../../nls/all dojo/i18n!../../../../nls/errorMessages dojo/i18n!../../../../nls/remoteAlarmNotifications dojo/on dojo/string dojo/text!./templates/CleanupHistoryDialog.html dojo/topic rc/util/notices ./CleanupHistoryProgressDialog ./_DialogPresenter ./_DialogRequests ../../../../widget/WarningDialog ../../../../widget/WarningDialogEnums dijit/form/Button dijit/form/RadioButton dijit/form/ValidationTextBox ../../../../admin/widget/HelpLink ../../../../widget/form/PopupSelectorWithTags".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x){return p("webview/reliable/CleanupHistoryDialog",[r],{alarmCleanupStrings:c,errorStrings:d,rcStrings:h,systemStrings:n,templateString:t,webviewStrings:g,_cleanupHistoryProgressDialog:null,_configurationDeferred:null,_dialogPresenter:null,_permittedSystems:null,_selectedSystems:null,_confirmCleanupDialog:null,constructor:function(a){this.site=a},postCreate:function(){this._cleanupHistoryProgressDialog=new f;this._dialogPresenter=new u(this,new w(this.site));
this.inherited(arguments);this._setupListeners()},_getAutomaticEnabledAttr:function(){return this.enableRadio.get("checked")},_setAutomaticEnabledAttr:function(a){this.enableRadio.set("checked",a);this.disableRadio.set("checked",!a)},_getAutomaticFieldsValidatedAttr:function(){return this.automaticAgeInput.validate()&&this.automaticTimeInput.validate()},_setAutomaticFieldsVisibleAttr:function(a){l.toggle(this.automaticCleanupConfig,"hidden",a)},_setAutomaticInputDisabledAttr:function(a){this.automaticAgeInput.set("disabled",
a);this.automaticTimeInput.set("disabled",a)},_getAutomaticPurgeAgeAttr:function(){return this.automaticAgeInput.get("value")},_setAutomaticPurgeAgeAttr:function(a){this.automaticAgeInput.set("value",a)},_getAutomaticPurgeTimeAttr:function(){return this.automaticTimeInput.get("value")},_setAutomaticPurgeTimeAttr:function(a){this.automaticTimeInput.set("value",a)},_setCleanupButtonDisabledAttr:function(a){this.cleanupNowButton.set("disabled",a)},_setHistorySizeAttr:function(a){this.alarmHistorySizeLabel.innerText=
b.substitute(this.alarmCleanupStrings.historySize,[a.recordCount,a.dataSize])},_getManualAgeIsValidAttr:function(){return this.manualAgeInput.validate()},_getManualPurgeAgeAttr:function(){return this.manualAgeInput.get("value")},_setOkButtonDisabledAttr:function(a){this.okButton.set("disabled",a)},_setPermittedSystemsAttr:function(a){this.systemSelector.set("itemList",a)},_getSelectedSystemsAttr:function(){return this.systemSelector.get("selectedItems")||[]},_setSelectedSystemsAttr:function(a){this.systemSelector.set("selectedItems",
a)},_getDeletedCount:function(){this._dialogPresenter.recordCountPreCheck(this,this._showConfirmationDialog)},onCancel:function(){this.hide()},onCleanupComplete:function(){this._cleanupHistoryProgressDialog.hide();q.widget.clear();k.publish("alert",{type:"success",message:this.alarmCleanupStrings.cleanupComplete})},onCleanupError:function(){this._cleanupHistoryProgressDialog.hide();q.widget.clear();k.publish("sticky",{type:"error",message:this.errorStrings.unexpectedError})},onCleanupStarted:function(a){this._cleanupHistoryProgressDialog.show(a)},
onCleanupInProgress:function(a){this._cleanupHistoryProgressDialog.showStatus(a)},onCleanupProgressComplete:function(){this._cleanupHistoryProgressDialog.showCompleted()},onHelp:function(){this._dialogPresenter.onHelp()},onOkClicked:function(){this._dialogPresenter.onOkClicked()},setAutomaticPurgeTimeDefault:function(){this.set("automaticPurgeTime",this.automaticTimeInput.placeholder)},setAutomaticPurgeAgeDefault:function(){this.set("automaticPurgeAge",this.automaticAgeInput.placeholder)},showDialog:function(a){this.set("okButtonDisabled",
!0);this.manualAgeInput.set("value",this.manualAgeInput.placeholder);this._dialogPresenter.refresh(a)},_setupListeners:function(){this.manualAgeInput.set("value",this.manualAgeInput.placeholder);this._cleanupHistoryProgressDialog.on("closed",m.hitch(this._dialogPresenter,this._dialogPresenter.onProgressDialogClosed));this.enableRadio.watch("checked",m.hitch(this._dialogPresenter,this._dialogPresenter.onAutomaticCleanupEnabled));this.enableRadio.watch("checked",m.hitch(this._dialogPresenter,this._dialogPresenter.onAutomaticFieldsChanged));
this.own(a(this.automaticAgeInput,"keyup",m.hitch(this._dialogPresenter,this._dialogPresenter.onAutomaticFieldsChanged)));this.own(a(this.automaticTimeInput,"keyup",m.hitch(this._dialogPresenter,this._dialogPresenter.onAutomaticFieldsChanged)));this.own(a(this.automaticAgeInput,"keydown",m.hitch(this._dialogPresenter,this._dialogPresenter.numericalValidator)));this.own(a(this.manualAgeInput,"keydown",m.hitch(this._dialogPresenter,this._dialogPresenter.numericalValidator)));this.manualAgeInput.watch("value",
m.hitch(this._dialogPresenter,this._dialogPresenter.onManualFieldsChanged));this.systemSelector.watch("selectedItems",m.hitch(this._dialogPresenter,this._dialogPresenter.onManualFieldsChanged))},_showConfirmationDialog:function(c){null===this._confirmCleanupDialog&&(this._confirmCleanupDialog=new z({type:x.types.binaryConfirm,title:this.alarmCleanupStrings.confirmCleanupTitle,text:this.alarmCleanupStrings.confirmCleanup}),this.own(this._confirmCleanupDialog),this.own(a(this._confirmCleanupDialog,
"oneOrYesEvent",m.hitch(this._dialogPresenter,this._dialogPresenter.onCleanupNow))));c=b.substitute(this.alarmCleanupStrings.confirmCleanup,[c.Count]);this._confirmCleanupDialog.set("text",c);this._confirmCleanupDialog.open()},destroy:function(){this._dialogPresenter.destroy();this.inherited(arguments)}})})},"webview/reliable/_alarm/widgets/cleanupHistoryDialog/CleanupHistoryProgressDialog":function(){define("dijit/Dialog dojo/_base/declare dojo/dom-class dojo/i18n!../../../../../rc/nls/all dojo/i18n!../../../../nls/alarmHistoryCleanup dojo/i18n!../../../../nls/errorMessages dojo/text!./templates/CleanupHistoryProgressDialog.html".split(" "),
function(r,p,m,l,h,c,g){return p("webview/reliable/CleanupHistoryProgressDialog",[r],{alarmCleanupStrings:h,errorStrings:c,webviewAllStrings:l,templateString:g,totalRecords:0,postCreate:function(){this.inherited(arguments);this._resetProgress()},onCancel:function(){this.emit("closed",{});this.hide()},onHide:function(){this._resetProgress()},show:function(c){this.inherited(arguments);0<Number(c)?(m.remove(this.progressText,"hidden"),m.remove(this.progressRemark,"hidden"),this.totalRecords=c,this.showStatus(c)):
(m.add(this.progressText,"hidden"),m.add(this.progressRemark,"hidden"),this.totalRecords=0)},showCompleted:function(){this.showStatus(0)},showStatus:function(c){0==this.totalRecords||isNaN(c)||(this.progressText.innerHTML=Number(this.totalRecords)-Number(c)+"/"+this.totalRecords)},_resetProgress:function(){this.progressText.innerHTML=""}})})},"webview/reliable/_alarm/widgets/cleanupHistoryDialog/_DialogPresenter":function(){define(function(){return function(r,p){return{_autoChanged:!1,_checkStatusRunning:!1,
_dialogView:r,_firstLoad:!0,_dataRequested:!1,_operationInProgress:null,_progressDialogClosed:!1,_requestManager:p,_statusCheckInterval:1E3,_statusCheckIntervalHandle:null,refresh:function(m){this._dataRequested=!1;this._checkHideBottomButtons();this._currentSystemFilter=m;this._requestManager.getCleanupConfiguration(this,this._fillFields)},onAutomaticFieldsChanged:function(){this._firstLoad||(this._autoChanged=!0);this._validateAutomaticFields(this._dataRequested)},onAutomaticCleanupEnabled:function(){var m=
this._dialogView.get("automaticPurgeTime");m&&0!=m.length||this._dialogView.setAutomaticPurgeTimeDefault();(m=this._dialogView.get("automaticPurgeAge"))&&0!=m.length||this._dialogView.setAutomaticPurgeAgeDefault()},onCleanupNow:function(){this._progressDialogClosed=!1;if(this._validateManualFields()){var m=this._getCleanUpNowRequestData();this._requestManager.cleanupNow(m,this,this._cleanupStarted)}},onHelp:function(){window.open("Help/Index/alarmhistorycleanup","_blank")},onManualFieldsChanged:function(){this._validateManualFields()},
onOkClicked:function(){if(!0!==this._automaticDisabled&&!0===this._autoChanged){if(this._validateAutomaticFields(!1)){var m=Number(this._dialogView.get("automaticPurgeAge"));0>m&&(m=null);m={enabled:this._dialogView.get("automaticEnabled"),purgeAgeMonths:m,purgeTime24h:this._dialogView.get("automaticPurgeTime")};this._requestManager.setCleanupConfiguration(m,this._dialogView,this._dialogView.hide)}}else this._dialogView.hide()},onProgressDialogClosed:function(){this._clearStatusCheckInterval();this._progressDialogClosed=
!0},recordCountPreCheck:function(m,l){if(this._validateManualFields()){var h={purgeAge:Number(this._dialogView.get("manualPurgeAge")),systems:this._dialogView.get("selectedSystems")};this._requestManager.getNumberRecords(h,m,l)}},_checkHideBottomButtons:function(){var m=rc.session._attributes.permittedSystems[0].siteId,m=rc.session._attributes.SiteMapArray.map(function(l){return l.siteId}).indexOf(m);rc.session._attributes.SiteMapArray[m].systems.forEach(function(l,h){var c=l.systemId;-1===rc.session._attributes.permittedSystems.map(function(c){return c.id}).indexOf(c)&&
(document.getElementById("okCancelDiv").style.display="none")})},_cleanupStarted:function(m){var l=this._getCleanUpNowRequestData();this._taskData=m;this._taskData.purgeAge=l.purgeAge;this._taskData.systems=l.systems;this._requestManager.checkStatus(this._taskData,this,this._statusCheck);this._statusCheckIntervalHandle=setInterval(function(h){return function(){!0!==h._checkStatusRunning&&h._requestManager.checkStatus(h._taskData,h,h._statusCheck)}}(this),this._statusCheckInterval)},_clearStatusCheckInterval:function(){window.clearInterval(this._statusCheckIntervalHandle);
this._operationInProgress=this._statusCheckIntervalHandle=null},_fillFields:function(m){m.historySize&&this._updateHistorySize(m.historySize);this._updateAutomaticConfiguration(m.automaticConfig);m.permittedSystems&&(this._dialogView.set("permittedSystems",m.permittedSystems),this._dialogView.set("selectedSystems",this._currentSystemFilter));this._validateAutomaticFields(!1);this._dialogView.show();this._firstLoad=!1;this._dataRequested=!0},_getCleanUpNowRequestData:function(){return{purgeAge:Number(this._dialogView.get("manualPurgeAge")),
systems:this._dialogView.get("selectedSystems")}},_hasSelectedSystems:function(){return 0<this._dialogView.get("selectedSystems").length},numericalValidator:function(m){var l=95<m.which&&106>m.which||47<m.which&&58>m.which||8===m.which||13===m.which||37===m.which||39===m.which||8==m.which;!m.shiftKey&&l||m.preventDefault()},_statusCheck:function(m){if(!0!==this._checkStatusRunning&&!0!==this._progressDialogClosed){this._checkStatusRunning=!0;try{var l=Number(m.operationStatus);if(1===l)if(null===
this._operationInProgress)this._operationInProgress=!0,this._dialogView.onCleanupStarted(m.recordsToClean);else this._dialogView.onCleanupInProgress(m.recordsToClean);else 2===l?(this._dialogView.onCleanupProgressComplete(),m.historySize&&this._updateHistorySize(m.historySize),this._clearStatusCheckInterval(),this._dialogView.onCleanupComplete()):3==l&&(this._clearStatusCheckInterval(),this._dialogView.onCleanupError())}catch(h){this._clearStatusCheckInterval(),this._dialogView.onCleanupError()}this._checkStatusRunning=
!1}},_updateAutomaticConfiguration:function(m){this._dialogView.set("automaticFieldsVisible",null===m);m?(this._dialogView.set("automaticEnabled",m.enabled),this._dialogView.set("automaticPurgeAge",m.purgeAge),this._dialogView.set("automaticPurgeTime",m.purgeTime)):this._automaticDisabled=!0},_formatBytes:function(m){return 1024>m?m+" Bytes":1048576>m?(m/1024).toFixed(2)+" KB":1073741824>m?(m/1048576).toFixed(2)+" MB":(m/1073741824).toFixed(2)+" GB"},_updateHistorySize:function(m){m.dataSize=this._formatBytes(1024*
m.dataSize);this._dialogView.set("historySize",m)},_validateAutomaticFields:function(m){var l=this._dialogView.get("automaticEnabled");this._dialogView.set("automaticInputDisabled",!l);l=!l||this._dialogView.get("automaticFieldsValidated");1==m&&this._dialogView.set("okButtonDisabled",!l);return l},_validateManualFields:function(){var m=this._dialogView.get("manualAgeIsValid")&&this._hasSelectedSystems();this._dialogView.set("cleanupButtonDisabled",!m);return m},destroy:function(){this._requestManager=
null}}}})},"webview/reliable/_alarm/widgets/cleanupHistoryDialog/_DialogRequests":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!../../../../nls/errorMessages dojo/topic rc/util/notices ../../../../changeApproval/_ApprovalSessionMixin ../../../../xhrEnhanced".split(" "),function(r,p,m,l,h,c,g){return r("webview/reliable/_alarm/widgets/cleanupHistoryDialog/RequestManager",[c],{constructor:function(c){this.site=c},checkStatus:function(c,h,a){g.get("CheckCleanupStatus",{handleAs:"json",
preventCache:!0,query:c}).then(p.hitch(h,a),p.hitch(this,this._onError))},cleanupNow:function(c,h,a){this._validateApprovalSessionWithReason(c).then(p.hitch(this,function(){g.post("CleanupAlarmHistoryNow",{handleAs:"json",preventCache:!0,data:c}).then(p.hitch(h,a),p.hitch(this,this._onError))}),function(){})},getCleanupConfiguration:function(c,h){g.get("GetAlarmHistoryCleanupConfiguration",{handleAs:"json",preventCache:!0}).then(p.hitch(this,this._hasConfiguration,p.hitch(c,h)),p.hitch(this,this._onError))},
getNumberRecords:function(c,h,a){g.get("GetRecordsDeletedCount",{handleAs:"json",preventCache:!0,query:c}).then(p.hitch(h,a),p.hitch(this,this._onError))},setCleanupConfiguration:function(c,h,a){this._validateApprovalSessionWithReason(c).then(p.hitch(this,function(){g.put("SetAlarmHistoryCleanupConfiguration",{handleAs:"json",preventCache:!0,data:c}).then(p.hitch(this,this._checkResponse,p.hitch(h,a)),p.hitch(this,this._onError))}),function(){})},_checkResponse:function(c,g){g&&200===g.errStatus?
c&&c(g):this._onError()},_hasConfiguration:function(c,g){g&&!g.errStatus?c(g):this._onError()},_onError:function(){h.widget.clear();l.publish("sticky",{type:"error",message:m.unexpectedError})}})})},"webview/admin/widget/HelpLink":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/Tooltip dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/i18n!../../nls/all dojo/text!./templates/HelpLink.html".split(" "),function(r,p,m,l,h,c,g,d){return l("webview/admin/widget/HelpLink",[p,r],{helpText:"",
hideDelay:3E3,label:"",required:!1,showDelay:2E3,showingTooltip:!1,templateString:d,tooltip:null,webviewStrings:g,_isLabel:!0,postCreate:function(){this.inherited(arguments);this.tooltip=new m({connectId:this.id,label:this.helpText,hideDelay:this.hideDelay,showDelay:this.showDelay})},_setHelpTextAttr:function(c){this.tooltip&&this.tooltip.set("label",c);this._set("helpText",c)},_setLabelAttr:function(d){c.toggle(this.requiredNode,"hidden",!this.required);this._isLabel&&(d+=":");h.set(this.labelNode,
"innerHTML",d);this._set("label",d)},_setRequiredAttr:function(d){c.toggle(this.requiredNode,"hidden",!d);this._set("required",d)},onClick:function(){this.tooltip.open(this.domNode);this.tooltip.set("state","HIDE TIMER")},destroy:function(){this.tooltip.destroy();this.inherited(arguments)}})})},"webview/widget/form/PopupSelectorWithTags":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/CheckedMenuItem dijit/form/DropDownButton dijit/popup dojo dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/Evented dojo/has dojo/i18n!webview/nls/all dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/PopupSelectorWithTags.html dojo/window rc/_base/util ../DijitMenu ../ChecklistButton ../../widget/SystemTag dojo/sniff ./MultiSelector".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F){return n("webview/widget/form/PopupSelectorWithTags",[p,r,m,u],{templateString:A,webviewStrings:z,selectedItems:null,_itemStore:null,_itemLabel:null,_itemTags:null,_maxTags:1,selector:null,constructor:function(){this._itemTags=[];this._itemStore=new y;this.itemSelector=new D({list:[]})},postCreate:function(){this.inherited(arguments);this.own(x(this.tagContainer,"click",a.hitch(this,this._onShowSelector)));this.own(x(this.itemSelector,
"editEnd",a.hitch(this,this._onSelectorChanged)));q.place(this.itemSelector.domNode,this.selectorContainer,"first")},_setItemListAttr:function(a){this._itemStore.setData(a);this.itemSelector.set("itemList",a)},_getSelectedItemsAttr:function(){return this.selectedItems},_setSelectedItemsAttr:function(a){this.itemSelector.setMultiple(a,!0);this._updateSelectedItemDisplay(a);this._set("selectedItems",a)},_buildItemTag:function(b){b=this._itemStore.query({id:b})[0];var c=new F({value:b.id,name:b.name,
title:b.name});this.own(x(c,"clickRemove",a.hitch(this,function(a){this._removeItemFromSelection(a.value);c.destroy()})));this._itemTags.push(c);this.itemTags.appendChild(c.domNode)},_onShowSelector:function(){this._toggleSelectorDisplay(!0);this.itemSelector.focus()},_onSelectorChanged:function(a){this._toggleSelectorDisplay(!1);this.set("selectedItems",a)},_showSelectedItemTags:function(b){d.forEach(this._itemTags,function(a){a.destroyRecursive()});this._itemTags=[];d.forEach(b,a.hitch(this,this._buildItemTag));
this._toggleTagDisplay(!0)},_updateSelectedItemDisplay:function(a){a&&0!==a.length?a.length>this._maxTags?this._showSelectedLabel(a.length+" "+this._itemLabel):this._showSelectedItemTags(a):this._showSelectedLabel(z.none)},_removeItemFromSelection:function(a){a=this.selectedItems.indexOf(a);this.selectedItems.splice(a,1);this.set("selectedItems",this.selectedItems)},_showSelectedLabel:function(a){this.selectedItemsLabel.innerText=a;this._toggleTagDisplay(!1)},_toggleSelectorDisplay:function(a){k.toggle(this.selectorContainer,
"hidden",!a);k.toggle(this.tagContainer,"hidden",a)},_toggleTagDisplay:function(a){k.toggle(this.itemTags,"hidden",!a);k.toggle(this.selectedItemsLabel,"hidden",a)}})})},"webview/widget/SystemTag":function(){define("dijit/_TemplatedMixin dijit/_Widget dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/i18n!rc/nls/all dojo/text!./templates/SystemTag.html ../util/util".split(" "),function(r,p,m,l,h,c,g,d){return m("webview/widget/SystemTag",[p,r],{baseClass:"",templateString:g,field:"",row:null,showRemove:!1,
title:"",_setTitleAttr:{node:"containerNode",attribute:"title"},postCreate:function(){this.value=this.value.value||this.value;this.showRemove&&h.remove(this.removeNode,"hidden")},_setNameAttr:function(d){l.set(this.nameContainer,"innerHTML",d);l.set(this.removeNode,"title",c.remove+' "'+d+'"');this._set("name",d)},_setShowRemoveAttr:function(c){h.toggle(this.removeNode,"hidden",!c);this._set("showRemove",c)},_onClick:function(c){d.stopEvent(c);this.onClick(this.get("value"))},onClick:function(){},
_onClickRemove:function(c){d.stopEvent(c);this.onClickRemove(this.get("value"))},onClickRemove:function(){},_getValueAttr:function(){return{field:this.field,value:this.value,row:this.row}}})})},"webview/widget/AlarmHistoryFilter":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/date/locale dojo/dom-attr dojo/dom-style dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/alarms dojo/i18n!webview/nls/all dojo/store/Memory dojo/store/Observable dojo/text!webview/widget/templates/AlarmHistoryFilter.html rc/sys/alarm dijit/Dialog dijit/form/Button dijit/form/RadioButton rc/widget/DateTextBox ./MultiSelectBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x){return c("webview/widget/AlarmHistoryFilter",[p,r,m],{templateString:z,additionalFilters:{states:[{label:k.all,value:"*"},{label:k.alarm,value:"alarm"},{label:k.ack,value:"ack"},{label:q.reset,value:"reset"},{label:k.clear,value:"clear"}],dialog:null,dateTypeSelector:null,priorities:[],filterObject:{},rcStrings:k,types:[],webviewAlarmStrings:q,webviewStrings:f},constructor:function(){this.webviewAlarmStrings=q;this.rcStrings=k;this.webviewStrings=f},
postCreate:function(){this.inherited(arguments);this._createDateTypeSelect();this._createConfigFilters();this.reset();this.dialog.set("title",q.filterAlarmHistory)},reset:function(){this.dateTypeSelector.set("value","time");var a=new Date;this.startDate.set("value",a);a=new Date(a.setDate(a.getDate()+1));this.endDate.set("value",a);this._setStateFiltering()},_setStateFiltering:function(){this.stateRadio.set("checked",!0);this.multiSelect.replaceAll(this.additionalFilters.states)},_createConfigFilters:function(){var a=
[],b=[];if(x.data){for(var a=x.data.alarmPriorityName,b=x.data.alarmName,c=0;c<b.length;c++)-1<b[c].indexOf("System")?b[c]=b[c].replace("System",t.system):-1<b[c].indexOf("General")&&(b[c]=b[c].replace("General",t.general)),-1<a[c].indexOf("Warning")?a[c]=a[c].replace("Warning",t.warning):-1<a[c].indexOf("Critical")?a[c]=a[c].replace("Critical",t.critical):-1<a[c].indexOf("Informational")&&(a[c]=a[c].replace("Informational",t.informational));for(;c<a.length;c++)-1<a[c].indexOf("Warning")?a[c]=a[c].replace("Warning",
t.warning):-1<a[c].indexOf("Critical")?a[c]=a[c].replace("Critical",t.critical):-1<a[c].indexOf("Informational")&&(a[c]=a[c].replace("Informational",t.informational))}c=g.hitch(this,function(a,b){for(var c,f=0;f<a.length;f++)c=a[f],c=c.length?c:f,this.additionalFilters[b].push({label:c,value:f})});c(a,"priorities");c(b,"types")},_onChangeAdditional:function(b){(b=a.get(b.target,"data-additional-name"))&&b.length&&this.multiSelect.replaceAll(this.additionalFilters[b])},_createDateTypeSelect:function(){var a=
new w(new u({data:[{name:q.alarmDate,id:"time"},{name:q.acknowledgedDate,id:"timeAck"},{name:q.resetDate,id:"timeReset"}]}));this.dateTypeSelector=new l({style:{width:"11em"},store:a,searchAttr:"name",required:!1,baseClass:"rcSelectBox"},this.dateSelectNode)},show:function(){this.dialog.show();var a=d(".dijitDialogUnderlay");b.set(a[0],{opacity:0,filter:"alpha(opacity\x3d0)"})},hide:function(){this.reset();this.dialog.hide()},clear:function(){this.reset();this.onClear()},onClear:function(){},onClickClear:function(){this.clear()},
_onClickOK:function(){this._buildQuery();this.hide()},_buildQuery:function(){this.filterObject={};var a=this.dateTypeSelector.get("value");a&&(this.filterObject.dateType=a);if(a=this.startDate.get("value"))this.filterObject.startDate=n.format(a,{selector:"date",datePattern:"yyyy-MM-dd"});if(a=this.endDate.get("value"))this.filterObject.endDate=n.format(a,{selector:"date",datePattern:"yyyy-MM-dd"});var b;this.stateRadio.get("checked")?b=this.stateRadio.get("value"):this.priorityRadio.get("checked")?
b=this.priorityRadio.get("value"):this.typeRadio.get("checked")&&(b=this.typeRadio.get("value"));a=this.multiSelect.getSelectedItems();if(a.length){var c=[];h.forEach(a,function(a){c.push(a.value)});this.filterObject[b]=c}this.onFilter(this.filterObject)},onFilter:function(a){return a},_onClickCancel:function(){this.clear();this.hide()}})})},"dojo/_base/query":function(){define(["../query","./NodeList"],function(r){return r})},"webview/widget/MultiSelectBox":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!webview/nls/all dojo/on dojo/text!webview/widget/templates/MultiSelectBox.html dijit/_TemplatedMixin dijit/_Widget".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return p("webview/widget/MultiSelectBox",[t,b],{templateString:a,options:null,baseClass:"",fieldLabel:"",maxSize:5,showLabel:!0,_lastIndex:-1,_connectHandles:null,postCreate:function(){this.inherited(arguments);this.showLabel||h.add(this.selectBoxLabel,"hidden");this._connectHandles=[];this._setAttributes();this.addMultipleOptions(this.options,!1)},_setAttributes:function(){null===this.options&&(this.options=[]);this.maxSize<this.options.length&&(this.maxSize=this.options.length);
""===this.baseClass&&(this.baseClass="multiSelectBox");""!==this.fieldLabel&&this.setLabel(void 0!==d[this.fieldLabel]?d[this.fieldLabel]:this.fieldLabel);this.setSize(this.maxSize)},setLabel:function(a){l.set(this.selectBoxLabel,"innerHTML",a)},setHint:function(a){l.set(this.msHintLabel,"innerHTML",a)},getLabelFromId:function(a){return r.filter(this.options,function(b){return b.value===a})[0].label},setSize:function(a){1>a?console.error("MultiSelectBox.js - setSize(): Size cannot be set to less than 1",
a):(this.maxSize=a,this.options.length>a?g.set(this.multiSelectWrapper,{height:1.7*this.maxSize+"em"}):g.set(this.multiSelectWrapper,{height:""}))},getSelectedItems:function(){return r.filter(this.options,function(a){return a.selected})},addMultipleOptions:function(a,b){r.forEach(a,m.hitch(this,function(a){if(!this.addOption(a,b))return!1}));return!0},addOption:function(a,b){if(b){if(this._checkForDuplicates(a))return console.error("MultiSelectBox.js - addOption(): Option Already Exists",a),!1;this.options.push(a)}var f=
c.create("li",{"class":this.baseClass+" multiSelectItem rcFormValueText",innerHTML:a.label});a.selected=!1;a.domNode=f;c.place(f,this.selectionList,"last");this._connectHandles.push(n(f,"click",m.hitch(this,function(b){this._itemClicked(b,a)})));return!0},removeOption:function(a){for(var b=-1,f=0;f<this.options.length;f++)if(this.options[f].value===a.value&&this.options[f].label===a.label){b=f;break}-1<b?(c.destroy(this.options[b].domNode),this.options.splice(b,0)):console.error("MultiSelectBox.js - removeOption(): Could not find option",
a)},removeAll:function(){c.empty(this.selectionList);this.options=[]},replaceAll:function(a){this.removeAll();this.addMultipleOptions(a,!0)},_checkForDuplicates:function(a){for(var b=0;b<this.options.length;b++)if(this.options[b].value===a.value&&this.options[b].label===a.label)return!0;return!1},_itemClicked:function(a,b){var c=b.selected,d=r.indexOf(this.options,b);a.ctrlKey||a.shiftKey||r.forEach(this.options,function(a){a.selected=!1;h.remove(a.domNode,"selected")});if(a.shiftKey&&-1!==this._lastIndex)for(c=
d>=this._lastIndex?this._lastIndex:d,d=d<this._lastIndex?this._lastIndex:d;c<=d;)this.options[c].selected=!0,h.add(this.options[c].domNode,"selected"),c++;else this._lastIndex=d,b.selected=!c,b.selected?h.add(b.domNode,"selected"):h.remove(b.domNode,"selected");d=this.getSelectedItems();1===d.length?this.onSingleSelected(d[0]):this.onSingleSelected(null);d=null;this.onSelect()},onSingleSelected:function(a){return a},onSingleDeselect:function(){},onSelect:function(){},destroy:function(){this.inherited(arguments);
r.forEach(this._connectHandles,function(a){a.remove()},this);this._connectHandles=null}})})},"webview/widget/storeExtensions/JsonRest":function(){define(["dojo/store/JsonRest","dojo/_base/declare","dojo/_base/lang","dojo/_base/xhr","dojo/store/util/QueryResults"],function(r,p,m,l,h){return p("webview/widget/storeExtensions/JsonRest",[r],{query:function(c,g){"object"!==typeof c&&(c={});g=g||{};c.site=rc.pathInfo.site;this._buildSortExpression(c,g);var d=this._buildRangeHeader(g.headers,g.start,g.count),
n=l("PUT",{url:this.path,handleAs:"json",putData:{filterData:JSON.stringify(c)},headers:d});n.total=n.then(function(){var a=n.ioArgs.xhr.getResponseHeader("Content-Range");a||(a=n.ioArgs.xhr.getResponseHeader("X-Content-Range"));return a&&(a=a.match(/\/(.*)/))&&+a[1]});return h(n)},_buildRangeHeader:function(c,g,d){c=m.mixin({Accept:this.accepts},this.headers,c);if(0<=g||0<=d)c["X-Range"]="items\x3d"+(g||"0")+"-"+(Infinity!=d?d+(g||0)-1:""),c.Range=c["X-Range"];return c},_buildSortExpression:function(c,
g){if(g.sort){var d=g.sort[0];c.sortExpression=(d.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(d.attribute)}}})})},"dojo/store/JsonRest":function(){define(["../_base/xhr","../_base/lang","../json","../_base/declare","./util/QueryResults"],function(r,p,m,l,h){return l("dojo.store.JsonRest",null,{constructor:function(c){this.headers={};l.safeMixin(this,c)},headers:{},target:"",idProperty:"id",ascendingPrefix:"+",descendingPrefix:"-",_getTarget:function(c){var g=this.target;
"undefined"!=typeof c&&(g="/"==g.charAt(g.length-1)||"\x3d"==g.charAt(g.length-1)?g+c:g+("/"+c));return g},get:function(c,g){g=g||{};var d=p.mixin({Accept:this.accepts},this.headers,g.headers||g);return r("GET",{url:this._getTarget(c),handleAs:"json",headers:d})},accepts:"application/javascript, application/json",getIdentity:function(c){return c[this.idProperty]},put:function(c,g){g=g||{};var d="id"in g?g.id:this.getIdentity(c);return r("undefined"==typeof d||g.incremental?"POST":"PUT",{url:this._getTarget(d),
postData:m.stringify(c),handleAs:"json",headers:p.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===g.overwrite?"*":null,"If-None-Match":!1===g.overwrite?"*":null},this.headers,g.headers)})},add:function(c,g){g=g||{};g.overwrite=!1;return this.put(c,g)},remove:function(c,g){g=g||{};return r("DELETE",{url:this._getTarget(c),headers:p.mixin({},this.headers,g.headers)})},query:function(c,g){g=g||{};var d=p.mixin({Accept:this.accepts},this.headers,g.headers),l=-1<this.target.indexOf("?");
(c=c||"")&&"object"==typeof c&&(c=(c=r.objectToQuery(c))?(l?"\x26":"?")+c:"");if(0<=g.start||0<=g.count)d["X-Range"]="items\x3d"+(g.start||"0")+"-"+("count"in g&&Infinity!=g.count?g.count+(g.start||0)-1:""),this.rangeParam?(c+=(c||l?"\x26":"?")+this.rangeParam+"\x3d"+d["X-Range"],l=!0):d.Range=d["X-Range"];if(g&&g.sort){var a=this.sortParam;c+=(c||l?"\x26":"?")+(a?a+"\x3d":"sort(");for(l=0;l<g.sort.length;l++){var b=g.sort[l];c+=(0<l?",":"")+(b.descending?this.descendingPrefix:this.ascendingPrefix)+
encodeURIComponent(b.attribute)}a||(c+=")")}var m=r("GET",{url:this.target+(c||""),handleAs:"json",headers:d});m.total=m.then(function(){var a=m.ioArgs.xhr.getResponseHeader("Content-Range");a||(a=m.ioArgs.xhr.getResponseHeader("X-Content-Range"));return a&&(a=a.match(/\/(.*)/))&&+a[1]});return h(m)}})})},"webview/reliable/_alarm/AlarmHistoryToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on dojo/i18n!webview/nls/alarmHistoryCleanup dojo/text!./templates/AlarmHistoryToolbar.html ./AlarmToolbar".split(" "),
function(r,p,m,l,h,c,g){return r("webview/reliable/_alarm/AlarmHistoryToolbar",[g],{alarmHistoryCleanupStrings:h,canEdit:!0,templateString:c,_setIsSelectAllAttr:function(){},onExcelExportClicked:function(){},onFilterClicked:function(){},onClearFilter:function(){},onCleanup:function(){},_createButtonMap:function(){this._buttons={filter:this.filterButton,clearFilter:this.clearFilterButton,load:this.loadButton,"export":this.exportButton,excelExport:this.excelButton,toggleColumn:this.toggleColumnsButton,
cleanup:this.cleanupButton}},_createConnections:function(){this.own(l(this.excelButton.domNode,"click",p.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),l(this.loadButton.domNode,"click",p.hitch(this,function(){if(!1===this.loadButton.get("disabled"))this.onLoadClicked()})),l(this.filterButton.domNode,"click",p.hitch(this,function(){if(!1===this.filterButton.get("disabled"))this.onFilterClicked()})),l(this.clearFilterButton.domNode,"click",p.hitch(this,function(){!1===
this.clearFilterButton.get("disabled")&&this._onClearFilter()})),l(this.exportButton.domNode,"click",p.hitch(this,function(){this.onExportClicked()})),l(this.toggleColumnsButton.domNode,"click",p.hitch(this,function(){this.onToggleColumnsClicked()})),l(this.cleanupButton.domNode,"click",p.hitch(this,function(){this.onCleanup()})))},_onClearFilter:function(){this._onSystemFilterChanged([[]]);this.onClearFilter();this.systemSelector.set("value",[]);this.set("currentQuery",{})},hideCleanupButton:function(c){m.toggle(this.cleanupButton.domNode,
"hidden",c)}})})},"webview/reliable/AnnualSchedule":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/promise/all dojo/string dojo/text!./_annual/templates/Annual.html rc/_base/Error rc/reliable/AnnualSchedule rc/reliable/Point rc/reliable/ReliableEnums rc/util/encoding/base64 ../sys/desc ../sys/job ../util/AlarmUtil ../util/audit ../widget/WarningDialog ../widget/WarningDialogEnums dijit/Dialog dijit/form/Button dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/ClientToolBar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x){return r("webview/reliable/AnnualSchedule",a,{templateString:d,postCreate:function(){this.inherited(arguments);this.own(c([f.loadOnce(),q.loadOnce()]).then(p.hitch(this,this._setAlarmContext)))},_buildAuditLogContext:function(){w.setContextDataWithSiteId(this.site,[{systemId:Number(this.system),objectName:this.mnemonic}],this.fullTitle)},_buildConfirmDialog:function(){this._eraseWarningDlg||(this._eraseWarningDlg=new z({title:this.rcStrings.warning,
text:this.rcCalendarStrings.eraseConfirm,type:x.types.binaryConfirm}),this._supportingWidgets.push(this._eraseWarningDlg),this._eraseWarningDlg.on("close",p.hitch(this,function(a){a===x.returnValues.oneOrYes&&this._clearSchedule()})));this._eraseWarningDlg.open()},_fetch:function(){this._anSched=[];var a=new m,b={gid:"AS",type:"rcp",method:"GET",cmdObj:{dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:18,xl:this.pointInstance-1,xh:0,cnt:0},load:p.hitch(this,function(b){a.resolve(b.data)}),
error:p.hitch(this,function(b){a.reject(new n({name:g.substitute(l.xNotFound,[l.as]),message:this._replace(l.couldNotLoad)+" "+g.substitute(l.hostXOffline,[this.mainController]),suggestion:h.hostOfflineFix,e:b}))})};rc.xhr.request(b);return a.promise},_fetchSequence:function(){var a=this._fetch();a.then(p.hitch(this,function(a){if(1>a.length)throw new n({name:g.substitute(l.xNotFound,[l.as]),message:this._replace(l.couldNotLoad)+" "+l.objNotFound,suggestion:h.objNotFoundFix});return this._decode(a)})).then(p.hitch(this,
function(a){return this._render(a)})).then(p.hitch(this,function(a){return a}));return a},_createToolbarConnections:function(){this._canEdit&&(this._saveButton=this._toolbar.addToolBarItem(h.save,"save","rc24Icon saveIcon",p.hitch(this,this.sendWithReason,"annual-schedule")));this._clearButton=this._toolbar.addToolBarItem(l.clearAll,"clearAll","rc24Icon xIcon",p.hitch(this,this._buildConfirmDialog));this.setTooltips();this._buttons=this._toolbar.getPageButtons()},_render:function(a){this.inherited(arguments);
this._buildAuditLogContext()},_send:function(){var a=k.encode(this._encode()),b={gid:"AS",type:"rcp",method:"POST",cmdObj:{dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:118,xl:this.pointInstance-1,xh:0,cnt:a.length,data:a}},a=this._getRCPValidateRequestData(b);return this._validateApprovalSession(a).then(p.hitch(this,function(){return rc.xhr.request(b)}))},_setAlarmContext:function(){var a=new b(this.mainController,this.subnet,this.subController,t.subType.ANNUAL_SCHEDULES,
this.pointInstance);u.setAlarmContextForRcpPoint(this.system,a)}})})},"webview/reliable/AuditTrail":function(){define("dgrid/Grid dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/Pagination dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/cookie dojo/date/locale dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!rc/nls/audit dojo/i18n!webview/nls/all dojo/json dojo/on dojo/query dojo/request/iframe dojo/store/Cache dojo/store/Memory dojo/store/Observable dojo/text!./_auditTrail/templates/AuditTrail.html rc/date rc/reliable/AuditTrail ./_auditTrail/AuditTrailFilterDialog ../util/audit ../widget/ColumnHider ../widget/dGridExtensions/DeferrableGet ../widget/storeExtensions/JsonRest ../xhrEnhanced ./_auditTrail/AuditTrailToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I){return c("webview/reliable/AuditTrail",B,{defaultSort:[{attribute:"time",descending:!0}],rcAuditStrings:q,rcStrings:k,templateString:C,webviewStrings:f,_currentQuery:null,_sourceTitle:null,_translationsMap:null,_validatedMap:null,constructor:function(){this._remoteStore=new G({target:webview.pathUtil.currentSiteInfo.sitePath+"/AuditLog",idProperty:"time",path:"AuditLog"});this._localStore=new A(new v({idProperty:"time"}));this._gridStore=
new y(this._remoteStore,this._localStore);this._enforceChangeApproval=rc.session.enforceChangeApproval;this._validatedMap={}},postCreate:function(){this._setFilter({});this.inherited(arguments);this.defer(g.hitch(this,function(){this.onInitSuccess()}),100)},clearContext:function(){},exportCsv:function(){this._export("AuditLog/Export")},_exportExcel:function(){this._export("AuditLog/ExportExcel")},_export:function(a){x._currentDfd=null;x._fireNextRequest();x.post(a,{handleAs:"document",data:{filterData:u.stringify(this._getFilterQuery(this._filterQuery)),
siteId:this.site}})},_getColumnStructure:function(a){validatedColumn={id:"validatedCol",label:f.validated,field:"validated",get:this._getValidatedColumn,renderCell:g.hitch(this,this._renderValidatedColumn),sortable:!1,width:96,hidden:!1,printContent:g.hitch(this,function(a){return this._validatedMap[a.Id]})};var b=[];if(null===a)b.push({id:"timeCol",label:k.auditTime,field:"time",hidden:!1,formatter:g.hitch(E,E.formatFullDate)}),b.push({id:"userCol",label:k.auditUser,field:"userLC",hidden:!1,formatter:this._formatUser}),
b.push({id:"ipAddressCol",label:f.systemIP,field:"ipAddress",hidden:!1}),b.push({id:"pointNameCol",label:k.auditPointName,field:"pointName",hidden:!1}),b.push({id:"actionCol",label:k.auditAction,field:"action",hidden:!1}),b.push({id:"detailsCol",label:k.auditDetails,field:"details",hidden:!1}),b.push({id:"reasonCol",label:k.reason,field:"reason",hidden:!1}),b.push({id:"systemCol",label:f.system,field:"system",hidden:!1}),rc.session.enforceChangeApproval&&b.push({id:"approvalUserCol",label:f.approvalUser,
field:"approvalUser",hidden:!1}),b.push(validatedColumn);else{b[a.timeCol.index]={id:"timeCol",label:k.auditTime,field:"time",width:a.timeCol.width,hidden:a.timeCol.hidden,formatter:E.formatFullDate};b[a.userCol.index]={id:"userCol",label:k.auditUser,field:"userLC",width:a.userCol.width,hidden:a.userCol.hidden,formatter:this._formatUser};b[a.pointNameCol.index]={id:"pointNameCol",label:k.auditPointName,field:"pointName",width:a.pointNameCol.width,hidden:a.pointNameCol.hidden};b[a.actionCol.index]=
{id:"actionCol",label:k.auditAction,field:"action",width:a.actionCol.width,hidden:a.actionCol.hidden};b[a.detailsCol.index]={id:"detailsCol",label:k.auditDetails,field:"details",width:a.detailsCol.width,hidden:a.detailsCol.hidden};b[a.reasonCol.index]={id:"reasonCol",label:k.reason,field:"reason",width:a.reasonCol.width,hidden:a.reasonCol.hidden};a.systemCol&&(b[a.systemCol.index]={id:"systemCol",label:f.system,field:"system",width:a.systemCol.width,hidden:a.systemCol.hidden});var c=[];rc.session.enforceChangeApproval&&
(a.hasOwnProperty("approvalUserCol")&&null!==a.approvalUserCol?b[a.approvalUserCol.index]={id:"approvalUserCol",label:f.approvalUser,field:"approvalUser",width:a.approvalUserCol.width,hidden:a.approvalUserCol.hidden}:c.push({id:"approvalUserCol",label:f.approvalUser,field:"approvalUser",hidden:!1}));a.hasOwnProperty("ipAddressCol")?b[a.ipAddressCol.index]={id:"ipAddressCol",label:f.systemIP,field:"ipAddress",width:a.ipAddressCol.width,hidden:a.ipAddressCol.hidden}:c.push({id:"ipAddressCol",label:f.systemIP,
field:"ipAddress",hidden:!1});a.hasOwnProperty("validatedCol")?(validatedColumn.width=a.validatedCol.width,validatedColumn.hidden=a.validatedCol.hidden,b[a.validatedCol.index]=validatedColumn):c.push(validatedColumn);b=b.concat(c)}for(a=0;a<b.length;a++)b[a]||b.splice(a,1);return b},_setTitle:function(a){var b=a;null===this.title&&null!==this._sourceTitle&&(b=a+" - "+this._sourceTitle);this.inherited(arguments,[b])},_getValidatedColumn:function(a){return I.get("AuditLog/Verify",{handleAs:"json",query:{id:a.Id}})},
_renderValidatedColumn:function(a,c,f){this._validatedMap[a.Id]=!0===c;if(c)return a=b.create("div",{style:{textAlign:"center"}},f,"first"),b.create("span",{"class":"svg-changedColIcon"},a,"first"),a},_createGrid:function(){var a=this._mixCookieStructure();1===Object.keys(a).length&&a.hasOwnProperty("sort")&&(a=null);null===this._grid&&(this._grid=new (c([r,l,H,p,m,J]))({columns:this._getColumnStructure(a),sort:null!==a?a.sort:this.defaultSort,store:this._gridStore,query:this._currentQuery,loadingMessage:this._getLoadingString(),
noDataMessage:this.rcStrings.noData,className:"dgrid-autoheight",pagingLinks:1,rowsPerPage:25,pageSizeOptions:[10,25,50,100,200,4095],isPagingGrid:!0},this.gridNode),this._setMaxPageSizeOptionHTML(),this._grid.startup(),this._createToolbar(),this._connectGrid(),this.own(w(this._grid,"dgrid-error",g.hitch(this,function(a){this._onInitError(a)}))))},_createToolbar:function(){this._filterButton=this._toolbar.getButton("filter");this.own(w(this._toolbar,"excelExportClicked",g.hitch(this,this._exportExcel)),
w(this._toolbar,"toggleColumnClicked",g.hitch(this,this._positionAndShowColumnSelector)),w(this._toolbar,"xportClicked",g.hitch(this,this.exportCsv)),w(this._toolbar,"clearFilterClicked",g.hitch(this,this._onClearFilter)),w(this._toolbar,"filterClicked",g.hitch(this,this.filter)));rc.session.enforceChangeApproval&&this._toolbar.disableCSVExport();this._toggleClearFilterBehaviour(this._currentQuery)},_setMaxPageSizeOptionHTML:function(){z(".dgrid-page-size option").forEach(g.hitch(this,function(a){"4095"===
a.innerHTML&&(a.innerHTML=this.rcStrings.max)}))},_createToolbarConnections:function(){},_getFilterQuery:function(b){var c={};h.forEach(Object.keys(b),function(f){if(!0===b[f].isUsed){var d=b[f];if("dateRange"===f)null!==d.min&&(c.datestampS=d.min),null!==d.max&&(c.datestampE=d.max);else if("timeRange"===f)null!==d.min&&(c.timestampS=a.format(d.min,{selector:"date",datePattern:"yyyy-MM-dd HH:mm:ss"})),null!==d.max&&(c.timestampE=a.format(d.max,{selector:"date",datePattern:"yyyy-MM-dd HH:mm:ss"}));
else if("timeZoneOffset"===f)c.timeZoneOffset=d.timeZoneOffset;else{var g="";d.isExclude&&(g+="!");d.isExact||(g+="*");g+=d.filterString;"action"!==f?c[f]=g:c.logAction=g}}});var f=u.parse(sessionStorage.getItem("auditContextFilter"));f&&f.site===rc.pathInfo.site&&(g.mixin(c,f),this._sourceTitle=this._buildContextTitle(f.contextKey,f.mnemonicString,f.title));return c},_buildContextTitle:function(a,b,c){return void 0!==c?c:f[a]+" "+b},_mixCookieStructure:function(){var a=n("at"),b={};if(a)try{b=u.parse(a)}catch(M){console.error(this.declaredClass+
" - _mixCookieStructure(): Error using saved settings",M),n("at",null,{expires:-1,path:webview.pathUtil.currentSiteInfo.sitePath}),window.location.reload()}a&&void 0!==b.sort||(b.sort=this.defaultSort);return b},_onClearFilter:function(){F.clearContextData();if(this._filterDlg)this._filterDlg.onClearFilters();this._setFilter({});this._getTitle()},_positionAndShowColumnSelector:function(){var a=this._toolbar.getButton("toggleColumn");t.set(this._grid.hiderMenuNode,"top",a.buttonNode.getBoundingClientRect().bottom+
"px");this._grid._toggleColumnHiderMenu(a)},_toggleClearFilterBehaviour:function(a){var b=!0;a&&(b=0===h.filter(Object.keys(a),function(a){return"site"!==a&&"sortExpression"!==a}).length);this._toolbar.disableClearFilter(b)},_showFilter:function(){null===this._filterDlg?(this._filterDlg=new D,this.own(d.after(this._filterDlg,"hide",g.hitch(this,function(){setTimeout(g.hitch(this,function(){this._filterButton.tooltip.close()}),200)}))),this.own(w(this._filterDlg,"applyFilter",g.hitch(this,this._setFilter)))):
this._filterDlg.set("filterQuery",this._filterQuery);this._filterDlg.show()},_setFilter:function(a){""===a&&(a={});this._filterQuery=a;a=this._getFilterQuery(a);Object.keys(a).includes("site")||(a.site=rc.pathInfo.site);this._currentQuery=a;this._grid&&(this._toggleClearFilterBehaviour(this._currentQuery),this._grid.set("query",this._currentQuery))},fetch:function(){}})})},"webview/reliable/_auditTrail/AuditTrailFilterDialog":function(){define("dojo/_base/declare dojo/i18n!../../nls/all dojo/_base/lang dojo/on dojo/text!./templates/AuditTrailFilterDialog.html rc/reliable/_auditTrail/AuditTrailFilterDialog ../../widget/TimeTextBox".split(" "),
function(r,p,m,l,h,c){return r("webview/reliable/_auditTrail/AuditTrailFilterDialog",c,{templateString:h,webviewStrings:p,onClearFilters:function(){this._clearFilters()},_clearCheckboxes:function(){this.inherited(arguments);this.ipAddressExactCB.set("checked",!1);this.ipAddressExcludeCB.set("checked",!1);this.systemExactCB.set("checked",!1);this.systemExcludeCB.set("checked",!1)},_clearFilters:function(){this.inherited(arguments);this.ipAddressFilter.set("value","");this.systemFilter.set("value",
"")},_createButtonConnections:function(){this.own(l(this.okButton.domNode,"click",m.hitch(this,this._onClickOk)),l(this.clearButton.domNode,"click",m.hitch(this,this.onClearFilters)))},_setFilterQueryAttr:function(c){this.inherited(arguments);Object.keys(c).length&&(this.filterQuery=c,this.ipAddressFilter.set("value",this.filterQuery.ipAddress.filterString),this.ipAddressExactCB.set("checked",this.filterQuery.ipAddress.isExact),this.ipAddressExcludeCB.set("checked",this.filterQuery.ipAddress.isExclude),
this.systemFilter.set("value",this.filterQuery.system.filterString),this.systemExactCB.set("checked",this.filterQuery.system.isExact),this.systemExcludeCB.set("checked",this.filterQuery.system.isExclude))},_submitFilters:function(){this.filterQuery={};var c=this.userFilter.get("value");this.filterQuery.userLC={isUsed:""!==c||this.userExactCB.get("checked")||this.userExcludeCB.get("checked"),isExact:this.userExactCB.get("checked"),isExclude:this.userExcludeCB.get("checked"),filterString:c};c=this.ipAddressFilter.get("value");
this.filterQuery.ipAddress={isUsed:""!==c||this.ipAddressExactCB.get("checked")||this.ipAddressExcludeCB.get("checked"),isExact:this.ipAddressExactCB.get("checked"),isExclude:this.ipAddressExcludeCB.get("checked"),filterString:c};c=this.pointNameFilter.get("value");this.filterQuery.pointName={isUsed:""!==c||this.pointNameExactCB.get("checked")||this.pointNameExcludeCB.get("checked"),isExact:this.pointNameExactCB.get("checked"),isExclude:this.pointNameExcludeCB.get("checked"),filterString:c};c=this.actionFilter.get("value");
this.filterQuery.action={isUsed:""!==c||this.actionExactCB.get("checked")||this.actionExcludeCB.get("checked"),isExact:this.actionExactCB.get("checked"),isExclude:this.actionExcludeCB.get("checked"),filterString:c};c=this.detailsFilter.get("value");this.filterQuery.details={isUsed:""!==c||this.detailsExactCB.get("checked")||this.detailsExcludeCB.get("checked"),isExact:this.detailsExactCB.get("checked"),isExclude:this.detailsExcludeCB.get("checked"),filterString:c};c=this.reasonFilter.get("value");
this.filterQuery.reason={isUsed:""!==c||this.reasonExactCB.get("checked")||this.reasonExcludeCB.get("checked"),isExact:this.reasonExactCB.get("checked"),isExclude:this.reasonExcludeCB.get("checked"),filterString:c};c=this.systemFilter.get("value");this.filterQuery.system={isUsed:""!==c||this.systemExactCB.get("checked")||this.systemExcludeCB.get("checked"),isExact:this.systemExactCB.get("checked"),isExclude:this.systemExcludeCB.get("checked"),filterString:c};var c=this.dateFrom.get("value"),d=this.dateTo.get("value");
this.filterQuery.dateRange={isUsed:null!==c||null!==d,min:c,max:d};var h=this.timeFrom.get("value"),a=this.timeTo.get("value");this.filterQuery.timeRange={isUsed:null!==h||null!==a,min:h,max:a};this.filterQuery.timeZoneOffset={isUsed:null!==c||null!==d||null!==h||null!==a,timeZoneOffset:-1*(new Date).getTimezoneOffset()};this.onApplyFilter(this.filterQuery)}})})},"webview/widget/TimeTextBox":function(){define(["dojo/_base/lang","dojo/text!./templates/TimeTextBox.html","rc/widget/TimeTextBox"],function(r,
p,m){return r.extend(m,{templateString:p})})},"webview/widget/dGridExtensions/DeferrableGet":function(){define(["dgrid/Grid","dojo/_base/declare","dojo/_base/lang","dojo/Deferred","put-selector/put"],function(r,p,m,l,h){return p("webview/widget/dGridExtensions/DeferrableGet",null,{renderRow:function(c,g){var d=this.createRowCells("td",function(d,a){var b=c,h=new l;a.get?(b=a.get(c))&&b.isResolved?h=b:h.resolve(b):"field"in a&&"_item"!=a.field&&(b=b[a.field],h.resolve(b));h.then(m.hitch(this,function(b){a.renderCell?
r.appendIfNode(d,a.renderCell(c,b,d,g)):r.defaultRenderCell.call(a,c,b,d,g)}))},g&&g.subRows,c);return h("div[role\x3drow]\x3e",d)}})})},"webview/reliable/_auditTrail/AuditTrailToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/text!./templates/AuditTrailToolbar.html ../../widget/ClientWidgetToolbar ../../widget/toolbarMixins/_ContextFilteringToolbarMixin ../../widget/ToolbarButton".split(" "),function(r,p,m,l,h,
c,g,d,n){return r("webview/reliable/_auditTrail/AuditTrailToolbar",[d,n],{rcStrings:l,templateString:g,webviewStrings:h,disableCSVExport:function(){m.add(this.xportButton.domNode,"hidden");this.xportButton.set("disabled",!0)},onExcelExportClicked:function(){},onFilterClicked:function(){},onToggleColumnClicked:function(){},onXportClicked:function(){},_createButtonMap:function(){this._buttons={toggleColumn:this.toggleColumnsButton,"export":this.xportButton,excelExport:this.excelButton,clearFilter:this.clearFilterButton,
filter:this.filterButton}},_createConnections:function(){this.inherited(arguments);this.own(c(this.excelButton.domNode,"click",p.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),c(this.toggleColumnsButton.domNode,"click",p.hitch(this,function(){if(!this.toggleColumnsButton.get("disabled"))this.onToggleColumnClicked()})),c(this.xportButton.domNode,"click",p.hitch(this,function(){if(!this.xportButton.get("disabled"))this.onXportClicked()})),c(this.filterButton.domNode,
"click",p.hitch(this,function(){if(!this.filterButton.get("disabled"))this.onFilterClicked()})))}})})},"webview/reliable/EnterpriseSchedule":function(){define("dijit/form/FilteringSelect dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/unload dojo/aspect dojo/date dojo/Deferred dojo/promise/all dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/hash dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/enterpriseSchedules dojo/i18n!webview/nls/errorMessages dojo/io-query dojo/json dojo/mouse dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./_enterpriseSchedule/templates/EnterpriseSchedule.html dojo/topic dojox/html/entities rc/_base/Error rc/_base/test rc/_base/util rc/_Widget rc/bacnet/error rc/util/encoding/base16 rc/util/encoding/base64 rc/util/notices ../_base/tooltip ../util/dateUtils ../util/globalConstants ../util/util ../widget/WarningDialog ../widget/WarningDialogEnums ./_enterpriseSchedule/StoreMixin ./_enterpriseSchedule/calendarEvents/CalEvent ./_enterpriseSchedule/widget/_BlockTreeNode ./_enterpriseSchedule/widget/BlockManager ./_enterpriseSchedule/overriddenViews/HorizontalRenderer ./_enterpriseSchedule/overriddenViews/LabelRenderer ./_enterpriseSchedule/overriddenViews/MatrixView ./_enterpriseSchedule/overriddenViews/VerticalRenderer dijit/layout/BorderContainer ./_enterpriseSchedule/Calendar ./_enterpriseSchedule/EnterpriseScheduleToolbar ./_enterpriseSchedule/EventEditor ./_enterpriseSchedule/ScheduleTree ../widget/TitlePane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U,W,da,Y,V,X,Z,ca,ha,ea,fa){return h("webview/reliable/EnterpriseSchedule",[R],{SUMMARY_FETCH_INTERVAL:1E4,bacnetOnly:!0,blockId:0,blockManagerDialog:null,blockStore:null,blockFilteringSelect:null,blocks:null,data:null,instanceDefaultAppliesTo:null,isFirstLoad:!0,newBlock:!1,pointInstance:0,previouslySelected:null,saving:!1,searchPath:"tree/objects",summaryColours:null,templateString:L,validateDeferred:null,
validateData:null,view:"schedule",warningDialog:null,widgetsInTemplate:!0,_adminContent:null,_blockTree:null,_blockTreeModel:null,_blockTreeStore:null,_cancelConnect:null,_prevBlockId:null,_currentBlockId:null,_editPaneHeight:0,_errorTypes:{error:0,reject:1,abort:2,success:3},_eventCreationConfirmationDialog:null,_fetchPromiseObj:{},_genericConfirmDialog:null,_genericConfirmDialogHandle:null,_hasCostRate:!1,_hash:null,_inSummary:!0,_isBlockRequest:!1,_menuItems:null,_path:"EnterpriseSchedules/",_reloadTimer:null,
_rightPaneClosed:!1,_rightPaneClosedWidth:53,_rightPaneMinWidth:250,_rightPaneOpenWidth:null,_saveLoadEvent:null,_saveConnect:null,_scheduleMap:null,_tooltipIds:null,_treeRootTemplate:{},_updateScheduleDetailsDeferred:null,_updating:!1,ERROR_CODE:{Success:200,Duplicate:501,NotExist:502,Unknown:504,SiteDoesNotExist:505,Insufficient:506,WrongDataType:507,BACnetError:508,BlockAlreadyExists:509,ValidationInProgress:510,UserCancelled:511,Insufficient_Protocol:513,NoScheduleTree:514,EventNotFound:515,ScheduleEventNotFound:516,
SystemDoesNotExist:517,ScheduleNotFound:518,ScheduleEventUnLinked:519},constructor:function(a){this.site=a.site||-1;this.warningDialog=new X({title:"",type:Z.types.binary,text:""});this._treeRootTemplate={id:"root",name:"root",type:"root",value:null,hasChildren:!0}},postCreate:function(){this.inherited(arguments);this._fetchPromiseObj.EnterpriseScheduleData=this._fetchEnterpriseSchedule(this.pointInstance,this.blockId);this._tooltipIds=[];this._setUpHash();this._switchView(this.view)},addEvent:function(a,
b){var f=this.calendar.on("storeReady",c.hitch(this,function(a,b){this.finishedEvent(a,this._hasCostRate,b);this.eventEditor.setStoreReady(!0);f.remove()},b,a.reason));a.color=this.data.isBlockGroup?"#5A245E":this.colorMap[a.schedules[0]];a.dirty="dirty";this.calendar.add(a)},buildRendering:function(){this.inherited(arguments);J.get("BlockManager/GetESName",{query:{enterpriseId:this.pointInstance},handleAs:"json"}).then(c.hitch(this,this._setTitle))},calendarRendered:function(){this.isFirstLoad&&
(this.isFirstLoad=!1,this.calendar.columnView.set("startTimeOfDay",{hours:6,duration:3E3}),this.onInitSuccess());if(!this.canEdit||this._inSummary)this.calendar.disable(),q.add(this.editEventPane.domNode,"hidden"),q.add(this.scheduleTreePane.domNode,"topPane");this.eventEditor.colorMap=this.colorMap;this.eventEditor.enterpriseId=this.data.entId;this.eventEditor.render(this.data.schedule.id,this.calendar.getScheduleInfo(),this.scheduleTree,this.data.dataType,this.data.stateValues,this.data.minuteIncrement,
this.data.currency);this.eventEditor.setDefaultAppliesTo(this.instanceDefaultAppliesTo);this.eventEditor.set("appliesToIsReadOnly",this.data.isBlockGroup);this.eventEditor.setStoreReady(!0);this.closeEventPane();this.eventEditor.setStoreReady(!1)},cancel:function(){this._changeSchedule(this.data.schedule.id,!0)},clearToasts:function(){U.widget.clear()},closeEventPane:function(){this.editEventPane.open?this.editEventPane.arrowNode.click():this.eventEditor.toggleEditState();this.eventEditor.reset()},
deleteEvent:function(a,b,f){var d=this.calendar.on("storeReady",c.hitch(this,function(a,b){this.finishedEvent(a,!1,b);this.eventEditor.setStoreReady(!0);d.remove()},f,a.reason));a.action="delete";a.dirty="dirty";this.calendar.remove(a,b)},dndEditDateRange:function(a){for(var b=this.calendar.store.query({eventId:a.item.eventId}),c=0;c<b.length;c++){var f=b[c],d=null,g=null;a.item.id!==f.id?(d=new Date(f.endTime),g=new Date(f.startTime)):(0===n.compare(a.source._editEndTimeSave,a.item.endTime,"date")&&
0===n.compare(a.source._editStartTimeSave,a.item.startTime,"date")||M.publish("alert",{message:v.modifyDateRange,type:"info"}),d=new Date(a.source._editEndTimeSave),g=new Date(a.source._editStartTimeSave));d.setHours(a.item.endTime.getHours(),a.item.endTime.getMinutes());g.setHours(a.item.startTime.getHours(),a.item.startTime.getMinutes());f.startTime=new Date(g);f.endTime=new Date(d);a.item.id===f.id&&(a.item.startTime=new Date(g),a.item.endTime=new Date(d));this.calendar.store.put(f);g=d=null}},
dndEditTerminating:function(a){for(var b=a.item.startTime,c=a.item.endTime,f=this.calendar.store.query(function(b){return b.eventId===a.item.eventId}),d=0;d<f.length;d++){var g=f[d];g.startTime.setHours(b.getHours(),b.getMinutes(),b.getSeconds(),0);g.endTime.setHours(c.getHours(),c.getMinutes(),c.getSeconds(),0);this.calendar.store.put(g,{id:g.id})}},dndMoveDay:function(a){if(0!==n.compare(a.source._editEndTimeSave,a.item.endTime,"date")||0!==n.compare(a.source._editStartTimeSave,a.item.startTime,
"date"))for(var b=this.calendar.store.query({eventId:a.item.eventId}),c=0;c<b.length;c++){var f=b[c],d=null,g=null,d=new Date(f.endTime),g=new Date(f.startTime);g.setFullYear(a.item.startTime.getFullYear(),a.item.startTime.getMonth(),a.item.startTime.getDate());d.setFullYear(a.item.endTime.getFullYear(),a.item.endTime.getMonth(),a.item.endTime.getDate());f.startTime=new Date(g);f.endTime=new Date(d);a.item.id===f.id&&(a.item.startTime=new Date(g),a.item.endTime=new Date(d));this.calendar.store.put(f)}},
editEvent:function(a,b){var f=this.calendar.on("storeReady",c.hitch(this,function(a,b){this.finishedEvent(a,this._hasCostRate,b);this.eventEditor.setStoreReady(!0);f.remove()},b,a.reason));a.dirty="dirty";this.calendar.edit(a)},fetch:function(a,b,f){this.calendar.disable();this.blockId!==b&&(this.newBlock=!0);this.blockId=b;f&&!this.saving&&this.clearToasts();this.makeClean();this.calendar.setDirty(!1);this._fetchSequence(a,b).then(c.hitch(this,function(a){this.calendar.currentSelectedItem=null;this.eventEditor.clear();
this.saving=!1;this._inSummary||this.calendar&&this.canEdit&&this.calendar.enable();return a}),c.hitch(this,function(a){this._onInitError(a);this._inSummary||this.calendar&&this.canEdit&&this.calendar.enable();setTimeout(this.clearToasts,500)}))},fetchAndClear:function(a,b){var f=c.hitch(this,function(a){this.fetch(this.pointInstance,a,!0);!this._inSummary||null!==this._reloadTimer&&this._previousBlockId==a?this._inSummary||null===this._reloadTimer||(clearInterval(this._reloadTimer),this._reloadTimer=
null):(null!==this._reloadTimer&&(clearInterval(this._reloadTimer),this._reloadTimer=null),this._reloadTimer=setInterval(c.hitch(this,function(){this._prevBlockId=this._currentBlockId;this._currentBlockId=null;this.fetch(this.pointInstance,a,!0)}),this.SUMMARY_FETCH_INTERVAL))});if(!0!==b&&this._dirty&&!this.saving){var d=c.clone(this.eventEditor.getInfo()),g=c.hitch(this,function(a){this.calendar.selectedItem=null;this.calendar.selectedItems=[];f(a)});this._promptUserForSave(d).then(c.hitch(this,
function(){this._saveClicked();g(a)}))}else f(a)},finishedEvent:function(a,b,c){this.eventEditor.setStoreReady(!1);this.onChange();a&&this._validateAndSave(b,c)},goToAdminView:function(){null!==this._reloadTimer&&(clearInterval(this._reloadTimer),this._reloadTimer=null);var a={site:this.site,view:"scheduleTree"};this.isAdminPage()&&(a.schedule=this.pointInstance);a=this._hash+"?"+E.objectToQuery(a);this.isAdminPage()||(a=V.mnemonicToUri(a));x(a)},makeClean:function(){this.inherited(arguments);this.calendar.calendarToolbar.disableNavigation(!1);
rc.session.isPrivate()&&rc.session.canEditEnterprise()&&(this._cancelButton&&this._cancelButton.set("disabled",!0),this._saveButton&&this._saveButton.set("disabled",!0))},makeDirty:function(){this.inherited(arguments);this.calendar.calendarToolbar.disableNavigation(!0);rc.session.isPrivate()&&rc.session.canEditEnterprise()&&(this._cancelButton&&this._cancelButton.set("disabled",!1),this._saveButton&&this._saveButton.set("disabled",!1))},onChange:function(){this.makeDirty();this.calendar.setDirty(!0,
this.eventEditor.getInfo(!0));this.emit("change")},openEventPane:function(){this.editEventPane.open||this.editEventPane.arrowNode.click()},openRightContentPane:function(a){this.editEventPane.open||this.scheduleTreePane.open?this.editEventPane.open&&(this._editPaneHeight=this.editEventPane.wipeNode.scrollHeight):(this._rightPaneClosed=!1,this.editEventPane.wipeNode.scrollHeight=this._editPaneHeight,this.rightContent.resize({w:this._getRightPaneWidth()}),this._container.resize(),q.remove(this.editEventPane.domNode,
"collapsed"),q.remove(this.scheduleTreePane.domNode,"collapsed"))},print:function(){this.calendar.columnView.set("startTimeOfDay",{hours:0,duration:0});this.printWithPreview(c.clone(this.domNode))},render:function(a){if(a&&200===a.errStatus)this.data=a,this.pointInstance=this.data.entId,this._render(this.data);else if(a)switch(a.errStatus){case 502:throw new P({name:K.substitute(y.xNotFound,[v.es]),message:C.scheduleDoesNotExist,suggestion:C.scheduleDoesNotExistFix});case 503:throw new P({name:K.substitute(y.xNotFound,
[v.scheduleTreeLabel]),message:C.scheduleContainsNoScheduleTree,suggestion:C.scheduleContainsNoScheduleTreeFix});case 518:M.publish("sticky",{type:"error",message:C.cannotCommunicate+"\x3cbr /\x3e"+C.suggestResave});break;default:console.error(this.declaredClass+" - _render(): Invalid error Status")}else throw new P({name:K.substitute(y.xNotFound,[v.es]),message:v.cannotLoadES,suggestion:v.hostOfflineFix});},renderWidgets:function(){this.isFirstLoad?this.updateBlockSelector().then(c.hitch(this,function(){this.calendar.render(this.data,
this.colorMap,this.blockStore,this.scheduleTree,this.summaryColours);this.eventEditor.enterpriseId=this.data.entId;this.eventEditor.createAppliesToManager(this.blocks,this.scheduleTree._scheduleStore.query(this._getNonRootItems));this.calendarRendered(null===this.data);this._destroyLoader()})):(this.calendar.render(this.data,this.colorMap,this.blockStore,this.scheduleTree,this.summaryColours,!0),this.calendarRendered(null===this.data));this._resizeScheduleTreeHeight()},resize:function(){this.inherited(arguments);
if(this._adminTopContent){var a=this._adminTopContent.clientWidth,a=a-this._contentHeaderIcon.clientWidth;w.set(this._contentHeaderTitle,"width",a-50+"px")}},resizeRightContent:function(){if(!this._rightPaneClosed)if(this.editEventPane.open||this.scheduleTreePane.open)!0===this.scheduleTreePane.open&&this._resizeScheduleTreeHeight();else{this._rightPaneClosed=!0;var a=w.getComputedStyle(this.rightContent.domNode);this._rightPaneOpenWidth=u.getMarginBox(this.rightContent.domNode,a).w;q.add(this.editEventPane.domNode,
"collapsed");q.add(this.scheduleTreePane.domNode,"collapsed");this.rightContent.resize({w:0});this._container.resize();this.rightContent.resize({w:this._rightPaneClosedWidth});this._container.resize()}},saveByMode:function(){this.summaryAfterSave=!0;this.eventEditor.isDirty?this.eventEditor._onUpdate():this._validateAndSave()},send:function(a,b,f){this.saving=!0;this.eventEditor.isDirty&&this.eventEditor.update();this.makeClean();this.calendar.disable();this._hasCostRate&&(a||void 0===a)?this._validate(b).then(c.hitch(this,
this.sendValidated,f),c.hitch(this,function(){this.clearToasts();this.saving=!1;this._inSummary||this.calendar&&this.canEdit&&this.calendar.enable()})):this.sendValidated(f)},sendWithReason:function(a,b){this.inherited(arguments);!rc.session.enforceChangeApproval&&this._changeReasonDialog&&this._changeReasonDialog.reasonTB.set("value",b)},sendValidated:function(b){this.clearToasts();this.closeEventPane();this.saveDeferred=new a;rc.xhr.request(b);this.saveDeferred.then(c.hitch(this,function(a){this.summaryAfterSave&&
this.calendar._changeView("summary");this.summaryAfterSave=!1;if("undefined"!==typeof a.errorArray&&0!==a.errorArray.length)throw"Could not save Changes";for(var b=0;b<a.newEventIds.length;++b)"undefined"!==typeof this.data.schedule.events[b]&&-1===this.data.schedule.events[b].eventId&&c.mixin(this.data.schedule.events[b],{eventId:a.newEventIds[b],action:"update",dirty:"clean"});this.calendar.setDirty(!1)}));this.saveDeferred.promise.always(c.hitch(this,function(){this._inSummary||this.calendar&&
this.canEdit&&this.calendar.enable();this.calendar.currentSelectedItem=null;this.eventEditor.clear();this.clearToasts();this.saving=!1;this.calendar.setDirty(!1);this.eventEditor.isDirty=!1;this.eventEditor.reset();this.calendar.render(this.data,this.colorMap,this.blockStore,this.scheduleTree,this.summaryColours,!1)}))},setReturnToAdmin:function(a){this._editButton.onClick=a},showErrors:function(a){var b="";l.forEach(a,c.hitch(this,function(a){b&&b.length&&(b+="\x3cbr /\x3e\x3cbr /\x3e");b+=this._decodeErrorMessage(a)}));
b&&b.length&&M.publish("sticky",{type:"error",message:b})},toggleEventDetails:function(a){this._inSummary=a;this.fetchAndClear(this.data.schedule.id);a?(q.add(this.editEventPane.domNode,"hidden"),q.add(this.scheduleTreePane.domNode,"topPane")):this.canEdit&&(q.remove(this.editEventPane.domNode,"hidden"),q.remove(this.scheduleTreePane.domNode,"topPane"));this._resizeScheduleTreeHeight()},updateBlockSelector:function(){var b=function(a,b){return V.alphaNumericSort(a,b,"name")},f=new a;this.own(f);rc.xhr.request({path:"BlockManager/",
type:"rest",method:"GET",entId:this.data.entId}).then(c.hitch(this,function(a){if(a.data&&200===a.data.errStatus){this.blocks=[];if(a.data.blocks)for(var d=0;d<a.data.blocks.length;d++)this.blocks.push(a.data.blocks[d]);var d={name:v.allBlocks,label:'\x3cspan class\x3d"menu-item"\x3e'+v.allBlocks+"\x3c/span\x3e",id:-1},g={name:"\f",label:'\x3cspan class\x3d"sectionDivider"\x3e'+(v.blocks.charAt(0).toLocaleUpperCase()+v.blocks.substring(1))+"\x3c/span\x3e",id:-2};a.data.blocks?(a.data.blocks.sort(c.hitch(this,
b)),l.forEach(a.data.blocks,c.hitch(this,function(a){a.label='\x3cspan class\x3d"menu-item"\x3e'+a.name+"\x3c/span\x3e";a.name=O.decode(a.name)})),a.data.blocks.unshift(g),a.data.blocks.unshift(d)):a.data.blocks=[d];null===this.blockStore?this.blockStore=new G({data:a.data.blocks}):this.blockStore.setData(a.data.blocks);null===this.blockFilteringSelect?(this.blockFilteringSelect=new r({baseClass:"rcSelectBox blockSelector",hasDividers:!0,store:this.blockStore,searchAttr:"name",labelAttr:"label",labelType:"html",
autoComplete:!1,queryExpr:"*${0}*"},this.blockSelection,"first"),this.blockFilteringSelect.set("value",-1),this.blockFilteringSelect.startup(),this.own(F(this.blockFilteringSelect,"change",c.hitch(this,function(a){this._toggleBlockTree(a)})))):void 0!==this.blockStore.get(this.blockFilteringSelect.get("value"))?this._toggleBlockTree(Number(this.blockFilteringSelect.get("value"))):(this._toggleBlockTree(-1),this.blockFilteringSelect.set("value","-1"));f.resolve(a.data)}else console.error(this.declaredClass+
" - updateBlockSelector(): Error getting blocks",a),f.reject(a)}),c.hitch(this,function(a){console.error(this.declaredClass+" - updateBlockSelector(): Unexpected Error",a);f.reject(a)}));return f.promise},updateDayOfWeek:function(a){var b=a.item.startTime.getDay();a.item.repeat.value.dow=b},warnUserOfReadOnly:function(){if(this._inSummary)var a=!1,b=F(window,"mousemove",c.hitch(this,function(){a=!0})),f=F(window,"mouseup",c.hitch(this,function(){a&&M.publish("sticky",{type:"info",message:C.summaryReadOnly});
a=!1;b.remove();f.remove()}))},_askForEventCreationConfirmation:function(b){var f=new a;this.own(f);addEvents=[];addEvents=l.filter(b,function(a){return"add"===a.action});if(20<addEvents.length){null===this._eventCreationConfirmationDialog?this._eventCreationConfirmationDialog=new X({type:Z.types.binaryConfirm,closeButtonVisible:!1,title:A.maxEventCreationWarningTitle,text:K.substitute(A.maxEventCreationWarning,[addEvents.length])}):this._eventCreationConfirmationDialog.set("text",K.substitute(A.maxEventCreationWarning,
[addEvents.length]));var d=this._eventCreationConfirmationDialog.on("close",c.hitch(this,function(a){switch(a){case Z.returnValues.oneOrYes:f.resolve();break;case Z.returnValues.allOrNo:f.reject();break;default:console.error(this.declaredClass+" - _confirm(): Unknown choice",a)}d.remove()}));this.own(d);this._eventCreationConfirmationDialog.open()}else f.resolve();return f.promise},_beginUpdate:function(){if(this._updating)return!1;this.calendar&&this.calendar.disable();this.scheduleTree&&this.scheduleTree.disableFields(!0);
this._updating=!0;U.widget.clear();this._disableButtons(!0);return this._updating},_buildBlockTree:function(a){var b=[this._treeRootTemplate];null!==this._blockTree&&this._blockTree.destroy();null!==this._blockTreeModel&&this._blockTreeModel.destroy();a&&(b=a);this._blockTreeStore=new I(new G({data:b,getChildren:function(a){return this.query({parent:a.id})}}));this._blockTreeModel=new m({store:this._blockTreeStore,query:{id:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}});this._blockTree=
new p({model:this._blockTreeModel,baseClass:"blockNavigationTree",showRoot:!1,getIconStyle:c.hitch(this,function(a){if("schedule"===a.type)return{background:a.color,marginRight:"4px",marginBottom:"4px",width:"14px",height:"14px"}}),_createTreeNode:c.hitch(this,function(a){return"schedule"===a.item.type?new p._TreeNode(a):new ea(a)}),onClick:c.hitch(this,function(a,b){b!==this._blockTree._getFirst()&&this._blockTree._getFirst().setSelected(!1);this._isBlockRequest="block"===a.type;this._changeSchedule(a.value)})});
this._blockTree.startup();f.place(this._blockTree.domNode,this.blockTreeView,"only")},_changeSchedule:function(b,f){this.fetchAndClear(b,f);null!==this._updateScheduleDetailsDeferred&&!1===this._updateScheduleDetailsDeferred.isCanceled()&&this._updateScheduleDetailsDeferred.cancel("Navigation");!this._isBlockRequest&&0<b&&(this._updateScheduleDetailsDeferred=new a,this.own(this._updateScheduleDetailsDeferred),J.get("EnterpriseSchedules/UpdateScheduleDetails",{query:{scheduleId:b},handleAs:"json"}).then(c.hitch(this,
this._checkProgress)),this._updateScheduleDetailsDeferred.then(c.hitch(this,this.showErrors),c.hitch(this,this._clearPollingTimer)))},_checkForDirtyEvents:function(){return 0<this.calendar.store.query({dirty:"dirty"}).length},_checkItemForChange:function(a){var b=!1;if(-1===a.eventId||this.eventEditor.isDirty)b=!0;return b},_checkProgress:function(a){if("undefined"!==typeof a.processId)switch(this._statusProcessId=a.processId,a.errStatus){case 200:this._updateScheduleDetailsDeferred.resolve(a);break;
case 510:this._pollForStatus();break;case 508:this._updateScheduleDetailsDeferred.resolve(a.errors)}},_checkSaveResults:function(a){200!==a.status&&this.showErrors(a.errorArray);this.saveDeferred.resolve(a);return this.saveDeferred},_checkValidateResults:function(a){if(a.status===this.ERROR_CODE.Success||a.status===this.ERROR_CODE.ScheduleEventUnLinked)if(0===a.data.length&&a.status===this.ERROR_CODE.Success)this.validateDeferred.resolve();else{var b=f.create("div");if(0<a.data.length){f.create("div",
{innerHTML:A.overlappingEvents},b);var d=f.create("ul",{"class":"scheduleLinks"},b),g=[];a.data.forEach(c.hitch(this,function(a){if(!g.includes(a.id)){g.push(a.id);var b=function(b){if(b.id.toString()===a.id.toString())return b},k;a.isBlock?(k=this.blockStore.data.find(b),k.isBlock=!0):k=this.scheduleTree._scheduleStore.data.find(b);b=f.create("li",{"class":"linkable dark scheduleLink",innerHTML:k.name},d);this.own(F(b,"click",c.hitch(this,function(){this.validateDeferred.reject();this.makeClean();
this.calendar.setDirty(!1);this._scheduleLinkDialog.close();k.isBlock?(this.blockFilteringSelect.set("value",-1),this.blockFilteringSelect.set("value",k.id)):(this.blockFilteringSelect.set("value",-1),this._selectNodeTimer=setTimeout(c.hitch(this,function(){clearTimeout(this._selectNodeTimer);this.scheduleTree.selectNode(k.id)}),500))})))}}))}f.create("span",{innerHTML:A.proceedWithSave},b);this._scheduleLinkDialog=new X({title:A.invalidEvent,type:Z.types.binaryConfirm,content:b,closeButtonVisible:!1});
this.own(F(this._scheduleLinkDialog,"close",c.hitch(this,function(a){switch(a){case Z.returnValues.oneOrYes:this.validateDeferred.resolve();break;case Z.returnValues.allOrNo:this.makeDirty();a=this.calendar.store.query({action:"delete"});0<a.length&&this.calendar.store.remove(a[0].id);this.calendar.set("selectedItem",this.calendar.dirtyEvent);this.validateDeferred.reject();break;case Z.returnValues.none:break;default:console.error(this.declaredClass+" - _promptUserForSave(): Unknown choice",a)}})));
this._scheduleLinkDialog.open()}else this.showErrors(a.errorArray),this.validateDeferred.reject();return this.validateDeferred},_cleanupDndEvents:function(a){switch(a.item.repeat.type){case Y.REPEAT_EXCEPTION:this.dndMoveDay(a);break;case Y.REPEAT_RANGE:this.dndEditDateRange(a,!1);break;case Y.REPEAT_RECURRENCE:this.dndMoveDay(a);this.updateDayOfWeek(a);break;case Y.REPEAT_CALENDAR:if(a.item.repeat.start&&a.item.repeat.end){var b=a.item.repeat.value[0].type;b===Y.REPEAT_RECURRENCE?this.dndEditTerminating(a):
b===Y.REPEAT_RANGE&&this.dndEditDateRange(a,!0)}else this.dndEditDateRange(a,!1)}},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_cloneEvent:function(a){return new ha(a)},_createBlockManager:function(a){this.blockManagerDialog=new fa({site:this.site,enterpriseScheduleId:a,maxRatio:.98,draggable:!1,title:v.manageBlocks,blocks:this.blocks,scheduleTreeData:this.scheduleTree._scheduleStore.query(this._getNonRootItems)});this.own(d.after(window,"onresize",c.hitch(this,this._resizeBlockManagerScrollArea)),
F(this.blockManagerDialog,"blockModify",c.hitch(this,this._changeSchedule,this.blockId)),F(this.blockManagerDialog,"refreshBlocks",c.hitch(this,function(){this.updateBlockSelector().then(c.hitch(this,function(){this.blockManagerDialog.updateBlocks(this.blocks);this.eventEditor.updateBlockSelector(this.blocks)}))})))},_createContentHeader:function(){var a=f.create("div",{"class":"rcContentHeader"}),b=f.create("span",{"class":"rcHeaderIconWrapper"},a);this._contentHeaderIcon=f.create("span",{"class":"rcHeaderIcon rcSchedulesHeaderIcon"},
b);this._contentHeaderTitle=f.create("h1",{"class":"rcHeaderText"},a);return a},_createCustomLoader:function(){f.create("div",{id:"preloader2",className:"preloader"},this.domNode.parentElement,"first")},_createGenericPrompt:function(){null===this._genericConfirmDialog&&(this._genericConfirmDialog=new X({type:Z.types.binarySave}))},_createToolbar:function(){this._saveButton=this._toolbar.getButton("save");this._cancelButton=this._toolbar.getButton("cancel");this._ahacButton=this._toolbar.getButton("ahac");
this._editButton=this._toolbar.getButton("edit");var a=rc.session.isPrivate()&&rc.session.canEditEnterprise(),b=rc.session.isPrivate()&&rc.session.hasRole(rc.session.roles.entSchedAdmin);this._toolbar.set("canEdit",a);this._toolbar.set("admin",b);this.own(F(this._toolbar,"saveClicked",c.hitch(this,this._saveClicked)),F(this._toolbar,"cancelClicked",c.hitch(this,this.cancel)),F(this._toolbar,"ahacClicked",c.hitch(this,this._goToReport)),F(this._toolbar,"editClicked",c.hitch(this,this.goToAdminView)));
a?this._saveLoader=f.create("span",{className:"syncLoader"},this._saveButton.titleNode,"first"):this.calendar.disable();return this._toolbar},_decodeErrorMessage:function(a){var b=[64,65,67],c=v.invalidParamErrMsg+v.errMsgTemplateEnd,c=""===a.block?c+a.schedule:c+a.block;if(a.hasOwnProperty("error")&&a.error.hasOwnProperty("type")){switch(Number(a.error.type)){case this._errorTypes.error:c=70===a.error.reason?C.cannotCommunicate:S.codes.error[a.error.reason];break;case this._errorTypes.reject:c=S.codes.reject[a.error.reason];
break;case this._errorTypes.abort:c=-1!==b.indexOf(a.error.reason)?C.cannotCommunicate:S.codes.abort[a.error.reason]}c+=v.errMsgTemplateEnd+a.block}return c},_decodeProgressResponse:function(a){if("undefined"!==typeof a.progress){var b={processId:a.progress.processId,errStatus:510};a.progress.completed===a.progress.outOf&&("undefined"!==typeof a.progress.error?(b.errStatus=508,b.errors=a.progress.error):b.errStatus=200);this._checkProgress(b)}},_destroyLoader:function(){t.byId("preloader2")&&f.destroy("preloader2")},
_disableButtons:function(a){Object.keys(this._buttons).forEach(c.hitch(this,function(b){this._buttons[b].set("disabled",a)}))},_discardSingleEventChanges:function(a,b,c,f){f?(this.makeClean(),this.fetch(this.pointInstance,this.data.schedule.id,!0)):this._itemSelected(a,b,c);this.calendar.currentSelectedItem=null},_endUpdate:function(){this._updating&&(!this._inSummary&&this.canEdit&&this.calendar&&this.calendar.enable(),this.scheduleTree&&this.scheduleTree.disableFields(!1),this._disableButtons(!1),
this._updating=!1,this.makeClean(),this.calendar.setDirty(!1))},_fetchEnterpriseSchedule:function(b,f){var d=new a,g={type:"rest",method:"GET",timeout:12E4,path:this._path+b,blockId:f,isBlockGroup:this._isBlockRequest,siteId:this.site,load:c.hitch(this,function(a){d.resolve(a.data)}),error:c.hitch(this,function(a){d.reject(new P({name:K.substitute(y.xNotFound,[v.es]),message:v.cannotLoadES,suggestion:v.hostOfflineFix,e:a}))})};this.newBlock=!1;rc.xhr.requestNow(g);return d.promise},_fetchSequence:function(f,
d){var g=new a;this._fetchPromiseObj.ScheduleData=this._fetchSchedule(f,d);b(this._fetchPromiseObj).then(c.hitch(this,function(a){var b=this.data;"undefined"!==typeof a.EnterpriseScheduleData&&(this.site=a.EnterpriseScheduleData.siteID,this.increments=a.EnterpriseScheduleData.minuteIncrement,this._hasCostRate=a.EnterpriseScheduleData.hasCostRate,b=a.EnterpriseScheduleData);b.schedule=a.ScheduleData.schedule;b.isBlockGroup=a.ScheduleData.isBlockGroup;b.defaultAppliesTo=a.ScheduleData.defaultAppliesTo;
this._fetchPromiseObj={};try{this.render(b),g.resolve()}catch(la){"TypeError"===la.name?console.error(this.declaredClass+" - _fetchSequence: render() threw exceptoin",la):this._onInitError(la)}}));return g.promise},_fetchSchedule:function(b,f){var d=new a,g={type:"rest",method:"GET",timeout:12E4,path:"Schedule/"+b,blockId:f,isBlockGroup:this._isBlockRequest,updateIfDifferent:this.newBlock,siteId:this.site,viewRange:B.stringify(this._getViewRange()),load:c.hitch(this,function(a){d.resolve(a.data)}),
error:c.hitch(this,function(a){d.reject(new P({name:K.substitute(y.xNotFound,[v.es]),message:v.cannotLoadES,suggestion:v.hostOfflineFix,e:a}))})};this.newBlock=!1;rc.xhr.requestNow(g);return d.promise},_getDeleteContent:function(a){var b="";if(this._isDailyEvent(a))b=v.deleteDailyText;else if(a.repeat.type===Y.REPEAT_RANGE)b=v.deleteDateRangeText;else if(a.repeat.type===Y.REPEAT_CALENDAR||this._isCalendarOverride(a))b=v.deleteCalText;return b},_getNonRootItems:function(a){return"root"!==a.type},_getSendRequest:function(a,
b){return{gid:"es",type:"rest",method:"POST",timeout:12E4,path:this._path+this.pointInstance,blockId:this.data.schedule.id,forBlock:this._isBlockRequest,siteID:this.site,postData:B.stringify(a),reason:b||"",load:c.hitch(this,function(a){return this._checkSaveResults(a.data)}),error:c.hitch(this,function(a){return this.saveDeferred.reject(new P({name:K.substitute(y.xNotFound,[v.es]),message:v.cannotLoadES,suggestion:v.hostOfflineFix,e:a}))})}},_getViewRange:function(){var a={start:null,end:null};this.calendar&&
(a=c.clone(this.calendar.get("viewRange")));null===a.start&&(a.start=da.getFirstDayOfWeek(new Date),a.end=new Date(a.start),a.end.setDate(a.end.getDate()+7));a.start=a.start.getTime()/1E3;a.end=a.end.getTime()/1E3;return a},_goToReport:function(){null!==this._reloadTimer&&(clearInterval(this._reloadTimer),this._reloadTimer=null);var a=E.objectToQuery({scheduleId:this.blockId,forBlock:this._isBlockRequest,site:this.site});x(this.getUri("TenantReport?"+a))},_isAllWildCard:function(a){return a.y===Y.WILDCARD&&
a.m===Y.WILDCARD&&a.dom===Y.WILDCARD},_isCalendarOverride:function(a){var b=!1;a.repeat.type===Y.REPEAT_OVERRIDE&&(b=-1!=a.repeat["for"].toLowerCase().indexOf("cal"));return b},_isDailyEvent:function(a){return a.repeat.type===Y.REPEAT_EXCEPTION&&this._isAllWildCard(a.repeat.value)},_isSpecialDelete:function(a){var b=!1;if(this._isDailyEvent(a))b=!0;else if(a.repeat.type===Y.REPEAT_RANGE)b=!0;else if(a.repeat.type===Y.REPEAT_CALENDAR||this._isCalendarOverride(a))b=!0;return b},_isTypeGrouped:function(a){return a.repeat.type!==
Y.REPEAT_WEEKLY},_itemSelected:function(a,b,f){this.calendar.setDirty(!1);null===a&&null===b.renderer&&this.closeEventPane();f||null===b.newValue?this.closeEventPane():(null!==a?this.calendar.store.get(a.id)?this.calendar.currentSelectedItem=c.clone(this.calendar.store.get(a.id)):this.calendar.currentSelectedItem=c.clone(a):a=new ha({}),this.eventEditor.fillData(c.clone(a),this.calendar._isEventEditable(b.newValue)),"undefined"!==typeof b.triggerEvent&&this.openEventPane())},_loadUserSchedule:function(){this.setUpToolbar(this._container);
this._createCustomLoader();this._container.startup();this._setupListeners();this.own(F(this.scheduleTree,"treeLoaded",c.hitch(this,this._selectScheduleAfterTreeLoaded)));g.addOnUnload(c.hitch(this,this._onUnload));this.canEdit=rc.session.canEditEnterprise();this._buildBlockTree()},_onCancel:function(a){this.calendar.store.remove(a.id);this._checkForDirtyEvents()||(this.makeClean(),this.calendar.setDirty(!1));this.closeEventPane()},_onChangeCalendar:function(a){if(a&&this.calendar.editable&&null!==
a.triggerEvent){var b=null,f=D.isRight(a.triggerEvent);a.item?(a.item.originalStartTime=a.source._editStartTimeSave,a.item.originalEndTime=a.source._editEndTimeSave,b=a.item):a.newValue&&(b=a.newValue);if(!this._inSummary&&!this.saving){var d=this.eventEditor._dataStore.get(this.eventEditor._eventId);if(this.eventEditor.isDirty&&null!==a.oldValue&&null!==this.calendar.currentSelectedItem&&void 0!==d){var g=this.calendar.currentView.triggerExtent;this.calendar.currentView.set("triggerExtent",Number.MAX_SAFE_INTEGER);
this._promptUserForSave(d).then(c.hitch(this,function(a){this.calendar.set("selectedItem",a.oldValue);this.calendar.currentView.set("triggerExtent",g);this.eventEditor._onUpdate()},a),c.hitch(this,function(){this.calendar.set("selectedItem",a.oldValue);this.calendar.currentView.set("triggerExtent",g)}))}else this._itemSelected(b,a,f)}}},_onConfirmDelete:function(a,b){switch(a){case Z.returnValues.allOrNo:case Z.returnValues.oneOrYes:this._checkForDirtyEvents()?this.deleteEvent(b,a,!1):(this.deleteEvent(b,
a,!0),this.calendar.setDirty(!1));break;case Z.returnValues.none:break;default:console.error(this.declaredClass+" - _onConfirmDelete(): Unknown choice",a)}},_onCreate:function(a){this.addEvent(a,!0)},_onDelete:function(a){null!==this.validateData&&l.forEach(this.validateData.events,c.hitch(this,function(b){b.eventId===a.eventId&&this.validateDeferred.cancel()}));if(-1===a.eventId){this.calendar.store.remove(a.id);this._checkForDirtyEvents()||(this.makeClean(),this.calendar.setDirty(!1));var b=this.eventEditor._storeReady;
this.eventEditor._storeReady=!0;this.closeEventPane();this.eventEditor._storeReady=b}else if(1<this.calendar.getEventsByEventId(a.eventId).length&&this._isTypeGrouped(a))if(this._isSpecialDelete(a))b=this._getDeleteContent(a),this._showDeletePrompt(b).then(c.hitch(this,this.deleteEvent,a,"all",!0));else{this.warningDialog.set("title",v.deleteTitleText);this.warningDialog.set("type",Z.types.multi);this.warningDialog.set("text",v.deleteGroupText);this.warningDialog.open();var f=this.warningDialog.on("close",
c.hitch(this,function(b){this._onConfirmDelete(b,a,f);f.remove()}));this.own(f)}else this._showDeletePrompt(K.substitute(v.confirmDeleteX,[a.label])).then(c.hitch(this,this.deleteEvent,a,"one",!0))},_onEditCalendarEnd:function(a){var b=a.item.repeat.type;a.item._item.isAllDay&&(a.preventDefault(),a.item.endTime.getDate()!==a.item.startTime.getDate()&&a.item.endTime.setDate(a.item.endTime.getDate()-1),a.item.startTime.setHours(0,0,0,0),a.item.endTime.setHours(23,59,59,0));0===a.item.endTime.getHours()&&
0===a.item.endTime.getMinutes()&&(a.item.endTime.setDate(a.item.endTime.getDate()-1),a.item.endTime.setHours(23,59,59,0));if(!this._inSummary)switch(a.item._item.originalStartTime=a.source._editStartTimeSave,a.item._item.originalEndTime=a.source._editEndTimeSave,b!==Y.REPEAT_CALENDAR&&b!==Y.REPEAT_RANGE&&(a.item._item.startTime=a.item.startTime,a.item._item.endTime=a.item.endTime),c.mixin(a.item._item,a.item),delete a.item._item._item,this.eventEditor.fillData(a.item._item,null),this.eventEditor._onDirty(),
a.item._item.action){case "add":this.eventEditor.repeatSelection.fillData(a.item._item);a.item._item.dirty="dirty";this.onChange();break;case "update":this._cleanupDndEvents(a);this.editEvent(a.item._item,!1);break;case "delete":this.deleteEvent(a.item._item,"one",!1);break;default:console.error(this.declaredClass+" - _onEditCalendarEnd(): Invalid event action",a.item._item.action)}},_onUnload:function(){this.saving&&this._clearPollingTimer()},_onUpdate:function(a){for(var b=this.calendar.store.query({eventId:a.submittedEvent.eventId}),
f=0;f<b.length;++f)b[f].id!==a.submittedEvent.id&&(b[f].schedules=a.submittedEvent.schedules,this.calendar.store.put(b[f]));if(a.schedulesRemoved){b=this._cloneEvent(a.submittedEvent);delete b.id;b.repeat={type:Y.REPEAT_EXCEPTION,value:{y:-1,m:-1,dom:-1}};b.dontMerge=!0;var d=a.originalSchedules;l.forEach(a.submittedEvent.schedules,c.hitch(this,function(a){a=d.indexOf(a);-1<a&&d.splice(a,1)}));0<d.length&&(b.schedules=d,this.deleteEvent(b,"one",!1))}this.editEvent(a.submittedEvent,!0)},_pollForStatus:function(){this._clearPollingTimer();
this._pollForStatusTimer=setTimeout(c.hitch(this,function(){J.get(this._path+"status",{query:{abort:0,processId:this._statusProcessId},handleAs:"json"}).then(c.hitch(this,this._decodeProgressResponse))}),500)},_promptUserForSave:function(b){var f=new a;this.own(f);!1===this._checkItemForChange(b)?f.resolve(!1):(this._createGenericPrompt(),this._genericConfirmDialog.set("title",v.confirmUnsavedChanges),this._genericConfirmDialog.set("text",C.unsavedChangesContinue),this._genericConfirmDialog.set("type",
Z.types.binarySave),this._genericConfirmDialogHandle=this._genericConfirmDialog.on("close",c.hitch(this,function(a){switch(a){case Z.returnValues.oneOrYes:f.resolve(!0);break;case Z.returnValues.allOrNo:case Z.returnValues.none:f.reject();break;default:console.error(this.declaredClass+" - _promptUserForSave(): Unknown choice",a)}this._genericConfirmDialogHandle.remove()})),this.own(this._genericConfirmDialogHandle),this._genericConfirmDialog.dialog.show());return f.promise},_render:function(a){this.summaryColours=
a.summaryColours;this.colorMap=this.scheduleTree.getColourMap();this.instanceDefaultAppliesTo=a.defaultAppliesTo;this._currentBlockId=a.schedule.id;this.emit("render")},_resizeBlockManagerScrollArea:function(){this.blockManagerDialog.resize({l:10,t:10,h:.98*document.body.clientHeight,w:.98*document.body.clientWidth});var a=w.getComputedStyle(this.blockManagerDialog.domNode),a=u.getMarginBox(this.blockManagerDialog.domNode,a).h,b=w.getComputedStyle(this.blockManagerDialog.titleBar),b=u.getMarginBox(this.blockManagerDialog.titleBar,
b).h,c=w.get(this.blockManagerDialog.containerNode,"paddingTop"),c=c+w.get(this.blockManagerDialog.containerNode,"paddingBottom"),f=w.getComputedStyle(this.blockManagerDialog.searchContainer),f=u.getMarginBox(this.blockManagerDialog.searchContainer,f).h,d=w.get(this.blockManagerDialog.scheduleSelectionPane.domNode,"paddingTop"),d=d+w.get(this.blockManagerDialog.scheduleSelectionPane.domNode,"paddingBottom"),a=a-b-c-f-d;w.set(this.blockManagerDialog.scheduleSelectionPane.domNode,"height",Math.floor(a)+
"px");w.set(this.blockManagerDialog.blockPreviewPane.contentPaneBody,"height",Math.floor(a)+"px")},_resizeScheduleTreeHeight:function(){var a=window.innerHeight,b=H("#rcSystemHeader")[0],c=w.getComputedStyle(b),b=u.getMarginBox(b,c).h,c=this.scheduleTreePane.domNode.offsetParent.offsetTop,f=w.getComputedStyle(this.editEventPane.domNode),f=u.getMarginBox(this.editEventPane.domNode,f).h,d=w.get(this.scheduleTreePane.domNode,"marginTop"),d=d+w.get(this.scheduleTreePane.domNode,"marginBottom"),g=w.getComputedStyle(this.scheduleTreePane.titleBarNode),
g=u.getMarginBox(this.scheduleTreePane.titleBarNode,g).h,k=w.getComputedStyle(this.blockSelectionContainer),k=u.getMarginBox(this.blockSelectionContainer,k).h,h=H(".rcAlarmsMiniBar"),l=0;0<h.length&&(l=w.getComputedStyle(h[0]),l=u.getMarginBox(h[0],l).h);w.set(this.scheduleTreeContainer,"maxHeight",a-b-c-f-d-g-k-l-5+"px")},_resizeScheduleTreeWidth:function(){var a=w.getComputedStyle(this.scheduleTreeContainer).width;w.set(this.scheduleTree.treeContainer,"width",a)},_returnFromAdmin:function(){window.location.hash=
this.getUri(this._hash)},_saveClicked:function(){this.eventEditor._onUpdate()},_selectScheduleAfterTreeLoaded:function(){var a=null;this._linkedSystem||this._linkedSchedule?this.scheduleTree.selectLinkedSchedule(this._linkedSystem,this._linkedSchedule)||(a=new P({name:C.urlErrorTitle,message:C.urlErrorMessage,suggestion:C.urlErrorAction})):this.scheduleTree.selectFirstSchedule()||(a=new P({name:y.loadFailed,message:v.noSchedulesFound}));this._makeTreeFitFirstNode();null!==a&&this._onInitError(a)},
_getRightPaneWidth:function(){var a=this.scheduleTree.getFirstNode();width=a&&a.rowNode&&a.rowNode.clientWidth?Number(a.rowNode.clientWidth)+20:this._rightPaneOpenWidth;return Math.max(width,this._rightPaneMinWidth)},_makeTreeFitFirstNode:function(){var a=this._getRightPaneWidth();this.rightContent.resize({w:0});this._container.resize();this.rightContent.resize({w:a});this._container.resize()},_setRepeat:function(a){var b=a.originalEvent.repeat,f=this.calendar.getUniqueIndexFromEvent(a.originalEvent),
b=this.calendar.getEventsByUniqueIdx(f,b.type,a.originalEvent.eventId);l.forEach(b,c.hitch(this,function(b){b.dirty="dirty";b.repeat=a.newEvent.repeat;this.calendar.putInStore([b],0)}))},_setLabels:function(a){var b=a.newEvent.repeat,f=a.newEvent.label,d=this.calendar.getUniqueIndexFromEvent(a.newEvent,a.originalLabel);a=this.calendar.getEventsByUniqueIdx(d,b.type,a.newEvent.eventId);l.forEach(a,c.hitch(this,function(a){a.dirty="dirty";a.label=f}))},_setTitle:function(a){this.title=null!==a&&void 0!==
a.errStatus&&200===a.errStatus?a.esName||this.title||"":a||this.title||"";this._toolbar&&this.title&&this._toolbar.setTitle(this.title);this.fullTitle=this.title;this.onSetTitle(this.fullTitle)},_setUpHash:function(){var a=x();this.isAdminPage()||Q.mode<Q.PROXY_LIVE&&(a=this._unobfuscateUrlQuery(a));a=a.split("?");if(1<a.length){var b=E.queryToObject(a[1]);2===Object.keys(b).length&&(b.site?(this.site=b.site,this.view=b.view):(this._linkedSystem=b.system,this._linkedSchedule=b.schedule))}this._hash=
a[0]},_setupListeners:function(){this.own(F(this.calendar,"change",c.hitch(this,this._onChangeCalendar)),F(this.calendar,"itemEditEnd",c.hitch(this,this._onEditCalendarEnd)),F(this.calendar,"contextDelete",c.hitch(this,this._onDelete)),F(this.calendar,"triggerSave",c.hitch(this,this.saveByMode)),F(this.calendar,"changeSummary",c.hitch(this,this.toggleEventDetails)),F(this.calendar,"makeClean",c.hitch(this,this.makeClean)),F(this.calendar,"navigateBlocks",c.hitch(this,this._changeSchedule)),F(this.calendar,
"parentBlock",c.hitch(this,function(a,b){b?(this.blockFilteringSelect.set("value",-1),this.blockFilteringSelect.set("value",a)):this.scheduleTree.selectNode(a)})),F(this.scheduleTree,"change",c.hitch(this,this._changeSchedule)),F(this.scheduleTree,"resize",c.hitch(this,this._resizeScheduleTreeWidth)),F(this.eventEditor,"blockChange",c.hitch(this,function(a,b){b?(this.blockFilteringSelect.set("value",-1),this.blockFilteringSelect.set("value",a)):this.scheduleTree.selectNode(a)})),F(this.eventEditor,
"dirty",c.hitch(this,this.onChange)),F(this.eventEditor,"contentChanged",c.hitch(this,function(){this.editEventPane.get("open")&&this.editEventPane._setOpenAttr(!0,!0);this._resizeScheduleTreeHeight()})));l.forEach(["update","create","delete","cancel"],function(a){this.own(F(this.eventEditor,a,c.hitch(this,"_on"+T.toTitleCase(a))))},this);this.own(F(this.eventEditor,"labelChange",c.hitch(this,this._setLabels)),F(this.eventEditor,"repeatTypeChange",c.hitch(this,this._setRepeat)),d.after(this.calendar.columnView,
"_onGridMouseDown",c.hitch(this,this.warnUserOfReadOnly)),F(this.calendar,"viewRangeChange",c.hitch(this,function(){this.data&&this.fetchAndClear(this.data.schedule.id)})),d.after(this,"render",c.hitch(this,this.renderWidgets)),F(this.blockManagerButton,"click",c.hitch(this,function(){this.data&&this._showBlockManagerDialog(this.data.entId)})),F(this.editEventPane,"toggle",c.hitch(this,this.resizeRightContent)),F(this.scheduleTreePane,"toggle",c.hitch(this,this.resizeRightContent)),F(this.editEventPane,
"willToggle",c.hitch(this,this.openRightContentPane,!0)),F(this.scheduleTreePane,"willToggle",c.hitch(this,this.openRightContentPane,!1)),F(window,"resize",c.hitch(this,this._resizeScheduleTreeHeight)),F(this.calendarContainer,"resize",c.hitch(this.calendar.resize)))},_showBlockManagerDialog:function(a){null===this.blockManagerDialog&&this._createBlockManager(a);this.blockManagerDialog._selectedBlocks=[];this.blockManagerDialog.show()},_showDeletePrompt:function(b){var f=new a;this._createGenericPrompt();
this._genericConfirmDialog.set("title",v.confirmDelete);this._genericConfirmDialog.set("text",b);this._genericConfirmDialog.set("type",Z.types.deleteCancel);this._genericConfirmDialogHandle=this._genericConfirmDialog.on("close",c.hitch(this,function(a){switch(a){case Z.returnValues.oneOrYes:f.resolve();break;case Z.returnValues.allOrNo:f.reject();break;case Z.returnValues.none:break;default:console.error(this.declaredClass+" - _showDeletePrompt(): Invalid error Status")}this._genericConfirmDialogHandle.remove()}));
this.own(this._genericConfirmDialogHandle);this._genericConfirmDialog.dialog.show();return f.promise},_switchView:function(a){switch(a){case "properties":case "scheduleTree":this._viewAdmin();break;default:this._loadUserSchedule()}},_toggleBlockTree:function(a){if(0<a)rc.xhr.request({path:"BlockManager/SchedulesForPreview",type:"rest",method:"GET",blockId:a}).then(c.hitch(this,function(b){b.data&&200===b.data.errStatus&&(b=[this._treeRootTemplate].concat(b.data.blockData),this._buildBlockTree(b),
this._isBlockRequest=!0,this._changeSchedule(a),this._blockTree._getFirst().setSelected())})),q.remove(this._blockTree.domNode,"hidden"),q.add(this.scheduleTree.domNode,"hidden");else{this._isBlockRequest=!1;q.add(this._blockTree.domNode,"hidden");q.remove(this.scheduleTree.domNode,"hidden");this.scheduleTree.selectFirstSchedule();var b=this.scheduleTree.get("selected");b&&this._changeSchedule(b.id)}},_unobfuscateUrlQuery:function(a){var b=a.split("?");a=aa.toCharString(N.decode(b[0]));1<b.length&&
(a+="?"+b[1]);return a},_updateContentHeader:function(){k.set(this._contentHeaderTitle,{innerHTML:this._adminContent.esName+" "+v.settings})},_validate:function(b){M.publish("sticky",{type:"info",message:v.checkingOverlappingEvents+"..."});this.validateDeferred=new a;this.validateData=b;b={gid:"es",type:"rest",method:"POST",timeout:12E4,path:this._path+"overlappingEvents/"+this.pointInstance,blockId:this.data.schedule.id,siteID:this.site,postData:B.stringify(b),load:c.hitch(this,function(a){this.validateData=
null;return this.validateDeferred.isCanceled()?(this.clearToasts(),null):this._checkValidateResults(a.data)}),error:c.hitch(this,function(a){return this.validateDeferred.reject(new P({name:K.substitute(y.xNotFound,[v.es]),message:v.cannotLoadES,suggestion:v.hostOfflineFix,e:a}))})};rc.xhr.request(b);return this.validateDeferred},_validateAndSave:function(a,b){var f=F(this,"sendReasonAdded",c.hitch(this,function(d){f.remove();if(rc.session.reasonRequired()&&!d)this.showChangeReasonError();else{var g=
""!=this._changeReason?this._changeReason:b,k=this.calendar.encode();this._askForEventCreationConfirmation(k.events).then(c.hitch(this,function(){var b=this._getSendRequest(k,g);this._validateApprovalSession(b).then(c.hitch(this,function(){this.send(a,k,b)}),function(){})}),function(){})}}));this.sendWithReason("enterprise-schedule",b)},_viewAdmin:function(){this._adminContent||(q.add(this.containerNode,"hidden"),q.add(window.document.body,"admin"),this._loadAdminContent({iconClass:"rcScheduleHeaderIcon",
schedule:this.pointInstance,site:this.site,title:"",type:"schedule"},"webview/admin/schedules/Schedule"))},destroy:function(){this.inherited(arguments);this._destroyLoader();null!==this._saveConnect&&this._saveConnect.remove();null!==this._cancelConnect&&this._cancelConnect.remove();null!==this._saveLoadEvent&&this._saveLoadEvent.remove();null!==this._updateScheduleDetailsDeferred&&!1===this._updateScheduleDetailsDeferred.isCanceled()&&this._updateScheduleDetailsDeferred.cancel("Navigation");null!==
this._reloadTimer&&(clearInterval(this._reloadTimer),this._reloadTimer=null);this._onUnload();l.forEach(this._tooltipIds,function(a){W.remove(a)},this);this.blockManagerDialog&&this.blockManagerDialog.destroy();this.calendar&&this.calendar.destroy();this.eventEditor&&this.eventEditor.destroy();this.scheduleTree&&this.scheduleTree.destroy();this._adminContent&&(q.remove(window.document.body,"admin"),this._adminContent.destroy());this._adminTopContent&&f.destroy(this._adminTopContent);this._scheduleLinkDialog&&
this._scheduleLinkDialog.destroy()}})})},"webview/reliable/_enterpriseSchedule/StoreMixin":function(){define(["dojo/_base/lang","dojox/calendar/StoreMixin","dojox/html/entities","webview/util/globalConstants"],function(r,p,m,l){r.extend(p,{colorAttr:"color",priorityAttr:"npriority",repeatTypeAttr:"repeat",parentScheduleAttr:"schedules",startValueAttr:"startValue",summaryColorAttr:"summaryColor",_getParentSchedule:function(h){return this.domScheduleTree.getParentFromArray(h)},_getBlockLabel:function(h){return null!==
this.blockStore&&(h=this.blockStore.get(h[0]),void 0!==h)?m.encode(h.name):""},itemToRenderItem:function(h,c){if(this.owner)return this.owner.itemToRenderItem(h,c);var g=null,d=null;if(null===h.blockId){var n=this._getParentSchedule(h[this.parentScheduleAttr]);null!==n&&-1===h.sourceScheduleId?(g=Number(n.id),d=n.name):-1!==h.sourceScheduleId&&(g=h.sourceScheduleId,d=h.sourceScheduleName)}else d=this._getBlockLabel(h.blockId);var n=r.hitch(this,function(){var a=!1;1<h[this.parentScheduleAttr].length?
a=g!==this._blockIndex:h.blockId&&0<h.blockId.length&&(a=!0);return a}),a=r.hitch(this,function(){var a=!1;0<this.domScheduleTree._scheduleStore.query({id:g}).length&&(a=!0);return a}),b=0;if(h[this.repeatTypeAttr].type!==l.REPEAT_WEEKLY)if(null===h.blockId)b=this._getTotalRateFromScheduleArray(h.schedules);else{var m=h.blockId;h.blockId instanceof Array&&(m=h.blockId[0]);m=this.blockStore.get(m);"undefined"!==typeof m&&(b=m.rate)}return{id:c.getIdentity(h),eventId:h.eventId,summary:h[this.summaryAttr],
label:h.label,currency:this.currency,totalRate:b,startTime:this.decodeDate&&this.decodeDate(h[this.startTimeAttr])||this.newDate(h[this.startTimeAttr],this.dateClassObj),endTime:this.decodeDate&&this.decodeDate(h[this.endTimeAttr])||this.newDate(h[this.endTimeAttr],this.dateClassObj),allDay:null!=h[this.allDayAttr]?h[this.allDayAttr]:!1,cssClass:this.cssClassFunc?this.cssClassFunc(h):null,color:h[this.colorAttr],npriority:h[this.priorityAttr],repeatType:h[this.repeatTypeAttr].type,repeat:h[this.repeatTypeAttr],
schedules:h.schedules,parentSchedule:g,parentBlockLabel:d,hasParent:n(),hasAccessParent:a(),startValue:h[this.startValueAttr],summaryColor:h[this.summaryColorAttr],exclude:h.exclude||!1,reason:h.reason||"",index:"undefined"!==typeof h.index?h.index:Number.MAX_SAFE_INTEGER,blockId:h.blockId}},_getTotalRateFromScheduleArray:function(h){var c=0;this.domScheduleTree._scheduleStore.query(r.hitch(this,function(c){return-1<h.indexOf(c.id)&&0<c.rate})).forEach(r.hitch(this,function(g){c+=g.rate}));return c},
_updateItems:function(h,c,g){var d=!0,n=null;h=this.itemToRenderItem(h,this.store);-1!=c?g!=c?(this.items.splice(c,1),this.setItemSelected&&this.isItemSelected(h)&&(this.setItemSelected(h,!1),this.dispatchChange(h,this.get("selectedItem"),null,null))):(n=this.items[c],c=this.dateModule,d=(0!=c.compare(h.startTime,n.startTime)||0!=c.compare(h.endTime,n.endTime))&&h.repeatType!==l.REPEAT_RANGE&&n.repeatType!==l.REPEAT_RANGE&&h.repeatType!==l.REPEAT_CALENDAR&&n.repeatType!==l.REPEAT_CALENDAR,r.mixin(n,
h)):-1!=g&&this.items.splice(g,0,h);d?this._refreshItemsRendering():this.updateRenderers(n)}});return p})},"dojox/calendar/StoreMixin":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/dom-class dojo/Stateful dojo/when".split(" "),function(r,p,m,l,h,c,g){return r("dojox.calendar.StoreMixin",c,{store:null,query:{},queryOptions:null,startTimeAttr:"startTime",endTimeAttr:"endTime",summaryAttr:"summary",allDayAttr:"allDay",subColumnAttr:"calendar",cssClassFunc:null,
decodeDate:null,encodeDate:null,displayedItemsInvalidated:!1,itemToRenderItem:function(c,g){return this.owner?this.owner.itemToRenderItem(c,g):{id:g.getIdentity(c),summary:c[this.summaryAttr],startTime:this.decodeDate&&this.decodeDate(c[this.startTimeAttr])||this.newDate(c[this.startTimeAttr],this.dateClassObj),endTime:this.decodeDate&&this.decodeDate(c[this.endTimeAttr])||this.newDate(c[this.endTimeAttr],this.dateClassObj),allDay:null!=c[this.allDayAttr]?c[this.allDayAttr]:!1,subColumn:c[this.subColumnAttr],
cssClass:this.cssClassFunc?this.cssClassFunc(c):null}},renderItemToItem:function(c,g){if(this.owner)return this.owner.renderItemToItem(c,g);var a={};a[g.idProperty]=c.id;a[this.summaryAttr]=c.summary;a[this.startTimeAttr]=this.encodeDate&&this.encodeDate(c.startTime)||c.startTime;a[this.endTimeAttr]=this.encodeDate&&this.encodeDate(c.endTime)||c.endTime;c.subColumn&&(a[this.subColumnAttr]=c.subColumn);return"unstored"===this.getItemStoreState(c)?a:l.mixin(c._item,a)},_computeVisibleItems:function(c){if(this.owner)return this.owner._computeVisibleItems(c);
c.items=this.storeManager._computeVisibleItems(c)},_initItems:function(c){this.set("items",c);return c},_refreshItemsRendering:function(c){},_setStoreAttr:function(c){this.store=c;return this.storeManager.set("store",c)},_getItemStoreStateObj:function(c){return this.storeManager._getItemStoreStateObj(c)},getItemStoreState:function(c){return this.storeManager.getItemStoreState(c)},_cleanItemStoreState:function(c){this.storeManager._cleanItemStoreState(c)},_setItemStoreState:function(c,g){this.storeManager._setItemStoreState(c,
g)}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/CalEvent":function(){define(["dojo/_base/declare","webview/util/globalConstants"],function(r,p){return r("webview/reliable/_enterpriseSchedule/calendarEvents/CalEvent",null,{constructor:function(m){var l=new Date,h=new Date(Date.now()+9E5),c={type:p.REPEAT_EXCEPTION,value:{dom:l.getDate(),m:l.getMonth(),y:l.getFullYear()}};!1===rc.session.canEditException()&&(c={type:p.REPEAT_WEEKLY,value:l.getDay()});this.groupId=null;this.eventId=-1;
this.mnemonic="";this.label="New Event";this.summary="";this.startTime=l;this.startValue=null;this.endTime=h;this.endValue="Relinquish";this.schedules=[];this.isAllDay=!1;this.valueType=this.value=null;this.repeat=c;this.color="#aaa";this.action="add";this.index=Number.MAX_SAFE_INTEGER;this.dirty="clean";this.priority="normal";this.npriority=p.MAX_PRIORITY;this.blockId=null;this.exclude=!1;this.reason="";for(var g in m)"undefined"!==typeof m[g]&&(this[g]=m[g]);m&&(this.blockId=!m.blockId||m.blockId instanceof
Array?void 0===m.blockId?null:m.blockId:[m.blockId]);null!==this.startTime&&null!==this.endTime&&this.startTime>this.endTime&&(m=new Date(this.startTime),this.startTime=new Date(this.endTime),this.endTime=new Date(m))}})})},"webview/reliable/_enterpriseSchedule/widget/_BlockTreeNode":function(){define(["dijit/Tree","dojo/_base/declare","dojo/text!./templates/BlockTreeNode.html"],function(r,p,m){return p("webview/reliable/_enterpriseSchedule/widget/_BlockTreeNode",[r._TreeNode],{templateString:m})})},
"webview/reliable/_enterpriseSchedule/widget/BlockManager":function(){define("dijit/Dialog dijit/form/Button dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/TextBox dijit/registry dijit/Tooltip dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/json dojo/keys dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/BlockManager.html dojo/topic dojox/html/entities rc/_base/util rc/StyleSwitcher rc/_Widget ./BlockManagerConfirmContent ./_BlockTreeNode ./_TreeCheckBoxNode ../BlockPreviewObservable ../../../util/util ../../../widget/WarningDialog ../../../widget/WarningDialogEnums ../../../widget/TitlePane ../../../widget/WebviewContentPane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N){return b("webview/reliable/_enterpriseSchedule/widget/BlockManager",[O,r],{templateString:G,MAX_NAME_LENGTH:50,blockFilteringSelect:null,blockStore:null,blocks:[],confirmDeleteDialog:null,confirmUpdateDialog:null,confirmEmptyDeleteDialog:null,enterpriseScheduleId:null,firstLoad:!0,lastMatchIndex:0,matchingScheduleNodes:null,newBlockDialog:null,previouslySelected:null,scheduleMapBuilt:!1,scheduleTree:null,
scheduleTreeData:null,site:null,warningDialog:null,_blocks:null,_blockSelectionStore:null,_blockStore:null,_buildPreviewDebounce:null,_clearingSelection:!1,_currentCompleteSchedules:[],_currentScheduleSelection:[],_currentViewedBlockContents:[],_defaultHalfBlinkTime:750,_deleteConfirmContent:null,_DefaultPreviewRootObject:{id:"root",name:"root",type:"root",value:null,rate:0,hasChildren:!0},_DefaultTreeRootObject:{id:-1,name:"root",type:"root",value:null,rate:0,hasChildren:!0},_disableBlockSelection:!1,
_ignoreBlockChange:!1,_pendingBlockChange:!1,_previewTree:null,_previewStore:null,_readOnly:!1,_schedules:null,_scheduleTreeModel:null,_scheduleTreeStore:null,_selectedBlocks:[],_updateConfirmContent:null,constructor:function(){this.rcStrings=x;this.webviewStrings=y;this.errorStrings=v},postCreate:function(){this.inherited(arguments);this._blocks={};this._currentScheduleSelection=[];this._previewStore=new R(new F({notifyOnSetData:!0,data:[this._DefaultPreviewRootObject],getChildren:function(a){return this.query({parent:a.id})}}));
this.own(this._previewStore.query({type:"block"}).observe(k.hitch(this,function(a,b){-1<b&&this._previewStore.query({parent:a.id}).forEach(k.hitch(this,function(a){this._previewStore.remove(a.id)}))})));this._blockSelectionStore=new H(new F({data:[{name:this.webviewStrings.newBlock,label:'\x3cspan class\x3d"menu-item"\x3e'+this.webviewStrings.newBlock+"\x3c/span\x3e",id:-1}]}));this._scheduleTreeStore=new H(new F({data:[{id:-1,name:"root",type:"root",value:null,hasChildren:!0}],getChildren:function(a){return this.query({parent:a.id})}}));
this._scheduleTreeModel=new n({store:this._scheduleTreeStore,query:{type:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}});this._treeNodeWithCheckbox=b(d._TreeNode,{buildRendering:function(){this.inherited(arguments);"schedule"===this.item.type&&(this.checkboxNode=new m({labelText:"",definedValue:this.item.id,_onClick:function(){}}),u.add(this.checkboxNode.domNode,"block-checkbox"),w.place(this.checkboxNode.domNode,this.iconNode,"before"),this.own(E(this.checkboxNode,"change",k.hitch(this,
this._onCheckboxChange))))},_onCheckboxChange:function(a){this.onCheckboxChange(a,this.item,this)},onCheckboxChange:function(){}});this._blockStore=new F;1===this._scheduleTreeStore.data.length&&(this.scheduleTreeData.unshift(this._DefaultTreeRootObject),this._scheduleTreeStore.setData(this.scheduleTreeData));this._blockStore.setData(this.blocks);this._createCommitButtons();this._setupOnClicks();this.blockPreviewPane.setTitleContent(this.webviewStrings.blockPreview,"left");window.onbeforeunload=k.hitch(this,
this._onbeforeunload)},getSelectedSchedules:function(){return this._getSelectedSchedules()},hide:function(a){if(void 0!==a&&!1!==a)if(this._dirty){null===this.warningDialog&&(this.warningDialog=new aa({title:"",type:N.types.binary,text:""}));this.warningDialog.set("title",this.webviewStrings.confirmUnsavedChanges);this.warningDialog.set("type",N.types.binaryConfirm);this.warningDialog.set("text",this.webviewStrings.unsavedChangesCloseDialog);this.warningDialog.open();var b=E(this.warningDialog,"close",
k.hitch(this,function(a){switch(a){case N.returnValues.oneOrYes:this.makeClean(!0);this.hide();break;case N.returnValues.allOrNo:break;default:console.error(this.declaredClass+" - hide(): Unknown choice",a)}b.remove()}));this.own(b)}else this.inherited(arguments);else this.inherited(arguments);E.emit(this,"hide")},makeClean:function(a){this._dirty===a&&(u.toggle(this.saveNode.firstChild,"dirtySaveIcon",!a),u.toggle(this.saveNode.firstChild,"saveIcon",a));this._dirty=!a},onBlockModify:function(){E.emit(this,
"blockModify")},onRefreshBlocks:function(){E.emit(this,"refreshBlocks")},show:function(a){a||this._resetContent();this.makeClean(!0);this.inherited(arguments);this.defer(k.hitch(this,this._buildDisplayedContent))},updateBlocks:function(a){u.add(this.navPrev,"hidden");u.add(this.navNext,"hidden");u.add(this.noResults,"hidden");this._pendingBlockChange=!1;if(0===a.length||!1===L.arraysAreSame(a,this._blockStore.query(this._getRealBlocks)))this._pendingBlockChange=!0,this._blockStore.setData(a),this.blocks=
a,this._updateBlockSelection(),this._buildBlockSelector(k.clone(a));this.makeClean(!0)},_blinkNode:function(a){var b="#282D2F",c="#46575D";"White"===M.getStyle()&&(b="#E4E8EA",c="#BCD1D9");t.animateProperty({node:a,duration:this._defaultHalfBlinkTime,properties:{backgroundColor:{start:b,end:c}},onEnd:k.hitch(this,function(){t.animateProperty({node:a,duration:this._defaultHalfBlinkTime,properties:{backgroundColor:{start:c,end:b}},onEnd:function(){z.set(a,"backgroundColor","")}}).play()})}).play()},
_buildBlockCheckbox:function(a){var b=B("[data-query-block-id\x3d'"+a.id+"']",this.blockTreeContainer);0<b.length&&(this._blocks[a.id].destroy(),w.destroy(b[0]));b=this._createTreeCheckBoxNode(a.name,a.id);this.own(E(b,"checked",k.hitch(this,function(a,b,c){this.makeClean(!1);this._modifyBlockSelection(a,b,c)})));this._blocks[a.id]=b;w.place(b.domNode,this.blockTreeContainer,"last")},_buildBlockSelector:function(b){if(b)b.sort(k.hitch(this,function(a,b){return S.alphaNumericSort(a,b,"name")})),a.forEach(b,
k.hitch(this,function(a){a.label='\x3cspan class\x3d"menu-item"\x3e'+a.name+"\x3c/span\x3e";a.name=K.decode(a.name)})),b.unshift({name:"\f",label:"\x3cspan class\x3d'sectionDivider'\x3e"+this.webviewStrings.blocks+"\x3c/span\x3e",id:-2}),b.unshift({name:this.webviewStrings.newBlock,label:'\x3cspan class\x3d"menu-item"\x3e'+this.webviewStrings.newBlock+"\x3c/span\x3e",id:-1});else throw"Blocks must be passed in";this._blockSelectionStore.setData(b);null===this.blockFilteringSelect?(this.blockFilteringSelect=
new l({baseClass:"rcSelectBox blockSelector",hasDividers:!0,store:this._blockSelectionStore,placeHolder:this.webviewStrings.blockSelectorPlaceholder,searchAttr:"name",labelAttr:"label",labelType:"html",validate:function(){return!0},autoComplete:!1,queryExpr:"*${0}*"},this.blockSelector,"first"),this.blockFilteringSelect.startup(),this.own(E(this.blockFilteringSelect,"change",k.hitch(this,function(a){""!==a&&this._onBlockSelectorChange(a)})))):this.blockFilteringSelect.set("store",this._blockSelectionStore)},
_buildDisplayedContent:function(){null===this.scheduleTree&&this._buildScheduleTree();this.updateBlocks(this.blocks);this._buildNodeSelection();this._buildPreview()},_buildNodeSelection:function(){this.firstLoad?(this.firstLoad=!1,this._buildScheduleMap(),this._setScheduleTreeName(),this._createBlockSelection(),w.place(this.blockSelectionContainer.domNode,this.scheduleSelectionPane.domNode,"first"),w.place(this.scheduleSelectionContainer.domNode,this.scheduleSelectionPane.domNode,"last")):this._pendingBlockChange&&
(this._createBlockSelection(),w.place(this.blockSelectionContainer.domNode,this.scheduleSelectionPane.domNode,"first"));this.makeClean(!0)},_buildPreview:function(){null!==this._previewTree&&(this._previewTree.destroy(),this._previewTree=null);this._buildPreviewDebounce=null;this._previewModel=new n({store:this._previewStore,query:{id:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}});this._previewTree=new d({model:this._previewModel,baseClass:"blockNavigationTree",showRoot:!1,getIconStyle:k.hitch(this,
function(a){if("schedule"===a.type)return{backgroundColor:a.color,backgroundImage:"none",marginBottom:"4px",marginRight:"4px",height:"14px",width:"14px"}}),_createTreeNode:k.hitch(this,function(a){return"schedule"===a.item.type?new d._TreeNode(a):new Q(a)}),onClick:k.hitch(this,this._onPreviewItemClick)});this.blockPreviewPane.setMainContent(this._previewTree.domNode);this._previewTree.startup()},_buildScheduleMap:function(){if(null===this._schedules){this._schedules={map:{},orderedNodes:[]};for(var a=
null,b=B(".block-checkbox",this.scheduleTree.domNode),d=0;d<b.length;d++){var a=c.byNode(b[d]),a=this._scheduleTreeStore.query({value:a.definedValue})[0],g=this.scheduleTree.getNodesByItem(a)[0];f.set(g.domNode,"data-query-string",a.name.toLocaleLowerCase());this._schedules.map[a.value]=g.checkboxNode;this._schedules.orderedNodes[d]=g.checkboxNode}this.scheduleMapBuilt=!0}},_buildScheduleTree:function(){this.scheduleTree=new d({model:this._scheduleTreeModel,baseClass:"blockNavigationTree",showRoot:!1,
autoExpand:!0,getIconStyle:k.hitch(this,function(a){if("schedule"===a.type)return{backgroundColor:a.color,backgroundImage:"none",marginBottom:"4px",marginRight:"4px",height:"14px",width:"14px"}}),onClick:k.hitch(this,this._onScheduleTreeItemClick),_createTreeNode:k.hitch(this,function(a){a=new this._treeNodeWithCheckbox(a);this.own(E(a,"checkboxChange",k.hitch(this,this._modifyScheduleSelection)));return a})});w.place(this.scheduleTree.domNode,this.scheduleTreeContainer,"first");this.scheduleTree.startup()},
_clearSelection:function(b){var c=0;if(null===b){this._clearingSelection=!0;this._selectedBlocks=[];b=Object.keys(this._blocks);for(c=b.length-1;0<=c;c--)this._blocks[b[c]]instanceof T&&this._blocks[b[c]].set("checked",!1);if(this._schedules&&this._schedules.map)for(c=this._schedules.orderedNodes.length-1;0<=c;c--)this._schedules.orderedNodes[c]instanceof m&&this._schedules.orderedNodes[c].set("checked",!1);this._clearingSelection=!1;this._previewStore.setData([this._DefaultPreviewRootObject]);this._buildPreview()}else a.forEach(b.blocks,
k.hitch(this,function(a){this._blocks.hasOwnProperty(a)&&(this._blocks[a].set("checked",!1),a=this._selectedBlocks.indexOf(a),-1<a&&this._selectedBlocks.splice(a,1))})),a.forEach(b.schedules,k.hitch(this,function(a){this._schedules.map.hasOwnProperty(a)&&this._schedules.map[a].set("checked",!1)}))},_createBlock:function(a){this._showNewBlockDialog(a).then(k.hitch(this,this._sendNewBlock))},_createBlockSelection:function(){Object.keys(this._blocks).forEach(k.hitch(this,function(a){this._blocks[a].destroy()}));
this._blockStore.query(this._getRealBlocks).forEach(k.hitch(this,this._buildBlockCheckbox))},_createTreeCheckBoxNode:function(a,b){return new T({blockId:b,name:a,disabled:this._disableBlockSelection})},_createCommitButtons:function(){this.commitNodes=w.create("span",{"class":"blockManagerCommitOptions"});this.saveNode=w.create("div",{"class":"blockManagerCommitNode"},this.commitNodes,"first");w.create("span",{"class":"rc24Icon saveIcon commitIcon"},this.saveNode,"first");w.create("span",{"class":"blockManagerCommitText"},
this.saveNode,"last");this.own(E(this.saveNode,"click",k.hitch(this,this._saveBlock)));this.deleteNode=w.create("div",{"class":"blockManagerCommitNode"},this.commitNodes,"last");w.create("span",{"class":"rc24Icon deleteIcon commitIcon"},this.deleteNode,"first");w.create("span",{"class":"blockManagerCommitText"},this.deleteNode,"last");this.saveTooltip=new g({connectId:this.saveNode,label:y.save,position:["above"],showDelay:0});u.add(this.saveTooltip.domNode,"buttonBar");this.deleteTooltip=new g({connectId:this.deleteNode,
label:x.rcDelete,position:["above"],showDelay:0});u.add(this.deleteTooltip.domNode,"buttonBar");this.own(E(this.deleteNode,"click",k.hitch(this,this._deleteBlock)));this.blockPreviewPane.setTitleContent(this.commitNodes,"right")},_deleteBlock:function(){if(0<Number(this.blockFilteringSelect.get("value"))){var b=[];a.forEach(this._currentCompleteSchedules,k.hitch(this,function(a){b.push(this._scheduleTreeStore.get(a).name)}));0<b.length?this._deleteBlockWithSchedules(b):this._deleteEmptyBlock()}else I.publish("alert",
{type:"error",message:this.errorStrings.noBlockSelected})},_deleteBlockWithSchedules:function(a){null===this.confirmDeleteDialog&&(this.confirmDeleteDialog=new aa({type:N.types.save,title:""}));this.confirmDeleteDialog.set("title",this.webviewStrings.confirmDeleteAction);this.confirmDeleteDialog.set("closeButtonVisible",!1);this.confirmDeleteDialog.set("type",N.types.save);var b=this.confirmDeleteDialog.on("close",k.hitch(this,function(a){switch(a){case N.returnValues.oneOrYes:this._sendDeleteBlock(!0);
break;case N.returnValues.allOrNo:this._sendDeleteBlock(!1);break;case N.returnValues.none:break;default:console.error(this.declaredClass+" - _deleteBlock(): Unknown choice",a)}b.remove()}));this.own(b);null===this._deleteConfirmContent&&(this._deleteConfirmContent=new P);this._deleteConfirmContent.setContent(a,this.webviewStrings.confirmDeleteText);this.confirmDeleteDialog.set("text",this._deleteConfirmContent.domNode.innerHTML);this.confirmDeleteDialog.open()},_deleteEmptyBlock:function(){null===
this.confirmEmptyDeleteDialog&&(this.confirmEmptyDeleteDialog=new aa({type:N.types.binaryConfirm}));this.confirmEmptyDeleteDialog.set("title",this.webviewStrings.confirmDeleteAction);this.confirmEmptyDeleteDialog.set("text",this.webviewStrings.confirmDeleteEmptyBlock);this.confirmEmptyDeleteDialog.set("type",N.types.binaryConfirm);this.confirmEmptyDeleteDialog.set("closeButtonVisible",!1);var a=this.confirmEmptyDeleteDialog.on("close",k.hitch(this,function(b){switch(b){case N.returnValues.oneOrYes:this._sendDeleteBlock(!1);
break;case N.returnValues.allOrNo:break;case N.returnValues.none:break;default:console.error(this.declaredClass+" - _deleteEmptyBlock(): Unknown choice",b)}a.remove()}));this.own(a);this.confirmEmptyDeleteDialog.open()},_displayErrorMessage:function(a){var b="",c="sticky",f="error";switch(a.errStatus){case 200:b=this.errorStrings.successfulSave;c="alert";f="success";break;case 501:b=this.errorStrings.blockNameExists;break;case 502:b=this.errorStrings.blockDoesNotExist;break;case 503:b=this.errorStrings.noChangesFound;
break;case 504:b=this.errorStrings.unexpectedError;console.error(this.declaredClass+" - _displayErrorMessage():Unexected Error",a.errMSG);break;case 505:b=this.errorStrings.noSchedulesInBlock;break;case 506:b=this.errorStrings.scheduleDoesNotExist;break;case 507:b=this.errorStrings.blockCannotContainItself;break;case 510:b=this.errorStrings.saveInProgress;f="info";break;case 511:b=this.errorStrings.userCancelled;f="info";break;default:b="Unexpected Error",console.error(this.declaredClass+" - _displayErrorMessage(): Unknown error status",
a)}I.publish(c,{message:b,hasConfirm:!1,type:f})},_displayScheduleErrors:function(a){if(504===a.errStatus&&a.progress&&(a=a.progress.error,a instanceof Array))for(var b=0;b<a.length;b++)I.publish("sticky",{message:J.substitute(this.errorStrings.couldNotUpdateX,[a[b].block]),type:"error"}),console.error(this.declaredClass+" _displayScheduleErrors(): Error updating schedules",a[b])},_doBlockChange:function(a){""!==a&&0<a?this._getNodesToSelect(a).then(k.hitch(this,function(a){this._currentViewedBlockContents=
null!==a.blocks?a.blocks:[];this._currentScheduleSelection=null!==a.schedules?a.schedules:[];this._previewStore.notifyOnSetData=!1;this._selectCBNodes(a);setTimeout(k.hitch(this,function(){this._previewStore.notifyOnSetData=!0;this._previewStore.setData(this._previewStore.data)}),20);this.makeClean(!0);this._currentCompleteSchedules=[];this._completedCheckboxes=0;if(null!==a.blocks){var b=I.subscribe("blockContentReceived",k.hitch(this,function(a){++this._completedCheckboxes===a&&(this._previewStore.query({type:"schedule"}).forEach(k.hitch(this,
function(a){-1===this._currentCompleteSchedules.indexOf(a.value)&&this._currentCompleteSchedules.push(a.value)})),b.remove())},a.blocks.length));this.own(b)}else null!==a.schedules&&(this._currentCompleteSchedules=a.schedules)})):(this._currentViewedBlockContents=[],this._currentScheduleSelection=[],this._currentCompleteSchedules=[]);-2===a&&null!==this.previouslySelected&&this.blockFilteringSelect.set("value",this.previouslySelected);-2!==a&&a!==this.previouslySelected&&(this.previouslySelected=
a)},_findSchedule:function(){var a=this.scheduleSearchTB.get("value").toLocaleLowerCase();this.matchingScheduleNodes=B('[data-query-string *\x3d "'+a+'"]',this.scheduleSelectionPane.domNode);this.lastMatchIndex=0;0<this.matchingScheduleNodes.length?(u.remove(this.navNext,"hidden"),u.remove(this.navPrev,"hidden"),u.add(this.noResults,"hidden"),this._scrollToMatch(this.lastMatchIndex)):(u.add(this.navNext,"hidden"),u.add(this.navPrev,"hidden"),u.remove(this.noResults,"hidden"))},_getBlockContents:function(a){var b=
new q;this.own(b);rc.xhr.request({path:"BlockManager/SchedulesForPreview",type:"rest",method:"GET",blockId:a}).then(k.hitch(this,function(a){a.data&&200===a.data.errStatus&&b.resolve(a.data.blockData)}),k.hitch(this,function(a){console.error(this.declaredClass+" - _getBlockContents(): Error getting contents",a);b.reject(a)}));return b.promise},_getChangedIds:function(a){var b={schedulesToRemove:[],schedulesToAdd:[]};a.sort(S.compareGreaterThan);this._currentCompleteSchedules.sort(S.compareGreaterThan);
for(var c=0;c<this._currentCompleteSchedules.length;c++)-1===a.indexOf(this._currentCompleteSchedules[c])&&b.schedulesToRemove.push(this._currentCompleteSchedules[c]);for(c=0;c<a.length;c++)-1===this._currentCompleteSchedules.indexOf(a[c])&&b.schedulesToAdd.push(a[c]);return b},_getNodesToSelect:function(a){var b=new q;this.own(b);-1!==a&&""!==a?rc.xhr.request({path:"BlockManager/Schedules/",type:"rest",method:"GET",blockId:a}).then(k.hitch(this,function(a){a.data&&200!==a.data.errStatus?(this._displayErrorMessage(a.data),
b.reject(a.data.errMSG),console.error(this.declaredClass+" - _getNodesToSelect(): Error getting schedules to select",a)):b.resolve(a.data.blockData)}),k.hitch(this,function(a){console.error(this.declaredClass+" - _getNodesToSelect(): Unexpected Error",a);this._displayErrorMessage({errStatus:-1,errMSG:""});b.reject(a)})):b.resolve();return b.promise},_getRealBlocks:function(a){return 0<a.id},_getScheduleTree:function(){var a=new q;D.get("EnterpriseSchedules/GetFlatScheduleTree",{handleAs:"json",query:{enterpriseId:this.enterpriseScheduleId}}).then(k.hitch(this,
function(b){b&&200===b.errStatus&&(b=b.scheduleData,b.unshift(this._DefaultTreeRootObject),this._populateTreeStore(b),a.resolve())}),k.hitch(this,function(b){console.error(this.declaredClass+" - _getScheduleTree(): Error fetching schedules",b);a.reject(b)}));return a.promise},_getSelectedSchedules:function(){var b=[];null!==this._schedules&&a.forEach(this._schedules.orderedNodes,k.hitch(this,function(a){a.get("checked")&&b.push(Number(a.get("definedValue")))}));return b},_hasChanged:function(a,b){if(a.length!==
this._currentScheduleSelection.length||b.length!==this._currentViewedBlockContents.length)return!0;a.sort(S.compareGreaterThan);this._currentScheduleSelection.sort(S.compareGreaterThan);for(var c=0;c<a.length;c++)if(a[c]!==this._currentScheduleSelection[c])return!0;b.sort(S.compareGreaterThan);this._currentViewedBlockContents.sort(S.compareGreaterThan);for(c=0;c<b.length;c++)if(b[c]!==this._currentViewedBlockContents[c])return!0;return!1},_modifyBlockSelection:function(b,c,f){if(f){f=this._previewStore.query(k.hitch(function(a){return"block"===
a.type&&"root"===a.parent&&-1===S.alphaNumericSort(b,a.name)}));0<f.length&&f.forEach(k.hitch(this,function(a){this._previewStore.remove(a.id)}));f.unshift({id:"block"+c,name:b,type:"block",value:c,parent:"root",rate:0,hasChildren:!0});var d=this._previewStore.query({type:"schedule",parent:"root"});d.forEach(k.hitch(this,function(a){this._previewStore.remove(a.id)}));f.forEach(k.hitch(this,function(a){this._previewStore.put(a)}));d.forEach(k.hitch(this,function(a){this._previewStore.put(a)}));this._getBlockContents(c).then(k.hitch(this,
function(b){a.forEach(b,k.hitch(this,function(a){this._previewStore.put(a)}));I.publish("blockContentReceived")}),k.hitch(this,function(a){console.error(this.declaredClass+" - _modifyBlockSelection(): Error getting block contents",a)}));-1===this._selectedBlocks.indexOf(c)&&this._selectedBlocks.push(c)}else{for(f=this._selectedBlocks.indexOf(c);-1<f;)this._selectedBlocks.splice(f,1),f=this._selectedBlocks.indexOf(c);this._removeChildrenFromPreview(this._previewStore.query({parent:"block"+c}));this._previewStore.remove("block"+
c)}},_modifyScheduleSelection:function(a,b){if(!this._clearingSelection&&!1!==this.open)if(a){var c=this._previewStore.query();if(0<c.length){var f=[];f.push(c[0]);if(1==c.length)f.push({id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1});else{for(var d=this._schedules.orderedNodes.indexOf(this._schedules.map[b.value]),g=!1,h=1;h<c.length;h++){var l=c[h];if(!1===g){var n=this._schedules.orderedNodes.indexOf(this._schedules.map[l.value]);
d<n&&(g=!0,f.push({id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1}))}f.push(l)}!1===g&&f.push({id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1})}this._previewStore.setData(f)}}else this._previewStore.query({type:"schedule",parent:"root",value:b.value}).forEach(k.hitch(this,function(a){this._previewStore.remove(a.id)}))},_onbeforeunload:function(a){a=a||window.event;
var b=x.unsavedWarning;if(this._dirty)return a&&(a.returnValue=b),b},_onBlockSelectorChange:function(a){if(this._ignoreBlockChange)this._ignoreBlockChange=!1;else if(this._dirty&&a!==this.previouslySelected){null===this.warningDialog&&(this.warningDialog=new aa({title:"",type:N.types.binaryConfirm,text:"",closeButtonVisible:!1}));this.warningDialog.set("title",this.webviewStrings.confirmUnsavedChanges);this.warningDialog.set("text",this.errorStrings.unsavedChangesContinue);this.warningDialog.set("type",
N.types.binaryConfirm);this.warningDialog.set("closeButtonVisible",!1);var b=this.warningDialog.on("close",k.hitch(this,function(c){switch(c){case N.returnValues.oneOrYes:this.makeClean(!0);this._doBlockChange(a);break;case N.returnValues.allOrNo:this._ignoreBlockChange=!0;this.blockFilteringSelect.set("value",this.previouslySelected);break;default:console.error(this.declaredClass+" - _onBlockSelectorChange(): Unknown choice",c)}b.remove()}));this.own(b);this.warningDialog.open()}else this._doBlockChange(a)},
_onNewBlock:function(a,b){var c=B(".block-selection",this.scheduleSelectionPane.domNode)[0],c=B("[data-query-block-id]",c).filter(function(b){return-1===S.alphaNumericSort(a,b.title)})[0],f=this._createTreeCheckBoxNode(a,b);this.own(E(f,"checked",k.hitch(this,this._modifyBlockSelection)));this._blocks[b]=f;void 0!==c?w.place(f.domNode,c,"before"):w.place(f.domNode,this.blockTreeContainer,"last");this.onRefreshBlocks();this._doBlockChange(b);this.blockFilteringSelect&&this.blockFilteringSelect.set("displayedValue",
a)},_onPreviewItemClick:function(a){var b=null;"schedule"===a.type?(a=this._scheduleTreeStore.query({type:"schedule",value:a.value})[0],b=this.scheduleTree.getNodesByItem(a)[0].labelNode):"block"===a.type?(b=B(".block-selection",this.scheduleSelectionPane.domNode)[0],b=B('[data-query-string \x3d "'+a.name.toLowerCase()+'"]',b)[0]):console.error(this.declaredClass+" - _onPreviewItemClick(): Unknown type",a);null!==b&&(this._blinkNode(b),a=this.scheduleSelectionPane.containerNode,a.scrollTop=b.offsetTop-
a.offsetTop)},_onScheduleTreeItemClick:function(a,b){this._readOnly||b.checkboxNode.get("disabled")||(this.makeClean(!1),b.checkboxNode.get("checked")?(b.checkboxNode.set("checked",!1),this._previewStore.query({value:a.value,type:"schedule",parent:"root"}).forEach(k.hitch(this,function(a){this._previewStore.remove(a.id)})),this._selectChildSchedules(a.value,!1)):(this._previewStore.notifyOnSetData=!1,b.checkboxNode.set("checked",!0),this._selectChildSchedules(a.value,!0),setTimeout(k.hitch(this,function(){this._previewStore.notifyOnSetData=
!0;this._previewStore.setData(this._previewStore.data)}),20)))},_populateTreeStore:function(a){this._scheduleTreeStore=new H(new F({data:a,getChildren:function(a){return this.query({parent:a.id})}}));this._scheduleTreeModel=new n({store:this._scheduleTreeStore,query:{type:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}})},_removeBlock:function(a){this._blocks[a].destroy();this._blockSelectionStore.remove(a);delete this._blocks[a];for(var b=0;b<this.blocks.length;++b)if(this.blocks[b].id===
a){this.blocks.splice(b,1);break}this._previewStore.query(function(a){return"root"!==a.id}).forEach(k.hitch(this,function(a){this._previewStore.remove(a.id)}));this.blockFilteringSelect.reset();this._clearSelection(null)},_removeChildrenFromPreview:function(a){a.forEach(k.hitch(this,function(a){a.hasChildren&&this._removeChildrenFromPreview(this._previewStore.query({parent:a.id}));this._previewStore.remove(a.id)}))},_resetContent:function(){this._clearSelection(null);this._previewStore.setData([this._DefaultPreviewRootObject]);
this.blockFilteringSelect&&this.blockFilteringSelect.reset()},_saveBlock:function(){var b=Number(this.blockFilteringSelect.get("value")),c=!1;0===b&&0<this.previouslySelected&&(""===this.blockFilteringSelect.get("displayedValue")?b=-1:(b=this.previouslySelected,c=!0));var f=this._getSelectedSchedules();if(0<f.length||0<this._selectedBlocks.length)if(0<b)if(this._hasChanged(f,this._selectedBlocks)){var d=[];this._previewStore.query({type:"schedule"}).forEach(function(a){-1===d.indexOf(a.value)&&d.push(a.value)});
b=this._getChangedIds(d);if(0<b.schedulesToAdd.length||0<b.schedulesToRemove.length){var g=[],h=[],l=!1,c=this.webviewStrings.confirmUpdateAddText,f=[this.webviewStrings.and,this.webviewStrings.confirmUpdateDeleteText].join(" ");a.forEach(b.schedulesToAdd,k.hitch(this,function(a){a=this._scheduleTreeStore.query({value:a})[0];g.push(a.name);0<a.rate&&(l=!0)}));0<b.schedulesToRemove.length&&0<b.schedulesToAdd.length?a.forEach(b.schedulesToRemove,k.hitch(this,function(a){h.push(this._scheduleTreeStore.query({value:a})[0].name)})):
0<b.schedulesToRemove.length&&(a.forEach(b.schedulesToRemove,k.hitch(this,function(a){g.push(this._scheduleTreeStore.query({value:a})[0].name)})),c=this.webviewStrings.confirmDeleteText);null===this.confirmUpdateDialog&&(this.confirmUpdateDialog=new aa({title:"",type:N.types.save}));this.confirmUpdateDialog.set("title",this.webviewStrings.confirmUpdateAction);this.confirmUpdateDialog.set("type",N.types.save);null===this._updateConfirmContent&&(this._updateConfirmContent=new P);this._updateConfirmContent.setContent(g,
c,h,f,l);this.confirmUpdateDialog.set("text",this._updateConfirmContent.domNode.innerHTML);var n=this.confirmUpdateDialog.on("close",k.hitch(this,function(a){switch(a){case N.returnValues.oneOrYes:this._sendBlockUpdate(!0);break;case N.returnValues.allOrNo:this._sendBlockUpdate(!1);break;case N.returnValues.none:break;default:console.error(this.declaredClass+" - saveBlock(): Unknown choice",a)}n.remove()}));this.own(n);this.confirmUpdateDialog.open()}else this._sendBlockUpdate(!1)}else c?(this._sendBlockUpdate(!1),
this.updateBlockCheckBoxName(b,this.blockFilteringSelect.get("displayedValue"))):(this._displayErrorMessage({errStatus:200,errMSG:"Success"}),this.makeClean(!0));else-1===b?this._createBlock(null,this._selectedBlocks,this._getSelectedSchedules()):this._createBlock(this.blockFilteringSelect.get("displayedValue"));else this._displayErrorMessage({errStatus:505,errMessage:"Block contains no schedules"})},_scrollToMatch:function(a){var b=this.containerNode;this._blinkNode(this.matchingScheduleNodes[a]);
b.scrollTop=this.matchingScheduleNodes[a].offsetTop-b.offsetTop},_selectCBNodes:function(b){var c=null!==b.blocks?b.blocks:[],f=null!==b.schedules?b.schedules:[],d=[],g=[];0===c.length?this._clearSelection(null):(a.forEach(this._selectedBlocks,function(a){-1===c.indexOf(a)&&d.push(a)}),a.forEach(this._getSelectedSchedules(),function(a){-1===f.indexOf(a)&&g.push(a)}),this._clearSelection({blocks:d,schedules:g}));a.forEach(c,k.hitch(this,function(a){this._blocks[a].set("checked",!0)}));a.forEach(f,
k.hitch(this,function(a){this._schedules.map[a].set("checked",!0)}))},_selectChildSchedules:function(a,b){this._scheduleTreeStore.query({parent:a}).forEach(k.hitch(this,function(a){var c=this._schedules.map[a.value];c.get("disabled")||(c.set("checked",b),this._selectChildSchedules(a.value,b))}))},_sendBlockUpdate:function(a){var b=Number(this.blockFilteringSelect.get("value"));0===b&&-1!==this.previouslySelected&&null!==this.previouslySelected&&(b=this.previouslySelected);var c=this.blockFilteringSelect.get("displayedValue"),
f={path:"BlockManager/Update",type:"rest",method:"POST",blockId:b,blockName:c,updateSchedules:a,siteId:this.site,blocks:A.stringify(this._selectedBlocks),schedules:A.stringify(this._getSelectedSchedules())};this.updateBlockCheckBoxName(b,c);b=new q;a?this._validateApprovalSessionWithReason(f).then(b.resolve,b.reject):b.resolve();b.then(k.hitch(this,function(){rc.xhr.request(f).then(k.hitch(this,function(a){a.data&&200===a.data.errStatus?(this.makeClean(!0),this.onRefreshBlocks(),this._doBlockChange(this.blockFilteringSelect.get("value"))):
a.data&&507===a.data.errStatus?this._showDuplicateBlock():console.error(this.declaredClass+" - _sendBlockUpdate(): "+a.data.errMSG,a.data);this._displayErrorMessage(a.data)}),k.hitch(this,function(a){console.error(this.declaredClass+" - _sendBlockUpdate(): Unexpected Error",a);this._displayErrorMessage({errStatus:-1,errMSG:""})}))}),function(){})},_sendDeleteBlock:function(a){var b=Number(this.blockFilteringSelect.get("value")),c={path:"BlockManager/",type:"rest",method:"DELETE",deleteEvents:a,blockId:b,
siteId:this.site},b=new q;a?this._validateApprovalSessionWithReason(c).then(b.resolve,b.reject):b.resolve();b.then(k.hitch(this,function(){rc.xhr.request(c).then(k.hitch(this,function(a){a.data&&200===a.data.errStatus?(this._removeBlock(a.blockId),this.makeClean(!0),this.onRefreshBlocks()):console.error(this.declaredClass+" - _sendDeleteBlock(): "+a.data.errMSG,a.data);this._displayErrorMessage(a.data)}),k.hitch(this,function(a){console.error(this.declaredClass+" - _sendDeleteBlock(): Unexpected Error",
a);this._displayErrorMessage({errStatus:-1,errMSG:""})}))}),function(){})},_sendNewBlock:function(a){var b=this._selectedBlocks,c=this._getSelectedSchedules();rc.xhr.request({path:"BlockManager/",type:"rest",method:"POST",entId:this.enterpriseScheduleId,blockName:a,blocks:0<b.length?A.stringify(this._selectedBlocks):null,schedules:0<c.length?A.stringify(this._getSelectedSchedules()):null}).then(k.hitch(this,function(a){a.data&&200===a.data.errStatus&&(this._blockStore.put({id:a.data.newId,name:a.blockName}),
this._onNewBlock(a.blockName,a.data.newId),this.makeClean(!0));this._displayErrorMessage(a.data)}))},_setScheduleTreeName:function(){var a=new q;this.own(a);rc.xhr.request({path:"BlockManager/GetESName",type:"rest",method:"GET",enterpriseId:this.enterpriseScheduleId}).then(k.hitch(this,function(b){b.data&&200===b.data.errStatus?a.resolve(b.data.esName):(b.data?this._displayErrorMessage(b.data):this._displayErrorMessage({errStatus:-1,errMSG:"No Data Returned"}),a.reject())}),k.hitch(this,function(b){this._displayErrorMessage({errStatus:-1,
errMSG:"Error getting Enterprise Schedule Name"});console.error(this.declaredClass+" - _setScheduleTreeName(): Error getting ES Name",b);a.reject(b)}));return a.promise},_setupOnClicks:function(){this.own(E(this.scheduleSearchButton,"click",k.hitch(this,this._findSchedule)));this.own(E(this.scheduleSearchTB,"keypress",k.hitch(this,function(a){a.charOrCode===C.ENTER&&this._findSchedule()})));this.own(E(this.navPrev,"click",k.hitch(this,function(){this.lastMatchIndex=0!==this.lastMatchIndex?this.lastMatchIndex-
1:this.matchingScheduleNodes.length-1;this._scrollToMatch(this.lastMatchIndex)})));this.own(E(this.navNext,"click",k.hitch(this,function(){this.lastMatchIndex=this.lastMatchIndex!==this.matchingScheduleNodes.length-1?this.lastMatchIndex+1:0;this._scrollToMatch(this.lastMatchIndex)})))},_showDuplicateBlock:function(){this._previewTree.expandAll().then(k.hitch(this,function(){this._previewStore.query({value:this.blockFilteringSelect.get("value")}).forEach(k.hitch(this,function(a){a=this._previewTree.getNodesByItem(a)[0];
if(void 0!==a){this._previewTree.set("selectedNode",a);var b=this.blockPreviewPane.contentPaneBody;b.scrollTop=a.domNode.offsetTop-b.offsetTop;this._blinkNode(a.domNode)}}))}))},_showNewBlockDialog:function(a){var b=new q;this.own(b);if(null===this.newBlockDialog){this.dialogContent=w.create("div",{"class":"newBlockDialogContent"});this.newNameTB=new h({baseClass:"rcTextBox",value:null!==a?a:""});this.dialogContent.appendChild(this.newNameTB.domNode);var c=w.create("div",{"class":"button-container"},
this.dialogContent,"last");this.saveNewName=new p({baseClass:"webviewButton",iconClass:"rcIcon okIcon",disabled:null===a||""===a,label:this.webviewStrings.rcbOkay});c.appendChild(this.saveNewName.domNode);this.cancelNewName=new p({baseClass:"webviewButton",iconClass:"rcIcon cancelIcon",label:this.webviewStrings.rcbCancel});c.appendChild(this.cancelNewName.domNode);this.own(E(this.newNameTB,"keyup",k.hitch(this,function(){""!==this.newNameTB.get("value")?this.saveNewName.set("disabled",!1):this.saveNewName.set("disabled",
!0)})));this.newBlockDialog=new r({title:this.webviewStrings.saveAs,baseClass:"save-block-as",content:this.dialogContent})}var f=E(this.saveNewName,"click",k.hitch(this,function(a){var b=this.newNameTB.get("value");""!==b&&K.encode(b).length<this.MAX_NAME_LENGTH?b!==this.webviewStrings.newBlock&&b!==this.webviewStrings.allBlocks?(a.resolve(b),this.newBlockDialog.hide(),d&&d.remove(),f.remove()):I.publish("alert",{type:"error",message:this.errorStrings.reservedName+" "+b}):""===b?(I.publish("sticky",
{type:"error",message:this.errorStrings.emptyNameField}),console.error(this.declaredClass+" - _showNewBlockDialog(): New name empty")):I.publish("alert",{type:"error",message:J.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])})},b)),d=E(this.cancelNewName,"click",k.hitch(this,function(a){a.reject("User Cancelled");this.newBlockDialog.hide();f&&f.remove();d.remove()},b));this.newNameTB.set("value",null!==a?a:"");this.newBlockDialog.show();return b.promise},_updateBlockSelection:function(){this._blockStore.query().forEach(k.hitch(this,
function(a){this.updateBlockCheckBoxName(a.id,a.name)}))},updateBlockCheckBoxName:function(a,b){var c=B('[data-query-block-id \x3d "'+a+'"]',this.blockTreeContainer)[0];c&&(f.set(c,"title",b),(c=B(".block-checkbox-label",c)[0])&&f.set(c,"innerHTML",b))},destroy:function(){this.makeClean(!0);this.scheduleTree&&(this.scheduleTree.destroy(),this.scheduleTree=null);this._previewTree&&(this._previewTree.destroy(),this._previewTree=null);this.inherited(arguments)}})})},"webview/reliable/_enterpriseSchedule/widget/BlockManagerConfirmContent":function(){define("dijit/_TemplatedMixin dijit/_Widget dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!webview/nls/enterpriseSchedules dojo/text!./templates/BlockManagerConfirmContent.html".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return l("webview/reliable/_enterpriseSchedule/widget/BlockManagerConfirmContent",[p,r],{templateString:a,enterpriseScheduleStrings:n,postCreate:function(){this.inherited(arguments)},setContent:function(a,l,k,n,f){g.toggle(this.costWarning,"hidden",!f);c.set(this.topTextContainer,"innerHTML",l);c.set(this.topSchedules,"innerHTML","");m.forEach(a,h.hitch(this,function(a){d.create("li",{innerHTML:a},this.topSchedules,"last")}));k&&0<k.length?(c.set(this.bottomTextContainer,
"innerHTML",n),c.set(this.bottomSchedules,"innerHTML",""),m.forEach(k,h.hitch(this,function(a){d.create("li",{innerHTML:a},this.bottomSchedules,"last")})),g.remove(this.bottomArea,"hidden")):g.add(this.bottomArea,"hidden")}})})},"webview/reliable/_enterpriseSchedule/widget/_TreeCheckBoxNode":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/text!./templates/_TreeCheckBoxNode.html dijit/form/CheckBox".split(" "),
function(r,p,m,l,h,c,g){return l("webview/reliable/_enterpriseSchedule/widget/_TreeCheckBoxNode",[p,r,m],{templateString:g,checked:!1,disabled:!1,blockId:null,name:null,postCreate:function(){this.inherited(arguments);this.set("disabled",this.disabled);this.label.innerHTML=this.name;this.checkbox.set("onClick",function(){return!1});this.domNode.title=this.name;h.set(this.domNode,"data-query-string",this.name.toLocaleLowerCase());h.set(this.domNode,"data-query-block-id",this.blockId)},_getCheckedAttr:function(){return this.checked},
_setCheckedAttr:function(c){this.checkbox.set("checked",c);this._set("checked",c);this.onChecked(this.name,this.blockId,c)},_getDisabledAttr:function(){return this.disabled},_setDisabledAttr:function(d){this.checkbox.set("disabled",d);c.toggle(this.domNode,"disabled",d);this._set("disabled",d)},onChecked:function(){},_onClick:function(){this.disabled||this.set("checked",!this.checked)}})})},"webview/reliable/_enterpriseSchedule/BlockPreviewObservable":function(){define(["dojo/_base/kernel","dojo/_base/lang",
"dojo/when","dojo/_base/array"],function(r,p,m,l){r=function(h){function c(b,c){var d=h[b];d&&(h[b]=function(g){var f;"put"===b?f=h.getIdentity(g):"setData"==b&&(f=this.notifyOnSetData);if(a)return d.apply(this,arguments);a=!0;try{var k=d.apply(this,arguments);m(k,function(a){c("object"==typeof a&&a||g,f)});return k}finally{a=!1}})}var g=[],d=0;h=p.delegate(h);h.notify=function(a,c){d++;for(var b=g.slice(),h=0,f=b.length;h<f;h++)b[h](a,c)};var n=h.query;h.query=function(a,c){c=c||{};var b=n.apply(this,
arguments);if(b&&b.forEach){var q=p.mixin({},c);delete q.start;delete q.count;var f=h.queryEngine&&h.queryEngine(a,q),t=d,r=[],z;b.observe=function(a,k){1==r.push(a)&&g.push(z=function(a,g){m(b,function(b){var n=b.length!=c.count,m,q;if(++t!=d)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var p,u=-1,v=-1;if(void 0!==g){var x=[].concat(b);f&&!a&&(x=f(b));m=0;for(q=b.length;m<q;m++){var w=b[m];if(h.getIdentity(w)==g&&!(0>x.indexOf(w))){p=w;u=m;!f&&
a||b.splice(m,1);break}}}f?a&&(f.matches?f.matches(a):f([a]).length)&&(m=-1<u?u:b.length,b.splice(m,0,a),v=l.indexOf(f(b),a),b.splice(m,1),c.start&&0==v||!n&&v==b.length?v=-1:b.splice(v,0,a)):a&&(void 0!==g?v=u:c.start||(v=h.defaultIndex||0,b.splice(v,0,a)));if((-1<u||-1<v)&&(k||!f||u!=v))for(n=r.slice(),m=0;b=n[m];m++)b(a||p,u,v)})});var n={};n.remove=n.cancel=function(){var b=l.indexOf(r,a);-1<b&&(r.splice(b,1),r.length||g.splice(l.indexOf(g,z),1))};return n}}return b};var a;c("put",function(a,
c){h.notify(a,c)});c("add",function(a){h.notify(a)});c("remove",function(a){h.notify(void 0,a)});c("setData",function(a,c){c&&dojo.forEach(a,function(a){var b=h.getIdentity(a);b&&(h.notify(void 0,b),h.notify(a,h.getIdentity(a)))})});return h};p.setObject("webview.reliable._enterpriseSchedule.BlockPreviewObservable",r);return r})},"webview/reliable/_enterpriseSchedule/overriddenViews/HorizontalRenderer":function(){define(["dojo/_base/lang","dojo/text!./templates/HorizontalRenderer.html","dojox/calendar/HorizontalRenderer",
"./_RendererMixin"],function(r,p,m){return r.extend(m,{templateString:p})})},"dojox/calendar/HorizontalRenderer":function(){define("dojo/_base/declare dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin ./_RendererMixin dojo/text!./templates/HorizontalRenderer.html".split(" "),function(r,p,m,l,h,c){return r("dojox.calendar.HorizontalRenderer",[m,l,h],{templateString:c,_orientation:"horizontal",visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:32,endTimeLabel:30},
_displayValueMap:{beforeIcon:"inline",afterIcon:"inline"},_displayValue:"inline",arrowPadding:12,_isElementVisible:function(c,d,h,a){var b;b=this.isLeftToRight();"startTimeLabel"==c&&(this.labelContainer&&(b&&h||!b&&d)?p.set(this.labelContainer,"marginRight",this.arrowPadding+"px"):p.set(this.labelContainer,"marginRight",0),this.labelContainer&&(!b&&h||b&&d)?p.set(this.labelContainer,"marginLeft",this.arrowPadding+"px"):p.set(this.labelContainer,"marginLeft",0));switch(c){case "startTimeLabel":b=
this.item.startTime;if(this.item.allDay||this.owner.isStartOfDay(b))return!1;break;case "endTimeLabel":if(b=this.item.endTime,this.item.allDay||this.owner.isStartOfDay(b))return!1}return this.inherited(arguments)},getDisplayValue:function(c){return(c=this._displayValueMap[c])?c:this._displayValue},postCreate:function(){this.inherited(arguments);this._applyAttributes()}})})},"dojox/calendar/_RendererMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/dom-class",
"dojo/Stateful"],function(r,p,m,l,h){return r("dojox.calendar._RendererMixin",h,{item:null,owner:null,edited:!1,focused:!1,hovered:!1,selected:!1,storeState:!1,moveEnabled:!0,resizeEnabled:!0,_orientation:"vertical",_displayValue:"block",_displayValueMap:{},visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:45,endTimeLabel:50},_setSelectedAttr:function(c){this._setState("selected",c,"Selected")},_setFocusedAttr:function(c){this._setState("focused",c,"Focused")},
_setEditedAttr:function(c){this._setState("edited",c,"Edited")},_setHoveredAttr:function(c){this._setState("hovered",c,"Hovered")},_setStoreStateAttr:function(c){var g=null;switch(c){case "storing":g="Storing";break;case "unstored":g="Unstored";break;default:g=null}var d=this.stateNode||this.domNode;l.remove(d,"Storing");l.remove(d,"Unstored");this._set("storeState",c);null!=g&&l.add(d,g)},_setState:function(c,g,d){this[c]!=g&&(l[g?"add":"remove"](this.stateNode||this.domNode,d),this._set(c,g))},
_setItemAttr:function(c){null==c?(this.item&&this.item.cssClass&&l.remove(this.domNode,this.item.cssClass),this.item=null):(null!=this.item?(this.item.cssClass!=c.cssClass&&this.item.cssClass&&l.remove(this.domNode,this.item.cssClass),this.item=p.mixin(this.item,c)):this.item=c,c.cssClass&&l.add(this.domNode,c.cssClass))},_setText:function(c,g,d){this.owner&&this.owner._setText(c,g,d)},_isElementVisible:function(c,g,d,h){var a,b=this.visibilityLimits[c];switch(c){case "moveHandle":a=this.moveEnabled;
break;case "resizeStartHandle":a=this.mobile?this.resizeEnabled&&!g&&this.edited&&(-1==b||h>b):this.resizeEnabled&&!g&&(-1==b||h>b);break;case "resizeEndHandle":a=this.mobile?this.resizeEnabled&&!d&&this.edited&&(-1==b||h>b):this.resizeEnabled&&!d&&(-1==b||h>b);break;case "startTimeLabel":a=this.mobile?!g&&(!this.edited||this.edited&&(-1==b||h>b)):!g&&(-1==b||h>b);break;case "endTimeLabel":a=this.edited&&!d&&(-1==b||h>b);break;case "summaryLabel":a=this.mobile?!this.edited||this.edited&&(-1==b||h>
b):-1==b||h>b}return a},_formatTime:function(c,g){if(this.owner){var d=this.owner.get("formatItemTimeFunc");if(null!=d&&"function"===typeof d)return d(g,c,this.owner,this.item)}return c.dateLocaleModule.format(g,{selector:"time"})},getDisplayValue:function(c){return this._displayValue},updateRendering:function(c,g){g=g||this.item.h;c=c||this.item.w;if(g||c){this.item.h=g;this.item.w=c;var d="vertical"==this._orientation?g:c,h=this.owner.renderData,a=0!=h.dateModule.compare(this.item.range[0],this.item.startTime),
b=0!=h.dateModule.compare(this.item.range[1],this.item.endTime),l;null!=this.beforeIcon&&(l="horizontal"!=this._orientation||this.isLeftToRight()?a:b,m.set(this.beforeIcon,"display",l?this.getDisplayValue("beforeIcon"):"none"));null!=this.afterIcon&&(l="horizontal"!=this._orientation||this.isLeftToRight()?b:a,m.set(this.afterIcon,"display",l?this.getDisplayValue("afterIcon"):"none"));this.moveHandle&&(l=this._isElementVisible("moveHandle",a,b,d),m.set(this.moveHandle,"display",l?this.getDisplayValue("moveHandle"):
"none"));this.resizeStartHandle&&(l=this._isElementVisible("resizeStartHandle",a,b,d),m.set(this.resizeStartHandle,"display",l?this.getDisplayValue("resizeStartHandle"):"none"));this.resizeEndHandle&&(l=this._isElementVisible("resizeEndHandle",a,b,d),m.set(this.resizeEndHandle,"display",l?this.getDisplayValue("resizeEndHandle"):"none"));this.startTimeLabel&&(l=this._isElementVisible("startTimeLabel",a,b,d),m.set(this.startTimeLabel,"display",l?this.getDisplayValue("startTimeLabel"):"none"),l&&this._setText(this.startTimeLabel,
this._formatTime(h,this.item.startTime)));this.endTimeLabel&&(l=this._isElementVisible("endTimeLabel",a,b,d),m.set(this.endTimeLabel,"display",l?this.getDisplayValue("endTimeLabel"):"none"),l&&this._setText(this.endTimeLabel,this._formatTime(h,this.item.endTime)));this.summaryLabel&&(l=this._isElementVisible("summaryLabel",a,b,d),m.set(this.summaryLabel,"display",l?this.getDisplayValue("summaryLabel"):"none"),l&&this._setText(this.summaryLabel,this.item.summary,!0))}}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/_RendererMixin":function(){define("dojo/_base/lang dojo/currency dojo/date dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojox/calendar/_RendererMixin webview/util/globalConstants".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return r.extend(a,{summaryHandle:null,watchHandle:null,updateRendering:function(a,b){b=b||this.item.h;a=a||this.item.w;if(!b&&!a)return null;this.item.h=b;this.item.w=a;var g="vertical"==this._orientation?b:a,f=this.owner.renderData,k=0!=f.dateModule.compare(this.item.range[0],this.item.startTime),m=0!=f.dateModule.compare(this.item.range[1],this.item.endTime),n;null!=this.beforeIcon&&(n="horizontal"!=this._orientation||this.isLeftToRight()?k:m,c.set(this.beforeIcon,
"display",n?this.getDisplayValue("beforeIcon"):"none"));null!=this.afterIcon&&(n="horizontal"!=this._orientation||this.isLeftToRight()?m:k,c.set(this.afterIcon,"display",n?this.getDisplayValue("afterIcon"):"none"));this.moveHandle&&(n=this._isElementVisible("moveHandle",k,m,g),c.set(this.moveHandle,"display",n?this.getDisplayValue("moveHandle"):"none"));this.resizeStartHandle&&(n=this._isElementVisible("resizeStartHandle",k,m,g),c.set(this.resizeStartHandle,"display",n?this.getDisplayValue("resizeStartHandle"):
"none"));this.resizeEndHandle&&(n=this._isElementVisible("resizeEndHandle",k,m,g),c.set(this.resizeEndHandle,"display",n?this.getDisplayValue("resizeEndHandle"):"none"));this.startTimeLabel&&(n="vertical"===this._orientation?!0:this._isElementVisible("startTimeLabel",k,m,g),c.set(this.startTimeLabel,"display",n?this.getDisplayValue("startTimeLabel"):"none"),n&&this._setText(this.startTimeLabel,this._formatTime(f,this.item.startTime)+" - "+this._formatTime(f,this.item.endTime)));this.summaryLabel&&
(n=this._isElementVisible("summaryLabel",k,m,g),l.set(this.summaryLabel,"innerHTML",this.item.summary),c.set(this.summaryLabel,"display",n?this.getDisplayValue("summaryLabel"):"none"),0<this.item.totalRate&&0<this.item.startValue?(h.remove(this.costLabel,"hidden"),this._updateCostAndRate()):h.add(this.costLabel,"hidden"),this.item.hasParent&&this.item.hasAccessParent&&!this.item.editable?(h.add(this.summaryLabel,"linkable"),h.add(this.sourceLabel,"linkable"),null!==this.watchHandle&&(this.watchHandle.remove(),
this.watchHandle=null),this.watchHandle=this.watch("selected",r.hitch(this,this.resetOnclickListener))):(h.remove(this.summaryLabel,"linkable"),h.remove(this.sourceLabel,"linkable")),n&&(this.item.hasParent?(this._setText(this.summaryLabel,this.item.summary,!0),this._setText(this.sourceLabel,d.source+": "+this.item.parentBlockLabel,!0),h.remove(this.sourceLabel,"hidden")):(this._setText(this.summaryLabel,this.item.summary,!0),this._setText(this.sourceLabel,"",!0),h.add(this.sourceLabel,"hidden"))));
"delete"===this.item.action&&c.set(this.domNode,"display","none");g="";this.item.color&&(g=this.getRGBAColour(this.item.color,!1),c.set(this.domNode,"backgroundColor",g),this.bgNode&&c.set(this.bgNode,"backgroundColor",g));this.item.summaryColor&&(g=this.getRGBAColour(this.item.summaryColor,!0),c.set(this.domNode,"backgroundColor",g),this.bgNode&&c.set(this.bgNode,"backgroundColor",g));return this.domNode},resetOnclickListener:function(a,b,c){null!==this.summaryHandle&&(this.summaryHandle.remove(),
this.summaryHandle=null);!0===c&&setTimeout(r.hitch(this,function(){this.summaryHandle=n(this.summaryLabel.parentElement,"click",r.hitch(this,this.scheduleChangeClicked))}),250)},scheduleChangeClicked:function(){null!==this.summaryHandle&&(this.summaryHandle.remove(),this.summaryHandle=null);if(null===this.item.blockId)this.onBlockChange(this.item.parentSchedule,!1);else this.onBlockChange(this.item.blockId,!0)},onBlockChange:function(a,b){h.remove(this.summaryLabel,"linkable");h.remove(this.sourceLabel,
"linkable");return{blockId:a,forBlockGroup:b}},getRGBAColour:function(a,c){var d,f,g=null;4<a.length?(d=parseInt(a.substr(1,2),16),f=parseInt(a.substr(3,2),16),g=parseInt(a.substr(5,2),16)):(d=parseInt(a.substr(1,1)+a.substr(1,1),16),f=parseInt(a.substr(2,1)+a.substr(2,1),16),g=parseInt(a.substr(3,1)+a.substr(3,1),16));var k=c?"1":"0.2";switch(this.item.repeatType){case b.REPEAT_WEEKLY:case b.REPEAT_OVERRIDE:d="rgba("+d+","+f+","+g+","+k+")";break;case b.REPEAT_CALENDAR:d=null===this.item.repeat.start||
null===this.item.repeat.end?"rgba("+d+","+f+","+g+","+k+")":"rgba("+d+","+f+","+g+",1)";break;case b.REPEAT_RECURRENCE:if(this.item.repeat.value.wom!==b.WILDCARD||this.item.repeat.value.m!==b.WILDCARD){d="rgba("+d+","+f+","+g+","+k+")";break}default:d="rgba("+d+","+f+","+g+",1)"}return d},_updateCostAndRate:function(){var a={};null!==this.item.currency&&(a={currency:this.item.currency,symbol:b.CurrencyToSymbol[this.item.currency]});var c=this.item.totalRate.toFixed(2);null!==this.item.currency&&(c=
p.format(this.item.totalRate,a));var h=m.difference(this.item.startTime,this.item.endTime,"second")/3600*this.item.totalRate,f=h.toFixed(2);null!==this.item.currency&&(f=p.format(h,a));this._setText(this.costLabel,c+d.scheduleRate+" "+g.rtrTotal+" "+f,!0)}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/LabelRenderer":function(){define(["dojo/_base/lang","dojo/text!./templates/LabelRenderer.html","dojox/calendar/LabelRenderer","./_RendererMixin"],function(r,p,m){return r.extend(m,{templateString:p})})},
"dojox/calendar/LabelRenderer":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","./_RendererMixin","dojo/text!./templates/LabelRenderer.html"],function(r,p,m,l,h){return r("dojox.calendar.LabelRenderer",[p,m,l],{templateString:h,_orientation:"horizontal",resizeEnabled:!1,visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:45,endTimeLabel:30},_isElementVisible:function(c,g,d,h){switch(c){case "startTimeLabel":if(this.item.allDay&&
this.item.range[0].getTime()!==this.item.startTime.getTime())return!1}return this.inherited(arguments)},_displayValue:"inline",postCreate:function(){this.inherited(arguments);this._applyAttributes()}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/MatrixView":function(){define("dojo/_base/html dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dojo/query dojox/calendar/MatrixView ../utilityFunctions".split(" "),function(r,p,m,l,h,c,g,d,n,
a,b){return p.extend(a,{labelRendererHeight:20,expandRendererHeight:20,cellPaddingSides:3,cellPaddingTop:22,itemToRendererKindFunc:function(a){return"label"},styleGridCell:function(a,b,c){c=c.dateModule;this.isToday(b)?m.add(a,"dojoxCalendarToday"):null!=this.refStartTime&&null!=this.refEndTime&&(0<=c.compare(b,this.refEndTime)||0>=c.compare(c.add(b,"day",1),this.refStartTime))&&m.add(a,"dojoxCalendarDayDisabled");this.isWeekEnd(b)&&m.add(a,"dojoxCalendarWeekend")},_buildColumnHeader:function(a,b){var c=
this.columnHeaderTable;if(c){var f=a.columnCount-(b?b.columnCount:0),d=n("tbody",c),g=n("tr",c),d=1==d.length?d[0]:r.create("tbody",null,c),g=1==g.length?g[0]:l.create("tr",null,d),d=0;if(0<f)for(d=0;d<f;d++)l.create("td",null,g);else for(f=-f,d=0;d<f;d++)g.removeChild(g.lastChild);n("td",c).forEach(function(b,c){b.className="";var f=null;try{f=a.dates[0][c],this._setText(b,this._formatColumnHeaderLabel(f))}catch(v){}0==c?m.add(b,"first-child"):c==this.renderData.columnCount-1&&m.add(b,"last-child");
f&&this.styleColumnHeaderCell(b,f,a)},this);this.yearColumnHeaderContent&&this._setText(this.yearColumnHeaderContent,"Week")}},_buildRowHeader:function(a,b){var k=this.rowHeaderTable;if(k){var f=n("tbody",k),h,f=1==f.length?f[0]:l.create("tbody",null,k),t=a.rowCount-(b?b.rowCount:0),r=0;if(0<t)for(r=0;r<t;r++){h=l.create("tr",null,f);h=l.create("td",null,h);var x=[];x.push(d(h,"click",p.hitch(this,this._rowHeaderClick)));g("touch")||(x.push(d(h,"mousedown",function(a){m.add(a.currentTarget,"Active")})),
x.push(d(h,"mouseup",function(a){m.remove(a.currentTarget,"Active")})),x.push(d(h,"mouseover",function(a){m.add(a.currentTarget,"Hover")})),x.push(d(h,"mouseout",function(a){m.remove(a.currentTarget,"Hover")})));this._rowHeaderHandles.push(x)}else for(t=-t,r=0;r<t;r++)for(f.removeChild(f.lastChild),h=this._rowHeaderHandles.pop();0<h.length;)h.pop().remove();n("tr",k).forEach(function(b,f){c.set(b,"height",this._getRowHeight(f)+"px");var d;try{d=a.dates[f][0]}catch(E){}var g=n("td",b)[0];g.className=
"";0==f&&m.add(g,"first-child");f==this.renderData.rowCount-1&&m.add(g,"last-child");d&&(this.styleRowHeaderCell(g,d,a),this._setText(g,this._formatRowHeaderLabel(d)))},this)}},_createLabelLayoutItems:function(a,c,d,f){if("undefined"!==typeof this.labelRenderer&&null!==this.labelRenderer){for(var g,k=this.renderData,h=k.dateModule,l=[],n=0;n<f.length;n++){var m=f[n];g=this.floorToDay(m.startTime,!1,k);for(var q=this.dateModule.compare;-1===q(g,m.endTime)&&-1===q(g,d);){var t=h.add(g,"day",1),t=this.floorToDay(t,
!0),r=this.computeRangeOverlap(k,m.startTime,m.endTime,g,t);a=h.difference(c,this.floorToDay(r[0],!1,k),"day");if(a>=this.columnCount)break;if(0<=a){var t=l[a],B=!1,r=p.mixin({startOffset:a,range:r,item:m},m);if("undefined"===typeof t)t=[],l[a]=t;else for(a=0;a<t.length;a++)if(b.compareEventOrder(r,t[a])){t.splice(a,0,r);B=!0;break}B||t.push(r)}g=h.add(g,"day",1);this.floorToDay(g,!0)}}return l}},_layoutLabelItemsImpl:function(a,b,d,f,g){for(var k,l,n=this.renderData,m=n.cells[a],q=this._getRowHeight(a),
t=this.labelRendererHeight,u=h.getMarginBox(this.itemContainer).w,r=0;r<b.length;r++)if(k=b[r],null!=k){var B=this.expandRenderer?d[r]?q-this.expandRendererHeight:q:q;l=null==g||null==g[r]?this.cellPaddingTop:g[r]+this.verticalGap;for(var D=h.position(this._getCellAt(a,r)),F=D.x-n.gridTablePosX,H=0;H<k.length;H++){if(l+t+this.verticalGap<=B){var J=k[H];p.mixin(J,{start:F,end:F+D.w});var G=this._createRenderer(J,"label",this.labelRenderer,"dojoxCalendarLabel"),I=this.isItemBeingEdited(J)&&!this.liveLayout&&
this._isEditing,K=I?this._getRowHeight(a)-this.cellPaddingTop:t;n.rtl&&(J.start=u-J.end,J.end=J.start+D.w);c.set(G.container,{top:(I?this.cellPaddingTop:l)+"px",left:J.start+this.cellPaddingSides+"px",width:D.w-2*this.cellPaddingSides+"px",height:K+"px"});this._applyRendererLayout(J,G,m,D.w,K,"label")}else break;l+=t+this.verticalGap}for(;H<k.length;)null==f[r]?f[r]=[k[H]]:f[r].push(k[H]),H++}}})})},"dojox/calendar/MatrixView":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/lang dojo/_base/sniff dojo/_base/fx dojo/_base/html dojo/on dojo/dom dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/query dojo/i18n ./ViewBase dojo/text!./templates/MatrixView.html dijit/_TemplatedMixin".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){return r("dojox.calendar.MatrixView",[u,z],{templateString:w,baseClass:"dojoxCalendarMatrixView",_setTabIndexAttr:"domNode",viewKind:"matrix",renderData:null,startDate:null,refStartTime:null,refEndTime:null,columnCount:7,rowCount:5,horizontalRenderer:null,labelRenderer:null,expandRenderer:null,horizontalDecorationRenderer:null,percentOverlap:0,verticalGap:2,horizontalRendererHeight:17,labelRendererHeight:14,expandRendererHeight:15,cellPaddingTop:16,expandDuration:300,
expandEasing:null,layoutDuringResize:!1,roundToDay:!0,showCellLabel:!0,scrollable:!1,resizeCursor:"e-resize",constructor:function(){this.invalidatingProperties="columnCount rowCount startDate horizontalRenderer horizontalDecaorationRenderer labelRenderer expandRenderer rowHeaderDatePattern columnHeaderLabelLength cellHeaderShortPattern cellHeaderLongPattern percentOverlap verticalGap horizontalRendererHeight labelRendererHeight expandRendererHeight cellPaddingTop roundToDay itemToRendererKindFunc layoutPriorityFunction formatItemTimeFunc textDir items".split(" ");
this._ddRendererList=[];this._ddRendererPool=[];this._rowHeaderHandles=[]},destroy:function(a){this._cleanupRowHeader();this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initialized=!0;this.invalidRendering||this.refreshRendering()},_createRenderData:function(){var a={};a.dateLocaleModule=this.dateLocaleModule;a.dateClassObj=this.dateClassObj;a.dateModule=this.dateModule;a.dates=[];a.columnCount=this.get("columnCount");a.rowCount=this.get("rowCount");a.sheetHeight=this.itemContainer.offsetHeight;
this._computeRowsHeight(a);var b=this.get("startDate");null==b&&(b=new a.dateClassObj);this.startDate=b=this.floorToDay(b,!1,a);for(var c=0;c<a.rowCount;c++){a.dates.push([]);for(var f=0;f<a.columnCount;f++)a.dates[c].push(b),b=this.addAndFloor(b,"day",1)}a.startTime=this.newDate(a.dates[0][0],a);a.endTime=this.newDate(a.dates[a.rowCount-1][a.columnCount-1],a);a.endTime=a.dateModule.add(a.endTime,"day",1);a.endTime=this.floorToDay(a.endTime,!0);this.displayedItemsInvalidated&&!this._isEditing?(this.displayedItemsInvalidated=
!1,this._computeVisibleItems(a)):this.renderData&&(a.items=this.renderData.items);this.displayedDecorationItemsInvalidated?a.decorationItems=this.decorationStoreManager._computeVisibleItems(a):this.renderData&&(a.decorationItems=this.renderData.decorationItems);a.rtl=!this.isLeftToRight();return a},_validateProperties:function(){this.inherited(arguments);if(1>this.columnCount||isNaN(this.columnCount))this.columnCount=1;if(1>this.rowCount||isNaN(this.rowCount))this.rowCount=1;if(isNaN(this.percentOverlap)||
0>this.percentOverlap||100<this.percentOverlap)this.percentOverlap=0;if(isNaN(this.verticalGap)||0>this.verticalGap)this.verticalGap=2;if(isNaN(this.horizontalRendererHeight)||1>this.horizontalRendererHeight)this.horizontalRendererHeight=17;if(isNaN(this.labelRendererHeight)||1>this.labelRendererHeight)this.labelRendererHeight=14;if(isNaN(this.expandRendererHeight)||1>this.expandRendererHeight)this.expandRendererHeight=15},_setStartDateAttr:function(a){this.displayedItemsInvalidated=!0;this._set("startDate",
a)},_setColumnCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("columnCount",a)},_setRowCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("rowCount",a)},__fixEvt:function(a){a.sheet="primary";a.source=this;return a},_formatRowHeaderLabel:function(a){return this.rowHeaderDatePattern?this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:this.rowHeaderDatePattern}):this.getWeekNumberLabel(a)},_formatColumnHeaderLabel:function(a){return this.renderData.dateLocaleModule.getNames("days",
this.columnHeaderLabelLength?this.columnHeaderLabelLength:"wide","standAlone")[a.getDay()]},cellHeaderShortPattern:null,cellHeaderLongPattern:null,_formatGridCellLabel:function(a,b,c){0==b&&0==c||1==a.getDate()?this.cellHeaderLongPattern?b=this.cellHeaderLongPattern:(b=f.getLocalization("dojo.cldr",this._calendar),b=b["dateFormatItem-MMMd"]):this.cellHeaderShortPattern?b=this.cellHeaderShortPattern:(b=f.getLocalization("dojo.cldr",this._calendar),b=b["dateFormatItem-d"]);return this.renderData.dateLocaleModule.format(a,
{selector:"date",datePattern:b})},refreshRendering:function(){this.inherited(arguments);if(this.domNode){this._validateProperties();var a=this.renderData,b=this.renderData=this._createRenderData();this._createRendering(b,a);this._layoutDecorationRenderers(b);this._layoutRenderers(b)}},_createRendering:function(a,c){if(0>=a.rowHeight)a.columnCount=1,a.rowCount=1,a.invalidRowHeight=!0;else{if(c&&this.itemContainerTable){var f=q(".dojoxCalendarItemContainerRow",this.itemContainerTable);c.rowCount=f.length}this._buildColumnHeader(a,
c);this._buildRowHeader(a,c);this._buildGrid(a,c);this._buildItemContainer(a,c);this.buttonContainer&&null!=this.owner&&this.owner.currentView==this&&b.set(this.buttonContainer,{right:0,left:0})}},_buildColumnHeader:function(b,c){var f=this.columnHeaderTable;if(f){var d=b.columnCount-(c?c.columnCount:0);8==h("ie")&&(null==this._colTableSave?this._colTableSave=l.clone(f):0>d&&(this.columnHeader.removeChild(f),k.destroy(f),this.columnHeaderTable=f=l.clone(this._colTableSave),this.columnHeader.appendChild(f),
d=b.columnCount));var n=q("tbody",f),m=q("tr",f),n=1==n.length?n[0]:g.create("tbody",null,f),m=1==m.length?m[0]:k.create("tr",null,n);if(0<d)for(n=0;n<d;n++)k.create("td",null,m);else for(d=-d,n=0;n<d;n++)m.removeChild(m.lastChild);q("td",f).forEach(function(c,f){c.className="";var d=b.dates[0][f];this._setText(c,this._formatColumnHeaderLabel(d));0==f?a.add(c,"first-child"):f==this.renderData.columnCount-1&&a.add(c,"last-child");this.styleColumnHeaderCell(c,d,b)},this);this.yearColumnHeaderContent&&
this._setText(this.yearColumnHeaderContent,b.dateLocaleModule.format(b.dates[0][0],{selector:"date",datePattern:"yyyy"}))}},styleColumnHeaderCell:function(b,c,f){a.add(b,this._cssDays[c.getDay()]);this.isWeekEnd(c)&&a.add(b,"dojoxCalendarWeekend")},_rowHeaderHandles:null,_cleanupRowHeader:function(){for(;0<this._rowHeaderHandles.length;)for(var a=this._rowHeaderHandles.pop();0<a.length;)a.pop().remove()},_rowHeaderClick:function(a){var b=q("td",this.rowHeaderTable).indexOf(a.currentTarget);this._onRowHeaderClick({index:b,
date:this.renderData.dates[b][0],triggerEvent:a})},_buildRowHeader:function(c,f){var g=this.rowHeaderTable;if(g){var n=q("tbody",g),m,n=1==n.length?n[0]:k.create("tbody",null,g),p=c.rowCount-(f?f.rowCount:0);if(0<p)for(var t=0;t<p;t++){m=k.create("tr",null,n);m=k.create("td",null,m);var u=[];u.push(d(m,"click",l.hitch(this,this._rowHeaderClick)));h("touch")||(u.push(d(m,"mousedown",function(b){a.add(b.currentTarget,"Active")})),u.push(d(m,"mouseup",function(b){a.remove(b.currentTarget,"Active")})),
u.push(d(m,"mouseover",function(b){a.add(b.currentTarget,"Hover")})),u.push(d(m,"mouseout",function(b){a.remove(b.currentTarget,"Hover")})));this._rowHeaderHandles.push(u)}else for(p=-p,t=0;t<p;t++)for(n.removeChild(n.lastChild),m=this._rowHeaderHandles.pop();0<m.length;)m.pop().remove();q("tr",g).forEach(function(f,d){b.set(f,"height",this._getRowHeight(d)+"px");var g=c.dates[d][0],k=q("td",f)[0];k.className="";0==d&&a.add(k,"first-child");d==this.renderData.rowCount-1&&a.add(k,"last-child");this.styleRowHeaderCell(k,
g,c);this._setText(k,this._formatRowHeaderLabel(g))},this)}},styleRowHeaderCell:function(a,b,c){},_buildGrid:function(c,f){var d=this.gridTable;if(d){var g=q("tr",d),n=c.rowCount-g.length,m=0<n,p=c.columnCount-(g?q("td",g[0]).length:0);8==h("ie")&&(null==this._gridTableSave?this._gridTableSave=l.clone(d):0>p&&(this.grid.removeChild(d),k.destroy(d),this.gridTable=d=l.clone(this._gridTableSave),this.grid.appendChild(d),p=c.columnCount,n=c.rowCount,m=!0));g=q("tbody",d);g=1==g.length?g[0]:k.create("tbody",
null,d);if(m)for(var t=0;t<n;t++)k.create("tr",null,g);else for(n=-n,t=0;t<n;t++)g.removeChild(g.lastChild);var u=c.rowCount-n,r=m||0<p,p=r?p:-p;q("tr",d).forEach(function(a,b){if(r){var f=b>=u?c.columnCount:p;for(b=0;b<f;b++){var d=k.create("td",null,a);k.create("span",null,d)}}else for(b=0;b<p;b++)a.removeChild(a.lastChild)});q("tr",d).forEach(function(f,d){b.set(f,"height",this._getRowHeight(d)+"px");f.className="";0==d&&a.add(f,"first-child");d==c.rowCount-1&&a.add(f,"last-child");q("td",f).forEach(function(b,
f){b.className="";0==f&&a.add(b,"first-child");f==c.columnCount-1&&a.add(b,"last-child");var g=c.dates[d][f],k=q("span",b)[0];this._setText(k,this.showCellLabel?this._formatGridCellLabel(g,d,f):null);this.styleGridCell(b,g,c)},this)},this)}},styleGridCellFunc:null,defaultStyleGridCell:function(b,c,f){a.add(b,this._cssDays[c.getDay()]);f=this.dateModule;this.isToday(c)?a.add(b,"dojoxCalendarToday"):null!=this.refStartTime&&null!=this.refEndTime&&(0<=f.compare(c,this.refEndTime)||0>=f.compare(f.add(c,
"day",1),this.refStartTime))?a.add(b,"dojoxCalendarDayDisabled"):this.isWeekEnd(c)&&a.add(b,"dojoxCalendarWeekend")},styleGridCell:function(a,b,c){this.styleGridCellFunc?this.styleGridCellFunc(a,b,c):this.defaultStyleGridCell(a,b,c)},_buildItemContainer:function(c,f){var d=this.itemContainerTable;if(d){var g=[],n=c.rowCount-(f?f.rowCount:0);8==h("ie")&&(null==this._itemTableSave?this._itemTableSave=l.clone(d):0>n&&(this.itemContainer.removeChild(d),this._recycleItemRenderers(!0),this._recycleExpandRenderers(!0),
k.destroy(d),this.itemContainerTable=d=l.clone(this._itemTableSave),this.itemContainer.appendChild(d),n=c.columnCount));var m=q("tbody",d),p,m=1==m.length?m[0]:k.create("tbody",null,d);if(0<n)for(var t=0;t<n;t++)p=k.create("tr",null,m),a.add(p,"dojoxCalendarItemContainerRow"),p=k.create("td",null,p),p=k.create("div",null,p),a.add(p,"dojoxCalendarContainerRow");else for(n=-n,t=0;t<n;t++)m.removeChild(m.lastChild);q(".dojoxCalendarItemContainerRow",d).forEach(function(a,c){b.set(a,"height",this._getRowHeight(c)+
"px");g.push(a.childNodes[0].childNodes[0])},this);c.cells=g}},resize:function(a){this.inherited(arguments);this._resizeHandler(null,!1)},_resizeHandler:function(a,f){var d=this.renderData;if(null==d)this.refreshRendering();else{if(d.sheetHeight!=this.itemContainer.offsetHeight&&(d.sheetHeight=this.itemContainer.offsetHeight,-1==this.getExpandedRowIndex()?(this._computeRowsHeight(),this._resizeRows()):this.expandRow(d.expandedRow,d.expandedRowCol,0,null,!0),d.invalidRowHeight)){delete d.invalidRowHeight;
this.renderData=null;this.displayedItemsInvalidated=!0;this.refreshRendering();return}this.layoutDuringResize||f?setTimeout(l.hitch(this,function(){this._layoutRenderers(this.renderData);this._layoutDecorationRenderers(this.renderData)}),20):(b.set(this.itemContainer,"opacity",0),this._recycleItemRenderers(),this._recycleExpandRenderers(),void 0!=this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(l.hitch(this,function(){delete this._resizeTimer;this._resizeRowsImpl(this.itemContainer,
"tr");this._layoutRenderers(this.renderData);this._layoutDecorationRenderers(this.renderData);0==this.resizeAnimationDuration?b.set(this.itemContainer,"opacity",1):c.fadeIn({node:this.itemContainer,curve:[0,1]}).play(this.resizeAnimationDuration)}),200))}},resizeAnimationDuration:0,getExpandedRowIndex:function(){return null==this.renderData.expandedRow?-1:this.renderData.expandedRow},collapseRow:function(a,f,d){var g=this.renderData;void 0==d&&(d=!0);void 0==a&&(a=this.expandDuration);if(g&&null!=
g.expandedRow&&-1!=g.expandedRow)if(d&&a){d=g.expandedRow;var k=g.expandedRowHeight;delete g.expandedRow;this._computeRowsHeight(g);var h=this._getRowHeight(d);g.expandedRow=d;this._recycleExpandRenderers();this._recycleItemRenderers();b.set(this.itemContainer,"display","none");this._expandAnimation=new c.Animation({curve:[k,h],duration:a,easing:f,onAnimate:l.hitch(this,function(a){this._expandRowImpl(Math.floor(a))}),onEnd:l.hitch(this,function(a){this._expandAnimation=null;this._collapseRowImpl(!1);
this._resizeRows();b.set(this.itemContainer,"display","block");setTimeout(l.hitch(this,function(){this._layoutRenderers(g)}),100);this.onExpandAnimationEnd(!1)})});this._expandAnimation.play()}else this._collapseRowImpl(d)},_collapseRowImpl:function(a){var b=this.renderData;delete b.expandedRow;delete b.expandedRowHeight;this._computeRowsHeight(b);if(void 0==a||a)this._resizeRows(),this._layoutRenderers(b)},expandRow:function(a,f,d,g,k){var h=this.renderData;if(!h||0>a||a>=h.rowCount)return-1;if(void 0==
f||0>f||f>=h.columnCount)f=-1;void 0==k&&(k=!0);void 0==d&&(d=this.expandDuration);void 0==g&&(g=this.expandEasing);var n=this._getRowHeight(a),m=h.sheetHeight-Math.ceil(this.cellPaddingTop*(h.rowCount-1));h.expandedRow=a;h.expandedRowCol=f;h.expandedRowHeight=m;k&&(d?(this._recycleExpandRenderers(),this._recycleItemRenderers(),b.set(this.itemContainer,"display","none"),this._expandAnimation=new c.Animation({curve:[n,m],duration:d,delay:50,easing:g,onAnimate:l.hitch(this,function(a){this._expandRowImpl(Math.floor(a))}),
onEnd:l.hitch(this,function(){this._expandAnimation=null;b.set(this.itemContainer,"display","block");setTimeout(l.hitch(this,function(){this._expandRowImpl(m,!0)}),100);this.onExpandAnimationEnd(!0)})}),this._expandAnimation.play()):this._expandRowImpl(m,!0))},_expandRowImpl:function(a,b){var c=this.renderData;c.expandedRowHeight=a;this._computeRowsHeight(c,c.sheetHeight-a);this._resizeRows();b&&this._layoutRenderers(c)},onExpandAnimationEnd:function(a){},_resizeRows:function(){0>=this._getRowHeight(0)||
(this.rowHeaderTable&&this._resizeRowsImpl(this.rowHeaderTable,"tr"),this.gridTable&&this._resizeRowsImpl(this.gridTable,"tr"),this.itemContainerTable&&this._resizeRowsImpl(this.itemContainerTable,"tr"))},_computeRowsHeight:function(a,b){var c=null==a?this.renderData:a;b=b||c.sheetHeight;b--;7==h("ie")&&(b-=c.rowCount);if(1==c.rowCount)c.rowHeight=b,c.rowHeightFirst=b,c.rowHeightLast=b;else{var f=null==c.expandedRow?c.rowCount:c.rowCount-1,d=b/f,g;g=b-Math.floor(d)*f;var k=Math.abs(b-Math.ceil(d)*
f),f=1;g<k?(d=Math.floor(d),k=g):(f=-1,d=Math.ceil(d));g=d+f*Math.floor(k/2);c.rowHeight=d;c.rowHeightFirst=g;c.rowHeightLast=g+k%2*f}},_getRowHeight:function(a){var b=this.renderData;return a==b.expandedRow?b.expandedRowHeight:0==b.expandedRow&&1==a||0==a?b.rowHeightFirst:b.expandedRow==this.renderData.rowCount-1&&a==this.renderData.rowCount-2||a==this.renderData.rowCount-1?b.rowHeightLast:b.rowHeight},_resizeRowsImpl:function(a,c){dojo.query(c,a).forEach(function(a,c){b.set(a,"height",this._getRowHeight(c)+
"px")},this)},_setHorizontalRendererAttr:function(a){this._destroyRenderersByKind("horizontal");this._set("horizontalRenderer",a)},_setLabelRendererAttr:function(a){this._destroyRenderersByKind("label");this._set("labelRenderer",a)},_destroyExpandRenderer:function(a){a.destroyRecursive&&a.destroyRecursive();g.destroy(a.domNode)},_setExpandRendererAttr:function(a){for(;0<this._ddRendererList.length;)this._destroyExpandRenderer(this._ddRendererList.pop());var b=this._ddRendererPool;if(b)for(;0<b.length;)this._destroyExpandRenderer(b.pop());
this._set("expandRenderer",a)},_ddRendererList:null,_ddRendererPool:null,_getExpandRenderer:function(a,b,c,f,d){if(null==this.expandRenderer)return null;var g=this._ddRendererPool.pop();null==g&&(g=new this.expandRenderer);this._ddRendererList.push(g);g.set("owner",this);g.set("date",a);g.set("items",b);g.set("rowIndex",c);g.set("columnIndex",f);g.set("expanded",d);return g},_recycleExpandRenderers:function(a){for(var c=0;c<this._ddRendererList.length;c++){var f=this._ddRendererList[c];f.set("Up",
!1);f.set("Down",!1);a&&f.domNode.parentNode.removeChild(f.domNode);b.set(f.domNode,"display","none")}this._ddRendererPool=this._ddRendererPool.concat(this._ddRendererList);this._ddRendererList=[]},_defaultItemToRendererKindFunc:function(a){return 1440<=Math.abs(this.renderData.dateModule.difference(a.startTime,a.endTime,"minute"))?"horizontal":"label"},naturalRowsHeight:null,_roundItemToDay:function(a){var b=a.startTime;a=a.endTime;this.isStartOfDay(b)||(b=this.floorToDay(b,!1,this.renderData));
this.isStartOfDay(a)||(a=this.renderData.dateModule.add(a,"day",1),a=this.floorToDay(a,!0));return{startTime:b,endTime:a}},_sortItemsFunction:function(a,b){this.roundToDay&&(a=this._roundItemToDay(a),b=this._roundItemToDay(b));var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return c},_overlapLayoutPass3:function(a){for(var b=0,c=0,f=[],d=t.position(this.gridTable).x,g=0;g<this.renderData.columnCount;g++){for(var k=!1,c=t.position(this._getCellAt(0,
g)),b=c.x-d,c=b+c.w,h=a.length-1;0<=h&&!k;h--)for(var l=0;l<a[h].length;l++)if(k=a[h][l],k=k.start<c&&b<k.end){f[g]=h+1;break}k||(f[g]=0)}return f},applyRendererZIndex:function(a,c,f,d,g,k){b.set(c.container,{zIndex:g||d?c.renderer.mobile?100:0:void 0==a.lane?1:a.lane+1})},_layoutDecorationRenderers:function(a){null==a||null==a.decorationItems||0>=a.rowHeight||(this.gridTable&&null==this._expandAnimation&&null!=this.horizontalDecorationRenderer?(this._layoutStep=a.columnCount,this.renderData.gridTablePosX=
t.position(this.gridTable).x,this.inherited(arguments)):this.decorationRendererManager.recycleItemRenderers())},_layoutRenderers:function(a){null==a||null==a.items||0>=a.rowHeight||(!this.gridTable||null!=this._expandAnimation||null==this.horizontalRenderer&&null==this.labelRenderer?this._recycleItemRenderers():(this.renderData.gridTablePosX=t.position(this.gridTable).x,this._layoutStep=a.columnCount,this._recycleExpandRenderers(),this._hiddenItems=[],this._offsets=[],this.naturalRowsHeight=[],this.inherited(arguments)))},
_offsets:null,_layoutInterval:function(a,b,c,f,d,g){if(null!=this.renderData.cells)if("dataItems"===g){var k=[];a=[];for(var h=0;h<d.length;h++){var l=d[h],n=this._itemToRendererKind(l);"horizontal"==n?k.push(l):"label"==n&&a.push(l)}d=this.getExpandedRowIndex();if(-1==d||d==b){d=[];h=null;l=[];if(0<k.length&&this.horizontalRenderer)var h=this._createHorizontalLayoutItems(b,c,f,k,g),m=this._computeHorizontalOverlapLayout(h,l);var q,k=[];0<a.length&&this.labelRenderer&&(q=this._createLabelLayoutItems(b,
c,f,a),this._computeLabelOffsets(q,k));c=this._computeColHasHiddenItems(b,l,k);null!=h&&this._layoutHorizontalItemsImpl(b,h,m,c,d,g);null!=q&&this._layoutLabelItemsImpl(b,q,c,d,l,g);this._layoutExpandRenderers(b,c,d);this._hiddenItems[b]=d}}else this.horizontalDecorationRenderer&&(h=this._createHorizontalLayoutItems(b,c,f,d,g),null!=h&&this._layoutHorizontalItemsImpl(b,h,null,!1,null,g))},_createHorizontalLayoutItems:function(a,b,c,f,d){var g=this.renderData,k=g.dateModule,h=g.rtl?-1:1,n=[];d="decorationItems"===
d;for(var m=0;m<f.length;m++){var q=f[m],p=this.computeRangeOverlap(g,q.startTime,q.endTime,b,c),u=k.difference(b,this.floorToDay(p[0],!1,g),"day"),r=g.dates[a][u],v=t.position(this._getCellAt(a,u,!1)),w=v.x-g.gridTablePosX;g.rtl&&(w+=v.w);if(d&&!q.isAllDay||!d&&!this.roundToDay&&!q.allDay)w+=h*this.computeProjectionOnDate(g,r,p[0],v.w);var w=Math.ceil(w),x=k.difference(b,this.floorToDay(p[1],!1,g),"day"),A;x>g.columnCount-1?(v=t.position(this._getCellAt(a,g.columnCount-1,!1)),A=g.rtl?v.x-g.gridTablePosX:
v.x-g.gridTablePosX+v.w):(r=g.dates[a][x],v=t.position(this._getCellAt(a,x,!1)),A=v.x-g.gridTablePosX,g.rtl&&(A+=v.w),!d&&this.roundToDay?this.isStartOfDay(p[1])||(A+=h*v.w):A+=h*this.computeProjectionOnDate(g,r,p[1],v.w));A=Math.floor(A);g.rtl&&(r=A,A=w,w=r);A>w&&(q=l.mixin({start:w,end:A,range:p,item:q,startOffset:u,endOffset:x},q),n.push(q))}return n},_computeHorizontalOverlapLayout:function(a,b){for(var c=this.renderData,f=this.horizontalRendererHeight,d=this.computeOverlapping(a,this._overlapLayoutPass3),
g=this.percentOverlap/100,k=0;k<c.columnCount;k++){var h=d.addedPassRes[k],l=c.rtl?c.columnCount-k-1:k;b[l]=0==g?0==h?0:1==h?f:f+(h-1)*(f+this.verticalGap):0==h?0:h*f-(h-1)*g*f+this.verticalGap;b[l]+=this.cellPaddingTop}return d},_createLabelLayoutItems:function(a,b,c,f){if(null!=this.labelRenderer){for(var d=this.renderData,g=d.dateModule,k=[],h=0;h<f.length;h++){var n=f[h];a=this.floorToDay(n.startTime,!1,d);for(var m=this.dateModule.compare;-1==m(a,n.endTime)&&-1==m(a,c);){var q=g.add(a,"day",
1),q=this.floorToDay(q,!0),q=this.computeRangeOverlap(d,n.startTime,n.endTime,a,q),p=g.difference(b,this.floorToDay(q[0],!1,d),"day");if(p>=this.columnCount)break;if(0<=p){var t=k[p];null==t&&(t=[],k[p]=t);t.push(l.mixin({startOffset:p,range:q,item:n},n))}a=g.add(a,"day",1);this.floorToDay(a,!0)}}return k}},_computeLabelOffsets:function(a,b){for(var c=0;c<this.renderData.columnCount;c++)b[c]=null==a[c]?0:a[c].length*(this.labelRendererHeight+this.verticalGap)},_computeColHasHiddenItems:function(a,
b,c){for(var f=[],d=this._getRowHeight(a),g,k=0,h=0;h<this.renderData.columnCount;h++)g=null==b||null==b[h]?this.cellPaddingTop:b[h],g+=null==c||null==c[h]?0:c[h],g>k&&(k=g),f[h]=g>d;this.naturalRowsHeight[a]=k;return f},_layoutHorizontalItemsImpl:function(a,c,f,d,g,l){f=this.renderData.cells[a];a=this._getRowHeight(a);for(var n=this.horizontalRendererHeight,m=this.percentOverlap/100,q=0;q<c.length;q++){var p=c[q],t=p.lane;if("dataItems"===l){var u=this.cellPaddingTop,u=0==m?u+t*(n+this.verticalGap):
u+t*(n-m*n),t=!1,r=a;if(this.expandRenderer){for(r=p.startOffset;r<=p.endOffset;r++)if(d[r]){t=!0;break}r=t?a-this.expandRendererHeight:a}if(u+n<=r){var t=this._createRenderer(p,"horizontal",this.horizontalRenderer,"dojoxCalendarHorizontal"),v=(r=this.isItemBeingEdited(p)&&!this.liveLayout&&this._isEditing)?a-this.cellPaddingTop:n,w=p.end-p.start;9<=h("ie")&&p.start+w<this.itemContainer.offsetWidth&&w++;b.set(t.container,{top:(r?this.cellPaddingTop:u)+"px",left:p.start+"px",width:w+"px",height:v+
"px"});this._applyRendererLayout(p,t,f,w,v,"horizontal")}else for(u=p.startOffset;u<p.endOffset;u++)null==g[u]?g[u]=[p.item]:g[u].push(p.item)}else t=this.decorationRendererManager.createRenderer(p,"horizontal",this.horizontalDecorationRenderer,"dojoxCalendarDecoration"),v=a,w=p.end-p.start,9<=h("ie")&&p.start+w<this.itemContainer.offsetWidth&&w++,b.set(t.container,{top:"0",left:p.start+"px",width:w+"px",height:v+"px"}),k.place(t.container,f),b.set(t.container,"display","block")}},_layoutLabelItemsImpl:function(a,
c,f,d,g){for(var k,h,n=this.renderData,m=n.cells[a],q=this._getRowHeight(a),p=this.labelRendererHeight,u=t.getMarginBox(this.itemContainer).w,r=0;r<c.length;r++)if(k=c[r],null!=k){k.sort(l.hitch(this,function(a,b){return this.dateModule.compare(a.range[0],b.range[0])}));var v=this.expandRenderer?f[r]?q-this.expandRendererHeight:q:q;h=null==g||null==g[r]?this.cellPaddingTop:g[r]+this.verticalGap;for(var w=t.position(this._getCellAt(a,r)),x=w.x-n.gridTablePosX,A=0;A<k.length;A++){if(h+p+this.verticalGap<=
v){var y=k[A];l.mixin(y,{start:x,end:x+w.w});var z=this._createRenderer(y,"label",this.labelRenderer,"dojoxCalendarLabel"),C=this.isItemBeingEdited(y)&&!this.liveLayout&&this._isEditing,R=C?this._getRowHeight(a)-this.cellPaddingTop:p;n.rtl&&(y.start=u-y.end,y.end=y.start+w.w);b.set(z.container,{top:(C?this.cellPaddingTop:h)+"px",left:y.start+"px",width:w.w+"px",height:R+"px"});this._applyRendererLayout(y,z,m,w.w,R,"label")}else break;h+=p+this.verticalGap}for(;A<k.length;A++)null==d[r]?d[r]=[k[A]]:
d[r].push(k[A])}},_applyRendererLayout:function(a,c,f,d,g,h){var l=this.isItemBeingEdited(a),n=this.isItemSelected(a),m=this.isItemHovered(a),q=this.isItemFocused(a),p=c.renderer;p.set("hovered",m);p.set("selected",n);p.set("edited",l);p.set("focused",this.showFocus?q:!1);p.set("moveEnabled",this.isItemMoveEnabled(a._item,h));p.set("storeState",this.getItemStoreState(a));"label"!=h&&p.set("resizeEnabled",this.isItemResizeEnabled(a,h));this.applyRendererZIndex(a,c,m,n,l,q);p.updateRendering&&p.updateRendering(d,
g);k.place(c.container,f);b.set(c.container,"display","block")},_getCellAt:function(a,b,c){void 0!=c&&1!=c||this.isLeftToRight()||(b=this.renderData.columnCount-1-b);return this.gridTable.childNodes[0].childNodes[a].childNodes[b]},_layoutExpandRenderers:function(a,b,c){if(this.expandRenderer){var f=this.renderData;if(f.expandedRow==a)null!=f.expandedRowCol&&-1!=f.expandedRowCol&&this._layoutExpandRendererImpl(f.expandedRow,f.expandedRowCol,null,!0);else if(null==f.expandedRow)for(var d=0;d<f.columnCount;d++)b[d]&&
this._layoutExpandRendererImpl(a,f.rtl?f.columnCount-1-d:d,c[d],!1)}},_layoutExpandRendererImpl:function(a,c,f,d){var g=this.renderData,h=l.clone(g.dates[a][c]),n=null,m=g.cells[a],n=this._getExpandRenderer(h,f,a,c,d);a=t.position(this._getCellAt(a,c));a.x-=g.gridTablePosX;this.layoutExpandRenderer(n,h,f,a,this.expandRendererHeight);k.place(n.domNode,m);b.set(n.domNode,"display","block")},layoutExpandRenderer:function(a,c,f,d,g){b.set(a.domNode,{left:d.x+"px",width:d.w+"px",height:g+"px",top:d.h-
g-1+"px"})},_onItemEditBeginGesture:function(a){var b=this._edProps,c=b.editedItem,f=a.dates,d=this.newDate("resizeEnd"==b.editKind?c.endTime:c.startTime);"label"!=b.rendererKind&&"move"==a.editKind&&(c.allDay||this.roundToDay)&&(b.dayOffset=this.renderData.dateModule.difference(this.floorToDay(f[0],!1,this.renderData),d,"day"));this.inherited(arguments)},_computeItemEditingTimes:function(a,b,c,f,d){var g=this.renderData.dateModule,k=this._edProps;if("label"!=c)if(a.allDay||this.roundToDay){var h=
this.isStartOfDay(f[0]);switch(b){case "resizeEnd":!h&&a.allDay&&(f[0]=g.add(f[0],"day",1));case "resizeStart":h||(f[0]=this.floorToDay(f[0],!0));break;case "move":f[0]=g.add(f[0],"day",k.dayOffset);break;case "resizeBoth":h||(f[0]=this.floorToDay(f[0],!0)),this.isStartOfDay(f[1])||(f[1]=this.floorToDay(g.add(f[1],"day",1),!0))}}else f=this.inherited(arguments);return f},getTime:function(a,b,c,f){var d=this.renderData;null!=a&&(c=t.position(this.itemContainer,!0),a.touches?(f=void 0==f?0:f,b=a.touches[f].pageX-
c.x,c=a.touches[f].pageY-c.y):(b=a.pageX-c.x,c=a.pageY-c.y));f=t.getContentBox(this.itemContainer);0>b?b=0:b>f.w&&(b=f.w-1);0>c?c=0:c>f.h&&(c=f.h-1);a=t.getMarginBox(this.itemContainer).w/d.columnCount;c=null==d.expandedRow?Math.floor(c/(t.getMarginBox(this.itemContainer).h/d.rowCount)):d.expandedRow;f=t.getContentBox(this.itemContainer);d.rtl&&(b=f.w-b);f=Math.floor(b/a);b=Math.floor(1440*(b-f*a)/a);a=null;c<d.dates.length&&f<this.renderData.dates[c].length&&(a=this.newDate(this.renderData.dates[c][f]),
a=this.renderData.dateModule.add(a,"minute",b));return a},_onGridMouseUp:function(a){this.inherited(arguments);this._gridMouseDown&&(this._gridMouseDown=!1,this._onGridClick({date:this.getTime(a),triggerEvent:a}))},_onGridTouchEnd:function(a){this.inherited(arguments);var b=this._gridProps;b&&(this._isEditing||(b.fromItem||b.editingOnStart||this.selectFromEvent(a,null,null,!0),b.fromItem||(this._pendingDoubleTap&&this._pendingDoubleTap.grid?(this._onGridDoubleClick({date:this.getTime(this._gridProps.event),
triggerEvent:this._gridProps.event}),clearTimeout(this._pendingDoubleTap.timer),delete this._pendingDoubleTap):(this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),this._pendingDoubleTap={grid:!0,timer:setTimeout(l.hitch(this,function(){delete this._pendingDoubleTap}),this.doubleTapDelay)}))),this._gridProps=null)},_onRowHeaderClick:function(a){this._dispatchCalendarEvt(a,"onRowHeaderClick")},onRowHeaderClick:function(a){},expandRendererClickHandler:function(a,
b){m.stop(a);var c=b.get("rowIndex"),f=b.get("columnIndex");this._onExpandRendererClick(l.mixin(this._createItemEditEvent(),{rowIndex:c,columnIndex:f,renderer:b,triggerEvent:a,date:this.renderData.dates[c][f]}))},onExpandRendererClick:function(a){},_onExpandRendererClick:function(a){this._dispatchCalendarEvt(a,"onExpandRendererClick");a.isDefaultPrevented()||(-1!=this.getExpandedRowIndex()?this.collapseRow():this.expandRow(a.rowIndex,a.columnIndex))},snapUnit:"minute",snapSteps:15,minDurationUnit:"minute",
minDurationSteps:15,triggerExtent:3,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!1})})},"dojox/calendar/ViewBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/_base/event dojo/_base/html dojo/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/on dojo/date dojo/date/locale dojo/when dijit/_WidgetBase dojox/widget/_Invalidating dojox/widget/Selection ./time ./StoreMixin ./StoreManager ./RendererManager".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E){return r("dojox.calendar.ViewBase",[z,A,x,y],{datePackage:f,_calendar:"gregorian",viewKind:null,_layoutStep:1,_layoutUnit:"day",resizeCursor:"n-resize",formatItemTimeFunc:null,_cssDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),_getFormatItemTimeFuncAttr:function(){if(this.formatItemTimeFunc)return this.formatItemTimeFunc;if(null!=this.owner)return this.owner.get("formatItemTimeFunc")},_viewHandles:null,doubleTapDelay:300,constructor:function(a){a=
a||{};this._calendar=a.datePackage?a.datePackage.substr(a.datePackage.lastIndexOf(".")+1):this._calendar;this.dateModule=a.datePackage?p.getObject(a.datePackage,!1):f;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?p.getObject(a.datePackage+".locale",!1):u;this._viewHandles=[];this.storeManager=new C({owner:this,_ownerItemsProperty:"items"});this.storeManager.on("layoutInvalidated",p.hitch(this,this._refreshItemsRendering));this.storeManager.on("dataLoaded",p.hitch(this,
function(a){this.set("items",a)}));this.storeManager.on("renderersInvalidated",p.hitch(this,function(a){this.updateRenderers(a)}));this.rendererManager=new E({owner:this});this.rendererManager.on("rendererCreated",p.hitch(this,this._onRendererCreated));this.rendererManager.on("rendererReused",p.hitch(this,this._onRendererReused));this.rendererManager.on("rendererRecycled",p.hitch(this,this._onRendererRecycled));this.rendererManager.on("rendererDestroyed",p.hitch(this,this._onRendererDestroyed));this.decorationStoreManager=
new C({owner:this,_ownerItemsProperty:"decorationItems"});this.decorationStoreManager.on("layoutInvalidated",p.hitch(this,this._refreshDecorationItemsRendering));this.decorationStoreManager.on("dataLoaded",p.hitch(this,function(a){this.set("decorationItems",a)}));this.decorationRendererManager=new E({owner:this});this._setupDayRefresh()},destroy:function(a){this.rendererManager.destroy();for(this.decorationRendererManager.destroy();0<this._viewHandles.length;)this._viewHandles.pop().remove();this.inherited(arguments)},
_setupDayRefresh:function(){var a=this.newDate(new Date),b=v.floor(a,"day",1,this.dateClassObj),b=this.dateModule.add(b,"day",1),b=23==b.getHours()?this.dateModule.add(b,"hour",2):v.floorToDay(b,!0,this.dateClassObj);setTimeout(p.hitch(this,function(){this._isEditing||this.refreshRendering(!0);this._setupDayRefresh()}),b.getTime()-a.getTime()+5E3)},resize:function(a){a&&k.setMarginBox(this.domNode,a)},beforeActivate:function(){},afterActivate:function(){},beforeDeactivate:function(){},afterDeactivate:function(){},
_getTopOwner:function(){for(var a=this;void 0!=a.owner;)a=a.owner;return a},_createRenderData:function(){},_validateProperties:function(){},_setText:function(a,b,c){if(null!=b)if(!c&&a.hasChildNodes())a.childNodes[0].childNodes[0].nodeValue=b;else{for(;a.hasChildNodes();)a.removeChild(a.lastChild);var f=l.doc.createElement("span");g("dojo-bidi")&&this.applyTextDir(f,b);c?f.innerHTML=b:f.appendChild(l.doc.createTextNode(b));a.appendChild(f)}},isAscendantHasClass:function(a,c,f){for(;a!=c&&a!=document;){if(b.contains(a,
f))return!0;a=a.parentNode}return!1},isWeekEnd:function(a){return u.isWeekend(a)},getWeekNumberLabel:function(a){a.toGregorian&&(a=a.toGregorian());return u.format(a,{selector:"date",datePattern:"w"})},addAndFloor:function(a,b,c){a=this.dateModule.add(a,b,c);return a=23==a.getHours()?this.dateModule.add(a,"hour",2):v.floorToDay(a,!0,this.dateClassObj)},floorToDay:function(a,b){return v.floorToDay(a,b,this.dateClassObj)},floorToMonth:function(a,b){return v.floorToMonth(a,b,this.dateClassObj)},floorDate:function(a,
b,c,f){return v.floor(a,b,c,f,this.dateClassObj)},isToday:function(a){return v.isToday(a,this.dateClassObj)},isStartOfDay:function(a){return v.isStartOfDay(a,this.dateClassObj,this.dateModule)},isOverlapping:function(a,b,c,f,d,g){return v.isOverlapping(a,b,c,f,d,g)},computeRangeOverlap:function(a,b,c,f,d,g){var k=a.dateModule;if(null==b||null==f||null==c||null==d)return null;var h=k.compare(b,d),l=k.compare(f,c);if(g){if(0==h||1==h||0==l||1==l)return null}else if(1==h||1==l)return null;return[this.newDate(0<
k.compare(b,f)?b:f,a),this.newDate(0<k.compare(c,d)?d:c,a)]},isSameDay:function(a,b){return null==a||null==b?!1:a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()},computeProjectionOnDate:function(a,b,c,f){var d=a.dateModule,g=a.minHours,k=a.maxHours;if(0>=f||-1==d.compare(c,b))return 0;var h=function(a){return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds()},l=this.floorToDay(b,!1,a);if(c.getDate()!=l.getDate())if(c.getMonth()==l.getMonth()){if(c.getDate()<
l.getDate())return 0;if(c.getDate()>l.getDate()&&24>k)return f}else if(c.getFullYear()==l.getFullYear()){if(c.getMonth()<l.getMonth())return 0;if(c.getMonth()>l.getMonth())return f}else{if(c.getFullYear()<l.getFullYear())return 0;if(c.getFullYear()>l.getFullYear())return f}if(this.isSameDay(b,c)||24<k){d=p.clone(b);a=0;null!=g&&0!=g&&(d.setHours(g),a=h(d));d=p.clone(b);d.setHours(k);d=null==k||24==k?86400:24<k?86400+h(d):h(d);g=0;g=24<k&&b.getDate()!=c.getDate()?86400+h(c):h(c);if(g<a)return 0;if(g>
d)return f;b=f*(g-a)/(d-a)}else{if(c.getDate()<b.getDate()&&c.getMonth()==b.getMonth())return 0;c=this.floorToDay(c);k=a.dateModule.add(b,"day",1);k=this.floorToDay(k,!1,a);b=1==d.compare(c,b)&&0==d.compare(c,k)||1==d.compare(c,k)?f:0}return b},getTime:function(a,b,c,f){return null},getSubColumn:function(a,b,c,f){return null},getSubColumnIndex:function(a){if(this.subColumns)for(var b=0;b<this.subColumns.length;b++)if(this.subColumns[b]==a)return b;return-1},newDate:function(a){return v.newDate(a,
this.dateClassObj)},_isItemInView:function(a){var b=this.renderData,c=b.dateModule;return-1==c.compare(a.startTime,b.startTime)?!1:1!=c.compare(a.endTime,b.endTime)},_ensureItemInView:function(a){var b=this.renderData,c=b.dateModule,f=Math.abs(c.difference(a.startTime,a.endTime,"millisecond")),d=!1;-1==c.compare(a.startTime,b.startTime)?(a.startTime=b.startTime,a.endTime=c.add(a.startTime,"millisecond",f),d=!0):1==c.compare(a.endTime,b.endTime)&&(a.endTime=b.endTime,a.startTime=c.add(a.endTime,"millisecond",
-f),d=!0);return d},scrollable:!0,autoScroll:!0,_autoScroll:function(a,b,c){return!1},scrollMethod:"auto",_setScrollMethodAttr:function(b){this.scrollMethod!=b&&(this.scrollMethod=b,void 0!==this._domScroll&&(this._domScroll?a.set(this.sheetContainer,this._cssPrefix+"transform","translateY(0px)"):this.scrollContainer.scrollTop=0),delete this._domScroll,b=this._getScrollPosition(),delete this._scrollPos,this._setScrollPosition(b))},_startAutoScroll:function(a){var b=this._scrollProps;b||(b=this._scrollProps=
{});b.scrollStep=a;b.isScrolling||(b.isScrolling=!0,b.scrollTimer=setInterval(p.hitch(this,this._onScrollTimer_tick),10))},_stopAutoScroll:function(){var a=this._scrollProps;a&&a.isScrolling&&(clearInterval(a.scrollTimer),a.scrollTimer=null);this._scrollProps=null},_onScrollTimer_tick:function(a){},_scrollPos:0,_hscrollPos:0,getCSSPrefix:function(){return g("ie")?"-ms-":g("webkit")?"-webkit-":g("mozilla")?"-moz-":g("opera")?"-o-":""},_hScrollNodes:null,_setScrollPositionBase:function(b,c){if(!(c&&
this._scrollPos==b||!c&&this._hScrollPos==b)){if(void 0===this._domScroll){var f=this.get("scrollMethod");this._domScroll="auto"===f?!g("ios")&&!g("android")&&!g("webkit"):"dom"===f}f=0;c?(f=k.getMarginBox(this.scrollContainer),f=k.getMarginBox(this.sheetContainer).h-f.h):(f=k.getMarginBox(this.grid),f=k.getMarginBox(this.gridTable).w-f.w);0>b?b=0:b>f&&(b=f);c?this._scrollPos=b:this._hScrollPos=b;var d=!this.isLeftToRight();if(this._domScroll)c?this.scrollContainer.scrollTop=b:m.forEach(this._hScrollNodes,
function(c){a.set(c,"left",(d?1:-1)*b+"px")},this);else{this._cssPrefix||(this._cssPrefix=this.getCSSPrefix());var h=this._cssPrefix+"transform";if(c)a.set(this.sheetContainer,h,"translateY(-"+b+"px)");else{var l="translateX("+(d?"":"-")+b+"px)";m.forEach(this._hScrollNodes,function(b){a.set(b,h,l)},this)}}}},_setScrollPosition:function(a){this._setScrollPositionBase(a,!0)},_getScrollPosition:function(){return this._scrollPos},_setHScrollPosition:function(a){this._setScrollPositionBase(a,!1)},_setHScrollPositionImpl:function(b,
c,f){var d=c?null:"translateX(-"+b+"px)";m.forEach(this._hScrollNodes,function(f){c?(f.scrollLeft=b,a.set(f,"left",-b+"px")):a.set(f,cssProp,d)},this)},_hScrollPos:0,_getHScrollPosition:function(){return this._hScrollPos},scrollView:function(a){},ensureVisibility:function(a,b,c,f,d){},_getStoreAttr:function(){return this.owner?this.owner.get("store"):this.store},_setItemsAttr:function(a){this._set("items",a);this.displayedItemsInvalidated=!0},_refreshItemsRendering:function(){var a=this.renderData;
this._computeVisibleItems(a);this._layoutRenderers(a)},_refreshDecorationItemsRendering:function(){var a=this.renderData;this._computeVisibleItems(a);this._layoutDecorationRenderers(a)},invalidateLayout:function(){this._layoutRenderers(this.renderData);this._layoutDecorationRenderers(this.renderData)},_setDecorationItemsAttr:function(a){this._set("decorationItems",a);this.displayedDecorationItemsInvalidated=!0},_getDecorationStoreAttr:function(){return this.owner?this.owner.get("decorationStore"):
this.decorationStore},_setDecorationStoreAttr:function(a){this.decorationStore=a;this.decorationStoreManager.set("store",a)},computeOverlapping:function(a,b){if(0==a.length)return{numLanes:0,addedPassRes:[1]};for(var c=[],f=0;f<a.length;f++)this._layoutPass1(a[f],c);f=null;b&&(f=p.hitch(this,b)(c));return{numLanes:c.length,addedPassRes:f}},_layoutPass1:function(a,b){for(var c=!0,f=0;f<b.length;f++){for(var d=b[f],c=!1,g=0;g<d.length&&!c;g++)d[g].start<a.end&&a.start<d[g].end&&(c=!0,d[g].extent=1);
if(!c){a.lane=f;a.extent=-1;d.push(a);return}}b.push([a]);a.lane=b.length-1;a.extent=-1},_layoutInterval:function(a,b,c,f,d){},layoutPriorityFunction:null,_sortItemsFunction:function(a,b){var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return c},_layoutRenderers:function(a){this._layoutRenderersImpl(a,this.rendererManager,a.items,"dataItems")},_layoutDecorationRenderers:function(a){this._layoutRenderersImpl(a,this.decorationRendererManager,
a.decorationItems,"decorationItems")},_layoutRenderersImpl:function(a,b,c,f){if(c){b.recycleItemRenderers();b=a.dateModule;var d=this.newDate(a.startTime),g=p.clone(d);c=c.concat();for(var k=[],h,l={},n=0;-1==b.compare(d,a.endTime)&&0<c.length;){var d=this.addAndFloor(d,this._layoutUnit,this._layoutStep),q=p.clone(d);a.minHours&&g.setHours(a.minHours);void 0!=a.maxHours&&24!=a.maxHours&&(24>a.maxHours&&(q=b.add(d,"day",-1)),q=this.floorToDay(q,!0,a),q.setHours(a.maxHours-(24>a.maxHours?0:24)));h=
m.filter(c,function(b){var c=this.isOverlapping(a,b.startTime,b.endTime,g,q);c?(l[b.id]=!0,k.push(b)):l[b.id]?delete l[b.id]:k.push(b);return c},this);c=k;k=[];0<h.length&&(h.sort(p.hitch(this,this.layoutPriorityFunction?this.layoutPriorityFunction:this._sortItemsFunction)),this._layoutInterval(a,n,g,q,h,f));g=p.clone(d);n++}this._onRenderersLayoutDone(this)}},_recycleItemRenderers:function(a){this.rendererManager.recycleItemRenderers(a)},getRenderers:function(a){return this.rendererManager.getRenderers(a)},
itemToRendererKindFunc:null,_itemToRendererKind:function(a){return this.itemToRendererKindFunc?this.itemToRendererKindFunc(a):this._defaultItemToRendererKindFunc(a)},_defaultItemToRendererKindFunc:function(a){return null},_createRenderer:function(a,b,c,f){return this.rendererManager.createRenderer(a,b,c,f)},_onRendererCreated:function(a){if(a.source==this)this.onRendererCreated(a);null!=this.owner&&this.owner._onRendererCreated(a)},onRendererCreated:function(a){},_onRendererRecycled:function(a){if(a.source==
this)this.onRendererRecycled(a);null!=this.owner&&this.owner._onRendererRecycled(a)},onRendererRecycled:function(a){},_onRendererReused:function(a){if(a.source==this)this.onRendererReused(a);null!=this.owner&&this.owner._onRendererReused(a)},onRendererReused:function(a){},_onRendererDestroyed:function(a){if(a.source==this)this.onRendererDestroyed(a);null!=this.owner&&this.owner._onRendererDestroyed(a)},onRendererDestroyed:function(a){},_onRenderersLayoutDone:function(a){this.onRenderersLayoutDone(a);
null!=this.owner&&this.owner._onRenderersLayoutDone(a)},onRenderersLayoutDone:function(a){},_recycleRenderer:function(a,b){this.rendererManager.recycleRenderer(a,b)},_destroyRenderer:function(a){this.rendererManager.destroyRenderer(a)},_destroyRenderersByKind:function(a){this.rendererManager.destroyRenderersByKind(a)},_updateEditingCapabilities:function(a,b){var c=this.isItemMoveEnabled(a,b.rendererKind),f=this.isItemResizeEnabled(a,b.rendererKind),d=!1;c!=b.get("moveEnabled")&&(b.set("moveEnabled",
c),d=!0);f!=b.get("resizeEnabled")&&(b.set("resizeEnabled",f),d=!0);d&&b.updateRendering()},updateRenderers:function(a,b){if(null!=a)for(var c=p.isArray(a)?a:[a],f=0;f<c.length;f++){var d=c[f];if(null!=d&&null!=d.id){var g=this.rendererManager.itemToRenderer[d.id];if(null!=g)for(var k=this.isItemSelected(d),h=this.isItemHovered(d),l=this.isItemBeingEdited(d),n=this.showFocus?this.isItemFocused(d):!1,m=0;m<g.length;m++){var q=g[m].renderer;q.set("hovered",h);q.set("selected",k);q.set("edited",l);q.set("focused",
n);q.set("storeState",this.getItemStoreState(d));this.applyRendererZIndex(d,g[m],h,k,l,n);b||(q.set("item",d),q.updateRendering&&q.updateRendering())}}}},applyRendererZIndex:function(b,c,f,d,g,k){a.set(c.container,{zIndex:g||d?20:void 0==b.lane?0:b.lane})},getIdentity:function(a){return this.owner?this.owner.getIdentity(a):a.id},_setHoveredItem:function(a,b){if(this.owner)this.owner._setHoveredItem(a,b);else if(this.hoveredItem&&a&&this.hoveredItem.id!=a.id||null==a||null==this.hoveredItem){var c=
this.hoveredItem;this.hoveredItem=a;this.updateRenderers([c,this.hoveredItem],!0);a&&b&&this._updateEditingCapabilities(a._item?a._item:a,b)}},hoveredItem:null,isItemHovered:function(a){return this._isEditing&&this._edProps?a.id==this._edProps.editedItem.id:this.owner?this.owner.isItemHovered(a):null!=this.hoveredItem&&this.hoveredItem.id==a.id},isItemFocused:function(a){return this._isItemFocused?this._isItemFocused(a):!1},_setSelectionModeAttr:function(a){this.owner?this.owner.set("selectionMode",
a):this.inherited(arguments)},_getSelectionModeAttr:function(a){return this.owner?this.owner.get("selectionMode"):this.inherited(arguments)},_setSelectedItemAttr:function(a){this.owner?this.owner.set("selectedItem",a):this.inherited(arguments)},_getSelectedItemAttr:function(a){return this.owner?this.owner.get("selectedItem"):this.selectedItem},_setSelectedItemsAttr:function(a){this.owner?this.owner.set("selectedItems",a):this.inherited(arguments)},_getSelectedItemsAttr:function(){return this.owner?
this.owner.get("selectedItems"):this.inherited(arguments)},isItemSelected:function(a){return this.owner?this.owner.isItemSelected(a):this.inherited(arguments)},selectFromEvent:function(a,b,c,f){this.owner?this.owner.selectFromEvent(a,b,c,f):this.inherited(arguments)},setItemSelected:function(a,b){this.owner?this.owner.setItemSelected(a,b):this.inherited(arguments)},createItemFunc:null,_getCreateItemFuncAttr:function(){return this.owner?this.owner.get("createItemFunc"):this.createItemFunc},createOnGridClick:!1,
_getCreateOnGridClickAttr:function(){return this.owner?this.owner.get("createOnGridClick"):this.createOnGridClick},_gridMouseDown:!1,_tempIdCount:0,_tempItemsMap:null,_onGridMouseDown:function(a){this._gridMouseDown=!0;this.showFocus=!1;this._isEditing&&this._endItemEditing("mouse",!1);this._doEndItemEditing(this.owner,"mouse");this.set("focusedItem",null);this.selectFromEvent(a,null,null,!0);this._setTabIndexAttr&&this[this._setTabIndexAttr].focus();if(this._onRendererHandleMouseDown){var b=this.get("createItemFunc");
if(b){var b=this._createdEvent=b(this,this.getTime(a),a,this.getSubColumn(a)),c=this.get("store");if(b&&null!=c){if(void 0==c.getIdentity(b)){var f="_tempId_"+this._tempIdCount++;b[c.idProperty]=f;null==this._tempItemsMap&&(this._tempItemsMap={});this._tempItemsMap[f]=!0}c=this.itemToRenderItem(b,c);c._item=b;this._setItemStoreState(b,"unstored");var f=this._getTopOwner(),d=f.get("items");f.set("items",d?d.concat([c]):[c]);this._refreshItemsRendering();(b=this.getRenderers(b))&&0<b.length&&(b=b[0])&&
(this._onRendererHandleMouseDown(a,b.renderer,"resizeEnd"),this._startItemEditing(c,"mouse"))}}}},_onGridMouseMove:function(a){},_onGridMouseUp:function(a){},_onGridTouchStart:function(a){var b=this._edProps;this._gridProps={event:a,fromItem:this.isAscendantHasClass(a.target,this.eventContainer,"dojoxCalendarEvent")};this._isEditing&&(this._gridProps&&(this._gridProps.editingOnStart=!0),p.mixin(b,this._getTouchesOnRenderers(a,b.editedItem)),0==b.touchesLen&&(b&&b.endEditingTimer&&(clearTimeout(b.endEditingTimer),
b.endEditingTimer=null),this._endItemEditing("touch",!1)));this._doEndItemEditing(this.owner,"touch");h.stop(a)},_doEndItemEditing:function(a,b){if(a&&a._isEditing){var c=a._edProps;c&&c.endEditingTimer&&(clearTimeout(c.endEditingTimer),c.endEditingTimer=null);a._endItemEditing(b,!1)}},_onGridTouchEnd:function(a){},_onGridTouchMove:function(a){},__fixEvt:function(a){return a},_dispatchCalendarEvt:function(a,b){a=this.__fixEvt(a);this[b](a);if(this.owner)this.owner[b](a);return a},_onGridClick:function(a){a.triggerEvent||
(a={date:this.getTime(a),triggerEvent:a});this._dispatchCalendarEvt(a,"onGridClick")},onGridClick:function(a){},_onGridDoubleClick:function(a){a.triggerEvent||(a={date:this.getTime(a),triggerEvent:a});this._dispatchCalendarEvt(a,"onGridDoubleClick")},onGridDoubleClick:function(a){},_onItemClick:function(a){this._dispatchCalendarEvt(a,"onItemClick")},onItemClick:function(a){},_onItemDoubleClick:function(a){this._dispatchCalendarEvt(a,"onItemDoubleClick")},onItemDoubleClick:function(a){},_onItemContextMenu:function(a){this._dispatchCalendarEvt(a,
"onItemContextMenu")},onItemContextMenu:function(a){},_getStartEndRenderers:function(a){a=this.rendererManager.itemToRenderer[a.id];if(null==a)return null;if(1==a.length)return a=a[0].renderer,[a,a];for(var b=this.renderData,c=!1,f=!1,d=[],g=0;g<a.length;g++){var k=a[g].renderer;c||(c=0==b.dateModule.compare(k.item.range[0],k.item.startTime),d[0]=k);f||(f=0==b.dateModule.compare(k.item.range[1],k.item.endTime),d[1]=k);if(c&&f)break}return d},editable:!0,moveEnabled:!0,resizeEnabled:!0,isItemEditable:function(a,
b){return"storing"!=this.getItemStoreState(a)&&this.editable&&(this.owner?this.owner.isItemEditable(a,b):!0)},isItemMoveEnabled:function(a,b){return this.isItemEditable(a,b)&&this.moveEnabled&&(this.owner?this.owner.isItemMoveEnabled(a,b):!0)},isItemResizeEnabled:function(a,b){return this.isItemEditable(a,b)&&this.resizeEnabled&&(this.owner?this.owner.isItemResizeEnabled(a,b):!0)},_isEditing:!1,isItemBeingEdited:function(a){return this._isEditing&&this._edProps&&this._edProps.editedItem&&this._edProps.editedItem.id==
a.id},_setEditingProperties:function(a){this._edProps=a},_startItemEditing:function(a,b){this._isEditing=!0;this._getTopOwner()._isEditing=!0;var c=this._edProps;c.editedItem=a;c.storeItem=a._item;c.eventSource=b;c.secItem=this._secondarySheet?this._findRenderItem(a.id,this._secondarySheet.renderData.items):null;c.ownerItem=this.owner?this._findRenderItem(a.id,this.items):null;if(!c.liveLayout){c.editSaveStartTime=a.startTime;c.editSaveEndTime=a.endTime;c.editItemToRenderer=this.rendererManager.itemToRenderer;
c.editItems=this.renderData.items;c.editRendererList=this.rendererManager.rendererList;this.renderData.items=[c.editedItem];var f=c.editedItem.id;this.rendererManager.itemToRenderer={};this.rendererManager.rendererList=[];var d=c.editItemToRenderer[f];c.editRendererIndices=[];m.forEach(d,p.hitch(this,function(a,b){null==this.rendererManager.itemToRenderer[f]?this.rendererManager.itemToRenderer[f]=[a]:this.rendererManager.itemToRenderer[f].push(a);this.rendererManager.rendererList.push(a)}));c.editRendererList=
m.filter(c.editRendererList,function(a){return null!=a&&a.renderer.item.id!=f});delete c.editItemToRenderer[f]}this._layoutRenderers(this.renderData);this._onItemEditBegin({item:a,storeItem:c.storeItem,eventSource:b})},_onItemEditBegin:function(a){this._editStartTimeSave=this.newDate(a.item.startTime);this._editEndTimeSave=this.newDate(a.item.endTime);this._dispatchCalendarEvt(a,"onItemEditBegin")},onItemEditBegin:function(a){},_endItemEditing:function(a,b){this._editingGesture&&this._endItemEditingGesture(a);
this._isEditing=!1;this._getTopOwner()._isEditing=!1;var c=this._edProps;m.forEach(c.handles,function(a){a.remove()});c.liveLayout||(this.renderData.items=c.editItems,this.rendererManager.rendererList=c.editRendererList.concat(this.rendererManager.rendererList),p.mixin(this.rendererManager.itemToRenderer,c.editItemToRenderer));this._onItemEditEnd(p.mixin(this._createItemEditEvent(),{item:c.editedItem,storeItem:c.storeItem,eventSource:a,completed:!b}));this._layoutRenderers(this.renderData);this._edProps=
null},_onItemEditEnd:function(a){this._dispatchCalendarEvt(a,"onItemEditEnd");if(!a.isDefaultPrevented()){var b=this.get("store"),c=this.renderItemToItem(a.item,b),f=this._getItemStoreStateObj(a.item);if(null!=f&&"unstored"==f.state)if(a.completed){c=p.mixin(f.item,c);this._setItemStoreState(c,"storing");var d=b.getIdentity(c);a=null;this._tempItemsMap&&this._tempItemsMap[d]&&(a={temporaryId:d},delete this._tempItemsMap[d],delete c[b.idProperty]);w(b.add(c,a),p.hitch(this,function(a){(p.isObject(a)?
b.getIdentity(a):a)!=d&&this._removeRenderItem(d)}))}else this._removeRenderItem(f.id);else a.completed?(this._setItemStoreState(c,"storing"),b.put(c)):(a.item.startTime=this._editStartTimeSave,a.item.endTime=this._editEndTimeSave)}},_removeRenderItem:function(a){for(var b=this._getTopOwner(),c=b.get("items"),f=!1,d=c.length-1;0<=d;d--)if(c[d].id==a){c.splice(d,1);f=!0;break}this._cleanItemStoreState(a);f&&(b.set("items",c),this.invalidateLayout())},onItemEditEnd:function(a){},_createItemEditEvent:function(){return{cancelable:!0,
bubbles:!1,__defaultPrevent:!1,preventDefault:function(){this.__defaultPrevented=!0},isDefaultPrevented:function(){return this.__defaultPrevented}}},_startItemEditingGesture:function(a,b,c,f){var d=this._edProps;if(d&&null!=d.editedItem){this._editingGesture=!0;var g=d.editedItem;d.editKind=b;this._onItemEditBeginGesture(this.__fixEvt(p.mixin(this._createItemEditEvent(),{item:g,storeItem:d.storeItem,startTime:g.startTime,endTime:g.endTime,editKind:b,rendererKind:d.rendererKind,triggerEvent:f,dates:a,
eventSource:c})));d.itemBeginDispatched=!0}},_onItemEditBeginGesture:function(a){var b=this._edProps,c=b.editedItem,f=a.dates;b.editingTimeFrom=[];b.editingTimeFrom[0]=f[0];b.editingItemRefTime=[];b.editingItemRefTime[0]=this.newDate("resizeEnd"==b.editKind?c.endTime:c.startTime);"resizeBoth"==b.editKind&&(b.editingTimeFrom[1]=f[1],b.editingItemRefTime[1]=this.newDate(c.endTime));f=this.renderData.dateModule;b.inViewOnce=this._isItemInView(c);if("label"==b.rendererKind||this.roundToDay)b._itemEditBeginSave=
this.newDate(c.startTime),b._itemEditEndSave=this.newDate(c.endTime);b._initDuration=f.difference(c.startTime,c.endTime,c.allDay?"day":"millisecond");this._dispatchCalendarEvt(a,"onItemEditBeginGesture");a.isDefaultPrevented()||"mouse"!=a.eventSource||(b.editLayer=t.create("div",{style:"position: absolute; left:0; right:0; bottom:0; top:0; z-index:30; tabIndex:-1; background-image:url('"+this._blankGif+"'); cursor: "+("move"==a.editKind?"move":this.resizeCursor),onresizestart:function(a){return!1},
onselectstart:function(a){return!1}},this.domNode),b.editLayer.focus())},onItemEditBeginGesture:function(a){},_waDojoxAddIssue:function(a,b,c){var d=this.renderData.dateModule;return"gregorian"!=this._calendar&&0>c?(a=a.toGregorian(),a=f.add(a,b,c),new this.renderData.dateClassObj(a)):d.add(a,b,c)},_computeItemEditingTimes:function(a,b,c,f,d){c=this.renderData.dateModule;a=this._edProps;"move"==b&&(b=c.difference(a.editingTimeFrom[0],f[0],"millisecond"),f[0]=this._waDojoxAddIssue(a.editingItemRefTime[0],
"millisecond",b));return f},_moveOrResizeItemGesture:function(a,b,c,f){if(this._isEditing&&null!=a[0]){var d=this._edProps,g=d.editedItem,k=this.renderData.dateModule,h=d.editKind,l=[a[0]];"resizeBoth"==h&&(l[1]=a[1]);var l=this._computeItemEditingTimes(g,d.editKind,d.rendererKind,l,b),n=l[0],m=!1;a=p.clone(g.startTime);var q=p.clone(g.endTime),t=g.subColumn,u="keyboard"==d.eventSource?!1:this.allowStartEndSwap;if("move"==h)null!=f&&g.subColumn!=f&&this.allowSubColumnMove&&(g.subColumn=f,m=this.get("store"),
l=this.renderItemToItem(g,m),p.mixin(g,this.itemToRenderItem(l,m)),m=!0),0!=k.compare(g.startTime,n)&&(m=k.difference(g.startTime,g.endTime,"millisecond"),g.startTime=this.newDate(n),g.endTime=k.add(g.startTime,"millisecond",m),m=!0);else if("resizeStart"==h)0!=k.compare(g.startTime,n)&&(-1!=k.compare(g.endTime,n)?g.startTime=this.newDate(n):u?(g.startTime=this.newDate(g.endTime),g.endTime=this.newDate(n),d.editKind=h="resizeEnd","touch"==b&&(d.resizeEndTouchIndex=d.resizeStartTouchIndex,d.resizeStartTouchIndex=
-1)):(g.startTime=this.newDate(g.endTime),g.startTime.setHours(n.getHours()),g.startTime.setMinutes(n.getMinutes()),g.startTime.setSeconds(n.getSeconds())),m=!0);else if("resizeEnd"==h)0!=k.compare(g.endTime,n)&&(1!=k.compare(g.startTime,n)?g.endTime=this.newDate(n):u?(g.endTime=this.newDate(g.startTime),g.startTime=this.newDate(n),d.editKind=h="resizeStart","touch"==b&&(d.resizeStartTouchIndex=d.resizeEndTouchIndex,d.resizeEndTouchIndex=-1)):(g.endTime=this.newDate(g.startTime),g.endTime.setHours(n.getHours()),
g.endTime.setMinutes(n.getMinutes()),g.endTime.setSeconds(n.getSeconds())),m=!0);else if("resizeBoth"==h)m=!0,n=this.newDate(n),l=this.newDate(l[1]),-1!=k.compare(n,l)&&(u?(u=n,n=l,l=u):m=!1),m&&(g.startTime=n,g.endTime=l);else return!1;if(!m)return!1;b=p.mixin(this._createItemEditEvent(),{item:g,storeItem:d.storeItem,startTime:g.startTime,endTime:g.endTime,editKind:h,rendererKind:d.rendererKind,triggerEvent:c,eventSource:b});"move"==h?this._onItemEditMoveGesture(b):this._onItemEditResizeGesture(b);
1==k.compare(g.startTime,g.endTime)&&(h=g.startTime,g.startTime=g.endTime,g.endTime=h);m=t!=g.subColumn||0!=k.compare(a,g.startTime)||0!=k.compare(q,g.endTime);if(!m)return!1;this._layoutRenderers(this.renderData);d.liveLayout&&null!=d.secItem?(d.secItem.startTime=g.startTime,d.secItem.endTime=g.endTime,this._secondarySheet._layoutRenderers(this._secondarySheet.renderData)):null!=d.ownerItem&&this.owner.liveLayout&&(d.ownerItem.startTime=g.startTime,d.ownerItem.endTime=g.endTime,this.owner._layoutRenderers(this.owner.renderData));
return!0}},_findRenderItem:function(a,b){b=b||this.renderData.items;for(var c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null},_onItemEditMoveGesture:function(a){this._dispatchCalendarEvt(a,"onItemEditMoveGesture");if(!a.isDefaultPrevented()){var b=a.source._edProps,c=this.renderData,f=c.dateModule;"label"==b.rendererKind||this.roundToDay&&!a.item.allDay?(c=this.floorToDay(a.item.startTime,!1,c),c.setHours(b._itemEditBeginSave.getHours()),c.setMinutes(b._itemEditBeginSave.getMinutes()),f=f.add(c,
"millisecond",b._initDuration)):a.item.allDay?(c=this.floorToDay(a.item.startTime,!0),f=f.add(c,"day",b._initDuration)):(c=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps),f=f.add(c,"millisecond",b._initDuration));a.item.startTime=c;a.item.endTime=f;b.inViewOnce||(b.inViewOnce=this._isItemInView(a.item));b.inViewOnce&&this.stayInView&&this._ensureItemInView(a.item)}},_DAY_IN_MILLISECONDS:864E5,onItemEditMoveGesture:function(a){},_onItemEditResizeGesture:function(a){this._dispatchCalendarEvt(a,
"onItemEditResizeGesture");if(!a.isDefaultPrevented()){var b=a.source._edProps,c=this.renderData,f=c.dateModule,d=a.item.startTime,g=a.item.endTime;"resizeStart"==a.editKind?a.item.allDay?d=this.floorToDay(a.item.startTime,!1,this.renderData):this.roundToDay?(d=this.floorToDay(a.item.startTime,!1,c),d.setHours(b._itemEditBeginSave.getHours()),d.setMinutes(b._itemEditBeginSave.getMinutes())):d=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps):"resizeEnd"==a.editKind?a.item.allDay?this.isStartOfDay(a.item.endTime)||
(g=this.floorToDay(a.item.endTime,!1,this.renderData),g=f.add(g,"day",1)):this.roundToDay?(g=this.floorToDay(a.item.endTime,!1,c),g.setHours(b._itemEditEndSave.getHours()),g.setMinutes(b._itemEditEndSave.getMinutes())):(g=this.floorDate(a.item.endTime,this.snapUnit,this.snapSteps),"mouse"==a.eventSource&&(g=f.add(g,this.snapUnit,this.snapSteps))):(d=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps),g=this.floorDate(a.item.endTime,this.snapUnit,this.snapSteps),g=f.add(g,this.snapUnit,this.snapSteps));
a.item.startTime=d;a.item.endTime=g;c=a.item.allDay||b._initDuration>=this._DAY_IN_MILLISECONDS&&!this.allowResizeLessThan24H;this.ensureMinimalDuration(this.renderData,a.item,c?"day":this.minDurationUnit,c?1:this.minDurationSteps,a.editKind);b.inViewOnce||(b.inViewOnce=this._isItemInView(a.item));b.inViewOnce&&this.stayInView&&this._ensureItemInView(a.item)}},onItemEditResizeGesture:function(a){},_endItemEditingGesture:function(a,b){if(this._isEditing){this._editingGesture=!1;var c=this._edProps,
f=c.editedItem;c.itemBeginDispatched=!1;this._onItemEditEndGesture(p.mixin(this._createItemEditEvent(),{item:f,storeItem:c.storeItem,startTime:f.startTime,endTime:f.endTime,editKind:c.editKind,rendererKind:c.rendererKind,triggerEvent:b,eventSource:a}))}},_onItemEditEndGesture:function(a){var b=this._edProps;delete b._itemEditBeginSave;delete b._itemEditEndSave;this._dispatchCalendarEvt(a,"onItemEditEndGesture");!a.isDefaultPrevented()&&b.editLayer&&(g("ie")&&(b.editLayer.style.cursor="default"),setTimeout(p.hitch(this,
function(){this.domNode&&(this.domNode.focus(),b.editLayer.parentNode.removeChild(b.editLayer),b.editLayer=null)}),10))},onItemEditEndGesture:function(a){},ensureMinimalDuration:function(a,b,c,f,d){a=a.dateModule;"resizeStart"==d?(c=a.add(b.endTime,c,-f),1==a.compare(b.startTime,c)&&(b.startTime=c)):(c=a.add(b.startTime,c,f),-1==a.compare(b.endTime,c)&&(b.endTime=c))},doubleTapDelay:300,snapUnit:"minute",snapSteps:15,minDurationUnit:"hour",minDurationSteps:1,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,
allowResizeLessThan24H:!1,allowSubColumnMove:!0})})},"dojox/widget/_Invalidating":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful"],function(r,p,m){return r("dojox.widget._Invalidating",m,{invalidatingProperties:null,invalidRendering:!1,postscript:function(l){this.inherited(arguments);if(this.invalidatingProperties)for(var h=this.invalidatingProperties,c=0;c<h.length;c++)this.watch(h[c],p.hitch(this,this.invalidateRendering)),l&&h[c]in l&&this.invalidateRendering()},addInvalidatingProperties:function(l){this.invalidatingProperties=
this.invalidatingProperties?this.invalidatingProperties.concat(l):l},invalidateRendering:function(){this.invalidRendering||(this.invalidRendering=!0,setTimeout(p.hitch(this,this.validateRendering),0))},validateRendering:function(){this.invalidRendering&&(this.refreshRendering(),this.invalidRendering=!1)},refreshRendering:function(){}})})},"dojox/widget/Selection":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/sniff","dojo/_base/lang","dojo/Stateful"],function(r,p,m,l,h){return r("dojox.widget.Selection",
h,{constructor:function(){this.selectedItems=[]},selectionMode:"single",_setSelectionModeAttr:function(c){"none"!=c&&"single"!=c&&"multiple"!=c&&(c="single");c!=this.selectionMode&&(this.selectionMode=c,"none"==c?this.set("selectedItems",null):"single"==c&&this.set("selectedItem",this.selectedItem))},selectedItem:null,_setSelectedItemAttr:function(c){this.selectedItem!=c&&(this._set("selectedItem",c),this.set("selectedItems",c?[c]:null))},selectedItems:null,_setSelectedItemsAttr:function(c){var g=
this.selectedItems;this.selectedItems=c;this.selectedItem=null;null!=g&&0<g.length&&this.updateRenderers(g,!0);this.selectedItems&&0<this.selectedItems.length&&(this.selectedItem=this.selectedItems[0],this.updateRenderers(this.selectedItems,!0))},_getSelectedItemsAttr:function(){return null==this.selectedItems?[]:this.selectedItems.concat()},isItemSelected:function(c){return null==this.selectedItems||0==this.selectedItems.length?!1:p.some(this.selectedItems,l.hitch(this,function(g){return this.getIdentity(g)==
this.getIdentity(c)}))},getIdentity:function(c){},setItemSelected:function(c,g){if("none"!=this.selectionMode&&null!=c){var d=this.get("selectedItems");if("single"==this.selectionMode)g?this.set("selectedItem",c):this.isItemSelected(c)&&this.set("selectedItems",null);else if(g)this.isItemSelected(c)||(null==d?d=[c]:d.unshift(c),this.set("selectedItems",d));else{var h=p.filter(d,function(a){return a.id!=c.id});null!=h&&h.length!=d.length&&this.set("selectedItems",h)}}},selectFromEvent:function(c,g,
d,h){if("none"==this.selectionMode)return!1;var a,b=this.get("selectedItem"),l=g?this.isItemSelected(g):!1,k=m("mac")?c.metaKey:c.ctrlKey;null==g?k||null==this.selectedItem||(this.set("selectedItem",null),a=!0):"multiple"==this.selectionMode?(k?this.setItemSelected(g,!l):this.set("selectedItem",g),a=!0):k?(this.set("selectedItem",l?null:g),a=!0):l||(this.set("selectedItem",g),a=!0);h&&a&&this.dispatchChange(b,this.get("selectedItem"),d,c);return a},dispatchChange:function(c,g,d,h){this.onChange({oldValue:c,
newValue:g,renderer:d,triggerEvent:h})},onChange:function(){}})})},"dojox/calendar/StoreManager":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/dom-class dojo/Stateful dojo/Evented dojo/when".split(" "),function(r,p,m,l,h,c,g,d){return r("dojox.calendar.StoreManager",[c,g],{owner:null,store:null,_ownerItemsProperty:null,_getParentStoreManager:function(){return this.owner&&this.owner.owner?this.owner.owner.get("storeManager"):null},_initItems:function(c){this.set("items",
c);return c},_itemsSetter:function(c){this.items=c;this.emit("dataLoaded",c)},_computeVisibleItems:function(c){var a=c.startTime,b=c.endTime,d=null,g=this.owner[this._ownerItemsProperty];g&&(d=p.filter(g,function(d){return this.owner.isOverlapping(c,d.startTime,d.endTime,a,b)},this));return d},_updateItems:function(c,a,b){var d=!0,g=null,h=this.owner.itemToRenderItem(c,this.store);h._item=c;this.items=this.owner[this._ownerItemsProperty];if(-1!==a)b!==a?(this.items.splice(a,1),this.owner.setItemSelected&&
this.owner.isItemSelected(h)&&(this.owner.setItemSelected(h,!1),this.owner.dispatchChange(h,this.get("selectedItem"),null,null))):(g=this.items[a],b=this.owner.dateModule,d=0!==b.compare(h.startTime,g.startTime)||0!==b.compare(h.endTime,g.endTime),l.mixin(g,h));else if(-1!==b){if(c=c.temporaryId){a=this.items?this.items.length:0;for(--a;0<=a;a--)if(this.items[a].id===c){this.items[a]=h;break}a=this._getItemStoreStateObj({id:c});this._cleanItemStoreState(c);this._setItemStoreState(h,a?a.state:null)}if((c=
this._getItemStoreStateObj(h))&&"storing"===c.state){if(this.items&&this.items[b]&&this.items[b].id!==h.id){a=this.items.length;for(--a;0<=a;a--)if(this.items[a].id===h.id){this.items.splice(a,1);break}this.items.splice(b,0,h)}l.mixin(c.renderItem,h)}else this.items.splice(b,0,h);this.set("items",this.items)}this._setItemStoreState(h,"stored");this.owner._isEditing||(d?this.emit("layoutInvalidated"):this.emit("renderersInvalidated",g))},_storeSetter:function(c){var a,b=this.owner;this._observeHandler&&
(this._observeHandler.remove(),this._observeHandler=null);c?(a=c.query(b.query,b.queryOptions),a.observe&&(this._observeHandler=a.observe(l.hitch(this,this._updateItems),!0)),a=a.map(l.hitch(this,function(a){var d=b.itemToRenderItem(a,c);null==d.id&&console.err("The data item "+a.summary+" must have an unique identifier from the store.getIdentity(). The calendar will NOT work properly.");d._item=a;return d})),a=d(a,l.hitch(this,this._initItems))):a=this._initItems([]);this.store=c;return a},_getItemStoreStateObj:function(c){var a=
this._getParentStoreManager();if(a)return a._getItemStoreStateObj(c);a=this.get("store");return null!=a&&null!=this._itemStoreState?(c=void 0===c.id?a.getIdentity(c):c.id,this._itemStoreState[c]):null},getItemStoreState:function(c){var a=this._getParentStoreManager();if(a)return a.getItemStoreState(c);if(null==this._itemStoreState)return"stored";a=this.get("store");c=void 0===c.id?a.getIdentity(c):c.id;c=this._itemStoreState[c];return null!=a&&void 0!==c?c.state:"stored"},_cleanItemStoreState:function(c){var a=
this._getParentStoreManager();if(a)return a._cleanItemStoreState(c);if(this._itemStoreState)return this._itemStoreState[c]?(delete this._itemStoreState[c],!0):!1},_setItemStoreState:function(c,a){var b=this._getParentStoreManager();if(b)b._setItemStoreState(c,a);else{void 0===this._itemStoreState&&(this._itemStoreState={});var b=this.get("store"),d=void 0===c.id?b.getIdentity(c):c.id,g=this._itemStoreState[d];"stored"===a||null==a?void 0!==g&&delete this._itemStoreState[d]:b&&(this._itemStoreState[d]=
{id:d,item:c,renderItem:this.owner.itemToRenderItem(c,b),state:a})}}})})},"dojox/calendar/RendererManager":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/dom-class dojo/dom-style dojo/Stateful dojo/Evented".split(" "),function(r,p,m,l,h,c,g,d,n){return r("dojox.calendar.RendererManager",[g,d],{owner:null,rendererPool:null,rendererList:null,itemToRenderer:null,constructor:function(a){this.rendererPool=[];this.rendererList=[];this.itemToRenderer={}},destroy:function(){for(;0<
this.rendererList.length;)this.destroyRenderer(this.rendererList.pop());for(var a in this._rendererPool){var b=this._rendererPool[a];if(b)for(;0<b.length;)this.destroyRenderer(b.pop())}},recycleItemRenderers:function(a){for(;0<this.rendererList.length;){var b=this.rendererList.pop();this.recycleRenderer(b,a)}this.itemToRenderer={}},getRenderers:function(a){if(null==a||null==a.id)return null;a=this.itemToRenderer[a.id];return null==a?null:a.concat()},createRenderer:function(a,b,c,d){if(null!=a&&null!=
b&&null!=c){var g=d=null,g=this.rendererPool[b];null!=g&&(d=g.shift());null==d?(g=new c,d={renderer:g,container:g.domNode,kind:b},this.emit("rendererCreated",{renderer:d,source:this.owner,item:a})):(g=d.renderer,this.emit("rendererReused",{renderer:g,source:this.owner,item:a}));g.owner=this.owner;g.set("rendererKind",b);g.set("item",a);b=this.itemToRenderer[a.id];null==b&&(this.itemToRenderer[a.id]=b=[]);b.push(d);this.rendererList.push(d);return d}return null},recycleRenderer:function(a,b){this.emit("rendererRecycled",
{renderer:a,source:this.owner});var d=this.rendererPool[a.kind];null==d?this.rendererPool[a.kind]=[a]:d.push(a);b&&a.container.parentNode.removeChild(a.container);c.set(a.container,"display","none");a.renderer.owner=null;a.renderer.set("item",null)},destroyRenderer:function(a){this.emit("rendererDestroyed",{renderer:a,source:this.owner});var b=a.renderer;b.destroy&&b.destroy();m.destroy(a.container)},destroyRenderersByKind:function(a){for(var b=[],c=0;c<this.rendererList.length;c++){var d=this.rendererList[c];
d.kind==a?this.destroyRenderer(d):b.push(d)}this.rendererList=b;if(a=this.rendererPool[a])for(;0<a.length;)this.destroyRenderer(a.pop())}})})},"webview/reliable/_enterpriseSchedule/utilityFunctions":function(){define(["dojo/_base/lang","dojo/date","dojo/json","rc/_base/util","../../util/globalConstants"],function(r,p,m,l,h){return{compareDateRepeats:function(c,g){var d=!0;return d=c.dom!==g.dom?!1:c.m!==g.m?!1:c.y===g.y},compareDayOfWeek:function(c,g){var d=!0;return d=c instanceof Array&&g instanceof
Array?l.arraysAreSame(c,g):c instanceof Array&&1===c.length?c[0]===g:g instanceof Array&&1===g.length?c===g[0]:c===g},compareEventOrder:function(c,g){var d=!1;if(c.startTime<g.startTime||c.startTime===g.startTime&&c.endTime<g.endTime)d=!0;return d},eventsAreEqual:function(c,g){var d=!0;c.startTime.setMilliseconds(0);g.startTime.setMilliseconds(0);c.endTime.setMilliseconds(0);g.endTime.setMilliseconds(0);return d=c.id!==g.id?!1:0!==p.compare(c.startTime,g.startTime,"time")||0!==p.compare(c.endTime,
g.endTime,"time")?!1:c.label!==g.label?!1:c.npriority!==g.npriority?!1:c.startValue!==g.startValue?!1:l.arraysAreSame(c.schedules,g.schedules)?this.isSameRepeat(c.repeat,g.repeat):!1},isSameRepeat:function(c,g){var d=!1;if(c.type!==g.type)d=!1;else switch(c.type){case h.REPEAT_WEEKLY:d=this.compareDayOfWeek(c.value,g.value);break;case h.REPEAT_EXCEPTION:d=this.compareDateRepeats(c.value,g.value);break;case h.REPEAT_RANGE:d=this.compareDateRepeats(c.value.start,g.value.start)&&this.compareDateRepeats(c.value.end,
g.value.end);break;case h.REPEAT_RECURRENCE:d=this.recurrenceRepeatsAreSame(c.value,g.value);break;case h.REPEAT_CALENDAR:d=this.terminatingRepeatsAreSame(c,g);break;default:console.error("utilityFunctions - isSameRepeat(): Repeat type not supported",c)}return d},recurrenceRepeatsAreSame:function(c,g){var d=!0;return d=c.m!==g.m?!1:c.wom!==g.wom?!1:this.compareDayOfWeek(c.dow,g.dow)},terminatingRepeatsAreSame:function(c,g){var d=!0,h=c.value instanceof Array&&g.value instanceof Array;if(!1===this.compareDateRepeats(c.start,
g.start))d=!1;else if(!1===this.compareDateRepeats(c.end,g.end))d=!1;else if(h)if(c.value.length!==g.value.length)d=!1;else for(c.value=c.value.sort(r.hitch(this,this._sortByJSONString)),g.value=g.value.sort(r.hitch(this,this._sortByJSONString)),h=0;h<c.value.length;++h){if(!1===this.isSameRepeat(c.value[h],g.value[h])){d=!1;break}}else d=c.value instanceof Array&&1===c.value.length?this.isSameRepeat(c.value[0],g.value):g.value instanceof Array&&1===g.value.length?this.isSameRepeat(c.value,g.value[0]):
this.isSameRepeat(c.value,g.value);return d},_sortByJSONString:function(c,g){var d=0;m.stringify(c)>m.stringify(g)?d=1:m.stringify(c)>m.stringify(g)&&(d=-1);return d}}})},"webview/reliable/_enterpriseSchedule/overriddenViews/VerticalRenderer":function(){define(["dojo/_base/lang","dojo/text!./templates/VerticalRenderer.html","dojox/calendar/VerticalRenderer","./_RendererMixin"],function(r,p,m){return r.extend(m,{templateString:p})})},"dojox/calendar/VerticalRenderer":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dijit/_TemplatedMixin","./_RendererMixin","dojo/text!./templates/VerticalRenderer.html"],function(r,p,m,l,h){return r("dojox.calendar.VerticalRenderer",[p,m,l],{templateString:h,postCreate:function(){this.inherited(arguments);this._applyAttributes()},_isElementVisible:function(c,g,d,h){var a;switch(c){case "startTimeLabel":a=this.item.startTime;if(this.item.allDay||this.owner.isStartOfDay(a))return!1;break;case "endTimeLabel":if(a=this.item.endTime,this.item.allDay||this.owner.isStartOfDay(a))return!1}return this.inherited(arguments)}})})},
"webview/reliable/_enterpriseSchedule/Calendar":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/date/locale dojo/dom-class dojo/has dojo/i18n!webview/nls/all dojo/on dojo/mouse dojo/query dojo/store/Memory dojo/store/Observable dojo/text!./templates/calendar.html dojo/when dojox/calendar/Calendar rc/_base/util webview/util/dateUtils webview/util/globalConstants webview/widget/WarningDialog webview/widget/WarningDialogEnums ./utilityFunctions ./calendarEvents/Calendar ./calendarEvents/Date ./calendarEvents/DateRange ./calendarEvents/Recurrence ./calendarEvents/Weekly ./EventManager ./overriddenViews/CalendarBase dijit/Menu dijit/MenuItem webview/reliable/_enterpriseSchedule/widget/CalendarToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J){return p("webview/reliable/_enterpriseSchedule/Calendar",[u,J],{columnViewProps:{_showSecondarySheet:!1},createOnGridClick:!0,currentSelectedItem:null,DEFAULT_VALUE:"default value",dirtyEvent:null,eventManager:null,isBlockGroup:!1,isDirty:!1,saveDialog:null,templateString:q,viewRange:{start:null,end:null},widgetsInTemplate:!0,_blockIndex:-1,_colorMap:null,_compactColumn:"dd EEE",_compactMatrix:"EEE",_contextMenuOpenConnection:null,
_currentWidth:0,_editableStore:null,_increments:0,_isSummaryView:!0,_isMonthView:!1,_maxCompactWidth:700,_previousState:!0,_renderedScheduleId:-1,_storeReady:!0,_summaryStore:null,postCreate:function(){this.inherited(arguments);this.saveDialog=new y({title:d.changeViewTitleText,type:v.types.save,text:d.changeViewText});this.set("createOnGridClick",!g("touch"));this.set("createItemFunc",m.hitch(this,this._onCreateEvent));this.set("cssClassFunc",m.hitch(this,this._setCSSClass));this.set("firstDayOfWeek",
0);this.set("isItemResizeEnabled",m.hitch(this,this._isEventResizable));this.set("isItemMoveEnabled",m.hitch(this,this._isEventMovable));this.set("isItemEditable",m.hitch(this,this._isEventEditable));this.own(l.after(this.columnView,"styleRowHeaderCell",m.hitch(this,function(a,b){var c=b[0],f="am",d=b[1];12<=d?f="pm":0===d&&(d=12);12<d&&(d-=12);c.innerHTML="\x3cspan\x3e"+d+":00 "+f+"\x3c/span\x3e"})));this.own(l.after(this.columnView,"styleColumnHeaderCell",m.hitch(this,function(a,b){if(this._currentWidth<
this._maxCompactWidth){var c=h.format(b[1],{selector:"date",datePattern:this._compactColumn});b[0].innerHTML="\x3cspan\x3e"+c+"\x3c/span\x3e"}})));this.own(l.after(this.matrixView,"styleColumnHeaderCell",m.hitch(this,function(a,b){if(this._currentWidth<this._maxCompactWidth){var c=h.format(b[1],{selector:"date",datePattern:this._compactMatrix});b[0].innerHTML="\x3cspan\x3e"+c+"\x3c/span\x3e"}})));this.own(n(this,"itemContextMenu",m.hitch(this,this._onContextClick)));this.own(n(this.contextMenuDelete,
"click",m.hitch(this,this._onContextDelete)));this.own(n(this,"rendererCreated",m.hitch(this,function(a){this.own(n(a.renderer.renderer,"blockChange",m.hitch(this,this.onParentBlock)))})));this.columnView.set("minHours",0);this.columnView.set("maxHours",24);this.columnView.set("timeSlotDuration",30);this.columnView.set("hourSize",50);this.columnView.set("columnHeaderDatePattern","dd EEEE");this.columnView.set("layoutPriorityFunction",m.hitch(this,this._sortByPriority));this.columnView.set("_sortItemsFunction",
m.hitch(this,this._sortByPriority));this.own(n(this,"itemEditBegin",m.hitch(this,function(a){null===this.currentSelectedItem&&(this.currentSelectedItem=m.clone(a.item._item))})),n(this,"itemClick",m.hitch(this,function(a){this.currentSelectedItem=m.clone(a.item)})));this.own(n(this.calendarToolbar,"doViewChange",m.hitch(this,this.doViewChange)),n(this.calendarToolbar,"viewRangeChange",m.hitch(this,this._onViewRangeChange)))},resize:function(a){this.inherited(arguments);this._currentWidth=a.w;a.w<
this._maxCompactWidth?c.add(this.domNode,"compact"):c.remove(this.domNode,"compact");this.currentView&&this.currentView.refreshRendering();this.calendarToolbar.resize(a)},_onViewRangeChange:function(a){this.set("date",null);this.set("startDate",null);this.set("endDate",null);this.viewRange=a;"month"===this.dateInterval?(this.set("startDate",a.start),this.set("endDate",a.end)):this.set("date",a.start);this.onViewRangeChange(this.viewRange)},onViewRangeChange:function(a){},matrixViewRowHeaderClick:function(a){this.set("dateInterval",
"week");this.set("dateIntervalSteps",1);this.set("date",a.date)},_onNavigateBlocks:function(a){this.onNavigateBlocks(a)},onNavigateBlocks:function(a){n.emit(this,"navigateBlocks",a);return a},onParentBlock:function(a,b){n.emit(this,"parentBlock",a,b);return a},disable:function(a){a||this.set("selectionMode","none");this.set("editable",!1)},enable:function(){rc.session.isPrivate()&&rc.session.canEditEnterprise()&&(this.set("selectionMode","single"),this.set("editable",!0))},_navigate:function(a){var b=
this.dateModule,c=this.get("dateInterval");if("month"===c){var c=this.get("startDate"),f=this.get("endDate");1!==c.getDate()&&(c.setDate(1),c.setMonth(c.getMonth()+1));c.setMonth(c.getMonth()+a);f=new Date(c);f.setMonth(f.getMonth()+1);this.set("startDate",c);this.set("endDate",f)}else if(f=this.get("date"),null==f){var c=this.get("startDate"),f=this.get("endDate"),d=b.difference(c,f,"day");1==a?(f=b.add(f,"day",1),this.set("startDate",f),this.set("endDate",b.add(f,"day",d))):(c=b.add(c,"day",-1),
this.set("startDate",b.add(c,"day",-d)),this.set("endDate",c))}else c=this.get("dateInterval"),d=this.get("dateIntervalSteps"),this.set("date",b.add(f,c,a*d))},doViewChange:function(a){if(this.isDirty)if("summary"!==a.toLowerCase()){this.saveDialog.open();var b=this.saveDialog.on("close",m.hitch(this,function(c){switch(c){case v.returnValues.oneOrYes:this.onTriggerSave();this._changeView(a);this.setDirty(!1);break;case v.returnValues.allOrNo:this.setDirty(!1);this.onMakeClean();this._changeView(a);
break;case v.returnValues.none:break;default:console.error(this.declaredClass+" - _navigation(): Invalid Choice",c)}b.remove()}));this.own(b)}else this.onTriggerSave();else this._changeView(a)},_changeView:function(a){if("today"===a||"day"===a||"week"===a)this._previousState&&!this._isSummaryView&&this._showSummaryView(),this.set("date",null),this.set("startDate",null),this.set("endDate",null);switch(a){case "previous":this.previousRange();break;case "next":this.nextRange();break;case "today":this.todayButtonClick();
break;case "day":this.dayButtonClick();break;case "week":this.weekButtonClick();break;case "month":this.monthButtonClick();break;case "summary":this._previousState=!this._previousState;this.setDirty(!1);this.onMakeClean();this._showSummaryView(!1);break;default:console.error("Calendar.js - _changeView(): Invalid button type",a)}},onTriggerSave:function(){n.emit(this,"triggerSave")},onMakeClean:function(){n.emit(this,"makeClean")},_isEventEditable:function(a,b){var c=!1,f=(new t({data:this.items})).get(a.id);
if(f){if(!this.isDirty||this._checkSameAsDirtyEvent(f))c=!0,c=this._checkPermission(f)?this._checkCalendarState(f)?this._checkForFromParent(f)?this._checkEventFromWebView(f):!1:!1:!1;f.editable=c;a.editable=c}return c},_checkSameAsDirtyEvent:function(a){return this.dirtyEvent&&a.eventId===this.dirtyEvent.eventId},_checkCalendarState:function(a){a=!0;if(this._isSummaryView||!this.editable)a=!1;return a},_checkEventFromWebView:function(a){var b=!0,c={2:function(a){return a.value.start.dom!==x.WILDCARD&&
a.value.start.m!==x.WILDCARD&&a.value.start.y!==x.WILDCARD&&a.value.end.dom!==x.WILDCARD&&a.value.end.m!==x.WILDCARD&&a.value.end.y!==x.WILDCARD},3:function(a){return a.value.wom===x.WILDCARD&&a.value.m===x.WILDCARD},4:function(a){return null!==a.start&&null!==a.end},5:function(){return!1}};"undefined"!==typeof c[a.repeatType]&&(b=c[a.repeatType](a.repeat));return b},_checkForFromParent:function(a){var b=!0;if(null!==a.blockId&&(!this.isBlockGroup||-1===a.blockId.indexOf(this._blockIndex))||null===
a.blockId&&Number(a.parentSchedule)!==Number(this._blockIndex))b=!1;return b},_checkPermission:function(a){var b=!0;if(!rc.session.canEditDefault()&&a.repeatType===x.REPEAT_WEEKLY||!rc.session.canEditException()&&a.repeatType!==x.REPEAT_WEEKLY)b=!1;return b},_isEventMovable:function(a,b){var c=z.isAllDay(a.startTime,a.endTime);a.moveEnabled=!(a.repeat.type===x.REPEAT_RANGE&&c);a.moveEnabled&&a.repeat.type===x.REPEAT_WEEKLY&&(a.moveEnabled=!1);return this.isItemEditable(a,b)&&a.moveEnabled},_isEventResizable:function(a,
b){a.resizeEnabled=!0;return this.isItemEditable(a,b)&&a.resizeEnabled},_showSummaryView:function(a,b){!0!==a&&(this._isSummaryView=!this._isSummaryView);var c=this._isSummaryView;this.calendarToolbar.toggleSummaryButton(!c);if(c)this.disable(),this._summaryStore?this._summaryStore.setData([]):this._summaryStore=new k(new t),this.eventManager.decodeSummary(this._colorMap).then(m.hitch(this,function(a){this._summaryStore.setData(a);this.set("store",this._summaryStore);this._setSummaryClass(!0)})),
this.columnView.set("percentOverlap",100);else{rc.session.canEditEnterprise()&&this.enable();var f=this.eventManager.decode(this._colorMap);if(this._editableStore)if(!a||b)this._editableStore.setData(f);else{var d=-1;"undefined"!==typeof f[0]&&(d=f[0].eventId);this._editableStore.query(function(a){return a.eventId===d||-1===a.eventId||"delete"===a.action}).forEach(m.hitch(this,function(a){this._editableStore.remove(a.id)}));for(var g=0;g<f.length;g++)this._editableStore.put(f[g])}else this._editableStore=
new k(new t({data:f}));this.set("store",this._editableStore);this._setSummaryClass(!1);this.columnView.set("percentOverlap",70)}if(!a)this.onChangeSummary(c)},_setSummaryClass:function(a){r.forEach(this.columnView.items,m.hitch(this,function(b){if(a)b.cssClass+=" summary";else{var c=b.cssClass.indexOf(" summary");-1!==c&&(b.cssClass=b.cssClass.substring(0,c))}}))},onChangeSummary:function(a){n.emit(this,"changeSummary",a);return a},_setViewRangeFromDate:function(a){this.calendarToolbar.setViewRange(a,
this.dateInterval)},_setViewRangeFromView:function(a,b,c){this.calendarToolbar.setViewRange(this.currentView.startDate,this.dateInterval,!1,c)},getScheduleInfo:function(){return{valueType:this.eventManager.schedule.valueType,defaultValue:this.eventManager.schedule.value,mnemonic:this.eventManager.schedule.mnemonic,defaultBlock:this.eventManager.schedule.id}},_onCreateEvent:function(b,c,f){if(this.editable&&a.isLeft(f)&&!this.isDirty){f=this.columnView;var d=this.dateModule;b==f?(b=this.floorDate(c,
"minute",f.timeSlotDuration),c=d.add(b,"minute",0===this._increments?f.timeSlotDuration:this._increments)):(b=this.floorToDay(c),c=d.add(b,"day",1));b=this.eventManager.onCreateEvent(b,c);this.setDirty(!0,b);return b}f&&w.stopEvent(f)},_onContextClick:function(a){this.editable?(w.stopEvent(a.triggerEvent),!1!==a.renderer.resizeEnabled&&!1!==a.renderer.moveEnabled&&(this.contextMenu._openMyself({target:a.renderer.domNode,coords:{x:a.triggerEvent.pageX,y:a.triggerEvent.pageY}}),null!==this._contextMenuOpenConnection&&
(this._contextMenuOpenConnection.remove(),this._contextMenuOpenConnection=null),this._contextMenuOpenConnection=l.after(this.contextMenu,"onClose",m.hitch(this,function(){window.setTimeout(m.hitch(this,this.enable),1E3)})))):w.stopEvent(a.triggerEvent)},_onContextDelete:function(){r.forEach(this.selectedItems,function(a){this.onContextDelete(a)},this)},onContextDelete:function(a){n.emit(this,"contextDelete",a);return a},_sortByPriority:function(a,b){var c=0;a.npriority<b.npriority?c=1:a.npriority>
b.npriority?c=-1:null!==a.index&&null!==b.index?a.index>b.index?c=1:a.index<b.index&&(c=-1):null!==a.index&&null===b.index?c=1:null===a.index&&null!==b.index?c=-1:null===a.index&&null===b.index?a.eventId>b.eventId?c=1:a.eventId<b.eventId&&(c=-1):(c=this.dateModule.compare(a.startTime,b.startTime),0===c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime)));return c},onChange:function(){},setCalendarActions:function(a,b){var c,f;for(c=0;c<b.repeat.value.length;c++){var d=!0;for(f=0;f<a.repeat.value.length;f++)if(A.isSameRepeat(b.repeat.value[c],
a.repeat.value[f])){d=!1;break}d&&(b.repeat.value[c].action="add")}for(c=0;c<a.repeat.value.length;c++){d=!0;for(f=0;f<b.repeat.value.length;f++)if(A.isSameRepeat(a.repeat.value[c],b.repeat.value[f])){d=!1;break}d&&(b.repeat.value.push(a.repeat.value[c]),b.repeat.value[b.repeat.value.length-1].action="delete")}},_put:function(a){if(a instanceof Array)return this.putInStore(a,0);this._storeReady=!1;if(a.repeat.type!==x.REPEAT_EXCEPTION){var b=new Date(a.startTime),c=new Date(a.endTime),f=new Date(b.getFullYear(),
b.getMonth(),b.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),0);this.selectedItem&&a.id===this.selectedItem.id&&a.repeat.type===x.REPEAT_RANGE&&this.selectedItem.originalStartTime?(a.startTime=new Date(this.selectedItem.originalStartTime.getFullYear(),this.selectedItem.originalStartTime.getMonth(),this.selectedItem.originalStartTime.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),0),a.endTime=new Date(this.selectedItem.originalStartTime.getFullYear(),this.selectedItem.originalStartTime.getMonth(),
this.selectedItem.originalStartTime.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),0)):f.getTime()<b.getTime()?(a.startTime=f,a.endTime=b):a.endTime=f}return this.putInStore([a],0)},putInStore:function(a,b){b===a.length?this._onStoreReady():f(this.store.put(a[b]),this.putInStore(a,++b))},add:function(a){var b=this.eventManager.buildEvent(a);a.summary=b instanceof Array?b[0].summary:b.summary;this._put(b)},edit:function(a){var b=m.clone(a);this._removeTerminatingEvents(a.eventId);var b=this.eventManager.buildEvent(b),
c=b instanceof Array;if(c)for(var f=0;f<b.length;++f)b[f].repeat.type!==x.REPEAT_CALENDAR&&b[f].repeat.type!==x.REPEAT_RANGE&&this._updateRepeats(b[f]);else b.repeat.type!==x.REPEAT_CALENDAR&&b.repeat.type!==x.REPEAT_RANGE&&this._updateRepeats(b);a.summary=c?b[0].summary:b.summary;this._put(b)},removeFromStore:function(a){try{this.store.remove(a.id)}catch(I){}},remove:function(a,b){try{var c=[],c="all"===b?this.getEventsByEventId(a.eventId):[a];r.forEach(c,function(a){a.action="delete";a.dirty="dirty";
a.endTime=a.startTime});this._put(c);r.forEach(c,function(a){this.updateRenderers(a)},this);this.onChange()}catch(L){}},_onStoreReady:function(){this._storeReady=!0;return this.onStoreReady()},onStoreReady:function(){n.emit(this,"storeReady")},render:function(a,b,c,f,d,g){a.schedule&&a.schedule instanceof Object&&(this.currency=a.currency,this.scheduleTree=a.scheduleTree,this.blockStore=c,this.domScheduleTree=f,this.isBlockGroup=a.isBlockGroup,this._increments=rc.session.canEditDefault()?0:a.minuteIncrement,
this.esData={esName:a.esName,esDataType:a.dataType,esStates:a.stateValues,esSummaryColours:d},this._render(a.schedule,b,d,g))},_removeTerminatingEvents:function(a){this.store.query(m.hitch(this,function(b){return b.repeat.type===x.REPEAT_CALENDAR&&b.eventId===a})).forEach(m.hitch(this,function(a){a.repeat={};this.store.put(a)}))},_render:function(a,b,c,f){this._setIncrements();this._blockIndex=Number(a.id);f&&this._reset();this._buildEventManager(a,this.esData,c);this._colorMap=b;b=a.id!==this._renderedScheduleId;
this._renderedScheduleId=a.id;this._showSummaryView(!0,b);this.calendarToolbar.updateLabel(a.label);var d=n(this.currentView,"renderersLayoutDone",m.hitch(this,function(a){a.hasOwnProperty("effectivePeriod")&&this._styleInactiveSchedules(a.effectivePeriod);d.remove()},a))},_setIncrements:function(){0<this._increments?(this.columnView.set("minDurationSteps",this._increments),this.columnView.set("minDurationUnit","minute")):this._increments=0},_styleInactiveSchedules:function(a){var b=new Date(-1*z.MAX_MILLISECONDS_FROM_EPOCH),
c=new Date(z.MAX_MILLISECONDS_FROM_EPOCH);a.start.m!==x.WILDCARD&&a.start.dom!==x.WILDCARD&&(a.start.y===x.WILDCARD&&(a.start.y=this.viewRange.start.getFullYear()-1900),b=z.bacnetDateToJSDate(a.start),b.setHours(0,0,0,0));a.end.m!==x.WILDCARD&&a.end.dom!==x.WILDCARD&&(a.end.y===x.WILDCARD&&(a.end.y=this.viewRange.end.getFullYear()-1900),c=z.bacnetDateToJSDate(a.end),c.setHours(23,59,59,99));a=[];var f=new Date;if(this.viewRange.start.getTime()<b.getTime())for(f=new Date(this.viewRange.start);f.getTime()<
b.getTime()&&f.getTime()<this.viewRange.end.getTime();)a.push(f.getDate()),f.setDate(f.getDate()+1);if(this.viewRange.end.getTime()>c.getTime()){c.getTime()<this.viewRange.start.getTime()?(f=new Date(this.viewRange.start),f.setHours(23,59,59,99)):f=new Date(c);for(;f.getTime()<this.viewRange.end.getTime();)a.push(f.getDate()),f.setDate(f.getDate()+1);c.getTime()<this.viewRange.start.getTime()&&(f=this.viewRange.start.getDate(),a.splice(0,a.indexOf(f)))}"columns"===this.currentView.viewKind?this._setColumnViewEffectivePeriod(a):
this._setMatrixViewEffectivePeriod(a,b,c)},_setColumnViewEffectivePeriod:function(a){for(var f=[],d=b(".dojoxCalendarColumnHeader table",this.currentView.header)[0],g=b("span",d),k="",d=0;d<g.length&&a.length;d++)g[d]&&(k=g[d].innerHTML.replace(/[^0-9]/gi,""),Number(k)===a[0]&&(f.push(d),a.splice(0,1)));a=b(".dojoxCalendarContainerTable td",this.currentView.scrollContainer);for(d=0;d<a.length;d++)c.toggle(a[d],"inactiveSchedule",-1!==f.indexOf(d))},_setMatrixViewEffectivePeriod:function(a,f,d){d=
[];var g=b("td span span",this.currentView.gridTable),k=0,h=28,l=new Date(this.viewRange.start);1!==l.getDate()?(k=l.getDate(),l.setDate(15),l.setMonth(l.getMonth()+2),l.setDate(0),h=l.getDate(),l.setDate(0),k=l.getDate()-k):(l.setMonth(l.getMonth()+1),l.setDate(0),h=l.getDate());var l=0,m="";if(f.getTime()>=this.viewRange.start.getTime())for(l=0;l<=k&&a.length;l++)g[l]&&(m=g[l].innerHTML.replace(/[^0-9]/gi,""),Number(m)===a[0]&&(d.push(l),a.splice(0,1)));for(;l<=h+k&&a.length;)g[l]&&(m=g[l].innerHTML.replace(/[^0-9]/gi,
""),Number(m)===a[0]&&(d.push(l),a.splice(0,1))),l++;for(;l<g.length&&a.length;)g[l]&&(m=g[l].innerHTML.replace(/[^0-9]/gi,""),Number(m)===a[0]&&(d.push(l),a.splice(0,1))),l++;a=b("td",this.currentView.gridTable);for(l=0;l<a.length;l++)c.toggle(a[l],"inactiveSchedule",-1!==d.indexOf(l))},_updateRepeats:function(a){this.store.query({eventId:a.eventId}).forEach(function(b){b.id!==a.id&&(b.repeat=a.repeat)})},_reset:function(){this._schedule=null;this.store&&this.store.setData([]);if(this.items&&this.items.length)for(var a=
this.items.length-1;0<=a;--a)-1===this.items[a].eventId&&this.items.splice(a,1)},encode:function(){var a=this.getEventsByRepeatType();return this.eventManager.groupedEncode(a)},_buildEventManager:function(a,b,c){this.viewRange=this.calendarToolbar.getCurrentDateRange();this.eventManager?this.eventManager.reset(a,m.clone(this.viewRange),b,c):(l.after(this,"_applyViewChange",m.hitch(this,this._setViewRangeFromView),!0),this.eventManager=new H({schedule:a,viewRange:this.viewRange,esData:b,summaryColours:c}))},
getAllDirtyEvents:function(){var a=this.store.query({dirty:"dirty"}),b=this.getMergedEvents(),c=[];r.forEach(a,m.hitch(this,function(a){this._inArray(a,c)||-1===a.eventId&&"delete"===a.action||c.push(a);a=this.getUniqueIndexFromEvent(a);r.forEach(b[a],m.hitch(this,function(a){this._inArray(a,c)||-1===a.eventId&&"delete"===a.action||c.push(a)}))}));var f={};r.forEach(c,m.hitch(this,function(a){if((a.repeat.type!==x.REPEAT_EXCEPTION||a.repeat.value.y!==x.WILDCARD||a.repeat.value.m!==x.WILDCARD||a.repeat.value.dom!==
x.WILDCARD)&&a.repeat.type!==x.REPEAT_RANGE){var b=this.getUniqueIndexFromEvent(a);f[b]||(f[b]={eventArray:[],hasMerged:!1});a.dontMerge||f[b].eventArray.push(a)}}));for(var d in f)1<f[d].eventArray.length&&f[d].eventArray[0].repeat.type===x.REPEAT_WEEKLY&&this._dirtyDefaultEvents(f[d].eventArray);var g=[];r.forEach(c,m.hitch(this,function(a){"clean"!==a.dirty&&g.push(a)}));return g},_inArray:function(a,b){for(var c=0;c<b.length;c++)if(b[c].action===a.action&&b[c].startTime===a.startTime&&b[c].endTime===
a.endTime&&b[c].startValue===a.startValue&&b[c].endValue===a.endValue)return!0;return!1},areEqual:function(a,b){var c=!1;a.repeat.type===b.repeat.type&&a.startTime.toTimeString()===b.startTime.toTimeString()&&(c=this.getUniqueIndexFromEvent(a)===this.getUniqueIndexFromEvent(a));return c},getUniqueIndexFromEvent:function(a,b){var c,f=null,d=a.label,g=17,g=void 0===a.npriority?"high"===a.priority?2:9:a.npriority;b&&(d=b);if(void 0!==a.repeat.type)switch(a.repeat.type){case x.REPEAT_WEEKLY:f=new F({summaryColours:this.esData.esSummaryColours});
c=a.repeat.value;a.repeat.value instanceof Array&&1==a.repeat.value.length&&(c=a.repeat.value[0]);break;case x.REPEAT_EXCEPTION:f=new E({summaryColours:this.esData.esSummaryColours});c=f.getUniqueIndex(a.repeat.value.y,a.repeat.value.m,a.repeat.value.dom,d,a.schedules,a.blockId,g);break;case x.REPEAT_RANGE:f=new B({summaryColours:this.esData.esSummaryColours});c=f.getUniqueIndex(a.repeat.value.start.y,a.repeat.value.start.m,a.repeat.value.start.dom,d,a.schedules,a.blockId,g);c^=f.getUniqueIndex(a.repeat.value.end.y,
a.repeat.value.end.m,a.repeat.value.end.dom,d,a.schedules,a.blockId,g);break;case x.REPEAT_RECURRENCE:f=new D({summaryColours:this.esData.esSummaryColours});c=f.getUniqueIndex(a.repeat.value.m,a.repeat.value.wom,a.repeat.value.dow,d,a.schedules,a.blockId,g);break;case x.REPEAT_CALENDAR:f=new C({summaryColours:this.esData.esSummaryColours});c=f.getUniqueIndex(a);break;default:console.error(this.declaredClass+" - getUniqueIndexFromEvent: Invalid Repeat Type",a.repeat.type)}return c},getEventsByRepeatType:function(){var a=
this.getAllDirtyEvents(),b={repeatWeekly:[],repeatDate:[],repeatDateRange:[],repeatRecurrence:[],repeatCalendar:[],repeatOverride:[]};r.forEach(a,m.hitch(this,function(a){switch(a.repeat.type){case x.REPEAT_WEEKLY:b.repeatWeekly.push(a);break;case x.REPEAT_EXCEPTION:b.repeatDate.push(a);break;case x.REPEAT_RANGE:b.repeatDateRange.push(a);break;case x.REPEAT_RECURRENCE:b.repeatRecurrence.push(a);break;case x.REPEAT_CALENDAR:b.repeatCalendar.push(a);break;case x.REPEAT_OVERRIDE:b.repeatOverride.push(a);
break;default:console.error("Calendar.js - getEventsByRepeatType: Invalid Repeat Type",a.repeat.type)}}),this);return b},getMergedEvents:function(){var a={};r.forEach(this.store.data,m.hitch(this,function(b){var c=this.getUniqueIndexFromEvent(b);if(void 0!==c){a[c]||(a[c]=[]);if(!1===r.some(a[c],m.hitch(this,function(a){return this.areEqual(a,b)})))a[c].push(b);else if("delete"===b.action)for(var f=0;f<a[c].length;f++)if(1==this.areEqual(a[c][f],b)){a[c][f]=b;break}if(!b.dontMerge)for(var d=this.store.query({eventId:b.eventId}),
f=0;f<d.length;f++)this.getUniqueIndexFromEvent(d[f])===c||d[f].dontMerge||!1!==this.areEqual(b,d[f])||a[c].push(d[f])}}));return a},getEventsByUniqueIdx:function(a,b,c){c=this.store.query({eventId:c});var f=[];r.forEach(c,m.hitch(this,function(c){c.repeat.type===b&&this.getUniqueIndexFromEvent(c)===a&&f.push(c)}));return f},getEventsByEventId:function(a){return this.store.query({eventId:a})},_dirtyDefaultEvents:function(a){for(var b=0;b<a.length;++b)a[b].dirty="dirty"},_setCSSClass:function(a){a=
a.color?a.color:a.summaryColor;var b="whiteFont";try{var c=parseInt(a.substr(1,2),16),f=parseInt(a.substr(3,2),16),d=parseInt(a.substr(5,2),16),b=128<=.2126*c+.7152*f+.0722*d?"blackFont":"whiteFont"}catch(O){}return b},onItemClick:function(a){this._isMonthView&&(this._setDateAttr(a.item.startTime),this.calendarToolbar.doViewChange("day"),this._isMonthView=!1)},setDirty:function(a,b){this.dirtyEvent=(this.isDirty=a)?b:null},destroy:function(){this.inherited(arguments);null!==this._contextMenuOpenConnection&&
(this._contextMenuOpenConnection.remove(),this._contextMenuOpenConnection=null)}})})},"dojox/calendar/Calendar":function(){define("dojo/_base/declare dojo/_base/lang ./CalendarBase ./ColumnView ./ColumnViewSecondarySheet ./VerticalRenderer ./DecorationRenderer ./MatrixView ./HorizontalRenderer ./LabelRenderer ./ExpandRenderer ./Keyboard ./Mouse dojo/text!./templates/Calendar.html dijit/form/Button dijit/Toolbar dijit/ToolbarSeparator".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return r("dojox.calendar.Calendar",
m,{templateString:q,_createDefaultViews:function(){var f=r([h,t,k]),f=r([l,t,k])(p.mixin({secondarySheetClass:f,verticalRenderer:c,horizontalRenderer:n,expandRenderer:b,horizontalDecorationRenderer:g,verticalDecorationRenderer:g},this.columnViewProps)),m=r([d,t,k])(p.mixin({horizontalRenderer:n,horizontalDecorationRenderer:g,labelRenderer:a,expandRenderer:b},this.matrixViewProps));this.columnView=f;this.matrixView=m;f=[f,m];this.installDefaultViewsActions(f);return f},installDefaultViewsActions:function(a){this.matrixView.on("rowHeaderClick",
p.hitch(this,this.matrixViewRowHeaderClick));this.columnView.on("columnHeaderClick",p.hitch(this,this.columnViewColumnHeaderClick))}})})},"dojox/calendar/CalendarBase":function(){define("dojo/_base/declare dojo/_base/sniff dojo/_base/event dojo/_base/lang dojo/_base/array dojo/cldr/supplemental dojo/dom dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/date dojo/date/locale dojo/_base/fx dojo/fx dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./StoreMixin ./StoreManager dojox/widget/_Invalidating dojox/widget/Selection ./time dojo/i18n!./nls/buttons".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B){return r("dojox.calendar.CalendarBase",[w,z,x,y,A,C],{baseClass:"dojoxCalendar",datePackage:t,startDate:null,endDate:null,date:null,minDate:null,maxDate:null,dateInterval:"week",dateIntervalSteps:1,viewContainer:null,firstDayOfWeek:-1,formatItemTimeFunc:null,editable:!0,moveEnabled:!0,resizeEnabled:!0,columnView:null,matrixView:null,columnViewProps:null,matrixViewProps:null,createOnGridClick:!1,createItemFunc:null,currentView:null,_currentViewIndex:-1,
views:null,_calendar:"gregorian",constructor:function(a){this.views=[];this.invalidatingProperties="store items startDate endDate views date minDate maxDate dateInterval dateIntervalSteps firstDayOfWeek".split(" ");a=a||{};this._calendar=a.datePackage?a.datePackage.substr(a.datePackage.lastIndexOf(".")+1):this._calendar;this.dateModule=a.datePackage?l.getObject(a.datePackage,!1):t;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?l.getObject(a.datePackage+".locale",
!1):k;this.invalidateRendering();this.storeManager=new v({owner:this,_ownerItemsProperty:"items"});this.storeManager.on("layoutInvalidated",l.hitch(this,this._refreshItemsRendering));this.storeManager.on("renderersInvalidated",l.hitch(this,this._updateRenderers));this.storeManager.on("dataLoaded",l.hitch(this,function(a){this.set("items",a)}));this.decorationStoreManager=new v({owner:this,_ownerItemsProperty:"decorationItems"});this.decorationStoreManager.on("layoutInvalidated",l.hitch(this,this._refreshDecorationItemsRendering));
this.decorationStoreManager.on("dataLoaded",l.hitch(this,function(a){this.set("decorationItems",a)}))},buildRendering:function(){this.inherited(arguments);null!=this.views&&0!=this.views.length||this.set("views",this._createDefaultViews())},_applyAttributes:function(){this._applyAttr=!0;this.inherited(arguments);delete this._applyAttr},_setStartDateAttr:function(a){this._set("startDate",a);this._startDateChanged=this._timeRangeInvalidated=!0},_setEndDateAttr:function(a){this._set("endDate",a);this._endDateChanged=
this._timeRangeInvalidated=!0},_setDateAttr:function(a){this._set("date",a);this._dateChanged=this._timeRangeInvalidated=!0},_setDateIntervalAttr:function(a){this._set("dateInterval",a);this._timeRangeInvalidated=!0},_setDateIntervalStepsAttr:function(a){this._set("dateIntervalSteps",a);this._timeRangeInvalidated=!0},_setFirstDayOfWeekAttr:function(a){this._set("firstDayOfWeek",a);null!=this.get("date")&&"week"==this.get("dateInterval")&&(this._timeRangeInvalidated=!0)},_setTextDirAttr:function(a){h.forEach(this.views,
function(b){b.set("textDir",a)})},refreshRendering:function(){this.inherited(arguments);this._validateProperties()},_refreshItemsRendering:function(){this.currentView&&this.currentView._refreshItemsRendering()},_updateRenderers:function(a){this.currentView&&this.currentView.updateRenderers(a)},_refreshDecorationItemsRendering:function(){this.currentView&&this.currentView._refreshDecorationItemsRendering()},resize:function(a){a&&b.setMarginBox(this.domNode,a);this.currentView&&this.currentView.resize()},
_validateProperties:function(){var a=this.dateModule,b=this.get("startDate"),c=this.get("endDate"),f=this.get("date");(-1>this.firstDayOfWeek||6<this.firstDayOfWeek)&&this._set("firstDayOfWeek",0);var d=this.get("minDate"),g=this.get("maxDate");d&&g&&0<a.compare(d,g)&&(this._set("minDate",g),this._set("maxDate",d));null!=f||null==b&&null==c?(null==this.date&&(this._set("date",new this.dateClassObj),this._timeRangeInvalidated=!0),b=this.get("dateInterval"),"day"!=b&&"week"!=b&&"month"!=b&&(this._set("dateInterval",
"day"),this._timeRangeInvalidated=!0),b=this.get("dateIntervalSteps"),l.isString(b)&&(b=parseInt(b),this._set("dateIntervalSteps",b)),0>=b&&(this.set("dateIntervalSteps",1),this._timeRangeInvalidated=!0)):(null==b&&(b=new this.dateClassObj,this._set("startDate",b),this._timeRangeInvalidated=!0),null==c&&(c=new this.dateClassObj,this._set("endDate",c),this._timeRangeInvalidated=!0),0<a.compare(b,c)&&(c=a.add(b,"day",1),this._set("endDate",c),this._timeRangeInvalidated=!0));if(this._timeRangeInvalidated)if(this._timeRangeInvalidated=
!1,b=this.computeTimeInterval(),null==this._timeInterval||0!=a.compare(this._timeInterval[0],b[0])||0!=a.compare(this._timeInterval[1],b[1])){if(this._dateChanged)this._lastValidDate=this.get("date"),this._dateChanged=!1;else if(this._startDateChanged||this._endDateChanged)this._lastValidStartDate=this.get("startDate"),this._lastValidEndDate=this.get("endDate"),this._endDateChanged=this._startDateChanged=!1;this.onTimeIntervalChange({oldStartTime:null==this._timeInterval?null:this._timeInterval[0],
oldEndTime:null==this._timeInterval?null:this._timeInterval[1],startTime:b[0],endTime:b[1]});this._timeInterval=b;a=this.dateModule.difference(this._timeInterval[0],this._timeInterval[1],"day");c=this._computeCurrentView(b[0],b[1],a);f=h.indexOf(this.views,c);null!=c&&-1!=f&&this._performViewTransition(c,f,b,a)}else if(this._dateChanged)this._dateChanged=!1,null!=this.lastValidDate&&this._set("date",this.lastValidDate);else if(this._startDateChanged||this._endDateChanged)this._endDateChanged=this._startDateChanged=
!1,this._set("startDate",this._lastValidStartDate),this._set("endDate",this._lastValidEndDate)},_performViewTransition:function(a,b,c,f){var d=this.currentView;if(this.animateRange&&(!p("ie")||8<p("ie")))if(d){d.beforeDeactivate();var g=this.isLeftToRight(),k="left"==this._animRangeInDir||null==this._animRangeInDir,h="left"==this._animRangeOutDir||null==this._animRangeOutDir;this._animateRange(this.currentView.domNode,h&&g,!1,0,h?-100:100,l.hitch(this,function(){d.afterDeactivate();a.beforeActivate();
this.animateRangeTimer=setTimeout(l.hitch(this,function(){this._applyViewChange(a,b,c,f);this._animateRange(this.currentView.domNode,k&&g,!0,k?-100:100,0,function(){a.afterActivate()});this._animRangeOutDir=this._animRangeInDir=null}),100)}))}else a.beforeActivate(),this._applyViewChange(a,b,c,f),a.afterActivate();else d&&d.beforeDeactivate(),a.beforeActivate(),this._applyViewChange(a,b,c,f),d&&d.afterDeactivate(),a.afterActivate()},onViewConfigurationChange:function(a){},_applyViewChange:function(a,
b,c,f){this._configureView(a,b,c,f);this.onViewConfigurationChange(a);b!=this._currentViewIndex&&(null==this.currentView?(a.set("items",this.items),a.set("decorationItems",this.decorationItems),this.set("currentView",a)):null==this.items||0==this.items.length?(this.set("currentView",a),this.animateRange&&(!p("ie")||8<p("ie"))&&n.set(this.currentView.domNode,"opacity",0),a.set("items",this.items),a.set("decorationItems",this.decorationItems)):(this.currentView=a,a.set("items",this.items),a.set("decorationItems",
this.decorationItems),this.set("currentView",a),this.animateRange&&(!p("ie")||8<p("ie"))&&n.set(this.currentView.domNode,"opacity",0)))},_timeInterval:null,computeTimeInterval:function(){var a=this.get("date"),b=this.get("minDate"),c=this.get("maxDate"),f=this.dateModule;if(null==a){var a=this.get("startDate"),d=f.add(this.get("endDate"),"day",1);if(null!=b||null!=c){var g=this.dateModule.difference(a,d,"day");0<f.compare(b,a)&&(a=b,d=f.add(a,"day",g));0>f.compare(c,d)&&(d=c,a=f.add(d,"day",-g));
0<f.compare(b,a)&&(a=b,d=c)}return[this.floorToDay(a),this.floorToDay(d)]}a=this._computeTimeIntervalImpl(a);null!=b&&(b=this._computeTimeIntervalImpl(b),0<f.compare(b[0],a[0])&&(a=b));null!=c&&(c=this._computeTimeIntervalImpl(c),0>f.compare(c[1],a[1])&&(a=c));return a},_computeTimeIntervalImpl:function(a){var b=this.dateModule;a=this.floorToDay(a);var c=this.get("dateInterval"),f=this.get("dateIntervalSteps");switch(c){case "day":b=b.add(a,"day",f);break;case "week":a=this.floorToWeek(a);b=b.add(a,
"week",f);break;case "month":a.setDate(1);b=b.add(a,"month",f);break;default:b=b.add(a,"day",1)}return[a,b]},onTimeIntervalChange:function(a){},views:null,_setViewsAttr:function(a){if(!this._applyAttr)for(var b=0;b<this.views.length;b++)this._onViewRemoved(this.views[b]);if(null!=a)for(b=0;b<a.length;b++)this._onViewAdded(a[b]);this._set("views",null==a?[]:a.concat())},_getViewsAttr:function(){return this.views.concat()},_createDefaultViews:function(){},addView:function(a,b){if(0>=b||b>this.views.length)b=
this.views.length;this.views.splice(b,a);this._onViewAdded(a)},removeView:function(a){0>index||index>=this.views.length||(this._onViewRemoved(this.views[index]),this.views.splice(index,1))},_onViewAdded:function(b){b.owner=this;b.buttonContainer=this.buttonContainer;b._calendar=this._calendar;b.datePackage=this.datePackage;b.dateModule=this.dateModule;b.dateClassObj=this.dateClassObj;b.dateLocaleModule=this.dateLocaleModule;n.set(b.domNode,"display","none");d.add(b.domNode,"view");a.place(b.domNode,
this.viewContainer);this.onViewAdded(b)},onViewAdded:function(a){},_onViewRemoved:function(a){a.owner=null;a.buttonContainer=null;d.remove(a.domNode,"view");this.viewContainer.removeChild(a.domNode);this.onViewRemoved(a)},onViewRemoved:function(a){},_setCurrentViewAttr:function(a){var b=h.indexOf(this.views,a);if(-1!=b){var c=this.get("currentView");this._currentViewIndex=b;this._set("currentView",a);this._showView(c,a);this.onCurrentViewChange({oldView:c,newView:a})}},_getCurrentViewAttr:function(){return this.views[this._currentViewIndex]},
onCurrentViewChange:function(a){},_configureView:function(a,b,c,f){b=this.dateModule;if("columns"==a.viewKind)a.set("startDate",c[0]),a.set("columnCount",f);else if("matrix"==a.viewKind)if(7<f){var d=this.floorToWeek(c[0]);f=this.floorToWeek(c[1]);0!=b.compare(f,c[1])&&(f=this.dateModule.add(f,"week",1));f=this.dateModule.difference(d,f,"day");a.set("startDate",d);a.set("columnCount",7);a.set("rowCount",Math.ceil(f/7));a.set("refStartTime",c[0]);a.set("refEndTime",c[1])}else a.set("startDate",c[0]),
a.set("columnCount",f),a.set("rowCount",1),a.set("refStartTime",null),a.set("refEndTime",null)},_computeCurrentView:function(a,b,c){return 7>=c?this.columnView:this.matrixView},matrixViewRowHeaderClick:function(a){var b=this.matrixView.getExpandedRowIndex();if(b==a.index)this.matrixView.collapseRow();else if(-1==b)this.matrixView.expandRow(a.index);else{var c=this.matrixView.on("expandAnimationEnd",l.hitch(this,function(){c.remove();this.matrixView.expandRow(a.index)}));this.matrixView.collapseRow()}},
columnViewColumnHeaderClick:function(a){0==this.dateModule.compare(a.date,this._timeInterval[0])&&"day"==this.dateInterval&&1==this.dateIntervalSteps?this.set("dateInterval","week"):(this.set("date",a.date),this.set("dateInterval","day"),this.set("dateIntervalSteps",1))},viewChangeDuration:0,_showView:function(a,b){null!=a&&n.set(a.domNode,"display","none");null!=b&&(n.set(b.domNode,"display","block"),b.resize(),(!p("ie")||7<p("ie"))&&n.set(b.domNode,"opacity","1"))},_setItemsAttr:function(a){this._set("items",
a);this.currentView&&(this.currentView.set("items",a),this._isEditing||this.currentView.invalidateRendering())},_setDecorationItemsAttr:function(a){this._set("decorationItems",a);this.currentView&&(this.currentView.set("decorationItems",a),this.currentView.invalidateRendering())},_setDecorationStoreAttr:function(a){this._set("decorationStore",a);this.decorationStore=a;this.decorationStoreManager.set("store",a)},floorToDay:function(a,b){return E.floorToDay(a,b,this.dateClassObj)},floorToWeek:function(a){return E.floorToWeek(a,
this.dateClassObj,this.dateModule,this.firstDayOfWeek,this.locale)},newDate:function(a){return E.newDate(a,this.dateClassObj)},isToday:function(a){return E.isToday(a,this.dateClassObj)},isStartOfDay:function(a){return E.isStartOfDay(a,this.dateClassObj,this.dateModule)},floorDate:function(a,b,c,f){return E.floor(a,b,c,f,this.classFuncObj)},isOverlapping:function(a,b,c,f,d,g){return E.isOverlapping(a,b,c,f,d,g)},animateRange:!0,animationRangeDuration:400,_animateRange:function(a,b,c,d,g,k){this.animateRangeTimer&&
(clearTimeout(this.animateRangeTimer),delete this.animateRangeTimer);b=c?q.fadeIn:q.fadeOut;n.set(a,{left:d+"px",right:-d+"px"});f.combine([q.animateProperty({node:a,properties:{left:g,right:-g},duration:this.animationRangeDuration/2,onEnd:k}),b({node:a,duration:this.animationRangeDuration/2})]).play()},_animRangeOutDir:null,_animRangeOutDir:null,nextRange:function(){this._animRangeOutDir="left";this._animRangeInDir="right";this._navigate(1)},previousRange:function(){this._animRangeOutDir="right";
this._animRangeInDir="left";this._navigate(-1)},_navigate:function(a){var b=this.get("date"),c=this.dateModule;if(null==b){var b=this.get("startDate"),f=this.get("endDate"),d=c.difference(b,f,"day");1==a?(f=c.add(f,"day",1),this.set("startDate",f),this.set("endDate",c.add(f,"day",d))):(b=c.add(b,"day",-1),this.set("startDate",c.add(b,"day",-d)),this.set("endDate",b))}else f=this.get("dateInterval"),d=this.get("dateIntervalSteps"),this.set("date",c.add(b,f,a*d))},goToday:function(){this.set("date",
this.floorToDay(new this.dateClassObj,!0));this.set("dateInterval","day");this.set("dateIntervalSteps",1)},postCreate:function(){this.inherited(arguments);this.configureButtons()},configureButtons:function(){var a=!this.isLeftToRight();this.previousButton&&(this.previousButton.set("label",B[a?"nextButton":"previousButton"]),this.own(u(this.previousButton,"click",l.hitch(this,this.previousRange))));this.nextButton&&(this.nextButton.set("label",B[a?"previousButton":"nextButton"]),this.own(u(this.nextButton,
"click",l.hitch(this,this.nextRange))));a&&this.previousButton&&this.nextButton&&(a=this.previousButton,this.previousButton=this.nextButton,this.nextButton=a);this.todayButton&&(this.todayButton.set("label",B.todayButton),this.own(u(this.todayButton,"click",l.hitch(this,this.todayButtonClick))));this.dayButton&&(this.dayButton.set("label",B.dayButton),this.own(u(this.dayButton,"click",l.hitch(this,this.dayButtonClick))));this.weekButton&&(this.weekButton.set("label",B.weekButton),this.own(u(this.weekButton,
"click",l.hitch(this,this.weekButtonClick))));this.fourDaysButton&&(this.fourDaysButton.set("label",B.fourDaysButton),this.own(u(this.fourDaysButton,"click",l.hitch(this,this.fourDaysButtonClick))));this.monthButton&&(this.monthButton.set("label",B.monthButton),this.own(u(this.monthButton,"click",l.hitch(this,this.monthButtonClick))))},todayButtonClick:function(a){this.goToday()},dayButtonClick:function(a){null==this.get("date")&&this.set("date",this.floorToDay(new this.dateClassObj,!0));this.set("dateInterval",
"day");this.set("dateIntervalSteps",1)},weekButtonClick:function(a){this.set("dateInterval","week");this.set("dateIntervalSteps",1)},fourDaysButtonClick:function(a){this.set("dateInterval","day");this.set("dateIntervalSteps",4)},monthButtonClick:function(a){this.set("dateInterval","month");this.set("dateIntervalSteps",1)},updateRenderers:function(a,b){this.currentView&&this.currentView.updateRenderers(a,b)},getIdentity:function(a){return a?a.id:null},_setHoveredItem:function(a,b){if(this.hoveredItem&&
a&&this.hoveredItem.id!=a.id||null==a||null==this.hoveredItem){var c=this.hoveredItem;this.hoveredItem=a;this.updateRenderers([c,this.hoveredItem],!0);a&&b&&this.currentView._updateEditingCapabilities(a._item?a._item:a,b)}},hoveredItem:null,isItemHovered:function(a){return null!=this.hoveredItem&&this.hoveredItem.id==a.id},isItemEditable:function(a,b){return this.editable},isItemMoveEnabled:function(a,b){return this.isItemEditable(a,b)&&this.moveEnabled},isItemResizeEnabled:function(a,b){return this.isItemEditable(a,
b)&&this.resizeEnabled},onGridClick:function(a){},onGridDoubleClick:function(a){},onItemClick:function(a){},onItemDoubleClick:function(a){},onItemContextMenu:function(a){},onItemEditBegin:function(a){},onItemEditEnd:function(a){},onItemEditBeginGesture:function(a){},onItemEditMoveGesture:function(a){},onItemEditResizeGesture:function(a){},onItemEditEndGesture:function(a){},onItemRollOver:function(a){},onItemRollOut:function(a){},onColumnHeaderClick:function(a){},onRowHeaderClick:function(a){},onExpandRendererClick:function(a){},
_onRendererCreated:function(a){this.onRendererCreated(a)},onRendererCreated:function(a){},_onRendererRecycled:function(a){this.onRendererRecycled(a)},onRendererRecycled:function(a){},_onRendererReused:function(a){this.onRendererReused(a)},onRendererReused:function(a){},_onRendererDestroyed:function(a){this.onRendererDestroyed(a)},onRendererDestroyed:function(a){},_onRenderersLayoutDone:function(a){this.onRenderersLayoutDone(a)},onRenderersLayoutDone:function(a){}})})},"dojox/calendar/ColumnView":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/sniff dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/on dojo/date dojo/date/locale dojo/query ./SimpleColumnView dojo/text!./templates/ColumnView.html ./ColumnViewSecondarySheet".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){return p("dojox.calendar.ColumnView",u,{templateString:w,baseClass:"dojoxCalendarColumnView",secondarySheetClass:z,secondarySheetProps:null,headerPadding:3,_showSecondarySheet:!0,buildRendering:function(){this.inherited(arguments);if(this.secondarySheetNode){var a=l.mixin({owner:this},this.secondarySheetProps);this.secondarySheet=new this.secondarySheetClass(a,this.secondarySheetNode);this.secondarySheetNode=this.secondarySheet.domNode}},destroy:function(a){this.secondarySheet&&
this.secondarySheet.destroy(a);this.inherited(arguments)},_setVisibility:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet._setVisibility(a)},resize:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.resize()},invalidateLayout:function(){this._layoutRenderers(this.renderData);this.secondarySheet&&this.secondarySheet._layoutRenderers(this.secondarySheet.renderData)},onRowHeaderClick:function(a){},_setSubColumnsAttr:function(a){this.get("subColumns")!=
a&&(this._secondaryHeightInvalidated=!0);this._set("subColumns",a)},refreshRendering:function(b){this.inherited(arguments);if(this._secondaryHeightInvalidated){this._secondaryHeightInvalidated=!1;var c=a.getMarginBox(this.secondarySheetNode).h;this.resizeSecondarySheet(c)}b&&this.secondarySheet&&this.secondarySheet.refreshRendering(!0)},resizeSecondarySheet:function(b){if(this.secondarySheetNode){var c=a.getMarginBox(this.header).h;n.set(this.secondarySheetNode,"height",b+"px");this.secondarySheet._resizeHandler(null,
!0);b=b+c+this.headerPadding;this.subHeader&&this.subColumns&&(n.set(this.subHeader,"top",b+"px"),b+=a.getMarginBox(this.subHeader).h);n.set(this.scrollContainer,"top",b+"px");this.vScrollBar&&n.set(this.vScrollBar,"top",b+"px")}},updateRenderers:function(a,b){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.updateRenderers(a,b)},_setItemsAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("items",a)},_setDecorationItemsAttr:function(a){this.inherited(arguments);
this.secondarySheet&&this.secondarySheet.set("decorationItems",a)},_setStartDateAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("startDate",a)},_setColumnCountAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("columnCount",a)},_setHorizontalRendererAttr:function(a){this.secondarySheet&&this.secondarySheet.set("horizontalRenderer",a)},_getHorizontalRendererAttr:function(){return this.secondarySheet?this.secondarySheet.get("horizontalRenderer"):
null},_setHorizontalDecorationRendererAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("horizontalDecorationRenderer",a)},_getHorizontalRendererAttr:function(){return this.secondarySheet?this.secondarySheet.get("horizontalDecorationRenderer"):null},_setExpandRendererAttr:function(a){this.secondarySheet&&this.secondarySheet.set("expandRenderer",a)},_getExpandRendererAttr:function(){return this.secondarySheet?this.secondarySheet.get("expandRenderer"):null},_setTextDirAttr:function(a){this.secondarySheet.set("textDir",
a);this._set("textDir",a)},_defaultItemToRendererKindFunc:function(a){return a.allDay?null:"vertical"},getSecondarySheet:function(){return this.secondarySheet},_onGridTouchStart:function(a){this.inherited(arguments);this._doEndItemEditing(this.secondarySheet,"touch")},_onGridMouseDown:function(a){this.inherited(arguments);this._doEndItemEditing(this.secondarySheet,"mouse")},_configureScrollBar:function(a){this.inherited(arguments);if(this.secondarySheetNode){var b=this.isLeftToRight()?!0:"right"==
this.scrollBarRTLPosition;n.set(this.secondarySheetNode,b?"right":"left",a.scrollbarWidth+"px");n.set(this.secondarySheetNode,b?"left":"right","0");r.forEach(this.secondarySheet._hScrollNodes,function(b){d[a.hScrollBarEnabled?"add":"remove"](b.parentNode,"dojoxCalendarHorizontalScroll")},this)}},_configureHScrollDomNodes:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet._configureHScrollDomNodes&&this.secondarySheet._configureHScrollDomNodes(a)},_setHScrollPosition:function(a){this.inherited(arguments);
this.secondarySheet&&this.secondarySheet._setHScrollPosition(a)},_refreshItemsRendering:function(){this.inherited(arguments);if(this.secondarySheet){var a=this.secondarySheet.renderData;this.secondarySheet._computeVisibleItems(a);this.secondarySheet._layoutRenderers(a)}},_layoutRenderers:function(a){this.secondarySheet._domReady||(this.secondarySheet._domReady=!0,this.secondarySheet._layoutRenderers(this.secondarySheet.renderData));this.inherited(arguments)},_layoutDecorationRenderers:function(a){this.secondarySheet._decDomReady||
(this.secondarySheet._decDomReady=!0,this.secondarySheet._layoutDecorationRenderers(this.secondarySheet.renderData));this.inherited(arguments)},invalidateRendering:function(){this.secondarySheet&&this.secondarySheet.invalidateRendering();this.inherited(arguments)}})})},"dojox/calendar/SimpleColumnView":function(){define("./ViewBase dijit/_TemplatedMixin ./_ScrollBarBase dojo/text!./templates/ColumnView.html dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/array dojo/_base/sniff dojo/_base/fx dojo/_base/html dojo/on dojo/dom dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/mouse dojo/query dojox/html/metrics".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y){return h("dojox.calendar.SimpleColumnView",[r,p],{baseClass:"dojoxCalendarColumnView",templateString:l,viewKind:"columns",_setTabIndexAttr:"domNode",renderData:null,startDate:null,columnCount:7,subColumns:null,minHours:8,maxHours:18,hourSize:100,timeSlotDuration:15,rowHeaderGridSlotDuration:60,rowHeaderLabelSlotDuration:60,rowHeaderLabelOffset:2,rowHeaderFirstLabelOffset:2,verticalRenderer:null,verticalDecorationRenderer:null,minColumnWidth:-1,percentOverlap:70,
horizontalGap:4,_showSecondarySheet:!1,_columnHeaderHandlers:null,constructor:function(){this.invalidatingProperties="columnCount startDate minHours maxHours hourSize verticalRenderer verticalDecorationRenderer rowHeaderTimePattern columnHeaderDatePattern timeSlotDuration rowHeaderGridSlotDuration rowHeaderLabelSlotDuration rowHeaderLabelOffset rowHeaderFirstLabelOffset percentOverlap horizontalGap scrollBarRTLPosition itemToRendererKindFunc layoutPriorityFunction formatItemTimeFunc textDir items subColumns minColumnWidth".split(" ");
this._columnHeaderHandlers=[]},destroy:function(a){this._cleanupColumnHeader();this.scrollBar&&this.scrollBar.destroy(a);this.inherited(arguments)},_scrollBar_onScroll:function(a){this._setScrollPosition(a)},_hscrollBar_onScroll:function(a){this._setHScrollPosition(a)},buildRendering:function(){this.inherited(arguments);this.vScrollBar&&(this.scrollBar=new m({content:this.vScrollBarContent},this.vScrollBar),this.scrollBar.on("scroll",g.hitch(this,this._scrollBar_onScroll)));this.hScrollBar&&(this.hScrollBarW=
new m({content:this.hScrollBarContent,direction:"horizontal",value:0},this.hScrollBar),this.hScrollBarW.on("scroll",g.hitch(this,this._hscrollBar_onScroll)),this._hScrollNodes=[this.columnHeaderTable,this.subColumnHeaderTable,this.gridTable,this.itemContainerTable]);this._viewHandles.push(t(this.scrollContainer,z.wheel,dojo.hitch(this,this._mouseWheelScrollHander)))},postscript:function(){this.inherited(arguments);this._initialized=!0;this.invalidRendering||this.refreshRendering()},_setVerticalRendererAttr:function(a){this._destroyRenderersByKind("vertical");
this._set("verticalRenderer",a)},_createRenderData:function(){var a={};a.minHours=this.get("minHours");a.maxHours=this.get("maxHours");a.hourSize=this.get("hourSize");a.hourCount=a.maxHours-a.minHours;a.slotDuration=this.get("timeSlotDuration");a.rowHeaderGridSlotDuration=this.get("rowHeaderGridSlotDuration");a.slotSize=Math.ceil(a.hourSize/(60/a.slotDuration));a.hourSize=60/a.slotDuration*a.slotSize;a.sheetHeight=a.hourSize*a.hourCount;this._rowHeaderWidth||(this._rowHeaderWidth=u.getMarginBox(this.rowHeader).w);
a.rowHeaderWidth=this._rowHeaderWidth;var b=y.getScrollbar();a.scrollbarWidth=b.w+1;a.scrollbarHeight=b.h+1;a.dateLocaleModule=this.dateLocaleModule;a.dateClassObj=this.dateClassObj;a.dateModule=this.dateModule;a.dates=[];a.columnCount=this.get("columnCount");a.subColumns=this.get("subColumns");a.subColumnCount=a.subColumns?a.subColumns.length:1;a.hScrollPaneWidth=u.getMarginBox(this.grid).w;a.minSheetWidth=0>this.minColumnWidth?-1:this.minColumnWidth*a.subColumnCount*a.columnCount;a.hScrollBarEnabled=
0<this.minColumnWidth&&a.hScrollPaneWidth<a.minSheetWidth;b=this.get("startDate");null==b&&(b=new a.dateClassObj);this.startDate=b=this.floorToDay(b,!1,a);for(var c=0;c<a.columnCount;c++)a.dates.push(b),b=this.addAndFloor(b,"day",1);a.startTime=new a.dateClassObj(a.dates[0]);a.startTime.setHours(a.minHours);a.endTime=new a.dateClassObj(a.dates[a.columnCount-1]);a.endTime.setHours(a.maxHours);this.displayedItemsInvalidated&&!this._isEditing?a.items=this.storeManager._computeVisibleItems(a):this.renderData&&
(a.items=this.renderData.items);this.displayedDecorationItemsInvalidated?a.decorationItems=this.decorationStoreManager._computeVisibleItems(a):this.renderData&&(a.decorationItems=this.renderData.decorationItems);return a},_validateProperties:function(){this.inherited(arguments);var a=this.minHours;if(0>a||23<a||isNaN(a))this.minHours=0;a=this.maxHours;if(1>a||36<a||isNaN(a))this.minHours=36;this.minHours>this.maxHours&&(a=this.maxHours,this.maxHours=this.minHours,this.minHours=a);1>this.maxHours-
this.minHours&&(this.minHours=0,this.maxHours=24);if(1>this.columnCount||isNaN(this.columnCount))this.columnCount=1;a=this.percentOverlap;if(0>a||100<a||isNaN(a))this.percentOverlap=70;if(5>this.hourSize||isNaN(this.hourSize))this.hourSize=10;a=this.timeSlotDuration;if(1>a||60<a||isNaN(a))this.timeSlotDuration=15},_setStartDateAttr:function(a){this.displayedItemsInvalidated=!0;this._set("startDate",a)},_setColumnCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("columnCount",a)},__fixEvt:function(a){a.sheet=
"primary";a.source=this;return a},rowHeaderTimePattern:null,_formatRowHeaderLabel:function(a){return this.renderData.dateLocaleModule.format(a,{selector:"time",timePattern:this.rowHeaderTimePattern})},columnHeaderDatePattern:null,_formatColumnHeaderLabel:function(a){return this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:this.columnHeaderDatePattern,formatLength:"medium"})},scrollBarRTLPosition:"left",_getStartTimeOfDay:function(){var a=(this.get("maxHours")-this.get("minHours"))*
this._getScrollPosition()/this.renderData.sheetHeight;return{hours:this.renderData.minHours+Math.floor(a),minutes:60*(a-Math.floor(a))}},_getEndTimeOfDay:function(){var a=(this.get("maxHours")-this.get("minHours"))*(this._getScrollPosition()+this.scrollContainer.offsetHeight)/this.renderData.sheetHeight;return{hours:this.renderData.minHours+Math.floor(a),minutes:60*(a-Math.floor(a))}},startTimeOfDay:0,_setStartTimeOfDayAttr:function(a){this.renderData?this._setStartTimeOfDay(a.hours,a.minutes,a.duration,
a.easing):this._startTimeOfDayInvalidated=!0;this._set("startTimeOfDay",a)},_getStartTimeOfDayAttr:function(){return this.renderData?this._getStartTimeOfDay():this._get("startTimeOfDay")},_setStartTimeOfDay:function(a,b,c,f){var d=this.renderData;a=a||d.minHours;b=b||0;0>b?b=0:59<b&&(b=59);0>a?a=0:a>d.maxHours&&(a=d.maxHours);a=60*a+b;b=60*d.minHours;var g=60*d.maxHours;a<b?a=b:a>g&&(a=g);a=(a-b)*d.sheetHeight/(g-b);a=Math.min(d.sheetHeight-this.scrollContainer.offsetHeight,a);this._scrollToPosition(a,
c||0,f)},_scrollToPosition:function(b,c,f){if(c){this._scrollAnimation&&this._scrollAnimation.stop();var d=this._getScrollPosition();this._scrollAnimation=new a.Animation({curve:[d,b],duration:Math.abs((b-d)*c/this.renderData.sheetHeight),easing:f,onAnimate:g.hitch(this,function(a){this._setScrollImpl(a)})});this._scrollAnimation.play()}else this._setScrollImpl(b)},_setScrollImpl:function(a){this._setScrollPosition(a);this.scrollBar&&this.scrollBar.set("value",a)},ensureVisibility:function(a,b,c,
f,d){f=void 0==f?this.renderData.slotDuration:f;if(this.scrollable&&this.autoScroll){a=60*a.getHours()+a.getMinutes()-f;b=60*b.getHours()+b.getMinutes()+f;f=this._getStartTimeOfDay();var g=this._getEndTimeOfDay();f=60*f.hours+f.minutes;var g=60*g.hours+g.minutes,k=!1,h=null;switch(c){case "start":k=a>=f&&a<=g;h=a;break;case "end":k=b>=f&&b<=g;h=b-(g-f);break;case "both":k=a>=f&&b<=g,h=a}k||this._setStartTimeOfDay(Math.floor(h/60),h%60,d)}},scrollView:function(a){var b=this._getStartTimeOfDay(),b=
60*b.hours+b.minutes+a*this.timeSlotDuration;this._setStartTimeOfDay(Math.floor(b/60),b%60)},scrollViewHorizontal:function(a){this._setHScrollPosition(this._getHScrollPosition()+a*this.minColumnWidth);this.hScrollBarW&&this.hScrollBarW.set("value",this._getHScrollPosition())},_hScrollNodes:null,_setHScrollPositionImpl:function(a,b,c){var g=b?null:"translateX(-"+a+"px)";d.forEach([this.columnHeaderTable,this.subColumnHeaderTable,this.gridTable,this.itemContainerTable],function(d){b?(d.scrollLeft=a,
f.set(d,"left",-a+"px")):f.set(d,c,g)},this)},_mouseWheelScrollHander:function(a){this.renderData.hScrollBarEnabled&&a.altKey?this.scrollViewHorizontal(0<a.wheelDelta?-1:1):this.scrollView(0<a.wheelDelta?-1:1);c.stop(a)},refreshRendering:function(){if(this._initialized){this._validateProperties();var a=this.renderData,b=this._createRenderData();this.renderData=b;this._createRendering(b,a);this._layoutDecorationRenderers(b);this._layoutRenderers(b)}},_createRendering:function(a,b){f.set(this.sheetContainer,
"height",a.sheetHeight+"px");this._configureVisibleParts(a);this._configureScrollBar(a);this._buildColumnHeader(a,b);this._buildSubColumnHeader(a,b);this._buildRowHeader(a,b);this._buildGrid(a,b);this._buildItemContainer(a,b);this._layoutTimeIndicator(a);this._commitProperties(a)},_configureVisibleParts:function(a){this.secondarySheetNode&&f.set(this.secondarySheetNode,"display",this._showSecondarySheet?"block":"none");q[null==this.subColumns?"remove":"add"](this.domNode,"subColumns");q[this._showSecondarySheet?
"add":"remove"](this.domNode,"secondarySheet")},_commitProperties:function(a){this._startTimeOfDayInvalidated&&(this._startTimeOfDayInvalidated=!1,a=this.startTimeOfDay,null!=a&&this._setStartTimeOfDay(a.hours,void 0==a.minutes?0:a.minutes))},_configureScrollBar:function(a){n("ie")&&this.scrollBar&&f.set(this.vScrollBar,"width",a.scrollbarWidth+1+"px");var b=this.isLeftToRight()?!0:"right"==this.scrollBarRTLPosition,c=b?"right":"left",g=b?"left":"right";this.scrollBar&&(this.scrollBar.set("maximum",
a.sheetHeight),f.set(this.vScrollBar,c,0),f.set(this.vScrollBar,b?"left":"right","auto"),f.set(this.vScrollBar,"bottom",a.hScrollBarEnabled?a.scrollbarHeight+"px":"0"));f.set(this.scrollContainer,c,a.scrollbarWidth+"px");f.set(this.scrollContainer,g,"0");f.set(this.header,c,a.scrollbarWidth+"px");f.set(this.header,g,"0");f.set(this.subHeader,c,a.scrollbarWidth+"px");f.set(this.subHeader,g,"0");this.buttonContainer&&null!=this.owner&&this.owner.currentView==this&&(f.set(this.buttonContainer,c,a.scrollbarWidth+
"px"),f.set(this.buttonContainer,g,"0"));this.hScrollBar&&(d.forEach(this._hScrollNodes,function(b){q[a.hScrollBarEnabled?"add":"remove"](b.parentNode,"dojoxCalendarHorizontalScroll")},this),a.hScrollBarEnabled||(this._setHScrollPosition(0),this.hScrollBarW.set("value",0)),f.set(this.hScrollBar,{display:a.hScrollBarEnabled?"block":"none",height:a.scrollbarHeight+"px",left:(b?a.rowHeaderWidth:a.scrollbarWidth)+"px",right:(b?a.scrollbarWidth:a.rowHeaderWidth)+"px"}),f.set(this.scrollContainer,"bottom",
a.hScrollBarEnabled?a.scrollbarHeight+1+"px":"0"),this._configureHScrollDomNodes(a.hScrollBarEnabled?a.minSheetWidth+"px":"100%"),this.hScrollBarW.set("maximum",a.minSheetWidth),this.hScrollBarW.set("containerSize",a.hScrollPaneWidth))},_configureHScrollDomNodes:function(a){d.forEach(this._hScrollNodes,function(b){f.set(b,"width",a)},this)},resize:function(a){this._resizeHandler(a)},_resizeHandler:function(a,b){var c=this.renderData;if(null!=c)if(b){var f=u.getMarginBox(this.grid).w;c.hScrollPaneWidth!=
f&&(c.hScrollPaneWidth=f,c.minSheetWidth=0>this.minColumnWidth?-1:this.minColumnWidth*c.subColumnCount*c.columnCount,c.hScrollBarEnabled=0<this.minColumnWidth&&u.getMarginBox(this.grid).w<c.minSheetWidth);this._configureScrollBar(c)}else void 0!=this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(g.hitch(this,function(){this._resizeHandler(a,!0)}),100)},_columnHeaderClick:function(a){c.stop(a);var b=x("td",this.columnHeaderTable).indexOf(a.currentTarget);this._onColumnHeaderClick({index:b,
date:this.renderData.dates[b],triggerEvent:a})},_buildColumnHeader:function(a,f){var d=this.columnHeaderTable;if(d){var k=a.columnCount-(f?f.columnCount:0);8==n("ie")&&(null==this._colTableSave?this._colTableSave=g.clone(d):0>k&&(this._cleanupColumnHeader(),this.columnHeader.removeChild(d),w.destroy(d),this.columnHeaderTable=d=g.clone(this._colTableSave),this.columnHeader.appendChild(d),k=a.columnCount));var h=x("tbody",d),l=x("tr",d),m,h=1==h.length?h[0]:b.create("tbody",null,d),l=1==l.length?l[0]:
w.create("tr",null,h);if(0<k)for(h=0;h<k;h++){m=w.create("td",null,l);var p=[];p.push(t(m,"click",g.hitch(this,this._columnHeaderClick)));n("touch-events")?(p.push(t(m,"touchstart",function(a){c.stop(a);q.add(a.currentTarget,"Active")})),p.push(t(m,"touchend",function(a){c.stop(a);q.remove(a.currentTarget,"Active")}))):(p.push(t(m,"mousedown",function(a){c.stop(a);q.add(a.currentTarget,"Active")})),p.push(t(m,"mouseup",function(a){c.stop(a);q.remove(a.currentTarget,"Active")})),p.push(t(m,"mouseover",
function(a){c.stop(a);q.add(a.currentTarget,"Hover")})),p.push(t(m,"mouseout",function(a){c.stop(a);q.remove(a.currentTarget,"Hover")})));this._columnHeaderHandlers.push(p)}else for(k=-k,h=0;h<k;h++)for(m=l.lastChild,l.removeChild(m),w.destroy(m),m=this._columnHeaderHandlers.pop();0<m.length;)m.pop().remove();x("td",d).forEach(function(b,c){b.className="";0==c?q.add(b,"first-child"):c==this.renderData.columnCount-1&&q.add(b,"last-child");var f=a.dates[c];this._setText(b,this._formatColumnHeaderLabel(f));
this.styleColumnHeaderCell(b,f,a)},this);this.yearColumnHeaderContent&&this._setText(this.yearColumnHeaderContent,a.dateLocaleModule.format(a.dates[0],{selector:"date",datePattern:"yyyy"}))}},_cleanupColumnHeader:function(){for(;0<this._columnHeaderHandlers.length;)for(var a=this._columnHeaderHandlers.pop();0<a.length;)a.pop().remove()},styleColumnHeaderCell:function(a,b,c){q.add(a,this._cssDays[b.getDay()]);this.isToday(b)?q.add(a,"dojoxCalendarToday"):this.isWeekEnd(b)&&q.add(a,"dojoxCalendarWeekend")},
_buildSubColumnHeader:function(a,c){var d=this.subColumnHeaderTable;if(d&&null!=this.subColumns){var k=a.columnCount-x("td",d).length;8==n("ie")&&(null==this._colSubTableSave?this._colSubTableSave=g.clone(d):0>k&&(this.subColumnHeader.removeChild(d),w.destroy(d),this.subColumnHeaderTable=d=g.clone(this._colSubTableSave),this.subColumnHeader.appendChild(d),k=a.columnCount));var h=x("\x3etbody",d),l,h=1==h.length?h[0]:b.create("tbody",null,d);l=x("\x3etr",h);var h=1==l.length?l[0]:w.create("tr",null,
h),m=a.subColumnCount;if(0<k)for(var p=0;p<k;p++)l=w.create("td",null,h),w.create("div",{className:"dojoxCalendarSubHeaderContainer"},l);else for(k=-k,p=0;p<k;p++)l=h.lastChild,h.removeChild(l),w.destroy(l);x("td",d).forEach(function(b,c){b.className="";0==c?q.add(b,"first-child"):c==this.renderData.columnCount-1&&q.add(b,"last-child");x(".dojoxCalendarSubHeaderContainer",b).forEach(function(a,b){if(0!=x(".dojoxCalendarSubHeaderContainer",a).length-m){var c=a.childNodes.length;for(b=0;b<c;b++)a.removeChild(a.lastChild);
for(c=0;c<m;c++)w.create("div",{className:"dojoxCalendarSubHeaderCell dojoxCalendarSubHeaderLabel"},a)}var d=100/m+"%";x(".dojoxCalendarSubHeaderCell",a).forEach(function(a,b){a.className="dojoxCalendarSubHeaderCell dojoxCalendarSubHeaderLabel";var c=1==m?b:Math.floor(b/m);subColIdx=1==m?0:b-c*m;f.set(a,{width:d,left:100*subColIdx/m+"%"});q[subColIdx<m-1&&1!==m?"add":"remove"](a,"subColumn");q.add(a,this.subColumns[subColIdx]);this._setText(a,this.subColumnLabelFunc(this.subColumns[subColIdx]))},
this)},this);this.styleSubColumnHeaderCell(b,a.dates[c],a)},this)}},subColumnLabelFunc:function(a){return a},styleSubColumnHeaderCell:function(a,b,c){q.add(a,this._cssDays[b.getDay()]);this.isToday(b)?q.add(a,"dojoxCalendarToday"):this.isWeekEnd(b)&&q.add(a,"dojoxCalendarWeekend")},_addMinutesClasses:function(a,b){switch(b){case 0:q.add(a,"hour");break;case 30:q.add(a,"halfhour");break;case 15:case 45:q.add(a,"quarterhour")}},_buildRowHeader:function(a,b){var c=this.rowHeaderTable;if(c){null==this._rowHeaderLabelContainer&&
(this._rowHeaderLabelContainer=w.create("div",{"class":"dojoxCalendarRowHeaderLabelContainer"},this.rowHeader));f.set(c,"height",a.sheetHeight+"px");var d=x("tbody",c),g,k;g=1==d.length?d[0]:w.create("tbody",null,c);d=Math.floor(60/a.rowHeaderGridSlotDuration)*a.hourCount-(b?Math.floor(60/b.rowHeaderGridSlotDuration)*b.hourCount:0);if(0<d)for(var h=0;h<d;h++)k=w.create("tr",null,g),w.create("td",null,k);else for(d=-d,h=0;h<d;h++)g.removeChild(g.lastChild);var l=this.renderData,m=Math.ceil(a.hourSize/
(60/a.rowHeaderGridSlotDuration)),p=new Date(2E3,0,1,0,0,0);x("tr",c).forEach(function(b,c){var d=x("td",b)[0];d.className="";f.set(b,"height",7==n("ie")?m-60/a.rowHeaderGridSlotDuration*2:m+"px");var g=c*this.renderData.rowHeaderGridSlotDuration%60;this.styleRowHeaderCell(d,a.minHours+c*this.renderData.rowHeaderGridSlotDuration/60,g,l);this._addMinutesClasses(d,g)},this);c=this._rowHeaderLabelContainer;d=Math.floor(60/this.rowHeaderLabelSlotDuration)*a.hourCount-c.childNodes.length;if(0<d)for(h=
0;h<d;h++)g=w.create("span",null,c),q.add(g,"dojoxCalendarRowHeaderLabel");else for(d=-d,h=0;h<d;h++)c.removeChild(c.lastChild);m=Math.ceil(a.hourSize/(60/this.rowHeaderLabelSlotDuration));x("\x3espan",c).forEach(function(b,c){p.setHours(0);p.setMinutes(60*a.minHours+c*this.rowHeaderLabelSlotDuration);this._configureRowHeaderLabel(b,p,c,m*c,l)},this)}},_configureRowHeaderLabel:function(a,b,c,d,g){this._setText(a,this._formatRowHeaderLabel(b));f.set(a,"top",d+(0==c?this.rowHeaderFirstLabelOffset:this.rowHeaderLabelOffset)+
"px");b=g.minHours+c*this.rowHeaderLabelSlotDuration/60;c=c*this.rowHeaderLabelSlotDuration%60;q.remove(a,["hour","halfhour","quarterhour"]);this._addMinutesClasses(a,c);this.styleRowHeaderCell(a,b,c,g)},styleRowHeaderCell:function(a,b,c,f){},_buildGrid:function(a,b){var c=this.gridTable;if(c){f.set(c,"height",a.sheetHeight+"px");var d=Math.floor(60/a.slotDuration)*a.hourCount,k=d-(b?Math.floor(60/b.slotDuration)*b.hourCount:0),h=0<k,l=a.columnCount-(b?b.columnCount:0);8==n("ie")&&(null==this._gridTableSave?
this._gridTableSave=g.clone(c):0>l&&(this.grid.removeChild(c),w.destroy(c),this.gridTable=c=g.clone(this._gridTableSave),this.grid.appendChild(c),l=a.columnCount,k=d,h=!0));var m=x("tbody",c),m=1==m.length?m[0]:w.create("tbody",null,c);if(h)for(var p=0;p<k;p++)w.create("tr",null,m);else for(k=-k,p=0;p<k;p++)m.removeChild(m.lastChild);var u=Math.floor(60/a.slotDuration)*a.hourCount-k,t=h||0<l,l=t?l:-l;x("tr",c).forEach(function(b,c){if(t){var f=c>=u?a.columnCount:l;for(c=0;c<f;c++)w.create("td",null,
b)}else for(c=0;c<l;c++)b.removeChild(b.lastChild)});x("tr",c).forEach(function(b,c){f.set(b,"height",a.slotSize+"px");0==c?q.add(b,"first-child"):c==d-1&&q.add(b,"last-child");var g=c*this.renderData.slotDuration%60,k=this.minHours+Math.floor(c*this.renderData.slotDuration/60);x("td",b).forEach(function(b,c){b.className="";0==c?q.add(b,"first-child"):c==this.renderData.columnCount-1&&q.add(b,"last-child");this.styleGridCell(b,a.dates[c],k,g,a);this._addMinutesClasses(b,g)},this)},this)}},styleGridCellFunc:null,
defaultStyleGridCell:function(a,b,c,f,d){q.add(a,[this._cssDays[b.getDay()],"H"+c,"M"+f]);if(this.isToday(b))return q.add(a,"dojoxCalendarToday");if(this.isWeekEnd(b))return q.add(a,"dojoxCalendarWeekend")},styleGridCell:function(a,b,c,f,d){this.styleGridCellFunc?this.styleGridCellFunc(a,b,c,f,d):this.defaultStyleGridCell(a,b,c,f,d)},_buildItemContainer:function(a,b){var c=this.itemContainerTable;if(c){var d=[],k=[];f.set(c,"height",a.sheetHeight+"px");var h=a.columnCount-(b?b.columnCount:0);8==n("ie")&&
(null==this._itemTableSave?this._itemTableSave=g.clone(c):0>h&&(this.itemContainer.removeChild(c),this._recycleItemRenderers(!0),w.destroy(c),this.itemContainerTable=c=g.clone(this._itemTableSave),this.itemContainer.appendChild(c),h=a.columnCount));var l=x("tbody",c),m=x("tr",c),l=1==l.length?l[0]:w.create("tbody",null,c),m=1==m.length?m[0]:w.create("tr",null,l),p=a.subColumnCount;if(0<h)for(var u=0;u<h;u++)l=w.create("td",null,m),w.create("div",{className:"dojoxCalendarContainerColumn"},l);else for(h=
-h,u=0;u<h;u++)m.removeChild(m.lastChild);x("td",c).forEach(function(b,c){x(".dojoxCalendarContainerColumn",b).forEach(function(c,d){f.set(c,"height",a.sheetHeight+"px");if(0!=x(".dojoxCalendarSubContainerColumn",b).length-p){var g=c.childNodes.length;for(d=0;d<g;d++)c.removeChild(c.lastChild);for(g=0;g<p;g++){var k=w.create("div",{className:"dojoxCalendarSubContainerColumn"},c);w.create("div",{className:"dojoxCalendarDecorationContainerColumn"},k);w.create("div",{className:"dojoxCalendarEventContainerColumn"},
k)}}},this);var g=100/p+"%";x(".dojoxCalendarSubContainerColumn",b).forEach(function(a,b){var c=1==p?b:Math.floor(b/p);subColIdx=1==p?0:b-c*p;f.set(a,{width:g,left:100*subColIdx/p+"%"});q[subColIdx<p-1&&1!==p?"add":"remove"](a,"subColumn");x(".dojoxCalendarEventContainerColumn",a).forEach(function(a,b){d.push(a)},this);x(".dojoxCalendarDecorationContainerColumn",a).forEach(function(a,b){k.push(a)},this)},this)},this);a.cells=d;a.decorationCells=k}},showTimeIndicator:!0,timeIndicatorRefreshInterval:6E4,
_setShowTimeIndicatorAttr:function(a){this._set("showTimeIndicator",a);this._layoutTimeIndicator(this.renderData)},_layoutTimeIndicator:function(a){if(a){if(this.showTimeIndicator){var b=new a.dateClassObj;if(this.isOverlapping(a,a.startTime,a.endTime,b,b)&&b.getHours()>=this.get("minHours")&&60*b.getHours()+b.getMinutes()<60*this.get("maxHours")){this._timeIndicator||(this._timeIndicator=w.create("div",{className:"dojoxCalendarTimeIndicator"}));for(var c=this._timeIndicator,d=0;d<this.renderData.columnCount&&
!this.isSameDay(b,this.renderData.dates[d]);d++);b=this.computeProjectionOnDate(a,this.floorToDay(b),b,a.sheetHeight);if(b!=a.sheetHeight){f.set(c,{top:b+"px",display:"block"});a=a.cells[d*a.subColumnCount].parentNode.parentNode;a!=c.parentNode&&(null!=c.parentNode&&c.parentNode.removeChild(c),a.appendChild(c));null==this._timeIndicatorTimer&&(this._timeIndicatorTimer=setInterval(g.hitch(this,function(){this._layoutTimeIndicator(this.renderData)}),this.timeIndicatorRefreshInterval));return}}}this._timeIndicatorTimer&&
(clearInterval(this._timeIndicatorTimer),this._timeIndicatorTimer=null);this._timeIndicator&&f.set(this._timeIndicator,"display","none")}},beforeDeactivate:function(){this._timeIndicatorTimer&&(clearInterval(this._timeIndicatorTimer),this._timeIndicatorTimer=null)},_overlapLayoutPass2:function(a){var b,c,f,d;f=a[a.length-1];for(c=0;c<f.length;c++)f[c].extent=1;for(b=0;b<a.length-1;b++)for(f=a[b],c=0;c<f.length;c++)if(d=f[c],-1==d.extent){d.extent=1;for(var g=0,k=!1,h=b+1;h<a.length&&!k;h++){for(var l=
a[h],m=0;m<l.length&&!k;m++){var n=l[m];d.start<n.end&&n.start<d.end&&(k=!0)}k||g++}d.extent+=g}},_defaultItemToRendererKindFunc:function(a){return"vertical"},_layoutInterval:function(a,b,c,f,d,g){var k=[];a.colW=this.itemContainer.offsetWidth/a.columnCount;if("dataItems"===g){for(var h=0;h<d.length;h++){var l=d[h];"vertical"===this._itemToRendererKind(l)&&k.push(l)}this._layoutRendererWithSubColumns(a,"vertical",!0,b,c,f,k,g)}else this._layoutRendererWithSubColumns(a,"decoration",!1,b,c,f,d,g)},
_layoutRendererWithSubColumns:function(a,b,c,f,k,h,l,m){if(0<l.length)if(1<a.subColumnCount){var n={},q=this.subColumns;d.forEach(q,function(a){n[a]=[]});d.forEach(l,function(a){"decorationItems"===m?a.subColumn?n[a.subColumn]&&n[a.subColumn].push(a):d.forEach(q,function(b){var c=g.mixin({},a);c.subColumn=b;n[b].push(c)}):a.subColumn&&n[a.subColumn]&&n[a.subColumn].push(a)});var p=0;d.forEach(this.subColumns,function(d){this._layoutVerticalItems(a,b,c,f,p++,k,h,n[d],m)},this)}else this._layoutVerticalItems(a,
b,c,f,0,k,h,l,m)},_getColumn:function(a,b,c,f){return("dataItems"===f?a.cells:a.decorationCells)[b*a.subColumnCount+c]},_layoutVerticalItems:function(a,b,c,d,k,h,l,m,n){if(!("dataItems"===n&&null==this.verticalRenderer||"decorationItems"===n&&null==this.verticalDecorationRenderer)){b=this._getColumn(a,d,k,n);c=[];for(d=0;d<m.length;d++){k=m[d];var q=this.computeRangeOverlap(a,k.startTime,k.endTime,h,l),p=this.computeProjectionOnDate(a,h,q[0],a.sheetHeight),u=this.computeProjectionOnDate(a,h,q[1],
a.sheetHeight);u>p&&(k=g.mixin({start:p,end:u,range:q,item:k},k),c.push(k))}h="dataItems"===n?this.computeOverlapping(c,this._overlapLayoutPass2).numLanes:1;l=this.percentOverlap/100;for(d=0;d<c.length;d++){k=c[d];if("dataItems"===n){q=k.lane;p=k.extent;0==l?(m=1==h?a.colW:(a.colW-(h-1)*this.horizontalGap)/h,q*=m+this.horizontalGap,m=1==p?m:m*p+(p-1)*this.horizontalGap,m=100*m/a.colW,q=100*q/a.colW):(m=1==h?100:100/(h-(h-1)*l),q*=m-l*m,m=1==p?m:m*(p-(p-1)*l));var p=this._createRenderer(k,"vertical",
this.verticalRenderer,"dojoxCalendarVertical"),t=this.isItemBeingEdited(k),r=this.isItemSelected(k),v=this.isItemHovered(k),x=this.isItemFocused(k),u=p.renderer;u.set("hovered",v);u.set("selected",r);u.set("edited",t);u.set("focused",this.showFocus?x:!1);u.set("storeState",this.getItemStoreState(k));u.set("moveEnabled",this.isItemMoveEnabled(k._item,"vertical"));u.set("resizeEnabled",this.isItemResizeEnabled(k._item,"vertical"));this.applyRendererZIndex(k,p,v,r,t,x)}else m=100,q=0,p=this.decorationRendererManager.createRenderer(k,
"vertical",this.verticalDecorationRenderer,"dojoxCalendarDecoration"),u=p.renderer;f.set(p.container,{top:k.start+"px",left:q+"%",width:m+"%",height:k.end-k.start+1+"px"});u.updateRendering&&u.updateRendering(m,k.end-k.start+1);w.place(p.container,b);f.set(p.container,"display","block")}}},_sortItemsFunction:function(a,b){var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return this.isLeftToRight()?c:-c},_getNormalizedCoords:function(a,
b,c,f){null!=a&&(c=u.position(this.itemContainer,!0),a.touches?(f=void 0==f?0:f,b=a.touches[f].pageX-c.x,c=a.touches[f].pageY-c.y):(b=a.pageX-c.x,c=a.pageY-c.y));a=u.getContentBox(this.itemContainer);this.isLeftToRight()||(b=a.w-b);0>b?b=0:b>a.w&&(b=a.w-1);0>c?c=0:c>a.h&&(c=a.h-1);return{x:b,y:c}},getTime:function(a,b,c,f){b=this._getNormalizedCoords(a,b,c,f);a=this.getTimeOfDay(b.y,this.renderData);c=u.getMarginBox(this.itemContainer).w/this.renderData.columnCount;b=Math.floor(b.x/c);c=null;b<this.renderData.dates.length&&
(c=this.newDate(this.renderData.dates[b]),c=this.floorToDay(c,!0),c.setHours(a.hours),c.setMinutes(a.minutes));return c},getSubColumn:function(a,b,c,f){if(null==this.subColumns||1==this.subColumns.length)return null;a=this._getNormalizedCoords(a,b,c,f);b=this.renderData;c=u.getMarginBox(this.itemContainer).w/this.renderData.columnCount;return this.subColumns[Math.floor((a.x-Math.floor(a.x/c)*c)/(c/b.subColumnCount))]},_onGridMouseUp:function(a){this.inherited(arguments);this._gridMouseDown&&(this._gridMouseDown=
!1,this._onGridClick({date:this.getTime(a),triggerEvent:a}))},_onGridTouchStart:function(a){this.inherited(arguments);var b=this._gridProps;b.moved=!1;b.start=a.touches[0].screenY;b.scrollTop=this._getScrollPosition()},_onGridTouchMove:function(a){this.inherited(arguments);if(1<a.touches.length&&!this._isEditing)c.stop(a);else if(this._gridProps&&!this._isEditing){var b=a.touches[0].screenX,f=a.touches[0].screenY,d=this._edProps;if(!d||d&&(25<Math.abs(b-d.start.x)||25<Math.abs(f-d.start.y)))this._gridProps.moved=
!0,b=this._gridProps.scrollTop-(a.touches[0].screenY-this._gridProps.start),f=this.itemContainer.offsetHeight-this.scrollContainer.offsetHeight,0>b?(this._gridProps.start=a.touches[0].screenY,this._setScrollImpl(0),this._gridProps.scrollTop=0):b>f?(this._gridProps.start=a.touches[0].screenY,this._setScrollImpl(f),this._gridProps.scrollTop=f):this._setScrollImpl(b)}},_onGridTouchEnd:function(a){this.inherited(arguments);var b=this._gridProps;b&&(this._isEditing||b.moved||(b.fromItem||b.editingOnStart||
this.selectFromEvent(a,null,null,!0),b.fromItem||(this._pendingDoubleTap&&this._pendingDoubleTap.grid?(this._onGridDoubleClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),clearTimeout(this._pendingDoubleTap.timer),delete this._pendingDoubleTap):(this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),this._pendingDoubleTap={grid:!0,timer:setTimeout(g.hitch(this,function(){delete this._pendingDoubleTap}),this.doubleTapDelay)}))),
this._gridProps=null)},_onColumnHeaderClick:function(a){this._dispatchCalendarEvt(a,"onColumnHeaderClick")},onColumnHeaderClick:function(a){},getTimeOfDay:function(a,b){var c=60*b.minHours,c=c+a*(60*b.maxHours-c)/b.sheetHeight;return{hours:Math.floor(c/60),minutes:Math.floor(c%60)}},_isItemInView:function(a){var b=this.inherited(arguments);if(b){var c=this.renderData;if(c.dateModule.difference(a.startTime,a.endTime,"millisecond")>36E5*(24-c.maxHours+c.minHours))return!0;var f=60*a.startTime.getHours()+
a.startTime.getMinutes(),d=60*a.endTime.getHours()+a.endTime.getMinutes(),g=60*c.minHours,c=60*c.maxHours;if(0<f&&f<g||f>c&&1440>=f||0<d&&d<g||d>c&&1440>=d)return!1}return b},_ensureItemInView:function(a){var b,c=a.startTime,f=a.endTime,d=this.renderData,g=d.dateModule,k=Math.abs(g.difference(a.startTime,a.endTime,"millisecond"));if(k>36E5*(24-d.maxHours+d.minHours))return!1;var c=60*c.getHours()+c.getMinutes(),f=60*f.getHours()+f.getMinutes(),h=60*d.minHours,l=60*d.maxHours;0<c&&c<h?(this.floorToDay(a.startTime,
!0,d),a.startTime.setHours(d.minHours),a.endTime=g.add(a.startTime,"millisecond",k),b=!0):c>l&&1440>=c&&(this.floorToDay(a.startTime,!0,d),a.startTime=g.add(a.startTime,"day",1),a.startTime.setHours(d.minHours),a.endTime=g.add(a.startTime,"millisecond",k),b=!0);0<f&&f<h?(this.floorToDay(a.endTime,!0,d),a.endTime=g.add(a.endTime,"day",-1),a.endTime.setHours(d.maxHours),a.startTime=g.add(a.endTime,"millisecond",-k),b=!0):f>l&&1440>=f&&(this.floorToDay(a.endTime,!0,d),a.endTime.setHours(d.maxHours),
a.startTime=g.add(a.endTime,"millisecond",-k),b=!0);return b=b||this.inherited(arguments)},_onScrollTimer_tick:function(){this._scrollToPosition(this._getScrollPosition()+this._scrollProps.scrollStep)},snapUnit:"minute",snapSteps:15,minDurationUnit:"minute",minDurationSteps:15,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!0})})},"dojox/calendar/_ScrollBarBase":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/on dojo/dom-style dojo/sniff dijit/_WidgetBase dojox/html/metrics".split(" "),
function(r,p,m,l,h,c,g,d){return r("dojox.calendar._ScrollBarBase",g,{value:0,minimum:0,maximum:100,direction:"vertical",_vertical:!0,_scrollHandle:null,containerSize:0,buildRendering:function(){this.inherited(arguments);this.own(l(this.domNode,"scroll",m.hitch(this,function(c){this.value=this._getDomScrollerValue();this.onChange(this.value);this.onScroll(this.value)})))},_getDomScrollerValue:function(){if(this._vertical)return this.domNode.scrollTop;if(!this.isLeftToRight()){if(c("webkit")||7==c("ie"))return void 0==
this._scW&&(this._scW=d.getScrollbar().w),this.maximum-this.domNode.scrollLeft-this.containerSize+this._scW;if(c("mozilla"))return-this.domNode.scrollLeft}return this.domNode.scrollLeft},_setDomScrollerValue:function(c){this.domNode[this._vertical?"scrollTop":"scrollLeft"]=c},_setValueAttr:function(c){c=Math.min(this.maximum,c);c=Math.max(this.minimum,c);this.value!=c&&(this.value=c,this.onChange(c),this._setDomScrollerValue(c))},onChange:function(c){},onScroll:function(c){},_setMinimumAttr:function(c){this.minimum=
c=Math.min(c,this.maximum)},_setMaximumAttr:function(c){this.maximum=c=Math.max(c,this.minimum);h.set(this.content,this._vertical?"height":"width",c+"px")},_setDirectionAttr:function(c){"vertical"==c?(c="vertical",this._vertical=!0):(c="horizontal",this._vertical=!1);this._set("direction",c)}})})},"dojox/html/metrics":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/sniff dojo/ready dojo/_base/unload dojo/_base/window dojo/dom-geometry".split(" "),function(r,p,m,l,h,c,g){var d=p.getObject("dojox.html.metrics",
!0),n=p.getObject("dojox");d.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;m("ie")&&(b=c.doc.documentElement.style.fontSize||"",b||(c.doc.documentElement.style.fontSize="100%"));var d=c.doc.createElement("div"),g=d.style;g.position="absolute";g.left="-100px";g.top="0";g.width="30px";g.height="1000em";g.borderWidth="0";g.margin="0";g.padding="0";g.outline="0";g.lineHeight="1";g.overflow=
"hidden";c.body().appendChild(d);for(var k in a)g.fontSize=k,a[k]=16*Math.round(12*d.offsetHeight/16)/12/1E3;m("ie")&&(c.doc.documentElement.style.fontSize=b);c.body().removeChild(d);d=null;return a};var a=null;d.getCachedFontMeasurements=function(b){if(b||!a)a=d.getFontMeasurements();return a};var b=null,t={};d.getTextBox=function(a,d,k){var f,h;if(b)f=b;else{f=b=c.doc.createElement("div");var l=c.doc.createElement("div");l.appendChild(f);h=l.style;h.overflow="scroll";h.position="absolute";h.left=
"0px";h.top="-10000px";h.width="1px";h.height="1px";h.visibility="hidden";h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";c.body().appendChild(l)}f.className="";h=f.style;h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";if(1<arguments.length&&d)for(var m in d)m in t||(h[m]=d[m]);2<arguments.length&&k&&(f.className=k);f.innerHTML=a;h=g.position(f);h.w=f.parentNode.scrollWidth;return h};var k=16,q=16;d.getScrollbar=function(){return{w:k,h:q}};d._fontResizeNode=null;d.initOnFontResize=
function(a){var b=d._fontResizeNode=c.doc.createElement("iframe");a=b.style;a.position="absolute";a.width="5em";a.height="10em";a.top="-10000px";a.display="none";m("ie")?b.onreadystatechange=function(){"complete"==b.contentWindow.document.readyState&&(b.onresize=b.contentWindow.parent[n._scopeName].html.metrics._fontresize)}:b.onload=function(){b.contentWindow.onresize=b.contentWindow.parent[n._scopeName].html.metrics._fontresize};b.setAttribute("src","javascript:'\x3chtml\x3e\x3chead\x3e\x3cscript\x3eif(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}\x3c/script\x3e\x3c/head\x3e\x3cbody\x3e\x3c/body\x3e\x3c/html\x3e'");
c.body().appendChild(b);d.initOnFontResize=function(){}};d.onFontResize=function(){};d._fontresize=function(){d.onFontResize()};h.addOnUnload(function(){var a=d._fontResizeNode;a&&(m("ie")&&a.onresize?a.onresize=null:a.contentWindow&&a.contentWindow.onresize&&(a.contentWindow.onresize=null),d._fontResizeNode=null)});l(function(){try{var a=c.doc.createElement("div");a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";c.body().appendChild(a);
k=a.offsetWidth-a.clientWidth;q=a.offsetHeight-a.clientHeight;c.body().removeChild(a);delete a}catch(u){}"fontSizeWatch"in r.config&&r.config.fontSizeWatch&&d.initOnFontResize()});return d})},"dojox/calendar/ColumnViewSecondarySheet":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom-geometry dojo/dom-style ./MatrixView dojo/text!./templates/ColumnViewSecondarySheet.html".split(" "),function(r,p,m,l,h,c,g,d){return p("dojox.calendar.ColumnViewSecondarySheet",
g,{templateString:d,rowCount:1,cellPaddingTop:4,roundToDay:!1,_defaultHeight:-1,layoutDuringResize:!0,buildRendering:function(){this.inherited(arguments);this._hScrollNodes=[this.gridTable,this.itemContainerTable]},_configureHScrollDomNodes:function(d){r.forEach(this._hScrollNodes,function(a){c.set(a,"width",d)},this)},_defaultItemToRendererKindFunc:function(c){return c.allDay?"horizontal":null},_formatGridCellLabel:function(){return null},_formatRowHeaderLabel:function(){return null},__fixEvt:function(c){c.sheet=
"secondary";c.source=this;return c},_dispatchCalendarEvt:function(c,a){c=this.inherited(arguments);if(this.owner.owner)this.owner.owner[a](c)},_layoutExpandRenderers:function(c,a,b){if(this.expandRenderer&&-1!=this._expandedRowCol){var d=h.getMarginBox(this.domNode).h;if(-1==this._defaultHeight||0===this._defaultHeight)this._defaultHeight=d;this._defaultHeight!=d&&d>=this._getExpandedHeight()||void 0!==this._expandedRowCol&&-1!==this._expandedRowCol?(d=this._expandedRowCol,d>=this.renderData.columnCount&&
(d=0),this._layoutExpandRendererImpl(0,d,null,!0)):this.inherited(arguments)}},expandRendererClickHandler:function(c,a){m.stop(c);var b=h.getMarginBox(this.domNode).h,d=this._getExpandedHeight();this._defaultHeight==b||b<d?(this._expandedRowCol=a.columnIndex,this.owner.resizeSecondarySheet(d)):(delete this._expandedRowCol,this.owner.resizeSecondarySheet(this._defaultHeight))},_getExpandedHeight:function(){return(this.naturalRowsHeight&&0<this.naturalRowsHeight.length?this.naturalRowsHeight[0]:0)+
this.expandRendererHeight+this.verticalGap+this.verticalGap},_layoutRenderers:function(c){this._domReady&&(this.inherited(arguments),c.items&&0!==c.items.length||this._layoutExpandRenderers(0,!1,null))}})})},"dojox/calendar/DecorationRenderer":function(){define(["dojo/_base/declare","dojo/dom-class","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(r,p,m,l,h){return r("dojox.calendar.DecorationRenderer",[m,l],{templateString:'\x3cdiv class\x3d"dojoxCalendarDecoration"\x3e\x3c/div\x3e',_setItemAttr:function(c){null==
c?(this.item&&this.item.cssClass&&p.remove(this.domNode,this.item.cssClass),this.item=null):(null!=this.item?(this.item.cssClass!=c.cssClass&&this.item.cssClass&&p.remove(this.domNode,this.item.cssClass),this.item=lang.mixin(this.item,c)):this.item=c,c.cssClass&&p.add(this.domNode,c.cssClass))},postCreate:function(){this.inherited(arguments);this._applyAttributes()}})})},"dojox/calendar/ExpandRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/_base/window dojo/on dojo/dom-class dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/ExpandRenderer.html".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return r("dojox.calendar.ExpandRenderer",[d,n],{templateString:a,baseClass:"dojoxCalendarExpand",owner:null,focused:!1,up:!1,down:!1,date:null,items:null,rowIndex:-1,columnIndex:-1,_setExpandedAttr:function(a){g.set(this.expand,"display",a?"none":"inline-block");g.set(this.collapse,"display",a?"inline-block":"none");this._set("expanded",a)},_setDownAttr:function(a){this._setState("down",a,"Down")},_setUpAttr:function(a){this._setState("up",a,"Up")},_setFocusedAttr:function(a){this._setState("focused",
a,"Focused")},_setState:function(a,d,g){this[a]!=d&&(c[d?"add":"remove"](this.stateNode||this.domNode,g),this._set(a,d))},_onClick:function(a){this.owner&&this.owner.expandRendererClickHandler&&this.owner.expandRendererClickHandler(a,this)},_onMouseDown:function(a){m.stop(a);this.set("down",!0)},_onMouseUp:function(a){this.set("down",!1)},_onMouseOver:function(a){this.up||(a=1==a.button,this.set("up",!a),this.set("down",a))},_onMouseOut:function(a){for(var b=a.relatedTarget;b!=a.currentTarget&&b!=
l.doc.body&&null!=b;)b=b.parentNode;b!=a.currentTarget&&(this.set("up",!1),this.set("down",!1))}})})},"dojox/calendar/Keyboard":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/on dojo/_base/event dojo/keys".split(" "),function(r,p,m,l,h,c){return m("dojox.calendar.Keyboard",null,{keyboardUpDownUnit:"minute",keyboardUpDownSteps:15,keyboardLeftRightUnit:"day",keyboardLeftRightSteps:1,allDayKeyboardUpDownUnit:"day",allDayKeyboardUpDownSteps:7,allDayKeyboardLeftRightUnit:"day",
allDayKeyboardLeftRightSteps:1,postCreate:function(){this.inherited(arguments);this._viewHandles.push(l(this.domNode,"keydown",p.hitch(this,this._onKeyDown)))},resizeModifier:"ctrl",maxScrollAnimationDuration:1E3,tabIndex:"0",focusedItem:null,_isItemFocused:function(c){return null!=this.focusedItem&&this.focusedItem.id==c.id},_setFocusedItemAttr:function(c){if(c!=this.focusedItem){var d=this.focusedItem;this._set("focusedItem",c);this.updateRenderers([d,this.focusedItem],!0);this.onFocusChange({oldValue:d,
newValue:c})}null!=c&&(null!=this.owner&&null!=this.owner.get("focusedItem")&&this.owner.set("focusedItem",null),null!=this._secondarySheet&&null!=this._secondarySheet.set("focusedItem")&&this._secondarySheet.set("focusedItem",null))},onFocusChange:function(c){},showFocus:!1,_focusNextItem:function(c){if(!this.renderData||!this.renderData.items||0==this.renderData.items.length)return null;var d=-1,g=this.renderData.items,a=g.length-1,b=this.get("focusedItem");null==b?d=0<c?0:a:(r.some(g,p.hitch(this,
function(a,c){var f=a.id==b.id;f&&(d=c);return f})),d=this._focusNextItemImpl(c,d,a));for(var h=!1,k=-1;k!=d&&(!h||0!=d);){h||0!=d||(h=!0);k=g[d];if(null!=this.rendererManager.itemToRenderer[k.id]){this.set("focusedItem",k);break}k=d;d=this._focusNextItemImpl(c,d,a)}},_focusNextItemImpl:function(c,d,h){if(-1==d)d=0<c?0:h;else{if(0==d&&-1==c||d==h&&1==c)return d;d=0<c?++d:--d}return d},_handlePrevNextKeyCode:function(c,d){this.isLeftToRight()||(d=1==d?-1:1);this.showFocus=!0;this._focusNextItem(d);
var g=this.get("focusedItem");!c.ctrlKey&&g&&this.set("selectedItem",g);g&&this.ensureVisibility(g.startTime,g.endTime,"both",void 0,this.maxScrollAnimationDuration)},_checkDir:function(c,d){return this.isLeftToRight()&&c==d||!this.isLeftToRight()&&c==("left"==d?"right":"left")},_keyboardItemEditing:function(c,d){h.stop(c);var g=this._edProps,a,b;g.editedItem.allDay||this.roundToDay||"label"==g.rendererKind?(a="up"==d||"down"==d?this.allDayKeyboardUpDownUnit:this.allDayKeyboardLeftRightUnit,b="up"==
d||"down"==d?this.allDayKeyboardUpDownSteps:this.allDayKeyboardLeftRightSteps):(a="up"==d||"down"==d?this.keyboardUpDownUnit:this.keyboardLeftRightUnit,b="up"==d||"down"==d?this.keyboardUpDownSteps:this.keyboardLeftRightSteps);if("up"==d||this._checkDir(d,"left"))b=-b;var l=c[this.resizeModifier+"Key"]?"resizeEnd":"move",k="resizeEnd"==l?g.editedItem.endTime:g.editedItem.startTime,m=k,f=g.editedItem.subColumn;if("move"==l&&this.subColumns&&1<this.subColumns.length){var p=this.getSubColumnIndex(f),
r=!0;-1!=p&&(this._checkDir(d,"left")?0==p?f=this.subColumns[this.subColumns.length-1]:(r=!1,f=this.subColumns[p-1]):this._checkDir(d,"right")&&(p==this.subColumns.length-1?f=this.subColumns[0]:(r=!1,f=this.subColumns[p+1])),r&&(m=this.renderData.dateModule.add(k,a,b)))}else m=this.renderData.dateModule.add(k,a,b);this._startItemEditingGesture([k],l,"keyboard",c);this._moveOrResizeItemGesture([m],"keyboard",c,f);this._endItemEditingGesture(l,"keyboard",c,!1);"move"==l?-1==this.renderData.dateModule.compare(m,
k)?this.ensureVisibility(g.editedItem.startTime,g.editedItem.endTime,"start"):this.ensureVisibility(g.editedItem.startTime,g.editedItem.endTime,"end"):this.ensureVisibility(g.editedItem.startTime,g.editedItem.endTime,"end")},_onKeyDown:function(g){var d=this.get("focusedItem");switch(g.keyCode){case c.ESCAPE:this._isEditing&&(this._editingGesture&&this._endItemEditingGesture("keyboard",g,!0),this._endItemEditing("keyboard",!0),this._edProps=null);break;case c.SPACE:h.stop(g);null!=d&&this.setItemSelected(d,
g.ctrlKey?!this.isItemSelected(d):!0);break;case c.ENTER:h.stop(g);null!=d&&(this._isEditing?this._endItemEditing("keyboard",!1):(g=this.rendererManager.itemToRenderer[d.id])&&0<g.length&&this.isItemEditable(d,g[0].kind)&&(this._edProps={renderer:g[0],rendererKind:g[0].kind,tempEditedItem:d,liveLayout:this.liveLayout},this.set("selectedItem",d),this._startItemEditing(d,"keyboard")));break;case c.LEFT_ARROW:h.stop(g);this._isEditing?this._keyboardItemEditing(g,"left"):this._handlePrevNextKeyCode(g,
-1);break;case c.RIGHT_ARROW:h.stop(g);this._isEditing?this._keyboardItemEditing(g,"right"):this._handlePrevNextKeyCode(g,1);break;case c.UP_ARROW:this._isEditing?this._keyboardItemEditing(g,"up"):this.scrollable&&this.scrollView(-1);break;case c.DOWN_ARROW:this._isEditing?this._keyboardItemEditing(g,"down"):this.scrollable&&this.scrollView(1)}}})})},"dojox/calendar/Mouse":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/dom-geometry dojo/mouse dojo/on dojo/keys".split(" "),
function(r,p,m,l,h,c,g,d,n){return p("dojox.calendar.Mouse",null,{triggerExtent:3,postMixInProperties:function(){this.inherited(arguments);this.on("rendererCreated",l.hitch(this,function(a){var b=a.renderer.renderer;this.own(d(b.domNode,"click",l.hitch(this,function(a){m.stop(a);this._onItemClick({triggerEvent:a,renderer:b,item:b.item._item})})));this.own(d(b.domNode,"dblclick",l.hitch(this,function(a){m.stop(a);this._onItemDoubleClick({triggerEvent:a,renderer:b,item:b.item._item})})));this.own(d(b.domNode,
"contextmenu",l.hitch(this,function(a){this._onItemContextMenu({triggerEvent:a,renderer:b,item:b.item._item})})));b.resizeStartHandle&&this.own(d(b.resizeStartHandle,"mousedown",l.hitch(this,function(a){this._onRendererHandleMouseDown(a,b,"resizeStart")})));b.moveHandle&&this.own(d(b.moveHandle,"mousedown",l.hitch(this,function(a){this._onRendererHandleMouseDown(a,b,"move")})));b.resizeEndHandle&&this.own(d(b.resizeEndHandle,"mousedown",l.hitch(this,function(a){this._onRendererHandleMouseDown(a,b,
"resizeEnd")})));this.own(d(b.domNode,"mousedown",l.hitch(this,function(a){this._rendererMouseDownHandler(a,b)})));this.own(d(a.renderer.container,g.enter,l.hitch(this,function(a){b.item&&!this._editingGesture&&(this._setHoveredItem(b.item.item,b),this._onItemRollOver(this.__fixEvt({item:b.item._item,renderer:b,triggerEvent:a})))})));this.own(d(b.domNode,g.leave,l.hitch(this,function(a){b.item&&!this._editingGesture&&(this._setHoveredItem(null),this._onItemRollOut(this.__fixEvt({item:b.item._item,
renderer:b,triggerEvent:a})))})))}))},_onItemRollOver:function(a){this._dispatchCalendarEvt(a,"onItemRollOver")},onItemRollOver:function(a){},_onItemRollOut:function(a){this._dispatchCalendarEvt(a,"onItemRollOut")},onItemRollOut:function(a){},_rendererMouseDownHandler:function(a,b){m.stop(a);this.selectFromEvent(a,b.item._item,b,!0);this._setTabIndexAttr&&this[this._setTabIndexAttr].focus()},_onRendererHandleMouseDown:function(a,b,c){m.stop(a);this.showFocus=!1;var g=b.item.item;this.isItemBeingEdited(g)||
(this._isEditing&&this._endItemEditing("mouse",!1),this.selectFromEvent(a,b.item._item,b,!0),this._setTabIndexAttr&&this[this._setTabIndexAttr].focus(),this._edProps={editKind:c,editedItem:g,rendererKind:b.rendererKind,tempEditedItem:g,liveLayout:this.liveLayout},this.set("focusedItem",this._edProps.editedItem));b=[];b.push(d(h.doc,"mouseup",l.hitch(this,this._editingMouseUpHandler)));b.push(d(h.doc,"mousemove",l.hitch(this,this._editingMouseMoveHandler)));g=this._edProps;g.handles=b;g.eventSource=
"mouse";g.editKind=c;this._startPoint={x:a.screenX,y:a.screenY}},_editingMouseMoveHandler:function(a){var b=this._edProps;if(this._editingGesture)this._autoScroll(a.pageX,a.pageY,!0)||this._moveOrResizeItemGesture([this.getTime(a)],"mouse",a,this.getSubColumn(a));else if(Math.abs(this._startPoint.x-a.screenX)>=this.triggerExtent||Math.abs(this._startPoint.y-a.screenY)>=this.triggerExtent)this._isEditing||this._startItemEditing(b.editedItem,"mouse"),b=this._edProps,this._startItemEditingGesture([this.getTime(a)],
b.editKind,"mouse",a)},_editingMouseUpHandler:function(a){var b=this._edProps;this._stopAutoScroll();this._isEditing?(this._editingGesture&&this._endItemEditingGesture("mouse",a),this._endItemEditing("mouse",!1)):r.forEach(b.handles,function(a){a.remove()})},_autoScroll:function(a,b,d){if(!this.scrollable||!this.autoScroll)return!1;var g=c.position(this.scrollContainer,!0);a=d?b-g.y:a-g.x;d=d?g.h:g.w;if(0>a||a>d)return this._startAutoScroll(Math.floor((0>a?a:a-d)/2)/3),!0;this._stopAutoScroll();return!1}})})},
"webview/reliable/_enterpriseSchedule/calendarEvents/Calendar":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang webview/util/dateUtils webview/util/globalConstants ./Date ./DateRange ./Event ./Recurrence ./Weekly".split(" "),function(r,p,m,l,h,c,g,d,n,a){return p("webview/reliable/_enterpriseSchedule/calendarEvents/Calendar",d,{encode:function(a,c){var b,d=a[0].repeat["for"],f,g={},h={};c[d]||(c[d]=this._buildIOEvent(a[0]),f=c[d],f.repeat.type=this.REPEAT_CALENDAR,f.repeat.value=
[]);f=c[d];r.forEach(a,m.hitch(this,function(a){b=this._encode([a]);g[b.index]||(g[b.index]=b,f.repeat.value.push(b.repeat));a=b.timeValues[0].startTime;h[a]||(f.timeValues=f.timeValues.concat(b.timeValues),h[a]=b)}))},groupedEncode:function(a){a=this._groupCalendarsByFor(a);var b=[],c=function(a,b){b.repeat.value instanceof Array?this._encodeMultipleValues(b,a):this._encodeSingleValue(b.repeat.value,a)},d;for(d in a)if(a[d]){var f=a[d],g=this._buildIOEvent(f[0]);g.timeValues=this._encodeTimeValues(f);
g.repeat.value=[];r.forEach(f,m.hitch(this,c,g));b.push(g)}return b},_encodeSingleValue:function(a,c){switch(a.type){case h.REPEAT_EXCEPTION:c.repeat.value.push(a);break;case h.REPEAT_RECURRENCE:if(a.value.dow instanceof Array)for(var b=0;b<a.value.dow.length;b++)c.repeat.value.push({type:h.REPEAT_RECURRENCE,value:{dow:a.value.dow[b],wom:a.value.wom,m:a.value.m}});else"delete"!==a.action&&c.repeat.value.push(a);c.repeat.value=c.repeat.value.sort(this._sortCalendarValues)}},_encodeMultipleValues:function(a,
c){for(var b=0;b<a.repeat.value.length;++b)this._encodeSingleValue(a.repeat.value[b],c)},_sortCalendarValues:function(a,c){var b=0;return b=a.action&&!c.action?-1:!a.action&&c.action?1:a.action&&c.action?"delete"===a.action&&"delete"!==c.action?-1:"delete"!==a.action&&"delete"===c.action?1:"delete"!==a.action&&"delete"!==c.action?"add"===a.action&&"add"!==c.action?-1:"add"!==a.action&&"add"===c.action?1:0:0:0},_groupCalendarsByFor:function(a){var b={};r.forEach(a,m.hitch(this,function(a){var c=this.getUniqueIndex(a);
b[c]?b[c].push(a):b[c]=[a]}));return b},getUniqueIndex:function(a){for(var b=17,b=void 0===a.npriority?"high"===a.priority?2:9:a.npriority,c=m.clone(a.label.toLowerCase()),d=0,f=0;f<c.length;f++)d+=c.charCodeAt(f)*(f+1);0>d&&(d*=-1);for(f=c=0;f<a.schedules.length;f++)c+=a.schedules[f];var g=0;switch(a.repeat.value.type){case h.REPEAT_EXCEPTION:for(f=0;f<a.repeat.value.value.length;++f)g^=this._getDateRepeatUniqueIndex(a.repeat.value.value[f]);break;case h.REPEAT_RECURRENCE:for(f=0;f<a.repeat.value.value.length;++f)g^=
this._getRecurrenceRepeatUniqueIndex(a.repeat.value.value[f])}g=(g+b)*(19+c+d)^this._getDateRepeatUniqueIndex(a.repeat.start);g^=this._getDateRepeatUniqueIndex(a.repeat.end);if(null!==a.blockId){var l=0;r.forEach(a.blockId,function(a,b){l+=a*(b+1)});g*=l}return g},decode:function(b,d){var k=[],q=null,f=null,p=null,t=null;b.repeat.start&&b.repeat.end&&(p=l.bacnetDateToJSDate(b.repeat.start),t=l.bacnetDateToJSDate(b.repeat.end));p&&p>=d.start&&(d.start=p);t&&t<=d.end&&(d.end=t);r.forEach(b.repeat.value,
m.hitch(this,function(l,m,p){var u=m.value;if(m.type===h.REPEAT_RECURRENCE&&!(u.dow instanceof Array)){for(var t=[],r=0;r<l.length;++r)t.push(l[r].value.dow);u.dow=t}q={repeat:{type:b.repeat.type,"for":b.repeat["for"],runOnce:!0,start:b.repeat.start||null,end:b.repeat.end||null,value:[{type:m.type,value:m.value,index:p}]},timeValues:b.timeValues,label:b.label,startValue:b.startValue,endValue:b.endValue||null,schedules:b.schedules,index:b.index,groupId:b.groupId,eventId:b.eventId,npriority:b.npriority,
priority:b.priority,color:b.color,exclude:b.exclude,blockId:b.blockId,sourceScheduleId:b.sourceScheduleId,sourceScheduleName:b.sourceScheduleName};try{switch(q.repeat.value[0].type){case this.REPEAT_WEEKLY:f=new a;break;case this.REPEAT_EXCEPTION:f=new c;break;case this.REPEAT_DATE_RANGE:f=new g;break;case this.REPEAT_RECURRENCE:f=new n;break;default:console.error(this.declaredClass+" - decode(): Invalid repeat type",q.repeat.type,q)}}catch(E){console.error("Bacnet Calendar Event Error trying to decode calendar events",
E,E.message,q.repeat.type,q)}k=k.concat(f.decode(q,d,!0))},m.clone(b.repeat.value)));return k},_getDateRepeatUniqueIndex:function(a){return 3*(13*(37*a.dom+a.m)+a.y)},_getRecurrenceRepeatUniqueIndex:function(a){return 7*(11*(17*a.m+a.dow)+a.wom)}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Date":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang webview/util/dateUtils webview/util/globalConstants ./_IOEvent ./Event".split(" "),function(r,p,m,l,h,c,g){return p("webview/reliable/_enterpriseSchedule/calendarEvents/Date",
g,{encode:function(c){var d={};r.forEach(c,m.hitch(this,function(a){var b;b=void 0===a.npriority?"high"===a.priority?2:9:a.npriority;for(var c=this.getUniqueIndex(a.repeat.value.y,a.repeat.value.m,a.repeat.value.dom,a.label,a.schedules,a.blockId,b);d[c];)b++,c=this.getUniqueIndex(a.repeat.value.y,a.repeat.value.m,a.repeat.value.dom,a.label,a.schedules,a.blockId,b);d[c]||(d[c]=[]);d[c].push(a)}));c=[];for(var a in d)this._getTimeValues(d[a],this.REPEAT_EXCEPTION,c);return c},getUniqueIndex:function(c,
g,a,b,h,k,l){for(var f=m.clone(b),f=f.toLowerCase(),d=b=0;d<f.length;d++)b+=f.charCodeAt(d)*(d+1);0>b&&(b*=-1);for(d=f=0;d<h.length;d++)f+=h[d];0>f&&(f*=-1);c=19*(3*(13*(37*a+g)+c)+l)+b+f;if(null!==k){var n=0;r.forEach(k,function(a,b){n+=a*(b+1)});c*=n}0>c&&(c*=-1);return c},decode:function(d,g,a){for(var b=[],n=null,k=this._buildTimeValues(d.timeValues),q=0;q<k.length;q++)if(n=k[q],"string"!==typeof n.startValue||"default value"!==n.startValue.toLowerCase())for(var f=this._setDateAndTime(n),p=a?
d.repeat.value[0].value:d.repeat.value,r=p.m,z=p.y,p=p.dom,x=m.clone(g.start),y=m.clone(g.end),v,A;x>=g.start&&x<=y;){A=!1;v=new Date(0);var C=0===x.getMonth()?9:x.getMonth()-2;v.setMonth(C);x.getDate()===p&&(v.setDate(p),A=!0);p===h.WILDCARD&&(v.setDate(x.getDate()),A=!0);A&&(x.getFullYear()===z&&v.setFullYear(z),x.getMonth()===r&&v.setMonth(r),z===h.WILDCARD&&v.setFullYear(x.getFullYear()),r===h.WILDCARD&&v.setMonth(x.getMonth()),l.isSameDate(x,v)&&(A=m.clone(v),this._setTime(v,A,f.startTime,f.endTime),
C=new c(d),b.push(this._buildEvent(C,v,A,n.startValue,n.endValue,n.summaryColor))));x.setDate(x.getDate()+1)}return b}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/_IOEvent":function(){define(["dojo/_base/declare","webview/util/globalConstants"],function(r,p){return r("webview/reliable/_enterpriseSchedule/calendarEvents/_IOEvent",null,{constructor:function(m){this.eventId=m.eventId||-1;this.groupId=m.groupId||"";this.index=null!==m.index?m.index:Number.MAX_SAFE_INTEGER;this.label=m.label||
"New Event";this.repeat=m.repeat||{};this.priority=null!==m.priority?m.priority:"normal";this.npriority=m.npriority||p.MAX_PRIORITY;this.schedules=m.schedules||[];this.timeValues=m.timeValues||[];this.action=m.action||"update";this.exclude=m.exclude||!1;this.reason=m.reason||"";this.sourceScheduleId=m.sourceScheduleId||-1;this.sourceScheduleName=m.sourceScheduleName||"";this.blockId=!m.blockId||m.blockId instanceof Array?void 0===m.blockId?null:m.blockId:[m.blockId]}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Event":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date webview/util/dateUtils webview/util/globalConstants webview/util/util ./_IOEvent ./CalEvent".split(" "),
function(r,p,m,l,h,c,g,d,n){return p("webview/reliable/_enterpriseSchedule/calendarEvents/Event",null,{DEFAULT_VALUE:"default value",MILLISECONDS_IN_DAY:c.DAY_IN_MILLISECONDS,REPEAT_CALENDAR:c.REPEAT_CALENDAR,REPEAT_DATE_RANGE:c.REPEAT_RANGE,REPEAT_EXCEPTION:c.REPEAT_EXCEPTION,REPEAT_WEEKLY:c.REPEAT_WEEKLY,REPEAT_OVERRIDE:c.REPEAT_OVERRIDE,REPEAT_RECURRENCE:c.REPEAT_RECURRENCE,TIMEVALUE_TYPE:{START_EVENT:0,END_EVENT:1},summaryColours:null,constructor:function(a){this.summaryColours=a?a.summaryColours||
null:null},decode:function(){throw"Must be implemented by child class";},encode:function(a){return this._encode(a)},_buildEvent:function(a,b,c,d,g,f){a.startTime=b;a.endTime=c;a.startValue=d;a.endValue=g;a.summaryColor=f;return a},_buildIOEvent:function(a){return new d({groupId:a.groupId,eventId:a.eventId,index:a.index,label:a.label,repeat:m.clone(a.repeat),priority:a.priority,npriority:a.npriority,schedules:a.schedules,timeValues:[],action:a.action,blockId:a.blockId,exclude:a.exclude||!1,reason:a.reason||
"",sourceScheduleId:a.sourceScheduleId||-1,sourceScheduleName:a.sourceScheduleName||""})},_buildTimeValues:function(a){for(var b=null,c=null,d=this.DEFAULT_VALUE,g=[],f={},h=0;a&&h<a.length;h++)c=a[h],"undefined"!==typeof c.endValue?(d=this._setLastEnd(c.endValue),b=c.endTime):(c.endValue=this.DEFAULT_VALUE,c.endTime="23:59:59"),d!==this.DEFAULT_VALUE&&(f={},f.startTime=b,f.endTime=h!==a.length-1?a[h+1].startTime:"23:59:59",f.startValue=d,f.endValue=this.DEFAULT_VALUE,f.summaryColor=this._getSummaryColourForValue(Number(d)),
g.push(f),b="",d=this.DEFAULT_VALUE),g.push(c);return g},_dateToTimeValue:function(a){return g.pad(a.getHours(),2,"0")+":"+g.pad(a.getMinutes(),2,"0")+":"+g.pad(a.getSeconds(),2,"0")},_encode:function(a){var b=null;try{var b=this._buildIOEvent(a),c={},d=[];c[a.index]||(c[a.index]={});var g=a.startTime;c[a.index]&&!c[a.index][g]&&(c[a.index][g]=a,d.push(a));b.timeValues=this._encodeTimeValues(d)}catch(f){}return b},_encodeTimeValues:function(a){var b=[],c=[],d={};r.forEach(a,function(a,f){d={};var g=
""+this._dateToTimeValue(a.startTime)+this._dateToTimeValue(a.endTime);c[g]||(c[g]=[],a.startValue!==a.endValue&&a.startTime.getTime()!==a.endTime.getTime()&&"delete"!==a.action&&"clean"!==a.dirty&&(d.startTime=this._dateToTimeValue(a.startTime),d.endValue=a.endValue,d.startValue=a.startValue,d.id=f,a.endTime?d.endTime=this._dateToTimeValue(a.endTime):delete d.endTime,b.push(d)))},this);return this._mergeAllTimeValues(b)},_getDayDifference:function(a,b){a.setHours(0,0,1);b.setHours(0,0,1);return l.difference(a,
b)},_getDirtyEvent:function(a,b){for(var c=0;c<a.length;c++)if(a[c].dirty===b)return a[c]},_getModifiedDate:function(a,b,c,d,g){0===g?(a.endTime.setDate(b),a.endTime.setHours(23,59,59)):g===d?(a.startTime.setDate(c),a.startTime.setHours(0,0,0)):(a.startTime.setDate(b+g),a.startTime.setHours(0,0,0),a.endTime.setDate(b+g),a.endTime.setHours(23,59,59))},_getSpannedTimeValues:function(a,b,d,g){for(var k=this._getDayDifference(new Date(a.startTime),new Date(a.endTime)),f=new n(a),h=0;h<=k;h++){f.startTime=
new Date(a.startTime);f.endTime=new Date(a.endTime);d=new Date(f.startTime);d.setDate(d.getDate()+h);this._getModifiedDate(f,a.startTime.getDate(),a.endTime.getDate(),k,h);if(0!==h){switch(b){case this.REPEAT_WEEKLY:break;case this.REPEAT_EXCEPTION:f.repeat.value.y=a.repeat.value.y===c.WILDCARD?c.WILDCARD:d.getFullYear();f.repeat.value.m=a.repeat.value.m===c.WILDCARD?c.WILDCARD:d.getMonth();f.repeat.value.dom=d.getDate();break;case this.REPEAT_RECURRENCE:f.repeat.value.m=a.repeat.value.m===c.WILDCARD?
c.WILDCARD:d.getMonth();f.repeat.value.wom!==c.WILDCARD&&a.startTime.getMonth()!==d.getMonth()&&(f.repeat.value.wom=0);f.repeat.value.dow=d.getDay();break;default:console.error("Event.js - _getTimeValues(): Invalid repeat type",b)}f.eventId=-1;f.action="add"}d=this._buildIOEvent(f);d.timeValues=this._encodeTimeValues([f]);g.push(d)}},_getSummaryColourForValue:function(a){for(var b="",c=0;c<this.summaryColours.length;c++)if(a<=this.summaryColours[c].value){b=this.summaryColours[c].colour;break}""===
b&&(b=this.summaryColours[this.summaryColours.length-1].colour);return b},_getTimeFromString:function(a){var b=new Date;a=a.split(":");2===a.lenght&&(a[2]="00");b.setHours(a[0],a[1],a[2],0);return b.getTime()},_getTimeValues:function(a,b,c){var d=this._getDirtyEvent(a,"dirty"),g=this._getDirtyEvent(a,"merged"),f=null,h=g?g:d;g&&d&&!this._haveSameSchedules(g,d)&&(h.schedules=d.schedules);0===l.compare(h.startTime,h.endTime,"date")||b===this.REPEAT_DATE_RANGE?(f=this._buildIOEvent(h),f.timeValues=this._encodeTimeValues(a),
c.push(f),void 0!==g&&void 0!==d&&g.index!==Number.MAX_SAFE_INTEGER&&d.index!==Number.MAX_SAFE_INTEGER&&g.index!==d.index&&(d.action="delete",a=this._buildIOEvent(d),c.push(a))):this._getSpannedTimeValues(h,b,f,c)},_hasTime:function(a){return void 0!==a&&null!==a&&a&&""!==a},_haveSameSchedules:function(a,b){if(a.schedules.length!==b.schedules.length)return!1;for(var c=0;c<a.schedules.length;c++)if(a.schedules[c]!==b.schedules[c])return!1;return!0},_mergeAllTimeValues:function(a){var b=[],c=[],d=!1,
g={start:null,squashedStart:null};r.forEach(a,m.hitch(this,function(a){b.push({id:a.id,time:a.startTime,value:a.startValue,type:this.TIMEVALUE_TYPE.START_EVENT});b.push({time:a.endTime,value:a.endValue,id:a.id,type:this.TIMEVALUE_TYPE.END_EVENT})}));for(b.sort(m.hitch(this,function(a,b){var c=this._getTimeFromString(a.time),f=this._getTimeFromString(b.time);return c>f?-1:c<f?1:a.type<b.type?-1:a.type>b.type?1:a.id>b.id?-1:a.id<b.id?1:0}));0<b.length;)a=b.pop(),a.type===this.TIMEVALUE_TYPE.START_EVENT?
d=this._mergeStartTime(c,g,a):d?d=!1:this._mergeEndTime(b,c,g,a);return c},_mergeEndTime:function(a,b,c,d){var g=function(a){a!==c.start.value&&(b.push({startTime:c.start.time,startValue:c.start.value,endTime:d.time,endValue:a}),c.start=null)},f=0<a.length?a[a.length-1]:{time:null};null!==c.squashedStart?d.id===c.squashedStart.id||c.squashedStart.value===d.value?c.squashedStart=null:f.time===d.time?f.type===this.TIMEVALUE_TYPE.START_EVENT?g(f.value):(c.squashedStart=null,a.pop(),f=0<a.length?a[a.length-
1]:{time:null},f.time===d.time?g(f.value):g(this.DEFAULT_VALUE)):(c.squashedStart.id!==d.id&&(a=c.squashedStart.value,g(a),c.start={id:d.id,time:d.time,value:a,type:this.TIMEVALUE_TYPE.START_EVENT}),c.squashedStart=null):f.time===d.time?c.start.value!==f.value?g(f.value):a.pop():g(this.DEFAULT_VALUE)},_mergeStartTime:function(a,b,c){if(null===b.start)return b.start=c,!1;if(b.start.time===c.time)return b.start=c,!0;if(b.start.value!==c.value)return c.id>b.start.id?(a.push({startTime:b.start.time,startValue:b.start.value,
endTime:c.time,endValue:c.value}),b.squashedStart=b.start,b.start=c):b.squashedStart=c,!1;b.start.id=Math.max(b.start.id,c.id);return!0},_setDateAndTime:function(a,b){var c=h.getFirstDayOfWeek(new Date);b||(b=c.getDay());var d=new Date(c.getTime()),c=new Date(c.getTime()),d=l.add(d,"day",b-1),d=this._setHoursAndMinutes(d,a.startTime);a.endTime?(c=l.add(c,"day",b-1),c=this._setHoursAndMinutes(c,a.endTime)):c.setHours(23,59,59);return{startTime:d,endTime:c}},_setDayOfWeek:function(a,b){var c=a.getDay(),
c=b-c;a.setDate(a.getDate()+c);return a},_setHoursAndMinutes:function(a,b){var c=b.split(":");2===c.length&&(c[2]="00");a.setHours(c[0],c[1],c[2]);return a},_setLastEnd:function(a){var b=null;this._hasTime(a)&&("string"===typeof a&&(b=a.toLowerCase()),b!==this.DEFAULT_VALUE&&(b=a));return b},_setTime:function(a,b,c,d){a.setHours(c.getHours());b.setHours(d.getHours());a.setMinutes(c.getMinutes());b.setMinutes(d.getMinutes());a.setSeconds(c.getSeconds());b.setSeconds(d.getSeconds())}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/DateRange":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang webview/util/globalConstants ./_IOEvent ./Event".split(" "),
function(r,p,m,l,h,c){return p("webview/reliable/_enterpriseSchedule/calendarEvents/DateRange",c,{encode:function(c){var d={};r.forEach(c,m.hitch(this,function(a){var b;b=void 0===a.npriority?"high"===a.priority?2:9:a.npriority;var c=this.getUniqueIndex(a.repeat.value.start.y,a.repeat.value.start.m,a.repeat.value.start.dom,a.label,a.schedules,a.blockId,b),c=c|this.getUniqueIndex(a.repeat.value.end.y,a.repeat.value.end.m,a.repeat.value.end.dom,a.label,a.schedules,a.blockId,b);d[c]||(d[c]=[]);d[c].push(a)}));
c=[];for(var g in d)this._getTimeValues(d[g],l.REPEAT_RANGE,c);return c},getUniqueIndex:function(c,d,h,a,b,l,k){for(var g=m.clone(a),g=g.toLowerCase(),f=a=0;f<g.length;f++)a+=g.charCodeAt(f)*(f+1);0>a&&(a*=-1);for(f=g=0;f<b.length;f++)g+=b[f];0>g&&(g*=-1);c=19*(3*(13*(37*h+d)+c)+k)+a+g;if(null!==l){var n=0;r.forEach(l,function(a,b){n+=a*(b+1)});c*=n}0>c&&(c*=-1);return c},decode:function(c,d,l){var a=[],b=null,g=null,k=null,b=c.repeat,n=this._buildTimeValues(c.timeValues),f=l?m.clone(b.value[0].value.start):
m.clone(b.value.start);l=l?m.clone(b.value[0].value.end):m.clone(b.value.end);for(var p=0;p<n.length;p++)if(b=n[p],"string"!==typeof b.startValue||"default value"!==b.startValue.toLowerCase()){var r=this._getBoundedEventDate(d.start,f),z=this._getBoundedEventDate(d.end,l);r<=d.start&&(r=m.clone(d.start));for(z>=d.end&&(z=m.clone(d.end));r>=d.start&&r<=z;){var g=new Date(0),g=m.clone(r),k=m.clone(g),x=this._setDateAndTime(b);this._setTime(g,k,x.startTime,x.endTime);x=new h(c);g=this._buildEvent(x,
g,k,b.startValue,b.endValue,b.summaryColor);a.push(g);r.setDate(r.getDate()+1)}}return a},_getBoundedEventDate:function(c,d){var g=m.clone(c);d.y!==l.WILDCARD&&g.setFullYear(d.y);var a=null;d.m!==l.WILDCARD&&(a=g.getDate(),g.setDate(1),g.setMonth(d.m));d.dom!==l.WILDCARD?g.setDate(d.dom):null!=a&&g.setDate(a);return g}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Recurrence":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang webview/util/globalConstants ./_IOEvent ./Event".split(" "),
function(r,p,m,l,h,c){return p("webview/reliable/_enterpriseSchedule/calendarEvents/Recurrence",c,{encode:function(c){var d={};r.forEach(c,m.hitch(this,function(a){var b=this.getUniqueIndex(a.repeat.value.m,a.repeat.value.wom,a.repeat.value.dow,a.label,a.schedules,a.blockId,void 0===a.npriority?"high"===a.priority?2:9:a.npriority);d[b]||(d[b]=[]);d[b].push(a)}));c=[];for(var g=Object.keys(d),a=0;a<g.length;++a)this._getTimeValues(d[g[a]],this.REPEAT_RECURRENCE,c);return c},getUniqueIndex:function(c,
d,h,a,b,l,k){for(var g=m.clone(a),g=g.toLowerCase(),f=a=0;f<g.length;f++)a+=g.charCodeAt(f)*(f+1);0>a&&(a*=-1);for(f=g=0;f<b.length;f++)g+=b[f];0>g&&(g*=-1);c=19*(7*(11*(17*c+h)+d)+k)+a+g;if(null!==l){var n=0;r.forEach(l,function(a,b){n+=a*(b+1)});c*=n}0>c&&(c*=-1);return c},decode:function(c,d,n){for(var a=[],b=this._buildTimeValues(c.timeValues),g=null,k=0;k<b.length;k++){var q=n?c.repeat.value[0].value:c.repeat.value;if(q.m!==l.WILDCARD||q.wom!==l.WILDCARD)console.error("Unsupported repeat pattern",
q);else if(g=b[k],"string"!==typeof g.startValue||"default value"!==g.startValue.toLowerCase())for(var f=this._setDateAndTime(g),q=n?q.dow[c.repeat.value[0].index]:q.dow,p=m.clone(d.start),r=m.clone(d.end),z,x;p>=d.start&&p<=r;){if(q===p.getDay()){z=m.clone(p);x=m.clone(p);this._setTime(z,x,f.startTime,f.endTime);var y=new h(c);a.push(this._buildEvent(y,z,x,g.startValue,g.endValue,g.summaryColor))}p.setDate(p.getDate()+1)}}return a}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Weekly":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/store/Memory ./_IOEvent ./Event".split(" "),
function(r,p,m,l,h,c){return p("webview/reliable/_enterpriseSchedule/calendarEvents/Weekly",c,{_getEventsForDayByAction:function(c,d,h){return h.repeat.value instanceof Array?h.action===d&&h.repeat.value[0]===c:h.action===d&&h.repeat.value===c},encode:function(c){var d=new l({data:c}),g={};r.forEach(c,m.hitch(this,function(a){g[a.repeat.value]||(g[a.repeat.value]=!0)}));c=[];for(var a=Object.keys(g),b=0;b<a.length;++b){var h=d.query(m.hitch(this,this._getEventsForDayByAction,Number(a[b]),"update")),
k=d.query(m.hitch(this,this._getEventsForDayByAction,Number(a[b]),"add"));k.length&&h.forEach(function(a){a.eventId=-1;a.action="add";a.schedules=k[0].schedules});h.push.apply(h,k);0<h.length&&this._getTimeValues(h,this.REPEAT_WEEKLY,c);h=d.query(m.hitch(this,this._getEventsForDayByAction,Number(a[b]),"delete"));this._removeTimevalues(c,h);c.push.apply(c,h)}return c},decode:function(c,d,l){for(var a=[],b,g,k=m.clone(d.start),n=this._buildTimeValues(c.timeValues),f=null;k>=d.start&&k<=d.end;){for(var p=
0;p<n.length;p++)if(f=n[p],"string"!==typeof f.startValue||"default value"!==f.startValue.toLowerCase()){var r=this._setDateAndTime(f,c.repeat.value);b=m.clone(k);g=m.clone(b);this._setTime(b,g,r.startTime,r.endTime);l?(b=this._setDayOfWeek(b,c.repeat.value[0].value),g=this._setDayOfWeek(g,c.repeat.value[0].value)):(b=this._setDayOfWeek(b,c.repeat.value),g=this._setDayOfWeek(g,c.repeat.value));r=new h(c);b=this._buildEvent(r,b,g,f.startValue,f.endValue,f.summaryColor);a.push(b)}k.setDate(k.getDate()+
7)}return a},_removeTimevalues:function(c,d){for(var g=d.length-1;0<=g;--g)for(var a=0;a<c.length;++a)d[g].eventId===c[a].eventId&&d.splice(g);for(g=0;g<c.length;++g)"undefined"!==typeof c[g].timeValues&&this._removeOverlappingTimeValues(c[g].timeValues)},_removeOverlappingTimeValues:function(c){for(var d,g,a,b,h=c.length-1;0<=h;--h){d=this._getTimeFromString(c[h].startTime);g=this._getTimeFromString(c[h].endTime);for(var k=h-1;0<=k;--k)a=this._getTimeFromString(c[k].startTime),b=this._getTimeFromString(c[k].endTime),
d<=a&&g>=b&&c.splice(k,1)}}})})},"webview/reliable/_enterpriseSchedule/EventManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/promise/all dojo/store/Memory webview/util/globalConstants ./calendarEvents/Calendar ./calendarEvents/CalEvent ./calendarEvents/Date ./calendarEvents/DateRange ./calendarEvents/Event ./calendarEvents/Recurrence ./calendarEvents/Weekly".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){return p("webview/reliable/_enterpriseSchedule/EventManager",
null,{schedule:null,viewRange:null,WEBVIEW_PURPLE:"#5A245E",eventID:0,esData:null,_newGroupId:0,_eventConflictTypes:{noConflict:0,highEncompass:1,lowEncompass:2,lowStart:3,highStart:4},summaryColours:null,valueMap:{2:1,4:0,9:1},constructor:function(a){this.schedule=a.schedule||null;this.viewRange=a.viewRange||null;this.esData=a.esData||null;this.summaryColours=a.summaryColours||null;this.schedule.valueType=this.esData.esDataType;this.schedule.value=this.valueMap[this.schedule.valueType.toString()]},
groupedEncode:function(a){var c=this.schedule;c.events=[];var d;d=new f({summaryColours:this.summaryColours});for(var g=d.encode(a.repeatWeekly),h=0;h<g.length;h++)c.events.push(g[h]);d=new b({summaryColours:this.summaryColours});g=d.encode(a.repeatDate);for(h=0;h<g.length;h++)c.events.push(g[h]);d=new t({summaryColours:this.summaryColours});g=d.encode(a.repeatDateRange);for(h=0;h<g.length;h++)c.events.push(g[h]);d=new q({summaryColours:this.summaryColours});g=d.encode(a.repeatRecurrence);for(h=0;h<
g.length;h++)c.events.push(g[h]);d=new n({summaryColours:this.summaryColours});g=d.groupedEncode(a.repeatCalendar);for(h=0;h<g.length;h++)c.events.push(g[h]);r.forEach(a.repeatOverride,function(a){d=new k({summaryColours:this.summaryColours});c.events.push(d.encode(a))},this);return c},decode:function(a){a=this._getAllEvents(a);r.forEach(a,function(a){delete a.summaryColor});return a},decodeSummary:function(a){a=this._getAllEvents(a);r.forEach(a,function(a){delete a.color});return this._mergeEvents(a)},
_getAllEvents:function(a){this.colorMap=a;var c=new g;r.forEach(this.schedule.events,m.hitch(this,function(a){var g;a.groupId=this._hasGroupId(a)?a.groupId:this._getGroupId();try{switch(a.repeat.type){case d.REPEAT_WEEKLY:g=new f({summaryColours:this.summaryColours});break;case d.REPEAT_EXCEPTION:g=new b({summaryColours:this.summaryColours});break;case d.REPEAT_RANGE:g=new t({summaryColours:this.summaryColours});break;case d.REPEAT_RECURRENCE:g=new q({summaryColours:this.summaryColours});break;case d.REPEAT_CALENDAR:g=
new n({summaryColours:this.summaryColours});break;default:console.error("EventManager.js - decode(): Invalid Repeat Type",a.repeat.type)}}catch(y){console.error(this.declaredClass+" - decode: Enterprise Schedule Error trying to decode calendar events",y,y.message,a.repeat.type,a)}g&&r.forEach(g.decode(a,m.clone(this.viewRange),!1),function(a){c.put(this.buildEvent(a))},this)}));return c.data},_mergeEvents:function(a){var b={},f=[],d=new l,k=new g({data:a}),h=function(a,b){if(b.startTime.getDate()===
a.startTime.getDate())return b};k.query().forEach(m.hitch(this,function(a){"undefined"===typeof b[a.startTime.getDate()]&&(b[a.startTime.getDate()]=k.query(m.hitch(this,h,a)))}));a=Object.keys(b);for(var n=a.length-1;0<=n;--n)f.push(this._mergeEventsByDay(b[a[n]]));c(f).then(m.hitch(this,function(a){for(var b=[],c=0;c<a.length;++c)for(var f=0;f<a[c].length;++f)b.push(a[c][f]);d.resolve(b)}));return d.promise},_getConflictType:function(a,b){return a.startTime>=b.endTime||a.endTime<=b.startTime?this._eventConflictTypes.noConflict:
a.startTime<=b.startTime&&a.endTime>=b.endTime?this._eventConflictTypes.highEncompass:a.startTime>=b.startTime?a.endTime>=b.endTime?this._eventConflictTypes.lowStart:this._eventConflictTypes.lowEncompass:this._eventConflictTypes.highStart},_mergeEventsByDay:function(a){var b=new l;a=a.sort(m.hitch(this,this._sortEvents));setTimeout(m.hitch(this,this._performMerge,a,b));return b.promise},_performMerge:function(a,b){for(var c=[],f,d,g,k=!0,h=!1;0<a.length;){k=!0;f=a[0];for(var l=1;l<a.length;++l){d=
a[l];h=!1;switch(this._getConflictType(d,f)){case this._eventConflictTypes.highEncompass:a.splice(0,1);k=!1;h=!0;break;case this._eventConflictTypes.lowStart:k=!1;d.startValue===f.startValue?(d.startTime=f.startTime,a.splice(0,1),h=!0):f.endTime=d.startTime;break;case this._eventConflictTypes.lowEncompass:k=!1;d.startValue===f.startValue?(d.startTime=f.startTime,d.endTime=f.endTime,a.splice(0,1),h=!0):(g=m.clone(f),g.startTime=d.endTime,f.endTime=d.startTime,a.push(g));break;case this._eventConflictTypes.highStart:k=
!1,d.startValue===f.startValue?(d.endTime=f.endTime,a.splice(0,1),h=!0):f.startTime=d.endTime}if(h)break}k&&(c.push(f),a.splice(0,1));a=a.sort(m.hitch(this,this._sortEvents))}b.resolve(c)},_sortEvents:function(a,b){return a.npriority<b.npriority?1:a.npriority>b.npriority?-1:a.index>b.index?1:a.index<b.index?-1:a.startTime>b.startTime?1:a.startTime>b.startTime?-1:0},buildEvent:function(a){switch(a.repeat.type){case d.REPEAT_RECURRENCE:if(a.repeat.value.dow instanceof Array)return this._buildEvents(a);
case d.REPEAT_WEEKLY:case d.REPEAT_CALENDAR:if(a.repeat.type!==d.REPEAT_RECURRENCE&&a.repeat.value instanceof Array)return this._buildEvents(a);case d.REPEAT_RANGE:case d.REPEAT_EXCEPTION:case d.REPEAT_OVERRIDE:return this._buildEvent(a);default:console.error(this.declaredClass+" - BuildEvent: Invalid Repeat Type",a.repeat.type)}},_getDateInfo:function(a,b,c){var f=new Date(a),d=new Date(b),g=c-a.getDay();f.setDate(a.getDate()+g);a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()&&a.getFullYear()===
b.getFullYear()&&(a=c-b.getDay(),d.setDate(b.getDate()+a));return{start:f,end:d}},_buildEvents:function(b){var c=[],f={},g=0,f=null,k=new a(b);switch(k.repeat.type){case d.REPEAT_WEEKLY:for(g=0;g<b.repeat.value.length;g++)f={type:b.repeat.type,value:b.repeat.value[g]},k.repeat=f,f=this._getDateInfo(k.startTime,k.endTime,f.value),k.startTime=f.start,k.endTime=f.end,0!==g&&(delete k.id,k.index=Number.MAX_SAFE_INTEGER,k.action="add"),c[g]=this._buildEvent(k);return c;case d.REPEAT_RECURRENCE:for(g=0;g<
b.repeat.value.dow.length;g++)f={type:b.repeat.type,value:{m:b.repeat.value.m,wom:b.repeat.value.wom,dow:b.repeat.value.dow[g]}},k.repeat=f,f=this._getDateInfo(k.startTime,k.endTime,f.value.dow),k.startTime=f.start,k.endTime=f.end,0!==g&&(delete k.id,k.index=Number.MAX_SAFE_INTEGER,k.action="add"),c[g]=this._buildEvent(k);return c;case d.REPEAT_CALENDAR:c=[];for(g=b.repeat.value.length-1;0<=g;g--)if(b.repeat.value[g].type===d.REPEAT_RECURRENCE&&b.repeat.value[g].value.dow instanceof Array){for(k=
0;k<b.repeat.value[g].value.dow.length;k++)"delete"!==b.repeat.value[g].action&&(f={type:d.REPEAT_RECURRENCE,value:{dow:b.repeat.value[g].value.dow[k],wom:b.repeat.value[g].value.wom,m:b.repeat.value[g].value.m}},c.push(f));b.repeat.value.splice(g,1)}0<c.length&&(b.repeat.value=b.repeat.value.concat(c));return this._buildEvent(b);default:console.error(this.declaredClass+" - _buildEvents: Unimplemented Event Type",k.repeat.type)}},_buildEvent:function(b){var c=this.valueMap[this.schedule.valueType],
f=this.WEBVIEW_PURPLE;b.blockId||(f=b.color?b.color:this.colorMap[b.sourceScheduleId]);b.startValue=this._hasValue(b.startValue)?b.startValue:c;return new a({groupId:b.groupId||this._getGroupId(),eventId:b.eventId||-1,label:b.label||"New Event",startTime:b.startTime,endTime:b.endTime,startValue:b.startValue,endValue:b.endValue||"Relinquish",schedules:b.schedules||[],sourceScheduleId:b.sourceScheduleId||-1,sourceScheduleName:b.sourceScheduleName||"",value:this.schedule.value,valueType:this.schedule.valueType,
repeat:b.repeat,mnemonic:this.schedule.mnemonic,id:b.id,summary:this._buildLabel(b),isAllDay:this._isAllDay(b.startTime,b.endTime),color:f,priority:null!=b.priority?b.priority:0,action:b.action||"update",index:b.index||0===b.index?b.index:Number.MAX_SAFE_INTEGER,dirty:b.dirty||"clean",npriority:b.npriority,summaryColor:b.summaryColor,blockId:b.blockId||null,exclude:b.exclude||!1,reason:b.reason||""})},_hasValue:function(a){return null===a||void 0===a?!1:!0},_isAllDay:function(a,b){return 0===a.getHours()&&
23===b.getHours()&&0===a.getMinutes()&&59===b.getMinutes()?!0:!1},_getStateText:function(a){var b=a;switch(this.esData.esDataType){case d.DATATYPE_MULTI_STATE:a<=this.esData.esStates.length&&(b=this.esData.esStates[a-1].state);break;case d.DATATYPE_BINARY:b=2>a?0===a?h.off:h.on:a.toString()}return b},_buildLabel:function(a){var b=this.viewRange.end.getTime()-this.viewRange.start.getTime()<=d.WEEK_IN_MILLISECONDS?"\x3cbr /\x3e":" - ";a.label||(a.label="New Event");var c=a.startValue;if(void 0===c||
null===c)c=1;c=this._getStateText(c);return"\x3cspan class\x3d'eventLabel'\x3e"+a.label+b+"\x3c/span\x3eValue: "+c},_getGroupId:function(a){this._hasGroupId()||(a="tmp"+ ++this._newGroupId);return a},_hasGroupId:function(a){return a&&void 0!==a.groupId&&null!=a.groupId&&""!==a.groupId},_isCalendar:function(a){return a.repeat["for"]&&a.repeat["for"].length},onCreateEvent:function(a,b){var c=null;rc.session.canEditException()?c=this.buildEvent({dirty:"dirty",color:this.schedule.isBlockGroup?this.WEBVIEW_PURPLE:
this.colorMap[this.schedule.id],startTime:a,endTime:b,repeat:{type:d.REPEAT_EXCEPTION,value:{y:a.getFullYear(),m:a.getMonth(),dom:a.getDate()}},action:"add",schedules:[Number(this.schedule.id)],blockId:this.schedule.isBlockGroup?this.schedule.id:null}):rc.session.canEditDefault()&&(c=this.buildEvent({color:this.schedule.isBlockGroup?this.WEBVIEW_PURPLE:this.colorMap[this.schedule.id],startTime:a,endTime:b,repeat:{type:d.REPEAT_WEEKLY,value:a.getDay()},action:"add",schedules:[Number(this.schedule.id)],
blockId:this.schedule.isBlockGroup?this.schedule.id:null}));return c},reset:function(a,b,c,f){this.schedule=a;this.viewRange=b;this.eventID=0;this._newGroupId="";this.esData=c;this.summaryColours=f;this.schedule.valueType=this.esData.esDataType;this.schedule.value=this.valueMap[this.schedule.valueType.toString()]}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/CalendarBase":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/i18n!dojox/calendar/nls/buttons dojox/calendar/CalendarBase dojox/widget/_Invalidating dojox/widget/Selection ../StoreMixin ./Mouse".split(" "),
function(r,p,m,l,h,c,g){return p("webview/reliable/_enterpriseSchedule/overriddenViews/CalendarBase",[l,r,g,h,c],{configureButtons:function(){var c=!this.isLeftToRight();this.previousButton&&this.previousButton.set("label",m[c?"nextButton":"previousButton"]);this.nextButton&&this.nextButton.set("label",m[c?"previousButton":"nextButton"]);c&&this.previousButton&&this.nextButton&&(c=this.previousButton,this.previousButton=this.nextButton,this.nextButton=c);this.todayButton&&this.todayButton.set("label",
m.todayButton);this.dayButton&&this.dayButton.set("label",m.dayButton);this.weekButton&&this.weekButton.set("label",m.weekButton);this.fourDaysButton&&this.fourDaysButton.set("label",m.fourDaysButton);this.monthButton&&this.monthButton.set("label",m.monthButton)}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/Mouse":function(){define("dojo/_base/array dojo/_base/event dojo/_base/lang dojo/_base/window dojo/on dojo/touch dojox/calendar/Mouse".split(" "),function(r,p,m,l,h,c,g){return m.extend(g,
{postCreate:function(){this.on("rendererCreated",m.hitch(this,function(d){var g=d.renderer.renderer;g.resizeStartHandle&&this.own(h(g.resizeStartHandle,c.press,m.hitch(this,function(a){this._isTouchEvent(a)&&this._onRendererHandleMouseDown(a,g,"resizeStart")})));g.moveHandle&&this.own(h(g.moveHandle,c.press,m.hitch(this,function(a){this._isTouchEvent(a)&&this._onRendererHandleMouseDown(a,g,"move")})));g.resizeEndHandle&&this.own(h(g.resizeEndHandle,c.press,m.hitch(this,function(a){this._isTouchEvent(a)&&
this._onRendererHandleMouseDown(a,g,"resizeEnd")})));this.own(h(g.domNode,c.press,m.hitch(this,function(a){this._isTouchEvent(a)&&this._rendererMouseDownHandler(a,g)})))}))},_onRendererHandleMouseDown:function(c,g,a){p.stop(c);this.showFocus=!1;var b=g.item.item;this.isItemBeingEdited(b)||(this._isEditing&&this._endItemEditing("mouse",!1),this.selectFromEvent(c,g.item._item,g,!0),this._setTabIndexAttr&&this[this._setTabIndexAttr].focus(),this._isTouchEvent(c)?(this._edProps=null,this.set("focusedItem",
b)):(this._edProps={editKind:a,editedItem:b,rendererKind:g.rendererKind,tempEditedItem:b,liveLayout:this.liveLayout},this.set("focusedItem",this._edProps.editedItem)));g=[];g.push(h(l.doc,"mouseup",m.hitch(this,this._editingMouseUpHandler)));g.push(h(l.doc,"mousemove",m.hitch(this,this._editingMouseMoveHandler)));b=this._edProps;null!==b&&(b.handles=g,b.eventSource="mouse",b.editKind=a);this._startPoint={x:c.screenX,y:c.screenY}},_editingMouseMoveHandler:function(c){if(null!==this._edProps){var d=
this._edProps;if(this._editingGesture)this._autoScroll(c.pageX,c.pageY,!0)||this._moveOrResizeItemGesture([this.getTime(c)],"mouse",c,this.getSubColumn(c));else if(Math.abs(this._startPoint.x-c.screenX)>=this.triggerExtent||Math.abs(this._startPoint.y-c.screenY)>=this.triggerExtent)this._isEditing||this._startItemEditing(d.editedItem,"mouse"),d=this._edProps,this._startItemEditingGesture([this.getTime(c)],d.editKind,"mouse",c)}},_editingMouseUpHandler:function(c){if(null!==this._edProps){var d=this._edProps;
this._stopAutoScroll();this._isEditing?(this._editingGesture&&this._endItemEditingGesture("mouse",c),this._endItemEditing("mouse",!1)):r.forEach(d.handles,function(a){a.remove()})}},_isTouchEvent:function(c){var d=!1;if("touch"===c.pointerType||void 0!==c.touches)d=!0;return d}})})},"webview/reliable/_enterpriseSchedule/widget/CalendarToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/ready dojo/Evented dojo/i18n!webview/nls/all dojo/text!./templates/CalendarToolbar.html webview/util/dateUtils rc/_Widget dijit/form/Button webview/widget/DateRangeNavigator".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return r("webview/reliable/_enterpriseSchedule/widget/CalendarToolbar",[b,g],{templateString:n,webviewStrings:d,_viewRangeButtons:null,_isCompact:!1,_isDataRangeCompact:!1,_labelHidden:!1,_currentSize:0,_fullButtonWidth:0,_fullDateRangeWidth:0,_bufferWidth:40,_labelWidth:0,_currentLabelWidth:0,_currentDateRangeWidth:0,_currentViewButtonWidth:0,_viewChangeComplete:null,postCreate:function(){this.inherited(arguments);this._viewRangeButtons=[];this.set("previousButton",
this.dateRangeNavigator.previousButton);this.set("nextButton",this.dateRangeNavigator.nextButton);this.dateRangeNavigator._initViewDateLabel();this.own(this.dateRangeNavigator.on("dateRangeChange",p.hitch(this,function(a){this.setViewRange(a.start,this.dateRangeNavigator.get("rangeType"),!0)})));this._configureViewRangeButtons()},startup:function(){this.inherited(arguments);c(p.hitch(this,this.toggleSummaryButton,!1))},_calculateDateRangeWidth:function(){if(this.dateRangeNavigator){var a=h.getComputedStyle(this.dateRangeNavigator);
this._currentDateRangeWidth=l.getMarginBox(this.dateRangeNavigator.domNode,a).w}},_calculateViewButtonWidth:function(){var a=h.getComputedStyle(this.buttonContainer);this._currentViewButtonWidth=l.getMarginBox(this.buttonContainer,a).w},_calculateLabelWidth:function(){var a=h.getComputedStyle(this.labelContainer);this._currentLabelWidth=l.getMarginBox(this.labelContainer,a).w},_resize:function(){this.inherited(arguments);var a=arguments[1][0];this._currentSize=a;this._calculateDateRangeWidth();this._calculateViewButtonWidth();
this._calculateLabelWidth();this._currentViewButtonWidth>this._fullButtonWidth&&(this._fullButtonWidth=this._currentViewButtonWidth);this._currentDateRangeWidth>this._fullDateRangeWidth&&(this._fullDateRangeWidth=this._currentDateRangeWidth);var b=this._currentDateRangeWidth+this._currentLabelWidth+this._currentViewButtonWidth,b=a.w-b;if(b<=this._bufferWidth)this._isDataRangeCompact=!0,m.add(this.dateRangeNavigator.viewDateLabel,"compact"),this._calculateDateRangeWidth(),b=this._currentDateRangeWidth+
this._currentLabelWidth+this._currentViewButtonWidth,b=a.w-b,b<=this._bufferWidth&&(this._compactButtonContainer(),this._calculateViewButtonWidth(),b=this._currentDateRangeWidth+this._currentLabelWidth+this._currentViewButtonWidth,b=a.w-b,b<=this._bufferWidth&&(this._labelWidth=this._currentLabelWidth,this._showLabel(!1)));else{var c=b>this._labelWidth+this._bufferWidth;this._labelHidden&&c&&(this._showLabel(!0),this._calculateLabelWidth(),b=this._currentDateRangeWidth+this._currentLabelWidth+this._currentViewButtonWidth,
b=a.w-b);c=b+this._currentViewButtonWidth>=this._fullButtonWidth+this._bufferWidth;this._isCompact&&!this._labelHidden&&c&&(this._uncompactButtonContainer(),this._calculateViewButtonWidth(),b=this._currentDateRangeWidth+this._currentLabelWidth+this._currentViewButtonWidth,b=a.w-b);c=b+this._currentDateRangeWidth>=this._fullDateRangeWidth+this._bufferWidth;this._isDataRangeCompact&&!this._isCompact&&!this._labelHidden&&c&&(this._isDataRangeCompact=!1,m.remove(this.dateRangeNavigator.viewDateLabel,
"compact"),this._calculateDateRangeWidth())}h.set(this.buttonContainer,"right","5px");this._labelHidden||h.set(this.labelContainer,"left",b/2+this._currentDateRangeWidth+"px")},_compactButtonContainer:function(){this._isCompact=!0;this._setButtonCompactLabels();m.add(this.todayButton.domNode,"circularButton");m.add(this.dayButton.domNode,"circularButton");m.add(this.weekButton.domNode,"circularButton");m.add(this.monthButton.domNode,"circularButton");m.add(this.summaryButton.domNode,"circularButton");
m.add(this.editButton.domNode,"circularButton");m.add(this.monthButtonContainer,"compact")},_uncompactButtonContainer:function(){this._isCompact=!1;this._setButtonFullLabels();m.remove(this.todayButton.domNode,"circularButton");m.remove(this.dayButton.domNode,"circularButton");m.remove(this.weekButton.domNode,"circularButton");m.remove(this.monthButton.domNode,"circularButton");m.remove(this.summaryButton.domNode,"circularButton");m.remove(this.editButton.domNode,"circularButton");m.remove(this.monthButtonContainer,
"compact")},_showLabel:function(a){this._labelHidden=!a;a?m.remove(this.labelContainer,"hidden"):m.add(this.labelContainer,"hidden")},updateLabel:function(a){this.labelContainer.innerHTML=a?a:"";this.resize(this._currentSize)},_configureViewRangeButtons:function(){var a=!this.isLeftToRight();this.own(this.previousButton.on("click",p.hitch(this,function(){a?this._doViewChange("next"):this._doViewChange("previous")})));this.own(this.nextButton.on("click",p.hitch(this,function(){a?this._doViewChange("previous"):
this._doViewChange("next")})));this._viewRangeButtons.push(this.todayButton);this.own(this.todayButton.on("click",p.hitch(this,function(){this.doViewChange("today");this._isMonthView=!1})));this._viewRangeButtons.push(this.dayButton);this.own(this.dayButton.on("click",p.hitch(this,function(){this.doViewChange("day");this._isMonthView=!1})));this._viewRangeButtons.push(this.weekButton);this.own(this.weekButton.on("click",p.hitch(this,function(){this.doViewChange("week");this._isMonthView=!1})));this._viewRangeButtons.push(this.monthButton);
this.own(this.monthButton.on("click",p.hitch(this,function(){this.doViewChange("month");this._isMonthView=!0})));this.own(this.summaryButton.on("click",p.hitch(this,this.doViewChange,"summary")));this.own(this.editButton.on("click",p.hitch(this,this.doViewChange,"summary")));this._setButtonFullLabels()},toggleSummaryButton:function(a){a?(m.remove(this.editButton.domNode,"hidden"),m.add(this.summaryButton.domNode,"hidden")):(m.add(this.editButton.domNode,"hidden"),m.remove(this.summaryButton.domNode,
"hidden"))},_doViewChange:function(a){!1!==this._viewChangeComplete&&(this._viewChangeComplete=!1,this.doViewChange(a))},calendarRenderComplete:function(){this._viewChangeComplete=!0},doViewChange:function(a){this.emit("doViewChange",a)},_setButtonFullLabels:function(){this.todayButton._setLabelAttr(d.rcbToday);this.dayButton._setLabelAttr(d.rcbDay);this.weekButton._setLabelAttr(d.rcbWeek);this.monthButton._setLabelAttr(d.rcbMonth)},_setButtonCompactLabels:function(){this.todayButton._setLabelAttr(d.rcbToday.substring(0,
1));this.dayButton._setLabelAttr(d.rcbDay.substring(0,1));this.weekButton._setLabelAttr(d.rcbWeek.substring(0,1));this.monthButton._setLabelAttr(d.rcbMonth.substring(0,1))},getCurrentDateRange:function(){return this.dateRangeNavigator.getCurrentDateRange()},setViewRange:function(a,b,c,f){this._onViewRangeChange(a,b,c,f)},_onViewRangeChange:function(b,c,d,f){this._interval=c;b=a.floorTime(b);var g=0;switch(c){case "day":this._isMonthView=!1;break;case "week":g=6;b=a.getFirstDayOfWeek(b);this._isMonthView=
!1;break;case "month":if(d||!a.isFirstDayOfMonthAndSunday(b)&&!a.isLastSundayofMonth(b))b=new Date(b),b.setDate(1),b.setMonth(b.getMonth()-1),b=a.getLastSundayOfMonth(b);d=new Date(b);1!==b.getDate()&&(d.setDate(1),d.setMonth(d.getMonth()+1));g=a.getDaysInMonth(d);d=a.getDOWOfFirstDayOfMonth(d);g+=d;0!==g%7&&(35>g?g=35:42>g&&(g=42));d=p.clone(b);d=a.ceilingTime(d);d.setDate(d.getDate()+g);g+=6-d.getDay();this._isMonthView=!0}d=p.clone(b);d=a.ceilingTime(d);d.setDate(d.getDate()+g);g={start:b,end:d};
this.dateRangeNavigator.setRangeType(c);this.dateRangeNavigator.setCurrentDateRange(g);this.onViewRangeChange(g);f&&f[0].toString()===b.toString()&&setTimeout(p.hitch(this,this.calendarRenderComplete),150)},disableNavigation:function(a){this.todayButton.set("disabled",a);this.dayButton.set("disabled",a);this.monthButton.set("disabled",a);this.weekButton.set("disabled",a);this.dateRangeNavigator.set("disabled",a)},onViewRangeChange:function(a){this.emit("viewRangeChange",a)},destroy:function(){this.inherited(arguments);
delete this._viewRangeButtons}})})},"webview/widget/DateRangeNavigator":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/popup dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-geometry dojo/keys dojo/on dojo/text!./templates/DateRangeNavigator.html webview/util/dateUtils webview/widget/Calendar dijit/form/Button".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k){return h("webview/widget/DateRangeNavigator",[p,r,m],{templateString:b,widgetsInTemplate:!0,
rangeType:"week",dateRange:{start:null,end:null,label:""},_labelClickHandle:null,_viewDateCalendar:null,_setDisabledAttr:function(b){this.previousButton.set("disabled",b);this.nextButton.set("disabled",b);g.toggle(this.viewDateLabel,"disabled",b);b?null!==this._labelClickHandle&&(this._labelClickHandle.remove(),this._labelClickHandle=null):null===this._labelClickHandle&&(this._labelClickHandle=a(this.viewDateLabel,"click",c.hitch(this,this._onViewDateClick)),this.own(this._labelClickHandle));this._set("disabled",
b)},_initViewDateLabel:function(){this._viewDateCalendar=new k({value:new Date});this.setCurrentDateRange(this._getDefaultDateRange());this.setViewDateLabel(this.rangeType);a(this._viewDateCalendar,"change",c.hitch(this,function(a){var b=t.floorTime(a);a=t.ceilingTime(a);var c=!1;if("month"!==this.rangeType)t.isSameDate(this.dateRange.start,b)||t.isSameDate(this.dateRange.end,a)||(c=!0);else{var d=new Date(this.dateRange.start);d.setDate(this.dateRange.start.getDate()+8);if(d.getMonth()!==b.getMonth()||
d.getFullYear()!==b.getFullYear())c=!0}c&&(this.dateRange.start=b,this.dateRange.end=a,this._onDateRangeChange());l.close(this._viewDateCalendar)}));a(document,"keyup",function(a){a.keyCode===n.ESCAPE&&l.close(this._viewDateCalendar)});a(this._viewDateCalendar,"blur",c.hitch(this,function(){l.close(this._viewDateCalendar)}));this._onDateRangeChange()},_getDefaultDateRange:function(){var a=t.getFirstDayOfWeek(new Date),a=t.floorTime(a),b=c.clone(a);b.setDate(a.getDate()+6);b=t.ceilingTime(b);this.setRangeType("week");
return{start:a,end:b}},_onViewDateClick:function(){var a=d.position(this.viewDateLabel),b=d.getMarginBox(this.viewDateLabel),c=null!==this.dateRange.start?this.dateRange.start:new Date;if("month"===this.rangeType){var g=new Date(c);g.setDate(c.getDate()+8);c=g}this._viewDateCalendar.set("value",c);l.open({popup:this._viewDateCalendar,x:a.x-35,y:a.y+b.h+10});this._viewDateCalendar.focus()},setViewDateLabel:function(){var a=this.dateRange.start,b=this.dateRange.end,c=t.getMonthAbbreviation(a.getMonth()),
d=a.getFullYear();switch(this.rangeType){case "day":b=t.getDayOfWeek(a.getDay());this.dateRange.label=b+", "+a.getDate()+" "+c+" "+d;break;case "week":if(a.getMonth()===b.getMonth())this.dateRange.label=a.getDate()+" - "+b.getDate()+" "+c+" "+d;else{var g=t.getMonthAbbreviation(b.getMonth());this.dateRange.label=a.getDate()+" "+c+" "+d+" - "+b.getDate()+" "+g+" "+b.getFullYear()}break;case "month":d=new Date(a);d.setDate(a.getDate()+8);c=t.getMonthAbbreviation(d.getMonth());d=d.getFullYear();this.dateRange.label=
c+" "+d;break;default:console.error(this.declaredClass+" - setViewDateLabel(): Invalid Range Type",this.rangeType)}this.viewDateLabel.innerHTML=this.dateRange.label},_onDateRangeChange:function(){this.onDateRangeChange({start:this.dateRange.start,end:this.dateRange.end})},onDateRangeChange:function(a){return a},getCurrentDateRange:function(){return c.clone(this.dateRange)},setCurrentDateRange:function(a){null!==a.start&&null!==a.end&&(this.dateRange.start=a.start,this.dateRange.end=t.ceilingTime(a.end),
this.setViewDateLabel())},setRangeType:function(a){this.rangeType=a}})})},"webview/widget/Calendar":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/Calendar dijit/form/DropDownButton dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/has dojo/i18n!rc/nls/all dojo/i18n!../nls/all dojo/text!./templates/Calendar.html".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k){var q=g("webview/widget/Calendar",[l,m],{rcStrings:b,templateString:k,webviewStrings:t});
q._MonthDropDownButton=g("webview/widget/_MonthDropDownButton",h,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new q._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",b);this.containerNode.innerHTML="\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+
b[a.getMonth()]+" - "+a.getFullYear()+"\x3c/div\x3e"}});q._MonthDropDown=g("webview/widget/_MonthDropDown",[p,r],{months:[],templateString:"\x3cdiv class\x3d'dijitCalendarMonthMenu dijitMenu webviewMonthDropDown' data-dojo-attach-event\x3d'onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=c.map(a,function(a,b){return a?"\x3cdiv class\x3d'dijitCalendarMonthLabel webviewMonthDropDown' month\x3d'"+b+"'\x3e"+a+"\x3c/div\x3e":
""}).join("")},_onClick:function(a){this.onChange(d.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){n.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return q})},"webview/reliable/_enterpriseSchedule/EnterpriseScheduleToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/text!./templates/EnterpriseScheduleToolbar.html ../../widget/ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),
function(r,p,m,l,h,c,g,d){return r("webview/reliable/_enterpriseSchedule/EnterpriseScheduleToolbar",[d],{rcStrings:l,templateString:g,webviewStrings:h,isAdmin:!1,canEdit:!1,_setAdminAttr:function(c){this._set("isAdmin",c);m.toggle(this.editValuesButton.domNode,"hidden",!c)},_setCanEditAttr:function(c){this._set("canEdit",c);m.toggle(this.saveButton.domNode,"hidden",!c);m.toggle(this.cancelButton.domNode,"hidden",!c)},onSaveClicked:function(){},onCancelClicked:function(){},onAhacClicked:function(){},
onEditClicked:function(){},_createButtonMap:function(){this._buttons={save:this.saveButton,cancel:this.cancelButton,ahac:this.ahacButton,edit:this.editValuesButton}},_createConnections:function(){this.own(c(this.saveButton.domNode,"click",p.hitch(this,function(){if(!this.saveButton.get("disabled"))this.onSaveClicked()})),c(this.cancelButton.domNode,"click",p.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancelClicked()})),c(this.ahacButton.domNode,"click",p.hitch(this,function(){if(!this.ahacButton.get("disabled"))this.onAhacClicked()})),
c(this.editValuesButton.domNode,"click",p.hitch(this,function(){if(!this.editValuesButton.get("disabled")&&this.canEdit)this.onEditClicked()})))}})})},"webview/reliable/_enterpriseSchedule/EventEditor":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/CheckBox dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/currency dojo/date dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/i18n!webview/nls/enterpriseSchedules dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/EventEditor.html dojo/topic dojox/html/entities rc/_base/util ./calendarEvents/CalEvent ./utilityFunctions ../../_base/tooltip ../../util/globalConstants ../../widget/WarningDialog ../../widget/WarningDialogEnums ./widget/AppliesToManager dijit/form/Button dijit/form/Textarea dijit/form/TextBox ../../widget/RepeatSelector ../../widget/ValueInput".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P){return g("webview/reliable/_enterpriseSchedule/EventEditor",[p,r,m],{templateString:D,idPrefix:"",enterpriseId:null,afterHoursStrings:x,enterpriseScheduleStrings:v,_excludeEventCheckbox:null,_tooltipIds:null,_scheduleDataType:null,_scheduleDefaultValue:null,_scheduleMnemonic:null,_storeReady:!0,currency:null,colorMap:null,_eventType:null,_originalLabel:"",_originalBlocks:null,_originalEventId:-1,_previousEnterpriseId:null,
_widgetArray:null,informativeDialog:null,_dataStore:null,_data:null,_observeHandle:null,_eventId:null,_appliesToManagerDialog:null,_currentSelection:null,_rateMultipler:1,_valueChangeHandle:null,appliesToIsReadOnly:!1,newBlockDialog:null,isDirty:!1,changeHandles:null,priorityOptions:null,prioritySelection:null,WEBVIEW_PURPLE:"#5A245E",_EventTypeMap:{defaultEventType:0,specialEventType:1},constructor:function(){this.webviewStrings=y;this.rcStrings=z;this.eventTypeOptions=new C({idProperty:"value",
data:[{label:this.webviewStrings.specialEvent,value:this._EventTypeMap.specialEventType},{label:this.webviewStrings.defaultEvent,value:this._EventTypeMap.defaultEventType}]});this._dataStore=new E(new C);this._observeData(!0)},buildRendering:function(){this.inherited(arguments);k.set(this.reasonLabel,"for",this.reasonInput.id);w.set(this.reasonInput.domNode,"box-sizing","inherit");rc.session.hasRole(rc.session.roles2.configureEventPriority,!0)&&this._buildPrioritySelector();rc.session.hasRole(rc.session.roles2.configureAfterHoursEventReporting,
!0)&&(this._excludeEventCheckbox=new l({checked:!1,value:!0}),f.place(this._excludeEventCheckbox.domNode,this.excludeEventContainer,"first"),q.remove(this.excludeEventContainer,"hidden"),f.create("label",{"for":this._excludeEventCheckbox.id,innerHTML:this.enterpriseScheduleStrings.excludeFromReport},this.excludeEventContainer,"last"))},setDefaultAppliesTo:function(a){this._appliesToManagerDialog.set("defaultAppliesTo",a)},_buildPrioritySelector:function(){this.priorityOptions=new C({data:[{label:this.webviewStrings.normal,
id:0},{label:this.webviewStrings.highPriority,id:1}]});this.prioritySelection=new h({baseClass:"rcSelectBox webviewDropDown priority",store:this.priorityOptions,searchAttr:"label",labelAttr:"label",labelType:"html",autoComplete:!1,queryExpr:"*${0}*"});f.place(this.prioritySelection.domNode,this.priorityContainer,"last");f.create("label",{"for":this.prioritySelection.id,innerHTML:this.webviewStrings.priority+":"},this.priorityContainer,"first")},_observeData:function(a){!0===a?(this._data=this._dataStore.query(),
this._observeHandle=this._data.observe(d.hitch(this,this._dataStoreChanged),!0)):null!==this._observeHandle&&(this._observeHandle.cancel(),this._observeHandle.remove())},postCreate:function(){this.inherited(arguments);this.informativeDialog=new M({title:this.webviewStrings.invalidTimeTitleText,type:O.types.informative,text:this.webviewStrings.invalidTimeText});this._tooltipIds=[];this._widgetArray=[];this.own(A(this.repeatSelection,"contentChange",d.hitch(this,function(){this.onContentChanged()})));
this._eventType=new h({baseClass:"rcSelectBox webviewDropDown priority",store:this.eventTypeOptions,searchAttr:"label",labelAttr:"label",labelType:"html",autoComplete:!1,queryExpr:"*${0}*"},this.eventType);this._eventType.set("value",this._EventTypeMap.specialEventType);rc.session.canEditEnterprise()&&(rc.session.canEditDefault()||(this._eventType.set("value",this._EventTypeMap.specialEventType),q.add(this.eventTypeContainer,"hidden")),rc.session.canEditException()||(this._eventType.set("value",this._EventTypeMap.defaultEventType),
q.add(this.eventTypeContainer,"hidden")));this.own(A(this._eventType,"change",d.hitch(this,this._showEventOptions)));this.toggleEditState();this._widgetArray=[this.repeatSelection,this.valueInput];this.own(A(this.repeatSelection,"repeatValueChanged",d.hitch(this,this._disableCreate)));this.own(A(this.repeatSelection,"timeChange",d.hitch(this,this._setScheduleTreeLink)))},onContentChanged:function(){A.emit(this,"contentChange")},updateBlockSelector:function(a){null!==this._appliesToManagerDialog&&
this._appliesToManagerDialog.updateBlocks(a)},createAppliesToManager:function(a,b){null===this._appliesToManagerDialog&&(this._appliesToManagerDialog=new P({enterpriseScheduleId:this.enterpriseId,title:this.webviewStrings.eventAppliesTo,blocks:a,scheduleTreeData:b}),this.own(n.after(window,"onresize",d.hitch(this,this._resizeAppliesToManagerScrollArea))),this.own(A(this._appliesToManagerDialog,"saveAppliesTo",d.hitch(this,function(a,b){this._setScheduleTreeLink();var c=this._dataStore.get(this._eventId);
c.blockId=a.blockId;c.schedules=a.schedules;this._setData(c);b&&this._onDirty()}))),this.own(A(this._appliesToManagerDialog,"treeBuilt",d.hitch(this,this._onAppliesToReady))))},_showAppliesToManagerDialog:function(a){if(null!==this._appliesToManagerDialog){Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType?(q.add(this._appliesToManagerDialog.blockSelectionContainer.domNode,"hidden"),q.replace(this._appliesToManagerDialog.scheduleSelectionContainer.domNode,"topPane","childFilter")):
(q.remove(this._appliesToManagerDialog.blockSelectionContainer.domNode,"hidden"),q.replace(this._appliesToManagerDialog.scheduleSelectionContainer.domNode,"childFilter","topPane"));this._resizeAppliesToManagerScrollArea();var b=!1;if(this.appliesToIsReadOnly){var c=this._appliesToManagerDialog._previewStore.query({parent:"root"});1===c.length&&c[0].value===this.idPrefix&&c[0].type===(this._isForBlock?"block":"schedule")&&(b=!0)}this._appliesToManagerDialog.show(b);var b=this._dataStore.get(this._eventId),
f=b.parentSchedule||b.sourceScheduleId;if(this._appliesToManagerDialog.get("scheduleMapBuilt"))this._appliesToManagerDialog.setReadOnly(a||this.appliesToIsReadOnly,f);else var g=n.after(this._appliesToManagerDialog,"_buildScheduleMap",d.hitch(this,function(a){this._appliesToManagerDialog.setReadOnly(a,f);g.remove()},a||this.appliesToIsReadOnly))}},_resizeAppliesToManagerScrollArea:function(){this._appliesToManagerDialog.resize({l:10,t:10,h:.98*document.body.clientHeight,w:.98*document.body.clientWidth});
var a=w.getComputedStyle(this._appliesToManagerDialog.domNode),a=u.getMarginBox(this._appliesToManagerDialog.domNode,a).h,b=w.getComputedStyle(this._appliesToManagerDialog.titleBar),b=u.getMarginBox(this._appliesToManagerDialog.titleBar,b).h,c=w.get(this._appliesToManagerDialog.containerNode,"paddingTop"),c=c+w.get(this._appliesToManagerDialog.containerNode,"paddingBottom"),f=w.getComputedStyle(this._appliesToManagerDialog.searchContainer),f=u.getMarginBox(this._appliesToManagerDialog.searchContainer,
f).h,d=w.get(this._appliesToManagerDialog.scheduleSelectionPane.domNode,"paddingTop"),d=d+w.get(this._appliesToManagerDialog.scheduleSelectionPane.domNode,"paddingBottom"),a=a-b-c-f-d;w.set(this._appliesToManagerDialog.scheduleSelectionPane.domNode,"height",Math.floor(a)+"px");w.set(this._appliesToManagerDialog.blockPreviewPane.contentPaneBody,"height",Math.floor(a)+"px")},render:function(a,b,c,f,g,k,h){this.idPrefix!==a&&(this.idPrefix=a,this._scheduleDataType=f,this._scheduleDefaultValue=b.defaultValue,
this._scheduleMnemonic=b.mnemonic,this._increment=k,this.currency=h,this.domScheduleTree=c,this.valueInput.set("stateValues",g),this.valueInput.set("dataType",f),this._scheduleDataType===L.DATATYPE_BINARY&&(null!==this._valueChangeHandle&&this._valueChangeHandle.remove(),this._valueChangeHandle=A(this.valueInput,"valueChanged",d.hitch(this,function(a){this._rateMultipler=0<a?1:0;this._getScheduleTreeLinkText()})),this.own(this._valueChangeHandle)))},_showEventOptions:function(a){a===this._EventTypeMap.defaultEventType?
(k.set(this.appliesLabel,"innerHTML",this._getAppliesTo(!0)),q.add(this.reasonLabel,"hidden"),q.add(this.reasonInput.domNode,"hidden")):(q.remove(this.reasonLabel,"hidden"),q.remove(this.reasonInput.domNode,"hidden"),k.set(this.appliesLabel,"innerHTML",this._getAppliesTo(!1)));var b=this._dataStore.get(this._eventId);if(b&&(b.repeat.type===L.REPEAT_WEEKLY&&a!==this._EventTypeMap.defaultEventType||b.repeat.type!==L.REPEAT_WEEKLY&&a===this._EventTypeMap.defaultEventType)){var c=d.clone(b);c.repeat.type=
a;a==L.REPEAT_WEEKLY?c.repeat.value=b.startTime.getDay():(c.repeat.value={dom:b.startTime.getDate(),m:b.startTime.getMonth(),y:b.startTime.getFullYear()},this.repeatSelection._setDropDown(L.SINGLE_FREQ));this._onRepeatTypeChange(c,b)}this.repeatSelection.setEventType(a);this._hidePriorities(a)},_onAppliesToReady:function(){this.onAppliesToReady()},onAppliesToReady:function(){A.emit(this,"appliesToReady")},_onRepeatTypeChange:function(a,b){this.onRepeatTypeChange({newEvent:a,originalEvent:b})},onRepeatTypeChange:function(a){A.emit(this,
"repeatTypeChange",a)},_hidePriorities:function(a){a===this._EventTypeMap.defaultEventType?q.add(this.priorityContainer,"hidden"):q.remove(this.priorityContainer,"hidden")},_getAppliesTo:function(a){var b="";return b=a?this.webviewStrings.defaultApplies+":":this.webviewStrings.specialApplies+":"},_getScheduleTreeLinkText:function(){var a=null,b=this._appliesToManagerDialog.getUniqueAffectedSchedules();-1<b.indexOf(this.idPrefix)&&(a=this.idPrefix);var c=b.length-1;-1===c&&(a=Number(this.idPrefix));
var f="",g=["(+ "],k=this._appliesToManagerDialog.getSelectedBlocks(),h=d.clone(this._dataStore.get(this._eventId)),l=d.clone(h.blockId);0<k.length?(h.blockId=k,f=this._appliesToManagerDialog.getLabelFromId(k[0],"block"),1!==k.length&&(g=g.concat([k.length-1," ",this.webviewStrings.blocks," \x26 "])),g=g.concat([b.length," ",this.webviewStrings.schedules,")"])):(h.blockId=null,f=this._appliesToManagerDialog.getLabelFromId(a,"schedule"),g=1<=c?g.concat([c," ",this.webviewStrings.schedules,")"]):[this.webviewStrings.only]);
!1===this._checkBlockIds(l,h.blockId)&&this._setData(h);h.repeat.type===L.REPEAT_WEEKLY||this._scheduleDataType!==L.DATATYPE_BINARY?this._displayRateAndCost(0):this._displayRateAndCost(this._appliesToManagerDialog.get("rate"));return[f,g.join("")].join(" ")},_checkBlockIds:function(a,b){var c=!1;return c=a instanceof Array&&b instanceof Array?J.arraysAreSame(a,b):null===a&&null===b?!0:!1},_displayRateAndCost:function(c){c*=this._rateMultipler;q.toggle(this.rateContainer,"hidden",0>=c);var f={};null!==
this.currency&&(f={currency:this.currency,symbol:L.CurrencyToSymbol[this.currency]});var d=c.toFixed(2);null!==this.currency&&(d=a.format(c,f));k.set(this.totalRate,"innerHTML",d+this.webviewStrings.scheduleRate);var d=this._dataStore.get(this._eventId),g=0;null!==d.startTime&&null!==d.endTime&&(g=b.difference(d.startTime,d.endTime,"second"));c*=g/3600;d=c.toFixed(2);null!==this.currency&&(d=a.format(c,f));k.set(this.totalCost,"innerHTML",this.rcStrings.rtrTotal+" "+d)},_disableCreate:function(){this.createButton.set("disabled",
this.repeatSelection.isNoneChecked())},_setScheduleTreeLink:function(){k.set(this.scheduleTreeLink,"innerHTML",H.encode(this._getScheduleTreeLinkText()))},toggleEditState:function(){var a=this._dataStore.get(this._eventId);void 0!==a&&(q.add(this.eventTypeContainer,"hidden"),"add"===a.action?(rc.session.canEditDefault()&&rc.session.canEditException()&&!this._isViewingBlock()?(this._eventType.set("value",this._EventTypeMap.specialEventType),q.remove(this.eventTypeContainer,"hidden")):rc.session.canEditException()||
this._isViewingBlock()?this._eventType.set("value",this._EventTypeMap.specialEventType):rc.session.canEditDefault()&&!this._isViewingBlock()&&this._eventType.set("value",this._EventTypeMap.defaultEventType),this._eventType.value!==this._EventTypeMap.defaultEventType?(this.summary.set("value",a.label),this.summary.focus()):this.summary.set("value",this.webviewStrings.defaultEvent),q.add(this.deleteButton.domNode,"hidden"),q.add(this.saveButton.domNode,"hidden"),q.remove(this.cancelButton.domNode,"hidden"),
q.remove(this.createButton.domNode,"hidden")):(a.label&&this.summary.set("value",H.decode(a.label)),q.remove(this.deleteButton.domNode,"hidden"),q.remove(this.saveButton.domNode,"hidden"),q.add(this.cancelButton.domNode,"hidden"),q.add(this.createButton.domNode,"hidden")))},onBlockChange:function(a,b){A.emit(this,"blockChange",a,b)},_checkRepeatForReadOnly:function(a,b){var c=a.repeat.type;c!==L.REPEAT_WEEKLY||rc.session.canEditDefault()&&!this._isViewingBlock()?c===L.REPEAT_OVERRIDE?(b.reasonText=
this.webviewStrings.overrideEventErr,q.add(this.priorityContainer,"hidden"),b.isValidRepeat=!1):c!==L.REPEAT_RANGE||a.repeat.value.start.dom!==L.WILDCARD&&a.repeat.value.start.m!==L.WILDCARD&&a.repeat.value.start.y!==L.WILDCARD&&a.repeat.value.end.dom!==L.WILDCARD&&a.repeat.value.end.m!==L.WILDCARD&&a.repeat.value.end.y!==L.WILDCARD?c!==L.REPEAT_RECURRENCE||a.repeat.value.wom===L.WILDCARD&&a.repeat.value.m===L.WILDCARD?c!==L.REPEAT_CALENDAR||a.repeat.start&&a.repeat.end||(b.reasonText=this.webviewStrings.calendarEventErr,
q.add(this.priorityContainer,"hidden"),b.isValidRepeat=!1):(b.reasonText=this.webviewStrings.recurrSpecialErr,q.add(this.priorityContainer,"hidden"),b.isValidRepeat=!1):(b.reasonText=this.webviewStrings.recurrSpecialErr,q.add(this.priorityContainer,"hidden"),b.isValidRepeat=!1):(b.reasonText=this.webviewStrings.weeklySchedulePermission,q.add(this.deleteButton.domNode,"hidden"),b.isValidRepeat=!1)},_makeReadOnly:function(a){var b="",c=!1,f={isValidRepeat:!0,reasonText:""};this._checkRepeatForReadOnly(a,
f);f.isValidRepeat?(q.add(this.deleteButton.domNode,"hidden"),rc.session.canEditException()||Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType)?1<a.schedules.length||a.blockId instanceof Array&&0<a.blockId[0]||a.blockId&&0<a.blockId?(b=this.webviewStrings.parentEventErr,null===a.blockId||this.isBlockGroup&&-1!==a.blockId.indexOf(this._blockIndex))?null===a.blockId&&Number(this.idPrefix)!==a.sourceScheduleId&&(c=!0,this._canAccessSchedule(a.sourceScheduleId)&&(b+=this.webviewStrings.parentEventModify,
b+="\x3cspan class\x3d'linkable'\x3e"+H.encode(a.sourceScheduleName)+"\x3c/span\x3e")):(c=!0,b+=this.webviewStrings.parentEventModify,b+="\x3cspan class\x3d'linkable'\x3e"+H.encode(this._appliesToManagerDialog.getLabelFromId(a.blockId[0],"block"))+"\x3c/span\x3e"):console.error(this.declaredClass+" - _makeReadOnly(): Editable Event in Read Only Function",a):b=this.webviewStrings.specialEventsPermission:b=f.reasonText;this._disableFields(!0);k.set(this.nonEditReason,"innerHTML",b);if(c)var g=A(this.nonEditReason,
"click",d.hitch(this,function(){g.remove();if(null===a.blockId){var b=a.sourceScheduleId||this._getParentSchedule(a.schedules).id;this.onBlockChange(Number(b),!1)}else this.onBlockChange(a.blockId[0],!0)}));q.remove(this.reasonContainer,"hidden");q.add(this.eventTypeContainer,"hidden");q.add(this.saveButton.domNode,"hidden");q.add(this.cancelButton.domNode,"hidden");q.add(this.createButton.domNode,"hidden")},_getParentSchedule:function(a){return this.domScheduleTree.getParentFromArray(a)},_canAccessSchedule:function(a){return this.domScheduleTree.canAccessSchedule(a)},
_disableFields:function(a){this.summary.set("disabled",a);null!==this.prioritySelection&&this.prioritySelection.set("disabled",a);null!==this._excludeEventCheckbox&&this._excludeEventCheckbox.set("disabled",a);this.reasonInput.set("disabled",a);c.forEach(this._widgetArray,d.hitch(this,function(b){b.disableFields(a)}))},_onClickTreeLink:function(a){J.stopEvent(a);this._showAppliesToManagerDialog(!q.contains(this.reasonContainer,"hidden"))},_onDelete:function(){var a=this._dataStore.get(this._eventId);
a.schedules=this._appliesToManagerDialog.getUniqueAffectedSchedules();Number(this._getParentSchedule(a.schedules).id)!==Number(this.idPrefix)&&""!==a.mnemonic&&(a.schedules=[Number(this.idPrefix)]);this.onDelete(a)},onDelete:function(a){A.emit(this,"delete",a)},_onCancel:function(){this._removeChangeHandles();var a=this._dataStore.get(this._eventId);if("add"===a.action)this.onCancel(a)},onCancel:function(a){A.emit(this,"cancel",a)},_onUpdate:function(){var a=this._dataStore.get(this._eventId);this._removeChangeHandles();
this._setInfo();this.isDirty=!0;a.blockId=null;if(this._isForBlock)a.blockId=[this.idPrefix];else if(null!==this._appliesToManagerDialog){var b=this._appliesToManagerDialog.getSelectedBlocks();a.blockId=0<b.length?b:null}this.valueInput.validate()&&(Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType&&(a.blockId=null),this._validateTimeValues(a).then(d.hitch(this,function(a,b){-1!==b&&a.endTime.setHours(b.hours,b.minutes,b.seconds);this.onUpdate({submittedEvent:a,schedulesRemoved:this._schedulesRemoved(a),
originalSchedules:this._originalSchedules})},d.clone(a))))},update:function(){var a=this._dataStore.get(this._eventId);this._removeChangeHandles();this._setInfo();a.blockId=null;if(null!==this._appliesToManagerDialog){var b=this._appliesToManagerDialog.getSelectedBlocks();a.blockId=0<b.length?b:null}Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType&&(a.blockId=null)},onUpdate:function(a){A.emit(this,"update",a)},_onCreate:function(){var a=this._dataStore.get(this._eventId);
this._removeChangeHandles();this._setInfo();this.isDirty=!0;a.blockId=null;if(null!==this._appliesToManagerDialog){var b=this._appliesToManagerDialog.getSelectedBlocks();a.blockId=0<b.length?b:null}null!==a.blockId&&0!==a.blockId.length&&Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType?F.publish("sticky",{type:"error",message:this.webviewStrings.noDefaultsInBlock}):this.valueInput.validate()&&this._validateTimeValues(a).then(d.hitch(this,function(a,b){-1!==b&&a.endTime.setHours(b.hours,
b.minutes,b.seconds);this.onChange();this.onCreate(a)},d.clone(a)),d.hitch(this,this._setData,d.clone(a)))},onCreate:function(a){A.emit(this,"create",a)},_schedulesRemoved:function(a){if(a.schedules.length!==this._originalSchedules.length)return!0;var b=d.clone(this._originalSchedules);b.sort();a=d.clone(a.schedules);a.sort();for(var c=0;c<b.length;c++)if(b[c]!==a[c])return!0;return!1},_validateTimeValues:function(a){var b=new t;this.own(b);var c=this.repeatSelection.isValid();0<this._increment&&
this._doesEventSpanMultipleDays(a)?(a=60<this._increment?{increment:this._increment/60,unit:this.webviewStrings.hour}:{increment:this._increment,unit:this.webviewStrings.minute},this.informativeDialog.set({title:this.enterpriseScheduleStrings.invalidIncrement,type:O.types.informative,text:B.substitute(this.enterpriseScheduleStrings.timeValueIncrementMidnight,[a.increment,a.unit])}),this.informativeDialog.open(),b.reject()):c.valid?this.repeatSelection.checkIncrement(this._increment).then(d.hitch(this,
b.resolve)):(this.informativeDialog.set("title",this.webviewStrings.invalidTimeTitleText),this.informativeDialog.set("type",O.types.informative),this.informativeDialog.set("text",c.message),this.informativeDialog.open(),b.reject());return b.promise},_doesEventSpanMultipleDays:function(a){return a.repeat.type!==L.REPEAT_RANGE&&a.startTime.getDay()!==a.endTime.getDay()},_onLabelChange:function(a,b){this.onLabelChange({originalLabel:a,newEvent:b})},onLabelChange:function(a){A.emit(this,"labelChange",
a)},_setInfo:function(){var a=this._dataStore.get(this._eventId);a.summary=H.encode(k.get(this.summary,"value"));a.label=H.encode(k.get(this.summary,"value"));var b=d.clone(this.repeatSelection.getInfo());a.repeat=b.repeat;this.repeatSelection.frequencySelection.value!==L.WEEKLY_FREQ?(a.startTime=b.dateTime.startTime,a.endTime=b.dateTime.endTime):(a.startTime.setHours(b.dateTime.startTime.getHours(),b.dateTime.startTime.getMinutes(),b.dateTime.startTime.getSeconds(),0),a.endTime.setHours(b.dateTime.endTime.getHours(),
b.dateTime.endTime.getMinutes(),b.dateTime.endTime.getSeconds(),0));!1===this._isForBlock?a.schedules=this._appliesToManagerDialog.getSelectedSchedules():(b=this._appliesToManagerDialog.get("defaultAppliesTo").scheduleIds,a.schedules=b);0<a.schedules.length&&(this._isForBlock?a.color=this.WEBVIEW_PURPLE:(b=Number(this._getParentSchedule(a.schedules).id),a.color=this.colorMap[b],a.sourceScheduleId=b,a.sourceScheduleName=this._appliesToManagerDialog.getLabelFromId(b,"schedule")));a.priority="normal";
null!==this.prioritySelection&&(a.priority=1===Number(this.prioritySelection.get("value"))?"high":"normal",a.npriority===Number.MAX_VALUE&&(a.npriority=L.MAX_PRIORITY));b=d.clone(this.valueInput.getInfo());a.startValue=b.startValue;a.endValue=b.endValue;a.valueType=this._scheduleDataType;a.value=this._scheduleDefaultValue;a.mnemonic=this._scheduleMnemonic;a.exclude=null!==this._excludeEventCheckbox?this._excludeEventCheckbox.get("value"):!1;a.reason=this.reasonInput.get("value").trim();a.label!==
H.encode(this._originalLabel)&&this._onLabelChange(H.encode(this._originalLabel),a)},getInfo:function(a){var b=this._dataStore.get(this._eventId);if(void 0!==b&&(a||this._setInfo(),null!==b.blockId&&0!==b.blockId.length&&Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType)){F.publish("sticky",{type:"error",message:this.webviewStrings.noDefaultsInBlock});b.blockId=this._dataStore.get(this._originalEventId).blockId;return}return b},onChange:function(){A.emit(this,"change")},setStoreReady:function(a){this._storeReady=
a},reset:function(){this._storeReady&&this._fillData(new G)},_setData:function(a){var b=[],c=this._dataStore.get(this._originalEventId);void 0!==c&&b.push(c);null!==a&&b.push(a);this._dataStore.setData(b);this._eventId=b[b.length-1].id},fillData:function(a,b,c){a.isEditable=b;this._isNewEvent=void 0===c?!1:c;b=d.clone(a);b.id=0;this._isNewEvent?this._dataStore.setData([b,a]):(this._dataStore.setData([b]),this._dataStore.put(a))},_dataStoreChanged:function(a,b,c){0<=c&&(this._isNewEvent&&(b=d.clone(this.repeatSelection.getInfo()),
I.isSameRepeat(a.repeat,b.repeat)||(a.repeat=b.repeat),a.startTime!==b.dateTime.startTime&&a.startTime!==this._dataStore.data[0].startTime&&(a.startTime=b.dateTime.startTime),a.endTime!==b.dateTime.endTime&&a.endTime!==this._dataStore.data[0].endTime&&(a.endTime=b.dateTime.endTime)),this._fillData(a))},_fillData:function(a){"undefined"!==typeof a.id?this._eventId=a.id:(this._dataStore.setData([]),this._eventId=this._dataStore.add(a));null!==this.changeHandles?this._removeChangeHandles():this.isDirty=
!1;this.changeHandles=[];"dirty"===a.dirty?q.add(this.saveButton.domNode,"updateEventDirty"):q.remove(this.saveButton.domNode,"updateEventDirty");var b=null!==a.blockId;this._populateAppliesTo(a);this._setScheduleTreeLink();this._isForBlock=b;this._originalLabel=H.decode(a.label);this._originalSchedules=d.clone(a.schedules);null===a.repeat?this._showOptionsForNewEvent():a.repeat.type!==L.REPEAT_WEEKLY||this._isViewingBlock()?this._eventType.set("value",this._EventTypeMap.specialEventType):this._eventType.set("value",
this._EventTypeMap.defaultEventType);a.repeat.type===L.REPEAT_WEEKLY&&this._isViewingBlock()&&(a.isEditable=!1);this.toggleEditState();!1===a.isEditable?this._makeReadOnly(a):(q.add(this.reasonContainer,"hidden"),this._disableFields(!1));var b=new Date,c=(new Date).getMinutes()+30;b.setMinutes(c);this.repeatSelection.fillData(a);this._setEventLabel(a);null!==this._excludeEventCheckbox&&this._excludeEventCheckbox.set("value",a.exclude);this._fillPriority(a.priority);b={endValue:null!==a.endValue?d.clone(a.endValue):
"Relinquish",startValue:d.clone(a.startValue),valueType:this._scheduleDataType,defaultValue:this._scheduleDefaultValue};this.valueInput.fillData(b);this.reasonInput.set("value",a.reason);null!==a.blockId&&(this._eventType.set("value",this._EventTypeMap.specialEventType),q.add(this.eventTypeContainer,"hidden"));a.isEditable&&this._setInfo();"#aaa"!==a.color.toLowerCase()&&this._setupChangeHandles(a);this.onContentChanged()},_fillPriority:function(a){null!==this.prioritySelection&&("high"===a||1===
a?this.prioritySelection.set("value",1):this.prioritySelection.set("value",0))},_isViewingBlock:function(){var a=!1;this._appliesToManagerDialog&&this._appliesToManagerDialog.defaultAppliesTo&&(a=this._appliesToManagerDialog.defaultAppliesTo.blockIds&&0<this._appliesToManagerDialog.defaultAppliesTo.blockIds.length);return a},_populateAppliesTo:function(a){-1===a.eventId?this._appliesToManagerDialog.set("appliesTo",this._appliesToManagerDialog.get("defaultAppliesTo")):this._appliesToManagerDialog.set("appliesTo",
{blockIds:a.blockId?a.blockId:null,scheduleIds:a.schedules})},_populateBlockSelection:function(a,b){if(a){var c=b.blockId;c instanceof Array||(c=[c]);return this._appliesToManagerDialog.setApplicableBlocks(c)}return this._appliesToManagerDialog.setApplicableBlocks([this.idPrefix])},_setEventLabel:function(a){if(null===a.repeat)rc.session.canEditException()?this.summary.value=H.decode(d.clone(a.label)):this.summary.value=this.webviewStrings.weeklyEvent;else if(null===a.label||void 0===a.label)this.summary.value=
a.repeat.type!==L.REPEAT_WEEKLY?H.decode(d.clone(a.label)):this.webviewStrings.weeklyEvent},_setupChangeHandles:function(a){this.changeHandles.push(A(this.summary,"change",d.hitch(this,function(a,b){this.isDirty||a.label!==b&&this._onDirty()},a)));null!==this.prioritySelection&&this.changeHandles.push(A(this.prioritySelection,"change",d.hitch(this,function(a,b){this.isDirty||(9>a.npriority&&0===b||8<a.npriority&&1===b)&&this._onDirty();0<this._data.length&&(this._data[this._data.length-1].npriority=
b)},a)));null!==this._excludeEventCheckbox&&this.changeHandles.push(A(this._excludeEventCheckbox,"change",d.hitch(this,function(a,b){this.isDirty||b!==a.exclude&&this._onDirty()},a)));this.changeHandles.push(A(this.valueInput,"valueChanged",d.hitch(this,function(a,b){this.isDirty||a.startValue!==b&&this._onDirty()},a)));this.changeHandles.push(A(this.reasonInput,"change",d.hitch(this,function(a,b){this.isDirty||b!==a.reason&&this._onDirty()},a)));this.changeHandles.push(A(this.repeatSelection,"repeatValueChanged",
d.hitch(this,function(a){var b=this.repeatSelection.getInfo();a.originalStartTime&&(a.startTime=a.originalStartTime);I.isSameRepeat(b.repeat,a.repeat)&&b.dateTime.startTime.getTime()===a.startTime.getTime()&&b.dateTime.endTime.getTime()===a.endTime.getTime()||this._onDirty()},a)))},_showOptionsForNewEvent:function(){rc.session.canEditEnterprise()&&(rc.session.canEditException()||this._isViewingBlock()?this._eventType.set("value",this._EventTypeMap.specialEventType):this._eventType.set("value",this._EventTypeMap.defaultEventType))},
_getTime:function(a){var b=10>a.getHours()?"0"+a.getHours():a.getHours(),c=10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes();a=10>a.getSeconds()?"0"+a.getSeconds():a.getSeconds();return b+":"+c+":"+a},_onDirty:function(){this.isDirty=!0;q.add(this.saveButton.domNode,"updateEventDirty");this._removeChangeHandles();this.onDirty(this.isDirty)},onDirty:function(a){A.emit(this,"dirty",a)},_removeChangeHandles:function(){c.forEach(this.changeHandles,d.hitch(this,function(a){a.remove()}));this.changeHandles=
null},clear:function(){this._appliesToManagerDialog&&(this._appliesToManagerDialog._currentScheduleSelection=[])},destroy:function(){c.forEach(this._tooltipIds,function(a){K.remove(a)},this);this._removeChangeHandles();this.inherited(arguments)}})})},"webview/reliable/_enterpriseSchedule/widget/AppliesToManager":function(){define("dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/dom-construct dojo/on dojo/text!./templates/AppliesToManager.html dojo/topic rc/_base/util ./BlockManager ../../../util/util".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return m("webivew/reliable/_enterpriseSchedule/widget/AppliesToManager",[t],{templateString:n,defaultAppliesTo:null,_isBlock:!1,_disableBlockSelection:!0,_originalSelection:null,postCreate:function(){this.inherited(arguments);this.blockPreviewPane.setTitleContent(this.webviewStrings.appliesToPreview,"left")},getLabelFromId:function(a,b){if("schedule"===b){var c=this._scheduleTreeStore.query({value:a});return 0<c.length?c[0].name:""}c=this._blockStore.query({id:a});
return 0<c.length?c[0].name:""},getSelectedBlocks:function(){return this.appliesTo.blockIds?this.appliesTo.blockIds:[]},getUniqueAffectedSchedules:function(){var a=[];this.open?this._previewStore.query({type:"schedule"}).forEach(function(b){-1===a.indexOf(b.value)&&a.push(b.value)}):a=this.appliesTo.scheduleIds;return a},makeClean:function(a){if(!0!==this._readOnly||a)this._dirty===a&&c.toggle(this.applyNode.firstChild,"dirtySaveIcon",!a),this._dirty=!a},onSaveAppliesTo:function(a){d.emit(this,"saveAppliesTo",
a,this._dirty);return a},setApplicableBlocks:function(b){var c=new h;this.own(c);if(0<b.length)if(p.forEach(b,l.hitch(this,function(a){this._blocks[a].set("checked",!0)})),1===this._previewStore.query({parent:"root"}).filter(function(a){return a.value===b[0]&&"block"===a.type}).length)c.resolve();else var d=0,g=a.subscribe("blockContentReceived",l.hitch(this,function(){b.length===++d&&(this._buildPreview(),c.resolve(),g.remove())}));else this._buildPreview(),c.resolve();return c.promise},setReadOnly:function(a,
b){c.toggle(this.commitNodes,"hidden",a);this._readOnly=a;for(var f in this._blocks)this._blocks[f]instanceof r&&this._blocks[f].set("disabled",a);for(var d in this._schedules.map)this._schedules.map[d]instanceof r&&(Number(d)===b?this._schedules.map[d].set("disabled",!0):this._schedules.map[d].set("disabled",a))},_buildBlockSelector:function(){},_buildDisplayedContent:function(){this.inherited(arguments);this.open&&this._selectCurrentAppliesTo()},_createCommitButtons:function(){this.commitNodes=
g.create("span",{"class":"blockManagerCommitOptions"});this.applyNode=g.create("span",{"class":"blockManagerCommitNode"},this.commitNodes,"last");g.create("span",{"class":"rc24Icon okIcon commitIcon"},this.applyNode,"first");g.create("span",{"class":"blockManagerCommitText",innerHTML:this.rcStrings.btnApply.toLocaleUpperCase()},this.applyNode,"last");this.own(d(this.applyNode,"click",l.hitch(this,this._saveAppliesTo)));this.blockPreviewPane.setTitleContent(this.commitNodes,"right")},_getDefaultAppliesToAttr:function(){return l.clone(this.defaultAppliesTo)},
_getRateAttr:function(){var a=0,b=[];this._scheduleTreeStore.query(l.hitch(this,function(a){return-1<this.appliesTo.scheduleIds.indexOf(a.value)&&0<a.rate})).forEach(function(c){-1===b.indexOf(c.value)&&(b.push(c.value),a+=c.rate)});return a},_getSelectedSchedules:function(){return this.getUniqueAffectedSchedules()},_modifyBlockSelection:function(b,c,d){if(d){d=this._previewStore.query(l.hitch(function(a){return"block"===a.type&&"root"===a.parent&&-1===k.alphaNumericSort(b,a.name)}));var f=this._previewStore.query({type:"schedule"});
0<d.length&&d.forEach(l.hitch(this,function(a){this._previewStore.remove(a.id)}));d.unshift({id:"block"+c,name:b,type:"block",value:c,parent:"root",rate:0,hasChildren:!0});f.forEach(l.hitch(this,function(a){this._previewStore.remove(a.id)}));d.forEach(l.hitch(this,function(a){this._previewStore.put(a)}));f.forEach(l.hitch(this,function(a){this._previewStore.put(a)}));this._getBlockContents(c).then(l.hitch(this,function(b){p.forEach(b,l.hitch(this,function(a){this._previewStore.put(a)}));p.forEach(this.getUniqueAffectedSchedules(),
l.hitch(this,function(a){this._schedules.map[a].set("checked",!0)}));a.publish("blockContentReceived")}),l.hitch(this,function(a){console.error(this.declaredClass+" - _modifyBlockSelection(): Error getting block contents",a)}));this._selectedBlocks.push(c)}else for(d=this.getUniqueAffectedSchedules(),f=this._selectedBlocks.indexOf(c),-1<f&&this._selectedBlocks.splice(f,1),f=this._previewStore.get("block"+c),"undefined"!==typeof f&&(f=this._previewStore.getChildren(f),p.forEach(f,l.hitch(this,function(a){this._previewStore.remove(a.id)}))),
this._previewStore.remove("block"+c),c=this.getUniqueAffectedSchedules(),f=d.length-1;0<=f;f--)-1===c.indexOf(d[f])&&this._schedules.map[d[f]].set("checked",!1)},_modifyScheduleSelection:function(a,b){if(!0!==this._readOnly){null!==this._previewTree&&(this._previewTree.destroy(),this._previewTree=null);if(a){var c=this._previewStore.query({type:"schedule",parent:"root"});if(0<c.length){var f=this._schedules.orderedNodes.indexOf(this._schedules.map[c[c.length-1].value]),c=this._schedules.orderedNodes.indexOf(this._schedules.map[b.value]);
if(c>f)this._previewStore.put({id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1});else{for(var f=this._previewStore.data,d=0,g=0;g<c;g++){var k=this._previewStore.query({type:"schedule",parent:"root",value:Number(this._schedules.orderedNodes[g].definedValue)});0<k.length&&(d=Math.max(f.indexOf(k[0]),0))}f.splice(d+1,0,{id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1});
this._previewStore.setData(f)}}else this._previewStore.put({id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1});this._currentScheduleSelection.push(b.value)}else this._previewStore.query({type:"schedule",value:b.value}).forEach(l.hitch(this,function(a){this._previewStore.remove(a.id)})),c=this._currentScheduleSelection.indexOf(b.value),this._currentScheduleSelection.splice(c,1);null!==this._buildPreviewDebounce&&clearTimeout(this._buildPreviewDebounce);
this._buildPreviewDebounce=setTimeout(l.hitch(this,this._buildPreview),10)}},_saveAppliesTo:function(){var a={blockId:[],schedules:[]};this._currentScheduleSelection=[];this._previewStore.query({parent:"root"}).forEach(l.hitch(this,function(b){"block"===b.type?a.blockId.push(b.value):a.schedules.push(Number(b.value))}));this.appliesTo.blockIds=a.blockId;this.appliesTo.scheduleIds=a.schedules;this.onSaveAppliesTo(a);this.hide(!1)},_selectCurrentAppliesTo:function(){this.appliesTo.blockIds&&0<this.appliesTo.blockIds.length?
this.setApplicableBlocks(this.appliesTo.blockIds):this.appliesTo.scheduleIds&&this._selectSchedules(this.appliesTo.scheduleIds)},_selectSchedules:function(a){this.defer(l.hitch(this,function(){if(!1===b.arraysAreSame(a,this._currentScheduleSelection)){for(var c,d=0;d<this._schedules.orderedNodes.length;d++)c=Number(this._schedules.orderedNodes[d].definedValue),-1<a.indexOf(c)&&this._schedules.orderedNodes[d].set("checked",!0);this._currentScheduleSelection=this._getSelectedSchedules();this._originalSelection=
l.clone(this._currentScheduleSelection);this._buildPreview();this.makeClean(!0)}}))}})})},"webview/widget/RepeatSelector":function(){define("dijit/form/FilteringSelect dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/enterpriseSchedules dojo/i18n!webview/nls/errorMessages dojo/on dojo/store/Memory dojo/text!webview/widget/templates/RepeatSelector.html ../reliable/_enterpriseSchedule/widget/IncrementOptionsDialog webview/util/dateUtils webview/util/globalConstants webview/util/util dijit/form/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox rc/widget/DateTextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E){return c("webview/widget/RepeatSelector",[p,m,l,k],{widgetsInTemplate:!0,templateString:y,_EventTypeMap:{defaultEventType:0,specialEventType:1},_eventType:null,_timeValueArray:[],_dateBoxes:null,_daysOfWeek:[],_daysSelected:[],_changeListeners:null,_checkboxArray:{},dateTimeInfo:{},_incrementDialog:null,_repeatInfo:{},eventInfo:null,wildCard:C.WILDCARD,frequencyOptions:null,startDateText:null,endDateText:null,constructor:function(){this._changeListeners=
[];this.webviewStrings=f;this.rcStrings=q;this.errorStrings=w;this.enterpriseStrings=u;var a=d.getNames("days","abbr","standAlone"),b=d.getNames("days","narrow","standalone"),c=d.getNames("days","wide");this._daysOfWeek=[];for(var g=0;g<c.length;++g)this._daysOfWeek.push({dayName:c[g],displayLetter:b[g],abrv:a[g],checked:!1,numeric:g});this._checkboxArray={checkboxes:[],labels:[]};this.dateTimeInfo={startTime:null,endTime:null};this._repeatInfo={type:null,weeklyValue:[],dateValue:{y:null,m:null,dom:null},
dateRangeValue:{start:{y:null,m:null,dom:null},end:{y:null,m:null,dom:null}},recurrenceValue:{m:null,wom:null,dow:[]},terminatingRepeat:{start:{y:null,m:null,dom:null},end:{y:null,m:null,dom:null},value:[]}};this.frequencyOptions=new x({idProperty:"value",data:[{label:f.singleEvent,value:C.SINGLE_FREQ},{label:f.dateRangeEvent,value:C.DATE_RANGE_FREQ},{label:f.daily,value:C.DAILY_FREQ},{label:f.weekly,value:C.WEEKLY_FREQ},{label:f.monthly,value:C.MONTHLY_FREQ},{label:f.yearly,value:C.YEARLY_FREQ}]})},
postCreate:function(){this._timeValueArray=[];this._timeValueArray.push(this.startDate);this._timeValueArray.push(this.startTime);this._timeValueArray.push(this.endDate);this._timeValueArray.push(this.endTime);this.own(z(this.frequencySelection,"change",g.hitch(this,function(a){null!==this.eventInfo&&(this.onFrequencyTypeChange(Number(a)),this._showRepeatOption())})));this.own(z(this.startTime,"change",g.hitch(this,this.onTimeChange)),z(this.endTime,"change",g.hitch(this,this.onTimeChange)));this._dateBoxes=
[this.fromLabel,this.toLabel,this.startDate,this.endDate];this.own(z(this.terminatingDateCB,"change",g.hitch(this,this.showTerminatingOptions)))},buildRendering:function(){this.inherited(arguments);this.startTime.set("validator",g.hitch(this,function(a){return this.timeValidation(a,this.startTime,"start")}));this.endTime.set("validator",g.hitch(this,function(a){return this.timeValidation(a,this.endTime,"end")}));this.frequencySelection=new r({baseClass:"rcSelectBox webviewDropDown valueSelector",
store:this.frequencyOptions,searchAttr:"label",labelAttr:"label",labelType:"html",autoComplete:!1,queryExpr:"*${0}*"},this.frequencySelection);for(var b=0;b<this._daysOfWeek.length;b++){var c=t.create("input",{type:"checkbox",id:this._daysOfWeek[b].dayName,value:this._daysOfWeek[b].numeric,title:this._daysOfWeek[b].dayName,className:"hidden"},this.daySelectionNode),f="rcDayToggleUnchecked";0===b&&(f="rcDayToggleLeftUnchecked");b===this._daysOfWeek.length-1&&(f="rcDayToggleRightUnchecked");this._checkboxArray.labels[b]=
t.create("label",{"for":a.get(c,"id"),title:this._daysOfWeek[b].dayName,className:f,innerHTML:this._daysOfWeek[b].displayLetter},this.daySelectionNode);this.own(z(c,"click",g.hitch(this,function(a){this.onRepeatValueChanged();this._onChange(a.currentTarget)})));this._checkboxArray.checkboxes[b]=c}},isValid:function(){var a=!0,b="Repeat Valid",c=this.startDate.get("value"),f=this.endDate.get("value");this.startTime.isValid()?this.endTime.isValid()?f.getTime()<c.getTime()?(b=this.errorStrings.endDateBeforeStartDate,
a=!1):this.checkTimeValues()||(b=this.errorStrings.endTimeBeforeStartTime,a=!1):(b=this.endTime.invalidMessage,a=!1):(b=this.startTime.invalidMessage,a=!1);return{valid:a,message:b}},checkTimeValues:function(){var a=new Date(this.startDate.get("value")),b=this.startTime.get("value").split(":"),c=new Date(this.endDate.get("value")),f=this.endTime.get("value").split(":");2===b.length&&(b[2]="00");2===f.length&&(f[2]="00");a.setHours(b[0],b[1],b[2]);c.setHours(f[0],f[1],f[2]);return a.getTime()<c.getTime()},
timeValidation:function(a,b,c){var f=!1;a.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])(?::([0-5]?[0-9]))?$/)?f=!0:"midnight"===a.toLowerCase()?("start"===c?b.set("value","0:00:00"):b.set("value","23:59:59"),f=!0):"noon"===a.toLowerCase()&&(b.set("value","12:00:00"),f=!0);return f},checkIncrement:function(a){var b=new n,c=!0,f=0,d=!0;if(0<a&&this._repeatInfo.type!==C.REPEAT_WEEKLY){var k=this.startTime.get("value").split(":"),h=this.endTime.get("value").split(":"),l=60*k[0]+Number(k[1]),c=60*h[0]+Number(h[1]),
m=f=0;3===k.length&&(m=Number(k[2]));3===h.length&&(f=Number(h[2]));m!==f&&(d=!1);f=(c-l)%a;(c=0===f&&d)||"23"===h[0]&&"59"===h[1]&&"59"===h[2]&&(c=0===m&&0===(1440-l)%a)}c?b.resolve(-1):this._showIncrementOptions(a,f,k,h).then(g.hitch(this,b.resolve));return b.promise},setEventType:function(a){switch(a){case this._EventTypeMap.specialEventType:this._eventType=a;b.remove(this.terminatingDate,"hidden");b.remove(this.frequencyContainer,"hidden");break;case this._EventTypeMap.defaultEventType:this._eventType=
a;this.frequencySelection.set("value",C.WEEKLY_FREQ);b.add(this.terminatingDate,"hidden");this._showRepeatOption();b.add(this.frequencyContainer,"hidden");break;default:console.error("RepeatSelector.js - setEventType(): Invalid Event Type",a)}},onRepeatValueChanged:function(a){this.emit("repeatValueChanged")},disableFields:function(c){var f=c?b.add:b.remove;this.frequencySelection.set("disabled",c);f(this.frequencySelection.domNode,"disabled");this._disableDaySelection(c);h.forEach(this._timeValueArray,
g.hitch(this,function(b){a.set(b,"disabled",c);f(b.domNode,"disabled");void 0!==b.textbox&&(a.set(b.textbox,"disabled",c),f(b.textbox,"disabled"))}))},_clearListeners:function(){for(var a=this._changeListeners.length-1;0<this._changeListeners.length;)this._changeListeners[a].remove(),this._changeListeners.splice(a,1),a--},_onChange:function(c){var f=a.get(c,"checked"),d=a.get(c,"value"),g=(this._daysSelected[d]=f)?"rcDayToggleUnchecked":"rcDayToggle",k=f?"rcDayToggle":"rcDayToggleUnchecked";0===Number(d)&&
(g=f?"rcDayToggleLeftUnchecked":"rcDayToggleLeft",k=f?"rcDayToggleLeft":"rcDayToggleLeftUnchecked");Number(d)===this._daysOfWeek.length-1&&(g=f?"rcDayToggleRightUnchecked":"rcDayToggleRight",k=f?"rcDayToggleRight":"rcDayToggleRightUnchecked");b.replace(c.nextSibling,k,g)},isNoneChecked:function(){return Number(this.frequencySelection.get("value"))!==C.WEEKLY_FREQ?!1:!h.some(this._checkboxArray.checkboxes,function(b){return a.get(b,"checked")},this)},_onTypeChange:function(a){return a},_setupChangeListeners:function(){var a=
function(a,b){var c=b.split(":");if(a.getHours()!==Number(c[0]))this.onRepeatValueChanged();else if(a.getMinutes()!==Number(c[1]))this.onRepeatValueChanged();else if(3===c.length&&Number(c[2])!==a.getSeconds())this.onRepeatValueChanged();else if(3>c.length&&0<a.getSeconds())this.onRepeatValueChanged()},b=function(a,b){a.setHours(0);b.setHours(0);if(a!==b)this.onRepeatValueChanged()};this._changeListeners.push(z(this.startTime,"change",g.hitch(this,a,this.eventInfo.startTime)));this._changeListeners.push(z(this.endTime,
"change",g.hitch(this,a,this.eventInfo.endTime)));this._changeListeners.push(z(this.startDate,"change",g.hitch(this,b,g.clone(this.eventInfo.startTime))));this._changeListeners.push(z(this.endDate,"change",g.hitch(this,b,g.clone(this.eventInfo.endTime))))},onFrequencyTypeChange:function(c){this.hideDateBoxes(!this.terminatingDateCB.get("checked"));b.toggle(this.terminatingDate,"hidden",this._eventType===this._EventTypeMap.defaultEventType);-1===this.eventInfo.eventId&&this.terminatingDateCB.set("checked",
!1);switch(c){case C.WEEKLY_FREQ:if(-1===this.eventInfo.eventId){var f=this.startDate.get("value");c=null;try{c=null===f?this.eventInfo.startTime.getDay():f.getDay()}catch(F){c=(new Date).getDay()}f=this._checkboxArray.checkboxes[c];this._daysOfWeek[c].checked=!0;a.set(f,"checked",!0);this._onChange(f)}break;case C.DAILY_FREQ:break;case C.DATE_RANGE_FREQ:case C.SINGLE_FREQ:h.forEach(this._dateBoxes,function(a){void 0===a.domNode?b.remove(a,"hidden"):b.remove(a.domNode,"hidden")});b.add(this.terminatingDate,
"hidden");break;case C.MONTHLY_FREQ:case C.YEARLY_FREQ:b.remove(this.fromLabel,"hidden");b.remove(this.startDate.domNode,"hidden");break;default:console.error(this.declaredClass+" - onFrequencyTypeChange(): Invalid Frequency Type",c)}this.onContentChange()},showTerminatingOptions:function(a){if(a)this.hideDateBoxes(!1);else this.onFrequencyTypeChange(Number(this.frequencySelection.get("value")));this.onContentChange()},onContentChange:function(){this.emit("contentChange")},_showIncrementOptions:function(a,
b,c,f){var d=new n;this.own(d);null===this._incrementDialog?this._incrementDialog=new v({title:this.enterpriseStrings.invalidIncrement,value:{minuteIncrement:a,incrementDifference:b,startTime:c,endTime:f}}):this._incrementDialog.set("value",{minuteIncrement:a,incrementDifference:b,startTime:c,endTime:f});this.own(z.once(this._incrementDialog,"optionSelected",g.hitch(this,d.resolve)));this.own(z.once(this._incrementDialog,"hide",g.hitch(this,function(a){a.isFulfilled()||a.reject()},d)));this._incrementDialog.show();
return d.promise},_showRepeatOption:function(){var a=Number(this.frequencySelection.get("value"))===C.WEEKLY_FREQ;b.toggle(this.daySelectionNode,"hidden",!a)},_clearCheckboxes:function(){for(var b=0;b<this._daysOfWeek.length;b++){var c=this._checkboxArray.checkboxes[b];a.get(c,"checked")&&(a.set(c,"checked",!1),this._onChange(c));this._daysOfWeek[b].checked=!1}},_getWeekNumber:function(a){var b=new Date(a);b.setDate(1);a=a.getDate()+b.getDay();return Math.ceil(a/7)-1},_getType:function(){var a=null;
if(this._eventType===this._EventTypeMap.defaultEventType)return C.REPEAT_WEEKLY;var b=new Date(this.startDate.get("value")),c=new Date(this.endDate.get("value")),f=Number(this.frequencySelection.get("value")),d=this._repeatInfo.dateValue,g=this.terminatingDateCB.get("checked");g&&(this._repeatInfo.terminatingRepeat.start={dom:b.getDate(),m:b.getMonth(),y:b.getFullYear()},this._repeatInfo.terminatingRepeat.end={dom:c.getDate(),m:c.getMonth(),y:c.getFullYear()});d={};switch(f){case C.WEEKLY_FREQ:g?
(this._repeatInfo.terminatingRepeat.value=[],a=C.REPEAT_CALENDAR):a=C.REPEAT_RECURRENCE;break;case C.DATE_RANGE_FREQ:this._repeatInfo.dateRangeValue={start:{dom:b.getDate(),m:b.getMonth(),y:b.getFullYear()},end:{dom:c.getDate(),m:c.getMonth(),y:c.getFullYear()}};a=C.REPEAT_RANGE;break;case C.SINGLE_FREQ:d={dom:b.getDate(),m:b.getMonth(),y:b.getFullYear()};this._repeatInfo.dateValue=d;a=C.REPEAT_EXCEPTION;break;case C.DAILY_FREQ:d={dom:this.wildCard,m:this.wildCard,y:this.wildCard};this._repeatInfo.dateValue=
d;g?(this._repeatInfo.dateRangeValue={start:{dom:b.getDate(),m:b.getMonth(),y:b.getFullYear()},end:{dom:c.getDate(),m:c.getMonth(),y:c.getFullYear()}},a=C.REPEAT_RANGE):a=C.REPEAT_EXCEPTION;break;case C.MONTHLY_FREQ:d={dom:b.getDate(),m:this.wildCard,y:this.wildCard};this._repeatInfo.dateValue=d;g?(this._repeatInfo.terminatingRepeat.value=[],d={type:C.REPEAT_EXCEPTION,value:d},this._repeatInfo.terminatingRepeat.value[0]=d,a=C.REPEAT_CALENDAR):a=C.REPEAT_EXCEPTION;break;case C.YEARLY_FREQ:d={dom:b.getDate(),
m:b.getMonth(),y:this.wildCard};this._repeatInfo.dateValue=d;g?(this._repeatInfo.terminatingRepeat.value=[],d={type:C.REPEAT_EXCEPTION,value:d},this._repeatInfo.terminatingRepeat.value[0]=d,a=C.REPEAT_CALENDAR):a=C.REPEAT_EXCEPTION;break;default:console.error(this.declaredClass+" - _getType(): Invalid Option Selected",f)}this._onTypeChange(a);return a},_saveRepeat:function(){var b=this.startTime.get("value"),c=this.endTime.get("value");b.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])$/)&&this.startTime.set("value",
b+":00");c.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])$/)&&this.endTime.set("value",c+":00");if(Number(this.frequencySelection.get("value"))===C.WEEKLY_FREQ){for(b=0;b<this._checkboxArray.checkboxes.length;b++)null!==this._checkboxArray.checkboxes[b]&&(this._daysOfWeek[b].checked=a.get(this._checkboxArray.checkboxes[b],"checked"));this._repeatInfo.weeklyValue=[];this._repeatInfo.recurrenceValue.dow=[];this._repeatInfo.recurrenceValue.m=this.wildCard;this._repeatInfo.recurrenceValue.wom=this.wildCard;
for(b=c=0;b<this._daysOfWeek.length;b++)this._daysOfWeek[b].checked&&(this._repeatInfo.weeklyValue[c]=this._daysOfWeek[b].numeric,this._repeatInfo.recurrenceValue.dow[c++]=this._daysOfWeek[b].numeric)}else this._clearCheckboxes();this._daysSelected=[];this._repeatInfo.type=this._getType();if(this._repeatInfo.type===C.REPEAT_CALENDAR)if(Number(this.frequencySelection.get("value"))===C.WEEKLY_FREQ)for(b=0;b<this._repeatInfo.recurrenceValue.dow.length;++b)this._repeatInfo.terminatingRepeat.value.push({type:C.REPEAT_RECURRENCE,
value:{dow:this._repeatInfo.recurrenceValue.dow[b],wom:C.WILDCARD,m:C.WILDCARD}});else this._repeatInfo.terminatingRepeat.value={type:C.REPEAT_EXCEPTION,value:this._repeatInfo.dateValue}},getInfo:function(){this._saveRepeat();var a=this._repeatInfo.type,b=this.startTime.get("value").split(":");2===b.length&&(b[2]="00");var c=new Date(this.startDate.get("value"));c.setHours(b[0],b[1],b[2]);b=this.endTime.get("value").split(":");2===b.length&&(b[2]="00");var f=new Date(this.endDate.get("value")),d=
Number(this.frequencySelection.get("value"));a===C.REPEAT_CALENDAR||d!==C.DAILY_FREQ&&d!==C.WEEKLY_FREQ&&d!==C.YEARLY_FREQ&&d!==C.MONTHLY_FREQ||(f=new Date(this.startDate.get("value")));f.setHours(b[0],b[1],b[2]);this.endDate.set("value",f);a={repeat:{type:a,value:null},dateTime:{startTime:c,endTime:f}};switch(a.repeat.type){case C.REPEAT_WEEKLY:a.repeat.value=this._repeatInfo.weeklyValue;c=0;b=a.dateTime.startTime;f=b.getDay();a.repeat.value instanceof Array?-1===a.repeat.value.indexOf(f)&&(c=f-
a.repeat.value[0]):c=f-a.repeat.value;a.dateTime.startTime.setDate(b.getDate()-c);a.dateTime.endTime.setDate(a.dateTime.endTime.getDate()-c);break;case C.REPEAT_EXCEPTION:a.repeat.value=this._repeatInfo.dateValue;break;case C.REPEAT_RANGE:a.repeat.value=this._repeatInfo.dateRangeValue;break;case C.REPEAT_RECURRENCE:a.repeat.value=this._repeatInfo.recurrenceValue;break;case C.REPEAT_CALENDAR:a.repeat.start=this._repeatInfo.terminatingRepeat.start;a.repeat.end=this._repeatInfo.terminatingRepeat.end;
a.repeat["for"]="";a.repeat.value=this._repeatInfo.terminatingRepeat.value;break;default:console.error(this.declaredClass+" - getInfo(): Returning bad value type: ",this._repeatInfo.type,this._repeatInfo)}return g.clone(a)},_getRecurrenceValue:function(a){return{dow:a.dow,m:a.m,wom:a.wom}},fillData:function(c){this._clearListeners();this.eventInfo=c;null!==this.startDateText&&(a.set(this.startDateText,"innerHTML",""),b.remove(this.startDateText,"readOnlyDateText"),this.startDateText=null);null!==
this.endDateText&&(a.set(this.endDateText,"innerHTML",""),b.remove(this.endDateText,"readOnlyDateText"),this.endDateText=null);this._clearCheckboxes();var f=null,d=!1;null!==c.repeat&&c.repeat.type===C.REPEAT_CALENDAR?(d=!0,f=c.repeat.value instanceof Array?c.repeat.value[0]:c.repeat.value):(d=!1,f=c.repeat);if(null!==f&&void 0!==f.type){this.frequencySelection.set("disabled",c.startTime.getDate()!==c.endTime.getDate());this._repeatInfo.type=f.type;this._repeatInfo.type===C.REPEAT_WEEKLY?this.setEventType(this._EventTypeMap.defaultEventType):
this.setEventType(this._EventTypeMap.specialEventType);var k=f.value;switch(f.type){case C.REPEAT_WEEKLY:this._fillWeekly(c,d);break;case C.REPEAT_EXCEPTION:this._fillExceptionRepeat(k,c,d);break;case C.REPEAT_RANGE:this._fillRange(c,d);break;case C.REPEAT_RECURRENCE:this._fillRecurrenceRepeat(k,c,d);break;default:console.error(this.declaredClass+" - fillData(): Invalid repeat Type:",f.type,f)}}else rc.session.canEditEnterprise()&&(rc.session.canEditException()?this._fillSingle(c,d):this._fillWeekly(c,
d));this._showRepeatOption();this.eventInfo.hasOwnProperty("eventId")&&this.frequencySelection.set("disabled",-1!==this.eventInfo.eventId);setTimeout(g.hitch(this,this._setupChangeListeners),1)},_adjustTerminatingDOW:function(a,b,c){for(var f=0;f<a.length;++f)if(a[f].value.dow===b){a[f].value.dow=c;break}},_fillExceptionRepeat:function(a,b,c){a.y===this.wildCard&&a.m===this.wildCard&&a.dom===this.wildCard?this._fillDaily(b,c):a.y===this.wildCard&&a.m===this.wildCard&&a.dom!==this.wildCard?this._fillMonthly(b,
C.REPEAT_EXCEPTION,c):a.y===this.wildCard&&a.m!==this.wildCard&&a.dom!==this.wildCard?this._fillYearly(b,c):this._fillSingle(b,c)},_fillRecurrenceRepeat:function(a,b,c){a.m===this.wildCard&&a.wom===this.wildCard&&a.dow===this.wildCard?this._setDropDown(C.DAILY_FREQ):a.m===this.wildCard&&a.wom===this.wildCard&&a.dow!==this.wildCard?this._fillWeekly(b,c):console.error("Unsupported event",b)},_setDateTime:function(a,b){var c=a.getHours()+":"+E.pad(a.getMinutes(),2,0)+":"+E.pad(a.getSeconds(),2,0);this.startTime.set("value",
c);this.startDate.set("value",a);c=b.getHours()+":"+E.pad(b.getMinutes(),2,0)+":"+E.pad(b.getSeconds(),2,0);this.endTime.set("value",c);this.endDate.set("value",b)},_fillReadOnly:function(a){b.add(this.frequencyContainer,"hidden");b.add(this.daySelectionNode,"hidden");var c=new Date,f=new Date;null!==a.startTime&&(c=new Date(a.startTime));null!==a.endTime&&(f=new Date(a.endTime));this._setDateTime(c,f);this.hideDateBoxes(!0)},_fillSingle:function(a){this._setDropDown(C.SINGLE_FREQ);var b=new Date,
c=new Date;null!==a.startTime&&(b=new Date(a.startTime));null!==a.endTime&&(c=new Date(a.endTime));this._setDateTime(b,c)},_fillRange:function(a,c){this._setDropDown(C.DATE_RANGE_FREQ);var f=new Date(a.startTime),d=new Date(a.endTime);-1!==a.index&&a.repeat.value.start.y!==C.WILDCARD&&a.repeat.value.start.m!==C.WILDCARD&&a.repeat.value.start.dom!==C.WILDCARD&&a.repeat.value.end.y!==C.WILDCARD&&a.repeat.value.end.m!==C.WILDCARD&&a.repeat.value.end.dom!==C.WILDCARD&&(f.setFullYear(a.repeat.value.start.y,
a.repeat.value.start.m,a.repeat.value.start.dom),d.setFullYear(a.repeat.value.end.y,a.repeat.value.end.m,a.repeat.value.end.dom));this._setDateTime(f,d);b.toggle(this.startDate.domNode,"hidden",!1);b.toggle(this.endDate.domNode,"hidden",!1)},_fillDaily:function(a){this._setDropDown(C.DAILY_FREQ);this.terminatingDateCB.set("checked",!1);this._setDateTime(new Date(a.startTime),new Date(a.endTime))},_fillWeekly:function(b,c){this._setDropDown(C.WEEKLY_FREQ);var f;f=null;var d=new Date,g=new Date;if(c){f=
b.repeat.value;if(b.originalStartTime&&b.startTime!==b.originalStartTime){var k=b.startTime.getDay(),h=b.originalStartTime.getDay();this._adjustTerminatingDOW(f,h,k)}b.repeat.start&&(d=A.bacnetDateToJSDate(b.repeat.start),b.startTime<d&&(d=b.startTime));b.repeat.end&&(g=A.bacnetDateToJSDate(b.repeat.end));b.repeat.end&&b.repeat.start?(this.terminatingDateCB.set("checked",!0),this._disableDaySelection(!1)):this.terminatingDateCB.set("checked",!1);this._disableTerminatingCheckbox(!0)}else f=b.repeat,
this.terminatingDateCB.set("checked",!1),b.hasOwnProperty("eventId")&&this._disableDaySelection(-1!==b.eventId);k=d.getDay();if(null===f)g=A.addMinutes(g,30),this._setDateTime(d,g),f=this._checkboxArray.checkboxes[k],this._daysOfWeek[k].checked=!0,a.set(f,"checked",!0),this._onChange(f);else{c?(d.setHours(b.startTime.getHours(),b.startTime.getMinutes(),b.startTime.getSeconds(),0),g.setHours(b.endTime.getHours(),b.endTime.getMinutes(),b.endTime.getSeconds(),0)):(d=new Date(b.startTime),g=new Date(b.endTime));
this._setDateTime(d,g);d=null;d=[];if(f.type===C.REPEAT_WEEKLY)d=f.value;else if(c)for(d=[],g=0;g<f.length;++g)"delete"!==f[g].action&&d.push(f[g].value.dow);else d=f.value.dow;d=d instanceof Array?d:[d];this.setDaysForEvent(d)}},_disableDaySelection:function(c){this._disableTerminatingCheckbox(c);h.forEach(this._checkboxArray.checkboxes,g.hitch(this,function(b){a.set(b,"disabled",c)}));h.forEach(this._checkboxArray.labels,g.hitch(this,function(a){b.toggle(a,"disabled",c)}))},_disableTerminatingCheckbox:function(a){this.terminatingDateCB.set("disabled",
a);b.toggle(this.terminatingDate,"disabled",a)},_fillMonthly:function(a,b,c){this._setDropDown(C.MONTHLY_FREQ);b=new Date(a.startTime);var f=new Date(a.endTime);c?(a.repeat.start&&(b!==a.originalStartTime&&(a.repeat.start.dom=b.getDate()),b=A.bacnetDateToJSDate(a.repeat.start)),a.repeat.end&&(f!==a.originalEndTime&&(a.repeat.end.dom=f.getDate()),f=A.bacnetDateToJSDate(a.repeat.end)),a.repeat.end&&a.repeat.start?this.terminatingDateCB.set("checked",!0):this.terminatingDateCB.set("checked",!1),this._disableTerminatingCheckbox(!0)):
(this.terminatingDateCB.set("checked",!1),a.hasOwnProperty("eventId")&&this._disableTerminatingCheckbox(-1!==a.eventId));b.setHours(a.startTime.getHours(),a.startTime.getMinutes(),a.startTime.getSeconds());f.setHours(a.endTime.getHours(),a.endTime.getMinutes(),a.endTime.getSeconds());this._setDateTime(b,f)},_fillYearly:function(a,b){-1!==a.index&&this._setDropDown(C.YEARLY_FREQ);var c=new Date(a.startTime),f=new Date(a.startTime);b?(a.repeat.start&&(c!==a.originalStartTime&&(a.repeat.start.dom=c.getDate(),
a.repeat.start.m=c.getMonth()),c=A.bacnetDateToJSDate(a.repeat.start)),a.repeat.end&&(f!==a.originalEndTime&&(a.repeat.end.dom=f.getDate(),a.repeat.end.m=f.getMonth()),f=A.bacnetDateToJSDate(a.repeat.end)),a.repeat.end&&a.repeat.start?this.terminatingDateCB.set("checked",!0):this.terminatingDateCB.set("checked",!1),this._disableTerminatingCheckbox(!0)):(this.terminatingDateCB.set("checked",!1),a.hasOwnProperty("eventId")&&this._disableTerminatingCheckbox(-1!==a.eventId));c.setHours(a.startTime.getHours(),
a.startTime.getMinutes(),a.startTime.getSeconds());f.setHours(a.endTime.getHours(),a.endTime.getMinutes(),a.endTime.getSeconds());this._setDateTime(c,f)},onTimeChange:function(){this.emit("timeChange",null)},setDaysForEvent:function(b){for(var c=0;c<b.length;c++){var f=this._checkboxArray.checkboxes[b[c]];this._daysOfWeek[b[c]].checked=!0;a.set(f,"checked",!0);this._onChange(f)}},_setDropDown:function(a){null!==this.eventInfo&&(this.onFrequencyTypeChange(a),this.frequencySelection.set("value",a))},
hideDateBoxes:function(a){h.forEach(this._dateBoxes,function(c){void 0!==c.domNode?b.toggle(c.domNode,"hidden",a):b.toggle(c,"hidden",a)})},destroy:function(){this._clearListeners();for(var a=this._checkboxArray.checkboxes.length-1;0<=a;--a)t.destroy(this._checkboxArray.checkboxes[a]),this._checkboxArray.checkboxes.splice(a,1),t.destroy(this._checkboxArray.labels[a]),this._checkboxArray.labels.splice(a,1);for(a=this._timeValueArray.length-1;0<=a;--a)this._timeValueArray.splice(a,1);this.inherited(arguments)}})})},
"webview/reliable/_enterpriseSchedule/widget/IncrementOptionsDialog":function(){define("dijit/Dialog dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/i18n!../../../nls/all dojo/i18n!../../../nls/enterpriseSchedules dojo/on dojo/string dojo/text!./templates/IncrementOptionsDialog.html".split(" "),function(r,p,m,l,h,c,g,d,n,a){return p("webview/reliable/_enterpriseSchedule/widget/IncrementOptionsDialog",r,{closable:!1,dialogText:"",enterpriseStrings:g,highOption:null,lowOption:null,
minuteIncrement:0,templateString:a,webviewStrings:c,postCreate:function(){this.inherited(arguments);this.own(d(this.lowTimeOptionContainer,"click",m.hitch(this,this._onLowOptionSelected)),d(this.highTimeOptionContainer,"click",m.hitch(this,this._onHighOptionSelected)))},_setDialogTextAttr:function(a){var b=this.minuteIncrement,c=this.webviewStrings.incrementMinute;60<=b&&(b/=60,c=1===b?this.webviewStrings.hour:this.webviewStrings.incrementHour);a=n.substitute(a,[b,c]);this._set("dialogText",a);l.set(this.timeValueIncrements,
"innerHTML",a)},_setValueAttr:function(a){this.minuteIncrement=a.minuteIncrement;var b=a.startTime,c=a.endTime,d=60*b[0]+Number(b[1]),f=60*c[0]+Number(c[1]);2===b.length&&b.push("00");2===c.length&&c.push("00");c[2]=b[2];f-=a.incrementDifference;this.startTime=a.startTime.join(":");a=f+this.minuteIncrement;this._setOptionValues("lowOption",f,b[2]);this._setOptionValues("highOption",a,b[2]);this._setLowHighText(d,f)},onOptionSelected:function(a){this.hide()},_onHighOptionSelected:function(){this.onOptionSelected(this.highOption)},
_onLowOptionSelected:function(){this.onOptionSelected(this.lowOption)},_setLowHighText:function(a,c){if(c!==a){var b=[this.lowOption.hours,this.lowOption.minutes,this.lowOption.seconds].join(":");l.set(this.lowTimeOptionContainer,"innerHTML",this.startTime+" - "+b);h.remove(this.lowTimeFullContainer,"hidden")}else h.add(this.lowTimeFullContainer,"hidden");24>this.highOption.hours?(b=[this.highOption.hours,this.highOption.minutes,this.highOption.seconds].join(":"),l.set(this.highTimeOptionContainer,
"innerHTML",this.startTime+" - "+b),h.remove(this.highTimeFullContainer,"hidden")):h.add(this.highTimeFullContainer,"hidden");h.contains(this.highTimeFullContainer,"hidden")&&h.contains(this.lowTimeFullContainer,"hidden")?(h.remove(this.closeButtonNode,"hidden"),h.add(this.breakBetweenTextandContent,"hidden"),this.set("dialogText",this.enterpriseStrings.timeValueIncrementMidnight)):(h.add(this.closeButtonNode,"hidden"),h.remove(this.breakBetweenTextandContent,"hidden"),this.set("dialogText",this.enterpriseStrings.timeValuesIncrement))},
_setOptionValues:function(a,c,d){var b=Math.floor(c/60);c%=60;1===c.toString().length&&(c="0"+c);this[a]={hours:b,minutes:c,seconds:d}}})})},"webview/widget/ValueInput":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/ValueInput.html ../util/globalConstants dijit/form/FilteringSelect dijit/form/ValidationTextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return l("webview/widget/ValueInput",[p,r,m],{_binaryData:[{id:0,state:d.off},{id:1,state:d.on}],_defaultValue:null,analogTBInput:null,binaryStore:null,dataType:-1,inputFieldsContainers:{},multiStateStore:null,stateValues:[],templateString:t,constructor:function(){this.webviewStrings=d;this.rcStrings=g;this.binaryStore=new a({data:this._binaryData})},postCreate:function(){this.inherited(arguments);this.inputFieldsContainers={2:this.filteringInputContainer,4:this.analogInputContainer,
9:this.filteringInputContainer};this.setupOnChanges()},createFilteringSelect:function(a){this.valueFilteringInput.set({store:a,searchAttr:"state",labelAttr:"state",labelType:"html",queryExpr:"*${0}*"});this.own(n(this.valueFilteringInput,"change",h.hitch(this,this._onValueChanged)))},updateMultiSelectOptions:function(c,f,d){0<d.length&&f!==d&&(null===this.multiStateStore?this.multiStateStore=new b(new a({idProperty:"orderIndex",data:d})):this.multiStateStore.setData(d),this.createFilteringSelect(this.multiStateStore))},
validate:function(){var a=this.valueFilteringInput;this.dataType===k.DATATYPE_ANALOG&&(a=this.analogTBInput);a.focus();return a.validate()},createAnalogInput:function(){this.analogTBInput.get("validator")!==this._checkInput&&this.analogTBInput.set("validator",h.hitch(this,this._checkInput));this.own(n(this.analogInputContainer,"change",h.hitch(this,this._onValueChanged)))},updateValueSelector:function(a,b,g){-1!==b&&c.add(this.inputFieldsContainers[b],"hidden");switch(g){case k.DATATYPE_MULTI_STATE:this.createFilteringSelect(this.multiStateStore);
break;case k.DATATYPE_ANALOG:this.createAnalogInput();break;case k.DATATYPE_BINARY:this.createFilteringSelect(this.binaryStore);this.valueFilteringInput.isValid=h.hitch(this,function(){if("undefined"!==typeof this.valueFilteringInput){var a=new RegExp("^("+d.off+"$|"+d.on+"$|[0-9]+$)");return null!==this.valueFilteringInput.get("displayedValue").match(a)?!0:!1}return!0});break;default:console.error(this.declaredClass+" - updateValueSelector(): Invalid data type",g)}c.remove(this.inputFieldsContainers[g],
"hidden")},disableFields:function(a){null!==this.valueFilteringInput&&(this.valueFilteringInput.set("disabled",a),c.toggle(this.valueFilteringInput.domNode,"disabled",a));this.analogTBInput.set("disabled",a);c.toggle(this.analogTBInput.domNode,"disabled",a)},_checkInput:function(){var a=this.analogTBInput.get("value"),b=d.numberInvalid;if(a.toString().match(/^(-)?(\d)*(\.)?(\d)*$/))return!0;this.analogTBInput.invalidMessage=b;return!1},_onValueChanged:function(a){if(this.dataType===k.DATATYPE_BINARY&&
(this.binaryStore.setData(h.clone(this._binaryData)),""===a))if(a=Number(this.valueFilteringInput.get("displayedValue")))this.binaryStore.add({id:a,state:a.toString()});else{this.valueFilteringInput.set("displayedValue",this._defaultValue);return}this.onValueChanged(a)},_getBinaryValue:function(){var a=0;return a=this.valueFilteringInput.get("displayedValue")===d.off||this.valueFilteringInput.get("displayedValue")===d.on?Number(this.valueFilteringInput.get("value")):Number(this.valueFilteringInput.get("displayedValue"))},
setupOnChanges:function(){this.own(this.watch("dataType",h.hitch(this,this.updateValueSelector)));this.own(this.watch("stateValues",h.hitch(this,this.updateMultiSelectOptions)))},onValueChanged:function(a){},setRepeatTypeChanged:function(a){this._repeatType=a},fillData:function(a){this._defaultValue=a.defaultValue;var b=a.startValue;null===a.startValue&&(b=this._defaultValue);switch(this.dataType){case k.DATATYPE_BINARY:this.binaryStore.setData(h.clone(this._binaryData));a=this.binaryStore.query({id:b});
0===a.length?(b={id:b,state:b.toString()},this.binaryStore.add(b)):b=a[0];this.valueFilteringInput.set("value",b.id);this.valueFilteringInput.set("displayedValue",b.state);break;case k.DATATYPE_MULTI_STATE:this.createFilteringSelect(this.multiStateStore);this.valueFilteringInput.set("value",b);break;case k.DATATYPE_ANALOG:this.createAnalogInput(),this.analogTBInput.set("value",b)}},getInfo:function(){var a=-1;switch(this.dataType){case k.DATATYPE_MULTI_STATE:a=Number(this.valueFilteringInput.get("value"));
break;case k.DATATYPE_BINARY:a=this._getBinaryValue();break;case k.DATATYPE_ANALOG:a=Number(this.analogTBInput.get("value"));break;default:console.error(this.declaredClass+" - getInfo(): Invalid Data Type",this.dataType)}return{startValue:a,endValue:"Relinquish"}},destroy:function(){this.inherited(arguments)}})})},"webview/reliable/_enterpriseSchedule/ScheduleTree":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/store/Memory dojo/store/Observable dojo/request/xhr dojo/text!./templates/ScheduleTree.html ../../util/audit".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return g("webview/reliable/_enterpriseSchedule/ScheduleTree",[p,r,m],{templateString:k,_colourMap:null,_scheduleTree:null,_scheduleStore:null,_linkedScheduleId:null,_treeModel:null,_debounceTime:500,_changeTimeout:null,constructor:function(){this._rootNode={id:-1,name:"root",type:"root",value:null,hasChildren:!0};this._scheduleStore=new b(new a({data:[this._rootNode],getChildren:function(a){return this.query({parent:a.id})}}));this._treeModel=new h({store:this._scheduleStore,
query:{type:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}})},postCreate:function(){this.inherited(arguments);this._getTreeNodes()},canAccessSchedule:function(a){return this.getSchedules().some(function(b){return Number(b.id)===a})},disableFields:function(a){this._scheduleTree&&this._scheduleTree.set("disabled",a)},getFirstNode:function(){return this._scheduleTree._getFirst()},getColourMap:function(){return this._colourMap},getParentFromArray:function(a){var b=this.getSchedules(),f=
null,g=Number.MAX_VALUE,b=c.filter(b,d.hitch(this,function(b){return-1<a.indexOf(Number(b.id))}));if(0<b.length)for(var f=b[0],k=null,h=null,l=0;l<b.length;++l){k=b[l];if(-1===Number(k.parent)){f=k;break}h=a.indexOf(Number(k.id));if(h<g&&(g=h,f=k,0===h))break}return f},getScheduleFromId:function(a){return this._scheduleStore.get(a)},getScheduleTitleFromId:function(a){var b="";if(a=this._scheduleStore.get(a))b=a.name;return b},getSchedules:function(){return this._scheduleStore.query(function(a){return"undefined"!==
typeof a.parent&&null!==a.parent})},onChange:function(){this._changeTimeout=null},onResize:function(){},onTreeLoaded:function(){},resize:function(){this.inherited(arguments);this.onResize()},selectFirstSchedule:function(){var a=!1;if(null==this._linkedScheduleId){var b=this._scheduleStore.query({parent:this._rootNode.id});0<b.length&&(this.selectNode(b[0].id),a=!0)}else this._linkedScheduleId=null,a=!0;return a},selectLinkedSchedule:function(a,b){var c=!1,f=this._scheduleStore.query({systemId:a,mnemonic:b});
0<f.length&&(c=f[0],this.selectNode(c.id),this._linkedScheduleId=c.id,c=!0);return c},selectNode:function(a){var b=[a];this._linkedScheduleId=null;this._getParentPath(a,b);this._scheduleTree.set("path",b)},_buildAuditLogTitle:function(){return rc.session.getSitePath(this.site)+this.domNode.innerText},_buildTree:function(){this._scheduleTree=new l({lastNodePressArgs:{nodeWidget:null,event:null},model:this._treeModel,baseClass:"schedule-tree",showRoot:!1,autoExpand:!1,getIconStyle:d.hitch(this,function(a){if("schedule"===
a.type)return{backgroundColor:a.color,backgroundImage:"none",marginBottom:"4px",height:"14px",width:"14px"}}),onClick:function(){this.resize()},_createTreeNode:d.hitch(this,function(a){return g(l._TreeNode,{_setLabelAttr:{node:"labelNode",type:"innerHTML"}})(a)})},this.treeContainer);n.after(this._scheduleTree,"_onNodePress",d.hitch(this,function(a,b){"pointerdown"===b.type&&(this._scheduleTree.lastNodePressArgs.nodeWidget=a,this._scheduleTree.lastNodePressArgs.event=b)}),!0);n.after(this._scheduleTree,
"_onClick",d.hitch(this,function(a,b){"click"===b.type&&a.id===this._scheduleTree.lastNodePressArgs.nodeWidget.id&&b.target.outerHTML!==this._scheduleTree.lastNodePressArgs.event.target.outerHTML&&this._scheduleTree._onClick(this._scheduleTree.lastNodePressArgs.nodeWidget,this._scheduleTree.lastNodePressArgs.event)}),!0);this._scheduleTree.onLoadDeferred.then(d.hitch(this,this._onTreeLoaded));this.own(this._scheduleTree.watch("selectedItem",d.hitch(this,this._onChange)))},_getParentPath:function(a,
b){var c=this._scheduleStore.get(a).parent;if("undefined"!==typeof c&&null!==c)b.unshift(c),this._getParentPath(c,b);else return b},_getSelectedAttr:function(){return this._scheduleTree.get("selectedItem")},_getTreeNodes:function(){t.get("EnterpriseSchedules/GetFlatScheduleTree",{handleAs:"json",query:{enterpriseId:this.enterpriseScheduleId,ignoreRestrictions:!0}}).then(d.hitch(this,this._setColourMap));t.get("EnterpriseSchedules/GetFlatScheduleTree",{handleAs:"json",query:{enterpriseId:this.enterpriseScheduleId}}).then(d.hitch(this,
this._populateStore))},_onChange:function(a,b,c){if(null===b||b.id!==c.id)null!==this._changeTimeout&&clearTimeout(this._changeTimeout),this._changeTimeout=setTimeout(d.hitch(this,this.onChange,c.id),this._debounceTime)},_onTreeLoaded:function(){this.onTreeLoaded()},_populateStore:function(a){if("undefined"!==typeof a.errStatus&&200===a.errStatus){a.scheduleData.unshift(this._rootNode);this._scheduleStore.setData(a.scheduleData);this._buildTree();var b=[{systemId:null,objectName:"#EnterpriseSchedule"+
this.enterpriseScheduleId}];a.scheduleData.forEach(d.hitch(this,function(a){a.mnemonic&&b.push({systemId:a.systemId,objectName:a.mnemonic})}));a=this._buildAuditLogTitle();q.setContextDataWithSiteId(this.site,b,a)}},_setColourMap:function(a){null===this._colourMap&&(this._colourMap={},c.forEach(a.scheduleData,d.hitch(this,function(a){this._colourMap[a.id]=a.color})))}})})},"webview/reliable/FacilityManagerReport":function(){define("dgrid/Grid dgrid/OnDemandGrid dojo/_base/declare dojo/_base/lang dojo/currency dojo/date/locale dojo/Deferred dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../nls/afterHoursReport dojo/on dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string rc/_base/Error rc/_base/util dojo/text!./_afterHours/templates/TenantReport.html ./TenantReport ../util/globalConstants ../widget/ColumnHider ../widget/dGridExtensions/SummaryRow dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/ClientToolBar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C){return m("webview/reliable/FacilityManagerReport",[y],{templateString:x,afterHoursStrings:b,currency:"USD",hasRate:!0,_dataPath:"FacilityManagerReport",_generalPath:"FacilityManagerGeneral",_hasMixedCurrency:!1,constructor:function(){this._parseHash();this.forBlock="true"===this.forBlock;this.scheduleId=Number(this.scheduleId);this._buildColumnStructure();this._gridStore=new f(new q({data:[]}));this.observer=this._gridStore.query().observe(l.hitch(this,
this._updateTotals))},postCreate:function(){rc.session.hasRole(rc.session.roles2.viewAfterHoursReport,!0)?(this.inherited(arguments),d.add(this.showFutureContainer,"hidden")):setTimeout(l.hitch(this,function(){var b=new w({name:a.permissionDenied,message:u.substitute(a.notAuthToViewX,[this.webviewStrings.afterHoursReport.toLowerCase()])});this._onInitError(b)}),1)},_setTitle:function(){this.fullTitle=this.afterHoursStrings.afterHoursSummary;this._toolbar&&this._toolbar.setTitle(this.fullTitle);this.onSetTitle(this.fullTitle)},
_buildAuditLogTitle:function(){return rc.session.getSitePath(this.site)+" "+this.fullTitle},_buildColumnStructure:function(){this._columnStructure=[{label:this.webviewStrings.enterpriseSchedule,field:"enterpriseSchedule",id:"enterpriseScheduleCol",renderCell:l.hitch(this,function(a,b){var c=n.create("span",{innerHTML:b,"class":"linkable",title:this.webviewStrings.go+" "+b});this.own(t(c,"click",l.hitch(this,this._onClickES,a.rootScheduleId)));return c})},{label:this.afterHoursStrings.hours,field:"hours",
id:"hoursCol",formatter:this._formatNumber},{label:this.webviewStrings.scheduleCost,field:"cost",id:"costCol",formatter:l.hitch(this,this._formatPrice)}]},_createGrid:function(){null===this._grid&&(this._setAuditContext(),this._grid=new (m([r,p,A,C]))({columns:this._columnStructure,className:"dgrid-facilityManagerReport dgrid-autoheight",sort:[{attribute:"enterpriseSchedule",descending:!1}],store:this._gridStore},this.gridNode),this.own(t(this._grid,"dgrid-refresh-complete",l.hitch(this,this._updateTotals))),
this._grid.startup())},_onClickES:function(a){a&&0!==a&&(a=z.mnemonicToUri("TenantReport?\x26scheduleId\x3d"+a+"\x26forBlock\x3dfalse"),window.location.hash=a)},_getTotals:function(){var a={cost:"",hours:"",rate:""};if(!1===this._hasMixedCurrency){a.hours=a.cost=0;for(var b=this._gridStore.data.length;b--;)a.hours+=this._gridStore.data[b].hours,a.cost+=this._gridStore.data[b].cost,this._gridStore.data[b].currency&&(this.currency=this._gridStore.data[b].currency);a.cost=this._formatPrice(a.cost);a.hours=
this._formatNumber(a.hours);a.rate=this.rcStrings.rtrTotal}return a},_fetchData:function(a){var b=new g;this.own(b);this.set("reportPeriod",a);a={periodStart:c.format(a.start,{selector:"date",datePattern:"dd/MM/yyyy"}),periodEnd:c.format(a.end,{selector:"date",datePattern:"dd/MM/yyyy"})};this.forBlock?l.mixin(a,{scheduleId:null,blockId:this.scheduleId}):l.mixin(a,{scheduleId:this.scheduleId,blockId:null});k.get(this._dataPath,{query:a,handleAs:"json"}).then(l.hitch(this,function(a){a.errStatus===
this._SuccessCode?(this._hasMixedCurrency=a.isMixedCurrency,this._gridStore.setData(a.data),b.resolve()):(this._gridStore.setData([]),b.reject(a.errStatus));null!==this._grid&&this._grid.refresh()}),l.hitch(this,b.reject));return b.promise},_formatPrice:function(a,b){var c=this._formatNumber(a);b&&null!==b.currency?c=h.format(a,{currency:b.currency,symbol:v.CurrencyToSymbol[b.currency]}):null!==this.currency&&(c=h.format(a,{currency:this.currency,symbol:v.CurrencyToSymbol[this.currency]}));return c},
_setAuditContext:function(){var a=this._buildAuditLogTitle();webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#EnterpriseSchedule"}],a)},_setGridSize:function(){},_updateTotals:function(){if(null!==this._grid&&this.hasRate){var a=l.clone(this._grid.get("summary")),b=this._getTotals();JSON.stringify(b)!==JSON.stringify(a)&&(this._grid.set("summary",b),this._grid.refresh())}}})})},"webview/reliable/TenantReport":function(){define("dgrid/Grid dgrid/OnDemandGrid dojo/_base/declare dojo/_base/lang dojo/aspect dojo/currency dojo/date/locale dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../nls/afterHoursReport dojo/i18n!../nls/all dojo/i18n!../nls/errorMessages dojo/json dojo/number dojo/on dojo/query dojo/request/xhr dojo/store/Observable dojo/store/Memory dojo/text!./_afterHours/templates/TenantReport.html dojo/topic rc/_base/util rc/_Widget ./_afterHours/formatUtilities ./_afterHours/RangePicker ./_afterHours/ReasonDialog ../util/globalConstants ../widget/ColumnHider ../widget/dGridExtensions/dGridExcelExporterMixin ../widget/dGridExtensions/SummaryRow dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/ClientToolBar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O){return m("webview/reliable/TenantReport",[H,M],{templateString:B,afterHoursStrings:f,currency:null,hasRate:!1,observer:null,rcStrings:q,viewRangeStart:null,viewRangeEnd:null,_dataPath:"TenantReportTable",_generalPath:"TenantReportGeneral",webviewStrings:u,_ColumnMasks:{request:1,user:2,event:4,source:8,service:16,start:32,end:64,hours:128,rate:256,cost:512,reason:1024,mnemonic:2048},_ErrorCodeToMessageMap:{502:w.generalScheduleDoesNotExist,
504:w.unexpectedError,505:w.siteDoesNotExist,506:w.generalInsufficientPrivileges,403:w.accessForbidden},_columnMask:65535,_grid:null,_periodSelector:null,_reasonDialog:null,_SuccessCode:200,_UnexpectedCode:504,constructor:function(){this._gridStore=new C(new E({data:[]}));this.observer=this._gridStore.query().observe(l.hitch(this,this._updateTotals))},postCreate:function(){this.inherited(arguments);this._parseHash();this.forBlock="true"===this.forBlock;this.scheduleId=Number(this.scheduleId);this._setDefaultReportPeriod();
this._fetchReportProperties().then(l.hitch(this,this._propertiesFetched),l.hitch(this,this._throwPageError));this.own(y(this.reportDates,"click",l.hitch(this,this._showReportPeriodSelector)),y(this.showFutureCB,"change",l.hitch(this,function(){this._fetchData({start:this.viewRangeStart,end:this.viewRangeEnd})})))},exportCsv:function(){this.exportToCSV(this._grid,"afterhours.csv",this.fullTitle)},print:function(){this.dgridToTable(this._grid).then(l.hitch(this,function(a){b.add(this.gridNode,"hidden");
t.place(a,this.printableGridContainer,"only");b.remove(this.printableGridContainer,"hidden");this.printWithPreview(this.domNode).then(l.hitch(this,function(){b.remove(this.gridNode,"hidden");t.empty(this.printableGridContainer);b.add(this.printableGridContainer,"hidden")}))}))},resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(l.hitch(this,this._setGridSize),1)},_addToolbarButtons:function(){this._toolbar.addToolBarItem(this.webviewStrings.toggleColumns,"toggleColumn","rc24Icon svg-column-toggle-icon toolbarButtonIcon",
l.hitch(this,this._positionAndShowColumnSelector));rc.session.enforceChangeApproval||this._toolbar.addToolBarItem(q.xport,"export","rc24Icon svg-export-icon toolbarButtonIcon",l.hitch(this,this.exportCsv));this._toolbar.addToolBarItem(u.exportExcel,"exportExcel","rc24Icon toolbarButtonIcon svg-xsl-export-icon",l.hitch(this,this.exportGridAsExcel));this.setTooltips()},_buildColumnStructure:function(){this._columnStructure=[{label:this.afterHoursStrings.service,field:"eventDate",id:"serviceCol",hidden:(this._columnMask&
this._ColumnMasks.service)!==this._ColumnMasks.service,unhidable:(this._columnMask&this._ColumnMasks.service)!==this._ColumnMasks.service,formatter:J._formatDate},{label:this.rcStrings.event,field:"eventName",id:"eventCol",hidden:(this._columnMask&this._ColumnMasks.event)!==this._ColumnMasks.event,unhidable:(this._columnMask&this._ColumnMasks.event)!==this._ColumnMasks.event},{label:this.webviewStrings.source,field:"source",id:"sourceCol",hidden:(this._columnMask&this._ColumnMasks.source)!==this._ColumnMasks.source,
unhidable:(this._columnMask&this._ColumnMasks.source)!==this._ColumnMasks.source},{label:this.rcStrings.mnemonic,field:"mnemonic",id:"mnemonicCol",hidden:(this._columnMask&this._ColumnMasks.mnemonic)!==this._ColumnMasks.mnemonic,unhidable:(this._columnMask&this._ColumnMasks.mnemonic)!==this._ColumnMasks.mnemonic},{label:this.webviewStrings.startLabel,field:"startTime",id:"startCol",hidden:(this._columnMask&this._ColumnMasks.start)!==this._ColumnMasks.start,unhidable:(this._columnMask&this._ColumnMasks.start)!==
this._ColumnMasks.start,formatter:J._formatTime},{label:this.webviewStrings.endLabel,field:"endTime",id:"endCol",hidden:(this._columnMask&this._ColumnMasks.end)!==this._ColumnMasks.end,unhidable:(this._columnMask&this._ColumnMasks.end)!==this._ColumnMasks.end,formatter:J._formatTime},{label:this.afterHoursStrings.request,field:"creationDate",id:"requestCol",hidden:(this._columnMask&this._ColumnMasks.request)!==this._ColumnMasks.request,unhidable:(this._columnMask&this._ColumnMasks.request)!==this._ColumnMasks.request,
formatter:J._formatDate},{label:this.webviewStrings.wvUser,field:"user",id:"userCol",hidden:(this._columnMask&this._ColumnMasks.user)!==this._ColumnMasks.user,unhidable:(this._columnMask&this._ColumnMasks.user)!==this._ColumnMasks.user},{label:this.afterHoursStrings.rate,field:"rate",id:"rateCol",hidden:!this.hasRate||(this._columnMask&this._ColumnMasks.rate)!==this._ColumnMasks.rate,unhidable:!this.hasRate||(this._columnMask&this._ColumnMasks.rate)!==this._ColumnMasks.rate,formatter:l.hitch(this,
function(a){return this._formatPrice(a)+this.webviewStrings.scheduleRate})},{label:this.afterHoursStrings.hours,field:"hours",id:"hoursCol",hidden:(this._columnMask&this._ColumnMasks.hours)!==this._ColumnMasks.hours,unhidable:(this._columnMask&this._ColumnMasks.hours)!==this._ColumnMasks.hours,formatter:J._formatNumber},{label:this.webviewStrings.scheduleCost,field:"cost",id:"costCol",hidden:!this.hasRate||(this._columnMask&this._ColumnMasks.cost)!==this._ColumnMasks.cost,unhidable:!this.hasRate||
(this._columnMask&this._ColumnMasks.cost)!==this._ColumnMasks.cost,formatter:l.hitch(this,this._formatPrice)},{label:this.rcStrings.reason,field:"reason",id:"reasonCol",hidden:(this._columnMask&this._ColumnMasks.reason)!==this._ColumnMasks.reason,unhidable:(this._columnMask&this._ColumnMasks.reason)!==this._ColumnMasks.reason,renderCell:l.hitch(this,J._truncatedText,this._showReasonDialog)}]},_sortDate:function(a,b,c,d){c=g.parse(c[b],{selector:"date",datePattern:"dd/MM/yyyy"});b=g.parse(d[b],{selector:"date",
datePattern:"dd/MM/yyyy"});if(null===c||null===b)return console.error(this.declaredClass+" - _sortDate(): Must be a date in the format dd/MM/yyyy"),0;d=0;d=c.getTime()>b.getTime()?-1:c.getTime()<b.getTime()?1:0;return a?d:-1*d},_customGridSort:function(a){a instanceof Event&&a.preventDefault();var b=a.sort[0],c=null,d=!1,c="undefined"!==typeof this._grid.sortObject?this._grid.sortObject:this._grid.get("sort")[0];c.attribute===b.attribute&&(d=!1===c.descending);this._grid.sortObject=b;this._grid.sortObject.descending=
d;this._grid.set("sort",l.hitch(this,this._sortDate,d,b.attribute));this._grid.updateSortArrow(a.sort,!1)},_createGridConnections:function(){this.own(y(this._grid,[".dgrid-column-requestCol:dgrid-sort",".dgrid-column-serviceCol:dgrid-sort"],l.hitch(this,this._customGridSort)))},_createGrid:function(){if(null===this._grid){this._setAuditContext();var a=this.hasRate&&(this._columnMask&this._ColumnMasks.rate)===this._ColumnMasks.rate,b=m([r,p,L,O]);a||(b=m([r,p,L]));this._grid=new b({columns:this._columnStructure,
minRowsPerPage:25,maxEmptySpace:25,bufferRows:10,sort:[{attribute:"eventDate",descending:!1}],store:this._gridStore,showLoadingMessage:!0,noDataMessage:this.webviewStrings.noResultsFound},this.gridNode);a&&this.own(y(this._grid,"dgrid-refresh-complete",l.hitch(this,this._updateTotals)));this._setGridSize();this._grid.startup();this._createGridConnections();this._customGridSort({sort:[{attribute:"eventDate",descending:!0}]})}},_displayErrors:function(a){var b=this._ErrorCodeToMessageMap[this._UnexpectedCode];
"undefined"!==typeof this._ErrorCodeToMessageMap[a]&&(b=this._ErrorCodeToMessageMap[a]);D.publish("sticky",{type:"error",message:b})},_getTotals:function(){var a={};a.hours=a.cost=0;for(var b=this._gridStore.data.length;b--;)a.hours+=this._gridStore.data[b].hours,a.cost+=this._gridStore.data[b].cost;a.cost=this._formatPrice(a.cost);a.hours=this._formatNumber(a.hours);this.hasRate?a.rate=this.rcStrings.rtrTotal:a.endTime=this.rcStrings.rtrTotal;return a},_fetchData:function(a){var b=new d;this.own(b);
this.set("reportPeriod",a);a={periodStart:g.format(a.start,{selector:"date",datePattern:"dd/MM/yyyy"}),periodEnd:g.format(a.end,{selector:"date",datePattern:"dd/MM/yyyy"}),showFutureEvents:this.showFutureCB.get("checked")};this.forBlock?l.mixin(a,{scheduleId:null,blockId:this.scheduleId}):l.mixin(a,{scheduleId:this.scheduleId,blockId:null});A.get(this._dataPath,{query:a,handleAs:"json"}).then(l.hitch(this,function(a){a.errStatus===this._SuccessCode?(this._gridStore.setData(a.data),b.resolve()):(this._gridStore.setData([]),
b.reject(a.errStatus));null!==this._grid&&this._grid.refresh()}),l.hitch(this,b.reject));return b.promise},_fetchReportProperties:function(){var a=new d;this.own(a);A.get(this._generalPath,{query:this.forBlock?{scheduleId:null,blockId:this.scheduleId}:{scheduleId:this.scheduleId,blockId:null},handleAs:"json"}).then(l.hitch(this,function(b){b.errStatus===this._SuccessCode?("undefined"!==typeof b.name&&(this.title=b.name),"undefined"!==typeof b.currency&&(this.currency=b.currency),b.hasRate&&(this.hasRate=
!0),a.resolve(b)):a.reject(b.errStatus)}),l.hitch(this,a.resolve));return a.promise},_formatNumber:function(a){return x.format(a,{type:"decimal",places:2})},_formatPrice:function(a){var b=this._formatNumber(a);null!==this.currency&&K.CurrencyToSymbol.hasOwnProperty(this.currency)&&(b=c.format(a,{currency:this.currency,symbol:K.CurrencyToSymbol[this.currency]}));return b},_onInitSuccess:function(){this.onInitSuccess();this._addToolbarButtons();this._createGrid()},_positionAndShowColumnSelector:function(){var a=
this._toolbar.getButton("toggleColumn");k.set(this._grid.hiderMenuNode,"top",a.domNode.getBoundingClientRect().bottom+"px");this._grid._toggleColumnHiderMenu(a)},_propertiesFetched:function(a){null!==a.template&&(this._columnMask=a.template.columnMask,this._updateTemplate(a.template));this._buildColumnStructure();this._fetchData({start:this.viewRangeStart,end:this.viewRangeEnd}).then(l.hitch(this,this._onInitSuccess),l.hitch(this,this._throwPageError))},_setAuditContext:function(){var a=[{objectName:"#AHACReport"+
this.scheduleId}];this.site?webview.auditUtil.setContextDataWithSiteId(this.site,a,this.fullTitle):webview.auditUtil.setContextData(rc.pathInfo.site,a,this.fullTitle)},_setDefaultReportPeriod:function(){var a=new Date((new Date).setDate(1));this.set("reportPeriod",{start:a,end:new Date})},_setReportPeriodAttr:function(b){if("undefined"===typeof b.start||"undefined"===typeof b.end)throw this.declaredClass+" - _setReportPeriodAttr(): New value must have both start and end value.";this.viewRangeStart=
b.start;this.viewRangeEnd=b.end;b=g.format(this.viewRangeStart,{selector:"date",formatLength:"short"});var c=g.format(this.viewRangeEnd,{selector:"date",formatLength:"short"});a.set(this.reportDates,"innerHTML",b+" - "+c)},_setTitle:function(){this.fullTitle=this.title+" - "+this.webviewStrings.afterHoursReport;this._toolbar&&this._toolbar.setTitle(this.fullTitle);this.onSetTitle(this.fullTitle)},_showReasonDialog:function(a){null===this._reasonDialog?this._reasonDialog=new I({title:this.rcStrings.reason,
labelText:this.rcStrings.reason,value:a}):this._reasonDialog.set("value",a);this._reasonDialog.setReadOnly(!0);this._reasonDialog.show()},_showReportPeriodSelector:function(){null===this._periodSelector&&(this._periodSelector=new G({value:{start:this.viewRangeStart,end:this.viewRangeEnd}}),this.own(h.after(this._periodSelector,"execute",l.hitch(this,function(a){this._fetchData(a).otherwise(l.hitch(this,this._displayErrors))}),!0)));this._periodSelector.show()},_setGridSize:function(){var a=0,a=n.byId("rcSystemContent");
1===v(".rcContentHeader",a).length?(a=k.get(a,"height"),a-=k.get(this.domNode.previousSibling,"height"),k.set(this.domNode,"height",a+"px"),a-=k.get(n.byId("rcSystemFooter"),"height")):a=k.get(this.gridContainer.domNode,"height");a-=k.get(this.gridContainer.domNode,"top");a-=k.get(this.reportHeader,"height");k.set(this.gridNode,"height",a+"px");null!==this._grid&&this._grid.resize()},_throwPageError:function(a){this._displayErrors(a);var b=this._ErrorCodeToMessageMap[this._UnexpectedCode];"undefined"!==
typeof this._ErrorCodeToMessageMap[a]&&(b=this._ErrorCodeToMessageMap[a]);this._onInitError(b)},_updateTemplate:function(c){c.useLogo&&(b.remove(this.logo,"hidden"),a.set(this.logo,"src",c.logo.fileSource));c.useLocation&&(b.remove(this.locationContainer,"hidden"),a.set(this.location,"innerHTML",c.location));a.set(this.reportDescription,"innerHTML",F.unescapeHtml(c.description))},_updateTotals:function(){if(null!==this._grid&&this.hasRate&&(this._columnMask&this._ColumnMasks.rate)===this._ColumnMasks.rate){var a=
l.clone(this._grid.get("summary")),b=this._getTotals();z.stringify(b)!==z.stringify(a)&&(this._grid.set("summary",b),this._grid.refresh())}}})})},"webview/widget/dGridExtensions/SummaryRow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct"],function(r,p,m){return r("webview/widget/dGridExtensions/SummaryRow",null,{showFooter:!0,buildRendering:function(){this.inherited(arguments);var l=this.summaryAreaNode=m.create("div",{className:"summary-row",role:"row",style:{overflow:"hidden"}},
this.footerNode);this.on("scroll",p.hitch(this,function(){l.scrollLeft=this.getScrollPosition().x}));this.summary&&this._setSummary(this.summary)},_updateColumns:function(){this.inherited(arguments);this.summary&&this._setSummary(this.summary)},_renderSummaryCell:function(l,h,c){h.appendChild(m.create("span",{innerHTML:l[c.field]||""}))},_setSummary:function(l){var h=this.summaryTableNode;this.summary=l;h&&m.destroy(h);h=this.summaryTableNode=this.createRowCells("td",p.hitch(this,this._renderSummaryCell,
l));this.summaryAreaNode.appendChild(h);this._started&&this.resize()}})})},"webview/reliable/Group":function(){define("dijit/Menu dijit/MenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!../nls/all dojo/json dojo/on dojo/promise/all dojo/string dojo/text!webview/reliable/_group/templates/Group.html rc/_base/util rc/bacnet/enums rc/bacnet/io/Array rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/reliable/Group rc/sys/enhgrp ../_base/tooltip ../sys/alarmApi ../sys/fileinfo ../sys/job ../util/AlarmUtil ../widget/ClientToolBar ../xhrEnhanced ./_group/io/Background ./_group/io/Group ./_group/Stage".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H){return l("webview/reliable/Group",y,{templateString:k,isWorkstationGroup:0,workstationJSONFile:"",workstationJSONFileExists:!1,backgroundFile:"",usesPointMap:!1,_defaultBackgroundColour:4294967295,postCreate:function(){this.own(a(this.ioObject,"globalGroupDescLoaded",h.hitch(this,this.setTitle)));this.stg.system=this.system;this.inherited(arguments)},_checkForFlashRequired:function(a,b){!this.isWorkstationGroup||this.isWorkstationGroup&&
this.workstationJSONFileExists?this.inherited(arguments):(this.isFlashDependant=this.flashEnabled,a.resolve())},_checkForWorkstationGroupFile:function(a){var b=new c;this.own(b);this.isWorkstationGroup?(this.workstationJSONFile="/job/pic/grp/json/wkstn.json",v.loadOnce(this.workstationJSONFile).then(h.hitch(this,function(b,c){this._validateJsonFile(c)?this._decodeWorkstationGroupFile(b,c):a.reject(this._getWorkStationJsonNotFoundError())},b),h.hitch(this,function(b){a.reject(this._getWorkStationJsonNotFoundError(b))}))):
b.resolve("");b.then(h.hitch(this,this._checkForFlashRequired,a))},_createToolbar:function(){var a=new F;this._buttonScaleToFit=a.addToolBarItem(null,"scale","rc24Icon scaleIcon",h.hitch(this,this.toggleScaleToFit));this._scaleMenu=new r;m.forEach([g.tbStretched,g.tbFullsize,g.tbScaled],function(a){this._scaleMenu.addChild(new p({onClick:h.hitch(this,"toggleScaleToFit"),label:a}))},this);var b=A.add(this._buttonScaleToFit.iconNode,d.ttScale,{margin:"1.5em 0 0 2.5em"});this._tooltipIds.push(b);return a},
_decodeWorkstationGroupFile:function(a,b){var c="";if(b)try{var d=n.parse(b);this.workstationJSONFileExists=!0;var f="group "+this.pointName.comInstance;if("undefined"!==typeof d[f]){var g=d[f];"undefined"!==typeof g&&(this.isEnhancedGroup="undefined"!==typeof g.enhanced?g.enhanced:!1)&&("undefined"!==typeof g.graphic_file&&""!==g.graphic_file?(c=g.graphic_file,this.solidColourSet=!1):"undefined"!==typeof g.background_colour_RGB&&this.isEnhancedGroup&&(this.backgroundColour=g.background_colour_RGB===
this._defaultBackgroundColour?"":q.rgbToHexString(g.background_colour_RGB),this.solidColourSet=!0),"undefined"!==typeof g.background_height&&(this.imageHeight=g.background_height),"undefined"!==typeof g.background_width&&(this.imageWidth=g.background_width))}}catch(O){console.error(this._declaredClass+" - _decodeWorkstationGroupFile(): Failed to parse workstation group json",O)}a.resolve(c)},_detailsLoaded:function(){var a=null,d=this._loadAlarmApiDetails(),f=new c;this.own(f);var g=this.deviceId+
"DEV"+this.deviceId;this.isPyramid=B.isPyramid(g);if(this.isEnhancedGroup){a=this.pointName;this.isPyramid&&this.pointName.hasOwnProperty("mainController")&&this.deviceId==this.pointName.mainController&&(a=B.getReliablePoint(this.pointName));var k=a.toArray().join("");this._checkForGroupJsonFile(k).then(h.hitch(this,this._checkForWorkstationGroupFile,f),h.hitch(this,function(a){this.isWorkstationGroup?(this.isFlashDependant=this.flashEnabled,f.resolve()):f.reject(this._getJsonNotFoundError(a))}))}else this.isFlashDependant=
this.flashEnabled,f.resolve();b([f,d,this._doesUsePointMap()]).then(h.hitch(this,this._groupJsonChecked,g,a),h.hitch(this,this.onInitError))},_doesUsePointMap:function(){var a=new c;this.isWorkstationGroup&&(this.usesPointMap=!0);a.resolve();return a},_getGroupDetails:function(){var a=new c;this.own(a);this.deviceId=Number(B.getAnyProperty(this.pointName,"BACnetDeviceNum"))||0;0===this.deviceId&&(this.deviceId=Number(this.mainController));(this.isWorkstationGroup=B.isWorkstationPanel(this.deviceId))?
(this.isEnhancedGroup=!0,a.resolve()):B.hasProprietarySupportBit(this.deviceId+"DEV"+this.deviceId,21)?this._sendGroupDataRequest(a):(this.isEnhancedGroup=!1,a.resolve());return a.promise},_groupJsonChecked:function(a,b){(this.isGlobalGroup=B.hasProprietarySupportBit(a,10)||this.isEnhancedGroup&&!this.isWorkstationGroup)&&B.hasProprietarySupportBit(a,32)&&this._setSuspendUpdateFlag();this.isOpen=B.isOpen(a);this.isSSC=B.isSSC(a);this.isLC=B.isLC(this.pointName);this.isGlobalGroup||this.isSSC||this.isLC||
!(1>this.pointName.mainController||125<this.pointName.mainController)||(b=B.getReliablePoint(this.pointName),null!==b&&(this.pointName=b));this.origPoint=this.pointName;this.isEnhancedGroup&&this.isPyramid&&125>this.pointName.mainController&&this.groupJSONFileExists&&(b=B.getBACnetPoint(this.pointName),null!==b&&(this.pointName=b));this._setAlarmContext();this.stg.setStartupInfo({group:this}).otherwise(h.hitch(this,function(a){this._onInitError(a)}))},_getWorkStationJsonNotFoundError:function(a){return new rc.Error({name:t.substitute(g.couldNotLoad,
[g.group]),message:t.substitute(g.xNotFound,["wkstn.json"]),suggestion:g.objNotFoundFix,e:a})},_getWorkstationGroupImageFile:function(a){var b=new c;this.own(b);rc.xhr.request({gid:"GRP",type:"cmd",cmdObj:{cmd:3,file:"/job/pic/"+a+".*"}}).then(h.hitch(this,function(a){b.resolve(a.data[0])}),h.hitch(this,function(a){b.reject("Could not get workstation group background image extension",a)}));return b.promise},_loadAlarmApiDetails:function(){var a=C.loadOnce();this.own(a);a.then(h.hitch(this.stg,this.stg.setAlarmApiPath));
return a},_setIsHTMLOnly:function(a){var d=new c;this.own(d);var f=v.loadOnce(this.groupJSONFile),g=new c;this.isWorkstationGroup&&a?g=this._getWorkstationGroupImageFile(a):g.resolve();this.own(f,g);b({groupJson:f,workstationImage:g}).then(h.hitch(this,function(a){try{var b=n.parse(a.groupJson);this.isWorkstationGroup&&a.workstationImage&&(this.backgroundFile=a.workstationImage);this.solidColourSet||(!this.backgroundFile&&b.hasOwnProperty("background_image")&&(this.backgroundFile=b.background_image),
"undefined"!==typeof b.background_height&&(this.imageHeight=b.background_height),"undefined"!==typeof b.background_width&&(this.imageWidth=b.background_width));b.hasOwnProperty("flash_dependent")?this.isFlashDependant=b.flash_dependent&&this.flashEnabled:b.hasOwnProperty("contains_swf")?this.isFlashDependant=b.contains_swf&&this.flashEnabled:this.isFlashDependant=this.flashEnabled}catch(O){this.isFlashDependant=this.flashEnabled}d.resolve()}),h.hitch(this,function(a){this.isFlashDependant=this.flashEnabled;
d.reject(this._getJsonNotFoundError(a))}));return d},toggleScaleToFit:function(a){a=(this._buttonScaleToFit.scale+1)%3;this.stg.setScaleToFit(a);this._checkScaleMenuItem(a);this._buttonScaleToFit.tooltip.close()},_checkScaleMenuItem:function(a){this._buttonScaleToFit.scale=a;this._buttonScaleToFit.set("tooltipLabel",this._menuItems[(a+1)%3].label);this._buttonScaleToFit.tooltip.set("label",this._buttonScaleToFit.tooltipLabel)},setTitle:function(a){this._setTitle(a)},_groupJSONExists:function(a){return-1!==
E.getDate("/job/pic/grp/json/"+a.toArray().join("")+".json")},_sendGroupDataRequest:function(a){var c=[{o:new z(f.objectTypes.OBJID_GLOBAL_GROUP,this.pointInstance),pl:[{p:new w(f.propertyTypes.PROPID_PP_GROUP_COMPATIBILITY,f.primitiveTypes.ENUMERATED),i:-1,v:new w(0,f.primitiveTypes.BINARY)}]}],d=[{o:new z(f.objectTypes.OBJID_GLOBAL_GROUP,this.pointInstance),pl:[{p:new w(f.propertyTypes.PROPID_PP_GRAPHIC_FILE_NAME,f.primitiveTypes.ENUMERATED),i:-1,v:new u([],f.primitiveTypes.CHARACTER_STRING)},{p:new w(f.propertyTypes.PROPID_PP_BACKGROUND_COLOUR,
f.primitiveTypes.ENUMERATED),i:-1,v:new w(0,f.primitiveTypes.UNSIGNED_INTEGER)},{p:new w(f.propertyTypes.PROPID_PP_BACKGROUND_WIDTH,f.primitiveTypes.ENUMERATED),i:-1,v:new w(0,f.primitiveTypes.UNSIGNED_INTEGER)},{p:new w(f.propertyTypes.PROPID_PP_BACKGROUND_HEIGHT,f.primitiveTypes.ENUMERATED),i:-1,v:new w(0,f.primitiveTypes.UNSIGNED_INTEGER)}]}],c={single:rc.xhr.request({type:"bacnet",s:new x({device:this.deviceId},c,!0)}),multiples:rc.xhr.request({type:"bacnet",s:new x({device:this.deviceId},d)})};
b(c).then(h.hitch(this,function(b){this._decodeGroupLoad(a,{o:b.multiples.o.concat(b.single.o)})}),h.hitch(this,function(){this.isEnhancedGroup=this.isEnhancedSystemGroup=!1;a.resolve()}))},_setAlarmContext:function(){this.isGlobalGroup||this.isSSC?D.setAlarmContextForBACnetDevice(this.system,this.deviceId):D.setAlarmContextForRcpPoint(this.system,this.pointName)},_setSuspendUpdateFlag:function(){this.isSuspendedUpdate=!1;var a=[{o:new z(f.objectTypes.OBJID_GLOBAL_GROUP,this.pointName.mainInstance),
pl:[{p:new w(f.propertyTypes.PROPID_PP_GRP_SUSPEND_UPDATES,f.primitiveTypes.ENUMERATED),i:-1,v:new w(0,f.primitiveTypes.BINARY)}]}],a=new x({device:this.deviceId},a,!0);rc.xhr.request({gid:"GRP",type:"bacnet",s:a,load:h.hitch(this,function(a){try{this.usesPointMap=1===Number(a.o[0].pl[0].v.v)?!0:!1}catch(I){this.usesPointMap=!1}})})},_wkstnJSONExists:function(){return-1!==E.getDate("/job/pic/grp/json/wkstn.json")},destroy:function(){this._scaleMenu.destroyRecursive();this._buttonScaleToFit.destroyRecursive();
m.forEach(this._tooltipIds,h.hitch(h.hitch(this,function(a){A.remove(a)})));this.inherited(arguments);this._tooltipIds=null}})})},"webview/sys/alarmApi":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented ../crossCutting/windowUtil ../xhrEnhanced".split(" "),function(r,p,m,l,h,c){r=r("webview/sys/alarmApi",[l],{_apiLoaded:null,_lastSiteUrl:null,loadOnce:function(c){this._apiLoaded=new m;this._loadAlarmApiDetails(c).then(p.hitch(this,this._apiLoaded.resolve),p.hitch(this,
this._apiLoaded.reject));return this._apiLoaded.promise},_loadAlarmApiDetails:function(g){var d=new m,l="AlarmApi";g&&(l=h.getFullPath().replace(/admin\/$/ig,g+"/"+l));"undefined"!==typeof this._alarmApiPath&&this._lastSiteUrl===g?d.resolve(this._alarmApiPath):(this._lastSiteUrl=g,c.get(l,{handleAs:"json",preventCache:!0}).then(p.hitch(this,function(a){a&&a.alarmApiPath?(this._alarmApiPath=a.alarmApiPath,d.resolve(this._alarmApiPath)):d.reject()}),p.hitch(this,d.reject)));return d.promise}});webview.AlarmApi||
(webview.AlarmApi=new r);return webview.AlarmApi})},"webview/crossCutting/windowUtil":function(){define(function(){return{getFullPath:function(){return window.location.origin+window.location.pathname},open:function(r){window.open(r)},openNewTab:function(r){window.open(r,"_blank")}}})},"webview/reliable/_group/io/Background":function(){define(["dojo/_base/lang","dojo/Deferred","rc/reliable/_group/io/Background","./BackgroundFlash","./BackgroundHtml"],function(r,p,m){r.extend(m,{loadAnimation:function(l,
h,c,g){var d=new p,m=0,a=r.hitch(this,function(){d.resolve(!0)}),b=r.hitch(this,function(n){/\.js|\.gif$/i.test(h)&&0===m++&&this.bh.animationExists(h)?this.bh.loadAnimation(l,h,c,g).then(a,b):d.reject(n)});this.isHTML?b():-1!==h.search(/\.swf|.gif$/)&&this.bf.animationExists(h)?this.bf.loadAnimation(l,h,c).then(a,b):b("No Flash nor HTML animation found!");return d.promise},floodFill:function(l,h,c,g){this.isHTML?(g={red:g>>16&255,green:g>>8&255,blue:g&255,alpha:255},l.isEnhanced?this.bh.replaceColour(l,
h,c,g):this.bh.floodFill(l,h,c,g)):this.bf.floodFill(l,h,c,g)},setAlarmApiPath:function(l){this.bh&&this.bh.setAlarmApiPath(l)}})})},"webview/reliable/_group/io/BackgroundFlash":function(){define(["dojo/_base/lang","dojo/Deferred","dojo/on","rc/reliable/_group/io/BackgroundFlash","../../../sys/fileinfo"],function(r,p,m,l,h){r.extend(l,{loadBackgroundImage:function(c){var g=new p;try{this.f?(this._pconnectsTmp.push(m(this.f,"loadGroupElements",r.hitch(this,function(){this.box=this.callFlashFunction("avm2GetBackgroundDimensions");
g.resolve()}))),this.callFlashFunction("avm2SetBackgroundImage",rc.xhr.toCacheSysUrl("job/pic/"+c))):g.reject("Flash not enabled.")}catch(d){g.reject(d)}return g.promise},animationExists:function(c){return-1!==h.getDate(c)}})})},"webview/reliable/_group/io/BackgroundHtml":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/window dojo/Deferred dojo/dom-attr dojo/dom-construct dojo/on dojo/promise/all rc/reliable/_group/io/BackgroundHtml rc/util/html/canvas ../../../sys/fileinfo webview/sys/dynamicColours".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){p.extend(n,{baseUrl:"webview/reliable/_group/resources/html/",animationExists:function(a){a=a.replace(RegExp("%5C","g"),"/");return-1!==b.getDate("job/pic/Animation/"+a)},loadBackgroundImage:function(a,b){var d,k,n,q=new l;this.bi||(this.bi=c.create("img",{},m.body(),"last"));n=p.hitch(this,function(){r.forEach(this._pconnectsTmp,function(a){a.remove()},this);this._pconnectsTmp=[];d=this.bi.naturalWidth;k=this.bi.naturalHeight;this._c&&h.set(this._c,{width:d,height:k});
this.resize();q.resolve()});n=g.once(this.bi,"load",n);this._pconnectsTmp.push(n);n=p.hitch(this,function(a){r.forEach(this._pconnectsTmp,function(a){a.remove()},this);this._pconnectsTmp=[];this.bi=null;q.reject(a)});n=g(this.bi,"error",n);this._pconnectsTmp.push(n);this.bi.src=rc.xhr.toCacheSysUrl("job/pic/"+a);return q.promise},animationExists:function(a){return!0},replaceColour:function(a,b,c,d,g){var f=a.index;if("undefined"===typeof this._replaceColourObject[f])if(this._replaceColourObject[f]=
{x:b,y:c,colour:d,locationSearchComplete:!0,locations:a.dynamicColourLocations||[],element:a},0!==this._replaceColourObject[f].locations.length)this._doReplaceColour(this._replaceColourObject[f]);else if(this.dynamicColourMap&&"undefined"!==typeof this.dynamicColourMap[f])this._replaceColourObject[f].locations=this.dynamicColourMap[f],this._doReplaceColour(this._replaceColourObject[f]);else{var k=t.loadOnce(a.group.groupJSONFile,a.group.backgroundFile);this.own(k);k.then(p.hitch(this,function(k){if(this.dynamicColourMap=
k)delete this._replaceColourObject[f],this.replaceColour(a,b,c,d,g)}),p.hitch(this,function(a){console.error(this.declaredClass+" - replaceColour(): Could not load dynamic colours",a)}))}else this._replaceColourObject[f].locationSearchComplete&&(g||this._coloursChanged(f,b,c,d,this._replaceColourObject)||this._workerNeedsData(a))&&(p.mixin(this._replaceColourObject[f],{x:b,y:c,colour:d}),this._doReplaceColour(this._replaceColourObject[f]))},setAlarmApiPath:function(a){this.alarmApiPath=a},_buildAnimationSourceUrl:function(a,
b,c){return/.js$/i.test(a)?require.toUrl(this.baseUrl)+"animLoader.html?anim\x3d"+a+"\x26path\x3d"+b+"\x26gelIndex\x3d"+c+"\x26alarmApiPath\x3d"+this.alarmApiPath:b+a},_getPath:function(){return rc.xhr.toSysUrl("job/pic/Animation/")},destroy:function(){t.reset();this._replaceColorTimer&&(window.clearInterval(this._replaceColorTimer),this._replaceColorTimer=null);null!==this._workerManager&&(this._workerManager.destroyRecursive(),this._workerManager=null);this._clearDrawTimeout();a.reset();delete this.data;
this.data=[];var b;this.removeReplaceColour();r.forEach(this._pconnects,function(a){a.remove()},this);r.forEach(this._pconnectsTmp,function(a){a.remove()},this);for(b in this._animsObj)this.removeAnimation(b);this._resizeImageTimer&&(window.clearInterval(this._resizeImageTimer),this._resizeImageTimer=null);this._resizeTimeout&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=null);c.destroy(this.c);c.destroy(this._c);delete this.c;delete this._c;delete this.bi;delete this._floodFillsObj;delete this._replaceColourObject;
delete this.rawImage;delete this.rawImageData}})})},"webview/sys/dynamicColours":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/on ./fileinfo rc/sys/sysFile ../xhrEnhanced".split(" "),function(r,p,m,l,h,c,g,d){return new (p("webview/sys/dynamicColours",g,{filePath:"job/dynamicColours.json",groupJSONFile:"",imageFile:"",preventCache:!1,_getDataRequest:null,load:function(d,a){this._loading++;this.groupJSONFile=d;this.imageFile=a;this._requestFinished=new l;
c.loadOnce().then(m.hitch(this,this._load));return this._requestFinished},reset:function(){this._getDataRequest&&!this._getDataRequest.isFulfilled()&&this._getDataRequest.cancel();this.imageFile=this.groupJSONFile="";this.loaded=!1;this._loading=0},loadOnce:function(c,a){if(a!==this.imageFile||c!==this.groupJSONFile)this.groupJSONFile=c,this.imageFile=a,this.loaded&&(this.loaded=!1,this._loading=0);var b=new l;if(this.loaded)b.resolve(this.data);else if(0<this._loading){var d=[],g=m.hitch(this,function(){r.forEach(d,
function(a){a.remove()});try{this.asyncDeferred.then(m.hitch(this,function(a){b.resolve(a)}),m.hitch(this,function(a){b.reject(a)}))}catch(q){b.reject(q)}});d.push(h(this,"load",m.hitch(this,g),!0));d.push(h(this,"error",m.hitch(this,g),!0))}else this.asyncDeferred=this.load.apply(this,arguments),this.asyncDeferred.then(m.hitch(this,function(a){b.resolve(a)}),m.hitch(this,function(a){b.reject(a)}));return b},_load:function(){this._getDataRequest=d.get(this.filePath,{handleAs:"json",preventCache:this.preventCache,
headers:{"Content-Type":"application/json"},query:{groupJSONFile:this.groupJSONFile,imageFile:this.imageFile}},null,this.groupJSONFile).then(m.hitch(this,this._onLoad),m.hitch(this,this._onError))}}))})},"webview/reliable/View":function(){define(["dojo/_base/declare","rc/reliable/View","./Group","./_group/io/View"],function(r,p,m,l){return r("webview/reliable/View",[m,p],{constructor:function(){this.ioObject=new l}})})},"webview/reliable/_group/io/View":function(){define(["dojo/_base/declare","rc/reliable/_group/io/View",
"./Group"],function(r,p){return r("webview/reliable/_group/io/View",[p],{})})},"webview/reliable/MobileAlarm":function(){define(["dojo/_base/declare","webview/reliable/Alarm"],function(r,p){return r("webview/reliable/MobileAlarm",p,{_createGrid:function(){this.inherited(arguments);this._grid.set("selectionMode","toggle")}})})},"webview/reliable/NavGroup":function(){define("dijit/Menu dijit/MenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-construct dojo/i18n!rc/nls/all dojo/text!./_navGroup/templates/NavGroup.html rc/_Widget rc/widget/Toolbar rc/_base/tooltip ../features/navigationGroups/_WithToolbarsMixin ../features/navigationGroups/groupBuilding/BuilderStateManager ../features/navigationGroups/groupRendering/ScaleFactorManager ../features/navigationGroups/groupBuilding/GroupBuilder webview/admin/widget/AdminToolbar webview/admin/navGroups/NavGroupToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return l("webview/reliable/NavGroup",[b,q],{firstLoad:!0,templateString:a,constructor:function(){this.site=this._siteId();this.builderStateManager=new f({editMode:!1,siteUrl:rc.pathInfo.site+"/",siteId:this.site});this.own(this.builderStateManager.watch("editMode",h.hitch(this,function(a,b,d){c.set(this.navGroupContentPane.domNode,"top",d?"0px":"40px");c.set(this.navGroupContentPane.domNode,"height","100%");this.resize()})));this.scaleFactorManager=new u},
postCreate:function(){this.mnemonic=null;this._buildAuditLogContext();this._setUpBuilder();this._setUpTabActiveListeners();this._tooltipIds=[];this.setUpToolbar(this._container);this.inherited(arguments)},print:function(){this.printAsImage(this.groupBuilder.groupRenderer.domNode,this.scaleFactorManager.availableDimensions.width)},resize:function(){this.inherited(arguments);this.groupBuilder.resize()},setTooltips:function(){},_setGroupNameAttr:function(a){this._setTitle(a);this._set("groupName",a);
this._buildAuditLogContext()},_buildAuditLogContext:function(){webview.auditUtil.setContextDataWithSiteId(this.site,[{systemId:null,objectName:"#NavigationGroup"+this.pointInstance}],this.title)},_createToolbar:function(){this.buttonBar.replaceAllIcons([this.navGroupToolbar]);return this.initializeToolbars()},_setTitle:function(a){this.fullTitle=this.title=a||this.title||"";this._toolbar&&this._toolbar.setTitle(this.fullTitle);this.onSetTitle(this.fullTitle)},_setUpBuilder:function(){this.groupBuilder.startUp(this.scaleFactorManager,
this.builderStateManager,this.rightSideFlyout);this.own(this.groupBuilder.groupRenderer.watch("groupDetails",h.hitch(this,function(a,b,c){if(c&&c.name){if(this.set("groupName",c.name),this.firstLoad)this.onInitSuccess()}else this.firstLoad&&this._onInitError();this.firstLoad=!1})),this.groupBuilder.watch("title",h.hitch(this,function(a,b,c){c&&this._setTitle(c)})))},_setUpTabActiveListeners:function(){this.own(g(window,"visibilitychange",h.hitch(this.groupBuilder.groupRenderer,this.groupBuilder.groupRenderer.onVisibilityChanged)))},
destroy:function(){this.inherited(arguments)}})})},"webview/features/navigationGroups/_WithToolbarsMixin":function(){define("dijit/Tooltip dojo/_base/declare dojo/_base/lang dojo/cookie dojo/dom-class dojo/i18n!rc/nls/all dojo/on ../../widget/ClientToolBar".split(" "),function(r,p,m,l,h,c,g,d){return p("webview/features/navigationGroups/_WithToolbarsMixin",[],{_menuItems:[c.tbScaled,c.tbFullsize,c.tbStretched],_currentState:0,_navGroupCookieName:"navgroup",onInitSuccess:function(){this.inherited(arguments);
this.builderStateManager.get("editMode")||this._readStateFromCookie()},initializeToolbars:function(){this.clientButtonBar||(this.clientButtonBar=new d({class:"nav-group-client-toolbar"}));this._connectToolbars();rc.session.hasRole(rc.session.adminRoles.navGroupAdmin)&&(this._editButton=this.clientButtonBar.addToolBarItem(c.edit,"edit","rc24Icon editIcon",m.hitch(this,this._onClickEdit)),this._editButton.tooltip=new r({connectId:this._editButton.domNode,label:c.edit,position:["above"],showDelay:0}));
this._scaleButton=this.clientButtonBar.addToolBarItem(this._menuItems[this._currentState],"scale","rc24Icon scaleIcon",m.hitch(this,this._onClickScaleButton));this._scaleButton.tooltip=new r({connectId:this._scaleButton.domNode,label:this._menuItems[this._currentState],position:["above"],showDelay:0});return this.clientButtonBar},_connectToolbars:function(){this.navGroupToolbar.zoomTools.set("scaleFactorManager",this.scaleFactorManager);this.navGroupToolbar.set("builderStateManager",this.builderStateManager);
this.own(g(this.navGroupToolbar,"viewClicked",m.hitch(this,this._onClickView)),g(this.navGroupToolbar,"undoClicked",m.hitch(this.groupBuilder,this.groupBuilder.onUndoClicked)),g(this.navGroupToolbar,"redoClicked",m.hitch(this.groupBuilder,this.groupBuilder.onRedoClicked)),g(this.navGroupToolbar,"addAnimationClicked",m.hitch(this.groupBuilder,this.groupBuilder.onAddAnimationClicked)),g(this.navGroupToolbar,"addKeywordClicked",m.hitch(this.groupBuilder,this.groupBuilder.onAddKeywordClicked)),g(this.navGroupToolbar,
"addObjectClicked",m.hitch(this.groupBuilder,this.groupBuilder.onAddObjectClicked)));this.navGroupToolbar.setSiteUrl(this.siteUrl)},_onClickEdit:function(){this.builderStateManager.set("editMode",!0);h.remove(this.buttonBar.domNode,"hidden");h.add(this.clientButtonBar.domNode,"hidden")},_onClickScaleButton:function(){this._scaleButton.tooltip.close&&this._scaleButton.tooltip.close();this._setCurrentState(this._currentState+1)},_onClickView:function(){this.builderStateManager.set("editMode",!1);h.remove(this.clientButtonBar.domNode,
"hidden");h.add(this.buttonBar.domNode,"hidden");this._readStateFromCookie()},_setCurrentState:function(c){this._currentState=c%3;this._scaleButton.set("tooltipLabel",this._menuItems[this._currentState]);this._scaleButton.tooltip.set?this._scaleButton.tooltip.set("label",this._menuItems[this._currentState]):this._scaleButton.set("title",this._menuItems[this._currentState]);switch(this._currentState){case 2:this.scaleFactorManager.setToStretchedDimensions();break;case 1:this.scaleFactorManager.set("scaleFactor",
1);break;default:this.scaleFactorManager.set("scaleFactor",NaN)}c=l(this._navGroupCookieName);var a={};c&&(a=JSON.parse(c));a.scale=this._currentState;l(this._navGroupCookieName,JSON.stringify(a),{expires:365,path:"/"})},_readStateFromCookie:function(){var c=l(this._navGroupCookieName);c&&(c=JSON.parse(c),this._setCurrentState(c.scale))}})})},"webview/features/navigationGroups/groupBuilding/BuilderStateManager":function(){define(["dijit/_WidgetBase","dojo/_base/declare"],function(r,p){return p("webview/features/navigationGroups/groupBuilder/BuilderStateManager",
[r],{editMode:null,siteId:null,siteUrl:null,undoRedoInProgress:!1,userEditInProgress:!1,_setUndoRedoInProgressAttr:function(m){this.set("userEditInProgress",m);this._set("undoRedoInProgress",m)}})})},"webview/features/navigationGroups/groupRendering/ScaleFactorManager":function(){define(["dojo/_base/declare","dojo/Stateful"],function(r,p){return r("webview/features/navigationGroups/groupRendering/ScaleFactorManager",[p],{DEFAULT_SCALE_FACTOR:1,MAXIMUM_SCALE_FACTOR:3,MINIMUM_SCALE_FACTOR:.25,SCALE_INCREMENT:.1,
_isScaledToFit:!1,isStretched:!1,_availableDimensionsSetter:function(m){this.availableDimensions=m;this._calculateScaledToFitAndStretched()},_backgroundDimensionsGetter:function(){return this.backgroundDimensions&&this.backgroundDimensions.width&&this.backgroundDimensions.height?this.backgroundDimensions:null},_backgroundDimensionsSetter:function(m){this.backgroundDimensions&&this.backgroundDimensions.width===m.width&&this.backgroundDimensions.height===m.height||(this.backgroundDimensions=m,this._calculateScaledToFitAndStretched())},
_dimensionScaleFactorsGetter:function(){return{height:this.get("heightScaleFactor")||this.DEFAULT_SCALE_FACTOR,width:this.get("widthScaleFactor")||this.DEFAULT_SCALE_FACTOR}},_isMaximumScaleSetter:function(m){m&&this.set("isMinimumScale",!1)},_isMinimumScaleSetter:function(m){m&&this.set("isMaximumScale",!1)},_scaleFactorSetter:function(m){this.scaleFactor=m;this.isStretched=!1;isNaN(m)?(m=this.scaledToFitFactor,this._isScaledToFit=!0):this._isScaledToFit=!1;m>=this.MAXIMUM_SCALE_FACTOR?this.set("isMaximumScale",
!0):m<=this.MINIMUM_SCALE_FACTOR?this.set("isMinimumScale",!0):(this.set("isMaximumScale",!1),this.set("isMinimumScale",!1));this._isScaledToFit||(m=Math.min(this.MAXIMUM_SCALE_FACTOR,m),m=Math.max(this.MINIMUM_SCALE_FACTOR,m));this.set("widthScaleFactor",m);this.set("heightScaleFactor",m)},getScaledCssFontStyling:function(m){var l=Math.min(this.widthScaleFactor,this.heightScaleFactor);if(m&&m["font-size"]&&l){var h=parseInt(m["font-size"]);isNaN(h)?delete m["font-size"]:m["font-size"]=h*l+"pt"}return m},
setToStretchedDimensions:function(){this.isStretched=!0;this.set("heightScaleFactor",this.stretchedScaledFactors.height);this.set("widthScaleFactor",this.stretchedScaledFactors.width)},scaleDown:function(){this.set("scaleFactor",this.widthScaleFactor+this.SCALE_INCREMENT)},scaleUp:function(){this.set("scaleFactor",this.widthScaleFactor-this.SCALE_INCREMENT)},_calculateScaledToFitAndStretched:function(){this.stretchedScaledFactors=this._getStretchedScaleFactors();this.scaledToFitFactor=this._getScaledToFitScaleFactor(this.stretchedScaledFactors);
this.isStretched?this.setToStretchedDimensions():(!0===this._isScaledToFit||isNaN(this.scaleFactor))&&this.set("scaleFactor",NaN)},_getScaledToFitScaleFactor:function(m){return Math.min(m.width,m.height)},_getStretchedScaleFactors:function(){var m=this.get("availableDimensions"),l=this.get("backgroundDimensions"),h={height:this.DEFAULT_SCALE_FACTOR,width:this.DEFAULT_SCALE_FACTOR};m&&l&&(h.height=m.height/l.height,h.width=m.width/l.width);return h},_scaleFactorGetter:function(){return this.scaleFactor}})})},
"webview/features/navigationGroups/groupBuilding/GroupBuilder":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/i18n!webview/nls/all dojo/on dojo/text!./templates/GroupBuilder.html dojo/topic dojo/Evented webview/admin/_objectTypeMap webview/admin/SearchableWidgetWithTree webview/crossCutting/topicEvents webview/admin/widget/KeywordSelector webview/admin/widget/KeywordSelectorDataSource webview/util/Debounce webview/util/util ./nodeUpdating/_AnimationNodeUpdateRequests ./nodeUpdating/_TextNodeUpdateRequests ./nodeUpdating/AnimationNodeUpdater ./nodeUpdating/GroupChangeTracker ./nodeUpdating/TextNodeUpdater ./DndManager ./navGroupDndSource ../_WithToolbarsMixin ../dialogs/editAnimationContent/EditAnimationContent ../dialogs/editAnimationContent/EditAnimationPresenter ../dialogs/insertAnimationContent/InsertAnimationContent ../dialogs/nodeConfigurationDialog/NodeConfigurationDialog ../dialogs/nodeConfigurationDialog/ConfigurationDialogPresenter ../groupRendering/_RenderingPresenter ../groupRendering/_RenderingRequests ../groupRendering/groupNodes/GroupNodeManager webview/widget/WebviewContentPane ../groupRendering/GroupRenderer".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S){return h("webview/features/navigationGroups/groupBuilding/GroupBuilder",[p,r,m,x,w],{templateString:f,webviewStrings:k,_dndSource:I,I_KEY_CODE:73,N_KEY_CODE:78,P_KEY_CODE:80,Y_KEY_CODE:89,Z_KEY_CODE:90,_supportedObjectTypes:[z.inputs,z.outputs,z.variables,z.loops,z.arrays,z.systemGroups,z.equipmentViews,z.workstationGroups,z.schedules,z.calendars,z.trendLogs,z.runtimeLogs,z.trendLogWorksheets,z.programs,z.programsWorksheets,
z.pointReports,z.pointReportWorksheet],_searchResultExpandToFill:!1,undoRedoInProgress:!1,constructor:function(){this._connectKeyboardListeners();this._groupPresenterStartUpDeferred=new d;this.own(this._groupPresenterStartUpDeferred)},postCreate:function(){this.own(u.subscribe(y.addAssociatedObject,c.hitch(this,this.onAddAssociatedObject)),u.subscribe(y.addClickDestinationKeyword,c.hitch(this,this.onAddClickDestinationKeyword)),u.subscribe(y.editAnimationConfigurationClicked,c.hitch(this,this._openEditAnimationDialog)),
u.subscribe(y.editNodeConfigurationClicked,c.hitch(this,this._openNodeConfigurationDialog)),u.subscribe(y.closeSearchResultsPane,c.hitch(this,this.closeResults)));this.inherited(arguments)},closeBuilderTools:function(){this.rightSideFlyout.hide();this._closeKeywordSelector();this._closeSearchResults()},getSearchResultsMaxHeight:function(){return this.scaleFactorManager.get("availableDimensions").height},onAddAssociatedObject:function(a){this._closeKeywordSelector();this._searchResultExpandToFill=
!0;u.publish("filterRequestedSite",this.site);this.rightSideFlyout.onBeforeAddObjects();this._editAnimationContent.resize()},onAddClickDestinationKeyword:function(a){this._closeSearchResults();this._closeCanvasKeywordSelector();if(!this._clickDestinationskeywordSelector){var b=new A({siteId:a,showHyperlinks:!1});this._clickDestinationskeywordSelector=new v({siteId:a,dndSource:this._dndSource,keywordSelectorDataSource:b})}u.publish("showKeywordSelector",this._clickDestinationskeywordSelector);this._clickDestinationskeywordSelector.show();
this.rightSideFlyout.onBeforeAddObjects();this._editAnimationContent.resize()},onAddKeywordClicked:function(a){this._closeSearchResults();this.rightSideFlyout.hide();this._closeClickDestinationsKeywordSelector();if(!this._keywordSelector){var b=new A({siteId:a});this._keywordSelector=new v({siteId:a,dndSource:this._dndSource,keywordSelectorDataSource:b})}u.publish("showKeywordSelector",this._keywordSelector);this._keywordSelector.show()},onAddAnimationClicked:function(){this._openInsertAnimationDialog()},
onAddObjectClicked:function(){this._closeKeywordSelector();this.rightSideFlyout.hide();u.publish("filterRequestedSite",this.site)},onCloseSearchResults:function(){this.resize()},onOpenSearchResults:function(){this.resize()},onUndoClicked:function(){if(!this.builderStateManager.get("undoRedoInProgress")){var a=this._groupChangeTracker.undoChange();this._syncOpenEditorWithUndoRedoChanges(a)}},onRedoClicked:function(){if(!this.builderStateManager.get("undoRedoInProgress")){var a=this._groupChangeTracker.redoChange();
this._syncOpenEditorWithUndoRedoChanges(a)}},reloadGroupDetails:function(){this._groupPresenter.reloadGroupDetails()},resize:function(){this.inherited(arguments);this._resizeDebounce=C(this._resizeDebounce,c.hitch(this,this._resizeRenderer),25)},startUp:function(a,b,c){this.set("rightSideFlyout",c);this.set("scaleFactorManager",a);this.set("builderStateManager",b);this._setUpRenderer();this._groupChangeTracker=new H({groupId:this.groupId,builderStateManager:this.builderStateManager});var d={groupChangeTracker:this._groupChangeTracker,
groupId:this.groupId,requestManager:new B(this.groupId),builderStateManager:this.builderStateManager};this._animationNodeUpdater=new F(d);d={groupChangeTracker:this._groupChangeTracker,groupId:this.groupId,requestManager:new D(this.groupId)};this._textNodeUpdater=new J(d);this.own(this._animationNodeUpdater,this._textNodeUpdater);this.inherited(arguments)},_closeCanvasKeywordSelector:function(){this._keywordSelector&&this._keywordSelector.closeKeywordSelector()},_closeClickDestinationsKeywordSelector:function(){this._clickDestinationskeywordSelector&&
this._clickDestinationskeywordSelector.closeKeywordSelector()},_closeKeywordSelector:function(){this._closeCanvasKeywordSelector();this._closeClickDestinationsKeywordSelector()},_closeSearchResults:function(){u.publish("closeResults")},_connectKeyboardListeners:function(){this.own(q(g.doc.body,"keydown",c.hitch(this,function(a){if(a.keyCode===this.P_KEY_CODE&&!1===a.ctrlKey)this._toggleShowBoxes(!0);else if(a.keyCode===this.I_KEY_CODE&&!1===a.ctrlKey)this._toggleShowInvisibleNodeSequence(!0);else if(a.keyCode===
this.N_KEY_CODE&&!1===a.ctrlKey)this._toggleShowNodeSequence(!0);else if(a.keyCode===this.Z_KEY_CODE&&!0===a.ctrlKey)this.onUndoClicked();else if(a.keyCode===this.Y_KEY_CODE&&!0===a.ctrlKey)this.onRedoClicked()})),q(g.doc.body,"keyup",c.hitch(this,function(a){a.keyCode===this.P_KEY_CODE?this._toggleShowBoxes(!1):a.keyCode===this.N_KEY_CODE?this._toggleShowNodeSequence(!1):a.keyCode===this.I_KEY_CODE&&this._toggleShowInvisibleNodeSequence(!1)})))},_isAnimationEditorOpenForNode:function(a){return this._editAnimationPresenter&&
this._editAnimationPresenter.isOpen()&&this._editAnimationPresenter.animationNode.nodeId===a},_onUpdateComplete:function(){this.builderStateManager.set("userEditInProgress",!1)},_onUpdateStarted:function(){this.builderStateManager.set("userEditInProgress",!0)},_openEditAnimationDialog:function(a){this._closeKeywordSelector();this._editAnimationContent||(this._editAnimationContent=new L({site:this.site}),this.own(this._editAnimationContent),this._editAnimationContent.startup());this._editAnimationPresenter||
(this._editAnimationPresenter=new M({view:this._editAnimationContent,builderStateManager:this.builderStateManager,animationNodeUpdater:this._animationNodeUpdater}));this.own(q.once(this._editAnimationPresenter,"close",c.hitch(this,function(){this.rightSideFlyout.hide();this._closeKeywordSelector()})));this._editAnimationPresenter.initialize(this.groupId,a,this.scaleFactorManager.get("backgroundDimensions"));this.rightSideFlyout.show(this._editAnimationContent.domNode)},_openInsertAnimationDialog:function(){this._closeKeywordSelector();
this.insertAnimationContent||(this.insertAnimationContent=new O,this.own(this.insertAnimationContent));this.own(q.once(this.insertAnimationContent,"close",c.hitch(this.rightSideFlyout,this.rightSideFlyout.hide)));this.rightSideFlyout.show(this.insertAnimationContent.domNode)},_openNodeConfigurationDialog:function(a){this._onUpdateStarted();this._configDialog||(this._configDialog=new P,this.own(this._configDialog));this._configDialogPresenter||(this._configDialogPresenter=new Q({view:this._configDialog,
textNodeUpdater:this._textNodeUpdater}));this.own(q.once(this._configDialog,"hide",c.hitch(this,function(a){a.set("selectedForEdit",!1);this._onUpdateComplete()},a)));this._configDialogPresenter.initialize(this.groupId,a,this.groupRenderer.get("nodeFont"),this.scaleFactorManager.get("backgroundDimensions"))},_resizeRenderer:function(){if(this.groupRenderer.domNode){var a=b.position(n.byId("rcSystemContent"),!1),c=b.position(this.groupRenderer.domNode,!1),c={width:a.w-(c.x-a.x)-.02*a.w+8,height:a.h-
(c.y-a.y)-8};t.set(this.builderContainer.domNode,{height:c.height+"px",width:c.width+"px"});this.scaleFactorManager.set("availableDimensions",c);this._resize(this._searchResultExpandToFill?a.w:.3*a.w)}},_setScaleFactorManagerAttr:function(a){this.own(a.watch("heightScaleFactor",c.hitch(this,function(a,b,c){isNaN(c)||b===c||this.resize()})));this._set("scaleFactorManager",a)},_setBuilderStateManagerAttr:function(a){this.editModeListener&&this.editModeListener.remove();this.editModeListener=a.watch("editMode",
c.hitch(this,function(a,b,c){this.resize();this._toggleEditMode(c)}));a.get("siteUrl")&&!this._groupPresenterStartUpDeferred.isFulfilled()?this._groupPresenterStartUpDeferred.resolve():this._groupPresenterStartUpDeferred.isFulfilled()||(this.siteUrlListener&&this.siteUrlListener.remove(),this.siteUrlListener=a.watch("siteUrl",c.hitch(this,function(a,b,c){c&&(this._groupPresenterStartUpDeferred.resolve(),this.siteUrlListener.unwatch())})),this.own(this.siteUrlListener));this.own(this.editModeListener);
var b=a.get("editMode");this._toggleEditMode(b);this._set("builderStateManager",a);this.groupRenderer.set("builderStateManager",a)},_setUpRenderer:function(){this.builderContainer.setMainContent(this.groupRenderer.domNode);this._groupPresenterStartUpDeferred.then(c.hitch(this,function(){this._groupNodeManger=new S({nodeContainer:this.groupRenderer.nodeContainer,scaleFactorManager:this.scaleFactorManager,builderStateManager:this.builderStateManager});this._dndManager=new G({nodeContainer:this.groupRenderer.nodeContainer,
nodeManager:this._groupNodeManger});this._toggleDnd(this.builderStateManager.get("editMode"));this.own(this._groupNodeManger,this._dndManager,q(this._groupNodeManger,"nodeResizing",c.hitch(this,function(){this._toggleDnd(!1);a.toggle(this.groupRenderer.nodeContainer,"nodes-resizing",!0);this._onUpdateStarted()})),q(this._groupNodeManger,"nodeResized",c.hitch(this,function(b){this._toggleDnd(!0);a.toggle(this.groupRenderer.nodeContainer,"nodes-resizing",!1);this._groupNodeManger.isTextNode(b.originalNode.nodeId)?
this._textNodeUpdater.updateNodes([b]).always(c.hitch(this,this._onUpdateComplete)):(this._groupNodeManger.getAnimationNode(b.originalNode.nodeId).set(b.updatedNode),this._syncOpenEditorWithPositionChange(b.updatedNode),this._animationNodeUpdater.updateNodes([b]).always(c.hitch(this,this._onUpdateComplete)))})),q(this._dndManager,"updatedNodes",c.hitch(this,function(a,b){b?(this._syncOpenEditorWithPositionChange(a[0].updatedNode),this._animationNodeUpdater.updateNodes(a).always(c.hitch(this,this._onUpdateComplete))):
this._textNodeUpdater.updateNodes(a).always(c.hitch(this,this._onUpdateComplete))})),q(this._dndManager,"addedNodes",c.hitch(this,function(a,b){b?this._animationNodeUpdater.addNodes(a).always(c.hitch(this,this._onUpdateComplete)):this._textNodeUpdater.addNodes(a).always(c.hitch(this,this._onUpdateComplete))})),q(this._dndManager,"dndCancel",c.hitch(this,this._onUpdateComplete)),q(this._dndManager,"dndStart",c.hitch(this,this._onUpdateStarted)));this.groupRenderer.set("scaleFactorManager",this.scaleFactorManager);
this._groupPresenterStartUpDeferred.then(c.hitch(this,function(){var a=new R;this._groupPresenter=new T(this.groupRenderer,a,this._groupNodeManger,this.siteId,this.groupId);this.groupRenderer._groupPresenter=this._groupPresenter;this.own(a,this._groupPresenter)}))}))},_syncOpenEditor:function(a){a&&this._isAnimationEditorOpenForNode(a.nodeId)&&this._editAnimationPresenter.syncEditor(a)},_syncOpenEditorWithPositionChange:function(a){a&&(a={nodeId:a.nodeId,updatedProperties:c.clone(a)},delete a.updatedProperties.nodeId,
this._syncOpenEditor(a))},_syncOpenEditorWithUndoRedoChanges:function(a){a&&(E.isArrayNotNullOrEmpty(a.nodesToUpdate)&&l.forEach(a.nodesToUpdate,c.hitch(this,function(a){this._syncOpenEditor(a)})),E.isArrayNotNullOrEmpty(a.nodesToDelete)&&l.forEach(a.nodesToDelete,c.hitch(this,function(a){if(a&&this._isAnimationEditorOpenForNode(a.nodeId))this._editAnimationPresenter.view.onClose()})))},_toggleDnd:function(a){this._dndManager&&(a?this._dndManager.enable():this._dndManager.disable())},_toggleEditMode:function(a){this._toggleDnd(a);
this._toggleSearchable(a);!a&&this.rightSideFlyout&&this.rightSideFlyout.hide()},_toggleSearchable:function(a){a?this.publishSearchable():(this.publishUnsearchable(),this._closeKeywordSelector())},_toggleShowBoxes:function(b){b=b&&!0===this.builderStateManager.get("editMode");a.toggle(this.groupRenderer.nodeContainer,"p-shortcut",b)},_toggleShowInvisibleNodeSequence:function(b){a.toggle(this.groupRenderer.nodeContainer,"i-shortcut",b)},_toggleShowNodeSequence:function(b){a.toggle(this.groupRenderer.nodeContainer,
"n-shortcut",b)},destroy:function(){this.rightSideFlyout.closePane();this.inherited(arguments);this._configDialogPresenter=this._configDialog=this._configDialogRequests=null}})})},"webview/admin/SearchableWidgetWithTree":function(){define(["dojo/_base/declare","./_objectTypeMap","./SearchableWidget","./widget/ObjectResultsTree"],function(r,p,m,l){return r("webview/admin/SearchableWidgetWithTree",m,{_dndSource:null,_getPointsNode:function(h){null===this._dndSource&&console.error("_dndSource must be implementing by inheriting class");
var c=new l(this._dndSource);c.update(h);return c.getDomNode()}})})},"webview/admin/widget/ObjectResultsTree":function(){define("dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/store/Memory dojo/store/Observable rc/bacnet/enums rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/Object rc/bacnet/io/Number rc/util/pointObject ../../sys/job".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k){return m("webview/admin/widget/ObjectResultsTree",null,{_store:null,
_model:null,_tree:null,constructor:function(a){this._store=new g(new c({data:[{id:"root"}],getChildren:l.hitch(this,this.getChildren)}));this._model=new p({store:this._store,query:{id:"root"},mayHaveChildren:function(a){return a.mayHaveChildren}});this._tree=new r({showRoot:!1,model:this._model,openOnClick:!0,dndController:a,getIconClass:function(a){return this.dndController.itemIsDraggable(a)?"webviewIcon dragHandle":"hidden"},getRowClass:function(){return"dnd-point-item"}});this._tree.startup()},
getChildren:function(a){var b=a.pointMnemonic?t.getByMnemonic(a.pointMnemonic):null;if(null==b||b.comType!=d.comTypes.ARRAY)return this._store.query({parent:a.id});var c=new h;k.loadForAdmin(a.sysId).then(l.hitch(this,function(){this._requestArrayCount(b,a.sysId).then(l.hitch(this,function(b){for(var d=[],f=1;f<=b;f++)d.push(l.mixin(l.clone(a),{id:l.replace("{0}[{1}]",[a.id,f]),parent:a.id,name:l.replace("{0}[{1}]",[a.pointMnemonic,f]),pointMnemonic:l.replace("{0}[{1}]",[a.pointMnemonic,f]),pointName:l.replace("{0}[{1}]",
[a.pointName,f]),mayHaveChildren:!1}));c.resolve(d)}))}));return c.promise},getDomNode:function(){return this._tree.domNode},update:function(a){this._tree.set("paths",[]);this._store.setData([]);a.forEach(l.hitch(this,function(a){lastItem=a;var b=a.pointMnemonic.includes("AY")&&!a.pointMnemonic.includes("["),c=l.replace("{sysName}/{deviceName}/{pointName}({pointMnemonic})",a);this._store.put(l.mixin(a,{id:c,parent:"root",name:c,mayHaveChildren:b}))}))},_bacnetArrayCount:function(c,f,g){c=[{o:new a(d.objectTypes.OBJID_PP_ARRAY,
c),pl:[{p:new b(d.propertyTypes.PROPID_PRESENT_VALUE,d.primitiveTypes.UNSIGNED_INTEGER),i:new b(0,d.primitiveTypes.UNSIGNED_INTEGER),v:new b(0,d.primitiveTypes.UNSIGNED_INTEGER)}]}];f=new n({device:f,systemId:g},c);return rc.xhr.request({type:"bacnet",s:f}).then(l.hitch(this,function(a){return a.o[0].pl[0].v.v}),function(){return 0})},_requestArrayCount:function(a,b){var c=k.getAnyProperty(a.mainController+"DEV"+a.mainController,"BACnetNetworkNum");return a.subController||""===c||isNaN(c)?0:this._bacnetArrayCount(a.comInstance?
a.comInstance:a.pointInstance,a.mainController,b)}})})},"webview/crossCutting/topicEvents":function(){define(function(){return{addClickDestinationKeyword:"addClickDestinationKeyword",addAssociatedObject:"addAssociatedObject",animationEdit:"animationEdit",animationEditClose:"animationEditClose",closeSearchResultsPane:"closeSearchResultsPane",editAnimationConfigurationClicked:"editAnimationConfigurationClicked",editNodeConfigurationClicked:"editNodeConfigurationClicked",groupNodeClicked:"groupNodeClicked"}})},
"webview/admin/widget/KeywordSelector":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/fx dojo/fx/easing dojo/i18n!../../nls/all dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/text!./templates/KeywordSelector.html".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v){return c("webview/admin/widget/KeywordSelector",
[p,r,m],{baseClass:"",templateString:v,webviewStrings:u,isOpen:!1,_resizeTimeout:null,buildRendering:function(){this.inherited(arguments);this.own(w(this.closeButton,"click",d.hitch(this,this.closeKeywordSelector)))},closeKeywordSelector:function(){this._close()},onBeforeReShow:function(){},onClose:function(){},performInitialDisplay:function(a){this._cleanClonedNode(a);this.displayArgs={clonedSearchedTreeItem:a,keywordsTree:this._buildResultsTree()};t.place(a,this.searchedTreeNodeContainer,"only");
t.place(this.displayArgs.keywordsTree,this.keywordsContainer,"only");return this._animateShow()},resize:function(a){a&&null!==this._resizeTimeout&&clearTimeout(this._resizeTimeout)},show:function(){this.onBeforeReShow();this._updateKeywordSelector();this._animateShow()},_animateClose:function(){var c=new a;this.own(c);var f=q.combine([this._getOnCloseMoveAnimation(this.displayArgs.clonedSearchedTreeItem,8,-1E3),this._getOnCloseMoveAnimation(this.displayArgs.keywordsTree,8,-1E3)]).play();n.after(f,
"onEnd",d.hitch(this,function(){b.add(this.domNode,"hidden");this.isOpen=!1;c.resolve()}));return c.promise},_animateShow:function(){var c=new a;this.own(c);this.isOpen=!0;b.remove(this.domNode,"hidden");var f=q.combine([this._getOnShowMoveAnimation(this.displayArgs.clonedSearchedTreeItem,-1E3,8),this._getOnShowMoveAnimation(this.displayArgs.keywordsTree,-1E3,8)]).play();n.after(f,"onEnd",d.hitch(this,function(){c.resolve()}));return c.promise},_buildResultsTree:function(){this._store=new y(new x({data:[{id:"root"}],
getChildren:d.hitch(this,this._getTreeItemChildren)}));this._model=new h({store:this._store,query:{id:"root"},mayHaveChildren:function(a){return a.mayHaveChildren}});this._tree=new l({showRoot:!1,model:this._model,openOnClick:!0,dndController:this.dndSource,getIconClass:function(a){return this.dndController.itemIsDraggable(a)?"webviewIcon dragHandle":"hidden"},getRowClass:function(){return"dnd-point-item"}});this._updateKeywordSelector();this._tree.startup();return this._tree.domNode},_cleanClonedNode:function(a){z(".dijitTreeNode",
a).forEach(t.destroy);z(".treeMagnifingGlass",a).forEach(t.destroy);z(".dijitTreeExpando",a).forEach(t.destroy);k.set(a.firstElementChild,"paddingLeft","0px")},_close:function(){this._animateClose().then(d.hitch(this,this.onClose))},_getOnCloseMoveAnimation:function(a,b,c,d){return g.animateProperty({node:a,properties:{marginLeft:{start:b,end:c,unit:"px"}},easing:f.expoin,duration:d||500})},_getOnShowMoveAnimation:function(a,b,c,d){return g.animateProperty({node:a,properties:{marginLeft:{start:b,
end:c,unit:"px"}},easing:f.expoOut,duration:d||500})},_getTreeItemChildren:function(a){return this._store.query({parent:a.id})},_updateKeywordSelector:function(){this.keywordSelectorDataSource.fetchData().then(d.hitch(this,function(a){this._updateTree(a)}))},_updateTree:function(a){this._tree.set("paths",[]);this._store.query().forEach(d.hitch(this,function(a){this._store.remove(a.id)}));a.forEach(d.hitch(this,function(a){var b="EnterpriseSchedules"===a.id||"NavigationGroups"===a.id;this._store.add(d.mixin(d.clone(a),
{id:a.id,parent:a.parent,name:a.label,mayHaveChildren:b,isKeywordSelectorItem:!0}))}))},destroy:function(){null!==this._resizeTimeout&&clearTimeout(this._resizeTimeout)}})})},"webview/admin/widget/KeywordSelectorDataSource":function(){define("dijit/_Widget dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/promise/all dojox/html/entities".split(" "),function(r,p,m,l,h,c,g,d,n){return p("wwebview/admin/widget/KeywordSelectorDataSource",
[r],{webviewStrings:g,afterHoursStrings:c,rcStrings:h,showFolders:!1,showHyperlinks:!0,siteUrlPath:"",_siteWideNodes:null,constructor:function(){for(var a=0;a<rc.session._attributes.SiteMapArray.length;a++){var b=rc.session._attributes.SiteMapArray[a];if(b.id===this.siteId){this.siteUrlPath=b.sitePath;break}}},fetchData:function(){var a=[];this.dataCatch={enterpriseSchedules:[],navigationGroups:[]};var b=new l,c=new l;a.push(b);a.push(c);this._getEnterpriseScheduleKeywords().always(m.hitch(this,function(){b.resolve()}));
this._getNavigationGroupKeywords().always(m.hitch(this,function(){c.resolve()}));var g=new l;d(a).then(m.hitch(this,function(){this._siteWideNodes=[];this._siteWideNodes.push(this._getAfterHoursReportKeyword());this._siteWideNodes.push(this._getAHACRequestsKeyword());this._siteWideNodes.push(this._getAlarmsKeyword());this._processGetEnterpriseSchedulesResult();this.showHyperlinks&&this._siteWideNodes.push(this._getHyperlinkKeyword());this.showFolders&&this._siteWideNodes.push(this._getFolderKeyword());
this._processGetNavigationGroupsResult();g.resolve(this._siteWideNodes)}));return g},_getAfterHoursReportKeyword:function(){return{id:"AfterHoursReport",parent:"root",label:this.afterHoursStrings.afterHoursSummary,displayText:this.afterHoursStrings.afterHoursSummary,keyword:"AfterHoursReport"}},_getAHACRequestsKeyword:function(){return{id:"AHACRequests",parent:"root",label:this.webviewStrings.afterHoursRequests,displayText:this.afterHoursStrings.afterHoursRequests,keyword:"AHACRequests"}},_getAlarmsKeyword:function(){return{id:"Alarm",
parent:"root",label:this.rcStrings.alarm,displayText:this.rcStrings.alarm,keyword:"Alarm"}},_getEnterpriseScheduleKeywords:function(){return rc.xhr.request({path:"schedules/",type:"rest",method:"GET",siteId:this.siteId}).then(m.hitch(this,function(a){this.dataCatch.enterpriseSchedules=200===a.data.errStatus?a.data.dataArray:[]}),m.hitch(this,function(a){console.error(this.declaredClass+" - getSiteWideNodes(): Error getting Enterprise Schedules",a)}))},_getFolderKeyword:function(){return{id:"Folder",
parent:"root",label:this.webviewStrings.folder,displayText:this.webviewStrings.folder}},_getHyperlinkKeyword:function(){return{id:"Hyperlink",parent:"root",label:this.webviewStrings.hyperlink,displayText:this.webviewStrings.hyperlink,url:"http://"}},_getNavigationGroupKeywords:function(){return rc.xhr.request({path:"navGroups/",type:"rest",method:"GET",siteId:this.siteId}).then(m.hitch(this,function(a){this.dataCatch.navigationGroups=200===a.data.errStatus?a.data.dataArray:[]}),m.hitch(this,function(a){console.error(this.declaredClass+
" - getSiteWideNodes(): Error getting Navigation Groups",a)}))},_processGetEnterpriseSchedulesResult:function(){var a=this.dataCatch.enterpriseSchedules||[];if(0<a.length){this._siteWideNodes.push({id:"EnterpriseSchedules",parent:"root",pointType:null,label:this.webviewStrings.wvSchedules,widgetValue:null});for(var b=0;b<a.length;b++){var c=n.decode(a[b].name);this._siteWideNodes.push({id:"EnterpriseSchedule"+a[b].id,parent:"EnterpriseSchedules",label:c,displayText:c,mnemonic:"EnterpriseSchedule"+
a[b].id,sitePath:this.siteUrlPath})}}},_processGetNavigationGroupsResult:function(){var a=this.dataCatch.navigationGroups||[];if(0<a.length){this._siteWideNodes.push({id:"NavigationGroups",parent:"root",pointType:null,label:this.webviewStrings.navGroups,widgetValue:null});for(var b=0;b<a.length;b++){var c=n.decode(a[b].name);this._siteWideNodes.push({id:"NavigationGroup"+a[b].id,parent:"NavigationGroups",label:c,displayText:c,mnemonic:"NavigationGroup"+a[b].id,sitePath:this.siteUrlPath})}}}})})},
"webview/util/Debounce":function(){define([],function(){return function(r,p,m){r&&clearTimeout(r);return setTimeout(p,m)}})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/_AnimationNodeUpdateRequests":function(){define(["dijit/_WidgetBase","dojo/_base/declare","webview/xhrEnhanced"],function(r,p,m){return p("webview/features/navigationGroups/groupBuilding/nodeUpdating/_TextNodeRequests",[r],{_rootPath:"NavigationGroup",_updateNodePath:"/AnimationNodeConfiguration",constructor:function(l){this.groupId=
l},addAnimationNodes:function(l){l=m.post(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",preventCache:!0,data:{data:JSON.stringify(l)}});this.own(l);return l},deleteNodes:function(l){l=m.del(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",data:{nodeIds:l}});this.own(l);return l},getConfigurationDataForNode:function(l,h){this._configurationRequest&&this._configurationRequest.cancel();return this._configurationRequest=m.get(this._rootPath+l+this._updateNodePath+
h,{handleAs:"json",preventCache:!0})},updateAnimationNodes:function(l){l=m.put(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",preventCache:!0,data:{data:JSON.stringify(l)}});this.own(l);return l},destroy:function(){this.inherited(arguments);this._configurationRequest&&this._configurationRequest.cancel()}})})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/_TextNodeUpdateRequests":function(){define(["dijit/_WidgetBase","dojo/_base/declare","webview/xhrEnhanced"],function(r,
p,m){return p("webview/features/navigationGroups/groupBuilding/nodeUpdating/_TextNodeUpdateRequests",[r],{_rootPath:"NavigationGroup/",_updateNodePath:"/TextNodeConfiguration",constructor:function(l){this.groupId=l},addTextNodes:function(l){l=m.post(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",preventCache:!0,data:{data:JSON.stringify(l)}});this.own(l);return l},deleteNodes:function(l){l=m.del(this._rootPath+this.groupId,{handleAs:"json",data:{nodeIds:l}});this.own(l);return l},
getConfigurationDataForNode:function(l,h){this._configurationRequest&&this._configurationRequest.cancel();return this._configurationRequest=m.get(this._rootPath+l+"/"+h,{handleAs:"json",preventCache:!0})},updateTextNodes:function(l){l=m.put(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",preventCache:!0,data:{data:JSON.stringify(l)}});this.own(l);return l},destroy:function(){this.inherited(arguments);this._configurationRequest&&this._configurationRequest.cancel()}})})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/AnimationNodeUpdater":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/promise/all dojox/html/entities webview/crossCutting/errors/_OnErrorMixin ./_AnimationNodeUpdateRequests".split(" "),
function(r,p,m,l,h,c,g,d){return m("webview/features/navigationGroups/groupBuilding/nodeUpdating/AnimationNodeUpdater",[r,d,g],{groupChangeTracker:null,groupId:null,specialProperties:["attributes","nodeId","linkedObjects","clickDestinations"],addNodes:function(c){var a=this._getFormattedDataForNodes(c,!0);c=this.requestManager.addAnimationNodes(a.formattedUpdatedNodes);c.then(l.hitch(this,function(b){this._onUpdateSuccess(b);1===b.resultCode&&(this._onAddSuccess(b.newNodeIds,a.changeReceipts),this._trackChanges(a.changeReceipts))}),
l.hitch(this,this._onError));return c},applyNodeChanges:function(c){var a=[];if(0<c.nodesToDelete.length){var b=p.map(c.nodesToDelete,function(a){return a.nodeId}),b=this.requestManager.deleteNodes(b);b.then(l.hitch(this,this._onUpdateSuccess),l.hitch(this,this._onError));a.push(b)}if(0<c.nodesToAdd.length){for(var d=[],b=0;b<c.nodesToAdd.length;b++)d.push(c.nodesToAdd[b].nodeId),c.nodesToAdd[b].nodeId=-1;b=this.requestManager.addAnimationNodes(c.nodesToAdd);b.then(l.hitch(this,function(a){this._onUpdateSuccess(a);
if(1===a.resultCode&&a.newNodeIds&&c.nodesToAdd.length===a.newNodeIds.length)for(var b=0;b<c.nodesToAdd.length;b++)c.onNodeIdChange(d[b],a.newNodeIds[b]),c.nodesToAdd[b].nodeId=a.newNodeIds[b]}),l.hitch(this,this._onError));a.push(b)}0<c.nodesToUpdate.length&&(b=this.requestManager.updateAnimationNodes(c.nodesToUpdate),b.then(l.hitch(this,this._onUpdateSuccess),l.hitch(this,this._onError)),a.push(b));return h(a)},deleteNodes:function(c){var a=[],b=[];p.forEach(c,l.hitch(this,function(c){b.push(c.nodeId);
a.push({beforeChange:this._getFormattedData(c),afterChange:null})}));c=this.requestManager.deleteNodes(b);c.then(l.hitch(this,function(b){this._onUpdateSuccess(b);this._updateChangeReceiptsWithResponse(a,b);this._trackChanges(a)}));return c},getConfigurationDataForNode:function(c,a){return this.requestManager.getConfigurationDataForNode(c,a)},updateNodes:function(c){var a=this._getFormattedDataForNodes(c,!1);c=this.requestManager.updateAnimationNodes(a.formattedUpdatedNodes);c.then(l.hitch(this,function(b){this._onUpdateSuccess(b);
this._updateChangeReceiptsWithResponse(a.changeReceipts,b);this._trackChanges(a.changeReceipts)}),l.hitch(this,this._onError));return c},_applyChangeResultToChangeReceipt:function(c,a){a.originalAttributes&&(c.beforeChange.attributes=a.originalAttributes);a.updatedAttributes&&c.afterChange&&(c.afterChange.attributes=a.updatedAttributes);a.originalLinkedObjects&&(c.beforeChange.linkedObjects=a.originalLinkedObjects,c.afterChange&&(c.afterChange.linkedObjects=[]));a.originalClickDestinations&&(c.beforeChange.clickDestinations=
a.originalClickDestinations,c.afterChange&&(c.afterChange.clickDestinations=[]));a.originalMapLocations&&(c.beforeChange.updatedProperties.mapLocations=a.originalMapLocations.join(";"),c.afterChange&&(c.afterChange.updatedProperties.mapLocations=null))},_getFormattedData:function(d){var a={nodeId:d.nodeId,updatedProperties:{}};p.forEach(Object.keys(d),l.hitch(this,function(b){this.specialProperties.includes(b)||(a.updatedProperties[b]=d[b])}));d.linkedObjects&&(a.linkedObjects=d.linkedObjects);d.clickDestinations&&
(a.clickDestinations=d.clickDestinations);d.attributes&&(a.attributes=[],p.forEach(d.attributes,l.hitch(this,function(b){b=l.clone(b);"string"===typeof b.value&&(b.value=c.encode(b.value));a.attributes.push(b)})));return a},_getFormattedDataForNodes:function(c,a){var b=[],d=[];p.forEach(c,l.hitch(this,function(c){var g={};g.afterChange=this._getFormattedData(c.updatedNode);a?(g.afterChange.nodeId=-1,g.beforeChange=null):g.beforeChange=this._getFormattedData(c.originalNode);b.push(g);d.push(g.afterChange)}));
return{changeReceipts:b,formattedUpdatedNodes:d}},_onAddSuccess:function(c,a){if(c&&a.length===c.length)for(var b=0;b<a.length;b++)a[b].afterChange.nodeId=c[b]},_onUpdateSuccess:function(c){1!==c.resultCode&&c.errorMessage&&this._onError(c);this.builderStateManager&&this.builderStateManager.set("userEditInProgress",!1)},_trackChanges:function(c){this.groupChangeTracker.addNewChange({changeMaker:this,changeReceipts:c})},_updateChangeReceiptsWithResponse:function(c,a){p.forEach(c,l.hitch(this,function(b){var c=
a.changeResults[b.beforeChange.nodeId];c&&this._applyChangeResultToChangeReceipt(b,c)}))},destroy:function(){this.inherited(arguments);this.requestManager.destroy()}})})},"webview/crossCutting/errors/_OnErrorMixin":function(){define(["dojo/_base/declare","dojo/i18n!webview/nls/errorMessages","dojo/topic","rc/util/notices"],function(r,p,m,l){return r("webview/crossCutting/errors/_OnErrorMixin",[],{disableErrorToasts:!1,_onError:function(h){var c;c=h&&h.message?h.message:h&&h.errMSG?h.errMSG:h&&h.errorMessage?
h.errorMessage:p.unexpectedError;this.disableErrorToasts||(l.widget.clear(),m.publish("sticky",{type:"error",message:c}));console.error(JSON.stringify(h))}})})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/GroupChangeTracker":function(){define(["dijit/_WidgetBase","dojo/_base/declare","dojo/_base/lang","dojo/Deferred","webview/crossCutting/collections/Stack"],function(r,p,m,l,h){return p("webview/features/navigationGroups/groupBuilding/node/Updating/GroupChangeTracker",[r],{MAX_STACK:100,
hasRedoItems:!1,hasUndoItems:!1,_redoStack:null,_undoStack:null,constructor:function(){this._undoStack=new h({maxSize:this.MAX_STACK});this._redoStack=new h({maxSize:this.MAX_STACK});this.own(this._undoStack.watch("isEmpty",m.hitch(this,function(c,g,d){this.builderStateManager.set("hasUndoItems",!d)})),this._redoStack.watch("isEmpty",m.hitch(this,function(c,g,d){this.builderStateManager.set("hasRedoItems",!d)})))},addNewChange:function(c){this._undoStack.push(c);this._redoStack.clear()},undoChange:function(){var c=
this._undoStack.pop();if(!c)return null;this.builderStateManager.set("undoRedoInProgress",!0);var g=this._getNodeChanges(c.changeReceipts,!1);c.changeMaker.applyNodeChanges(g).then(m.hitch(this._redoStack,this._redoStack.push,c)).always(m.hitch(this.builderStateManager,this.builderStateManager.set,"undoRedoInProgress",!1));return g},redoChange:function(){var c=this._redoStack.pop();if(!c)return null;this.builderStateManager.set("undoRedoInProgress",!0);var g=this._getNodeChanges(c.changeReceipts,
!0);c.changeMaker.applyNodeChanges(g).then(m.hitch(this._undoStack,this._undoStack.push,c)).always(m.hitch(this.builderStateManager,this.builderStateManager.set,"undoRedoInProgress",!1));return g},_formatChangeReceipt:function(c,g){return!0===g?{afterChange:c.beforeChange,beforeChange:c.afterChange}:c},_updateNodeIds:function(c,g,d){if(c&&!(1>c.size()))for(var h=c.size(),a=0;a<h;a++)for(var b=c._stack[a],l=0;l<b.changeReceipts.length;l++){var k=b.changeReceipts[l];k&&k.beforeChange&&k.beforeChange.nodeId===
g&&(k.beforeChange.nodeId=d);k&&k.afterChange&&k.afterChange.nodeId===g&&(k.afterChange.nodeId=d)}},_getNodeChanges:function(c,g){for(var d={nodesToDelete:[],nodesToAdd:[],nodesToUpdate:[],onNodeIdChange:m.hitch(this,function(a,c){this._updateNodeIds(this._undoStack,a,c);this._updateNodeIds(this._redoStack,a,c)})},h=0;h<c.length;h++){var a=this._formatChangeReceipt(c[h],g);null===a.beforeChange&&null!==a.afterChange?d.nodesToDelete.push(a.afterChange):null!==a.beforeChange&&null===a.afterChange?d.nodesToAdd.push(a.beforeChange):
null!==a.beforeChange&&null!==a.afterChange&&d.nodesToUpdate.push(a.beforeChange)}return d}})})},"webview/crossCutting/collections/Stack":function(){define(["dojo/_base/declare","dojo/Stateful"],function(r,p){return r("webview/crossCutting/collections/Stack",[p],{maxSize:0,isEmpty:!0,constructor:function(){this._resetStack()},clear:function(){this._resetStack();this._setIsEmpty()},peek:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},pop:function(){var m=this._stack.pop();
this._setIsEmpty();return m},push:function(m){this._stack.push(m);this._resize();this._setIsEmpty()},size:function(){return this._stack.length},_resetStack:function(){this._stack=[]},_resize:function(){0<this.maxSize&&this.maxSize<this._stack.length&&(this._stack=this._stack.splice(this._stack.length-this.maxSize,this.maxSize))},_setIsEmpty:function(){this.set("isEmpty",0===this._stack.length)}})})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/TextNodeUpdater":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/promise/all webview/crossCutting/errors/_OnErrorMixin".split(" "),
function(r,p,m,l,h,c){return m("webview/features/navigationGroups/groupBuilding/nodeUpdating/TextNodeUpdater",[r,c],{groupChangeTracker:null,groupId:null,specialProperties:["nodeFont","nodeId","linkedObject","secondaryLinkedObject"],addNodes:function(c){var d=this._getFormattedDataForNodes(c,!0);c=this.requestManager.addTextNodes(d.formattedUpdatedNodes);c.then(l.hitch(this,function(c){this._onUpdateSuccess(c);1===c.resultCode&&(this._onAddSuccess(c.newNodeIds,d.changeReceipts),this._trackChanges(d.changeReceipts))}),
l.hitch(this,this._onError));return c},applyNodeChanges:function(c){var d=[];if(0<c.nodesToDelete.length){var g=p.map(c.nodesToDelete,function(a){return a.nodeId}),g=this.requestManager.deleteNodes(g);g.then(l.hitch(this,this._onUpdateSuccess),l.hitch(this,this._onError));d.push(g)}if(0<c.nodesToAdd.length){for(var a=[],g=0;g<c.nodesToAdd.length;g++)a.push(c.nodesToAdd[g].nodeId),c.nodesToAdd[g].nodeId=-1;g=this.requestManager.addTextNodes(c.nodesToAdd);g.then(l.hitch(this,function(b){this._onUpdateSuccess(b);
if(1===b.resultCode&&b.newNodeIds&&c.nodesToAdd.length===b.newNodeIds.length)for(var d=0;d<c.nodesToAdd.length;d++)c.onNodeIdChange(a[d],b.newNodeIds[d]),c.nodesToAdd[d].nodeId=b.newNodeIds[d]}),l.hitch(this,this._onError));d.push(g)}0<c.nodesToUpdate.length&&(g=this.requestManager.updateTextNodes(c.nodesToUpdate),g.then(l.hitch(this,this._onUpdateSuccess),l.hitch(this,this._onError)),d.push(g));return h(d)},deleteNodes:function(c){var d=[],g=[];p.forEach(c,l.hitch(this,function(a){g.push(a.nodeId);
d.push({beforeChange:this._getFormattedData(a),afterChange:null})}));c=this.requestManager.deleteNodes(g);c.then(l.hitch(this,function(a){this._onUpdateSuccess(a);1===a.resultCode&&this._trackChanges(d)}));return c},getConfigurationDataForNode:function(c,d){return this.requestManager.getConfigurationDataForNode(c,d)},updateNodes:function(c){var d=this._getFormattedDataForNodes(c,!1);c=this.requestManager.updateTextNodes(d.formattedUpdatedNodes);c.then(l.hitch(this,function(c){this._onUpdateSuccess(c);
1===c.resultCode&&this._trackChanges(d.changeReceipts)}),l.hitch(this,this._onError));return c},_getFormattedData:function(c){var d={nodeId:c.nodeId,updatedProperties:{}};p.forEach(Object.keys(c),l.hitch(this,function(g){this.specialProperties.includes(g)||(d.updatedProperties[g]=c[g])}));c.linkedObject&&(d.linkedObject=c.linkedObject);c.secondaryLinkedObject&&(d.secondaryLinkedObject=c.secondaryLinkedObject);c.nodeFont&&(d.nodeFont=c.nodeFont);return d},_getFormattedDataForNodes:function(c,d){var g=
[],a=[];p.forEach(c,l.hitch(this,function(b){var c={};c.afterChange=this._getFormattedData(b.updatedNode);d?(c.afterChange.nodeId=-1,c.beforeChange=null):c.beforeChange=this._getFormattedData(b.originalNode);g.push(c);a.push(c.afterChange)}));return{changeReceipts:g,formattedUpdatedNodes:a}},_onAddSuccess:function(c,d){if(c&&d.length===c.length)for(var g=0;g<d.length;g++)d[g].afterChange.nodeId=c[g]},_onUpdateSuccess:function(c){1!==c.resultCode&&c.errorMessage&&this._onError(c)},_trackChanges:function(c){this.groupChangeTracker.addNewChange({changeMaker:this,
changeReceipts:c})},destroy:function(){this.inherited(arguments);this.requestManager.destroy()}})})},"webview/features/navigationGroups/groupBuilding/DndManager":function(){define("dijit/_WidgetBase dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dnd/Manager dojo/dnd/Source dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/on dojo/topic dojo/query webview/util/util ./NavGroupAvatar".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,
z){return l("webview/features/navigationGroups/groupBuilder/DndManager",[r],{DEFAULT_DELAY:3,DEFAULT_NODE_HEIGHT:38,DND_Y_OFFSET:5,dndAvatar:z,dndItemClass:"group-node",manager:null,nodeContainer:null,_groupSource:null,_horizontalCursorOffset:0,_verticalCursorOffset:0,constructor:function(){this._setupManager()},postCreate:function(){this._addedAnimationNodes=[];this._addedTextNodes=[];this._createGroupSource();this._cancelSubscription=f.subscribe("/dnd/cancel",h.hitch(this,this._onDndCancel))},_setNodeContainerAttr:function(a){this._set("nodeContainer",
a)},_setNodeManagerAttr:function(a){this.own(q(a,"animationNodesAdded",h.hitch(this,this._animationNodesAdded)),q(a,"textNodesAdded",h.hitch(this,this._textNodesAdded)));this._set("nodeManager",a)},enable:function(){this._groupSource.delay=this.DEFAULT_DELAY},disable:function(){this._groupSource.delay=Number.MAX_VALUE},getFontForAvatar:function(){return this.nodeManager.getFontForAvatar()},onAddedNodes:function(a){},onDndCancel:function(){},onDndStart:function(){},onUpdatedNodes:function(a,b){},_animationNodesAdded:function(a){this._insertNodesToSource(a);
this._addedAnimationNodes&&(m.forEach(this._addedAnimationNodes,function(a){a.destroy()}),this._addedAnimationNodes=[])},_createGroupSource:function(){null==this._groupSource&&(this._groupSource=new d(this.nodeContainer,{creator:h.hitch(this.nodeManager,this.nodeManager.createDndNode),copyOnly:!1,allowNested:!0,autoSync:!1,singular:!0,generateText:!1,delay:this.DEFAULT_DELAY,skipForm:!0,accept:["navGroupPoint","resultNode"]}),this.own(c.before(this._groupSource,"onDndStart",h.hitch(this,this._onDndStart),
!0)),this.own(c.after(this._groupSource,"onDndDrop",h.hitch(this,this._onDndDrop))),this.own(c.after(this._groupSource,"onMouseUp",h.hitch(this._groupSource,this._groupSource.selectNone))),this.own(c.after(this._groupSource,"onDndCancel",h.hitch(this,function(){if(!this.manager.canDropFlag){var a=u(".animation-node-overlay",this.manager.avatar.node);1===a.length&&(a=p.byId(a[0].id),a.nodeId&&(a=this.nodeManager.getAnimationNode(a.nodeId),b.remove(a.domNode,"hidden")))}null!==this._groupSource.anchor&&
b.remove(this._groupSource.anchor,"hidden")}))))},_insertNodesToSource:function(a){this._groupSource.insertNodes(!1,a);this._groupSource.sync()},_onDndCancel:function(){this.onDndCancel()},_onDndDrop:function(a,c){if(c[3]===this._groupSource){var d=[],f=!1;c[0]===this._groupSource?d=c[1]:(f=Object.keys(c[3].selection),m.forEach(f,function(a){d.push(n.byId(a))}),f=!0);for(var g=k.get(this.nodeContainer,"width"),h=k.get(this.nodeContainer,"height"),l=c[4],q=u(".node-container").position(),r=[],t=this.DEFAULT_NODE_HEIGHT,
w=!1,x=0;x<d.length;x++){var y;if(d[x].getAttribute)y=p.byNode(d[x]),w=2===y.renderType;else if(d[x].node)y=p.byNode(d[x].node),f=!0;else{console.error("Couldn't drop node: "+d[x]);break}var z=-1,L=-1;if(l.target===this._groupSource.node)l.changedTouches?(L=l.changedTouches[0],z=L.pageX-q[0].x,L=L.pageY-q[0].y+this.DND_Y_OFFSET):(z=l.offsetX,L=l.offsetY+this.DND_Y_OFFSET);else{for(var z=l.target,M=z.offsetLeft,L=z.offsetTop;!b.contains(z,this.dndItemClass);)z=z.offsetParent,M+=z.offsetLeft,L+=z.offsetTop;
z=M+l.offsetX;L=L+l.offsetY+this.DND_Y_OFFSET}f&&(0===x&&t!==y.domNode.offsetHeight&&(t=document.getElementById(y.id).offsetHeight),L+=x*t);var z=100*(z+this._horizontalCursorOffset)/g,L=100*(L+this._verticalCursorOffset)/h,O;w&&f?(M=y.widthPx,O=y.heightPx):(M=y.domNode.clientWidth,O=y.domNode.clientHeight);z/100*g+M>g&&(z=(g-M-1)/g*100);L/100*h+O>h&&(L=(h-O-1)/h*100);z=Math.max(0,z);L=Math.max(0,L);f?w?(M={originalNode:null,updatedNode:{nodeId:null,animationName:y.animationName,height:y.relativeHeight,
width:y.relativeWidth,positioningLeft:z,positioningTop:L,aspectLocked:!1,attributes:y.animationAttributes,versionId:y.versionId}},k.set(y.domNode,"pointer-events","none"),this._addedAnimationNodes.push(y)):(M={originalNode:null,updatedNode:{nodeId:y.nodeId,renderType:this.nodeManager.RENDER_TYPE_MAP.TEXT_NODE,positioningLeft:z,positioningTop:L,height:0,width:0,showUnits:!0,linkedObject:{name:y.displayText,mnemonic:y.mnemonic,systemId:y.systemId,keyword:y.keyword,url:y.url}}},this._addedTextNodes.push(y)):
(M=this.nodeManager.getNodeById(y.nodeId),M={originalNode:{nodeId:y.nodeId,positioningLeft:M.positioningLeft,positioningTop:M.positioningTop},updatedNode:{nodeId:y.nodeId,positioningLeft:z,positioningTop:L}});r.push(M);y.set("positioningLeft",z);y.set("positioningTop",L)}if(w&&!f)for(x=0;x<d.length;x++)y=p.byNode(d[x]),g=this.nodeManager.getAnimationNode(y.nodeId),g.set({positioningLeft:r[0].updatedNode.positioningLeft,positioningTop:r[0].updatedNode.positioningTop}),b.remove(g.domNode,"hidden");
if(f)this.onAddedNodes(r,w);else this.onUpdatedNodes(r,w);for(x=0;x<d.length;x++)y=p.byNode(d[x]),b.remove(y.domNode,"hidden");this._groupSource.selectNone()}},_onDndStart:function(a,c){this.onDndStart();if(a===this._groupSource){if(1===c.length){var d=this._groupSource.getItem(c[0].id).data;2===d.renderType&&d.nodeId&&(d=this.nodeManager.getAnimationNode(d.nodeId),b.add(d.domNode,"hidden"))}m.forEach(c,h.hitch(this,function(a){b.add(a,"hidden")}))}},_setupManager:function(){this.manager=g.manager();
this.manager.OFFSET_Y=this.DND_Y_OFFSET;this.manager.groupNodeManager=this;this.manager.makeAvatar=h.hitch(this,function(){var a=event.clientX,b=event.clientY,c=new this.dndAvatar(this.manager);this.defaultFont&&k.set(c.node,this.defaultFont);if(c.isNewNode())this._verticalCursorOffset=this._horizontalCursorOffset=0;else{var d=t.position(c.manager.nodes[0]);this._horizontalCursorOffset=-1*(a-d.x+1);this._verticalCursorOffset=-1*(b-d.y+1);a=this._horizontalCursorOffset+"px";k.set(c.node,"margin-top",
this._verticalCursorOffset+"px");k.set(c.node,"margin-left",a);k.set(c.node,"pointer-events","none")}return c})},_textNodesAdded:function(a){this._addedTextNodes&&(m.forEach(this._addedTextNodes,function(a){a.destroy()}),this._addedTextNodes=[]);this._insertNodesToSource(a)},destroy:function(){this.inherited(arguments);this._cancelSubscription.remove()}})})},"webview/features/navigationGroups/groupBuilding/NavGroupAvatar":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dnd/Avatar dojo/dom-construct dojo/dom-class dojo/dom-style dojo/has dojo/hccss".split(" "),
function(r,p,m,l,h,c,g,d,n){return m("webview/features/navigationGroups/groupBuilding/NavGroupAvatar",h,{_newNode:!1,construct:function(){var a=c.create("div",{"class":"group-node-avatar",style:{position:"fixed",zIndex:"1999",marginLeft:"0"}}),b=this.manager.source,g;n("highcontrast")&&c.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},g);p.forEach(this.manager.nodes,l.hitch(this,function(h,l){if(this.manager.groupNodeManager){var f=b.getItem(h.id)||h;f&&(h=this.manager.groupNodeManager.nodeManager.createDndNode(f.data,
"avatar").node,this._styleAvatarNode(f,h));this.manager.OFFSET_X=-Number(d.get(h,"marginLeft"))}g=c.create("span",{"class":"node-container"},a);g.appendChild(h)}));d.set(a,this.manager.groupNodeManager.getFontForAvatar());this.node=a},isNewNode:function(){return this._newNode},_styleAvatarNode:function(a,b){if(a.data.domNode){var c={};a.data.domNode.style.width&&(c.width=d.get(a.data.domNode,"width")+"px");a.data.domNode.style.height&&(c.height=d.get(a.data.domNode,"height")+"px");a.data.newAnimationNode&&
(c.width=a.data.defaultConfig.width,c.Height=a.data.defaultConfig.height);d.set(b,c)}if(!a.data.domNode||a.data.newAnimationNode)this._newNode=!0}})})},"webview/features/navigationGroups/groupBuilding/navGroupDndSource":function(){define(["dojo/_base/declare","webview/admin/pointReportDndSource"],function(r,p){return r("webview/features/navigationGroups/groupBuilding/navGroupDndSource",p,{getItem:function(m){m=this.selection[m].item;var l={},l=m.isKeywordSelectorItem?this._getKeywordSelectionItemData(m):
this._getObjectSelectionItemData(m);return{data:l,type:["navGroupPoint"]}},_getKeywordSelectionItemData:function(m){return{displayIndex:1,displayText:m.displayText,mnemonic:m.mnemonic,keyword:m.keyword,url:m.url,systemId:null,systemName:"",editable:!1,id:null,inManual:!1,inFault:!1,positioningLeft:1,positioningTop:5,renderType:1}},_getObjectSelectionItemData:function(m){return{displayIndex:1,displayText:m.pointName,mnemonic:m.pointMnemonic,systemId:m.sysId,systemName:m.sysName,editable:!1,id:null,
inManual:!1,inFault:!1,positioningLeft:1,positioningTop:5,renderType:1}}})})},"webview/admin/pointReportDndSource":function(){define(["dijit/tree/dndSource","dojo/_base/array","dojo/_base/declare"],function(r,p,m){return m("webview/admin/pointReportDndSource",r,{copyOnly:!0,_operationInProgressCode:510,checkAcceptance:function(){return!1},getItem:function(l){return{data:this.selection[l],type:["pointsReportPoint"]}},getObject:function(l){l=this.getItem(l.id);var h=l.data.item;this.removeTreeNode(l.data);
return{autoManual:null,changeMask:0,changed:!0,error:{code:this._operationInProgressCode},id:null,mne:h.pointMnemonic,name:h.pointName,deviceName:h.deviceName,displayName:"",needsUpdate:!0,priority:null,supportsTimedOverride:null,timedOverride:null,units:[],value:null,unsaved:!0,bacnet:null===/(?:\d+(?:[a|b]\d+)?)?(?:out|in|var|con|ws|as|tbl|rt|tl|ay|vgrp|ss)(?:\d+)(?::\d+)?(?= |\[|$)/i.exec(h.pointMnemonic)}},itemIsDraggable:function(l){return!l.mayHaveChildren},onDndDrop:function(){this.onDndCancel()},
setSelection:function(l){l=p.filter(l,function(h){return this.itemIsDraggable(h.item)},this);this.inherited(arguments)}})})},"dijit/tree/dndSource":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/common dojo/dom-class dojo/dom-geometry dojo/_base/lang dojo/mouse dojo/on dojo/touch dojo/topic dojo/dnd/Manager ./_dndSelector".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t){return p("dijit.tree.dndSource",t,{isSource:!0,accept:["text","treeNode"],copyOnly:!1,dragThreshold:5,betweenThreshold:0,
generateText:!0,constructor:function(b,d){d||(d={});c.mixin(this,d);var f=d.accept instanceof Array?d.accept:["text","treeNode"];this.accept=null;if(f.length){this.accept={};for(var g=0;g<f.length;++g)this.accept[f[g]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.dropPosition="";this._lastY=this._lastX=0;this.sourceState="";this.isSource&&l.add(this.node,"dojoDndSource");this.targetState="";this.accept&&l.add(this.node,"dojoDndTarget");this.topics=[a.subscribe("/dnd/source/over",
c.hitch(this,"onDndSourceOver")),a.subscribe("/dnd/start",c.hitch(this,"onDndStart")),a.subscribe("/dnd/drop",c.hitch(this,"onDndDrop")),a.subscribe("/dnd/cancel",c.hitch(this,"onDndCancel"))]},checkAcceptance:function(){return!0},copyState:function(a){return this.copyOnly||a},destroy:function(){this.inherited(arguments);for(var a;a=this.topics.pop();)a.remove();this.targetAnchor=null},_onDragMouse:function(a,c){var d=b.manager(),g=this.targetAnchor,k=this.current,l=this.dropPosition,m="Over";k&&
0<this.betweenThreshold&&(this.targetBox&&g==k||(this.targetBox=h.position(k.rowNode,!0)),a.pageY-this.targetBox.y<=this.betweenThreshold?m="Before":a.pageY-this.targetBox.y>=this.targetBox.h-this.betweenThreshold&&(m="After"));if(c||k!=g||m!=l){g&&this._removeItemClass(g.rowNode,l);k&&this._addItemClass(k.rowNode,m);if(k)if(k==this.tree.rootNode&&"Over"!=m)d.canDrop(!1);else{l=g=!1;if(d.source==this){var l="Over"===m,n;for(n in this.selection){var p=this.selection[n];if(p.item===k.item){g=!0;break}p.getParent().id!==
k.id&&(l=!1)}}d.canDrop(!g&&!l&&!this._isParentChildDrop(d.source,k.rowNode)&&this.checkItemAcceptance(k.rowNode,d.source,m.toLowerCase()))}else d.canDrop(!1);this.targetAnchor=k;this.dropPosition=m}},onMouseMove:function(a){if(!this.isDragging||"Disabled"!=this.targetState){this.inherited(arguments);var c=b.manager();if(this.isDragging)this._onDragMouse(a);else if(this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>=this.dragThreshold||Math.abs(a.pageY-this._lastY)>=this.dragThreshold)){var d=
this.getSelectedTreeNodes();if(d.length){if(1<d.length){var g=this.selection,h=0,k=[],l,n;a:for(;l=d[h++];){for(n=l.getParent();n&&n!==this.tree;n=n.getParent())if(g[n.id])continue a;k.push(l)}d=k}d=r.map(d,function(a){return a.domNode});c.startDrag(this,d,this.copyState(m.getCopyKeyState(a)));this._onDragMouse(a,!0)}}}},onMouseDown:function(a){if("touchstart"==a.type||g.isLeft(a))this.mouseDown=!0,this.mouseButton=a.button,this._lastX=a.pageX,this._lastY=a.pageY;this.inherited(arguments)},onMouseUp:function(a){this.mouseDown&&
(this.mouseDown=!1,this.inherited(arguments))},onMouseOut:function(){this.inherited(arguments);this._unmarkTargetAnchor()},checkItemAcceptance:function(){return!0},onDndSourceOver:function(a){this!=a?(this.mouseDown=!1,this._unmarkTargetAnchor()):this.isDragging&&b.manager().canDrop(!1)},onDndStart:function(a,c,d){this.isSource&&this._changeState("Source",this==a?d?"Copied":"Moved":"");c=this.checkAcceptance(a,c);this._changeState("Target",c?"":"Disabled");this==a&&b.manager().overSource(this);this.isDragging=
!0},itemCreator:function(a){return r.map(a,function(a){return{id:a.id,name:a.textContent||a.innerText||""}})},onDndDrop:function(a,b,c){if("Over"==this.containerState){var d=this.tree,f=d.model,g=this.targetAnchor,h=!1;this.isDragging=!1;var k,l,m;k=g&&g.item||d.item;"Before"==this.dropPosition||"After"==this.dropPosition?(k=g.getParent()&&g.getParent().item||d.item,l=g.getIndexInParent(),"After"==this.dropPosition?(l=g.getIndexInParent()+1,m=g.getNextSibling()&&g.getNextSibling().item):m=g.item):
(k=g&&g.item||d.item,h=!0);var n;r.forEach(b,function(d,h){var p=a.getItem(d.id);if(-1!=r.indexOf(p.type,"treeNode"))var q=p.data,t=q.item,u=q.getParent().item;a==this?("number"==typeof l&&k==u&&q.getIndexInParent()<l&&--l,f.pasteItem(t,u,k,c,l,m)):f.isItem(t)?f.pasteItem(t,u,k,c,l,m):(n||(n=this.itemCreator(b,g.rowNode,a)),f.newItem(n[h],k,l,m))},this);h&&this.tree._expandNode(g)}this.onDndCancel()},onDndCancel:function(){this._unmarkTargetAnchor();this.mouseDown=this.isDragging=!1;delete this.mouseButton;
this._changeState("Source","");this._changeState("Target","")},onOverEvent:function(){this.inherited(arguments);b.manager().overSource(this)},onOutEvent:function(){this._unmarkTargetAnchor();var a=b.manager();this.isDragging&&a.canDrop(!1);a.outSource(this);this.inherited(arguments)},_isParentChildDrop:function(a,b){if(!a.tree||a.tree!=this.tree)return!1;for(var c=a.tree.domNode,d=a.selection,g=b.parentNode;g!=c&&!d[g.id];)g=g.parentNode;return g.id&&d[g.id]},_unmarkTargetAnchor:function(){this.targetAnchor&&
(this._removeItemClass(this.targetAnchor.rowNode,this.dropPosition),this.dropPosition=this.targetBox=this.targetAnchor=null)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/EditAnimationContent":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/text!./templates/EditAnimationContent.html dojo/topic webview/crossCutting/topicEvents webview/util/util ./tabs/AnimationAttributesTab dijit/layout/TabContainer dijit/layout/ContentPane ./tabs/AnimationHelpTab ./tabs/AnimationLinkedObjectsTab ./tabs/AnimationPropertiesTab".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x){return l("webview/features/navigationGroups/dialogs/EditAnimationContent/EditAnimationContent",[p,r,m],{navigationGroupsStrings:k,rcStrings:b,webviewStrings:t,templateString:f,_override:!1,_currentTabClass:null,_hiddenAttributes:!1,_hiddenHelp:!1,_hiddenLinkedObjects:!1,_hiddenTabClass:"hidden-tabs-",_previousWidth:null,postCreate:function(){this.own(q(this._animationObjects,"changedClickDestinations",h.hitch(this,this._onChangedClickDestinations)),
q(this._animationObjects,"changedLinkedObjectsAndDestinations",h.hitch(this,this._onChangedLinkedObjectsAndDestinations)),q(this._animationObjects,"changedLinkedObjects",h.hitch(this,this._onChangedLinkedObjects)),q(this._animationObjects,"changedMapLocations",h.hitch(this,this._onChangedMapLocations)),q(this._animationProperties,"changedAnimation",h.hitch(this,this._onChangedAnimation)),q(this._animationProperties,"changedPositioning",h.hitch(this,this._onChangedPositioning)),q(this._animationProperties,
"changedProperty",h.hitch(this,this._onChangedProperty)),q(this._animationProperties,"deleteNodeClicked",h.hitch(this,this._onDeleteNode)))},_setAnimationPropertiesAttr:function(a){this._animationProperties.removeChangeListeners();this._animationProperties.set(a);this._animationProperties.enableChangeListeners()},_setAttributesDataAttr:function(a){this._destroyExistingAttributeEditors();a&&(z.isArrayNotNullOrEmpty(a.supportedAttributes)||a.error)?(this._hiddenAttributes=!1,this._attributesContent=
new x(a),n.place(this._attributesContent.domNode,this._animationAttributesTab.domNode),this._attributesChangeListener=q(this._attributesContent,"changedAttribute",h.hitch(this,this._onChangedAttribute)),this.own(this._attributesContent,this._attributesChangeListener)):this._hiddenAttributes=!0;this._toggleTabVisibility(this._animationAttributesTab,this._hiddenAttributes)},_setHelpContentAttr:function(a){a&&a.length&&0<a.length?(this._hiddenHelp=!1,this._animationHelp.set("content",a[0])):this._hiddenHelp=
!0;this._toggleTabVisibility(this._animationHelpTab,this._hiddenHelp)},_setLinkedObjectsDataAttr:function(a){a&&a.points&&0<a.points.length?(this._hiddenLinkedObjects=!1,this._animationObjects.set(a)):this._hiddenLinkedObjects=!0;this._toggleTabVisibility(this._animationObjectsTab,this._hiddenLinkedObjects)},_setInitializingAttr:function(b){this.editPaneTabs.selectChild(this._animationPropertiesTab);d.toggle(this.loadingOverlay,"hidden",!b);d.toggle(this.loadingAnimation,"hidden",!b);a.set(this.loadingOverlay,
"opacity",b?1:0)},_getPositioningDataAttr:function(){return this._animationProperties.get("positioningData")},onChangedAnimation:function(a){},onChangedAttribute:function(a){},onChangedLinkedObjectsAndDestinations:function(a,b,c){},onChangedClickDestinations:function(a){},onClose:function(){},onChangedLinkedObjects:function(a){},onChangedProperty:function(a){},onChangedPositioning:function(){},onDeleteNode:function(){},resize:function(){this.inherited(arguments);this.editPaneTabs.resize()},syncAttributes:function(a){this._attributesContent&&
this._attributesContent.syncAttributes(a)},syncObjects:function(a){this._animationProperties&&this._animationObjects.syncObjects(a)},syncProperties:function(a){this._animationProperties&&this._animationProperties.syncProperties(a)},_destroyExistingAttributeEditors:function(){this._attributesChangeListener&&this._attributesChangeListener.remove();this._attributesContent&&this._attributesContent.destroy()},_getNumberOfHiddenTabs:function(){return this._hiddenAttributes+this._hiddenHelp+this._hiddenLinkedObjects},
_onChangedAnimation:function(a){this.onChangedAnimation(a)},_onChangedAttribute:function(a){this.onChangedAttribute(a)},_onChangedLinkedObjectsAndDestinations:function(a,b,c){this.onChangedLinkedObjectsAndDestinations(a,b,c)},_onChangedClickDestinations:function(a){this.onChangedClickDestinations(a)},_onChangedMapLocations:function(a){this.onChangedProperty(a)},_onClose:function(){u.publish("closeResults");u.publish(w.closeSearchResultsPane);this.onClose()},_onDeleteNode:function(){this.onDeleteNode()},
_onChangedLinkedObjects:function(a){this.onChangedLinkedObjects(a)},_onChangedPositioning:function(){this.onChangedPositioning()},_onChangedProperty:function(a){this.onChangedProperty(a)},_resizeTabs:function(){this._currentTabClass&&d.remove(this.editPaneTabs.domNode,this._currentTabClass);var a=this._getNumberOfHiddenTabs();this._currentTabClass=this._hiddenTabClass+a;d.add(this.editPaneTabs.domNode,this._currentTabClass)},_toggleTabVisibility:function(a,b){var f=g.get(a.domNode.parentNode,"aria-labelledby"),
f=c.byId(f);d.toggle(a,"hidden",b);d.toggle(f,"hidden",b);d.toggle(f.parentElement,"hidden",b);this._resizeTabs()},destroy:function(){this._destroyExistingAttributeEditors();this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationAttributesTab":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/text!./templates/AnimationAttributesTab.html rc/_base/util webview/util/util ./AttributeEditor".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){return h("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationAttributesTab",[p,r,m],{navigationGroupsStrings:b,webviewStrings:a,templateString:t,_editorMap:null,_setAttributeValuesAttr:function(a){a||(a={});this._set("attributeValues",a)},_setErrorAttr:function(a){a?(this._errorLabel.innerHTML=a,d.add(this.domNode,"in-error")):d.remove(this.domNode,"in-error")},_setSupportedAttributesAttr:function(a){q.isArrayNotNullOrEmpty(a)&&(this.set("error",
null),this._editorMap={},l.forEach(a,c.hitch(this,function(a){a&&(a.value=a.value||"",this._addAttribute(a))})))},onChangedAttribute:function(a){},syncAttributes:function(a){q.isArrayNotNullOrEmpty(a)&&l.forEach(a,c.hitch(this,function(a){var b=this._editorMap[a.attributeName];b&&b.syncValue(a)}))},_addAttribute:function(a){a.value=this._getAttributeValue(a);var b=c.hitch(this,this._onChangedAttribute,a.attributeName,a.dataType),b=new f(this.animationName,a,b);b.editor&&(this._editorMap[a.attributeName]=
b,this.own(b));this._addAttributeToContainer(a.title,a.dataType,b.editor,b.labelPosition)},_addAttributeToContainer:function(a,b,c,d){var f=n.create("div",{className:"attribute-item "+b});c&&(c.startup(),n.place(c.domNode,f));a&&(a=k.escapeHtml(a),"first"===d&&(a+=":"),a=n.create("label",{className:c?"attribute-label":"section-title",innerHTML:a}),n.place(a,f,d),"bool"===b&&g.set(a,"for",c.id));n.place(f,this._attributeContainer)},_addDefaultSectionHeader:function(){return n.place("\x3cdiv class\x3d'section-title'\x3e"+
this.navigationGroupsStrings.animations.attributes.configuration+"\x3c/div\x3e",this._attributeContainer)},_getAttributeValue:function(a){return this.attributeValues&&"undefined"!==typeof this.attributeValues[a.attributeName]?this.attributeValues[a.attributeName]:a.value},_onChangedAttribute:function(a,b,c,d,f){this.onChangedAttribute({attributeName:a,dataType:b,value:f,originalValue:d})},destroy:function(){this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AttributeEditor":function(){define("dojo/_base/array dojo/_base/declare dojo/i18n!webview/nls/navigationGroups dojo/store/Memory dojo/store/Observable webview/features/animations/FileAttributeSelector webview/widget/ColorPicker dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/NumberSpinner dijit/form/Textarea dijit/form/TextBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return p("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AttributeEditor",[],{navigationGroupsStrings:m,constructor:function(a,b,c){this._changeListenerCallback=c;this._buildEditor(a,b);this._connectChangeListener(c)},syncValue:function(a){this.editor&&this._valueProperty&&(this._removeChangeListener(),this.editor.set(this._valueProperty,a.value),this._connectChangeListener())},_buildEditor:function(h,l){this._valueProperty=this.editor=null;this.labelPosition=
"first";var f=l.value;switch(l.dataType){case "bool":this.labelPosition="last";this._valueProperty="checked";this.editor=new d({checked:f});break;case "color":this._valueProperty="color";isNaN(f)||(f="#"+f.toString(16));this.editor=new g({baseClass:"color-picker",color:f});break;case "file":this.labelPosition="";this._valueProperty="selectedFile";this.editor=new c({fileType:this._getFileType(l),animationName:h,attributeName:this._getFileSelectorTitle(l),selectedFile:f});l.title=null;break;case "multi-line":this._valueProperty=
"value";this.editor=new b({baseClass:"rcTextArea form-input large",value:f});break;case "multi-state":this._valueProperty="value";this.editor=new n({store:this._getStoreForValues(l.values),searchAttr:"id",value:f,baseClass:"rcSelectBox form-input large"});break;case "number":this._valueProperty="value";this.editor=new a({baseClass:"form-input large",value:f});break;case "string":this._valueProperty="value";this.editor=new t({baseClass:"rcTextBox form-input large",value:f});break;default:this.labelPosition=
""}},_connectChangeListener:function(){this._removeChangeListener();this.editor&&this._valueProperty&&this._changeListenerCallback&&(this._changeListener=this.editor.watch(this._valueProperty,this._changeListenerCallback))},_getFileType:function(a){var b="all";this._isJsonFileAttribute(a)?b="json":this._isImageFileAttribute(a)&&(b="image");return b},_getFileSelectorTitle:function(a){return a.attributeName.startsWith("gSetStyles")?this.navigationGroupsStrings.animations.attributes.commonAttributeStyling:
a.title},_getStoreForValues:function(a){var b=new h(new l({data:[]}));a&&"string"===typeof a&&r.forEach(a.split(";"),function(a){b.add({id:a})});return b},_isImageFileAttribute:function(a){return a.attributeName.startsWith("gImage")||a.attributeName.startsWith("gIcon")||a.attributeName.startsWith("gImg")||a.value.endsWith(".png")},_isJsonFileAttribute:function(a){return a.attributeName.startsWith("gSetStyles")||a.title.includes("JSON")||a.value&&a.value.endsWith(".json")},_removeChangeListener:function(){this._changeListener&&
this._changeListener.remove()},destroy:function(){this.editor&&this.editor.destroy();this._removeChangeListener()}})})},"webview/features/animations/FileAttributeSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/FileAttributeSelector.html webview/xhrEnhanced webview/crossCutting/forms/fileUploader/FileUploader".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return h("webview/features/animations/FileAttributeSelector",[p,r,m],{acceptedFiles:".*",attributeName:"",animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation",existingLabel:n.animations.attributes.existingFile,navigationGroupsStrings:n,selectedFile:"",templateString:k,uploadLabel:n.animations.attributes.uploadFile,webviewStrings:d,postCreate:function(){this.inherited(arguments);this.own(a(this._fileUploader,"uploadComplete",c.hitch(this,this._onUploadComplete)),
a(this._existingFileSelector,"change",c.hitch(this,this._onFileSelected)),a(this._existingFileSelector.textbox,"click",c.hitch(this,this._onClickExistingSelector)));this._existingFileStore=new t(new b({idProperty:"name"}));this._existingFileSelector.set("store",this._existingFileStore);this.selectedFile?this.selectExistingFile(this.selectedFile):this.initialize()},_setAcceptedFilesAttr:function(a){this._fileUploader.set("acceptedFiles",a);this._set("acceptedFiles",a)},_setAnimationNameAttr:function(a){this._set("animationName",
a);this._fileUploader.set("uploadPath",this.animationFilesPath+"/"+a)},_setSelectedFileAttr:function(a){this._set("selectedFile",a);this._existingFileStore&&!this._existingFileSelector.get("disabled")&&this._selectExistingFile(a)},_setFileTypeAttr:function(a){"json"===a?(this.set("acceptedFiles",".json"),this._uploadRadioButtonLabel.innerHTML=this.navigationGroupsStrings.animations.attributes.uploadJsonConfig,this._existingRadioButtonLabel.innerHTML=this.navigationGroupsStrings.animations.attributes.existingJSON):
("image"===a?this.set("acceptedFiles","image/*"):this.set("acceptedFiles",".*"),this._uploadRadioButtonLabel.innerHTML=this.navigationGroupsStrings.animations.attributes.uploadFile,this._existingRadioButtonLabel.innerHTML=this.navigationGroupsStrings.animations.attributes.existingFile);this._set("fileType",a)},initialize:function(){!0!==this.initialized&&(this._loadExistingFiles(),this.initialized=!0)},onFileSelected:function(a){this.set("selectedFile",a)},selectExistingFile:function(a){this._fileUploader.set("disabled",
!0);this._uploadRadioButton.set("checked",!1);this._existingRadioButton.set("checked",!0);this._loadExistingFiles().then(c.hitch(this,this._selectExistingFile,a))},_clearExistingFileSelector:function(){this._existingFileStore.setData([]);this._existingFileSelector.set("value",null)},_existingSelected:function(){this._fileUploader.set("disabled",!0);this._onFileSelected(this._existingFileSelector.get("value"));return this._loadExistingFiles().then(c.hitch(this,function(){this._existingFileSelector.set("disabled",
!1)}))},_loadExistingFiles:function(){this.loadExistingDeferred&&this.loadExistingDeferred.isCanceled()&&this.loadExistingDeferred.cancel();this.loadExistingDeferred=q.get(this.animationFilesPath+"Files/"+this.animationName+"/"+this.fileType,{handleAs:"json",preventCache:!0});this.own(this.loadExistingDeferred);this.loadExistingDeferred.then(c.hitch(this,this._onLoadExistingFiles),c.hitch(this,function(a){this._onLoadExistingFilesFailure();console.error(a);this.loadExistingDeferred=null}));return this.loadExistingDeferred},
_onFileSelected:function(a){this.set("selectedFile",a);this.onFileSelected(a)},_onClickExistingSelector:function(){var a=this._existingFileSelector.get("value"),b=0;a&&(b=1+this._existingFileStore.index[a]);(a=this._existingFileSelector.store.data[b])||(a=this._existingFileSelector.store.data[0]);this._existingFileSelector.set("value",a.name)},_onLoadExistingFiles:function(a){a&&0<a.length?(this._existingFileStore.setData([]),l.forEach(a,c.hitch(this,function(a){this._existingFileStore.put({name:a})})),
this._setExistingFileRadioButtonDisabled(!1)):this._onLoadExistingFilesFailure();this.loadExistingDeferred=null},_onLoadExistingFilesFailure:function(){this._uploadRadioButton.set("checked",!0);this._uploadSelected();this._setExistingFileRadioButtonDisabled(!0);this._clearExistingFileSelector()},_onUploadComplete:function(a){this._loadExistingFiles().then(c.hitch(this,function(){this._existingFileSelector.set("value",a)}))},_selectExistingFile:function(a){this._existingFileSelector.set("disabled",
!1);this._existingFileSelector.set("value",a)},_setExistingFileRadioButtonDisabled:function(a){this._existingRadioButton.set("disabled",a);g.toggle(this._existingRadioButtonLabel,"disabled",a)},_uploadSelected:function(){this._existingFileSelector.set("disabled",!0);this._fileUploader.set("disabled",!1);var a=this._fileUploader.get("value");a&&this._onFileSelected(a)}})})},"webview/crossCutting/forms/fileUploader/FileUploader":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!./templates/FileUploader.html webview/crossCutting/errors/_OnErrorMixin webview/xhrEnhanced".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return h("webview/crossCutting/fileUploader/fileUploader",[p,r,m,k],{_MAX_FILE_UPLOAD_SIZE_IN_MB:25,acceptedFiles:".*",disableErrorToasts:!0,disabled:!1,displayFileExtension:!0,invalidFile:n.invalidFile,errorStrings:a,templateString:t,postCreate:function(){this.inherited(arguments);g.set(this._fileInput,"accept",this.acceptedFiles);this.own(b(this._fileInput,"change",c.hitch(this,this._onFileSelected)))},_setAcceptedFilesAttr:function(a){this._acceptedFileExtensions=
a.split("|");this._set("acceptedFiles",a);g.set(this._fileInput,"accept",this.acceptedFiles)},_setDisabledAttr:function(a){this._browseButton.set("disabled",a);d.toggle(this.domNode,"disabled",a);this._set("disabled",a)},_getValueAttr:function(){return this._selectedFile.innerText},_setValueAttr:function(a){this._selectedFile.innerText=a},clear:function(){this._fileInput.value=null;this._toggleInError();this.onUploadComplete(null)},getErrorMessage:function(a){return this.invalidFile},onUploadComplete:function(a){},
_onClickBrowse:function(){this.disabled||this._fileInput.click()},_onError:function(a){this.inherited(arguments);this._toggleInError(a);this.onUploadComplete(null)},_onFileSelected:function(){var a=this._fileInput.files[0];a&&this._validateFile(a)&&(this._uploadedFile=a.name,this._uploadFile(a))},_onUploadComplete:function(a){a.fileName?(this._toggleInError(!1),this.displayFileExtension&&(a.fileName=this._uploadedFile),this._selectedFile.innerText=a.fileName,this.onUploadComplete(a.fileName)):this._onError(a)},
_toggleInError:function(a){var b=!1;a&&(b=!0,this._errorMessage.innerText=this.getErrorMessage(a));d.toggle(this.domNode,"in-error",b);this._selectedFile.innerText=null},_uploadFile:function(a){var b=new FormData;b.append(a.name,a);q.post(this.uploadPath,{handleAs:"json",data:b}).then(c.hitch(this,this._onUploadComplete),c.hitch(this,this._onError))},_validateFile:function(a){var b=!0;a=a.name;var c=a.lastIndexOf("\\")+1;a=a.substring(c);this._validateFileExtension(a)||(b=!1,this._toggleInError(!0));
return b},_validateFileExtension:function(a){var b=a.lastIndexOf("."),d=a.substring(b);return l.some(this._acceptedFileExtensions,c.hitch(this,function(a){return".*"===a||a===d||a.startsWith("image")}))}})})},"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(r,p,m,l,h){return p("dijit.layout.TabContainer",m,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(c){var g=
this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?r.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":g,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},
c)},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?l:h)}})})},"dijit/layout/_TabContainerBase":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style ./StackContainer ./utils ../_TemplatedMixin dojo/text!./templates/TabContainer.html".split(" "),function(r,p,m,l,h,c,g,d){return r("dijit.layout._TabContainerBase",[h,g],{tabPosition:"top",baseClass:"dijitTabContainer",
tabStrip:!1,nested:!1,templateString:d,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&l.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||p.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(p.add(this.domNode,"dijitTabContainerNested"),p.add(this.tablist.containerNode,
"dijitTabContainerTabListNested"),p.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),p.add(this.containerNode,"dijitTabPaneWrapperNested")):p.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(c){p.add(c.domNode,"dijitTabPane");this.inherited(arguments)},removeChild:function(c){p.remove(c.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&
"undefined"!=typeof this._contentBox.l){var d=this.selectedChildWidget;if(this.doLayout){var a=this.tabPosition.replace(/-h/,"");this.tablist.region=a;a=[this.tablist,{domNode:this.tablistSpacer,region:a},{domNode:this.containerNode,region:"center"}];c.layoutChildren(this.domNode,this._contentBox,a);this._containerContentBox=c.marginBox2contentBox(this.containerNode,a[2]);d&&d.resize&&d.resize(this._containerContentBox)}else{if(this.tablist.resize){a=this.tablist.domNode.style;a.width="0";var b=m.getContentBox(this.domNode).w;
a.width="";this.tablist.resize({w:b})}d&&d.resize&&d.resize()}}},destroy:function(c){this.tablist&&this.tablist.destroy(c);this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){c("dijit-legacy-requires")&&n(0,function(){require(["dijit/layout/StackController"])});
m=m("dijit.layout.StackContainer",q,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",g.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var b=this.getChildren();r.forEach(b,this._setupChild,this);this.persist?this.selectedChildWidget=t.byId(p(this.id+"_selectedChild")):r.some(b,function(a){a.selected&&
(this.selectedChildWidget=a);return a.selected},this);var c=this.selectedChildWidget;!c&&b[0]&&(c=this.selectedChildWidget=b[0],c.selected=!0);a.publish(this.id+"-startup",{children:b,selected:c,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,c=h.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",
a.domNode,"replace"),d=a["aria-label"]||a.title||a.label;d&&c.setAttribute("aria-label",d);h.place(b,c);a._wrapper=c;this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.removeAttribute("title")},addChild:function(b,c){this.inherited(arguments);this._started&&(a.publish(this.id+"-addChild",b,c),this.layout(),this.selectedChildWidget||this.selectChild(b))},removeChild:function(b){var c=r.indexOf(this.getChildren(),b);this.inherited(arguments);h.destroy(b._wrapper);
delete b._wrapper;this._started&&a.publish(this.id+"-removeChild",b);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===b&&(this.selectedChildWidget=void 0,this._started)){var d=this.getChildren();d.length&&this.selectChild(d[Math.max(c-1,0)])}this._started&&this.layout()}},selectChild:function(c,d){var f;c=t.byId(c);this.selectedChildWidget!=c&&(f=this._transition(c,this.selectedChildWidget,d),this._set("selectedChildWidget",c),a.publish(this.id+"-selectChild",c,this._focused),this.persist&&
p(this.id+"_selectedChild",this.selectedChildWidget.id));return b(f||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=r.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),
!0)},_onKeyDown:function(b){a.publish(this.id+"-containerKeyDown",{e:b,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&l.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&
l.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){if(!a.onClose||a.onClose(this,a))this.removeChild(a),a.destroyRecursive()},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;r.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});m.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};g.extend(k,
m.ChildWidgetProperties);return m})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationHelpTab":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/i18n!webview/nls/all dojo/text!./templates/AnimationHelpTab.html".split(" "),function(r,p,m,l,h,c){return l("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationHelpTab",[p,r,m],{webviewStrings:h,templateString:c,_setContentAttr:function(c){this.versionContent.textContent=
this.webviewStrings.version+": "+c.version;this.informationContent.textContent=c.content}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationLinkedObjectsTab":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/extensions/ColumnResizer dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/Button dijit/form/TextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/on dojo/string dojo/topic dojo/store/Memory dojo/store/Observable dojo/dom-construct dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/text!./templates/AnimationLinkedObjectsTab.html dojox/html/entities webview/crossCutting/topicEvents webview/util/util ./LinkedObjectDndSource webview/widget/AddButton webview/widget/WarningDialog webview/widget/WarningDialogEnums".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I){return t("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationLinkedObjectsTab",[c,h,g],{navigationGroupsStrings:C,webviewStrings:A,templateString:E,site:null,fixedPointCount:!0,columns:0,purposeMask:"",_columnStyleHidden:"display: none;",_columnStyleVisible:"display: table-cell;",_confirmDialog:null,_grid:null,_mapLocationsAttribute:"animationLocationsAttribute",constructor:function(){this._gridStore=
new y(new x({idProperty:"associationIndex"}));this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._createGrid()},_setErrorAttr:function(a){a?(this._errorLabel.innerHTML=a,f.add(this.domNode,"in-error")):f.remove(this.domNode,"in-error")},_setClickDestinationsAttr:function(a){F.isArrayNotNullOrEmpty(a)&&b.forEach(a,k.hitch(this,function(a){if(a){var b=this._getRow(Math.floor(a.associationIndex/2),!1);b&&(b.destination=a,this._gridStore.put(b))}}))},_setLinkedObjectsAttr:function(a){if(F.isArrayNotNullOrEmpty(a)){this._revertGrid();
var c=0;b.forEach(a,k.hitch(this,function(a){if(a){var b=this._getRow(Math.floor((a.associationIndex+1)/2),!0);b&&(0<this.columns&&(b.purpose=this._getPurpose(c,this.columns)),b.object=a,b.displayName=a.name,this._gridStore.put(b))}c++}));this._addEmptyRowForAdditionalObjects()}},_setMapLocationsAttr:function(a){F.isArrayNotNullOrEmpty(a)&&(this._revertGrid(),b.forEach(a,k.hitch(this,function(a,b){var c=this._getRow(b+1,!1);if(c){var d=a.split(",");c.latitude=d[0]||"";c.longitude=d[1]||"";this._gridStore.put(c)}})))},
_setPointsAttr:function(a){this.set("error",null);this._gridStore.setData([]);this._revertGrid();var c=this.hasRowsWithLocations=this.hasRowsWithDisplayName=this.hasRowsWithClickDestination=!1,d=!1,f=!1;b.forEach(a,k.hitch(this,function(a,b){c=!0===a.link;d|=!0===a.displayname;f|=!0===a.location;this._gridStore.add({associationIndex:b+1,destination:null,displayName:"",hasClickDestination:c,hasDisplayName:d,hasLocations:f,latitude:"",longitude:"",object:null,purpose:a.purpose,type:a.type});this.hasRowsWithClickDestination|=
c;this.hasRowsWithDisplayName|=d;this.hasRowsWithLocations|=f}));this._hideUnusedColumns();this._set("points",a)},syncObjects:function(a){var b={linkedObjects:this._getLinkedObjects(),clickDestinations:this._getClickDestinations(),mapLocations:this._getMapLocations().split(";")};a=k.mixin(b,a);this.set("points",this.points);this.set(a)},onChangedLinkedObjectsAndDestinations:function(a,b,c){},onChangedClickDestinations:function(a){},onChangedLinkedObjects:function(a){},onChangedMapLocations:function(a){},
resize:function(){this.inherited(arguments);this._grid.resize()},_canEditDisplayName:function(a){return a.hasDisplayName&&a.object},_canEditLocation:function(a){return a.hasLocations&&a.object},_createGrid:function(){null===this._grid&&(this._grid=new (t([r,m,l]))({columns:this._getColumnStructure(),store:this._gridStore,isPagingGrid:!1},this.gridNode),this.own(this._grid),this._grid.startup(),this._connectGrid())},_connectGrid:function(){this.own(u(this._grid,"dgrid-refresh-complete",k.hitch(this._grid,
"resize")),u(this._grid,".dgrid-column-displayNameCol:dgrid-datachange",k.hitch(this,this._onChangedDisplayName)),u(this._grid,".dgrid-column-latitudeCol:dgrid-datachange",k.hitch(this,this._onChangedLocation)),u(this._grid,".dgrid-column-longitudeCol:dgrid-datachange",k.hitch(this,this._onChangedLocation)))},_formatDisplayNameCell:function(a,b){return this._canEditDisplayName(b)?a||"":""},_formatLatitudeCell:function(a,b){return this._canEditLocation(b)?a||"":""},_formatLongitudeCell:function(a,
b){return this._canEditLocation(b)?a||"":""},_getClickDestinations:function(){var a=b.filter(this._gridStore.data,function(a){return null!==a.destination});return b.map(a,function(a){return k.clone(a.destination)})},_getColumnStructure:function(){return[{id:"rowCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.row,field:"associationIndex",sortable:!1,hidden:!1},{id:"purposeCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.purpose,field:"purpose",sortable:!1,
hidden:!1},{id:"typeCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.type,field:"type",sortable:!1,hidden:!1},p({id:"latitudeCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.latitude,field:"latitude",canEdit:k.hitch(this,this._canEditLocation),editOn:"click",editor:n,editorArgs:{baseClass:"rcTextBox",maxLength:256},hidden:!0,sortable:!1,formatter:k.hitch(this,this._formatLatitudeCell)}),p({id:"longitudeCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.longitude,
field:"longitude",canEdit:k.hitch(this,this._canEditLocation),editOn:"click",editor:n,editorArgs:{baseClass:"rcTextBox",maxLength:256},hidden:!0,sortable:!1,formatter:k.hitch(this,this._formatLongitudeCell)}),{id:"objectCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.object,field:"object",sortable:!1,hidden:!1,renderCell:k.hitch(this,this._renderObjectCell)},p({id:"displayNameCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.displayName,field:"displayName",
canEdit:k.hitch(this,this._canEditDisplayName),editOn:"click",editor:n,editorArgs:{baseClass:"rcTextBox",maxLength:256},hidden:!1,sortable:!1,formatter:k.hitch(this,this._formatDisplayNameCell)}),{id:"destinationCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.destination,field:"destination",sortable:!1,hidden:!1,renderCell:k.hitch(this,this._renderDestinationCell)}]},_getLinkedObjects:function(){var a=b.filter(this._gridStore.data,function(a){return null!==a.object});return b.map(a,
function(a){return k.clone(a.object)})},_getMapLocations:function(){var a=[];b.forEach(this._gridStore.data,function(b){b.hasLocations&&(a[b.associationIndex-1]=[b.latitude||"",b.longitude||""].join())});return a.join(";")},_createRow:function(a){var b=this.navigationGroupsStrings.animations.editPane.objectConfig.displayValues,c=this.navigationGroupsStrings.animations.editPane.objectConfig.displayType;0<this.points.length&&(b=this.points[this.points.length-1].purpose,c=this.points[this.points.length-
1].type);return{associationIndex:a,hasClickDestination:this.hasRowsWithClickDestination,hasDisplayName:this.hasRowsWithDisplayName,hasLocations:this.hasRowsWithLocations,latitude:"",longitude:"",purpose:b,type:c,object:null,destination:null}},_getRow:function(a,b){var c=this._gridStore.get(a);c||this.fixedPointCount||1!=b||(c=this._createRow(a));return c},_hideUnusedColumns:function(){var a=this.hasRowsWithClickDestination?this._columnStyleVisible:this._columnStyleHidden;this._grid.styleColumn("destinationCol",
a);a=this.hasRowsWithDisplayName?this._columnStyleVisible:this._columnStyleHidden;this._grid.styleColumn("displayNameCol",a);a=this.hasRowsWithLocations?this._columnStyleVisible:this._columnStyleHidden;this._grid.styleColumn("latitudeCol",a);this._grid.styleColumn("longitudeCol",a)},_insertObjects:function(b,c,d){var f=[],g="object"===d;b.forEach(k.hitch(this,function(b,h){var l=c+h,m=this._getRow(l,g);if(m){var n=a.byNode(b),l={associationIndex:"object"===d?2*l-1:2*l,mnemonic:n.item.pointMnemonic,
systemId:n.item.sysId};!g&&n.item.isKeywordSelectorItem&&(l.name=n.item.displayText,l.keyword=n.item.keyword,l.mnemonic=n.item.mnemonic);if(!g||l.mnemonic||l.systemId)m=k.clone(m),m[d]=l,g&&m.hasDisplayName&&(l.name=n.item.pointName,m.displayName=n.item.pointName),f.push(m)}}));0<f.length&&(g?(this._onChangedLinkedObjects(f),this._addEmptyRowForAdditionalObjects()):"destination"===d&&this._onChangedClickDestinations(f))},_onChangedClickDestinations:function(a){destinationData={original:this._getClickDestinations()};
b.forEach(a,k.hitch(this,function(a){this._gridStore.put(a)}));this._revertGrid();destinationData.updated=this._getClickDestinations();this.onChangedClickDestinations(destinationData)},_onChangedDisplayName:function(a){linkedObjectData={original:this._getLinkedObjects()};var b=this._gridStore.get(a.rowId);b.displayName=B.encode(a.value);b.object.name=a.value;this._gridStore.put(b);linkedObjectData.updated=this._getLinkedObjects();this.onChangedLinkedObjects(linkedObjectData);this._revertGrid()},_onChangedLinkedObjects:function(a){linkedObjectData=
{original:this._getLinkedObjects()};b.forEach(a,k.hitch(this,function(a){this._gridStore.put(a)}));this._grid.refresh({keepScrollPosition:!0});linkedObjectData.updated=this._getLinkedObjects();this.onChangedLinkedObjects(linkedObjectData)},_onChangedLocation:function(a){locationData={property:"mapLocations",originalValue:this._getMapLocations()};var b=this._gridStore.get(a.rowId);b[a.cell.column.field]=a.value;this._gridStore.put(b);locationData.value=this._getMapLocations();this.onChangedMapLocations(locationData);
this._revertGrid()},_onDeleteClickDestinations:function(a){var b={original:this._getClickDestinations()};a.destination=null;this._gridStore.put(a);b.updated=this._getClickDestinations();this.onChangedClickDestinations(b)},_onDeleteLinkedObject:function(a){var b={original:this._getLinkedObjects()},c={original:this._getClickDestinations()},d={property:"mapLocations",originalValue:this._getMapLocations()};a.destination=null;a.object=null;!this.fixedPointCount&&0<this._gridStore.data.length?(this._gridStore.remove(a.associationIndex),
this._grid.refresh({keepScrollPosition:!0}),this._reindexGrid()):this._gridStore.put(a);b.updated=this._getLinkedObjects();c.updated=this._getClickDestinations();d.value=this._getMapLocations();this.onChangedLinkedObjectsAndDestinations(b,c,d)},_onDeletePrompt:function(a){this._showConfirmDialog(a,"object"===a.columnKey).then(k.hitch(this,function(a){"object"===a.columnKey?this._onDeleteLinkedObject(a):this._onDeleteClickDestinations(a)}))},_openKeywordsSelectionPane:function(){z.publish(D.addClickDestinationKeyword,
this.site)},_openObjSelectionPane:function(){z.publish(D.addAssociatedObject,this.site)},_renderCellHelper:function(a,b,c,g){var h=v.create("div"),l=v.create("span",{"class":"mnemonic-container"},h),m=!1;b?(l.innerText=b.mnemonic||b.keyword||"",0===l.innerText.length&&(m=!0)):m=!0;if(!0===m){var n;"object"===g?n=new d({showLabel:!1,iconClass:"rcIcon add-icon",baseClass:"add-object-button",onClick:k.hitch(this,"_openObjSelectionPane")}):"destination"===g&&(n=new J({supportsAnimations:!1}),f.add(n.domNode,
"addDestinationKeyword"),this.own(u(n,"addObject",k.hitch(this,"_openObjSelectionPane")),u(n,"addKeyword",k.hitch(this,"_openKeywordsSelectionPane"))));n.startup();v.place(n.domNode,h)}else b=k.clone(a),b.columnKey=g,b=new d({showLabel:!1,iconClass:"rcIcon remove-icon",baseClass:"remove-object-button",onClick:k.hitch(this,this._onDeletePrompt,b)}),b.startup(),v.place(b.domNode,h);c=new H(c);this.own(u(c,"Drop",k.hitch(this,function(b,c,d){this._insertObjects(c,a.associationIndex,g)})));return h},
_renderDestinationCell:function(a,b,c){return a.hasClickDestination&&a.object?this._renderCellHelper(a,b,c,"destination"):null},_renderObjectCell:function(a,b,c){return this._renderCellHelper(a,b,c,"object")},_revertGrid:function(){this._grid.dirty={};this._grid.refresh({keepScrollPosition:!0})},_showConfirmDialog:function(a,b){var c;c=b&&a.object?a.object.name?a.object.name:a.object.mnemonic:a.destination&&a.destination.mnemonic?a.destination.mnemonic:"point";c=w.substitute(A.confirmDeleteX,[c||
"point"]);var d=new q;null===this._confirmDialog?this._confirmDialog=new G({title:A.discard,text:c,type:I.types.binaryConfirm}):this._confirmDialog.set("text",c);var f=this._confirmDialog.on("close",k.hitch(this,function(b){switch(b){case I.returnValues.oneOrYes:d.resolve(a);break;case I.returnValues.allOrNo:d.reject(a);break;default:console.error(this.declaredClass+" - _showConfirmDialog(): Unknown choice",b)}f.remove()}));this.own(f);this._confirmDialog.open();return d.promise},_addEmptyRowForAdditionalObjects:function(){if(!this.fixedPointCount&&
!1===b.some(this._gridStore.data,function(a){if(null===a.destination&&null===a.object)return emptyRowIndex=a.associationIndex,!0})){var a=1;0<this._gridStore.data.length&&(a=this._gridStore.data[this._gridStore.data.length-1].associationIndex+1);a=this._createRow(a);a.purpose=this._getPurpose(this._gridStore.data.length,this.columns);this._gridStore.put(a)}},_reindexGrid:function(){var a=[],c=0;b.forEach(this._gridStore.data,k.hitch(this,function(b,d){var f=k.clone(b);0<this.columns&&(f.purpose=this._getPurpose(d,
this.columns));c++;f.object&&(f.object.associationIndex=c);c++;f.destination&&(f.destination.associationIndex=c);f.associationIndex=d+1;a.push(f)}));this._gridStore.setData(a);this._revertGrid()},_getPurpose:function(a,b){if(""===this.purposeMask)return"";var c=this.purposeMask.replace("1","#r#").replace("1","#c#"),d=a%b+1;return c.replace("#r#",Math.floor(a/b)+1).replace("#c#",d)}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/LinkedObjectDndSource":function(){define(["dojo/dnd/Source",
"dojo/_base/declare"],function(r,p){return p("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/LinkedObjectDndSource",r,{isSource:!1,accept:["navGroupPoint"],onDrop:function(m,l,h){}})})},"webview/widget/AddButton":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/declare dojo/i18n!webview/nls/navigationGroups dojo/text!webview/widget/templates/AddButton.html dojo/on dojo/dom-class dojo/Evented dijit/form/Button".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return h("webview/widget/AddButton",[p,r,m,a],{templateString:g,navGroupStrings:c,supportsAnimations:!0,postCreate:function(){this.inherited(arguments);this.supportsAnimations||n.add(this.AnimationMenuItem,"hidden");this._addListeners()},_addListeners:function(){this.own(d(this.addButton.toolbarButtonIcon,"click",l.hitch(this,function(a){this.openMenu();a.stopPropagation();d.once(window,"click",l.hitch(this,this.closeMenu))}),d(this.ObjectMenuItem,"click",l.hitch(this,
this.emit,"addObject")),d(this.KeywordMenuItem,"click",l.hitch(this,this.emit,"addKeyword"))));this.supportsAnimations&&this.own(d(this.AnimationMenuItem,"click",l.hitch(this,this.emit,"addAnimation")))},closeMenu:function(){n.add(this.addMenu,"hidden")},openMenu:function(){n.remove(this.addMenu,"hidden")}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationPropertiesTab":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/text!./templates/AnimationPropertiesTab.html ../../_NodePositioningViewMixin webview/features/animations/AnimationSelector".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return h("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationPropertiesTab",[p,r,m,t],{_currentHeight:null,_currentWidth:null,navigationGroupsStrings:n,templateString:b,webviewStrings:d,postCreate:function(){this.inherited(arguments);this._changeListeners=[];this.own(a(this._animationSelector,"animationSelected",c.hitch(this,this._onChangedAnimation)));this._animationSelector.initialize();this.afterInitialize()},_setAnimationNameAttr:function(a){this._setAnimationNameLabel(a);
this._animationSelector.selectExistingAnimation(a)},_setAspectLockedAttr:function(a){g.toggle(this.lockIcon,"locked",a);this._set("aspectLocked",a);this._aspectLockedListener||(this._aspectLockedListener=this.watch("aspectLocked",c.hitch(this,function(a,b,c){this.onChangedProperty({property:a,value:c,originalValue:b})})),this._changeListeners.push(this._aspectLockedListener))},onChangedAnimation:function(a){},onDeleteNodeClicked:function(){},onChangedProperty:function(a){},onChangedPositioning:function(a){},
enableChangeListeners:function(){this.removeChangeListeners();this._changeListeners=[this.heightInput.watch("value",c.hitch(this,function(a,b,c){this.heightInput.isValid()&&this._onHeightChanged(c)})),this.widthInput.watch("value",c.hitch(this,function(a,b,c){this.widthInput.isValid()&&this._onWidthChanged(c)})),this.positionX.watch("value",c.hitch(this,function(a,b,c){if(this.positionX.isValid())this.onChangedPositioning()})),this.positionY.watch("value",c.hitch(this,function(a,b,c){if(this.positionY.isValid())this.onChangedPositioning()})),
this.watch("aspectLocked",c.hitch(this,function(a,b,c){this.onChangedProperty({property:a,value:c,originalValue:b})}))]},syncProperties:function(a){if(a){this.removeChangeListeners();var b={aspectLocked:this.aspectLocked};b.positioningData=this.get("positioningData");b=c.mixin(b,a);this.set(b);this.enableChangeListeners()}},_onChangedAnimation:function(a){a&&(a.originalName=this._getAnimationNameLabel()||"",a.originalName.toLowerCase()!==a.name.toLowerCase()&&(this._setAnimationNameLabel(a.name),
this.onChangedAnimation(a)))},_onHeightChanged:function(a){this.aspectLocked?this._currentHeight!==a&&(this._currentWidth=a=Math.floor(a*this.aspectRatio),this.widthInput.set("value",a),this.onChangedPositioning()):(this.set("aspectRatio",this.widthInput.get("value")/a),this.onChangedPositioning())},_onWidthChanged:function(a){this.aspectLocked?this._currentWidth!==a&&(this._currentHeight=a=Math.floor(a/this.aspectRatio),this.heightInput.set("value",a),this.onChangedPositioning()):(this.set("aspectRatio",
a/this.heightInput.get("value")),this.onChangedPositioning())},_getAnimationNameLabel:function(){return this._animationName.innerHTML},_setAnimationNameLabel:function(a){this._animationName.innerHTML=a},removeChangeListeners:function(){this._changeListeners&&(l.forEach(this._changeListeners,function(a){a.remove()}),this._changeListeners=[]);this._aspectLockedListener&&(this._aspectLockedListener=null)},_onToggleAspectLock:function(){this.set("aspectLocked",!this.aspectLocked)},destroy:function(){this.removeChangeListeners();
this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/_NodePositioningViewMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(r,p){return r("webview/features/navigationGroups/dialogs/_NodePositioningViewMixin",[],{_getPositioningDataAttr:function(){return{x:this.positionX.get("value"),y:this.positionY.get("value"),w:this.widthInput.get("value"),h:this.heightInput.get("value")}},_setPositioningDataAttr:function(m){this.positionX.set("value",m.x);this.positionY.set("value",
m.y);this.widthInput.set("value",m.w);this.heightInput.set("value",m.h)},afterInitialize:function(){this.positionX.validator=p.hitch(this,this._xPositionValidator);this.positionY.validator=p.hitch(this,this._yPositionValidator);this.widthInput.validator=p.hitch(this,this._widthValidator);this.heightInput.validator=p.hitch(this,this._heightValidator)},_heightValidator:function(m){var l=!1;m=Number(m);var h=Number(this.positionY.get("value"))+m;!isNaN(h)&&this.backgroundDimensions&&(l=0<m&&h<=this.backgroundDimensions.height);
return l},_widthValidator:function(m){var l=!1;m=Number(m);var h=Number(this.positionX.get("value"))+m;!isNaN(h)&&this.backgroundDimensions&&(l=0<m&&h<=this.backgroundDimensions.width);return l},_xPositionValidator:function(m){var l=!1;m=Number(m);!isNaN(m)&&this.backgroundDimensions&&(l=0<=m&&m<=this.backgroundDimensions.width);return l},_yPositionValidator:function(m){var l=!1;m=Number(m);!isNaN(m)&&this.backgroundDimensions&&(l=0<=m&&m<=this.backgroundDimensions.height);return l}})})},"webview/features/animations/AnimationSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/AnimationSelector.html webview/xhrEnhanced webview/crossCutting/forms/fileUploader/FileUploader".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return h("webview/features/animations/AnimationSelector",[p,r,m],{acceptedFiles:".rca",animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation/",navigationGroupsStrings:n,templateString:k,thumbnailPath:"/_thumbnail.png",webviewStrings:d,postCreate:function(){this.inherited(arguments);this.own(a(this._animationUploader,"uploadComplete",c.hitch(this,this._onUploadComplete)),a(this._existingAnimationSelector,"change",c.hitch(this,this._onExistingSelected)),a(this._existingAnimationSelector.textbox,
"click",c.hitch(this,this._onClickExistingSelector)));this._existingAnimationStore=new t(new b({idProperty:"value"}));this._existingAnimationSelector.set("store",this._existingAnimationStore);this._animationUploader.getErrorMessage=c.hitch(this,this.getErrorMessage)},getErrorMessage:function(a){return a&&"Invalid file name."===a.errorMessage?this.navigationGroupsStrings.animations.invalidRcaName:this.navigationGroupsStrings.animations.invalidRca},initialize:function(){!0!==this.initialized&&(this._animationUploader.clear(),
this._loadExistingAnimations(),this.initialized=!0)},onAnimationSelected:function(a){},selectExistingAnimation:function(a){var b=!this._isUploadedAnimation(a);b&&this._animationUploader.set("value",null);this._existingRadioButton.set("checked",b);this._loadExistingAnimations().then(c.hitch(this,function(){this._existingAnimationSelector.set("value",a.toLowerCase());this._existingAnimationSelector.set("disabled",!b)}))},_clearExistingAnimationSelector:function(){this._existingAnimationStore.setData([]);
this._existingAnimationSelector.set("value",null)},_existingSelected:function(){this._animationUploader.set("value",null);this._animationUploader.set("disabled",!0);this._onAnimationSelected(this._existingAnimationSelector.get("value"));this._loadExistingAnimations().then(c.hitch(this,function(){this._existingAnimationSelector.set("disabled",!1)}))},_isUploadedAnimation:function(a){var b=this._animationUploader.get("value");return b&&b.toLowerCase()===a.toLowerCase()},_loadExistingAnimations:function(){this.loadExistingDeferred&&
this.loadExistingDeferred.isCanceled()&&this.loadExistingDeferred.cancel();this.loadExistingDeferred=q.get(this.animationFilesPath,{handleAs:"json",preventCache:!0});this.own(this.loadExistingDeferred);this.loadExistingDeferred.then(c.hitch(this,this._onLoadExistingAnimations),c.hitch(this,function(a){this._onLoadExistingAnimationFailure();console.error(a);this.loadExistingDeferred=null}));return this.loadExistingDeferred},_onAnimationSelected:function(a){var b=null;a&&(b={name:a,previewPath:this.animationFilesPath+
a+this.thumbnailPath});this.onAnimationSelected(b)},_onClickExistingSelector:function(){var a=this._existingAnimationSelector.get("value"),b=0;a&&(b=1+this._existingAnimationStore.index[a]);(a=this._existingAnimationSelector.store.data[b])||(a=this._existingAnimationSelector.store.data[0]);this._existingAnimationSelector.set("value",a.value)},_onExistingSelected:function(a){a=this._existingAnimationStore.query({value:a})[0].name;this._onAnimationSelected(a)},_onLoadExistingAnimations:function(a){a&&
0<a.length?(this._existingAnimationStore.setData([]),l.forEach(a,c.hitch(this,function(a){this._existingAnimationStore.put({name:a,value:a.toLowerCase()})})),this._setExistingAnimationRadioButtonDisabled(!1)):this._onLoadExistingAnimationFailure();this.loadExistingDeferred=null},_onLoadExistingAnimationFailure:function(){this._uploadRadioButton.set("checked",!0);this._uploadSelected();this._setExistingAnimationRadioButtonDisabled(!0);this._clearExistingAnimationSelector()},_onUploadComplete:function(a){this._loadExistingAnimations().then(c.hitch(this,
function(){this._existingAnimationSelector.set("value",(a||"").toLowerCase())}))},_setExistingAnimationRadioButtonDisabled:function(a){this._existingRadioButton.set("disabled",a);g.toggle(this._existingRadioButtonLabel,"disabled",a)},_uploadSelected:function(){this._existingAnimationSelector.set("disabled",!0);this._animationUploader.set("disabled",!1);var a=this._animationUploader.get("value");a&&this._onAnimationSelected(a)}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/EditAnimationPresenter":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/on dojox/html/entities webview/crossCutting/errors/_OnErrorMixin webview/util/Debounce ../_NodePositioningMixin".split(" "),
function(r,p,m,l,h,c,g,d,n){return m("webview/features/navigationGroups/dialogs/EditAnimationContent/EditAnimationPresenter",[r,n,g],{BATCH_UPDATE_DEBOUNCE:250,animationNodeUpdater:null,_isClosed:!0,_setViewAttr:function(a){this._removeViewListeners();this._set("view",a);this._viewListeners=[h(a,"changedAnimation",l.hitch(this,this._onChangedAnimation)),h(a,"changedAttribute",l.hitch(this,this._onChangedAttribute)),h(a,"changedClickDestinations",l.hitch(this,this._onChangedClickDestinations)),h(a,
"changedLinkedObjects",l.hitch(this,this._onChangedLinkedObjects)),h(a,"changedLinkedObjectsAndDestinations",l.hitch(this,this._onChangedLinkedObjectsAndDestinations)),h(a,"changedPositioning",l.hitch(this,this._onChangedPositioning)),h(a,"changedProperty",l.hitch(this,this._onChangedProperty)),h(a,"close",l.hitch(this,this._onClose)),h(a,"deleteNode",l.hitch(this,this._onNodeDeleted))]},initialize:function(a,b,c){this._isClosed=!1;this.backgroundDimensions=c;this.animationNode=b;this.groupId=a;this.nodeId=
b.nodeId;this.measuredFullSizeDimensions=b.get("measuredFullSizePxDimensions");this.view.set("initializing",!0);this._loadConfiguration()},isOpen:function(){return!1===this._isClosed},onClose:function(){},syncEditor:function(a){a&&(a.updatedProperties&&a.updatedProperties.animationName?this._loadConfiguration():(this._syncAttributes(a.attributes),this._syncObjects(a),this._syncProperties(a.updatedProperties)))},_getEmptyChangeData:function(){return{updatedNode:{nodeId:this.nodeId},originalNode:{nodeId:this.nodeId}}},
_loadConfiguration:function(){this.animationNodeUpdater.getConfigurationDataForNode(this.groupId,this.nodeId).then(l.hitch(this,this._onLoadedConfigurationData))},_mergeChangeData:function(a,b){var c={},d=a.originalNode.linkedObjects,g=a.originalNode.clickDestinations,f=a.originalNode.attributes||{},h=a.updatedNode.attributes||{};c.updatedNode=l.mixin(a.updatedNode,b.updatedNode);c.originalNode=l.mixin(l.clone(b.originalNode),a.originalNode);b.updatedNode.linkedObjects&&(c.updatedNode.linkedObjects=
b.updatedNode.linkedObjects,c.originalNode.linkedObjects=d?d:b.originalNode.linkedObjects);b.updatedNode.clickDestinations&&(c.updatedNode.clickDestinations=b.updatedNode.clickDestinations,c.originalNode.clickDestinations=g?g:b.originalNode.clickDestinations);c.updatedNode.attributes=l.mixin(h,b.updatedNode.attributes||{});c.originalNode.attributes=l.mixin(b.originalNode.attributes||{},f);return c},_onChangedAnimation:function(a){a.originalName!==a.name&&(this._sendNodeUpdate({swappedAnimation:!0,
updatedNode:{nodeId:this.nodeId,animationName:a.name||""},originalNode:{nodeId:this.nodeId,animationName:a.originalName||""}}),this.animationNode.set("animationName",a.name))},_onChangedAttribute:function(a){var b=l.clone(a);b.value=a.originalValue;delete a.originalValue;var c=this._getEmptyChangeData();c.updatedNode.attributes={};c.originalNode.attributes={};c.updatedNode.attributes[a.attributeName]=a;c.originalNode.attributes[a.attributeName]=b;"tableColumns"===a.attributeName&&(this.view._animationObjects.columns=
a.value,this.view._animationObjects._reindexGrid());this._sendNodeUpdate(c);this.animationNode.updateAttributes([a])},_onChangedLinkedObjectsAndDestinations:function(a,b,c){var d=this._getEmptyChangeData();d.updatedNode.linkedObjects=a.updated;d.originalNode.linkedObjects=a.original;d.updatedNode.clickDestinations=b.updated;d.originalNode.clickDestinations=b.original;d.updatedNode.mapLocations=c.value;d.originalNode.mapLocations=c.originalValue;this._sendNodeUpdate(d)},_onChangedClickDestinations:function(a){var b=
this._getEmptyChangeData();b.updatedNode.clickDestinations=a.updated;b.originalNode.clickDestinations=a.original;this._sendNodeUpdate(b)},_onChangedLinkedObjects:function(a){var b=this._getEmptyChangeData();b.updatedNode.linkedObjects=a.updated;b.originalNode.linkedObjects=a.original;this._sendNodeUpdate(b)},_onChangedPositioning:function(){var a=this._getEmptyChangeData(),b=this.view.get("positioningData"),c=this._getUpdatedPositioningData(b),d=this._getRelativePositioning(this.originalPositioning),
g=Object.keys(c);0!==g.length&&(p.forEach(g,l.hitch(this,function(b){a.updatedNode[b]=c[b];a.originalNode[b]=d[b]})),this._sendNodeUpdate(a),this.originalPositioning=b,this.animationNode.set(c))},_onChangedProperty:function(a){var b=this._getEmptyChangeData();b.updatedNode[a.property]=a.value;b.originalNode[a.property]=a.originalValue;this._sendNodeUpdate(b);this.animationNode.set(a.property,a.value)},_onClose:function(){this._isClosed=!0;this.onClose()},_onError:function(a){a&&"cancel"===a.dojoType||
(this.inherited(arguments),this._onClose())},_onLoadedConfigurationData:function(a){if(a.nodeConfiguration){try{this._setAnimationProperties(a.nodeConfiguration);var b=a.dialogConfig;b?(this._setAnimationAttributes(b,a.nodeConfiguration),this._setAnimationLinkedObjects(b,a.nodeConfiguration),this._setAnimationHelpContent(b)):a.errorMessage&&this._setNoDialogConfig(a.errorMessage)}catch(t){console.error(t)}this.view.set("initializing",!1)}else console.error(a),this._onError(a)},_onNodeDeleted:function(){this.builderStateManager.set("userEditInProgress",
!0);this.animationNodeUpdater.deleteNodes([{nodeId:this.animationNode.nodeId,animationName:this.animationNode.animationName,aspectLocked:this.animationNode.aspectLocked,height:this.animationNode.height,positioningLeft:this.animationNode.positioningLeft,positioningTop:this.animationNode.positioningTop,width:this.animationNode.width}]).always(l.hitch(this.builderStateManager,this.builderStateManager.set,"userEditInProgress",!1));this.animationNode.destroy();this.view.onClose()},_queueBatchUpdate:function(){this._batchDebounce=
d(this._batchDebounce,l.hitch(this,this._sendBatchedUpdates),this.BATCH_UPDATE_DEBOUNCE)},_sendBatchedUpdates:function(){this.builderStateManager.set("userEditInProgress",!0);if(this._updateDeferred&&!this._updateDeferred.isFulfilled())this._queueBatchUpdate();else{this._batchedUpdateData.originalNode.attributes&&(this._batchedUpdateData.originalNode.attributes=Object.values(this._batchedUpdateData.originalNode.attributes));this._batchedUpdateData.updatedNode.attributes&&(this._batchedUpdateData.updatedNode.attributes=
Object.values(this._batchedUpdateData.updatedNode.attributes));var a=this._batchedUpdateData.swappedAnimation;this._updateDeferred=this.animationNodeUpdater.updateNodes([this._batchedUpdateData]);this._updateDeferred.always(l.hitch(this,function(){this.builderStateManager.set("userEditInProgress",!1);a&&this._loadConfiguration()}));this._batchedUpdateData=null}},_sendNodeUpdate:function(a){this._batchedUpdateData=this._batchedUpdateData?this._mergeChangeData(this._batchedUpdateData,a):a;this._queueBatchUpdate()},
_setAnimationAttributes:function(a,b){for(var d in b.animationAttributes){var g=b.animationAttributes[d];"string"===typeof g&&(g=c.decode(g),b.animationAttributes[d]=g)}d={animationName:b.animationName,attributeValues:b.animationAttributes||{}};d.supportedAttributes=a.dialogAttributes||[];this.view.set("attributesData",d)},_setAnimationHelpContent:function(a){this.view.set("helpContent",a.helpContent)},_setAnimationLinkedObjects:function(a,b){var c={fixedPointCount:!0===a.fixedPointCount,points:a.points||
[],linkedObjects:b.linkedObjectsMap,clickDestinations:b.clickDestinationsMap||[],mapLocations:b.mapLocations},d=0;c.fixedPointCount||(d=1,p.forEach(a.dialogAttributes,function(a){"tableColumns"===a.attributeName&&(d=a.value)}),this.view._animationObjects.purposeMask=c.points[0].purpose,this.view._animationObjects.columns=d);this.view.set("linkedObjectsData",c)},_setAnimationProperties:function(a){this.originalPositioning=this._getAbsolutePositioning(a);this.view.set("animationProperties",{backgroundDimensions:this.backgroundDimensions,
animationName:a.animationName,aspectLocked:a.aspectLocked,aspectRatio:this.originalPositioning.w/this.originalPositioning.h,positioningData:this.originalPositioning})},_setNoDialogConfig:function(a){this.view.set("helpContent",a);a={error:a};this.view.set("attributesData",a);this.view.set("linkedObjectsData",a)},_syncAttributes:function(a){a&&(this.animationNode.updateAttributes(a),this.view.syncAttributes(a))},_syncObjects:function(a){var b=null;a.updatedProperties&&(b=a.updatedProperties.mapLocations||
null);if(a.clickDestinations||a.linkedObjects||b){var c={};a.clickDestinations&&(c.clickDestinations=a.clickDestinations);a.linkedObjects&&(c.linkedObjects=a.linkedObjects);b&&(c.mapLocations=b.split(";"));this.view.syncObjects(c)}},_syncProperties:function(a){if(a&&0<Object.keys(a).length){a=l.clone(a);delete a.mapLocations;var b={},c={};p.forEach(["height","width","positioningLeft","positioningTop"],function(b){"undefined"!==typeof a[b]&&(c[b]=a[b])});var d=this._getRelativePositioning(this.view.get("positioningData")),
d=l.mixin(d,c);this.animationNode.set(d);"undefined"!==typeof a.aspectLocked&&(b.aspectLocked=a.aspectLocked,this.animationNode.set("aspectLocked",a.aspectLocked));b.positioningData=this._getAbsolutePositioning(d);this.view.syncProperties(b)}},_removeViewListeners:function(){this._viewListeners&&0<this._viewListeners.length&&(p.forEach(this._viewListeners,function(a){a.remove()}),this._viewListeners=null)},destroy:function(){this._removeViewListeners();this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/_NodePositioningMixin":function(){define(["dojo/_base/declare"],
function(r){return r("webview/features/navigationGroups/dialogs/_NodePositioningMixin",[],{_getAbsolutePositioning:function(p){this.view.set("backgroundDimensions",this.backgroundDimensions);return{x:Math.round(this.backgroundDimensions.width*(p.positioningLeft||0)/100),y:Math.round(this.backgroundDimensions.height*(p.positioningTop||0)/100),w:Math.round(this.backgroundDimensions.width*(p.width||0)/100||this.measuredFullSizeDimensions.x),h:Math.round(this.backgroundDimensions.height*(p.height||0)/
100||this.measuredFullSizeDimensions.y)}},_getRelativePositioning:function(p){return{positioningLeft:p.x/this.backgroundDimensions.width*100,positioningTop:p.y/this.backgroundDimensions.height*100,width:p.w/this.backgroundDimensions.width*100,height:p.h/this.backgroundDimensions.height*100}},_getUpdatedPositioningData:function(p){var m=this._getRelativePositioning(p);this.originalPositioning.x===p.x&&delete m.positioningLeft;this.originalPositioning.y===p.y&&delete m.positioningTop;this.originalPositioning.w===
p.w&&delete m.width;this.originalPositioning.h===p.h&&delete m.height;return m},_setPositioningFields:function(p){this.originalPositioning=p=this._getAbsolutePositioning(p);this.view.set("positioningData",p)}})})},"webview/features/navigationGroups/dialogs/insertAnimationContent/InsertAnimationContent":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dnd/Source dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/text!./templates/InsertAnimationContent.html ../../groupRendering/groupNodes/AnimationNodeOverlay webview/features/animations/AnimationSelector".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return h("webview/features/navigationGroups/dialogs/insertAnimationContent/InsertAnimationContent",[p,r,m],{navigationGroupsStrings:b,templateString:k,rcStrings:n,webviewStrings:a,postCreate:function(){this.inherited(arguments);this._animationSelector.initialize();this.own(t(this._animationSelector,"animationSelected",c.hitch(this,this._onAnimationSelected)));this._createDnDSource()},onClose:function(){},_DnDSourceItemCreator:function(a){return{node:a.domNode,
data:a,type:["navGroupPoint"]}},_createDndPreviewAvatar:function(){this._previewAvatar=new q({aspectLocked:!0,nodeId:null,renderType:2,newAnimationNode:!0});this._DnDSource.insertNodes(!1,[this._previewAvatar])},_createDnDSource:function(){this._DnDSource=new l(this._previewContainer,{creator:c.hitch(this,this._DnDSourceItemCreator),accept:[],copyOnly:!0,delay:0,autoSync:!0,isSource:!0,selfAccept:!1,singular:!0,generateText:!1});this._createDndPreviewAvatar()},_onAnimationSelected:function(a){a&&
a.name?(this.selectedAnimation=a.name,d.remove(this._previewContainer,"hidden")):(this.selectedAnimation=null,d.add(this._previewContainer,"hidden"));this._previewAvatar.set("animationName",this.selectedAnimation)},_onClose:function(){this.onClose()}})})},"webview/features/navigationGroups/groupRendering/groupNodes/AnimationNodeOverlay":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!webview/nls/navigationGroups dojo/on dojo/text!./templates/AnimationNodeOverlay.html require ./_BasicNodeMixin ./_ResizableNodeMixin ./../../../animations/AnimationDefaultConfigProvider".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f){return l("webview/features/navigationGroups/groupNode/AnimationNodeOverlay",[p,r,m,k,q],{templateString:b,animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation/",navGroupStrings:n,thumbnailPath:"/_thumbnail.png",genericThumbnailPath:null,constructor:function(){this.inherited(arguments);this.genericThumbnailPath=t.toUrl("webview")+"/themes/rcblack/images/RCGFX.png"},postCreate:function(){this.inherited(arguments);this.own(a(this.editIconNode,"click",h.hitch(this,
this.emit,"editConfigurationClicked")),this.watch("aspectLocked",h.hitch(this,function(a,b,c){this._disableResizeHandles();this._enableResizeHandles()})),a(this.thumbnail,"error",h.hitch(this,function(){c.set(this.thumbnail,"src",this.genericThumbnailPath)})));g.toggle(this.thumbnail,"existing-node",!0!==this.newAnimationNode);g.toggle(this.domNode,"new-animation-node",!0===this.newAnimationNode)},_setAnimationNameAttr:function(a){if(a){var b=c.get(this.thumbnail,"src"),d=this.get("animationName");
b&&d===a||(c.set(this.thumbnail,"src",this.animationFilesPath+a+this.thumbnailPath),this.loadingDefaultAnimationConfig=null);!this.newAnimationNode||this.isAvatar||this.loadingDefaultAnimationConfig||(g.add(this.domNode,"fetching-attributes"),this.loadingDefaultAnimationConfig=f.getDefaultConfig(a),this.loadingDefaultAnimationConfig.then(h.hitch(this,function(a){this._set("defaultConfig",a);g.remove(this.domNode,"fetching-attributes")})))}else c.set(this.thumbnail,"src",null),g.remove(this.domNode,
"fetching-attributes"),this.loadingDefaultAnimationConfig=null;this._set("animationName",a)},_setDisplayIndexAttr:function(a){d.set(this.domNode,{"z-index":a})},_setHeightAttr:function(a){d.set(this.domNode,{height:a+"%"})},_setHeightPxAttr:function(a){d.set(this.domNode,{height:a+"px"})},_setNewAnimationNodeAttr:function(a){this._set("newAnimationNode",a)},_setWidthAttr:function(a){d.set(this.domNode,{width:a+"%"})},_setWidthPxAttr:function(a){d.set(this.domNode,{width:a+"px"})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/_BasicNodeMixin":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-style dojo/Evented ./_NodeActionsMixin ./_ResizableNodeMixin".split(" "),
function(r,p,m,l,h,c,g,d,n,a){return l("webview/features/navigationGroups/GroupNodes/_BasicNodeMixin",[n,d],{_setDisplayIndexAttr:function(a){this.displayIndexNode.innerText=a?a.toString():"0";g.set(this.domNode,{"z-index":a})},_setHintTextAttr:function(a){h.set(this.domNode,"title",a)},_setHeightAttr:function(a){g.set(this.domNode,{height:0!==a?a+"%":null})},_setInFaultAttr:function(a){c.toggle(this.faultIconNode,"hidden",!a)},_setInManualAttr:function(a){c.toggle(this.manualHandNode,"hidden",!a)},
_setSelectedForEditAttr:function(a){c.toggle(this.domNode,"selected-for-edit",a)},_getMeasuredFullSizePxDimensionsAttr:function(){return{x:this.domNode.offsetWidth/this.scaleFactorManager.widthScaleFactor,y:this.domNode.offsetHeight/this.scaleFactorManager.heightScaleFactor}},_setPositioningLeftAttr:function(a){g.set(this.domNode,{left:a+"%"});this._set("positioningLeft",a)},_setPositioningTopAttr:function(a){g.set(this.domNode,{top:a+"%"});this._set("positioningTop",a)},_setWidthAttr:function(a){g.set(this.domNode,
{width:0!==a?a+"%":null})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/_NodeActionsMixin":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/has dojo/on dojo/topic rc/_base/util rc/util/encoding/base16 rc/util/encoding/base64 webview/crossCutting/topicEvents webview/crossCutting/windowUtil ../../dialogs/editObjectDialog/_DialogPresenter ../../dialogs/editObjectDialog/_DialogRequests".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u){return l("webview/features/navigationGroups/GroupNodes/_NodeActionsMixin",[],{hasLink:!1,_clickHandler:null,_setBuilderStateManagerAttr:function(a){this.editModeListener&&this.editModeListener.remove();this.editModeListener=a.watch("editMode",h.hitch(this,function(a,b,c){this._onChangeEditMode(c)}));this.own(this.editModeListener);this._onChangeEditMode(a.get("editMode"));this._set("builderStateManager",a)},_setEditableAttr:function(a){c.toggle(this.domNode,
"editable-node",a);a?this._setClickHandler(function(a){this.editDialogPresenter||(this.editDialogPresenter=new f({requestManager:new u({nodeId:this.nodeId,site:this.builderStateManager.get("siteId")})}),this.own(this.editDialogPresenter));n.publish(k.groupNodeClicked,this.editDialogPresenter);a.stopPropagation()}):this.hasLink||this._clearClickHandler();this._set("editable",a)},_setActionLinkAttr:function(a){var b=null!=a;c.toggle(this.domNode,"linkable-node",b);b?this._setClickHandler(function(b){a.hash?
this._goToObject(a,b):this._goToUrl(a.url,b);b.stopPropagation()}):this.editable||this._clearClickHandler();this._set("hasLink",b)},_clearClickHandler:function(){this._clickHandler&&(this._clickHandler.remove(),this._clickHandler=null)},_createClickToDialogPresenter:function(a){var b=null;this.builderStateManager&&(b=this.builderStateManager.get("siteId"));return new f({requestManager:new u({nodeId:this.nodeId,clickDestAssocIndex:a,site:b,_editableDataPath:"NavigationGroupClickDestEditableObjectData/",
_objectUpdatePath:"NavigationGroupClickDestEditObject/",_relinquishPath:"NavigationGroupRelinquishClickDestObject/"})})},_goToObject:function(c,d){var f=c.hash?c.hash:c.Hash;test.mode<test.PROXY_LIVE&&(f=t.encode(b.strToHex(f)));var g=q.getFullPath();"Admin"===rc.pathInfo.site&&this.builderStateManager&&(g=g.replace(/admin\/$/ig,this.builderStateManager.get("siteUrl")+"/"));if(c.systemId||c.SystemId)g+=c.systemId?c.systemId:c.SystemId+"/";a.gotoExternalLink(g+("#"+f),d)},_goToUrl:function(b,c){b=
decodeURIComponent(b);a.gotoExternalLink(b,c)},_onChangeEditMode:function(a){a?this._clearClickHandler():this._clickHandlerFunction&&this._setClickHandler(this._clickHandlerFunction)},_openClickDestination:function(a){if(this.clickDestinationMap.hasOwnProperty(a)){var b=this.clickDestinationMap[a];null===b===!0?(a=this._createClickToDialogPresenter(a),n.publish(k.groupNodeClicked,a)):b.Hash?this._goToObject(b):this._goToUrl(b.Url)}},_updateAnimationPoint:function(a){var b=null;this.builderStateManager&&
(this.builderStateManager.set("userEditInProgress",!0),b=this.builderStateManager.get("siteId"));for(var c=1;c<this.gelData.length;c++)this.gelData[c].mne===a.mne&&this.gelData[c].systemId===a.systemId&&(this.gelData[c].gValue=a.gValue);a=new f({animationGel:a,requestManager:new u({nodeId:this.nodeId,clickDestAssocIndex:a.mne,_objectUpdatePath:"NavigationGroupAnimationEditObject/",site:b})});this.own(a);n.publish(k.animationEdit,a)},_setClickHandler:function(a){this._clearClickHandler();this._clickHandlerFunction=
a;this.builderStateManager.get("editMode")||(this._clickHandler=d(this.domNode,"click",h.hitch(this,a)))},destroy:function(){this._clearClickHandler();this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/editObjectDialog/_DialogPresenter":function(){define(["dijit/_WidgetBase","dojo/_base/declare","dojo/topic","webview/crossCutting/topicEvents"],function(r,p,m,l){return p("webview/features/navigationGroups/dialog/editObjectDialog/_DialogPresenter",[r],{_view:null,animationGel:null,
EDITOR_TYPES:{NUMERIC:0,DIGITAL:1,TEXT_FIELD:2,TEXT_BLOB:3},RESULT_CODE_SUCCESS:1,initialize:function(h){this._view=h;this.requestManager.getNodesEditableData(this,this._onLoadedEditableData,this._onError);this._view.show()},initializeForAnimation:function(h){this._view=h;this.sendDataForAnimation()},relinquishIndexes:function(h){this.requestManager.relinquishIndexes({updatedObject:{mnemonic:this.objectValues.mnemonic,systemId:this.objectValues.systemId},relinquishedIndexes:h},this,this._onRelinquishedPriorityArray,
this._onError)},reloadPriorityArray:function(){this.requestManager.getNodesEditableData(this,this._onLoadedPriorityArrayData,this._onError)},sendData:function(){if(this._view.validate()){var h={reason:this._view.get("reason"),updatedObject:{mnemonic:this.objectValues.mnemonic,systemId:this.objectValues.systemId},objectValues:{value:this._view.get("objectValue"),autoManualState:this._view.get("valueOverrideState"),timedOverride:this._view.get("timedOverride")}};this.requestManager.sendData(h,this,
this._onObjectUpdateData,this._onError)}},sendDataForAnimation:function(){var h=this._validateAnimationValue();"number"===typeof h&&(h=h.toString());this.requestManager.sendData({reason:"Modified by interactive HTML animation",updatedObject:{mnemonic:this.animationGel.mne,systemId:this.animationGel.systemId},objectValues:{value:h,autoManualState:null,timedOverride:null}},this,this._onAnimationObjectUpdateData,this._onError)},_onError:function(h){this._view.onError(h)},_onAnimationObjectUpdateData:function(h){this._onObjectUpdateData(h);
m.publish(l.animationEditClose)},_onLoadedEditableData:function(h){h.objectValues?h.objectValues.errorMessage?(this._view.onError(h.objectValues),this._view.hide()):(this._view.set("objectName",h.descriptor),this._view.set("reason",""),this._setObjectValues(h.objectValues),this._setReasonRequired(h.requiresReason),this._view.toggleOverrideOptionsEnabled(h.canEditOverrideOptions),this._view.set("initializing",!1)):(this._view.onError(h),this._view.hide())},_onLoadedPriorityArrayData:function(h){if(h.objectValues)this._view.set("priorityArray",
h.objectValues.priorityArray),!0===this._reloadAfterSave&&(this._view.onSuccess(),this._reloadAfterSave=!1);else this._view.onError(h)},_onObjectUpdateData:function(h){if(h.resultCode!==this.RESULT_CODE_SUCCESS)this._view.onError(h);else this._view.onSuccess(),this._view.hide()},_onRelinquishedPriorityArray:function(h){if(h.resultCode!==this.RESULT_CODE_SUCCESS)this._view.onError(h);else this._reloadAfterSave=!0,this.reloadPriorityArray()},_setEditorType:function(h,c,g){switch(h){case this.EDITOR_TYPES.DIGITAL:this._view.showDigitalEditor(c,
g);break;case this.EDITOR_TYPES.TEXT_FIELD:this._view.showTextFieldEditor(c);break;case this.EDITOR_TYPES.TEXT_BLOB:this._view.showTextBlobEditor(c);break;default:1<c.split(":").length?this._view.showTimeEditor(c):this._view.showNumericEditor(c)}},_setObjectValues:function(h){this.objectValues=h;h.priorityArray&&0<h.priorityArray.length?this._view.set("priorityArray",h.priorityArray):this._view.set("priorityArray",null);isNaN(h.overrideValue)?this._view.toggleOverrideOptionsVisible(!1):(this._view.toggleOverrideOptionsVisible(!0),
this._view.set("overrideOptions",h.overrideOptions),this._view.set("selectedOverrideOption",Number(h.overrideValue)),isNaN(h.timedOverride)||this._view.set("timedOverride",h.timedOverride));this._setEditorType(h.editorType,h.value,h.digitalStates)},_setReasonRequired:function(h){h=h||!1!==rc.session.enforceChangeApproval;this._view.set("reasonRequired",h)},_validateAnimationValue:function(){var h=this.animationGel.gValue;if(0==this.animationGel.bAnalog&&this.animationGel.hasOwnProperty("strMSString")&&
this.animationGel.strMSString.length){var c=this.animationGel.strMSString.split(";");if(0<c.length)for(var g=0;g<c.length;g++)if(c[g]==h){h=g;break}}return h}})})},"webview/features/navigationGroups/dialogs/editObjectDialog/_DialogRequests":function(){define(["dijit/_WidgetBase","dojo/_base/declare","dojo/_base/lang","webview/changeApproval/_ApprovalSessionMixin","webview/xhrEnhanced"],function(r,p,m,l,h){return p("webview/features/navigationGroups/dialog/editObjectDialog/_DialogRequests",[r,l],{_editableDataPath:"NavigationGroupEditableObjectData/",
_objectUpdatePath:"NavigationGroupEditObject/",_relinquishPath:"NavigationGroupRelinquishObject/",nodeId:null,clickDestAssocIndex:null,site:null,getNodesEditableData:function(c,g,d){this._editableDataRequest&&this._editableDataRequest.cancel();var l={handleAs:"json",preventCache:!0};null!==this.clickDestAssocIndex&&(l.query={clickDestAssocIndex:this.clickDestAssocIndex});return this._editableDataRequest=h.get(this._editableDataPath+this.nodeId,l).then(m.hitch(c,g),m.hitch(c,d))},relinquishIndexes:function(c,
g,d,l){this._relinquishRequest&&this._relinquishRequest.cancel();var a={data:JSON.stringify(c)};null!==this.clickDestAssocIndex&&(a.clickDestAssocIndex=this.clickDestAssocIndex);this._validateApprovalSessionWithReason(a).then(m.hitch(this,function(){this._relinquishRequest=h.post(this._relinquishPath+this.nodeId,{handleAs:"json",data:a}).then(m.hitch(g,d),m.hitch(g,l))}),function(){});return this._relinquishRequest},sendData:function(c,g,d,l){this._sendRequest&&this._sendRequest.cancel();var a={data:JSON.stringify(c)};
null!==this.clickDestAssocIndex&&(a.clickDestAssocIndex=this.clickDestAssocIndex);this._validateApprovalSession(a).then(m.hitch(this,function(){this._sendRequest=h.post(this._objectUpdatePath+this.nodeId,{handleAs:"json",data:a}).then(m.hitch(g,d),m.hitch(g,l))}),function(){});return this._sendRequest},destroy:function(){this._editableDataRequest&&this._editableDataRequest.cancel();this._relinquishRequest&&this._relinquishRequest.cancel();this._sendRequest&&this._sendRequest.cancel()}})})},"webview/features/navigationGroups/groupRendering/groupNodes/_ResizableNodeMixin":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-style dojo/Evented dojo/on dojo/touch ./_NodeActionsMixin".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return h("webview/features/navigationGroups/GroupNodes/_ResizableNodeMixin",[a],{MIN_DIMENSION:25,_enableResizeHandles:function(){this.aspectLocked?(this._resizeHandles=[b(this.sResizePoint,t.press,c.hitch(this,this._resizeNode,"s")),b(this.eResizePoint,t.press,c.hitch(this,this._resizeNode,"e"))],d.add(this.nResizePoint,"hidden"),d.add(this.nwResizePoint,"hidden"),d.add(this.wResizePoint,"hidden"),d.add(this.swResizePoint,"hidden"),d.add(this.seResizePoint,"hidden"),
d.add(this.neResizePoint,"hidden")):(this._resizeHandles=[b(this.nResizePoint,t.press,c.hitch(this,this._resizeNode,"n")),b(this.nwResizePoint,t.press,c.hitch(this,this._resizeNode,"nw")),b(this.wResizePoint,t.press,c.hitch(this,this._resizeNode,"w")),b(this.swResizePoint,t.press,c.hitch(this,this._resizeNode,"sw")),b(this.sResizePoint,t.press,c.hitch(this,this._resizeNode,"s")),b(this.seResizePoint,t.press,c.hitch(this,this._resizeNode,"se")),b(this.eResizePoint,t.press,c.hitch(this,this._resizeNode,
"e")),b(this.neResizePoint,t.press,c.hitch(this,this._resizeNode,"ne"))],d.remove(this.nResizePoint,"hidden"),d.remove(this.nwResizePoint,"hidden"),d.remove(this.wResizePoint,"hidden"),d.remove(this.swResizePoint,"hidden"),d.remove(this.seResizePoint,"hidden"),d.remove(this.neResizePoint,"hidden"));l.forEach(this._resizeHandles,c.hitch(this,function(a){this.own(a)}))},_disableResizeHandles:function(){this._resizeHandles&&this._resizeHandles.length&&l.forEach(this._resizeHandles,function(a){a.remove()});
delete this._resizeHandles},_onChangeEditMode:function(a){this.inherited(arguments);a?this._enableResizeHandles():this._disableResizeHandles()},_onResizing:function(){this.emit("resizing");d.add(this.domNode,"resizing")},_onResized:function(a){this.aspectLocked?this._onResizedWithAspectRatio():this._onResizedWithoutAspectRatio(a);d.remove(this.domNode,"resizing")},_onResizedWithoutAspectRatio:function(a){var b=this._getNodePositionDetails();a.includes("n")||a.includes("s")||(delete b.height,delete this.originalNode.height);
a.includes("n")||(delete b.positioningTop,delete this.originalNode.positioningTop);a.includes("w")||a.includes("e")||(delete b.width,delete this.originalNode.width);a.includes("w")||(delete b.positioningLeft,delete this.originalNode.positioningLeft);this.emit("resized",{originalNode:this.originalNode,updatedNode:b});delete this.originalNode},_onResizedWithAspectRatio:function(){var a=this._getNodePositionDetails();delete a.positioningLeft;delete this.originalNode.positioningLeft;delete a.positioningTop;
delete this.originalNode.positioningTop;this.emit("resized",{originalNode:this.originalNode,updatedNode:a});delete this.originalNode},_getNodePositionDetails:function(){return{nodeId:this.nodeId,width:n.get(this.domNode,"width")/this._parentWidth*100,height:n.get(this.domNode,"height")/this._parentHeight*100,positioningLeft:n.get(this.domNode,"left")/this._parentWidth*100,positioningTop:n.get(this.domNode,"top")/this._parentHeight*100}},_resizeNode:function(a,d){this._onResizing(!0);this._parentWidth=
n.get(this.domNode.parentElement,"width");this._parentHeight=n.get(this.domNode.parentElement,"height");this._widthPx=n.get(this.domNode,"width");this._heightPx=n.get(this.domNode,"height");this._currentBottom=this._parentHeight-n.get(this.domNode,"top")-n.get(this.domNode,"height");this._currentRight=this._parentWidth-n.get(this.domNode,"left")-n.get(this.domNode,"width");this.originalNode=this._getNodePositionDetails();var f=b(window,t.move,c.hitch(this,this._mouseMoving,a,d)),g=b(window,t.release,
c.hitch(this,function(){f.remove();g.remove();this._onResized(a)}))},_getBackgroundSize:function(){return this.scaleFactorManager.backgroundDimensions},isBoundaryValid:function(a,b){switch(a){case "n":return 0<b||0<n.get(this.domNode,"top")-this.nResizePoint.offsetHeight;case "s":return 0>b||this.sResizePoint.offsetHeight+n.get(this.domNode,"height")+n.get(this.domNode,"top")<this.domNode.parentElement.offsetHeight;default:console.error(this.declaredClass+" - isBoundaryValid(): Unknown direction",
a)}},_mouseMoving:function(a,b,d){var f=d.clientX-b.clientX,g=d.clientY-b.clientY,h=this._widthPx,k=this._heightPx,l=this.MIN_DIMENSION,m=c.hitch(this,function(a){a*=this._heightPx/this._widthPx;var b=this._parentHeight-n.get(this.domNode,"top")-this.sResizePoint.offsetHeight;k=Math.max(l,Math.min(a,b));a>b&&(k=void 0);return k}),p=c.hitch(this,function(a){a*=this._widthPx/this._heightPx;var b=this._parentWidth-n.get(this.domNode,"left")-this.eResizePoint.offsetWidth;h=Math.max(l,Math.min(a,b));a>
b&&(h=void 0);return h});b=c.hitch(this,function(){var a=n.get(this.domNode,"height")+n.get(this.domNode,"top")-this.nResizePoint.offsetHeight;k=Math.max(l,Math.min(k-g,a));n.set(this.domNode,{height:k+"px",top:null,bottom:this._currentBottom+"px"})});d=c.hitch(this,function(){var a=this._parentWidth-n.get(this.domNode,"left")-this.eResizePoint.offsetWidth;h=Math.max(l,Math.min(h+f,a));a={width:h+"px"};if(this.aspectLocked){var b=m(h);if(!b)return;a.height=b+"px"}n.set(this.domNode,a)});var q=c.hitch(this,
function(){var a=this._parentHeight-n.get(this.domNode,"top")-this.sResizePoint.offsetHeight;k=Math.max(l,Math.min(k+g,a));a={height:k+"px"};if(this.aspectLocked){var b=p(k);if(!b)return;a.width=b+"px"}n.set(this.domNode,a)}),r=c.hitch(this,function(){var a=n.get(this.domNode,"width")+n.get(this.domNode,"left")-this.wResizePoint.offsetWidth;h=Math.max(l,Math.min(h-f,a));n.set(this.domNode,{width:h+"px",left:null,right:this._currentRight+"px"})});a.includes("n")&&b();a.includes("w")&&r();a.includes("s")&&
q();a.includes("e")&&d()},destroy:function(){this.inherited(arguments);this._disableResizeHandles()}})})},"webview/features/animations/AnimationDefaultConfigProvider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/Deferred","webview/xhrEnhanced"],function(r,p,m,l,h){p=p("webview/features/animations/AnimationDefaultConfigProvider",null,{animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation",getDefaultConfig:function(c){return this._loadConfigFile(c)},_loadConfigFile:function(c){this.configFileLoading&&
!this.configFileLoading.isCanceled()&&this.configFileLoading.cancel();this.requestDeferred=new l;this.configFileLoading=h.get(this.animationFilesPath+"/"+c+"/dialog-config.json",{handleAs:"json",preventCache:!0});this.configFileLoading.then(m.hitch(this,this._parseDefaultConfig),m.hitch(this,function(c){this._onLoadConfigFailure();this.configFileLoading=null}));return this.requestDeferred},_onLoadConfigFailure:function(){this.requestDeferred.resolve(null);this.configFileLoading=null},_parseDefaultConfig:function(c){if(c){var g=
{height:c.Height,width:c.Width,fixedPointCount:c.FixedPointCount,attributes:[],versionId:c.VersionId};(c=c["Custom Attributes"])&&m.isArray(c)&&r.forEach(c,m.hitch(this,function(c){(c=c.Attributes)&&m.isArray(c)&&r.forEach(c,m.hitch(this,function(c){c.variable&&g.attributes.push({attributeName:c.variable,dataType:c.type,value:c.value})}))}));this.requestDeferred.resolve(g);this.configFileLoading=null}else this._onLoadConfigFailure()}});p.instance||(p.instance=new p);return p.instance})},"webview/features/navigationGroups/dialogs/nodeConfigurationDialog/NodeConfigurationDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/store/Memory dojo/text!./templates/NodeConfigurationDialog.html webview/crossCutting/dialogs/DialogWithLoadingOverlayMixin ../_NodePositioningViewMixin dijit/form/Button dijit/form/CheckBox dijit/form/NumberSpinner webview/widget/ColorPicker webview/widget/FontSelector".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return p("webview/features/navigationGroups/dialog/NodeConfigurationDialog",[r,b,t],{defaultColour:"#bcd1d9",navGroupStrings:g,rcStrings:h,templateString:a,webviewStrings:c,_displayTypeSelectionStore:null,_modifiableBySelectionStore:null,constructor:function(){this._modifiableBySelectionStore=new n({data:[{name:this.navGroupStrings.configDialog.modifiedBy.operator,id:!1},{name:this.navGroupStrings.configDialog.modifiedBy.endUser,id:!0}]});this._displayTypeSelectionStore=
new n({data:[{name:this.navGroupStrings.configDialog.showPointType.invisible,id:0},{name:this.navGroupStrings.configDialog.showPointType.name,id:1},{name:this.navGroupStrings.configDialog.showPointType.value,id:2},{name:this.navGroupStrings.configDialog.showPointType.displayName,id:3}]})},postCreate:function(){this.inherited(arguments);this.modifiableBySelector.set({store:this._modifiableBySelectionStore,queryExpr:"*${0}*"});this.displayTypeSelect.set({store:this._displayTypeSelectionStore,queryExpr:"*${0}*"});
this._connectOnChangeListeners();this._connectDropDownCycleListeners()},_setDisplayNameAttr:function(a){this.displayName.set("value",a)},_setDisplayTypeAttr:function(a){this.displayTypeSelect.set("value",a)},_setFontColourAttr:function(a){this.fontColourPicker.set("color",a)},_setFontFamilyAttr:function(a){this.fontSelect.set("value",a)},_setFontSizeAttr:function(a){this.fontSize.set("value",a)},_setModifiableByAttr:function(a){this.modifiableBySelector.set("value",a)},_setObjectNameAttr:function(a){this.objectNameLabel.innerHTML=
a},_setShowUnitsAttr:function(a){this.showUnitCheckBox.set("value",a)},disableValueDisplayTypeOption:function(){this._displayTypeSelectionStore.setData([{name:this.navGroupStrings.configDialog.showPointType.invisible,id:0},{name:this.navGroupStrings.configDialog.showPointType.name,id:1},{name:this.navGroupStrings.configDialog.showPointType.displayName,id:3}])},enableValueDisplayTypeOption:function(){this._displayTypeSelectionStore.setData([{name:this.navGroupStrings.configDialog.showPointType.invisible,
id:0},{name:this.navGroupStrings.configDialog.showPointType.name,id:1},{name:this.navGroupStrings.configDialog.showPointType.value,id:2},{name:this.navGroupStrings.configDialog.showPointType.displayName,id:3}])},onClickedCancel:function(){this.hide()},onClickedDelete:function(){},onClickedOk:function(){},toggleHyperLinkVisibility:function(a){this.hyperLink.set("disabled",!a);this.hyperLink.set("required",a);l.toggle(this.inputContainer,"withHyperLink",a)},toggleModifiableByVisibility:function(a){this.modifiableBySelector.set("disabled",
!a);l.toggle(this.inputContainer,"withModifiableBySelector",a)},toggleUnitsVisibility:function(a){this.showUnitCheckBox.set("disabled",!a);l.toggle(this.inputContainer,"withUnitsToggle",a)},validate:function(){var a=!0;this._isShown()&&(a=this.inherited(arguments));this.okButton.set("disabled",!a);return a},_connectOnChangeListeners:function(){this.own(d(this.modifiableBySelector,"change",m.hitch(this,this.validate)),d(this.fontSelect,"change",m.hitch(this,this.validate)),d(this.fontSize,"change",
m.hitch(this,this.validate)),d(this.displayTypeSelect,"change",m.hitch(this,this.validate)),d(this.positionX,"change",m.hitch(this,this.validate)),d(this.positionY,"change",m.hitch(this,this.validate)),d(this.widthInput,"change",m.hitch(this,this.validate)),d(this.heightInput,"change",m.hitch(this,this.validate)),d(this.hyperLink,"keyup",m.hitch(this,this.validate)),d(this.displayName,"keyup",m.hitch(this,this.validate)))},_connectDropDownCycleListeners:function(){this.own(d(this.displayTypeSelect.textbox,
"click",m.hitch(this,this._onCycleDisplayTypeSelector)),d(this.modifiableBySelector.textbox,"click",m.hitch(this,this._onCycleModifiableBySelector)),d(this.fontSelect.textbox,"click",m.hitch(this,this._onCycleFontFamilySelector)))},_onClickedOk:function(){if(this.validate())this.onClickedOk()},_onCycleDisplayTypeSelector:function(){var a=this.displayTypeSelect.get("item"),a=1+this.displayTypeSelect.store.data.indexOf(a);a>=this.displayTypeSelect.store.data.length&&(a=0);this.displayTypeSelect.set("value",
this.displayTypeSelect.store.data[a].id)},_onCycleFontFamilySelector:function(){var a=this.fontSelect.get("item"),a=1+this.fontSelect.store.data.indexOf(a);a>=this.fontSelect.store.data.length&&(a=0);this.fontSelect.set("value",this.fontSelect.store.data[a].name)},_onCycleModifiableBySelector:function(){var a=this.modifiableBySelector.get("item");this.modifiableBySelector.set("value",!(a&&a.id))}})})},"webview/crossCutting/dialogs/DialogWithLoadingOverlayMixin":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojo/dom-style"],function(r,p,m){return r("webview/crossCutting/dialogs/DialogWithLoadingOverlayMixin",[],{_setInitializingAttr:function(l){p.toggle(this.loadingOverlay,"hidden",!l);p.toggle(this.loadingAnimation,"hidden",!l);m.set(this.loadingOverlay,"opacity",l?1:0);this.okButton.set("disabled",l)}})})},"webview/widget/FontSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-style dojo/store/Memory dojo/store/Observable dijit/form/_ComboBoxMenu dijit/form/FilteringSelect".split(" "),
function(r,p,m,l,h,c,g){c=p("webview/widget/_ComboBoxMenu",c,{_createOption:function(c,g){var a=this._createMenuItem(),b=g(c);b.html?a.innerHTML=b.label:a.appendChild(a.ownerDocument.createTextNode(b.label));m.set(a,"fontFamily",b.label);""===a.innerHTML&&(a.innerHTML="\x26#160;");return a}});return p("webview/widget/FontSelector",g,{fonts:"Arial;Baskerville;Calibri;Cambria;Courier New;Georgia;Helvetica;Lucida Console;Lucida Grande;Palatino;Times;Verdana".split(";"),dropDownClass:c,constructor:function(){var c=
[];r.forEach(this.fonts,function(d){c.push({name:d,id:d})},this);this.store=new h(new l({data:c}))},onChange:function(c){this.inherited(arguments);this.changeFont(c);return c},_setValueAttr:function(){this.inherited(arguments);this.changeFont(this.value)},changeFont:function(c){m.set(this.textbox,"fontFamily",c)}})})},"webview/features/navigationGroups/dialogs/nodeConfigurationDialog/ConfigurationDialogPresenter":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/on webview/crossCutting/errors/_OnErrorMixin ../_NodePositioningMixin".split(" "),
function(r,p,m,l,h,c){return p("webview/features/navigationGroups/dialog/ConfigurationDialogPresenter",[r,c,h],{view:null,textNodeUpdater:null,_setViewAttr:function(c){this.own(l(c,"clickedOk",m.hitch(this,this._updateNodesConfiguration)));this.own(l(c,"clickedDelete",m.hitch(this,this._deleteNode)));this._set("view",c)},initialize:function(c,d,h,a){this.backgroundDimensions=a;this.nodeId=d.nodeId;this.defaultFont=h;this.measuredFullSizeDimensions=d.get("measuredFullSizePxDimensions");this.view.set("initializing",
!0);this.view.show();this.textNodeUpdater.getConfigurationDataForNode(c,this.nodeId).then(m.hitch(this,this._onLoadedConfigurationData))},_deleteNode:function(){var c=this._getOriginalNode(this._getOriginalPositioning(),this._getOriginalNodeFont());c.linkedObject={keyword:this.originalData.nodeConfiguration.primaryLink.keyword,mnemonic:this.originalData.nodeConfiguration.primaryLink.mnemonic,systemId:this.originalData.nodeConfiguration.primaryLink.systemId,url:this.originalData.nodeConfiguration.primaryLink.url,
name:this.originalData.nodeConfiguration.primaryLink.name};this.originalData.nodeConfiguration.secondaryLink&&(c.secondaryLinkedObject={keyword:this.originalData.nodeConfiguration.secondaryLink.keyword,mnemonic:this.originalData.nodeConfiguration.secondaryLink.mnemonic,systemId:this.originalData.nodeConfiguration.secondaryLink.systemId,url:this.originalData.nodeConfiguration.secondaryLink.url,name:this.originalData.nodeConfiguration.secondaryLink.name});c.renderType=this.originalData.renderType;this.textNodeUpdater.deleteNodes([c]).then(m.hitch(this.view,
this.view.hide))},_onLoadedConfigurationData:function(c){!c.errorMessage&&c.nodeConfiguration&&c.nodeConfiguration.primaryLink?(this.originalData=c,this.view.toggleUnitsVisibility(1==c.hasUnits),1==c.hasDisplayValue?this.view.enableValueDisplayTypeOption():this.view.disableValueDisplayTypeOption(),this._setFontFields(c.nodeConfiguration.nodeFont),this._setPositioningFields(c.nodeConfiguration),this._setUpDialogType(c.nodeConfiguration),this.view.set("nodeId",c.nodeConfiguration.nodeId),this.view.set("objectName",
c.nodeName),this.view.set("displayName",c.nodeConfiguration.displayName||null),this.view.set("displayType",c.nodeConfiguration.displayType),this.view.set("initializing",!1),this.view.afterInitialize()):(console.error(c),this._onError(c))},_getOriginalNode:function(c,d){m.mixin(c,{nodeId:this.originalData.nodeConfiguration.nodeId,displayName:this.originalData.nodeConfiguration.displayName||null,modifiableByEndUser:this.originalData.nodeConfiguration.modifiableByEndUser,showUnits:this.originalData.nodeConfiguration.showUnits,
nodeFont:d,displayType:this.originalData.nodeConfiguration.displayType});this.originalData.nodeConfiguration.primaryLink.url&&(c.linkedObject={url:this.originalData.nodeConfiguration.primaryLink.url});return c},_getOriginalNodeFontDiff:function(){var c=this.view.fontColourPicker.get("color"),d=this.view.fontSelect.get("value"),h=this.view.fontSize.get("value"),a={},b=!1;this.originalFontColour!==c&&(a.colour=this.originalFontColour,b=!0);this.originalFontFamily!==d&&(a.fontFamily=this.originalFontFamily,
b=!0);this.originalFontSize!==h&&(a.size=this.originalFontSize,b=!0);return{nodeFont:a,didChange:b}},_getOriginalNodeFont:function(){var c={};c.colour=this.originalFontColour;c.fontFamily=this.originalFontFamily;c.size=this.originalFontSize;return c},_getUpdatedNodeFont:function(){var c=this.view.fontColourPicker.get("color"),d=this.view.fontSelect.get("value"),h=this.view.fontSize.get("value"),a={};this.originalFontColour!==c&&(a.colour=c);this.originalFontFamily!==d&&(a.fontFamily=d);this.originalFontSize!==
h&&(a.size=h);return a},_getOriginalPositioningDiff:function(){var c=this.view.get("positioningData"),d={},h=!1;this.originalPositioning.x!==c.x&&(d.positioningLeft=this.originalPositioning.x/this.backgroundDimensions.width*100,h=!0);this.originalPositioning.y!==c.y&&(d.positioningTop=this.originalPositioning.y/this.backgroundDimensions.height*100,h=!0);this.originalPositioning.w!==c.w&&(d.width=this.originalPositioning.w/this.backgroundDimensions.width*100,h=!0);this.originalPositioning.h!==c.h&&
(d.height=this.originalPositioning.h/this.backgroundDimensions.height*100,h=!0);return{positioningData:d,didChange:h}},_getOriginalPositioning:function(){return{positioningLeft:this.originalPositioning.x/this.backgroundDimensions.width*100,positioningTop:this.originalPositioning.y/this.backgroundDimensions.height*100,width:this.originalPositioning.w/this.backgroundDimensions.width*100,height:this.originalPositioning.h/this.backgroundDimensions.height*100}},_isWorkstation:function(c){return/^125\D/i.test(c)},
_onError:function(c){c&&"cancel"===c.dojoType||(this.inherited(arguments),this.view.hide())},_setFontFields:function(c){this.originalFontColour=this.defaultFont.color;this.originalFontFamily=this.defaultFont["font-family"];this.originalFontSize=parseInt(this.defaultFont["font-size"]);c&&(c.colour&&(this.originalFontColour=c.colour),c.fontFamily&&(this.originalFontFamily=c.fontFamily),c.size&&(this.originalFontSize=c.size));this.view.set("fontColour",this.originalFontColour);this.view.set("fontFamily",
this.originalFontFamily);this.view.set("fontSize",this.originalFontSize)},_setUpDialogType:function(c){0<c.primaryLink.systemId?this._setUpDialogForSystemObject(c):c.primaryLink.mnemonic?this._setUpDialogForSiteObject():c.primaryLink.keyword?this._setUpDialogForStaticKeywordObject(c):c.primaryLink.url&&this._setUpDialogForHyperLinkObject(c)},_setUpDialogForHyperLinkObject:function(c){this.view.hyperLink.set("value",c.primaryLink.url);this.view.toggleHyperLinkVisibility(!0);this.view.toggleModifiableByVisibility(!1)},
_setUpDialogForSiteObject:function(){this.view.toggleHyperLinkVisibility(!1);this.view.toggleModifiableByVisibility(!1)},_setUpDialogForStaticKeywordObject:function(){this.view.toggleHyperLinkVisibility(!1);this.view.toggleModifiableByVisibility(!1)},_setUpDialogForSystemObject:function(c){this.view.toggleHyperLinkVisibility(!1);var d=this._isWorkstation(c.primaryLink.mnemonic);c.primaryLink.isEditable?(this.view.toggleModifiableByVisibility(!0),this.view.set("modifiableBy",!1!==c.modifiableByEndUser),
this.view.set("showUnits",c.showUnits)):d?this.view.toggleModifiableByVisibility(!1):(this.view.toggleModifiableByVisibility(!0),this.view.set("modifiableBy",!1!==c.modifiableByEndUser))},_updateNodesConfiguration:function(){var c=this._getUpdatedPositioningData(this.view.get("positioningData")),d=this._getUpdatedNodeFont(),h=this.originalData.nodeConfiguration.modifiableByEndUser,a=this.originalData.nodeConfiguration.showUnits,b=this._isWorkstation(this.originalData.nodeConfiguration.primaryLink.mnemonic);
0<this.originalData.nodeConfiguration.primaryLink.systemId&&this.originalData.nodeConfiguration.primaryLink.isEditable?(h="true"===this.view.modifiableBySelector.get("value"),a=this.view.showUnitCheckBox.get("value")&&!0):b||(h="true"===this.view.modifiableBySelector.get("value"));m.mixin(c,{nodeId:this.view.nodeId,displayName:this.view.displayName.get("value"),modifiableByEndUser:h,showUnits:a,nodeFont:d,displayType:parseInt(this.view.displayTypeSelect.get("value"))});d=!1;this.originalData.nodeConfiguration.primaryLink&&
this.originalData.nodeConfiguration.primaryLink.url&&(c.linkedObject={url:this.view.hyperLink.get("value")},d=!0);this.originalData.nodeConfiguration.displayType!==c.displayType&&0===c.displayType&&0===this.originalData.nodeConfiguration.width&&("undefined"===typeof c.height&&(c.height=this.measuredFullSizeDimensions.y/this.backgroundDimensions.height*100),"undefined"===typeof c.width&&(c.width=this.measuredFullSizeDimensions.x/this.backgroundDimensions.width*100));b=this._getOriginalPositioningDiff();
h=this._getOriginalNodeFontDiff();a=this._getOriginalNode(b.positioningData,h.nodeFont);b=0|b.didChange;b|=h.didChange;b|=a.displayName!==c.displayName;b|=a.modifiableByEndUser!==c.modifiableByEndUser;b|=a.showUnits!==c.showUnits;b|=a.displayType!==c.displayType;d&&(b|=a.linkedObject.url!==c.linkedObject.url);c=[{originalNode:a,updatedNode:c}];b?this.textNodeUpdater.updateNodes(c).then(m.hitch(this.view,this.view.hide)):this.view.hide()}})})},"webview/features/navigationGroups/groupRendering/_RenderingPresenter":function(){define(["dojo/_base/declare",
"dojo/promise/all","dojo/_base/lang"],function(r,p,m){return r("webview/features/navigationGroups/groupRendering/_RenderingPresenter",null,{groupGuid:null,rangeStart:"",_isPaused:!1,_nodeManager:null,_refreshTimer:null,_refreshInterval:5E3,_renderData:null,_requestManager:null,_view:null,constructor:function(l,h,c,g,d){this._view=l;this._requestManager=h;this._nodeManager=c;this.siteId=g;this.groupId=d;this.restartUpdates()},pauseUpdates:function(){this._isPaused=!0;this._cancelRefresh()},reloadGroupDetails:function(){this._loadGroupDetails()},
restartUpdates:function(){this._isPaused=!1;this._cancelRefresh();this._queueRefresh();this._loadGroupDetails()},_cancelRefresh:function(){this._clearTimer();this._animationRequest&&(this._animationRequest.cancel(),this._animationRequest=null);this._textNodeRequest&&(this._textNodeRequest.cancel(),this._textNodeRequest=null);this._requestManager.cancelRequests()},_checkGuid:function(l){return this.groupGuid!==l},_clearTimer:function(){this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=
null)},_loadBackgroundImage:function(){var l=this._requestManager.buildBackgroundPath(this);l!==this.backgroundSource&&(this.backgroundSource=l,this._view.set("BackgroundImageSource",this.backgroundSource))},_loadGroupDetails:function(){this._requestManager.loadGroupDetails(this,this._onLoadDetails,this._onFirstLoadFailure)},_loadInitialRenderData:function(){this._isPaused||(this.rangeStart="",this._textNodeRequest=this._requestManager.loadInitialTextRenderData(this,this._onInitialLoadTextNodes,this._onLoadRenderDataError),
this._animationRequest=this._requestManager.loadInitialAnimationRenderData(this,this._onInitialLoadAnimations,this._onLoadRenderDataError))},_loadRenderData:function(){if(!this._isPaused){if(!this._textNodeRequest||this._textNodeRequest.isFulfilled())this._textNodeRequest=this._requestManager.loadUpdatedTextRenderData(this,this._onUpdatedRenderData,this._onLoadRenderDataError);if(!this._animationRequest||this._animationRequest.isFulfilled())this._animationRequest=this._requestManager.loadAnimationRenderData(this,
this._onLoadAnimations,this._onLoadRenderDataError)}},_onLoadAnimations:function(l){l.errMSG?this._onLoadRenderDataError(l):this._nodeManager.updateAnimationNodes(l.nodes)},_onInitialLoadAnimations:function(l){l.errMSG?this._onLoadRenderDataError(l):(this._onLoadAnimations(l),this._animationRequest=this._requestManager.loadAnimationRenderData(this,this._onLoadAnimations,this._onLoadRenderDataError))},_onInitialLoadTextNodes:function(l){this._nodeManager.removeNodes();this._onUpdatedRenderData(l)},
_queueRefresh:function(){this._clearTimer();this._refreshTimer=setInterval(m.hitch(this,this._loadGroupDetails),this._refreshInterval)},_onFirstLoadFailure:function(l){this._view.onError(l)},_onLoadDetails:function(l){if(l.errMSG)this._onFirstLoadFailure(l);else{var h=this._checkGuid(l.guid);this._setDetails(l);h?(this._loadBackgroundImage(),this._cancelRefresh(),this._queueRefresh(),this._loadInitialRenderData()):this._loadRenderData()}},_onUpdatedRenderData:function(l){!0!==this._isPaused&&(l.errMSG?
this._onLoadRenderDataError(l):(l.lastUpdated&&""!==l.lastUpdated&&(this.rangeStart=l.lastUpdated),this._nodeManager.updateNodes(l.nodes)))},_onLoadRenderDataError:function(l){this._view.onError(l)},_setDetails:function(l){this.groupGuid=l.guid;l.defaultFont&&(this._view.set("defaultFont",l.defaultFont),this._nodeManager.set("defaultFont",l.defaultFont));this._view.set("groupDetails",l)},destroy:function(){this.pauseUpdates();this._clearTimer()}})})},"webview/features/navigationGroups/groupRendering/_RenderingRequests":function(){define(["dojo/_base/declare",
"dojo/_base/lang","../../../xhrEnhanced"],function(r,p,m){return r("webview/features/navigationGroups/groupRendering/_RenderingRequests",null,{_animationsRenderPath:"NavigationGroupAnimationNodeRenderData/",_backgroundPath:"NavigationGroupBackground/",_detailsPath:"NavigationGroupDetails/",_renderPath:"NavigationGroupRenderData/",_initialAnimationsRenderPath:"NavigationGroupAnimationNodeRenderDataInitialLoad/",_updatedRenderPath:"NavigationGroupUpdatedRenderData/",buildBackgroundPath:function(l){return this._backgroundPath+
this._groupPath(l)},loadAnimationRenderData:function(l,h,c){this._animationRenderDataRequest&&!this._animationRenderDataRequest.isFulfilled()&&this._animationRenderDataRequest.cancel();return this._animationRenderDataRequest=m.get(this._animationsRenderPath+l.groupId,{handleAs:"json",preventCache:!0}).then(p.hitch(l,h),p.hitch(l,c))},loadInitialAnimationRenderData:function(l,h,c){this._animationDataRequest&&!this._animationDataRequest.isFulfilled()&&this._animationDataRequest.cancel();return this._animationDataRequest=
m.get(this._initialAnimationsRenderPath+l.groupId,{handleAs:"json",preventCache:!0}).then(p.hitch(l,h),p.hitch(l,c))},loadGroupDetails:function(l,h,c){this._groupDetailsRequest&&!this._groupDetailsRequest.isFulfilled()&&this._groupDetailsRequest.cancel();this._groupDetailsRequest=m.get(this._detailsPath+l.groupId,{handleAs:"json",preventCache:!0});this._groupDetailsRequest.then(p.hitch(l,h),p.hitch(l,c));return this._groupDetailsRequest},loadInitialTextRenderData:function(l,h,c){this._renderDataRequest&&
!this._renderDataRequest.isFulfilled()&&this._renderDataRequest.cancel();this._renderDataRequest=m.get(this._renderPath+l.groupId,{handleAs:"json",preventCache:!0});this._renderDataRequest.then(p.hitch(l,h),p.hitch(l,c));return this._renderDataRequest},loadUpdatedTextRenderData:function(l,h,c){this._updatedRenderDataRequest&&!this._updatedRenderDataRequest.isFulfilled()&&this._updatedRenderDataRequest.cancel();this._updatedRenderDataRequest=m.get(this._updatedRenderPath+l.groupId,{handleAs:"json",
preventCache:!0,query:{rangeStart:l.rangeStart}});this._updatedRenderDataRequest.then(p.hitch(l,h),p.hitch(l,c));return this._updatedRenderDataRequest},_groupPath:function(l){return l.groupId+"/"+l.groupGuid},cancelRequests:function(){this._animationDataRequest&&!this._animationDataRequest.isFulfilled()&&this._animationDataRequest.cancel();this._animationRenderDataRequest&&!this._animationRenderDataRequest.isFulfilled()&&this._animationRenderDataRequest.cancel();this._groupDetailsRequest&&!this._groupDetailsRequest.isFulfilled()&&
this._groupDetailsRequest.cancel();this._renderDataRequest&&!this._renderDataRequest.isFulfilled()&&this._renderDataRequest.cancel();this._updatedRenderDataRequest&&!this._updatedRenderDataRequest.isFulfilled()&&this._updatedRenderDataRequest.cancel()},destroy:function(){this.cancelRequests()}})})},"webview/features/navigationGroups/groupRendering/groupNodes/GroupNodeManager":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/Evented dojo/on dojo/store/Memory ./AnimationNode ./AnimationNodeOverlay ./TextNode webview/sys/alarmApi".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return m("webview/features/navigationGroups/groupRendering/GroupNodes/GroupNodeManager",[r,c],{nodeContainer:null,_nodeMap:null,_animationNodesMap:null,RENDER_TYPE_MAP:{TEXT_NODE:1,ANIMATION_NODE:2},constructor:function(){this._nodeMap=new d({idProperty:"nodeId"});this._animationNodesMap=new d({idProperty:"nodeId"})},postCreate:function(){var a;"Admin"===rc.pathInfo.site&&(a=this.builderStateManager.get("siteUrl"));this.alarmApiLoaded=t.loadOnce(a);this.own(this.alarmApiLoaded)},
_setNodeContainerAttr:function(a){this._set("nodeContainer",a)},addNodes:function(a){var b=[];p.forEach(a,l.hitch(this,function(a){b.push(this._createNode(a))}));return b},createDndNode:function(b,c){b.domNode||(b.renderType===this.RENDER_TYPE_MAP.TEXT_NODE?b=this.getNewTextNode(b):b.renderType===this.RENDER_TYPE_MAP.ANIMATION_NODE&&(b=new a(b)));var d=b;if(!0===b.newAnimationNode){var d=b.defaultConfig.height||b.thumbnail.offsetHeight,g=b.defaultConfig.width||b.thumbnail.offsetWidth,h=this.scaleFactorManager.get("backgroundDimensions"),
k=Math.max(d/h.height,g/h.width);1<k&&(d/=k,g/=k);var k=d/h.height*100,h=g/h.width*100,m=this.scaleFactorManager.get("dimensionScaleFactors");m&&(d&&(d*=m.height),g&&(g*=m.width));d=new a({isAvatar:!0,animationName:b.animationName,aspectLocked:b.aspectLocked,renderType:b.renderType,newAnimationNode:!0,widthPx:g,heightPx:d,relativeHeight:k,relativeWidth:h,animationAttributes:b.defaultConfig.attributes,versionId:b.defaultConfig.versionId})}else"avatar"===c&&(d=l.clone(b),d.id=null,d.nodeId=null,d.renderType!=
this.RENDER_TYPE_MAP.ANIMATION_NODE||d.newAnimationNode||d.set("animationName",b.animationName));return{node:d.domNode,data:d,type:["navGroupNode"]}},getAnimationNode:function(a){return this._animationNodesMap.get(a)},getAnimationNodeOverlays:function(){var a=[];p.forEach(this._animationNodesMap.data,function(b){a.push(b.getOverlayNode())});return a},getFontForAvatar:function(){return this.scaleFactorManager.getScaledCssFontStyling(l.clone(this.defaultFont))},getNewTextNode:function(a){a=new b(a);
a.set("scaleFactorManager",this.scaleFactorManager);a.onWidthScaleFactorChange(this.scaleFactorManager.get("widthScaleFactor"));return a},getNodeById:function(a){var b=this.getTextNode(a);b||(b=this.getAnimationNode(a));return b},getNodes:function(){return this._nodeMap.data},getTextNode:function(a){return this._nodeMap.get(a)},isAnimationNode:function(a){return this._animationNodesMap.get(a)?!0:!1},isTextNode:function(a){return this._nodeMap.get(a)?!0:!1},removeAnimationNodes:function(){p.forEach(this._animationNodesMap.data,
function(a){a.destroy()});this._animationNodesMap.setData([])},removeNodes:function(){p.forEach(this._nodeMap.data,function(a){a.destroy()});this._nodeMap.setData([])},updateAnimationNodes:function(a){this.alarmApiLoaded.then(l.hitch(this,function(b){var c=[],d=[];p.forEach(a,l.hitch(this,function(a){var f=this._animationNodesMap.get(a.nodeId);if(f){this._animationNodesMap.remove(a.nodeId);var g=f.hasOverlayNode(),h=null;g&&(h=f.getOverlayNode());p.forEach(Object.keys(a),function(b){f.set(b,a[b]);
g&&h.hasOwnProperty(b)&&h.set(b,a[b])})}else a.alarmApiPath=b,f=this._buildAnimationNode(a,b),d.push(f.getOverlayNode());c.push(f)}));p.forEach(this._animationNodesMap.data,function(a){a.destroy()});this._animationNodesMap.setData(c);this.emit("animationNodesAdded",d)}))},updateNodes:function(a){var b=[];p.forEach(a,l.hitch(this,function(a){var c=this._nodeMap.get(a.nodeId);c?p.forEach(Object.keys(a),function(b){c.set(b,a[b])}):(c=this._buildNode(a),this._nodeMap.put(c),b.push(c))}));this.emit("textNodesAdded",
b)},_buildAnimationNode:function(a){a.scaleFactorManager=this.scaleFactorManager;a.builderStateManager=this.builderStateManager;a.renderType=this.RENDER_TYPE_MAP.ANIMATION_NODE;a=new n(a,h.create("span",null,this.nodeContainer));this.own(g(a,"overlayNodeResizing",l.hitch(this,this.emit,"nodeResizing")),g(a,"overlayNodeResized",l.hitch(this,this.emit,"nodeResized")));this.builderStateManager.get("editMode")&&a.getOverlayNode();return a},_buildNode:function(a){a.scaleFactorManager=this.scaleFactorManager;
a.builderStateManager=this.builderStateManager;a.renderType=this.RENDER_TYPE_MAP.TEXT_NODE;a=new b(a);this.own(g(a,"resizing",l.hitch(this,this.emit,"nodeResizing")),g(a,"resized",l.hitch(this,this.emit,"nodeResized")));return a},_createAnimationNode:function(a){var b=this._getFreeCoordinates();a={linkedObject:a.linkedObject,nodeId:-1,positioningLeft:b.x,positioningTop:b.y,renderType:this.RENDER_TYPE_MAP.ANIMATION_NODE};this._animationNodesMap.put(this._buildAnimationNode(a));return a},_createNode:function(a){var b=
this._getFreeCoordinates();a={linkedObject:a.linkedObject,nodeId:-1,positioningLeft:b.x,positioningTop:b.y,renderType:this.RENDER_TYPE_MAP.TEXT_NODE};this._nodeMap.put(this._buildNode(a));return a},destroy:function(){this._animationNodesMap=this._nodeMap=null;this.inherited(arguments)}})})},"webview/features/navigationGroups/groupRendering/groupNodes/AnimationNode":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/text!./templates/AnimationNode.html dojo/topic dojox/html/entities webview/crossCutting/topicEvents webview/features/animations/_AnimationDestroyerMixin webview/util/Debounce webview/util/util ../_HasScaleFactorMixin ./_BasicNodeMixin ./_TrendLogLoaderMixin ./AnimationNodeOverlay".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C){return h("webview/features/navigationGroups/groupNode/AnimationNode",[p,r,m,y,v,A,w],{templateString:k,baseUrl:"webview/features/animations/resources/html/animLoader.html",clickDestinationMap:{},interactiveArea:null,mouseOverListener:null,animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation",postCreate:function(){this.inherited(arguments);this._buildAnimationLoader(this.animationLastModified);this.own(this.watch("height",c.hitch(this,this._updateAnimation)),
this.watch("width",c.hitch(this,this._updateAnimation)),this.watch("animationName",c.hitch(this,this._onAnimationChanged)))},_coordinatesInRectangle:function(a,b){return a.x>=b.x&&a.x<=b.x+b.width&&a.y>=b.y&&a.y<=b.y+b.height},_getMouseCoordsInAnimation:function(b,c){var d=a.position(b);return{x:c.pageX-d.x,y:c.pageY-d.y}},_mouseOver:function(a){if(this.interactiveArea){var d=c.hitch(this,function(a){b.set(this.domNode,{"pointer-events":a?"auto":"none"})});this._coordinatesInRectangle({x:a.pageX,
y:a.pageY},this.interactiveArea)||(d(!1),this.mouseOverListener=t(window,"mousemove",c.hitch(this,function(a){a=this._getMouseCoordsInAnimation(this.domNode,a);if(0>a.x||0>a.y||a.x>this.domNode.offsetWidth||a.y>this.domNode.offsetHeight)this.mouseOverListener&&(this.mouseOverListener.remove(),this.mouseOverListener=null),d(!0);this._coordinatesInRectangle(a,this.interactiveArea)&&d(!0)})),this.own(this.mouseOverListener))}},_setAspectLockedAttr:function(a){this._set("aspectLocked",a);this.hasOverlayNode()&&
this.overlayNode.set("aspectLocked",a)},_setAnimationLastModifiedAttr:function(a){this._set("animationLastModified",a);this._lastModifiedFor&&this.lastModifiedFor!==this.animationName&&this._onAnimationChanged();this._lastModifiedFor=this.animationName},_setGelDataAttr:function(a){if(a&&0<a.length){for(var b in a[0]){var c=a[0][b];"string"===typeof c&&(c=f.decode(c));a[0][b]=c}this.gelData=a;this._reloading&&this._hasConfigurationChanged()?this._initializeAnimation():this._updateAnimation();this._reloading=
!1}else this._isAnimationInitialized()&&(this._reloading=!0)},_setHeightAttr:function(a){this.inherited(arguments);this._set("height",a);this.hasOverlayNode()&&this.overlayNode.set("height",a)},_setPositioningLeftAttr:function(a){this.inherited(arguments);this.hasOverlayNode()&&this.overlayNode.set("positioningLeft",a)},_setPositioningTopAttr:function(a){this.inherited(arguments);this.hasOverlayNode()&&this.overlayNode.set("positioningTop",a)},_setWidthAttr:function(a){b.set(this.domNode,{width:a+
"%"});this.inherited(arguments);this._set("width",a);this.hasOverlayNode()&&this.overlayNode.set("width",a)},_updateInteractiveArea:function(a,b){this.interactiveArea=b},getOverlayNode:function(){this.overlayNode||(this.overlayNode=new C({animationName:this.animationName,aspectLocked:this.params.aspectLocked,builderStateManager:this.params.builderStateManager,displayIndex:this.params.displayIndex,height:this.params.height,nodeId:this.params.nodeId,positioningLeft:this.params.positioningLeft,positioningTop:this.params.positioningTop,
renderType:this.renderType,scaleFactorManager:this.params.scaleFactorManager,width:this.params.width},n.create("span",null,this.domNode.parentNode)),this.own(this.overlayNode,t(this.overlayNode,"editConfigurationClicked",c.hitch(this,this._onEditConfigurationClicked)),t(this.overlayNode,"resizing",c.hitch(this,this.emit,"overlayNodeResizing")),t(this.overlayNode,"resized",c.hitch(this,this.emit,"overlayNodeResized"))));return this.overlayNode},hasOverlayNode:function(){return this.overlayNode?!0:
!1},onHeightScaleFactorChange:function(){this._updateAnimation()},onWidthScaleFactorChange:function(){this._updateAnimation()},updateAttributes:function(a){this.gelData&&this.gelData[0]&&(l.forEach(a,c.hitch(this,function(a){"string"===typeof a.value&&(a.value=f.decode(a.value));this.gelData[0][a.attributeName]=a.value})),this.animationObject&&this._initializeAnimation())},_buildAnimationLoader:function(){this.source=require.toUrl(this.baseUrl);d.set(this.iframeNode,"src",this.source);this.own(t.once(this.iframeNode,
"load",c.hitch(this,this._loadAnimation)))},_dataUpdated:function(a){this._updateAnimationPoint(a)},_destroyAnimation:function(){this.animationObject&&(this._destroyHTMLAnimation(this.animationObject,this.iframeNode.contentWindow),this.animationObject=null)},_hasConfigurationChanged:function(){return this._isAnimationInitialized()?this._haveLinkedObjectsChanged()||this._haveAttributesChanged():!1},_haveAttributesChanged:function(){var a=this.gelData[0];return!l.every(Object.keys(a),c.hitch(this,function(b){return this.animationObject.gels[0][b]===
a[b]}))},_haveLinkedObjectsChanged:function(){if(this.animationObject.gels.length!==this.gelData.length)return!0;for(var a=1;a<this.gelData.length;a++){var b=this.gelData[a],c=this.animationObject.gels[a];if(!b&&c||!c&&b)return!0;if(b||c)if(c&&b&&c.groupElementLocation!==b.groupElementLocation||c&&b&&b.systemId!==c.systemId||b.mne!==c.mne)return!0}return!1},_initializeAnimation:function(){this._destroyAnimation();this._removeAnimationListeners();this.animationObject=this.animationConstructor(this.animationArgs);
this._animationListeners=[g.after(this.animationObject,"groupElementTouched",c.hitch(this,this._linkTouched),!0),g.after(this.animationObject,"dataUpdated",c.hitch(this,this._dataUpdated),!0),g.after(this.animationObject,"InteractiveAreaCallback",c.hitch(this,this._updateInteractiveArea),!0),g.after(this.animationObject,"animationMouseOver",c.hitch(this,this._mouseOver),!0)];this.gelData&&0<this.gelData.length&&(this._mixinAnimationProperties(),this._updateAnimation(),this._hasTrendData()&&this._updateTrendData())},
_isAnimationInitialized:function(){return this.animationObject&&x.isArrayNotNullOrEmpty(this.gelData)},_linkTouched:function(a){this._openClickDestination(a)},_mixinAnimationProperties:function(){if(0<this.animationObject.gels.length){var a=c.mixin({},c.clone(this.animationObject.gels[0]));this.gelData[0]=c.mixin(a,this.gelData[0]);this.animationObject.gels=this.gelData}},_onAnimationChanged:function(a,b,d){b&&(this._destroyAnimation(),this.reloadDebounce=z(this.reloadDebounce,c.hitch(this,function(){this.iframeNode.contentWindow.location.reload(!0);
this.own(t.once(this.iframeNode,"load",c.hitch(this,this._loadAnimation)))},25)))},_onEditConfigurationClicked:function(a){this.builderStateManager.get("editMode")&&q.publish(u.editAnimationConfigurationClicked,this);a.stopPropagation()},_loadAnimation:function(){if(this.iframeNode.contentWindow.animationLoader){this._destroyAnimation();var a=[this.animationFilesPath,this.animationLastModified,this.animationName].join("/")+"/",b=a+this.animationName+".js";this.animationArgs={relativePath:a,alarmApiPath:this.alarmApiPath,
groupElementTouched:function(){},InteractiveAreaCallback:function(a,b){}};this.animationLoader=this.iframeNode.contentWindow.animationLoader;this.animationLoader(b).then(c.hitch(this,function(a){this.animationConstructor=a;this._initializeAnimation()}))}},_removeAnimationListeners:function(){this._animationListeners&&0<this._animationListeners.length&&l.forEach(this._animationListeners,function(a){a.remove()});this._animationListeners=[]},_resizeAnimation:function(){if(this.animationObject){this.animationObject._loadMaps?
this._resizeViaDomNode():this._resizeViaTransform();try{this.animationObject.resize&&this.animationObject.resize()}catch(E){}}},_resizeViaDomNode:function(){var c=a.position(this.domNode);b.set(this.animationObject.domNode,{width:c.w-2+"px",height:c.h-2+"px"});this.animationObject.domNode.firstElementChild&&b.set(this.animationObject.domNode.firstElementChild,{position:"unset"})},_resizeViaTransform:function(){var c=a.position(this.domNode),c="scale("+(c.w-2)/this.animationObject.stageWidth+","+(c.h-
2)/this.animationObject.stageHeight+")";b.set(this.iframeNode.contentDocument.body,{MozTransformOrigin:"0 0",MozTransform:c,webkitTransformOrigin:"0 0",webkitTransform:c,oTransformOrigin:"0 0",oTransform:c,msTransformOrigin:"0 0",msTransform:c,transformOrigin:"0 0",transform:c,overflow:"hidden"})},_setAnimationGelData:function(){this.animationObject.gels.length===this.gelData.length?this.animationObject.setGroupElements(this.gelData):0<this.animationObject.gels.length&&this._mixinAnimationProperties()},
_updateAnimation:function(){this._resizeAnimation();if(this._isAnimationInitialized()&&this.animationObject&&!this._createTrendLogLoader())try{this._setAnimationGelData(),this.animationObject.UpdateData()}catch(E){}},destroy:function(){this._destroyTrendLogLoader();this._destroyAnimation();this._removeAnimationListeners();this.inherited(arguments)}})})},"webview/features/animations/_AnimationDestroyerMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(r,p,
m){return p("webview/features/animations/_AnimationDestroyerMixin",[],{_destroyHTMLAnimation:function(l,h){l&&(l.destroy(),r.forEach(Object.keys(l),m.hitch(this,function(c){l[c]&&"object"===typeof l[c]&&"function"===typeof l[c].destroy&&l[c].destroy()})));h.clearAllIntervals()}})})},"webview/features/navigationGroups/groupRendering/_HasScaleFactorMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(r,p){return r("webview/features/navigationGroups/_HasScaleFactorMixin",[],{_setScaleFactorManagerAttr:function(m){this._set("scaleFactorManager",
m);this.own(this.scaleFactorManager.watch("heightScaleFactor",p.hitch(this,function(l,h,c){this.onHeightScaleFactorChange(c)})));this.own(this.scaleFactorManager.watch("widthScaleFactor",p.hitch(this,function(l,h,c){this.onWidthScaleFactorChange(c)})));if(this.scaleFactorManager.heightScaleFactor)this.onHeightScaleFactorChange(this.scaleFactorManager.heightScaleFactor);if(this.scaleFactorManager.widthScaleFactor)this.onWidthScaleFactorChange(this.scaleFactorManager.widthScaleFactor)},onHeightScaleFactorChange:function(m){throw"onScaleChange: Not Implemented";
},onWidthScaleFactorChange:function(m){throw"onScaleChange: Not Implemented";}})})},"webview/features/navigationGroups/groupRendering/groupNodes/_TrendLogLoaderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on rc/date rc/util/pointObject ./trends/SystemTrendLogLoader".split(" "),function(r,p,m,l,h,c,g){return r("webview/features/navigationGroups/GroupNodes/_TrendLogLoaderMixin",[m],{_defaultTrendTimer:2E4,trendLogLoader:null,_loadTrendDataTimer:null,chartItems:[],_cancelTrendDataTimer:function(){this._loadTrendDataTimer&&
(window.clearTimeout(this._loadTrendDataTimer),this._loadTrendDataTimer=null)},_createTrendLogLoader:function(){if(null===this.trendLogLoader)for(var d=1;d<this.gelData.length;d++){var h=this.gelData[d];if(h&&h.mne&&h.systemId&&(this.pointName=c.getByMnemonic(h.mne),"function"===typeof this.pointName.isTrendLog&&this.pointName.isTrendLog())){this.trendLogLoader=new g(this.pointName,h.systemId);this._loaderCreated=l(this.trendLogLoader,"loaderCreated",p.hitch(this,function(){this._loadTrendData()}));
break}}return null!==this.trendLogLoader},_destroyTrendLogLoader:function(){null!==this.trendLogLoader&&(this.trendLogLoader.destroy(),this.trendLogLoader=null)},_getDisplayName:function(c,g){var a=/^(\d+)\D+.*/,b="",d=null;g.name&&(b=null!==(d=a.exec(g.mnemonic))&&Number(d[1])!==c?"{"+d[1]+"}"+g.name:g.name);return b},_hasTrendData:function(){return this.chartItems&&0<this.chartItems.length},_loadTrendData:function(){this.trendLogLoader&&(this.trendLogLoader.resetData(this),this.trendLogLoader.load(this).always(p.hitch(this,
function(){try{this.chartItems=this.trendLogLoader.getChartItems(),this._updateTrendData()}catch(d){console.error("Failed Fetch: ",this,d,d.message)}this._resetTrendDataTimer()})))},_parseTrendData:function(){if(0<this.chartItems.length){for(var c=[],g=6E4*(new Date).getTimezoneOffset(),a=0;a<this.chartItems.length;a++){var b={},l=this.pointName.isBACnet()?this.pointName.device:this.pointName.mainController;b.Units=this.chartItems[a].unit?this.chartItems[a].unit:"";b.strName=this._getDisplayName(l,
this.chartItems[a]);b.gValue=[];for(var k=!1,l=0;l<this.chartItems[a].data.length;l++)null!=this.chartItems[a].data[l]&&null!=this.chartItems[a].data[l].x&&(k=h.formatDateToAny(new Date(this.chartItems[a].data[l].x+g),"yyyy/MM/dd HH:mm:ss"),b.gValue.push({x:k,y:null!=this.chartItems[a].data[l].y?this.chartItems[a].data[l].y:0}),k=!0);k&&c.push(b)}for(a=0;a<c.length;a++)this.gelData.length>a+1?p.mixin(this.gelData[a+1],c[a]):this.gelData.push(c[a])}},_resetTrendDataTimer:function(){this._cancelTrendDataTimer();
this._loadTrendDataTimer=window.setTimeout(p.hitch(this,this._loadTrendData),this._defaultTrendTimer)},_updateTrendData:function(){this._parseTrendData();this.animationObject.gels.length!==this.gelData.length&&(this._mixinAnimationProperties(),this.animationObject.gels=this.gelData);this.animationObject.setGroupElements(this.gelData);1<this.gelData.length&&this.animationObject.UpdateData()}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/SystemTrendLogLoader":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/number dojo/on rc/_base/Error webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Loader webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Loader webview/sys/job".split(" "),
function(r,p,m,l,h,c,g,d,n){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/SystemTrendLogLoader",m,{pointName:null,systemId:null,io:null,bFirstLiveRecord:!1,SAMPLE_SIZE:512,_recordCount:0,_objects:null,_loaderCreatedTimer:50,_loaderCreated:null,isLC:!1,_colors:"#06F #6f0 cyan #93f red #fc0 #f60 #666".split(" "),_letters:"ABCDEFGH".split(""),constructor:function(a,b){this.pointName=a;this.systemId=b;this.set("sampleSize",this.SAMPLE_SIZE);n.loadSystemOnce(this.systemId).then(p.hitch(this,
function(){a.isBACnet()?(this._logType=this.pointName.type,this.pointInstance=this.pointName.instance,this.mainController=this.pointName.device,this.io=new g(this.systemId)):this.io=new d(this.systemId);this._loaderCreated=window.setTimeout(p.hitch(this,this._loaderCreated),this._loaderCreatedTimer)}))},get:function(a){var b="";this.hasOwnProperty(a)&&(b=this[a]);return b},getChartItems:function(){return this.io?this.io.getChartItems():[]},load:function(){if(this.io)return this.io.load(this);var a=
new Deferred;a.resolve();return a.promise},onRestartTimer:function(a){return a},resetData:function(a){this.io&&this.io.resetData(this)},safeError:function(a,b){var d;a instanceof c?d=a:"object"===typeof b?(d=new c(b),d.e=a):d=new c({name:nlsAll.unexpectedError,message:nlsAll.unexpected,suggestion:nlsAll.unexpectedFix,renderHtml:!0,e:a});return d},set:function(a,b){this[a]=b},_formatValue:function(a,b,c){return"Time"!==c?l.round(a,b):a},_loaderCreated:function(){this._loaderCreated&&(window.clearTimeout(this._loaderCreated),
this._loaderCreated=null);h.emit(this,"loaderCreated")},_onClearTimeout:function(){h.emit(this,"clearTimeout")},_replace:function(a){return a},destroy:function(){this.io&&(this.io.destroy(),this.io=null)}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Loader":function(){define(["dojo/_base/declare","./Archive","./BACnet","../rcp/Resources","rc/bacnet/_trend/io/Loader"],function(r,p,m,l,h){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Loader",
h,{liveDataClass:m,archiveDataClass:p,resourceClass:l,constructor:function(c){this.systemId=c;this.l=new this.liveDataClass(this.systemId);this._r=new this.resourceClass(this.systemId);this.a=new this.archiveDataClass({l:this,systemId:this.systemId})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Archive":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/Deferred","rc/bacnet/_trend/io/Archive"],function(r,p,m,l,h){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Archive",
h,{_path:"RCArchive/",systemId:null,constructor:function(c){c.systemId&&(this.systemId=c.systemId)},_validateArchiveConfig:function(){var c=new l;c.resolve(!0);return c.promise},_fetch:function(c,g,d,h){var a="",b="";0<d&&(a=this._dateToServiceFormat(d));h&&(b=this._dateToServiceFormat(h));var n=new l;d={gid:"TL",type:"archive",method:"GET",path:this._path+"GetPagedTLData",url:this._path+"GetPagedTLData",cmdObj:{strMne:c.pointName.toMnemonic(),dateStart:a,dateEnd:b,sampleSize:g,systemId:this.systemId},
load:p.hitch(this,function(a){try{if(a.data.Error&&console.error(a.data.Error),null!==a.data.DateFirst){var b=m.parse(a.data.DateFirst,{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a"});b||(b=new Date(a.data.DateFirst));this.dateFirst=b.getTime()-6E4*b.getTimezoneOffset();(b=m.parse(a.data.DateLast,{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a"}))||(b=new Date(a.data.DateLast));this.dateLast=b.getTime()-6E4*b.getTimezoneOffset();this._decode(c,a.data,this.dateFirst,this.dateLast,g);n.resolve(!0)}else n.resolve(!1)}catch(f){console.error("Error could not parse or decode the DateFirst or DateLast from the widget: ",
f),n.reject(f)}}),error:p.hitch(this,function(a){a=Error("Error fetching archive data:"+a.message);n.reject(a);return a})};rc.xhr.request(d);return n.promise},_fetchTotalRecordCount:function(c){var g=new l;c={gid:"TL",type:"archive",method:"GET",path:this._path+"GetTotalRecords",url:this._path+"GetTotalRecords",cmdObj:{strMne:c,systemId:this.systemId},load:p.hitch(this,function(c){g.resolve(c.data)}),error:p.hitch(this,function(c){g.resolve(c.data)})};rc.xhr.request(c);return g.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/BACnet":function(){define(["dojo/_base/declare",
"rc/bacnet/_trend/io/Bacnet","./Device","./Header"],function(r,p,m,l){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/BACnet",p,{systemId:null,constructor:function(h){this.systemId=h;this.h=new l({b:this},h);this.d=new m({b:this},h)}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Device":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/string rc/bacnet/enums rc/bacnet/io/Array rc/bacnet/_trend/io/Device rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/ReadRange rc/bacnet/io/service/ReadRange rc/_base/Error".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Device",[d],{systemId:null,constructor:function(a,b){b&&(this.systemId=b)},_fetchLogs:function(d,r,w,z){var f=new m;6===z&&(r=new a(r,c.primitiveTypes.UNSIGNED_INTEGER));d=[{o:new b(this.trend._logType,this.trend.pointInstance),pl:[{p:new a(c.propertyTypes.PROPID_LOG_BUFFER,c.primitiveTypes.ENUMERATED),i:-1,rr:new t({i:r,f:new g([],c.primitiveTypes.BIT_STRING),c:new a(w*d,c.primitiveTypes.SIGNED_INTEGER),
d:new n(new this._recordClass),fs:new a(0,c.primitiveTypes.UNSIGNED_INTEGER)},z)}]}];d={type:"bacnetSystem",gid:"BTL",systemId:this.systemId,s:new k({device:this.trend.mainController},d),timeout:25E3,load:p.hitch(this,function(a){try{if(1==a.e&&"rc/bacnet/io/Error"===a.o[0].pl[0].v.declaredClass&&37==a.o[0].pl[0].v.co.v)throw new q({name:h.substitute(l.problemInX,[l.stl]),message:this.trend._replace(l.couldNotLoad)+" "+l.dataProblem,suggestion:l.dataProblemFix,e:a});this.service=a}catch(v){throw this.trend.safeError(v,
{name:this.trend._replace(l.problemInX),message:this.trend._replace(l.couldNotLoad)+" "+l.dataProblem,suggestion:l.dataProblemFix});}}),error:function(a){}};rc.xhr.request(d).then(p.hitch(this,function(a){f.resolve(a);this.trend._onClearTimeout()}),p.hitch(this,function(a){f.reject(a)}));this.trend.onRestartTimer(25);return f.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Header":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/string rc/bacnet/_trend/io/Header rc/bacnet/enums rc/bacnet/io/DeviceObjectPropertyReferenceList rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/_base/Error".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Header",[h],{systemId:null,constructor:function(a,b){this.systemId=b},_fetch:function(h){this._recordCount=0;var k=[{o:new n(h._logType,h.pointInstance),pl:[{p:new d(c.propertyTypes.PROPID_RECORD_COUNT,c.primitiveTypes.ENUMERATED),i:-1,v:new d(0,c.primitiveTypes.UNSIGNED_INTEGER)},{p:new d(c.propertyTypes.PROPID_LOG_DEVICE_OBJECT_PROPERTY,c.primitiveTypes.ENUMERATED),i:-1,v:new g},{p:new d(c.propertyTypes.PROPID_TOTAL_RECORD_COUNT,
c.primitiveTypes.ENUMERATED),i:-1,v:new d(0,c.primitiveTypes.UNSIGNED_INTEGER)},{p:new d(c.propertyTypes.PROPID_BUFFER_SIZE,c.primitiveTypes.ENUMERATED),i:-1,v:new d(0,c.primitiveTypes.UNSIGNED_INTEGER)},{p:new d(c.propertyTypes.PROPID_LOG_INTERVAL,c.primitiveTypes.ENUMERATED),i:-1,v:new d(0,c.primitiveTypes.UNSIGNED_INTEGER)}]}];return rc.xhr.request({type:"bacnetSystem",gid:"BTL",systemId:this.systemId,s:new a({device:h.mainController},k),load:p.hitch(this,function(a){try{if(1==a.e&&"rc/bacnet/io/Error"===
a.o[0].pl[0].v.declaredClass)switch(a.o[0].pl[0].v.cl.v){case 0:case 1:case 7:throw new b({name:l.substitute(m.xNotFound,[m.stl]),message:this.trend._replace(m.couldNotLoad)+" "+m.objNotFound,suggestion:m.objNotFoundFix,e:a.o[0].pl[0].v.toStringMsg()});default:throw new b("Problem in data.");}this.service=a;h._recordCount=this.service.o[0].pl[0].v.v;h._objects=this.service.o[0].pl[1].v.l;h._totalRecordCount=this.service.o[0].pl[2].v.v;h._bufferSize=this.service.o[0].pl[3].v.v;this.interval=10*this.service.o[0].pl[4].v.v}catch(f){throw h.safeError(f,
{name:this.trend._replace(m.problemInX),message:this.trend._replace(m.couldNotLoad)+" "+m.dataProblem,suggestion:m.dataProblemFix});}}),error:p.hitch(this,function(a){return h.safeError(a,{name:l.substitute(m.xNotFound,[m.stl]),message:this.trend._replace(m.couldNotLoad)+" "+m.hostOffline,suggestion:m.hostOfflineFix})})})},_fetchProperties:function(b,g){var h=g.d?g.d.i:b.mainController,f=[{o:new n(g.o.t,g.o.i),pl:[{p:new d(c.propertyTypes.PROPID_UNITS,c.primitiveTypes.ENUMERATED),i:-1,v:new d(0,c.primitiveTypes.ENUMERATED)}]}];
return rc.xhr.request({type:"bacnetSystem",gid:"BTL",systemId:this.systemId,s:new a({device:h},f),error:function(a){this.error("_fetchProperties error: ",a)}})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Resources":function(){define("dojo/_base/declare dojo/_base/lang rc/sys/cunit rc/sys/decpnt webview/sys/desc webview/sys/job".split(" "),function(r,p,m,l,h,c){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Resources",null,{systemId:null,
constructor:function(c){this.systemId=c},load:function(){var g=h.loadSystemOnce(this.systemId);g.then(p.hitch(this,function(){return l.loadOnce()})).then(p.hitch(this,function(){return m.loadSystemOnce(this.systemId)}));g.always(p.hitch(this,function(){return c.loadSystemOnce(this.systemId)}));return g}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Loader":function(){define(["dojo/_base/declare","rc/reliable/_trend/io/Loader","./Archive","./Reliable","./Resources"],
function(r,p,m,l,h){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Loader",p,{liveDataClass:l,archiveDataClass:m,resourceClass:h,systemId:null,constructor:function(c){this.systemId=c;this.l=new this.liveDataClass(this.systemId);this._r=new this.resourceClass(this.systemId);this.a=new this.archiveDataClass({l:this,systemId:this.systemId})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Archive":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/date/locale","dojo/Deferred","rc/reliable/_trend/io/Archive"],function(r,p,m,l,h){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Archive",h,{_path:"RCArchive/",systemId:null,constructor:function(c){c.systemId&&(this.systemId=c.systemId)},_validateArchiveConfig:function(){var c=new l;c.resolve(!0);return c.promise},_fetch:function(c,g,d,h){var a="",b="";0<d&&(a=this._dateToServiceFormat(d));h&&(b=this._dateToServiceFormat(h));var n=new l;d=
{gid:"TL",type:"archive",method:"GET",path:this._path+"GetPagedTLData",url:this._path+"GetPagedTLData",cmdObj:{strMne:c.pointName.toMnemonic(),dateStart:a,dateEnd:b,sampleSize:g,systemId:this.systemId},load:p.hitch(this,function(a){try{if(a.data.Error&&console.error(a.data.Error),null!==a.data.DateFirst){var b=m.parse(a.data.DateFirst,{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a"});this.dateFirst=b.getTime()-6E4*b.getTimezoneOffset();b=m.parse(a.data.DateLast,{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a"});
this.dateLast=b.getTime()-6E4*b.getTimezoneOffset();this._decode(c,a.data,this.dateFirst,this.dateLast,g);n.resolve(!0)}else n.resolve(!1)}catch(f){console.error("Error could not parse or decode the dateFirst or dateLast from the widget: ",f),n.reject(f)}}),error:p.hitch(this,function(a){a=Error("Error fetching archive data:"+a.message);n.reject(a);return a})};rc.xhr.request(d);return n.promise},_fetchTotalRecordCount:function(c){var g=new l;c={gid:"TL",type:"archive",method:"GET",path:this._path+
"GetTotalRecords",url:this._path+"GetTotalRecords",cmdObj:{strMne:c,systemId:this.systemId},load:p.hitch(this,function(c){g.resolve(c.data)}),error:p.hitch(this,function(c){g.reject(c)})};rc.xhr.request(c);return g.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Reliable":function(){define(["dojo/_base/declare","rc/reliable/_trend/io/Reliable","./Header","./Device"],function(r,p,m,l){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Reliable",
p,{systemId:null,constructor:function(h){this.systemId=h;this.h=new m({r:this},h);this.d=new l({r:this},h)}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Header":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all rc/reliable/_trend/io/Header rc/_base/Error".split(" "),function(r,p,m,l,h,c,g){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Header",[c],{systemId:null,constructor:function(c,
g){g&&(this.systemId=g)},_fetch:function(c){var d=c.pointName,a=new l,b,p={gid:"TL",type:"rcpSystem",method:"GET",cmdObj:{dest:d.mainController,subt:d.subnetType,subd:d.subController,src:0,cmd:10,xl:Math.floor((d.comInstance-1)/this.r.BANK_SIZE),xh:0,cnt:0,systemId:this.systemId},load:m.hitch(this,function(k){k=k.data;if(1>k.length)k=new g({name:c._replace(h.problemInX),message:c._replace(h.couldNotLoad)+" "+h.objNotFound,suggestion:h.objNotFoundFix}),a.reject(k);else{b=c.isLC?23:48;var l=(d.comInstance-
1)%this.r.BANK_SIZE*b;k=k.slice(l,l+b);a.resolve(k)}}),error:m.hitch(this,function(b){console.error("_fetch","error",b);a.reject(b)})};rc.xhr.request(p);return a.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Device":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","rc/reliable/_trend/io/Device"],function(r,p,m,l){return r("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Device",[l],{systemId:null,constructor:function(h,
c){c&&(this.systemId=c)},_fetchCmd:function(h){h.systemId=this.systemId;var c=new m;h={gid:"TL",type:"rcpSystem",method:"GET",cmdObj:h,load:p.hitch(this,function(g){c.resolve(g)}),error:p.hitch(this,function(g){c.reject(g)})};rc.xhr.request(h);return c.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/TextNode":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-class dojo/dom-style dojo/i18n!webview/nls/navigationGroups dojo/text!./templates/TextNode.html dojo/topic webview/crossCutting/topicEvents ./_BasicNodeMixin ./_ResizableNodeMixin ../_HasNodeWithFontScalingMixin".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k){return l("webview/features/navigationGroups/GroupNodes/TextNode",[p,r,m,b,t,k],{WARNING_ICON_SIZE:15,WARNING_ICON_MARGIN_PX:4,navGroupStrings:g,templateString:d,_setDisplayTextAttr:function(a){this.displayValueNode.innerText=a;h.toggle(this.containerNode,"i-shortcut",!a||0===a.length)},_getNodeWithFontAttr:function(){return this.domNode},onHeightScaleFactorChange:function(a){this.inherited(arguments);this._scaleNodeIcons(a)},_scaleNodeIcons:function(a){var b=this.WARNING_ICON_SIZE*
a;a*=this.WARNING_ICON_MARGIN_PX;b+="px";b={width:b,height:b,margin:"auto "+a+"px"};c.set(this.faultIconNode,b);c.set(this.manualHandNode,b)},onEditConfigurationClicked:function(b){this.builderStateManager.get("editMode")&&(n.publish(a.editNodeConfigurationClicked,this),this.set("selectedForEdit",!0));b.stopPropagation()}})})},"webview/features/navigationGroups/groupRendering/_HasNodeWithFontScalingMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","./_HasScaleFactorMixin"],
function(r,p,m,l){return r("webview/features/navigationGroups/_HasNodeWithFontScalingMixin",[l],{scaleFactor:1,_getNodeWithFontAttr:function(){throw"_getNodeWithFontAttr: Not Implemented";},_setNodeFontAttr:function(h){this._set("nodeFont",h);this.scaleFactorManager&&this._setFont()},_getNodeFontAttr:function(){return p.clone(this.nodeFont)},_setScaleFactorManagerAttr:function(h){this.inherited(arguments);this._setFont()},onHeightScaleFactorChange:function(h){this._setFont()},onWidthScaleFactorChange:function(h){this._setFont()},
_setFont:function(){if(this.scaleFactorManager&&this.get("nodeFont")){var h=this.scaleFactorManager.getScaledCssFontStyling(this.get("nodeFont"));m.set(this.get("nodeWithFont"),h);h&&h["font-size"]?this.set("scaledFontSize",parseFloat(h["font-size"])):this.set("scaledFontSize",0)}}})})},"webview/features/navigationGroups/groupRendering/GroupRenderer":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-style dojo/on dojo/text!./templates/GroupRenderer.html dojo/topic webview/crossCutting/topicEvents ./_HasNodeWithFontScalingMixin ../../systemData/EditObjectDialog".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return l("webview/features/navigationGroups/groupRendering/GroupRenderer",[p,r,m,k],{groupId:null,scaleFactor:1,siteId:null,templateString:a,_dataRequester:null,_groupPresenter:null,postCreate:function(){this.inherited(arguments);this.own(b.subscribe(t.groupNodeClicked,h.hitch(this,this._openEditDialog)),b.subscribe(t.animationEdit,h.hitch(this,this._openHeadlessEditDialog)),b.subscribe(t.animationEditClose,h.hitch(this,this._closeHeadlessEditDialog)))},_setBackgroundDimensionsAttr:function(a){this.scaleFactorManager.set("backgroundDimensions",
a)},_setBuilderStateManagerAttr:function(a){this.own(a.watch("editMode",h.hitch(this,function(a,b,c){this._onChangeEditMode(c)})),a.watch("userEditInProgress",h.hitch(this,function(a,b,c){g.toggle(this.domNode,"edit-in-progress",c);c?this._groupPresenter.pauseUpdates():this._groupPresenter.restartUpdates()})));this._onChangeEditMode(a.get("editMode"));this._set("builderStateManager",a)},_setBackgroundImageSourceAttr:function(a){a&&""!==a?c.set(this.backgroundImage,"src",a):d.set(this.backgroundImage,
{background:"#000000 no-repeat center / cover"})},_setDefaultFontAttr:function(a){this.set("nodeFont",a)},_setGroupDetailsAttr:function(a){this.set("title",a.title);this.set("backgroundDimensions",{height:a.backgroundHeight,width:a.backgroundWidth});this._originalDimensions={height:a.backgroundHeight,width:a.backgroundWidth};this._set("groupDetails",a)},_setGroupIdAttr:function(a){this._set("groupId",Number(a))},_getNodeWithFontAttr:function(){return this.nodeContainer},_setSiteIdAttr:function(a){this._set("siteId",
Number(a))},_setTitleAttr:function(a){this._set("title",a)},onError:function(a){a&&"cancel"===a.dojoType||console.error(JSON.stringify(a))},onHeightScaleFactorChange:function(a){this.inherited(arguments);this._resizeCanvas()},onVisibilityChanged:function(){"hidden"===document.visibilityState?this._groupPresenter.pauseUpdates():!0!==this.builderStateManager.get("userEditInProgress")&&this._groupPresenter.restartUpdates()},onWidthScaleFactorChange:function(a){this.inherited(arguments);this._resizeCanvas()},
_onChangeEditMode:function(a){g.toggle(this.domNode,"edit-mode",a);g.toggle(this.domNode,"viewing-mode",!a)},_closeHeadlessEditDialog:function(){this.builderStateManager.set("userEditInProgress",!1);this._headlessEditPointDialog&&(this._headlessEditPointDialog.destroy(),this._headlessEditPointDialog=null)},_openHeadlessEditDialog:function(a){this.builderStateManager.set("userEditInProgress",!0);this._headlessEditPointDialog&&(this._headlessEditPointDialog.destroy(),this._headlessEditPointDialog=null);
this._headlessEditPointDialog=new q;this._headlessEditPointDialog.set("dialogPresenter",a);a.initializeForAnimation(this._headlessEditPointDialog)},_openEditDialog:function(a){this.builderStateManager.set("userEditInProgress",!0);this._editPointDialog||(this._editPointDialog=new q);n.once(this._editPointDialog,"hide",h.hitch(this,function(){this.builderStateManager.set("userEditInProgress",!1)}));this._editPointDialog.set("dialogPresenter",a);a.initialize(this._editPointDialog)},_resizeCanvas:function(){var a=
this.scaleFactorManager.get("backgroundDimensions"),b=this.scaleFactorManager.get("dimensionScaleFactors");a&&b&&(a={height:Math.floor(a.height*b.height)+"px",width:Math.floor(a.width*b.width)+"px"},d.set(this.backgroundImageContainer,a),d.set(this.nodeContainer,a),d.set(this.groupContainer,a))},destroy:function(){this._editPointDialog&&(this._editPointDialog.destroy(),this._editPointDialog=null);this._headlessEditPointDialog&&(this._headlessEditPointDialog.destroy(),this._headlessEditPointDialog=
null);this.inherited(arguments)}})})},"webview/features/systemData/EditObjectDialog":function(){define("dijit/ConfirmDialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!rc/nls/systemData dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/EditObjectDialog.html dojo/topic rc/util/notices webview/crossCutting/dialogs/DialogWithLoadingOverlayMixin ./PriorityArrayDialog dijit/Dialog dijit/form/Button dijit/form/FilteringSelect dijit/form/SimpleTextarea dijit/form/ValidationTextBox ../../bacnet/_widget/TimedInput".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){return m("webview/features/systemData/EditObjectDialog",[r,w],{templateString:q,rcStrings:g,webviewStrings:n,systemDataStrings:d,reasonRequired:!1,hasPriorityArray:!1,OVERRIDE_VALUES:{AUTOMATIC:1,MANUAL:2,TIMED:3,OVERRIDE:4,SWITCH:5},postCreate:function(){this.inherited(arguments);this.own(b(this._digitalValueInput.textbox,"click",l.hitch(this,this._onClickDigitalSelector)),b(this._overrideSelector.textbox,"click",l.hitch(this,this._onClickOverrideSelector)))},
_setDialogPresenterAttr:function(a){this.dialogPresenter&&this.dialogPresenter.destroy();this._set("dialogPresenter",a)},_setHasPriorityArrayAttr:function(a){h.toggle(this._priorityArrayButton.domNode,"hidden",!a);this._priorityArrayButton.set("disabled",!a);this._set("hasPriorityArray",a)},_setObjectNameAttr:function(a){this._objectNameLabel.innerHTML=a;this._set("objectName",a)},_getObjectValueAttr:function(){return this._activeEditor.item?this._activeEditor.item.value:this._activeEditor.get("value")},
_setOverrideOptionsAttr:function(a){this._overrideSelector.set({store:new k(new t({data:a,idProperty:"value"})),value:-1})},_setPriorityArrayAttr:function(a){var b=null!=a;this.set("hasPriorityArray",b);this._set("priorityArray",a);this._priorityArrayDialog&&b&&this._priorityArrayDialog.set("priorityArray",a)},_getReasonAttr:function(){return this._reasonInput.get("value")},_setReasonAttr:function(a){this._reasonInput.reset();this._reasonInput.set("value",a)},_setReasonRequiredAttr:function(a){h.toggle(this.reasonRequiredSign,
"hidden",!a);this._reasonInput.set("required",a);this._set("reasonRequired",a)},_setSelectedOverrideOptionAttr:function(a){this._overrideSelector.set("value",a)},_setTimedOverrideAttr:function(a){this._timedOverrideInput.set("value",a)},_getTimedOverrideAttr:function(){var a=this.get("valueOverrideState");return this._isTimedOverride(a)?this._timedOverrideInput.get("value"):null},_getValueOverrideStateAttr:function(){return this._overrideSelector.get("value")},onError:function(b){this._priorityArrayDialog&&
this._priorityArrayDialog.hide();var c;c=b&&b.message?b.message:b&&b.errMSG?b.errMSG:b&&b.errorMessage?b.errorMessage:a.unexpectedError;u.widget.clear();f.publish("sticky",{type:"error",message:c});console.error(JSON.stringify(b))},onSuccess:function(){f.publish("alert",{message:g.success,type:"success"})},show:function(){this.set("initializing",!0);this.inherited(arguments)},showDigitalEditor:function(a,b){this._activeEditor=this._digitalValueInput;var c=new k(new t({idProperty:"name"}));p.forEach(b,
function(a,b){c.put({value:b,name:a})});this._digitalValueInput.set("store",c);this._digitalValueInput.set("value",a);h.toggle(this.domNode,"single-line-editor",!0);this._hideAllEditors();h.toggle(this._digitalValueInput.domNode,"hidden",!1)},showNumericEditor:function(a){this._activeEditor=this._numericValueInput;this._numericValueInput.set("value",a);h.toggle(this.domNode,"single-line-editor",!0);this._hideAllEditors();h.toggle(this._numericValueInput.domNode,"hidden",!1)},showTextBlobEditor:function(a){this._activeEditor=
this._textBlobInput;this._textBlobInput.set("value",a);h.toggle(this.domNode,"single-line-editor",!1);this._hideAllEditors();h.toggle(this._textBlobInput.domNode,"hidden",!1)},showTimeEditor:function(a){this._activeEditor=this._timeValueInput;this._timeValueInput.set("value",a);h.toggle(this.domNode,"single-line-editor",!1);this._hideAllEditors();h.toggle(this._timeValueInput.domNode,"hidden",!1)},showTextFieldEditor:function(a){this._activeEditor=this._textFieldInput;this._textFieldInput.set("value",
a);h.toggle(this.domNode,"single-line-editor",!0);this._hideAllEditors();h.toggle(this._textFieldInput.domNode,"hidden",!1)},toggleOverrideOptionsEnabled:function(a){this._overrideSelector.set("disabled",!a);this._timedOverrideInput.set("disabled",!a);a||this.set("priorityArray",null)},toggleOverrideOptionsVisible:function(a){h.toggle(this.domNode,"no-override-options",!a);h.toggle(this._timedContainer,"hidden",!0);h.toggle(this._reasonInput.domNode,"with-timed",!1);this.set("hasOverrideOptions",
a)},validate:function(){var a=!0;this.hasOverrideOptions&&this._isTimedOverride(this.get("valueOverrideState"))&&(a=this._timedOverrideInput.validate());(a=a&&this._reasonInput.validate()&&this._activeEditor.validate())||this._showInputValidationError();return a},_closeErrorDialog:function(){this._errorDialog.hide()},_hideAllEditors:function(){h.toggle(this._textBlobInput.domNode,"hidden",!0);h.toggle(this._textFieldInput.domNode,"hidden",!0);h.toggle(this._timeValueInput.domNode,"hidden",!0);h.toggle(this._numericValueInput.domNode,
"hidden",!0);h.toggle(this._digitalValueInput.domNode,"hidden",!0)},_isTimedOverride:function(a){return Number(a)===this.OVERRIDE_VALUES.TIMED},_onChangeValueOverrideOption:function(a){a=this._isTimedOverride(a);h.toggle(this._reasonInput.domNode,"with-timed",a);h.toggle(this._timedContainer,"hidden",!a)},_onClickDigitalSelector:function(){var a=this._digitalValueInput.get("value"),a=this._digitalValueInput.store.query({name:a})[0],b=0;a&&(b=1+a.value);(a=this._digitalValueInput.store.query({value:b})[0])||
(a=this._digitalValueInput.store.data[0]);this._digitalValueInput.set("value",a.name)},_onClickOverrideSelector:function(){if(!this._overrideSelector.get("disabled")){var a=1+Number(this._overrideSelector.get("value"));this._overrideSelector.store.query({value:a})[0]||(a=this._overrideSelector.store.data[0].value);this._overrideSelector.set("value",a)}},_onClickCancel:function(){this.hide()},_onClickOk:function(){this.dialogPresenter.sendData()},_onClickPriorityArrayButton:function(){this._priorityArrayDialog||
(this._priorityArrayDialog=new z,this.own(this._priorityArrayDialog,b(this._priorityArrayDialog,"relinquish",l.hitch(this,function(a){this.dialogPresenter.relinquishIndexes(a)})),b(this._priorityArrayDialog,"load",l.hitch(this,function(){this.dialogPresenter.reloadPriorityArray()}))));this._priorityArrayDialog.set("objectName",this.get("objectName"));this._priorityArrayDialog.set("priorityArray",this.get("priorityArray"));this._priorityArrayDialog.show()},_showInputValidationError:function(){this._errorDialog.show()},
destroy:function(){this.dialogPresenter.destroy();this.inherited(arguments)}})})},"webview/features/systemData/PriorityArrayDialog":function(){define("dgrid/Grid dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/_WidgetsInTemplateMixin dijit/Dialog dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/text!./templates/PriorityArrayDialog.html dijit/form/Button".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z){return n("webview/features/systemData/PriorityArrayDialog",[c,h],{templateString:z,rcStrings:t,webviewStrings:k,priorityNames:t.priorityNames,reasonRequired:!1,constructor:function(){this._gridStore=new w(new u({idProperty:"pnumber"}));this._createColumnStructure()},postCreate:function(){this.inherited(arguments);this._createGrid()},_setObjectNameAttr:function(a){this._objectNameLabel.innerHTML=a},_setPriorityArrayAttr:function(b){this._grid&&this._grid.clearSelection();
d.forEach(b,a.hitch(this,function(a,b){this._gridStore.put({pcheckbox:!1,pnumber:b+1,pname:this.priorityNames[b+1]||t.available+" "+(b+1),value:null!=a?a:t.relinquish})}));this._setHeight()},onLoad:function(){},onShow:function(){this._setHeight()},onRelinquish:function(){},_connectGrid:function(){this.own(q(this._grid,["dgrid-select","dgrid-deselect"],a.hitch(this,function(){this._relinquishButton.set("disabled",0===Object.keys(this._grid.selection).length)})))},_createColumnStructure:function(){this._columnStructure=
[l({selectorType:a.hitch(this,this._createSelectorCheckbox),id:"selectorCol",label:"",field:"pcheckbox",sortable:!1}),{id:"numberCol",label:"#",field:"pnumber",sortable:!1},{id:"nameCol",label:t.priorityName,field:"pname",sortable:!1},{id:"valueCol",label:t.value,field:"value",sortable:!1}]},_createGrid:function(){this._grid=new (n([r,p,m]))({selectionMode:"none",columns:this._columnStructure,sort:[{attribute:"pnumber",descending:!1}],store:this._gridStore},this.gridNode);this._connectGrid()},_createSelectorCheckbox:function(c,
d,f){c=new g({checked:c,onChange:a.hitch(this,function(a,b){b?this._grid.select(a):this._grid.deselect(a)},f.pnumber),value:!0});b.place(c.domNode,d,"only");return c.domNode},_onClickLoad:function(){this.onLoad()},_onClickClose:function(){this.hide()},_onClickRelinquish:function(){var b=[];d.forEach(Object.keys(this._grid.selection),a.hitch(this,function(a){!0===this._grid.selection[a]&&b.push(a)}));this.onRelinquish(b)},_setHeight:function(){this._grid.resize();var a=f(".priorities-grid .dgrid-scroller")[0].offsetTop,
a=f(".priorities-grid .dgrid-content")[0].clientHeight+a;this._grid.domNode.style.height=a+"px"}})})},"webview/admin/navGroups/NavGroupToolbar":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!webview/admin/navGroups/templates/navGroupToolbar.html ../../widget/UndoRedoButtons ../../widget/ZoomTools ../../widget/AddButton".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t){return l("webview/admin/groups/NavGroupToolbar",[p,r,m,c],{site:"",siteUrlPath:"",templateString:t,_siteWideNodes:null,constructor:function(){this.webviewStrings=n;this.afterHoursStrings=d;this.errorStrings=a;this.rcStrings=g},postCreate:function(){this.inherited(arguments);this._setupListeners();this.navGroupUndoRedoButtons.enableRedoOption(!1);this.navGroupUndoRedoButtons.enableUndoOption(!1)},_setBuilderStateManagerAttr:function(a){this.own(a.watch("hasRedoItems",
h.hitch(this,function(a,b,c){this.navGroupUndoRedoButtons.enableRedoOption(c)})),a.watch("hasUndoItems",h.hitch(this,function(a,b,c){this.navGroupUndoRedoButtons.enableUndoOption(c)})),a.watch("undoRedoInProgress",h.hitch(this,function(a,b,c){this._toggleUndoRedoEnabled(!c)})));this._set("builderStateManager",a)},_setupListeners:function(){this.own(b(this.navGroupUndoRedoButtons.undoButton,"click",h.hitch(this,this.onUndoClicked)),b(this.navGroupUndoRedoButtons.redoButton,"click",h.hitch(this,this.onRedoClicked)),
b(this.viewButton.toolbarButtonIcon,"click",h.hitch(this,this.onViewClicked)),b(this.navGroupAddButton,"addObject",h.hitch(this,this.onAddObject)),b(this.navGroupAddButton,"addAnimation",h.hitch(this,this.onAddAnimation)),b(this.navGroupAddButton,"addKeyword",h.hitch(this,this.onAddKeyword)))},setSiteUrl:function(a){this.siteUrlPath=a},setZoomDropdownLevel:function(a){var b=dom.byId("dijit_form_FilteringSelect_0");a=Math.round(100*a).toString().concat("%");domAttr.set(b,"value",a)},onAddAnimation:function(){this.emit("addAnimationClicked")},
onUndoClicked:function(){this.emit("undoClicked")},onRedoClicked:function(){this.emit("redoClicked")},onViewClicked:function(){this.emit("viewClicked")},onAddKeyword:function(){this.emit("addKeywordClicked",this.site)},onAddObject:function(){this.emit("addObjectClicked")},_toggleUndoRedoEnabled:function(a){a?(this.navGroupUndoRedoButtons.enableUndoOption(this.builderStateManager.hasUndoItems),this.navGroupUndoRedoButtons.enableRedoOption(this.builderStateManager.hasRedoItems)):(this.navGroupUndoRedoButtons.enableUndoOption(!1),
this.navGroupUndoRedoButtons.enableRedoOption(!1))}})})},"webview/widget/UndoRedoButtons":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/UndoRedoButtons.html dijit/Tooltip dijit/form/Button".split(" "),function(r,p,m,l,h,c,g){return l("webview/widget/UndoRedoButtons",[p,r,m],{templateString:c,webviewStrings:h,postCreate:function(){this.inherited(arguments);this.undoButton.tooltip=
new g({connectId:this.undoButton.domNode,label:h.undo,position:["above"],showDelay:0});this.redoButton.tooltip=new g({connectId:this.redoButton.domNode,label:h.redo,position:["above"],showDelay:0})},enableUndoOption:function(c){this.undoButton.set("disabled",!c)},enableRedoOption:function(c){this.redoButton.set("disabled",!c)}})})},"webview/widget/ZoomTools":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/store/Memory dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/text!webview/widget/templates/ZoomTools.html dijit/Tooltip dijit/form/Button dijit/form/ComboBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return l("webview/widget/ZoomTools",[p,r,m],{templateString:a,webviewStrings:d,constructor:function(){this.zoomOptions=new c({data:[{id:1,label:"25%",scaleFactor:.25},{id:2,label:"33%",scaleFactor:.33},{id:3,label:"50%",scaleFactor:.5},{id:4,label:"100%",scaleFactor:1},{id:5,label:"150%",scaleFactor:1.5},{id:6,label:"200%",scaleFactor:2},{id:7,label:"300%",scaleFactor:3},{id:8,label:g.tbScaled,scaleFactor:NaN}]})},postCreate:function(){this.inherited(arguments);this._levelSelector.set("store",
this.zoomOptions);this.own(n(this._levelSelector,"change",h.hitch(this,this._onChangeZoomSelection)));this.zoomOut.tooltip=new b({connectId:this.zoomOut.domNode,label:d.zoomOut,position:["above"],showDelay:0});this.zoomIn.tooltip=new b({connectId:this.zoomIn.domNode,label:d.zoomIn,position:["above"],showDelay:0})},_setScaleFactorManagerAttr:function(a){this._set("scaleFactorManager",a);this.own(this.scaleFactorManager.watch("isMaximumScale",h.hitch(this,function(a,b,c){this.zoomIn.set("disabled",
c)})));this.own(this.scaleFactorManager.watch("isMinimumScale",h.hitch(this,function(a,b,c){this.zoomOut.set("disabled",c)})));this.own(this.scaleFactorManager.watch("widthScaleFactor",h.hitch(this,function(a,b,c){this.scaleFactorManager.get("isStretched")||(a=isNaN(this.scaleFactorManager.get("scaleFactor"))?g.tbScaled:Math.round(100*c)+"%",this._levelSelector.set("value",a))})));this._levelSelector.set("value",g.tbScaled)},_onChangeZoomSelection:function(a){var b=this.zoomOptions.query({label:a})[0];
b?this.scaleFactorManager.set("scaleFactor",b.scaleFactor):(a=(a=/^(\d+).?\d*?%?$/i.exec(a))?a[1]/100:this.scaleFactorManager.get("scaleFactor"),this.scaleFactorManager.set("scaleFactor",a))},_onClickZoomIn:function(){this.scaleFactorManager.scaleUp()},_onClickZoomOut:function(){this.scaleFactorManager.scaleDown()}})})},"webview/reliable/PointsReport":function(){define("dgrid/Grid dgrid/editor dgrid/extensions/ColumnResizer dgrid/extensions/DnD dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/Textarea dijit/form/TextBox dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dnd/Manager dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!../nls/pointReports dojo/i18n!../nls/worksheets dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!rc/nls/errorMessages dojo/json dojo/on dojo/promise/all dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./_pointsReport/templates/PointsReport.html dojo/topic rc/_base/Error rc/_base/util rc/_Widget ./_pointsReport/PointEditor ./_pointsReport/PointsReportColumnHider ./_pointReportDndAvatar ../admin/_ConfirmGridDeleteMixin ../admin/_ErrorMessageMixin ../admin/_GridAutoRefreshMixin ../admin/pointReportDndSource ../admin/SearchableWidgetWithTree ../admin/worksheets/widgets/DescriptionEditor ../util/audit ../util/pointObject ../util/util ../widget/dGridExtensions/dGridExcelExporterMixin ../widget/WarningDialog ../widget/WarningDialogEnums ../xhrEnhanced ./_pointsReport/ValueInput ../admin/widget/SearchForObjectResults ./_pointsReport/PointsReportToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I,K,L,M,O,P,Q,T,R,S,aa,N,U,W,da,Y,V,X,Z,ca,ha,ea,fa,ba,ja,ia,ga,ka,la){return f("webview/reliable/PointsReport",[N,ca,Y,V,X,ja],{errorStrings:B,templateString:T,webviewStrings:E,worksheetStrings:F,dndAvatar:da,_asyncRequestDeferred:null,_autoManualStore:null,_autoManualTimedStore:null,_autoManualTypes:null,_canEdit:!1,_checkBoxClass:".dijitCheckBox",_columnsChanged:!1,_columnIdIndexMap:null,_columnsShown:null,_columnStructure:null,
_confirmDialog:null,_defaultStatusTimer:500,_defaultTimedOverride:30,_dndSource:Z,_firstLoad:!0,_grid:null,_gridDisabled:null,_hasElevatedPermission:rc.session.hasRole(rc.session.roles2.modifyPointReports,!0),_hasRowsSelected:!1,_inUpdateMode:!1,_isSelectAll:!0,_pointEditor:null,_pointPropertyChangeMask:null,_reportWasUpdated:!1,_pointsReportStore:null,_pointsToUpdate:null,_processId:null,_statusInteval:null,_updateTimer:null,_columnMapping:{selectorCol:{webviewIndex:0,studioIndex:0},nameCol:{webviewIndex:1,
studioIndex:1},mneCol:{webviewIndex:2,studioIndex:2},valueCol:{webviewIndex:3,studioIndex:3},autoManualCol:{webviewIndex:4,studioIndex:4},timedCol:{webviewIndex:5,studioIndex:8},unitCol:{webviewIndex:6,studioIndex:5},priorityCol:{webviewIndex:7,studioIndex:6},changedCol:{webviewIndex:8,studioIndex:7},errorCol:{webviewIndex:9,studioIndex:9},deviceNameCol:{webviewIndex:10,studioIndex:10},displayNameCol:{webviewIndex:11,studioIndex:11},descriptionCol:{webviewIndex:12,studioIndex:12}},autoManualEnums:{auto:0,
manual:1,timed:2},propertyChangedMask:{timed:1,value:2,autoManual:4,description:8,displayName:16},constructor:function(){this.rcStrings=J;this.rcAlarmStrings=H;this.rcErrors=G;this.pointReportStrings=D;this._autoManualTypes=[this.rcStrings.auto,this.rcStrings.manual,this.pointReportStrings.timedOverride];this._autoManualStore=new O({data:[{id:this.autoManualEnums.auto,name:this._autoManualTypes[this.autoManualEnums.auto]},{id:this.autoManualEnums.manual,name:this._autoManualTypes[this.autoManualEnums.manual]}]});
this._autoManualTimedStore=u.clone(this._autoManualStore);this._autoManualTimedStore.add({id:this.autoManualEnums.timed,name:this._autoManualTypes[this.autoManualEnums.timed]});this._autoManualTimedStore=u.clone(this._autoManualStore);this._autoManualTimedStore.add({id:this.autoManualEnums.timed,name:this._autoManualTypes[this.autoManualEnums.timed]});this._pointsReportStore=new P(new O({idProperty:"mne"}));this._setSupportedTypes();this._overrideSpecificErrorMessages();this._pointPropertyChangeMask=
this.propertyChangedMask.timed|this.propertyChangedMask.value|this.propertyChangedMask.autoManual|this.propertyChangedMask.description},postCreate:function(){this.inherited(arguments);this._fetch().then(u.hitch(this,function(){this._buildColumnStructure();this._render().then(u.hitch(this,this.onInitSuccess))}),u.hitch(this,function(a){setTimeout(u.hitch(this,this._onInitError,a),500)}));this.own(w.after(this.resultsWidget,"resize",u.hitch(this,this.resize)));this._setupManager()},createConfirmDialog:function(a,
b){null===b&&(b=new ia({type:ga.types.binaryConfirm,closeButtonVisible:!1,title:E.confirmUnsavedChanges,text:B.unsavedChangesContinue}));var c=b.on("close",u.hitch(this,function(b){switch(b){case ga.returnValues.oneOrYes:a.resolve();break;case ga.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+" - _confirm(): Invalid Choice",b)}c.remove()}));this.own(b,c);b.open();return b},insertPoint:function(a,b){a.insertNodes(!1,[{sysId:null!==b.sysId?b.sysId:-1,sysName:null!==b.sysName?
b.sysName:"",deviceName:null!==b.deviceName?b.deviceName:"",pointName:null!==b.pointName?b.pointName:"",pointMnemonic:null!==b.pointMnemonic?b.pointMnemonic:"",pointType:null!==b.pointType?b.pointType:""}])},makeClean:function(){this.inherited(arguments);this._saveButton.set("disabled",!0);this._cancelButton.set("disabled",!0);this._pointsReportStore.query({changed:!0}).forEach(u.hitch(this,function(a){a.changed=!1;a.changeMask=0;this._pointsReportStore.put(a)}));this._grid.revert();this._grid.clearSelection();
this._setFetchTimeout()},makeDirty:function(){this.inherited(arguments);this._saveButton.set("disabled",!1);this._cancelButton.set("disabled",!1);this._clearFetchTimeout()},print:function(){this.printDGrid(this._grid)},publishSearchable:function(){this._hasElevatedPermission&&R.publish("searchableWidget",this._supportedObjectTypes,this)},_setCanEditAttr:function(a){this._canEdit=a;this._toolbar&&this._toolbar.set("canEdit",a);this._set("canEdit",a)},_buildAuditLogContext:function(a){var b=[{systemId:this.system,
objectName:"#"+this.mnemonic}];q.forEach(a,u.hitch(this,function(a){b.push({systemId:this.system,objectName:a.mne})}));ea.setContextDataWithSiteId(this.site,b,this.fullTitle)},_buildColumnStructure:function(){var c=new z;this.own(c);this._columnStructure=[g({selectorType:u.hitch(this,this._createSelectorCheckbox),id:"selectorCol",field:"id",label:"",reorderable:!1,resizable:!1,hidden:!this._canEdit,sortable:!0,unhidable:!0,shown:this._columnsShown.id,exporter:function(){return""}}),{field:"deviceName",
label:this.pointReportStrings.deviceName,id:"deviceNameCol",sortable:!0,shown:this._columnsShown.deviceName},{field:"name",label:this.rcStrings.spName,id:"nameCol",sortable:!0,shown:this._columnsShown.name},p({canEdit:u.hitch(this,function(){return this._hasElevatedPermission}),editor:b,field:"displayName",label:this.pointReportStrings.displayName,id:"displayNameCol",sortable:!0,shown:this._columnsShown.displayName,editOn:"click",canEdit:u.hitch(this,this._canEditRow),editorArgs:{baseClass:"rcTextBox",
maxLength:25},formatter:u.hitch(this,function(a){return a})}),p({editor:a,editOn:"none",id:"descriptionCol",label:this.rcStrings.description,field:"description",sortable:!0,canEdit:!1,renderCell:u.hitch(this,this._buildDescriptionCell),shown:this._columnsShown.description}),{field:"mne",label:this.rcStrings.mnemonic,id:"mneCol",sortable:!0,shown:this._columnsShown.mne},p({editor:la,editOn:"click",field:"value",label:this.rcStrings.value,id:"valueCol",sortable:!0,shown:this._columnsShown.value,canEdit:u.hitch(this,
this._canEditRow),formatter:u.hitch(this,this._formatValueColumn),exporter:u.hitch(this,this._formatValueColumn)}),{field:"units",label:this.rcStrings.unit,id:"unitCol",sortable:!0,shown:this._columnsShown.units,formatter:function(a){return a.join("/")}},p({editor:n,editOn:"click",label:this.rcStrings.autoManual,field:"autoManual",id:"autoManualCol",sortable:!0,shown:this._columnsShown.autoManual,editorArgs:{store:this._autoManualTimedStore,baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!1,
queryExpr:"*${0}*"},canEdit:u.hitch(this,function(a){if(!this._canEditRow(a)||!rc.session.hasRole(rc.session.roles.autoManual)||0<a.mne.indexOf("AY"))return!1;a.supportsTimedOverride?this._grid.columns.autoManualCol.editorInstance.set("store",this._autoManualTimedStore):this._grid.columns.autoManualCol.editorInstance.set("store",this._autoManualStore);return!0}),set:function(a){return Number(a.autoManual)},get:function(a){return Number(a.autoManual)},formatter:u.hitch(this,this._formatAutoManualColumn),
exporter:u.hitch(this,this._formatAutoManualColumn)}),p({editor:t,editOn:"click",label:this.pointReportStrings.timedOverride,field:"timedOverride",id:"timedCol",sortable:!0,shown:this._columnsShown.timedOverride,editorArgs:{baseClass:"rcTextBox",maxLength:5,pattern:"^\\d{2}:\\d{2}$"},className:u.hitch(this,this._useDisableClassIfNotEditable),canEdit:u.hitch(this,this._canEditTimedOverride),get:u.hitch(this,function(a){return Number(a.autoManual)===this.autoManualEnums.timed?this._minutesToTimeString(a.timedOverride):
this._minutesToTimeString(this._defaultTimedOverride)}),formatter:u.hitch(this,function(a,b){return b.supportsTimedOverride&&Number(b.autoManual)===this.autoManualEnums.timed&&null!==a?a:""})}),{field:"priority",label:this.rcAlarmStrings.priority,id:"priorityCol",sortable:!0,shown:this._columnsShown.priority},{field:"changed",label:this.pointReportStrings.changed,id:"changedCol",sortable:!1,shown:this._columnsShown.changed,formatter:function(a){return!0===a?'\x3cspan class\x3d"svg-changedColIcon"\x3e\x3c/span\x3e':
""},exporter:function(){return""}},{field:"error",label:this.pointReportStrings.errorStatus,id:"errorCol",sortable:!0,shown:this._columnsShown.error,formatter:u.hitch(this,function(a,b){return a.code===this.SuccessCode||!0===b.unsaved?"":this._getErrorText({errStatus:a.code,errMSG:a.msg})})}];c.resolve(this._columnStructure);return c.promise},_buildDescriptionCell:function(a,b,c){var d=this._canEditRow(a),d=A.create("div",{title:Q.substitute(this.rcStrings.editX,[this.rcStrings.description]),"class":"description-container"+
(d?" colourlessLink":"")},c,"only");b=b||"";A.create("span",{title:b,innerHTML:b.replace(/\n/g,"\x3cbr /\x3e"),"class":"description-text"},d,"first");A.create("span",{"class":"webviewIcon textEditIcon"},d,"last");this.own(K(c,"click",u.hitch(this,this._showDescriptionDialog,b,a)));return d},_buildToolbar:function(){this._canEdit&&this._createToolbar()},_canEditDescription:function(a){return a.mne.includes("AY")?!1:this._canEditRow(a)},_canEditPointType:function(a){return fa.canEditByMnemonic(a.mne)},
_canEditRow:function(a){return!this._gridDisabled&&a.error.code===this.SuccessCode&&this._canEdit&&!this._inUpdateMode&&this._canEditPointType(a)},_canEditTimedOverride:function(a){return this._canEditRow(a)&&rc.session.hasRole(rc.session.roles.autoManual)&&Number(a.autoManual)===this.autoManualEnums.timed},_checkProgress:function(a){try{var b=a.errStatus;if(b===this.OperationInProgressCode){this._processId=a.data.processId;var c=a.data.total,d=a.data.completed;0!==c?(this._asyncRequestDeferred.progress(Math.ceil(d/
c*100)+"%"),this._pollForStatus()):this._asyncRequestDeferred.reject("Divide By Zero")}else b!==this.SuccessCode?(this._clearPollingInterval(),this._displayError(a),this._asyncRequestDeferred.reject(a)):(this._clearPollingInterval(),this._worksheetNeedsSaving()?this._performSaveOfWorksheet():this._asyncRequestDeferred.resolve(a))}catch(oa){console.error(this.declaredClass+" - _checkProgress(): Error checking progress",oa),this._asyncRequestDeferred.reject(oa),this._clearPollingInterval()}},_clearPollingInterval:function(){null!==
this._statusInteval&&(clearInterval(this._statusInteval),this._statusInteval=null)},_createDescriptionDialog:function(){this._descriptionEditorDialog||(this._descriptionEditorDialog=new ha({baseClass:"description-editor-dialog"}),this.own(this._descriptionEditorDialog))},_connectGrid:function(){this.inherited(arguments);this.own(K(this._grid,[".dgrid-column-mneCol:dgrid-sort",".dgrid-column-nameCol:dgrid-sort",".dgrid-column-valueCol:dgrid-sort",".dgrid-column-unitCol:dgrid-sort"],u.hitch(this,this._customGridSort)),
K(this._grid,"dgrid-sort",u.hitch(this,this.destroyUnitsArrow)),K(this._grid,".dgrid-column-autoManualCol:dgrid-datachange",u.hitch(this,this._onAutoManualChanged)),K(this._grid,"dgrid-datachange",u.hitch(this,this._onGridItemChanged)),K(this._toolbar,"exportClicked",u.hitch(this,this.exportToCSV,this._grid,this.title+".csv",this.title)),K(this._grid.dndSource,"Drop",u.hitch(this,this._onDrop)),K(this._grid,".dgrid-column-descriptionCol:dgrid-editor-show",u.hitch(this,this._onEditorShowDescription)),
K(this._grid,"columnChange",u.hitch(this,this._onColumnHiddenChange)),w.after(this._grid,"renderArray",u.hitch(this,this._selectAll,!1),!0),w.before(this._grid,"gotoPage",u.hitch(this,this._onGoToPage)),w.after(this._grid,"updateDirty",u.hitch(this,function(){this._grid.dirty={}})))},_createSelectorCheckbox:function(a,b,c){a=new d({checked:this._isRowSelected(c),definedValue:c.mne,disabled:this._gridDisabled||c.unsaved?!0:!1});A.place(a.domNode,b,"only");this.own(K(a,"change",u.hitch(this,function(a,
b){b?this._grid.select(a):this._grid.deselect(a)},c.mne)));return a.domNode},_isRowSelected:function(a){return this._grid&&!0===this._grid.selection[a.mne]},_createGrid:function(){var a=new z;this.own(a);if(null===this._grid){this._grid=new (f([r,h,c,W,m,l]))({columns:this._columnStructure,className:"dgrid-autoheight",selectionMode:"none",selectorType:"checkbox",sort:[{attribute:"id",descending:!1}],store:this._pointsReportStore,showLoadingMessage:!0,dndParams:{accept:["pointsReportPoint"],isSource:!1,
withHandles:!0,checkAcceptance:u.hitch(this,function(a){return a.current.item?0===this._pointsReportStore.query({mne:a.current.item.pointMnemonic}).length:!1})},deselectOnRefresh:!1},this.gridNode);this.own(this._grid);this._grid.startup();a.resolve(this._grid);var b=K(this._grid,"dgrid-refresh-complete",u.hitch(this,function(){this._loadPointsData();b.remove()}));this._connectGrid();y.set(this._grid.bodyNode,"data-dnd-content",this.pointReportStrings.dropObjectsHere)}else a.resolve(this._grid);return a.promise},
_createToolbar:function(){this._selectAllButton=this._toolbar.getButton("selectAll");this._saveButton=this._toolbar.getButton("save");this._cancelButton=this._toolbar.getButton("cancel");this._editValuesButton=this._toolbar.getButton("edit");this._exportButton=this._toolbar.getButton("export");this._columnToggleButton=this._toolbar.getButton("columnToggle");this._deleteButton=this._toolbar.getButton("delete");this._modeButton=this._toolbar.getButton("mode");this.own(K(this._toolbar,"selectAllClicked",
u.hitch(this,this._toggleSelection)),K(this._toolbar,"saveClicked",u.hitch(this,this._onSave,!0)),K(this._toolbar,"cancelClicked",u.hitch(this,this._onCancel)),K(this._toolbar,"editClicked",u.hitch(this,this._showEditDialog)),K(this._toolbar,"toggleColumnsClicked",u.hitch(this,this._positionAndShowColumnSelector)),K(this._toolbar,"deleteClicked",u.hitch(this,this._deletePoints)));this.connectExportButton();return this._toolbar},_customGridSort:function(a){a.preventDefault();var b={mne:this._sortMne,
name:this._sortName,value:this._sortValues,units:this._sortUnits},c=null,d=a.sort[0],c=null,f=!1,c="undefined"!==typeof this._grid.sortObject?this._grid.sortObject:this._grid.get("sort")[0];c.attribute===d.attribute&&(f=!1===c.descending);b.hasOwnProperty(d.attribute.toLowerCase())?(c=b[d.attribute.toLowerCase()],this._grid.sortObject=d,this._grid.sortObject.descending=f,this._grid.set("sort",u.hitch(this,c,f)),this._grid.updateSortArrow(a.sort,!1)):console.error(this.declaredClass+" - _customGridSort(): Unexpected sort attribute",
d)},_deletePoints:function(){if(!this._canEdit)return!1;this._confirmDelete(this._getSelectedRowKeys(),Q.substitute(this.worksheetStrings.confirmDeleteX,[this.webviewStrings.points.toLowerCase()]))},_descriptionSet:function(a,b){if(a.description!==b){var c=this._pointsReportStore.getIdentity(a),d=this._grid.cell(c,"descriptionCol"),f={grid:this._grid,cell:d,rowId:c,value:b,bubbles:!0,cancelable:!0};this._grid.updateDirty(c,"description",b);K.emit(d.element,"dgrid-datachange",f);this._grid.refresh()}},
_disableEdits:function(a){this._gridDisabled=a;this._cancelButton.set("disabled",a);this._saveButton.set("disabled",a||!this._isGridDirty());this._toolbar.toggleEditMultiple(a||!this._hasRowsSelected)},_displayError:function(a){var b="sticky",c="error",d=a.errStatus;d==this.BACnetError?(a.data&&a.data.data?b=this._populateStore(a.data.data):(c=new z,b=c.promise,c.resolve(),this.own(c)),b.then(u.hitch(this,function(){this._styleErrorRows()}))):(a=this._getErrorMessage(a.errStatus,a.errMSG),d===this.SuccessCode?
(b="alert",c="success"):d===this.OperationInProgressCode&&(b="alert",c="info"),R.publish(b,{type:c,message:a}))},_fetch:function(a){var b=new z;this.own(b);ka.get("PointsReport",{handleAs:"json",query:{mne:this.mnemonic,systemId:this.system}}).then(u.hitch(this,function(c){c.errStatus&&Number(c.errStatus)===this.SuccessCode&&(Number(rc.session.getAttribute("AccessLevel"))<c.data.securityLevel?b.reject(new S({name:this.errorStrings.accessDenied,message:this.errorStrings.insufficientAccessLevel,suggestion:this.errorStrings.contactAdmin,
e:"Access level of the user is less than the security level of the report"})):(this._populateStore(c.data,a),this._removeDeletedPointsFromStore(c.data.pointList),this._columnsShown=c.data.showList,b.resolve(c)))}));return b.promise},_formatAutoManualColumn:function(a,b){return b.mne&&0<b.mne.indexOf("AY")?"":this._autoManualTypes[a]},_formatValueColumn:function(a,b){return b.error.code!==this.SuccessCode?!0===b.unsaved?"":b.error.code===this.OperationInProgressCode?this.rcErrors.dataLoading:this.rcErrors.inError:
"analog"===a.type||"time"===a.type?a.value:b.units[a.value]},_getDataForAudit:function(){var a=[];q.forEach(this._pointsToUpdate,u.hitch(this,function(b){this._pointsReportStore.get(b.mne).error.code===this.SuccessCode&&a.push(b)}));return a},_getErrorText:function(a){return this._getErrorMessage(a.errStatus,a.errMSG)},_getSelectedRowKeys:function(){return Object.keys(this._grid.selection).filter(u.hitch(this,function(a){return this._grid.selection[a]}))},_isGridDirty:function(){return 0<this._pointsReportStore.query({changed:!0}).length},
_loadPointsData:function(){var a=new z;this.own(a);ka.get("PointsReport/GetData",{handleAs:"json",query:{mne:this.mnemonic,systemId:this.system}}).then(u.hitch(this,function(b){!b.errStatus||b.errStatus!==this.SuccessCode&&b.errStatus!==this.OperationInProgressCode||(this._populateStore(b.data).then(u.hitch(this,this._styleErrorRows)),this._buildAuditLogContext(b.data),a.resolve(),this._firstLoad&&(this._firstLoad=!1,this.publishSearchable(),this._setFetchTimeout()))}),u.hitch(this,function(b){console.error(this.declaredClass+
" - _loadPointsData(): Error updating points",b);a.reject(b)}));return a.promise},_minutesToTimeString:function(a){if(null===a)return"";var b=[],c=Math.floor(a/60);a-=60*c;10>c&&b.push("0");b.push(c);b.push(":");10>a&&b.push("0");b.push(a);return b.join("")},_onClose:function(){this.inherited(arguments);this.resize()},_toggleColumn:function(a){q.forEach(this._columnStructure,u.hitch(this,function(b){b.unhidable||b.field!==a||this._grid.toggleColumnHiddenState(b.id,!this._columnsShown[a])}))},_onCancel:function(){if(this._resultsOpened)this.resultsWidget.onCloseResults();
this._removeUnsavedPoints();this._grid.getColumnHiderMenuState()&&this._positionAndShowColumnSelector();this._fetch(!1).then(u.hitch(this,function(){Object.keys(this._columnsShown).forEach(u.hitch(this,function(a){this._toggleColumn(a)}))}));this._loadPointsData();this.makeClean()},_onColumnHiddenChange:function(a){var b=this._grid.columns[a.columnId];if("undefined"!==typeof b){var c=b.field;a=a.isHide;this._columnsChanged=!0;b.shown=!a;this._columnsShown[c]=!a;this._dirty||this.makeDirty()}},_onDrop:function(){this._dirty||
this.makeDirty()},_onGridItemChanged:function(a){var b=this._pointsReportStore.get(a.rowId);switch(a.cell.column.field.toLowerCase()){case "value":b.value.value!=a.value.value&&(b.changed=!0,b.value=a.value,b.changeMask|=this.propertyChangedMask.value);break;case "automanual":b.autoManual!=Number(a.value)&&(b.changed=!0,b.autoManual=Number(a.value),b.changeMask|=this.propertyChangedMask.autoManual,b.autoManual===this.autoManualEnums.timed&&(b.changeMask|=this.propertyChangedMask.timed));break;case "timedoverride":b.timedOverride!=
this._timeStringToMinutes(a.value)&&(b.changed=!0,b.timedOverride=this._timeStringToMinutes(a.value),b.changeMask|=this.propertyChangedMask.timed);break;case "displayname":b.displayName!=a.value&&(b.changed=!0,b.displayName=a.value,b.changeMask|=this.propertyChangedMask.displayName,this._reportWasUpdated=!0);break;case "description":if(b.description=a.value)b.changed=!0,b.description=a.value,b.changeMask|=this.propertyChangedMask.description;break;default:console.error(this.declaredClass+" - _onGridItemChanged(): Unknown field modifed",
a.cell.column.field)}1==b.changed&&(this._pointsReportStore.put(b),this.makeDirty());this._grid.clearSelection()},_onSave:function(a){var b=new z;this.own(b);if(this._resultsOpened)this.resultsWidget.onCloseResults();var c=K(this,"sendReasonAdded",u.hitch(this,function(d){c.remove();d&&(this._disableEdits(!0),this._performSave().then(u.hitch(this,function(c){this._pointsReportStore.query({unsaved:!0}).forEach(u.hitch(this,function(a){a.unsaved=!1}));this._saveComplete(a,c);this._grid.getColumnHiderMenuState()&&
this._positionAndShowColumnSelector();b.resolve()}),u.hitch(this,function(a){this._removeUnsavedPoints();this._disableEdits(!1);b.reject(a)})))}));0<u.clone(this._pointsReportStore.query(u.hitch(this,function(a){return 0!==(a.changeMask&(this.propertyChangedMask.timed|this.propertyChangedMask.value|this.propertyChangedMask.autoManual|this.propertyChangedMask.description))}))).length?this.sendWithReason("points-report"):(this._changeReason="",this.emit("sendReasonAdded",!0));return b.promise},_onSelectionChange:function(a){this._hasRowsSelected=
!1;var b="dgrid-select"===a.type,c=null,d=null;q.forEach(a.rows,u.hitch(this,function(a){c=M(this._checkBoxClass,a.element)[0];d=k.byNode(c);d.set("checked",b)}));for(var f in this._grid.selection)if(this._grid.selection[f]){this._hasRowsSelected=!0;break}a=!1;var g=0;if(this._hasRowsSelected)for(f in this._grid.selection)if(this._grid.selection[f]){var h=this._grid.store.get(f);if(!this._canEditPointType(h)){a=!0;break}g++}this._canEdit&&(this._toolbar.toggleDeleteButton(this._hasRowsSelected),this._inUpdateMode||
this._toolbar.toggleEditMultiple(!this._hasRowsSelected||a));this._grid._total!==g?(this._toolbar.toggleSelectAllButton(!1),this._isSelectAll=!0):(this._toolbar.toggleSelectAllButton(!0),this._isSelectAll=!1)},_overrideSpecificErrorMessages:function(){this.ErrorMessageMap[this.SuccessCode]=this.errorStrings.operationSuccessful;this.ErrorMessageMap[512]=this.errorStrings.savedWithErrors;this.ErrorMessageMap[513]=this.errorStrings.webviewServiceError;this.ErrorMessageMap[518]=this.pointReportStrings.propertyReferencesNotSupported;
this.ErrorMessageMap[519]=this.pointReportStrings.programObjectsNotSupported},_onAutoManualChanged:function(a){var b=this._pointsReportStore.get(a.rowId);b.timedOverride=Number(a.value)===this.autoManualEnums.timed?this._defaultTimedOverride:null;this._pointsReportStore.put(b)},_onGoToPage:function(a,b){if(a!==this._grid._currentPage||!0===b)if(this._isGridDirty()||"undefined"!==typeof b&&!0!==b){var c=new z;this.own(c);this._confirmDialog=this.createConfirmDialog(c);c.then(u.hitch(this,function(a){this._onCancel();
this._grid.gotoPage(a,!0)},a));return[this._grid._currentPage]}},_performDelete:function(){var a=this._getSelectedRowKeys(),b=[];q.forEach(a,u.hitch(this,function(a){b.push(this._pointsReportStore.get(a).id-1)}));ka.del("PointsReport",{handleAs:"json",data:{mnemonic:this.mnemonic,reportName:this.title,systemId:this.system,pointsPositions:b}}).then(u.hitch(this,function(a){this._displayError(a);a.errStatus===this.SuccessCode&&(this._reportWasUpdated=!0,this._fetch())}),u.hitch(this,function(a){this._reportWasUpdated=
!1;this._displayError({errStatus:this.UnexpectedCode,errMSG:a.message})}))},_performSaveOfValues:function(){if(0<this._pointsToUpdate.length){var a={mne:this.mnemonic,points:I.stringify(this._pointsToUpdate),systemId:this.system,siteId:this.site};this._validateApprovalSession(a).then(u.hitch(this,function(){ka.put("PointsReport",{handleAs:"json",data:a}).then(u.hitch(this,this._checkProgress),u.hitch(this,function(a){console.error(this.declaredClass+" - _performSave(): Error sending save request",
a);this._asyncRequestDeferred.reject(a)}))}),u.hitch(this,function(){this._disableEdits(!1)}))}else this._asyncRequestDeferred.resolve({errStatus:this.SuccessCode,data:{completed:1,data:[],processId:-1,total:0}})},_performSaveOfWorksheet:function(){var a=u.clone(this._pointsReportStore.query({unsaved:!0})),b=u.clone(this._pointsReportStore.query(u.hitch(this,function(a){return 0!==(a.changeMask&this.propertyChangedMask.displayName)&&(a.error.code===this.SuccessCode||!0===a.unsaved)})));ka.put("PointsReport/Update",
{handleAs:"json",data:{reportName:this.title,systemId:this.system,mnemonic:this.mnemonic,pointsMnemonics:q.map(a,u.hitch(this,function(a){return a.mne})),columnChanged:this._columnsChanged,columnShow:I.stringify(this._columnsShown),updatedPoints:q.map(b,function(a){return I.stringify({id:a.id,mne:a.mne,displayName:a.displayName})})}}).then(u.hitch(this,function(a){this._displayError(a);a.errStatus===this.SuccessCode?(this._reportWasUpdated=!0,this._asyncRequestDeferred.resolve(a)):(this._reportWasUpdated=
!1,this._asyncRequestDeferred.reject(this._getErrorMessage(a.errStatus)))}),u.hitch(this,function(a){this._reportWasUpdated=!1;this._asyncRequestDeferred.reject(a);this._displayError({errStatus:this.UnexpectedCode,errMSG:a.message})}))},_performSave:function(){null!==this._asyncRequestDeferred&&(this._asyncRequestDeferred.cancel("New Request"),this._asyncRequestDeferred=null);this._asyncRequestDeferred=new z;this.own(this._asyncRequestDeferred);this._pointsToUpdate=u.clone(this._pointsReportStore.query(u.hitch(this,
function(a){return 0!==(a.changeMask&this._pointPropertyChangeMask)&&a.error.code===this.SuccessCode})));0<this._pointsToUpdate.length?this._performSaveOfValues():this._performSaveOfWorksheet();this._columnsChanged=!1;return this._asyncRequestDeferred.promise},_pollForStatus:function(){this._clearPollingInterval();this._statusInteval=setInterval(u.hitch(this,function(){ka.get("PointsReport/Status",{handleAs:"json",query:{processId:this._processId,mne:this.mnemonic,systemId:this.system}}).then(u.hitch(this,
this._checkProgress),u.hitch(this,function(a){this._asyncRequestDeferred.reject(a);console.error(this.declaredClass+" - _pollForStatus(): Error with progress request",a)}))}),this._defaultStatusTimer)},_populateStore:function(a,b){var c=new z;this.own(c);a instanceof Array||(this.set("title",a.reportName),this.set("canEdit",Number(rc.session.getAttribute("AccessLevel"))>=a.securityLevel),a=a.pointList);var d=[];q.forEach(a,u.hitch(this,function(a){var c=this._pointsReportStore.get(a.mne);a.value.values=
a.units;if("undefined"===typeof c)d.push(this._pointsReportStore.add(a));else if(!1!==b){for(var f in a)c.hasOwnProperty(f)&&(c[f]=a[f],c.unsaved=!1);d.push(this._pointsReportStore.put(c))}}));L(d).then(function(){c.resolve()});return c.promise},_reloadData:function(){this._fetch(!1).then(u.hitch(this,function(){this._loadPointsData().then(u.hitch(this,this._setFetchTimeout,this._dirty))}))},_removeDeletedPointsFromStore:function(a){var b=q.map(a,function(a){return a.mne});this._pointsReportStore.query().forEach(u.hitch(this,
function(a){-1===q.indexOf(b,a.mne)&&this._pointsReportStore.remove(a.mne)}))},_removeUnsavedPoints:function(){this._grid.store.query({unsaved:!0}).forEach(u.hitch(this,function(a){this._grid.store.remove(a.mne)}))},_render:function(){var a=new z;this.own(a);this._buildToolbar();this._createGrid().then(u.hitch(this,function(){a.resolve()}));return a.promise},_resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(u.hitch(this,function(){this._grid.resize()}),1);var a=C.get(this.resultsWidget.domNode,
"height")+C.get(this.resultsWidget.domNode,"paddingTop")+C.get(this.resultsWidget.domNode,"paddingBottom");C.set(this.builderContainer,"height",a+"px")},_saveComplete:function(a,b){this._clearPollingInterval();var c=b.errStatus===this.SuccessCode;a||(c?R.publish("alert",{type:"success",message:this.errorStrings.successfulSave}):R.publish("sticky","error",this._getErrorText(b)));504===b.errStatus&&console.error(this.declaredClass+" - _saveComplete()",b.errMSG);if(b.data&&b.data.data)c=this._populateStore(b.data.data);
else{var d=new z;this.own(d);c=d.promise;d.resolve()}c.then(u.hitch(this,function(){this._sendAuditRequest(this._getDataForAudit());this.makeClean()}));c.always(u.hitch(this,function(){this._disableEdits(!1);this._grid.refresh();this._styleErrorRows()}))},_selectAll:function(a){a?this._grid.selectAll():this._grid.clearSelection();this._toolbar.toggleSelectAllButton(a);this._isSelectAll=!a},_sendAuditRequest:function(a){ka.put("PointsReport/Audit",{handleAs:"json",data:{auditEntries:I.stringify(a),
systemId:this.system,changeReason:this._changeReason,reportWasUpdated:this._reportWasUpdated,mnemonic:this.mnemonic,name:this.title}}).always(u.hitch(this,function(){this._changeReason="";this._pointsToUpdate=null;this._reportWasUpdated=!1}))},_setDnDTargetHeight:function(a){var b="";if(a){a=C.get(this.builderContainer,"height");var b=C.get(this.gridNode,"margin-top"),c=C.get(this.gridNode,"margin-bottom"),d=M(".dgrid-header",this.gridNode)[0],f=C.get(d,"height"),d=C.get(d,"padding-bottom"),b=a-b-
c-f-d+"px"}C.set(this._grid.bodyNode,"height",b)},_setMaxPageSizeOptionHTML:function(){M(".dgrid-page-size option").forEach(u.hitch(this,function(a){"4095"===a.innerHTML&&(a.innerHTML=this.rcStrings.max)}))},_setSupportedTypes:function(){this._supportedObjectTypes=[this.objectTypeMap.inputs,this.objectTypeMap.outputs,this.objectTypeMap.variables,this.objectTypeMap.loops,this.objectTypeMap.schedules,this.objectTypeMap.calendars,this.objectTypeMap.arrays]},_setupManager:function(){this.manager=x.manager();
this.manager.makeAvatar=u.hitch(this,function(){return new this.dndAvatar(this.manager)});this.own(w.after(this.manager,"startDrag",u.hitch(this,this._setDnDTargetHeight,!0)),w.after(this.manager,"stopDrag",u.hitch(this,this._setDnDTargetHeight,!1)))},_showDescriptionDialog:function(a,b){this._canEditRow(b)&&(this._emitDialogEditorShowEvent(b,"descriptionCol"),this._clearFetchTimeout(),this._createDescriptionDialog(),this._descriptionEditorDialog.set({title:b.name+" ("+b.mne+"): "+this.rcStrings.description,
value:a,maxCharacters:!0===b.bacnet?255:8,canEdit:this._canEditDescription(b),execute:u.hitch(this,this._descriptionSet,b),onHide:u.hitch(this,this._emitDialogEditorHideEvent,b,"descriptionCol")}),this._descriptionEditorDialog.show())},_showEditDialog:function(){var a=[],b=null,c=null,d=!1,f=!1,g=null,h=!1,k;for(k in this._grid.selection)!0===this._grid.selection[k]&&(b=this._pointsReportStore.get(k),this._emitDialogEditorShowEvent(b,"valueCol"),null!==c&&b.value.type!==c?d=!0:null===c&&(c=b.value.type),
"multi-state"!==c||null===g||aa.arraysAreSame(b.units,g)?null===g&&(g=b.units):d=!0,b.supportsTimedOverride||(h=!0),b.mne.includes("AY")&&(f=!0),0!==b.value.values.length&&a.push(b));null===this._pointEditor?(this._pointEditor=new U({title:this.pointReportStrings.editSelectedPoints,autoManValue:h&&a[0].autoManual===this.autoManualEnums.timed?this.autoManualEnums.manual:a[0].autoManual,valueType:a[0].value.type,pointValue:a[0].value.value,pointStates:a[0].units,timedValue:this._minutesToTimeString(a[0].timedOverride),
hideValue:d,hideAutoMan:f,timedNotSupported:h,onHide:u.hitch(this,this._emitDialogEditorHideEvent,b,"valueCol")}),this.own(this._pointEditor,w.after(this._pointEditor,"execute",u.hitch(this,this._updateStoreValues),!0))):this._pointEditor.setProperties(a[0],this._minutesToTimeString(a[0].timedOverride),d,f,h);void 0!==this._pointEditor.pointValue&&this._pointEditor.show()},_sortMne:function(a,b,c){return a?ba.alphaNumericSort(b.mne,c.mne):-1*ba.alphaNumericSort(b.mne,c.mne)},_sortName:function(a,
b,c){return a?ba.alphaNumericSort(b.name,c.name):-1*ba.alphaNumericSort(b.name,c.name)},_sortUnits:function(a,b,c){var d=0;try{var f=b.units.join("/"),g=c.units.join("/"),d=f.toUpperCase()<g.toUpperCase()?1:f.toUpperCase()>g.toUpperCase()?-1:0}catch(qa){return 0}return a?d:-1*d},_sortValues:function(a,b,c){var d=0;try{var f=b.value.value,g=c.value.value;"analog"===b.value.type&&"analog"===c.value.type?d=Number(f)>Number(g)?-1:Number(f)<Number(g)?1:0:"analog"===b.value.type&&"analog"!==c.value.type?
d=1:"analog"!==b.value.type&&"analog"===c.value.type?d=-1:(f=b.units[b.value.value],g=c.units[c.value.value],d=f>g?-1:f<g?1:0)}catch(qa){return 0}return a?d:-1*d},_styleErrorRows:function(){M(".row-in-error",this._grid.domNode).forEach(function(a){v.remove(a,".row-in-error")});this._pointsReportStore.query({},{sort:this._grid._sort[0],start:(this._grid._currentPage-1)*this._grid.rowsPerPage,count:this._grid.rowsPerPage}).filter(u.hitch(this,function(a){return a.error.code!==this.SuccessCode&&a.error.code!==
this.OperationInProgressCode})).forEach(u.hitch(this,function(a){a=this._grid.row(a.mne).element;null!==a&&v.add(a,"row-in-error")}))},_timeStringToMinutes:function(a){var b=null;"string"===typeof a&&(a=a.split(":"),b=60*Number(a[0])+Number(a[1]));return b},_toggleSelection:function(){this._selectAll(this._isSelectAll)},_updateStoreValues:function(a){var b=null,c=u.clone(this._grid.selection),d;for(d in c)!0===c[d]&&(b=this._pointsReportStore.get(d),null!==a.value&&(b.value.value=a.value,b.changeMask|=
this.propertyChangedMask.value),null!==a.autoManual&&(b.autoManual=a.autoManual,b.changeMask|=this.propertyChangedMask.autoManual,a.autoManual===this._pointEditor.autoManualEnums.timed&&(b.timedOverride=this._timeStringToMinutes(a.time),b.changeMask|=this.propertyChangedMask.timed)),b.changed=!0,this.makeDirty(),this._pointsReportStore.put(b));this._grid.clearSelection();for(d in c)!0===c[d]&&this._grid.select(d)},_useDisableClassIfNotEditable:function(a){return a&&Number(a.autoManual)!==this.autoManualEnums.timed?
"hideValue":""},_worksheetNeedsSaving:function(){var a=u.clone(this._pointsReportStore.query({unsaved:!0})),b=u.clone(this._pointsReportStore.query(u.hitch(this,function(a){return 0!==(a.changeMask&this.propertyChangedMask.displayName)&&a.error.code===this.SuccessCode})));return 0<a.length||0<b.length},destroy:function(){this.inherited(arguments);null!==this._asyncRequestDeferred&&(this._asyncRequestDeferred.cancel(),this._asyncRequestDeferred=null);null!==this._updateTimer&&clearInterval(this._updateTimer)},
destroyUnitsArrow:function(){var a=M(".dgrid-sort-arrow.ui-icon.destroy");A.destroy(a[0])}})})},"dgrid/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/on dojo/topic dojo/has dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList put-selector/put ../Selection dojo/has!touch?../util/touch dojo/has!touch?./_DnD-touch-autoscroll xstyle/css!dojo/resources/dnd.css".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){var f=r(n,{grid:null,
getObject:function(a){var b=this.grid;return b.store.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!=this.grid.bodyNode},onDrop:function(a,b,c){var d=this,f=this._targetAnchor=this.targetAnchor,g=this.grid,h=g.store;!this.before&&f&&(f=f.nextSibling);f=f&&g.row(f);l.when(f&&h.get(f.id),function(f){if(d!=a)d.onDropExternal(a,b,c,f);else d.onDropInternal(b,c,f)})},onDropInternal:function(a,b,c){var d=this.grid,f=d.store,g=this,h=g._targetAnchor,
k;h&&(k=this.before?h.previousSibling:h.nextSibling);h=d.row(a[0]);(b||k!==a[0]&&(c||!h||d.down(h).element!=a[0]))&&a.forEach(function(a){l.when(g.getObject(a),function(a){var h=f.getIdentity(a);f[b&&f.copy?"copy":"put"](a,{before:c});g._selectedNodes[h]&&(g._selectedNodes[h]=d.row(h).element)})})},onDropExternal:function(a,b,c,d){var f=this.grid.store,g=a.grid;b.forEach(function(b,h){l.when(a.getObject(b),function(k){c||(g?l.when(g.store.getIdentity(k),function(c){!h&&a.selectNone();a.delItem(b.id);
g.store.remove(c)}):a.deleteSelectedNodes());f[f.copy?"copy":"put"](k,{before:d})})})},onDndStart:function(b,c,d){this.inherited(arguments);b==this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),a.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(b){d("touch")&&this.isDragging&&1<q.countCurrentTouches(b,this.grid.touchNode)?(g.publish("/dnd/cancel"),a.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!d("touch")||1>=
q.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(a,b){return a.getObject&&n.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new b,c;for(c in this.grid.selection)a.push(this._selectedNodes[c]);return a}});r=r(k,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:f,postMixInProperties:function(){this.inherited(arguments);this.dndParams=p.mixin({accept:[this.dndSourceType]},
this.dndParams)},postCreate:function(){function a(a){c[a.id]=a.element}function b(a){delete c[a.id];t(a.element,"!dojoDndItemSelected!dojoDndItemAnchor")}this.inherited(arguments);this.dndSource=new (this.dndConstructor||f)(this.bodyNode,p.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var c=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){m.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){m.forEach(a.rows,b)});h.after(this,"destroy",function(){delete this.dndSource._selectedNodes;
c=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"==typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];t(b,".dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});r.GridSource=f;return r})},"webview/reliable/_pointsReport/PointEditor":function(){define("dijit/ConfirmDialog dijit/form/FilteringSelect dijit/form/ValidationTextBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/pointReports dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/PointEditor.html dijit/form/Button dijit/form/CheckBox".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return h("webview/reliable/_pointsReport/PointEditor",[r],{templateString:q,webviewStrings:n,rcStrings:d,pointReportStrings:a,autoManualEnums:{auto:0,manual:1,timed:2},pointTypes:{analog:"analog",binary:"binary",multi:"multi-state",time:"time"},_autoManualStore:null,_valueCBListener:null,_valueInputWidget:null,constructor:function(){this._autoManualStore=new k(new t({data:[{id:this.autoManualEnums.auto,name:this.rcStrings.auto},{id:this.autoManualEnums.manual,
name:this.rcStrings.manual}]}))},buildRendering:function(){this.inherited(arguments);var a=[];this.valueType!==this.pointTypes.analog&&this.valueType!==this.pointTypes.time&&l.forEach(this.pointStates,c.hitch(this,function(b,c){a.push({id:c,name:b})}));this._pointValueStore=new k(new t({data:a}));this.timedNotSupported||this._autoManualStore.put({id:this.autoManualEnums.timed,name:this.pointReportStrings.timedOverride});this.autoManInput.set("store",this._autoManualStore);this.autoManInput.set("value",
this.autoManValue);this.autoManInput.set("queryExpr","*${0}*");this.valueCB.set("disabled",this.hideValue);this.autoManCB.set("disabled",this.hideAutoMan);this.valueType===this.pointTypes.analog?this._createAnalogInput():this.valueType===this.pointTypes.time?this._createTimeInput():this._createEnumeratedInput()},postCreate:function(){this.inherited(arguments);this.okButton.set("label",this.rcStrings.btnOk.toUpperCase());this.cancelButton.set("label",this.rcStrings.btnCancel.toUpperCase());this.own(b(this.autoManInput,
"change",c.hitch(this,this._enableDisableTimeInput)),b(this.autoManCB,"change",c.hitch(this,this._enableDisableAutoManInput)))},setProperties:function(a,b,d,g,h){this.autoManValue=a.autoManual;this.pointValue=a.value.value;this.pointStates=a.units;this.valueType=a.value.type;this.valueCB.set("disabled",d);this.autoManCB.set("disabled",g);h?this._autoManualStore.remove(this.autoManualEnums.timed):this._autoManualStore.put({id:this.autoManualEnums.timed,name:this.pointReportStrings.timedOverride});
this.valueType===this.pointTypes.analog?this._createAnalogInput():this.valueType===this.pointTypes.time?this._createTimeInput():this.valueType!==this.pointTypes.multi&&this.valueType!==this.pointTypes.binary||this._createEnumeratedInput();this.valueType!==this.pointTypes.analog&&this.valueType!==this.pointTypes.time&&(this._pointValueStore.setData([]),l.forEach(this.pointStates,c.hitch(this,function(a,b){this._pointValueStore.put({id:b,name:a})})));this.autoManValue===this.autoManualEnums.timed?this.timeInput.set("value",
b):this.timeInput.set("value","00:30");this.autoManInput.set("value",this.autoManValue)},show:function(){this.valueCB.set("checked",!1);this.autoManCB.set("checked",!1);this.autoManInput.set("disabled",!0);var a={};this.valueType!==this.pointTypes.analog&&this.valueType!==this.pointTypes.time&&(a=this._pointValueStore.query({id:this.pointValue}));"undefined"!==typeof a[0]&&this._valueInputWidget.setDisplayedValue(a[0].name);rc.session.hasRole(rc.session.roles.autoManual)||(document.getElementById("autoManualControls").style.display=
"none");this.inherited(arguments)},_createInput:function(){this.okButton.set("disabled",!1);g.place(this._valueInputWidget.domNode,this.valueInput,"only");this._valueInputWidget.set("disabled",!0);null!==this._valueCBListener&&this._valueCBListener.remove();this._valueCBListener=b(this.valueCB,"change",c.hitch(this,this._enableDisableValueInput))},_createAnalogInput:function(){null!==this._valueInputWidget&&g.destroy(this._valueInputWidget.domNode);this._valueInputWidget=new m({value:this.pointValue,
baseClass:"rcTextBox",pattern:"^(\\-\\d+|\\d*)(\\.\\d+|\\d*)([eE][+|-]\\d+|\\d*)$",invalidMessage:this.pointReportStrings.inputMustBeANumber,onChange:c.hitch(this,this._verifyOkButton)});this._createInput()},_createEnumeratedInput:function(){null!==this._valueInputWidget&&g.destroy(this._valueInputWidget.domNode);this._valueInputWidget=new p({baseClass:"rcSelectBox",store:this._pointValueStore,value:this.pointValue});this._createInput()},_createTimeInput:function(){null!==this._valueInputWidget&&
g.destroy(this._valueInputWidget.domNode);this._valueInputWidget=new m({value:this.pointValue,baseClass:"rcTextBox rcTimeTextBox",pattern:"^(0?\\d|1\\d|2[0-3]):([0-5]\\d):([0-5]\\d)$",invalidMessage:this.rcStrings.invalidTime,onChange:c.hitch(this,this._verifyOkButton)});this._createInput()},_getValueAttr:function(){var a={value:null,autoManual:null,time:null};this.valueCB.get("checked")&&(a.value=this._valueInputWidget.get("value"));this.autoManCB.get("checked")&&(a.autoManual=Number(this.autoManInput.get("value")),
a.autoManual===this.autoManualEnums.timed&&(a.time=this.timeInput.get("value")));return a},_enableDisableAutoManInput:function(a){this.autoManInput.set("disabled",!a);this.timeInput.set("disabled",!a||Number(this.autoManInput.get("value"))!==this.autoManualEnums.timed)},_enableDisableTimeInput:function(a){this.timeInput.set("disabled",a!==this.autoManualEnums.timed||!this.autoManCB.get("checked"))},_enableDisableValueInput:function(a){this._valueInputWidget.set("disabled",!a)},_verifyOkButton:function(){this.okButton.set("disabled",
!this._valueInputWidget.isValid())},destroy:function(){this.inherited(arguments);null!==this._valueCBListener&&(this._valueCBListener.remove(),this._valueCBListener=null)}})})},"webview/reliable/_pointsReport/PointsReportColumnHider":function(){define("dgrid/util/misc dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on put-selector/put ./InlineColumnHiderCheckbox ../../widget/ColumnHider xstyle/css!dgrid/css/extensions/ColumnHider.css".split(" "),function(r,p,m,l,h,c,g,d,
n){return p("webview/reliable/_pointsReport/PointsReportColumnHider",n,{_renderHiderMenuEntries:function(){this.inherited(arguments);l.toggle(this.domNode,"hide-toggle-checkbox",!0)},_renderHiderMenuEntry:function(a){var b=a.id,g=r.escapeCssIdentifier(b,"-"),k,l;a.hidden&&(a.hidden=!1,this._hideColumn(b),a.hidden=!0);if(!a.unhidable){k=this.domNode.id+"-hider-menu-check-"+g;var f=m.hitch(this,function(a){var b=l.get("checked");this.contentNode&&c.emit(this.domNode,"columnChange",{columnId:a,isHide:!b})},
b);l=this._columnHiderCheckboxes[b]=new d({value:g,onClick:f});h.place(l.domNode,a.headerNode,"first");l.id=k;l.set("checked",a.shown);a.shown||this._hideColumn(a.id)}},renderHeader:function(){function a(a){a.stopPropagation()}var b=this,d=this.hiderMenuNode,h=this.hiderToggleNode,l;this.inherited(arguments,[!0]);if(d){for(l in this._columnHiderRules)this._columnHiderRules[l].remove();d.innerHTML=""}else h=this.hiderToggleNode=g(this.domNode,"button.ui-icon.dgrid-hider-toggle[type\x3dbutton][aria-label\x3d"+
this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(c(h,"click",function(a){b._toggleColumnHiderMenu(a)})),d=this.hiderMenuNode=g("div.dgrid-hider-menu[role\x3ddialog][aria-label\x3d"+this.i18nColumnHider.popupLabel+"]"),d.id=this.id+"-hider-menu",this._listeners.push(c(d,"keyup",function(a){27===(a.charCode||a.keyCode)&&(b._toggleColumnHiderMenu(a),h.focus())})),d.style.display="none",g(this.domNode,d),this._listeners.push(c(d,"mousedown",a),c(h,"mousedown",a)),this._bodyListener||(this._bodyListener=
c.pausable(document,"mousedown",function(a){this._activeGrid&&this._activeGrid._toggleColumnHiderMenu(a)}),this._bodyListener.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},_toggleColumnHiderMenu:function(){var a=this.subRows,b,c,d,g;this._activeGrid=(b=this._hiderMenuOpened)?null:this;this._hiderMenuOpened=!b;if(!0===this._hiderMenuOpened)for(d=0,b=a.length;d<b;d++)for(g=0,c=a[d].length;g<c;g++)this._showColumn(a[d][g].id);else for(d=0,b=a.length;d<
b;d++)for(g=1,c=a[d].length;g<c;g++)!1===this._columnHiderCheckboxes[a[d][g].id].checked&&this._hideColumn(a[d][g].id);l.toggle(this.domNode,"hide-toggle-checkbox",!this._hiderMenuOpened)}})})},"webview/reliable/_pointsReport/InlineColumnHiderCheckbox":function(){define(["dijit/form/CheckBox","dojo/_base/declare"],function(r,p){return p("webview/reliable/_pointsReport/InlineColumnHiderCheckbox",[r],{_onClick:function(m){var l=this.inherited(arguments);m.stopPropagation();return l}})})},"webview/reliable/_pointReportDndAvatar":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang","dojo/dnd/Avatar","dojo/dom-construct"],function(r,p,m,l,h){return p("webview/reliable/_pointReportDndAvatar",l,{construct:function(){var c=h.create("div",{"class":"dojoDndAvatar pointsReportAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}});r.forEach(this.manager.nodes,m.hitch(this,function(g){var d=h.create("div");d.appendChild(h.create("span",{"class":"webviewIcon dragHandle"}));d.appendChild(h.create("span",{innerHTML:g.innerText}));c.appendChild(d)}));
this.node=c}})})},"webview/reliable/_pointsReport/ValueInput":function(){define("dijit/_FocusMixin dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/pointReports dojo/on dojo/query dojo/store/Memory dojo/text!./templates/ValueInput.html dijit/form/FilteringSelect dijit/form/ValidationTextBox".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return c("webview/reliable/_pointsReport/ValueInput",
[m,r,p,l],{templateString:q,_currentValue:0,_valueType:"analog",_valueOptions:[],constructor:function(){this.rcStrings=n;this.pointReportStrings=a},postCreate:function(){this.inherited(arguments);this.enumeratedInput._getValueAttr=function(){return Number(this.valueNode.value)};this.enumeratedInput.set("queryExpr","*${0}*");this.own(b(this.enumeratedInput,"change",g.hitch(this,this._onChange)),b(this.analogInput,"change",g.hitch(this,this._onChange)),b(this.timeInput,"change",g.hitch(this,this._onChange)))},
focus:function(){switch(this._valueType){case "analog":this.analogInput.focus();break;case "time":this.timeInput.focus();break;case "binary":case "multi-state":this.enumeratedInput.focus()}},onChange:function(a){b.emit(this,"change",this.value)},isValid:function(){switch(this._valueType){case "analog":return this.analogInput.isValid();case "time":return this.timeInput.isValid();case "binary":case "multi-state":return this.enumeratedInput.isValid()}},_getValueAttr:function(){var a=null;switch(this._valueType){case "analog":a=
this.analogInput.get("value");break;case "time":a=this.timeInput.get("value");break;case "binary":case "multi-state":a=Number(this.enumeratedInput.get("value"))}return{type:this._valueType,value:a,values:this._valueOptions}},_onChange:function(a){if(a!==this._currentValue)this.onChange(Number(a))},_setValueAttr:function(a){this._valueType=a.type;this._valueOptions=a.values;this._currentValue=a.value;t(".rcTextBox, .rcSelectBox",this.domNode).forEach(function(a){d.add(a,"hidden")});switch(a.type){case "analog":this.analogInput.set("value",
a.value);d.remove(this.analogInput.domNode,"hidden");break;case "time":this.timeInput.set("value",a.value);d.remove(this.timeInput.domNode,"hidden");break;case "binary":case "multi-state":var b=[];h.forEach(a.values,g.hitch(this,function(a,c){b.push({id:c,name:a})}));this._nonAnalogStore=new k({data:b});this.enumeratedInput.set("store",this._nonAnalogStore);this.enumeratedInput.set("value",a.value);d.remove(this.enumeratedInput.domNode,"hidden")}}})})},"webview/reliable/_pointsReport/PointsReportToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/pointReports dojo/on dojo/text!./templates/PointsReportToolbar.html ../../widget/ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),
function(r,p,m,l,h,c,g,d,n){return r("webview/reliable/_pointsReport/PointsReportToolbar",[n],{rcStrings:l,templateString:d,webviewStrings:h,pointReportStrings:c,isAdminPage:null,hasElevatedPermission:!1,postCreate:function(){this.inherited(arguments);this._elevatedButtons=[this.columnToggleButton,this.deleteButton];this.hasElevatedPermission||this._removeElevatedButtons()},_setTitleAttr:function(a){null!==this.isAdminPage&&this.isAdminPage()?this._set("title",a):this.inherited(arguments)},onSelectAllClicked:function(a){},
onSaveClicked:function(){},onCancelClicked:function(){},onEditClicked:function(){},onExcelExportClicked:function(){},onExportClicked:function(){},onToggleColumnsClicked:function(){},onDeleteClicked:function(){},toggleDeleteButton:function(a){this.hasElevatedPermission&&this.deleteButton.set("disabled",!a)},toggleEditMultiple:function(a){this.editValuesButton.set("disabled",a)},toggleSelectAllButton:function(a){m.toggle(this.selectAllButton.toolbarButtonIcon,"svg-select-all-icon",!a);m.toggle(this.selectAllButton.toolbarButtonIcon,
"svg-deselect-all-icon",a);a?this.selectAllButton.tooltip.set("label",this.webviewStrings.deselectAll):this.selectAllButton.tooltip.set("label",this.webviewStrings.selectAll)},_createButtonMap:function(){this._buttons={selectAll:this.selectAllButton,save:this.saveButton,edit:this.editValuesButton,cancel:this.cancelButton,"export":this.exportButton,excelExport:this.excelButton};this.hasElevatedPermission&&p.mixin(this._buttons,{toggleColumn:this.columnToggleButton,"delete":this.deleteButton})},_createConnections:function(){this.own(g(this.excelButton.domNode,
"click",p.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),g(this.selectAllButton.domNode,"click",p.hitch(this,function(){if(!this.selectAllButton.get("disabled"))this.onSelectAllClicked()})),g(this.saveButton.domNode,"click",p.hitch(this,function(){if(!this.saveButton.get("disabled"))this.onSaveClicked()})),g(this.editValuesButton.domNode,"click",p.hitch(this,function(){if(!this.editValuesButton.get("disabled")&&this.canEdit)this.onEditClicked()})),g(this.cancelButton.domNode,
"click",p.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancelClicked()})),g(this.exportButton.domNode,"click",p.hitch(this,function(){if(!this.exportButton.get("disabled"))this.onExportClicked()})));this.hasElevatedPermission&&this.own(g(this.columnToggleButton.domNode,"click",p.hitch(this,function(){if(!this.columnToggleButton.get("disabled"))this.onToggleColumnsClicked()})),g(this.deleteButton.domNode,"click",p.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onDeleteClicked()})))},
_removeElevatedButtons:function(){this._elevatedButtons.forEach(function(a){a.destroy()})}})})},"webview/reliable/PointsReportWorksheet":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/form/NumberTextBox dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/Deferred dojo/dom dojo/dom-construct dojo/dom-style dojo/i18n!../nls/all dojo/i18n!../nls/pointReports dojo/io-query dojo/json dojo/on dojo/query dojo/string dojo/text!./_pointsReport/templates/PointsReportWorksheet.html dojo/topic rc/_base/util rc/bacnet/enums rc/util/notices ../admin/AdminWorksheetBase ../widget/ColumnHider ../xhrEnhanced ./_pointsReport/PointReportsToolbar".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q,f,u,w,z,x,y,v,A,C,E,B,D,F,H,J,G,I){return a("webview/reliable/PointsReportWorksheet",[J],{allowSpecificInstances:!1,baseClass:"point-reports",dataTypeName:w.pointReports,identityProperty:"mne",individualMnemonic:"PRP",instanceRe:/prp(\d+)/i,templateString:E,UnexpectedCode:508,webviewStrings:w,_invalidOrEmptyName:!1,_invalidOrEmptyName:!1,_hasElevatedPermission:rc.session.hasRole(rc.session.roles2.modifyPointReports,!0),constructor:function(){this.pointReportStrings=
z;b.mixin(this.ErrorMessageMap,{505:this.pointReportStrings.summaryFileMissing,507:this.pointReportStrings.nameAlreadyInUse,512:this.pointReportStrings.illegalDescriptor,514:this.pointReportStrings.reportNotFound,515:this.pointReportStrings.couldNotCreateReport})},postCreate:function(){this.inherited(arguments);this._fetch().then(b.hitch(this,function(a){this._parseFetch(a);this._buildGrid()}))},onInitSuccess:function(){},makeClean:function(){this._toolbar.set("dirty",!1);this.inherited(arguments);
this._setFetchTimeout()},makeDirty:function(){this._clearFetchTimeout();this._toolbar.set("dirty",!0);this.inherited(arguments)},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_addToolbarListeners:function(){this.own(v(this._toolbar,"add",b.hitch(this,this._addDialog,C.substitute(this.worksheetStrings.createX,[this.pointReportStrings.pointsReport]),50)),v(this._toolbar,"cancel",b.hitch(this,this._revertChanges)),v(this._toolbar,"remove",b.hitch(this,this._deleteReports)),v(this._toolbar,
"save",b.hitch(this,this._saveChanges)),v(this._toolbar,"selectAll",b.hitch(this,this._toggleGridSelection)),v(this._toolbar,"toggleColumns",b.hitch(this,this._positionAndShowColumnSelector)))},_allowSelection:function(a){return this._canEditRow(a.data)},_buildColumnStructure:function(){this._columnStructure=[h({selectorType:b.hitch(this,this._createSelectorCheckbox),id:"selectorCol",field:"mne",label:"",hidden:!rc.session.hasRole(rc.session.roles2.modifyPointReports,!0),unhidable:!0,sortable:!1,
exporter:function(){return""}}),{label:this.webviewStrings.instance,field:"instance",id:"instanceCol",sortable:!1,renderCell:b.hitch(this,this._createInstanceCell)},p({editOn:"click",editor:g,editorArgs:{baseClass:"rcTextBox",maxLength:20,required:!0,validator:b.hitch(this,this._validateNameField)},className:b.hitch(this,function(a){return a&&this._canEditRow(a)?"colourlessLink":""}),sortable:!1,canEdit:b.hitch(this,this._canEditRow),label:this.rcStrings.spName,field:"name",id:"nameCol",formatter:b.hitch(this,
this._hideCellDataForEditor)}),{label:this.webviewStrings.description,field:"description",id:"descriptionCol",sortable:!1,renderCell:b.hitch(this,this._buildDescriptionCell)},{label:this.webviewStrings.lastModified,field:"lastModified",id:"lastModifiedCol",sortable:!1,formatter:b.hitch(this,function(a,b){return this._isPlaceholderRow(b)?"":t.format(new Date(a),{selector:"date",formatLength:"full"})})},{label:this.pointReportStrings.pointCount,field:"pointCount",id:"pointCountCol",sortable:!1,formatter:b.hitch(this,
this.formatNumberCell),exporter:function(a){return a.toString()}},p({editOn:"click",editor:c,editorArgs:{constraints:{max:99,min:0,pattern:"##"},required:!0,validator:b.hitch(this,this._checkAccessLevel)},canEdit:b.hitch(this,this._canEditRow),label:this.rcStrings.security,field:"security",id:"securityCol",className:b.hitch(this,function(a){return a&&this._canEditRow(a)?"colourlessLink":""}),sortable:!1,formatter:b.hitch(this,this.formatNumberCell),exporter:function(a){return a.toString()}})]},_buildGrid:function(){null===
this._grid&&(this._buildColumnStructure(),this._grid=new (a([r,m,l,G]))({columns:this._columnStructure,minRowsPerPage:25,maxEmptySpace:25,bufferRows:10,className:"dgrid-autoheight",selectionMode:"none",allowSelect:b.hitch(this,this._allowSelection),sort:[{attribute:"instance",descending:!1}],store:this._gridStore,showLoadingMessage:!0,deselectOnRefresh:!1},this.gridNode),this._grid.startup(),this.onInitSuccess(),this._connectGrid())},_buildTitle:function(){},_canAccessRow:function(a){return this.inherited(arguments)&&
Number(rc.session.getAttribute("AccessLevel"))>=a.security},_canEditRow:function(){return this.inherited(arguments)&&rc.session.hasRole(rc.session.roles2.modifyPointReports,!0)},_checkInvalidPointReportName:function(a){a.editor.isValid()||(this._invalidOrEmptyName?(B.publish("sticky",{message:this.errorStrings.invalidPointReportName,type:"error"}),this._invalidOrEmptyName=!1):B.publish("sticky",{message:this.errorStrings.descriptorIsPredefined,type:"error"}))},_checkAccessLevel:function(a){return a?
(a=parseInt(a),!isNaN(a)&&a<=parseInt(rc.session.getAttribute("AccessLevel"))):!0},_connectGrid:function(){this.inherited(arguments);this.own(v(this._toolbar,"export",b.hitch(this,this.exportToCSV,this._grid,"pointreports.csv",this.title)),v(this._grid,"dgrid-select, dgrid-deselect",b.hitch(this,this._onSelectionChange)),v(this._grid,"dgrid-datachange",b.hitch(this,this.makeDirty)),v(this._grid,".dgrid-column-nameCol:dgrid-editor-hide",b.hitch(this,function(a){this._checkInvalidPointReportName(a)})),
v(this._grid,".dgrid-column-nameCol:dgrid-editor-hide",b.hitch(this,function(a){this._checkInvalidPointReportName(a)})),v(this._grid,".dgrid-column-securityCol:dgrid-editor-hide",b.hitch(this,function(a){var b=!isNaN(a.editor.value);a&&a.editor&&!a.editor.isValid()&&B.publish("alert",{type:"error",message:b?this.errorStrings.securityLevelHigherThanAccessLevel:this.errorStrings.mustBeNumericInput})})))},_createButtons:function(){},_createInstanceCell:function(a,c){var d=this._canAccessRow(a),g=f.create("span",
{innerHTML:this._isPlaceholderRow(a)?"":c,"class":d?"linkable":"",title:d?"Go to "+a.name:""});d&&this.own(v(g,"click",b.hitch(this,this._goToPointsReport,this.individualMnemonic+c)));return g},_deleteReports:function(){if(!this._canEdit)return!1;var a=Object.keys(this._grid.selection).filter(b.hitch(this,function(a){return this._grid.selection[a]&&this._canEditRow(this._grid.store.get(a))}));this._confirmDelete(a,C.substitute(this.worksheetStrings.confirmDeleteX,[this.webviewStrings.pointReports.toLowerCase()]))},
_displayUnexpectedError:function(a){H.widget.clear();this._displayError({errStatus:this.UnexpectedCode,errMSG:a.message})},_fetch:function(){this._clearFetchTimeout();return I.get("PointReports/Read",{handleAs:"json",preventCache:!0,query:{systemId:this.system}})},_fetchDeviceName:function(){var a=new k;a.resolve();return a.promise},_getConstantHeights:function(){-1===this._constantHeights&&(this._constantHeights=0,q.byId("rcAdminContentHeader")&&(this._constantHeights=u.get("rcAdminContentHeader",
"height"),this._constantHeights+=u.get("rcAdminContentHeader","paddingTop")),this._constantHeights+=u.get(this._toolbar.domNode,"height"),this._constantHeights+=u.get(this._grid.headerNode,"paddingBottom"),this._constantHeights+=u.get(this._grid.domNode,"marginTop"),this._constantHeights+=u.get(this._grid.domNode,"marginBottom"),this._constantHeights+=u.get(this._grid.domNode,"borderTopWidth"),this._constantHeights+=u.get(this._grid.domNode,"borderBottomWidth"));return this._constantHeights},_getNextInstance:function(){var a=
this._grid.store.data.filter(b.hitch(this,function(a){return!this._isPlaceholderRow(a)})).map(function(a){return Number(a.instance)}).sort(function(a,b){return Number(a)>Number(b)?1:Number(a)<Number(b)?-1:0}),c=0;if(0!==a.length)if(a.length===a[a.length-1])c=a.length;else for(;c<a.length&&!(1<a[c]-c);++c);return c+1},_goToPointsReport:function(a){var b="",b=this.isAdminPage()?"#pointsreport?"+x.objectToQuery({site:this.site,system:this.system,mne:a}):D.mnemonicToUri(a);window.location.hash=b},_onSelectionChange:function(a){var c=
"dgrid-select"===a.type,f=null,g=null;n.forEach(a.rows,b.hitch(this,function(a){f=A(".dijitCheckBox",a.element)[0];g=d.byNode(f);g.set("checked",c)}));a=Object.keys(this._grid.selection).filter(b.hitch(this,function(a){return this._grid.selection[a]}));this._toolbar.set("isSelectAll",a.length!==this._grid.store.data.filter(b.hitch(this,function(a){return this._canAccessRow(a)})).length);a=0<a.filter(b.hitch(this,function(a){return this._canEditRow(this._grid.store.get(a))})).length;this._toolbar.toggleDelete(a)},
_parseFetch:function(a){a?200===a.errStatus?(this._populateStore(a.data),this.makeClean(),webview.auditUtil.setContextDataWithSiteId(this.site,[{systemId:this.system,objectName:"#PRP"}],this._toolbar.title)):this._displayError(a):this._displayError({errStatus:this.UnexpectedCode,errMSG:"No response"})},_parseUpdateResponse:function(a){H.widget.clear();this._displayError(a);a.errStatus===this.SuccessCode&&(this._grid.clearSelection(),this._fetch().then(b.hitch(this,this._parseFetch)))},_performAdd:function(a){var c=
a.specificInstance;-1===c&&(c=this._getNextInstance());a={systemId:this.system,name:a.name,mne:this.individualMnemonic+c};B.publish("sticky",{type:"info",message:this.errorStrings.addInProgress});I.post("PointReports/Create",{handleAs:"json",data:a}).then(b.hitch(this,this._parseUpdateResponse),b.hitch(this,this._displayUnexpectedError))},_performDelete:function(){var a=Object.keys(this._grid.selection).filter(b.hitch(this,function(a){return this._grid.selection[a]&&this._canEditRow(this._grid.store.get(a))}));
B.publish("sticky",{type:"info",message:this.errorStrings.deleteInProgress});I.del("PointReports/Delete",{handleAs:"json",data:{systemId:this.system,instances:a}}).then(b.hitch(this,this._parseUpdateResponse),b.hitch(this,this._displayUnexpectedError))},_populateStore:function(a){null!==this._grid?(this._grid.store.setData(a),this._grid.refresh()):this._gridStore.setData(a)},_revertChanges:function(){this._grid.revert();this.makeClean();this._reloadData()},_saveChanges:function(){var a=Object.keys(this._grid.dirty);
B.publish("sticky",{type:"info",message:this.errorStrings.saveInProgress});this._grid.save().then(b.hitch(this,this._sendSave,a))},_sendSave:function(a){var c=this._grid.store.query(function(b){return a.includes(b.mne)}).map(function(a){return{mne:a.mne,name:a.name,description:a.description,security:a.security}});I.put("PointReports/Update",{handleAs:"json",data:{systemId:this.system,reports:y.stringify(c)}}).then(b.hitch(this,this._parseUpdateResponse),b.hitch(this,this._displayUnexpectedError))},
_setCanEditFlag:function(){this._canEdit=!0},_setTitle:function(){},_toggleGridSelection:function(a){a?this._grid.selectAll():this._grid.clearSelection()},_validateNameField:function(a){var b=/\*|\?|"|<|>|\/|\||:|\\/i.exec(a),c=/^\s*$/i.exec(a);if(null!==b||null!==c||!a)return this._invalidOrEmptyName=!0,!1;if(-1!==D.reservedKeywords.indexOf(a))return!1;b=/(\d+)([a-z|\-]+)(\d+)/i.exec(a);if(null!==b)return-1===F.mnemonics.indexOf(b[2]);b=/([a-z|\-]+)(\d+)/i.exec(a);if(null!==b)return-1===F.mnemonics.indexOf(b[1]);
b=/(\d+)([a-z|\-]+)/i.exec(a);return null!==b?-1===F.mnemonics.indexOf(b[2]):!0}})})},"webview/reliable/_pointsReport/PointReportsToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/request/xhr dojo/text!./templates/PointReportsToolbar.html ../../widget/ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),function(r,p,m,l,h,c,g,d,n){return r("webview/reliable/_pointsReport/PointReportsToolbar",[n],{isSelectAll:!0,
rcStrings:l,templateString:d,webviewStrings:h,hasElevatedPermission:!1,postCreate:function(){this.inherited(arguments);this._elevatedButtons=[this.selectAllButton,this.saveButton,this.addButton,this.deleteButton];!this.isAdmin()&&this.systemId&&this._getAndSetTitle();this.hasElevatedPermission||this._removeElevatedButtons()},_setDirtyAttr:function(a){this.hasElevatedPermission&&this.saveButton.set("disabled",!a);this._set("dirty",a)},_setIsSelectAllAttr:function(a){this.hasElevatedPermission&&(a?
(this.selectAllButton.set("titleStr",this.webviewStrings.selectAll),m.replace(this.selectAllButton.toolbarButtonIcon,"svg-select-all-icon","svg-deselect-all-icon")):(this.selectAllButton.set("titleStr",this.webviewStrings.deselectAll),m.replace(this.selectAllButton.toolbarButtonIcon,"svg-deselect-all-icon","svg-select-all-icon")));this._set("isSelectAll",a)},onAdd:function(){},onCancel:function(){},onExcelExportClicked:function(){},onExport:function(){},onRemove:function(){},onSave:function(){},onSelectAll:function(a){},
onToggleColumns:function(){},toggleDelete:function(a){this.hasElevatedPermission&&this.deleteButton.set("disabled",!a)},toggleSave:function(a){this.hasElevatedPermission&&this.saveButton.set("disabled",!a)},_createButtonMap:function(){this._buttons={cancel:this.cancelButton,"export":this.exportButton,excelExport:this.excelButton,toggleColumn:this.toggleColumnsButton};this.hasElevatedPermission&&p.mixin(this._buttons,{selectAll:this.selectAllButton,save:this.saveButton,add:this.addButton,"delete":this.deleteButton})},
_createConnections:function(){this.own(c(this.excelButton.domNode,"click",p.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),c(this.cancelButton.domNode,"click",p.hitch(this,function(){this.onCancel()})),c(this.exportButton.domNode,"click",p.hitch(this,function(){this.onExport()})),c(this.toggleColumnsButton.domNode,"click",p.hitch(this,function(){this.onToggleColumns()})));this.hasElevatedPermission&&this.own(c(this.addButton.domNode,"click",p.hitch(this,
function(){this.onAdd()})),c(this.deleteButton.domNode,"click",p.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onRemove()})),c(this.saveButton.domNode,"click",p.hitch(this,function(){if(!this.saveButton.get("disabled"))this.onSave()})),c(this.selectAllButton.domNode,"click",p.hitch(this,function(){this._onSelectAll()})))},_getAndSetTitle:function(){g.get("GetSystemName",{handleAs:"json",query:{systemId:this.systemId}}).then(p.hitch(this,function(a){a.systemName&&this.set("title",
a.systemName+"/"+this.webviewStrings.pointReports+" (PRPS)")}))},_onSelectAll:function(){var a=this.isSelectAll;this.set("isSelectAll",!a);this.onSelectAll(a)},_removeElevatedButtons:function(){this._elevatedButtons.forEach(function(a){a.destroy()})}})})},"webview/reliable/RuntimeLog":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!rc/nls/tl dojo/i18n!webview/nls/all dojo/string rc/reliable/Point rc/reliable/RuntimeLog rc/util/encoding/base16 ../sys/job ../util/AlarmUtil ../util/audit ../widget/RuntimeLogCommon dijit/layout/BorderContainer dijit/layout/ContentPane".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b,t,k,q){return r("webview/reliable/RuntimeLog",[n,q],{postCreate:function(){this.inherited(arguments);b.loadOnce().then(p.hitch(this,this._jobLoaded))},_createToolbar:function(){this.inherited(arguments);this.connectExportButton()},_buildAuditLogContext:function(){var a=[{systemId:this.system,objectName:"*"+this.mnemonic.split("RT")[0]}];k.setContextData(rc.pathInfo.site,a,this.fullTitle)},_fetch:function(a){var b=new m;a={gid:this.gid,type:"rcp",method:"GET",cmdObj:a,
load:p.hitch(this,function(a){b.resolve(a)}),error:p.hitch(this,function(a){b.reject(Error({name:g.substitute(l.xNotFound,[l.rt]),message:this._replace(l.couldNotLoad)+" "+g.substitute(l.hostXOffline,[this.mainController]),suggestion:c.hostOfflineFix,e:a}))})};rc.xhr.request(a);return b.promise},_fetchSequence:function(){var b=new m,k=new m,n={dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:9,xl:Math.floor((this.pointInstance-1)/this.BANK_SIZE),xh:0,cnt:0},q,r,t={sampleSize:2E3,
dateFirst:0,dateLast:(new Date).getTime()+this.MSEC_PER_DAY};b.then(p.hitch(this,function(){this.datam.formatGridItems(t.sampleSize);this.render(this.datam.gridItems);this._buildAuditLogContext();k.resolve()}));this.datam.clearData();var v=this._fetch(n);v.then(p.hitch(this,function(f){f=f.data;if(1>f.length)throw Error("Fetched headers are empty.");if(this.isLC){r=15;q=(this.pointInstance-1)%this.BANK_SIZE*r;if(m=a.toUnsignedEnd(f.slice(q,q+2)))t.pointLogged=new d(m,this.pointName);this._currIndex=
parseInt(f[q+10],10);this._wrapped=f[q+11]?1:0;this._bufferSize=150}else{r=20;q=(this.pointInstance-1)%this.BANK_SIZE*r;var m=a.toUnsignedEnd(f.slice(q,q+2));m&&(t.pointLogged=new d(m,this.pointName));this._currIndex=a.toIntEnd(f.slice(q+10,q+12));this._wrapped=f[q+12]?1:0;this._bufferSize=f[q+17]}n={dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:23,xl:this.pointInstance-1,xh:0,cnt:0};this._errMsg=g.substitute(l.couldNotLoad,[h.logData])+l.dataMissing;v=this._fetch(n);
v.then(p.hitch(this,function(a){a=a.data;if(1>a.length&&!this.isLC)throw Error("Fetched data is empty.");this.decode(a)}));v.then(p.hitch(this,function(){this._checkArchive(b,t)}));v.otherwise(p.hitch(this,function(a){k.reject(this.safeError(a,{name:g.substitute(l.xNotFound,[l.rt]),message:this._replace(l.couldNotLoad)+" "+l.objNotFound,suggestion:c.objNotFoundFix}))}))}),p.hitch(this,function(a){k.reject(this.safeError(a,{name:g.substitute(l.xNotFound,[l.rt]),message:this._replace(l.couldNotLoad)+
" "+l.objNotFound,suggestion:c.objNotFoundFix}))}));return k.promise},_jobLoaded:function(){this._setAlarmContext()},_setAlarmContext:function(){t.setAlarmContextForRcpPoint(this.system,this.pointName)}})})},"webview/reliable/RuntimeLogWorksheet":function(){define("dojo/_base/declare dojo/_base/lang dojo/text!../widget/templates/RuntimeLogWorksheet.html rc/reliable/RuntimeLogWorksheet ../sys/job ../util/AlarmUtil ../util/audit ../widget/RuntimeLogCommon dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/_runtime/RuntimeLogToolbar".split(" "),
function(r,p,m,l,h,c,g,d){return r("webview/reliable/RuntimeLogWorksheet",[l,d],{templateString:m,postCreate:function(){this.inherited(arguments);h.loadOnce().then(p.hitch(this,this._jobLoaded))},render:function(){this.inherited(arguments);this._buildAuditLogContext()},_buildAuditLogContext:function(){var c=[{systemId:this.system,objectName:"*"+this.mnemonic.split("RTS")[0]}];g.setContextData(rc.pathInfo.site,c,this.fullTitle)},_jobLoaded:function(){this._setAlarmContext()},_setAlarmContext:function(){c.setAlarmContextForRcpPoint(this.system,
this.pointName)}})})},"webview/reliable/WeeklySchedule":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/promise/all dojo/string dojo/text!webview/reliable/_weekly/templates/WeeklySchedule.html rc/_base/Error rc/reliable/Point rc/reliable/ReliableEnums rc/reliable/WeeklySchedule rc/util/encoding/base64 ../sys/desc ../sys/job ../util/AlarmUtil ../util/audit ../widget/ClientToolBar".split(" "),function(r,p,m,l,h,c,g,d,n,a,b,t,k,
q,f,u,w,z){return r("webview/reliable/WeeklySchedule",t,{templateString:d,rcpPoint:null,postCreate:function(){this.inherited(arguments);this.rcpPoint=new a(this.mainController,this.subnet,this.subController,b.subType.WEEKLY_SCHEDULES,this.pointInstance);this.own(c([f.loadOnce(),q.loadOnce()]).then(p.hitch(this,this._setAlarmContext)))},_buildAuditLogContext:function(){var a=[];a.push({systemId:Number(this.system),objectName:"*"+this.rcpPoint.toPanel()});w.setContextDataWithSiteId(this.site,a,this.fullTitle)},
_fetch:function(){var a=new m,b={gid:"WS",type:"rcp",method:"GET",cmdObj:{dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:17,xl:this.pointInstance-1,xh:0,cnt:0},load:p.hitch(this,function(b){a.resolve(b)}),error:p.hitch(this,function(b){a.reject(new n({name:g.substitute(l.xNotFound,[l.ws]),message:this._replace(l.couldNotLoad)+" "+g.substitute(l.hostXOffline,[this.mainController]),suggestion:h.hostOfflineFix,e:b}))})};rc.xhr.request(b);return a.promise},_fetchSequence:function(){var a=
new m;this._fetch().then(p.hitch(this,function(a){if(1>a.data.length)throw new n({name:g.substitute(l.xNotFound,[l.ws]),message:this._replace(l.couldNotLoad)+" "+l.objNotFound,suggestion:h.objNotFoundFix});if(144!==a.data.length)throw new n({name:this._replace(l.problemInX),message:this._replace(l.couldNotLoad)+" "+l.dataProblem,suggestion:l.dataProblemFix});return this._decode(a.data)})).then(p.hitch(this,function(a){return this._render(a)})).then(p.hitch(this,function(b){a.resolve(b);return b}));
return a.promise},_createToolbarConnections:function(){this._toolbar=new z;this._canEdit&&(this._saveButton=this._toolbar.addToolBarItem(h.save,"save","rc24Icon saveIcon",p.hitch(this,this.sendWithReason,"weekly-schedule")));this._toolbar.addToolBarItem(l.xport,"export","rc24Icon svg-export-icon toolbarButtonIcon",p.hitch(this,this.exportCsv));this._container.addChild(this._toolbar);this._container.startup()},_render:function(a){this.inherited(arguments);this._buildAuditLogContext();return a},_send:function(){var a=
k.encode(this._encode()),b={gid:"WS",type:"rcp",method:"POST",cmdObj:{dest:this.mainController,subt:this.subnet,subd:this.subController,src:0,cmd:117,xl:this.pointInstance-1,xh:0,cnt:a.length,data:a}},a=this._getRCPValidateRequestData(b);return this._validateApprovalSession(a).then(p.hitch(this,function(){return rc.xhr.request(b)}))},_setAlarmContext:function(){u.setAlarmContextForRcpPoint(this.system,this.rcpPoint)}})})},"webview/widget/AHACRequestToast":function(){define("dijit/form/Button dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/mouse dojo/on dojo/text!./templates/AHACRequestToast.html rc/widget/Toast".split(" "),
function(r,p,m,l,h,c,g,d,n,a,b){return m("webview/widget/AHACRequestToast",b,{templateString:a,item:null,loader:null,postCreate:function(){this.inherited(arguments);0===this.item.status&&(this.approveButton=new r({baseClass:"dijitButton approveButton",label:g.approve,onClick:l.hitch(this,function(){this.loader._updateStatus([this.item.id],1,null);this.clear(!0)})},h.create("div",{},this._buttonContainer)),this._supportingWidgets.push(this.approveButton),this.refuseButton=new r({baseClass:"dijitButton refuseButton",
label:c.reject,onClick:l.hitch(this,function(){this.pause();this.loader._showReasonEditor(this.item.reason,null).then(l.hitch(this,function(a){this.loader._updateStatus([this.item.id],2,a);this.clear(!0)})).otherwise(l.hitch(this,this.play))})},h.create("div",{},this._buttonContainer)),this.dismissButton=new r({baseClass:"dijitButton rcIcon dismissIcon",onClick:l.hitch(this,function(){this.clear()})},h.create("div",{},this.dismissNode)),this._supportingWidgets.push(this.refuseButton),this.own(n(this.domNode,
d.enter,l.hitch(this,function(){this.cancelTimer();var a=n(this.domNode,d.leave,l.hitch(this,function(){this.setTimer();a.remove()}))}))))},destroy:function(){p.forEach(this._supportingWidgets,l.hitch(this,function(a){a.destroy();a=null}));this.inherited(arguments);this._supportingWidgets=[]}})})},"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:rc/templates/ReliableSystem.html":'\x3cdiv class\x3d"rcTreeView"\x3e\r\n    \x3cdiv style\x3d"width:100%; height:100%" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dojox/layout/resources/ExpandoPane.html":'\x3cdiv class\x3d"dojoxExpandoPane"\x3e\r\n\t\x3cdiv dojoAttachPoint\x3d"titleWrapper" class\x3d"dojoxExpandoTitle"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxExpandoIcon" dojoAttachPoint\x3d"iconNode" dojoAttachEvent\x3d"ondijitclick:toggle"\x3e\x3cspan class\x3d"a11yNode"\x3eX\x3c/span\x3e\x3c/div\x3e\r\n\t\t\x3cspan class\x3d"dojoxExpandoTitleNode" dojoAttachPoint\x3d"titleNode"\x3e${title}\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dojoxExpandoWrapper" dojoAttachPoint\x3d"cwrapper" dojoAttachEvent\x3d"ondblclick:_trap"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxExpandoContent" dojoAttachPoint\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/widget/templates/AlarmNotification.html":'\x3cdiv class\x3d"rcAlarmNotices rcHidden"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"toasterNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"rcAlarmsList" data-dojo-attach-point\x3d"listContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"rcAlarmsInfoBar" data-dojo-attach-point\x3d"infoBar"\x3e\r\n        \x3cdiv class\x3d"rcAlarmsMiniBar" data-dojo-attach-point\x3d"miniBar"\x3e\r\n            \x3cdiv class\x3d"rcMiniIcon rcExpandIcon" data-dojo-attach-point\x3d"_sizeIconNode"\x3e\x3c/div\x3e\r\n            \x3ch3 class\x3d"rcAlarmCount" data-dojo-attach-point\x3d"titleNode"\x3e\x3c/h3\x3e\r\n            \x3cdiv class\x3d"rcAlarmIcon rcAlarmsTitleIcon" data-dojo-attach-point\x3d"_titleIconNode"\x3e\x3c/div\x3e\r\n            \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_popupCheckBox"\r\n                   checked title\x3d"Enable popups"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"rcAlarmsLink" data-dojo-attach-point\x3d"allLink"\x3e\r\n            \x3ca href\x3d"" data-dojo-attach-point\x3d"_linkNode"\x3e\x3c/a\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/widget/templates/ErrorMessage.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n    \x3ch2\x3e\r\n        \x3cspan class\x3d"rcBigWarningIcon"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"errorTitleContainer"\x3e\x3c/span\x3e\r\n    \x3c/h2\x3e\r\n    \x3cp class\x3d"hidden" data-dojo-attach-point\x3d"errorMessageContainer"\x3e\x3c/p\x3e\r\n    \x3cp class\x3d"hidden" data-dojo-attach-point\x3d"suggestionContainer"\x3e\x3c/p\x3e\r\n\x3c/div\x3e',"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_menuBtn"\r\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\r\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\r\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_leftBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_rightBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\r\n\t\x3cdiv class\x3d\'dijitTabListWrapper\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\r\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\r\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\r\n\t\t  role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\r\n\t\t\t\t\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:rc/widget/templates/DateTimeDialog.html":'\x3cdiv class\x3d"dijitDialog rcSystemTimeDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" title\x3d"${rcStrings.setDateTime}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"fullsize" data-dojo-attach-point\x3d"_waitingBlock"\x3e\r\n            \x3cdiv class\x3d"waiting"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan class\x3d"date-time-row"\x3e\r\n                ${rcStrings.curSystemDate}:\r\n                \x3cspan class\x3d"waiting" data-dojo-attach-point\x3d"_waitingIcon"\x3e\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_currentD"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan class\x3d"date-time-row"\x3e\r\n                ${rcStrings.curSystemTime}:\r\n                \x3cspan data-dojo-attach-point\x3d"_currentT"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3ctable\x3e\r\n            \x3ctr class\x3d"time-setting-row"\x3e\r\n                \x3ctd\x3e\r\n                    \x3clabel for\x3d"${id}_dateBox"\x3e${rcStrings.newDate}:\x3c/label\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd\x3e\r\n                    \x3cinput type\x3d"text" class\x3d"rcTextBox" id\x3d"${id}_dateBox" title\x3d"${rcStrings.setSystemDate}"\r\n                           data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                           data-dojo-attach-point\x3d"_dateBox" /\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr class\x3d"time-setting-row"\x3e\r\n                \x3ctd\x3e\r\n                    \x3clabel for\x3d"${id}_timeBox"\x3e${rcStrings.newTime}:\x3c/label\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd\x3e\r\n                    \x3cinput type\x3d"text" class\x3d"rcTextBox" id\x3d"${id}_timeBox" title\x3d"${rcStrings.setSystemTime}"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-attach-point\x3d"_timeBox" /\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n\r\n        \x3cp data-dojo-attach-point\x3d"_GMTContainer" class\x3d"GMTContainer hidden"\x3e\r\n            \x3cinput type\x3d"checkbox" id\x3d"${id}_convertGMTCB" class\x3d"convertGMTcheckbox" title\x3d"${rcStrings.convertLocalTimeGMT}"\r\n                   data-dojo-attach-point\x3d"_convertGMTCheckBox"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                   data-dojo-props\x3d"checked: false"/\x3e\r\n            \x3clabel for\x3d"${id}_convertGMTCB"\x3e\r\n                ${rcStrings.convertLocalTimeGMT}\r\n            \x3c/label\x3e\r\n        \x3c/p\x3e\r\n\r\n        \x3cdiv class\x3d"DSTContainer"\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"checkbox" title\x3d"${rcStrings.useDaylightSavingsTime}" id\x3d"${id}_disableDSTCB"\r\n                       data-dojo-attach-point\x3d"_disableDSTCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox"\r\n                       data-dojo-props\x3d"checked: true" /\x3e\r\n                \x3clabel for\x3d"${id}_disableDSTCB"\x3e\r\n                    ${rcStrings.useDaylightSavingsTime}\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n\r\n            \x3ctable\x3e\r\n                \x3ctr class\x3d"dst-entry"\x3e\r\n                    \x3ctd\x3e\r\n                        \x3clabel for\x3d"${id}_startDST" class\x3d"dst-label"\x3e${rcStrings.startDST}:\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                        \x3cinput type\x3d"text" class\x3d"dst-input rcTextBox" id\x3d"${id}_startDST" title\x3d"${rcStrings.clickSelectDSTStart}"\r\n                               data-dojo-attach-point\x3d"_startDSTBox"\r\n                               data-dojo-type\x3d"rc/widget/DateTextBox"/\x3e\r\n                    \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr class\x3d"dst-entry"\x3e\r\n                    \x3ctd\x3e\r\n                        \x3clabel for\x3d"${id}_endDST" class\x3d"dst-label"\x3e${rcStrings.endDST}:\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                        \x3cinput type\x3d"text" class\x3d"dst-input rcTextBox" id\x3d"${id}_endDST" title\x3d"${rcStrings.clickSelectDSTEnd}"\r\n                               data-dojo-attach-point\x3d"_endDSTBox"\r\n                               data-dojo-type\x3d"rc/widget/DateTextBox" /\x3e\r\n                    \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dijitDialogPaneActionBar" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"button" class\x3d"advancedButton" title\x3d"${rcStrings.showGMTConvertOption}"\r\n                data-dojo-attach-point\x3d"_advancedButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'iconClass: "hidden"\'\r\n                data-dojo-attach-event\x3d"click:_onClickAdvancedButton"\x3e\r\n            ${rcStrings.advanced}\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"submit" title\x3d"${rcStrings.setDateTime}"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button" title\x3d"${rcStrings.btnCancel}"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\r\n                data-dojo-props\x3d\'iconClass: "rcIcon cancelIcon"\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/widget/templates/DateTimeDialog/ErrorDialog.html":'\x3cdiv class\x3d"rcBigWarningIcon"\x3e\x3c/div\x3e\r\n\x3cdiv\x3e\r\n    \x3cp\x3e\r\n        ${errorText}\r\n    \x3c/p\x3e\r\n\x3c/div\x3e',"url:rc/widget/templates/DateTimeDialog/WarningDialog.html":'\x3cdiv class\x3d"rcBigWarningIcon"\x3e\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"warningTextContainer"\x3e\r\n    ${warningText}\r\n\x3c/div\x3e',"url:rc/bacnet/_btlProperties/templates/BTLProperties.html":'\x3cdiv class\x3d"BTLProperties"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"mainContainer"\x3e\r\n        \x3cdiv data-dojo-type\x3d\'dijit/layout/BorderContainer\' data-dojo-attach-point\x3d\'_container\' class\x3d"borderedContainer"\x3e\r\n            \x3cdiv class\x3d"mainContents" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"region: \'center\'"\x3e\r\n                \x3cdiv class\x3d"topContents"\x3e\r\n                    \x3cdiv class\x3d"topLeftContents"\x3e\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"deviceId"\x3eDevice Id:\x3c/label\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"deviceIdInput"\r\n                                  data-dojo-type\x3d"dijit/form/TextBox"\r\n                                  data-dojo-props\x3d"trim:\'true\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"objectRef"\x3eObject:\x3c/label\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"objectSelectionContainer"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"topRightContents"\x3e\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"instanceRef"\x3eInstance:\x3c/label\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"instanceRefInput"\r\n                                  data-dojo-type\x3d"dijit/form/TextBox"\r\n                                  data-dojo-props\x3d"trim:\'true\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"propertyRef"\x3eProperty:\x3c/label\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"propertyRefInput"\r\n                                  data-dojo-type\x3d"dijit/form/TextBox"\r\n                                  data-dojo-props\x3d"trim:\'true\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"arrayIdx"\x3eArray Index:\x3c/label\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"arrayIdxInput"\r\n                                  data-dojo-type\x3d"dijit/form/TextBox"\r\n                                  data-dojo-props\x3d"trim:\'true\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"addEntryButton"\r\n                                  data-dojo-type\x3d"dijit/form/Button"\r\n                                  data-dojo-props\x3d"label:\'Add\'"\x3e\x3c/span\x3e\r\n\r\n                            \x3cspan data-dojo-attach-point\x3d"clearEntriesButton"\r\n                                  data-dojo-type\x3d"dijit/form/Button"\r\n                                  data-dojo-props\x3d"label:\'Clear\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"propertyList"\x3e\r\n                    \x3ctable data-dojo-attach-point\x3d\'objectsToRead\'\x3e\r\n                        \x3ctr data-dojo-attach-point\x3d"columnHeaders"\x3e\r\n                            \x3cth class\x3d"tenPercentCell"\x3eObject Reference\x3c/th\x3e\r\n                            \x3cth\x3eValue\x3c/th\x3e\r\n                            \x3cth class\x3d"tenPercentCell"\x3eType\x3c/th\x3e\r\n                            \x3cth class\x3d"tenPercentCell"\x3ePriority\x3c/th\x3e\r\n                            \x3cth class\x3d"fivePercentCell"\x3eRemove\x3c/th\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"bottomContents"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"readButton"\r\n                          data-dojo-type\x3d"dijit/form/Button"\r\n                          data-dojo-props\x3d"label:\'Read\'"\x3e\x3c/span\x3e\r\n\r\n                    \x3cspan data-dojo-attach-point\x3d"writeButton" \r\n                          data-dojo-type\x3d"dijit/form/Button"\r\n                          data-dojo-props\x3d"label:\'Write\'"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/bacnet/_btlProperties/templates/ReadWriteEntry.html":'\x3ctr class\x3d"readWriteEntry" data-dojo-attach-point\x3d"tableEntry"\x3e\r\n    \x3ctd data-dojo-attach-point\x3d"objectRefCell"\x3e\x3c/td\x3e\r\n    \x3ctd class\x3d"rightAlignCell" data-dojo-attach-point\x3d"valueRefCell"\x3e\r\n        \x3cspan class\x3d"propertyValueTextArea" \r\n              data-dojo-attach-point\x3d"valueInput"\r\n              data-dojo-type\x3d"dijit/form/Textarea"\r\n              data-dojo-props\x3d"value:\'Read Required\'"\x3e\x3c/span\x3e\r\n    \x3c/td\x3e\r\n    \x3ctd class\x3d"rightAlignCell" data-dojo-attach-point\x3d"objectTypeRefCell"\x3e\x3c/td\x3e\r\n    \x3ctd class\x3d"rightAlignCell" data-dojo-attach-point\x3d"priorityRefCell"\x3e\x3c/td\x3e\r\n    \x3ctd class\x3d"deleteCell" data-dojo-attach-point\x3d"deleteEntry"\x3eX\x3c/td\x3e\r\n\x3c/tr\x3e',
"url:rc/bacnet/_calendar/templates/Calendar.html":'\x3cdiv class\x3d"bacAnnualSched"  data-dojo-attach-event\x3d"onmousedown: _mouseDownEvent"\x3e\r\n    \x3cdiv class\x3d"bacnet-calendar-container"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"_container"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"rc/widget/Toolbar"\r\n             data-dojo-props\x3d\'region: "top", buttons: {\r\n             Save: ${_canEdit},\r\n             clearAll: ${_canEdit},\r\n             Print: true\r\n             },\r\n             customHelp: "cal"\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"_contentPane"\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"calendarSet"\x3e\r\n\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"_calendarContainer" class\x3d"calendarWrapper" id\x3d"calendarWrapper"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"rc/bacnet/_calendar/EventDialog" data-dojo-attach-point\x3d"_eventDialog"\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"_eraseWarningDlg"\r\n         data-dojo-props\x3d\'title: "${rcStrings.warning}"\'\x3e\r\n        \x3cp\x3e\r\n            ${rcCalendarStrings.eraseConfirm}\r\n        \x3c/p\x3e\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"dlgOKButton"\r\n                    data-dojo-attach-event\x3d"onClick: eraseOK"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk}"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"dlgCancelButton"\r\n                    data-dojo-attach-event\x3d"onClick: eraseCancel"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnCancel}"\'\x3e\r\n                Cancel\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\r\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:rc/bacnet/_widget/templates/CalendarSet.html":'\x3cdiv class\x3d"calendarSet" data-dojo-attach-point\x3d"_calendarSetContainer" data-dojo-attach-event\x3d"onmousedown:_mouseDownEvent"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_calendarContainer" id\x3d"calendarWrapper" class\x3d"calendarWrapper"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Menu" data-dojo-attach-point\x3d"_popMenu" style\x3d"display: none;"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-event\x3d"onClick:_onClickCreate"\x3eCreate...\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dojox/widget/PlaceholderMenuItem"\x3eEvents\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_eventDialog"\x3e\x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_calendar/templates/_Calendar.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitCalendarContainer"\x3e\r\n    \x3ctable cellspacing\x3d"0" cellpadding\x3d"0"\x3e\r\n        \x3cthead\x3e\r\n            \x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\r\n                \x3cth class\x3d\'dijitReset\' colspan\x3d"7"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"monthLabelNode" class\x3d"dijitCalendarMonthLabel"\x3e\x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"monthLabelSpacer" class\x3d"dijitCalendarMonthLabelSpacer"\x3e\x3c/div\x3e\r\n                \x3c/th\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n                \x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e\x3c/span\x3e\x3c/th\x3e\r\n        \x3c/thead\x3e\r\n        \x3ctbody data-dojo-attach-event\x3d"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n            \x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate"\x3e\r\n                \x3ctd class\x3d"dijitReset dijitCalendarDateTemplate"\x3e\x3cdiv class\x3d"dijitCalendarDateWrapper"\x3e\x3cspan class\x3d"dijitCalendarDateLabel"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n        \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3cdiv class\x3d"exceptionCalendarPrintSurface" data-dojo-attach-point\x3d\'printSurface\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_calendar/templates/EventDialog.html":'\x3cdiv\x3e\r\n    \x3c!-- need this Div to reference dialog from annualSchedule.js--\x3e\r\n    \x3cdiv class\x3d"eventDialogContianer rcEditDialog"\r\n         data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"eventDialog"\r\n         data-dojo-props\x3d\'title: "${rcStrings.calendarEntry}"\'\x3e\r\n        \x3cdiv data-dojo-type\x3d"rc/bacnet/_widget/PeriodEditor"\r\n             data-dojo-attach-point\x3d"_periodEditor"\r\n             data-dojo-props\x3d"viewMode: \'calendar\'"\x3e\x3c/div\x3e\r\n\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_okButton"\r\n                    data-dojo-attach-event\x3d"onClick: _onClickOKButton"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk}"\'\x3e\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton type\x3d"button"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_deleteButton"\r\n                    data-dojo-attach-event\x3d"onClick: _onClickDeleteButton"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.rcDelete}"\'\x3e\r\n                \x3c!--type\x3dbutton prevents submitting when disabled--\x3e\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_cancelButton"\r\n                    data-dojo-attach-event\x3d"onClick: _onClickCancelButton"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.close}"\'\x3e\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/widget/templates/RuntimeLog.html":'\x3cdiv class\x3d"rcRuntimeLog"\x3e\r\n    \x3cdiv class\x3d"rcRuntimeLogBorderContainer"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"_container"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"rc/widget/Toolbar"\r\n             data-dojo-props\x3d\'region: "top", buttons: {\r\n             Print: true,\r\n             Export: true\r\n             },\r\n             customHelp: "rt"\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"rcRuntimeLog-container"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/widget/templates/RuntimeLogWorksheet.html":'\x3cdiv class\x3d"rcRuntimeLog"\x3e\r\n    \x3cdiv class\x3d"rcRuntimeLogBorderContainer"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"_container"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"rc/widget/Toolbar"\r\n             data-dojo-props\x3d\'region: "top", buttons: {\r\n             Print: true,\r\n             Export: true},\r\n             customHelp: "rts"\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"rcRuntimeWS-container"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_schedule/templates/Schedule.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" style\x3d"width:100%; height:100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_container" data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"noprint" style\x3d"width:100%; height:100%;"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" region\x3d"center"\x3e\r\n            \x3cdiv style\x3d"width:100%; height:100%;"\r\n                 data-dojo-type\x3d"rc/bacnet/_schedule/WeeklySchedule"\r\n                 data-dojo-attach-point\x3d"weeklySchedule"\r\n                 data-dojo-props\x3d"days: \'7\'"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"infoContainer" region\x3d"right"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"infoPane" region\x3d"top"\x3e\r\n                \x3clabel class\x3d"default-value-label"\r\n                       data-dojo-attach-point\x3d"defaultValueLabelContainer"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"defaultValueLabel" class\x3d"mpwDefaultValueLabel"\x3e\r\n                    \x3c/span\x3e\r\n                \x3c/label\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"defaultValueNode" class\x3d"mpwDefaultValue"\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3ch3 data-dojo-attach-point\x3d"specialEventsHeader"\x3e\x3c/h3\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"exSchedPane" region\x3d"center" style\x3d"overflow-y:scroll;"\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"_effectivePeriodContainer" region\x3d"bottom" class\x3d"effectivePeriodContainer"\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_advancedBtn" type\x3d"button" data-dojo-attach-event\x3d"onClick: _toggleEffectivePeriod"\x3e\r\n\r\n                \x3c/button\x3e\r\n                \x3cfieldset data-dojo-attach-point\x3d"_datesContainer" class\x3d"effectivePeriodNode hideContainer"\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_schedule/templates/ExceptionSchedule.html":'\x3cdiv class\x3d"exceptionSchedule calendarSet" data-dojo-attach-point\x3d"_calendarSetContainer"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"_calendarContainer" id\x3d"calendarWrapper" class\x3d"calendarWrapper"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit/Menu" data-dojo-attach-point\x3d"_popMenu" style\x3d"display: none;"\x3e\r\n            \t\x3cdiv data-dojo-attach-point\x3d"menuCreate"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"dojox/widget/PlaceholderMenuItem"\x3eEvents\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/CheckedMenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"${role}" tabIndex\x3d"-1" aria-checked\x3d"${checked}"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"dijitMenuItemIconChar dijitCheckedMenuItemIconChar"\x3e${!checkedChar}\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,labelNode,textDirNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26#160;\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:rc/bacnet/_schedule/templates/WeeklySchedule.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"rc_bacnet_weeklySchedule" data-dojo-attach-point\x3d"containerNode" style\x3d"-moz-user-select: none; -khtml-user-select: none; -o-user-select:none; font-weight:normal; font-size:100%;"\x3e\r\n\t\t\x3cdiv class\x3d"rc_bacnet_weeklySchedule_header" data-dojo-attach-point\x3d"header" style\x3d"height: 2em;"\x3e\r\n\t\t\t\x3cdiv class\x3d"rc_bacnet_weeklySchedule_header_inner" style\x3d"position:relative;"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"scheduleWeeklyDOW titlebar"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"scroller" class\x3d"scheduleWeeklyScroller"\x3e\r\n\t\t\t\x3ctable class\x3d"scheduleWeeklyTable" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0"\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd id\x3d"timeCol"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv id\x3d"weeklyTimeContainerID" style\x3d"position:relative;" data-dojo-attach-point\x3d"weeklyTimeContainer"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"scheduleWeeklyTime"\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd id\x3d"weeklySchedCol" style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mainWeekWindow" class\x3d"scheduleMainWeeklyContainer"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"scheduleWeeklyLine scheduleWeeklyLineMajor"\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"scheduleWeeklyLine scheduleWeeklyLineMinor"\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"containers"\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_schedule/templates/WeeklyScheduleEditDialog.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" \x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"dialog"\r\n         data-dojo-props\x3d\'title: "${rcStrings.editWeeklyEvent}"\'\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"dowDiv"\x3e${rcStrings.dayOfWeek}\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" class\x3d"specEventDialogTimeValueGrid outline"\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"gridContainer" style\x3d"height: 10em;" class\x3d"weekSchedEditGrid"\x3e\x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"lowerbar" data-dojo-attach-point\x3d\'_gridBarLower\'\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-attach-point\x3d"newRowButton"\r\n                        data-dojo-attach-event\x3d"onClick:_onClickAddRow"\r\n                        data-dojo-props\x3d\'iconClass: "rcIcon plusIcon",\r\n                        label: "${rcStrings.add}",\r\n                        showLabel: true\'\x3e\r\n                    Add\r\n                \x3c/button\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-attach-point\x3d"removeRowButton"\r\n                        data-dojo-attach-event\x3d"onClick:_onClickDelete"\r\n                        data-dojo-props\x3d\'iconClass: "rcIcon minusIcon",\r\n                            showLabel: true,\r\n                            disabled: true,\r\n                            label: "${rcStrings.remove}"\'\x3e\r\n                    Remove\r\n                \x3c/button\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"centreContentpane" title\x3d"Recurrence Pattern"\x3e\r\n            \x3cdiv class\x3d"weekSchedRecurrence" data-dojo-attach-point\x3d"weeklyOccPatternNode"\x3e\r\n                ${rcStrings.recurrencePattern}\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n                \x3ctable\x3e\r\n                    \x3ctbody\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"monCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect1"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW" /\x3e\r\n                                    ${_localeDays.monday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"tuesCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect2"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW" /\x3e\r\n                                    ${_localeDays.tuesday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d\'wedCell\'\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect3"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW" /\x3e\r\n                                    ${_localeDays.wednesday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"thursCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect4"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW" /\x3e\r\n                                    ${_localeDays.thursday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"friCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect5"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW" /\x3e\r\n                                    ${_localeDays.friday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"satCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect6"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW" /\x3e\r\n                                    ${_localeDays.saturday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"sunCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect7"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW" /\x3e\r\n                                    ${_localeDays.sunday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                \x3c/table\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"wsEditButtons"\x3e\r\n            \x3cp class\x3d"buttons"\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                        data-dojo-attach-point\x3d"okBtn"\r\n                        data-dojo-props\x3d\'label: "${rcStrings.btnOk}"\'\x3e\r\n                    OK\r\n                \x3c/button\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                        data-dojo-attach-point\x3d"cancelBtn"\r\n                        data-dojo-props\x3d\'label: "${rcStrings.btnCancel}"\'\x3e\r\n                    CANCEL\r\n                \x3c/button\x3e\r\n            \x3c/p\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_schedule/templates/WeeklyScheduleContainer.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"  class\x3d"scheduleWeeklyContainer"\x3e\x3c/div\x3e\r\n',"url:rc/bacnet/_schedule/templates/WeeklyScheduleEvent.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"scheduleWeeklyEvent"\x3e\r\n\t\x3cdiv class\x3d"resizeHandle resizeHandleTop" data-dojo-attach-point\x3d"_resizeHandleTop" \x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"resizeHandle resizeHandleBottom" data-dojo-attach-point\x3d"_resizeHandleBottom" \x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/reliable/_trend/templates/Trend.html":'\x3cdiv class\x3d\'rcTrend\' style\x3d"width:100%; height:100%;"\x3e\r\n\t\x3cdiv data-dojo-type\x3d\'dijit/layout/BorderContainer\'\r\n\t     data-dojo-attach-point\x3d"_borderContainer"\r\n\t     data-dojo-props\x3d\'liveSplitters: "false"\' style\x3d\'width:100%;height:100%;\'\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d\'dijit/layout/ContentPane\'\r\n\t\t     data-dojo-attach-point\x3d"_gridContainer"\r\n\t\t     data-dojo-attach-event\x3d"onMouseOver:_onMouseOutsideChart, onMouseMove:_onMouseOutsideChart"\r\n             data-dojo-props\x3d\'region: "leading", splitter:"true"\' style\x3d\'width:0%\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_gridNode"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d\'dijit/layout/ContentPane\' class\x3d"unselectable" \r\n\t\t     data-dojo-attach-point\x3d"_chartCP" \r\n\t\t     data-dojo-attach-event\x3d" onMouseOut:_onMouseMove" \r\n\t\t     data-dojo-props\x3d\'region:"center"\'\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"_chartDiv"\r\n\t\t\t     data-dojo-attach-event\x3d"onmousemove:_onMouseMove" style\x3d\'width:100%;height:100%;\'\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/reliable/_trend/templates/TrendLegend.html":'\x3cdiv class\x3d"${baseClass} trend-legend hidden"\r\n     data-dojo-attach-point\x3d"legendContainer"\x3e\r\n    \x3cdiv class\x3d"options-container"\r\n         data-dojo-attach-point\x3d"lineOptions"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"crosshairs-container"\r\n         data-dojo-attach-point\x3d"crosshairOptions"\x3e\r\n        \x3cdiv class\x3d"trend-legend-option"\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-attach-point\x3d"crosshairsCheckbox"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                   data-dojo-attach-event\x3d"onChange: _onCrosshairChange"\r\n                   data-dojo-props\x3d\'baseClass: "${checkboxClass}",\r\n                   checked: ${showCrosshairs}\' /\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"crosshairsLabel"\x3e${rcStrings.crosshairs}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dojox/form/resources/HorizontalRangeSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onkeyup:_onKeyUp" role\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent\x3d"onmousedown:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv role\x3d"presentation" class\x3d"dojoxRangeSliderBarContainer" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent\x3d"onmousedown:_onBarClick"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClickMax" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent\x3d"onmousedown:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:rc/widget/charting/templates/Crosshairs.html":'\x3cdiv class\x3d"chWrapper" data-dojo-attach-point\x3d"crossHairWrapper"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" style\x3d"width:100%;height:100%"\x3e\r\n        \x3cdiv class\x3d"crosshairLabel xCrosshairLabel " data-dojo-attach-point\x3d"xLabelDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"unselectable" id\x3d"xCrosshairLine" data-dojo-attach-point\x3d"xLineDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"crosshairLabel yCrosshairLabel " data-dojo-attach-point\x3d"yLabelDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"unselectable" id\x3d"yCrosshairLine" data-dojo-attach-point\x3d"yLineDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/reliable/_alarm/templates/Alarm.html":'\x3cdiv class\x3d"rcAlarm"\x3e\r\n    \x3cdiv class\x3d"rcAlarmBorderContainer"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"container" \x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"rc/widget/Toolbar"\r\n             data-dojo-props\x3d"region: \'top\', buttons: {\r\n             Load: true,\r\n             Print: true,\r\n             Export: true\r\n             },\r\n             customHelp: \'alarms\'"\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"rcAlarm-container"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d"region: \'center\'"\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/reliable/_annual/templates/Annual.html":'\x3cdiv class\x3d\'rcAnnualSched\'\x3e\r\n    \x3cdiv class\x3d"annual-sched-container" style\x3d"width:100%; height: 100%;"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d\'_container\'\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"rc/widget/Toolbar"\r\n             data-dojo-props\x3d\'region: "top", buttons: {\r\n             Save: ${_canEdit},\r\n             clearAll: ${_canEdit},\r\n             Print: true\r\n             },\r\n             customHelp: "as"\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d\'_annualSchedPane\'\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"_eraseWarningDlg"\r\n         data-dojo-props\x3d\'title: "${rcStrings.warning}"\'\x3e\r\n        \x3cp\x3e\r\n            ${rcCalendarStrings.eraseConfirm}\r\n        \x3c/p\x3e\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-event\x3d"onClick: eraseOK"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk}"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-event\x3d"onClick: eraseCancel"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnCancel}"\'\x3e\r\n                Cancel\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/reliable/_auditTrail/templates/AuditTrail.html":'\x3cdiv style\x3d"width:100%; height:100%"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"_container" style\x3d"width:100%; height:100%;"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"rc/widget/Toolbar"\r\n             data-dojo-props\x3d\'region: "top", buttons: {\r\n             Print: true,\r\n             Export: true\r\n             },\r\n             customHelp: "audit"\'\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"rcAudit-container"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/reliable/_auditTrail/templates/AuditTrailFilterDialog.html":'\x3cdiv class\x3d"dijitDialog audit-trail-filter-dialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_filterForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "filter", action: "", method: "",\r\n             name: "filter", encType: "multipart/form-data"\'\x3e\r\n\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"userLabel"\x3e${rcStrings.auditUser}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"User"\r\n                       data-dojo-attach-point\x3d"userFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "User",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"userExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"userExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"pointNameLabel"\x3e${rcStrings.auditPointName}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"Point Name"\r\n                       data-dojo-attach-point\x3d"pointNameFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "Point Name",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"pointNameExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"pointNameExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"actionLabel"\x3e${rcStrings.auditAction}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"Action"\r\n                       data-dojo-attach-point\x3d"actionFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "Action",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"actionExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"actionExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"detailsLabel"\x3e${rcStrings.auditDetails}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"Details"\r\n                       data-dojo-attach-point\x3d"detailsFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "Details",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"detailsExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"detailsExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"reasonLabel"\x3e${rcStrings.reason}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"Reason"\r\n                       data-dojo-attach-point\x3d"reasonFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "Reason",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"reasonExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"reasonExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n\r\n            \x3cfieldset\x3e\r\n                \x3clegend\x3e${rcStrings.filterDateRange}\x3c/legend\x3e\r\n                \x3cp\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"dateFromLabel"\x3e${rcStrings.filterFrom}\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"dateFrom"\r\n                           data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                           data-dojo-props\x3d\'label: "datefrom"\'/\x3e\r\n\r\n                    \x3clabel data-dojo-attach-point\x3d"dateToLabel"\x3e${rcStrings.filterTo}\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"dateTo"\r\n                           data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                           data-dojo-props\x3d\'label: "dateto"\' /\x3e\r\n                \x3c/p\x3e\r\n            \x3c/fieldset\x3e\r\n            \x3cfieldset\x3e\r\n                \x3clegend\x3e${rcStrings.filterTimeRange}\x3c/legend\x3e\r\n                \x3cp\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"timeFromLabel"\x3e${rcStrings.filterFrom}\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"timeFrom"\r\n                           data-dojo-type\x3d"rc/widget/TimeTextBox"\r\n                           data-dojo-props\x3d\'label: "timefrom",\r\n                           constraints: {timePattern: "h:mm:ss a"}\'/\x3e\r\n\r\n                    \x3clabel data-dojo-attach-point\x3d"timeToLabel"\x3e${rcStrings.filterTo}\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"timeTo"\r\n                           data-dojo-type\x3d"rc/widget/TimeTextBox"\r\n                           data-dojo-props\x3d\'label: "timeto",\r\n                           constraints: {timePattern: "h:mm:ss a"}\'/\x3e\r\n                \x3c/p\x3e\r\n            \x3c/fieldset\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"submit"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'label: "${rcStrings.btnOk}"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"applyButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'label: "${rcStrings.btnApply}"\'\x3eAPPLY\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"clearButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'label: "${rcStrings.btnClear}"\'\x3eCLEAR\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/widget/templates/TimeTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInlineTable dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\x3e\r\n    \x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\x3e\r\n        \x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26Chi; " type\x3d"text" tabIndex\x3d"-1" readOnly role\x3d"presentation"\t/\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\t\x3e\r\n        \x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off" ${!nameAttrSetting} type\x3d\'${type}\' /\x3e\r\n        \x3cdiv class\x3d"iconWrapper" data-dojo-attach-point\x3d"iconWrapper"\x3e\r\n            \x3cdiv class\x3d"rcIcon timeIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/reliable/_group/templates/Group.html":'\x3cdiv style\x3d"width:100%;height:100%"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer"  data-dojo-attach-point\x3d"_container"  style\x3d"width:100%;height:100%"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" region\x3d"center"\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"rc/reliable/_group/Stage" data-dojo-attach-point\x3d"stg"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',"url:rc/reliable/_group/templates/Stage.html":'\x3cdiv class\x3d"rcStage"\x3e\r\n\t\x3cdiv class\x3d"rcStageOverlay" data-dojo-attach-point\x3d"_overlay"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"rcStageWrapper" data-dojo-attach-point\x3d"_wrapperNode"\x3e\r\n\t\t\x3cdiv class\x3d"rcStageContainer" data-dojo-attach-point\x3d"containerNode" style\x3d"font-size: 100pt;"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/reliable/_group/templates/DialogEdit.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"rcEditPointDialog rc-edit-point-dialog"\r\n         data-dojo-type\x3d"rc/widget/Dialog"\r\n         data-dojo-attach-point\x3d"_dialog"\r\n         data-dojo-props\x3d\'refocus:false, duration: 1\'\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_displayName"\x3eMY VAR 1 (1VAR1)\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"_requiredNote required-sign formnote" data-dojo-attach-point\x3d"requiredNote"\x3e* ${rcStrings.requiredField}\x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"value-input-fields"\x3e\r\n            \x3cspan class\x3d"input-label"\r\n                  data-dojo-attach-point\x3d"valueNode"\x3e\r\n                ${rcStrings.value}\x3cspan class\x3d"required-sign formnote"\x3e*\x3c/span\x3e:\r\n            \x3c/span\x3e\r\n            \x3cdiv class\x3d"valueBoxWrapper showInline" data-dojo-attach-point\x3d"_valueTBContainer"\x3e\r\n                \x3cinput class\x3d"dialogEditValueBox"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'maxLength:"256", trim:"true", type:"text", required:"true"\' data-dojo-attach-point\x3d"_valueTB"\r\n                       data-dojo-attach-event\x3d""\x3e\r\n                \x3ctextarea class\x3d"dialogEditTextArea"\r\n                          data-dojo-type\x3d"dijit/form/SimpleTextarea"\r\n                          data-dojo-attach-point\x3d"_textArea"\x3e\x3c/textarea\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"valueBoxWrapper showInline" data-dojo-attach-point\x3d"_multiStateFSContainer"\x3e\r\n                \x3cinput class\x3d"dialogEditValueBox"\r\n                       data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                       data-dojo-props\x3d\'searchAttr:"name"\'\r\n                       data-dojo-attach-event\x3d"onChange:_onChangeMultiState"\r\n                       data-dojo-attach-point\x3d"_multiStateFS"\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"dialogEditRelinquishButton" data-dojo-attach-point\x3d"relinquishButtonContainer"\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-attach-point\x3d"_relinquishB"\r\n                        data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\x3e\r\n                    ...\r\n                \x3c/button\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"autoManContainer" class\x3d"showInline"\x3e\r\n                \x3cinput  class\x3d"dialogEditAutoManFS"\r\n                        data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                        data-dojo-props\x3d\'searchAttr:"name"\'\r\n                        data-dojo-attach-event\x3d"onChange:_onChangeAutoManual"\r\n                        data-dojo-attach-point\x3d"_autoManualFS"\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"handOverrideContainer" class\x3d"showInline"\x3e\r\n                \x3cinput class\x3d"dialogEditHandOverrideFS"\r\n                       data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                       data-dojo-props\x3d"disabled:true, searchAttr:\'name\'"\r\n                       data-dojo-attach-point\x3d"_handOverrideFS"\x3e\r\n            \x3c/div\x3e\r\n            \x3cinput class\x3d"dialogEditTimeBox hidden"\r\n                   data-dojo-attach-point\x3d"_timedOverrideTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'maxLength: 5, trim:true, type:"text",\r\n                   pattern: "^[0-9]{2}:[0-9]{2}$"\' /\x3e\r\n\r\n            \x3cspan data-dojo-attach-point\x3d"_loading"\x3e\x3c/span\x3e\r\n\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"reason-input-container"\x3e\r\n            \x3clabel class\x3d"input-label"\r\n                   data-dojo-attach-point\x3d"_reasonLabel"\x3e${rcStrings.reason}\x3cspan class\x3d"required-sign formnote"\x3e*\x3c/span\x3e:\r\n            \x3c/label\x3e\r\n\r\n            \x3cinput class\x3d"dialogEditReasonBox"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'maxLength:"256", trim:"true", type:"text"\'\r\n                   data-dojo-attach-point\x3d"_reasonTB"\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_ok"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk:capitalizeString}"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_cancel"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnCancel:capitalizeString}"\'\x3e\r\n                CANCEL\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-props\x3d\'title:"Invalid input"\' data-dojo-attach-point\x3d"_errorDialog"\x3e\r\n        \x3cp data-dojo-attach-point\x3d"errorTextContainer"\x3e\r\n        \x3c/p\x3e\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3ddijit/form/Button\r\n                    data-dojo-attach-point\x3d"_errOk"\r\n                    data-dojo-attach-event\x3d"onClick: _closeErrorDialog"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk:capitalizeString}"\'\x3e\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/reliable/_group/templates/DialogRelinquish.html":'\x3cdiv class\x3d"dijitDialog ${baseClass} relinquish-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d\'bottomMargin\'\x3e\x3cspan data-dojo-attach-point\x3d"_objName"\x3e\x3c/span\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d\'bottomMargin\' data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"button-contianer"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_loadB"\r\n                data-dojo-props\x3d\'label: "${rcStrings.load:capitalizeString}"\'\r\n                data-dojo-attach-event\x3d"onClick:_fetch"\x3e\r\n            LOAD\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_relinquishB"\r\n                data-dojo-props\x3d\'label: "${rcStrings.relinquish:capitalizeString}",\r\n                disabled: true\'\r\n                data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\x3e\r\n            RELINQUISH\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_closeB"\r\n                data-dojo-props\x3d\'label: "${rcStrings.close:capitalizeString}"\'\r\n                data-dojo-attach-event\x3d"onClick:hide"\x3e\r\n            CLOSE\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:rc/reliable/_group/widgets/displayTypes/landingPad/templates/LandingPad.html":'\x3cdiv class\x3d"landing-pad" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cspan class\x3d"value-container" data-dojo-attach-point\x3d"valueContainer"\x3e\r\n        \x3cspan class\x3d"text-container" data-dojo-attach-point\x3d"textContainer"\x3e${displayValue}\x3c/span\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',"url:rc/reliable/_group/widgets/displayTypes/landingPad/templates/LandingPadIcon.html":'\x3cimg src\x3d"" alt\x3d"" data-dojo-attach-point\x3d"imageNode"/\x3e',
"url:rc/reliable/_group/templates/TextEditDialog.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog"  duration\x3d"1" title\x3d"Edit Text File"\x3e\r\n        \x3ctable border\x3d"0"\x3e\r\n            \x3ctr\x3e\r\n                \x3ctd align\x3d"center"\x3e\r\n                    \x3cdiv style\x3d"position:relative" data-dojo-attach-point\x3d"_textContainer" class\x3d"textContainer"\x3e\r\n                        \x3cdiv class\x3d"waiting fullsize" data-dojo-attach-point\x3d"_waitingIcon"\x3e\x3c/div\x3e\r\n                        \x3ctextarea data-dojo-type\x3d"dijit/form/SimpleTextarea" type\x3d"text" data-dojo-attach-point\x3d"_textArea"\x3e\x3c/textarea\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n                \x3ctd align\x3d"center"\x3e\r\n                    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                            type\x3d"button"\r\n                            data-dojo-attach-point\x3d"_ok"\r\n                            data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                            data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                            iconClass: "rcIcon okIcon"\'\x3eOK\r\n                    \x3c/button\x3e\r\n                    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                            type\x3d"button"\r\n                            data-dojo-attach-point\x3d"_cancel"\r\n                            data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                            data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                            iconClass: "rcIcon cancelIcon"\'\x3eCancel\r\n                    \x3c/button\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_warningDlg"  class\x3d"rcEditPointWarningDialog" title\x3d"Warning - File not found"\x3e\r\n        \x3cdiv class\x3d"rcBigWarningIcon" \x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"warningTextContainer"\x3e\r\n        \x3c/div\x3e\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_yes"\r\n                    data-dojo-attach-event\x3d"onClick: _createEmptyFileYes"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton"\'\x3eYes\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_no"\r\n                    data-dojo-attach-event\x3d"onClick: _createEmptyFileNo"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton"\'\x3e\r\n                No\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_widget/templates/DialogEventParameter.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"editElementDialog rcEventParameterDialog"\r\n         data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"_dialog"\r\n         data-dojo-props\x3d"autoFocus: false, refocus: false,\r\n         title:\'Edit Event Type and Parameters\'"\x3e\r\n\r\n        \x3cdiv class\x3d"waiting fullsize" data-dojo-attach-point\x3d"_waitingBlock"\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"rc/bacnet/_widget/EventParameterEditor" data-dojo-attach-point\x3d"_eventParameterEditor"\x3e\x3c/div\x3e\r\n\r\n        \x3cp\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_reasonLabel"\x3e\r\n                Reason\r\n            \x3c/label\x3e\r\n\r\n            \x3cinput type\x3d"text"  maxLength\x3d"256"\r\n                   data-dojo-attach-point\x3d"_reasonTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"trim: true" /\x3e\r\n        \x3c/p\x3e\r\n\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cspan class\x3d"formnote" data-dojo-attach-point\x3d"requiredSpan"\x3e* required field \x3c/span\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"_ok" data-dojo-attach-event\x3d"onClick:_onClickOk"\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onClickCancel"\x3e\r\n                Cancel\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"rc/widget/ErrorDialog" data-dojo-attach-point\x3d"_errorDialog"\x3e\x3c/div\x3e\r\n        \x3c!--\t\t\x3cdiv data-dojo-type\x3d"rc/widget/ErrorDialog" data-dojo-attach-point\x3d"_errorDialogRetry" viewMode\x3d"warning"\x3e\x3c/div\x3e--\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/bacnet/_widget/templates/EventParameterEditor.html":'\x3cdiv class\x3d"eventParameterContainer" data-dojo-attach-point\x3d"_containerNode"\x3e\r\n\r\n    \x3cfieldset class\x3d"eventTypeContainer"\x3e\r\n        \x3clegend data-dojo-attach-point\x3d"_typeLabel" \x3eEvent Type\x3c/legend\x3e\r\n\r\n        \x3cdiv class\x3d"viewerRadioButtons"\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3cinput type\x3d"radio" id\x3d"_bitStringRB"\r\n                       data-dojo-attach-point\x3d"_bitStringRB"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-event\x3d"onClick:_showBitString" /\x3e\r\n\r\n                \x3clabel for\x3d"_bitStringRB"\x3eChange of bit string\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_stateRB"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_stateRB"\r\n                       data-dojo-attach-event\x3d"onClick:_showState" /\x3e\r\n\r\n                \x3clabel for\x3d"_stateRB"\x3eChange of state\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3cinput type\x3d"radio" id\x3d"_valueRB"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_valueRB"\r\n                       data-dojo-attach-event\x3d"onClick:_showCOVCriteria" /\x3e\r\n\r\n                \x3clabel for\x3d"_valueRB"\x3eChange of value\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_commandFailureRB"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_commandFailureRB"\r\n                       data-dojo-attach-event\x3d"onClick:_showCommandFailure" /\x3e\r\n\r\n                \x3clabel for\x3d"_commandFailureRB"\x3eCommand failure\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_floatingLimitRB"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_floatingLimitRB"\r\n                       data-dojo-attach-event\x3d"onClick:_showFloatingLimit" /\x3e\r\n\r\n                \x3clabel for\x3d"_floatingLimitRB"\x3eFloating limit\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_outOfRangeRB"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_outOfRangeRB"\r\n                       data-dojo-attach-event\x3d"onClick:_showOutOfRange" /\x3e\r\n\r\n                \x3clabel for\x3d"_outOfRangeRB"\x3eOut of range\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_bufferReadyRB"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_bufferReadyRB"\r\n                       data-dojo-attach-event\x3d"onClick:_showBufferReady" /\x3e\r\n\r\n                \x3clabel for\x3d"_bufferReadyRB"\x3eBuffer ready\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_lifeSafetyRB"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_lifeSafetyRB"\r\n                       data-dojo-attach-event\x3d"onClick:_showLifeSafety" /\x3e\r\n\r\n                \x3clabel for\x3d"_lifeSafetyRB"\x3eChange of life safety\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_doubleOutOfRange"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_doubleOutOfRangeRB"\r\n                       data-dojo-attach-event\x3d"onClick:_showDoubleOutOfRange" /\x3e\r\n\r\n                \x3clabel for\x3d"_doubleOutOfRange"\x3eDouble Out Of Range\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_signedOutOfRange"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_signedOutOfRange"\r\n                       data-dojo-attach-event\x3d"onClick:_showSignedOutOfRange" /\x3e\r\n\r\n                \x3clabel for\x3d"_signedOutOfRange"\x3eSigned Out Of Range\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_unsignedOutOfRange"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_unsignedOutOfRange"\r\n                       data-dojo-attach-event\x3d"onClick:_showUnsignedOutOfRange" /\x3e\r\n\r\n                \x3clabel for\x3d"_unsignedOutOfRange"\x3eUnsigned Out Of Range\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_unsignedRange"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_unsignedRange"\r\n                       data-dojo-attach-event\x3d"onClick:_showUnsignedRange" /\x3e\r\n\r\n                \x3clabel for\x3d"_unsignedRange"\x3eUnsigned Range\x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"_faultOutOfRange"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"_faultOutOfRange"\r\n                       data-dojo-attach-event\x3d"onClick:_showFaultOutOfRange" /\x3e\r\n\r\n                \x3clabel for\x3d"_faultOutOfRange"\x3eFault Out Of Range\x3c/label\x3e\r\n            \x3c/p\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cfieldset class\x3d"eventParameterContainer"\x3e\r\n            \x3clegend data-dojo-attach-point\x3d"_parametersLabel"\x3eEvent Parameters\x3c/legend\x3e\r\n            \x3cdiv class\x3d"eventParameterChoiceContext"\x3e\r\n\r\n                \x3cdiv class\x3d"context" data-dojo-attach-point\x3d"_changeOfBitString" \x3e\r\n                    \x3cdiv class\x3d"bitStringGridWrapper outline"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"_bitStringGridContainer" style\x3d"width: 19em; height:6em"\x3e\x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"lowerbar"\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"_addRowButton"\r\n                                   data-dojo-type\x3d"dijit/form/Button"\r\n                                   data-dojo-attach-event\x3d"onClick:_onClickAddRow"\r\n                                   data-dojo-props\x3d"label: \'Add values\',\r\n                                   iconClass: \'rcIcon plusIcon\',\r\n                                   showLabel: false" /\x3e\r\n\r\n                            \x3cinput data-dojo-attach-point\x3d"_deleteRowButton"\r\n                                   data-dojo-type\x3d"dijit/form/Button"\r\n                                   data-dojo-attach-event\x3d"onClick:_onClickDeleteRow"\r\n                                   data-dojo-props\x3d"label: \'Remove value\',\r\n                                   iconClass: \'rcIcon minusIcon\',\r\n                                   showLabel: false" /\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cp\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_bitmaskTBLabel"\x3eBitmask*: \x3c/label\x3e\r\n                        \x3cinput type\x3d"text"\r\n                               data-dojo-attach-point\x3d"_bitStringBitmaskTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d"invalidMessage: \'Bit string: ex. 1,0,0,1,0,1,0\',\r\n                               missingMessage:\'A bit string is required.\',\r\n                               required:true,\r\n                               pattern: \'((0|1),){0,31}(0|1)\'"  /\x3e\r\n                    \x3c/p\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_changeOfState"\x3e\r\n                    \x3cdiv class\x3d"popupInputContainer hideContainer" data-dojo-attach-point\x3d"_propertyFSContainer"\x3e\r\n                        \x3cinput data-dojo-attach-point\x3d"_propertyStateFS"\r\n                               data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                               data-dojo-props\x3d"invalidMessage:\'Select one of property state options.\',\r\n                               missingMessage: \'A selection is needed.\',\r\n                               required: true, searchAttr: \'name\'" /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"popupInputContainer hideContainer" data-dojo-attach-point\x3d"_valueBoxContainer"\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"stateGridWrapper outline"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"_stateGridContainer" style\x3d"width: 19em; height:6em"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"lowerbar"\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"_addRowButton"\r\n                                   data-dojo-type\x3d"dijit/form/Button"\r\n                                   data-dojo-attach-event\x3d"onClick:_onClickAddRow"\r\n                                   data-dojo-props\x3d"label: \'Add to list\',\r\n                                   iconClass: \'rcIcon plusIcon\',\r\n                                   showLabel: false" /\x3e\r\n\r\n                            \x3cinput data-dojo-attach-point\x3d"_deleteRowButton"\r\n                                   data-dojo-type\x3d"dijit/form/Button"\r\n                                   data-dojo-attach-event\x3d"onClick:_deletePropertyStateRow"\r\n                                   data-dojo-props\x3d"label: \'Remove from list\',\r\n                                   iconClass: \'rcIcon minusIcon\',\r\n                                   showLabel:false" /\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_changeOfValue" \x3e\r\n                    \x3cform\x3e\r\n                        \x3cp\x3e\r\n                            \x3cinput type\x3d"radio" id\x3d"_realRB"\r\n                                   data-dojo-attach-point\x3d"_realRB"\r\n                                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                   data-dojo-attach-event\x3d"onClick:_toggleCOV" /\x3e\r\n\r\n                            \x3clabel for\x3d"_realRB"\x3eReal\x3c/label\x3e\r\n\r\n                            \x3cinput type\x3d"radio" id\x3d"_bitmaskRB"\r\n                                   data-dojo-attach-point\x3d"_bitmaskRB"\r\n                                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                   data-dojo-attach-event\x3d"onClick:_toggleCOV" /\x3e\r\n\r\n                            \x3clabel for\x3d"_bitmaskRB"\x3eBitmask\x3c/label\x3e\r\n                        \x3c/p\x3e\r\n                    \x3c/form\x3e\r\n                    \x3cp data-dojo-attach-point\x3d"bitmaskTBContainer" class\x3d"hideContainer"\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_covBitmaskTBLabel"\x3eBitmask*: \x3c/label\x3e\r\n                        \x3cinput type\x3d"text"\r\n                               data-dojo-attach-point\x3d"_bitmaskTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d"invalidMessage: \'Bit string: ex. 1,0,0,1,0,1,0\',\r\n                               missingMessage: \'A bit string is required.\',\r\n                               required: true,\r\n                               pattern: \'((0|1),){0,31}(0|1)\'" /\x3e\r\n                    \x3c/p\x3e\r\n                    \x3cp data-dojo-attach-point\x3d"incrementTBContainer" class\x3d"hideContainer"\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_realIncrementTBLabel"\x3eReal increment*: \x3c/label\x3e\r\n                        \x3cinput type\x3d"text"\r\n                               data-dojo-attach-point\x3d"_realIncTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d"invalidMessage: \'Numbers or (-)infinity only\',\r\n                               missingMessage: \'A number is required.\',\r\n                               required: true,\r\n                               pattern: \'[-]?infinity|([+-]?(\\\\d*\\\\.?\\\\d+|\\\\d+\\\\.?\\\\d*)([eE][+-]?\\\\d+)?)\'" /\x3e\r\n                    \x3c/p\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_commandFailure" \x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_outOfRange" \x3e\r\n                    \x3cp\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_highLimitLabel"\x3eHigh limit*:\x3c/label\x3e\r\n                        \x3cinput type\x3d"text"\r\n                               data-dojo-attach-point\x3d"_highLimitTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d"invalidMessage: \'Numbers or (-)infinity only\',\r\n                               missingMessage: \'A number is required.\',\r\n                               required: true,\r\n                               pattern: \'[-]?infinity|([+-]?(\\\\d*\\\\.?\\\\d+|\\\\d+\\\\.?\\\\d*)([eE][+-]?\\\\d+)?)\'" /\x3e\r\n                    \x3c/p\x3e\r\n                    \x3cp\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_lowLimitLabel"\x3eLow limit*:\x3c/label\x3e\r\n                        \x3cinput type\x3d"text"\r\n                               data-dojo-attach-point\x3d"_lowLimitTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d"invalidMessage: \'Numbers or (-)infinity only\',\r\n                               missingMessage: \'A number is required.\',\r\n                               required: true,\r\n                               pattern: \'[-]?infinity|([+-]?(\\\\d*\\.?\\\\d+|\\\\d+\\\\.?\\\\d*)([eE][+-]?\\\\d+)?)\'" /\x3e\r\n                    \x3c/p\x3e\r\n                    \x3cp data-dojo-attach-point\x3d"_differentialContainer" class\x3d"differentialContainer"\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_differentialLabel"\x3eDeadband*:\x3c/label\x3e\r\n                        \x3cinput type\x3d"text"\r\n                               data-dojo-attach-point\x3d"_deadbandTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d"invalidMessage: \'Numbers or (-)infinity only\',\r\n                               missingMessage: \'A number is required.\',\r\n                               required: true,\r\n                               pattern: \'[-]?infinity|([+-]?(\\\\d*\\.?\\\\d+|\\\\d+\\.?\\d*)([eE][+-]?\\\\d+)?)\'" /\x3e\r\n                    \x3c/p\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_bufferReady" \x3e\r\n                    \x3cp\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_notThresholdLabel"\x3eNotification threshold*: \x3c/label\x3e\r\n                        \x3cinput type\x3d"text"\r\n                               data-dojo-attach-point\x3d"_thresholdTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d"invalidMessage: \'Positive numbers only.\',\r\n                               missingMessage: \'A number is required.\',\r\n                               required: true,\r\n                               pattern: \'\\\\d+\'" /\x3e\r\n                    \x3c/p\x3e\r\n                    \x3cp\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_previousNotCountLabel"\x3ePrevious notification count*: \x3c/label\x3e\r\n                        \x3cinput type\x3d"text"\r\n                               data-dojo-attach-point\x3d"_countTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d"invalidMessage: \'Positive numbers only.\',\r\n                               missingMessage: \'A number is required.\',\r\n                               required: true,\r\n                               pattern:\'\\\\d+\'" /\x3e\r\n                    \x3c/p\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_changeOfLifeSafety" class\x3d"clear"\x3e\r\n                    \x3cdiv class\x3d"lifeSafetyGridContainer outline"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"_alarmValuesGridContainer" style\x3d"height:6em"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"lowerbar"\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"_addRowButton"\r\n                                   data-dojo-type\x3d"dijit/form/Button"\r\n                                   data-dojo-attach-event\x3d"onClick:_addAlarmValuesRow"\r\n                                   data-dojo-props\x3d"label: \'Add values\',\r\n                                   iconClass:\' rcIcon plusIcon\',\r\n                                   showLabel: false" /\x3e\r\n\r\n                            \x3cinput data-dojo-attach-point\x3d"_deleteRowButton"\r\n                                   data-dojo-type\x3d"dijit/form/Button"\r\n                                   data-dojo-attach-event\x3d"onClick:_deleteAlarmValueRow"\r\n                                   data-dojo-props\x3d"label: \'Remove values\',\r\n                                   iconClass: \'rcIcon minusIcon\',\r\n                                   showLabel: false" /\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"lifeSafetyGridContainer outline"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"_alarmSaftyValuesGridContainer" style\x3d"height:6em"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"lowerbar"\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"_addRowButton"\r\n                                   data-dojo-type\x3d"dijit/form/Button"\r\n                                   data-dojo-attach-event\x3d"onClick:_addSafetyValuesRow"\r\n                                   data-dojo-props\x3d"label: \'Add values\',\r\n                                   iconClass: \'rcIcon plusIcon\',\r\n                                   showLabel: false" /\x3e\r\n\r\n                            \x3cinput data-dojo-attach-point\x3d"_deleteRowButton"\r\n                                   data-dojo-type\x3d"dijit/form/Button"\r\n                                   data-dojo-attach-event\x3d"onClick:_deleteSafetyValueRow"\r\n                                   data-dojo-props\x3d"label: \'Remove values\',\r\n                                   iconClass: \'rcIcon minusIcon\',\r\n                                   showLabel: false" /\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cp data-dojo-attach-point\x3d"_doprContainer" class\x3d"hideContainer"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"_doprLabel"\x3eSetpoint reference*: \x3c/label\x3e\r\n\r\n                    \x3cinput type\x3d"text" maxLength\x3d"30"\r\n                           data-dojo-attach-point\x3d"_doprTB"\r\n                           data-dojo-type\x3d"dijit/form/TextBox"\r\n                           data-dojo-props\x3d"required: true,\r\n                           readonly: true" /\x3e\r\n\r\n                    \x3cbutton type\x3d"button"  title\x3d"Click to edit an device object reference"\r\n                            data-dojo-attach-point\x3d"_doprEditorButton"\r\n                            data-dojo-type\x3d"dijit/form/Button"\r\n                            data-dojo-attach-event\x3d"onClick:_onClickEditObjectProperty"\r\n                            data-dojo-props\x3d"label: \'...\'"\x3e\r\n                        ...\r\n                    \x3c/button\x3e\r\n                \x3c/p\x3e\r\n\r\n                \x3cspan data-dojo-attach-point\x3d"_timeDelayContainer" class\x3d"timeDelayContainer hideContainer"\x3e\r\n                    \x3cp data-dojo-attach-point\x3d"_timeContainer" class\x3d"hideContainer"\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_timeDelayLabel"\x3eTime delay*: \x3c/label\x3e\r\n                        \x3cinput type\x3d"text" maxLength\x3d"3"\r\n                            data-dojo-attach-point\x3d"_timeDelayTB"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d"invalidMessage: \'Positive integers from 0-255 only.\',\r\n                            pattern: \'(\\\\d|[1-9]\\\\d|1\\\\d\\\\d|2[0-4]\\\\d|25[0-5])\',\r\n                            required: true" /\x3e\r\n                        \x3cspan\x3eSeconds\x3c/span\x3e\r\n                    \x3c/p\x3e\r\n                    \x3cp\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"_timeDelayNormalLabel"\x3eTime Delay Normal*: \x3c/label\x3e\r\n                        \x3cinput type\x3d"text" maxLength\x3d"3"\r\n                            data-dojo-attach-point\x3d"_timeDelayNormalTB"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d"invalidMessage: \'Positive integers from 0-255 only.\',\r\n                            pattern: \'(\\\\d|[1-9]\\\\d|1\\\\d\\\\d|2[0-4]\\\\d|25[0-5])\',\r\n                            required: true" /\x3e\r\n                        \x3cspan\x3eSeconds\x3c/span\x3e\r\n                    \x3c/p\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_errorDialog"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_doprDialog" title\x3d"Edit a device object property reference"\x3e\r\n        \x3cdiv data-dojo-type\x3d"rc/bacnet/_widget/DeviceObjectPropertyReferenceEditor" data-dojo-attach-point\x3d"_doprEditor"\x3e\x3c/div\x3e\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cspan class\x3d"formnote" data-dojo-attach-point\x3d"requiredSpan"\x3e* required field \x3c/span\x3e\r\n            \x3cbutton\r\n                data-dojo-type\x3d"dijit/form/Button" type\x3d"button"\r\n                data-dojo-attach-point\x3d"_ok"\r\n                data-dojo-attach-event\x3d"onClick:_onClickOkDOPR"\r\n                data-dojo-props\x3d"baseClass: \'webviewButton\'"\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n            \x3cbutton\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                type\x3d"button"\r\n                data-dojo-attach-event\x3d"onClick:_onClickCancelDOPR"\r\n                data-dojo-props\x3d"baseClass: \'webviewButton\'"\x3e\r\n                Cancel\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_widget/templates/DeviceObjectPropertyReferenceEditor.html":'\x3cfieldset class\x3d"devObjPropRefField"\x3e\r\n    \x3clegend  data-dojo-attach-point\x3d"_doprLegendLabel"\x3eDevice Object Property Reference\x3c/legend\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_objectIDEditor"\r\n         data-dojo-type\x3d"rc/bacnet/_widget/ObjectIDEditor" \x3e\x3c/div\x3e\r\n    \x3cp\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"_propLabel"\x3eProperty*: \x3c/label\x3e\r\n        \x3cinput type\x3d"text" maxLength\x3d"3"\r\n               data-dojo-attach-point\x3d"_propertyTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"promptMessage: \'Enter an property number.\',\r\n               invalidMessage: \'Positive integers only.\',\r\n               missingMessage: \'A property number is required.\',\r\n               required: true, pattern: \'\\\\d+\'" /\x3e\r\n    \x3c/p\x3e\r\n    \x3cp\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"_arrayIdxLabel"\x3eArray Index: \x3c/label\x3e\r\n        \x3cinput type\x3d"text" maxLength\x3d"30"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-attach-point\x3d"_arrayIdxTB"\r\n               data-dojo-props\x3d"invalidMessage: \'Positive integers only.\',\r\n               pattern: \'\\\\d+\',\r\n               required: false" /\x3e\r\n    \x3c/p\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_deviceObjectIDEditor"\r\n         data-dojo-type\x3d"rc/bacnet/_widget/ObjectIDEditor"\r\n         data-dojo-props\x3d"viewMode: \'device\', required: false"\x3e\x3c/div\x3e\r\n\x3c/fieldset\x3e',
"url:rc/bacnet/_widget/templates/ObjectIDEditor.html":'\x3cdiv class\x3d"objectIDContainer" data-dojo-attach-point\x3d"_containerNode"\x3e\r\n    \x3cspan class\x3d"showContainer" data-dojo-attach-point\x3d"_labelSpan"\x3eObject ID:\x3c/span\x3e\r\n    \x3cdiv class\x3d"editorControls"\x3e\r\n        \x3cp\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_typeLabel" \x3eType*: \x3c/label\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"_typeFS"\r\n                   data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                   data-dojo-props\x3d"invalidMessage: \'Select one of object type options.\',\r\n                   missingMessage: \'A selection is needed.\',\r\n                   promptMessage: \'Select an object type.\',\r\n                   required: true, searchAttr: \'name\'" /\x3e\r\n        \x3c/p\x3e\r\n\r\n        \x3cp data-dojo-attach-point\x3d"_reservedVendorTBContainer" class\x3d"hideContainer"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_reservedVendorLabel" \x3eVendor Type*: \x3c/label\x3e\r\n            \x3cinput type\x3d"text" maxLength\x3d"4"\r\n                   data-dojo-attach-point\x3d"_reservedVendorTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"promptMessage: \'Enter a vendor type number.\',\r\n                   invalidMessage: \'Positive integers only.\',\r\n                   missingMessage: \'A vendor type is required.\',\r\n                   required: false, pattern: \'\\\\d+\'" /\x3e\r\n        \x3c/p\x3e\r\n\r\n        \x3cp\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_instanceLabel" \x3eInstance*: \x3c/label\x3e\r\n            \x3cinput type\x3d"text" maxLength\x3d"7"\r\n                   data-dojo-attach-point\x3d"_instanceTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"promptMessage: \'Enter an instance number\',\r\n                   invalidMessage: \'Positive integers only.\',\r\n                   missingMessage: \'An instance number is required\',\r\n                   required: true,  pattern: \'\\\\d+\'" /\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/widget/templates/ErrorDialog.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"_dialog"\r\n         data-dojo-props\x3d"viewMode:\'error\',\r\n         title:\'${rcStrings.invalidInput}\'"\x3e\r\n        \x3cdiv class\x3d"rcBigWarningIcon" style\x3d"display:none"\x3e\x3c/div\x3e\r\n        \x3cp data-dojo-attach-point\x3d"_errorTextContainer"\x3e\r\n            ${rcStrings.requiredInfoMissing}\r\n        \x3c/p\x3e\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"okButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-event\x3d"onClick:onClickOk"\r\n                    data-dojo-props\x3d"label: \'OK\'"\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton style\x3d"display:none"\r\n                    data-dojo-attach-point\x3d"cancelButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-event\x3d"onClick:onClickCancel"\r\n                    data-dojo-props\x3d"label: \'Cancel\'"\x3e\r\n                Cancel\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/bacnet/_widget/templates/DialogListElement.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_dialog"\r\n         data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-props\x3d"duration: 1, title: \'Add or remove list element\'"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_displayName"\x3eMY VAR 1 (1VAR1)\x3c/span\x3e\r\n\t\t\x3cp\x3e\r\n            \x3clabel\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                    data-dojo-attach-point\x3d"_loadReadRangeCheck"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox"\r\n                    data-dojo-props\x3d"checked: false"\r\n                    data-dojo-attach-event\x3d"onChange: __onLoadReadRangeChecked" /\x3e\r\n                Load via ReadRange\r\n            \x3c/label\x3e\r\n\t\t\t\x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"_readRangeOptions"\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cinput type\x3d"radio" name\x3d"type" \r\n\t\t\t\t\t\tdata-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\tdata-dojo-attach-event\x3d"onClick:_clickedLoadEntire"\r\n\t\t\t\t\t\tid\x3d"entireList" checked\x3d"checked" data-dojo-attach-point\x3d"_loadEntireRRButton"\x3e\r\n\t\t\t\t\t\x3clabel for\x3d"entireList"   data-dojo-attach-point\x3d"loadEntireLabel"\x3e\r\n\t\t\t\t\t\tLoad Entire List\r\n\t\t\t\t\t\x3c/label\x3e\r\n\t\t\t\t\t\x3cinput type\x3d"radio" name\x3d"type" \r\n\t\t\t\t\t\tdata-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\tdata-dojo-attach-event\x3d"onClick:_clickedLoadSingle"\r\n\t\t\t\t\t\tid\x3d"singleElement" data-dojo-attach-point\x3d"_singleElementButton"\x3e\r\n\t\t\t\t\t\x3clabel for\x3d"singleElement" data-dojo-attach-point\x3d"singleElementLabel"\x3e\r\n\t\t\t\t\t\tLoad Position:\r\n\t\t\t\t\t\x3c/label\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"_readRangePositionOptions" style\x3d"display:inline-block;text-align:left"\x3e\r\n\t\t\t\t\t\t\x3cinput  type\x3d"number" min\x3d"1" max\x3d"4194303" step\x3d"1"\r\n\t\t\t\t\t\t\tdata-dojo-attach-point\x3d"_readRangePosition"\r\n\t\t\t\t\t\t\tdata-dojo-type\x3d"dijit/form/NumberTextBox"\r\n\t\t\t\t\t\t\tdata-dojo-props\x3d\'constraints: {min: 1, max: 65535, fractional: false, pattern: "#######"},\r\n\t\t\t\t\t\t\tmaxLength: 3,\r\n\t\t\t\t\t\t\tinvalidMessage: "Out of range",\r\n\t\t\t\t\t\t\tbaseClass: "rcTextBox", required: false,\r\n\t\t\t\t\t\t\tplaceHolder: "1"\' /\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n                \x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/p\x3e\r\n        \x3cp\x3e\r\n\t\t\t\x3cinput type\x3d"radio" name\x3d"type" data-dojo-type\x3d"dijit/form/RadioButton" id\x3d"addRB" checked\x3d"checked" data-dojo-attach-point\x3d"_addButton"\x3e\r\n\t\t\t\x3clabel for\x3d"addRB"   data-dojo-attach-point\x3d"addLabel"\x3e\r\n\t\t\t\tAdd or\r\n\t\t\t\x3c/label\x3e\r\n\r\n\t\t\t\x3cinput type\x3d"radio" name\x3d"type" data-dojo-type\x3d"dijit/form/RadioButton" id\x3d"removeRB" data-dojo-attach-point\x3d"_removeButton"\x3e\r\n\t\t\t\x3clabel for\x3d"removeRB" data-dojo-attach-point\x3d"removeLabel"\x3e\r\n\t\t\t\tRemove:\r\n\t\t\t\x3c/label\x3e\r\n\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"_propertyDisplayName"\x3elist elements\x3c/span\x3e\r\n\t\t\x3c/p\x3e\r\n\r\n\t\t\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" class\x3d"listElementGridContainer outline"\x3e\r\n\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"_gridContainer" style\x3d"height:10em"\x3e\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"lowerbar"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"_addRowButton"\r\n                       data-dojo-type\x3d"dijit/form/Button"\r\n                       data-dojo-attach-event\x3d"onClick:_onClickAddRow"\r\n                       data-dojo-props\x3d"label: \'Add list Element\',\r\n                       iconClass: \'rcIcon plusIcon\',\r\n                       showLabel: false" /\x3e\r\n\r\n                \x3cinput data-dojo-attach-point\x3d"_deleteRowButton"\r\n                       data-dojo-type\x3d"dijit/form/Button"\r\n                       data-dojo-attach-event\x3d"onClick:_onClickDeleteRow"\r\n                       data-dojo-props\x3d"label: \'Remove list element\',\r\n                       iconClass: \'rcIcon minusIcon\',\r\n                       showLabel: false" /\x3e\r\n            \x3c/div\x3e\r\n\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cp\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"_reasonLabel"\x3e\r\n\t\t\tReason\r\n\t\t\t\x3c/label\x3e\r\n\r\n            \x3cinput type\x3d"text" style\x3d"width:22em"\r\n                   data-dojo-attach-point\x3d"_reasonTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"maxLength: 256, trim: true"  /\x3e\r\n        \x3c/p\x3e\r\n\t\t\x3cp class\x3d"buttons"\x3e\r\n\t\t\t\x3cspan class\x3d"formnote" data-dojo-attach-point\x3d"requiredSpan"\x3e* required field \x3c/span\x3e\r\n\t\t\t\x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"_ok" data-dojo-attach-event\x3d"onClick:_onClickOk"\x3e\r\n\t\t\t\tOK\r\n\t\t\t\x3c/button\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"_cancel" data-dojo-attach-event\x3d"onClick:_onClickCancel"\x3e\r\n                Cancel\r\n\t\t\t\x3c/button\x3e\r\n\t\t\t\x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"_loadBtn" data-dojo-attach-event\x3d"onClick:_onLoad"\x3e\r\n                Load\r\n\t\t\t\x3c/button\x3e\r\n\t\t\x3c/p\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-type\x3d"rc/widget/ErrorDialog" data-dojo-attach-point\x3d"_errorDialog"\x3e\x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:rc/bacnet/_widget/templates/DialogEditElement.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog"  class\x3d"editElementDialog destinationSize" title\x3d"Edit Element"\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"_elementDialogContext" class\x3d"elementDialogContext "\x3e\r\n\r\n\t\t\t\x3cdiv  data-dojo-attach-point\x3d"_destinationElem" class\x3d"destinationElem"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"rc/bacnet/_widget/DestinationEditor" data-dojo-attach-point\x3d"_destinationEditor"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"_calendarEntryElem" class\x3d"calendarEntryElem"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_periodEditor"\r\n                     data-dojo-type\x3d"rc/bacnet/_widget/PeriodEditor"\r\n                     data-dojo-props\x3d"viewmode: \'calendar\'"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"_recipientElem" class\x3d"recipientElem"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"rc/bacnet/_widget/RecipientEditor" data-dojo-attach-point\x3d"_recipientEditor"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"_deviceObjectPropertyReferenceElem" class\x3d"deviceObjectPropertyReferenceElem"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"rc/bacnet/_widget/DeviceObjectPropertyReferenceEditor" data-dojo-attach-point\x3d"_doprEditor"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cp class\x3d"buttons"\x3e\r\n\t\t\t\x3cspan class\x3d"formnote" data-dojo-attach-point\x3d"requiredSpan"\x3e* required field \x3c/span\x3e\r\n\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"_ok" data-dojo-attach-event\x3d"onClick: _onClickOk"\x3e\r\n                OK\r\n\t\t\t\x3c/button\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"_cancel" data-dojo-attach-event\x3d"onClick: _onClickCancel"\x3e\r\n                Cancel\r\n\t\t\t\x3c/button\x3e\r\n\t\t\x3c/p\x3e\r\n\r\n\t\t\x3cdiv data-dojo-type\x3d"rc/widget/ErrorDialog" data-dojo-attach-point\x3d"_errorDialog"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/bacnet/_widget/templates/DestinationEditor.html":'\x3cdiv class\x3d"destinationEditorContainer" data-dojo-attach-point\x3d"_containerNode"\x3e\r\n\r\n    \x3cfieldset class\x3d"destination"\x3e\r\n\r\n        \x3clegend data-dojo-attach-point\x3d"_destLegendLabel"\x3eDestination\x3c/legend\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"rc/bacnet/_widget/RecipientEditor" data-dojo-attach-point\x3d"_recipientEditor"\x3e\x3c/div\x3e\r\n\r\n        \x3cfieldset class\x3d"validDaysField"\x3e\r\n\r\n            \x3clegend data-dojo-attach-point\x3d"_vDaysLegendLabel"\x3eValid Days and Time\x3c/legend\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3clabel data-dojo-attach-point\x3d"_monLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_mondayCB"\x3e\r\n                    Monday\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3clabel data-dojo-attach-point\x3d"_tueLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_tuesdayCB"\x3e\r\n                    Tuesday\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3clabel  data-dojo-attach-point\x3d"_wedLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_wednesdayCB"\x3e\r\n                    Wednesday\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3clabel data-dojo-attach-point\x3d"_thrLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_thursdayCB"\x3e\r\n                    Thursday\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3clabel data-dojo-attach-point\x3d"_friLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_fridayCB"\x3e\r\n                    Friday\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3clabel data-dojo-attach-point\x3d"_satLabel" \x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_saturdayCB"\x3e\r\n                    Saturday\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n\r\n                \x3clabel  data-dojo-attach-point\x3d"_sunLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_sundayCB"\x3e\r\n                    Sunday\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3c!--times--\x3e\r\n            \x3cp\x3e\r\n                \x3clabel  data-dojo-attach-point\x3d"_ftLabel"\x3eFrom time*: \x3c/label\x3e\r\n                \x3cinput type\x3d"text" \r\n                       data-dojo-attach-point\x3d"_fromTB"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d"required: true,\r\n                       missingMessage: \'A BACnet time is required\',\r\n                       promptMessage: \'Enter a BACnet time\',\r\n                       invalidMessage: \'Time: 24 hour:minute:second.centisecond.\',\r\n                       pattern: \'((0?\\\\d|1\\\\d|2[0-3]):(0?\\\\d|[1-5]\\\\d):(0?\\\\d|[1-5]\\\\d)\\\\.([0]?\\\\d|[1-9]\\\\d))\'" /\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"_ttLabel" \x3eTo time*: \x3c/label\x3e\r\n                \x3cinput type\x3d"text" \r\n                       data-dojo-attach-point\x3d"_toTB"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d"required: true,\r\n                       missingMessage: \'A BACnet time is required\',\r\n                       promptMessage: \'Enter a BACnet time\',\r\n                       invalidMessage: \'Time: 24 hour:minute:second.centisecond.\',\r\n                       pattern: \'((0?\\\\d|1\\\\d|2[0-3]):(0?\\\\d|[1-5]\\\\d):(0?\\\\d|[1-5]\\\\d)\\\\.([0]?\\\\d|[1-9]\\\\d))\'"  /\x3e\r\n\r\n            \x3c/p\x3e\r\n        \x3c/fieldset\x3e\r\n\r\n        \x3cfieldset class\x3d"transitionField floated"\x3e\r\n\r\n            \x3clegend data-dojo-attach-point\x3d"_transLegendLabel"\x3eTransitions\x3c/legend\x3e\x3cp\x3e\r\n            \x3cp\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"_tonLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_offNormalCB"\x3e\r\n                    To alarm\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel  data-dojo-attach-point\x3d"_tfLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_faultCB" \x3e\r\n                    To fault\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"_tnLabel" \x3e\r\n                    \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"  data-dojo-attach-point\x3d"_normalCB"\x3e\r\n                    To normal\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n        \x3c/fieldset\x3e\r\n\r\n        \x3cdiv class\x3d"floated"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_piLabel" \x3eProcess ID*:\x3c/label\x3e\r\n            \x3cinput type\x3d"text" \r\n                   data-dojo-attach-point\x3d"_processIDTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"invalidMessage: \'Positive integers only.\',\r\n                   missingMessage: \'A Process ID is required\',\r\n                   promptMessage: \'Enter a Process ID\',\r\n                   pattern: \'\\\\d+\', required: true" /\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"floated"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_icnLabel"\x3e\r\n                \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_issueConfirmedNotificationsCB"\x3e\r\n                Issue confirmed notifications\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/fieldset\x3e\r\n\r\n\x3c/div\x3e',
"url:rc/bacnet/_widget/templates/RecipientEditor.html":'\x3cdiv class\x3d"recipientEditorContainer" data-dojo-attach-point\x3d"_containerNode"\x3e\r\n\r\n\t\x3cfieldset class\x3d"recipientField"\x3e\r\n\r\n\t\t\x3clegend data-dojo-attach-point\x3d"_reciplegendLabel"\x3eRecipient\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"radioButtons"\x3e\r\n\t\t\t\x3cp\x3e\r\n\t\t\t\t\x3clabel data-dojo-attach-point\x3d"_deviceLabel" \x3e\r\n\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"_deviceRB"\x3e\r\n\t\t\tDevice\r\n\t\t\t\t\x3c/label\x3e\r\n\t\t\t\x3c/p\x3e\r\n\t\t\t\x3cp\x3e\r\n\t\t\t\t\x3clabel data-dojo-attach-point\x3d"_addressLabel"\x3e\r\n\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"_addressRB"\x3e\r\n\t\t\tAddress\r\n\t\t\t\t\x3c/label\x3e\r\n\t\t\t\x3c/p\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"recipientValuesContainer outline"\x3e\r\n\t\t\t\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"_objectIDContainer" class\x3d"hideContainer"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_objectIDEditor"\r\n                     data-dojo-type\x3d"rc/bacnet/_widget/ObjectIDEditor"\r\n                     data-dojo-props\x3d"required: true,\r\n                     viewMode: \'device\'"\x3e\r\n\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"_addressContainer"  class\x3d"hideContainer editorControls"\x3e\r\n\t\t\t\t\x3cp\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"_networkLabel" \x3eNetwork number*: \x3c/label\x3e\r\n                    \x3cinput type\x3d"text" class\x3d"networkTB"\r\n                           data-dojo-attach-point\x3d"_networkTB"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d"promptMessage: \'Enter an network number.\',\r\n                           invalidMessage: \'Positive integers only.\',\r\n                           missingMessage: \'A network number is required.\',\r\n                           required: true,  pattern: \'\\\\d+\'"  maxLength\x3d"30"\x3e\r\n                \x3c/p\x3e\r\n\t\t\t\t\x3cp\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"_MACLabel"\x3eMAC address: \x3c/label\x3e\r\n                    \x3cinput class\x3d"addressTB" type\x3d"text" \r\n                           data-dojo-attach-point\x3d"_MACAddressTB"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d"required: false,\r\n                           promptMessage: \'Enter an MAC Address.\',\r\n                           invalidMessage: \'Octets: ex. 0-255.0-255.0-255 etc...\',\r\n                           pattern: \'((\\\\d|\\\\d\\\\d|[0-1]\\\\d\\\\d|2[0-4]\\\\d|25[0-5])\\\\.)*(\\\\d|\\\\d\\\\d|[0-1]\\\\d\\\\d|2[0-4]\\\\d|25[0-5])\'"\r\n                           maxLength\x3d"30" /\x3e\r\n                    \x3c!--\t\t\t\t   pattern\x3d"((\\d|\\d\\d|[0-1]\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|\\d\\d|[0-1]\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|\\d\\d|[0-1]\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|\\d\\d|[0-1]\\d\\d|2[0-4]\\d|25[0-5]))\\:([0-5]?\\d?\\d?\\d?\\d|6[0-4]\\d\\d\\d|65[0-4]\\d\\d|655[0-2]\\d|6553[0-5])"--\x3e\r\n\t\t\t\t\t\x3c!--\t\t\t\t   invalidMessage\x3d"Invalid MAC address: ex. 192.168.4.68:47808" --\x3e\r\n\t\t\t\t\x3c/p\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\x3c/fieldset\x3e\r\n\r\n\x3c/div\x3e',
"url:rc/reliable/_weekly/templates/WeeklySchedule.html":'\x3cdiv class\x3d"rcWeeklySchedule" data-dojo-attach-point\x3d"containerNode" style\x3d"width:100%; height:100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_container" data-dojo-type\x3d"dijit/layout/BorderContainer" style\x3d"width:100%; height: 100%"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n         data-dojo-type\x3d"rc/widget/Toolbar"\r\n         data-dojo-props\x3d"region: \'top\', buttons: {\r\n         Save: ${_canEdit},\r\n         Print: true,\r\n         Export: true\r\n         }"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"trend-log-worksheet-container" \r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d"region: \'center\'"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/templates/index.html":'\x3cdiv class\x3d"rcTreeView"\x3e\r\n    \x3cdiv style\x3d"width:100%;height:100%" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"tree-pane-flyout" data-dojo-attach-point\x3d"treePaneFlyout"\r\n         data-dojo-type\x3d"webview/admin/widget/TreePaneFlyout"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/admin/widget/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"selectorNode" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d\'value: "${item.id}"\'\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"contentNode"\r\n              class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n            \x3cspan class\x3d"iconBorder"\x3e\r\n                \x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n                  tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n         style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/SearchForObject.html":'\x3cdiv class\x3d"search-for-object ${baseClass}" data-dojo-attach-point\x3d"mainContainer"\x3e\r\n    \x3cdiv class\x3d"tree-node-container" data-dojo-attach-point\x3d"searchedTreeNodeContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"text-search-container" data-dojo-attach-point\x3d"textSearchContainer"\x3e\r\n        \x3cspan class\x3d"searchform navTreeFilterSearch" data-dojo-attach-point\x3d"textSearchField"\r\n          data-dojo-type\x3d"webview/widget/SearchByField"\r\n          data-dojo-props\x3d"hasMenu: false"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"linkable webviewIcon close-icon" data-dojo-attach-point\x3d"closeButton"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Filter Options --\x3e\r\n    \x3cdiv class\x3d"search-filters" data-dojo-attach-point\x3d"searchFilters"\x3e\r\n        \x3cdiv class\x3d"search-wrapper"\x3e\r\n            \x3cdiv class\x3d"rcWidgetHeaderBar filter-options system-filters"\r\n                data-dojo-type\x3d"webview/widget/TitlePane"\r\n                data-dojo-attach-point\x3d"systemFilterContainer"\r\n                data-dojo-props\x3d\'title: "${webviewStrings.wvSystems}",\r\n                open: false\'\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"systemFilter"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"rcWidgetHeaderBar filter-options device-filters"\r\n                    data-dojo-type\x3d"webview/widget/TitlePane"\r\n                    data-dojo-attach-point\x3d"deviceFilterContainer"\r\n                    data-dojo-props\x3d\'title: "${webviewStrings.devices}",\r\n                    open: false\'\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"deviceFilter"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"rcWidgetHeaderBar filter-options object-type-filters"\r\n                    data-dojo-type\x3d"webview/widget/TitlePane"\r\n                    data-dojo-attach-point\x3d"objectFilterContainer"\r\n                    data-dojo-props\x3d\'title: "${webviewStrings.objects}",\r\n                    open: false\'\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"objectFilter"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/SearchByField.html":'\x3cdiv class\x3d"text-search-field" style\x3d"display: inline-block;"\x3e\r\n\t\x3cdiv class\x3d"searchformWrapper"\x3e\r\n        \x3cinput type\x3d"text" placeholder\x3d\'${defaultLabel}\' data-dojo-attach-point\x3d"searchBox" data-dojo-attach-event\x3d"onclick: _clearSearchBoxValue" /\x3e\r\n        \x3cinput type\x3d"hidden" data-dojo-attach-point\x3d"_buttonNode" /\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"clearField"\r\n              data-dojo-attach-event\x3d"click: _reset"\r\n              class\x3d"webviewIcon clear-field hidden"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"onclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle rcTitle title-pane" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n        \x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n            \x3cspan data-dojo-attach-point \x3d"iconHolder" class\x3d"titleIcon"\x3e\x3c/span\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n                        \x3cimg src\x3d"${_blankGif}" alt\x3d"" data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitArrowNode" role\x3d"presentation" /\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"arrow-icon"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter pane-contents" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/NotificationPullout.html":'\x3cdiv class\x3d"rcAlarmNotices dijitCollapsed"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"toasterNode"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"requestsContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"alarmsContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"esQueueContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"rcAlarmsInfoBar" data-dojo-attach-point\x3d"infoBar"\x3e\r\n        \x3cdiv class\x3d"rcAlarmsMiniBar" data-dojo-attach-point\x3d"miniBar"\x3e\r\n            \x3cdiv class\x3d"alarm-info-container hidden" data-dojo-attach-point\x3d"alarmInfoContainer"\x3e\r\n                \x3cspan class\x3d"rcAlarmIcon" data-dojo-attach-point\x3d"_titleIconNode"\x3e\x3c/span\x3e\r\n                \x3cspan class\x3d"rcAlarmCount" data-dojo-attach-point\x3d"_notificationCountContainer"\x3e0\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"es-queue-info-container hidden" data-dojo-attach-point\x3d"esQueueInfoContainer"\x3e\r\n                \x3cspan class\x3d"svg-icon svg-queue-icon"\x3e\x3c/span\x3e\r\n                \x3cspan class\x3d"es-queue-count" data-dojo-attach-point\x3d"queueCountContainer"\x3e${queueCount}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"rcAlarmsLink" data-dojo-attach-point\x3d"allLink"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/AHACNotification.html":'\x3cdiv class\x3d"rcAHACList" data-dojo-attach-point\x3d"listContainer"\x3e\x3c/div\x3e',"url:webview/reliable/_afterHours/templates/AHACRequests.html":'\x3cdiv class\x3d"after-hours ahac-requests" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"_container" class\x3d"rcRuntimeLogBorderContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/reliable/_afterHours/AHACRequestsToolbar"\r\n             data-dojo-props\x3d"showButtons: ${_canApprove}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"ahac-requests-container"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d"region: \'center\'"\x3e\r\n            \x3cdiv class\x3d"report-period" data-dojo-attach-point\x3d"reportPeriodContainer"\x3e\r\n                ${rcStrings.spPeriod}: \x3cspan class\x3d"report-dates linkable" data-dojo-attach-point\x3d"requestDates"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_afterHours/templates/RangePicker.html":'\x3cdiv class\x3d"dijitDialog range-picker-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 535px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"date-picker-container"\x3e\r\n            \x3cdiv class\x3d"text-input-container"\x3e\r\n                \x3clabel for\x3d"${id}_startDateInputBox"\x3e${webviewStrings.startLabel}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" id\x3d"${id}_startDateInputBox" tabindex\x3d"1"\r\n                       data-dojo-attach-point\x3d"startDateString"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox startDateInput",\r\n                       pattern: "${_datePattern}",\r\n                       invalidMessage: "${formatStrings.dateFormat-short}",\r\n                       placeHolder: "${formatStrings.dateFormat-short}"\'/\x3e\r\n\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"startCalendarPicker"\r\n                 data-dojo-type\x3d"webview/widget/CalendarPicker"\r\n                 data-dojo-props\x3d"tabindex: 3,\r\n                 startingYear: 2016,\r\n                 totalYears: 20"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"date-picker-container"\x3e\r\n            \x3cdiv class\x3d"text-input-container"\x3e\r\n                \x3clabel for\x3d"${id}_endDateInputBox"\x3e${webviewStrings.endLabel}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" id\x3d"${id}_endDateInputBox" tabindex\x3d"2"\r\n                       data-dojo-attach-point\x3d"endDateString"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox endDateInput",\r\n                       pattern: "${_datePattern}",\r\n                       invalidMessage: "${formatStrings.dateFormat-short}",\r\n                       placeHolder: "${formatStrings.dateFormat-short}"\' /\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"endCalendarPicker"\r\n                 data-dojo-type\x3d"webview/widget/CalendarPicker"\r\n                 data-dojo-props\x3d"tabindex: 4,\r\n                 startingYear: 2016,\r\n                 totalYears: 20"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"date-jumper-container"\x3e\r\n            \x3cspan class\x3d"linkable week-link" data-dojo-attach-point\x3d"jumpToWeek"\x3e${genericStrings.field-week}\x3c/span\x3e\r\n            \x3cspan class\x3d"linkable month-link" data-dojo-attach-point\x3d"jumpToMonth"\x3e${genericStrings.field-month}\x3c/span\x3e\r\n            \x3cspan class\x3d"linkable year-link" data-dojo-attach-point\x3d"jumpToYear"\x3e${genericStrings.field-year}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton OKbutton",\r\n                iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_afterHours/templates/ReasonDialog.html":'\x3cdiv class\x3d"dijitDialog reason-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 535px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3clabel class\x3d"reason-label"\r\n               data-dojo-attach-point\x3d"reasonLabel"\x3e${labelText}:\x3c/label\x3e\r\n        \x3ctextarea class\x3d"rcTextArea dialog-textarea"\r\n                  data-dojo-attach-point\x3d"reasonInput"\r\n                  data-dojo-type\x3d"dijit/form/Textarea"\r\n                  data-dojo-props\x3d\'value: "${value}"\'\x3e\x3c/textarea\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                disabled: true,\r\n                iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_afterHours/templates/AHACRequestsToolbar.html":'\x3cdiv class\x3d"ahac-requests-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"selectAllButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n              iconClass: "rc24Icon svg-select-all-icon toolbarButtonIcon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"approveButton"\r\n              data-dojo-props\x3d\'titleStr : "${afterHoursStrings.approve}",\r\n              iconClass: "rc24Icon svg-approve toolbarButtonIcon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"rejectButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.reject}",\r\n              iconClass: "rc24Icon svg-disapprove toolbarButtonIcon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/ToolbarButton.html":'\x3cdiv class\x3d"toolbarButton" data-dojo-attach-point\x3d"toolbarButton"\x3e\r\n\r\n\t\x3cdiv class\x3d"" data-dojo-attach-point\x3d"buttonNode"\x3e\r\n\t\t\x3cspan class\x3d"webviewToolbarButton" data-dojo-attach-point\x3d"toolbarButtonIcon"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\t\r\n\x3c/div\x3e',"url:webview/widget/templates/AlarmNotification.html":'\x3cdiv class\x3d"rcAlarmsList" data-dojo-attach-point\x3d"listContainer"\x3e\x3c/div\x3e',"url:webview/reliable/_enterpriseScheduleQueue/templates/EnterpriseScheduleQueue.html":'\x3cdiv class\x3d"enterprise-schedule-queue"  data-dojo-attach-point\x3d"listContainer" style\x3d"display: none;"\x3e\r\n    \x3cdiv class\x3d"queue-header" data-dojo-attach-point\x3d"_queueHeader"\x3e\r\n        \x3cspan\x3e${enterpriseScheduleStrings.enterpriseScheduleQueue}\x3c/span\x3e\r\n        \x3cspan\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_exportButton"\r\n                  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n                  data-dojo-props\x3d\'titleStr: "${rcStrings.xport}",\r\n                  iconClass: "webviewIcon toolbarButtonIcon svg-export-icon"\'\x3e\x3c/span\x3e\r\n\r\n            \x3cspan data-dojo-attach-point\x3d"_closeButton"\r\n                  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n                  data-dojo-props\x3d\'titleStr: "${rcStrings.close}",\r\n                  iconClass: "webviewIcon toolbarButtonIcon svg-clear-icon"\'\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"queue-grid" data-dojo-attach-point\x3d"_gridNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseScheduleQueue/templates/ScheduleQueueEntry.html":'\x3cdiv\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"_labelContainer"\x3e${label}\x3c/span\x3e\r\n\x3c/div\x3e',"url:dijit/templates/MenuBar.html":'\x3cdiv class\x3d"dijitMenuBar dijitMenuPassive" data-dojo-attach-point\x3d"containerNode" role\x3d"menubar" tabIndex\x3d"${tabIndex}"\r\n\t \x3e\x3c/div\x3e\r\n',"url:webview/widget/templates/AboutDialog.html":'\x3cdiv class\x3d"aboutDialog dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" role\x3d"button"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent aboutContainer"\x3e\r\n        \x3cdiv class\x3d"aboutInfo"\x3e\r\n            \x3cdiv class\x3d"versionNumber"\r\n                 data-dojo-attach-point\x3d"versionNumber"\x3e\r\n            \x3c/div\x3e\r\n            \x3cfieldset class\x3d"licenseInfoField"\x3e\r\n                \x3clegend\x3e${webviewStrings.licenseInfo}:\x3c/legend\x3e\r\n                \x3cdiv class\x3d"licenseInfo"\r\n                     data-dojo-attach-point\x3d"licenseInfo"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"third-party-licenses"\x3e\r\n                    \x3ca href\x3d"ThirdPartyLicenses"\x3e${!rcStrings.thirdPartyLicenses}\x3c/a\x3e\r\n                \x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"copyright"\r\n             data-dojo-attach-point\x3d"copyright"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/MenuBarItem.html":'\x3cdiv class\x3d"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" data-dojo-attach-point\x3d"focusNode"\r\n\t \trole\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"iconNode"/\x3e\x3c/span\x3e \x3c!--RC-CHANGE: Added Icon--\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"containerNode"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',"url:webview/widget/passwords/templates/ChangePasswordDialog.html":'\x3cdiv class\x3d"changePasswordDialogContents"\r\n\t data-dojo-attach-point\x3d"dialogContent"\x3e\r\n\t\x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\t\t\x3clabel for\x3d"${id}_currPass"\x3e${webviewStrings.currPass}:\x3c/label\x3e\r\n\t\t\x3cinput type\x3d"password"\r\n\t\t\t   id\x3d"${id}_currPass"\r\n\t\t\t   name\x3d"currPass"\r\n\t\t\t   data-dojo-attach-point\x3d"currPass"\r\n\t\t\t   data-dojo-type\x3d"dijit/form/TextBox"\r\n\t\t\t   data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\t\t\x3clabel for\x3d"${id}_newPass"\x3e${templateContentStrings.newPasswordLabel}:\x3c/label\x3e\r\n\t\t\x3cinput id\x3d"${id}_newPass"\r\n\t\t\t   type\x3d"password"\r\n\t\t\t   name\x3d"newPass"\r\n\t\t\t   data-dojo-attach-point\x3d"newPass"\r\n\t\t\t   data-dojo-type\x3d"dijit/form/TextBox"\r\n\t\t\t   data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\t\t\x3clabel for\x3d"${id}_verifyPass"\x3e${templateContentStrings.newPasswordVerifyLabel}:\x3c/label\x3e\r\n\t\t\x3cinput id\x3d"${id}_verifyPass"\r\n\t\t\t   type\x3d"password"\r\n\t\t\t   name\x3d"verifyPass"\r\n\t\t\t   data-dojo-attach-point\x3d"verifyPass"\r\n\t\t\t   data-dojo-type\x3d"dijit/form/TextBox"\r\n\t\t\t   data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"passwordChangeButtonContainer"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"saveButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button"\r\n\t\t\t  data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                          iconClass: "rcIcon okIcon",\r\n                          label:"${rcStrings.btnOk}".toUpperCase()\'\x3eOK\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button"\r\n\t\t\t  data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                          iconClass: "rcIcon cancelIcon",\r\n                          label:"${rcStrings.rcbCancel}"\'\x3eCANCEL\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/WarningDialog.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${title}" class\x3d"${baseClass}"\x3e\r\n\r\n                \x3cdiv class\x3d"rcAlertIcon rcWarningIcon"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cspan class\x3d"warningDialogText" data-dojo-attach-point\x3d"dialogText"\x3e\x3c/span\x3e\r\n\r\n                \x3cspan class\x3d"warningDialogContent" data-dojo-attach-point\x3d"dialogContent"\x3e\x3c/span\x3e\r\n\r\n                \x3cp data-dojo-attach-point\x3d"dialogButtons" class\x3d"buttons"\x3e\r\n                        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                                data-dojo-attach-point\x3d"dialogButtonsOneOrYes"\r\n                                data-dojo-props\x3d"baseClass: \'${buttonClass} oneOrYes\'"\x3e\r\n                        \x3c/button\x3e\r\n                        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                                data-dojo-attach-point\x3d"dialogButtonsAllOrNo"\r\n                                data-dojo-props\x3d"baseClass: \'${buttonClass} allOrNo\'"\x3e\r\n                        \x3c/button\x3e\r\n                        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                                data-dojo-attach-point\x3d"dialogButtonsCancel"\r\n                                data-dojo-props\x3d"baseClass: \'${buttonClass} cancelButton\'"\x3e\r\n                        \x3c/button\x3e\r\n                \x3c/p\x3e\r\n\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/whatsNew/templates/WhatsNewDialog.html":'\x3cdiv class\x3d"dijitDialog whats-new-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent webviewContentPane"\x3e\r\n        \x3cdiv class\x3d"top-button-container"\x3e\r\n            \x3cspan class\x3d"dijitDialogCloseIcon whats-new-close-icon"\r\n                  data-dojo-attach-point\x3d"closeButtonNode"\r\n                  data-dojo-attach-event\x3d"onclick: hide"\x3e \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"content-container"\x3e\r\n            \x3cdiv class\x3d"whatsNewText" data-dojo-attach-point\x3d"dialogTitle"\x3e${whatsNewStrings.title}\x3c/div\x3e\r\n            \x3cdiv class\x3d"rotator" data-dojo-attach-point\x3d"rotator"\x3e \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"webview-bottom-center-flex-container"\x3e\r\n            \x3cbutton class\x3d"webviewButton opt-out" type\x3d"button"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"optOutButton"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton opt-out",\r\n                    label: "${whatsNewStrings.optOut}"\'\x3e\r\n                ${whatsNewStrings.optOut}\r\n            \x3c/button\x3e\r\n\r\n            \x3cdiv class\x3d"webview-center-flex-container"\r\n                    data-dojo-attach-point\x3d"carouselContainer"\x3e\r\n                \x3cspan class\x3d"webviewIcon svg-back-icon nav-arrow" title\x3d"${whatsNewStrings.previous}"\r\n                      data-dojo-attach-point\x3d"prevButton"\r\n                      data-dojo-attach-event\x3d"onclick: _goToPrevious"\x3e\x3c/span\x3e\r\n\r\n                \x3cdiv class\x3d"webview-center-flex-container nav-indicator-container" data-dojo-attach-point\x3d"rotatorIndicator"\x3e\x3c/div\x3e\r\n\r\n                \x3cspan class\x3d"webviewIcon svg-next-icon nav-arrow" title\x3d"${whatsNewStrings.next}"\r\n                      data-dojo-attach-point\x3d"nextButton"\r\n                      data-dojo-attach-event\x3d"onclick: _goToNext"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cbutton class\x3d"webviewButton" type\x3d"button"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"readmoreButton"\r\n                    data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                    label: \'${whatsNewStrings.readMore}\'"\r\n                    data-dojo-attach-event\x3d"onClick: _onReadMore"\x3e\r\n                ${whatsNewStrings.readMore}\r\n            \x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/whatsNew/templates/ContentPane.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"img-container"\x3e\r\n        \x3cdiv class\x3d"img ${imageClass}" data-dojo-attach-point\x3d"image"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"text-container"\x3e\r\n        \x3cdiv class\x3d"title" data-dojo-attach-point\x3d"titleContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"body" data-dojo-attach-point\x3d"textContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"version" data-dojo-attach-point\x3d"versionContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/whatsNew/templates/PaneIndicator.html":'\x3cdiv class\x3d"pane-indicator"\x3e\x3c/div\x3e',"url:webview/admin/widget/templates/TreePaneFlyout.html":'\x3cdiv class\x3d"tree-pane-flyout ${baseClass} hidden" data-dojo-attach-point\x3d"selectionContainer"\x3e\r\n    \x3cdiv class\x3d"titleBar ${baseClass}TitleBar" data-dojo-attach-point\x3d"titleBar"\x3e\r\n        \x3cdiv class\x3d"titleBarIconAndText"\x3e\r\n            \x3cdiv class\x3d"titleBarRowIcon"\x3e\r\n                \x3cspan class\x3d"iconBorder"\x3e\r\n                    \x3cspan role\x3d"presentation" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"titleBarRowText"\x3e\r\n                \x3cspan class\x3d"titleBarDevice floatLeft" id\x3d"titleBarIconAndTextDevice" data-dojo-attach-point\x3d"titleBarDevice"\x3e\x3c/span\x3e\r\n                \x3cspan class\x3d"floatLeft" id\x3d"titleBarIconAndTextLabel" data-dojo-attach-point\x3d"titleBarLabel"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"titleBarRowIcon"\x3e\r\n            \x3cdiv role\x3d"presentation" class\x3d"hideSelectionOption" data-dojo-attach-event\x3d"onClick: _hide"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"selectionOptions ${baseClass}SelectionOptions" data-dojo-attach-point\x3d"selectionOptions"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/_FlyoutContent.html":'\x3cul data-dojo-attach-point\x3d"contentNode"\x3e\x3c/ul\x3e',"url:webview/admin/widget/templates/FlyoutOption.html":'\x3cli class\x3d"flyoutOption ${listItemClass}"\x3e\r\n    \x3cdiv class\x3d"flyoutOptionLine"\x3e\r\n        \x3cspan class\x3d"iconBorder"\x3e\r\n            \x3cspan class\x3d"dijitInline dijitIcon dijitTreeIcon dijitLeaf flyoutIcon ${iconClass}"\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"optionText" data-dojo-attach-point\x3d"textNode"\x3e${displayText}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/li\x3e',
"url:webview/reliable/_alarm/templates/Alarm.html":'\x3cdiv class\x3d"rcAlarm"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"container" class\x3d"rcAlarmBorderContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/reliable/_alarm/AlarmToolbar"\r\n             data-dojo-props\x3d"site: ${site},\r\n             system: ${system},\r\n             enforceChangeApproval: ${_enforceChangeApproval},\r\n             canEdit: ${_canEdit}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"rcAlarm-container"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d"region: \'center\'"\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_alarm/templates/AlarmToolbar.html":'\x3cdiv class\x3d"alarm-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \x3cspan class\x3d"system-filter-container" data-dojo-attach-point\x3d"systemFilterContainer"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"loadButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.load}",\r\n              iconClass: "rc24Icon svg-load-from toolbarButtonIcon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"ackButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.ack}",\r\n              iconClass: "rc24Icon svg-ack toolbarButtonIcon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"clearButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.clear}",\r\n              iconClass: "rc24Icon svg-clear-icon toolbarButtonIcon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"exportButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.xport}",\r\n              iconClass: "rc24Icon svg-export-icon toolbarButtonIcon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n            data-dojo-attach-point\x3d"excelButton"\r\n            data-dojo-props\x3d\'titleStr : "${webviewStrings.exportExcel}",\r\n            iconClass: "toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"clearFilterButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.clearAllFilters}",\r\n              iconClass: "toolbarButton svg-clear-all-filter-icon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"toggleColumnsButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.toggleColumns}",\r\n              iconClass: "rc24Icon svg-column-toggle-icon toolbarButtonIcon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"selectAllButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n              iconClass: "rc24Icon svg-select-all-icon toolbarButtonIcon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/form/templates/MultiMenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n    \x3ctd data-dojo-attach-point\x3d"containerNode"\x3e\r\n        \x3cinput type\x3d"checkbox"\r\n               data-dojo-attach-point\x3d"checkboxNode,focusNode"\r\n               data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"labelNode"\x3e${label}\x3c/label\x3e\r\n    \x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:webview/bacnet/_calendar/templates/Calendar.html":'\x3cdiv class\x3d"bacAnnualSched"  data-dojo-attach-event\x3d"onmousedown: _mouseDownEvent"\x3e\r\n    \x3cdiv class\x3d"bacnet-calendar-container"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"_container"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/widget/ClientToolBar"\r\n             data-dojo-props\x3d\'region: "top"\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"_contentPane"\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"calendarSet"\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_calendarContainer" class\x3d"calendarWrapper" id\x3d"calendarWrapper"\x3e\r\n                \x3c/div\x3e\r\n\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"webview/bacnet/_calendar/EventDialog" data-dojo-attach-point\x3d"_eventDialog"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/bacnet/_calendar/templates/EventDialog.html":'\x3cdiv\x3e\r\n    \x3c!-- need this Div to reference dialog from annualSchedule.js--\x3e\r\n    \x3cdiv class\x3d"eventDialogContianer rcEditDialog"\r\n         data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"eventDialog"\r\n         data-dojo-props\x3d\'title: "${rcStrings.calendarEntry}"\'\x3e\r\n        \x3cdiv data-dojo-type\x3d"webview/bacnet/_widget/PeriodEditor"\r\n             data-dojo-attach-point\x3d"_periodEditor"\r\n             data-dojo-props\x3d"viewMode: \'calendar\'"\x3e\x3c/div\x3e\r\n\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_okButton"\r\n                    data-dojo-attach-event\x3d"onClick: _onClickOKButton"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk}",\r\n                                        baseClass: "webviewButton"\'\x3e\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton type\x3d"button"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_deleteButton"\r\n                    data-dojo-attach-event\x3d"onClick: _onClickDeleteButton"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.rcDelete}",\r\n                                        baseClass: "webviewButton"\'\x3e\r\n                \x3c!--type\x3dbutton prevents submitting when disabled--\x3e\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_cancelButton"\r\n                    data-dojo-attach-event\x3d"onClick: _onClickCancelButton"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.close}",\r\n                                        baseClass: "webviewButton"\'\x3e\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/bacnet/_widget/templates/PeriodEditor.html":'\x3cfieldset class\x3d"eventDialogPeriodBox" data-dojo-attach-point\x3d"_containerNode"\x3e\r\n    \x3clegend data-dojo-attach-point\x3d"_legendLabel"\x3e\r\n        ${rcStrings.spPeriod}\r\n    \x3c/legend\x3e\r\n\r\n    \x3cdiv class\x3d"viewerRadioButtons"\x3e\r\n        \x3cp\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_eventPeriodDateNode"\x3e\r\n                \x3cinput class\x3d"dateRadio" type\x3d"radio"\r\n                       data-dojo-attach-point\x3d"_eventPeriodDate"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-event\x3d"onChange: _showDatePeriod"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'"/\x3e\r\n                ${rcStrings.date}\r\n            \x3c/label\x3e\r\n        \x3c/p\x3e\r\n        \x3cp\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_eventPeriodRange"\x3e\r\n                \x3cinput class\x3d"rangeRadio" type\x3d"radio"\r\n                       data-dojo-attach-point\x3d"_eventPeriodRange"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-event\x3d"onChange: _showDateRangePeriod"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'"/\x3e\r\n                ${rcStrings.spDateRange}\r\n            \x3c/label\x3e\r\n        \x3c/p\x3e\r\n        \x3cp\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_eventPeriodRecNode"\x3e\r\n                \x3cinput class\x3d"recurRadio" type\x3d"radio"\r\n                       data-dojo-attach-point\x3d"_eventPeriodRec"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-event\x3d"onChange: _showRecurPeriod"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'"/\x3e\r\n                ${rcStrings.spRecurrence}\r\n            \x3c/label\x3e\r\n        \x3c/p\x3e\r\n        \x3cp\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_eventPeriodCalNode"\x3e\r\n                \x3cinput class\x3d"calRadio" type\x3d"radio"\r\n                       data-dojo-attach-point\x3d"_eventPeriodCal"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-event\x3d"onChange: _showCalPeriod"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'"/\x3e\r\n                ${rcStrings.spCalendar}\r\n            \x3c/label\x3e\r\n        \x3c/p\x3e\r\n        \x3cp\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_eventPeriodOverrideNode"\x3e\r\n                \x3cinput class\x3d"overrideRadio" type\x3d"radio"\r\n                       data-dojo-attach-point\x3d"_eventPeriodOverride"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-event\x3d"onChange: _showOverridePeriod"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'"/\x3e\r\n                ${rcStrings.spOverride}\r\n            \x3c/label\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_eventPeriodContext" class\x3d"eventDialogPeriodContext outline"\x3e\r\n\r\n        \x3cdiv class\x3d"periodDateDialog" data-dojo-attach-point\x3d"_periodDateDialog"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_singleDate"\r\n                 data-dojo-type\x3d"webview/bacnet/_widget/BacnetDatePicker"\r\n                 data-dojo-props\x3d"showLabels: true,\r\n                 label: \'${rcStrings.date}:\',\r\n                 allWild: \'${rcStrings.always}\'"\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_advancedOptionsContainer"\x3e\r\n                \x3clabel class\x3d"advancedCheckboxLabel"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                           data-dojo-attach-point\x3d"_advancedOptions"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d"checked: false"\r\n                           data-dojo-attach-event\x3d"onChange: _showAdvancedOptions" /\x3e\r\n                    ${rcStrings.advancedOptions}\r\n                \x3c/label\x3e\r\n\r\n                \x3cdiv class\x3d"advancedDateOptions hidden" data-dojo-attach-point\x3d"_advancedDateOptions"\x3e\r\n                    \x3cdiv class\x3d"advancedContainer"\x3e\r\n                        \x3clabel class\x3d"advancedLabel"\x3e\r\n                            DOM:\r\n                            \x3cinput type\x3d"text"\r\n                                   data-dojo-attach-point\x3d"advancedDOM"\r\n                                   data-dojo-type\x3d"dijit/form/TextBox"\r\n                                   data-dojo-props\x3d"baseClass: \'rcTextBox\'"/\x3e\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"advancedContainer"\x3e\r\n                        \x3clabel class\x3d"advancedLabel"\x3e\r\n                            M:\r\n                            \x3cinput type\x3d"text"\r\n                                   data-dojo-attach-point\x3d"advancedMonth"\r\n                                   data-dojo-type\x3d"dijit/form/TextBox"\r\n                                   data-dojo-props\x3d"baseClass: \'rcTextBox\'"/\x3e\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"advancedContainer"\x3e\r\n                        \x3clabel class\x3d"advancedLabel"\x3e\r\n                            Y:\r\n                            \x3cinput type\x3d"text"\r\n                                   data-dojo-attach-point\x3d"advancedYear"\r\n                                   data-dojo-type\x3d"dijit/form/TextBox" \r\n                                   data-dojo-props\x3d"baseClass: \'rcTextBox\'"/\x3e\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_periodRangeDialog" class\x3d"periodRangeDialog"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_startDate"\r\n                 data-dojo-type\x3d"webview/bacnet/_widget/BacnetDatePicker"\r\n                 data-dojo-props\x3d"showLabels: true,\r\n                 label: \'${rcStrings.spStart}:\',\r\n                 allWild: \'${rcStrings.always}\'"\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_endDate"\r\n                 data-dojo-type\x3d"webview/bacnet/_widget/BacnetDatePicker"\r\n                 data-dojo-props\x3d"showLabels: true,\r\n                 label: \'${rcStrings.spEnd}:\',\r\n                 allWild: \'${rcStrings.never}\'"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_periodRecurDialog" class\x3d"periodRecDialog"\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\x3e\r\n                    ${rcStrings.month}:\r\n                    \x3cselect data-dojo-attach-point\x3d"_selectMonth"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d\'autoComplete: false,\r\n                            searchAttr: "name", value: 255,\r\n                            baseClass: "rcSelectBox"\'\x3e\x3c/select\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\x3e\r\n                    ${rcStrings.weekOfMonth}:\r\n                    \x3cselect data-dojo-attach-point\x3d"_selectWeekOfMonth"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d\'autoComplete: false,\r\n                            searchAttr: "name", value: 255,\r\n                            baseClass: "rcSelectBox"\'\x3e\x3c/select\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\x3e\r\n                    ${rcStrings.dayOfWeek}:\r\n                    \x3cselect data-dojo-attach-point\x3d"_selectDayOfWeek"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d\'autoComplete: false,\r\n                            searchAttr: "name", value: 255,\r\n                            baseClass: "rcSelectBox"\'\x3e\x3c/select\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"periodCalDialog" data-dojo-attach-point\x3d"_periodCalDialog"\x3e\r\n            \x3cp data-dojo-attach-point\x3d\'widget_selectCal\'\x3e\r\n                \x3clabel class\x3d"leadlabel"\x3e\r\n                    ${rcStrings.cal}:\r\n                    \x3cselect data-dojo-attach-point\x3d"_selectCal"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d"autoComplete: false,\r\n                            baseClass: \'rcSelectBox\'"\x3e\x3c/select\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cdiv class\x3d"mpwMessage" data-dojo-attach-point\x3d"_calMsgContainer"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"mpwMessage" data-dojo-attach-point\x3d"_calLoadingContainer"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"periodOverrideDialog" data-dojo-attach-point\x3d"_periodOverrideDialog"\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\x3e\r\n                    ${rcStrings.spOverride}:\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"_tbOverride"\r\n                           data-dojo-type\x3d"rc/bacnet/_widget/BacnetObjectTextBox"\r\n                           data-dojo-props\x3d\'mainController: ${mainController}\' /\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cp data-dojo-attach-point\x3d"_autodeleteContainer"\x3e\r\n            \x3clabel\x3e\r\n                \x3cinput class\x3d"autodelCheckBox" name\x3d"autodelete" type\x3d"checkbox" checked\x3d"checked"\r\n                       data-dojo-attach-point\x3d"_autodelete"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                    ${rcStrings.autoDelete}\r\n            \x3c/label\x3e\r\n        \x3c/p\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_bacnetDateError"\x3e\x3c/div\x3e\r\n\r\n\x3c/fieldset\x3e',
"url:webview/bacnet/_widget/templates/BacnetDatePicker.html":'\x3cdiv class\x3d"rcBacnetDatePicker"\x3e\r\n    \x3cp class\x3d"headerLabels" data-dojo-attach-point\x3d"headerLabels"\x3e\r\n        \x3clabel class\x3d"leadlabel"\x3e\x3c/label\x3e \x3c!--Empty for padding purposes--\x3e\r\n        \x3clabel class\x3d"bacnetDatePickerWildPadding"\x3e\x3c/label\x3e\x3c!--Empty for padding purposes--\x3e\r\n        \x3clabel class\x3d"wildCardLabel" data-dojo-attach-point\x3d"dLabel"\x3e${dWildLabel}\x3c/label\x3e\r\n        \x3clabel class\x3d"wildCardLabel" data-dojo-attach-point\x3d"mLabel"\x3e${mWildLabel}\x3c/label\x3e\r\n        \x3clabel class\x3d"wildCardLabel" data-dojo-attach-point\x3d"yLabel"\x3e${yWildLabel}\x3c/label\x3e\r\n        \x3clabel class\x3d"wildCardLabel" data-dojo-attach-point\x3d"aLabel"\x3e*\x3c/label\x3e\r\n    \x3c/p\x3e\r\n    \x3cp class\x3d"inputContainer" data-dojo-attach-point\x3d"inputContainer"\x3e\r\n        \x3clabel class\x3d"leadlabel" data-dojo-attach-point\x3d"labelNode"\x3e\x3c/label\x3e\r\n        \x3cspan   class\x3d"rcEditEventSelectBox eventStartDate" \r\n                title\x3d"Click to select date..."\r\n                data-dojo-attach-point\x3d"dateBox"\r\n                data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                data-dojo-props\x3d"parentClass: \'rcEditEventSelectBox\', constraints: {datePattern : \'dd MMM yyyy\'}"\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cinput type\x3d"checkbox"\r\n               data-dojo-type\x3d"dijit/form/CheckBox"\r\n               data-dojo-attach-point\x3d"dWild" value\x3d"true" /\x3e\r\n\r\n        \x3cinput type\x3d"checkbox" value\x3d"true"\r\n               data-dojo-type\x3d"dijit/form/CheckBox"\r\n               data-dojo-attach-point\x3d"mWild" /\x3e\r\n\r\n        \x3cinput type\x3d"checkbox" value\x3d"true"\r\n               data-dojo-type\x3d"dijit/form/CheckBox"\r\n               data-dojo-attach-point\x3d"yWild" /\x3e\r\n\r\n        \x3cinput type\x3d"checkbox" value\x3d"true"\r\n               data-dojo-type\x3d"dijit/form/CheckBox"\r\n               data-dojo-attach-point\x3d"aWild" /\x3e\r\n    \x3c/p\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/ClientToolBar.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n    \x3cdiv class\x3d"clientToolBarTitle" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"clientToolbar-buttons" style\x3d"width: 0px" data-dojo-attach-point\x3d"buttonContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"clientToolBarSpacer" class\x3d"clientToolBarSpacer" \x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/admin/schedules/templates/schedule.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites enterpriseSchedules singlePage" style\x3d"width:100%;"\x3e\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"propertiesButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton properties\',\r\n              iconClass: \'rcIcon propertiesIcon\',\r\n              label: \'PROPERTIES\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"scheduleTreeButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton scheduleTreeBacnet\',\r\n              iconClass: \'webviewIcon scheduleTreeIcon\',\r\n              label: \'SCHEDULE TREE\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cdiv class\x3d\'commitButtons\' data-dojo-type\x3d"webview/widget/CommitButtons"\r\n             data-dojo-attach-point\x3d"propertiesCommitButtons"\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"webview/admin/Schedule/NavScheduleToolbar"\r\n             data-dojo-attach-point\x3d"scheduleTreeToolbar"\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3c!-- END--\x3e\r\n    \x3c!-- Enterprise Schedule Properties --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"esProperties"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"        \r\n         class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"propertiesContainer"\x3e\r\n\r\n            \x3cdiv class\x3d"nameAndType"\x3e\r\n\r\n                \x3cdiv class\x3d"fieldAndLabel topItem"\x3e\r\n\r\n                    \x3clabel class\x3d"rcTextBoxLabel"\r\n                           data-dojo-attach-point\x3d"dataLabel"\x3e${webviewStrings.scheduleName}:\x3c/label\x3e\r\n\r\n                    \x3cspan data-dojo-attach-point\x3d"nameTB"\r\n                          data-dojo-type\x3d"dijit/form/TextBox"\r\n                          data-dojo-props\x3d"baseClass: \'rcTextBox scheduleNameField\',\r\n                          maxLength: 50"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"enterpriseAfterHoursConfiguration"\x3e\r\n                    \x3cfieldset\x3e\r\n                        \x3clegend\x3e${webviewStrings.afterHoursEvents}\x3c/legend\x3e\r\n                        \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\r\n                            \x3clabel class\x3d"rcTextBoxLabel" for\x3d"minuteIncrementSelect"\r\n                                   data-dojo-attach-point\x3d"minuteIncrementLabel"\x3e\r\n                                ${webviewStrings.increment}:\r\n                            \x3c/label\x3e\r\n\r\n                            \x3cselect id\x3d"minuteIncrementSelect" class\x3d"rcSelectBox"\r\n                                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                    data-dojo-attach-point\x3d"minuteIncrementSelect"\r\n                                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                    autoComplete: false"\x3e\r\n                                \x3coption value\x3d"0"\x3e${webviewStrings.none}\x3c/option\x3e\r\n                                \x3coption value\x3d"15"\x3e15 ${webviewStrings.minuteShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"30"\x3e30 ${webviewStrings.minuteShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"60"\x3e1 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"120"\x3e2 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"180"\x3e3 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"240"\x3e4 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"480"\x3e8 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                            \x3c/select\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"fieldAndLabel"\r\n                             data-dojo-attach-point\x3d"currencySelectionContainer"\x3e\r\n\r\n                            \x3clabel class\x3d"rcTextBoxLabel" for\x3d"currencySelect"\r\n                                   data-dojo-attach-point\x3d"currencyLabel"\x3e\r\n                                ${webviewStrings.currency}:\r\n                            \x3c/label\x3e\r\n\r\n                            \x3cselect id\x3d"currencySelect" class\x3d"rcSelectBox"\r\n                                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                    data-dojo-attach-point\x3d"currencySelect"\r\n                                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                    autoComplete: true"\x3e\r\n                                \x3coption value\x3d"none"\x3e${webviewStrings.none}\x3c/option\x3e\r\n                                \x3coption value\x3d"USD"\x3e\x26dollar;\x3c/option\x3e\r\n                                \x3coption value\x3d"EUR"\x3e\x26euro;\x3c/option\x3e\r\n                                \x3coption value\x3d"GBP"\x3e\x26pound;\x3c/option\x3e\r\n                                \x3coption value\x3d"MXN"\x3e\x26#x20B1;\x3c/option\x3e\r\n                                \x3coption value\x3d"CNY"\x3e\x26yen;\x3c/option\x3e\r\n                            \x3c/select\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"fieldAndLabel labelNoField"\x3e\r\n\r\n                            \x3clabel class\x3d"rcTextBoxLabel" for\x3d"dataType"\r\n                                   data-dojo-attach-point\x3d"dataTypeLabel"\x3e\r\n                                ${webviewStrings.dataType}:\r\n                            \x3c/label\x3e\r\n\r\n                            \x3cspan class\x3d"dataTypeLabel" data-dojo-attach-point\x3d"dataTypeContainer"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                            \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x3c/span\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                 data-dojo-attach-point\x3d"approvalRequiredCB"\r\n                                 data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                 data-dojo-props\x3d\'checked: ${approvalRequired}\'/\x3e\r\n                            \x3clabel class\x3d"labelNode"\r\n                                       data-dojo-attach-point\x3d"approvalLabel"\x3e\r\n                                    ${ahacStrings.approvalRequired}\r\n                                \x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \r\n                    \x3c/fieldset\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"colourSelection" data-dojo-attach-point\x3d"colourSelection"\x3e\r\n                    \x3cdiv class\x3d"colourOption"\x3e\r\n                        \x3cdiv class\x3d"fieldAndLabel coloursField topItem" data-dojo-attach-point\x3d"coloursField"\x3e\r\n                            \x3clabel class\x3d"rcTextBoxLabel"\x3e\x3c/label\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"colourSelector"\r\n                                  data-dojo-type\x3d"webview/admin/schedules/DataTypeColourSelector"\r\n                                  data-dojo-props\x3d"type: 9"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"colourOption"\x3e\r\n                        \x3cdiv class\x3d"fieldAndLabel coloursField topItem" data-dojo-attach-point\x3d"coloursField"\x3e\r\n\r\n                            \x3clabel class\x3d"rcTextBoxLabel"\x3e\x3c/label\x3e\r\n\r\n                            \x3cspan data-dojo-attach-point\x3d"defaultColourSelector"\r\n                                  data-dojo-type\x3d"webview/admin/schedules/DataTypeColourSelector"\r\n                                  data-dojo-props\x3d"type: \'default\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- ********************* --\x3e\r\n                \x3c!-- Cleanup Configuration --\x3e\r\n                \x3c!-- ********************* --\x3e\r\n                \x3cdiv class\x3d"enterpriseCleanupConfiguration" data-dojo-attach-point\x3d"enterpriseCleanupConfiguration"\x3e\r\n                    \x3cfieldset\x3e\r\n                        \x3clegend\x3e${webviewStrings.cleanupConfiguration}\x3c/legend\x3e\r\n                        \x3cspan class\x3d"italicText"\x3e\r\n                            ${webviewStrings.cleanupOverview}\r\n                        \x3c/span\x3e\r\n                        \x3cdiv\x3e\r\n                            \x3cfieldset\x3e\r\n                                \x3clegend\x3e${webviewStrings.automaticCleanup}\x3c/legend\x3e\r\n                                \x3cp\x3e\r\n                                    \x3cspan class\x3d"italicText"\x3e\r\n                                        ${webviewStrings.automaticCleanupDescription}\r\n                                    \x3c/span\x3e\r\n                                \x3c/p\x3e\r\n\r\n                                \x3cdiv\x3e\r\n                                    \x3c!-- Enable/disable cleanup radios. --\x3e\r\n                                    \x3cspan class\x3d"fieldAndLabel topItem"\x3e\r\n                                        \x3cspan class\x3d"rcTextBoxLabel"\x3e\r\n                                            ${webviewStrings.automaticCleanupFunction}:\r\n                                        \x3c/span\x3e\r\n\r\n                                        \x3cinput type\x3d"radio" name\x3d"enabledDisabled" checked\r\n                                               data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                               data-dojo-attach-point\x3d\'enabledCleanup\'\r\n                                               data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                                        \x3clabel class\x3d"radioButtonLabel" \x3e${webviewStrings.enabledLabel}\x3c/label\x3e\r\n\r\n                                        \x3cinput type\x3d"radio" name\x3d"enabledDisabled"\r\n                                               data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                               data-dojo-attach-point\x3d\'disabledCleanup\'\r\n                                               data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                                        \x3clabel class\x3d"radioButtonLabel" \x3e${webviewStrings.disabledLabel}\x3c/label\x3e\r\n                                    \x3c/span\x3e\r\n\r\n                                    \x3c!-- Days to remove events. --\x3e\r\n                                    \x3cspan data-dojo-attach-point\x3d"daysToExpireSettings" class\x3d"fieldAndLabel topItem"\x3e\r\n                                        \x3cspan class\x3d"rcTextBoxLabel"\x3e${webviewStrings.ageEventsExpire}:\x3c/span\x3e\r\n                                        \x3cspan data-dojo-attach-point\x3d"numDaysTB"\r\n                                              data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                                              data-dojo-props\x3d"require: true,\r\n                                              baseClass: \'rcTextBox numericInput\',\r\n                                              maxLength: 4,\r\n                                              constraints:{places:0}"\x3e\r\n                                        \x3c/span\x3e\r\n                                    \x3c/span\x3e\r\n\r\n                                    \x3c!-- When to run cleanup. --\x3e\r\n                                    \x3cspan data-dojo-attach-point\x3d"timeToRun" class\x3d"fieldAndLabel topItem"\x3e\r\n                                        \x3cspan class \x3d"rcTextBoxLabel"\x3e${webviewStrings.runAutomaticCleanupAtThisTime}:\x3c/span\x3e\r\n                                        \x3cspan class\x3d"editEventItem"\x3e\r\n                                            \x3cinput data-dojo-attach-point\x3d"cleanupTimeTB"\r\n                                                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                                                   data-dojo-props\x3d"required: true, baseClass: \'rcTextBox cleanupTime\',\r\n                                                   invalidMessage: \'${errorStrings.invalidTimeFormat}\'" /\x3e\r\n                                        \x3c/span\x3e\r\n                                    \x3c/span\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/fieldset\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv\x3e\r\n                            \x3cfieldset\x3e\r\n                                \x3clegend\x3e${webviewStrings.manualCleanup}\x3c/legend\x3e\r\n                                \x3cdiv class\x3d"italicText"\x3e\r\n                                    \x3cspan\x3e\r\n                                        ${webviewStrings.manualCleanupDescription}\r\n                                    \x3c/span\x3e\r\n                                \x3c/div\x3e\r\n\r\n                                \x3cdiv\x3e\r\n                                    \x3cspan  class\x3d"fieldAndLabel topItem"\x3e\r\n\r\n                                        \x3c!-- Days to remove events. --\x3e\r\n                                        \x3cspan class\x3d"rcTextBoxLabel"\x3e${webviewStrings.ageEventsExpire}:\x3c/span\x3e\r\n                                        \x3cspan data-dojo-attach-point\x3d"numDaysOnDemandTB"\r\n                                              data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                                              data-dojo-props\x3d"required: true,\r\n                                              baseClass: \'rcTextBox numericInput ageInDaysInput\',\r\n                                              maxLength: 4,\r\n                                              constraints:{places:0}"\x3e\x3c/span\x3e\r\n                                        \x26nbsp;\x26nbsp;\r\n\r\n                                        \x3c!-- Clean up now button. --\x3e\r\n                                        \x3cspan data-dojo-attach-point\x3d"clearExpiredEventsNowButton"\r\n                                              data-dojo-type\x3d"dijit/form/Button"\r\n                                              data-dojo-props\x3d"baseClass: \'webviewButton cleanUpNowButton\',\r\n                                              iconClass: \'webviewIcon resetIcon\',\r\n                                              label: \'${webviewStrings.cleanUpNow}\'"\x3e${webviewStrings.cleanUpNow}\x3c/span\x3e\r\n                                    \x3c/span\x3e\r\n                                \x3c/div\x3e\r\n\r\n                            \x3c/fieldset\x3e\r\n                        \x3c/div\x3e\r\n\r\n                    \x3c/fieldset\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- End Cleanup Configuration --\x3e\r\n\r\n                \x3cdiv\x3e\r\n                    \x3cfieldset class\x3d"wipeWarningFieldSet"\x3e\r\n                        \x3clegend\x3e${webviewStrings.wipeScheduleHeader}\x3c/legend\x3e\r\n                        \x3cp class\x3d"boldText"\x3e\r\n                            \x3cspan class\x3d"rcIcon warningIcon"\x3e\x3c/span\x3e${rcStrings.warning}\r\n                        \x3c/p\x3e\r\n                        \x3cp class\x3d"italicText"\x3e\r\n                            ${webviewStrings.wipeScheduleBody}\r\n                        \x3c/p\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"clearSchedulesButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d"baseClass: \'webviewButton clearSchedules\',\r\n                              iconClass: \'webviewIcon resetIcon\',\r\n                              label: \'wipeSchedules\'"\x3e\x3c/span\x3e\r\n                    \x3c/fieldset\x3e\r\n                \x3c/div\x3e\r\n\r\n            \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3c!-- Schedule Tree Creator --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"scheduleTreeContainerNode"\x3e\r\n        \x3c!--Results list--\x3e\r\n        \x3cdiv class\x3d"hidden results-container"\r\n             data-dojo-attach-point\x3d"resultsWidget"\r\n             data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n             data-dojo-props\x3d\'baseClass: "schedule-tree-results",\r\n             paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n        \x3c!-- right side --\x3e\r\n        \x3cdiv class\x3d"nav-group-container" data-dojo-attach-point\x3d"builderContainer"\x3e\r\n            \x3cdiv class\x3d"webviewAdminSites webviewContentPaneDnD enterpriseScheduleScheduleTreePane"\r\n                 data-dojo-attach-point\x3d"builderWidget"\r\n                 data-dojo-type\x3d"webview/widget/WebviewContentPane"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--END--\x3e\r\n\x3c/div\x3e',
"url:webview/admin/schedules/templates/scheduleItem.html":'\x3cdiv class\x3d"pointsItem"\x3e\r\n    \x3cspan class\x3d"webviewIcon dragHandle" data-dojo-attach-point\x3d"grabIcon"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"scheduleLabel"\x3e\r\n\t\t${sysName}/${deviceName}/${schedName} (${bacnetID})\r\n\t\x3c/span\x3e\r\n\x3c/div\x3e',"url:webview/admin/schedules/templates/colourSelectorItem.html":'\x3cdiv class\x3d"colourSelectorSingleItem"\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"colorPickerNode"\x3e\x3c/span\x3e\r\n\t\x3cspan\x3e\r\n\t\t\x3cspan class\x3d"colorSelectorLabel" data-dojo-attach-point\x3d"valueLabel"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"valueInputContainer"\x3e\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\r\n\t\x3cspan data-dojo-attach-point\x3d"deleteNode" class\x3d"rcIcon deleteIcon inline"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/ColorPicker.html":'\x3cspan class\x3d"colorPicker"\x3e\r\n\t\x3cspan class\x3d"colorIndicator dijitInline" data-dojo-attach-point\x3d"colorIndicator"\x3e\r\n\t\t\x3cspan class\x3d"hidden colorPickerContainer" data-dojo-attach-point\x3d"colorPickerContainer"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"colorPickerNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\x3c/span\x3e',"url:dojox/widget/ColorPicker/ColorPicker.html":'\x3ctable class\x3d"dojoxColorPicker" dojoAttachEvent\x3d"onkeypress: _handleKey" cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\r\n\t\x3ctr\x3e\r\n\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\r\n\t\t\t\x3cdiv class\x3d"dojoxColorPickerBox"\x3e\r\n\t\t\t\t\x3c!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. --\x3e\r\n\t\t\t\t\x3cimg title\x3d"${saturationPickerTitle}" alt\x3d"${saturationPickerTitle}" class\x3d"dojoxColorPickerPoint" src\x3d"${_pickerPointer}" tabIndex\x3d"0" dojoAttachPoint\x3d"cursorNode" style\x3d"position: absolute; top: 0px; left: 0px;"\x3e\r\n\t\t\t\t\x3cimg role\x3d"presentation" alt\x3d"" dojoAttachPoint\x3d"colorUnderlay" dojoAttachEvent\x3d"onclick: _setPoint, onmousedown: _stopDrag" class\x3d"dojoxColorPickerUnderlay" src\x3d"${_underlay}" ondragstart\x3d"return false"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/td\x3e\r\n\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\r\n\t\t\t\x3cdiv class\x3d"dojoxHuePicker"\x3e\r\n\t\t\t\t\x3c!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. --\x3e\r\n\t\t\t\t\x3cimg dojoAttachPoint\x3d"hueCursorNode" tabIndex\x3d"0" class\x3d"dojoxHuePickerPoint" title\x3d"${huePickerTitle}" alt\x3d"${huePickerTitle}" src\x3d"${_huePickerPointer}" style\x3d"position: absolute; top: 0px; left: 0px;"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"dojoxHuePickerUnderlay" dojoAttachPoint\x3d"hueNode"\x3e\r\n\t\t\t\t    \x3cimg role\x3d"presentation" alt\x3d"" dojoAttachEvent\x3d"onclick: _setHuePoint, onmousedown: _stopDrag" src\x3d"${_hueUnderlay}"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/td\x3e\r\n\t\t\x3ctd valign\x3d"top"\x3e\r\n\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerPreviewContainer"\x3e\r\n\t\t\t\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d"previewNode" class\x3d"dojoxColorPickerPreview"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd valign\x3d"top"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d"safePreviewNode" class\x3d"dojoxColorPickerWebSafePreview"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd valign\x3d"bottom"\x3e\r\n\t\t\t\t\t\t\x3ctable class\x3d"dojoxColorPickerOptional" cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dijitInline dojoxColorPickerRgb" dojoAttachPoint\x3d"rgbNode"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctable cellpadding\x3d"1" cellspacing\x3d"1" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_r"\x3e${redLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_r" dojoAttachPoint\x3d"Rval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_g"\x3e${greenLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_g" dojoAttachPoint\x3d"Gval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_b"\x3e${blueLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_b" dojoAttachPoint\x3d"Bval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dijitInline dojoxColorPickerHsv" dojoAttachPoint\x3d"hsvNode"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctable cellpadding\x3d"1" cellspacing\x3d"1" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_h"\x3e${hueLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_h" dojoAttachPoint\x3d"Hval"size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e ${degLabel}\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_s"\x3e${saturationLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_s" dojoAttachPoint\x3d"Sval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e ${percentSign}\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_v"\x3e${valueLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_v" dojoAttachPoint\x3d"Vval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e ${percentSign}\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd colspan\x3d"2"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dojoxColorPickerHex" dojoAttachPoint\x3d"hexNode" aria-live\x3d"polite"\x3e\t\r\n\t\t\t\t\t\t\t\t\t\t\x3clabel for\x3d"${_uId}_hex"\x3e\x26nbsp;${hexLabel}\x26nbsp;\x3c/label\x3e\x3cinput id\x3d"${_uId}_hex" dojoAttachPoint\x3d"hexCode, focusNode, valueNode" size\x3d"6" class\x3d"dojoxColorPickerHexCode" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/td\x3e\r\n\t\x3c/tr\x3e\r\n\x3c/table\x3e\r\n\r\n',
"url:webview/admin/schedules/templates/scheduleTreeItem.html":'\x3cdiv class\x3d"treeItemContainer" role\x3d"presentation"\x3e\r\n\t\x3cdiv class\x3d"treePlaceHolderBefore hidden" data-dojo-attach-point\x3d"beforePlaceHolder"\x3e\x3c/div\x3e\r\n\t\x3cspan class\x3d"webviewIcon expandIcon expandNode" data-dojo-attach-point\x3d"expandNode"\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"scheduleTreeItem" data-dojo-attach-point\x3d"contentNode" role\x3d"presentation"\x3e\r\n\r\n\t\t\x3cspan\r\n\t\t\t  data-dojo-attach-point\x3d"scheduleTreeCBContainer"\x3e\r\n\t\t\x3c/span\x3e\r\n\r\n\t\t\x3cspan class\x3d\'colourAndLabel\'\x3e\r\n\t\t\t\x3cspan class\x3d"blockColorIndicator clickable"\r\n\t\t\t\t  data-dojo-attach-point\x3d"scheduleColorIndicator"\x3e\r\n\t\t\t\t\x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"colorPickerContainer"\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"colorPickerNode"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3c/span\x3e\r\n\t\t\t\x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"scheduleLabel clickable"\r\n                  data-dojo-attach-point\x3d"scheduleName"\r\n                  data-dojo-type\x3d"dijit/InlineEditBox"\r\n                  data-dojo-props\x3d\'baseClass: "schedule-name-editor", width: "80%",\r\n                  editorParams: {baseClass: "rcTextBox", maxLength: 50}\'\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n\r\n\t\t\x3cspan class\x3d"bacnetLabel" title\x3d"${bacnetID}" data-dojo-attach-point\x3d"bacnetLabel"\x3e${bacnetID}\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"systemLabel" title\x3d"${sysName}"\x3e${sysName}\x3c/span\x3e\r\n        \x3cspan class\x3d"rateLabel" title\x3d"${rateString}" data-dojo-attach-point\x3d"rateLabel"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d\'editNodeBorder\' data-dojo-attach-point\x3d"editNodeIcon"\x3e\r\n\t\t\t\x3cspan class\x3d"rc24Icon editIcon" data-dojo-attach-point\x3d"enableEditNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\t\x3cdiv class\x3d"treePlaceHolderAfter" data-dojo-attach-point\x3d"afterPlaceHolder"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/DialogRateEdit.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"edit-rate-dialog"\r\n         data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"_dialog"\r\n         data-dojo-props\x3d\'refocus:false, duration: 1\'\r\n         title\x3d"${webviewStrings.setScheduleRate}"\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_displayName"\x3e${webviewStrings.scheduleRateDialog}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_displayName"\x3e${webviewStrings.scheduleCost}${webviewStrings.scheduleRate}:\x3c/span\x3e\r\n            \x3cinput type\x3d"number" min\x3d"0" max\x3d"9999.99" step\x3d"0.01"\r\n                   data-dojo-attach-point\x3d"_valueRate"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "form-input scheduleRateInput",\r\n                           maxLength:7, trim: true,\r\n                           selectOnClick: true,\r\n                           constraints: {\r\n                           max: 9999.99,\r\n                           min: 0\r\n                           },\r\n                           pattern: "^\\\\d*([\\\\.,]\\\\d{1,2})?$"\' /\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n        \x3cp class\x3d"scheduleRateDialogButtons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_ok"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_cancel"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnCancel}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n                CANCEL\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-props\x3d\'title:"Invalid input"\' data-dojo-attach-point\x3d"_errorDialog"\x3e\r\n        \x3cp data-dojo-attach-point\x3d"errorTextContainer"\x3e\x3c/p\x3e\r\n        \x3cp class\x3d"scheduleRateDialogButtons"\x3e\r\n            \x3cbutton data-dojo-type\x3ddijit/form/Button\r\n                    data-dojo-attach-point\x3d"_errOk"\r\n                    data-dojo-attach-event\x3d"onClick: _closeErrorDialog"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:webview/admin/widget/templates/SearchForObjectResults.html":'\x3cdiv class\x3d"search-results-container ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader"\x3e\r\n        \x3cspan class\x3d"results-title" data-dojo-attach-point\x3d"resultsTitle"\x3e${paneTitle}\x3c/span\x3e\r\n        \x3cspan class\x3d"linkable webviewIcon close-icon" data-dojo-attach-point\x3d"closeButton"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container-body" data-dojo-attach-point\x3d"contentPaneBody"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"contents" class\x3d"results-contents"\x3e\r\n            \x3cdiv class\x3d"results-display-container" data-dojo-attach-point\x3d"resultsContainer"\x3e\r\n                ${webviewStrings.noPointsFound}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"hidden"\r\n                 data-dojo-attach-point\x3d"_bottomPagingBar"\r\n                 data-dojo-type\x3d"webview/admin/widget/PagingBar"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/PagingBar.html":'\x3cdiv class\x3d"pagingContainer" data-dojo-attach-point\x3d"pagingContainer"\x3e\r\n    \x3cspan class\x3d"itemCount" data-dojo-attach-point\x3d"itemCount"\x3e\x3c/span\x3e\r\n\r\n\r\n    \x3cspan class\x3d"viewOptions" data-dojo-attach-point\x3d"viewItemOptionsContainer"\x3e\r\n\r\n        \x3cselect\r\n            data-dojo-attach-point\x3d"viewItemOptions"\r\n            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n            data-dojo-props\x3d\'baseClass: "rcSelectBox form-input",\r\n            value: ${itemsPerPage}\'\x3e\r\n        \x3c/select\x3e\r\n    \x3c/span\x3e\r\n\r\n\t\x3cspan class\x3d"pageNavigation" data-dojo-attach-point\x3d"pageJumping"\x3e\r\n\t\t\x3cspan class\x3d"linkable webviewIcon firstPageIcon" data-dojo-attach-point\x3d"firstPage"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"linkable webviewIcon prevPageIcon" data-dojo-attach-point\x3d"prevPage"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"currPageOption" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"baseClass: \'rcTextBox currPageTB\'"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"linkable webviewIcon nextPageIcon" data-dojo-attach-point\x3d"nextPage"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"linkable webviewIcon lastPageIcon" data-dojo-attach-point\x3d"lastPage"\x3e\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/trees/templates/navTreeAvatar.html":'\x3cdiv class\x3d"treeItemContainer navTreeAvatar"\r\n     role\x3d"presentation"\x3e\r\n    \x3cspan class\x3d"navTreeItem"\r\n          data-dojo-attach-point\x3d"contentNode"\r\n          role\x3d"presentation"\x3e\r\n            \x3cspan class\x3d"navIcon"\r\n                  data-dojo-attach-point\x3d"navIcon"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"pointLabel"\r\n                  data-dojo-attach-point\x3d"displayLabel"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/trees/templates/navTreeItem.html":'\x3cdiv class\x3d"treeItemContainer" role\x3d"presentation"\x3e\r\n\t\x3cdiv class\x3d"treePlaceHolderBefore hidden" data-dojo-attach-point\x3d"beforePlaceHolder"\x3e\x3c/div\x3e\r\n\t\x3cspan class\x3d"webviewIcon expandIcon expandNode" data-dojo-attach-point\x3d"expandNode"\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"navTreeItem" data-dojo-attach-point\x3d"contentNode" role\x3d"presentation"\x3e\r\n\r\n\t\t\x3cspan class\x3d"treeCheckBox"\r\n\t\t\t  data-dojo-attach-point\x3d"navTreeCBContainer"\x3e\r\n\t\t\x3c/span\x3e\r\n\r\n\t\t\x3cspan class\x3d\'colourAndLabel\'\x3e\r\n\t\t\t\x3cspan class\x3d"navIcon"\r\n\t\t\t\t  data-dojo-attach-point\x3d"navIcon"\x3e\t\x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"scheduleLabel clickable"\r\n                  data-dojo-attach-point\x3d"displayNameInput"\r\n                  data-dojo-type\x3d"dijit/InlineEditBox"\r\n                  data-dojo-props\x3d\'width: "80%",\r\n                  editorParams: {baseClass: "rcTextBox"}\'\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n\t\t\x3cspan class\x3d"urlLabel"\x3e\r\n\t\t\t\x3cspan class\x3d"pointLabel clickable hidden" data-dojo-attach-point\x3d"urlPathLabel"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"urlPathContainer"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cspan class\x3d\'editNodeBorder\'\x3e\r\n\t\t\t\x3cspan class\x3d"rc24Icon editIcon" data-dojo-attach-point\x3d"enableEditNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\t\x3cdiv class\x3d"treePlaceHolderAfter" data-dojo-attach-point\x3d"afterPlaceHolder"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/schedules/templates/dataTypeColourSelector.html":'\x3cdiv class\x3d"colourSelectorContainer" data-dojo-attach-point\x3d"colourSelectorMain"\x3e\r\n\t\x3cdiv class\x3d"colourSelectorTitle" data-dojo-attach-point\x3d"titleContainer"\x3e\r\n\t\t\x3c!--title--\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv class\x3d"colourSelectorAdd" data-dojo-attach-point\x3d"addItemContainer"\x3e\r\n\t\t\x3c!-- Add Item --\x3e\r\n\t\t\x3cinput type\x3d"text" data-dojo-attach-point\x3d"valueInput"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n               required: true,\r\n               missingMessage: \'${webviewStrings.addESColours}\'" /\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"addButton"\r\n\t\t\tdata-dojo-type\x3d"dijit/form/Button" \r\n\t\t\tdata-dojo-props\x3d"baseClass: \'webviewButton addColour noLabel circularButton\', \r\n\t\t\t\t\t\t\t   iconClass: \'rcIcon addIcon\'"\r\n\t\t\tdata-dojo-attach-event\x3d"onClick: _onAddItem"\x3e\x3c/span\x3e\r\n\t\t\x3c!--input field --\x3e\x3c!--add button--\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv class\x3d"colourSelectorItemContainer" data-dojo-attach-point\x3d"itemContainer"\x3e\r\n\t\t\x3c!-- Item Container --\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/schedules/templates/NavScheduleToolbar.html":'\x3cdiv class\x3d"navScheduleToolbar" data-dojo-attach-point\x3d"navScheduleToolbar"\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"viewButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.view}",\r\n          disabled: true,\r\n          iconClass: "rc24Icon viewIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"selectAllButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n          iconClass: "rc24Icon selectAllIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"deleteButton" data-dojo-props\x3d\'titleStr : "${nlsStrings.rcDelete}",\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"saveButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.save}",\r\n          iconClass: "rc24Icon saveIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"hidden" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelSaveButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.cancelSave}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/AdminToolbar.html":'\x3cdiv class\x3d"admin-toolbar"\x3e\r\n    \x3cdiv class\x3d"icon-button-container hidden" data-dojo-attach-point\x3d"iconContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container hidden" data-dojo-attach-point\x3d"buttonsContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/widget/templates/CommitButtons.html":'\x3cdiv class\x3d"" data-dojo-attach-point\x3d"commitButtons"\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"saveButton" data-dojo-props\x3d"titleStr : \'${webviewStrings.save}\',\r\n          iconClass: \'rc24Icon saveIcon toolbarButtonIcon\'"\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"hidden" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelSaveButton" data-dojo-props\x3d"titleStr : \'${webviewStrings.cancelSave}\',\r\n          iconClass: \'rc24Icon cancelSaveIcon toolbarButtonIcon\'"\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d"titleStr : \'${webviewStrings.cancel}\',\r\n          iconClass: \'rc24Icon cancelIcon toolbarButtonIcon\'"\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/WebviewContentPane.html":'\x3cdiv class\x3d"webviewContentPane"\x3e\r\n\t\x3cdiv class\x3d"hidden webviewContentPaneTitle" data-dojo-attach-point\x3d"titleBar"\x3e\r\n\t\t\x3cspan class\x3d"webviewContentPaneTitleNode" data-dojo-attach-point\x3d"leftTitleContentNode"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"webviewContentPaneControlsNode" data-dojo-attach-point\x3d"rightTitleContentNode"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"webviewContentPaneBody" data-dojo-attach-point\x3d"contentPaneBody"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contents" class\x3d"webviewContentPaneContents"\x3e\x3c/div\x3e\t\t\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/panelFiles/templates/PanelFiles.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites panel-files ${baseClass}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/panelFiles/PanelFilesToolbar"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Panel file contents--\x3e\r\n    \x3cdiv class\x3d"panel-files-container" data-dojo-attach-point\x3d"panelFilesContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"panelFilesWidget"\r\n             data-dojo-type\x3d"webview/widget/WebviewContentPane"             \r\n             class\x3d"panel-files"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"panelFilesContent"\x3e\r\n                \x3cdiv class\x3d"panel-file-settings" data-dojo-attach-point\x3d"panelFileSettings"\x3e\r\n                    \x3cspan class\x3d"panel-setting"\x3e\r\n                        \x3clabel class\x3d"disabled" data-dojo-attach-point\x3d"controllerNumberLB"\x3e${panfileStrings.controllerNumber}:\x3c/label\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"panel-setting-controller-value" data-dojo-attach-point\x3d"controllerNumberValueLB"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"panel-setting"\x3e\r\n                        \x3clabel class\x3d"disabled" data-dojo-attach-point\x3d"panelFileLB"\x3e${panfileStrings.panelFile}:\x3c/label\x3e\r\n                        \x3cinput type\x3d"text" maxlength\x3d"255" class\x3d"panel-filename-input"\r\n                               data-dojo-attach-point\x3d"panelFileTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                               disabled: true\' /\x3e\x3cspan class\x3d"file-extension"\x3e.pan\x3c/span\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"panel-setting"\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"filePrefixLB"\x3e${panfileStrings.filenamePrefix}:\x3c/label\x3e\r\n                        \x3c!-- Max device number is around 4194302, so save 8 characters for the device number to give some buffer room --\x3e\r\n                        \x3cinput type\x3d"text" maxlength\x3d"247"\r\n                               data-dojo-attach-point\x3d"filePrefixTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n                    \x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"device-gutter" data-dojo-attach-point\x3d"deviceGutter"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"panel-file-list" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/panelFiles/widget/templates/AutoNetworkBackup.html":'\x3cdiv class\x3d"autoNetworkBackupDialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_autoBackupForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "autoBackupForm", action: "", method: "",\r\n             name: "newInstanceForm", encType: "multipart/form-data"\'\x3e\r\n            \x3cdiv class\x3d"column"\x3e\r\n                \x3cdiv class\x3d"autoNetworkDialogLabels"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3clabel class\x3d"filenamePrefixLabel" data-dojo-attach-point\x3d"filenamePrefixLB"\x3e${panfileStrings.filenamePrefix}:\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"checkboxAndLabel"\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"enableCheckbox"\r\n                             data-dojo-type\x3d"dijit/form/CheckBox" \x3e\r\n                        \x3c/span\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"enableLabel"\x3e${webviewStrings.enable}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"radioItem"\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                                \x3cinput type\x3d"radio" name\x3d"_autoBackupType" checked value\x3d"0"\r\n                                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                       data-dojo-attach-point\x3d\'dailyRecurrence\'\r\n                                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\',\r\n                                       disabled:true" /\x3e\r\n                                ${panfileStrings.everyDay}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"radioItem"\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                                \x3cinput type\x3d"radio" name\x3d"_autoBackupType" value\x3d"1"\r\n                                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                       data-dojo-attach-point\x3d\'weeklyRecurrence\'\r\n                                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\',\r\n                                       disabled:true" /\x3e\r\n                                ${panfileStrings.dayOfWeek}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"radioItem"\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                                \x3cinput type\x3d"radio" name\x3d"_autoBackupType" value\x3d"2"\r\n                                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                       data-dojo-attach-point\x3d\'monthlyRecurrence\'\r\n                                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\',\r\n                                       disabled:true" /\x3e\r\n                                ${panfileStrings.dayOfMonth}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3clabel class\x3d"timeLabel" data-dojo-attach-point\x3d"timeLB"\x3e${rcStrings.time} (24hrs):\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"column"\x3e\r\n                \x3cdiv class\x3d"autoNetworkDialogInputFields"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"text"\r\n                            class\x3d"autoNetworkBackupInput"\r\n                            data-dojo-attach-point\x3d"filenamePrefixTB"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                            disabled: false\' /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv\x3e\x3cbr\x3e\x3c/div\x3e\r\n                    \x3cdiv\x3e\x3cbr\x3e\x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cselect class\x3d"daysOfWeekDropDown"\r\n                                        data-dojo-attach-point\x3d"daysOfWeekDD"\r\n                                        data-dojo-type\x3d"dijit/form/Select"\r\n                                        data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                        disabled: true"\x3e\r\n                        \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"number"\r\n                            class\x3d"autoNetworkBackupInput"\r\n                            data-dojo-attach-point\x3d"dayOfMonthTB"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                            disabled: true,\r\n                            pattern:"^([1-9]|[0][1-9]|[12][0-9]|3[01])",\r\n                            required: true,\r\n                            intermediateChanges: true\'/\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"text"\r\n                            class\x3d"autoNetworkBackupInput"\r\n                            data-dojo-attach-point\x3d"timeTB"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                             placeHolder: "HH:MM",\r\n                             required: true,\r\n                             pattern:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",\r\n                             intermediateChanges: true\' /\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:webview/admin/widget/templates/ResultsDialog.html":'\x3cdiv class\x3d"dijitDialog results-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"grid-container"\r\n             data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"summary-container"\x3e\r\n            \x3cdiv class\x3d"cancel-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n                \x3cbutton data-dojo-attach-point\x3d"cancelActionButton"\r\n                        data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                        iconClass: "rcIcon cancelIcon",\r\n                        label: "${rcStrings.btnCancel}"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"summaryContainer"\x3e\r\n                \x3cspan\x3e${webviewStrings.totalControllers}: \x3c/span\x3e\x3cspan data-dojo-attach-point\x3d"totalControllerContainer"\x3e${totalControllers}\x3c/span\x3e\r\n                \x3cbr/\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"resultTypeLabel"\x3e${resultType}\x3c/span\x3e: \x3cspan data-dojo-attach-point\x3d"totalSuccessfulContainer"\x3e${totalSuccessful}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/dialogs/templates/PromptForPassword.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"passwordForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'enctype:"multipart/form-data", action: "", method: ""\'\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"passwordLB"\x3e${rcStrings.password}:\x3c/label\x3e\r\n            \x3cinput type\x3d"password" name\x3d"password"\r\n                   data-dojo-attach-point\x3d"passwordTB"\r\n                   data-dojo-type\x3d"dijit/form/TextBox"\r\n                   data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                   required: true\'/\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dijitDialogPaneActionBar" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"submit"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e\x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\x3e\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/panelFiles/templates/PanelFilesToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"backupButton"\r\n          data-dojo-props\x3d\'titleStr : "${panfileStrings.backup}",\r\n          iconClass: "rc24Icon svg-history toolbarButtonIcon",\r\n          disabled: true\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"restoreButton"\r\n          data-dojo-props\x3d\'titleStr : "${panfileStrings.restore}",\r\n          iconClass: "rc24Icon svg-refresh-icon toolbarButtonIcon",\r\n          disabled: true\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"autoBackupButton"\r\n          data-dojo-props\x3d\'titleStr : "${panfileStrings.autoNetworkBackup}",\r\n          iconClass: "rc24Icon svg-auto-backup toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"logButton"\r\n          data-dojo-props\x3d\'titleStr : "${panfileStrings.log}",\r\n          iconClass: "rc24Icon svg-panel-file-config toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/programs/templates/program.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites program-editor ${baseClass}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/programs/ProgramToolbar"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"tree-container"\x3e\r\n        \x3c!--Results list--\x3e\r\n        \x3cdiv class\x3d"hidden results-container"\r\n             data-dojo-attach-point\x3d"resultsWidget"\r\n             data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n             data-dojo-props\x3d\'baseClass: "schedule-tree-results",\r\n             paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n\r\n        \x3c!--Program editor--\x3e\r\n        \x3cdiv class\x3d"nav-group-container" data-dojo-attach-point\x3d"builderContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"builderWidget"\r\n                 data-dojo-type\x3d"webview/widget/WebviewContentPane"                 \r\n                 class\x3d"webview-program-editor"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"programsContent"\x3e\r\n                    \x3cdiv class\x3d"trace-gutter" data-dojo-attach-point\x3d"traceGutter"\x3e\x3c/div\x3e\r\n                    \x3cdiv class\x3d"webview-editor" style\x3d"width: 500px; height: 500px;"\r\n                         data-dojo-attach-point\x3d"editorNode"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/programs/templates/PointMenu.html":'\x3cdiv class\x3d"point-menu hidden ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"editItem"\x3e${rcStrings.edit}\x3c/div\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"addToWatchItem"\x3e${programStrings.addToWatchList}\x3c/div\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"cancelItem"\x3e${rcStrings.btnCancel}\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/programs/templates/WatchPointMenu.html":'\x3cdiv class\x3d"point-menu hidden ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"removeSingle"\x3e${programStrings.removeFromWatchlist}\x3c/div\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"removeAll"\x3e${programStrings.removeAllFromWatchlist}\x3c/div\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"cancelItem"\x3e${webviewStrings.cancel}\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/programs/widget/templates/OptionsDialog.html":'\x3cdiv class\x3d"optionsDialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_newInstanceForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "newInstanceForm", action: "", method: "",\r\n             name: "newInstanceForm", encType: "multipart/form-data"\'\x3e\r\n    \r\n            \x3cdiv\x3e     \r\n                \x3clabel class\x3d"fontString"\x3e${programStrings.fonts}:\x3c/label\x3e\r\n                \x3cdiv class\x3d"fontSizeContainerNode"\x3e\r\n                    \x3cselect class\x3d"rcSelectBox form-input" \r\n                                    data-dojo-attach-point\x3d"fontSize"\r\n                                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                    data-dojo-props\x3d"baseClass: \'rcSelectBox\'"\x3e                    \r\n                            \x3coption value\x3d6\x3e6\x3c/option\x3e\r\n                            \x3coption value\x3d8\x3e8\x3c/option\x3e\r\n                            \x3coption value\x3d10\x3e10\x3c/option\x3e\r\n                            \x3coption value\x3d12\x3e12\x3c/option\x3e\r\n                            \x3coption value\x3d14\x3e14\x3c/option\x3e\r\n                            \x3coption value\x3d16\x3e16\x3c/option\x3e\r\n                            \x3coption value\x3d18\x3e18\x3c/option\x3e\r\n                            \x3coption value\x3d20\x3e20\x3c/option\x3e\r\n                            \x3coption value\x3d22\x3e22\x3c/option\x3e\r\n                            \x3coption value\x3d24\x3e24\x3c/option\x3e\r\n                    \x3c/select\x3e\r\n                \x3c/div\x3e\r\n                \x3cspan class\x3d"normalColorPicker"\r\n                        data-dojo-attach-point\x3d"normalColourPicker"\r\n                        data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                \x3c/span\x3e                \r\n                \x3cspan class\x3d"bottonGroupContainer" \r\n                        data-dojo-attach-point\x3d"buttonGroup"\r\n                        data-dojo-type\x3d"webview/widget/ButtonGroup"\x3e        \r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \r\n            \x3cdiv\x3e\r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${programStrings.syntaxHighlighting}\x3c/legend\x3e           \r\n                        \x3cdiv class\x3d"checkboxAndLabel"\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"syntaxHighlightingCheckBox"\r\n                                 data-dojo-type\x3d"dijit/form/CheckBox" \x3e \r\n                            \x3c/span\x3e\r\n                            \x3clabel\x3e${webviewStrings.enable}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                    \r\n                        \x3cdiv class \x3d "column"\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"commentColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.comments}\x3c/label\x3e\r\n                            \x3c/div\x3e\r\n\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"statementsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.statements}\x3c/label\x3e\r\n                            \x3c/div\x3e    \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"functionsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.functions}\x3c/label\x3e\r\n                            \x3c/div\x3e          \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"lineNumbersColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.lineNumbers}\x3c/label\x3e\r\n                            \x3c/div\x3e                            \r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class \x3d "column"\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"alarmTextColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.alarmText}\x3c/label\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"inputsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${webviewStrings.inputs}\x3c/label\x3e\r\n                            \x3c/div\x3e    \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"outputsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${webviewStrings.outputs}\x3c/label\x3e\r\n                            \x3c/div\x3e         \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"presentValuesColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.presentValues}\x3c/label\x3e\r\n                            \x3c/div\x3e                                 \r\n                        \x3c/div\x3e    \r\n                        \x3cdiv class \x3d "column"\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan class\x3d"colorPickerNode" data-dojo-attach-point\x3d"ValuesAndArraysColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.valuesAndArrays}\x3c/label\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"otherObjectsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.otherObjects}\x3c/label\x3e\r\n                            \x3c/div\x3e    \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"backgroundColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.background}\x3c/label\x3e\r\n                            \x3c/div\x3e                           \r\n                        \x3c/div\x3e                      \r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e   \r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${programStrings.fontSample}\x3c/legend\x3e\r\n                    \x3clabel class\x3d"fontSample" \r\n                           data-dojo-attach-point\x3d"fontSample"\x3eAaBbYyZz\x3c/label\x3e\r\n                \x3c/fieldset\x3e    \r\n            \x3c/div\x3e         \r\n        \x3c/div\x3e\r\n    \x3c/div\x3e    \r\n    \r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"restoreButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon restoreIcon"\'\x3e${webviewStrings.rcbRestoreDefault}\x3c/button\x3e        \r\n        \r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:webview/widget/templates/ButtonGroupButton.html":'\x3clabel class\x3d"button-group-label ${baseClass}" data-dojo-attach-point\x3d"buttonsContainer"\x3e\r\n    \x3cinput type\x3d"checkbox"\r\n           data-dojo-attach-point\x3d"checkBox"\r\n           data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\r\n    \x3cspan\x3e${!content}\x3c/span\x3e\r\n\x3c/label\x3e',"url:webview/widget/templates/ButtonGroup.html":'\x3cspan class\x3d"button-group-wrapper ${baseClass}" data-dojo-attach-point\x3d"buttonsContainer"\x3e\x3c/span\x3e',
"url:webview/admin/widget/templates/NativeDndPoint.html":'\x3cdiv class\x3d"dnd-point-item" title\x3d"${deviceName}/${pointName} (${pointMnemonic})" draggable\x3d"true"\r\n     data-dojo-attach-event\x3d"ondragstart:drag, ondragend:stopDrag"\x3e\r\n    \x3cspan class\x3d"webviewIcon dragHandle" data-dojo-attach-point\x3d"grabIcon"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"pointLabel"\x3e\r\n        ${deviceName}/${pointName}\x26nbsp;(${pointMnemonic})\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',"url:webview/admin/programs/widget/templates/SaveFileDialog.html":'\x3cdiv class\x3d"saveFileDialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel class\x3d"form-label" data-dojo-attach-point\x3d"filenameLabel"\x3e${webviewStrings.filename}:\x3c/label\x3e\r\n            \x3cinput class\x3d"form-inputContainer" type\x3d"text" name\x3d"filename" placeholder\x3d"${placeholderName}" value\x3d"" autocomplete\x3d"off"\r\n                   data-dojo-attach-point\x3d"filenameTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"baseClass:\'form-input\'" /\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e    \r\n    \r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n                \r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon saveIcon"\'\x3e\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:webview/admin/widget/templates/DevicePullout.html":'\x3cdiv class\x3d"device-pullout ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"content-container" data-dojo-attach-point\x3d"contents"\x3e\r\n        \x3cdiv class\x3d"device-gutter" data-dojo-attach-point\x3d"deviceContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"okButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                    data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                    iconClass:\'webviewIcon svg-send-multiple-icon\',\r\n                    label: \'${okLabel}\'"\x3e${okLabel}\x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-attach-point\x3d"cancelButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                    data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                    iconClass:\'webviewIcon svg-cancel-icon\',\r\n                    label: \'${rcStrings.btnCancel}\'"\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/FileSelector.html":'\x3cdiv class\x3d"fileSelectionDialog" data-dojo-attach-point\x3d"fileSelector"\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"fileTree"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cspan data-dojo-attach-point\x3d"okButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t  data-dojo-props\x3d"disabled: \'true\', baseClass: \'webviewButton okButton\', \r\n\t\t\t  iconClass: \'rcIcon okIcon\', \r\n\t\t\t  label: \'OK\'"\r\n\t\t\t  data-dojo-attach-event\x3d"onClick: _onSave"\x3e\r\n\t\t\x3c/span\x3e\r\n\r\n\t\t\x3cspan data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t  data-dojo-props\x3d"baseClass: \'webviewButton cancel\', \r\n\t\t\t  iconClass: \'rcIcon cancelIcon\', \r\n\t\t\t  label: \'CANCEL\'"\r\n\t\t\t  data-dojo-attach-event\x3d"onClick: onCancel"\x3e\r\n\t\t\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/EditPointDialog.html":'\x3cdiv class\x3d"dijitDialog generic-bacnet-edit point-edit-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 535px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"loading-overlay"\r\n             data-dojo-attach-point\x3d"loadingOverlay"\x3e\r\n            \x3cdiv class\x3d"loading-animation hidden"\r\n                 data-dojo-attach-point\x3d"loadingAnimation"\x3e\r\n                \x3cdiv class\x3d"cog-main"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-top"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-bot"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"error-overlay hidden"\r\n             data-dojo-attach-point\x3d"errorOverlay"\x3e\r\n            \x3cdiv class\x3d"warning-icon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"message-container" data-dojo-attach-point\x3d"errorMessageContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"point-name"\r\n             data-dojo-attach-point\x3d"pointName"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"required-sign"\r\n             data-dojo-attach-point\x3d"requiredNote"\x3e* ${rcStrings.requiredField}\x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"valueLabel"\x3e${rcStrings.value}\x3cspan class\x3d"required-sign"\x3e*\x3c/span\x3e:\x3c/label\x3e\r\n            \x3cdiv class\x3d"value-input-container" data-dojo-attach-point\x3d"valueInputContainer"\x3e\r\n                \x3cinput type\x3d\'text\'\r\n                       data-dojo-attach-point\x3d\'numericValueInput\'\r\n                       data-dojo-type\x3d\'dijit/form/ValidationTextBox\'\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                        trim: "true",\r\n                                        maxLength: "256",\r\n                                        required: "true",\r\n                                        invalidMessage: "${rcStrings.invalidNumber}",\r\n                                        pattern: "[+|-]{0,1}(\\\\d+|\\\\d+\\\\.\\\\d+){1}([e|E]{1}\\\\+\\\\d+){0,1}"\'/\x3e\r\n\r\n                \x3cselect class\x3d"hidden"\r\n                        data-dojo-attach-point\x3d"digitalValueInput"\r\n                        data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                        data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                        autoComplete: true"\x3e\x3c/select\x3e\r\n\r\n                \x3ctextarea class\x3d"hidden"\r\n                          data-dojo-attach-point\x3d"textValueInput"\r\n                          data-dojo-type\x3d"dijit/form/SimpleTextarea"\r\n                          data-dojo-props\x3d\'baseClass: "rcTextArea"\'\x3e\x3c/textarea\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"second-column" data-dojo-attach-point\x3d"relinquishAndAutoManualContainer"\x3e\r\n                \x3cspan class\x3d"button-container" data-dojo-attach-point\x3d"relinquishButtonContainer"\x3e\r\n                    \x3cbutton class\x3d"priority-button"\r\n                            data-dojo-attach-point\x3d"_relinquishB"\r\n                            data-dojo-type\x3d"dijit/form/Button"\r\n                            data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\r\n                            data-dojo-props\x3d"baseClass: \'webviewButton circularButton noLabel\',\r\n                            iconClass: \'rcIcon browseIcon\'"\x3e\x3c/button\x3e\r\n                \x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"autoManContainer" class\x3d"auto-man-container"\x3e\r\n                    \x3cselect class\x3d"auto-man-selector"\r\n                            data-dojo-attach-point\x3d"autoManualSelector"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                            autoComplete: false"\x3e\x3c/select\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"reasonLabel"\x3e${rcStrings.reason}\x3cspan class\x3d"required-sign"\x3e*\x3c/span\x3e:\x3c/label\x3e\r\n            \x3cinput type\x3d"text" class\x3d"reason-input timed-hidden"\r\n                   data-dojo-attach-point\x3d"reasonField"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'placeholder: "${webviewStrings.reasonPlaceholder}",\r\n                   baseClass: "rcTextBox",\r\n                   required: ${reasonRequired},\r\n                   trim: true, maxLength: 256\'/\x3e\r\n            \x3cspan class\x3d"second-column hidden" data-dojo-attach-point\x3d"timedContainer"\x3e\r\n                \x3clabel class\x3d"timed-label"\x3e${rcStrings.timed}:\x26nbsp;\x3c/label\x3e\r\n                \x3c!--pattern: \'^[0-9]{2}:[0-9]{2}$\'--\x3e\r\n                \x3cinput class\x3d"timed-input" type\x3d"text"\r\n                       data-dojo-attach-point\x3d"_timedOverrideTB"\r\n                       data-dojo-type\x3d"webview/bacnet/_widget/TimedInput"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                       value: 0, useSeconds: false, useDefault: true, defaultValue: 30,\r\n                       maxLength: 5" /\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                disabled: true,\r\n                iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_group/templates/DialogRelinquish.html":'\x3cdiv class\x3d"dijitDialog ${baseClass} relinquish-dialog priorities-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d\'bottomMargin\'\x3e\x3cspan data-dojo-attach-point\x3d"_objName"\x3e\x3c/span\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d\'prioritiesGrid\'\x3e\r\n            \x3cdiv class\x3d\'bottomMargin\' data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"button-contianer"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_loadB"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton",\r\n            iconClass: "webviewIcon buttonLoadIcon",\r\n            label: "${rcStrings.load:capitalizeString}"\'\r\n            data-dojo-attach-event\x3d"onClick:_fetch"\x3e\r\n            LOAD\r\n        \x3c/button\x3e\r\n\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_relinquishB"\r\n            data-dojo-props\x3d\'label: "${rcStrings.relinquish:capitalizeString}",\r\n            baseClass: "webviewButton", iconClass: "webviewIcon buttonRelinquishIcon",\r\n            disabled: true\'\r\n            data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\x3e\r\n            RELINQUISH\r\n        \x3c/button\x3e\r\n\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_closeB"\r\n            data-dojo-props\x3d\'label: "${rcStrings.close:capitalizeString}",\r\n            baseClass: "webviewButton", iconClass: "webviewIcon buttonCloseIcon"\'\r\n            data-dojo-attach-event\x3d"onClick:hide"\x3e\r\n            CLOSE\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/programs/templates/ProgramToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"sendButton" data-dojo-props\x3d\'titleStr : "${worksheetStrings.send}",\r\n          iconClass: "rc24Icon svg-send-to toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon svg-cancel-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"sendMultipleButton" data-dojo-props\x3d\'titleStr : "${programStrings.sendMultiple}",\r\n          iconClass: "rc24Icon svg-send-multiple-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"filesMenu" data-dojo-props\x3d\'titleStr : "${programStrings.files}",\r\n          iconClass: "rc24Icon svg-folder toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"toggleTraceButton" data-dojo-props\x3d\'titleStr : "${programStrings.watch}",\r\n          iconClass: "rc24Icon svg-trace toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"toggleMnemonicsButton" data-dojo-props\x3d\'titleStr : "${rcStrings.mnemonic}",\r\n          iconClass: "rc24Icon svg-mnemonic toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"toggleValuesButton" data-dojo-props\x3d\'titleStr : "${programStrings.displayValues}",\r\n          iconClass: "rc24Icon svg-value-en toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"autoCompleteButton" data-dojo-props\x3d\'titleStr : "${programStrings.disableAutoComplete}",\r\n          iconClass: "rc24Icon svg-autocomplete toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"replaceButton" data-dojo-props\x3d\'titleStr : "${programStrings.replace}",\r\n          iconClass: "rc24Icon svg-replace-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"renumberButton" data-dojo-props\x3d\'titleStr : "${programStrings.renumber}",\r\n          iconClass: "rc24Icon svg-renumber-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"clearTraceButton" data-dojo-props\x3d\'titleStr : "${programStrings.clearTrace}",\r\n          iconClass: "rc24Icon svg-clear-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"optionsButton" data-dojo-props\x3d\'titleStr : "${rcStrings.options}",\r\n          iconClass: "rc24Icon svg-options toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/programs/templates/ProgramsWorksheet.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites programs-worksheet worksheet"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/worksheets/programs/ProgramsWorksheetToolbar"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"grid-container" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"database-remaining" data-dojo-attach-point\x3d"dbRemaining"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/widgets/templates/DescriptionEditor.html":'\x3cdiv class\x3d"dijitDialog description-editor-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent webviewContentPane"\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel class\x3d"selector-label" data-dojo-attach-point\x3d"inputLabel"\x3e\r\n                ${webviewStrings.description}:\x3cbr /\x3e\r\n                (${webviewStrings.maxCharacters}: 255)\r\n            \x3c/label\x3e\r\n            \x3ctextarea style\x3d"min-height: 5em;"\r\n                      data-dojo-attach-point\x3d"descriptionInput"\r\n                      data-dojo-type\x3d"dijit/form/Textarea"\r\n                      data-dojo-props\x3d\'baseClass: "rcTextArea",\r\n                      disabled: !${canEdit}, maxLength: 255\'\x3e${value}\x3c/textarea\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n            \x3cbutton type\x3d\'submit\'\r\n                    data-dojo-type\x3d\'dijit/form/Button\'\r\n                    data-dojo-attach-point\x3d"okButton"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    label: "${rcStrings.btnOk}",\r\n                    iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n            \x3cbutton type\x3d\'button\'\r\n                    data-dojo-type\x3d\'dijit/form/Button\'\r\n                    data-dojo-attach-point\x3d"cancelButton"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    label: "${rcStrings.btnCancel}",\r\n                    iconClass: "rcIcon cancelIcon"\'\r\n                    data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/widgets/templates/NewWorksheetInstance.html":'\x3cdiv class\x3d"dijitDialog new-worksheet-instance"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent webviewContentPane"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_newInstanceForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "newInstanceForm", action: "", method: "",\r\n             name: "newInstanceForm", encType: "multipart/form-data"\'\x3e\r\n\r\n            \x3cfieldset data-dojo-attach-point\x3d"instanceTypeContainer"\x3e\r\n                \x3clegend\x3e${webviewStrings.instance}\x3c/legend\x3e\r\n                \x3cdiv class\x3d\'radioButtonContainer\'\r\n                     data-dojo-attach-point\x3d\'instanceTypes\'\x3e\r\n                    \x3cdiv class\x3d"radioItem"\x3e\r\n                        \x3cinput type\x3d"radio" name\x3d"instanceType" id\x3d"nextInstance" checked value\x3d"${InstanceTypes.next}"\r\n                               data-dojo-type\x3d"dijit/form/RadioButton"\r\n                               data-dojo-attach-point\x3d\'nextInstanceType\'\r\n                               data-dojo-props\x3d\'baseClass: "webviewAdminRadio",\r\n                               value: ${InstanceTypes.next}\' /\x3e\r\n                        \x3clabel class\x3d"radioButtonLabel" for\x3d"nextInstance" data-dojo-attach-point\x3d"nextLabel"\x3e${webviewStrings.nextInstance}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"field-and-label"\x3e\r\n                        \x3cspan class\x3d"radioItem"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"instanceType" id\x3d"specificInstance" value\x3d"${InstanceTypes.specific}"\r\n                                   data-dojo-attach-point\x3d"specificInstanceType"\r\n                                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                   data-dojo-props\x3d\'baseClass: "webviewAdminRadio",\r\n                                   value: "${InstanceTypes.specific}" \'/\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel" for\x3d"specificInstance" data-dojo-attach-point\x3d"specificLabel"\x3e${webviewStrings.specificInstance}\x3c/label\x3e\r\n                        \x3c/span\x3e\r\n                        \x3cspan class\x3d"invisible" data-dojo-attach-point\x3d"specificContainer"\x3e\r\n                            \x3cinput type\x3d"number" name\x3d"specificInstance" min\x3d"1"\r\n                                   data-dojo-attach-point\x3d"specificInstance"\r\n                                   data-dojo-type\x3d"dijit/form/TextBox"\r\n                                   data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                   min: 1\'/\x3e\r\n                        \x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n\r\n            \x3cdiv class\x3d"field-and-label"\x3e\r\n                \x3clabel for\x3d"name"\x3e${webviewStrings.name}: \x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"name" id\x3d"name"\r\n                       data-dojo-attach-point\x3d"name"\r\n                       data-dojo-type\x3d"dijit/form/TextBox"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n            \x3cbutton type\x3d"submit"\r\n                    data-dojo-attach-point\x3d"okButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    disabled: true,\r\n                    iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n            \x3cbutton type\x3d"button"\r\n                    data-dojo-attach-point\x3d"cancelButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\r\n                    data-dojo-attach-event\x3d\'click:onCancel\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/InlineEditBox.html":'\x3cdiv class\x3d"wvInlineEditBox ${baseClass}" data-dojo-attach-point\x3d"inlineContainer"\x3e\r\n    \x3cspan class\x3d"linkable" data-dojo-attach-point\x3d"valueText"\x3e${value}\x3c/span\x3e\r\n    \x3cinput class\x3d"hidden" value\x3d"${value}"\r\n           data-dojo-attach-point\x3d"valueTextBox"\r\n           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n           data-dojo-props\x3d"value: \'${value}\',\r\n           pattern: \'${pattern}\', maxLength: ${maxLength}" /\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/programs/templates/ProgramsWorksheetToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"sendButton" data-dojo-props\x3d\'titleStr: "${worksheetStrings.send}",\r\n          iconClass: "rc24Icon sendIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr: "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"editButton" data-dojo-props\x3d\'titleStr: "${rcStrings.edit}",\r\n          iconClass: "rc24Icon adminEditIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"exportButton" data-dojo-props\x3d\'titleStr: "${rcStrings.xport}",\r\n          iconClass: "rc24Icon svg-export-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n        data-dojo-attach-point\x3d"excelButton"\r\n        data-dojo-props\x3d\'titleStr: "${webviewStrings.exportExcel}",\r\n        iconClass: "rc24Icon toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"toggleButton" data-dojo-props\x3d\'titleStr: "${webviewStrings.toggleColumns}",\r\n          iconClass: "rc24Icon svg-column-toggle-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"addButton" data-dojo-props\x3d\'titleStr: "${rcStrings.add}",\r\n          iconClass: "rc24Icon addIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"deleteButton" data-dojo-props\x3d\'titleStr: "${rcStrings.rcDelete}",\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/IconButton.html":'\x3cspan class\x3d"icon-button ${baseClass}" data-dojo-attach-point\x3d"container"\x3e\r\n    \x3cspan class\x3d"${iconClass}" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\x3c/span\x3e',"url:webview/widget/templates/ConfirmActionBar.html":"\x3cdiv class\x3d'webview dijitDialogPaneActionBar' data-dojo-attach-point\x3d\"actionBarNode\"\x3e\r\n    \x3cbutton data-dojo-type\x3d'dijit/form/Button' type\x3d'submit'\r\n            data-dojo-props\x3d'baseClass: \"webviewButton\",\r\n            iconClass: \"rcIcon okIcon\"'\r\n            data-dojo-attach-point\x3d\"okButton\"\x3e\x3c/button\x3e\r\n    \x3cbutton data-dojo-type\x3d'dijit/form/Button' type\x3d'button'\r\n            data-dojo-props\x3d'baseClass: \"webviewButton\",\r\n            iconClass: \"rcIcon cancelIcon\"'\r\n            data-dojo-attach-point\x3d\"cancelButton\" data-dojo-attach-event\x3d'click:onCancel'\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n",
"url:webview/admin/worksheets/trendLogs/templates/TrendLogsView.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites trendlogs singlePage worksheet"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/worksheets/trendLogs/TrendLogToolbar"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/widgets/templates/AdvancedTrendPropertyEditor.html":'\x3cdiv class\x3d"advancedTrendProperties ${baseClass}"\x3e\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e${webviewStrings.startTime}\x3c/legend\x3e\r\n\r\n        \x3cdiv\x3e\r\n            \x3clabel\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                       data-dojo-attach-point\x3d"alwaysStartCB"\r\n                       data-dojo-type\x3d\'dijit/form/CheckBox\'\r\n                       data-dojo-props\x3d"checked: ${start.always},\r\n                       disabled: ${disableEditStart}"/\x3e\r\n                ${webviewStrings.alwaysStart}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3c!-- Date Picker --\x3e\r\n            \x3clabel\x3e${rcStrings.date}:\x3c/label\x3e\r\n            \x3cdiv class\x3d"dropdown-container"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"startDate"\r\n                       data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcSelectBox\', disabled: true" /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3c!-- Time Picker --\x3e\r\n            \x3clabel\x3e${rcStrings.time}:\x3c/label\x3e\r\n            \x3cdiv class\x3d"dropdown-container"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"startTime"\r\n                       data-dojo-type\x3d"dijit/form/TimeTextBox"\r\n                       data-dojo-props\x3d"constraints:{timePattern: \'HH:mm:ss\'},\r\n                       baseClass: \'rcSelectBox\', disabled: true" /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e${webviewStrings.stopTime}\x3c/legend\x3e\r\n        \x3cdiv\x3e\r\n            \x3clabel\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                       data-dojo-attach-point\x3d"neverStopCB"\r\n                       data-dojo-type\x3d\'dijit/form/CheckBox\'\r\n                       data-dojo-props\x3d"checked: ${end.never}, disabled: ${disableEditEnd}"/\x3e\r\n                ${webviewStrings.neverStop}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3c!-- Date Picker --\x3e\r\n            \x3clabel\x3e${rcStrings.date}:\x3c/label\x3e\r\n            \x3cdiv class\x3d"dropdown-container"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"endDate"\r\n                       data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcSelectBox\', disabled: true" /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3c!-- Time Picker --\x3e\r\n            \x3clabel\x3e${rcStrings.time}:\x3c/label\x3e\r\n            \x3cdiv class\x3d"dropdown-container"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"endTime"\r\n                       data-dojo-type\x3d"dijit/form/TimeTextBox"\r\n                       data-dojo-props\x3d"constraints:{timePattern: \'HH:mm:ss\'},\r\n                       baseClass: \'rcSelectBox\', disabled: true" /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv class\x3d"bottomCheckboxes"\x3e\r\n        \x3c!-- Checkbox for stop when full --\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-attach-point\x3d"stopWhenFullCB"\r\n                   data-dojo-type\x3d\'dijit/form/CheckBox\'\r\n                   data-dojo-props\x3d"checked: ${stopWhenFull},\r\n                   disabled: ${forClientSide}"/\x3e\r\n            ${webviewStrings.stopWhenFull}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"clearLogDataContainer" class\x3d"bottomCheckboxes"\x3e\r\n        \x3c!-- Checkbox for Clear Log Data --\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-attach-point\x3d"clearLogDataCB"\r\n                   data-dojo-type\x3d\'dijit/form/CheckBox\'\r\n                   data-dojo-props\x3d"checked: false,\r\n                   disabled: ${forClientSide}"/\x3e\r\n            ${webviewStrings.clearLogData}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/trendLogs/templates/TrendLogToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"sendButton" data-dojo-props\x3d\'titleStr: "${worksheetStrings.send}",\r\n          iconClass: "rc24Icon sendIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr: "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"exportButton" data-dojo-props\x3d\'titleStr: "${rcStrings.xport}",\r\n          iconClass: "rc24Icon svg-export-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n        data-dojo-attach-point\x3d"excelButton"\r\n        data-dojo-props\x3d\'titleStr: "${webviewStrings.exportExcel}",\r\n        iconClass: "rc24Icon toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"columnButton" data-dojo-props\x3d\'titleStr: "${webviewStrings.toggleColumns}",\r\n          iconClass: "rc24Icon svg-column-toggle-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"addButton" data-dojo-props\x3d\'titleStr: "${rcStrings.add}",\r\n          iconClass: "rc24Icon addIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"deleteButton" data-dojo-props\x3d\'titleStr: "${rcStrings.rcDelete}",\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/worksheets/trendLogs/templates/TrendLogPoints.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites trendlogs singlePage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n        \x3cdiv class\x3d"commitButtons selected" data-dojo-type\x3d"webview/widget/CommitButtons"\r\n             data-dojo-attach-point\x3d"commitButtons"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!--right side --\x3e\r\n    \x3cdiv class\x3d"tree-container"\x3e\r\n        \x3c!--Results list--\x3e\r\n        \x3cdiv class\x3d"hidden results-container"\r\n             data-dojo-attach-point\x3d"resultsWidget"\r\n             data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n             data-dojo-props\x3d\'baseClass: "schedule-tree-results",\r\n             paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"nav-group-container" data-dojo-attach-point\x3d"builderContainer"\x3e\r\n            \x3cdiv class\x3d"webviewAdminResizeable"\r\n                 data-dojo-attach-point\x3d"builderWidget"\r\n                 data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n                 data-dojo-props\x3d\'titleLabel: "${webviewStrings.trendLogPoints}"\'\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/templates/pointsItem.html":'\x3cdiv class\x3d"pointsItem" title\x3d"${sysName}/${deviceName}/${pointName} (${pointMnemonic})"\x3e\r\n    \x3cspan class\x3d"webviewIcon dragHandle" data-dojo-attach-point\x3d"grabIcon"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"pointLabel"\x3e\r\n        ${sysName}/${deviceName}/${pointName}\x26nbsp;(${pointMnemonic})\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',"url:webview/admin/worksheets/trendLogs/templates/TrendLogPointItem.html":'\x3cdiv class\x3d"trendlogPointContainer" role\x3d"presentation"\x3e\r\n    \x3cdiv class\x3d"pointPlaceHolderBefore" data-dojo-attach-point\x3d"beforePlaceHolder"\x3e\x3c/div\x3e\r\n    \x3cspan class\x3d"trendlogPointItem" data-dojo-attach-point\x3d"contentNode" role\x3d"presentation"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"displayNode"\x3e${pointName}\x26nbsp;(${pointMnemonic})\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"editNode"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cdiv class\x3d"pointPlaceHolderAfter" data-dojo-attach-point\x3d"afterPlaceHolder"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/bacnet/_btlProperties/templates/BTLProperties.html":'\x3cdiv class\x3d"BTLProperties"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"mainContainer"\x3e\r\n        \x3cdiv data-dojo-type\x3d\'dijit/layout/BorderContainer\' data-dojo-attach-point\x3d\'_container\' class\x3d"borderedContainer"\x3e\r\n            \x3cdiv class\x3d"mainContents" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"region: \'center\'"\x3e\r\n                \x3cdiv class\x3d"topContents"\x3e\r\n                    \x3cdiv class\x3d"topLeftContents"\x3e\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"systemInputId"\x3e\r\n                                System:\r\n                            \x3c/label\x3e\r\n                            \x3cselect id\x3d"systemInputId" class\x3d"rcSelectBox inputAndLabelSpan"\r\n                                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                    data-dojo-attach-point\x3d"systemInput"\r\n                                    data-dojo-props\x3d"baseClass: \'inputAndLabelSpan rcSelectBox\',\r\n                                    autoComplete: false"\x3e\r\n                            \x3c/select\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"deviceId"\x3eDevice Id:\x3c/label\x3e\r\n                            \x3cspan class\x3d"inputAndLabelSpan"\r\n                            data-dojo-attach-point\x3d"deviceIdInput"\r\n                                  data-dojo-type\x3d"dijit/form/TextBox"\r\n                                  data-dojo-props\x3d"trim:\'true\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"objectRef"\x3e\r\n                                Object:\r\n                            \x3c/label\x3e\r\n                            \x3cselect id\x3d"objectRef" class\x3d"rcSelectBox inputAndLabelSpan"\r\n                                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                    data-dojo-attach-point\x3d"objectRefInput"\r\n                                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                    searchAttr: \'name\', autoComplete: false"\x3e\r\n                            \x3c/select\x3e\r\n                        \x3c/div\x3e\r\n\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"topRightContents"\x3e\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"instanceRef"\x3eInstance:\x3c/label\x3e\r\n                            \x3cspan class\x3d"inputAndLabelSpan"\r\n                                  data-dojo-attach-point\x3d"instanceRefInput"\r\n                                  data-dojo-type\x3d"dijit/form/TextBox"\r\n                                  data-dojo-props\x3d"trim:\'true\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"propertyRef"\x3eProperty:\x3c/label\x3e\r\n                            \x3cspan class\x3d"inputAndLabelSpan"\r\n                                  data-dojo-attach-point\x3d"propertyRefInput"\r\n                                  data-dojo-type\x3d"dijit/form/TextBox"\r\n                                  data-dojo-props\x3d"trim:\'true\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3clabel for\x3d"arrayIdx"\x3eArray Index:\x3c/label\x3e\r\n                            \x3cspan class\x3d"inputAndLabelSpan"\r\n                            data-dojo-attach-point\x3d"arrayIdxInput"\r\n                                  data-dojo-type\x3d"dijit/form/TextBox"\r\n                                  data-dojo-props\x3d"trim:\'true\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"inputAndLabel"\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"addEntryButton"\r\n                                  data-dojo-type\x3d"dijit/form/Button"\r\n                                  data-dojo-props\x3d"label:\'Add\'"\x3e\x3c/span\x3e\r\n\r\n                            \x3cspan data-dojo-attach-point\x3d"clearEntriesButton"\r\n                                  data-dojo-type\x3d"dijit/form/Button"\r\n                                  data-dojo-props\x3d"label:\'Clear\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"propertyList"\x3e\r\n                    \x3ctable data-dojo-attach-point\x3d\'objectsToRead\'\x3e\r\n                        \x3ctr data-dojo-attach-point\x3d"columnHeaders"\x3e\r\n                            \x3cth class\x3d"tenPercentCell"\x3eObject Reference\x3c/th\x3e\r\n                            \x3cth\x3eValue\x3c/th\x3e\r\n                            \x3cth class\x3d"tenPercentCell"\x3eType\x3c/th\x3e\r\n                            \x3cth class\x3d"tenPercentCell"\x3ePriority\x3c/th\x3e\r\n                            \x3cth class\x3d"fivePercentCell"\x3eRemove\x3c/th\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/table\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"bottomContents"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"readButton"\r\n                          data-dojo-type\x3d"dijit/form/Button"\r\n                          data-dojo-props\x3d"label:\'Read\'"\x3e\x3c/span\x3e\r\n\r\n                    \x3cspan data-dojo-attach-point\x3d"writeButton" \r\n                          data-dojo-type\x3d"dijit/form/Button"\r\n                          data-dojo-props\x3d"label:\'Write\'"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/_runtime/templates/RuntimeLog.html":'\x3cdiv class\x3d"rcRuntimeLog"\x3e\r\n    \x3cdiv class\x3d"rcRuntimeLogBorderContainer"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"_container"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/widget/_runtime/RuntimeLogToolbar"\r\n             data-dojo-props\x3d\'region: "top"\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"rcRuntimeLog-container"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/_runtime/templates/RuntimeLogToolbar.html":'\x3cdiv class\x3d"runtime-log-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"exportButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.xport}",\r\n              iconClass: "rc24Icon svg-export-icon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n            data-dojo-attach-point\x3d"excelButton"\r\n            data-dojo-props\x3d\'titleStr : "${webviewStrings.exportExcel}",\r\n            iconClass: "rc24Icon toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/RuntimeLogWorksheet.html":'\x3cdiv class\x3d"rcRuntimeLog"\x3e\r\n    \x3cdiv class\x3d"rcRuntimeLogBorderContainer"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"_container"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/widget/_runtime/RuntimeLogToolbar"\r\n             data-dojo-props\x3d\'region: "top"\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"rcRuntimeWS-container"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/bacnet/_schedule/templates/Schedule.html":'\x3cdiv class\x3d"bacnet-schedule" data-dojo-attach-point\x3d"containerNode" style\x3d"width:100%; height:100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_container" data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"noprint" style\x3d"width:100%; height:100%;"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" region\x3d"center"\x3e\r\n            \x3cdiv style\x3d"width:100%; height:100%;"\r\n                 data-dojo-type\x3d"webview/bacnet/_schedule/WeeklySchedule"\r\n                 data-dojo-attach-point\x3d"weeklySchedule"\r\n                 data-dojo-props\x3d"days: \'7\'"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"infoContainer" region\x3d"right"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"infoPane" region\x3d"top"\x3e\r\n                \x3clabel class\x3d"default-value-label"\r\n                       data-dojo-attach-point\x3d"defaultValueLabelContainer"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"defaultValueLabel" class\x3d"mpwDefaultValueLabel"\x3e\r\n                    \x3c/span\x3e\r\n                \x3c/label\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"defaultValueNode" class\x3d"mpwDefaultValue"\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3ch3 data-dojo-attach-point\x3d"specialEventsHeader"\x3e\x3c/h3\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"exSchedPane" region\x3d"center" style\x3d"overflow-y:scroll;"\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"_effectivePeriodContainer" region\x3d"bottom" class\x3d"effectivePeriodContainer"\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_advancedBtn" type\x3d"button" data-dojo-attach-event\x3d"onClick: _toggleEffectivePeriod"\x3e\r\n\r\n                \x3c/button\x3e\r\n                \x3cfieldset data-dojo-attach-point\x3d"_datesContainer" class\x3d"effectivePeriodNode hideContainer"\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/bacnet/_schedule/templates/WeeklyScheduleEditDialog.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" \x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" \r\n         data-dojo-attach-point\x3d"dialog"\r\n         data-dojo-props\x3d\'title: "${rcStrings.editWeeklyEvent}"\'\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"dowDiv"\x3e${rcStrings.dayOfWeek}\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" class\x3d"specEventDialogTimeValueGrid outline"\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"gridContainer" style\x3d"height: 10em;" class\x3d"weekSchedEditGrid"\x3e\x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"lowerbar" data-dojo-attach-point\x3d\'_gridBarLower\'\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-attach-point\x3d"newRowButton"\r\n                        data-dojo-attach-event\x3d"onClick:_onClickAddRow"\r\n                        data-dojo-props\x3d\'label: "${rcStrings.add}",\r\n                        showLabel: true,\r\n                        baseClass: "webviewButton"\'\x3e\r\n                    Add\r\n                \x3c/button\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-attach-point\x3d"removeRowButton"\r\n                        data-dojo-attach-event\x3d"onClick:_onClickDelete"\r\n                        data-dojo-props\x3d\'showLabel: true,\r\n                        label: "${rcStrings.remove}",\r\n                        baseClass: "webviewButton"\'\x3e\r\n                    Remove\r\n                \x3c/button\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"centreContentpane" title\x3d"Recurrence Pattern"\x3e\r\n            \x3cdiv class\x3d"weekSchedRecurrence" data-dojo-attach-point\x3d"weeklyOccPatternNode"\x3e\r\n                ${rcStrings.recurrencePattern}\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n                \x3ctable\x3e\r\n                    \x3ctbody\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"monCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect1"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW"/\x3e\r\n                                    ${_localeDays.monday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"tuesCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect2"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW"/\x3e\r\n                                    ${_localeDays.tuesday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d\'wedCell\'\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect3"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW"/\x3e\r\n                                    ${_localeDays.wednesday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"thursCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect4"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW"/\x3e\r\n                                    ${_localeDays.thursday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"friCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect5"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW"/\x3e\r\n                                    ${_localeDays.friday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"satCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect6"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW"/\x3e\r\n                                    ${_localeDays.saturday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                        \x3ctr\x3e\r\n                            \x3ctd data-dojo-attach-point\x3d"sunCell"\x3e\r\n                                \x3clabel\x3e\r\n                                    \x3cinput type\x3d"checkbox"\r\n                                           data-dojo-attach-point\x3d"daySelect7"\r\n                                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                           data-dojo-attach-event\x3d"onClick:_onClickDOW"/\x3e\r\n                                    ${_localeDays.sunday}\r\n                                \x3c/label\x3e\r\n                            \x3c/td\x3e\r\n                        \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                \x3c/table\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"wsEditButtons"\x3e\r\n            \x3cp class\x3d"buttons"\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button" \r\n                        data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                        data-dojo-attach-point\x3d"okBtn"\r\n                        data-dojo-props\x3d\'label: "${rcStrings.btnOk}",\r\n                        baseClass: "webviewButton"\'\x3e\r\n                    OK\r\n                \x3c/button\x3e\r\n                \x3cbutton data-dojo-type\x3d"dijit/form/Button" \r\n                        data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                        data-dojo-attach-point\x3d"cancelBtn"\r\n                        data-dojo-props\x3d\'label: "${rcStrings.btnCancel}",\r\n                        baseClass: "webviewButton"\'\x3e\r\n                    CANCEL\r\n                \x3c/button\x3e\r\n            \x3c/p\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_trend/templates/Trend.html":'\x3cdiv class\x3d\'rcTrend\' style\x3d"width:100%; height:100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n         data-dojo-type\x3d"webview/reliable/_trend/TrendToolbar"\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv data-dojo-type\x3d\'dijit/layout/BorderContainer\'\r\n         data-dojo-attach-point\x3d"_borderContainer"\r\n         data-dojo-props\x3d\'liveSplitters: "false"\' style\x3d\'width:100%;height:100%;\'\x3e\r\n        \x3cdiv data-dojo-type\x3d\'dijit/layout/ContentPane\'\r\n             data-dojo-attach-point\x3d"_gridContainer"\r\n             data-dojo-attach-event\x3d"onMouseOver:_onMouseOutsideChart, onMouseMove:_onMouseOutsideChart"\r\n             data-dojo-props\x3d\'region: "leading", splitter:"true"\' style\x3d\'width:0%\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_gridNode"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3cdiv data-dojo-type\x3d\'dijit/layout/ContentPane\' class\x3d"unselectable" \r\n             data-dojo-attach-point\x3d"_chartCP" \r\n             data-dojo-attach-event\x3d" onMouseOut:_onMouseMove" \r\n             data-dojo-props\x3d\'region:"center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_chartDiv"\r\n                 data-dojo-attach-event\x3d"onmousemove:_onMouseMove" style\x3d\'width:100%;height:100%;\'\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_trend/templates/TrendToolbar.html":'\x3cdiv class\x3d"trend-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"modeButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.update}",\r\n              iconClass: "toolbarButtonIcon svg-live-mode-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"dataButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.tbShowData}",\r\n              iconClass: "toolbarButtonIcon svg-table",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"prevButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.tbPrevious}",\r\n              iconClass: "toolbarButtonIcon svg-left-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"nextButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.tbNext}",\r\n              iconClass: "toolbarButtonIcon svg-right-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"legendButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.tbLegend}",\r\n              iconClass: "toolbarButtonIcon svg-legend",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"exportButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.xport}",\r\n              iconClass: "toolbarButtonIcon svg-export-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"excelButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.exportExcel}",\r\n              iconClass: "toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_group/templates/DialogEdit.html":'\x3cdiv class\x3d"point-edit-dialog"\x3e\r\n    \x3cdiv id\x3d"editPointTitle" class\x3d"point-edit-dialog"\r\n         data-dojo-type\x3d"rc/widget/Dialog"\r\n         data-dojo-attach-point\x3d"_dialog"\r\n         data-dojo-props\x3d"refocus: false,  duration: 1, baseClass: \'point-edit-dialog\'"\x3e\r\n\r\n        \x3cdiv class\x3d"point-name" data-dojo-attach-point\x3d"_displayName"\x3eMY VAR 1 (1VAR1)\x3c/div\x3e\r\n        \x3cdiv class\x3d"required-sign" data-dojo-attach-point\x3d"requiredNote"\x3e* ${rcStrings.requiredField}\x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel class\x3d"input-label"\r\n                   data-dojo-attach-point\x3d"valueNode"\x3e${rcStrings.value}\x3cspan class\x3d"required-sign"\x3e*\x3c/span\x3e:\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"value-input-container" data-dojo-attach-point\x3d"valueInputContainer"\x3e\r\n                \x3cdiv class\x3d"analog-inputs" data-dojo-attach-point\x3d"_valueTBContainer"\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"_valueTB"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                           maxLength:256, trim: true,\r\n                           pattern: \'^-?\\\\d*\\\\.?\\\\d+$\'" /\x3e\r\n\r\n                    \x3ctextarea class\x3d"dialogEditTextArea"\r\n                              data-dojo-type\x3d"dijit/form/SimpleTextarea"\r\n                              data-dojo-attach-point\x3d"_textArea"\r\n                              data-dojo-props\x3d\'baseClass: "rcTextArea"\'\x3e\x3c/textarea\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"digital-inputs" data-dojo-attach-point\x3d"_multiStateFSContainer"\x3e\r\n                    \x3cselect data-dojo-attach-point\x3d"_multiStateFS"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-attach-event\x3d"onChange:_onChangeMultiState"\r\n                            data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                            autoComplete: false"\x3e\x3c/select\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"second-column"\x3e\r\n                \x3cspan class\x3d"button-container" data-dojo-attach-point\x3d"relinquishButtonContainer"\x3e\r\n                    \x3cbutton class\x3d"priority-button"\r\n                            data-dojo-attach-point\x3d"_relinquishB"\r\n                            data-dojo-type\x3d"dijit/form/Button"\r\n                            data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\r\n                            data-dojo-props\x3d"baseClass: \'webviewButton circularButton noLabel\',\r\n                            iconClass: \'rcIcon browseIcon\'"\x3e\x3c/button\x3e\r\n                \x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_loading"\x3e\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"autoManContainer" class\x3d"auto-man-container"\x3e\r\n                    \x3cselect class\x3d"auto-man-selector"\r\n                            data-dojo-attach-point\x3d"_autoManualFS"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-attach-event\x3d"onChange:_onChangeAutoManual"\r\n                            data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                            autoComplete: false"\x3e\x3c/select\x3e\r\n                \x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"handOverrideContainer"\x3e\r\n                    \x3cselect class\x3d"auto-man-selector"\r\n                            data-dojo-attach-point\x3d"_handOverrideFS"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-attach-event\x3d"onChange:_onChangeAutoManual"\r\n                            data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                            autoComplete: false"\x3e\x3c/select\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel class\x3d"input-label"\r\n                   data-dojo-attach-point\x3d"_reasonLabel"\x3e${rcStrings.reason}\x3cspan class\x3d"required-sign"\x3e*\x3c/span\x3e:\r\n            \x3c/label\x3e\r\n            \x3cinput class\x3d"reason-input timed-hidden" type\x3d"text"\r\n                   data-dojo-attach-point\x3d"_reasonTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'placeholder: "${webviewStrings.reasonPlaceholder}",\r\n                   baseClass: "rcTextBox",\r\n                   trim: true, maxLength: 256\'/\x3e\r\n            \x3cspan class\x3d"second-column hidden" data-dojo-attach-point\x3d"timedContainer"\x3e\r\n                \x3clabel class\x3d"timed-label"\x3e${rcStrings.timed}:\x3c/label\x3e\r\n                \x3cinput class\x3d"timed-input" type\x3d"text"\r\n                       data-dojo-attach-point\x3d"_timedOverrideTB"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                       value: \'00:30\', maxLength: 5, trim: true,\r\n                       pattern: \'^[0-9]{2}:[0-9]{2}$\'" /\x3e\r\n            \x3c/span\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_ok"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk:capitalizeString}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_cancel"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnCancel:capitalizeString}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n                CANCEL\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-props\x3d\'title:"Invalid input"\' data-dojo-attach-point\x3d"_errorDialog"\x3e\r\n        \x3cp data-dojo-attach-point\x3d"errorTextContainer"\x3e\r\n        \x3c/p\x3e\r\n        \x3cp class\x3d"buttons"\x3e\r\n            \x3cbutton data-dojo-type\x3ddijit/form/Button\r\n                    data-dojo-attach-point\x3d"_errOk"\r\n                    data-dojo-attach-event\x3d"onClick: _closeErrorDialog"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk:capitalizeString}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_alarm/templates/AlarmHistory.html":'\x3cdiv class\x3d"rcAlarm"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"container" class\x3d"rcAlarmBorderContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/reliable/_alarm/AlarmHistoryToolbar"\r\n             data-dojo-props\x3d"site: ${site},\r\n             system: ${system},\r\n             enforceChangeApproval: ${_enforceChangeApproval}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"rcAlarm-container"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d"region: \'center\'"\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_alarm/widgets/cleanupHistoryDialog/templates/CleanupHistoryDialog.html":'\x3cdiv class\x3d"dijitDialog alarm-history-cleanup-dialog"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar"\r\n         class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode"\r\n              class\x3d"dijitDialogTitle dialog-title"\r\n              id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${alarmCleanupStrings.cleanupConfiguration}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"helpButton"\r\n              class\x3d"dialog-help-icon"\r\n              data-dojo-attach-event\x3d"ondijitclick: onHelp"\r\n              title\x3d"${rcStrings.help}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"helpIcon"\r\n                  class\x3d"help-icon"\r\n                  title\x3d"${rcStrings.help}"\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n              class\x3d"dijitDialogCloseIcon"\r\n              data-dojo-attach-event\x3d"ondijitclick: onCancel"\r\n              title\x3d"${buttonCancel}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText"\r\n                  class\x3d"closeText"\r\n                  title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n         class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"history-size"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"alarmHistorySizeLabel"\x3e\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cfieldset class\x3d"automatic-config"\r\n                  data-dojo-attach-point\x3d"automaticCleanupConfig"\x3e\r\n            \x3clegend\x3e\x3clabel class\x3d"form-label link"\r\n                       data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                       data-dojo-attach-point\x3d"baseUrlLabel"\r\n                       data-dojo-props\x3d\'helpText: "${alarmCleanupStrings.automaticCleanupHelp}",\r\n                    _isLabel: false,\r\n                    label: "${alarmCleanupStrings.automaticCleanup}"\'\x3e\x3c/label\x3e\x3c/legend\x3e\r\n            \x3cdiv class\x3d"radio-button-container"\x3e\r\n                \x3cinput type\x3d"radio"\r\n                       data-additional-name\x3d"enabled"\r\n                       value\x3d"enabled"\r\n                       data-dojo-attach-point\x3d"enableRadio"\r\n                       id\x3d"${id}_radioEnabled"\r\n                       title\x3d"${webviewStrings.enabledLabel}"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"${id}_radioEnabled"\r\n                       class\x3d"radio-button-label"\r\n                       title\x3d"${webviewStrings.enabledLabel}"\x3e${webviewStrings.enabledLabel}\x3c/label\x3e\r\n                \x3cinput type\x3d"radio"\r\n                       data-additional-name\x3d"disabled"\r\n                       value\x3d"disabled"\r\n                       data-dojo-attach-point\x3d"disableRadio"\r\n                       id\x3d"${id}_radioDisabled"\r\n                       title\x3d"${webviewStrings.disabledLabel}"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"${id}_radioDisabled"\r\n                       class\x3d"radio-button-label"\r\n                       title\x3d"${webviewStrings.disabledLabel}"\x3e${webviewStrings.disabledLabel}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"text-inputs-container"\x3e\r\n                \x3cdiv class\x3d"input-row records-age"\x3e\r\n                    \x3clabel class\x3d"auto-cleanup-age-label"\r\n                           title\x3d"${alarmCleanupStrings.ageToRemove}"\x3e${alarmCleanupStrings.ageToRemove}:\x3c/label\x3e\r\n                    \x3cinput class\x3d"auto-cleanup-age-input"\r\n                           type\x3d"text"\r\n                           id\x3d"${id}_automaticAgeInput"\r\n                           tabindex\x3d"0"\r\n                           title\x3d"${alarmCleanupStrings.ageToRemove}"\r\n                           data-dojo-attach-point\x3d"automaticAgeInput"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "rcTextBox form-input large top-row",\r\n                                    trim: "true",\r\n                                    maxLength: "2",\r\n                                    required: "true",\r\n                                    placeholder: "6",\r\n                                    invalidMessage: "${rcStrings.invalidNumber}",\r\n                                    pattern: "^\\\\d+"\' /\x3e\r\n                    \x3clabel class\x3d"months-label"\x3e${alarmCleanupStrings.ageMonths}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"input-row cleanup-time"\x3e\r\n                    \x3cdiv class\x3d"grid-cell time-of-day-label"\x3e\r\n                        \x3clabel title\x3d"${alarmCleanupStrings.timeOfDay}"\x3e${alarmCleanupStrings.timeOfDay}:\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cinput class\x3d"time-of-day-input"\r\n                           type\x3d"text"\r\n                           id\x3d"${id}_automaticTimeInput"\r\n                           tabindex\x3d"0"\r\n                           title\x3d"${alarmCleanupStrings.timeOfDay}"\r\n                           data-dojo-attach-point\x3d"automaticTimeInput"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "rcTextBox form-input large",\r\n                                    trim: "true",\r\n                                    maxLength: "5",\r\n                                    required: "true",\r\n                                    placeholder: "03:00",\r\n                                    invalidMessage: "${errorStrings.invalidSimpleTimeFormat}",\r\n                                    pattern: "^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$"\' /\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n        \x3cfieldset class\x3d"manual-config"\x3e\r\n            \x3clegend\x3e\x3clabel class\x3d"form-label link"\r\n                       data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                       data-dojo-attach-point\x3d"baseUrlLabel"\r\n                       data-dojo-props\x3d\'helpText: "${alarmCleanupStrings.manualCleanupHelp}",\r\n                    _isLabel: false,\r\n                    label: "${alarmCleanupStrings.manualCleanup}"\'\x3e\x3c/label\x3e\x3c/legend\x3e\r\n            \x3cdiv class\x3d"text-inputs-container"\x3e\r\n                \x3cdiv class\x3d"input-row systems-selected"\x3e\r\n                    \x3cdiv class\x3d"grid-cell system-selector-label"\x3e\r\n                        \x3clabel title\x3d"${systemStrings.systemSelected}"\x3e${systemStrings.systemSelected}:\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"form-label top-row"\r\n                         data-dojo-type\x3d"webview/widget/form/PopupSelectorWithTags"\r\n                         data-dojo-attach-point\x3d"systemSelector"\r\n                         data-dojo-props\x3d\'_itemLabel: "${webviewStrings.wvSystems}"\'\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"input-row records-age"\x3e\r\n                    \x3clabel class\x3d"manual-cleanup-age-label"\x3e${alarmCleanupStrings.ageToRemove}:\x3c/label\x3e\r\n                    \x3cinput class\x3d"manual-cleanup-age-input"\r\n                           type\x3d"text"\r\n                           id\x3d"${id}_manualAgeInput"\r\n                           tabindex\x3d"0"\r\n                           title\x3d"${alarmCleanupStrings.ageToRemove}"\r\n                           data-dojo-attach-point\x3d"manualAgeInput"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "rcTextBox form-input large",\r\n                                        trim: "true",\r\n                                        maxLength: "2",\r\n                                        required: "true",\r\n                                        placeholder: "6",\r\n                                        invalidMessage: "${rcStrings.invalidNumber}",\r\n                                        pattern: "\\\\d+"\' /\x3e\r\n                    \x3clabel class\x3d"months-label"\x3e${alarmCleanupStrings.ageMonths}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"cleanup-button-container"\x3e\r\n                    \x3cbutton type\x3d"button"\r\n                            id\x3d"${id}_cleanupNowButton"\r\n                            tabindex\x3d"0"\r\n                            title\x3d"${alarmCleanupStrings.cleanupNow}"\r\n                            data-dojo-type\x3d"dijit/form/Button"\r\n                            data-dojo-attach-point\x3d"cleanupNowButton"\r\n                            data-dojo-attach-event\x3d"click:_getDeletedCount"\r\n                            data-dojo-props\x3d\'baseClass: "webviewButton cleanup-button",\r\n                        disabled: true,\r\n                        iconClass: "rcIcon svg-cleanup-icon"\'\x3e\r\n                        ${alarmCleanupStrings.cleanupNow}\r\n                    \x3c/button\x3e\r\n                \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"okCancelDiv"\r\n         class\x3d"dijitDialogPaneActionBar confirm-button-container"\r\n         data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_okButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnOk}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-attach-event\x3d"click:onOkClicked"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_cancelButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnCancel}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-attach-event\x3d"click:onCancel"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_alarm/widgets/cleanupHistoryDialog/templates/CleanupHistoryProgressDialog.html":'\x3cdiv class\x3d"dijitDialog alarm-history-cleanup-progress-dialog progress"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n          class\x3d"dijitDialogCloseIcon"\r\n          data-dojo-attach-event\x3d"ondijitclick: onCancel"\r\n          title\x3d"${webviewAllStrings.close}"\r\n          role\x3d"button"\r\n          tabindex\x3d"0"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeText"\r\n              class\x3d"closeText"\r\n              title\x3d"${webviewAllStrings.close}"\x3ex\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n         class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"cleanup-title"\x3e\r\n            \x3cspan class\x3d"title-image rcAlertIcon rcInfoIcon" data-dojo-attach-point\x3d"titleImage"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"title-text" data-dojo-attach-point\x3d"titleText"\x3e${errorStrings.operationInProgress}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"cleanup-progress-details"\x3e\r\n            \x3cdiv class\x3d"left"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"progress-image preloader"\x3e\r\n                \x3cdiv class\x3d"cog1-screen"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog2-screen"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog3-screen"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"right"\x3e\x3c/div\x3e\r\n            \x3cspan class\x3d"progress-text" data-dojo-attach-point\x3d"progressText"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"progress-remarks" data-dojo-attach-point\x3d"progressRemark"\x3e${alarmCleanupStrings.recordsCleared}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/HelpLink.html":'\x3cspan\x3e\r\n    \x3cspan class\x3d"help-link" title\x3d"${webviewStrings.moreInfo}"\r\n          data-dojo-attach-point\x3d"helpLinkContainer"\r\n          data-dojo-attach-event\x3d"onclick: onClick" \x3e\r\n        \x3cspan data-dojo-attach-point\x3d"labelNode"\x3e${label}:\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"requiredText hidden" data-dojo-attach-point\x3d"requiredNode"\x3e *\x3c/span\x3e\r\n\x3c/span\x3e',"url:webview/widget/form/templates/PopupSelectorWithTags.html":'\x3cdiv class\x3d"tag-selector-container" id\x3d"{id}_formContainer" data-dojo-attach-point\x3d"formContainer"\x3e\r\n    \x3cdiv class\x3d"tag-container" id\x3d"{id}_tagContainer" data-dojo-attach-point\x3d"tagContainer"\x3e\r\n        \x3clabel class\x3d"selected-items" data-dojo-attach-point\x3d"selectedItemsLabel"\x3e${webviewStrings.none}\x3c/label\x3e\r\n        \x3cdiv class\x3d"item-tags hidden" id\x3d"{id}_itemTags" data-dojo-attach-point\x3d"itemTags"\x3e\x3c/div\x3e\r\n        \x3cspan class\x3d"webviewIcon smallAddIcon" style\x3d"display: inline-block" data-dojo-attach-point\x3d"addButton"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"selector-container hidden" id\x3d"{id}_selectorContainer" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/SystemTag.html":'\x3cspan class\x3d"truncated tag ${baseClass}" title\x3d"${title}"\r\n      data-dojo-attach-point\x3d"containerNode"\r\n      data-dojo-attach-event\x3d"onclick:_onClick"\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"nameContainer"\x3e${name}\x3c/span\x3e\r\n    \x3cspan class\x3d"svg-sm-close-icon"\r\n          data-dojo-attach-point\x3d"removeNode"\r\n          data-dojo-attach-event\x3d"onclick:_onClickRemove"\x3e\x3c/span\x3e\r\n\r\n\x3c/span\x3e',
"url:webview/widget/templates/AlarmHistoryFilter.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog"\r\n\tdata-dojo-attach-point\x3d"dialog"\r\n\tdata-dojo-props\x3d"draggable: true"\r\n\tclass\x3d"alarm-history-dialog"\x3e\r\n\t\r\n        \x3cdiv\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"dateSelectNode"\x3e\x3c/div\x3e     \r\n            \x3cspan class\x3d"rcEditEventSelectBox eventStartDate" \r\n                  data-dojo-attach-point\x3d"startDate"\r\n                  data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                  data-dojo-props\x3d"parentClass: \'rcEditEventSelectBox\', constraints: {datePattern : \'dd MMM yyyy\'}"\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan\x3e - \x3c/span\x3e\r\n            \x3cspan class\x3d"rcEditEventSelectBox eventEndDate"\r\n                  data-dojo-attach-point\x3d"endDate"\r\n                  data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                  data-dojo-props\x3d"parentClass: \'rcEditEventSelectBox\', constraints: {datePattern : \'dd MMM yyyy\'}"\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\t\r\n        \x3cdiv class\x3d"config-container"\x3e\r\n            \x3cfieldset\x3e\r\n                \x3clegend\x3e${webviewAlarmStrings.additionalFilters}\x3c/legend\x3e\r\n                \x3cdiv class\x3d"radioButtonContainer"\r\n                     data-dojo-attach-point\x3d"filterTypes"\x3e\r\n                    \r\n                    \x3cinput type\x3d"radio"\r\n                           data-dojo-attach-event\x3d\'onClick: _onChangeAdditional\'\r\n                           data-additional-name\x3d\'states\'\r\n\t\t\t   value\x3d"state"\r\n\t\t\t   data-dojo-attach-point\x3d"stateRadio"\r\n\t\t\t   id\x3d"${id}_title"\r\n\t\t\t   data-dojo-type\x3d\'dijit/form/RadioButton\'\r\n                           checked\r\n                           data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                    \x3clabel for\x3d"radioState" class\x3d"alarm-filter-settings-label"\x3e${rcStrings.state}\x3c/label\x3e   \r\n                    \r\n                    \x3cinput type\x3d"radio"\r\n                           data-dojo-attach-event\x3d\'onClick: _onChangeAdditional\'\r\n                           data-additional-name\x3d"priorities"\r\n                           value\x3d"priority"\r\n                           data-dojo-attach-point\x3d"priorityRadio"\r\n                           id\x3d"${id}_radioPriority"\r\n                           data-dojo-type\x3d\'dijit/form/RadioButton\'\r\n                           data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                    \x3clabel for\x3d"radioPriority" class\x3d"alarm-filter-settings-label"\x3e${webviewStrings.priority}\x3c/label\x3e\r\n                    \r\n                    \x3cinput type\x3d"radio"\r\n                           data-dojo-attach-event\x3d\'onClick: _onChangeAdditional\'\r\n                           data-additional-name\x3d"types"\r\n                           value\x3d"type"\r\n                           data-dojo-attach-point\x3d"typeRadio"\r\n                           id\x3d"${id}_radioType"\r\n                           data-dojo-type\x3d\'dijit/form/RadioButton\'\r\n                           data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                    \x3clabel for\x3d"radioType" class\x3d"alarm-filter-settings-label"\x3e${rcStrings.type}\x3c/label\x3e\r\n                    \r\n\t\t\x3c/div\x3e\r\n\t\t               \r\n\t\t\x3cdiv\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"multiSelect"\r\n\t\t\t class\x3d\'alarm-filter-multiselect\'\r\n\t\t\t data-dojo-type\x3d"webview/widget/MultiSelectBox"\r\n\t\t\t data-dojo-props\x3d"showLabel: false"\x3e\r\n                    \x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d\'alarm-filter-bottom-column\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n            \x3cbutton class\x3d"webviewButton"\r\n                    data-dojo-attach-event\x3d\'onClick: onClickClear\' \r\n                    data-dojo-type\x3d\'dijit/form/Button\' \r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                                     iconClass: "rc24Icon svg-clear-all-filter-icon toolbarButtonIcon"\'\x3e${webviewAlarmStrings.removeFilters}\x3c/button\x3e\r\n            \x3cbutton class\x3d"webviewButton"\r\n                    data-dojo-attach-event\x3d\'onClick: _onClickOK\'\r\n                    data-dojo-type\x3d\'dijit/form/Button\'\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                                     iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e                    \r\n            \x3cbutton class\x3d"webviewButton"\r\n                    data-dojo-attach-event\x3d\'onClick: _onClickCancel\'\r\n                    data-dojo-type\x3d\'dijit/form/Button\'\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                                     iconClass: "rcIcon cancelIcon"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/MultiSelectBox.html":'\x3cdiv class\x3d"multiSelectBoxMain"\x3e\r\n\t\x3cspan class\x3d"multiSelectLabel" data-dojo-attach-point\x3d\'selectBoxLabel\'\x3e\x3c/span\x3e\r\n\t\x3cdiv class\x3d"multiSelectWrapper" data-dojo-attach-point\x3d"multiSelectWrapper"\x3e\r\n\t\t\x3cul class\x3d"multiSelectList" data-dojo-attach-point\x3d"selectionList"\x3e\x3c/ul\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cspan class\x3d"hintLabel" data-dojo-attach-point\x3d"msHintLabel"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_alarm/templates/AlarmHistoryToolbar.html":'\x3cdiv class\x3d"alarm-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \x3cspan class\x3d"system-filter-container" data-dojo-attach-point\x3d"systemFilterContainer"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"filterButton"\r\n              data-dojo-props\x3d\'titleStr: "${rcStrings.filter}",\r\n              iconClass: "rc24Icon svg-filter-icon toolbarButtonIcon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"clearFilterButton"\r\n              data-dojo-props\x3d\'titleStr: "${webviewStrings.clearAllFilters}",\r\n              iconClass: "toolbarButton svg-clear-all-filter-icon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"loadButton"\r\n              data-dojo-props\x3d\'titleStr: "${rcStrings.load}",\r\n              iconClass: "rc24Icon svg-load-from toolbarButtonIcon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"exportButton"\r\n              data-dojo-props\x3d\'titleStr: "${rcStrings.xport}",\r\n              iconClass: "rc24Icon svg-export-icon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n            data-dojo-attach-point\x3d"excelButton"\r\n            data-dojo-props\x3d\'titleStr: "${webviewStrings.exportExcel}",\r\n            iconClass: "toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"toggleColumnsButton"\r\n              data-dojo-props\x3d\'titleStr: "${webviewStrings.toggleColumns}",\r\n              iconClass: "rc24Icon svg-column-toggle-icon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"cleanupButton"\r\n              data-dojo-props\x3d\'titleStr: "${alarmHistoryCleanupStrings.cleanupHistory}",\r\n              iconClass: "toolbarButton svg-cleanup-icon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_annual/templates/Annual.html":'\x3cdiv class\x3d\'rcAnnualSched\'\x3e\r\n    \x3cdiv class\x3d"annual-sched-container" style\x3d"width:100%; height: 100%;"\r\n         data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d\'_container\'\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/widget/ClientToolBar"\r\n             data-dojo-props\x3d\'region: "top"\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d\'_annualSchedPane\'\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"calendarSet"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_auditTrail/templates/AuditTrail.html":'\x3cdiv class\x3d"audit-trail" style\x3d"width:100%; height:100%"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer"\r\n         data-dojo-attach-point\x3d"_container" style\x3d"width:100%; height:100%;"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/reliable/_auditTrail/AuditTrailToolbar"\r\n             data-dojo-props\x3d"region: \'top\', enforceChangeApproval: ${_enforceChangeApproval}"\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"rcAudit-container"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-props\x3d\'region: "center"\'\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_auditTrail/templates/AuditTrailFilterDialog.html":'\x3cdiv class\x3d"dijitDialog audit-trail-filter-dialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_filterForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "filter", action: "", method: "",\r\n             name: "filter", encType: "multipart/form-data"\'\x3e\r\n\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"userLabel"\x3e${rcStrings.auditUser}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"User"\r\n                       data-dojo-attach-point\x3d"userFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "User",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"userExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"userExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel" data-dojo-attach-point\x3d"ipLabel"\x3e${webviewStrings.systemIP}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"IP Address"\r\n                       data-dojo-attach-point\x3d"ipAddressFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "IP Address",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"ipAddressExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"ipAddressExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"pointNameLabel"\x3e${rcStrings.auditPointName}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"Point Name"\r\n                       data-dojo-attach-point\x3d"pointNameFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "Point Name",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"pointNameExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"pointNameExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"actionLabel"\x3e${rcStrings.auditAction}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"Action"\r\n                       data-dojo-attach-point\x3d"actionFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "Action",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"actionExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"actionExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"detailsLabel"\x3e${rcStrings.auditDetails}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"Details"\r\n                       data-dojo-attach-point\x3d"detailsFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "Details",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"detailsExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"detailsExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"reasonLabel"\x3e${rcStrings.reason}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"Reason"\r\n                       data-dojo-attach-point\x3d"reasonFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "Reason",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"reasonExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"reasonExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n            \x3cp\x3e\r\n                \x3clabel class\x3d"leadlabel"\r\n                       data-dojo-attach-point\x3d"reasonLabel"\x3e${webviewStrings.system}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"System"\r\n                       data-dojo-attach-point\x3d"systemFilter"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'name: "System",\r\n                       trim: true\' /\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExact}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exact"\r\n                           data-dojo-attach-point\x3d"systemExactCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exact",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"filterCheckBoxLabel"\x3e${rcStrings.filterExclude}\r\n                    \x3cinput type\x3d"checkbox" name\x3d"exclude"\r\n                           data-dojo-attach-point\x3d"systemExcludeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'value: true,\r\n                           name: "exclude",\r\n                           checked: false\'/\x3e\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n\r\n            \x3cfieldset\x3e\r\n                \x3clegend class\x3d"rangelabel"\x3e${rcStrings.filterDateRange}\x3c/legend\x3e\r\n                \x3cp\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"dateFromLabel"\x3e${rcStrings.filterFrom}\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"dateFrom"\r\n                           data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                           data-dojo-props\x3d\'label: "datefrom"\'/\x3e\r\n\r\n                    \x3clabel data-dojo-attach-point\x3d"dateToLabel"\x3e${rcStrings.filterTo}\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"dateTo"\r\n                           data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                           data-dojo-props\x3d\'label: "dateto"\' /\x3e\r\n                \x3c/p\x3e\r\n            \x3c/fieldset\x3e\r\n            \x3cfieldset\x3e\r\n                \x3clegend class\x3d"rangelabel"\x3e${rcStrings.filterTimeRange}\x3c/legend\x3e\r\n                \x3cp class\x3d"webviewTimeTextBox"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"timeFromLabel"\x3e${rcStrings.filterFrom}\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"timeFrom"\r\n                           data-dojo-type\x3d"webview/widget/TimeTextBox"\r\n                           data-dojo-props\x3d\'label: "timefrom",\r\n                           constraints: {timePattern: "h:mm:ss a"}\'/\x3e\r\n\r\n                    \x3clabel data-dojo-attach-point\x3d"timeToLabel"\x3e${rcStrings.filterTo}\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"timeTo"\r\n                           data-dojo-type\x3d"webview/widget/TimeTextBox"\r\n                           data-dojo-props\x3d\'label: "timeto",\r\n                           constraints: {timePattern: "h:mm:ss a"}\'/\x3e\r\n                \x3c/p\x3e\r\n            \x3c/fieldset\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3c!--OK and Cancel buttons have their labels set by the dijit/ConformDialog --\x3e\r\n        \x3cbutton type\x3d"submit"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d"baseClass: \'withLabel webviewButton\'"\x3eOK\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"clearButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d"label: \'${rcStrings.btnClear}\', baseClass: \'withLabel webviewButton\'"\x3eCLEAR\x3c/button\x3e\r\n\r\n        \x3c!--OK and Cancel buttons have their labels set by the dijit/ConformDialog --\x3e\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\r\n                data-dojo-props\x3d"baseClass: \'withLabel webviewButton\'"\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/TimeTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInlineTable dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\x3e\r\n    \x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\x3e\r\n        \x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26Chi; " type\x3d"text" tabIndex\x3d"-1" readOnly role\x3d"presentation"\t/\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\t\x3e\r\n        \x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off" ${!nameAttrSetting} type\x3d\'${type}\' /\x3e\r\n        \x3cdiv class\x3d"iconWrapper" data-dojo-attach-point\x3d"iconWrapper"\x3e\r\n            \x3cdiv class\x3d"drop-down-icon svg-time"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:webview/reliable/_auditTrail/templates/AuditTrailToolbar.html":'\x3cdiv class\x3d"audit-trail-toolbar"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"toggleColumnsButton"\r\n              data-dojo-props\x3d\'titleStr: "${webviewStrings.toggleColumns}",\r\n              iconClass: "toolbarButtonIcon svg-column-toggle-icon"\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"xportButton"\r\n              data-dojo-props\x3d\'titleStr: "${rcStrings.xport}",\r\n              iconClass: "toolbarButtonIcon svg-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"excelButton"\r\n              data-dojo-props\x3d\'titleStr: "${webviewStrings.exportExcel}",\r\n              iconClass: "toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"clearFilterButton"\r\n              data-dojo-props\x3d\'titleStr: "${webviewStrings.clearAllFilters}",\r\n              iconClass: "toolbarButton svg-clear-all-filter-icon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"filterButton"\r\n              data-dojo-props\x3d\'titleStr: "${rcStrings.filter}",\r\n              iconClass: "toolbarButtonIcon svg-filter-icon"\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseSchedule/templates/EnterpriseSchedule.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"rcEnterprise" style\x3d"width:100%; height:100%;"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_container" data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"noprint rcEnterpriseBorderContainer" style\x3d"width:100%; height:100%;"\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" \r\n             class\x3d"rcEnterpriseCenter"\r\n             data-dojo-props\x3d"region:\'center\'"\r\n             data-dojo-attach-point\x3d"calendarContainer"\x3e\r\n\r\n            \x3cdiv data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/Calendar"\r\n                 data-dojo-attach-point\x3d"calendar"\r\n                 class\x3d"rcEnterpriseCalendar"\x3e\r\n            \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" \r\n             class\x3d"rcEnterpriseRight"\r\n             data-dojo-props\x3d"splitter:true, region:\'right\'"\r\n             data-dojo-attach-point\x3d"rightContent"\x3e\r\n\r\n            \x3c!--Edit Event Pane--\x3e\r\n            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                 data-dojo-attach-point\x3d"editEventPane"\r\n                 class\x3d"rcWidgetHeaderBar topPane event-editor"\r\n                 data-dojo-props\x3d"title: \'editEvent\', iconId: \'editEventIcon\'"\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/EventEditor"\r\n                     data-dojo-attach-point\x3d"eventEditor"\r\n                     data-dojo-props\x3d\'baseClass: "event-editor"\'\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!--manager schedule view--\x3e\r\n            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                 data-dojo-attach-point\x3d"scheduleTreePane"\r\n                 class\x3d"rcWidgetHeaderBar scheduleTree"\r\n                 data-dojo-props\x3d"title: \'scheduleTree\', iconId:\'blockViewIcon\'"\x3e\r\n\r\n                \x3cdiv class\x3d"blockSelectionContainer" data-dojo-attach-point\x3d"blockSelectionContainer"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"blockSelection"\x3e\x3c/span\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"blockManagerButton"\r\n                          data-dojo-type\x3d"dijit/form/Button"\r\n                          data-dojo-props\x3d"baseClass: \'webviewButton circularButton noLabel blocksButton\',\r\n                          iconClass: \'rcIcon blocksIcon\'"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"scheduleTreeContainer" data-dojo-attach-point\x3d"scheduleTreeContainer"\x3e\r\n                    \x3cdiv data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/ScheduleTree"\r\n                         data-dojo-attach-point\x3d"scheduleTree"\r\n                         data-dojo-props\x3d"enterpriseScheduleId: ${pointInstance},\r\n                                            site: ${site}"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"blockTreeContainer" data-dojo-attach-point\x3d"blockTreeView"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/EnterpriseScheduleToolbar"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/BlockTreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"selectorNode" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d\'value: "${item.id}"\'\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"contentNode"\r\n              class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n            \x3cspan class\x3d"iconBorder"\x3e\r\n                \x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n                  tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n         style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseSchedule/widget/templates/BlockManager.html":'\x3cdiv class\x3d"dijitDialog blockManagerDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar blockManager"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"blockManagerContent"\x3e\r\n            \x3cdiv class\x3d"searchContainer" data-dojo-attach-point\x3d"searchContainer"\x3e\r\n                \x3cdiv class\x3d"searchJumpContainer"\x3e\r\n                    \x3cdiv class\x3d"searchBox"\x3e\r\n                        \x3cdiv class\x3d"scheduleSearchJump"\r\n                             data-dojo-attach-point\x3d"scheduleSearchTB"\r\n                             data-dojo-type\x3d"dijit/form/TextBox"\r\n                             data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                             placeHolder: "${webviewStrings.searchForNode}"\'\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cspan class\x3d"scheduleSearchButton"\r\n                              data-dojo-attach-point\x3d"scheduleSearchButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                              iconClass: \'rcIcon searchIcon\'"\x3e\r\n                        \x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"searchNavigation" data-dojo-attach-point\x3d"searchNavigation"\x3e\r\n                        \x3cspan class\x3d"navAction hidden" data-dojo-attach-point\x3d"navPrev"\x3e\x26lt; ${rcStrings.tbPrevious}\x3c/span\x3e\r\n                        \x3cspan class\x3d"navAction hidden" data-dojo-attach-point\x3d"navNext"\x3e${rcStrings.tbNext} \x26gt;\x3c/span\x3e\r\n                        \x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"noResults"\x3e${webviewStrings.noResultsFound}\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"blockSelectorContainer"\x3e\r\n                    \x3cdiv class\x3d"blocksSelection" data-dojo-attach-point\x3d"blockSelector"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"mainContentContainer" data-dojo-attach-point\x3d"mainContentPane"\x3e\r\n                \x3cdiv class\x3d"scheduleContainerScrollable" data-dojo-attach-point\x3d"scrollContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"scheduleSelectionPane"\r\n                         data-dojo-type\x3d"dijit/layout/ContentPane"\r\n                         class\x3d"webviewAdminSites"\x3e\r\n                        \r\n                            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                                 data-dojo-attach-point\x3d"blockSelectionContainer"\r\n                                 class\x3d"rcManagerHeaderBar topPane block-selection"\r\n                                 data-dojo-props\x3d\'title: "${webviewStrings.blocks}",\r\n                                 iconId: "rc24Icon blockIcon"\'\x3e\r\n\r\n                                \x3cdiv class\x3d"blockManagerScheduleSelection" data-dojo-attach-point\x3d"blockTreeContainer"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n\r\n                            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                                 data-dojo-attach-point\x3d"scheduleSelectionContainer"\r\n                                 class\x3d"rcManagerHeaderBar childFilter schedule-selection"\r\n                                 data-dojo-props\x3d\'title: "${webviewStrings.schedules}", iconId: "rc24Icon scheduleIcon"\'\x3e\r\n\r\n                                \x3cdiv class\x3d"blockManagerScheduleSelection" data-dojo-attach-point\x3d"scheduleTreeContainer"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"blockManagerPreviewContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"blockPreviewPane"\r\n                         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n                         class\x3d"webviewAdminSites"\x3e\r\n                        \x3cdiv class\x3d"blockManagerPreview" data-dojo-attach-point\x3d"previewPane"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/BlockManagerConfirmContent.html":'\x3cdiv class\x3d"confirmDialogContentArea" data-dojo-attach-point\x3d"updateDialogContent"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"topArea"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"topTextContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cul data-dojo-attach-point\x3d"topSchedules"\x3e\r\n\t\t\t\x3c!--Dynamically populated--\x3e\r\n\t\t\x3c/ul\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"hidden"\r\n         data-dojo-attach-point\x3d"costWarning"\x3e\r\n        \x3cp\x3e\r\n            ${enterpriseScheduleStrings.additionalCosts}\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"bottomArea"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"bottomTextContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cul data-dojo-attach-point\x3d"bottomSchedules"\x3e\r\n\t\t\t\x3c!--Dynamically populated--\x3e\r\n\t\t\x3c/ul\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseSchedule/widget/templates/_TreeCheckBoxNode.html":'\x3cdiv class\x3d"block-checkbox clickable" data-dojo-attach-event\x3d"onclick: _onClick"\x3e\r\n    \x3cinput data-dojo-attach-point\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\r\n    \x3clabel class\x3d"clickable block-checkbox-label" data-dojo-attach-point\x3d"label"\x3e\x3c/label\x3e\r\n\x3c/div\x3e',"url:webview/reliable/_enterpriseSchedule/overriddenViews/templates/HorizontalRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarHorizontal" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"bg" data-dojo-attach-point\x3d"bgNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv style\x3d"position:absolute;left:2px;bottom:2px" data-dojo-attach-point\x3d"beforeIcon" class\x3d"beforeIcon"\x3e\u25c4\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"labelContainer" class\x3d"labels"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/span\x3e\r\n\t\t\x3c!-- RC-CHANGE: Moved end time above summary --\x3e\r\n\t\t\x3c!--\x3cspan data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/span\x3e--\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"sourceLabel"\tclass\x3d"source"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"costLabel" class\x3d"cost-label hidden"\x3eTest\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\t\x3cdiv style\x3d"position:absolute;right:2px;bottom:2px" data-dojo-attach-point\x3d"afterIcon" class\x3d"afterIcon"\x3e\u25ba\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeStartHandle" class\x3d"handle resizeStartHandle"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeEndHandle" class\x3d"handle resizeEndHandle" \x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/HorizontalRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarHorizontal" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"bg" \x3e\x3c/div\x3e\r\n\t\x3cdiv style\x3d"position:absolute;left:2px;bottom:2px" data-dojo-attach-point\x3d"beforeIcon" class\x3d"beforeIcon"\x3e\x26#x25C0;\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"labelContainer" class\x3d"labels"\x3e\t\t\r\n\t\t\x3cspan data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/span\x3e\r\n\t\t\x3cspan  data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv style\x3d"position:absolute;right:2px;bottom:2px" data-dojo-attach-point\x3d"afterIcon" class\x3d"afterIcon"\x3e\x26#x25B6;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeStartHandle" class\x3d"handle resizeStartHandle"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeEndHandle" class\x3d"handle resizeEndHandle" \x3e\x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/overriddenViews/templates/LabelRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarLabel" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"labels"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/span\x3e\r\n\t\t\x3c!-- RC-CHANGE: Moved end time above summary --\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"sourceLabel" class\x3d"source"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"costLabel" class\x3d"cost-label hidden"\x3eTest\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/LabelRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarLabel" onselectstart\x3d"return false;"\x3e\t\r\n\t\x3cdiv class\x3d"labels"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/MatrixView.html":'\x3cdiv data-dojo-attach-events\x3d"keydown:_onKeyDown"\x3e\r\n\t\x3cdiv  class\x3d"dojoxCalendarYearColumnHeader" data-dojo-attach-point\x3d"yearColumnHeader"\x3e\r\n\t\t\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan data-dojo-attach-point\x3d"yearColumnHeaderContent"\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\t\t\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"columnHeader" class\x3d"dojoxCalendarColumnHeader"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"columnHeaderTable" class\x3d"dojoxCalendarColumnHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\t\r\n\t\x3cdiv dojoAttachPoint\x3d"rowHeader" class\x3d"dojoxCalendarRowHeader"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"rowHeaderTable" class\x3d"dojoxCalendarRowHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv dojoAttachPoint\x3d"grid" class\x3d"dojoxCalendarGrid"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"gridTable" class\x3d"dojoxCalendarGridTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"itemContainer" class\x3d"dojoxCalendarContainer" data-dojo-attach-event\x3d"mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"itemContainerTable" class\x3d"dojoxCalendarContainerTable" cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/overriddenViews/templates/VerticalRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarVertical" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"bg" data-dojo-attach-point\x3d"bgNode"\x3e\x3c/div\x3e\r\n\t\x3cdl style\x3d"width:100%;"\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"beforeIcon" class\x3d"beforeIcon"\x3e\u25b2\x3c/dd\x3e\r\n\t\t\x3c!--RC-CHANGE: Putting endtime before summary --\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/dd\x3e\r\n\t\t\x3c!--\x3cdd data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/dd\x3e--\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/dd\x3e\r\n        \x3cdd data-dojo-attach-point\x3d"sourceLabel" class\x3d"source"\x3e\x3c/dd\x3e\r\n        \x3cdd data-dojo-attach-point\x3d"costLabel" class\x3d"cost-label hidden"\x3eTest\x3c/dd\x3e\r\n    \x3c/dl\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"afterIcon" class\x3d"afterIcon"\x3e\u25bc\x3c/span\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeStartHandle" class\x3d"handle resizeStartHandle"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeEndHandle" class\x3d"handle resizeEndHandle" \x3e\x3c/div\x3e\r\n\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/div\x3e--\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/VerticalRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarVertical" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"bg"\x3e\x3c/div\x3e\r\n\t\x3cdl style\x3d"width:100%;"\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"beforeIcon" class\x3d"beforeIcon"\x3e\x26#x25B2;\x3c/dd\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/dd\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/dd\x3e\r\n\t\x3c/dl\x3e\t\r\n\t\x3cspan data-dojo-attach-point\x3d"afterIcon" class\x3d"afterIcon"\x3e\x26#x25BC;\x3c/span\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeStartHandle" class\x3d"handle resizeStartHandle"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeEndHandle" class\x3d"handle resizeEndHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/templates/calendar.html":'\x3cdiv\x3e\t\t\r\n    \x3cdiv data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/widget/CalendarToolbar" data-dojo-attach-point\x3d"calendarToolbar" \x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"viewContainer" class\x3d"viewContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Menu" data-dojo-attach-point\x3d"contextMenu" style\x3d"display: none;"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-point\x3d"contextMenuDelete" data-dojo-props\x3d"iconClass:\'dijitIcon dijitIconDelete\'"\x3eDelete\x3c/div\x3e\r\n    \x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/ColumnView.html":'\x3cdiv data-dojo-attach-events\x3d"keydown:_onKeyDown"\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"header" class\x3d"dojoxCalendarHeader"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxCalendarYearColumnHeader" data-dojo-attach-point\x3d"yearColumnHeader"\x3e\r\n\t\t\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan data-dojo-attach-point\x3d"yearColumnHeaderContent"\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\t\t\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"columnHeader" class\x3d"dojoxCalendarColumnHeader"\x3e\r\n\t\t\t\x3ctable data-dojo-attach-point\x3d"columnHeaderTable" class\x3d"dojoxCalendarColumnHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"secondarySheetNode"\x3e\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"subHeader" class\x3d"dojoxCalendarSubHeader"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxCalendarSubRowHeader"\x3e\r\n\t\t\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0"\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\t\t\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"subColumnHeader" class\x3d"dojoxCalendarSubColumnHeader"\x3e\r\n\t\t\t\x3ctable data-dojo-attach-point\x3d"subColumnHeaderTable" class\x3d"dojoxCalendarSubColumnHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"scrollContainer" class\x3d"dojoxCalendarScrollContainer"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"sheetContainer" style\x3d"position:relative;left:0;right:0;margin:0;padding:0"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"rowHeader" class\x3d"dojoxCalendarRowHeader"\x3e\r\n\t\t\t\t\x3ctable data-dojo-attach-point\x3d"rowHeaderTable" class\x3d"dojoxCalendarRowHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"grid" class\x3d"dojoxCalendarGrid"\x3e\r\n\t\t\t\t\x3ctable data-dojo-attach-point\x3d"gridTable" class\x3d"dojoxCalendarGridTable" cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%"\x3e\x3c/table\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"itemContainer" class\x3d"dojoxCalendarContainer" data-dojo-attach-event\x3d"mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd"\x3e\r\n\t\t\t\t\x3ctable data-dojo-attach-point\x3d"itemContainerTable" class\x3d"dojoxCalendarContainerTable" cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%"\x3e\x3c/table\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e \r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"vScrollBar" class\x3d"dojoxCalendarVScrollBar"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"vScrollBarContent" style\x3d"visibility:hidden;position:relative;width:1px;height:1px;" \x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"hScrollBar" class\x3d"dojoxCalendarHScrollBar"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hScrollBarContent" style\x3d"visibility:hidden;position:relative;width:1px;height:1px;" \x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/ColumnViewSecondarySheet.html":'\x3cdiv data-dojo-attach-events\x3d"keydown:_onKeyDown"\x3e\r\n\t\x3cdiv  data-dojo-attach-point\x3d"rowHeader" class\x3d"dojoxCalendarRowHeader"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"rowHeaderTable" class\x3d"dojoxCalendarRowHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"grid" class\x3d"dojoxCalendarGrid"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"gridTable" class\x3d"dojoxCalendarGridTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"itemContainer" class\x3d"dojoxCalendarContainer" data-dojo-attach-event\x3d"mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"itemContainerTable" class\x3d"dojoxCalendarContainerTable" cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/ExpandRenderer.html":'\x3cdiv class\x3d"dojoxCalendarExpand" onselectstart\x3d"return false;" data-dojo-attach-event\x3d"click:_onClick,touchstart:_onMouseDown,touchend:_onClick,mousedown:_onMouseDown,mouseup:_onMouseUp,mouseover:_onMouseOver,mouseout:_onMouseOut"\x3e\r\n\t\x3cdiv class\x3d"bg"\x3e\x3cspan data-dojo-attach-point\x3d"expand"\x3e\u25bc\x3c/span\x3e\x3cspan style\x3d"display:none" data-dojo-attach-point\x3d"collapse"\x3e\u25b2\x3c/span\x3e\x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/Calendar.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"buttonContainer" class\x3d"buttonContainer"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"toolbar" data-dojo-type\x3d"dijit.Toolbar" \x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"previousButton" data-dojo-type\x3d"dijit.form.Button" \x3e\x26#x25C0;\x3c/button\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"nextButton" data-dojo-type\x3d"dijit.form.Button" \x3e\x26#x25B6;\x3c/button\x3e\r\n\t\t\t\x3cspan data-dojo-type\x3d"dijit.ToolbarSeparator"\x3e\x3c/span\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"todayButton" data-dojo-type\x3d"dijit.form.Button" \x3eToday\x3c/button\x3e\r\n\t\t\t\x3cspan data-dojo-type\x3d"dijit.ToolbarSeparator"\x3e\x3c/span\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"dayButton" data-dojo-type\x3d"dijit.form.Button" \x3eDay\x3c/button\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"fourDaysButton" data-dojo-type\x3d"dijit.form.Button" \x3e4 Days\x3c/button\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"weekButton" data-dojo-type\x3d"dijit.form.Button" \x3eWeek\x3c/button\x3e\t\t\t\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"monthButton" data-dojo-type\x3d"dijit.form.Button" \x3eMonth\x3c/button\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"viewContainer" class\x3d"viewContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/CalendarToolbar.html":'\x3cdiv data-dojo-attach-point\x3d"_container" class\x3d"enterprise-calendar-toolbar"\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/DateRangeNavigator"\r\n          data-dojo-attach-point\x3d"dateRangeNavigator"\x3e\x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"rcCalendarViewLabelContainer"\r\n          data-dojo-attach-point\x3d"labelContainer"\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"rcCalendarViewButtonContainer"\r\n          data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"todayButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'label: "${webviewStrings.rcbToday}", baseClass: "webviewButton noIcon"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"dayButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'label: "${webviewStrings.rcbDay}",baseClass: "webviewButton noIcon"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"weekButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'label: "${webviewStrings.rcbWeek}", baseClass: "webviewButton noIcon"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"monthButtonContainer"\r\n              class\x3d"monthButtonContainer"\x3e\r\n            \x3cspan class\x3d"monthButton"\r\n                  data-dojo-attach-point\x3d"monthButton"\r\n                  data-dojo-type\x3d"dijit/form/Button"\r\n                  data-dojo-props\x3d\'label: "${webviewStrings.rcbMonth}", baseClass: "webviewButton noIcon"\'\x3e\r\n            \x3c/span\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"editButton"\r\n              data-dojo-type\x3d"dijit/form/Button" \r\n              data-dojo-props\x3d"baseClass: \'webviewButton editEsSummaryButton\',\r\n              iconClass: \'rcIcon editEsSummaryIcon\', \r\n              label: \'${webviewStrings.rcbEdit}\'"\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"summaryButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton updateEsSummaryButton\',\r\n              iconClass: \'rcIcon updateEsSummaryIcon\',\r\n              label: \'${webviewStrings.rcbSummary}\'"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/DateRangeNavigator.html":'\x3cspan class\x3d"rcCalendarNavButtonContainer dateRangeNavigator"\x3e\r\n\t\r\n\t\x3cspan class\x3d"previousButton"\r\n\t\t  data-dojo-attach-point\x3d"previousButton" \r\n\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t  data-dojo-props\x3d"iconClass: \'rcPreviousIcon\', baseClass: \'webviewButton circularButton noLabel\'"\x3e\x3c/span\x3e\r\n\t\t\t\t\r\n\t\x3cspan class\x3d"rcCalendarViewDateLabel emmulateLink" \r\n\t\t  data-dojo-attach-point\x3d"viewDateLabel"\x3e\x3c/span\x3e\r\n\t\t\t\t\r\n\t\x3cspan class\x3d"nextButton"\r\n\t\t  data-dojo-attach-point\x3d"nextButton"\r\n\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t  data-dojo-props\x3d"iconClass: \'rcNextIcon\', baseClass: \'webviewButton circularButton noLabel\'"\x3e\x3c/span\x3e\r\n\t\r\n\x3c/span\x3e\r\n',
"url:webview/widget/templates/Calendar.html":'\x3cdiv class\x3d"webviewPopupCalendarContainer"\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"dijitCalendarContainer webviewCalendarPopup" role\x3d"grid" aria-labelledby\x3d"${id}_mddb ${id}_year" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\r\n\r\n\t\t\t\t\x3c!--Previous Month Button --\x3e\r\n\t\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow webviewPreviousMonth\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\t\t\x3c/th\x3e\r\n\r\n\t\t\t\t\x3c!--Month Drop Down Button --\x3e\r\n\t\t\t\t\x3cth class\x3d\'dijitReset\' colspan\x3d"5"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode"\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/th\x3e\r\n\r\n\t\t\t\t\x3c!--Next Month Button --\x3e\r\n\t\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow webviewNextMonth\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\t\t\x3c/th\x3e\r\n\r\n\t\t\t\x3c/tr\x3e\r\n\r\n\t\t\t\x3c!--Where the day letters go --\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"onclick: _onDayClick" class\x3d"dijitReset webviewCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\r\n\t\t\x3c!-- Today Button --\x3e\r\n\t\t\x3ctfoot class\x3d"dijitReset webviewCalendarTodayButtonContainer"\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d\'dijitReset webviewToday\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\t\t\t\x3cspan class\x3d"bottomButtonHolder"\r\n\t\t\t\t\t\t\tdata-dojo-attach-point\x3d"todayButtonContainer"\r\n\t\t\t\t\t\t\tdata-dojo-attach-event\x3d"onclick: goToToday"\x3e\r\n\r\n                            \x3cspan class\x3d"today-link linkable"\r\n                                  data-dojo-attach-point\x3d"todayButton"\x3e${rcStrings.rtrToday}\r\n                            \x3c/span\x3e\r\n\r\n\t\t\t\t\t\t\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d\'dijitReset webviewYear\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\x3c!-- Today Button will go here --\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tfoot\x3e\r\n\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseSchedule/templates/EnterpriseScheduleToolbar.html":'\x3cdiv class\x3d"enterprise-schedule-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"editValuesButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.edit}",\r\n              iconClass: "toolbarButtonIcon svg-edit-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n        \r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"ahacButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.afterHoursReport}",\r\n              iconClass: "toolbarButtonIcon svg-after-hours",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.btnCancel}",\r\n              iconClass: "toolbarButtonIcon svg-cancel-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n        \r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.save}",\r\n              iconClass: "toolbarButtonIcon svg-save-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/templates/EventEditor.html":'\x3cdiv class\x3d"rcWidgetContainer rcEnterpriseEvent" \x3e\r\n\r\n\t\x3c!-- If event is not editable, put reason here for user --\x3e\r\n\t\x3cdiv class\x3d"editEventItem nonEditReasonText" data-dojo-attach-point\x3d"reasonContainer"\x3e\r\n\t\t\x3cspan class\x3d"warningIcon eventWarning" data-dojo-attach-point\x3d"warningIcon"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"nonEditReason" data-dojo-attach-point\x3d"nonEditReason"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3c!-- If current user has privileges to modify default type selection shows here--\x3e\r\n\t\x3cdiv class\x3d"editEventItem" data-dojo-attach-point\x3d"eventTypeContainer"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"eventTypeLabel"\x3e${webviewStrings.eventType}:\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"eventType"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n\t\x3c!--  Area where user enters a title for the event --\x3e\r\n    \x3cdiv class\x3d"editEventItem" data-dojo-attach-point\x3d"summaryContainer"\x3e\r\n        \x3cspan class\x3d"propertyTitle"\x3e${webviewStrings.title}:\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cinput type\x3d"text" class\x3d"rcTextBox"\r\n           data-dojo-attach-point\x3d"summary"\r\n           data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"baseClass: \'rcTextBox eventEditSummary\',\r\n           maxLength: 49" /\x3e\x3c!-- Set max-length to 1 less than DB limit to accommodate # symbol --\x3e\r\n\r\n\t\x3c!-- Area where user selects how often even repeats --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"repeatArea" class\x3d"editEventItem"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"repeatSelection" data-dojo-type\x3d"webview/widget/RepeatSelector"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\t\x3c!-- Area where users select the priority --\x3e\r\n    \x3cdiv class\x3d"editEventItem" data-dojo-attach-point\x3d"priorityContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3c!-- Area where user selects whether building will be occupied of not --\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"valueInput" data-dojo-type\x3d"webview/widget/ValueInput"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Area where user selects whether building will be occupied of not --\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3clabel class\x3d"reason-label"\r\n               data-dojo-attach-point\x3d"reasonLabel"\x3e${rcStrings.reason}:\x3c/label\x3e\r\n        \x3ctextarea class\x3d"rcTextArea"\r\n                  data-dojo-attach-point\x3d"reasonInput"\r\n                  data-dojo-type\x3d"dijit/form/Textarea"\x3e\x3c/textarea\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Area for user to select which blocks this even applies to --\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cspan class\x3d"propertyTitle" data-dojo-attach-point\x3d"appliesLabel"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3ca href\x3d\'#\' class\x3d"editEventItem  scheduleTreeLink" data-dojo-attach-point\x3d"scheduleTreeLink" data-dojo-attach-event\x3d"onclick: _onClickTreeLink"\x3e\x3c/a\x3e\r\n\r\n    \x3cdiv class\x3d"rate-container" data-dojo-attach-point\x3d"rateContainer"\x3e\r\n        \x3cspan class\x3d"propertyTitle"\x3e${afterHoursStrings.rate}:\x3c/span\x3e\r\n        \x3cdiv class\x3d"event-cost"\x3e\r\n            \x3cspan class\x3d"total-rate" data-dojo-attach-point\x3d"totalRate"\x3e\x3c/span\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"totalCost"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"exclude-container hidden" data-dojo-attach-point\x3d"excludeEventContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3c!-- Area to either save/update event or delete/cancel event --\x3e\r\n\t\x3c!--Labels are hard coded as a backup, programmatically set in EventEditor.js --\x3e\r\n    \x3cspan class\x3d"bottomButtonHolder"\r\n          data-dojo-attach-point\x3d"saveButtonContainer"\r\n          data-click-params\x3d"false"\r\n          data-dojo-attach-event\x3d"onclick: _onUpdate"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"iconClass: \'rcUpdateIcon\', label: \'${webviewStrings.rcbUpdate}\', baseClass: \'withLabel webviewButton\'"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-attach-event\x3d"onclick: _onUpdate"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"bottomButtonHolder"\r\n          data-dojo-attach-point\x3d"createButtonContainer"\r\n          data-dojo-attach-event\x3d"onclick: _onCreate"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"iconClass: \'rcCreateIcon\', label: \'${webviewStrings.rcbCreate}\', baseClass: \'withLabel webviewButton createEventDirty\'"\r\n              data-dojo-attach-point\x3d"createButton"\r\n\t\t\t  data-dojo-attach-event\x3d"onclick: _onCreate"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"bottomButtonHolder"\r\n          data-dojo-attach-point\x3d"deleteButtonContainer"\r\n          data-dojo-attach-event\x3d"onclick: _onDelete"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-attach-point\x3d"deleteButton"\r\n              data-dojo-attach-event\x3d"onclick: _onDelete"\r\n              data-dojo-props\x3d"iconClass: \'rcDeleteIcon\',\r\n              label: \'${webviewStrings.rcbDelete}\', baseClass: \'withLabel webviewButton\'"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"bottomButtonHolder"\r\n          data-dojo-attach-point\x3d"cancelButtonContainer"\r\n\t\t  data-dojo-attach-event\x3d"onclick: _onCancel"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"iconClass: \'rcCancelIcon\', label: \'${webviewStrings.rcbCancel}\', baseClass: \'withLabel webviewButton\'"\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t  data-dojo-attach-event\x3d"onclick: _onCancel"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/AppliesToManager.html":'\x3cdiv class\x3d"dijitDialog blockManagerDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"blockManagerContent"\x3e\r\n            \x3cdiv class\x3d"searchContainer" data-dojo-attach-point\x3d"searchContainer"\x3e\r\n                \x3cdiv class\x3d"searchJumpContainer"\x3e\r\n                    \x3cdiv class\x3d"searchBox"\x3e\r\n                        \x3cdiv class\x3d"scheduleSearchJump"\r\n                             data-dojo-attach-point\x3d"scheduleSearchTB"\r\n                             data-dojo-type\x3d"dijit/form/TextBox"\r\n                             data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                             placeHolder: "Search For Node"\'\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cspan class\x3d"scheduleSearchButton"\r\n                              data-dojo-attach-point\x3d"scheduleSearchButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                              iconClass: \'rcIcon searchIcon\'"\x3e\r\n                        \x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"searchNavigation" data-dojo-attach-point\x3d"searchNavigation"\x3e\r\n                        \x3cspan class\x3d"navAction hidden" data-dojo-attach-point\x3d"navPrev"\x3e\x26lt; ${rcStrings.tbPrevious}\x3c/span\x3e\r\n                        \x3cspan class\x3d"navAction hidden" data-dojo-attach-point\x3d"navNext"\x3e${rcStrings.tbNext} \x26gt;\x3c/span\x3e\r\n                        \x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"noResults"\x3e${webviewStrings.noResultsFound}\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"mainContentPane"\x3e\r\n                \x3cdiv class\x3d"scheduleContainerScrollable" data-dojo-attach-point\x3d"scrollContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"scheduleSelectionPane"\r\n                         data-dojo-type\x3d"dijit/layout/ContentPane"\r\n                         class\x3d"webviewAdminSites"\x3e\r\n                        \r\n                            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                                 data-dojo-attach-point\x3d"blockSelectionContainer"\r\n                                 class\x3d"rcManagerHeaderBar topPane block-selection"\r\n                                 data-dojo-props\x3d\'title: "${webviewStrings.blocks}",\r\n                                 iconId: "rc24Icon blockIcon"\'\x3e\r\n\r\n                                \x3cdiv class\x3d"blockManagerScheduleSelection" data-dojo-attach-point\x3d"blockTreeContainer"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n\r\n                            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                                 data-dojo-attach-point\x3d"scheduleSelectionContainer"\r\n                                 class\x3d"rcManagerHeaderBar childFilter schedule-selection"\r\n                                 data-dojo-props\x3d\'title: "${webviewStrings.schedules}", iconId: "rc24Icon scheduleIcon"\'\x3e\r\n\r\n                                \x3cdiv class\x3d"blockManagerScheduleSelection" data-dojo-attach-point\x3d"scheduleTreeContainer"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"blockManagerPreviewContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"blockPreviewPane"\r\n                         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n                         class\x3d"webviewAdminSites"\x3e\r\n                        \x3cdiv class\x3d"blockManagerPreview" data-dojo-attach-point\x3d"previewPane"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/RepeatSelector.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"repeatOptions"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"repeatSelectionArea" class\x3d"editEventItem repeatSelection"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d\'frequencyContainer\' class\x3d"editEventItem"\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"repeatLabel"\x3e${webviewStrings.repeat}:\x26nbsp;\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"frequencySelection"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"daySelectionNode" class\x3d"editEventItem"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3clabel data-dojo-attach-point\x3d"terminatingDate"\x3e\r\n            \x3cinput class\x3d"terminatingDateCB" \r\n                   data-dojo-attach-point\x3d"terminatingDateCB" \r\n                   data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\r\n            ${webviewStrings.terminates}\r\n        \x3c/label\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Area for selecting start/end date--\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"fromLabel" class\x3d"propertyTitle dateSelectionStart"\x3e${webviewStrings.fromLabel}:\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"toLabel" class\x3d"propertyTitle dateSelectionEnd"\x3e${webviewStrings.toLabel}:\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3c!-- eventStartDate class is added to facilitate automated UI testing--\x3e\r\n        \x3cspan class\x3d"rcEditEventSelectBox eventStartDate" \r\n              data-dojo-attach-point\x3d"startDate"\r\n              data-dojo-type\x3d"rc/widget/DateTextBox"\r\n              data-dojo-props\x3d"parentClass: \'rcEditEventSelectBox\'"\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3c!-- eventEndDate class is added to facilitate automated UI testing--\x3e\r\n        \x3cspan class\x3d"rcEditEventSelectBox eventEndDate"\r\n              data-dojo-attach-point\x3d"endDate"\r\n              data-dojo-type\x3d"rc/widget/DateTextBox"\r\n              data-dojo-props\x3d"parentClass: \'rcEditEventSelectBox\'"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Area for select start/end time --\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"startLabel" class\x3d"propertyTitle dateSelectionStart"\x3e${webviewStrings.startLabel}:\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"endLabel" class\x3d"propertyTitle dateSelectionEnd"\x3e${webviewStrings.endLabel}:\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"startTime"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox timeTextBox\', invalidMessage: \'${errorStrings.invalidTimeFormat}\'" /\x3e\r\n\r\n        \x3cinput data-dojo-attach-point\x3d"endTime"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox timeTextBox\', invalidMessage: \'${errorStrings.invalidTimeFormat}\'" /\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/IncrementOptionsDialog.html":'\x3cdiv class\x3d"warningDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon hidden" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeText" title\x3d"${buttonCancel}"\x3e\x26times;\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"increment-options-content"\x3e\r\n            \x3cdiv class\x3d"rcAlertIcon rcWarningIcon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"warningDialogText" data-dojo-attach-point\x3d"timeValueIncrements"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"warningDialogContent"\x3e\r\n                \x3cbr data-dojo-attach-point\x3d"breakBetweenTextandContent"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"lowTimeFullContainer"\x3e\r\n                    ${enterpriseStrings.changeTimeRangeTo}\x26nbsp;\x3cspan class\x3d"linkable dark" data-dojo-attach-point\x3d"lowTimeOptionContainer"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"highTimeFullContainer"\x3e\r\n                    ${enterpriseStrings.changeTimeRangeTo}\x26nbsp;\x3cspan class\x3d"linkable dark" data-dojo-attach-point\x3d"highTimeOptionContainer"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/ValueInput.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"hidden"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"valueType"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"valueInputItem"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"startLabel"\x3e${webviewStrings.value}:\x3c/span\x3e\r\n\r\n        \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"filteringInputContainer"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"valueFilteringInput"\r\n                  data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                  data-dojo-props\x3d\'baseClass: "rcSelectBox webviewDropDown valueSelector",\r\n                  autocomplete: false\'\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"analogInputContainer"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"analogTBInput"\r\n                  data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                  data-dojo-props\x3d"baseClass: \'rcTextBox analogValueInput\'"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/templates/ScheduleTree.html":'\x3cdiv class\x3d"scheduleTreeRoot scheduleTreeList"\r\n     data-dojo-attach-points\x3d"listContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"treeContainer"\x3e\x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',"url:webview/reliable/_afterHours/templates/TenantReport.html":'\x3cdiv class\x3d"after-hours tenant-report" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"_container" class\x3d"rcRuntimeLogBorderContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/widget/ClientToolBar"\r\n             data-dojo-props\x3d"region: \'top\'"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"tenant-report-container"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d"region: \'center\'"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"reportHeader"\x3e\r\n                \x3cdiv class\x3d"logo-location-container" data-dojo-attach-point\x3d"logoLocationContainer"\x3e\r\n                    \x3cimg class\x3d"logo-image hidden"\r\n                         src\x3d""\r\n                         alt\x3d"Company Logo"\r\n                         data-dojo-attach-point\x3d"logo" /\x3e\r\n                    \x3cdiv class\x3d"report-location-container hidden" data-dojo-attach-point\x3d"locationContainer"\x3e\r\n                        \x3cdiv class\x3d"rc24Icon locationIcon"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"report-location" data-dojo-attach-point\x3d"location"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"report-description" data-dojo-attach-point\x3d"reportDescription"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"report-period" data-dojo-attach-point\x3d"reportPeriodContainer"\x3e\r\n                    ${afterHoursStrings.servicePeriod}: \x3cspan class\x3d"report-dates linkable" data-dojo-attach-point\x3d"reportDates"\x3e\x3c/span\x3e\r\n                    \x3clabel class\x3d"future-events-label"\r\n                           data-dojo-attach-point\x3d"showFutureContainer"\x3e\r\n                        \x3cinput type\x3d"checkbox"\r\n                               data-dojo-attach-point\x3d"showFutureCB"\r\n                               data-dojo-type\x3d"dijit/form/CheckBox"\r\n                               data-dojo-props\x3d\'checked: false\' /\x3e${afterHoursStrings.showFutureEvents}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printableGridContainer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"gridContainer" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_group/templates/Group.html":'\x3cdiv style\x3d"width:100%;height:100%"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer"  data-dojo-attach-point\x3d"_container"  style\x3d"width:100%;height:100%"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" region\x3d"center"\x3e\r\n            \x3cdiv data-dojo-type\x3d"webview/reliable/_group/Stage" data-dojo-attach-point\x3d"stg"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_navGroup/templates/NavGroup.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"rcNavGroup navigation-group"style\x3d"width:100%; height: 100%;"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"_container" data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"noprint" style\x3d"width:100%; height:100%;"\x3e\r\n\t\t\x3cdiv class\x3d"client-navigation-group-content" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"navGroupContentPane" data-dojo-props\x3d"region:\'center\'"\x3e\r\n            \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"buttonBar"\r\n                data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"webview/admin/navGroups/NavGroupToolbar"\r\n                    data-dojo-attach-point\x3d"navGroupToolbar"\r\n                    data-dojo-props\x3d"site: ${site}"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"groupBuilder"\r\n                data-dojo-type\x3d"webview/features/navigationGroups/groupBuilding/GroupBuilder"\r\n                data-dojo-props\x3d"groupId: ${pointInstance},\r\n                    site: ${site}"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/groupBuilding/templates/GroupBuilder.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n     class\x3d"navigation-group-builder"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"resultsWidget"\r\n         class\x3d"hidden results-container"\r\n         data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n         data-dojo-props\x3d\'baseClass: "point-report-tree-results",\r\n            paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"builderContainer"\r\n         class\x3d"group-container"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"groupRenderer"\r\n             class\x3d"navigation-group-renderer"\r\n             data-dojo-type\x3d"webview/features/navigationGroups/groupRendering/GroupRenderer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/KeywordSelector.html":'\x3cdiv class\x3d"keywords-selector ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"tree-node-container-bg"\x3e\r\n        \x3cdiv class\x3d"tree-node-container"\r\n             data-dojo-attach-point\x3d"searchedTreeNodeContainer"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"keywords-header"\r\n         data-dojo-attach-point\x3d"keywordsHeader"\x3e\r\n        \x3cspan class\x3d"keywords-title"\r\n              data-dojo-attach-point\x3d"keywordsTitle"\x3e${webviewStrings.keyword}\x3c/span\x3e\r\n        \x3cspan class\x3d"linkable webviewIcon close-icon"\r\n              data-dojo-attach-point\x3d"closeButton"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container-body"\r\n         data-dojo-attach-point\x3d"contentPaneBody"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"contents"\r\n             class\x3d"keywords-contents"\x3e\r\n            \x3cdiv class\x3d"keywords-display-container"\r\n                 data-dojo-attach-point\x3d"keywordsContainer"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/dialogs/editAnimationContent/templates/EditAnimationContent.html":'\x3cdiv class\x3d"animation-configuration-content expando-pane-content"\x3e\r\n    \x3cdiv class\x3d"content-title-bar" data-dojo-attach-point\x3d"titleBar" \x3e\r\n        \x3cbutton class\x3d"content-close-icon" data-dojo-attach-point\x3d"closeButtonNode"\r\n            data-dojo-attach-event\x3d"ondijitclick: _onClose"\r\n            title\x3d"${rcStrings.close}"\r\n            role\x3d"button"\r\n            tabindex\x3d"0"\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"content-title" data-dojo-attach-point\x3d"titleNode"\r\n            id\x3d"${id}_title"\r\n            role\x3d"heading"\x3e${navigationGroupsStrings.animations.editAnimation}\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"loading-overlay hidden"\r\n            data-dojo-attach-point\x3d"loadingOverlay"\x3e\r\n        \x3cdiv class\x3d"loading-animation"\r\n                data-dojo-attach-point\x3d"loadingAnimation"\x3e\r\n            \x3cdiv class\x3d"cog-main"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"cog-top"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"cog-bot"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/TabContainer" data-dojo-attach-point\x3d"editPaneTabs"\r\n        data-dojo-props\x3d"useMenu: false, useSlider: false, doLayout: false"\r\n        controllerWidget\x3d"dijit.layout.TabController" class\x3d"tab-container"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationPropertiesTab" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            title\x3d"${navigationGroupsStrings.animations.editPane.properties}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_animationProperties"\r\n                    data-dojo-type\x3d"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationPropertiesTab" title\x3d"${navigationGroupsStrings.animations.editPane.properties}"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationObjectsTab" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            title\x3d"${navigationGroupsStrings.animations.editPane.objects}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_animationObjects"\r\n                    data-dojo-type\x3d"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationLinkedObjectsTab" title\x3d"${navigationGroupsStrings.animations.editPane.objects}"\r\n                    data-dojo-props\x3d"site: ${site}"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationAttributesTab" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            title\x3d"${navigationGroupsStrings.animations.editPane.attributes}"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationHelpTab" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            title\x3d"${navigationGroupsStrings.animations.editPane.help}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_animationHelp"\r\n                    data-dojo-type\x3d"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationHelpTab" title\x3d"${navigationGroupsStrings.animations.editPane.help}"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/dialogs/editAnimationContent/tabs/templates/AnimationAttributesTab.html":'\x3cdiv class\x3d"edit-animation-content"\x3e\r\n    \x3clabel class\x3d"error-label" data-dojo-attach-point\x3d"_errorLabel"\x3e\x3c/label\x3e\r\n    \x3cdiv class\x3d"attribute-container content-container" data-dojo-attach-point\x3d"_attributeContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/features/animations/templates/FileAttributeSelector.html":'\x3cdiv class\x3d"attribute-file-selector uploaded-file-selector"\x3e\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e\r\n            ${attributeName}\r\n        \x3c/legend\x3e\r\n        \x3cdiv class\x3d"upload-container"\x3e\r\n            \x3cdiv class\x3d"radio-selector"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"${id}"\r\n                    data-dojo-type\x3d"dijit/form/RadioButton"\r\n                    data-dojo-attach-event\x3d"onClick:_uploadSelected"\r\n                    data-dojo-props\x3d"baseClass: \'webview-radio-button\'"\r\n                    id\x3d"${id}_uploadRadioButton" checked\x3d"checked" data-dojo-attach-point\x3d"_uploadRadioButton"\x3e\r\n                \x3clabel for\x3d"${id}_uploadRadioButton" class\x3d"radio-button-label" data-dojo-attach-point\x3d"_uploadRadioButtonLabel"\x3e\x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"_fileUploader"\r\n                data-dojo-type\x3d"webview/crossCutting/forms/fileUploader/FileUploader"\r\n                data-dojo-props\x3d\'acceptedFiles: "${acceptedFiles}", displayFileExtension: true\'\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"existing-container"\x3e\r\n            \x3cdiv class\x3d"radio-selector"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"${id}"\r\n                    data-dojo-type\x3d"dijit/form/RadioButton"\r\n                    data-dojo-attach-event\x3d"onClick:_existingSelected"\r\n                    data-dojo-props\x3d"baseClass: \'webview-radio-button\'"\r\n                    id\x3d"${id}_existingRadioButton"\r\n                    data-dojo-attach-point\x3d"_existingRadioButton"\x3e\r\n                \x3clabel for\x3d"${id}_existingRadioButton" class\x3d"radio-button-label" data-dojo-attach-point\x3d"_existingRadioButtonLabel"\x3e\x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cinput type\x3d"text" name\x3d"existing-input"\r\n                data-dojo-attach-point\x3d"_existingFileSelector"\r\n                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                data-dojo-props\x3d\'baseClass: "rcTextBox form-input large",\r\n                    disabled: true,\r\n                    placeHolder: "${webviewStrings.selectHintText}"\'\r\n                id\x3d"${id}_existingInput" /\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n\x3c/div\x3e',
"url:webview/crossCutting/forms/fileUploader/templates/FileUploader.html":'\x3cdiv class\x3d"file-upload-container"\x3e\r\n    \x3cdiv class\x3d"form-input large" data-dojo-attach-event\x3d"onClick:_onClickBrowse"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_browseButton"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton uploader-button", iconClass: "browse-icon", showLabel: false\'\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"selected-file"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_selectedFile"\x3e\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"_fileInput" class\x3d"file-input" type\x3d"file" id\x3d"${id}_fileInput"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"error-message" data-dojo-attach-point\x3d"_errorMessage"\x3e\r\n        ${invalidFile}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\r\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:webview/features/navigationGroups/dialogs/editAnimationContent/tabs/templates/AnimationHelpTab.html":'\x3cdiv class\x3d"edit-animation-content-help"\x3e\r\n    \x3cdiv class\x3d"version-text" data-dojo-attach-point\x3d"versionContent"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"information-text" data-dojo-attach-point\x3d"informationContent"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationGroups/dialogs/editAnimationContent/tabs/templates/AnimationLinkedObjectsTab.html":'\x3cdiv class\x3d"animation-content-objects"\x3e\r\n    \x3clabel class\x3d"error-label" data-dojo-attach-point\x3d"_errorLabel"\x3e\x3c/label\x3e\r\n    \x3cdiv class\x3d"object-table"\r\n        data-dojo-type\x3d"dijit/layout/ContentPane"\r\n        data-dojo-attach-point\x3d"gridContainer"\r\n        data-dojo-props\x3d"region: \'center\'"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/AddButton.html":'\x3cdiv\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n        data-dojo-attach-point\x3d"addButton"\r\n        data-dojo-props\x3d\'titleStr : "${navGroupStrings.addToNavGroup}",iconClass: "rc24Icon addIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"addMenu" class\x3d"addButtonMenu hidden"\x3e\r\n        \x3cdiv class\x3d"addButtonMenuItem" data-dojo-attach-point\x3d"ObjectMenuItem"\x3e\r\n            \x3cdiv class\x3d"drop-down-label"\x3e\r\n                ${navGroupStrings.navGroupObject}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"addButtonMenuItem" data-dojo-attach-point\x3d"KeywordMenuItem"\x3e\r\n            \x3cdiv class\x3d"drop-down-label"\x3e\r\n                ${navGroupStrings.navGroupKeyword}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"addButtonMenuItem" data-dojo-attach-point\x3d"AnimationMenuItem"\x3e\r\n            \x3cdiv class\x3d"drop-down-label"\x3e\r\n                ${navGroupStrings.animations.animation}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationGroups/dialogs/editAnimationContent/tabs/templates/AnimationPropertiesTab.html":'\x3cdiv class\x3d"edit-animation-content"\x3e\r\n    \x3cdiv class\x3d"content-container"\x3e\r\n        \x3cfieldset class\x3d"edit-animation-position node-positioning-fieldset"\x3e\r\n            \x3clegend\x3e ${navigationGroupsStrings.animations.editPane.file}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"animation-positioning node-positioning-fields"\x3e\r\n                \x3cdiv class\x3d"name-label"\x3e ${navigationGroupsStrings.configDialog.nameLabel}:\x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_animationName"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_animationSelector"\r\n                    data-dojo-type\x3d"webview/features/animations/AnimationSelector"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n        \x3cfieldset class\x3d"edit-animation-position node-positioning-fieldset"\x3e\r\n            \x3clegend\x3e${navigationGroupsStrings.configDialog.positionLegend}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"animation-positioning node-positioning-fields"\x3e\r\n                \x3cdiv class\x3d"animation-position-labels size-labels"\x3e\r\n                    \x3clabel for\x3d"${id}_widthInput" class\x3d"form-label width-label"\x3e${webviewStrings.width}:\x3c/label\x3e\r\n                    \x3clabel for\x3d"${id}_heightInput" class\x3d"form-label height-label"\x3e${webviewStrings.height}:\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"animation-position-inputs size-inputs"\x3e\r\n                    \x3cinput id\x3d"${id}_widthInput" type\x3d"number" name\x3d"width" min\x3d"1"\r\n                        data-dojo-attach-point\x3d"widthInput"\r\n                        data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                        data-dojo-props\x3d\'\r\n                            baseClass: "form-input large width-input",\r\n                            constraints: { places:0, pattern:"#" }\' /\x3e\r\n\r\n                    \x3cinput id\x3d"${id}_heightInput" type\x3d"number" name\x3d"positionY" min\x3d"1"\r\n                        data-dojo-attach-point\x3d"heightInput"\r\n                        data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                        data-dojo-props\x3d\'\r\n                            baseClass: "form-input large height-input",\r\n                            constraints: { places:0, pattern:"#" }\' /\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"lockIcon" class\x3d"aspect-ratio-icon" data-dojo-attach-event\x3d"ondijitclick: _onToggleAspectLock"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"animation-position-labels position-inputs"\x3e\r\n                    \x3clabel for\x3d"${id}_positionXInput" class\x3d"form-label position-x-label"\x3e${navigationGroupsStrings.configDialog.positionXLabel}:\x3c/label\x3e\r\n                    \x3clabel for\x3d"${id}_positionYInput" class\x3d"form-label position-y-label"\x3e${navigationGroupsStrings.configDialog.positionYLabel}:\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"animation-position-inputs"\x3e\r\n                    \x3cinput id\x3d"${id}_positionXInput" type\x3d"number" name\x3d"positionX" min\x3d"0"\r\n                        data-dojo-attach-point\x3d"positionX"\r\n                        data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                        data-dojo-props\x3d\'\r\n                            baseClass: "form-input large position-x-input",\r\n                            constraints: { places:0, pattern:"#" }\' /\x3e\r\n\r\n                    \x3cinput id\x3d"${id}_positionYInput" type\x3d"number" name\x3d"positionY" min\x3d"0"\r\n                        data-dojo-attach-point\x3d"positionY"\r\n                        data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                        data-dojo-props\x3d\'\r\n                            baseClass: "form-input large position-y-input",\r\n                            constraints: { places:0, pattern:"#" }\' /\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"edit-animation-delete"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_deleteButton"\r\n            data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton",\r\n            iconClass: "webviewIcon deleteIcon edit-animation-delete-icon",\r\n            label: "${navigationGroupsStrings.animations.deleteAnimation}"\'\r\n            data-dojo-attach-event\x3d"onClick: onDeleteNodeClicked"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/animations/templates/AnimationSelector.html":'\x3cdiv class\x3d"animation-selector uploaded-file-selector"\x3e\r\n    \x3cdiv class\x3d"upload-container"\x3e\r\n        \x3cdiv class\x3d"radio-selector"\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"${id}"\r\n                data-dojo-type\x3d"dijit/form/RadioButton"\r\n                data-dojo-attach-event\x3d"onClick:_uploadSelected"\r\n                data-dojo-props\x3d"baseClass: \'webview-radio-button\'"\r\n                id\x3d"${id}_uploadRadioButton" checked\x3d"checked" data-dojo-attach-point\x3d"_uploadRadioButton"\x3e\r\n            \x3clabel for\x3d"${id}_uploadRadioButton" class\x3d"radio-button-label"\x3e\r\n                ${navigationGroupsStrings.animations.uploadRCA}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationUploader"\r\n            data-dojo-type\x3d"webview/crossCutting/forms/fileUploader/FileUploader"\r\n            data-dojo-props\x3d\'uploadPath: "${animationFilesPath}", acceptedFiles: "${acceptedFiles}", displayFileExtension: false\'\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"existing-container"\x3e\r\n        \x3cdiv class\x3d"radio-selector"\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"${id}"\r\n                data-dojo-type\x3d"dijit/form/RadioButton"\r\n                data-dojo-attach-event\x3d"onClick:_existingSelected"\r\n                data-dojo-props\x3d"baseClass: \'webview-radio-button\'"\r\n                id\x3d"${id}_existingRadioButton"\r\n                data-dojo-attach-point\x3d"_existingRadioButton"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_existingRadioButtonLabel"\r\n                for\x3d"${id}_existingRadioButton"\r\n                class\x3d"radio-button-label"\x3e\r\n                ${navigationGroupsStrings.animations.existingRCA}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cinput type\x3d"text" name\x3d"existing-input"\r\n            data-dojo-attach-point\x3d"_existingAnimationSelector"\r\n            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n            data-dojo-props\x3d\'baseClass: "rcTextBox form-input large",\r\n                disabled: true,\r\n                placeHolder: "${webviewStrings.selectHintText}"\'\r\n            id\x3d"${id}_existingInput" /\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationGroups/dialogs/insertAnimationContent/templates/InsertAnimationContent.html":'\x3cdiv class\x3d"insert-animation-content expando-pane-content"\x3e\r\n    \x3cdiv class\x3d"content-title-bar" data-dojo-attach-point\x3d"titleBar" \x3e\r\n        \x3cbutton class\x3d"content-close-icon" data-dojo-attach-point\x3d"closeButtonNode"\r\n            data-dojo-attach-event\x3d"ondijitclick: _onClose"\r\n            title\x3d"${rcStrings.close}"\r\n            role\x3d"button"\r\n            tabindex\x3d"0"\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"content-title" data-dojo-attach-point\x3d"titleNode"\r\n            id\x3d"${id}_title"\r\n            role\x3d"heading"\x3e${navigationGroupsStrings.animations.insertAnimation}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"content-container" data-dojo-attach-point\x3d"_animationSelector"\r\n        data-dojo-type\x3d"webview/features/animations/AnimationSelector"\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"spacer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"preview-container hidden" data-dojo-attach-point\x3d"_previewContainer"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/groupRendering/groupNodes/templates/AnimationNodeOverlay.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n     class\x3d"group-node animation-node animation-node-overlay resize-border"\x3e\r\n     \x3cdiv class\x3d"edit-node-container"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"editIconNode"\r\n            class\x3d"edit-node"\r\n            title\x3d"${navGroupStrings.nodeConfiguration}"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cimg data-dojo-attach-point\x3d"thumbnail"\x3e\r\n    \x3c!--Resize Points--\x3e\r\n    \x3cspan class\x3d"n resize-point"\r\n          data-dojo-attach-point\x3d"nResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"nw resize-point"\r\n          data-dojo-attach-point\x3d"nwResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"w resize-point"\r\n          data-dojo-attach-point\x3d"wResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"sw resize-point"\r\n          data-dojo-attach-point\x3d"swResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"s resize-point"\r\n          data-dojo-attach-point\x3d"sResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"se resize-point"\r\n          data-dojo-attach-point\x3d"seResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"e resize-point"\r\n          data-dojo-attach-point\x3d"eResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"ne resize-point"\r\n          data-dojo-attach-point\x3d"neResizePoint"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/dialogs/nodeConfigurationDialog/templates/NodeConfigurationDialog.html":'\x3cdiv class\x3d"dijitDialog node-config-dialog"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar"\r\n         class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode"\r\n              class\x3d"dijitDialogTitle dialog-title"\r\n              id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${navGroupStrings.configDialog.title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n              class\x3d"dijitDialogCloseIcon"\r\n              data-dojo-attach-event\x3d"ondijitclick: onCancel"\r\n              title\x3d"${buttonCancel}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText"\r\n                  class\x3d"closeText"\r\n                  title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n         class\x3d"dijitDialogPaneContent"\x3e\r\n         \x3cdiv class\x3d"loading-overlay hidden"\r\n            data-dojo-attach-point\x3d"loadingOverlay"\x3e\r\n            \x3cdiv class\x3d"loading-animation"\r\n                    data-dojo-attach-point\x3d"loadingAnimation"\x3e\r\n                \x3cdiv class\x3d"cog-main"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-top"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-bot"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n         \x3cdiv class\x3d"input-container" data-dojo-attach-point\x3d"inputContainer"\x3e\r\n            \x3c!-- Row 1 --\x3e\r\n            \x3clabel class\x3d"form-label name-label"\x3e${navGroupStrings.configDialog.nameLabel}:\x3c/label\x3e\r\n            \x3clabel class\x3d"form-label object-name-label" data-dojo-attach-point\x3d"objectNameLabel"\x3e\x3c/label\x3e\r\n\r\n            \x3c!-- Row 2 --\x3e\r\n            \x3clabel for\x3d"_displayNameInput" class\x3d"form-label display-name-label"\x3e${navGroupStrings.configDialog.displayNameLabel}:\x3c/label\x3e\r\n            \x3cinput id\x3d"_displayNameInput" type\x3d"text" maxlength\x3d"50"\r\n                data-dojo-attach-point\x3d"displayName"\r\n                data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                data-dojo-props\x3d\'baseClass: "form-input large rcTextBox display-name-input"\' /\x3e\r\n\r\n            \x3c!-- Row 3 --\x3e\r\n            \x3clabel for\x3d"_hyperLinkInput" class\x3d"form-label hyper-link-label"\x3e${webviewStrings.hyperlink}:\x3c/label\x3e\r\n            \x3cinput id\x3d"_hyperLinkInput" type\x3d"text" maxlength\x3d"256"\r\n                data-dojo-attach-point\x3d"hyperLink"\r\n                data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                data-dojo-props\x3d\'baseClass: "form-input large rcTextBox hyper-link-input"\' /\x3e\r\n\r\n            \x3c!-- Row 4 --\x3e\r\n            \x3clabel for\x3d"_modifiableByInput" class\x3d"form-label modifiable-by-label"\x3e${navGroupStrings.configDialog.modifiableByLabel}:\x3c/label\x3e\r\n            \x3cselect id\x3d"_modifiableByInput"\r\n                autocomplete\x3d"off"\r\n                data-dojo-attach-point\x3d"modifiableBySelector"\r\n                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                data-dojo-props\x3d\'baseClass: "rcSelectBox form-input large modifiable-by-input"\'\x3e\r\n            \x3c/select\x3e\r\n\r\n            \x3c!-- Row 5 --\x3e\r\n            \x3clabel for\x3d"_fontFamilyInput" class\x3d"form-label font-label"\x3e${navGroupStrings.configDialog.fontLabel}:\x3c/label\x3e\r\n            \x3cselect id\x3d"_fontFamilyInput"\r\n                autocomplete\x3d"off"\r\n                data-dojo-attach-point\x3d"fontSelect"\r\n                data-dojo-type\x3d"webview/widget/FontSelector"\r\n                data-dojo-props\x3d\'baseClass: "rcSelectBox form-input large font-input"\'\x3e\r\n            \x3c/select\x3e\r\n\r\n            \x3cinput type\x3d"number" name\x3d"fontSize"\r\n                data-dojo-attach-point\x3d"fontSize"\r\n                data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d\'constraints:{ min: 6, max: 24 },\r\n                    baseClass: "form-input large font-size-input",\r\n                    required: true\' /\x3e\r\n            \x3cspan class\x3d"font-colour-picker"\r\n                data-dojo-attach-point\x3d"fontColourPicker"\r\n                data-dojo-type\x3d"webview/widget/ColorPicker"\r\n                data-dojo-props\x3d"color: \'${defaultColour}\'"\x3e\r\n            \x3c/span\x3e\r\n\r\n             \x3c!-- Row 6 --\x3e\r\n            \x3clabel for\x3d"_displayTypeInput" class\x3d"form-label show-point-label"\x3e${navGroupStrings.configDialog.showPointLabel}:\x3c/label\x3e\r\n            \x3cselect id\x3d"_displayTypeInput"\r\n                autocomplete\x3d"off"\r\n                data-dojo-attach-point\x3d"displayTypeSelect"\r\n                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                data-dojo-props\x3d\'baseClass: "rcSelectBox form-input large show-point-input"\'\x3e\r\n            \x3c/select\x3e\r\n            \x3cdiv class\x3d"unit-options"\x3e\r\n                \x3cinput id\x3d"_showUnitCheckbox" class\x3d"show-units-checkbox" type\x3d"checkbox" tabindex\x3d"0"\r\n                    data-dojo-attach-point\x3d"showUnitCheckBox"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox"\r\n                    data-dojo-props\x3d\'checked: false\'/\x3e\r\n                \x3clabel for\x3d"_showUnitCheckbox" class\x3d"show-units-label"\x3e${navGroupStrings.configDialog.showUnitLabel}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cfieldset class\x3d"node-positioning-fieldset"\x3e\r\n            \x3clegend\x3e${navGroupStrings.configDialog.positionLegend}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"node-positioning-fields"\x3e\r\n                \x3clabel for\x3d"_positionXInput" class\x3d"form-label position-x-label"\x3e${navGroupStrings.configDialog.positionXLabel}:\x3c/label\x3e\r\n                \x3cinput id\x3d"_positionXInput" type\x3d"number" name\x3d"positionX" min\x3d"0"\r\n                    data-dojo-attach-point\x3d"positionX"\r\n                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                    data-dojo-props\x3d\'\r\n                        baseClass: "form-input large position-x-input",\r\n                        constraints: { places:0, pattern:"#" },\r\n                        required: true\' /\x3e\r\n\r\n                \x3clabel for\x3d"_positionYInput" class\x3d"form-label position-y-label"\x3e${navGroupStrings.configDialog.positionYLabel}:\x3c/label\x3e\r\n                \x3cinput id\x3d"_positionYInput" type\x3d"number" name\x3d"positionY" min\x3d"0"\r\n                    data-dojo-attach-point\x3d"positionY"\r\n                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                    data-dojo-props\x3d\'\r\n                        baseClass: "form-input large position-y-input",\r\n                        constraints: { places:0, pattern:"#" },\r\n                        required: true\' /\x3e\r\n\r\n                \x3clabel for\x3d"_widthInput" class\x3d"form-label width-label"\x3e${navGroupStrings.configDialog.widthLabel}:\x3c/label\x3e\r\n                \x3cinput id\x3d"_widthInput" type\x3d"number" name\x3d"width" min\x3d"0"\r\n                    data-dojo-attach-point\x3d"widthInput"\r\n                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                    data-dojo-props\x3d\'\r\n                        baseClass: "form-input large width-input",\r\n                        constraints: { places:0, pattern:"#" },\r\n                        required: true\' /\x3e\r\n\r\n                \x3clabel for\x3d"_heightInput" class\x3d"form-label height-label"\x3e${navGroupStrings.configDialog.heightLabel}:\x3c/label\x3e\r\n                \x3cinput id\x3d"_heightInput" type\x3d"number" name\x3d"positionY" min\x3d"0"\r\n                    data-dojo-attach-point\x3d"heightInput"\r\n                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                    data-dojo-props\x3d\'\r\n                        baseClass: "form-input large height-input",\r\n                        constraints: { places:0, pattern:"#" },\r\n                        required: true\' /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"okCancelDiv"\r\n         class\x3d"dijitDialogPaneActionBar confirm-button-container"\r\n         data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_okButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnOk}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-attach-event\x3d"click:_onClickedOk"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_cancelButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnCancel}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-attach-event\x3d"click:onClickedCancel"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_deleteButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.rcDelete}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"deleteButton"\r\n                data-dojo-attach-event\x3d"click:onClickedDelete"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton deleteIcon",\r\n                    iconClass: "webviewIcon deleteIcon"\'\x3e\r\n            ${rcStrings.rcDelete}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/groupRendering/groupNodes/templates/AnimationNode.html":'\x3cdiv class\x3d"group-node animation-node iframe-container"\r\n        data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3ciframe style\x3d"border: 0; display: block; width: 100%; height: 100%"\r\n            data-dojo-attach-point\x3d"iframeNode"\r\n            allowtransparency\x3d"true"\x3e\r\n    \x3c/iframe\x3e\r\n    \x3cdiv class\x3d"n-shortcut"\r\n            data-dojo-attach-point\x3d"displayIndexNode"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/groupRendering/groupNodes/templates/TextNode.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"group-node text-node resize-border"\x3e\r\n    \x3cdiv class\x3d"node-contents" data-dojo-attach-point\x3d"contents"\x3e\r\n        \x3cdiv class\x3d"value-container" data-dojo-attach-point\x3d"displayValueContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"displayValueNode" class\x3d"text-node-label"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"faultIconNode" class\x3d"icon-node in-fault hidden"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"manualHandNode" class\x3d"icon-node manual-hand hidden"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"spacing-div"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"edit-node-container"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"editIconNode"\r\n                class\x3d"edit-node"\r\n                title\x3d"${navGroupStrings.nodeConfiguration}"\r\n                data-dojo-attach-event\x3d"click: onEditConfigurationClicked"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"displayIndexNode" class\x3d"n-shortcut"\x3e\x3c/div\x3e\r\n    \x3c!--Resize Points--\x3e\r\n    \x3cspan class\x3d"n resize-point" data-dojo-attach-point\x3d"nResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"nw resize-point" data-dojo-attach-point\x3d"nwResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"w resize-point" data-dojo-attach-point\x3d"wResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"sw resize-point" data-dojo-attach-point\x3d"swResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"s resize-point" data-dojo-attach-point\x3d"sResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"se resize-point" data-dojo-attach-point\x3d"seResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"e resize-point" data-dojo-attach-point\x3d"eResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"ne resize-point" data-dojo-attach-point\x3d"neResizePoint"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationGroups/groupRendering/templates/GroupRenderer.html":'\x3cdiv data-dojo-attach-point\x3d"groupContainer" class\x3d"group-renderer-container"\x3e\r\n    \x3cdiv class\x3d"background-image-container" data-dojo-attach-point\x3d"backgroundImageContainer"\x3e\r\n        \x3cimg class\x3d"background-image" data-dojo-attach-point\x3d"backgroundImage"\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"group-nodes-container" data-dojo-attach-point\x3d"nodeContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/systemData/templates/EditObjectDialog.html":'\x3cdiv class\x3d"dijitDialog edit-object-dialog"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar"\r\n         class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode"\r\n              class\x3d"dijitDialogTitle dialog-title"\r\n              id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${systemDataStrings.editObject}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n              class\x3d"dijitDialogCloseIcon"\r\n              data-dojo-attach-event\x3d"onClick: _onClickCancel"\r\n              title\x3d"${buttonCancel}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"loading-overlay hidden"\r\n            data-dojo-attach-point\x3d"loadingOverlay"\x3e\r\n            \x3cdiv class\x3d"loading-animation"\r\n                    data-dojo-attach-point\x3d"loadingAnimation"\x3e\r\n                \x3cdiv class\x3d"cog-main"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-top"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-bot"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n         \x3cdiv data-dojo-attach-point\x3d"inputsContainer" class\x3d"dialog-main-contents"\x3e\r\n            \x3clabel class\x3d"object-name-label" data-dojo-attach-point\x3d"_objectNameLabel"\x3e\x3c/label\x3e\r\n            \x3cdiv class\x3d"required-sign"\r\n                data-dojo-attach-point\x3d"requiredNote"\x3e* ${rcStrings.requiredField}\x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"dialog-input-fields"\x3e\r\n                \x3clabel class\x3d"field-label value-label"\x3e${rcStrings.value}\x3cspan data-dojo-attach-point\x3d"valueRequired" class\x3d"required-sign"\x3e*\x3c/span\x3e:\x3c/label\x3e\r\n                \x3cdiv class\x3d"value-input" data-dojo-attach-point\x3d"valueInputContainer"\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"_numericValueInput"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                            trim: "true",\r\n                                            maxLength: "256",\r\n                                            required: "true",\r\n                                            invalidMessage: "${rcStrings.invalidNumber}",\r\n                                            pattern: "[+|-]{0,1}(\\\\d+|\\\\d+\\\\.\\\\d+){1}([e|E]{1}\\\\+\\\\d+){0,1}"\'/\x3e\r\n\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"_timeValueInput"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                            trim: "true",\r\n                                            maxLength: "256",\r\n                                            required: "true",\r\n                                            invalidMessage: "${rcStrings.invalidTime}",\r\n                                            pattern: "(\\\\d+)(:(\\\\d|[012345]\\\\d){1}){2}"\'/\x3e\r\n\r\n                    \x3cselect data-dojo-attach-point\x3d"_digitalValueInput"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                            autoComplete: true"\x3e\x3c/select\x3e\r\n\r\n                    \x3ctextarea data-dojo-attach-point\x3d"_textBlobInput"\r\n                            data-dojo-type\x3d"dijit/form/SimpleTextarea"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextArea"\'\x3e\x3c/textarea\x3e\r\n\r\n                    \x3cinput type\x3d"text"\r\n                            data-dojo-attach-point\x3d"_textFieldInput"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                    trim: true\'/\x3e\r\n                \x3c/div\x3e\r\n                \x3cbutton type\x3d"button"\r\n                    id\x3d"${id}_relinquishButton"\r\n                    title\x3d"${rcStrings.btnOk}"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_priorityArrayButton"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickPriorityArrayButton"\r\n                    data-dojo-props\x3d\'baseClass: "relinquish-button",\r\n                                    iconClass: "relinquish-icon"\'\x3e\r\n                \x3c/button\x3e\r\n                \x3cselect class\x3d"override-selector"\r\n                    data-dojo-attach-point\x3d"_overrideSelector"\r\n                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                    data-dojo-attach-event\x3d"onChange:_onChangeValueOverrideOption"\r\n                    data-dojo-props\x3d"baseClass: \'rcSelectBox override-selector\',\r\n                                    searchAttr:\'name\',\r\n                                    autoComplete: false"\x3e\r\n                \x3c/select\x3e\r\n\r\n                \x3clabel class\x3d"field-label reason-label" data-dojo-attach-point\x3d"reasonLabel"\x3e\r\n                    ${rcStrings.reason}\x3cspan data-dojo-attach-point\x3d"reasonRequiredSign" class\x3d"required-sign"\x3e*\x3c/span\x3e:\r\n                \x3c/label\x3e\r\n                \x3cinput type\x3d"text"\r\n                    data-dojo-attach-point\x3d"_reasonInput"\r\n                    data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                    data-dojo-props\x3d\'placeholder: "${webviewStrings.reasonPlaceholder}",\r\n                            baseClass: "rcTextBox reason-input",\r\n                            required: ${reasonRequired},\r\n                            trim: true, maxLength: 256\'/\x3e\r\n                            \r\n                \x3cspan class\x3d"timed-container hidden" data-dojo-attach-point\x3d"_timedContainer"\x3e\r\n                    \x3clabel class\x3d"field-label timed-label"\x3e${rcStrings.timed}:\x3c/label\x3e\r\n                    \x3cinput class\x3d"timed-input" type\x3d"text"\r\n                        data-dojo-attach-point\x3d"_timedOverrideInput"\r\n                        data-dojo-type\x3d"webview/bacnet/_widget/TimedInput"\r\n                        data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                                value: 0, useSeconds: false, useDefault: true, defaultValue: 30,\r\n                                maxLength: 5" /\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-props\x3d\'title:"${rcStrings.invalidInput}"\' data-dojo-attach-point\x3d"_errorDialog"\x3e\r\n                \x3cp data-dojo-attach-point\x3d"errorTextContainer"\x3e\x3cspan\x3e${rcStrings.requiredInfoMissing}\x3c/span\x3e\x3c/p\x3e\r\n                \x3cp class\x3d"scheduleRateDialogButtons"\x3e\r\n                    \x3cbutton data-dojo-type\x3ddijit/form/Button\r\n                            data-dojo-attach-point\x3d"_errOk"\r\n                            data-dojo-attach-event\x3d"onClick: _closeErrorDialog"\r\n                            data-dojo-props\x3d\'label: "${rcStrings.btnOk}",\r\n                            baseClass: "webviewButton",\r\n                            iconClass: "rcIcon okIcon"\'\x3e\r\n                        OK\r\n                    \x3c/button\x3e\r\n                \x3c/p\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"okCancelDiv"\r\n         class\x3d"dijitDialogPaneActionBar confirm-button-container"\r\n         data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_okButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnOk}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_cancelButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnCancel}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/systemData/templates/PriorityArrayDialog.html":'\x3cdiv class\x3d"dijitDialog priority-array-dialog"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar"\r\n         class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode"\r\n              class\x3d"dijitDialogTitle dialog-title"\r\n              id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${rcStrings.relinquish}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n              class\x3d"dijitDialogCloseIcon"\r\n              data-dojo-attach-event\x3d"onClick: _onClickClose"\r\n              title\x3d"${buttonCancel}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3clabel class\x3d"object-name-label" data-dojo-attach-point\x3d"_objectNameLabel"\x3e\x3c/label\x3e\r\n        \x3cdiv class\x3d"priorities-grid" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"okCancelDiv"\r\n         class\x3d"dijitDialogPaneActionBar button-container"\r\n         data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n         \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_loadButton"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton",\r\n            iconClass: "webviewIcon buttonLoadIcon",\r\n            label: "${rcStrings.load}"\'\r\n            data-dojo-attach-event\x3d"onClick:_onClickLoad"\x3e\r\n            LOAD\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_okButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.relinquish}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_relinquishButton"\r\n                data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "webviewIcon buttonRelinquishIcon",\r\n                    disabled: true\'\x3e\r\n            ${rcStrings.relinquish}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_cancelButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.close}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_cancelButton"\r\n                data-dojo-attach-event\x3d"onClick:_onClickClose"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "webviewIcon buttonCloseIcon"\'\x3e\r\n            ${rcStrings.close}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/navGroups/templates/navGroupToolbar.html":'\x3cdiv class\x3d"toolbar-button-container"\r\n     data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/UndoRedoButtons"\r\n          data-dojo-attach-point\x3d"navGroupUndoRedoButtons"\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"toolbar-divider"\x3e\x3c/span\x3e\r\n\r\n    \x3cspan data-dojo-type\x3d"webview/widget/AddButton"\r\n          data-dojo-attach-point\x3d"navGroupAddButton"\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"viewButton"\r\n          data-dojo-props\x3d\'titleStr : "${webviewStrings.view}",\r\n        iconClass: "rc24Icon viewIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"toolbar-divider"\x3e\x3c/span\x3e\r\n\r\n    \x3cdiv class\x3d"zoom-tools"\r\n         data-dojo-type\x3d"webview/widget/ZoomTools"\r\n         data-dojo-attach-point\x3d"zoomTools"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/UndoRedoButtons.html":'\x3cdiv class\x3d"undo-redo-buttons" data-dojo-attach-point\x3d"container"\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n          data-dojo-attach-point\x3d"undoButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButtonIcon undo-redo-button undo-button",\r\n              titleStr : "${webviewStrings.undo}",\r\n              iconClass: "undo-redo-icon undo-icon"\'\x3e\r\n      \x3c/button\x3e\r\n  \r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n          data-dojo-attach-point\x3d"redoButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButtonIcon undo-redo-button redo-button",\r\n              titleStr : "${webviewStrings.redo}",\r\n              iconClass: "undo-redo-icon redo-icon"\'\x3e\r\n      \x3c/button\x3e\r\n  \x3c/div\x3e',
"url:webview/widget/templates/ZoomTools.html":'\x3cdiv class\x3d"zoom-tools" data-dojo-attach-point\x3d"container"\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n        data-dojo-attach-point\x3d"zoomOut"\r\n        data-dojo-attach-event\x3d"onClick:_onClickZoomIn"\r\n        data-dojo-props\x3d\'baseClass: "toolbarButtonIcon zoom-button",\r\n            titleStr : "${webviewStrings.zoomIn}",\r\n            iconClass: "zoom-icon zoom-out-icon"\'\x3e\r\n    \x3c/button\x3e\r\n\r\n    \x3cselect data-dojo-attach-point\x3d"_levelSelector"\r\n        data-dojo-type\x3d"dijit/form/ComboBox"\r\n        data-dojo-props\x3d\'baseClass: "rcSelectBox form-input large",\r\n            searchAttr: "label",\r\n            autoComplete: false\'\x3e\x3c/select\x3e\r\n\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n        data-dojo-attach-point\x3d"zoomIn"\r\n        data-dojo-attach-event\x3d"onClick:_onClickZoomOut"\r\n        data-dojo-props\x3d\'baseClass: "toolbarButtonIcon zoom-button",\r\n            titleStr : "${webviewStrings.zoomIn}",\r\n            iconClass: "zoom-icon zoom-in-icon"\'\x3e\r\n    \x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_pointsReport/templates/PointsReport.html":'\x3cdiv data-dojo-attach-point\x3d"_container" class\x3d"webviewAdminSites points-report point-report-container"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n        data-dojo-type\x3d"webview/reliable/_pointsReport/PointsReportToolbar"\r\n        data-dojo-props\x3d"site: ${site},\r\n        system: ${system},\r\n        canEdit: ${_canEdit},\r\n        isAdminPage: ${isAdminPage},\r\n        hasElevatedPermission: ${_hasElevatedPermission}"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"points-report-container" data-dojo-attach-point\x3d"gridContainer"\x3e\r\n\r\n        \x3c!-- Results list --\x3e\r\n        \x3cdiv class\x3d"hidden results-container"\r\n                data-dojo-attach-point\x3d"resultsWidget"\r\n                data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n                data-dojo-props\x3d\'baseClass: "point-report-tree-results",\r\n                region: "left",\r\n                paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n\r\n        \x3c!-- Right side --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"builderContainer" class\x3d"point-report-grid-container"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_pointsReport/templates/PointEditor.html":'\x3cdiv class\x3d"dijitDialog point-editor-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"point-editor-contents" data-dojo-attach-point\x3d"editorContents"\x3e\r\n            \x3cdiv class\x3d"point-editor-description"\x3e\r\n                ${pointReportStrings.pointsReportDescription}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"point-editor-inputs"\x3e\r\n                \x3cspan class\x3d"point-editor-value" data-dojo-attach-point\x3d"valueInputContainer"\x3e\r\n                    \x3clabel\x3e\r\n                        \x3cinput type\x3d"checkbox"\r\n                               data-dojo-type\x3d"dijit/form/CheckBox"\r\n                               data-dojo-attach-point\x3d"valueCB"/\x3e\r\n                        ${webviewStrings.value}:\r\n                    \x3c/label\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"valueInput"\x3e\x3c/span\x3e\r\n                \x3c/span\x3e\r\n                \x3cspan class\x3d"point-editor-autoMan" id\x3d"autoManualControls"\x3e\r\n                    \x3clabel\x3e\r\n                        \x3cinput type\x3d"checkbox"\r\n                               data-dojo-type\x3d"dijit/form/CheckBox"\r\n                               data-dojo-attach-point\x3d"autoManCB" /\x3e\r\n                        ${webviewStrings.autoManual}:\r\n                    \x3c/label\x3e\r\n                    \x3cselect data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-attach-point\x3d"autoManInput"\r\n                            data-dojo-props\x3d"searchAttr: \'name\',\r\n                            autoComplete: false,\r\n                            baseClass: \'rcSelectBox\',\r\n                            value: ${autoManValue}"\x3e\r\n                    \x3c/select\x3e\r\n                    \x3cinput type\x3d"text" value\x3d"${timedValue}"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-attach-point\x3d"timeInput"\r\n                           data-dojo-props\x3d"pattern: \'^\\\\d{2}:\\\\d{2}$\',\r\n                           baseClass: \'rcTextBox\',\r\n                           invalidMessage: \'${pointReportStrings.timeMustBeInFormat}\'" /\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_pointsReport/templates/ValueInput.html":'\x3cdiv class\x3d"valueInputContainer"\x3e\r\n    \x3cinput type\x3d"text"\r\n           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n           data-dojo-attach-point\x3d"timeInput"\r\n           data-dojo-props\x3d\'pattern: "^(\\\\d){2}:(\\\\d){2}:(\\\\d){2}",\r\n           baseClass: "rcTextBox",\r\n           invalidMessage: "${rcStrings.inValidTimeFormat}"\' /\x3e\r\n    \x3cinput type\x3d"text"\r\n           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n           data-dojo-attach-point\x3d"analogInput"\r\n           data-dojo-props\x3d\'pattern: "^(\\\\-\\\\d+|\\\\d*)(\\\\.\\\\d+|\\\\d*)([eE]\\[\\+|\\-]\\\\d+|\\\\d*)$",\r\n           baseClass: "rcTextBox",\r\n           invalidMessage: "${pointReportStrings.inputMustBeANumber}"\' /\x3e\r\n\r\n    \x3cselect class\x3d"hidden"\r\n            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n            data-dojo-attach-point\x3d"enumeratedInput"\r\n            data-dojo-props\x3d"searchAttr: \'name\', autoComplete: false,\r\n            baseClass: \'rcSelectBox\'"\x3e\r\n    \x3c/select\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_pointsReport/templates/PointsReportToolbar.html":'\x3cdiv class\x3d"points-report-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"selectAllButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n              iconClass: "toolbarButtonIcon svg-select-all-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.save}",\r\n              iconClass: "toolbarButtonIcon svg-save-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.btnCancel}",\r\n              iconClass: "toolbarButtonIcon svg-cancel-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"editValuesButton"\r\n              data-dojo-props\x3d\'titleStr : "${pointReportStrings.editValues}",\r\n              iconClass: "toolbarButtonIcon svg-edit-multiple-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"exportButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.xport}",\r\n              iconClass: "toolbarButtonIcon svg-export-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n            data-dojo-attach-point\x3d"excelButton"\r\n            data-dojo-props\x3d\'titleStr : "${webviewStrings.exportExcel}",\r\n            iconClass: "toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"columnToggleButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.toggleColumns}",\r\n              iconClass: "toolbarButtonIcon svg-column-toggle-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"deleteButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.rcDelete}",\r\n              iconClass: "toolbarButtonIcon svg-delete-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_pointsReport/templates/PointsReportWorksheet.html":'\x3cdiv class\x3d"points-report-worksheet worksheet" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n         data-dojo-type\x3d"webview/reliable/_pointsReport/PointReportsToolbar"\r\n         data-dojo-props\x3d"hasElevatedPermission: ${_hasElevatedPermission},\r\n         isAdmin: ${isAdminPage},\r\n         systemId: ${system}"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"points-report-container grid-container" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_pointsReport/templates/PointReportsToolbar.html":'\x3cdiv class\x3d"point-reports-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"selectAllButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n              iconClass: "toolbarButtonIcon svg-select-all-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.save}",\r\n              iconClass: "toolbarButtonIcon svg-save-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.btnCancel}",\r\n              iconClass: "toolbarButtonIcon svg-cancel-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"exportButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.xport}",\r\n              iconClass: "toolbarButtonIcon svg-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n            data-dojo-attach-point\x3d"excelButton"\r\n            data-dojo-props\x3d\'titleStr : "${webviewStrings.exportExcel}",\r\n            iconClass: "toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"toggleColumnsButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.toggleColumns}",\r\n              iconClass: "toolbarButtonIcon svg-column-toggle-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"addButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.add}",\r\n              iconClass: "toolbarButtonIcon svg-add-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"deleteButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.rcDelete}",\r\n              iconClass: "toolbarButtonIcon svg-delete-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_weekly/templates/WeeklySchedule.html":'\x3cdiv class\x3d"rcWeeklySchedule"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_container" data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"noprint" style\x3d"width:100%; height:100%;"\x3e\r\n        \x3cdiv class\x3d"weekly-schedule-container" data-dojo-attach-point\x3d"gridContainer" style\x3d"width:100%; height: 100%;margin-top:50px;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/AHACRequestToast.html":'\x3cdiv class\x3d"dijitToast" style\x3d"display: none;"\x3e\r\n    \x3cdiv class\x3d"dijitToastInner alarmToastOpacity" data-dojo-attach-point\x3d"contentWrapper"\x3e\r\n        \x3cdiv class\x3d"dijitToastCloseNode" data-dojo-attach-point\x3d"closeNode" data-dojo-attach-event\x3d"onclick: clearNow"\x3e\r\n            \x3cspan class\x3d"toastCloseIcon"\x3e\x26times;\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"rcAlertIcon ahac-icon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"buttons" data-dojo-attach-point\x3d"_buttonContainer"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"*now":function(r){r(['dojo/i18n!*preload*webview/nls/webview-all*["en-gb","en-us","de","es","es-es","fr","fr-ca","pt","zh","zh-tw","ROOT"]'])}}});define("webview/webview-all",[],1);
//# sourceMappingURL=webview-all.js.map