//>>built
require({cache:{"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){var v=k("dijit.layout._Splitter",[q,u],{live:!0,templateString:'\x3cdiv class\x3d"dijitSplitter" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex\x3d"0" role\x3d"separator"\x3e\x3cdiv class\x3d"dijitSplitterThumb"\x3e\x3c/div\x3e\x3c/div\x3e',
constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);h.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=m(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=
this.horizontal?"h":"w",n=d.getMarginBox(this.child.domNode)[a],b=p.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=d.getContentBox(b.domNode)[a]-10;return Math.min(this.child.maxSize,n+a)},_startDrag:function(a){this.cover||(this.cover=g.place("\x3cdiv class\x3ddijitSplitterCover\x3e\x3c/div\x3e",this.child.domNode,"after"));h.add(this.cover,"dijitSplitterCoverActive");this.fake&&g.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),
h.add(this.domNode,"dijitSplitterShadow"),g.place(this.fake,this.domNode,"after"));h.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");this.fake&&h.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var n=this._factor,v=this.horizontal,q=v?"pageY":"pageX",f=a[q],u=this.domNode.style,v=v?"h":"w",t=l.getComputedStyle(this.child.domNode),w=d.getMarginBox(this.child.domNode,t)[v],k=this._computeMaxSize(),x=Math.max(this.child.minSize,
d.getPadBorderExtents(this.child.domNode,t)[v]+10),v=this.region,m="top"==v||"bottom"==v?"top":"left",p=parseInt(u[m],10),H=this._resize,J=r.hitch(this.container,"_layoutChildren",this.child.id),v=this.ownerDocument;this._handlers=this._handlers.concat([c(v,b.move,this._drag=function(a,b){var c=a[q]-f,v=n*c+w,d=Math.max(Math.min(v,k),x);(H||b)&&J(d);u[m]=c+p+n*(d-v)+"px"}),c(v,"dragstart",function(a){a.stopPropagation();a.preventDefault()}),c(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation();
a.preventDefault()}),c(v,b.release,r.hitch(this,"_stopDrag"))]);a.stopPropagation();a.preventDefault()},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;h.toggle(this.domNode,"dijitSplitterHover",a);h.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&h.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&g.destroy(this.fake),h.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),
this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&m(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var n=this.horizontal,b=1;switch(a.keyCode){case n?f.UP_ARROW:f.LEFT_ARROW:b*=-1;case n?f.DOWN_ARROW:f.RIGHT_ARROW:break;default:return}n=d.getMarginSize(this.child.domNode)[n?"h":"w"]+this._factor*
b;this.container._layoutChildren(this.child.id,Math.max(Math.min(n,this._computeMaxSize()),this.child.minSize));a.stopPropagation();a.preventDefault()},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),x=k("dijit.layout._Gutter",[q,u],{templateString:'\x3cdiv class\x3d"dijitGutter" role\x3d"presentation"\x3e\x3c/div\x3e',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},
buildRendering:function(){this.inherited(arguments);h.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});k=k("dijit.layout.BorderContainer",a,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:v,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var n=a.region,b=a.isLeftToRight();"leading"==n&&(n=b?"left":"right");"trailing"==n&&(n=b?"right":"left");n&&
"center"!=n&&(a.splitter||this.gutters)&&!a._splitterWidget&&(b=a.splitter?this._splitterClass:x,r.isString(b)&&(b=r.getObject(b)),b=new b({id:a.id+"_splitter",container:this,child:a,region:n,live:this.liveSplitters}),b.isSplitter=!0,a._splitterWidget=b,n="bottom"==n||n==(this.isLeftToRight()?"right":"left"),g.place(b.domNode,a.domNode,n?"before":"after"),b.startup())},layout:function(){this._layoutChildren()},removeChild:function(a){var n=a._splitterWidget;n&&(n.destroy(),delete a._splitterWidget);
this.inherited(arguments)},getChildren:function(){return p.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return p.filter(this.getChildren(),function(n){return n.region==a})[0]._splitterWidget},resize:function(a,n){if(!this.cs||!this.pe){var b=this.domNode;this.cs=l.getComputedStyle(b);this.pe=d.getPadExtents(b,this.cs);this.pe.r=l.toPixelValue(b,this.cs.paddingRight);this.pe.b=l.toPixelValue(b,this.cs.paddingBottom);l.set(b,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=[];p.forEach(this._getOrderedChildren(),function(a){c.push(a);a._splitterWidget&&c.push(a._splitterWidget)});n.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},c,a,b)}},destroyRecursive:function(){p.forEach(this.getChildren(),function(a){var n=a._splitterWidget;n&&n.destroy();delete a._splitterWidget});this.inherited(arguments)}});k.ChildWidgetProperties={splitter:!1,
minSize:0,maxSize:Infinity};r.mixin(k.ChildWidgetProperties,a.ChildWidgetProperties);r.extend(t,k.ChildWidgetProperties);k._Splitter=v;k._Gutter=x;return k})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(p,m,k,h,g,d,l,f){m=m("dijit.layout.LayoutContainer",l,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(p.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(f){this.inherited(arguments);f.region&&k.add(f.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var f=p.map(this.getChildren(),function(c,b){return{pane:c,weight:["center"==c.region?Infinity:0,c.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(c.region)?1:-1),b]}},this);f.sort(function(c,b){for(var f=c.weight,q=b.weight,u=0;u<f.length;u++)if(f[u]!=q[u])return f[u]-q[u];return 0});return p.map(f,function(c){return c.pane})},
layout:function(){f.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(f,c){this.inherited(arguments);this._started&&this.layout()},removeChild:function(f){this.inherited(arguments);this._started&&this.layout();k.remove(f.domNode,this.baseClass+"Pane");h.set(f.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});h.set(f.domNode,/top|bottom/.test(f.region)?"width":"height","auto")}});m.ChildWidgetProperties={region:"",layoutAlign:"",
layoutPriority:0};g.extend(d,m.ChildWidgetProperties);return m})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(p,m,k,h,g,d,l,f,r){return d("dijit.layout._LayoutWidget",[m,k,h],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);
var c=this.getParent&&this.getParent();c&&c.isLayoutContainer||(this.resize(),this.own(g.on("resize",p.hitch(this,"resize"))))}},resize:function(c,b){var d=this.domNode;c&&f.setMarginBox(d,c);var q=b||{};p.mixin(q,c||{});"h"in q&&"w"in q||(q=p.mixin(f.getMarginBox(d),q));var u=r.getComputedStyle(d),a=f.getMarginExtents(d,u),n=f.getBorderExtents(d,u),q=this._borderBox={w:q.w-(a.w+n.w),h:q.h-(a.h+n.h)},a=f.getPadExtents(d,u);this._contentBox={l:r.toPixelValue(d,u.paddingLeft),t:r.toPixelValue(d,u.paddingTop),
w:q.w-a.w,h:q.h-a.h};this.layout()},layout:function(){},_setupChild:function(c){l.add(c.domNode,this.baseClass+"-child "+(c.baseClass?this.baseClass+"-"+c.baseClass:""))},addChild:function(c,b){this.inherited(arguments);this._started&&this._setupChild(c)},removeChild:function(c){l.remove(c.domNode,this.baseClass+"-child"+(c.baseClass?" "+this.baseClass+"-"+c.baseClass:""));this.inherited(arguments)}})})},"webview/admin/widget/AdminRoleWizard":function(){define(["dojo/_base/declare","dojo/hash","dojo/i18n!../../nls/roles",
"dojo/io-query","../widget/_AdminWizard"],function(p,m,k,h,g){return p("webview/widget/AdminRoleWizard",[g],{cookieName:"rolew",constructorName:"AdminRoleWizard",defaultStep:"rolePermissions",wizardMemoryKey:"roleId",constructor:function(){this.config=[{step:"rolePermissions",baseHash:"#rolePermissions?",unknownParams:["site","roleId"],title:k.setNameAndPermissions,firstStep:!0,showLine:!1},{step:"roleLoginInfo",baseHash:"#roleLoginInfo?",unknownParams:["site","roleId"],title:this.webviewStrings.loginInfo},
{step:"setupFinished",baseHash:"#setupFinished?",unknownParams:["site","roleId"],title:this.webviewStrings.setupFinished}]},doSafeRedirect:function(){m("rolesList?"+h.objectToQuery({site:this.site}))},updateStepParams:function(d,l){this.stepWidgets.forEach(function(f){f.updateStepParams(d,l)});this.setCookieState({sinfo:this._getStepInfoForCookie()})}})})},"webview/admin/widget/_AdminWizard":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/i18n!webview/nls/all ../../util/util ../../widget/Wizard".split(" "),
function(p,m,k,h,g,d){return m("webview/admin/widget/_AdminWizard",[d],{webviewStrings:h,site:null,system:null,toggleSteps:function(d){for(var f=0;f<this.stepWidgets.length;f++)f===d?this.stepWidgets[f].set("enabled",!0):f!==d-1||this.complete?this.stepWidgets[f].set("enabled",!1):this.stepWidgets[f].set("enabled",!0)},alterStepTitle:function(d,f){var r=this.currentStepWidget.get("title");try{switch(d){case "changePermissions":r=this.webviewStrings.changePermissionsFor;break;case "changeInfo":r=this.webviewStrings.changeLoginInfoFor}r+=
f.userID}catch(c){console.error(this.declaredClass+".alterStepTitle() failed",c.message,c)}this._setStepTitle(r)},getCookieInfo:function(){var d=this.inherited(arguments);d&&(d.site=this.site,d.system=this.system);return d},_setPreviousState:function(d){this.inherited(arguments);d.site&&(this.site=d.site);d.system&&(this.system=d.system)},onStepComplete:function(d){this.inherited(arguments);p.forEach(d,function(f){"site"===f.name&&(this.site=f.value);"system"===f.name&&(this.system=f.value)},this)},
getUserDisplayName:function(){for(var d=this.getCookieState(),f=0;f<d.sinfo.length;f++)if(d.sinfo[f].stepParams&&d.sinfo[f].stepParams.name)return g.decodeURIComponent(d.sinfo[f].stepParams.name);return""},onCompleteSteps:function(d){this.emit("completeSteps",d);this.complete=!0;return d},destroy:function(){rc.setupWizard=null;this.widget&&this.widget.domNode&&k.remove(this.widget.domNode,"rcSetupWizard");this.inherited(arguments)}})})},"webview/widget/Wizard":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/cookie dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/Evented dojo/i18n!webview/nls/all dojo/json dojo/query dojo/text!webview/widget/templates/Wizard.html rc/_base/util ./WarningDialog ./WarningDialogEnums ./WizardStep".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A){return g("webview/widget/Wizard",[m,p,k,u],{templateString:x,config:null,stepConstructor:A,currentStepIndex:0,stepWidgets:null,defaultStep:"",currentStepWidget:null,complete:!1,cookieState:{sidx:0,sinfo:[]},cookieName:"w",prevWizardStepHash:null,widget:null,webviewStrings:a,warningDialog:null,warningDeferred:null,wizardMemoryKey:null,wizardMemoryValue:null,constructorName:"Wizard",onLastStep:!1,constructor:function(){this.config=[];this.stepWidgets=
[]},init:function(a,n,b){this.unhideNext();this.set("widget",b);t.place(this.domNode,a,n);this._init()},_init:function(){f("wiz",this.constructorName,{path:"/"});this._buildSteps();this.hasPreviousState()?this.setPreviousState():(this.setCurrentStepIndex(0),this._goToStep(null,!1),this.setCookieState({sinfo:this._getStepInfoForCookie(),ctor:this.constructorName}));this.widget.onStartWizard();this.own(l.after(window,"onresize",d.hitch(this,this.calculateStepLength)));this.own(l.after(this,"_setWidgetAttr",
d.hitch(this,this.calculateStepLength)));this.calculateStepLength()},addClasses:function(){b.add(this.widget.domNode,"rcSetupWizard")},alterStepTitle:function(a,n){},start:function(){},calculateStepLength:function(){var a=this.headerNode.clientWidth,n=q.get(this.nextCloseContainer,"width")+q.get(this.nextCloseContainer,"marginLeft")+q.get(this.nextCloseContainer,"marginRight")+q.get(this.nextCloseContainer,"paddingLeft")+q.get(this.nextCloseContainer,"paddingRight")+q.get(this.nextCloseContainer,
"borderLeftWidth")+q.get(this.nextCloseContainer,"borderRightWidth"),b=a-n,a=v(".webviewContentPane")[0],b=b-(q.get(a,"paddingLeft")+q.get(a,"paddingRight")),a=v(".step-circle",this.stepsContainer);h.forEach(a,d.hitch(this,function(a){b-=q.get(a,"width")}));var c=b/(this.stepWidgets.length-1),a=v(".step-line",this.stepsContainer);h.forEach(a,d.hitch(this,function(a){q.set(a,"width",c+"px")}))},_createWarningDialog:function(n){null===this.warningDialog&&(this.warningDialog=new z({title:w.toTitleCase(a.cancelSetup),
type:y.types.binaryConfirm,text:a.wizardCancelConfirm}));var b=this.warningDialog.on("close",d.hitch(this,function(a){switch(a){case y.returnValues.oneOrYes:this.warningDeferred.resolve({navigate:!0});this.stop(n);break;case y.returnValues.allOrNo:this.warningDeferred.resolve({navigate:!1});break;default:console.error(this.declaredClass+" - _createWarningDialog(): Unknown choice",a)}b.remove()}));this.own(b)},warn:function(a){this.warningDeferred=null;this.warningDeferred=new r;this.onLastStep?(this.warningDeferred.resolve({navigate:!0,
stopWizard:!0}),this.stop(a)):(this._createWarningDialog(!0===a),this.warningDialog.open());return this.warningDeferred.promise},setPreviousState:function(){var a=this.getCookieState();this.setCurrentStepIndex(a.sidx);this._setPreviousState(a);this._goToStep(a.sidx-1,!1);this.toggleSteps(a.sidx)},_setPreviousState:function(a){a=a.sinfo||[];for(var n=0;n<this.stepWidgets.length;n++)this.stepWidgets[n].set("hash",a[n].h)},toggleSteps:function(a){for(var n=0;n<this.stepWidgets.length;n++)n===a||n===
a-1?this.stepWidgets[n].set("enabled",!0):this.stepWidgets[n].set("enabled",!1)},disableSteps:function(a){for(;a<this.stepWidgets.length;a++){var n=this.stepWidgets[a];n.get("enabled")&&n.set("enabled",!1)}},hasPreviousState:function(){var a=this.getCookieState();return a&&a.sidx&&1<a.sidx?!0:!1},setCookieState:function(a){var b=f(this.cookieName);b&&(this.cookieState=n.parse(b));this.cookieState=d.mixin(this.cookieState,a);f(this.cookieName,n.stringify(this.cookieState),{path:"/"})},getStepParamsFromCookie:function(a){a=
a.toLowerCase();var n=this.getCookieState(),b=null;if(n)for(var c=0;c<n.sinfo.length;c++){var v=n.sinfo[c];if(v.h.toLowerCase()===a){b=v.stepParams;break}}return b},getCookieState:function(){var a=f(this.cookieName);a&&(a=n.parse(f(this.cookieName)));return a},_getStepInfoForCookie:function(){for(var a=[],n=0;n<this.stepWidgets.length;n++)a.push(this.stepWidgets[n].get("cookieObj"));return a},_buildSteps:function(){var a;a=null;this.stepWidgets=[];for(var n=0;n<this.config.length;n++)a=this.config[n],
a.title&&(a.title=w.unescapeHtml(a.title)),a.idx=n+1,a=new this.stepConstructor(a),t.place(a.domNode,this.stepsContainer,"last"),this.own(l.before(a.linkNode,"onclick",d.hitch(this,function(a){this.widget&&a.enabled&&this.widget.makeClean()},a))),this.stepWidgets.push(a)},setCurrentStepIndex:function(a){this.currentStepIndex=a?a:0;this.setCookieState(this.getCookieInfo())},getCookieInfo:function(){return{sidx:this.currentStepIndex+1}},setCurrentStepWidget:function(){this.currentStepWidget=this.getStep(this.currentStepIndex)},
getStep:function(a){return this.stepWidgets.length?this.stepWidgets[a]:null},updateStepParams:function(a,n){for(var b,c=0;c<this.stepWidgets.length;c++)b=this.stepWidgets[c],c===this.currentStepIndex?b.updateStepParams(a,n):b.updateStepParams(a,null);this.setCookieState({sinfo:this._getStepInfoForCookie()})},goToStepFromHash:function(a,n){this.unhideNext();a=a||window.location.hash;a||(a=this.defaultStep);a=a.toLowerCase();a="#"+a;for(var b,c,v=0;v<this.stepWidgets.length;v++)if(b=this.stepWidgets[v],
a===b.hash.toLowerCase()){c=b.idx-1;break}void 0!==c&&c!==this.currentStepIndex&&this._goToStep(c,!1);this.set("widget",n);this.widget.onStartWizard()},_setWidgetAttr:function(a){a&&(this.widget=a,this.onLastStep||this.widget.makeDirty(),this.addClasses())},_goToStep:function(a,n,b){try{this.setCurrentStepIndex(a);this.setCurrentStepWidget();if(this.currentStepWidget.skipable)return this.next();n?this.currentStepWidget.start():this.currentStepWidget.enable();this.onLastStep=this.isLastStep();this.toggleSteps(this.currentStepIndex);
this._setStepTitle()}catch(E){console.error(this.declaredClass+" could not go to step",a,n,E)}},_setStepTitle:function(a){var n=this.currentStepWidget.get("title");a&&(n=a);c.set(this.stepTitle,"innerHTML",this.currentStepIndex+1+": "+n)},onClickStop:function(a){w.stopEvent(a);this.emit("clickStop",a);this.warn(!0)},onClickNext:function(a){this.emit("clickNext",a);this.warningDialog&&(this.warningDialog=null);this.widget._dirty=!1;this.widget.wizardOnNextFunction?this.widget.wizardOnNextFunction():
this.next();a&&w.stopEvent(a)},isDone:function(){return this.stepWidgets.length<this.currentStepIndex},hashInSteps:function(a){a=a.toLowerCase();a=a.split("?")[0];for(var n=0;n<this.stepWidgets.length;n++){var b=this.stepWidgets[n].baseHash.replace("#",""),b=b.replace("?",""),b=b.toLowerCase();if(a===b)return!0}return!1},next:function(a,n){this.prevWizardStepHash=window.location.hash;a&&this.updateStepParams(a,n);this.currentStepWidget&&(this.currentStepIndex++,this.onStepComplete(a),this.isDone()?
this.stop():this._goToStep(this.currentStepIndex,!0,n))},isLastStep:function(){return this.currentStepIndex===this.stepWidgets.length-1},completeSteps:function(a,n){this.onCompleteSteps()},onCompleteSteps:function(){this.emit("completeSteps",null)},onStepComplete:function(a){this.emit("stepComplete",a);this.currentStepIndex===this.stepWidgets.length-1&&(this.complete=!0)},hideNext:function(){b.add(this.nextLink,"hidden")},unhideNext:function(){b.remove(this.nextLink,"hidden")},reset:function(){for(var a,
n=0;n<this.stepWidgets.length;n++)a=this.stepWidgets[n],a.destroy();this._init()},stop:function(a){this.destroy();this.isLastStep()||(this.widget&&this.widget.makeClean(),a&&this.doSafeRedirect())},doSafeRedirect:function(){hash(rc.session.getAdminRedirect())},destroy:function(){f("wiz",null,{expires:-1,path:"/"});f(this.cookieName,null,{expires:-1,path:"/"});this.warningDialog&&this.warningDialog.destroy();this.inherited(arguments)}})})},"webview/widget/WarningDialog":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/WarningDialog.html dojo/on ./WarningDialogEnums dijit/Dialog".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return h("webview/widget/WarningDialog",[m,p,k],{baseClass:"warningDialog",buttonClass:"webviewButton",closeButtonVisible:!0,content:null,text:"",templateString:r,title:"",type:b.types.binary,widgetsInTemplate:!0,binaryAllOptions:{all:f.all,cancel:f.cancel},binaryConfirmOptions:{yes:f.yes,no:f.no},binaryOptions:{yes:f.yes,cancel:f.cancel},binarySaveOptions:{save:f.save,cancel:f.cancel},deleteCancelOptions:{deleteOption:f.rcbDelete,cancel:f.cancel},multiOptions:{one:f.justOne,
all:f.all,cancel:f.cancel},saveDiscardOptions:{save:f.save,discard:f.discard},saveOptions:{yes:f.yes,no:f.no,cancel:f.cancel},informativeOptions:{ok:f.okay},_setBaseClassAttr:{node:"dialog",type:"attribute",attribute:"class"},_setCloseButtonVisibleAttr:function(b){b="boolean"===typeof b?b:!0;this.dialog.set("closable",b);this._set("closeButtonVisible",b)},_setContentAttr:function(b){l.place(b,this.dialogContent,"only")},_setTextAttr:{node:"dialogText",type:"innerHTML"},_setTitleAttr:{node:"dialog",
type:"attribute",attribute:"title"},_setTypeAttr:function(c){d.add(this.dialogButtons,"hidden");d.remove(this.dialogButtonsOneOrYes.domNode,"hidden");d.remove(this.dialogButtonsAllOrNo.domNode,"hidden");d.remove(this.dialogButtonsCancel.domNode,"hidden");this.set("closeButtonVisible",!1);switch(c){case b.types.multi:this.dialogButtonsOneOrYes.set("label",this.multiOptions.one);this.dialogButtonsAllOrNo.set("label",this.multiOptions.all);this.dialogButtonsCancel.set("label",this.multiOptions.cancel);
break;case b.types.binary:this.dialogButtonsOneOrYes.set("label",this.binaryOptions.yes);d.add(this.dialogButtonsAllOrNo.domNode,"hidden");this.dialogButtonsCancel.set("label",this.binaryOptions.cancel);break;case b.types.binarySave:this.dialogButtonsOneOrYes.set("label",this.binarySaveOptions.save);d.add(this.dialogButtonsAllOrNo.domNode,"hidden");this.dialogButtonsCancel.set("label",this.binarySaveOptions.cancel);break;case b.types.binaryAll:this.dialogButtonsOneOrYes.set("label",this.binaryAllOptions.all);
d.add(this.dialogButtonsAllOrNo.domNode,"hidden");this.dialogButtonsCancel.set("label",this.binaryAllOptions.cancel);break;case b.types.binaryConfirm:this.dialogButtonsOneOrYes.set("label",this.binaryConfirmOptions.yes);this.dialogButtonsAllOrNo.set("label",this.binaryConfirmOptions.no);d.add(this.dialogButtonsCancel.domNode,"hidden");break;case b.types.deleteCancel:this.dialogButtonsOneOrYes.set("label",this.deleteCancelOptions.deleteOption);this.dialogButtonsAllOrNo.set("label",this.deleteCancelOptions.cancel);
d.add(this.dialogButtonsCancel.domNode,"hidden");break;case b.types.save:this.dialogButtonsOneOrYes.set("label",this.saveOptions.yes);this.dialogButtonsAllOrNo.set("label",this.saveOptions.no);this.dialogButtonsCancel.set("label",this.saveOptions.cancel);break;case b.types.saveDiscard:this.dialogButtonsOneOrYes.set("label",this.saveDiscardOptions.save);this.dialogButtonsAllOrNo.set("label",this.saveDiscardOptions.discard);d.add(this.dialogButtonsCancel.domNode,"hidden");break;case b.types.informative:this.dialogButtonsOneOrYes.set("label",
this.informativeOptions.ok);d.add(this.dialogButtonsAllOrNo.domNode,"hidden");d.add(this.dialogButtonsCancel.domNode,"hidden");this.set("closeButtonVisible",!0);break;case b.types.blank:d.add(this.dialogButtonsOneOrYes.domNode,"hidden");d.add(this.dialogButtonsAllOrNo.domNode,"hidden");d.add(this.dialogButtonsCancel.domNode,"hidden");this.set("closeButtonVisible",!0);break;default:console.error(this.declaredClass+" - postCreate: Invalid dialog type ",c)}d.remove(this.dialogButtons,"hidden")},close:function(){this.dialog.hide()},
buildRendering:function(){this.inherited(arguments);this.own(this.dialogButtonsOneOrYes.on("click",g.hitch(this,function(){this.onOneOrYesEvent()})));this.own(this.dialogButtonsAllOrNo.on("click",g.hitch(this,function(){this.onAllOrNoEvent()})));this.own(this.dialogButtonsCancel.on("click",g.hitch(this,function(){this.onCancelEvent()})))},onOneOrYesEvent:function(){this.onClose(b.returnValues.oneOrYes)},onAllOrNoEvent:function(){this.onClose(b.returnValues.allOrNo)},onCancelEvent:function(){this.onClose(b.returnValues.none)},
onClose:function(b){this.dialog.hide();return b},open:function(){this.dialog.show()},destroy:function(){this.inherited(arguments)}})})},"webview/widget/WarningDialogEnums":function(){define([],function(){return{returnValues:{oneOrYes:"yes",allOrNo:"no",none:"none"},types:{binary:"binary",binaryAll:"binaryAll",binaryConfirm:"binaryConfirm",binarySave:"binarySave",deleteCancel:"deleteCancel",informative:"informative",multi:"multi",save:"save",saveDiscard:"saveDiscard",blank:"blank"}}})},"webview/widget/WizardStep":function(){define("dijit/_TemplatedMixin dijit/_Widget dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/text!webview/widget/templates/WizardStep.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return h("webview/widget/WizardStep",[m,p],{templateString:c,name:"",cookieKey:"",baseHash:"",hash:"",title:"",idx:-1,firstStep:!0,enabled:!1,unknownParams:null,knownParams:null,_onClickConnect:null,mandatory:!0,skipable:!1,prompt:"",showLine:!0,stepParams:null,cookieObj:null,setWidthMap:{1:"98%",2:"48%",3:"29%"},constructor:function(){this.cookieObj={h:this.hash,stepParams:this.stepParams}},postCreate:function(){this.inherited(arguments);this.firstStep&&f.add(this.domNode,
"first-step");l.set(this.indicatorNode,"innerHTML",this.idx);this.showLine||f.add(this.lineNode,"hidden");this.set("enabled",this.enabled)},enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)},_removeOnClick:function(){this._onClickConnect&&(this._onClickConnect.remove(),this._onClickConnect=null)},_getCookieObjAttr:function(){return{h:this.hash,stepParams:this.stepParams}},_setHashAttr:function(b){this.hash=b;l.set(this.linkNode,"href",this.hash)},_setEnabledAttr:function(b){this.enabled=
b;this._removeOnClick();this.enabled?(l.set(this.linkNode,"href",this.hash),f.remove(this.circleNode,"disabled"),f.remove(this.linkNode,"disabled"),f.remove(this.indicatorNode,"hidden")):(this._onClickConnect=r(this.linkNode,"click",d.hitch(this,function(b){g.stop(b)})),l.set(this.linkNode,"href","#"),f.add(this.linkNode,"disabled"),f.add(this.circleNode,"disabled"),f.add(this.indicatorNode,"hidden"));this.onEnabled()},onEnabled:function(){},updateStepParams:function(b,c){void 0!==c&&null!==c&&(this.stepParams=
c);this.hash=this.baseHash;null!==this.unknownParams&&k.forEach(this.unknownParams,function(c,f){var a=0<f?"\x26":"";k.forEach(b,function(n){n.name===c&&(n=encodeURIComponent(n.value),n=[a,c,"\x3d",n].join(""),-1===this.hash.indexOf(n)&&(this.hash+=n))},this)},this);this.knownParams&&k.forEach(this.knownParams,function(b){b=b.name+"\x3d"+b.value;-1===this.hash.indexOf(b)&&(this.hash+="\x26"+b)},this);this.set("enabled",this.enabled)},start:function(){this.enable();window.location.hash=this.hash},
destroy:function(){this.inherited(arguments);this._removeOnClick()}})})},"webview/admin/widget/AdminSetupWizard":function(){define(["dojo/_base/declare","dojo/hash","./_AdminWizard"],function(p,m,k){return p("webview/widget/AdminSetupWizard",[k],{defaultStep:"sites",cookieName:"sgw",constructorName:"AdminSetupWizard",complete:!1,constructor:function(){this.config=[{step:"addSite",baseHash:"#addSite",title:this.webviewStrings.createSite,firstStep:!0,showLine:!1},{step:"addSystem",baseHash:"#addSystem?",
unknownParams:["site"],title:this.webviewStrings.addASystem},{step:"addArchive",baseHash:"#addArchive?",unknownParams:["site","system"],title:this.webviewStrings.editArchiveProperties},{step:"changeInfo",baseHash:"#users/logininfo?",knownParams:[{name:"userID",value:"Admin"}],unknownParams:["site","system","userID"],title:this.webviewStrings.changeLoginInfo},{step:"setupFinished",baseHash:"#setupFinished?",unknownParams:["site","system"],title:this.webviewStrings.setupFinished}]},doSafeRedirect:function(){m("sites")},
completeSteps:function(h,g){this.updateStepParams(h,g);var d=this.getCookieState();this.onCompleteSteps(d.sinfo)},onCompleteSteps:function(h){this.emit("completeSteps",h);return h}})})},"webview/admin/widget/AdminSystemWizard":function(){define(["dojo/_base/declare","dojo/hash","dojo/io-query","../widget/_AdminWizard"],function(p,m,k,h){return p("webview/widget/AdminSystemWizard",[h],{defaultStep:"systems",cookieName:"sysw",constructorName:"AdminSystemWizard",constructor:function(){this.config=[{step:"addSystem",
baseHash:"#addSystem?",unknownParams:["site"],title:this.webviewStrings.addASystem,firstStep:!0,showLine:!1},{step:"addArchive",baseHash:"#addArchive?",unknownParams:["site","system"],title:this.webviewStrings.editArchiveProperties},{step:"setupFinished",baseHash:"#setupFinished?",unknownParams:["site","system"],title:this.webviewStrings.setupFinished}]},doSafeRedirect:function(){m("systems?"+k.objectToQuery({site:this.site}))}})})},"webview/admin/widget/AdminUserWizard":function(){define(["dojo/_base/declare",
"dojo/hash","dojo/io-query","./_AdminWizard"],function(p,m,k,h){return p("webview/widget/AdminUserWizard",[h],{defaultStep:"users",cookieName:"uw",constructorName:"AdminUserWizard",constructor:function(){this.config=[{step:"addUser",baseHash:"#users/adduser?",title:this.webviewStrings.addUser,firstStep:!0,showLine:!1,unknownParams:["site"]},{step:"changePermissions",baseHash:"#users/permissions?",title:this.webviewStrings.changePermissions,unknownParams:["site","userID"]},{step:"changeInfo",baseHash:"#users/logininfo?",
title:this.webviewStrings.changeLoginInfo,unknownParams:["site","userID"]},{step:"setupFinished",baseHash:"#setupFinished?",unknownParams:["site","system"],title:this.webviewStrings.setupFinished}]},completeSteps:function(g,d){this.updateStepParams(g,d);var l=this.getCookieState();this.onCompleteSteps(l.sinfo)},onCompleteSteps:function(g){this.emit("completeSteps",g);return g},doSafeRedirect:function(){m("users?"+k.objectToQuery({site:this.site}))}})})},"webview/_base/tooltip":function(){define(["dojo/_base/lang",
"rc/_base/tooltip","./_ToolTip"],function(p,m,k){return p.mixin(m,new k)})},"rc/_base/tooltip":function(){define(["dojo/_base/declare","./_ToolTip"],function(p,m){return new (p("rc/_base/tooltip",m,{}))})},"rc/_base/_ToolTip":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/string dojo/dom ../util/HelpUtil ../widget/Tooltip".split(" "),function(p,m,k,h,g,d,l){return k("rc/_base/_ToolTip",[p],{entries:[],showing:!1,_id:0,add:function(f,d,c,b){f=g.byId(f);var t=++this._id;
-1!=d.indexOf("{0}")&&(d=this._insertHelpLink(d,b),rc.session.hasRole(rc.session.roles.showHelp)||d.match("\x3ca")&&(d=d.slice(0,d.indexOf("\x3c"))));this.entries.push({node:f,tip:d,id:t,so:c});return t},hide:function(){m.forEach(this.entries,function(f){this._hide1(f)},this);this.showing=!1},remove:function(f){for(var d=this.entries.length-1;0<=d;--d)if(this.entries[d].id==f){this._hide1(this.entries[d]);this.entries.splice(d,1);break}},show:function(){m.forEach(this.entries,function(f){null==f.widget?
f.widget=new l({node:f.node,tip:f.tip,so:f.so}):f.widget.update()},this);this.showing=!0},update:function(){this.showing&&m.forEach(this.entries,function(f){null!=f.widget&&f.widget.update()},this)},_hide1:function(f){"widget"in f&&!f.widget._destroyed&&f.widget.destroyRecursive();delete f.widget},_insertHelpLink:function(f,r){return h.substitute(f,[d.getContextSensitiveHelpLink(r)])}})})},"rc/util/HelpUtil":function(){define(["dojo/_base/declare","dojo/has","dojo/hash","./encoding/base16","./encoding/base64"],
function(p,m,k,h,g){return new (p("rc/util/HelpUtil",[],{_defaultContext:"MPW000",getContextSensitiveHelpLink:function(d){var l="help.html#";d=this._getCurrentPageId(d);return l=null===d?l+this._defaultContext:l+d},_getCurrentPageId:function(d){var l,f=/\d+([a|b])\d+([a-z|\-]+)\d+/i,r=/\d+([a|b])\d+([a-z|\-]+)/i,c=/\d+([a-z|\-]+)/i,b=/\d+([a-z|\-]+)\d+/i,t=/([a-z|\-]+)\d+/i;d?l=d:k()&&(test.mode<test.PROXY_LIVE&&(l=h.toCharString(g.decode(k()))),null!==f.exec(l)?l=f.exec(l)[2]:null!==r.exec(l)?l=
r.exec(l)[2]:null!==c.exec(l)?l=c.exec(l)[1]:null!==b.exec(l)?l=b.exec(l)[1]:null!==t.exec(l)&&(l=t.exec(l)[1]));l||(l="");switch(l.toLowerCase()){case "audit":d="MPW020";break;case "alarms":d="MPW040";break;case "grp":case "view":d="MPW100";break;case "tl":case "stl":case "mtl":d="MPW200";break;case "rt":d="MPW210";break;case "sched":d="MPW300";break;case "cal":d="MPW400";break;case "as":d="MPW500";break;case "ws":d="MPW510";break;default:d=this._defaultContext}return d}}))})},"rc/widget/Tooltip":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/form/Button dijit/form/DropDownButton dijit/popup dijit/TooltipDialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n!rc/nls/all dojo/on dojo/query".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){g.close1=function(a){for(var n=[],b=0;b<this._stack.length;b++){for(var c=!1,v=0;v<n.length;v++)if(n[v].widget.id==this._stack[b].widget.id){c=!0;break}c||(this._stack[b].widget.id==a.id?n.push(this._stack[b]):n.unshift(this._stack[b]))}this._stack=n;this.close(a)};return f("rc/widget/Tooltip",[m,p],{templateString:'\x3cdiv class\x3d"rcTooltipInfoContainer"\x3e\x3cdiv class\x3d"rcTooltipInfoIcon" dojoAttachPoint\x3d"containerNode"\x3e\x3c/div\x3e\x3c/div\x3e',
node:null,tip:"",so:null,_ttd:null,ttdOpen:!1,_b:null,_buttonContainer:null,postCreate:function(){this.inherited(arguments);"s"in rc||(rc.s={});this.add(this.node,this.tip,this.so)},add:function(n,f,u){this.node=n;this._ttd=new d({autofocus:!1,content:f,style:{width:"250px"}});this.own(a(this._ttd,"open",r.hitch(this,this._onOpenDialog)),a(this._ttd,"close",r.hitch(this,this._onCloseDialog)));f=new k({baseClass:"rcTooltipClose",iconClass:"dijitDialogCloseIcon"});this.own(a(f,"click",r.hitch(this,
this.close)));b.place(f.domNode,this._ttd.containerNode,"first");this._buttonContainer=new b.create("div",{className:"rcTooltipButtonContainer"},c.body(),"last");this._b=new h({dropDown:this._ttd,iconClass:"rcTooltipIcon",baseClass:"rcTooltipButton"},b.create("div",null,this._buttonContainer));(u||"Object"==typeof u)&&q.set(this._b.domNode,u);this._b._closeDropDown=this._b.closeDropDown;this._b.closeDropDown=r.hitch(this,function(){g.close1(this._b.dropDown)});this._b._onBlur=this._onBlur;null!=n&&
b.place(this.domNode,n);this.update()},_onBlur:function(){},remove:function(){},update:function(){try{var a=t.position(this.node,!0);q.set(this._buttonContainer,{top:a.y+a.h/2-13+"px",left:a.x+a.w/2-21+"px"});this.ttdOpen&&this.open()}catch(x){console.error("error updating tooltip: ",x.message,x,this)}},open:function(){this._b.openDropDown()},close:function(a){this._ttd.onCancel()},_onOpenDialog:function(){this.ttdOpen=!0},_onCloseDialog:function(){this.ttdOpen=!1},destroy:function(){l.forEach(n("[dijitpopupparent\x3d"+
this._b.id+"]"),function(a){b.destroy(a)});g.close1(this._b.dropDown);this._b.destroyRecursive();this._ttd.destroyRecursive();b.destroy(this._buttonContainer);this.inherited(arguments)}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q){p=p("dijit.TooltipDialog",
[f,b,c,r],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:t,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",g.hitch(this,"_onKey")))},orient:function(b,a,n){b={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft",
"BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[a+"-"+n];m.replace(this.domNode,b,this._currentOrientClass||"");this._currentOrientClass=b},focus:function(){this._getFocusItems();l.focus(this._firstFocusItem)},
onOpen:function(b){this.orient(this.domNode,b.aroundCorner,b.corner);var a=b.aroundNodePos;"M"==b.corner.charAt(0)&&"M"==b.aroundCorner.charAt(0)?(this.connectorNode.style.top=a.y+(a.h-this.connectorNode.offsetHeight>>1)-b.y+"px",this.connectorNode.style.left=""):"M"==b.corner.charAt(1)&&"M"==b.aroundCorner.charAt(1)&&(this.connectorNode.style.left=a.x+(a.w-this.connectorNode.offsetWidth>>1)-b.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(b){if(b.keyCode==h.ESCAPE)this.defer("onCancel"),
b.stopPropagation(),b.preventDefault();else if(b.keyCode==h.TAB){var a=b.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(b.stopPropagation(),b.preventDefault()):a==this._firstFocusItem&&b.shiftKey?(l.focus(this._lastFocusItem),b.stopPropagation(),b.preventDefault()):a!=this._lastFocusItem||b.shiftKey?b.stopPropagation():(l.focus(this._firstFocusItem),b.stopPropagation(),b.preventDefault())}}});k("dojo-bidi")&&p.extend({_setTitleAttr:function(b){this.containerNode.title=this.textDir&&
this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,b):b;this._set("title",b)},_setTextDirAttr:function(b){this._created&&this.textDir==b||(this._set("textDir",b),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return p})},"webview/_base/_ToolTip":function(){define(["dojo/_base/declare","dojo/string","rc/_base/_ToolTip","../util/HelpUtil"],function(p,m,k,h){return p("webview/_base/_ToolTip",[k],{_insertHelpLink:function(g){return m.substitute(g,
[h.getContextSensitiveHelpLink()])}})})},"webview/util/HelpUtil":function(){define("dojo/_base/declare dojo/io-query dojo/has dojo/hash rc/util/encoding/base16 rc/util/encoding/base64".split(" "),function(p,m,k,h,g,d){return new (p("webview/util/HelpUtil",[],{getContextSensitiveHelpLink:function(){var d="Help/Index/",f=this._getCurrentPage();return null===f?d+"Welcome":d+f},_getCurrentPage:function(){var l,f=/^([a-z]+)(\/([a-z]+))*(\?(.*))$/i,r=/\d+([a|b])\d+([a-z|\-]+)\d+/i,c=/\d+([a|b])\d+([a-z|\-]+)/i,
b=/\d+([a-z|\-]+)/i,t=/\d+([a-z|\-]+)\d+/i,q=/([a-z|\-]+)\d+/i;-1<window.location.href.toLowerCase().indexOf("admin")?(f=f.exec(h().toLowerCase()),h()&&null!=f?(r=m.queryToObject(f[5]),l=f[1],"schedule"===l?"scheduletree"===r.view?l=r.view:"userview"===r.view&&(l="userviewes"):"trendlogworksheet"===l?l=r.mne:"site"===l&&"security"===r.view?l="sitesecurity":"users"===l?l=f[2]:"pointreports"===l?l="prps":"pointsreport"===l&&(l="prp")):l="Welcome"):h()?(test.mode<test.PROXY_LIVE&&(l=g.toCharString(d.decode(h()))),
null!==r.exec(l)?l=r.exec(l)[2]:null!==c.exec(l)?l=c.exec(l)[2]:null!==b.exec(l)?l=b.exec(l)[1]:null!==t.exec(l)?l=t.exec(l)[1]:null!==q.exec(l)&&(l=q.exec(l)[1])):l="Welcome";return l}}))})},"webview/_ContextManagerMixin":function(){define(["dojo/_base/declare","./util/AlarmUtil","./util/audit"],function(p,m,k){return p("webview/_ContextManagerMixin",[],{shouldSetContext:!0,constructor:function(){this.clearContext()},clearContext:function(){"undefined"!==typeof k.clearContextData&&k.clearContextData();
"undefined"!==typeof m.clearContextData&&m.clearContextData()}})})},"webview/util/AlarmUtil":function(){define("dojo/_base/declare dojox/validate rc/_base/util ./pointObject ../sys/desc ../sys/job".split(" "),function(p,m,k,h,g,d){return new (p("webview/util/AlarmUtil",null,{clearContextData:function(){sessionStorage.removeItem("alarmContextFilter")},getInnerText:function(d){var f=/>(.*)</g.exec(d);null!==f&&(d=f[1]);return d},parseAlarmAction:function(d){var f=/\(["']?([^"']*)["']?\)/i,r=new RegExp(/(#r\s*)/.source+
f.source,"i"),c=new RegExp(/(#m\s*)/.source+f.source,"i"),b=null,t="",q="";null!==(b=(new RegExp(/(#g\s*)/.source+f.source,"i")).exec(d))?(t="group",q=b[2]):null!==(b=r.exec(d))?(t="run",q=b[2]):null!==(b=c.exec(d))&&(q=t="");return{action:this._formatActionUrl(q,t),actionType:t,messageParts:b}},setAlarmContextForBACnetDevice:function(l,f){var r=d.bacnetDeviceIdToRCPPanel(f),c=f+"DEV"+f,b=g.getDescriptorFromMnemonic(Number(l),c);b===c&&r&&(c=h.getByMnemonic(r+"VAR1"),b=d.getControllerNameOfRCPPoint(c));
this._setAlarmContextData(l,f,r,b)},setAlarmContextForRcpPoint:function(l,f){var r=f.toPanel(),c=d.rcpToBACnetDeviceID(r),b=d.getControllerNameOfRCPPoint(f);this._setAlarmContextData(l,c,r,b)},_formatActionUrl:function(d,f){d=d.trim();""!==d&&(d=k.escapeHtml(d),"run"===f&&(m.isUrl(d)?d.match(/:\/\//gi)||d.match(/mailto:/gi)||(d="http://"+d):d=""));return d},_setAlarmContextData:function(d,f,r,c){r&&(r=r.toString());sessionStorage.setItem("alarmContextFilter",JSON.stringify({system:d,deviceId:f,rcpPanel:r,
deviceName:c+(" ("+(f||r)+")")}))}}))})},"webview/util/pointObject":function(){define("dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!../nls/afterHoursReport dojo/i18n!../nls/all dojo/i18n!../nls/panelfiles rc/bacnet/enums rc/util/pointObject dojo/sniff".split(" "),function(p,m,k,h,g,d,l){p.mixin(l,{mnemonicMap:{AFTERHOURSREPORT:"webview/reliable/FacilityManagerReport",AHACREQUESTS:"webview/reliable/AHACRequests",ALARM:"webview/reliable/Alarm",ALARMS:"webview/reliable/Alarm",ALARMHISTORY:"webview/reliable/AlarmHistory",
AS:"webview/reliable/AnnualSchedule",AUDIT:"webview/reliable/AuditTrail",BTLPROPS:"webview/bacnet/BTLProperties",BRT:"webview/bacnet/RuntimeLog",BTL:"webview/bacnet/Trend",BTLM:"webview/bacnet/TrendMultiple",CAL:"webview/bacnet/Calendar",ENTERPRISESCHEDULE:"webview/reliable/EnterpriseSchedule",FACILITYMANAGERREPORT:"webview/reliable/FacilityManagerReport",GRP:"webview/reliable/Group",MOBILEALARM:"webview/reliable/MobileAlarm",MTL:"webview/bacnet/TrendMultiple","MTL/Points":"webview/admin/worksheets/trendLogs/TrendLogPoints",
MTLS:"webview/admin/worksheets/trendLogs/TrendLogsView",NAVIGATIONGROUP:"webview/reliable/NavGroup","PAN-FILE":"webview/admin/panelFiles/PanelFiles","PAN-FILES":"webview/admin/panelFiles/PanelFiles",PRG:"webview/admin/programs/Program",PRGS:"webview/admin/worksheets/programs/ProgramsWorksheet",PRP:"webview/reliable/PointsReport",PRPS:"webview/reliable/PointsReportWorksheet","RT-REPORT":"webview/bacnet/RuntimeLogWorksheet",RT:"webview/reliable/RuntimeLog",RTS:"webview/reliable/RuntimeLogWorksheet",
SCHED:"webview/bacnet/Schedule",STL:"webview/bacnet/Trend","STL/Points":"webview/admin/worksheets/trendLogs/TrendLogPoints",STLS:"webview/admin/worksheets/trendLogs/TrendLogsView",TENANTREPORT:"webview/reliable/TenantReport",TL:"webview/reliable/Trend",WS:"webview/reliable/WeeklySchedule",VIEW:"webview/reliable/View"},_comTypeToPermissionKey:null,_mnemonicToFunctionMap:{AHACREQUESTS:"_ahacRequestsGetByMnemonic",AFTERHOURSREPORT:"_ahacRequestsGetByMnemonic",AUDIT:"_auditGetByMnemonic",BTLPROPS:"_btlPropsGetByMnemonic",
MTLS:"_trendGetByMnemonic",STLS:"_trendGetByMnemonic",RTS:"_runtimeGetByMnemonic","RT-REPORT":"_runtimeGetByMnemonic",ENTERPRISESCHEDULE:"_enterpriseGetByMnemonic",NAVIGATIONGROUP:"_navigationGroupGetByMnemonic",TENANTREPORT:"_ahacReportGetByMnemonic","PAN-FILE":"_panFileGetByMnemonic","PAN-FILES":"_panFilesGetByMnemonic",PRGS:"_cbasRequestsGetByMnemonic",PRP:"_pointsReportGetByMnemonic",PRPS:"_pointsReportWSGetByMnemonic"},_systemWideTypes:"ahacrequests enterpriseschedule facilitymanagerreport navigationgroup prp prps tenantreport".split(" "),
buildComTypeToPermissionMap:function(){null===this._comTypeToPermissionKey&&(this._comTypeToPermissionKey={},this._comTypeToPermissionKey[d.comTypes.OUTPUT]={key:rc.session.roles.outChg,isExtended:!1},this._comTypeToPermissionKey[d.comTypes.INPUT]={key:rc.session.roles.inChg,isExtended:!1},this._comTypeToPermissionKey[d.comTypes.VALUE]={key:rc.session.roles.varChg,isExtended:!1},this._comTypeToPermissionKey[d.comTypes.LOOP]={key:rc.session.roles.conChg,isExtended:!1},this._comTypeToPermissionKey[d.comTypes.SCHEDULE]=
{key:rc.session.roles.wsChg|rc.session.roles.esChg,isExtended:!1},this._comTypeToPermissionKey[d.comTypes.CALENDAR]={key:rc.session.roles.asChg,isExtended:!1},this._comTypeToPermissionKey[d.comTypes.ARRAY]={key:rc.session.roles.aryChg,isExtended:!1})},canEditByMnemonic:function(d){this.buildComTypeToPermissionMap();d=this.getByMnemonic(d);d=this._comTypeToPermissionKey[d.comType];return"undefined"!==typeof d?rc.session.hasRole(d.key,d.isExtended):!1},canFilterWithMnemonic:function(d){var f=!1;d=this._mnemonicRegex.exec(d);
var c=this._mnemonicRegexGroupIndexMap.instanceNumber;d&&"undefined"!==typeof d[c]&&"S"!==d[c].toUpperCase()&&(f=!0);return f},_ahacReportGetByMnemonic:function(){return k.afterHoursSummary},_ahacRequestsGetByMnemonic:function(){return k.afterHoursRequests},_cbasRequestsGetByMnemonic:function(d,r){return r.mainController+" "+h.programs},_enterpriseGetByMnemonic:function(d,r){this.rawObject.pointInstance=r.pointInstance;return m.rc_reliable_EnterpriseSchedule},_getPointObject:function(d,r){var c;if(null===
d)c=this._getNonStandards(r);else{var b=this._getPointInstance(d);c={mnemonic:r,mainController:this._getMainController(d),subController:d[this._mnemonicRegexGroupIndexMap.subpanel]?Number(d[this._mnemonicRegexGroupIndexMap.subpanel]):0,subnet:this._getSubnet(d),type:this._getTypeMne(d),pointInstance:b.instanceNumber};0!==c.type&&(c.type=c.type.toUpperCase(),b.isWorksheet&&(c.type+="S"))}c.device=c.mainController;c.mne=c.pointInstance;c.system=rc.pathInfo.system||-1;c.site=-1;return c},_navigationGroupGetByMnemonic:function(d,
r){this.rawObject.pointInstance=r.pointInstance;return m.navigationGroup},_panFileGetByMnemonic:function(d,r){return r.mainController+" "+g.panelFile},_panFilesGetByMnemonic:function(d,r){return r.mainController+" "+g.panelFiles},_pointsReportGetByMnemonic:function(d,r){this.rawObject.mainController=125;this.rawObject.pointInstance=r.pointInstance;return h.pointReport},_pointsReportWSGetByMnemonic:function(){return h.pointReports}});return l})},"webview/_WithRightSideFlyoutMixin":function(){define(["dojo/_base/declare",
"./widget/RightSideFlyout"],function(p,m){return p("webview/_WithRightSideFlyoutMixin",[],{_makeRightSideFlyoutContainer:function(){this.rightSideFlyout||(this.rightSideFlyout=new m({treePane:this._leftSideTreeContainer}),this.own(this.rightSideFlyout),this.container.addChild(this.rightSideFlyout),this.rightSideFlyout.startup())},onMadeTreePane:function(k){this.rightSideFlyout.set("treePane",k)}})})},"webview/widget/RightSideFlyout":function(){define("dijit/registry dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query dojo/window dojox/layout/ExpandoPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return m("webview/widget/RightSideFlyout",[c],{MIN_PANE_SIZE:50,baseClass:"right-side-flyout",id:"rightSideFlyout",splitter:!0,startExpanded:!1,region:"trailing",SPLITTER_CORRECTION_THRESHOLD:10,style:{width:"400px"},startup:function(){this.inherited(arguments);(this.paneSplitter=f("#rightSideFlyout_splitter")[0])&&h.add(this.paneSplitter,"right-side-flyout-splitter");this._toggleSplitterVisibility()},_getMaxWidth:function(){return.4*r.getBox().w},hide:function(){this._showing&&
(this.toggle(),!0===this._treeWasShowing&&!1===this.treePane._showing&&this.treePane.toggle())},closePane:function(){this._hideWrapper();this._showing=!1;this.resize({w:0})},onBeforeAddObjects:function(){this.treePane._showing||this.treePane.toggle()},resize:function(b){var c=this._getMaxWidth();this._showing&&b&&(b.w>c||l.get(this.domNode,"width")>c)&&(b.w=c);this.inherited(arguments,[b]);l.set(this.containerNode,"height",null)},show:function(b){this._setContent(b);this._titleHeight=20;this._showSize>
this._getMaxWidth()&&(this._showSize=this._getMaxWidth());this._showing||(this.toggle(),this.treePane._showing?(this.treePane.toggle(),this._treeWasShowing=!0):this._treeWasShowing=!1,this.searchResultsPane&&this.searchResultsPane.closeSearch())},_afterResize:function(){var b=this._currentSize;this._currentSize=d.getMarginBox(this.domNode);var c=p.byId("mpw");Math.abs(this._splitterWidget.domNode.offsetLeft-(r.getBox().w-this._currentSize.w))>this.SPLITTER_CORRECTION_THRESHOLD&&"undefined"!==typeof c&&
c.resize();c=this._currentSize.w;c>this.MIN_PANE_SIZE?(this._showing||(this._showing=!this._showing,this._showEnd()),this._showSize=c,this._setupAnims()):(this._showSize=b.w,this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(89,!0))},_hideEnd:function(){this.inherited(arguments);this._toggleSplitterVisibility();l.set(this.domNode,"width",0)},_hideWrapper:function(){h.add(this.domNode,"dojoxExpandoClosed");l.set(this.cwrapper,{overflow:"hidden"})},_setContent:function(b){this._content!==
b&&(this._content&&h.add(this._content,"hidden"),this._content=b,g.place(this._content,this.containerNode,"first"),h.remove(this._content,"hidden"))},_showEnd:function(){h.remove(this.domNode,"dojoxExpandoClosed");setTimeout(k.hitch(this._container,"layout"),1);this._toggleSplitterVisibility()},_toggleSplitterVisibility:function(){this.paneSplitter&&h.toggle(this.paneSplitter,"hidden",!this._showing)}})})},"dojox/layout/ExpandoPane":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/connect dojo/_base/event dojo/_base/fx dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/text!./resources/ExpandoPane.html dijit/layout/ContentPane dijit/_TemplatedMixin dijit/_Contained dijit/_Container".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){p.experimental("dojox.layout.ExpandoPane");return k("dojox.layout.ExpandoPane",[t,q,u,a],{attributeMap:m.delegate(t.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"}}),templateString:b,easeOut:"dojo._DefaultEasing",easeIn:"dojo._DefaultEasing",duration:420,startExpanded:!0,previewOpacity:.75,previewOnDblClick:!1,tabIndex:"0",_setTabIndexAttr:"iconNode",baseClass:"dijitExpandoPane",postCreate:function(){this.inherited(arguments);this._animConnects=
[];this._isHorizontal=!0;m.isString(this.easeOut)&&(this.easeOut=m.getObject(this.easeOut));m.isString(this.easeIn)&&(this.easeIn=m.getObject(this.easeIn));var a="",b=!this.isLeftToRight();if(this.region){switch(this.region){case "trailing":case "right":a=b?"Left":"Right";this._needsPosition="left";break;case "leading":case "left":a=b?"Right":"Left";break;case "top":a="Top";break;case "bottom":this._needsPosition="top",a="Bottom"}r.add(this.domNode,"dojoxExpando"+a);r.add(this.iconNode,"dojoxExpandoIcon"+
a);this._isHorizontal=/top|bottom/.test(this.region)}f.set(this.domNode,{overflow:"hidden",padding:0});this.connect(this.domNode,"ondblclick",this.previewOnDblClick?"preview":"toggle");this.iconNode.setAttribute("aria-controls",this.id);this.iconNode.setAttribute("role","button");this.iconNode.setAttribute("aria-label",this.titleNode.innerHTML);this.previewOnDblClick&&this.connect(this.getParent(),"_layoutChildren",m.hitch(this,function(){this._isonlypreview=!1}))},_startupSizes:function(){this._container=
this.getParent();this._closedSize=this._titleHeight=c.getMarginBox(this.titleWrapper).h;if(this.splitter){var a=this.id;h.forEach(dijit.registry.toArray(),function(b){b&&b.child&&b.child.id==a&&this.connect(b,"_stopDrag","_afterResize")},this)}this._currentSize=c.getContentBox(this.domNode);this._showSize=this._currentSize[this._isHorizontal?"h":"w"];this._setupAnims();this.startExpanded?this._showing=!0:(this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(99,!0));this.domNode.setAttribute("aria-expanded",
this._showing);this._hasSizes=!0},_afterResize:function(a){a=this._currentSize;this._currentSize=c.getMarginBox(this.domNode);var b=this._currentSize[this._isHorizontal?"h":"w"];b>this._titleHeight?(this._showing||(this._showing=!this._showing,this._showEnd()),this._showSize=b,this._setupAnims()):(this._showSize=a[this._isHorizontal?"h":"w"],this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(89,!0))},_setupAnims:function(){h.forEach(this._animConnects,g.disconnect);var a={node:this.domNode,
duration:this.duration},b={},c=this._showSize,q=this._closedSize,d={},f=this._isHorizontal?"height":"width",u=this._needsPosition;b[f]={end:c};d[f]={end:q};u&&(b[u]={end:function(a){return parseInt(a.style[u],10)-c+q}},d[u]={end:function(a){return parseInt(a.style[u],10)+c-q}});this._showAnim=l.animateProperty(m.mixin(a,{easing:this.easeIn,properties:b}));this._hideAnim=l.animateProperty(m.mixin(a,{easing:this.easeOut,properties:d}));this._animConnects=[g.connect(this._showAnim,"onEnd",this,"_showEnd"),
g.connect(this._hideAnim,"onEnd",this,"_hideEnd")]},preview:function(){this._showing||(this._isonlypreview=!this._isonlypreview);this.toggle()},toggle:function(){this._showing?(this._hideWrapper(),this._showAnim&&this._showAnim.stop(),this._hideAnim.play()):(this._hideAnim&&this._hideAnim.stop(),this._showAnim.play());this._showing=!this._showing;this.domNode.setAttribute("aria-expanded",this._showing)},_hideWrapper:function(){r.add(this.domNode,"dojoxExpandoClosed");f.set(this.cwrapper,{visibility:"hidden",
opacity:"0",overflow:"hidden"})},_showEnd:function(){f.set(this.cwrapper,{opacity:0,visibility:"visible"});l.anim(this.cwrapper,{opacity:this._isonlypreview?this.previewOpacity:1},227);r.remove(this.domNode,"dojoxExpandoClosed");this._isonlypreview?(this._previewShowing=!0,this.resize()):setTimeout(m.hitch(this._container,"layout"),15)},_hideEnd:function(){this._isonlypreview?this._previewShowing=!1:setTimeout(m.hitch(this._container,"layout"),25);this._isonlypreview=!1},resize:function(a){this._hasSizes||
this._startupSizes(a);var b=c.getMarginBox(this.domNode);this._contentBox={w:a&&"w"in a?a.w:b.w,h:(a&&"h"in a?a.h:b.h)-this._titleHeight};f.set(this.containerNode,"height",this._contentBox.h+"px");a&&c.setMarginBox(this.domNode,a);this._layoutChildren();this._setupAnims()},_trap:function(a){d.stop(a)}})})},"webview/systemTree/_SystemTreeMixin":function(){define("dojo/_base/declare dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/i18n!webview/nls/panelfiles dojo/i18n!webview/nls/remoteAlarmNotifications dojo/i18n!webview/nls/roles".split(" "),
function(p,m,k,h,g,d){return p("webview/systemTree/_SystemTreeMixin",[],{_buildTitleText:function(l,f,r){var c="",b="";switch(l.toLowerCase()){case "site":b=this.componentMap[l][f]?this.componentMap[l][f]:k.treeSite;c=b+" "+k.settings;break;case "navgroup":b=this.componentMap[l][f]?this.componentMap[l][f]:k.navGroup;c=b+" "+k.settings;break;case "system":case "addarchive":l="system";b=this.componentMap[l][f]?this.componentMap[l][f]:k.system;c=b+" "+k.settings;break;case "tree":b=this.componentMap[l][f]?
this.componentMap[l][f]:k.tree;c=b+" "+k.settings;break;case "schedule":b=this.componentMap[l][f]?this.componentMap[l][f]:k.enterpriseSchedule;c=b+" "+k.settings;break;case "remotealarmnotifications":c=g.emailAlarmRecipients;break;case "reporttemplate":b=this.componentMap[l][f]?this.componentMap[l][f]:m.reportTemplate;c=b+" "+k.settings;break;case "panelfiles":this.componentMap.system[r]&&(b=this.componentMap.system[r]);c=b+" "+h.backupRestore;break;case "program":c=k.programs;break;case "device":null!==
this.componentMap&&(c=this.componentMap[l][r][f]);""===c&&(c=l);break;case "addsite":c=k.wvAddSite;break;case "systems":c=k.wvSystemsList;break;case "addsystem":c=k.wvAddSystem;break;case "reporttemplates":c=m.reportTemplates;break;case "trees":c=k.wvTreesList;break;case "roleslist":c=d.roleList;break;case "rolepermissions":c=d.rolePermissions;break;case "rolelogininfo":c=d.roleLoginInfo;break;case "schedules":c=k.wvSchedulesList;break;case "users":c=k.listUsers;break;case "users/permissions":c=k.userPermissions;
break;case "users/permittedschedules":c=k.enterpriseSchedulePermissions;break;case "users/logininfo":c=k.loginInfo;break;case "users/adduser":c=k.addUser;break;case "setupfinished":c=k.setupFinished;break;case "navgroups":c=k.navGroupsList;break;case "sites":case "":c=k.wvSitesList;break;case "trendlogworksheet":c=k.trendLogWorksheet;break;case "notificationclasses":c=k.notificationClasses;break;case "pointreports":b="";this.componentMap.system[r]&&(b=this.componentMap.system[r]+"/");c=b+k.pointReports+
" (PRPS)";break;case "pointsreport":c=k.pointReports;break;default:c=""}return c},_buildToolTipText:function(l){switch(l.toLowerCase()){case "sites":l=k.treeSites;break;case "site":l=k.treeSite;break;case "systems":l=k.treeSystems;break;case "system":l=k.treeSystem;break;case "device":l=k.deviceActions;break;case "schedules":l=k.treeSchedules;break;case "schedule":l=k.treeSchedule;break;case "remotealarmnotifications":l=g.emailAlarmRecipients;break;case "reporttemplate":l=k.treeReport;break;case "reporttemplates":l=
k.treeReports;break;case "navgroups":l=k.treeNavGroups;break;case "navgroup":l=k.treeNavGroup;break;case "roleslist":l=d.roleList;break;case "rolepermissions":l=d.rolePermissions;break;case "rolelogininfo":l=d.roleLoginInfo;break;case "trees":l=k.treeTrees;break;case "tree":l=k.treeTree;break;case "users":l=k.treeUsers;break;case "users/logininfo":l=k.treeLoginInfo;break;case "trendlogworksheet":l=k.treeTrendLogWorksheet;break;case "notificationclasses":l=k.notificationClasses;break;default:l=""}return l}})})},
"webview/features/leftSideFlyout/LeftSideTreeContainer":function(){define("dijit/form/Button dijit/registry dojo/_base/declare dojo/_base/lang dojo/cookie dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/topic dojox/layout/ExpandoPane ./_AdminTreeMixin ./_KeywordSelectorMixin ./_NavigationTreeMixin ./_ObjectSelectorMixin ../../systemTree/_SystemTreeMixin".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return k("webview/features/LeftSideTreeContainer",[b,
t,q,u,a,n],{baseClass:"navTree",defaultToAdminTree:!1,id:"rcSystemNav",splitter:!0,startExpanded:!0,region:"leading",style:{width:"16em"},_currentTree:null,_lastOpenedWidget:null,_searchForObject:null,_searchClosedHandle:null,_searchableWidgetSubscription:null,_openOverlayWidgets:null,_unsearchableWidgetSubscription:null,postCreate:function(){this.inherited(arguments);this._openOverlayWidgets={};this._makeTreeContainer();this._updateAdminTree();this._loadNavigationTree();this.own(c.subscribe("updateNavTree",
h.hitch(this,this._updateAdminTree)),c.subscribe("searchableWidget",h.hitch(this,this._widgetIsSearchable)),c.subscribe("unsearchableWidget",h.hitch(this,this._widgetIsNotSearchable)),c.subscribe("filterRequested",h.hitch(this,this._showSearchForObject)),c.subscribe("filterRequestedSite",h.hitch(this,function(a){this._expandPane();a=this._getSiteTreeNodeBySiteId(a);this._showSearchForObject(a)})),c.subscribe("showKeywordSelector",h.hitch(this,function(a){this._expandPane();this._showKeywordSelector(a)})))},
closeSearch:function(){null!==this._searchForObject&&this._searchForObject.get("isOpen")&&(this._searchForObject.closeSearch(),this._closedTreeOverlay(this._searchForObject));this._closeKeywordSelector()},startup:function(){this.inherited(arguments)},_closedTreeOverlay:function(a){this._openOverlayWidgets[a.id]&&delete this._openOverlayWidgets[a.id];0>=Object.keys(this._openOverlayWidgets).length&&this._currentTree&&d.remove(this._currentTree.domNode,"hidden")},_expandPane:function(){this._showing||
this.iconNode.click()},_makeTreeContainer:function(){this._treeButtonContainer=l.create("div",{"class":"tree-buttons"},this.containerNode,"last")},_placeTreeSelectButtons:function(){this.adminTree&&this.userNavigationTree?(d.remove(this._treeButtonContainer,"hidden"),this._adminTreeButton||(this._adminTreeButton=new p({iconClass:"treeButtonIcon svg-adminTreeIcon",baseClass:"treeButton adminButton",title:r.systemTree,onClick:h.hitch(this,this._toggleShownTree,!0,!0)}),l.place(this._adminTreeButton.domNode,
this._treeButtonContainer)),this._userTreeButton||(this._userTreeButton=new p({iconClass:"treeButtonIcon svg-userTreeIcon",baseClass:"treeButton userButton",title:r.tree,onClick:h.hitch(this,this._toggleShownTree,!1,!0)}),l.place(this._userTreeButton.domNode,this._treeButtonContainer)),this._toggleShownTree(this.defaultToAdminTree,!0)):(this.adminTree&&this._toggleShownTree(!0,!0),d.add(this._treeButtonContainer,"hidden"));this._toggleContainerVisible(null!==this.adminTree&&1<this.adminTree.model.store.query().length||
null!==this.userNavigationTree)},_showScrollbar:function(){this.keywordSelectorOpen||this.objectSelectorOpen||(this.cwrapper.scrollTop=this._currentScroll,d.remove(this.domNode,"no-scroll"))},_showingTreeOverlay:function(a){this._openOverlayWidgets[a.id]=a;if(this._lastOpenedWidget&&this._lastOpenedWidget!=a.id){var b=this._openOverlayWidgets[this._lastOpenedWidget];b&&d.add(b.domNode,"hidden")}this._lastOpenedWidget=a.id;this._currentTree&&this._currentTree.domNode||(this._currentTree=this.adminTree);
this._currentTree&&this._currentTree.domNode||c.publish("sticky",{type:"error",message:"\x3cp\x3e"+f.unexpected+"\x3c/p\x3e\x3cp\x3e"+f.unexpectedFix+"\x3c/p\x3e"});d.add(this._currentTree.domNode,"hidden")},_toggleContainerVisible:function(a){var b=m.byId("rcSystemNav"),n=m.byId("rcSystemNav_splitter");!0===a?(d.remove(b.domNode,"hidden"),n&&d.remove(n.domNode,"hidden")):(d.add(b.domNode,"hidden"),n&&d.add(n.domNode,"hidden"));m.byId("mpw").resize()},_toggleShownTree:function(a,b){if(this.adminTree||
this.userNavigationTree){var n=!1;!1!==b&&null!==this._searchForObject&&this._searchForObject.get("isOpen")&&(this._searchForObject.closeSearch(),n=!0);!1!==b&&this._keywordSelector&&this._keywordSelector.get("isOpen")&&(this._keywordSelector.closeKeywordSelector(),n=!0);this.treePaneFlyout.forceHide();!a&&this.userNavigationTree?(this.adminTree&&d.add(this.adminTree.domNode,"hidden"),n||d.remove(this.userNavigationTree.domNode,"hidden"),this._userTreeButton&&(d.add(this._userTreeButton.domNode,"selected"),
d.remove(this._adminTreeButton.domNode,"selected")),this._currentTree=this.userNavigationTree):(this.userNavigationTree&&d.add(this.userNavigationTree.domNode,"hidden"),this.adminTree&&!n&&d.remove(this.adminTree.domNode,"hidden"),this._adminTreeButton&&(d.add(this._adminTreeButton.domNode,"selected"),d.remove(this._userTreeButton.domNode,"selected")),this._currentTree=this.adminTree)}},destroy:function(){this._destroyNavigationTree();this._destroySearchForObject();this.inherited(arguments)}})})},
"webview/features/leftSideFlyout/_AdminTreeMixin":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/store/Memory ../../admin/widget/Tree ../../systemTree/_SystemTreeMixin".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q){return d("webview/features/leftSideFlyout/_AdminTreeMixin",[],{_searchForObject:null,_resultsFetchedHandle:null,adminTree:null,
onAdminTreeNodeClick:function(b,a,n){},onLoadedAdminTreeData:function(b,a){},_buildAdminTree:function(q){var a=!1,n=this.defaultToAdminTree;this.adminTree&&(a=f.contains(this.adminTree.domNode,"searchEnabled"),n=!f.contains(this.adminTree.domNode,"hidden"),this.adminTree.destroy());var v=new b({data:{identifier:"id",items:q,label:"name"},getChildren:function(a){var b=[];if(a.children)for(var n=0;n<a.children.length;n++)b.push(this.query({id:a.children[n]._reference})[0]);return b}}),v=new h({store:v,
query:{type:"root"},mayHaveChildren:function(a){return void 0!==a.children&&0<a.children.length}});this.adminTree=new t({persist:!0,id:"adminNavTree",model:v,showRoot:!1,getIconClass:l.hitch(this,function(a){var b="dijitTreeIcon dijitLeaf ";if(a.widget&&a.widget.length){var n=a.widget.toLowerCase();if(a.type)switch(a.type.toLowerCase()){case "user":n="users";break;case "device":a.deviceModel=a.deviceModel.replace(/3rd/i,"third-party"),n=a.deviceModel.toLowerCase()}b+="adminTree svg-"+n+"Icon"}return b}),
getTooltip:l.hitch(this,function(a){var b="";"device"!==a.type?b=this._buildTitleText(a.widget.toLocaleLowerCase(),a.widgetId):this._buildTitleText(a.widget.toLocaleLowerCase(),a.widgetId,a.systemId);""===b&&(b=a.name);a=this._buildToolTipText(a.widget);return b+" ("+a+")"})},r.create("div",{},this.containerNode));n||f.add(this.adminTree.domNode,"hidden");f.toggle(this.adminTree.domNode,"searchEnabled",a);this.own(c(this.adminTree,"click",l.hitch(this,this._onAdminTreeNodeClick)));this.adminTree.onLoadDeferred.then(l.hitch(this,
this._onLoadedAdminTreeData,q,this.componentMap))},_buildComponentMap:function(b){this.componentMap={site:{},system:{},schedule:{},reporttemplate:{},navgroup:{},tree:{},user:{},device:{}};b=g.filter(b,function(a){return void 0!==a.widgetId});g.forEach(b,l.hitch(this,function(a){a.type&&"user"===a.type.toLowerCase()?this.componentMap.user[a.widgetId]=a.name:a.type&&"device"===a.type.toLowerCase()?(this.componentMap[a.widget.toLowerCase()][a.systemId]={},this.componentMap[a.widget.toLowerCase()][a.systemId][a.widgetId]=
a.name):"undefined"!==typeof this.componentMap[a.widget.toLowerCase()]&&(this.componentMap[a.widget.toLowerCase()][a.widgetId]=a.name)}))},_getSiteTreeNodeBySiteId:function(b){b=this.adminTree.model.store.query({site:b,widget:"site"})[0];if(!this.adminTree.getNodesByItem(b)[0]){var a=this.adminTree.model.store.query({widget:"sites"})[0],a=this.adminTree.getNodesByItem(a)[0];this.adminTree._expandNode(a)}return b},_onAdminTreeNodeClick:function(b,a,n){this.onAdminTreeNodeClick(b,a,n)},_onLoadedAdminTreeData:function(b,
a){this._placeTreeSelectButtons();this.onLoadedAdminTreeData(b,a)},_updateAdminTree:function(){rc.xhr.request({type:"json",url:"data/adminlinks.json",preventCache:!0,load:l.hitch(this,function(b){b.data&&b.data.length&&(this._buildComponentMap(b.data),this._buildAdminTree(b.data))})})}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(p,m,k,h,g,d,l){return k("dijit.tree.ObjectStoreModel",
l,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(d){g.mixin(this,d);this.childrenCache={}},getRoot:function(f,r){if(this.root)f(this.root);else{var c=this.store.query(this.query);c.then&&this.own(c);d(c,g.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];f(this.root);c.observe&&c.observe(g.hitch(this,function(b){this.onChange(b)}),!0)}),r)}},mayHaveChildren:function(){return!0},
getChildren:function(f,r,c){var b=this.store.getIdentity(f);if(this.childrenCache[b])d(this.childrenCache[b],r,c);else{var t=this.childrenCache[b]=this.store.getChildren(f);t.then&&this.own(t);t.observe&&this.own(t.observe(g.hitch(this,function(b,c,a){this.onChange(b);c!=a&&d(t,g.hitch(this,"onChildrenChange",f))}),!0));d(t,r,c)}},isItem:function(){return!0},getIdentity:function(d){return this.store.getIdentity(d)},getLabel:function(d){return d[this.labelAttr]},newItem:function(d,r,c,b){return this.store.put(d,
{parent:r,before:b})},pasteItem:function(d,r,c,b,t,q){var f=new h;if(r===c&&!b&&!q)return f.resolve(!0),f;r&&!b?this.getChildren(r,g.hitch(this,function(a){a=[].concat(a);var b=p.indexOf(a,d);a.splice(b,1);this.onChildrenChange(r,a);f.resolve(this.store.put(d,{overwrite:!0,parent:c,oldParent:r,before:q}))})):f.resolve(this.store.put(d,{overwrite:!0,parent:c,oldParent:r,before:q}));return f},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"webview/admin/widget/Tree":function(){define("dijit/Tree dojo/_base/array dojo/_base/lang dojo/cookie dojo/_base/declare dojo/dom-class dojo/has dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all ./_TreeNode".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return g("webview/admin/widget/Tree",[p],{getLabel:function(b){if(b.widget)switch(b.widget.toLowerCase()){case "sites":return r.wvSites;case "systems":return r.wvSystems;case "trees":return r.wvTrees;case "schedules":return r.wvSchedules;case "reporttemplates":return f.reportTemplates;case "navgroups":return r.navGroups;case "users":return r.wvUsers;case "trendlogworksheet":return r.trendLogWorksheet;default:return this.model.getLabel(b)}else return this.model.getLabel(b)},
resize:function(b){},showHideSearch:function(b,c,q){d.toggle(this.domNode,"searchEnabled",b);this._showHideMagnifyingGlass(this.model.store.query(),!0);b=null;if(c){c=this.model.store.query(k.hitch(this,this._getNodesInSpecificSystem,c));"undefined"!==typeof q&&(c=c.concat(this.model.store.query(function(a){return"site"===a.widget&&a.site===q})));var f=c.map(function(a){return a.id});b=this.model.store.query(function(a){return-1===f.indexOf(a.id)});this._showHideMagnifyingGlass(b,!1)}else"undefined"!==
typeof q&&(b=this.model.store.query(function(a){return a.site!==q}),this._showHideMagnifyingGlass(b,!1))},_createTreeNode:function(b){return new c(b)},_getNodesInSpecificSystem:function(b,c){return"undefined"!==typeof c.systemId?Number(c.systemId)===Number(b):"system"===c.widget?Number(c.widgetId)===Number(b):!1},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var b=[],c;for(c in this._openedNodes)b.push(c);h(this.cookieName,b.join(","),{expires:365,path:webview.pathUtil.currentSiteInfo.rootPath})}},
_showHideMagnifyingGlass:function(b,c){for(var q=0;q<b.length;++q)this.getNodesByItem(b[q]).filter(function(b){return"undefined"!==typeof b}).forEach(function(b){d.toggle(b.domNode,"node-searchable",c);b.searchEnabled=!c})},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var b=h(this.cookieName);b&&m.forEach(b.split(","),function(b){this._openedNodes[b]=!0},this)}},_onDblClick:function(){}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O){function M(a){return n.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var P=h("dijit._TreeNode",[D,E,F,G,I],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);q("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:H,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";c.set(this.domNode,
"backgroundPosition",b+" 0px");c.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);p.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,n=b.model;b._v10Compat&&a===n.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,n){var v="_"+b+"Class";b+="Node";var q=this[v];this[v]=this.tree["get"+n+"Class"](a,this.isExpanded);f.replace(this[b],this[v]||"",q||"");c.set(this[b],this.tree["get"+n+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;f.toggle(this.domNode,"dijitTreeIsRoot",a);f.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;f.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return M(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");f.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=t.wipeIn({node:this.containerNode,duration:C.defaultDuration}),b=this._expandDeferred=new g(function(){a.stop()});m.after(a,"onEnd",function(){b.resolve(!0)},!0);a.play();return M(b)},collapse:function(){if(this._collapseDeferred)return M(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");f.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=t.wipeOut({node:this.containerNode,duration:C.defaultDuration}),b=this._collapseDeferred=new g(function(){a.stop()});m.after(a,"onEnd",
function(){b.resolve(!0)},!0);a.play();return M(b)},indent:0,setChildItems:function(a){var b=this.tree,n=b.model,c=[],v=b.focusedChild,q=this.getChildren();p.forEach(q,function(a){F.prototype.removeChild.call(this,a)},this);this.defer(function(){p.forEach(q,function(a){if(!a._destroyed&&!a.getParent()){var c=function(a){var v=n.getIdentity(a.item),q=b._itemNodesMap[v];1==q.length?delete b._itemNodesMap[v]:(v=p.indexOf(q,a),-1!=v&&q.splice(v,1));p.forEach(a.getChildren(),c)};b.dndController.removeTreeNode(a);
c(a);if(b.persist){var q=p.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),d;for(d in b._openedNodes)d.substr(0,q.length)==q&&delete b._openedNodes[d];b._saveExpandedNodes()}b.lastFocusedChild&&!l.isDescendant(b.lastFocusedChild.domNode,b.domNode)&&delete b.lastFocusedChild;v&&!l.isDescendant(v.domNode,b.domNode)&&b.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,p.forEach(a,function(a){var v=n.getIdentity(a),q=b._itemNodesMap[v],
d;if(q)for(var f=0;f<q.length;f++)if(q[f]&&!q[f].getParent()){d=q[f];d.set("indent",this.indent+1);break}d||(d=this.tree._createTreeNode({item:a,tree:b,isExpandable:n.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),q?q.push(d):b._itemNodesMap[v]=[d]);this.addChild(d);(this.tree.autoExpand||this.tree._state(d))&&c.push(b._expandNode(d))},this),p.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=d(c);this.tree._startPaint(a);return M(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());p.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");f.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){A.focus(this.focusNode)}});q("dojo-bidi")&&P.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),p.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this))}});var S=h("dijit.Tree",[D,L,E,I],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:J,persist:!1,autoExpand:!1,dndController:O,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){x.publish(this.id,n.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new g;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(v(this.containerNode,
v.selector(".dijitTreeNode",w.enter),function(b){a._onNodeMouseEnter(B.byNode(this),b)}),v(this.containerNode,v.selector(".dijitTreeNode",w.leave),function(b){a._onNodeMouseLeave(B.byNode(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow",y.press),function(b){a._onNodePress(B.getEnclosingWidget(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow",y),function(b){a._onClick(B.getEnclosingWidget(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(B.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(m.after(this.model,"onChange",n.hitch(this,"_onItemChange"),!0),m.after(this.model,"onChildrenChange",n.hitch(this,"_onItemChildrenChange"),!0),m.after(this.model,"onDelete",n.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){n.isString(this.dndController)&&(this.dndController=n.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=M(this.pendingCommandsPromise);this.onLoadDeferred.then(n.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;u.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=n.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=n.hitch(this,function(a,b,n){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,n)}));this.model=new N(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(n.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(n.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),n.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=n.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(n.hitch(this,function(){var c=
p.map(a,function(a){return!a||n.isString(a)?a:b.model.getIdentity(a)}),v=[];p.forEach(c,function(a){v=v.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",v)}))},_setPathAttr:function(a){return a.length?M(this.set("paths",[a]).then(function(a){return a[0]})):M(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,n){var v=a.shift(),q=p.filter(n,function(a){return a.getIdentity()==v})[0];if(q)return a.length?c._expandNode(q).then(function(){return b(a,
q.getChildren())}):q;throw new S.PathError("Could not expand path at "+v);}var c=this;return M(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return d(p.map(a,function(a){a=p.map(a,function(a){return a&&n.isObject(a)?c.model.getIdentity(a):a});if(a.length)return b(a,[c.rootNode]);throw new S.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(n){return b._expandNode(n).then(function(){var b=p.filter(n.getChildren()||[],function(a){return a.isExpandable});return d(p.map(b,a))})}var b=this;return M(a(this.rootNode))},collapseAll:function(){function a(n){var c=p.filter(n.getChildren()||[],function(a){return a.isExpandable}),c=d(p.map(c,a));return!n.isExpanded||n==b.rootNode&&!b.showRoot?c:c.then(function(){return b._collapseNode(n)})}var b=this;return M(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var n=this._getNext(b);n&&n.isTreeNode&&this.focusNode(n)},_onUpArrow:function(a,b){var n=b.getPreviousSibling();if(n)for(b=n;b.isExpandable&&
b.isExpanded&&b.hasChildren();)n=b.getChildren(),b=n[n.length-1];else if(n=b.getParent(),this.showRoot||n!==this.rootNode)b=n;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var n=b.getParent();n&&n.isTreeNode&&(this.showRoot||n!==this.rootNode)&&this.focusNode(n)}},focusLastChild:function(){var a=
this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,
b){return l.isDescendant(a,b.expandoNode)||l.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,n,c){var v=this.isExpandoNode(b.target,a);a.isExpandable&&(n||v)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[c](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,
"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){u.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){u.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","",
"2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,v=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new g,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},
function(b){console.error(v,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(n.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var n=this.getLabel(a),
c=this.getTooltip(a);p.forEach(b,function(b){b.set({item:a,label:n,tooltip:c});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var n=this.model.getIdentity(a);(n=this._itemNodesMap[n])&&p.forEach(n,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(p.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!l.isDescendant(this.lastFocusedChild.domNode,
this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!l.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=k(this.cookieName);a&&p.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var n=p.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");
if(1===arguments.length)return this._openedNodes[n];b?this._openedNodes[n]=!0:delete this._openedNodes[n];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);k(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!n.isString(this.dndController)&&this.dndController.destroy();
this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&r.setMarginBox(this.domNode,a);this._nodePixelIndent=r.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(n.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),
delete this._adjustWidthsTimer);var b=n.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});z(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new P(a)},
focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});q("dojo-bidi")&&S.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});S.PathError=b("TreePathError");S._TreeNode=P;return S})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(p,m,k,h){return k("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],
newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(g){h.mixin(this,g);this.connects=[];g=this.store;if(!g.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");g.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([m.after(g,"onNew",h.hitch(this,"onNewItem"),!0),m.after(g,"onDelete",h.hitch(this,"onDeleteItem"),!0),m.after(g,"onSet",h.hitch(this,"onSetItem"),
!0)]))},destroy:function(){for(var g;g=this.connects.pop();)g.remove()},getRoot:function(g,d){this.root?g(this.root):this.store.fetch({query:this.query,onComplete:h.hitch(this,function(d){if(1!=d.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+d.length+" items, but must return exactly one");this.root=d[0];g(this.root)}),onError:d})},mayHaveChildren:function(g){return p.some(this.childrenAttrs,function(d){return this.store.hasAttribute(g,d)},this)},getChildren:function(g,d,l){var f=
this.store;if(f.isItemLoaded(g)){for(var r=[],c=0;c<this.childrenAttrs.length;c++)var b=f.getValues(g,this.childrenAttrs[c]),r=r.concat(b);var t=0;this.deferItemLoadingUntilExpand||p.forEach(r,function(b){f.isItemLoaded(b)||t++});0==t?d(r):p.forEach(r,function(b,a){f.isItemLoaded(b)||f.loadItem({item:b,onItem:function(b){r[a]=b;0==--t&&d(r)},onError:l})})}else{var q=h.hitch(this,arguments.callee);f.loadItem({item:g,onItem:function(b){q(b,d,l)},onError:l})}},isItem:function(g){return this.store.isItem(g)},
fetchItemByIdentity:function(g){this.store.fetchItemByIdentity(g)},getIdentity:function(g){return this.store.getIdentity(g)},getLabel:function(g){return this.labelAttr?this.store.getValue(g,this.labelAttr):this.store.getLabel(g)},newItem:function(g,d,l){var f={parent:d,attribute:this.childrenAttrs[0]},r;this.newItemIdAttr&&g[this.newItemIdAttr]?this.fetchItemByIdentity({identity:g[this.newItemIdAttr],scope:this,onItem:function(c){c?this.pasteItem(c,null,d,!0,l):(r=this.store.newItem(g,f))&&void 0!=
l&&this.pasteItem(r,d,d,!1,l)}}):(r=this.store.newItem(g,f))&&void 0!=l&&this.pasteItem(r,d,d,!1,l)},pasteItem:function(g,d,l,f,r){var c=this.store,b=this.childrenAttrs[0];d&&p.forEach(this.childrenAttrs,function(q){if(c.containsValue(d,q,g)){if(!f){var u=p.filter(c.getValues(d,q),function(a){return a!=g});c.setValues(d,q,u)}b=q}});if(l)if("number"==typeof r){var t=c.getValues(l,b).slice();t.splice(r,0,g);c.setValues(l,b,t)}else c.setValues(l,b,c.getValues(l,b).concat(g))},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){},onNewItem:function(g,d){d&&this.getChildren(d.item,h.hitch(this,function(l){this.onChildrenChange(d.item,l)}))},onDeleteItem:function(g){this.onDelete(g)},onSetItem:function(g,d){if(-1!=p.indexOf(this.childrenAttrs,d))this.getChildren(g,h.hitch(this,function(d){this.onChildrenChange(g,d)}));else this.onChange(g)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(p,m,
k,h,g){return m("dijit.tree.ForestStoreModel",g,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(d){this.root={store:this,root:!0,id:d.rootId,label:d.rootLabel,children:d.rootChildren}},mayHaveChildren:function(d){return d===this.root||this.inherited(arguments)},getChildren:function(d,l,f){d===this.root?this.root.children?l(this.root.children):this.store.fetch({query:this.query,onComplete:h.hitch(this,function(d){this.root.children=d;l(d)}),onError:f}):this.inherited(arguments)},
isItem:function(d){return d===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(d){if(d.identity==this.root.id){var l=d.scope||k.global;d.onItem&&d.onItem.call(l,this.root)}else this.inherited(arguments)},getIdentity:function(d){return d===this.root?this.root.id:this.inherited(arguments)},getLabel:function(d){return d===this.root?this.root.label:this.inherited(arguments)},newItem:function(d,l,f){return l===this.root?(this.onNewRootItem(d),this.store.newItem(d)):this.inherited(arguments)},
onNewRootItem:function(){},pasteItem:function(d,l,f,r,c){if(l===this.root&&!r)this.onLeaveRoot(d);this.inherited(arguments,[d,l===this.root?null:l,f===this.root?null:f,r,c]);if(f===this.root)this.onAddToRoot(d)},onAddToRoot:function(d){},onLeaveRoot:function(d){},_requeryTop:function(){var d=this.root.children||[];this.store.fetch({query:this.query,onComplete:h.hitch(this,function(l){this.root.children=l;if(d.length!=l.length||p.some(d,function(d,r){return l[r]!=d}))this.onChildrenChange(this.root,
l)})})},onNewItem:function(d,l){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(d){-1!=p.indexOf(this.root.children,d)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(d,l,f,r){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(p,m,k,h,g,d,l,f,
r,c,b){return m("dijit.tree._dndSelector",b,{constructor:function(){this.selection={};this.anchor=null;this.events.push(f(this.tree.domNode,r.press,h.hitch(this,"onMouseDown")),f(this.tree.domNode,r.release,h.hitch(this,"onMouseUp")),f(this.tree.domNode,r.move,h.hitch(this,"onMouseMove")),f(this.tree.domNode,c.press,h.hitch(this,"onClickPress")),f(this.tree.domNode,c.release,h.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],c=this.selection,d;for(d in c)b.push(c[d]);
return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(b,c){this.setSelection(this.getSelectedTreeNodes().concat([b]));c&&(this.anchor=b);return b},removeTreeNode:function(b){var c=p.filter(this.getSelectedTreeNodes(),function(c){return!d.isDescendant(c.domNode,b.domNode)});this.setSelection(c);return b},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},setSelection:function(b){var c=
this.getSelectedTreeNodes();p.forEach(this._setDifference(c,b),h.hitch(this,function(b){b.setSelected(!1);this.anchor==b&&delete this.anchor;delete this.selection[b.id]}));p.forEach(this._setDifference(b,c),h.hitch(this,function(b){b.setSelected(!0);this.selection[b.id]=b}));this._updateSelectionProperties()},_setDifference:function(b,c){p.forEach(c,function(a){a.__exclude__=!0});var d=p.filter(b,function(a){return!a.__exclude__});p.forEach(c,function(a){delete a.__exclude__});return d},_updateSelectionProperties:function(){var b=
this.getSelectedTreeNodes(),c=[],d=[];p.forEach(b,function(a){var b=a.getTreePath();d.push(a);c.push(b)},this);b=p.map(d,function(a){return a.item});this.tree._set("paths",c);this.tree._set("path",c[0]||[]);this.tree._set("selectedNodes",d);this.tree._set("selectedNode",d[0]||null);this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,this.current))){"mousedown"==b.type&&
l.isLeft(b)&&b.preventDefault();var c="keydown"==b.type?this.tree.focusedChild:this.current;if(c){var d=g.getCopyKeyState(b),a=c.id;this.singular||b.shiftKey||!this.selection[a]?(this._doDeselect=!1,this.userSelect(c,d,b.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(b){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,g.getCopyKeyState(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},
_compareNodes:function(b,c){if(b===c)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-c.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(c)&2?1:-1;if(document.createRange){var d=doc.createRange();d.setStartBefore(b);var a=doc.createRange();a.setStartBefore(c);return d.compareBoundaryPoints(d.END_TO_END,a)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(b,
c,d){if(this.singular)this.anchor==b&&c?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(d&&this.anchor){c=this._compareNodes(this.anchor.rowNode,b.rowNode);d=this.anchor;0>c?c=d:(c=b,b=d);for(d=[];c!=b;)d.push(c),c=this.tree._getNext(c);d.push(b);this.setSelection(d)}else this.selection[b.id]&&c?this.removeTreeNode(b):c?this.addTreeNode(b,!0):(this.setSelection([b]),this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,
c){c=c||k.global;for(var d in this.selection)b.call(c,this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(p,m,k,h,g,d){return m("dijit.tree._dndContainer",null,{constructor:function(l,f){this.tree=l;this.node=l.domNode;h.mixin(this,f);this.containerState="";k.add(this.node,"dojoDndContainer");this.events=[g(this.node,d.enter,h.hitch(this,"onOverEvent")),g(this.node,d.leave,
h.hitch(this,"onOutEvent")),p.after(this.tree,"_onNodeMouseEnter",h.hitch(this,"onMouseOver"),!0),p.after(this.tree,"_onNodeMouseLeave",h.hitch(this,"onMouseOut"),!0),g(this.node,"dragstart, selectstart",function(d){d.preventDefault()})]},destroy:function(){for(var d;d=this.events.pop();)d.remove();this.node=this.parent=null},onMouseOver:function(d){this.current=d},onMouseOut:function(){this.current=null},_changeState:function(d,f){var r="dojoDnd"+d,c=d.toLowerCase()+"State";k.replace(this.node,r+
f,r+this[c]);this[c]=f},_addItemClass:function(d,f){k.add(d,"dojoDndItem"+f)},_removeItemClass:function(d,f){k.remove(d,"dojoDndItem"+f)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"webview/admin/widget/_TreeNode":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./templates/TreeNode.html dojo/topic dojo/i18n!webview/nls/all dojox/html/entities ../../widget/NavTreeNode".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return p("webview/admin/widget/_TreeNode",[c],{searchIcon:null,_searchableWidgets:["site","system","device"],templateString:d,_addChild:function(b){this.addChild(b)},_addSearch:function(b,c){k.toggle(b.domNode,"no-search",b.searchEnabled);this.clickArea=h.create("div",{"class":"clickArea searchIcon",title:f.searchHint},b.rowNode);this.searchIcon=h.create("div",{"class":"treeMagnifingGlass rcIcon searchIcon",title:f.searchHint},this.clickArea);this.own(g(this.clickArea,
"click",m.hitch(this,this._publishFilterRequest,c)))},_createNode:function(b,c,d){b=this.tree._createTreeNode({dir:b.dir,indent:this.indent+1,isExpandable:c.mayHaveChildren(d),item:d,label:r.decode(b.getLabel(d)),lang:b.lang,ownerDocument:b.ownerDocument,searchEnabled:this.searchEnabled,textDir:b.textDir,tooltip:r.decode(b.getTooltip(d)),tree:b});this._addLink(b,d);-1<this._searchableWidgets.indexOf(d.widget.toLowerCase())&&this._addSearch(b,d);return b},getLinkHref:function(b){var c=rc.adminUrl,
d="",f=function(a,c,q){b&&c&&b[c]&&null!==b[c]&&(d+=(q?"?":"\x26")+a,d+="\x3d"+encodeURIComponent(b[c]))};if(b.widget){var a=b.widget.toLowerCase(),d="#"+b.widget;if("sites"!==a)switch(f("site","site",!0),a.toLowerCase()){case "system":case "tree":case "navgroup":case "schedule":case "reporttemplate":case "trendlogworksheet":f(a,"widgetId");break;case "users/logininfo":f("userID","widgetId"),f("ID","userId")}c+=d;b.hash=[d]}return c},_publishFilterRequest:function(b,c){c.preventDefault();c.stopPropagation();
l.publish("filterRequested",b)}})})},"webview/widget/NavTreeNode":function(){define("dijit/_Container dijit/Tree dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-style dojo/dom-construct dojo/promise/all".split(" "),function(p,m,k,h,g,d,l,f,r){function c(b){return g.delegate(b.promise||b,{addCallback:function(b){this.then(b)},addErrback:function(b){this.otherwise(b)}})}return h("webview/widget/_TreeNode",[m._TreeNode],{collapse:function(){l.set(this.tree.domNode,"overflowX","hidden");
var b=this.inherited(arguments);b.then(g.hitch(this,function(){l.set(this.tree.domNode,"overflowX","visible")}));return b},expand:function(){l.set(this.tree.domNode,"overflowX","hidden");var b=this.inherited(arguments);b.then(g.hitch(this,function(){l.set(this.tree.domNode,"overflowX","visible")}));return b},setChildItems:function(b){var d=this.tree,q=d.model,f=[],a=this.getChildren();k.forEach(a,function(a){p.prototype.removeChild.call(this,a)},this);var n=d.focusedChild;this.defer(function(){k.forEach(a,
function(a){this._destroyNodes(a,d,q,n)})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,k.forEach(b,function(a){var b=q.getIdentity(a),n=d._itemNodesMap[b],c;if(n)for(var v=0;v<n.length;v++)if(n[v]&&!n[v].getParent()){c=n[v];c.set("indent",this.indent+1);break}c||(c=this._createNode(d,q,a),n?n.push(c):d._itemNodesMap[b]=[c]);this._addChild(c);(this.tree.autoExpand||this.tree._state(c))&&f.push(d._expandNode(c))},this),k.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=
!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=r(f);this.tree._startPaint(b);return c(b)},_addLink:function(b,c){var d=[];k.forEach(b.contentNode.childNodes,function(a){d.push(g.clone(a))},this);f.empty(b.contentNode);for(var u=f.create("a",{href:this.getLinkHref(c),target:"_self"},b.rowNode),a=0;a<d.length;a++)f.place(d[a],u,"last")},_destroyNodes:function(b,c,q,f){if(!b._destroyed&&!b.getParent()){var a=function(b){var n=q.getIdentity(b.item),d=c._itemNodesMap[n];
1===d.length?delete c._itemNodesMap[n]:(n=k.indexOf(d,b),-1!==n&&d.splice(n,1));k.forEach(b.getChildren(),a)};c.dndController.removeTreeNode(b);a(b);if(c.persist){var n=k.map(b.getTreePath(),function(a){return c.model.getIdentity(a)}).join("/"),v;for(v in c._openedNodes)v.substr(0,n.length)===n&&delete c._openedNodes[v];c._saveExpandedNodes()}c.lastFocusedChild&&!d.isDescendant(c.lastFocusedChild,c.domNode)&&delete c.lastFocusedChild;f&&!d.isDescendant(f,c.domNode)&&c.focus();b.destroyRecursive()}}})})},
"webview/features/leftSideFlyout/_KeywordSelectorMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/on"],function(p,m,k,h,g){return p("webview/features/leftSideFlyout/_KeywordSelectorMixin",[],{_closeKeywordSelector:function(){this._keywordSelector&&this._keywordSelector.closeKeywordSelector()},_showKeywordSelector:function(d){this._showingTreeOverlay(d);this._keywordSelector=d;var l=this.adminTree;h.place(d.domNode,this.containerNode,1);var f=
this._getSiteTreeNodeBySiteId(d.siteId);this._currentScroll=this.cwrapper.scrollTop;l=l.getNodesByItem(f)[0];l=m.clone(l.domNode);this.own(g.once(l,"click",m.hitch(this,function(d){d.preventDefault();this._closeKeywordSelector()})));d.performInitialDisplay(l);d.resize(this.containerNode.offsetHeight);this.cwrapper.scrollTop=0;k.add(this.domNode,"no-scroll");this.own(g(d,"close",m.hitch(this,function(){this.keywordSelectorOpen=!1;this._showScrollbar();this._closedTreeOverlay(d)})),g(d,"beforeReShow",
m.hitch(this,function(){this.keywordSelectorOpen=!0;this.cwrapper.scrollTop=0;k.add(this.domNode,"no-scroll")})));this.keywordSelectorOpen=!0}})})},"webview/features/leftSideFlyout/_NavigationTreeMixin":function(){define("dijit/tree/ObjectStoreModel dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/on dojo/store/Memory rc/sys/links ../../util/pointObject ../../widget/Tree".split(" "),function(p,m,k,h,g,d,l,f,r,c){return m("webview/features/leftSideFlyout/_NavigationTreeMixin",
[],{userNavigationTree:null,onLoadedNavigationTreeData:function(){},onNavigationTreeNodeClick:function(b,c,d){},_buildNavigationTree:function(b){this._linkStore=new l({data:k.clone(b),getChildren:function(b){var c=null;if(b.children)for(var c=[],d=0;d<b.children.length;d++)c.push(this.query({id:b.children[d]._reference})[0]);return c}});this._linkModel=new p({store:this._linkStore,query:{pointType:"root"},mayHaveChildren:function(b){return void 0!==b.children&&0<b.children.length}});this._attachPoints.push("_linkModel");
this.userNavigationTree&&this.userNavigationTree.destroy();this.userNavigationTree=new c({model:this._linkModel,persist:!0,id:"webviewUserNavTree",showRoot:!1,openOnClick:!1,openOnDblClick:!0,getTooltip:k.hitch(this,function(b){var c=b.title?b.title:b.widget;return c?(c=r.fixTLMnemonic(c),b.name+" ("+c+")"):""})},g.create("div",{},this.containerNode));this._toggleShownTree(!0,!0);this.own(d(this.userNavigationTree,"click",k.hitch(this,this._onNavigationTreeNodeClick)))},_loadNavigationTree:function(){f.load(!0).then(k.hitch(this,
function(b){try{b.items&&1<b.items.length?this._buildNavigationTree(b):this._destroyNavigationTree(),this._placeTreeSelectButtons()}catch(t){}this._onLoadedNavigationTreeData();return b}))},_onLoadedNavigationTreeData:function(){this.onLoadedNavigationTreeData()},_onNavigationTreeNodeClick:function(b,c,d){this.onNavigationTreeNodeClick(b,c,d)},_destroyNavigationTree:function(){this._toggleShownTree(!0,!0);this._userTreeButton&&(this._userTreeButton.destroy(),this._userTreeButton=null);this._adminTreeButton&&
(this._adminTreeButton.destroy(),this._adminTreeButton=null);this.userNavigationTree&&(this.userNavigationTree.destroy(),this.userNavigationTree=null)}})})},"webview/widget/Tree":function(){define(["dijit/Tree","dojo/_base/array","dojo/_base/declare","./_TreeNode"],function(p,m,k,h){return k("webview/widget/Tree",[p],{getIconClass:function(g,d){var l="dijitLeaf";g&&"Folder"!==g.pointType||(l=d?"dijitFolderOpened":"dijitFolderClosed");return l},_createTreeNode:function(g){return new h(g)},_initState:function(){this._openedNodes=
{};if(this.persist&&this.cookieName){var g=localStorage.getItem(this.cookieName);g&&m.forEach(g.split(","),function(d){this._openedNodes[d]=!0},this)}},_onDblClick:function(){},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var g=[],d;for(d in this._openedNodes)g.push(d);localStorage.setItem(this.cookieName,g.join(","))}},_state:function(g,d){if(!this.persist)return!1;var l=m.map(g.getTreePath(),function(d){return this.model.getIdentity(d)},this).join("/");if(1===arguments.length)return this._openedNodes[l];
d?this._openedNodes[l]=!0:delete this._openedNodes[l];this._saveExpandedNodes()}})})},"webview/widget/_TreeNode":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/text!../admin/widget/templates/TreeNode.html dojox/html/entities ../util/globalConstants ../util/util ./NavTreeNode".split(" "),function(p,m,k,h,g,d,l,f,r,c){return p("webview/widget/_TreeNode",[c],{templateString:d,constructor:function(){var b=dojoConfig.baseUrl.lastIndexOf("/"),b=dojoConfig.baseUrl.substr(b);
this.PATH_TO_DEFAULT_ICONS=b+"/webview/themes/rcblack/images/DefaultNavTreeIcons/";this.PATH_TO_TREE_ICONS=b+"/webview/themes/rcblack/images/tree-sprite.png"},getLinkHref:function(b){var c="";switch(b.pointType.toUpperCase()){case "HYPERLINK":c=b.widget;break;case "FOLDER":c=window.location.href;break;default:c=rc.rootPath+r.mnemonicToUri(b.widget),b.widget=c}return c},_addChild:function(b){0<b.indent?this.addChild(b,0):this.addChild(b)},_applyClassAndStyle:function(b,c,d){var q="_"+c+"Class";c+=
"Node";var a=this[q];this[q]=this.tree["get"+d+"Class"](b,this.isExpanded);if("iconNode"===c&&this._isDefaultFolder()&&"undefined"!==typeof a)if("dijitFolderClosed"===a){var n=g(".svg-folderIcon",this.domNode)[0];m.replace(n,this[q]||"",a||"");m.replace(this.iconNode,this[q]||"",a||"")}else"dijitFolderOpened"===a&&(n=g(".svg-folderIcon",this.domNode)[0],m.replace(n,this[q]||"",a||""),m.replace(this.iconNode,this[q]||"",a||""));m.replace(this[c],this[q]||"",a||"");h.set(this[c],this.tree["get"+d+"Style"](b,
this.isExpanded)||{});"iconNode"===c&&(b.pointType&&null===b.iconFile&&(d=b.pointType.toLowerCase().replace(" ","-")+"-tree-icon",m.add(this.iconNode,d)),void 0!==b.iconFile&&null!==b.iconFile&&(d="","Trend Logs"===b.pointType&&(-1!==b.widget.toUpperCase().indexOf("STL")?(b.pointType="Single Point Trend Log",b.iconFile="single-trendlog.png"):(b.pointType="Multi Point Trend Log",b.iconFile="multi-trendlog.png")),"undefined"!==typeof f.DEFAULT_NAV_TREE_ICONS_CLASSES[b.iconFile]?(d=rc.rootPath+this.PATH_TO_TREE_ICONS,
d="svg-"+f.DEFAULT_NAV_TREE_ICONS_CLASSES[b.iconFile],m.add(this.iconNode,"dijitTreeIcon "+d)):(d=rc.rootPath+"Uploads/NavTreeIcons/"+b.iconFile,k.create("img",{src:d,alt:b.pointType,"class":"dijitTreeIcon dijitTreeCustomIcon"},this.iconNode,"first"),m.remove(this.iconNode,"dijitTreeIcon"),m.remove(this.iconNode,"dijitFolderClosed"))))},_createNode:function(b,c,d){b=this.tree._createTreeNode({item:d,tree:b,isExpandable:c.mayHaveChildren(d),label:l.decode(b.getLabel(d)),labelType:b.model&&b.model.labelType||
"text",tooltip:l.decode(b.getTooltip(d)),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1});this._addLink(b,d);return b},_isDefaultFolder:function(){return"Folder"===this.item.pointType&&"folder.png"===this.item.iconFile}})})},"webview/util/globalConstants":function(){define({CurrencyToSymbol:{USD:"\x26dollar;",EUR:"\x26euro;",GBP:"\x26pound;",MXN:"\u20b1",CNY:"\x26yen;"},PanelFileCompatibilityTypes:{rcp:0,pyramidProCom:1,pyramidProSys:2,pyramidProWebCom:3,
pyramidProWebSys:4,proAir:5,ssc:6,sscMaxwell:7,proZone:8,proOne:9,proTwo:10,thirdParty:11,proWebComV8:12,proWebSysV8:13,proView:14,proViewRouter:15,proLight:16,proAirV8:17,proZoneV8:18,rcFlexAir:19,none:20,1:"MACH-ProCom",2:"MACH-ProSys",3:"MACH-ProWebCom",4:"MACH-ProWebSys",5:"MACH-ProAir-Legacy",6:"Smart Space Controller",7:"Smart Space Controller(Rev E)",8:"MACH-ProZone-Legacy",9:"MACH-Pro1",10:"MACH-Pro2",11:"Third Party",12:"MACH-Pro(Web)Com",13:"MACH-Pro(Web)Sys",14:"MACH-ProView",15:"MACH-ProView /R",
16:"MACH-ProLight",17:"MACH-ProAir",18:"MACH-ProZone",19:"RC-FlexAir"},REPEAT_WEEKLY:0,REPEAT_EXCEPTION:1,REPEAT_RANGE:2,REPEAT_RECURRENCE:3,REPEAT_CALENDAR:4,REPEAT_OVERRIDE:5,MAX_PRIORITY:19,WILDCARD:255,SINGLE_FREQ:0,DATE_RANGE_FREQ:1,DAILY_FREQ:2,WEEKLY_FREQ:3,MONTHLY_FREQ:4,YEARLY_FREQ:5,DATATYPE_MULTI_STATE:2,DATATYPE_ANALOG:4,DATATYPE_BINARY:9,DAY_IN_MILLISECONDS:864E5,WEEK_IN_MILLISECONDS:6048E5,DEFAULT_NAV_TREE_ICONS:"workstation-group.png system-group.png schedules.png calendar.png single-trendlog.png multi-trendlog.png runtime.png alarms.png navigation-group.png hyperlink.png folder.png folder-2.png after-hours.png requests.png cbas.png point-report.png equipment-view.png".split(" "),
DEFAULT_NAV_TREE_ICONS_CLASSES:{"workstation-group.png":"workstationIcon","system-group.png":"systemGroupIcon","schedules.png":"schedulesIcon","calendar.png":"calendarIcon","single-trendlog.png":"single-trendlogIcon","multi-trendlog.png":"multi-trendlogIcon","runtime.png":"runtimeIcon","alarms.png":"alarmsIcon","navigation-group.png":"navgroupsIcon","hyperlink.png":"hyperlinkIcon","folder.png":"folderIcon","folder-2.png":"folderIcon","after-hours.png":"afterHoursReportIcon","requests.png":"afterHoursRequestIcon",
"cbas.png":"programsIcon","point-report.png":"pointreportIcon","equipment-view.png":"equipmentViewIcon"}})},"webview/features/leftSideFlyout/_ObjectSelectorMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/request/xhr dojo/topic ../../admin/widget/SearchForObject".split(" "),function(p,m,k,h,g,d,l,f){return p("webview/features/leftSideFlyout/_ObjectSelectorMixin",[],{_createSearchForObject:function(d,c){this._destroySearchForObject();this._searchForObject=
new f({searchPath:this.searchableWidget.searchPath,systems:d,filterableObjects:this.filterableObjects,"class":"hidden",isBacnetOnly:c,extraSearchParameters:this.searchableWidget.extraSearchParameters},h.create("div",{},this.containerNode));this._resultsFetchedHandle=g(this._searchForObject,"resultsFetched",m.hitch(this,function(b,c,d){"undefined"!==typeof this.searchableWidget.showResults&&this.searchableWidget.showResults(b,c,d)}));this._searchClosedHandle=g(this._searchForObject,"close",m.hitch(this,
function(){"undefined"!==typeof this.searchableWidget.closeResults&&this.searchableWidget.closeResults();this.objectSelectorOpen=!1;this._showScrollbar();this._closedTreeOverlay(this._searchForObject)}));this._searchUpdateHandle=l.subscribe("updateRange",m.hitch(this,function(b){null!==this._searchForObject&&this._searchForObject.set("range",b)}));this._searchClosedSubscribeHandle=l.subscribe("closeResults",m.hitch(this,function(){null!==this._searchForObject&&this._searchForObject.closeSearch()}));
this.rightSideFlyout&&this.rightSideFlyout.set("searchResultsPane",this._searchForObject)},_destroySearchForObject:function(){this._searchForObject&&(this._searchForObject.destroy(),h.destroy(this._searchForObject.domNode));this._resultsFetchedHandle&&this._resultsFetchedHandle.remove();this._searchClosedHandle&&this._searchClosedHandle.remove();this._searchUpdateHandle&&this._searchUpdateHandle.remove();this._searchClosedSubscribeHandle&&this._searchClosedSubscribeHandle.remove()},_showSearchForObject:function(d){null===
this._searchForObject&&this._createSearchForObject();this._showingTreeOverlay(this._searchForObject);this._currentScroll=this.cwrapper.scrollTop;var c=this.adminTree.getNodesByItem(d)[0],b=m.clone(c.domNode);this.own(g.once(b,"click",m.hitch(this,function(b){b.preventDefault();this._searchForObject.closeSearch()})));c={top:c.domNode.offsetTop-this._currentScroll,left:c.domNode.offsetLeft};this._searchForObject.set("isBacnetOnly",this.searchableWidget.bacnetOnly);this._searchForObject.filterRequested(d,
b,c);this.cwrapper.scrollTop=0;k.add(this.domNode,"no-scroll");this.objectSelectorOpen=!0},_systemsRetrieved:function(d,c,b,f,q){d=m.clone(d);q=q.filter(function(a){return a.siteId==this},c).map(function(a){return a.id});if(0<q.length)for(var u in d)0>q.indexOf(Number(u))&&delete d[u];this._createSearchForObject(d,f);this.adminTree&&this.adminTree.showHideSearch(!0,b,c)},_widgetIsNotSearchable:function(){this.adminTree&&this.adminTree.showHideSearch(!1);this._searchForObject&&this._searchForObject.closeSearch()},
_widgetIsSearchable:function(f,c,b){if(this.componentMap){this.searchableWidget=c;this.filterableObjects=f;f=this.componentMap.system;if(c=Number(this.searchableWidget.system))f={},f[c]=this.componentMap.system[c];var r=null;isNaN(this.searchableWidget.siteId)?isNaN(this.searchableWidget.site)||(r=Number(this.searchableWidget.site)):r=Number(this.searchableWidget.siteId);r?d.get("GetPermittedSystems",{handleAs:"json",preventCache:!0}).then(m.hitch(this,this._systemsRetrieved,f,r,c,b)):console.error("Invalid siteId, can't load searchable systems")}else setTimeout(m.hitch(this,
this._widgetIsSearchable,f,c,b),150)}})})},"webview/admin/widget/SearchForObject":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/fx dojo/i18n!../../nls/all dojo/json dojo/on dojo/query dojo/request/xhr dojo/text!./templates/SearchForObject.html ../_objectTypeMap ../../widget/SearchByField ../../widget/TitlePane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y){return d("webview/admin/widget/SearchForObject",[m,p,k],{baseClass:"",extraSearchParameters:{},isBacnetOnly:!1,isOpen:!1,rangeHigh:49,rangeLow:0,searchPath:"tree/objects",templateString:z,webviewStrings:a,_MaxDeviceFilterTries:4,_MinSystemsShown:4,_PaddingBuffer:8,_ItemHeight:22,_TitleBarHeight:48,_TreeButtonHeight:67,_currentObjectFilter:null,_currentSystemFilter:null,_filterMap:null,_requestTimeout:null,_searchEnabled:!0,_searchObjectsQueue:[],
constructor:function(){this._filterMap={};this._currentObjectFilter=[];this._currentSystemFilter=[]},buildRendering:function(){this.inherited(arguments);this._buildSystemFilters();this._buildObjectFilters();this._setupSearchBox();this._filterPanes=[this.systemFilterContainer,this.deviceFilterContainer,this.objectFilterContainer];g.forEach(this._filterPanes,f.hitch(this,function(a){this.own(v(a,"toggle",f.hitch(this,function(a){a.open&&this._scrollAllPanes()},a)))}));this.own(v(this.closeButton,"click",
f.hitch(this,this._onClose)))},closeSearch:function(){this._onClose()},filterRequested:function(a,b,c){this.isOpen||(c.top-=this._TreeButtonHeight,this._animateOpen(b,c),this.isOpen=!0);this.siteId=a.site;this._clearFilters();setTimeout(f.hitch(this,function(a){var b=null,b=null;switch(a.widget){case "site":a=Object.keys(this._filterMap.systemFilters);1===a.length&&this._filterMap.systemFilters[a[0]].checkbox.set("checked",!0);this._shrinkEmptyDevices(!0);break;case "system":b=this._filterMap.systemFilters[a.widgetId];
b.checkbox.set("checked",!0);break;case "device":b=this._filterMap.systemFilters[a.systemId];b.checkbox.set("checked",!0);b=b.devices[a.widgetId];b.checkbox.set("checked",!0);break;default:console.error(this.declaredClass+" - filterRequested(): Unsupported widget type",a.widget)}},a),100)},onClose:function(){},onResultsFetched:function(){},_animateClose:function(){var a=new c;this.own(a);g.forEach(this._filterPanes,function(a){a.set("open",!1,!0)});var n=this._getMoveTitleAnimation({start:0,end:this._treeNodePosition.top},
{start:0,end:this._treeNodePosition.left}),d=u.combine([this._getFadeAnimation(1,0,this.searchFilters),this._getFadeAnimation(1,0,this.textSearchContainer)]),n=u.chain([d,n]).play();r.after(n,"onEnd",f.hitch(this,function(){b.add(this.domNode,"hidden");a.resolve()}));return a.promise},_animateOpen:function(a,c){this._treeNodePosition=c;this._cleanClonedNode(a);t.place(a,this.searchedTreeNodeContainer,"only");b.remove(this.domNode,"hidden");var n=this._getMoveTitleAnimation({start:c.top,end:0},{start:c.left,
end:0});n.onEnd=f.hitch(this,function(){q.set(this.textSearchContainer,"marginTop",a.clientHeight+this._PaddingBuffer+"px")});var d=u.combine([this._getFadeAnimation(0,1,this.searchFilters),this._getFadeAnimation(0,1,this.textSearchContainer)]),n=u.chain([n,d]).play();r.after(n,"onEnd",f.hitch(this,function(){g.forEach(this._filterPanes,function(a){a.set("open",!0,!0)})}))},_buildDeviceFilters:function(a,b,c){for(var n={},d=null,v=null,q=0;q<c.length;++q)d=c[q],v=this._buildFilterCheckbox({label:[b,
d.deviceName,d.deviceNumber].join("-"),searchLabel:{device:d.deviceNumber,isRcp:d.rcpPanel,system:Number(a)}},"devices",!0),t.place(v.domNode,this.deviceFilter),n[d.deviceNumber]=v;this._filterMap.systemFilters[a].devices=n},_buildFilterCheckbox:function(a,b,c){c=t.create("div",{"class":c?"object-search-filter hidden":"object-search-filter",title:a.label});b=new h({value:a.searchLabel,checked:!1,onChange:f.hitch(this,this._updateFilter,b,a.searchLabel)});t.place(b.domNode,c,"first");t.create("label",
{"for":b.id,innerHTML:a.label},c,"last");return{checkbox:b,domNode:c}},_buildObjectFilters:function(){for(var a={},b=g.filter(Object.keys(y),function(a){return isNaN(a)}),c="",n=c=null,d=0;d<b.length;++d)c=b[d],c=y[c],n=this._buildFilterCheckbox(c,"objectTypes"),t.place(n.domNode,this.objectFilter),f.mixin(n,{identity:c.identity}),a[c.searchLabel]=n;this._filterMap.objectFilters=a},_buildSystemFilters:function(){for(var a={},c=Object.keys(this.systems).sort(f.hitch(this,function(a,b){var c=this.systems[a],
n=this.systems[b],d=0;c>n?d=1:c<n&&(d=-1);return d})),n=-1,d=null,v=null,u=c.length,r=0;r<u;++r)n=Number(c[r]),d=this.systems[n],v=this._buildFilterCheckbox({label:d,searchLabel:n},"systems"),t.place(v.domNode,this.systemFilter),a[n]=v,this._retrieveAndBuildDeviceFilters(n,d);q.set(this.systemFilterContainer.domNode,{"min-height":this._TitleBarHeight+this._ItemHeight*Math.min(this._MinSystemsShown,u)+"px"});b.toggle(this.systemFilterContainer.domNode,"hidden",2>c.length);this._filterMap.systemFilters=
a},_cancelSearchRequests:function(){for(var a=0;a<this._searchObjectsQueue.length;a++)this._searchObjectsQueue[a].isResolved()||this._searchObjectsQueue[a].cancel();this._searchObjectsQueue=[]},_cleanClonedNode:function(a){x(".dijitTreeNode",a).forEach(t.destroy);x(".treeMagnifingGlass",a).forEach(t.destroy);x(".dijitTreeExpando",a).forEach(t.destroy);q.set(a.firstElementChild,"paddingLeft","0px")},_clearFilters:function(){this.textSearchField._reset();for(var a=this._currentSystemFilter.length-1;0<=
a;--a)this._filterMap.systemFilters[this._currentSystemFilter[a].sysId].checkbox.set("checked",!1);for(a=this._currentObjectFilter.length-1;0<=a;--a)this._filterMap.objectFilters[this._currentObjectFilter[a]].checkbox.set("checked",!1)},_getCleanSystemFilter:function(){for(var a=f.clone(this._currentSystemFilter),b=!1,c=0;c<a.length;++c)if(0<a[c].deviceNumbers.length||0<a[c].rcpPanels.length){b=!0;break}if(b)for(c=a.length-1;0<=c;--c)0===a[c].deviceNumbers.length&&0===a[c].rcpPanels.length&&a.splice(c,
1);return a},_getFadeAnimation:function(a,b,c){return l.animateProperty({node:c,duration:650,properties:{opacity:{start:a,end:b}}})},_getMoveTitleAnimation:function(a,b){return l.animateProperty({node:this.searchedTreeNodeContainer,properties:{top:a,left:b}})},_identityInFilterObjects:function(a){for(var b=0;b<this.filterableObjects.length;++b)if(this.filterableObjects[b].identity===a)return!0;return!1},_onClose:function(){this.isOpen&&(this._animateClose().then(f.hitch(this,this.onClose)),this.isOpen=
!1)},_requestResults:function(){null!==this._requestTimeout&&clearTimeout(this._requestTimeout);this._requestTimeout=setTimeout(f.hitch(this,this._searchObjects),500)},_resultsFetched:function(a,b,c){this.onResultsFetched(a,b,c)},_retrieveAndBuildDeviceFilters:function(a,b){w.get("tree/devices",{handleAs:"json",preventCache:!0,query:{systemId:a}}).then(f.hitch(this,this._buildDeviceFilters,a,b))},_scrollAllPanes:function(){if(0<this._currentObjectFilter.length){var a=this._filterMap.objectFilters[this._currentObjectFilter[this._currentObjectFilter.length-
1]];a&&a.domNode.scrollIntoViewIfNeeded()}if(0<this._currentSystemFilter.length){var a=this._currentSystemFilter[this._currentSystemFilter.length-1],b=this._filterMap.systemFilters[a.sysId];b&&(b.domNode.scrollIntoViewIfNeeded(),0<a.deviceNumbers.length&&(a=b.devices[a.deviceNumbers[a.deviceNumbers.length-1]])&&a.domNode.scrollIntoViewIfNeeded())}},_searchObjects:function(){this._cancelSearchRequests();var a=n.stringify(this._currentObjectFilter);0===this._currentObjectFilter.length&&(a=[],g.forEach(this.filterableObjects,
function(b){a.push(b.searchLabel)}),a=n.stringify(a));var b=this._getCleanSystemFilter(),b={rangeLow:this.rangeLow,rangeHigh:this.rangeHigh,bacnetOnly:this.isBacnetOnly,searchParam:this.textSearchField.searchBox.value,systems:n.stringify(b),objectTypes:a,siteId:this.siteId};f.mixin(b,this.extraSearchParameters);b=w.get(this.searchPath,{handleAs:"json",preventCache:!0,query:b}).then(f.hitch(this,this._resultsFetched,this.rangeLow,this.rangeHigh));this._searchObjectsQueue.push(b);this._requestTimeout=
null},_setFilterableObjectsAttr:function(){this.inherited(arguments);for(var a=null,a="",c=Object.keys(this._filterMap.objectFilters),n=0;n<c.length;++n)a=c[n],a=this._filterMap.objectFilters[a],b.toggle(a.domNode,"hidden",!this._identityInFilterObjects(a.identity));b.toggle(this.objectFilterContainer.domNode,"hidden",2>this.filterableObjects.length)},_setIsBacnetOnlyAttr:function(a){this.isBacnetOnly=!0===a?!0:!1},_setRangeAttr:function(a){this.rangeHigh=a.high;this.rangeLow=a.low;this._requestResults()},
_setupSearchBox:function(){this.own(v(this.textSearchField,"searchClicked",f.hitch(this,this._requestResults)),v(this.textSearchField.searchBox,"keyup",f.hitch(this,function(){this.set("range",{high:this.rangeHigh-this.rangeLow,low:0})})),r.after(this.textSearchField,"_reset",f.hitch(this,this._requestResults)))},_shrinkEmptyDevices:function(a){b.toggle(this.deviceFilterContainer.domNode,"no-items",a)},_showHideDeviceFilters:function(a,c,n){var d=this._filterMap.systemFilters[a].devices;if("undefined"!==
typeof d){a=Object.keys(d);var v="",v=null;n=a.length;for(var q=0;q<n;++q)v=a[q],v=d[v],b.toggle(v.domNode,"hidden",!c)}else n<this._MaxDeviceFilterTries&&setTimeout(f.hitch(this,this._showHideDeviceFilters,a,c,++n),250)},_toggleDeviceInSystemFilter:function(a,b){var c=g.filter(this._currentSystemFilter,function(b){return b.sysId===a.system});if(0<c.length){var c=c[0],n=c.deviceNumbers;a.isRcp&&(n=c.rcpPanels);if(b)n.push(a.device);else{for(c=0;c<n.length&&n[c]!==a.device;++c);n.splice(c,1)}}},_toggleObjectFilter:function(a,
b){if(b)this._currentObjectFilter.push(a);else{var c=this._currentObjectFilter.indexOf(a);this._currentObjectFilter.splice(c,1)}},_toggleSystemFilter:function(a,b){if(b)this._currentSystemFilter.push({sysId:a,deviceNumbers:[],rcpPanels:[]});else{for(var c=0;c<this._currentSystemFilter.length;++c)if(this._currentSystemFilter[c].sysId===a){for(var n=this._currentSystemFilter[c].deviceNumbers,d=null,v=0;v<n.length;++v)d=this._filterMap.systemFilters[a].devices[n[v]].checkbox,d.set("checked",!1);break}this._currentSystemFilter.splice(c,
1)}this._shrinkEmptyDevices(0==this._currentSystemFilter.length)},_updateFilter:function(a,b,c){switch(a){case "systems":this._showHideDeviceFilters(Number(b),c,0);this._toggleSystemFilter(Number(b),c);this._scrollAllPanes();break;case "devices":this._toggleDeviceInSystemFilter(b,c);break;case "objectTypes":this._toggleObjectFilter(b,c)}this.set("range",{high:this.rangeHigh-this.rangeLow,low:0})},destroy:function(){null!==this._requestTimeout&&clearTimeout(this._requestTimeout)}})})},"webview/admin/_objectTypeMap":function(){define(["dojo/i18n!rc/nls/all",
"dojo/i18n!../nls/all","dojo/i18n!../nls/pointReports"],function(p,m,k){return{0:"systemGroups",systemGroups:{identity:0,label:p.helpGrp,searchLabel:"System Groups"},1:"equipmentViews",equipmentViews:{identity:1,label:m.equipmentViews,searchLabel:"Equipment Views"},2:"workstationGroups",workstationGroups:{identity:2,label:m.workstationGrps,searchLabel:"Workstation Groups"},3:"inputs",inputs:{identity:3,label:m.inputs,searchLabel:"Inputs"},4:"outputs",outputs:{identity:4,label:m.outputs,searchLabel:"Outputs"},
5:"variables",variables:{identity:5,label:m.values,searchLabel:"Variables"},6:"loops",loops:{identity:6,label:m.loops,searchLabel:"Loops"},7:"schedules",schedules:{identity:7,label:m.schedules,searchLabel:"Schedules"},8:"calendars",calendars:{identity:8,label:m.calendars,searchLabel:"Calendars"},9:"trendLogs",trendLogs:{identity:9,label:p.helpTl,searchLabel:"Trend Logs"},10:"trendLogWorksheets",trendLogWorksheets:{identity:10,label:m.trendLogWorksheet,searchLabel:"Trend Log Worksheets"},11:"runtimeLogs",
runtimeLogs:{identity:11,label:p.runtimeLogs,searchLabel:"Runtime Logs"},12:"arrays",arrays:{identity:12,label:m.arrays,searchLabel:"Arrays"},13:"programs",programs:{identity:13,label:m.programs,searchLabel:"Programs"},14:"programsWorksheets",programsWorksheets:{identity:14,label:m.programsWorksheet,searchLabel:"Programs Worksheets"},15:"pointReports",pointReports:{identity:15,label:m.pointReports,searchLabel:"Point Reports"},16:"pointReportWorksheet",pointReportWorksheet:{identity:16,label:k.pointReportWorksheet,
searchLabel:"Point Report Worksheet"}}})},"webview/widget/SearchByField":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/form/DropDownButton dijit/Menu dijit/MenuItem dijit/popup dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/Evented dojo/has dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/text!./templates/SearchByField.html dojo/window ../util/util dojo/sniff".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,
v,x,w,z){return f("webview/widget/SearchByField",[m,p,q],{templateString:x,"class":"searchform",anyLabel:n.searchAnyField,anyField:"*",selectedField:null,value:null,prevValue:null,prevSearchResult:null,defaultLabel:n.searchHint,hasMenu:!0,disabled:!1,constructor:function(){this.fields=[];this.rcStrings=a},postCreate:function(){if(this.hasMenu){var a=new h({style:"display: none;"});1!==this.fields.length&&a.addChild(new g({label:this.anyLabel,onClick:r.hitch(this,function(){this._searchByField({field:this.anyField,
fieldName:this.anyLabel})})}));var b;l.forEach(this.fields,function(c){c.searchable&&(b=new g({label:c.label,onClick:r.hitch(this,function(a,b){this._searchByField(a)},{field:c.field,fieldName:c.label})}),a.addChild(b))},this);this.searchButton=new k({label:"",dropDown:a,openDropDown:r.hitch(this.searchButton,this.openDropDown),onClick:r.hitch(this,function(){this._clearSearchBoxValue()})},this._buttonNode)}else this.searchButton=new k({label:"",dropDown:new h({baseClass:"hidden"}),openDropDown:r.hitch(this.searchButton,
this.openDropDown),onClick:r.hitch(this,this.onSearchClicked)},this._buttonNode);this.own(v(this.searchBox,"keyup",r.hitch(this,this._onKeyUp)))},_setDisabledAttr:function(a){b.toggle(this.searchBox,"disabled",a);c.set(this.searchBox,"disabled",a);this._set("disabled",a)},_clearSearchBoxValue:function(){this.searchBox.value===this.defaultLabel?this.searchBox.value="":this.searchBox.value===this.prevSearchResult&&(this.searchBox.value=this.prevValue)},_searchByField:function(a){this.searchBox.value&&
(this.set("value",{field:a.field,fieldName:a.fieldName,value:this.searchBox.value}),this.onEdit())},_showHideReset:function(){b.toggle(this.clearField,"hidden",""===this.searchBox.value)},onSearchClicked:function(){this.emit("searchClicked")},onEdit:function(){this.emit("edit")},_onChange:function(a){a.value&&(this.searchBox.value="'"+a.value+"' "+n.wvIn+" "+a.fieldName,this.prevValue=a.value,this.prevSearchResult=this.searchBox.value);this._showHideReset();this.onChange(a)},onChange:function(a){this.emit("change",
a)},_onKeyUp:function(){this._showHideReset();this.onKeyUp()},onKeyUp:function(){this.emit("keyup")},_setValueAttr:function(a){a=a||{};var b=a.value||"";this.value=b;this.searchBox.value=b||"";this.selectedField=a.field||"";this.selectedFieldName=a.fieldName||this._findName(this.selectedField);this._onChange(this.get("value"))},_findName:function(a){var b=a;l.some(this.fields,function(c){return c.field===a?(b=c.name,!0):!1},this);return b},_getTypedValueAttr:function(){return this.searchBox.value},
_getValueAttr:function(){return{value:this.value,field:this.selectedField,fieldName:this.selectedFieldName}},_reset:function(a){z.stopEvent(a);this.reset();this._showHideReset();this.onEdit()},reset:function(){this.set("value",null)},openDropDown:function(){var a=this.dropDown,n=a.domNode,v=this._aroundNode||this.domNode,q=this,f=d.open({parent:this,popup:a,around:v,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){q.closeDropDown(!0)},onCancel:function(){q.closeDropDown(!0)},
onClose:function(){c.set(q._popupStateNode,"popupActive",!1);b.remove(q._popupStateNode,"dijitHasDropDownOpen");q._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&v.offsetWidth>a._popupWrapper.offsetWidth){var v=v.offsetWidth-a._popupWrapper.offsetWidth,l={w:a.domNode.offsetWidth+v};this._origStyle=n.style.cssText;r.isFunction(a.resize)?a.resize(l):t.setMarginBox(n,l);"R"===f.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-v+"px")}c.set(this._popupStateNode,
"popupActive","true");b.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===n.getAttribute("role")||n.getAttribute("aria-labelledby")||n.setAttribute("aria-labelledby",this.id);u("touch")&&!u("ios")&&(n=w.getBox(),v=t.getMarginBox(a._popupWrapper),t.setMarginBox(a._popupWrapper,{l:eval(v.l-n.l),t:eval(v.t-n.t)}));return f}})})},"webview/widget/TitlePane":function(){define("dijit/TitlePane dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/TitlePane.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return k("webview/widget/TitlePane",p,{templateString:t,iconId:"",_setIconIdAttr:{node:"iconHolder",type:"class"},postCreate:function(){this.inherited(arguments);m.forEach([this._wipeIn,this._wipeOut],h.hitch(this,function(b){this.own(g.after(b,"onEnd",h.hitch(this,function(b){b&&(r.set(this.wipeNode,"overflow",""),r.set(this.wipeNode,"height",""));this.onToggle(b)},open)))}))},buildRendering:function(){this.inherited(arguments);b[this.title]?this.title=b[this.title]:
c[this.title]&&(this.title=c[this.title]);d.setSelectable(this.titleNode,!1)},_setCss:function(){var b=this.titleBarNode||this.focusNode,c=this._titleBarClass;this._titleBarClass="dijit"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");f.replace(b,this._titleBarClass,c||"");f.toggle(this.arrowNodeInner,"pane-expanded",this.open);f.toggle(this.domNode,"pane-open",this.open)},_setOpenAttr:function(b,c){m.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});this.onWillToggle(b);
c?this[b?"_wipeIn":"_wipeOut"].play():(this.hideNode.style.display=this.wipeNode.style.display=b?"":"none",this.onToggle(b));if(this._started)if(b)this._onShow();else this.onHide();this.containerNode.setAttribute("aria-hidden",b?"false":"true");this.focusNode.setAttribute("aria-pressed",b?"true":"false");this._set("open",b);this._setCss()},onToggle:function(b){},onWillToggle:function(b){}})})},"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){m=m("dijit.TitlePane",[q,t,b],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:a.defaultDuration,baseClass:"dijitTitlePane",templateString:u,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);k.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,
this.baseClass+"Title");var a=this.hideNode,b=this.wipeNode;this._wipeIn=l.wipeIn({node:b,duration:this.duration,beforeBegin:function(){a.style.display=""}});this._wipeOut=l.wipeOut({node:b,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){p.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();
else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(h.remove(this.focusNode,"aria-controls"),h.remove(this.focusNode,
"tabIndex"),h.remove(this.focusNode,"aria-pressed"));this._set("toggleable",a);this._setCss()},_setContentAttr:function(a){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),d.setMarginBox(this.wipeNode,{h:d.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=
this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");g.replace(a,this._titleBarClass,b||"");g.replace(a,this._titleBarClass.replace("TitlePaneTitle",""),(b||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(a){a.keyCode==c.DOWN_ARROW&&this.open&&(this.containerNode.focus(),a.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},
setTitle:function(a){r.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",a)}});f("dojo-bidi")&&m.extend({_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(a){this._set("tooltip",a);this.textDir&&(a=this.enforceTextDirWithUcc(null,a));h.set(this.focusNode,"title",a)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",
this.title),this.set("tooltip",this.tooltip))}});return m})},"webview/widget/UserToolBar":function(){define("dijit/Dialog dijit/DropDownMenu dijit/Menu dijit/MenuBar dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/cookie dojo/dom-class dojo/dom-style dojo/Evented dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/alarms dojo/i18n!webview/nls/all dojo/i18n!webview/nls/whatsNew dojo/i18n!../nls/resetPassword dojo/on rc/_base/util rc/StyleSwitcher ./AboutDialog ./MenuBarItem ./PopupMenuBarItem ./passwords/ChangeApprovalPasswordDialog ./passwords/ChangePasswordDialog ../_base/tooltip ../util/HelpUtil ../util/util".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J){return r("webview/widget/UserToolBar",[h,a],{aboutDialog:null,baseClass:"userToolBar",changeDialog:null,changeDialogContent:null,dateTimeDialog:null,showTitle:!0,styleSwitcherHasListener:!1,_buttons:null,_changeApprovalPasswordDialogContent:null,_changeApprovalPasswordDialog:null,_helpMenu:null,_optionsMenu:null,_siteOptions:null,_userSites:null,LANGUAGES:{"en-us":v.english,de:v.german,es:v.spanish,fr:v.french,pt:v.portuguese,
zh:v.chinese,"zh-tw":v.traditionalChinese,"default":v.browserDefault},postCreate:function(){this.inherited(arguments);this._buttons={};this.addChild(new E({label:w.hello+" "+rc.session.getDisplayName(),iconClass:"noIcon",baseClass:this.baseClass+" userGreeting"}));this._optionsMenu=new m({baseClass:this.baseClass});this.addChild(new F({baseClass:this.baseClass+" userMenuItem",label:v.options,iconClass:"rcIcon moreIcon",popup:this._optionsMenu}));this._makeHelpMenu();var a=rc.session.isPrivate();if(a||
rc.session.showLogOut())this._buttons.LogoutButton=new E({label:a?w.logoff:v.login,iconClass:"rcIcon logoffIcon",baseClass:this.baseClass+" actionLink lastItem",onClick:c.hitch(this,this.onLogout)}),this.addChild(this._buttons.LogoutButton);var b;1===rc.session._attributes.SiteMapArray.length?b=rc.session._attributes.SiteMapArray[0]:rc.session._attributes.SiteMapArray.forEach(c.hitch(this,function(a){a.sitePath===rc.pathInfo.site&&(b=a)}));b?this._makeOptionsMenu(b):this._makeOptionsForAdminBasic()},
onFetchAlarms:function(){this.emit("fetchAlarms")},onLogout:function(a){this.emit("logout",a)},onPrint:function(){this.emit("print")},onShowSetSystemTime:function(){this.emit("showSystemTime")},onShowWhatsNewDialog:function(){this.emit("showWhatsNewDialog")},onSyncAlarms:function(){this.emit("syncAlarms")},onToggleToolbar:function(){var a="false"!==t("tToolbar");this._buttons.ToggleToolbar.set("label",a?w.showToolbar:w.hideToolbar);t("tToolbar",!a,{expires:365,path:"/"});this.emit("toggleToolbar",
a)},onToggleTree:function(){var a="false"!==t("tTree");this._buttons.ToggleTree.set("label",a?w.showTree:w.hideTree);t("tTree",!a,{expires:365,path:"/"});this.emit("toggleTree",a)},resetDialog:function(){this.aboutDialog=null},resetMenusAndHelp:function(a){if(this._buttons.Print){var b=a&&a.Print;this.showButton("Print",b);b||this._buttons.ChangePassword||this.showButton("Separator",!1)}this._buttons.Themes&&this.showButton("Themes",a&&!1!==a.Themes);this._buttons.ToggleToolbar&&this.showButton("ToggleToolbar",
a&&!1!==a.ToggleToolbar);this._buttons.ToggleTree&&this.showButton("ToggleTree",a&&!1!==a.ToggleTree);this._buttons.SyncAlarms&&(this.showButton("SyncAlarms",a&&a.AlarmOptions),this.showButton("FetchAlarms",a&&a.AlarmOptions),this.showButton("AlarmSeparator",a&&a.AlarmOptions))},setUserSite:function(a){if("sites"===a[1].widget){this._userSites=[];for(var b=2;b<a.length&&("site"!==a[b].widget||(this._userSites.push(a[b].name),this._userSites.length!==a[1].children.length));b++);}else this._userSites=
[a[1].name];this._userSites&&(null!==this._optionsMenu&&(this._optionsMenu.onClose(),f.forEach(this._optionsMenu.getChildren(),c.hitch(this,function(a){this._optionsMenu.removeChild(a);a.destroyRecursive()})),this._buttons={}),1<this._userSites.length?this._makeOptionsForAdmin():1===this._userSites.length?this._makeOptionsMenu(rc.session._attributes.SiteMapArray[0]):this._makeOptionsForAdminBasic())},showButton:function(a,b){this._buttons[a]&&q.toggle(this._buttons[a].domNode,"hidden",!b)},toggleChangeApprovalPasswordItem:function(a){this._buttons.ChangeApprovalPassword&&
this.showButton("ChangeApprovalPassword",a)},_addAlarmsMenuItem:function(a,b){var n=!1;rc.session.hasRole(rc.session.roles.viewAlarms)&&(a.addChild(this._makeMenu(v.alarms,c.hitch(this,this._gotoPage,"Alarm",b.sitePath))),a.addChild(this._makeMenu(x.alarmsHist,c.hitch(this,this._gotoPage,"AlarmHistory",b.sitePath))),n=!0);return n},_addAuditMenuItem:function(a,b){var n=!1;rc.session.hasRole(rc.session.roles.audit)&&(a.addChild(this._makeMenu(v.auditTrail,c.hitch(this,this._gotoPage,"audit",b.sitePath))),
n=!0);return n},_addChangePasswordMenuItem:function(a){rc.session.getIsLDAP()||rc.session.isPublic()||(this._buttons.ChangePassword=this._makeMenu(w.changePass,c.hitch(this,this._showPasswordDialog)),a.addChild(this._buttons.ChangePassword))},_addChangeApprovalPasswordMenuItem:function(a){rc.session.isPublic()||(this._buttons.ChangeApprovalPassword=this._makeMenu(y.changeApprovalPassword,c.hitch(this,this._showChangeApprovalPasswordDialog)),a.addChild(this._buttons.ChangeApprovalPassword),this.toggleChangeApprovalPasswordItem(!0))},
_addFontSizeMenu:function(a){if(C.getThemes()){var b=new k({baseClass:"user-tool-bar-submenu fontSizesSelectionItems"}),c;for(c in C.getFontSizes())b.addChild(new g({label:v[c.replace(/ |\(|\)/g,"").toLowerCase()],fontSize:c,onClick:function(){C.setActiveFontSize(window.document,this.fontSize)}}));b=new l({label:v.tbFontSize,baseClass:"dijitMenuItem fontSizePopupMenu",popup:b});u.set(b.arrowWrapper,"visibility","");a.addChild(b)}},_addLanguageMenu:function(a,b){var n=new k({baseClass:"user-tool-bar-submenu languageMenuItems"}),
q=t("locale");f.forEach(Object.keys(this.LANGUAGES),c.hitch(this,function(a){var b=this.LANGUAGES[a],c="";if(q===a||void 0===q&&"default"===a)c="checkIcon";var d=new Date;d.setYear(d.getFullYear()+100);d={path:"/",expires:d};t("defaultLocale",getLocale(),d);"default"===a&&(a=null);n.addChild(new g({label:b,locale:a,iconClass:c,onClick:function(){var b={path:"/"};null===a&&(b.expires=-1);t("locale",a,b);window.location.reload()}}))}));var r=new l({label:v.language,baseClass:"dijitMenuItem languagePopupMenuItem",
popup:n});u.set(r.arrowWrapper,"visibility","");a.addChild(r);b&&a.addChild(new d)},_addSetTimeMenuItem:function(a){rc.session.hasRole(rc.session.roles.setTime)&&""!==webview.pathUtil.getInfo(window.location.pathname).system&&a.addChild(new g({label:v.tbSystemTime,baseClass:"dijitMenuItem systemTimeMenuItem",iconClass:"",onClick:c.hitch(this,this.onShowSetSystemTime)}))},_addThemeMenu:function(a){if(C.getThemes()){delete C.themes["Kiosk optimized"];var b=new k({baseClass:"user-tool-bar-submenu themeSelectionItems"}),
c;for(c in C.getThemes())b.addChild(new g({label:v[c.replace(/ |\(|\)/g,"").toLowerCase()],baseClass:"dijitMenuItem "+c.replace(/ |\(|\)/g,"").toLowerCase()+"MenuItem",theme:c,iconClass:"",onClick:function(){C.setActiveStyleSheet(window.document,this.theme)}}));this._buttons.Themes=new l({label:v.tbTheme,baseClass:"dijitMenuItem themePopupMenu",popup:b});u.set(this._buttons.Themes.arrowWrapper,"visibility","");a.addChild(this._buttons.Themes)}},_addToggleToolbarButton:function(a){var b="false"===
t("tToolbar")?w.showToolbar:w.hideToolbar;this._buttons.ToggleToolbar=this._makeMenu(b,c.hitch(this,this.onToggleToolbar));a.addChild(this._buttons.ToggleToolbar)},_addToggleTreeButton:function(a){var b="false"===t("tTree")?w.showTree:w.hideTree;this._buttons.ToggleTree=this._makeMenu(b,c.hitch(this,this.onToggleTree));a.addChild(this._buttons.ToggleTree)},_gotoPage:function(a,b){var c=window.location.pathname.toLowerCase(),n=rc.rootPath.toLowerCase()+"admin",c=0===c.indexOf(n);b&&c?(c=B.getWindowLocationOrigin()+
rc.rootPath+encodeURIComponent(b)+"/"+B.mnemonicToUri(a),window.location.href=c):window.location=B.mnemonicToUri(a)},_makeHelpMenu:function(){null===this._helpMenu&&(this._helpMenu=new m({baseClass:this.baseClass+" dropDownMenu"}),this._helpMenu.addChild(new g({label:v.tbShowTips,baseClass:"dijitMenuItem showTooltipsMenuItem",iconClass:L.showing?"checkIcon":"",onClick:c.hitch(this,this._toggleTooltip)})),this._helpMenu.addChild(new g({label:w.tbUserGuide,baseClass:"dijitMenuItem userGuideMenuItem",
onClick:c.hitch(this,function(){var a=H.getContextSensitiveHelpLink();window.open(a,"_blank")})})),this._helpMenu.addChild(new g({label:z.title,baseClass:"dijitMenuItem aboutMenuItem",onClick:c.hitch(this,this.onShowWhatsNewDialog)})),this._helpMenu.addChild(new g({label:w.tbAbout,baseClass:"dijitMenuItem aboutMenuItem",onClick:c.hitch(this,this._showAboutDialog)})),this._helpMenu.addChild(new g({label:w.tbWebsiteLink,baseClass:"dijitMenuItem websiteLinkMenuItem",onClick:c.hitch(this,function(){window.open("https://www.reliablecontrols.com/",
"_blank")})})),this.addChild(new F({label:w.help,iconClass:"rcIcon helpIcon",baseClass:this.baseClass+" actionLink",popup:this._helpMenu})))},_makeMenu:function(a,b,c){a=new g({label:a});this.own(A(a.domNode,"click",b));q.toggle(a.domNode,"hidden",!0===c);return a},_makeOptionsForAdmin:function(){this._addChangePasswordMenuItem(this._optionsMenu);this._addChangeApprovalPasswordMenuItem(this._optionsMenu);this._buttons.Print=this._makeMenu(v.print,c.hitch(this,this.onPrint),!0);this._optionsMenu.addChild(this._buttons.Print);
this._optionsMenu.addChild(new d);rc.session._attributes.SiteMapArray.forEach(c.hitch(this,function(a){var b=new k({baseClass:"dijitMenuItem user-tool-bar-submenu MenuItem"});this._addAuditMenuItem(b,a);this._addAlarmsMenuItem(b,a);a=new l({label:a.siteName,popup:b});u.set(a.arrowWrapper,"visibility","");this._optionsMenu.addChild(a)}));this._optionsMenu.addChild(new d);this._addLanguageMenu(this._optionsMenu,!0);this._addToggleTreeButton(this._optionsMenu)},_makeOptionsForAdminBasic:function(){this._addChangePasswordMenuItem(this._optionsMenu);
this._addChangeApprovalPasswordMenuItem(this._optionsMenu);this._optionsMenu.addChild(new d);this._addLanguageMenu(this._optionsMenu,!0);this._addToggleTreeButton(this._optionsMenu)},_makeOptionsMenu:function(a){this._addChangePasswordMenuItem(this._optionsMenu);this._addChangeApprovalPasswordMenuItem(this._optionsMenu);this._buttons.Print=this._makeMenu(v.print,c.hitch(this,this.onPrint));this._optionsMenu.addChild(this._buttons.Print);this._buttons.Separator=new d;this._optionsMenu.addChild(this._buttons.Separator);
var b=this._addAuditMenuItem(this._optionsMenu,a);(b|=this._addAlarmsMenuItem(this._optionsMenu,a))&&this._optionsMenu.addChild(new d);this._addLanguageMenu(this._optionsMenu);J.isAdminPage()||(this._addThemeMenu(this._optionsMenu),this._addFontSizeMenu(this._optionsMenu));this._addSetTimeMenuItem(this._optionsMenu);this._optionsMenu.addChild(new d);this._addToggleToolbarButton(this._optionsMenu);this._addToggleTreeButton(this._optionsMenu);this._buttons.AlarmSeparator=new d;this._optionsMenu.addChild(this._buttons.AlarmSeparator);
q.toggle(this._buttons.AlarmSeparator.domNode,"hidden",!0);this._buttons.SyncAlarms=this._makeMenu(n.syncBacnetAlarms,c.hitch(this,this.onSyncAlarms),!0);this._optionsMenu.addChild(this._buttons.SyncAlarms);this._buttons.FetchAlarms=this._makeMenu(n.unackedAlarms,c.hitch(this,this.onFetchAlarms),!0);this._optionsMenu.addChild(this._buttons.FetchAlarms)},_showAboutDialog:function(){if(null===this.aboutDialog||null===this.aboutDialog.domNode.parentNode)this.aboutDialog=new D;this.aboutDialog.show()},
_showChangeApprovalPasswordDialog:function(){null===this._changeApprovalPasswordDialogContent&&(this._changeApprovalPasswordDialogContent=new G,this._changeApprovalPasswordDialog=new p({title:y.changeApprovalPassword,content:this._changeApprovalPasswordDialogContent,baseClass:"changePasswordDialogBox"}),this.own(A(this._changeApprovalPasswordDialogContent,"finished",c.hitch(this,function(){this._changeApprovalPasswordDialog.hide()})),A(this._changeApprovalPasswordDialog,"hide",c.hitch(this,function(){this._changeApprovalPasswordDialogContent.onHide()})),
b.after(this._changeApprovalPasswordDialog,"destroy",c.hitch(this,function(){this._changeApprovalPasswordDialogContent=this._changeApprovalPasswordDialog=null}))));this._changeApprovalPasswordDialog.show()},_showPasswordDialog:function(){null===this.changeDialogContent&&(this.changeDialogContent=new I,this.changeDialog=new p({title:w.changePass,content:this.changeDialogContent,baseClass:"changePasswordDialogBox"}),this.own(A(this.changeDialogContent,"finished",c.hitch(this,function(){this.changeDialog.hide()})),
A(this.changeDialog,"hide",c.hitch(this,function(){this.changeDialogContent.onHide()})),b.after(this.changeDialog,"destroy",c.hitch(this,function(){this.changeDialogContent=this.changeDialog=null}))));this.changeDialog.show()},_toggleTooltip:function(){var a=this._helpMenu.getChildren()[0];a.set("iconClass",0===a.get("iconClass").length?"checkIcon":"");a.get("iconClass").length?L.show():L.hide()}})})},"dijit/MenuBar":function(){define(["dojo/_base/declare","dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],
function(p,m,k,h){return p("dijit.MenuBar",k,{templateString:h,baseClass:"dijitMenuBar",popupDelay:0,_isMenuBar:!0,_orient:["below"],_moveToPopup:function(g){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,g)},focusChild:function(g){this.inherited(arguments);this.activated&&g.popup&&!g.disabled&&this._openItemPopup(g,!0)},_onChildDeselect:function(g){this.currentPopupItem==g&&(this.currentPopupItem=null,g._closePopup());this.inherited(arguments)},
_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()},_onDownArrow:function(g){this._moveToPopup(g)},_onUpArrow:function(){},onItemClick:function(g,d){!g.popup||!g.popup.isShowingNow||/^key/.test(d.type)&&d.keyCode===m.DOWN_ARROW?this.inherited(arguments):(g.focusNode.focus(),this._cleanUp(!0))}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(p,
m,k,h,g,d){return p("dijit.MenuSeparator",[k,h,g],{templateString:d,buildRendering:function(){this.inherited(arguments);m.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(p,m,k,h,g,d,l){return p("dijit.PopupMenuItem",l,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var d=h("*",
this.srcNodeRef);this.inherited(arguments,[d[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(d,r){var c=this.popup;g.open(k.delegate(d,{popup:this.popup,around:this.domNode}));r&&c.focus&&c.focus()},_closePopup:function(){g.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var f=h("[widgetId]",this.dropDownContainer)[0];this.popup=d.byNode(f)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",
this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&m.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(d){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(d),delete this.popup);this.inherited(arguments)}})})},"rc/StyleSwitcher":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/cookie dojo/Deferred dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/Evented dojo/i18n!rc/nls/all dojo/request/xhr dojo/query require".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return new (m("rc/StyleSwitcher",[c],{dir:u.toUrl("rc/themes/"),ssMedia:{},initialize:function(){var a=this._getNode("themeId");this.themes={Gray:{name:b.gray,node:a,normal:{width:10,path:this.dir+"rcblack/rcblack.css"},large:{width:15,path:this.dir+"rcblack/subthemes/rcblack-lg/rcblack-lg.css"}},Black:{name:b.black,node:a,normal:{width:20,path:this.dir+"rcblack/subthemes/rcxtrablack/rcxtrablack.css"},large:{width:25,path:this.dir+"rcblack/subthemes/rcxtrablack-lg/rcxtrablack-lg.css"}},
White:{name:b.white,node:a,normal:{width:30,path:this.dir+"rcblack/subthemes/rcwhite/rcwhite.css"},large:{width:35,path:this.dir+"rcblack/subthemes/rcwhite-lg/rcwhite-lg.css"}},"Kiosk optimized":{name:b.kioskoptimized,node:a,normal:{width:40,path:this.dir+"rcblack/subthemes/kiosk/kiosk.css"},large:{width:45,path:this.dir+"rcblack/subthemes/kiosk-lg/kiosk-lg.css"}}};for(var c in this.themes)"undefined"!==typeof this.themes[c].name&&(this.themes[c].title=this.themes[c].name);this.fontSizes={normal:{name:b.normal},
large:{name:b.large}};for(var d in this.fontSizes)"undefined"!==typeof this.fontSizes[d].name&&(this.fontSizes[d].title=this.fontSizes[d].name);a=this._getNode("printId");this.printStyle={title:"Print",path:this.dir+"print/print.css",node:a,width:5}},cacheStyleSheet:function(a){return t.get(this.themes[a.style][a.fontSize].path,{})},enableStyleSheet:function(a,b){var c,n,d=!1,q;for(c=0;n=a.getElementsByTagName("link")[c];c++)-1!==n.getAttribute("rel").indexOf("style")&&n.getAttribute("title")&&(n.disabled=
!0,-1===n.getAttribute("rel").indexOf("alt")&&(q=n),"currentTheme"===n.getAttribute("title")&&(n.disabled=!1,n.removeAttribute("disabled"),d=!0,n.rel="stylesheet",n.href=this.themes[b.style][b.fontSize].path));d||(q.disabled=!1)},getPreferredStyleSheet:function(){return this.getDefaultTheme()},getPreferredFontSize:function(){return this.getDefaultFontSize()},getActiveStyleSheet:function(){var a,b,c;for(a=0;b=document.getElementsByTagName("link")[a];a++)if(-1!==b.getAttribute("rel").indexOf("style")&&
"currentTheme"===b.getAttribute("title")&&!b.disabled){for(a=0;a<this.themes.length;a++)this.themes[a].path===b.href&&(c=this.themes[a].title);return c}return null},getTheme:function(){return{style:this.getStyle(),fontSize:this.getFontSize()}},getStyle:function(){var a=this._readCookie("st"),a=null===a?this.getPreferredStyleSheet():a;if(this._isAdmin()||!this.themes.hasOwnProperty(a))a="Gray";return a},getFontSize:function(){var a=this._readCookie("fs");return null===a?this.getPreferredFontSize():
a},getThemes:function(){return this.themes},getFontSizes:function(){return this.fontSizes},getDefaultTheme:function(){return"Gray"},getDefaultFontSize:function(){return"normal"},onStyle:function(a){this.emit("style",a.style);return a},onBeforeStyle:function(a){this.emit("beforeStyle",a.style);return a},setActiveTheme:function(a){this._setActiveTheme(a,{style:this.getStyle(),fontSize:this.getFontSize()})},setActiveFontSize:function(a,b){this._setActiveTheme(a,{style:this.getStyle(),fontSize:b})},setActiveStyleSheet:function(a,
b){this._setActiveTheme(a,{style:b,fontSize:this.getFontSize()})},waitUntilRendered:function(a,b){var c=new d;this.watcher&&clearInterval(this.watcher);this.watchTimeout&&clearTimeout(this.watchTimeout);this.watcher=setInterval(k.hitch(this,function(){var n=r.position(b);100<n.w||n.w!==a.width||(clearInterval(this.watcher),this.watchTimeout&&clearTimeout(this.watchTimeout),c.resolve(a.title))}),100);this.watchTimeout=setTimeout(k.hitch(this,function(){this.watcher&&clearInterval(this.watcher);c.isFulfilled()||
c.reject(Error(a.title+" theme taking too long to render."))}),5E3);return c.promise},_changeStyleSheet:function(a,b){this.watcher&&clearInterval(this.watcher);this.watchTimeout&&clearTimeout(this.watchTimeout);for(var c,n=!1,q=0;c=a.getElementsByTagName("link")[q];q++)-1!==c.getAttribute("rel").indexOf("style")&&"currentTheme"===c.getAttribute("title")&&(n=!0);this.onBeforeStyle(b);c=new d;c.resolve(!0);n||2>rc.test.mode&&c.then(k.hitch(this,this.cacheStyleSheet,b));c.then(k.hitch(this,function(){return this.enableStyleSheet(a,
b)}));return this.waitUntilRendered(this.themes[b.style][b.fontSize],this.themes[b.style].node)},_createCookie:function(a,b,c){var n="";c&&(n=new Date,n.setTime(n.getTime()+864E5*c),n="; expires\x3d"+n.toGMTString());document.cookie=a+"\x3d"+b+n+"; path\x3d/"},_getNode:function(a){var b=q("."+a);return b.length?b[0]:l.create("div",{className:a},h.body(),"last")},_readCookie:function(a){a+="\x3d";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1,
d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},_setActiveTheme:function(a,b){var c=this._changeStyleSheet(a,b),n=new d;c.then(k.hitch(this,function(){this.onStyle(b)}));c.always(k.hitch(this,function(){n.resolve()}));this._toggleRootCscClass(b.style);this._isAdmin()||(this._createCookie("st",b.style,365),this._createCookie("fs",b.fontSize,365));return n.promise},_toggleRootCscClass:function(a){f.replace(document.body,a,Object.keys(this.themes))},_isAdmin:function(){return window.location.pathname.toUpperCase().startsWith("/ADMIN/")},
destroy:function(){this.ssMedia=null}}))})},"webview/widget/AboutDialog":function(){define("dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/string dojo/text!./templates/AboutDialog.html rc/_base/Error rc/_Widget rc/widget/Dialog".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t){return k("webview/widget/AboutDialog",[b,p,m,t],{templateString:r,draggable:!1,initialized:!1,rcStrings:g,webviewStrings:d,postCreate:function(){this.inherited(arguments);
this.fetch()},show:function(){this.inherited(arguments);this.initialized||this.setUpOnClicks()},setUpOnClicks:function(){this.initialized=!0;this.own(l(dijit._underlay.domNode,"click",h.hitch(this,this.hide)),l(this.domNode,"click",h.hitch(this,this.hide)))},render:function(b){this.versionNumber.innerHTML=d.rcwebview+" "+webview.version.toStringAll();this.licenseInfo.innerHTML="\x3cspan\x3e"+d.name+": "+b.customerName+"\x3c/span\x3e\x3cspan\x3e"+d.licenseSerial+b.serialNumber+"\x3c/span\x3e\x3cspan\x3e"+
f.substitute(d.licenseAuthorized,[b.licensedSystems])+"\x3c/span\x3e\x3cspan\x3e"+d.licenseExpires+b.licenseExpiry+"\x3c/span\x3e";this.copyright.innerHTML=f.substitute(d.copyright2014X,[rc.buildYear])},fetch:function(){var b={type:"rest",method:"GET",path:"License",load:h.hitch(this,function(b){void 0!==b.data&&null!==b.data&&this.render(b.data)}),error:h.hitch(this,function(b){this._onInitError(new c({name:g.loadFailed,message:d.failToLoadLicense,e:b}))})};rc.xhr.requestNow(b)}})})},"rc/widget/Dialog":function(){define("dijit/Dialog dijit/layout/utils dojo/_base/array dojo/_base/declare dojo/dom-geometry dojo/dom-style dojo/sniff dojo/window".split(" "),
function(p,m,k,h,g,d,l,f){return h("rc/widget/Dialog",[p],{resize:function(f){if("none"!==this.domNode.style.display){this._checkIfSingleChild();!f&&this._shrunk&&(this._singleChild&&"undefined"!==typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),k.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(b){b&&d.set(b,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position=
"absolute");if(f){g.setMarginBox(this.domNode,f);var c=[];this.titleBar&&c.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&c.push({domNode:this.actionBarNode,region:"bottom"});var b={domNode:this.containerNode,region:"center"};c.push(b);var r=m.marginBox2contentBox(this.domNode,f);m.layoutChildren(this.domNode,r,c);this._singleChild?(c=m.marginBox2contentBox(this.containerNode,b),this._singleChild.resize({w:c.w,h:c.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();
l("touch")||f||this._position()}}})})},"webview/widget/MenuBarItem":function(){define(["dijit/MenuItem","dojo/_base/declare","dojo/text!webview/widget/templates/MenuBarItem.html"],function(p,m,k){k=m("webview/widget/_MenuBarItemMixin",null,{templateString:k});p=m("webview/widget/MenuBarItem",[p,k],{});p._MenuBarItemMixin=k;return p})},"webview/widget/PopupMenuBarItem":function(){define("dijit/PopupMenuItem dijit/popup dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/has dojo/window ./MenuBarItem dojo/sniff".split(" "),
function(p,m,k,h,g,d,l,f){return k("webview/widget/PopupMenuBarItem",[p,f._MenuBarItemMixin],{_openPopup:function(f,c){var b=this.popup;m.open(h.delegate(f,{popup:this.popup,around:this.domNode}));c&&b.focus&&b.focus();if(d("touch")&&!d("ios")){var r=l.getBox(),q=g.getMarginBox(b._popupWrapper);g.setMarginBox(b._popupWrapper,{l:eval(q.l-r.l),t:eval(q.t-r.t)})}}})})},"webview/widget/passwords/ChangeApprovalPasswordDialog":function(){define(["dojo/_base/declare","dojo/dom-class","./_ChangePasswordMixin"],
function(p,m,k){return p("webview/widget/passwords/ChangeApprovalPasswordDialog",[k],{changePasswordUrl:"ChangeApprovalPassword",constructor:function(){this.templateContentStrings={newPasswordLabel:this.resetPasswordStrings.newApprovalPassword,newPasswordVerifyLabel:this.webviewStrings.verifyApprovalPassword}},validate:function(){var h=!0;this.currPass.get("value")===this.newPass.get("value")&&(this._validationFailedForNewPassword(),h=!1);return h},_validationFailedForNewPassword:function(){m.add(this.newPass.domNode,
"invalid");this.onError(this.resetPasswordStrings.loginMustNotMatchApproval)}})})},"webview/widget/passwords/_ChangePasswordMixin":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!webview/nls/resetPassword dojo/on dojo/query dojo/text!webview/widget/passwords/templates/ChangePasswordDialog.html dojo/topic dojox/html/entities rc/util/notices ../../util/util ../../xhrEnhanced".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z){return g("webview/widget/passwords/_ChangePasswordMixin",[m,p,k],{_IncorrectLoginCode:501,_LockedOutCode:507,_LockedOutRequiresAdminCode:509,_LoginMatchesApproval:504,_SuccessCode:200,_UnexpectedCode:508,changePasswordUrl:null,templateString:a,templateContentStrings:null,constructor:function(){this.webviewStrings=c;this.errorStrings=b;this.rcStrings=r;this.resetPasswordStrings=t},postCreate:function(){this._setupOnClicks()},clearFields:function(){this.currPass.set("value",
"");this.newPass.set("value","");this.verifyPass.set("value","")},onCancelClick:function(){x.widget.clear();this._onFinished()},onError:function(a){x.widget.clear();n.publish("sticky",{type:"error",message:a});this.emit("error",{message:a})},onFinished:function(){this.emit("finished")},onHide:function(){this.clearFields();this._clearWarnings()},onSaveClick:function(){x.widget.clear();this._saveChanges()},_changePassword:function(a){z.post(this.changePasswordUrl,{handleAs:"json",data:{userId:rc.session.getAttribute("userId"),
loginPassword:a.encryptedLogInPassword,newPassword:a.encryptedNewPassword}}).then(d.hitch(this,function(a){a.errStatus===this._SuccessCode?(this._onPasswordChangeSuccess(),this._onFinished()):a.errStatus===this._LockedOutCode||a.errStatus===this._LockedOutRequiresAdminCode?this._redirectLogin():this._displayErrorMessage(a)}),d.hitch(this,this._displayErrorMessage,{errStatus:this._UnexpectedCode,errMsg:"Rejected"}))},_clearWarnings:function(){var a=u(".invalid",this.dialogContent);h.forEach(a,function(a){f.remove(a,
"invalid")})},_displayErrorMessage:function(a){a.errStatus===this._IncorrectLoginCode?this._passwordInvalid("wrong"):a.errStatus===this._LoginMatchesApproval?this.validate():this._passwordInvalid("error")},_encryptPasswords:function(){var a=new l;this.own(a);w.getRSAKeys().then(d.hitch(this,function(b){var c=v.encode(this.currPass.get("value")),n=v.encode(this.newPass.get("value"));b={encryptedLogInPassword:w.encrypt(c,b),encryptedNewPassword:w.encrypt(n,b)};a.resolve(b)}));return a.promise},_onFinished:function(){this.clearFields();
this.onFinished()},_onPasswordChangeSuccess:function(){n.publish("alert",{type:"success",message:this.errorStrings.successfulSave})},_passwordInvalid:function(a){var b="";switch(a){case "wrong":f.add(this.currPass.domNode,"invalid");b=this.errorStrings.incorrectCurrPass;break;case "matching":f.add(this.newPass.domNode,"invalid");f.add(this.verifyPass.domNode,"invalid");b=this.errorStrings.pwDoNotMatch;break;case "length":f.add(this.newPass.domNode,"invalid");b=this.errorStrings.loginPassEmpty;break;
default:b=this.errorStrings.changeFailed,console.error(this.declaredClass+" - passwordInvalid(): Invalid reason",a)}this.onError(b)},_redirectLogin:function(){window.location=rc.loginURI},_saveChanges:function(){this._clearWarnings();this._validate()},_setupOnClicks:function(){this.own(q(this.saveButton,"click",d.hitch(this,this.onSaveClick)),q(this.cancelButton,"click",d.hitch(this,this.onCancelClick)))},_validate:function(){if(!1===this._validateEmptyFields())this.onError(this.errorStrings.loginPassEmpty);
else this.newPass.get("value")!==this.verifyPass.get("value")?this._passwordInvalid("matching"):!0===this.validate()&&this._encryptPasswords().then(d.hitch(this,function(a){this._changePassword(a)}))},_validateEmptyFields:function(){var a=!0;1>this.currPass.get("value").length&&(a=!1,f.add(this.currPass.domNode,"invalid"));1>this.newPass.get("value").trim().length&&(a=!1,f.add(this.newPass.domNode,"invalid"));return a}})})},"webview/widget/passwords/ChangePasswordDialog":function(){define(["dojo/_base/declare",
"./_ChangePasswordMixin"],function(p,m){return p("webview/widget/passwords/ChangePasswordDialog",[m],{changePasswordUrl:"ChangeLoginPassword",constructor:function(){this.templateContentStrings={newPasswordLabel:this.webviewStrings.newPass,newPasswordVerifyLabel:this.webviewStrings.confirmationPassword}},validate:function(){return!0}})})},"webview/widget/whatsNew/_WhatsNewMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","./WhatsNewDialog"],function(p,m,k,h){return p("webview/widget/whatsNew/_WhatsNewMixin",
[],{whatsNewDialog:null,_getOptOutVersion:function(){var g=rc.session.getAttribute("whatsNewOptOutVersion");return this._parseVersionNumber(g)},_loadWhatsNew:function(){rc.session.getNewLogin()&&(this._needsWhatsNew()&&this._showWhatsNewDialog(),rc.session.clearNewLogin())},_optedOutOfCurrentVersion:function(){var g=this._getOptOutVersion();return g.major===webview.version.major&&g.minor===webview.version.minor&&g.patch===webview.version.patch},_needsWhatsNew:function(){var g=!1;webview.mode.isDevelopmentMode()||
(g=!this._optedOutOfCurrentVersion());return g},_parseVersionNumber:function(g){g=g.match(/^([0-9]+).([0-9]+).([0-9]+)/)||[1,1,1,1];return{major:Number(g[1]),minor:Number(g[2]),patch:Number(g[3])}},_showWhatsNewDialog:function(){null===this.whatsNewDialog&&(this.whatsNewDialog=new h({optOutVersion:this._getOptOutVersion(),currentVersion:webview.version}),this._supportingWidgets.push(this.whatsNewDialog),this.own(k.after(this.whatsNewDialog,"destroy",m.hitch(this,function(){this.whatsNewDialog=null}))));
this.whatsNewDialog.show()}})})},"webview/widget/whatsNew/WhatsNewDialog":function(){define("dijit/_WidgetsInTemplateMixin dijit/Dialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!../../nls/whatsNew dojo/on dojo/text!./templates/WhatsNewDialog.html dojox/widget/Rotator ./ContentPane ./PaneIndicator ./_WhatsNewContent ../../admin/_ErrorMessageMixin ../../xhrEnhanced dijit/form/Button dojox/widget/rotator/Pan".split(" "),function(p,m,k,h,g,d,l,f,r,
c,b,t,q,u,a,n){return h("webview/widget/WhatsNew/WhatsNewDialog",[u,m,a,p],{currentVersion:null,optOutVersion:null,displayedContentList:null,rotatorInstance:null,startOfNewContent:0,templateString:c,whatsNewStrings:f,_helpLink:"Welcome",_panesForRotator:null,_savedOptOutVersion:null,constructor:function(){this.displayedContentList=[];this._panesForRotator=[];this._indexToIndicatorMap={}},postCreate:function(){this.inherited(arguments);this.displayedContentList=[];var a=0;k.forEach(this.contentList,
function(b){this._hasContentVersionBeenOptedOut(b)&&(this.startOfNewContent=a+1);var c=new t(b);this._panesForRotator.push({className:"pane",innerHTML:c.domNode.innerHTML});this.displayedContentList.push(b);this._createIndicator(b,a++)},this);2>this.contentList.length&&d.add(this.carouselContainer,"hidden");this.own(r(this.optOutButton,"click",g.hitch(this,this._onOptOut)))},show:function(){var a=this.inherited(arguments).then(g.hitch(this,function(){this._createRotator();this._goToPane(this.startOfNewContent);
this.own(r(dijit._underlay,"click",g.hitch(this,this.hide)))})),b=rc.session.getAttribute("userId");n.get("WhatsNew",{handleAs:"json",query:{userId:b}}).then(g.hitch(this,function(a){this.savedOptOutVersion=a.data.optOutVersion}),g.hitch(this,function(a){console.error("Unexpected error: "+a.Message,a)}));return a},_createIndicator:function(a,b){var c=new q({active:!1,title:a.title});this._indexToIndicatorMap[b]=c;this.own(r(c,"click",g.hitch(this,this._goToPane,b)));l.place(c.domNode,this.rotatorIndicator,
"last")},_createRotator:function(){this.rotatorInstance||(this.rotatorInstance=new b({transition:"dojox.widget.rotator.pan",panes:this._panesForRotator},this.rotator))},_goToNext:function(){var a=Number(this.rotatorInstance.idx)+1;a>this.rotatorInstance.panes.length-1&&(a=0);this._goToPane(a)},_goToPane:function(a){a>this.contentList.length-1&&(a=this.contentList.length-1);Object.values(this._indexToIndicatorMap).filter(function(a){return a.get("active")}).forEach(function(a){a.set("active",!1)});
this._helpLink=this.contentList[a].helpURL;this._indexToIndicatorMap[a].set("active",!0);this.rotatorInstance.go(a)},_goToPrevious:function(){var a=Number(this.rotatorInstance.idx)-1;0>a&&(a=this.rotatorInstance.panes.length-1);this._goToPane(a)},_hasContentVersionBeenOptedOut:function(a){var b=!1;a.version.major<this.currentVersion.major?b=!0:a.version.major===this.currentVersion.major&&a.version.minor<this.currentVersion.minor?b=!0:a.version.major===this.currentVersion.major&&a.version.minor===
this.currentVersion.minor&&a.version.patch<=this.currentVersion.patch&&(b=!0);return b},_onOptOut:function(){var a=this.currentVersion.major+"."+this.currentVersion.minor+"."+this.currentVersion.patch;n.put("WhatsNew",{handleAs:"json",data:{userId:rc.session.getAttribute("userId"),optOutVersion:a}}).then(g.hitch(this,function(a){a.errStatus===this.SuccessCode?this.hide():this._displayError(a)}),g.hitch(this,function(a){this._displayError({errStatus:this.UnexpectedCode,errMSG:a.message})}))},_onReadMore:function(){window.open("Help/Index/"+
this._helpLink,"_blank")}})})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){m=m("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(n,
d){h.mixin(this,n);var v=this,q=v.transition,k=v._transitions={},y=v._idMap={},m=v.transitionParams=eval("({ "+v.transitionParams+" })");d=v._domNode=l.byId(d);v._domNodeContentBox=c.getContentBox(d);var B={left:0,top:0},C=function(a,b){};v.id=d.id||(new Date).getTime();"static"==b.get(d,"position")&&b.set(d,"position","relative");k[q]=h.getObject(q);k[q]||(k[v.transition="dojox.widget.rotator.swap"]=h.getObject("dojox.widget.rotator.swap"));m.duration||(m.duration=500);g.forEach(v.panes,function(a){r.create("div",
a,d)});var D=v.panes=[];a("\x3e *",d).forEach(function(c,n){var d={node:c,idx:n,params:h.mixin({},m,eval("({ "+(f.get(c,"transitionParams")||"")+" })"))},q=d.trans=f.get(c,"transition")||v.transition;g.forEach(["id","title","duration","waitForEvent"],function(a){d[a]=f.get(c,a)});d.id&&(y[d.id]=n);k[q]||(k[q]=h.getObject(q))||C(q,d.trans=v.transition);B.position="absolute";B.display="none";if(null==v.idx||f.get(c,"selected"))null!=v.idx&&b.set(D[v.idx].node,"display","none"),v.idx=n,B.display="";
b.set(c,B);a("\x3e script[type^\x3d'dojo/method']",c).orphan().forEach(function(a){var b=f.get(a,"event");b&&(d[b]=u._functionFromScript(a))});D.push(d)});v._controlSub=t.subscribe(v.id+"/rotator/control",h.hitch(v,this.control))},destroy:function(){g.forEach([this._controlSub,this.wfe],function(a){a.remove()});r.destroy(this._domNode)},next:function(){return this.go(this.idx+1)},prev:function(){return this.go(this.idx-1)},go:function(a){var c=this,n=c.idx,d=c.panes,q=d.length,f=c._idMap[a];c._resetWaitForEvent();
a=null!=f?f:a||0;a=a<q?0>a?q-1:a:0;if(a==n||c.anim)return null;var r=d[n],u=d[a];b.set(r.node,"zIndex",2);b.set(u.node,"zIndex",1);var l={current:r,next:u,rotator:c};if(n=c.anim=c._transitions[u.trans](h.mixin({rotatorBox:c._domNodeContentBox},l,u.params))){var g=new k,m=u.waitForEvent,F=p.after(n,"onEnd",function(){b.set(r.node,{display:"none",left:0,opacity:1,top:0,zIndex:0});F.remove();c.anim=null;c.idx=a;if(r.onAfterOut)r.onAfterOut(l);if(u.onAfterIn)u.onAfterIn(l);c.onUpdate("onAfterTransition");
m||(c._resetWaitForEvent(),g.callback())},!0);c.wfe=m?t.subscribe(m,function(){c._resetWaitForEvent();g.callback(!0)}):null;c.onUpdate("onBeforeTransition");if(r.onBeforeOut)r.onBeforeOut(l);if(u.onBeforeIn)u.onBeforeIn(l);n.play();return g}},onUpdate:function(a,b){t.publish(this.id+"/rotator/update",a,this,b||{})},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(a){var b=h._toArray(arguments),c=this;b.shift();c._resetWaitForEvent();c[a]&&((b=c[a].apply(c,
b))&&b.addCallback(function(){c.onUpdate(a)}),c.onManualChange(a))},resize:function(a,b){var n=this._domNodeContentBox={w:a,h:b};c.setContentSize(this._domNode,n);g.forEach(this.panes,function(a){c.setContentSize(a.node,n)})},onManualChange:function(){}});h.setObject("dojox.widget.rotator.swap",function(a){return new d.Animation({play:function(){b.set(a.current.node,"display","none");b.set(a.next.node,"display","");this._fire("onEnd")}})});return m})},"webview/widget/whatsNew/ContentPane":function(){define(["dijit/_TemplatedMixin",
"dijit/_WidgetBase","dojo/_base/declare","dojo/text!./templates/ContentPane.html"],function(p,m,k,h){return k("webview/widget/ContentPane",[m,p],{templateString:h,_setVersionStringAttr:{node:"versionContainer",attribute:"innerHTML"},_setTextAttr:{node:"textContainer",attribute:"innerHTML"},_setTitleAttr:{node:"titleContainer",attribute:"innerHTML"},constructor:function(){}})})},"webview/widget/whatsNew/PaneIndicator":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare",
"dojo/dom-class","dojo/text!./templates/PaneIndicator.html"],function(p,m,k,h,g){return k("webview/widget/WhatsNew/PaneIndicator",[m,p],{active:!1,templateString:g,_setActiveAttr:function(d){h.toggle(this.domNode,"active",d);this._set("active",d)}})})},"webview/widget/whatsNew/_WhatsNewContent":function(){define(["dojo/_base/declare","dojo/i18n!../../nls/all","dojo/i18n!../../nls/whatsNew"],function(p,m,k){return p("webview/widget/_WhatsNewContent",[],{contentList:[{imageClass:"nav-trees-whats-new",
title:k.navTreesTitle,text:k.navTreesContent,helpURL:"Trees",version:{major:3,minor:14,patch:1},versionString:"3.14.1"}]})})},"webview/admin/_ErrorMessageMixin":function(){define(["dojo/_base/declare","dojo/i18n!rc/nls/all","dojo/i18n!webview/nls/errorMessages","../util/util"],function(p,m,k,h){return p("webview/admin/_ErrorMessageMixin",null,{BACnetErrorCode:508,ErrorMessageMap:{200:m.success,403:k.accessForbidden,501:k.cannotAccessSystem,502:k.userHasNoAccess,504:k.unexpectedError,505:k.siteDoesNotExist,
506:k.insufficientPriviledges,510:k.operationInProgress,511:k.userCancelled,513:k.rcwvsError,522:k.descriptorIsPredefined,517:k.systemDoesNotExist},OperationInProgressCode:510,BACnetError:512,SuccessCode:200,UnexpectedCode:504,_getErrorMessage:function(g,d){var l="";"undefined"!==typeof this.ErrorMessageMap[g]?l=this.ErrorMessageMap[g]:g===this.BACnetErrorCode?l=this._decodeBACnetError(d):(l=this.errorStrings.unexpectedError,console.error("Unexpected Error: ",d));return l},_decodeBACnetError:function(g){return h.decodeBACnetError(g)}})})},
"dojox/widget/rotator/Pan":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/dom-style dojo/_base/fx dojo/fx".split(" "),function(p,m,k,h,g,d){function l(c,b){var f=b.next.node,q=b.rotatorBox,r=c%2,a=r?"left":"top",q=(r?q.w:q.h)*(2>c?-1:1),r={},n={};h.set(f,"display","");r[a]={start:0,end:-q};n[a]={start:q,end:0};return d.combine([g.animateProperty({node:b.current.node,duration:b.duration,properties:r,easing:b.easing}),g.animateProperty({node:f,duration:b.duration,properties:n,
easing:b.easing})])}function f(c,b){h.set(c,"zIndex",b)}var r={pan:function(c){var b=c.wrap,r=c.rotator.panes,q=r.length,u=q,a=c.current.idx,n=c.next.idx,v=Math.abs(n-a),g=Math.abs(q-Math.max(a,n)+Math.min(a,n))%q,w=a<n,z=3,y=[],A=[],B=c.duration;if(!b&&!w||b&&(w&&v>g||!w&&v<g))z=1;if(c.continuous){c.quick&&(B=Math.round(B/(b?Math.min(g,v):v)));f(r[a].node,u--);for(b=3==z;;){v=a;b?++a>=q&&(a=0):0>--a&&(a=q-1);v=r[v];g=r[a];f(g.node,u--);y.push(l(z,k.mixin({easing:function(a){return a}},c,{current:v,
next:g,duration:B})));if(b&&a==n||!b&&a==n)break;A.push(g.node)}c=d.chain(y);var C=m.connect(c,"onEnd",function(){m.disconnect(C);p.forEach(A,function(a){h.set(a,{display:"none",left:0,opacity:1,top:0,zIndex:0})})});return c}return l(z,c)},panDown:function(c){return l(0,c)},panRight:function(c){return l(1,c)},panUp:function(c){return l(2,c)},panLeft:function(c){return l(3,c)}};k.mixin(k.getObject("dojox.widget.rotator"),r);return r})},"webview/admin/widget/TreePaneFlyout":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dojo/text!./templates/TreePaneFlyout.html ./DeviceFlyoutContent ./SystemFlyoutContent".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return h("webview/admin/widget/TreePaneFlyout",[m,p],{templateString:u,baseClass:"treePaneFlyout",_animationTime:250,_currentItemIdentifier:-1,_currentWidth:0,_flyoutContent:null,_showing:!1,_minOpenWidth:260,_maxWidth:260,_minWidth:0,forceHide:function(){this._showing&&this._hide()},resize:function(){try{var a=l.byId("rcSystemHeader"),c=l.byId("rcSystemFooter"),n=a?a.clientHeight:0,d=document.body.clientHeight-((n||0)+((c?c.clientHeight:0)||0)),q=l.byId("rcSystemNav_splitter"),
f=l.byId("rcSystemNav").clientWidth+(q?q.clientWidth:0);b.set(this.domNode,{top:n+"px",height:d+"px",left:f+"px"})}catch(B){}},toggle:function(a){var b=a.widgetId;"device"===a.widget.toLowerCase()&&(b=a.systemId+"|"+b);this._showing&&b===this._currentItemIdentifier?this._hide():this._show(a)},_animate:function(){r.remove(this.domNode,"hidden");for(var a=b.get(l.byId("titleBarIconAndTextLabel"),"width"),c=l.byId("titleBarIconAndTextDevice"),n=b.get(c,"width"),f=q(".titleBarRowIcon",this.domNode),u=
0,t=0;t<f.length;t++)u+=f[t].clientWidth;this._maxWidth=Math.max(this._minOpenWidth,a+u);this._maxWidth=this._findWidestOptionItem();0<a?b.set(c,"width",Math.min(n,a)+1+"px"):b.set(c,"width",this._maxWidth-u+"px");g.animateProperty({node:this.domNode,duration:this._animationTime,properties:{width:{start:this._currentWidth,end:this._maxWidth}},onEnd:d.hitch(this,function(){this._showing=!0;this._currentWidth=this._maxWidth})}).play()},_findWidestOptionItem:function(){for(var a=q(".flyoutOption",this.domNode),
b=this._maxWidth,c=0;c<a.length;c++){var n=q(".iconBorder",a[c])[0].clientWidth,d=q(".flyoutIcon",a[0])[0].clientWidth,n=2*q(".iconBorder",a[c])[0].offsetLeft+(n-d),n=q(".flyoutOptionLine",a[c])[0].clientWidth+n;n>b&&(b=n)}return b},_hide:function(){g.animateProperty({node:this.domNode,duration:this._animationTime,properties:{width:{start:this._currentWidth,end:this._minWidth}},onEnd:d.hitch(this,function(){r.add(this.domNode,"hidden");this._showing=!1;this._currentWidth=this._minWidth})}).play()},
_show:function(v){b.set(l.byId("titleBarIconAndTextDevice"),"width","auto");this._flyoutContent&&this._flyoutContent.destroyRecursive(!0);"device"===v.widget.toLowerCase()?this._flyoutContent=new a({device:v.widgetId,deviceModel:v.deviceModel,site:v.site,supportedWorksheets:v.supportedWorksheets,system:v.systemId,protocolType:v.protocolType,supportsBACnet:v.supportsBACnet,iconClass:"flyoutTitleIcon svg-"+v.deviceModel.replace(/3rd/i,"third-party").toLowerCase()+"Icon",title:v.name}):"system"===v.widget.toLowerCase()&&
(this._flyoutContent=new n({site:v.site,system:v.widgetId,iconClass:"flyoutTitleIcon svg-system",title:v.name}));this._currentItemIdentifier=this._flyoutContent.get("identifier");v=this._flyoutContent.get("contentNode");k.forEach(q("li",v),d.hitch(this,function(a){this.own(t(a,"click",d.hitch(this,this._hide)))}));c.place(v,this.selectionOptions,"only");var r=this.baseClass+"SelectionOptions";0===v.children.length?f.set(this.selectionOptions,"class","emptyOptions "+r):f.set(this.selectionOptions,
"class","selectionOptions "+r);f.set(this.iconNode,"class",this._flyoutContent.get("iconClass"));f.set(this.titleBarDevice,"innerHTML",this._flyoutContent.get("title"));f.set(this.titleBarLabel,"innerHTML",this._flyoutContent.get("titleBarLabel"));this.resize();this._animate()}})})},"webview/admin/widget/DeviceFlyoutContent":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!webview/nls/all dojo/i18n!webview/nls/panelfiles dojo/on rc/_base/util ./_FlyoutContent ./FlyoutOption ../../util/util".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return m("webview/admin/widget/DeviceFlyoutContent",[r],{device:-1,deviceModel:null,protocolType:null,supportsBACnet:!1,supportedWorksheets:null,titleBarLabel:g.deviceActions,_mneToUrl:{stls:"#trendlogworksheet/View",mtls:"#trendlogworksheet/View","not-cls":"#notificationClasses",prgs:"#programsworksheet"},_worksheetOrder:null,_worksheetPosition:{stls:0,mtls:1,"not-cls":2,prgs:3},constructor:function(){this.supportedWorksheets=[]},buildRendering:function(){this.inherited(arguments);
this._worksheetOrder=Array(4);for(var b=0;b<this._worksheetOrder.length;b++)this._worksheetOrder[b]=null;this.supportedWorksheets=p.filter(this.supportedWorksheets,k.hitch(this,function(b){return"PRGS"===b.mne&&!rc.session.hasRole(rc.session.roles2.programsWorksheet,!0)||("STLS"===b.mne||"MTLS"===b.mne)&&!rc.session.hasRole(rc.session.adminRoles.editTrendlogs,!1)||"NOT-CLS"===b.mne&&!rc.session.hasRole(rc.session.roles2.notChg,!0)?!1:this._mneToUrl.hasOwnProperty(b.mne.toLowerCase())}));this.supportedWorksheets=
p.filter(this.supportedWorksheets,k.hitch(this,function(b){return this._mneToUrl.hasOwnProperty(b.mne.toLowerCase())}));this._setWorksheetLabels();0<this.supportedWorksheets.length&&(!this.protocolType||"rcp"!==this.protocolType)&&!0===this.supportsBACnet?(this.contentNode=h.create("ul"),p.forEach(this.supportedWorksheets,k.hitch(this,function(b){var d=new c({displayText:b.label,iconClass:"svg-"+b.mne.toLowerCase()+"Icon"});this.own(l(d.domNode,"click",k.hitch(this,function(){this._goToWorksheet(b.mne)})));
this._mapWorksheetsOrder(d,b.mne.toLowerCase())})),p.forEach(this._worksheetOrder,k.hitch(this,function(b){null!==b&&h.place(b.domNode,this.contentNode,"last")})),this._hasBackupRestorePermissions()&&(b=new c({displayText:d.backupRestore,listItemClass:"divider",iconClass:"svg-backup-restore-icon"}),this.own(l(b.domNode,"click",k.hitch(this,this._gotoBackupRestore))),h.place(b.domNode,this.contentNode,"last"))):rc.session.hasRole(rc.session.roles2.panFileBackup,!0)||rc.session.hasRole(rc.session.roles2.panFileRestore,
!0)?(b=new c({displayText:d.backupRestore,iconClass:"svg-backup-restore-icon"}),this.own(l(b.domNode,"click",k.hitch(this,this._gotoBackupRestore))),h.place(b.domNode,this.contentNode,"last")):this.contentNode=h.create("div",{innerHTML:g.noSupportedDeviceActions})},_getIdentifier:function(){return this.system+"|"+this.device},_hasBackupRestorePermissions:function(){return!(0===this.supportedWorksheets.length||!rc.session.hasRole(rc.session.roles2.panFileBackup,!0)&&!rc.session.hasRole(rc.session.roles2.panFileRestore,
!0))},_gotoBackupRestore:function(){if(b.isAdminPage())window.location.hash="#panelfiles?site\x3d"+this.site+"\x26system\x3d"+this.system+"\x26device\x3d"+this.device;else{var c=b.getObfuscatedHash("#"+this.device+"PAN-FILE");window.location=this._getClientUrl(c)}},_goToWorksheet:function(b){var c=k.hitch(this,function(b){var a=this._getWidgetURLFromMne(b),a=a+("?site\x3d"+this.site+"\x26system\x3d"+this.system+"\x26device\x3d"+this.device+"\x26mne\x3d"+b);window.location=f.getWindowLocationOrigin()+
rc.adminUrl+a});rc.setupWizard?rc.setupWizard.warn().then(k.hitch(this,function(b,a){a.stopWizard&&rc.setupWizard.stop();a.navigate&&c(b)},b)):c(b)},_getWidgetURLFromMne:function(b){return this._mneToUrl[b.toLowerCase()]},_mapWorksheetsOrder:function(b,c){this._worksheetOrder[this._worksheetPosition[c]]=b},_setWorksheetLabels:function(){p.forEach(this.supportedWorksheets,k.hitch(this,function(b){if(b.mne)switch(b.mne.toLowerCase()){case "mtls":b.label=g.multipointTrendLogs;break;case "stls":b.label=
g.singlePointTrendLogs;break;case "not-cls":b.label=g.notificationClasses;break;case "prgs":b.label=g.programs}}))}})})},"webview/admin/widget/_FlyoutContent":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/text!./templates/_FlyoutContent.html","rc/_base/util"],function(p,m,k,h,g){return p("webview/admin/widget/_FlyoutContent",[k,m],{contentNode:null,iconClass:"",identifier:-1,site:-1,system:-1,templateString:h,title:"",titleBarLabel:"",postCreate:function(){this.identifier=
this._getIdentifier()},_getClientUrl:function(d){var l=this.site,f=rc.session._attributes.SiteMapArray.find(function(d){return d.siteId===l});return g.getWindowLocationOrigin()+rc.rootPath+f.sitePath+"/"+this.system+"/"+d},_getIdentifier:function(){throw"Must be implemented by child class";}})})},"webview/admin/widget/FlyoutOption":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare","dojo/text!./templates/FlyoutOption.html"],function(p,m,k,h){return k("webview/admin/widget/FlyoutOption",
[m,p],{templateString:h,displayText:"",iconClass:"",listItemClass:""})})},"webview/admin/widget/SystemFlyoutContent":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!webview/nls/all dojo/i18n!webview/nls/panelfiles dojo/on rc/_base/util ./FlyoutOption ../../util/util ./_FlyoutContent".split(" "),function(p,m,k,h,g,d,l,f,r,c){return p("webview/admin/widget/SystemFlyoutContent",[c],{buildRendering:function(){this.inherited(arguments);if(this._hasSettingsPermissions()){var b=
new f({displayText:h.settings,iconClass:"svg-options-icon",listItemClass:"site-settings"});this.own(d(b.domNode,"click",m.hitch(this,this._goToSettings)));k.place(b.domNode,this.contentNode,"last")}this._hasBackupRestorePermissions()&&(b=new f({displayText:g.backupRestore,iconClass:"svg-backup-restore-icon"}),this.own(d(b.domNode,"click",m.hitch(this,this._goToBackupRestore))),k.place(b.domNode,this.contentNode,"last"));b=new f({displayText:h.pointReports,iconClass:"svg-point-report-icon"});this.own(d(b.domNode,
"click",m.hitch(this,this._goToPointReports)));k.place(b.domNode,this.contentNode,"last")},_getIdentifier:function(){return this.system},_hasSettingsPermissions:function(){return rc.session.hasRole(rc.session.adminRoles.admin)},_goToSettings:function(){var b="#system?site\x3d"+this.site+"\x26system\x3d"+this.system;window.location=l.getWindowLocationOrigin()+rc.adminUrl+b},_hasBackupRestorePermissions:function(){return rc.session.hasRole(rc.session.roles2.panFileBackup,!0)||rc.session.hasRole(rc.session.roles2.panFileRestore,
!0)},_goToBackupRestore:function(){if(r.isAdminPage())window.location.hash="#panelfiles?site\x3d"+this.site+"\x26system\x3d"+this.system;else{var b=r.getObfuscatedHash("#PAN-FILE");window.location=this._getClientUrl(b)}},_goToPointReports:function(){if(r.isAdminPage())window.location.hash="#pointreports?site\x3d"+this.site+"\x26system\x3d"+this.system;else{var b=r.getObfuscatedHash("#PRPS");window.location=this._getClientUrl(b)}}})})},"webview/admin/admin-includes":function(){require("rc/widget/DijitHasDropDownMixin webview/admin/reportTemplates/ReportTemplates webview/admin/reportTemplates/ReportTemplate webview/admin/roles/Permissions webview/admin/roles/RolesList webview/admin/roles/RoleLoginInfo webview/admin/sites/Sites webview/admin/sites/Site webview/admin/sites/AddSite webview/admin/systems/Systems webview/admin/systems/System webview/admin/systems/AddSystem webview/admin/systems/AddArchive webview/admin/trees/Trees webview/admin/trees/Tree webview/admin/schedules/Schedules webview/admin/schedules/Schedule webview/admin/schedules/NavScheduleToolbar webview/admin/users/Users webview/admin/users/LoginInfo webview/admin/users/Permissions webview/admin/users/PermittedSchedules webview/admin/users/NavPermissionsToolbar webview/admin/users/AddUser webview/admin/navGroups/NavGroups webview/admin/navGroups/NavGroup webview/admin/panelFiles/PanelFiles webview/admin/programs/Program webview/admin/worksheets/notificationClasses/NotificationClasses webview/admin/worksheets/programs/ProgramsWorksheet webview/admin/worksheets/remoteAlarms/RemoteAlarmNotifications webview/admin/worksheets/trendLogs/TrendLogPoints webview/admin/worksheets/trendLogs/TrendLogsView webview/admin/SetupFinished webview/reliable/EnterpriseSchedule webview/reliable/NavGroup webview/reliable/PointsReport webview/reliable/PointsReportWorksheet webview/reliable/TenantReport".split(" "))},
"webview/admin/reportTemplates/ReportTemplates":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/hash dojo/i18n!rc/nls/all dojo/i18n!../../nls/afterHoursReport dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/on dojo/request/xhr dojo/text!./templates/reportTemplates.html dojo/topic dojox/html/entities ../_base ../../widget/WarningDialogEnums dijit/form/Button dijit/form/TextBox ../../widget/MultiSelectBox ../../widget/WebviewContentPane".split(" "),function(p,
m,k,h,g,d,l,f,r,c,b,t,q,u,a){return m("webview/admin/reportTemplates/ReportTemplates",[u],{auditLogObjectName:"AHACReportTemplate",templateString:b,nameOfIndividual:"reportTemplate",afterHoursStrings:d,rcString:g,webviewStrings:l,_path:"ReportTemplates",_SuccessCode:200,_UnexpectedCode:504,_ErrorCodeToMessageMap:{403:f.accessForbidden,502:f.siteDoesNotExist,504:f.unexpectedError,506:f.generalInsufficientPrivileges},postCreate:function(){this.inherited(arguments);this.own(r(this.nameTB,"keyup",k.hitch(this,
this._enableAdd)))},fetch:function(){this._getTemplates().then(k.hitch(this,this.render),k.hitch(this,this._onInitError))},render:function(a){this.onInitSuccess();a.errStatus===this._SuccessCode?this._populateMultiselect(a):this._displayErrorMessage(a.errStatus)},_displayErrorMessage:function(a){var b=this._ErrorCodeToMessageMap[this._UnexpectedCode];"undefined"!==typeof this._ErrorCodeToMessageMap[a]&&(b=this._ErrorCodeToMessageMap[a]);t.publish("sticky",{type:"error",message:b})},_editItem:function(){var a=
this._multiSelect.getSelectedItems()[0];h("reportTemplate?site\x3d"+this.site+"\x26reporttemplate\x3d"+a.value)},_enableAdd:function(){this.addButton.set("disabled",""===this.nameTB.get("value"))},_getTemplates:function(){return c.get(this._path,{handleAs:"json",preventCache:!0,query:{siteId:this.site}})},_gotoAdd:function(a){a.errStatus===this._SuccessCode?(t.publish("updateNavTree"),h("reportTemplate?site\x3d"+this.site+"\x26reporttemplate\x3d"+a.id)):this._displayErrorMessage(a.errStatus)},_onAddItem:function(){this.validateAdd()?
c.post(this._path,{handleAs:"json",data:{siteId:this.site,name:q.encode(this.nameTB.get("value"))}}).then(k.hitch(this,this._gotoAdd),k.hitch(this,this._displayErrorMessage,this._UnexpectedCode)):t.publish("alert",{type:"error",message:f.nameIsEmpty})},_onDeleteItem:function(){var b=this._multiSelect.getSelectedItems();this.showConfirmationDialog(b);var d=r(this.confirmDeleteDialog,"close",k.hitch(this,function(n){if(n===a.returnValues.oneOrYes){var v=[];p.forEach(b,k.hitch(this,function(a){v.push(a.value)}));
c.del(this._path,{handleAs:"json",data:{templateIds:v}}).then(k.hitch(this,function(a){a.errStatus===this._SuccessCode&&(t.publish("updateNavTree"),this._getTemplates().then(k.hitch(this,this._populateMultiselect)));p.forEach(b,k.hitch(this,function(a){this._onDelete(a)}))}),k.hitch(this,this._displayErrorMessage,this._UnexpectedCode))}d.remove()}))},_populateMultiselect:function(a){a.errStatus===this._SuccessCode&&this.createDataArray({dataArray:a.templates})},_setLabels:function(){this._multiSelect.setHint(this.webviewStrings.msHint)}})})},
"webview/admin/_base":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/hash dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/json dojo/on dojo/topic dojo/text!webview/admin/templates/_base.html dojox/html/entities ./_Widget ../widget/WarningDialog ../widget/WarningDialogEnums ../xhrEnhanced dijit/form/Button dijit/form/TextBox ../widget/MultiSelectBox ../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w){return m("webview/admin/_base",n,{confirmDeleteDialog:null,errorStrings:c,individualPath:"",nameOfIndividual:"",auditLogObjectName:"",rcStrings:f,site:"",selectedItem:"",templateString:u,view:"",webviewStrings:r,_data:null,_maxInMultiSelect:5,_multiSelect:null,_path:"/",_updating:!1,constructor:function(){this._data=[]},postCreate:function(){this.inherited(arguments);g.set(this.domNode,"title","");webview.auditUtil.setContextDataWithSiteId(this.site,
[{objectName:"#"+this.auditLogObjectName}],this.title);this.fetch();this._addEditContent();this._setLabels();this._connectEvents()},clearFields:function(){this.nameTB&&this.nameTB.set("value","")},createDataArray:function(a){this.reset();a=a.dataArray.sort(function(a,b){return a.name.localeCompare(b.name)});p.forEach(a,k.hitch(this,function(a){this._data.push({label:a.name,value:a.id})}));this._multiSelect.replaceAll(this._data);a=this._data.length>this._maxInMultiSelect?this._maxInMultiSelect:this._data.length;
0<a&&this._multiSelect.setSize(a);this.onRender()},fetch:function(){if(!this._beginUpdate())return null;var a=new h,b={type:"rest",method:"GET",preventCache:!0,path:this._path};k.mixin(b,this._buildFetchParams());rc.xhr.request(b).then(k.hitch(this,function(b){b.data&&200===b.data.errStatus?this.render(b):b.data?this._displayErrorMessage(b.data):console.error(this.declaredClass+" - fetch(): Data returned is null",b);this.onInitSuccess();a.resolve(b);return b}),k.hitch(this,function(b){this._onInitError(b);
a.reject(b);return b})).always(k.hitch(this,this._endUpdate));return a.promise},hasDuplicates:function(a){return 0<p.filter(this._data,function(b){return b.label===a.name}).length?!0:!1},hasIndividuals:function(){return this._data&&this._data.length},onAdd:function(a){this.emit("add",a);return a},onDelete:function(a){this.emit("delete",a);return a},onRenderNoItems:function(){t.emit(this,"renderNoItems")},onRenderItems:function(){t.emit(this,"renderItems")},onRender:function(){if(this._data.length)this.onRenderItems();
else this.onRenderNoItems();t.emit(this,"render")},onSendComplete:function(a){if(rc.setupWizard&&this.hasIndividuals()){var b=[{name:"site",value:this.site},{name:this.nameOfIndividual,value:this._getLastIndividual()}];rc.setupWizard.next(b)}this.emit("sendComplete",a)},render:function(a){a.data.dataArray&&0<a.data.dataArray.length&&this.createDataArray(a.data);a.data.licenseData&&this.setLicensedSystemsInfo(a.data);this.onRender()},reset:function(){this._data=[]},showConfirmationDialog:function(a){var b=
this.errorStrings.confirmDeleteFollowing+"\x3cbr /\x3e\x3cul\x3e";p.forEach(a,k.hitch(this,function(a){b+="\x3cli\x3e"+a.label+"\x3c/li\x3e"}));b+="\x3c/ul\x3e";null===this.confirmDeleteDialog&&(this.confirmDeleteDialog=new v({type:x.types.binaryConfirm,title:this.webviewStrings.confirmDeleteAction}));this.confirmDeleteDialog.set("text",b);this.confirmDeleteDialog.open()},setLicensedSystemsInfo:function(a){var b=a.licenseData.licensedSystems;a=a.licenseData.usedSystems;this.systemInfo.innerHTML=a+
"/"+b+" "+this.webviewStrings.systemsUsed;a>=b?(this.addButton.set("disabled",!0),this.systemInfo.innerHTML=this.systemInfo.innerHTML+" - \x3cb\x3e"+this.webviewStrings.licenseLimitReached+"\x3c/b\x3e"):this.addButton.set("disabled",!1)},validateAdd:function(){return""!==this.nameTB.get("value").trim()},_addEditContent:function(){this.contentArea.setMainContent(this.listContainer);this.addContainer&&this.contentArea.setMainContent(this.addContainer)},_beginUpdate:function(){return this._updating?
!1:this._updating=!0},_buildAddParams:function(){return{}},_buildDeleteParams:function(a){return a},_buildFetchParams:function(){return{}},_connectEvents:function(){this.own(t(this._multiSelect,"singleSelected",k.hitch(this,function(a){null===a?(d.add(this.editButton.domNode,"hidden"),this.previewButton&&d.add(this.previewButton.domNode,"hidden")):(d.remove(this.editButton.domNode,"hidden"),this.previewButton&&d.remove(this.previewButton.domNode,"hidden"),this.selectedItem=a.value)})));this.own(t(this._multiSelect,
"select",k.hitch(this,function(){0<this._multiSelect.getSelectedItems().length?d.remove(this.deleteButton.domNode,"hidden"):d.add(this.deleteButton.domNode,"hidden")})))},_displayErrorMessage:function(a){a=this._getErrorMessage(a.errStatus);q.publish(a.noticeType,{message:a.msg,type:a.type})},_editItem:function(){l(this.individualPath+"?site\x3d"+this.site+"\x26"+this.nameOfIndividual+"\x3d"+this.selectedItem)},_endUpdate:function(){this._updating&&(this._updating=!1)},_getErrorMessage:function(a){var b=
{msg:this.errorStrings.unexpectedError,type:"error",noticeType:"sticky"};"undefined"!==typeof this.ErrorMessageMap[a]?b.msg=this.ErrorMessageMap[a]:console.error(this.declaredClass+" - _getErrorMessage(): Unknown error status",a);return b},_getLastIndividual:function(){var a="";this._data&&this._data.length&&(a=this._data[this._data.length-1]);return a},_goToAdd:function(a){a.errStatus===this.SuccessCode?(q.publish("updateNavTree"),l(this.individualPath+"?site\x3d"+this.site+"\x26"+this.nameOfIndividual+
"\x3d"+a.id)):this._displayErrorMessage(a)},_onAddItem:function(){if(this.validateAdd()){var b=this.nameTB.get("value"),b={name:a.encode(b)};k.mixin(b,this._buildAddParams());w.post(this._path,{handleAs:"json",data:b}).then(k.hitch(this,this._goToAdd),k.hitch(this,this._displayErrorMessage,this.UnexpectedCode))}},_onDelete:function(a){1>this._multiSelect.getSelectedItems.length&&(d.add(this.deleteButton.domNode,"hidden"),d.add(this.editButton.domNode,"hidden"),this.previewButton&&d.add(this.previewButton.domNode,
"hidden"));this.onDelete(a)},_onDeleteItem:function(){var a=this._multiSelect.getSelectedItems();this.showConfirmationDialog(a);var c=this.confirmDeleteDialog.on("close",k.hitch(this,function(n){switch(n){case x.returnValues.oneOrYes:var d=[];p.forEach(a,k.hitch(this,function(a){d.push(a.value)}));n={type:"rest",method:"DELETE",path:this._path,params:b.stringify(this._buildDeleteParams(d))};n=this._send(n);null!==n&&n.then(k.hitch(this,function(b){p.forEach(a,k.hitch(this,function(a){this._onDelete(a);
b.data.licenseData&&this.setLicensedSystemsInfo(b.data)}))}));break;case x.returnValues.allOrNo:break;default:console.error(this.declaredClass+" - _onDeleteItem(): Unknown choice",n)}c.remove()}));this.own(c)},_send:function(a){if(!this._beginUpdate())return null;var b=new h,c=rc.xhr.request(a);if(this.cancelButton)var n=t(this.cancelButton,"click",function(){c.cancel("User Cancelled");n.remove()});c.then(k.hitch(this,function(a){a.data&&200===a.data.errStatus?(this.createDataArray(a.data),this.onSendComplete(a.data),
this.clearFields(),q.publish("updateNavTree")):a.data?this._displayErrorMessage(a.data):console.error(this.declaredClass+" - _send(): Data returned is null",a);this.onRender();b.resolve(a);return a}),k.hitch(this,this._onInitError));c.always(k.hitch(this,function(a){this._endUpdate(a);b.reject(a)}));return b.promise},_setLabels:function(){}})})},"webview/admin/_Widget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/ready dojo/request/xhr dojo/string dojo/topic dojox/html/entities rc/_base/Error rc/_base/util rc/_Widget rc/util/pointObject ./_ErrorMessageMixin ../_base/tooltip ../util/util ../util/widgetPicker ../widget/WarningDialog ../widget/WarningDialogEnums".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E){return p("webview/admin/_Widget",[w,y],{baseUrl:null,errorStrings:c,rcStrings:f,smtp:null,webviewStrings:r,wizardOnNextFunction:null,_destroyConnect:null,_firstLoad:!0,_genericConfirmDialog:null,_getSitePromise:null,postCreate:function(){this.inherited(arguments);this.title&&(this.title=n.decode(x.unescapeHtml(this.title)),g.set(this.domNode,"title",this.title));this.site&&!1===isNaN(this.site)&&(this._getSitePromise=q.get("site/",{preventCache:!0,
handleAs:"json",query:{siteId:this.site}}).then(m.hitch(this,function(a){200===a.errStatus&&(this.baseUrl=a.properties.baseUrl?decodeURIComponent(a.properties.baseUrl):null,this.smtp=a.properties.smtp&&a.properties.smtp.enabled,this.set("siteUrl",a.properties.urlName))})))},isDirty:function(){var a=this.inherited(arguments);!a&&this._userContent&&(a=this._userContent.isDirty());return a},_displayError:function(b){var c="sticky",n="error",d=b.errStatus;b=this._getErrorMessage(b.errStatus,b.errMSG);
d===this.SuccessCode?(c="alert",n="success"):510===d&&(c="alert",n="info");a.publish(c,{type:n,message:b})},getObfuscatedHash:B.getObfuscatedHash,getUnobfuscatedHash:B.getUnobfuscatedHash,isAdminPage:B.isAdminPage,_setTitle:function(a){!1===this.isAdminPage()&&this.buttonBar.addTitle(a);this.onSetTitle(a)},_throwFullscreenError:function(a){if("undefined"===typeof a.name||"undefined"===typeof a.message||"undefined"===typeof a.suggestion)throw"errorDetails must contain name, message and suggestion";
this.defer(m.hitch(this,this.onInitError,new v(a)),100)},_maxCharacters:function(a){return""===a?(this.invalidMessage="Field is empty",!1):a.length>this.constraints.maxChars?(this.invalidMessage="Field cannot be more than "+this.constraints.maxChars+" characters",!1):!0},startWizard:function(a){rc.setupWizard||(rc.setupWizard=new a,rc.setupWizard.init(this.domNode,"before",this))},onStartWizard:function(){this.emit("startWizard",null);rc.setupWizard&&(rc.setupWizard.complete&&!rc.setupWizard.onLastStep?
rc.setupWizard.stop():(this.promptNode&&d.remove(this.promptNode,"hidden"),null===this._destroyConnect&&(this._destroyConnect=k.after(rc.setupWizard,"destroy",m.hitch(this,this.onDestroyWizard)))))},onDestroyWizard:function(){this.emit("destroyWizard",null);this._destroyConnect&&(this._destroyConnect.remove(),this._destroyConnect=null);this.domNode&&(this.promptNode&&d.add(this.promptNode,"hidden"),this.wizardNextContainer&&d.add(this.wizardNextContainer,"hidden"))},_onClickWizardCancel:function(){},
_onClickWizardNext:function(a){if(rc.setupWizard)rc.setupWizard.onClickNext();a&&x.stopEvent(a)},destroy:function(){this._destroyConnect&&(this._destroyConnect.remove(),this._destroyConnect=null);void 0!==this._userContent&&null!==this._userContent&&this._userContent.destroy();this.inherited(arguments)},_onInitError:function(a){a=this.safeError(a,{name:this._replace(f.problemInX),message:a.msg,suggestion:f.unexpectedFix});this.onInitError(a)},_loadUserContent:function(c){var n=null,d=null;try{C.getPointForMnemonic(c).then(m.hitch(this,
function(a){n=C.getWidgetFor(a);d=m.clone(a);d.rawObject.site=this.site;d.rawObject.system=this.system}),m.hitch(this,function(b){a.publish(u.substitute(f.xNotFound,[f.content]),u.substitute(f.unsupportedX,[c]),f.unsupportedFix)}))}catch(L){a.publish(u.substitute(f.xNotFound,[f.content]),u.substitute(f.unsupportedX,[c]),f.unsupportedFix);return}n.then(m.hitch(this,function(a){try{require([a.module],m.hitch(this,function(a){t(m.hitch(this,function(){this.contentContainer=l.create("div",{style:{width:"100%",
height:"100%"}},this.containerNode.parentNode,"last");this._userContent=new a(d.rawObject,this.contentContainer,"first");this._setUpUserViewReturn();this._userContent._toolbar&&(this._toolbar=this._userContent.getToolBar());this._connectLoadEvents(this._userContent);b(this._userContent,"restartTimer",m.hitch(this,function(a){b.emit(this,"restartTimer",a)}))}))}))}catch(H){console.error(this.declaredClass+" - loadContent(): Error failed to load the content or content dependencies",H,H.message)}}),
m.hitch(this,function(a){console.error(this.declaredClass+" - loadContent(): Error failed to load the content or content dependencies",a,a.message)}))},setReturnUserView:function(a){this._userViewOnClick.remove();this.own(b(this.viewButton.toolbarButtonIcon,"click",a))},_setUpUserViewReturn:function(){var a=m.hitch(this,this._destroyUserContent);this._userContent.setReturnToAdmin(a)},_destroyUserContent:function(){this._userContent.destroy();this._userContent=null;this.emit("destroyUserContent")},
_clearLoadEvents:function(){null!==this._loadConnect&&(this._loadConnect.remove(),this._loadConnect=null)},_connectLoadEvents:function(a){this._errConnect=b(a,"initError",m.hitch(this,function(a){this.emit("initError",a)}));this._loadConnect=k.after(a,a.onInitSuccess?"onInitSuccess":a._endUpdate?"_endUpdate":"_render",m.hitch(this,function(){this._clearLoadEvents();A.showing&&A.show();this.onInitSuccess()}))},_onSave:function(){this.emit("save")},setToolBarMenus:function(a){a.Print=!1;a.Themes=!1;
a.UserToolBar=!1;this.userToolBar.resetMenusAndHelp(a)},goToPage:function(a){this._confirm().then(m.hitch(this,function(){this._dirty=!1;window.location.hash=this.getUri(a)}))},_confirm:function(){var a=new h;this.own(a);this.isDirty()?this._genericConfirmDialog=this.createConfirmDialog(a,this._genericConfirmDialog):a.resolve();return a.promise},createConfirmDialog:function(a,b){null===b&&(b=new D({type:E.types.binaryConfirm,title:r.confirmUnsavedChanges,text:c.unsavedChangesContinue,closeButtonVisible:!1}));
var n=b.on("close",m.hitch(this,function(b){switch(b){case E.returnValues.oneOrYes:a.resolve();break;case E.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+" - _confirm(): Invalid Choice",b)}n.remove()}));this.own(n);b.open();return b}})})},"webview/util/widgetPicker":function(){define(["dojo/_base/lang","rc/util/widgetPicker"],function(p,m){p.mixin(m,{_runtimeLogWidget:"webview/bacnet/TrendAsRuntimeLog",_trendLogWidget:"webview/bacnet/Trend"});return m})},"rc/util/widgetPicker":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ./pointObject ../bacnet/enums ../bacnet/io/DeviceObjectPropertyReferenceList ../bacnet/io/Number ../bacnet/io/Object ../bacnet/io/service/ReadPropertyMultiple ../bacnet/Object ../sys/job".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return new (p("rc/util/widgetPicker",null,{_runtimeLogWidget:"rc/bacnet/TrendAsRuntimeLog",_trendLogWidget:"rc/bacnet/Trend",getPointForMnemonic:function(b){var c=new k,d=b.includes(":")?b.split(":")[1]:null;parseInt(d)===g.propertyTypes.PROPID_ELAPSED_ACTIVE_TIME||parseInt(d)===g.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE?c=this._getRuntimePoint(b):(h.getByMnemonic(b.split("/")[0]),c.resolve(h));return c},getWidgetFor:function(b){var c=new k;if("STL"!==b.typeAbbr)c.resolve(b.getWidgetInfo(b.typeAbbr));
else{var u=[{o:new f(g.objectTypes.OBJID_TREND_LOG,b.rawObject.pointInstance),pl:[{p:new l(g.propertyTypes.PROPID_LOG_DEVICE_OBJECT_PROPERTY,g.primitiveTypes.ENUMERATED),i:-1,v:new d}]}];rc.xhr.request({type:"bacnet",gid:"TL",s:new r({device:b.rawObject.mainController},u),load:m.hitch(this,this._handleReadPropertySuccess,c,b.rawObject),error:m.hitch(this,this._handleReadPropertyError,c)})}return c.promise},_getRuntimePoint:function(d){var q=new k;h.getByMnemonic(d.split("/")[0]);b.loadOnce().then(m.hitch(this,
function(){if(b.hasProprietarySupportBit({device:h.rawObject.device},g.advancedFeatureSupport.AutomaticTrending)){h.getByMnemonic(d.split(":")[0]);var u=[{o:new f(g.mnemonicToType[h.typeAbbr.toLowerCase()],h.rawObject.pointInstance),pl:[{p:new l(g.propertyTypes.PROPID_PP_AUTO_LOG_REFERENCE,g.primitiveTypes.UNSIGNED_INTEGER),i:-1,v:new f}]}];rc.xhr.request({type:"bacnet",gid:"TL",s:new r({device:h.rawObject.mainController},u),load:m.hitch(this,function(a){a.e&&q.reject();a=new c(h.rawObject.mainController,
a.o[0].pl[0].v.t,a.o[0].pl[0].v.i);h.getByMnemonic(a.toMnemonic());q.resolve(h)}),error:m.hitch(this,function(a){q.reject()})})}else q.resolve(h)}),m.hitch(this,function(b){q.reject()}));return q},_handleReadPropertySuccess:function(b,d,f){var a={};if(f.e)if(a.module=this._runtimeLogWidget,5E3<d.pointInstance){f=g.objectTypes.OBJID_BINARY_VALUE;var n=d.pointInstance%5E3;d.logObject=new c(d.mainController,f,n)}else 4E3<d.pointInstance?(f=g.objectTypes.OBJID_BINARY_OUTPUT,n=d.pointInstance%4E3,d.logObject=
new c(d.mainController,f,n)):3E3<d.pointInstance?(f=g.objectTypes.OBJID_BINARY_INPUT,n=d.pointInstance%3E3,d.logObject=new c(d.mainController,f,n)):a.module=this._trendLogWidget;else try{var n=f.o[0].pl[0].v.l,v=new c(d.mainController,n[0].o.t,n[0].o.i);v.type===g.objectTypes.OBJID_BINARY_INPUT||v.type===g.objectTypes.OBJID_BINARY_OUTPUT||v.type===g.objectTypes.OBJID_BINARY_VALUE||v.type===g.objectTypes.OBJID_BINARY_LIGHTING_OUTPUT?(a.module=this._runtimeLogWidget,d.logObject=v):a.module=this._trendLogWidget}catch(x){a.module=
this._trendLogWidget}b.resolve(a)},_handleReadPropertyError:function(b,c){b.resolve({module:this._trendLogWidget})}}))})},"rc/bacnet/io/DeviceObjectPropertyReferenceList":function(){define(["dojo/_base/declare","./DeviceObjectPropertyReference","./List"],function(p,m,k){return p("rc/bacnet/io/DeviceObjectPropertyReferenceList",k,{constructor:function(h){this.o=new m;this.l=h||[]}})})},"webview/widget/MultiSelectBox":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!webview/nls/all dojo/on dojo/text!webview/widget/templates/MultiSelectBox.html dijit/_TemplatedMixin dijit/_Widget".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return m("webview/widget/MultiSelectBox",[t,b],{templateString:c,options:null,baseClass:"",fieldLabel:"",maxSize:5,showLabel:!0,_lastIndex:-1,_connectHandles:null,postCreate:function(){this.inherited(arguments);this.showLabel||g.add(this.selectBoxLabel,"hidden");this._connectHandles=[];this._setAttributes();this.addMultipleOptions(this.options,!1)},_setAttributes:function(){null===this.options&&(this.options=[]);this.maxSize<this.options.length&&(this.maxSize=this.options.length);
""===this.baseClass&&(this.baseClass="multiSelectBox");""!==this.fieldLabel&&this.setLabel(void 0!==f[this.fieldLabel]?f[this.fieldLabel]:this.fieldLabel);this.setSize(this.maxSize)},setLabel:function(b){h.set(this.selectBoxLabel,"innerHTML",b)},setHint:function(b){h.set(this.msHintLabel,"innerHTML",b)},getLabelFromId:function(b){return p.filter(this.options,function(c){return c.value===b})[0].label},setSize:function(b){1>b?console.error("MultiSelectBox.js - setSize(): Size cannot be set to less than 1",
b):(this.maxSize=b,this.options.length>b?l.set(this.multiSelectWrapper,{height:1.7*this.maxSize+"em"}):l.set(this.multiSelectWrapper,{height:""}))},getSelectedItems:function(){return p.filter(this.options,function(b){return b.selected})},addMultipleOptions:function(b,c){p.forEach(b,k.hitch(this,function(a){if(!this.addOption(a,c))return!1}));return!0},addOption:function(b,c){if(c){if(this._checkForDuplicates(b))return console.error("MultiSelectBox.js - addOption(): Option Already Exists",b),!1;this.options.push(b)}var a=
d.create("li",{"class":this.baseClass+" multiSelectItem rcFormValueText",innerHTML:b.label});b.selected=!1;b.domNode=a;d.place(a,this.selectionList,"last");this._connectHandles.push(r(a,"click",k.hitch(this,function(a){this._itemClicked(a,b)})));return!0},removeOption:function(b){for(var c=-1,a=0;a<this.options.length;a++)if(this.options[a].value===b.value&&this.options[a].label===b.label){c=a;break}-1<c?(d.destroy(this.options[c].domNode),this.options.splice(c,0)):console.error("MultiSelectBox.js - removeOption(): Could not find option",
b)},removeAll:function(){d.empty(this.selectionList);this.options=[]},replaceAll:function(b){this.removeAll();this.addMultipleOptions(b,!0)},_checkForDuplicates:function(b){for(var c=0;c<this.options.length;c++)if(this.options[c].value===b.value&&this.options[c].label===b.label)return!0;return!1},_itemClicked:function(b,c){var a=c.selected,n=p.indexOf(this.options,c);b.ctrlKey||b.shiftKey||p.forEach(this.options,function(a){a.selected=!1;g.remove(a.domNode,"selected")});if(b.shiftKey&&-1!==this._lastIndex)for(a=
n>=this._lastIndex?this._lastIndex:n,n=n<this._lastIndex?this._lastIndex:n;a<=n;)this.options[a].selected=!0,g.add(this.options[a].domNode,"selected"),a++;else this._lastIndex=n,c.selected=!a,c.selected?g.add(c.domNode,"selected"):g.remove(c.domNode,"selected");n=this.getSelectedItems();1===n.length?this.onSingleSelected(n[0]):this.onSingleSelected(null);n=null;this.onSelect()},onSingleSelected:function(b){return b},onSingleDeselect:function(){},onSelect:function(){},destroy:function(){this.inherited(arguments);
p.forEach(this._connectHandles,function(b){b.remove()},this);this._connectHandles=null}})})},"webview/widget/WebviewContentPane":function(){define("dijit/_TemplatedMixin dijit/_Widget dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/declare dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/WebviewContentPane.html".split(" "),function(p,m,k,h,g,d,l,f,r){return d("webview/widget/WebviewContentPane",[m,p],{templateString:r,titleLabel:"",postCreate:function(){""!==
this.titleLabel&&(this.titleLabel=void 0!==f[this.titleLabel]?f[this.titleLabel]:this.titleLabel,this.setTitleContent(this.titleLabel,"left"))},setTitleContent:function(c,b){var d=null;h.remove(this.titleBar,"hidden");switch(b){case "right":this.rightContent=c;d=this.rightTitleContentNode;d.appendChild(c);break;default:this.leftContent=c,d=this.leftTitleContentNode,k.set(d,"innerHTML",c)}},addLeftTitleContent:function(c){this.leftTitleContentNode.appendChild(c)},setMainContent:function(c){this.contents.appendChild(c)},
clearMainContent:function(){g.empty(this.contents)}})})},"webview/admin/reportTemplates/ReportTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!../../nls/afterHoursReport dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/on dojo/request/xhr dojo/string dojo/text!./templates/reportTemplate.html dojo/topic rc/_base/util ../_individualBase ../widget/ImageGalleryMixin dijit/form/CheckBox dijit/form/Textarea dijit/form/TextBox ../widget/GalleryUpdater ../widget/AdminToolbar ../../widget/CommitButtons ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){return p("webview/admin/reportTemplates/ReportTemplate",[u,a],{templateString:b,rcStrings:h,afterHoursStrings:g,errorStrings:l,webviewStrings:d,widget:"reporttemplate",_columnCheckboxes:null,_dirtyListeners:null,_path:"ReportTemplate",_ColumnMasks:{request:1,user:2,event:4,schedule:8,service:16,start:32,end:64,hours:128,rate:256,cost:512,reason:1024,mnemonic:2048},_ErrorCodeToMessageMap:{200:h.success,403:l.accessForbidden,502:l.siteDoesNotExist,504:l.unexpectedError,
506:l.generalInsufficientPrivileges},_SuccessCode:200,_UnexpectedCode:504,postCreate:function(){this.templateId=Number(this.reporttemplate);this.inherited(arguments);this._associateLabels();this.galleryUpdater.set("uploadParams",{siteId:this.site,widget:this.widget});this.galleryUpdater.set("validateFiles",m.hitch(this,this._uploadValidation));this._setColumnCheckboxes();this.own(f(this.galleryUpdater,"clear",m.hitch(this,this._clearLogo)),f(this.galleryUpdater,"fileChange",m.hitch(this,this._setLogo)));
this.setTabIndex()},setTabIndex:function(){k.set(this.nameTB.textbox,"tabindex",1);k.set(this.locationTB.textbox,"tabindex",1);k.set(this.descriptionTB.textbox,"tabindex",1)},fetch:function(){this._getTemplateData().then(m.hitch(this,this._initialFetchComplete),m.hitch(this,this._onInitError))},_addDirtyListener:function(a,b){var c="change";null===this._dirtyListeners&&(this._dirtyListeners=[]);if(-1<b.declaredClass.toLowerCase().indexOf("textbox")||-1<b.declaredClass.toLowerCase().indexOf("textarea"))c=
"keyup";this._dirtyListeners.push(f(b,c,m.hitch(this,function(a,b){b!==a&&this._setDirty([this.propertiesCommitButtons.saveButton],!1)},a)))},_associateLabels:function(){k.set(this.nameLabel,"for",this.nameTB.id);k.set(this.locationLabel,"for",this.locationTB.id);k.set(this.descriptionLabel,"for",this.descriptionTB.id)},_cleanupDirtyListeners:function(){if(null!==this._dirtyListeners)for(var a=this._dirtyListeners.length-1;this._dirtyListeners.length;)this._dirtyListeners[a].remove(),this._dirtyListeners.splice(a,
1),a--;else this._dirtyListeners=[]},_clearLogo:function(){this.galleryUpdater.clearFileInputSelection();this.logoId=null;this.galleryUpdater.set("fileId",this.logoId);this.galleryUpdater.set("fileName","");this.useLogoCB.set("checked",!1);this._setDirty([this.propertiesCommitButtons.saveButton],!1)},_createButtons:function(){this.buttonBar.replaceAllIcons([this.propertiesCommitButtons])},_createViews:function(){this.templateProperties.setMainContent(this.propertiesContainer);this._views.push(this.templateProperties)},
_displayErrorMessages:function(a){var b=this._ErrorCodeToMessageMap[this._UnexpectedCode],c="sticky",n="error";"undefined"!==typeof this._ErrorCodeToMessageMap[a]&&(a===this._SuccessCode&&(c="alert",n="success"),b=this._ErrorCodeToMessageMap[a]);t.publish(c,{type:n,message:b})},_getProperties:function(){return{templateId:this.templateId,templateName:this.nameTB.get("value"),useLogo:this.useLogoCB.get("checked"),logoId:this.logoId,useLocation:this.useLocationCB.get("checked"),location:q.escapeHtml(this.locationTB.get("value")),
description:q.escapeHtml(this.descriptionTB.get("value")),columnMask:this._getCurrentColumnMask()}},_getCurrentColumnMask:function(){for(var a=0,b=0;b<this._columnCheckboxes.length;++b)this._columnCheckboxes[b].get("checked")&&(a|=this._columnCheckboxes[b].get("mask"));return a},_getTemplateData:function(){this._setDirty([this.propertiesCommitButtons.saveButton],!0);return r.get(this._path,{handleAs:"json",preventCache:!0,query:{templateId:this.templateId}})},_initialFetchComplete:function(a){this.onInitSuccess();
this._populateData(a)},_populateData:function(a){if(a.errStatus===this._SuccessCode){this._cleanupDirtyListeners();a=a.data;this._addDirtyListener(a.name,this.nameTB);this.nameTB.set("value",a.name);this._addDirtyListener(a.useLogo,this.useLogoCB);this.useLogoCB.set("checked",a.useLogo);var b="";null!==a.logo?(b=a.logo.originalFilename,this.logoId=a.logo.id):this.logoId=null;this.galleryUpdater.set("fileId",this.logoId);this.galleryUpdater.set("fileName",b);this._addDirtyListener(a.useLocation,this.useLocationCB);
this.useLocationCB.set("checked",a.useLocation);b=q.unescapeHtml(a.location);this._addDirtyListener(a.location,this.locationTB);this.locationTB.set("value",b);b=q.unescapeHtml(a.description);this._addDirtyListener(b,this.descriptionTB);this.descriptionTB.set("value",b);b=a.name+" "+d.settings;this.emit("setTitle",b);webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#AHACReportTemplate"+this.reporttemplate}],b);this._selectCheckboxes(a.columnMask)}else this._displayErrorMessages(a.errStatus)},
_saveComplete:function(a){this._displayErrorMessages(a.errStatus);a.errStatus===this._SuccessCode&&(this._getTemplateData().then(m.hitch(this,this._populateData)),t.publish("updateNavTree"))},_saveProperties:function(){if(this.nameTB&&""!==this.nameTB.get("value").trim()){var a=this._getProperties();r.put(this._path,{handleAs:"json",data:a}).then(m.hitch(this,this._saveComplete))}else t.publish("alert",{type:"error",message:l.nameIsEmpty})},_selectCheckboxes:function(a){for(var b=null,c=0,c=!1,n=
this._columnCheckboxes.length-1;0<=n;--n)b=this._columnCheckboxes[n],c=b.mask,c=(a&c)===c,this._addDirtyListener(c,b),b.set("checked",c)},_setColumnCheckboxes:function(){this._columnCheckboxes=[this.requestCB,this.serviceCB,this.hoursCB,this.userCB,this.startCB,this.costCB,this.eventCB,this.endCB,this.reasonCB,this.scheduleCB,this.rateCB,this.mnemonicCB]},_setLogo:function(a,b){this.logoId!==a&&(this.logoId=a,this._setDirty([this.propertiesCommitButtons.saveButton],!1))},_setupCommitButtons:function(){this.own(f(this.propertiesCommitButtons.saveButton.toolbarButtonIcon,
"click",m.hitch(this,this._saveProperties)),f(this.propertiesCommitButtons.cancelButton.toolbarButtonIcon,"click",m.hitch(this,function(){this.galleryUpdater.clearFileInputSelection();this._getTemplateData().then(m.hitch(this,this._populateData))})))},_destroy:function(){this._cleanupDirtyListeners();this.inherited(arguments)}})})},"webview/admin/_individualBase":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/topic rc/util/notices ./_Widget ../util/util".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return m("webview/admin/_individualBase",t,{errorStrings:f,rcStrings:d,saveDeferred:null,site:null,view:"",webviewStrings:l,_children:[],_buttonArray:null,_iconArray:null,_messageTypeMap:{200:"success",510:"info"},_notificationTypeMap:{200:"alert"},_path:"/",_processId:null,_views:null,postCreate:function(){this.inherited(arguments);this._buildHash();this._buttonArray=[];this._iconArray=[];this._createButtons();this._views=[];this._createViews();this._setupCommitButtons();
this.fetch("all");this._setLabels()},encryptArchivePassword:function(b,a){b.length&&(b=q.encrypt(b,a));return b},_buildHash:function(){this._hash+="?site\x3d"+encodeURIComponent(this.site)},_buildFetchParams:function(){},_checkValidation:function(b){},_createButtons:function(){},_createViews:function(){},_setLabels:function(){},_setupCommitButtons:function(){},_switchView:function(b){},fillFields:function(b,a){},_displayErrorMessage:function(b){var a=this._getErrorMessage(b.errStatus,b.errMSG);"string"===
typeof a&&(a={noticeType:this._getNotificationType(b.errStatus),msg:a,type:this._getMessageType(b.errStatus)});c.publish(a.noticeType,{type:a.type,message:a.msg})},_getMessageType:function(b){var a="error";"undefined"!==typeof this._messageTypeMap[b]&&(a=this._messageTypeMap[b]);return a},_getNotificationType:function(b){var a="sticky";"undefined"!==typeof this._notificationTypeMap[b]&&(a=this._notificationTypeMap[b]);return a},_setDirty:function(b,a){this._isDirty=!a;a?this.makeClean():this.makeDirty();
var c=a?"dirtySaveIcon":"saveIcon",d=a?"saveIcon":"dirtySaveIcon";p.forEach(b,k.hitch(this,function(a){g.replace(a.toolbarButtonIcon,d,c)}))},render:function(b,a){b?this.fillFields(b,a):console.error("_individualBase.js - render(): Data returned empty",b)},resize:function(){this.inherited(arguments);for(var b=0;b<this._children.length;b++){var a=this._children[b];a&&a.resize&&setTimeout(k.hitch(a,a.resize),this.resizeDelay+1)}},fetch:function(b){if(!this._beginUpdate())return null;var a={type:"rest",
method:"GET",path:this._path,params:this._buildFetchParams()},a=rc.xhr.request(a);a.then(k.hitch(this,function(a){this.render(a.data,b);this.onInitSuccess();return a}),k.hitch(this,this._onInitError));a.always(k.hitch(this,this._endUpdate));return a},_send:function(d,a,n,f,q){if(!this._beginUpdate())return null;d=rc.xhr.request(d);d.then(k.hitch(this,function(d){d.data&&200===d.data.errStatus?(f||this.render(d.data,a),n&&(b.widget.clear(),c.publish("alert",{type:"success",message:this.errorStrings.successfulSave}))):
d.data?this._displayErrorMessage(d.data):console.error(this.declaredClass+" - _send(): Data returned is null",d);n&&q&&c.publish("updateNavTree");if(n)this.onSendComplete(d.data);return d}),k.hitch(this,this._onInitError));d.always(k.hitch(this,this._endUpdate));return d},onSendComplete:function(){this.emit("sendComplete",null)},_displaySaveMessage:function(){c.publish("alert",{type:"success",message:this.errorStrings.successfulSave})},_cancellableSave:function(d,a,n){if(!this._beginUpdate())return null;
this.saveDeferred=new h;rc.xhr.request(d);var v=r(n.cancelSaveButton,"click",k.hitch(this,function(){this._cancelRequest(this._path,this._processId);this.saveDeferred.cancel("User Cancelled");this.saveDeferred=null;v.remove()}));this.saveDeferred.then(k.hitch(this,function(d){b.widget.clear();200===d.errStatus?(this.render(d,a),this._displaySaveMessage(),c.publish("updateNavTree"),this.onSendComplete()):this._displayErrorMessage(d);this._endUpdate();n.showCancelOption(!1)}),k.hitch(this,function(a){"User Cancelled"===
a?(b.widget.clear(),this._displayErrorMessage({errStatus:511,errMSG:f.userCancelled})):console.error("_individualBase.js - _cancellableSave(): Unexpected error",a.message,a);this._endUpdate();n.showCancelOption(!1);return a}));return this.saveDeferred},_beginUpdate:function(){return this._updating?!1:this._updating=!0},_endUpdate:function(){this._updating&&(this._updating=!1)},_showResults:function(d){var a="unknown error",n="error",f="alert";b.widget.clear();switch(d){case 200:a=this.errorStrings.successfulTest;
n="success";break;case 404:a=this.errorStrings.testingServer;f="sticky";break;case 501:a=this.errorStrings.invalidLogin;f="sticky";break;case 502:a=this.errorStrings.invalidServer;f="sticky";break;case 503:a=this.errorStrings.invalidDatabase;f="sticky";break;case 510:a=this.errorStrings.testInProgress;f="alert";n="info";break;case 511:a=this.errorStrings.userCancelled;f="alert";n="info";break;default:console.error("_individualBase.js - _showResults(): Unknown error Status",d)}c.publish(f,{message:a,
type:n,hasConfirm:!1})},_checkProgress:function(b,a){this._processId=b.processId;510===b.errStatus?this._pollForStatus(a):this.saveDeferred.resolve(b)},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_pollForStatus:function(b){this._clearPollingTimer();this._pollForStatusTimer=setTimeout(k.hitch(this,function(){return rc.xhr.request({type:"rest",method:"GET",path:b+"/status",processId:this._processId||-1,abort:0,load:k.hitch(this,function(a){if(a.data)return this._checkProgress(a.data,
b)}),error:k.hitch(this,function(a){this.saveDeferred.reject(a);return a})})}),500);return this.saveDeferred},_cancelRequest:function(b){this._clearPollingTimer();rc.xhr.requestNow({type:"rest",method:"GET",path:b+"/status",processId:this._processId||-1,abort:1});this._processId=-1},_save:function(d,a){var n=this._checkValidation(d),f={path:this._path+d,type:"rest",method:"post",timeout:2E4,params:n.formData};n.valid?a?(f.load=k.hitch(this,function(a){return this._checkProgress(a.data,this._path)}),
b.widget.clear(),c.publish("sticky",{type:"info",message:this.errorStrings.saveInProgress}),this._cancellableSave(f,d,a)):this._send(f,d,!0):(a&&a.showCancelOption(!1),n.msg?c.publish("sticky",{type:"error",message:n.msg}):console.error("_individualBase.js - _save(): Invalid input but no message",n))},destroy:function(){this.inherited(arguments);null!==this.saveDeferred&&(this.saveDeferred.cancel(),this.saveDeferred=null)}})})},"webview/admin/widget/ImageGalleryMixin":function(){define(["dojo/_base/declare",
"dojo/i18n!rc/nls/all","dojo/i18n!webview/nls/all","dojo/i18n!webview/nls/errorMessages","dojo/string"],function(p,m,k,h,g){return p("webview/admin/widget/ImageGalleryMixin",null,{errorStrings:h,rcStrings:m,webviewStrings:k,_AcceptedFileExtensions:".jpg .jpeg .png .gif .bmp .ico".split(" "),_MaxFileNameLength:50,_MaxFileSizeInMB:16,constructor:function(){this.unsupportedFileTypeString=this.errorStrings.unsupportedFileType+"\x3cul\x3e";for(var d=0;d<this._AcceptedFileExtensions.length;++d)this.unsupportedFileTypeString+=
"\x3cli\x3e"+this._AcceptedFileExtensions[d]+"\x3c/li\x3e";this.unsupportedFileTypeString+="\x3c/ul\x3e"},_uploadValidation:function(d,l){var f={isValid:!0,errorMessage:this.rcStrings.success},r=l[0],c=r.name,b=c.lastIndexOf("."),b=c.substring(b).toLowerCase();-1<this._AcceptedFileExtensions.indexOf(b)?d.convertBytes(r.size).mb>=this._MaxFileSizeInMB?(f.isValid=!1,f.errorMessage=this.webviewStrings.fileExceedsMax):c.length>this._MaxFileNameLength&&(f.isValid=!1,f.errorMessage=g.substitute(this.errorStrings.filenameMustBeLessThanX,
[this._MaxFileNameLength])):(f.isValid=!1,f.errorMessage=this.unsupportedFileTypeString);return f}})})},"webview/admin/widget/GalleryUpdater":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/on dojo/text!./templates/GalleryUpdater.html dojo/topic ./DatabaseFileGallery dojox/form/Uploader dijit/form/Button".split(" "),function(p,
m,k,h,g,d,l,f,r,c,b,t,q,u){return h("webview/admin/widget/GalleryUpdater",[m,p,k],{templateString:t,baseClass:"",fileId:null,fileName:null,galleryImageClass:"imageIcon",rcStrings:f,showClearButton:!0,showDefaultButton:!1,uploaderPath:null,uploadParams:null,webviewStrings:r,_gallery:null,_uploader:null,_ErrorCodeToMessageMap:{200:f.success,403:c.accessForbidden,504:c.unexpectedError,506:c.generalInsufficientPrivileges},_SuccessCode:200,_UnexpectedCode:504,buildRendering:function(){this.inherited(arguments);
this._createUploader();this._setOnClicks()},clearFileInputSelection:function(){this._uploader.inputNode.value=null},onClear:function(){},onFileChange:function(a,b){},onSetDefault:function(){},validateFiles:function(a,b){return{isValid:!0,errorMessage:"Success!"}},_createUploader:function(){if(null===this.uploaderPath)throw"Must specify an uploaderPath to use GalleryUpdater widget";this._uploader=new dojox.form.Uploader({label:"",multiple:!1,url:this.uploaderPath,baseClass:"webviewButton circularButton noLabel uploader",
iconClass:"rcIcon browseIcon",onChange:g.hitch(this,this._uploadToGallery),onComplete:g.hitch(this,this._uploadComplete)},this.logoUploaderContainer);this._uploader.startup()},_displayErrorMessage:function(a){var b=this._ErrorCodeToMessageMap[this._UnexpectedCode],c="sticky",d="error";"undefined"!==typeof this._ErrorCodeToMessageMap[a]&&(a===this._SuccessCode&&(c="alert",d="success"),b=this._ErrorCodeToMessageMap[a]);q.publish(c,{type:d,message:b})},_displayValidationMessage:function(a){q.publish("sticky",
{type:"error",message:a})},_fileDeleted:function(a){this.fileId===a.fileId&&this._onClear()},_onClear:function(){this.onClear()},_onFileChange:function(a,b){this.set("fileId",a);this.set("fileName",b);this.onFileChange(a,b)},_onSetDefault:function(){this.clearFileInputSelection();this.onSetDefault()},_setFileIdAttr:function(a){this.setDefault.set("disabled","DEFAULT"===a);this._set("fileId",a)},_setFileNameAttr:function(a){l.set(this.fileNameContainer,"innerHTML",a);this._set("fileName",a)},_setOnClicks:function(){this.own(b(this.clearSelected.domNode,
"click",g.hitch(this,this._onClear)),b(this.setDefault.domNode,"click",g.hitch(this,this._onSetDefault)),b(this.galleryButton.domNode,"click",g.hitch(this,this._showGallery)))},_showGallery:function(){null===this._gallery?(this._gallery=new u({path:this.path,siteId:this.siteId,widget:this.widget,value:this.fileId,imageClass:this.galleryImageClass}),this.own(b(this._gallery,"delete",g.hitch(this,this._fileDeleted)))):this._gallery.set("value",this.fileId);var a=d.after(this._gallery,"execute",g.hitch(this,
function(a){this._onFileChange(a.fileId,a.filename)}),!0);this.own(a);this.own(b.once(this._gallery,"hide",g.hitch(this,a.remove)));this._gallery.show()},_uploadComplete:function(a){a.errStatus===this._SuccessCode?(this._onFileChange(a.fileId,a.filename),this._gallery&&this._gallery.getFiles()):this._displayErrorMessage(a.errStatus)},_uploadToGallery:function(a){0!==a.length&&(a=this.validateFiles(this._uploader,a),!0===a.isValid?null===this.uploadParams?this._uploader.upload():this._uploader.upload(this.uploadParams):
this._displayValidationMessage(a.errorMessage))}})})},"webview/admin/widget/DatabaseFileGallery":function(){define("dijit/Dialog dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/text!./templates/DatabaseFileGallery.html dijit/form/Button".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return h("webview/admin/DatabaseFileGallery",
[p,m],{templateString:u,title:r.gallery,rcStrings:f,cellsPerRow:5,imageClass:"imageIcon",selectedFile:null,_fileStore:null,path:null,constructor:function(){this._fileStore=new q({idProperty:"fileId"})},postCreate:function(){this.inherited(arguments);this.own(c(this.deleteButton,"click",g.hitch(this,this._deleteImageFromGallery)))},getFiles:function(){t.get(this.path+"/GetFilesForGallery",{handleAs:"json",query:{siteId:this.siteId,widget:this.widget}}).then(g.hitch(this,this._filesRetrieved))},onDelete:function(a){},
show:function(){this.getFiles();this.inherited(arguments)},_addFileCell:function(a,b){0===b%this.cellsPerRow&&(this._imageRow=l.create("span",{"class":"imageGalleryRow"},this.galleryTable,"last"));var c=l.create("span",{"class":"imageGalleryCell","data-fileId":a.fileId,title:a.filename},this._imageRow,"last");l.create("img",{src:a.fileSource,"class":this.imageClass,onclick:g.hitch(this,this._changeSelectedFile,a)},c,"first")},_buildFileTable:function(){this._imageRow=null;this.okButton.set("disabled",
!0);this.deleteButton.set("disabled",!0);l.empty(this.galleryTable);this._fileStore.query({},{sort:[{attribute:"filename"}]}).forEach(g.hitch(this,this._addFileCell));if(null!==this.selectedFile){var a=this._fileStore.get(this.selectedFile.fileId);"undefined"!==typeof a&&this._changeSelectedFile(a)}},_changeSelectedFile:function(a){this.okButton.set("disabled",!1);this.deleteButton.set("disabled","DEFAULT"===a.fileId);var c=null;null!==this.selectedFile&&(c=b("span[data-fileId\x3d'"+this.selectedFile.fileId+
"']",this.galleryTable)[0],d.remove(c,"selected"));this.selectedFile=a;c=b("span[data-fileId\x3d'"+this.selectedFile.fileId+"']",this.galleryTable)[0];d.add(c,"selected")},_dataChanged:function(a){for(var b=a.length-1;0<=b;--b)if("undefined"===typeof this._fileStore.get(a[b].fileId))return!0;return!1},_deleteImageFromGallery:function(){t.del(this.path+"/DeleteFileFromGallery",{handleAs:"json",query:{fileId:this.selectedFile.fileId}}).then(g.hitch(this,function(a){200===a.errStatus&&this._onDelete()}))},
_filesRetrieved:function(a){200!==a.errStatus||a.data.length===this._fileStore.data.length&&!this._dataChanged(a.data)||(k.forEach(a.data,function(a){null===a.fileId&&(a.fileId="DEFAULT")}),this._fileStore.setData(a.data),this._buildFileTable(),this.resize())},_getValueAttr:function(){return this.selectedFile},_onDelete:function(){this.onDelete(this.selectedFile);this.selectedFile=null;this.getFiles()},_setValueAttr:function(a){null!==a&&(null===this.selectedFile?(this.selectedFile={},this.selectedFile.fileId=
a):(a=this._fileStore.get(a),"undefined"!==typeof a&&this._changeSelectedFile(a)))}})})},"dojox/form/Uploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/dom-form dijit dijit/form/Button ./uploader/_Base ./uploader/_HTML5 ./uploader/_IFrame ./uploader/_Flash dojo/i18n!./nls/Uploader dojo/text!./resources/Uploader.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z){return m("dojox.form.Uploader",[a,u,n,v,x],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:w.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:z,baseClass:"dijitUploader "+u.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.force=this.force.toLowerCase();this.supports("multiple")?this.uploadType="form"===this.force?"form":
"html5":this.uploadType="flash"===this.force?"flash":"iframe";this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);l.set(this.domNode,{overflow:"hidden",position:"relative"});this._buildDisplay();c.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=b.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,
"onChange",function(a){for(var b=0,c,n=[];c=a[b++];)c&&c.name&&n.push(c.name);this.displayInput.value=n.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(a){},onBegin:function(a){},onProgress:function(a){},onComplete:function(a){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(a){},
upload:function(a){a=a||{};a.uploadType=this.uploadType;this.inherited(arguments)},submit:function(a){a=a?a.tagName?a:this.getForm():this.getForm();a=t.toObject(a);a.uploadType=this.uploadType;this.upload(a)},reset:function(){delete this._files;this._disconnectButton();h.forEach(this._inputs,b.destroy);this._inputs=[];this._nameIndex=0;this._createInput()},getFileList:function(){var a=[];this.supports("multiple")?h.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},
this):h.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this);return a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(a){console.error("Uploader value is read only")},_setDisabledAttr:function(a){this.disabled!=a&&this.inputNode&&(this.inherited(arguments),l.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:l.get(a,
"width"),h:l.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(l.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var a=this._getFileFieldName();this.focusNode=this.inputNode=
b.create("input",{type:"file",name:a,"aria-labelledby":this.id+"_label"},this.domNode,"first");this.supports("multiple")&&this.multiple&&c.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);l.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(g.connect(this.inputNode,"change",this,function(a){this._files=this.inputNode.files;this.onChange(this.getFileList(a));
!this.supports("multiple")&&this.multiple&&this._createInput()}));-1<this.tabIndex&&(this.inputNode.tabIndex=this.tabIndex,this._cons.push(g.connect(this.inputNode,"focus",this,function(){f.add(this.domNode,this.focusedClass)})),this._cons.push(g.connect(this.inputNode,"blur",this,function(){f.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){h.forEach(this._cons,g.disconnect);this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/has dojo/_base/declare dojo/_base/event dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),
function(p,m,k,h,g,d,l,f,r,c){g.add("FormData",function(){return!!window.FormData});g.add("xhr-sendAsBinary",function(){var b=window.XMLHttpRequest&&new window.XMLHttpRequest;return b&&!!b.sendAsBinary});g.add("file-multiple",function(){return!!{"true":1,"false":1}[h.get(document.createElement("input",{type:"file"}),"multiple")]});return d("dojox.form.uploader._Base",[f,r,c],{getForm:function(){if(!this.form)for(var b=this.domNode;b&&b.tagName&&b!==document.body;){if("form"==b.tagName.toLowerCase()){this.form=
b;break}b=b.parentNode}return this.form},getUrl:function(){this.uploadUrl&&(this.url=this.uploadUrl);if(this.url)return this.url;this.getForm()&&(this.url=this.form.action);return this.url},connectForm:function(){this.url=this.getUrl();!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(b){l.stop(b);this.submit(this.form)}))},supports:function(b){switch(b){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return g("file-multiple");case "FormData":return g(b);
case "sendAsBinary":return g("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(b){return b.substring(b.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(b){var c=Math.round(b/1024*1E5)/1E5,d=Math.round(b/1048576*1E5)/1E5,f=Math.round(b/1073741824*1E5)/1E5,a=b;1<c&&(a=c.toFixed(1)+" kb");1<d&&(a=d.toFixed(1)+" mb");1<f&&(a=f.toFixed(1)+" gb");return{kb:c,mb:d,gb:f,bytes:b,value:a}}})})},"dojox/form/uploader/_HTML5":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo"],function(p,m,k,h){return p("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(g){this.upload(g[0])})},_drop:function(g){h.stopEvent(g);this._files=g.dataTransfer.files;this.onChange(this.getFileList())},upload:function(g){this.onBegin(this.getFileList());
this.uploadWithFormData(g)},addDropTarget:function(g,d){d||(this.connect(g,"dragenter",h.stopEvent),this.connect(g,"dragover",h.stopEvent),this.connect(g,"dragleave",h.stopEvent));this.connect(g,"drop","_drop")},uploadWithFormData:function(g){if(this.getUrl()){var d=new FormData,l=this._getFileFieldName();k.forEach(this._files,function(f,c){d.append(l,f)},this);if(g){g.uploadType=this.uploadType;for(var f in g)d.append(f,g[f])}this.createXhr().send(d)}else console.error("No upload url found.",this)},
_xhrProgress:function(g){if(g.lengthComputable){var d={bytesLoaded:g.loaded,bytesTotal:g.total,type:g.type,timeStamp:g.timeStamp};"load"==g.type?(d.percent="100%",d.decimal=1):(d.decimal=g.loaded/g.total,d.percent=Math.ceil(g.loaded/g.total*100)+"%");this.onProgress(d)}},createXhr:function(){var g=new XMLHttpRequest,d;g.upload.addEventListener("progress",m.hitch(this,"_xhrProgress"),!1);g.addEventListener("load",m.hitch(this,"_xhrProgress"),!1);g.addEventListener("error",m.hitch(this,function(l){this.onError(l);
clearInterval(d)}),!1);g.addEventListener("abort",m.hitch(this,function(l){this.onAbort(l);clearInterval(d)}),!1);g.onreadystatechange=m.hitch(this,function(){if(4===g.readyState){clearInterval(d);try{this.onComplete(JSON.parse(g.responseText.replace(/^\{\}&&/,"")))}catch(l){console.error("Error parsing server result:",l),console.error(g.responseText),this.onError("Error parsing server result:",l)}}});g.open("POST",this.getUrl());g.setRequestHeader("Accept","application/json");d=setInterval(m.hitch(this,
function(){}),250);return g}})})},"dojox/form/uploader/_IFrame":function(){define("dojo/query dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-form dojo/request/iframe".split(" "),function(p,m,k,h,g,d,l){return k("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(d){var f={},c;this.getForm();var b=this.getUrl(),h=this;d=
d||{};d.uploadType=this.uploadType;c=m.place('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e\x3c/form\x3e',this.domNode);g.forEach(this._inputs,function(b,d){""!==b.value&&(c.appendChild(b),f[b.name]=b.value)},this);if(d)for(nm in d)void 0===f[nm]&&m.create("input",{name:nm,value:d[nm],type:"hidden"},c);l.post(b,{form:c,handleAs:"json",content:d}).then(function(b){m.destroy(c);if(b.ERROR||b.error)h.onError(b);else h.onComplete(b)},function(b){console.error("error parsing server result",
b);m.destroy(c);h.onError(b)})}})})},"dojox/form/uploader/_Flash":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/array dojox/embed/Flash".split(" "),function(p,m,k,h,g,d,l,f,r,c){return g("dojox.form.uploader._Flash",[],{swfPath:d.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),preventCache:!0,skipServerCheck:!0,serverTimeout:2E3,isDebug:!1,devMode:!1,deferredUploading:0,
postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles");this.inherited(arguments)},onReady:function(b){},onLoad:function(b){},onFileChange:function(b){},onFileProgress:function(b){},getFlashFileList:function(){return this._files},flashReset:function(){this.flashMovie.reset();this._files=[];this._fileMap=
{}},uploadFlash:function(b){this.onBegin(this.getFileList());b=b||{};b.returnType="F";b.uploadType=this.uploadType;this.flashMovie.doUpload(b)},_change:function(b){this._files=this._files.concat(b);r.forEach(b,function(b){b.bytesLoaded=0;b.bytesTotal=b.size;this._fileMap[b.name+"_"+b.size]=b},this);this.onChange(this._files);this.onFileChange(b)},_complete:function(b){this._getCustomEvent().type="load";this.onComplete(b)},_progress:function(b){this._fileMap[b.name+"_"+b.bytesTotal].bytesLoaded=b.bytesLoaded;
var c=this._getCustomEvent();this.onFileProgress(b);this.onProgress(c)},_error:function(b){this.onError(b)},_onFlashBlur:function(b){},_getCustomEvent:function(){var b={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()},c;for(c in this._fileMap)b.bytesTotal+=this._fileMap[c].bytesTotal,b.bytesLoaded+=this._fileMap[c].bytesLoaded;b.decimal=b.bytesLoaded/b.bytesTotal;b.percent=Math.ceil(b.bytesLoaded/b.bytesTotal*100)+"%";return b},_connectFlash:function(){this._subs=[];this._cons=
[];var b=f.hitch(this,function(b,c){this._subs.push(l.subscribe(this.id+b,this,c))});b("/filesSelected","_change");b("/filesUploaded","_complete");b("/filesProgress","_progress");b("/filesError","_error");b("/filesCanceled","onCancel");b("/stageBlur","_onFlashBlur");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&h.set(this.domNode,"tabIndex",this.tabIndex)},_createFlashUploader:function(){var b=this.btnSize.w,d=this.btnSize.h;if(b){var q=
this.getUrl();if(q&&0>q.toLowerCase().indexOf("http")&&0!=q.indexOf("/")){var r=window.location.href.split("/");r.pop();r=r.join("/")+"/";q=r+q}this.inputNode=k.create("div",{className:"dojoxFlashNode"},this.domNode,"first");m.set(this.inputNode,{position:"absolute",top:"-2px",width:b+"px",height:d+"px",opacity:0});b={expressInstall:!0,path:(this.swfPath.uri||this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():""),width:b,height:d,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||
this.name+"Flash",uploadUrl:q,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new c(b,this.inputNode);this.flashObject.onError=f.hitch(function(a){console.error("Flash Error: "+a)});this.flashObject.onReady=f.hitch(this,function(){this.onReady(this)});
this.flashObject.onLoad=f.hitch(this,function(a){this.flashMovie=a;this.flashReady=!0;this.onLoad(this)});this._connectFlash()}else setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode);this._createFlashUploader()}),200)}})})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(p,m,k,h,g,d,l,f,r){function c(a){a=p.delegate(u,a);if(!("path"in a))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in a||(a.id="dojox-embed-flash-"+q++);return a}var b,t,q=0,u={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};g("ie")?(b=function(a){a=c(a);if(!a)return null;var b,d=a.path;if(a.vars){var n=[];for(b in a.vars)n.push(encodeURIComponent(b)+"\x3d"+encodeURIComponent(a.vars[b]));a.params.FlashVars=n.join("\x26");delete a.vars}d='\x3cobject id\x3d"'+r.escape(String(a.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
r.escape(String(a.width))+'" height\x3d"'+r.escape(String(a.height))+'"'+(a.style?' style\x3d"'+r.escape(String(a.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+r.escape(String(d))+'" /\x3e';if(a.params)for(b in a.params)d+='\x3cparam name\x3d"'+r.escape(b)+'" value\x3d"'+r.escape(String(a.params[b]))+'" /\x3e';return{id:a.id,markup:d+"\x3c/object\x3e"}},t=function(){for(var a=10,b=null;!b&&7<a;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a--)}catch(x){}return b?(a=b.GetVariable("$version").split(" ")[1].split(","),
{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}(),m.addOnWindowUnload(function(){var a=function(){};h("object").reverse().style("display","none").forEach(function(b){for(var c in b)if("FlashVars"!=c&&"function"==typeof b[c])try{b[c]=a}catch(w){}})})):(b=function(a){a=c(a);if(!a)return null;var b,d=a.path;if(a.vars){var n=[];for(b in a.vars)n.push(encodeURIComponent(b)+"\x3d"+encodeURIComponent(a.vars[b]));a.params.flashVars=
n.join("\x26");delete a.vars}d='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+r.escape(String(d))+'" id\x3d"'+r.escape(String(a.id))+'" width\x3d"'+r.escape(String(a.width))+'" height\x3d"'+r.escape(String(a.height))+'"'+(a.style?' style\x3d"'+r.escape(String(a.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(a.params)for(b in a.params)d+=" "+r.escape(b)+'\x3d"'+r.escape(String(a.params[b]))+'"';return{id:a.id,markup:d+" /\x3e"}},
t=function(){var a=navigator.plugins["Shockwave Flash"];return a&&a.description?(a=a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}());var a=function(a,b){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=t.major;this.minimumVersion=a.minimumVersion||9;this.domNode=this.movie=this.id=null;b&&(b=d.byId(b));setTimeout(p.hitch(this,function(){if(a.expressInstall||this.available&&this.available>=this.minimumVersion)if(a&&b)this.init(a,b);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};p.extend(a,{onReady:function(a){},onLoad:function(a){},onError:function(a){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(b,c){this.destroy();c=d.byId(c||this.domNode);if(!c)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var n=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;a.initialized&&(this.id=a.place(b,c),this.domNode=c,setTimeout(p.hitch(this,
function(){this.movie=this.byId(this.id,b.doc);this.onReady(this.movie);this._poller=setInterval(p.hitch(this,function(){try{n=this.movie.PercentLoaded()}catch(w){}if(100==n)this._onload();else if(0==n&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(n){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var a=p.delegate({id:!0,movie:!0,domNode:!0,
onReady:!0,onLoad:!0}),b;for(b in this)a[b]||delete this[b];this._poller?l(this,"Load",this,"_destroy"):this._destroy()}},byId:function(a,b){b=b||document;return b.embeds[a]?b.embeds[a]:b[a]?b[a]:window[a]?window[a]:document[a]?document[a]:null}});p.mixin(a,{minSupported:8,available:t.major,supported:t.major>=t.required,minimumRequired:t.required,version:t,initialized:!1,onInitialize:function(){a.initialized=!0},__ie_markup__:function(a){return b(a)},proxy:function(a,b){k.forEach(b instanceof Array?
b:[b],function(a){this[a]=p.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+a+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+k.map(arguments,function(a){return __flash__toXML(a)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},a)}});a.place=function(a,c){var n=b(a);c=d.byId(c);c||(c=f.doc.createElement("div"),c.id=n.id+"-container",f.body().appendChild(c));return n?(c.innerHTML=n.markup,n.id):null};a.onInitialize();
p.setObject("dojox.embed.Flash",a);return a})},"webview/admin/widget/AdminToolbar":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/text!webview/admin/widget/templates/AdminToolbar.html dijit/_TemplatedMixin dijit/_Widget".split(" "),function(p,m,k,h,g,d,l,f){return m("webview/admin/widget/AdminToolbar",[f,l],{templateString:d,_buttonArray:null,_iconArray:null,postCreate:function(){null===this._buttonArray&&(this._buttonArray=[]);null===
this._iconArray&&(this._iconArray=[])},addButton:function(d){h.remove(this.buttonsContainer,"hidden");g.place(d.domNode,this.buttonsContainer);this._buttonArray.push(d)},addIcon:function(d){h.remove(this.iconContainer,"hidden");g.place(d.domNode,this.iconContainer);this._iconArray.push(d)},addMultipleButtons:function(d){p.forEach(d,k.hitch(this,this.addButton))},addMultipleIcons:function(d){p.forEach(d,k.hitch(this,this.addIcon))},addTitle:function(d){g.create("div",{"class":"button-bar-title",innerHTML:d,
title:d},this.buttonsContainer,"only")},replaceAllButtons:function(d){this.removeAllButtons();this.addMultipleButtons(d)},replaceAllIcons:function(d){this.removeAllIcons();this.addMultipleIcons(d)},removeButtonFromIndex:function(d){g.destroy(this._buttonArray[d].domNode);this._buttonArray.splice(d,1)},removeAllButtons:function(){g.empty(this.buttonsContainer);this._buttonArray=[]},removeAllIcons:function(){g.empty(this.iconContainer);this._iconArray=[]}})})},"webview/widget/CommitButtons":function(){define("dojo/_base/declare dojo/dom-class dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/CommitButtons.html rc/_Widget ./ToolbarButton".split(" "),
function(p,m,k,h,g){return p("webview/widget/CommitButtons",g,{templateString:h,constructor:function(){this.inherited(arguments);this.webviewStrings=k},showCancelOption:function(d){d?(m.remove(this.cancelSaveButton,"hidden"),m.add(this.saveButton,"hidden"),m.add(this.cancelButton,"hidden")):(m.add(this.cancelSaveButton,"hidden"),m.remove(this.saveButton,"hidden"),m.remove(this.cancelButton,"hidden"))}})})},"webview/widget/ToolbarButton":function(){define("dijit/Tooltip dojo/_base/declare dojo/dom-class dojo/i18n!webview/nls/all dojo/text!./templates/ToolbarButton.html rc/_Widget".split(" "),
function(p,m,k,h,g,d){return m("webview/widget/ToolbarButton",d,{templateString:g,tooltip:null,constructor:function(){this.inherited(arguments);this.webviewStrings=h},postCreate:function(){this.inherited(arguments);this.tooltip=new p({connectId:this.buttonNode,label:'\x3cspan class\x3d"toolbar-button-tooltip"\x3e'+this.titleStr+"\x3c/span\x3e",position:["above"],showDelay:0});k.add(this.tooltip.domNode,"buttonBar");k.add(this.toolbarButtonIcon,this.iconClass)},hideToolTip:function(){null!==this.tooltip&&
this.tooltip.set("state","DORMANT")},_setDisabledAttr:function(d){k.toggle(this.domNode,"disabled",d);this._set("disabled",d)},_setTitleStrAttr:function(d){this.titleStr=d;null!==this.tooltip&&this.tooltip.set("label",this.titleStr)}})})},"webview/admin/roles/Permissions":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/roles dojo/i18n!../../nls/errorMessages dojo/json dojo/on dojo/request/xhr dojo/string dojo/text!./templates/Permissions.html dojo/topic rc/_base/util ../_Widget dijit/form/ValidationTextBox ./RoleToolbar ../users/RolemaskPermissions ../widget/AdminToolbar ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return p("webview/admin/roles/Permissions",[n],{templateString:q,rcStrings:g,roleStrings:l,webviewStrings:d,errorMessages:f,_buttonArray:[],_iconArray:[],_nameListener:null,constructor:function(){m.mixin(this.ErrorMessageMap,{501:this.roleStrings.roleAlreadyExists,502:this.roleStrings.roleDoesNotExist,518:this.errorMessages.preventAdminUsersDeadlock})},postCreate:function(){this.inherited(arguments);rc.session.hasRole(rc.session.roles.usersAdmin,!1)?(this._createViews(),
-1!==this.roleId?this._initializeRole():this._initializeWizard()):this._throwFullscreenError({name:this.rcStrings.permissionDenied,message:t.substitute(this.rcStrings.notAuthToViewX,[this.roleStrings.rolePermissions]),suggestion:this.errorStrings.contactAdmin,e:null});this.roleName.set("validator",m.hitch(this,this._roleNameValidation))},_setNameAttr:function(a){this.roleName.set("value",a);this._set("name",a)},getWizardUnknowns:function(){return[{name:"site",value:this.site},{name:"roleId",value:this.roleId}]},
onInitSuccess:function(){this.inherited(arguments);this.roleName.focus()},makeClean:function(){this.inherited(arguments);this.buttonBar&&this.buttonBar.set("dirty",!1)},makeDirty:function(){this.inherited(arguments);this.buttonBar&&this.buttonBar.set("dirty",!0)},resize:function(){this.inherited(arguments);this.rolemaskPermissions.resize()},wizardOnNextFunction:function(c){a.stopEvent(c);var d=this._getDataForSave();this.roleName.isValid()?b.get("Role/CheckName",{handleAs:"json",preventCache:!0,query:{siteId:d.siteId,
roleName:d.roleName}}).then(m.hitch(this,function(a){a.errStatus===this.SuccessCode?(this.makeClean(),rc.setupWizard.next(this.getWizardUnknowns(),d)):this._displayError(a)})):u.publish("alert",{type:"error",message:this.roleName.get("invalidMessage")})},_connectToToolbar:function(){this.own(c(this.buttonBar,"cancel",m.hitch(this,this._reload)),c(this.buttonBar,"save",m.hitch(this,this._save)),c(this.buttonBar,"selectAll",m.hitch(this,function(a){this.rolemaskPermissions.toggleSelectAll(a)})))},_createViews:function(){this.permissionsArea.setMainContent(this.permissionsContainer);
this._setupLabels()},_fetch:function(){rc.setupWizard||this._removeDirtyListeners();return b.get("role",{handleAs:"json",preventCache:!0,query:{id:this.roleId}})},_getDataForSave:function(){var a=this.rolemaskPermissions.get("roleMask"),b=this.rolemaskPermissions.get("extraPermissions");delete b.customHelpURL;delete b.helpGuid;return{siteId:this.site,roleId:this.roleId,roleMask:a.rolemask,roleMask2:a.extendedRolemask,extraPermission:r.stringify(b),roleName:this.roleName.get("value")}},_getRoleDetailsFromCookie:function(){var a=
rc.setupWizard.getStepParamsFromCookie(window.location.hash);a&&(a.errStatus=this.SuccessCode,a.permissions=r.parse(a.extraPermission),delete a.extraPermission);return a},_initializeRole:function(){this._connectToToolbar();this.own(c(this.rolemaskPermissions,"change",m.hitch(this,this.makeDirty)));this._fetch().then(m.hitch(this,function(a){this._parseFetch(a);this.onInitSuccess()}),m.hitch(this,this._onInitError))},_initializeWizard:function(){this.defer(m.hitch(this,function(){this.onInitSuccess();
var a=this._getRoleDetailsFromCookie();null!==a&&this._parseFetch(a);this.makeDirty()}),250);this.buttonBar.disableAll();h.add(this.buttonBar.domNode,"hidden");h.remove(this.selectAll,"hidden");h.remove(this.permissionsWizardNextContainer,"hidden");this.own(c(this.selectAll,"click",m.hitch(this,this._toggleWizardSelectAll)),c(this.wizardNextButton,"click",m.hitch(this,this.wizardOnNextFunction)))},_parseFetch:function(a){a.errStatus===this.SuccessCode?(this.makeClean(),this.loginInfo=a.loginInfo,
this.set("name",a.roleName),this.shouldSetContext&&0<this.roleId&&webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#Role"+this.roleId}],this.name),this.rolemaskPermissions.set("roleMask",a.roleMask,!1,a.appliedPermissionRoles,a.optOutMask),this.rolemaskPermissions.set("roleMask",a.roleMask2,!0,a.appliedPermissionRoles2,a.optOutMask2),this.rolemaskPermissions.set("extraPermissions",a.permissions),this.rolemaskPermissions.get("allSelected")?this.buttonBar.set("isSelectAll",!1):this.buttonBar.set("isSelectAll",
!0)):this._displayError(a);rc.setupWizard||this._setupDirtyListeners()},_parseSave:function(a){a.errStatus===this.SuccessCode&&this._reload();this._displayError(a)},_reload:function(){this._fetch().then(m.hitch(this,this._parseFetch),m.hitch(this,this._requestError))},_removeDirtyListeners:function(){null!==this._nameListener&&(this._nameListener.remove(),this._nameListener=null);this.rolemaskPermissions&&this.rolemaskPermissions.removeDirtyListeners()},_requestError:function(a){this._displayError({errMSG:a.message,
errStatus:504})},_roleNameValidation:function(a){return 0<a.trim().length},_save:function(){b.put("role/permissions",{handleAs:"json",data:this._getDataForSave()}).then(m.hitch(this,this._parseSave),m.hitch(this,this._requestError))},_setupDirtyListeners:function(){this._removeDirtyListeners();this.defer(m.hitch(this,function(){this._nameListener=c(this.roleName,"change",m.hitch(this,this.makeDirty));this.own(this._nameListener)}),0);this.rolemaskPermissions.setupDirtyListeners()},_setupLabels:function(){k.set(this.roleNameLB,
"for",this.roleName.id)},_toggleWizardSelectAll:function(){var a=h.contains(this.selectAll,"selectAllIcon");this.rolemaskPermissions.toggleSelectAll(a);a?h.replace(this.selectAll,"deselectAllIcon","selectAllIcon"):h.replace(this.selectAll,"selectAllIcon","deselectAllIcon")},destroy:function(){this.inherited(arguments);this._removeDirtyListeners()}})})},"webview/admin/roles/RoleToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/hash dojo/i18n!../../nls/all dojo/i18n!../../nls/roles dojo/io-query dojo/on dojo/query dojo/text!./templates/RoleToolbar.html ../_Widget ../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return p("webview/admin/roles/RoleToolbar",[b],{templateString:c,roleStrings:d,webviewStrings:g,isSelectAll:!0,postCreate:function(){this.inherited(arguments);this._setupEmitters()},_setDirtyAttr:function(b){k.replace(this.saveButton.toolbarButtonIcon,b?"dirtySaveIcon":"saveIcon",b?"saveIcon":"dirtySaveIcon");this._set("dirty",b)},_setHasIconButtonsAttr:function(b){[this.selectAllButton,this.saveButton,this.cancelButton].forEach(function(c){k.toggle(c.domNode,"hidden",
!b);c.set("disabled",!b)});b&&this.set("hasSelectAll",this.hasSelectAll);this._set("hasIconButtons",b)},_setHasSelectAllAttr:function(b){k.toggle(this.selectAllButton.domNode,"hidden",!b);this.selectAllButton.set("disabled",!b);this._set("hasSelectAll",b)},_setIsIndividualRoleAttr:function(b){[this.permissionsButton,this.loginInfoButton].forEach(function(c){k.toggle(c.domNode,"hidden",!b);c.set("disabled",!b)});this._set("isIndividualUser",b)},_setIsSelectAllAttr:function(b){b?(k.replace(this.selectAllButton.toolbarButtonIcon,
"selectAllIcon","deselectAllIcon"),this.selectAllButton.tooltip.set("label",this.webviewStrings.selectAll)):(k.replace(this.selectAllButton.toolbarButtonIcon,"deselectAllIcon","selectAllIcon"),this.selectAllButton.tooltip.set("label",this.webviewStrings.deselectAll));this._set("isSelectAll",b)},_setSelectedButtonAttr:function(b){"undefined"!==typeof this[b]&&(r(".selected",this.buttonsContainer).forEach(function(b){k.remove(b,"selected")}),k.add(this[b].domNode,"selected"))},disableAll:function(){this._onNavigate=
function(){};[this.saveButton,this.selectAllButton,this.cancelButton].forEach(function(b){b.set("disabled",!0)})},onCancel:function(){this.emit("cancel")},onSave:function(){this.emit("save")},onSelectAll:function(b){this.emit("selectAll",b)},_onNavigate:function(b){var c={site:this.site},d="";switch(b){case "list":d="rolesList?";break;case "add":c.roleId=-1;d="rolePermissions?";break;case "permission":c.roleId=this.roleId;d="rolePermissions?";break;case "info":c.roleId=this.roleId,d="roleLoginInfo?"}b=
l.objectToQuery(c);h(d+b)},_setupEmitters:function(){this.own(f(this.listButton.domNode,"click",m.hitch(this,this._onNavigate,"list")),f(this.addRoleButton.domNode,"click",m.hitch(this,this._onNavigate,"add")),f(this.permissionsButton.domNode,"click",m.hitch(this,function(){this.permissionsButton.get("disabled")||this._onNavigate("permission")})),f(this.loginInfoButton.domNode,"click",m.hitch(this,function(){this.loginInfoButton.get("disabled")||this._onNavigate("info")})),f(this.saveButton.domNode,
"click",m.hitch(this,function(){if(!this.saveButton.get("disabled"))this.onSave()})),f(this.selectAllButton.domNode,"click",m.hitch(this,function(){this.selectAllButton.get("disabled")||this._toggleSelectAll()})),f(this.cancelButton.domNode,"click",m.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancel()})))},_toggleSelectAll:function(){this.onSelectAll(this.isSelectAll);this.set("isSelectAll",!this.isSelectAll)}})})},"webview/admin/users/RolemaskPermissions":function(){define("dijit/Dialog dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/has dojo/i18n!rc/nls/all dojo/i18n!../../nls/afterHoursReport dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/i18n!../../nls/programs dojo/i18n!../../nls/roles dojo/on dojo/string dojo/store/Memory dojo/text!./templates/RolemaskPermissions.html dojo/topic rc/util/notices ../widget/FileGallery ../../widget/WarningDialog ../../widget/WarningDialogEnums dojox/form/Uploader dojox/validate/web ../../widget/RoleIcon".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D){return d("webview/admin/users/RolemaskPermissions",[k,m,h],{accessLevelChanged:!1,accessLevelOriginal:0,acceptedFileExtensions:".pdf .html .doc .docx .odt .txt".split(" "),afterHoursStrings:t,autoLogoffTimeOriginal:0,autoLogOffValueChanged:!1,errorStrings:u,programStrings:a,rcStrings:b,roleStrings:n,templateString:z,webviewStrings:q,_dirtyListeners:[],_fileGallery:null,_helpFileDialog:null,_helpFileUploader:null,_helpGuid:null,_overwriteWarningDialog:null,
_permissionsStore:null,_uploadedFiles:[],constructor:function(){this._permissionsStore=new w({idProperty:"maskIdx",data:[{maskIdx:"endUser",enabled:!1,attachPoint:"endUserValues",attachPointRoleIcon:"endUserValuesRoleIcon",isExtended:!1},{maskIdx:"operator",enabled:!1,attachPoint:"operatorValues",attachPointRoleIcon:"operatorValuesRoleIcon",isExtended:!1},{maskIdx:"userEnabled",enabled:!0,attachPoint:"userEnabled",attachPointRoleIcon:"userEnabledRoleIcon",isExtended:!1},{maskIdx:"navGroupAdmin",enabled:!1,
attachPoint:"manageNavGroup",attachPointRoleIcon:"manageNavGroupRoleIcon",isExtended:!1},{maskIdx:"viewAlarms",enabled:!1,attachPoint:"viewAlarms",attachPointRoleIcon:"viewAlarmsRoleIcon",isExtended:!1},{maskIdx:"entSchedAdmin",enabled:!1,attachPoint:"editScheduleTree",attachPointRoleIcon:"editScheduleTreeRoleIcon",isExtended:!1},{maskIdx:"navTreeAdmin",enabled:!1,attachPoint:"manageNavTree",attachPointRoleIcon:"manageNavTreeRoleIcon",isExtended:!1},{maskIdx:"admin",enabled:!1,attachPoint:"manageSystems",
attachPointRoleIcon:"manageSystemsRoleIcon",isExtended:!1},{maskIdx:"usersAdmin",enabled:!1,attachPoint:"manageUsers",attachPointRoleIcon:"manageUsersRoleIcon",isExtended:!1},{maskIdx:"showLogout",enabled:!1,attachPoint:"showLogon",attachPointRoleIcon:"showLogonRoleIcon",isExtended:!1},{maskIdx:"bacnetAdvChg",enabled:!1,attachPoint:"bacnetAdvChg",attachPointRoleIcon:"bacnetAdvChgRoleIcon",isExtended:!1},{maskIdx:"notChg",enabled:!1,attachPoint:"notClassChg",attachPointRoleIcon:"notClassChgRoleIcon",
isExtended:!0},{maskIdx:"aryChg",enabled:!1,attachPoint:"changeArrays",attachPointRoleIcon:"changeArraysRoleIcon",isExtended:!1},{maskIdx:"asChg",enabled:!1,attachPoint:"calendars",attachPointRoleIcon:"calendarsRoleIcon",isExtended:!1},{maskIdx:"wsChg",enabled:!1,attachPoint:"weeklySchedules",attachPointRoleIcon:"weeklySchedulesRoleIcon",isExtended:!1},{maskIdx:"editTrendlogs",enabled:!1,attachPoint:"trendlogWorksheet",attachPointRoleIcon:"trendlogWorksheetRoleIcon",isExtended:!1},{maskIdx:"esChg",
enabled:!1,attachPoint:"exceptionSchedules",attachPointRoleIcon:"exceptionSchedulesRoleIcon",isExtended:!1},{maskIdx:"varChg",enabled:!1,attachPoint:"changeVariables",attachPointRoleIcon:"changeVariablesRoleIcon",isExtended:!1},{maskIdx:"conChg",enabled:!1,attachPoint:"pidLoops",attachPointRoleIcon:"pidLoopsRoleIcon",isExtended:!1},{maskIdx:"outChg",enabled:!1,attachPoint:"changeOutputs",attachPointRoleIcon:"changeOutputsRoleIcon",isExtended:!1},{maskIdx:"alarmDisable",enabled:!1,attachPoint:"popupAlarms",
attachPointRoleIcon:"popupAlarmsRoleIcon",isExtended:!1},{maskIdx:"setTime",enabled:!1,attachPoint:"changeDateTime",attachPointRoleIcon:"changeDateTimeRoleIcon",isExtended:!1},{maskIdx:"autoLogout",enabled:!1,attachPoint:"autoLogOff",attachPointRoleIcon:"autoLogOffRoleIcon",isExtended:!1},{maskIdx:"reasonReq",enabled:!1,attachPoint:"mustExplain",attachPointRoleIcon:"mustExplainRoleIcon",isExtended:!1},{maskIdx:"autoManual",enabled:!1,attachPoint:"auto",attachPointRoleIcon:"autoRoleIcon",isExtended:!1},
{shift:29,maskIdx:"alarmAck",enabled:!1,attachPoint:"ackAlarms",attachPointRoleIcon:"ackAlarmsRoleIcon",isExtended:!1},{shift:30,maskIdx:"audit",enabled:!1,attachPoint:"auditTrail",attachPointRoleIcon:"auditTrailRoleIcon",isExtended:!1},{shift:31,maskIdx:"inChg",enabled:!1,attachPoint:"changeInputs",attachPointRoleIcon:"changeInputsRoleIcon",isExtended:!1},{maskIdx:"modifyAfterHoursEvents",enabled:!1,attachPoint:"modifyAfterHoursEvents",attachPointRoleIcon:"modifyAfterHoursEventsRoleIcon",isExtended:!0},
{maskIdx:"approveAfterHoursEvents",enabled:!1,attachPoint:"approveAfterHoursEvents",attachPointRoleIcon:"approveAfterHoursEventsRoleIcon",isExtended:!0},{maskIdx:"modifyDefaultSchedule",enabled:!1,attachPoint:"modifyDefaultSchedule",attachPointRoleIcon:"modifyDefaultScheduleRoleIcon",isExtended:!0},{maskIdx:"viewAfterHoursReport",enabled:!1,attachPoint:"viewAfterHoursReport",attachPointRoleIcon:"viewAfterHoursReportRoleIcon",isExtended:!0},{maskIdx:"configureEventPriority",enabled:!1,attachPoint:"configureEventPriority",
attachPointRoleIcon:"configureEventPriorityRoleIcon",isExtended:!0},{maskIdx:"configureAfterHoursEventReporting",enabled:!1,attachPoint:"configureAfterHoursEventReporting",attachPointRoleIcon:"configureAfterHoursEventReportingRoleIcon",isExtended:!0},{maskIdx:"administerReportTemplates",enabled:!1,attachPoint:"administerReportTemplates",attachPointRoleIcon:"administerReportTemplatesRoleIcon",isExtended:!0},{maskIdx:"programsWorksheet",enabled:!1,attachPoint:"programsWorksheet",attachPointRoleIcon:"programsWorksheetRoleIcon",
isExtended:!0},{maskIdx:"accessPrograms",enabled:!1,attachPoint:"accessPrograms",attachPointRoleIcon:"accessProgramsRoleIcon",isExtended:!0},{maskIdx:"modifyPrograms",enabled:!1,attachPoint:"modifyPrograms",attachPointRoleIcon:"modifyProgramsRoleIcon",isExtended:!0},{maskIdx:"enableDisablePrograms",enabled:!1,attachPoint:"enableDisablePrograms",attachPointRoleIcon:"enableDisableProgramsRoleIcon",isExtended:!0},{maskIdx:"sendMultiplePrograms",enabled:!1,attachPoint:"sendMultiplePrograms",attachPointRoleIcon:"sendMultipleProgramsRoleIcon",
isExtended:!0},{maskIdx:"popupAHAC",enabled:!1,attachPoint:"popupAHAC",attachPointRoleIcon:"popupAHACRoleIcon",isExtended:!0},{maskIdx:"panFileBackup",enabled:!1,attachPoint:"panFileBackup",attachPointRoleIcon:"panFileBackupRoleIcon",isExtended:!0},{maskIdx:"panFileRestore",enabled:!1,attachPoint:"panFileRestore",attachPointRoleIcon:"panFileRestoreRoleIcon",isExtended:!0},{maskIdx:"panFileOverwrite",enabled:!1,attachPoint:"panFileOverwrite",attachPointRoleIcon:"panFileOverwriteRoleIcon",isExtended:!0},
{maskIdx:"modifyPointReports",enabled:!1,attachPoint:"modifyPointReports",attachPointRoleIcon:"modifyPointReportsRoleIcon",isExtended:!0},{maskIdx:"cleanUpAlarmHistory",enabled:!1,attachPoint:"cleanUpAlarmHistory",attachPointRoleIcon:"cleanUpAlarmHistoryRoleIcon",isExtended:!0}]})},postCreate:function(){this.own(v(this.autoLogoffTime,"change",l.hitch(this,this._changeAutoLogoffTime)));this.own(v(this.accessLevel,"change",l.hitch(this,this._changeAccessLevel)))},_getAllSelectedAttr:function(){return 0===
this._permissionsStore.query().filter(l.hitch(this,function(a){return"undefined"!==typeof this[a.attachPoint]&&!1===this[a.attachPoint].get("checked")})).length},_getExtraPermissionsAttr:function(){return{autoLogoffTime:Number(this.autoLogoffTime.get("value")),accessLevel:this.accessLevel.get("value"),customHelpURL:this.helpPath.get("value"),accessLevelChanged:this.accessLevelChanged,autoLogOffValueChanged:this.autoLogOffValueChanged,helpGuid:this._helpGuid}},_setExtraPermissionsAttr:function(a){this.accessLevelOriginal=
Number(a.accessLevel);this.autoLogoffTimeOriginal=Number(a.autoLogoffTime);this.autoLogoffTime.set("value",a.autoLogoffTime);this.accessLevel.set("value",a.accessLevel);var b;a.appliedRoles&&a.appliedRoles.accessLevel?(this.accessLevelRoleIcon.set("visibility",!0),b=x.substitute(this.roleStrings.inheritedAccessLevel,[a.accessLevel,a.appliedRoles.accessLevel.roleName]),this.accessLevelRoleIcon.set("roleStr",b),this.accessLevelRoleIcon.set("originalRoleStr",b)):this.accessLevelRoleIcon.set("visibility",
!1);a.appliedRoles&&a.appliedRoles.autoLogOffTime?(this.autoLogOffRoleIcon.set("visibility",!0),b=x.substitute(this.roleStrings.inheritedAutoLogOff,[a.autoLogoffTime,a.appliedRoles.autoLogOffTime.roleName]),this.autoLogOffRoleIcon.set("originalRoleStr",b),this.autoLogOffRoleIcon.set("roleStr",b)):this.autoLogOffRoleIcon.set("visibility",!1);"undefined"!==typeof a.customHelpURL&&this.helpPath.set("value",a.customHelpURL);this._helpGuid=a.helpGuid||null},_setIsAdminAttr:function(a){this.manageSystems.set("disabled",
a);this.manageUsers.set("disabled",a);a&&dojo.query(".customHelpFile").forEach(dojo.destroy);this._set("isAdmin",a)},_setIsPublicAttr:function(a){f.toggle(this.showLogonNode,"hidden",!a);this._set("isPublic",a)},_getRoleMaskAttr:function(){for(var a={rolemask:0,extendedRolemask:0},b=this._permissionsStore.query({isExtended:!1}),c=0;c<b.length;++c)a.rolemask=this._setBitInMask(a.rolemask,rc.session.roles,b[c]);this.isPublic||(a.rolemask|=rc.session.roles.showLogout);this.helpPath.get("value")&&(a.rolemask|=
rc.session.roles.customHelp);a.rolemask|=rc.session.roles.alarmAdmin;a.rolemask|=rc.session.roles.showStatus;a.rolemask|=rc.session.roles.showTree;a.rolemask|=rc.session.roles.showHelp;this._permissionsStore.query({isExtended:!0}).forEach(l.hitch(this,function(b){a.extendedRolemask=this._setBitInMask(a.extendedRolemask,rc.session.roles2,b)}));return a},_setRoleMaskAttr:function(a,b,c){var d=null,d=b?rc.session.roles2:rc.session.roles;this._permissionsStore.query({isExtended:b}).forEach(l.hitch(this,
this._setPermission,a,d,c))},onChange:function(){},onClickWizardNext:function(){throw"onClickWizardNext must be implemented by parent";},removeDirtyListeners:function(){for(var a=0;a<this._dirtyListeners.length;++a)this._dirtyListeners[a].remove();this._dirtyListeners=[]},resize:function(){this.inherited(arguments);var a=3,b=this.domNode.clientWidth;778>b?a=1:1150>b&&(a=2);r.set(this.domNode,{"-webkit-column-count":a,"-moz-column-count":a,"column-count":a})},setupDirtyListeners:function(){this.defer(l.hitch(this,
function(){this.removeDirtyListeners();this._permissionsStore.query().forEach(l.hitch(this,function(a){"undefined"!==typeof this[a.attachPoint]&&this._dirtyListeners.push(v(this[a.attachPoint],"change",l.hitch(this,this._onChange)))}));this._dirtyListeners.push(v(this.accessLevel,"change",l.hitch(this,this._onChange)));this._dirtyListeners.push(v(this.autoLogoffTime,"change",l.hitch(this,this._onChange)));this._dirtyListeners.push(v(this.helpPath,"change",l.hitch(this,this._onChange)))}),0)},toggleSelectAll:function(a){this._permissionsStore.query().forEach(l.hitch(this,
function(a,b){"undefined"!==typeof this[b.attachPoint]&&this[b.attachPoint].set("checked",a)},a))},setupHelpPath:function(){f.remove(this.customHelpContainer,"hidden");var a=this._createHelpFileSelector();this.own(a);a.then(l.hitch(this,function(){this._createUploader();this._setupHelpPathValidator()}));this.own(v(this.helpPath,"click",l.hitch(this,function(){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1);this._helpFileUploader.inputNode.dispatchEvent(a)})));return a},validate:function(){return this.accessLevel.isValid()?
this.autoLogOff.get("checked")&&!this.autoLogoffTime.isValid()?{valid:!1,msg:this.errorStrings.invalidLogoffTime}:{valid:!0,msg:"Successful"}:{valid:!1,msg:this.errorStrings.invalidAccessLevel}},_changeAutoLogoffTime:function(a){this.autoLogoffTimeOriginal!==Number(a)&&(this.autoLogOffValueChanged=!0)},_changeAccessLevel:function(a){this.accessLevelOriginal!==Number(a)&&(this.accessLevelChanged=!0)},_checkAccessLevel:function(a,b){var c=!1;!this.required||this.isForRole&&(""===a||void 0===a)?c=!0:
("undefined"===typeof b.min&&(b.min=Number.MIN_SAFE_INTEGER),"undefined"===typeof b.max&&(b.max=Number.MAX_SAFE_INTEGER),a=Number(a),c=!isNaN(a)&&a>=b.min&&a<=b.max);return c},_createHelpFileSelector:function(){var a=rc.xhr.request({path:"helpFiles/",type:"rest",method:"GET",siteId:this.site});a.then(l.hitch(this,function(a){var b=[{label:this.webviewStrings.filename},{label:this.webviewStrings.fileSizeKB},{label:this.webviewStrings.lastModified},{label:this.webviewStrings.wvUsers},{label:"\x26nbsp;",
baseClass:"deleteColumnHeader"}];null===this._fileGallery&&(this._fileGallery=new B({headers:b,items:null}),this._helpFileDialog=new p({title:this.webviewStrings.selectCustomHelp,content:this._fileGallery,baseClass:"fileGalleryDialogBox"}),this.own(v(this._fileGallery,"itemSelected",l.hitch(this,function(a){this.helpPath.set("value",a.fieldLabel);this._helpGuid=a.id;this._helpFileDialog.hide()}))),this.own(v(this._fileGallery,"itemDeleted",l.hitch(this,function(a,b){rc.xhr.request({path:"helpFiles/",
type:"rest",method:"DELETE",siteId:this.site,guid:a}).then(l.hitch(this,function(a){200!==a.data.errStatus&&f.remove(b,"hidden");500!==a.data.errStatus?this._displayErrorMessage(a.data):y.publish("sticky",{type:"error",message:this.errorStrings.fileNotFound})}))}))),this.own(v(this.galleryButton,"click",l.hitch(this,function(){this._updateGallery();this._helpFileDialog.show()}))));void 0!==a.data&&0<a.data.length&&(g.forEach(a.data,l.hitch(this,function(a){this._uploadedFiles.push(a.fileName)})),
f.remove(this.galleryOrLabel,"hidden"),f.remove(this.galleryButton.domNode,"hidden"))}),l.hitch(this,function(a){console.error(this.declaredClass+" - _createHelpFileSelector(): Error getting Data",a)}));return a},_createUploader:function(){this._helpFileUploader=new dojox.form.Uploader({label:this.webviewStrings.upload.toUpperCase(),multiple:!1,url:"uploader/helpFile",baseClass:"webviewButton uploader",iconClass:"webviewIcon uploadIcon",onChange:l.hitch(this,this._uploadCustomFile)},this.helpFileUploader);
this._helpFileUploader.startup();this.own(v(this._helpFileUploader,"complete",l.hitch(this,this._uploadComplete)))},_createWarningDialog:function(){this._overwriteWarningDialog||(this._overwriteWarningDialog=new C({title:this.webviewStrings.overwriteDialogTitle,type:D.types.binary,text:this.webviewStrings.overwriteDialogBody}))},_onChange:function(){this.onChange()},_permissionHoverText:function(a){var b="";0<a.length&&(a=a.map(function(a){return a.roleName}).join(", "),b=x.substitute(this.roleStrings.inheritedFrom,
{roleList:a}));return b},_setBitInMask:function(a,b,c){if("undefined"!==typeof this[c.attachPoint])switch(c.maskIdx){case "alarmDisable":this[c.attachPoint].get("checked")||(a|=b[c.maskIdx]);break;default:this[c.attachPoint].get("checked")&&(a|=b[c.maskIdx])}return a},_setPermission:function(a,b,c,d){var n=!1;b=b[d.maskIdx];switch(d.maskIdx){case "alarmDisable":n=!(b&a);break;default:n=!!(b&a)}"undefined"!==typeof this[d.attachPoint]&&(this[d.attachPoint].set("checked",n),this[d.attachPoint].set("checkboxvalue",
d),a=this[d.attachPointRoleIcon],d="",c&&"undefined"!==typeof c[b]&&0<c[b].length?(a.set("visibility",!0),n=this._permissionHoverText(c[b]),d=c[b],a.set("originalRoleStr",n)):a.set("visibility",!1),a.set("roleInheritance",d))},_setupHelpPathValidator:function(){this.helpPath.set("validator",l.hitch(this,function(a){return a.length>this.helpPath.constraints.maxChars?(this.helpPath.invalidMessage=x.substitute(this.errorStrings.customHelpFileMaxLength,[this.helpPath.constraints.maxChars]),!1):!0}))},
_updateGallery:function(){rc.xhr.request({path:"helpFiles/",type:"rest",method:"GET",siteId:this.site}).then(l.hitch(this,function(a){var b=[];this._uploadedFiles=[];g.forEach(a.data,l.hitch(this,function(a){var c=a.fileName,d=c.lastIndexOf("\\")+1,c=c.substring(d);b.push({filename:c,identifier:a.guid,idLabelField:"filename",filesize:a.fileProperties.filesize,lastModified:a.fileProperties.lastModified,users:a.users,deleteField:"users"});this._uploadedFiles.push(c)}));this._fileGallery.update(b)}),
l.hitch(this,function(a){console.error(this.declaredClass+" - _updateGallery(): Error while getting updating",a)}))},_uploadComplete:function(a){if(200===a.errStatus||500===a.errStatus){var b=a.fileName;if(c("trident"))var d=b.lastIndexOf("\\")+1,b=b.substring(d);this.helpPath.set("value",a.fileName);this._helpGuid=a.guid;this._updateGallery();var n=v(this.helpPath,"change",l.hitch(this,function(b){b!==a.fileName&&(this.helpGuid=null,n.remove())}))}},_uploadCustomFile:function(a){var b={siteId:this.site},
c=!0,d=a[0].name,n=d.lastIndexOf("\\")+1,d=d.substring(n),n=d.lastIndexOf("."),n=d.substring(n);A.widget.clear();this._helpFileUploader.convertBytes(a[0].size).mb>=this._MAX_FILE_UPLOAD_SIZE_IN_MB&&(c=!1,y.publish("sticky",{type:"error",message:this.webviewStrings.fileExceedsMax}));if(-1!==this._uploadedFiles.indexOf(d)){c=!1;this._createWarningDialog();var f=this._overwriteWarningDialog.on("close",l.hitch(this,function(a){switch(a){case D.returnValues.oneOrYes:this._helpFileUploader.upload(b);break;
case D.returnValues.none:break;default:console.error(this.declaredClass+" - _uploadCustomFile(): Unknown choice",a)}f.remove()}));this.own(f);this._overwriteWarningDialog.open()}if(-1===this.acceptedFileExtensions.indexOf(n.toLowerCase())){var c=!1,q=this.errorStrings.unsupportedFileType+"\x3cul\x3e";g.forEach(this.acceptedFileExtensions,function(a){q+="\x3cli\x3e"+a+"\x3c/li\x3e"});q+="\x3c/ul\x3e";y.publish("sticky",{type:"error",message:q})}c&&this._helpFileUploader.upload(b)},destroy:function(){this.removeDirtyListeners();
this._dirtyListeners=null;this.inherited(arguments)}})})},"webview/admin/widget/FileGallery":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/Evented dojo/query dojo/text!./templates/FileGallery.html".split(" "),function(p,m,k,h,g,d,l,f,r,c){return h("webview/admin/widget/FileGallery",[m,p,f],{templateString:c,headers:null,items:null,baseClass:"webviewFileGallery",postCreate:function(){null!==this.headers&&
this._buildHeaders();null!==this.items&&this._buildContents();null===this.headers&&null===this.items&&console.error(this.declaredClass+" - postCreate(): No Data found",this.headers,this.items);d.add(this.domNode,this.baseClass)},update:function(b){this.items=b;b=r(".fileGalleryItemRow",this.contentsTable);k.forEach(b,function(b){l.destroy(b)});this._buildContents()},_buildHeaders:function(){var b=0;k.forEach(this.headers,g.hitch(this,function(c){var d="fileGalleryHeader ";0===b?d+="firstColumn ":
b===this.headers.length-1&&(d+="lastColumn ");l.create("span",{"class":void 0!==c.baseClass?d+c.baseClass:d,innerHTML:c.label},this.tableHeader,"last");b++}))},_buildContents:function(){var b=0;k.forEach(this.items,g.hitch(this,function(c){var d=l.create("div",{"class":b%2?"fileGalleryItemRow evenRow":"fileGalleryItemRow oddRow"},this.tableHeader,"after"),f;for(f in c)f===c.idLabelField?l.create("span",{"class":"fileGalleryItemContent linkable",innerHTML:c[f],onclick:g.hitch(this,function(){this._setSelectedItem(c.identifier,
c[c.idLabelField])})},d,"last"):"idLabelField"!==f&&"identifier"!==f&&"deleteField"!==f&&l.create("span",{"class":"fileGalleryItemContent",innerHTML:c[f]},d,"last");void 0!==c.deleteField&&0===c[c.deleteField].length?l.create("span",{"class":"fileGalleryItemContent noPadding rc24Icon deleteIcon",onclick:g.hitch(this,function(){this._deleteItem(c.identifier,d)})},d,"last"):l.create("span",{"class":"fileGalleryItemContent noPadding"},d,"last");b++}))},_setSelectedItem:function(b,c){this.identifier=
b;this.emit("itemSelected",{id:b,fieldLabel:c})},_deleteItem:function(b,c){this.emit("itemDeleted",b,c);d.add(c,"hidden")}})})},"webview/widget/RoleIcon":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/Tooltip dojo/_base/declare dojo/dom-class dojo/dom-style dojo/i18n!../nls/roles dojo/string dojo/text!./templates/RoleIcon.html".split(" "),function(p,m,k,h,g,d,l,f,r){return h("webview/widget/RoleIcon",[m,p],{disabled:!1,orignalRoleStr:"",roleStr:"",roleStrings:l,templateString:r,
tooltip:null,visibility:!1,postCreate:function(){this.inherited(arguments);this.tooltip=new k({connectId:this,label:'\x3cspan class\x3d"toolbar-button-tooltip"\x3e'+this.roleStr+"\x3c/span\x3e",position:["above"],showDelay:0})},_setDisabledAttr:function(c){g.toggle(this.domNode,"disabled",c);this._set("disabled",c)},_setRoleInheritanceAttr:function(c){var b=c;"undefined"!==typeof c.roleName&&(b=f.substitute(this.roleStrings.inheritedFrom,{roleList:c.roleName}));Array.isArray(c)&&(b=c.map(function(b){return b.roleName}).join(", "),
b=f.substitute(this.roleStrings.inheritedFrom,{roleList:b}));this.set("roleStr",b);this._set("roleInheritance",c)},_setRoleStrAttr:function(c){null!==this.tooltip&&this.tooltip.set("label",c);this._set("roleStr",c)},_setVisibilityAttr:function(c){d.set(this.domNode,"visibility",c?"":"hidden");this._set("visibility",c)}})})},"webview/admin/roles/RolesList":function(){define("dgrid/selector dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/hash dojo/i18n!../../nls/afterHoursReport dojo/i18n!../../nls/roles dojo/io-query dojo/text!./templates/RolesList.html ../users/UsersBase ../users/UsersListBase ../users/UserListToolbar ./RoleToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return h("webview/roles/RolesList",[q,u],{_dataPath:"Roles",_gridFilter:"",_gridString:c.role,_hash:"#roles",_sortAttribute:"name",templateString:t,postCreate:function(){this.inherited(arguments);this.buttonBar.set("site",this.site);var a=this._buildAuditLogTitle();webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#Role"}],a)},_buildAuditLogTitle:function(){return rc.session.getSitePath(this.site)+" "+this.title},_buildGridStructure:function(){return[p({selectorType:g.hitch(this,
this._createSelectorCheckbox),id:"selectorCol",label:"",field:"id",sortable:!1}),{id:"nameCol",label:c.roleName,field:"name",searchable:!0,formatter:g.hitch(this,this._formatName)},{id:"permittedSystemsCol",label:this.webviewStrings.permittedSystems,altName:this.webviewStrings.systems,field:"systemsAssigned",filter:!0,sortable:!1,searchable:!1,renderCell:g.hitch(this,this._renderSystemTags)},{id:"treeCol",label:this.webviewStrings.tree,field:"treeName",searchable:!0,formatter:g.hitch(this,this._formatEncodedName)},
{id:"reportTemplateCol",label:r.reportTemplate,field:"reportTemplateName",searchable:!0,formatter:g.hitch(this,this._formatEncodedName)},{id:"homeGroupCol",label:this.webviewStrings.homeGroup,field:"homeGroup",searchable:!0,formatter:g.hitch(this,this._formatEncodedName)},{id:"myControlHomeGroupCol",label:this.webviewStrings.myControlGroup,field:"myControlGroup",searchable:!0,formatter:g.hitch(this,this._formatEncodedName)},{id:"enabledCol",label:this.webviewStrings.enabledLabel,field:"enabled",searchable:!1,
sortable:!1,renderCell:g.hitch(this,this._renderEnabledCheckBox)}]},_connectGrid:function(){this.inherited(arguments);this.grid.on(".dgrid-content .dgrid-cell.field-name:click",g.hitch(this,this._onClickItemName))},_createButtons:function(){},_createDeleteParams:function(a){return{siteId:this.site,ids:a}},_getSelectedItemsForDelete:function(){var a=[];k.forEach(Object.keys(this.grid.selection),g.hitch(this,function(b){b=Number(b);!0===this.grid.selection[b]&&a.push(b)}));return a},goToAdd:function(){},
_gotoPermittedSchedule:function(){var a=Object.keys(this.grid.selection);sessionStorage.setItem("roleIds",a);a="Users/PermittedSchedules?"+b.objectToQuery({site:this.site,isRole:!0});f(a)},_onClickItemName:function(a){(a=this.grid.cell(a.target).row.data)&&f("roleLoginInfo?"+b.objectToQuery({site:this.site,roleId:a.id}))},_renderEnabledCheckBox:function(a,b){var c=l.create("span"),n=new m({value:!0,checked:b,onChange:g.hitch(this,function(a,b){a.enabled=b;this._gridStore.put(a).then(g.hitch(this,
function(a){this._displayErrorMessage(a)}));this.grid.clearSelection()},a)});d.add(n.domNode,"enabled-checkbox");l.place(n.domNode,c,"only");return c},_setAddButton:function(){},_showConfirmDialog:function(a){null===this.confirmDeleteDialog&&this._buildConfirmDeleteDialog();var b=this.errorStrings.confirmDeleteFollowing+"\x3cbr /\x3e\x3cul\x3e";k.forEach(a,g.hitch(this,function(a){b+="\x3cli\x3e"+this._gridStore.get(a).name+"\x3c/li\x3e"}));b+="\x3c/ul\x3e";this.confirmDeleteDialog.set("text",b);
this.confirmDeleteDialog.open()},_toggleGridToolbar:function(a){var b=[],c;for(c in a.grid.selection)a.grid.selection[c]&&b.push(c);this._gridToolbar.toggleButtons(0===b.length?this._gridToolbar.selectionType.NONE:b.length!==this.grid._rowsOnPage?this._gridToolbar.selectionType.SOME:this._gridToolbar.selectionType.ALL,!0,!0)}})})},"dgrid/selector":function(){define("dojo/_base/kernel dojo/_base/array dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),function(p,m,k,h,g,d){return function(l,
f){function r(a){return!u.allowSelect(u.row(a))}function c(b){return function(c){var d=c.rows,n=d.length;c="false";var f;for(f=0;f<n;f++){var q=u.cell(d[f],l.id).element;q&&(q=(q.contents||q).input)&&!q.disabled&&(q.checked=b,q.setAttribute("aria-checked",b))}if("checkbox"==a.type){d=u.selection;n=!1;for(f in d)if(d[f]!=u.allSelected){n=!0;break}a.indeterminate=n;a.checked=u.allSelected;n?c="mixed":u.allSelected&&(c="true");a.setAttribute("aria-checked",c)}}}function b(a){if("click"==a.type||32==
a.keyCode||!g("opera")&&13==a.keyCode||0===a.keyCode){var b=u.row(a);u._selectionTriggerEvent=a;if(b){if(u.allowSelect(b)){var n=u._lastSelected&&u.row(u._lastSelected);"radio"==f?n&&n.id==b.id||(u.clearSelection(),u.select(b,null,!0),u._lastSelected=b.element):b&&(a.shiftKey?c(!0)({rows:[b]}):n=null,n=a.shiftKey?n:null,u.select(n||b,b,n?void 0:null),u._lastSelected=b.element)}}else d(this,(u.allSelected?"!":".")+"dgrid-select-all"),u[u.allSelected?"clearSelection":"selectAll"]();u._selectionTriggerEvent=
null}}function t(){u._hasSelectorInputListener=!0;q.push(u.on(".dgrid-selector:click,.dgrid-selector:keydown",b));var a=u._handleSelect;u._handleSelect=function(b){this.cell(b).column!=l&&a.apply(this,arguments)};if("function"==typeof l.disabled){var d=u.allowSelect,n=l.disabled;u.allowSelect=function(a){var b=d.call(this,a);return n===r?b:b&&!n.call(l,a.data)}}l.disabled=r;q.push(u.on("dgrid-select",c(!0)));q.push(u.on("dgrid-deselect",c(!1)))}var q=[],u,a;l||(l={});l.type&&(l.selectorType=l.type,
p.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4"));l.selectorType=f=f||l.selectorType||"checkbox";l.sortable=!1;var n="function"==typeof f?f:function(a,b,c){var n=b.parentNode,q;u._hasSelectorInputListener||t();q=l.disabled;d(n&&n.contents?n:b,".dgrid-selector");b=b.input||(b.input=d(b,"input[type\x3d"+f+"]",{tabIndex:isNaN(l.tabIndex)?-1:l.tabIndex,disabled:q&&("function"==typeof q?q.call(l,c):q),checked:a}));b.setAttribute("aria-checked",!!a);return b};h.after(l,"init",
function(){u=l.grid});h.after(l,"destroy",function(){m.forEach(q,function(a){a.remove()});u._hasSelectorInputListener=!1});l.renderCell=function(a,b,c,d,f){b=(b=a&&u.row(a))&&u.selection[b.id];n(b,c,a)};l.renderHeaderCell=function(b){var c="label"in l?l.label:l.field||"";"radio"!=f&&u.allowSelectAll?n(!1,b,{}):(b.appendChild(document.createTextNode(c)),u._hasSelectorInputListener||t());a=b.lastChild};return l}})},"webview/admin/users/UsersBase":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/store/Memory","dojo/store/Observable","../_individualBase"],function(p,m,k,h,g){return p("webview/users/UsersBase",[g],{_systemStore:null,constructor:function(){m.mixin(this.ErrorMessageMap,{501:this.errorStrings.duplicateUser,502:this.errorStrings.userDoesNotExist,510:this.errorStrings.saveInProgress,511:this.errorStrings.userCancelled,513:this.errorStrings.siteDoesNotExist,514:this.errorStrings.adminOnlyChange,515:this.errorStrings.treeDoesNotExist,516:this.errorStrings.groupDoesNotExist,
517:this.errorStrings.cannotChangeForAdminPublic,518:this.errorStrings.preventAdminUsersDeadlock,519:this.errorStrings.approvalPasswordDifference})},_buildHash:function(d){d+="?site\x3d"+encodeURIComponent(this.site);this.userSystem&&(d+="\x26system\x3d"+encodeURIComponent(this.userSystem));return d},_buildSystemList:function(){return this._getDropDownData("systems").always(m.hitch(this,function(d){if(d.data.errStatus===this.SuccessCode){this._systemList=d.data.dataArray;for(d=0;d<this._systemList.length;d++)this._systemList[d].value=
this._systemList[d].id;this._systemStore=new h(new k({data:this._systemList}));this._systemList=[{name:this.webviewStrings.allSystems,value:"*"}].concat(this._systemList)}else this._systemList=[]}))},_getDropDownData:function(d,l){var f=rc.xhr.request({type:"rest",method:"GET",path:d,siteId:this.site}).then(m.hitch(this,function(d){d.data.errStatus!==this.SuccessCode&&(console.error(this.declaredClass+" - _getDropDownData(): Could not get the systems list for the site",this.site),this._displayError(d.data));
if(l)this.onInitSuccess();return d}),m.hitch(this,function(d){console.error(this.declaredClass+" - _getDropDownData(): Could not get the systems list for the site",this.site,d);return d}));this.own(f);return f},_getSystemObjFromId:function(d){for(var l in this._systemList)if(this._systemList[l].id===d)return this._systemList[l];return{}},_hasAllSystems:function(d){var l=!1;if(d.length===this._systemList.length-1)for(var l=!0,f=1;f<this._systemList.length;f++)if(-1===d.indexOf(this._systemList[f])){l=
!1;break}return l},fetch:function(){}})})},"webview/admin/users/UsersListBase":function(){define("dgrid/Grid dgrid/Selection dijit/form/CheckBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/request/xhr dojo/store/Cache dojo/store/JsonRest dojo/store/Memory dojo/store/Observable dojo/string dojo/topic dojo/i18n!../../nls/all dojo/i18n!../../nls/roles dojo/query dojox/html/entities ../_Widget ../../util/util ../../widget/dGridExtensions/Pagination ../../widget/UserTag ../../widget/WarningDialog ../../widget/WarningDialogEnums".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F){return d("webview/users/UsersListBase",A,{confirmDeleteDialog:null,confirmResetDialog:null,confirmRolesRemovalDialog:null,grid:null,webviewStrings:x,constructor:function(){this._path=webview.pathUtil.currentSiteInfo.sitePath+"/"+this._dataPath;this._remoteStore=new q({target:this._path,idProperty:"id"});this._localStore=new u({idProperty:"id"});this._gridStore=new a(new t(this._remoteStore,this._localStore))},postCreate:function(){this.inherited(arguments);
this.own(c(this._gridToolbar,"filterChange",l.hitch(this,this._applyFilter)));this._buildSystemList().then(l.hitch(this,this._buildGrid))},_applyFilter:function(a){this._gridFilter=JSON.stringify(a);null!==this.grid&&this.grid.set("query",{siteId:this.site,filter:this._gridFilter})},_buildConfirmDeleteDialog:function(){null===this.confirmDeleteDialog&&(this.confirmDeleteDialog=new E({type:F.types.binaryConfirm,title:this.webviewStrings.confirmDeleteAction}))},_buildConfirmResetDialog:function(){null===
this.confirmResetDialog&&(this.confirmResetDialog=new E({type:F.types.binaryConfirm,title:this.webviewStrings.confirmResetAction}))},_buildGrid:function(){var a=this._buildGridStructure();this._gridToolbar.buildSearch(a);this.grid=new (d([p,C,m]))({columns:a,store:this._gridStore,sort:[{attribute:this._sortAttribute,descending:!1}],query:{siteId:this.site,filter:this._gridFilter},loadingMessage:B.getLoadingString(this._gridString),noDataMessage:n.substitute(x.noXFound,[this._gridString]),className:"usersGrid dgrid-autoheight",
pagingLinks:1,rowsPerPage:25,pageSizeOptions:[10,25,50,100,200,4095],selectionMode:"none",isPagingGrid:!0},this.gridNode);this._connectGrid();this.grid.startup();this.onInitSuccess()},_createSelectorCheckbox:function(a,b,c){a=new k({value:!0,checked:!1,onChange:l.hitch(this,function(a,b){b?this.grid.select(a):this.grid.deselect(a)},c.id)});f.add(a.domNode,"user-checkbox");r.place(a.domNode,b,"only");return a.domNode},_connectGrid:function(){this.grid.on(".dgrid-content .dgrid-cell.field-userId:click",
l.hitch(this,this._onClickItemName));this.grid.on(["dgrid-select","dgrid-deselect"],l.hitch(this,this._onSelectionChange));this.grid.on("rowsPerPageChanged",l.hitch(this,this._gridRowsPerPageChanged));this.own(c(this._gridToolbar,"assignerEnd",l.hitch(this,this._updateMultipleItems)),c(this._gridToolbar,"deleteSelected",l.hitch(this,this._onDeleteItems)),c(this._gridToolbar,"selectAll",l.hitch(this,this._toggleSelection)),c(this._gridToolbar,"schedulePermissions",l.hitch(this,this._gotoPermittedSchedule)),
c(this._gridToolbar,"resetUsers",l.hitch(this,this._onResetItems)))},_deleteItems:function(a){if(!this._beginUpdate())return null;a=b.del(this._path,{handleAs:"json",data:this._createDeleteParams(a)});a.then(l.hitch(this,function(a){if(518===a.errStatus)this._displayErrorMessage(a);else if(200!==a.errStatus){var b=this._getErrorMessage(a.errStatus);v.publish(b.noticeType,{type:b.type,message:b.msg})}this._endUpdate();518!==a.errStatus&&(this._refreshGrid(!1),v.publish("updateNavTree"));return a}),
l.hitch(this,function(a){this._onInitError(a);this._endUpdate();return a}));return a},_formatEncodedName:function(a){return decodeURIComponent(a)},_formatName:function(a){""===a&&(a="-");return['\x3cspan class\x3d"linkable"\x3e',y.decode(a),"\x3c/span\x3e"].join("")},_getSelectedItemsForDelete:function(){var a=[];g.forEach(Object.keys(this.grid.selection),l.hitch(this,function(b){b=Number(b);var c=this._gridStore.get(b).userId.toLowerCase();!0===this.grid.selection[b]&&"admin"!==c&&"public"!==c&&
a.push(b)}));return a},_gridRowsPerPageChanged:function(){this.grid.clearSelection();this._gridToolbar.toggleButtons(this._gridToolbar.selectionType.NONE,!1,!1,!1)},_renderSystemTags:function(a,b){var d=null,n=this._hasAllSystems(b),f=function(b){b=l.clone(this._getSystemObjFromId(b));b.value&&(delete b.id,b.row=a,b=new D(b),r.place(b.domNode,d,"last"),this.own(c(b,"clickRemove",l.hitch(this,this._removeSystemRestriction,a)),c(b,"click",l.hitch(this,function(a){this._gridToolbar.set("filter",{systemsAssigned:[a.value]})}))))};
b&&!b.length||n?d=r.create("span",{style:{fontStyle:"italic"},innerHTML:x.allSystems}):(d=r.create("span"),g.forEach(b,l.hitch(this,f)));return d},_onDeleteItems:function(){var a=this._getSelectedItemsForDelete();if(a.length){this._showConfirmDeleteDialog(a);var b=c(this.confirmDeleteDialog,"close",l.hitch(this,function(c){switch(c){case F.returnValues.oneOrYes:this._deleteItems(a);break;case F.returnValues.allOrNo:break;default:console.error(this.declaredClass+" - _onDeleteItems(): Unknown choice",
c)}b.remove()}))}},_onResetItems:function(){var a=[],a=g.filter(Object.keys(this.grid.selection),l.hitch(this,function(a){var b=this.grid.store.get(a);if("admin"!==b.userId.toLowerCase()&&"public"!==b.userId.toLowerCase()&&0<b.roles.length)return Number(a)}));if(a.length){this._showConfirmResetDialog(a);var b=c(this.confirmResetDialog,"close",l.hitch(this,function(c){switch(c){case F.returnValues.oneOrYes:this._resetItems(a);break;case F.returnValues.allOrNo:break;default:console.error(this.declaredClass+
" - _onResetItems(): Unknown choice",c)}b.remove()}))}},_onSelectionChange:function(a){var b="dgrid-select"===a.type,c=null,d=null,n=0,f;for(f in a.grid.selection)!0===a.grid.selection[f]&&(n+=1);if(!b)for(var q in a.grid.selection)!1===a.grid.selection[q]&&delete a.grid.selection[q];!0===a.grid.allSelected&&n<a.grid._rowsOnPage&&(a.grid.allSelected=!1);this._toggleGridToolbar(a);g.forEach(a.rows,l.hitch(this,function(a){c=z(".user-checkbox",a.element)[0];d=h.byNode(c);d.set("checked",b)}))},_refreshGrid:function(a){if(!1===
a)a=this.grid.refresh();else{var b=Object.keys(this.grid.selection);a=this.grid.refresh().then(l.hitch(this,function(){if(b.length===this.grid.rowsPerPage)this.grid.selectAll();else for(var a=0;a<b.length;a++)this.grid.select(b[a])}))}return a},_removeSystemRestriction:function(a,b){if(-1!==a.systemsAssigned.indexOf(b.value)){var c=g.filter(a.systemsAssigned,function(a){return a!==b.value});this._updateMultipleItems("system",c,[a.id.toString()])}},_resetItems:function(a){a=b.put(this._path+"/Reset",
{handleAs:"json",data:{userIds:a}});this.own(a);a.then(l.hitch(this,function(a){200!==a.errStatus&&(a=this._getErrorMessage(a.errStatus),v.publish(a.noticeType,{type:a.type,message:a.msg}));this._refreshGrid()}));return a},_showConfirmDeleteDialog:function(a){null===this.confirmDeleteDialog&&this._buildConfirmDeleteDialog();var b=this.errorStrings.confirmDeleteFollowing+"\x3cbr /\x3e\x3cbr /\x3e\x3cul\x3e";g.forEach(a,l.hitch(this,function(a){a=this._gridStore.get(a);b+="\x3cli\x3e"+(null!==a.userId?
a.userId:a.name)+"\x3c/li\x3e"}));b+="\x3c/ul\x3e";this.confirmDeleteDialog.set("text",b);this.confirmDeleteDialog.open()},_showConfirmResetDialog:function(a){null===this.confirmResetDialog&&this._buildConfirmResetDialog();var b=this.webviewStrings.confirmResetUsers+"\x3cbr /\x3e\x3cbr /\x3e\x3cul\x3e";g.forEach(a,l.hitch(this,function(a){b+="\x3cli\x3e"+this._gridStore.get(a).userId+"\x3c/li\x3e"}));b+="\x3c/ul\x3e"+this.webviewStrings.sureToContinue;this.confirmResetDialog.set("text",b);this.confirmResetDialog.open()},
_showConfirmRolesRemovalDialog:function(a){null===this.confirmRolesRemovalDialog&&(this.confirmRolesRemovalDialog=new E({type:F.types.binaryConfirm,title:this.webviewStrings.confirmUpdateAction,baseClass:"warningDialog batchUpdateDialog"}));var b=w.confirmBatchRolesDropText+"\x3cbr /\x3e\x3cbr /\x3e\x3cul\x3e";g.forEach(a,l.hitch(this,function(a){b+="\x3cli\x3e"+a+"\x3c/li\x3e"}));b+="\x3c/ul\x3e"+this.webviewStrings.sureToContinue;this.confirmRolesRemovalDialog.set("text",b);this.confirmRolesRemovalDialog.open()},
_toggleSelection:function(a){a?this.grid.selectAll():this.grid.clearSelection()},_updateMultipleItems:function(a,b,c){c=c||Object.keys(this.grid.selection);var d=this._localStore.query(function(a){return a.roles&&0<a.roles.length&&-1<c.indexOf(a.id.toString())});"roles"!==a&&0<d.length?this._sendMultipleItemsUpdateRequest(a,b,c,!0):this._sendMultipleItemsUpdateRequest(a,b,c,!1)},_sendMultipleItemsUpdateRequest:function(a,d,n,f){if(0<n.length){f={siteId:this.site,IDs:n,propertyName:a,confirmPending:f||
!1};switch(a){case "tree":case "reportTemplate":f.newValue=d;break;case "group":case "myControl":case "roles":case "system":f.newValue=JSON.stringify(d);break;default:console.error(this.declaredClass+" - _sendMultipleItemsUpdateRequest(): Unknown assigner type",a)}f.hasOwnProperty("propertyName")&&f.hasOwnProperty("newValue")&&(this._gridToolbar.enableButtons(!1,!1,!1,!1),b.put(this._dataPath+"/Multiple",{handleAs:"json",data:f}).then(l.hitch(this,function(b){if(200===b.errStatus||514===b.errStatus||
517===b.errStatus)if(b.hasOwnProperty("usersBeingDroppedFromRoles")&&Array.isArray(b.usersBeingDroppedFromRoles))if(0<b.usersBeingDroppedFromRoles.length){this._showConfirmRolesRemovalDialog(b.usersBeingDroppedFromRoles);var f=c(this.confirmRolesRemovalDialog,"close",l.hitch(this,function(b){switch(b){case F.returnValues.oneOrYes:this._sendMultipleItemsUpdateRequest(a,d,n,!1);break;case F.returnValues.allOrNo:this._gridToolbar.enableButtons(!0,!0,!0,!0);break;default:console.error(this.declaredClass+
" - _updateMultipleItems(): Unknown choice",b)}f.remove()}))}else this._sendMultipleItemsUpdateRequest(a,d,n,!1);else this._refreshGrid();else this._displayError(b)}),l.hitch(this,function(b){var c=this._getErrorMessage(504);v.publish(c.noticeType,{type:c.type,message:c.msg});console.error(this.declaredClass+" - _sendMultipleItemsUpdateRequest(): Error updating "+a,b)})))}},resize:function(){this.inherited(arguments);null!==this.grid&&setTimeout(l.hitch(this,function(){this.grid.resize()}),1)},destroy:function(){this.inherited(arguments);
this.confirmDeleteDialog&&(this.confirmDeleteDialog=null);this.confirmResetDialog&&(this.confirmResetDialog=null);this.confirmRolesRemovalDialog&&(this.confirmRolesRemovalDialog=null)}})})},"dojo/store/Cache":function(){define(["../_base/lang","../when"],function(p,m){var k=function(h,g,d){d=d||{};return p.delegate(h,{query:function(l,f){var r=h.query(l,f);r.forEach(function(c){d.isLoaded&&!d.isLoaded(c)||g.put(c)});return r},queryEngine:h.queryEngine||g.queryEngine,get:function(d,f){return m(g.get(d),
function(r){return r||m(h.get(d,f),function(c){c&&g.put(c,{id:d});return c})})},add:function(d,f){return m(h.add(d,f),function(r){g.add(r&&"object"==typeof r?r:d,f);return r})},put:function(d,f){g.remove(f&&f.id||this.getIdentity(d));return m(h.put(d,f),function(r){g.put(r&&"object"==typeof r?r:d,f);return r})},remove:function(d,f){return m(h.remove(d,f),function(r){return g.remove(d,f)})},evict:function(d){return g.remove(d)}})};p.setObject("dojo.store.Cache",k);return k})},"dojo/store/JsonRest":function(){define(["../_base/xhr",
"../_base/lang","../json","../_base/declare","./util/QueryResults"],function(p,m,k,h,g){return h("dojo.store.JsonRest",null,{constructor:function(d){this.headers={};h.safeMixin(this,d)},headers:{},target:"",idProperty:"id",ascendingPrefix:"+",descendingPrefix:"-",_getTarget:function(d){var g=this.target;"undefined"!=typeof d&&(g="/"==g.charAt(g.length-1)||"\x3d"==g.charAt(g.length-1)?g+d:g+("/"+d));return g},get:function(d,g){g=g||{};var f=m.mixin({Accept:this.accepts},this.headers,g.headers||g);
return p("GET",{url:this._getTarget(d),handleAs:"json",headers:f})},accepts:"application/javascript, application/json",getIdentity:function(d){return d[this.idProperty]},put:function(d,g){g=g||{};var f="id"in g?g.id:this.getIdentity(d);return p("undefined"==typeof f||g.incremental?"POST":"PUT",{url:this._getTarget(f),postData:k.stringify(d),handleAs:"json",headers:m.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===g.overwrite?"*":null,"If-None-Match":!1===g.overwrite?"*":
null},this.headers,g.headers)})},add:function(d,g){g=g||{};g.overwrite=!1;return this.put(d,g)},remove:function(d,g){g=g||{};return p("DELETE",{url:this._getTarget(d),headers:m.mixin({},this.headers,g.headers)})},query:function(d,l){l=l||{};var f=m.mixin({Accept:this.accepts},this.headers,l.headers),r=-1<this.target.indexOf("?");(d=d||"")&&"object"==typeof d&&(d=(d=p.objectToQuery(d))?(r?"\x26":"?")+d:"");if(0<=l.start||0<=l.count)f["X-Range"]="items\x3d"+(l.start||"0")+"-"+("count"in l&&Infinity!=
l.count?l.count+(l.start||0)-1:""),this.rangeParam?(d+=(d||r?"\x26":"?")+this.rangeParam+"\x3d"+f["X-Range"],r=!0):f.Range=f["X-Range"];if(l&&l.sort){var c=this.sortParam;d+=(d||r?"\x26":"?")+(c?c+"\x3d":"sort(");for(r=0;r<l.sort.length;r++){var b=l.sort[r];d+=(0<r?",":"")+(b.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(b.attribute)}c||(d+=")")}var h=p("GET",{url:this.target+(d||""),handleAs:"json",headers:f});h.total=h.then(function(){var b=h.ioArgs.xhr.getResponseHeader("Content-Range");
b||(b=h.ioArgs.xhr.getResponseHeader("X-Content-Range"));return b&&(b=b.match(/\/(.*)/))&&+b[1]});return g(h)}})})},"webview/widget/dGridExtensions/Pagination":function(){define(["dgrid/extensions/Pagination","dojo/_base/declare","dojo/on"],function(p,m,k){return m("webview/widget/dGridExtensions/Pagination",[p],{_setRowsPerPage:function(h){this.inherited(arguments);k.emit(this.domNode,"rowsPerPageChanged",h)}})})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/on dojo/query dojo/string dojo/has put-selector/put ../util/misc dojo/i18n!./nls/pagination dojo/_base/sniff xstyle/css!../css/extensions/Pagination.css".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){function q(a){a.noDataNode?(c(a.noDataNode,"!"),delete a.noDataNode):a.cleanup();a.contentNode.innerHTML=""}function u(a){if(a.loadingNode)c(a.loadingNode,"!"),delete a.loadingNode;else if(a._oldPageNodes){for(var b in a._oldPageNodes)a.removeRow(a._oldPageNodes[b]);delete a._oldPageNodes;a._oldPageObserver&&(a._oldPageObserver.cancel(),a._numObservers--,delete a._oldPageObserver)}delete a._isLoading}return m(p,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,
firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:t,showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);var a=this,b=this.paginationNode=c(this.footerNode,"div.dgrid-pagination"),q=this.paginationStatusNode=c(b,"div.dgrid-status"),r=this.i18nPagination;q.tabIndex=0;this._updatePaginationSizeSelect();this._updateRowsPerPageOption();q.innerHTML=f.substitute(r.status,{start:1,end:1,total:0});b=this.paginationNavigationNode=
c(b,"div.dgrid-navigation");this.firstLastArrows&&(q=this.paginationFirstNode=c(b,"span.dgrid-first.dgrid-page-link","\u00ab"),q.setAttribute("aria-label",r.gotoFirst),q.tabIndex=0);this.previousNextArrows&&(q=this.paginationPreviousNode=c(b,"span.dgrid-previous.dgrid-page-link","\u2039"),q.setAttribute("aria-label",r.gotoPrev),q.tabIndex=0);this.paginationLinksNode=c(b,"span.dgrid-pagination-links");this.previousNextArrows&&(q=this.paginationNextNode=c(b,"span.dgrid-next.dgrid-page-link","\u203a"),
q.setAttribute("aria-label",r.gotoNext),q.tabIndex=0);this.firstLastArrows&&(q=this.paginationLastNode=c(b,"span.dgrid-last.dgrid-page-link","\u00bb"),q.setAttribute("aria-label",r.gotoLast),q.tabIndex=0);this._listeners.push(d(b,".dgrid-page-link:click,.dgrid-page-link:keydown",function(b){if("keydown"!==b.type||13===b.keyCode){b=this.className;var c,d;a._isLoading||-1<b.indexOf("dgrid-page-disabled")||(c=a._currentPage,d=Math.ceil(a._total/a.rowsPerPage),this===a.paginationPreviousNode?a.gotoPage(c-
1):this===a.paginationNextNode?a.gotoPage(c+1):this===a.paginationFirstNode?a.gotoPage(1):this===a.paginationLastNode?a.gotoPage(d):"dgrid-page-link"===b&&a.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var a=this.pageSizeOptions,b=this.paginationSizeSelect,f;if(a&&a.length){b||(b=this.paginationSizeSelect=c(this.paginationNode,"select.dgrid-page-size[aria-label\x3d"+
this.i18nPagination.rowsPerPage+"]"),f=this._paginationSizeChangeHandle=d(b,"change",h.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(f));for(f=b.options.length=0;f<a.length;f++)c(b,"option",a[f],{value:a[f],selected:this.rowsPerPage===a[f]});this._updateRowsPerPageOption()}else a&&a.length||!b||(c(b,"!"),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,
b){return a-b});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var a=this.rowsPerPage,b=this.pageSizeOptions,c=this.paginationSizeSelect;c&&(0>k.indexOf(b,a)?this._setPageSizeOptions(b.concat([a])):c.value=""+a)},_setRowsPerPage:function(a){this.rowsPerPage=a;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(){function a(a,b){var n,v;f.pagingTextBox&&a==g&&1<t?(n=c(r,"input.dgrid-page-input[type\x3dtext][value\x3d$]",g),n.setAttribute("aria-label",
q.jumpPage),f._pagingTextBoxHandle=d(n,"change",function(){var a=+this.value;!isNaN(a)&&0<a&&a<=t&&f.gotoPage(+this.value)}),D&&"INPUT"===D.tagName&&n.focus()):(v=a===g,n=c(r,"span"+(v?".dgrid-page-disabled":"")+".dgrid-page-link",a+(b?" ":"")),n.setAttribute("aria-label",q.gotoPage),n.tabIndex=v?-1:0,m===a&&(v?a<t?m++:F.focus():n.focus()),v||(F=n))}function n(a,b){c(a,(b?".":"!")+"dgrid-page-disabled");a.tabIndex=b?-1:0}var f=this,q=this.i18nPagination,r=this.paginationLinksNode,g=this._currentPage,
u=this.pagingLinks,h=this.paginationNavigationNode,t=Math.ceil(this._total/this.rowsPerPage),k=this._pagingTextBoxHandle,D=document.activeElement,m,F;D&&b.contains(this.paginationNavigationNode,D)?"dgrid-page-link"===D.className&&(m=+D.innerHTML):D=null;k&&k.remove();r.innerHTML="";l(".dgrid-first, .dgrid-previous",h).forEach(function(a){n(a,1===g)});l(".dgrid-last, .dgrid-next",h).forEach(function(a){n(a,g>=t)});if(u&&0<t){a(1,!0);h=g-u;for(2<h?c(r,"span.dgrid-page-skip","..."):h=2;h<Math.min(g+
u+1,t);h++)a(h,!0);g+u+1<t&&c(r,"span.dgrid-page-skip","...");1<t&&a(t)}else f.pagingTextBox&&a(g);D&&-1===D.tabIndex&&(u=l("[tabindex\x3d'0']",this.paginationNavigationNode),D===this.paginationPreviousNode||D===this.paginationFirstNode?D=u[0]:u.length&&(D=u[u.length-1]),D&&D.focus())},refresh:function(){var a=this;this.inherited(arguments);if(this.store)return this.gotoPage(1).then(function(b){setTimeout(function(){d.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a,results:b})},
0);return b})},_onNotification:function(a){a.length!==this._rowsOnPage&&this.gotoPage(this._currentPage)},renderArray:function(a,b){var c=this,d=this.inherited(arguments);this._lastCollection=null;b||(this._topLevelRequest&&this._topLevelRequest!==a&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof a.cancel&&(this._topLevelRequest=a),g.when(a,function(){c._topLevelRequest&&delete c._topLevelRequest}));return d},insertRow:function(){var a=this._oldPageNodes,b=this.inherited(arguments);
a&&b===a[b.id]&&delete a[b.id];return b},gotoPage:function(a){var b=this,d=new g;this._trackError(function(){var n=b.rowsPerPage,v=(a-1)*n,l=h.mixin(b.get("queryOptions"),{start:v,count:n}),t,k=b.contentNode,m,C,D;if(b.showLoadingMessage)q(b),m=b.loadingNode=c(k,"div.dgrid-loading"),m.innerHTML=b.loadingMessage;else{b._oldPageNodes=m={};k=k.children;C=0;for(D=k.length;C<D;C++)m[k[C].id]=k[C];b._oldPageObserver=b.observers.pop()}b._isLoading=!0;t=b.store.query(b.query,l);g.when(b.renderArray(t,null,
l),function(q){u(b);b.scrollTo({y:0});g.when(t.total,function(d){d||(b.noDataNode&&(c(b.noDataNode,"!"),delete b.noDataNode),b.noDataNode=c(b.contentNode,"div.dgrid-no-data"),b.noDataNode.innerHTML=b.noDataMessage);b.paginationStatusNode.innerHTML=f.substitute(b.i18nPagination.status,{start:Math.min(v+1,d),end:Math.min(d,v+n),total:d});b._total=d;b._currentPage=a;b._rowsOnPage=q.length;b._updateNavigation()});(7>r("ie")||r("ie")&&r("quirks"))&&b.resize();d.resolve(t)},function(a){u(b);d.reject(a)});
return d.promise})||d.reject();return d.promise}})})},"webview/widget/UserTag":function(){define(["dojo/_base/declare","./SystemTag"],function(p,m){return p("webview/widget/UserTag",[m],{baseClass:""})})},"webview/widget/SystemTag":function(){define("dijit/_TemplatedMixin dijit/_Widget dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/i18n!rc/nls/all dojo/text!./templates/SystemTag.html ../util/util".split(" "),function(p,m,k,h,g,d,l,f){return k("webview/widget/SystemTag",[m,p],{baseClass:"",templateString:l,
field:"",row:null,showRemove:!1,title:"",_setTitleAttr:{node:"containerNode",attribute:"title"},postCreate:function(){this.value=this.value.value||this.value;this.showRemove&&g.remove(this.removeNode,"hidden")},_setNameAttr:function(f){h.set(this.nameContainer,"innerHTML",f);h.set(this.removeNode,"title",d.remove+' "'+f+'"');this._set("name",f)},_setShowRemoveAttr:function(d){g.toggle(this.removeNode,"hidden",!d);this._set("showRemove",d)},_onClick:function(d){f.stopEvent(d);this.onClick(this.get("value"))},
onClick:function(){},_onClickRemove:function(d){f.stopEvent(d);this.onClickRemove(this.get("value"))},onClickRemove:function(){},_getValueAttr:function(){return{field:this.field,value:this.value,row:this.row}}})})},"webview/admin/users/UserListToolbar":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!../../nls/alarms dojo/i18n!../../nls/all dojo/i18n!rc/nls/all dojo/json dojo/on dojo/request/xhr dojo/store/Memory dojo/string dojo/text!./templates/UserListToolbar.html dojo/topic dojox/html/entities ../../widget/ChecklistButton ../../widget/SearchByField ../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y){return d("webview/admin/users/UserListToolbar",[m,p,k],{alarmsStrings:r,columnStructure:null,filter:null,hasRoles:!0,rcStrings:b,selectionType:{NONE:0,SOME:1,ALL:2},templateString:v,webviewStrings:c,_assigners:null,_isSelectAll:!1,_searchString:"",_systemFilter:null,_systemList:null,constructor:function(){this.columnStructure=[];this._assigners=[];this._systemList=[];this.filter={systemsAssigned:[],search:""}},buildRendering:function(){this.inherited(arguments);
this._buildHomeGroupAssigner();this._buildMyControlHomeGroupAssigner();this._buildSystemDropdowns();this._buildTreeAssigner();this._buildAHACReportAssigner();this.hasRoles&&this._buildRolesAssigner();f.add(this.resetIcon.domNode,"hidden");this._createConnections()},buildSearch:function(a){this.searchForm=new y({fields:a},this.fieldSearch);this.own(q(this.searchForm,"change",l.hitch(this,this._setSearch)))},enableButtons:function(a,b,c,d){b&&a?(this.schedulePermissions.set("disabled",!1),this.deleteIcon.set("disabled",
!1)):(this.schedulePermissions.set("disabled",!0),this.deleteIcon.set("disabled",!0));c&&a?this.deleteIcon.set("disabled",!1):this.deleteIcon.set("disabled",!0);this.resetIcon.set("disabled",!d);g.forEach(this._assigners,function(b){b.set("disabled",!a)})},onAssignerEnd:function(a,b){},onDeleteSelected:function(){},onFilterChange:function(a){},onResetUsers:function(){},onSchedulePermissions:function(){},onSelectAll:function(a){},toggleButtons:function(a,b,c,d){(a!==this.selectionType.ALL&&this._isSelectAll||
a===this.selectionType.ALL&&!this._isSelectAll)&&this._toggleSelectAll(!1);this.enableButtons(a!==this.selectionType.NONE,b,c,d)},_buildFilteringSelect:function(a,b,c,d,n){return new h({baseClass:"rcSelectBox "+d,hasDividers:!0===n,store:a,searchAttr:"name",labelAttr:"label",labelType:"html",autoComplete:!1,queryExpr:"*${0}*",placeHolder:c,disabled:!0,required:!1},b)},_buildHomeGroupAssigner:function(){var b=this._getList("HomeGroups").then(l.hitch(this,function(b){if(200===b.errStatus){var c=[],
d=[];b.navGroups&&0<b.navGroups.length&&(c[0]={name:"\f",label:'\x3cspan class\x3d"homeGroup sectionDivider"\x3e'+this.webviewStrings.navGroups+"\x3c/span\x3e",value:-2,id:-2},g.forEach(b.navGroups,l.hitch(this,function(a){d.push(a.name);c.push({label:'\x3cspan class\x3d"menu-item"\x3e'+a.name+"\x3c/span\x3e",name:w.decode(a.name),value:{loginToSystem:!1,groupId:a.id},id:a.id})})));b.systemGroups&&0<b.systemGroups.length&&(c.push({name:"\v",label:'\x3cspan class\x3d"homeGroup sectionDivider"\x3e'+
this.webviewStrings.systemGroup+"\x3c/span\x3e",value:-1,id:-1}),g.forEach(b.systemGroups,l.hitch(this,function(a){d.includes(a.DisplayName)||c.push({label:'\x3cspan class\x3d"menu-item"\x3e'+a.DisplayName+"\x3c/span\x3e",name:w.decode(a.DisplayName),value:{loginToSystem:!0,sysId:a.SystemId,groupMne:a.GroupRedirect},id:a.SystemId+a.GroupRedirect})})));b=new a({data:c});this._homeGroupAssigner=this._buildFilteringSelect(b,this.homeGroupAssigner,this.webviewStrings.setHomeGroup,"homeGroupAssigner",
!0);this._assigners.push(this._homeGroupAssigner);this.own(q(this._homeGroupAssigner,"change",l.hitch(this,this._onAssignerEnd,"group")))}else this._displayErrorMessages(b.errStatus,b.errMsg)}));this.own(b);return b},_buildMyControlHomeGroupAssigner:function(){var b=this._getList("MyControlHomeGroups").then(l.hitch(this,function(b){if(200===b.errStatus){var c=[];b.systemGroups&&0<b.systemGroups.length&&g.forEach(b.systemGroups,l.hitch(this,function(a){c.push({label:'\x3cspan class\x3d"homeGroupOption"\x3e'+
a.DisplayName+"\x3c/span\x3e",name:w.decode(a.DisplayName),value:{sysId:a.SystemId,groupMne:a.GroupRedirect},id:a.SystemId+a.GroupRedirect})}));b=new a({data:c});this._myControlHomeGroupAssigner=this._buildFilteringSelect(b,this.myControlHomeGroupAssigner,this.webviewStrings.setMyControlHomeGroup,"myControlHomeGroupAssigner");this._assigners.push(this._myControlHomeGroupAssigner);this.own(q(this._myControlHomeGroupAssigner,"change",l.hitch(this,this._onAssignerEnd,"myControl")))}else this._displayErrorMessages(b.errStatus,
b.errMsg)}));this.own(b);return b},_buildRolesAssigner:function(){u.get("roles/NameIdPairings",{handleAs:"json",preventCache:!0,query:{siteId:this.site}}).then(l.hitch(this,function(a){200===a.errStatus&&(a=a.roles.map(function(a){return{value:a.roleId,name:a.roleName}}),a.unshift({id:"*",name:this.webviewStrings.clearAllRoles,value:"*"}),this._rolesAssigner=new z({name:this.webviewStrings.roleLabel.toLowerCase(),label:this.webviewStrings.setRoles,list:a,title:this.webviewStrings.setRoles,disabled:!0},
this.roleAssigner),this._assigners.push(this._rolesAssigner),this.own(q(this._rolesAssigner,"editEnd",l.hitch(this,this._onAssignerEnd,"roles"))))}))},_buildSystemFilter:function(){var a=this._systemList,b=n.substitute(this.webviewStrings.filterByX,[this.webviewStrings.systems]);this._systemFilter=new z({name:this.webviewStrings.systems,label:b,list:a,title:b,value:this.filter.systemsAssigned},this.systemFilter);this.own(q(this._systemFilter,"editEnd",l.hitch(this,this._setFilter)))},_buildSystemAssigner:function(){var a=
l.clone(this._systemList);a.unshift({id:"*",name:this.webviewStrings.allSystems,value:"*"});this._systemAssigner=new z({name:this.webviewStrings.systems,label:this.webviewStrings.restrictToSystem,list:a,title:this.webviewStrings.restrictToSystem,disabled:!0},this.systemRestrictorAssigner);this._assigners.push(this._systemAssigner);this.own(q(this._systemAssigner,"editEnd",l.hitch(this,this._onAssignerEnd,"system")))},_buildSystemDropdowns:function(){var a=this._getList("systems").then(l.hitch(this,
function(a){if(a.hasOwnProperty("errStatus"))if(200===a.errStatus){this._systemList=a.dataArray;for(a=this._systemList.length-1;0<=a;--a)this._systemList[a].value=this._systemList[a].id;this._buildSystemFilter();this._buildSystemAssigner()}else this._displayErrorMessages(a.errStatus,a.errMsg)}));this.own(a);return a},_buildAHACReportAssigner:function(){var b=this._getList("ReportTemplates").then(l.hitch(this,function(b){if(200===b.errStatus){b=b.templates;for(var c=b.length-1;0<=c;--c)b[c].value=
b[c].id,b[c].label=b[c].name;b.unshift({id:-1,name:this.webviewStrings.none,label:this.webviewStrings.none,value:-1});b=new a({data:b});this._reportTemplateAssigner=this._buildFilteringSelect(b,this.reportTemplateAssigner,this.webviewStrings.assignReportTemplate,"",!1);this._assigners.push(this._reportTemplateAssigner);this.own(q(this._reportTemplateAssigner,"change",l.hitch(this,this._onAssignerEnd,"reportTemplate")))}else this._displayErrorMessages(b.errStatus,b.errMsg)}));this.own(b);return b},
_buildTreeAssigner:function(){var b=this._getList("trees").then(l.hitch(this,function(b){if(200===b.errStatus){b=b.dataArray;for(var c=b.length-1;0<=c;--c)b[c].value=b[c].id,b[c].label=b[c].name;b.unshift({id:-1,name:this.webviewStrings.none,label:this.webviewStrings.none,value:-1});b=new a({data:b});this._treeAssigner=this._buildFilteringSelect(b,this.treeAssigner,this.webviewStrings.assignTree,"navigationTreeAssigner",!1);this._assigners.push(this._treeAssigner);this.own(q(this._treeAssigner,"change",
l.hitch(this,this._onAssignerEnd,"tree")))}else this._displayErrorMessages(b.errStatus,b.errMsg)}));this.own(b);return b},_createConnections:function(){this.own(q(this.selectAll.domNode,"click",l.hitch(this,this._toggleSelectAll)),q(this.schedulePermissions.domNode,"click",l.hitch(this,this._onSchedulePermissions)),q(this.deleteIcon.domNode,"click",l.hitch(this,this._onDeleteSelected)))},_displayErrorMessages:function(a,b){x.publish("error",{type:"sticky",message:b})},_getList:function(a){return u.get(a,
{handleAs:"json",preventCache:!0,query:{siteId:this.site}})},_onAssignerEnd:function(a,b){if(null!==b&&""!==b){var c=null,d=!1;switch(a){case "group":-1===b||-2===b?d=!0:c=this._homeGroupAssigner.store.get(b).value;this._homeGroupAssigner.set("value",null);break;case "myControl":c=this._myControlHomeGroupAssigner.store.get(b).value;this._myControlHomeGroupAssigner.set("value",null);break;case "reportTemplate":c=-1===b?null:this._reportTemplateAssigner.store.get(b).value;this._reportTemplateAssigner.set("value",
null);break;case "tree":c=-1===b?null:this._treeAssigner.store.get(b).value;this._treeAssigner.set("value",null);break;case "system":c=this._systemAssigner.get("value");if(0===c.length){d=!0;break}if(-1<c.indexOf("*")||c.length===this._systemList.length)c=[];this._systemAssigner.set("value",[]);break;case "roles":c=this._rolesAssigner.get("value"),0===c.length?d=!0:(c=-1<c.indexOf("*")?[]:c.map(function(a){return Number(a)}),this._rolesAssigner.set("value",[]))}if(!d&&null!==b)this.onAssignerEnd(a,
c)}},_onDeleteSelected:function(){!1===f.contains(this.deleteIcon.domNode,"disabled")&&(this.deleteIcon.tooltip.close(),this.onDeleteSelected())},_onResetUsers:function(){this.onResetUsers()},_onSchedulePermissions:function(){!1===f.contains(this.schedulePermissions.domNode,"disabled")&&(this.schedulePermissions.tooltip.close(),this.onSchedulePermissions())},_resetFilters:function(){this._systemFilter.set("value",[]);this.searchForm.reset()},_setFilter:function(){l.clone(this.filter);null!==this._systemFilter&&
(this.filter.systemsAssigned=this._systemFilter.get("value"));this.filter.search=this._searchString;this.onFilterChange(this.filter);f.toggle(this.clearAll,"hidden",""===this.filter.search&&0===this.filter.systemsAssigned.length)},_setFilterAttr:function(a){l.mixin(a,{search:this.filter.search});null!==this._systemFilter&&this._systemFilter.set("value",a.systemsAssigned);this.filter=a;this._setFilter()},_setSearch:function(a){this._searchString=""!==a.field?a.field+"\x3d~"+a.value+"~":"";this._setFilter()},
_toggleSelectAll:function(a){this._isSelectAll=!this._isSelectAll;f.toggle(this.selectAll.toolbarButtonIcon,"selectAllIcon");f.toggle(this.selectAll.toolbarButtonIcon,"deselectAllIcon");this.selectAll.tooltip.set("label",this._isSelectAll?this.webviewStrings.deselectAll:this.webviewStrings.selectAll);if(a)this.onSelectAll(this._isSelectAll)}})})},"webview/widget/ChecklistButton":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/CheckedMenuItem dijit/form/DropDownButton dijit/popup dojo dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/Evented dojo/has dojo/i18n!webview/nls/all dojo/on dojo/window rc/_base/util ./DijitMenu dojo/sniff".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y){return f("webview/widget/ChecklistButton",[m,p,a],{templateString:"\x3cdiv\x3e\x3c/div\x3e",label:v.choose,list:null,name:"","class":"checklist-button",saveAsArray:!1,disabled:!1,idProperty:"value",constructor:function(a){this.label=a.label||this.label;this.button=new h({label:this.label,dropDown:this.menu,openDropDown:r.hitch(this.button,this.openDropDown)});this.set("itemList",a.list||[]);this.valueNode=q.create("input",{type:"hidden",name:a.name||
this.name})},postCreate:function(){this.set("disabled",this.disabled);q.place(this.valueNode,this.domNode);q.place(this.button.domNode,this.domNode);this.button.startup();this.own(x(this.button,"click",r.hitch(this,this._onClickButton)));this.own(c.after(this.button,"closeDropDown",r.hitch(this,this.onClose),!0));this.own(x(this,"blur",r.hitch(this,function(){this.set("value",this.get("value"))})));this.own(x(this.button,"change",r.hitch(this,this.onChange)));this.own(x(this.menu,"itemClick",r.hitch(this,
function(){this.useAltValue=!1})));this.smi&&this.own(x(this.smi,"addCat",r.hitch(this,this.closeDD)))},_setItemListAttr:function(a){this.menu&&this.menu.destroyRecursive();this.menu=new y({onItemClick:this._onListItemClick});this.list=a;this.listMap={};l.forEach(this.list,function(a){this.listMap[a.value]=a.name;var b=new k({label:z.escapeHtml(a.name),value:a.value||a.id,checked:a.checked?a.checked:!1});if("*"===a.value)b.on("click",r.hitch(this,this.onAnySelect));else b.on("click",r.hitch(this,
this.notAny));this.menu.addChild(b)},this);this.button.set("dropDown",this.menu)},_setDisabledAttr:function(a){this.disabled=a;this.button.set("disabled",a)},_getDisabledAttr:function(){return this.disabled},closeDD:function(){this.button.closeDropDown()},onEditEnd:function(){this.emit("editEnd",this._getSelectedItems(this.idProperty))},onEdit:function(){this.emit("edit")},_onClickButton:function(a){if(this.menu.isShowingNow)this.onEdit(this.get(this.idProperty));else this.onClose()},onClose:function(){this.updateLabel();
this.onEditEnd();this.emit("close")},onAnySelect:function(){this.selectAll();this.updateLabel();this.closeDD()},notAny:function(a){a&&(this.updateLabel(),this.onNotAny())},onNotAny:function(){this.emit("notAny")},updateLabel:function(){var a=this.get(this.idProperty);0!==a.length?this.button.set("label",a.length+" "+this.name+" "+v.selected):this.button.set("label",this.label)},_onListItemClick:function(a,b){"undefined"===typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled)return!1;
a.popup?this._openPopup("keypress"==b.type):a._onClick?a._onClick(b):a.onClick(b)},focus:function(){this.inherited(arguments);this.button.openDropDown();this.button.dropDown.focus()},_getValueAttr:function(){return!0===this.useAltValue?this.altValue:this._getSelectedItems(this.idProperty)},_setValueAttr:function(a){r.isArray(a)||(a=[]);this.altValue=r.clone(a);for(var b=0;b<a.length;b++)if(void 0===this.listMap[a[b]]){this.useAltValue=!0;break}b=this.button.dropDown.getChildren();l.forEach(b,function(b){var c=
void 0!==b.label?b.label:b.get(this.idProperty).toString();a.length&&c?l.some(a,function(d,n){return 0===c.indexOf(d)&&c.length===d.length||b.value.toString()===d.toString()?(b.set("checked",!0),a.splice(n,1),!0):!1},this)||b.set("checked",!1):b.set("checked",!1)},this);this.updateLabel()},_getSelectedAttr:function(){return this._getSelectedItems(this.idProperty)},_getSelectedItems:function(a){var b=l.map(this.button.dropDown.getChildren(),function(b){return b.get("checked")?z.unescapeHtml(b[a]):
null});return b=l.filter(b,function(a){return null!=a&&""!=a})},clearAll:function(){var a=this.button.dropDown.getChildren();l.forEach(a,function(a){a.set("checked",!1)});this.updateLabel()},selectAll:function(){var a=this.button.dropDown.getChildren();l.forEach(a,function(a){a.set("checked",!0)})},toggleSpecific:function(a){var b=this.button.dropDown.getChildren();l.forEach(b,function(b){b.value===a&&b.set("checked",!1)})},setMultiple:function(a,b){var c=this.button.dropDown.getChildren();l.forEach(c,
function(c){-1!==a.indexOf(c.value)?c.set("checked",b):c.set("checked",!b)});this.updateLabel()},destroy:function(){this.inherited(arguments);l.forEach([this.menu,this.button],function(a){a&&a.destroy()})},openDropDown:function(){var a=this.dropDown,c=a.domNode,d=this._aroundNode||this.domNode,f=this,q=g.open({parent:this,popup:a,around:d,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){f.closeDropDown(!0)},onCancel:function(){f.closeDropDown(!0)},onClose:function(){b.set(f._popupStateNode,
"popupActive",!1);t.remove(f._popupStateNode,"dijitHasDropDownOpen");f._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&d.offsetWidth>a._popupWrapper.offsetWidth){var d=d.offsetWidth-a._popupWrapper.offsetWidth,v={w:a.domNode.offsetWidth+d};this._origStyle=c.style.cssText;r.isFunction(a.resize)?a.resize(v):u.setMarginBox(c,v);"R"==q.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-d+"px")}b.set(this._popupStateNode,"popupActive","true");t.add(this._popupStateNode,
"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===c.getAttribute("role")||c.getAttribute("aria-labelledby")||c.setAttribute("aria-labelledby",this.id);n("touch")&&!n("ios")&&(c=w.getBox(),d=u.getMarginBox(a._popupWrapper),u.setMarginBox(a._popupWrapper,{l:eval(d.l-c.l),t:eval(d.t-c.t)}));return q}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class",
"./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(p,m,k,h){return p("dijit.CheckedMenuItem",k,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:h,checked:!1,_setCheckedAttr:function(g){this.domNode.setAttribute("aria-checked",g?"true":"false");this._set("checked",g)},iconClass:"",role:"menuitemcheckbox",checkedChar:"\x26#10003;",onChange:function(){},_onClick:function(g){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(g)}})})},
"webview/widget/DijitMenu":function(){define(["dojo/_base/declare","dijit/Menu"],function(p,m){return p("webview/widget/DijitMenu",m,{_onKeyPress:function(k){if(!k.ctrlKey&&!k.altKey)switch(k.charOrCode){case this._openSubMenuKey:this._moveToPopup(k);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1)}}})})},"webview/admin/roles/RoleLoginInfo":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/hash dojo/i18n!rc/nls/all dojo/i18n!../../nls/afterHoursReport dojo/i18n!../../nls/all dojo/i18n!../../nls/roles dojo/io-query dojo/json dojo/on dojo/promise/all dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string dojo/topic dojo/text!./templates/RoleLoginInfo.html rc/_base/util rc/util/notices ../_Widget ../../widget/UserTag ../../widget/ChecklistButton dijit/form/CheckBox dijit/form/Form dijit/form/FilteringSelect dijit/form/RadioButton ./RoleToolbar ./widget/RoleLoginGroupSelectors ../widget/AdminToolbar ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E){return m("webview/admin/roles/RoleLoginInfo",[C],{_SETUP_TIMEOUT:200,ahacStrings:r,rcStrings:f,roleStrings:b,templateString:y,webviewStrings:c,_ahacStore:null,_dirtyListeners:[],_checkBoxListeners:[],_systemStore:null,_navigationTreeStore:null,_newRoleDefaults:{ahacReportTemplateId:null,isScheduleRestricted:!1,myControlGroupMnemonic:null,myControlSystemRedirect:null,navigationGroup:null,navTree:null,redirectSystem:!0,settingsMask:0,systemGroupMnemonic:null,
systemRedirect:null,systemsAssigned:[]},_settingsStore:null,constructor:function(){k.mixin(this.ErrorMessageMap,{502:this.roleStrings.roleDoesNotExist})},buildRendering:function(){this.inherited(arguments);this._buildSettingsStore();this._buildSelectorStores()},postCreate:function(){var b=sessionStorage.getItem("roleId");if(b){var c=window.location.hash;sessionStorage.removeItem("roleId");(b=((c.match("roleId\x3d-1")||"").input||"").replace("roleId\x3d-1","roleId\x3d"+b))&&l(b)}sessionStorage.removeItem("roleIds");
rc.session.hasRole(rc.session.roles.usersAdmin,!1)?(b=a(this._fetchDataForStores()),this._createViews(),this._isNewRole()?(this.buttonBar.disableAll(),d.add(this.buttonBar.domNode,"hidden")):this._connectToToolbar(),b.then(k.hitch(this,this._storesPopulated),k.hitch(this,this._onInitError))):this._throwFullscreenError({name:this.rcStrings.permissionDenied,message:w.substitute(this.rcStrings.notAuthToViewX,[this.roleStrings.roleLoginInfo]),suggestion:this.errorStrings.contactAdmin,e:null})},_getSettingsMaskAttr:function(){var a=
0,b=this._settingsStore;p.forEach(Object.keys(b),k.hitch(this,function(c){c=b[c];c.checkbox.get("checked")&&(a|=c.mask)}));return a},_setNameAttr:function(a){this._set("name",a)},_setPermittedSystemsAttr:function(a){var b;0<a.length?(this._systemCBList.setMultiple(a,!0),b=this._systemStore.query(function(b){return a.includes(b.id)})):b=this._systemStore.query();this._loginGroupSelectors.updateSystemsList(b);this._set("permittedSystems",a);this._buildSystemTags()},_setSettingsMaskAttr:function(a){this._cleanupCheckBoxListeners();
p.forEach(Object.keys(this._settingsStore),k.hitch(this,function(b){var c=this._settingsStore[b],d=(a&c.mask)===c.mask;switch(b){case "enabled":d?(this.enabledRadioButton.set("checked",!0),this.enabledRadioButton.focus()):(this.disabledRadioButton.set("checked",!0),this.disabledRadioButton.focus());break;default:c.checkbox.set("checked",d)}}));this._setupCheckBoxListenersOnTimeOut()},makeClean:function(){this.inherited(arguments);this.buttonBar&&this.buttonBar.set("dirty",!1)},makeDirty:function(){this.inherited(arguments);
this.buttonBar&&this.buttonBar.set("dirty",!0)},onStartWizard:function(){this.inherited(arguments);d.add(this.permittedSchedulesContainer,"hidden");d.add(this.forceSchedulesContainer,"hidden")},wizardOnNextFunction:function(a){A.stopEvent(a);this._validate().then(k.hitch(this,function(){var a=this._getDataForSave();n.post("AddRole",{handleAs:"json",data:{siteId:this.site,roleMask:this.get("roleMask"),roleMask2:this.get("roleMask2"),roleName:this.get("name"),extraPermission:this.get("extraPermission"),
roleInfo:q.stringify(a)}}).then(k.hitch(this,function(a){a.errStatus===this.SuccessCode?(this.makeClean(),rc.setupWizard.wizardMemoryValue=a.roleId,rc.setupWizard.next()):this._displayError(a)}),k.hitch(this,this._requestError))}))},_validate:function(){var a=new h,b=this._loginGroupSelectors.validate();b?(z.publish("sticky",{type:"error",message:b}),a.reject()):a.resolve();return a},_setupCheckBoxListenersOnTimeOut:function(){setTimeout(k.hitch(this,this._setupCheckBoxListeners),this._SETUP_TIMEOUT)},
_setupCheckBoxListeners:function(){p.forEach(Object.keys(this._settingsStore),k.hitch(this,function(a){var b=this._settingsStore[a];switch(a){case "enabled":this._checkBoxListeners.push(u(this.enabledRadioButton,"change",k.hitch(this,this.makeDirty)));this._checkBoxListeners.push(u(this.disabledRadioButton,"change",k.hitch(this,this.makeDirty)));break;default:this._checkBoxListeners.push(u(b.checkbox,"change",k.hitch(this,this.makeDirty)))}}))},_autoEnableSetting:function(a){(a=this._settingsStore[a])&&
a.checkbox&&a.checkbox.set("checked",!0)},_buildPermittedSystemSelector:function(){this._systemCBList=new E({list:[{name:this.webviewStrings.allSystems,value:"*"}].concat(this._systemStore.data.map(function(a){return{name:a.name,value:a.id}})),baseClass:"role-permitted-systems hidden"},this.permittedSystemsSelector);this.own(u(this.permittedSystemsNode,"click",k.hitch(this,this._showPermittedSystemsSelector)),u(this.permittedSchedules,"click",k.hitch(this,this._showPermittedSchedulesSelection)),u(this._systemCBList,
"editEnd",k.hitch(this,this._permittedSystemsChanged)))},_buildSelectorStores:function(){this._navigationTreeStore=new x(new v({data:[{id:-1,name:"None"}]}));this.navTreeSelector.set({store:this._navigationTreeStore,value:-1});this._ahacStore=new x(new v({data:[{id:-1,name:"None"}]}));this.ahacSelector.set({store:this._ahacStore,value:-1});this._systemStore=new x(new v)},_buildSettingsStore:function(){this._settingsStore={enabled:{mask:1,checkbox:this.enabledRadioButton},navigationTree:{mask:2,checkbox:this.navTreeCB},
ahacTemplate:{mask:4,checkbox:this.ahacCB},homeGroup:{mask:8,checkbox:this._loginGroupSelectors.homeGroupCB},myControlGroup:{mask:16,checkbox:this._loginGroupSelectors.myControlGroupCB},permittedSystems:{mask:32,checkbox:this.permittedSystemsCB},forceSystems:{mask:256,checkbox:this.forceSystemsCB},permittedSchedules:{mask:64,checkbox:this.permittedSchedulesCB},forceSchedules:{mask:128,checkbox:this.forceSchedulesCB}}},_buildSystemTags:function(){for(;this.systemTags.firstChild;)this.systemTags.removeChild(this.systemTags.firstChild);
0===this.permittedSystems.length?g.set(this.systemTags,"innerHTML",this.webviewStrings.allSystems):this.permittedSystems.forEach(k.hitch(this,function(a){if(a=this._systemStore.get(a))a=new D({value:a.id,name:a.name,title:a.name}),this.own(u(a,"clickRemove",k.hitch(this,this._tagRemoved,a))),this.systemTags.appendChild(a.domNode)}))},_connectToToolbar:function(){this.own(u(this.buttonBar,"cancel",k.hitch(this,this._reload)),u(this.buttonBar,"save",k.hitch(this,this._save)))},_createViews:function(){this.loginInfoArea.setMainContent(this.loginInfoContainer.domNode)},
_fetch:function(){return n.get("role",{handleAs:"json",preventCache:!0,query:{id:this.roleId}})},_fetchDataForStores:function(){var a=[];[{path:"trees",dataObject:"dataArray",store:this._navigationTreeStore},{path:"ReportTemplates",dataObject:"templates",store:this._ahacStore},{path:"Systems",dataObject:"dataArray",store:this._systemStore}].forEach(k.hitch(this,function(b){b=n.get(b.path,{handleAs:"json",preventCache:!0,query:{siteId:this.site}}).then(k.hitch(this,function(a,b){b.errStatus===this.SuccessCode?
b[a.dataObject].forEach(k.hitch(this,function(b){a.store.add(b)})):this._displayError(b)},b),k.hitch(this,this._requestError));a.push(b)}));return a},_getDataForSave:function(){var a={ahacReportTemplateId:this.ahacSelector.get("value"),navTree:this.navTreeSelector.get("value"),settingsMask:this.get("settingsMask"),systemsAssigned:this.permittedSystems};k.mixin(a,this._loginGroupSelectors.get("value"));return a},_getRoleDetailsFromCookie:function(){var a=null;null!==rc.setupWizard&&"undefined"!==typeof rc.setupWizard&&
(a=rc.setupWizard.getStepParamsFromCookie(window.location.hash))&&(a.errStatus=this.SuccessCode,a.loginInfo=this._newRoleDefaults,this.set("extraPermission",a.extraPermission));return a},_isNewRole:function(){return-1===this.roleId},_parseFetch:function(a){if(a.errStatus===this.SuccessCode){this.makeClean();this._cleanupDirtyListeners();var b=a.loginInfo;this.set({name:a.roleName,roleMask:a.roleMask,roleMask2:a.roleMask2,settingsMask:b.settingsMask,permittedSystems:b.systemsAssigned});this.shouldSetContext&&
0<this.roleId&&webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#Role"+this.roleId}],this.name);this.navTreeSelector.set("value",b.navTree||-1);this.ahacSelector.set("value",b.ahacReportTemplateId||-1);this._loginGroupSelectors.set("value",b);a=b.isScheduleRestricted?this.webviewStrings.view:this.webviewStrings.allBlocks;this._setupDirtyListeners();g.set(this.permittedSchedules,"innerHTML",a)}else this._displayError(a)},_permittedSystemsChanged:function(){var a=this._systemCBList.get("selected");
-1===a.indexOf("*")&&a.length!==this._systemStore.data.length||this._systemCBList.clearAll();a=this._systemCBList.get("selected").filter(function(a){return"*"!==a}).map(function(a){return Number(a)});A.arraysAreSame(this.permittedSystems,a)||(this.set("permittedSystems",a),this._autoEnableSetting("permittedSystems"),this.makeDirty());d.add(this._systemCBList.domNode,"hidden");d.remove(this.permittedSystemsNode,"hidden")},_reload:function(){this._fetch().then(k.hitch(this,this._parseFetch),k.hitch(this,
this._requestError))},_cleanupDirtyListeners:function(){for(var a=this._dirtyListeners.length-1;this._dirtyListeners.length;)this._dirtyListeners[a].remove&&this._dirtyListeners[a].remove(),this._dirtyListeners.splice(a,1),--a;this._dirtyListeners=[]},_cleanupCheckBoxListeners:function(){for(var a=this._checkBoxListeners.length-1;this._checkBoxListeners.length;)this._checkBoxListeners[a].remove&&this._checkBoxListeners[a].remove(),this._checkBoxListeners.splice(a,1),--a;this._checkBoxListeners=[]},
_requestError:function(a){this._displayError({errMSG:a.message,errStatus:504})},_save:function(){this._validate().then(k.hitch(this,function(){var a=this._getDataForSave();B.widget.clear();n.put("Role/logininfo",{handleAs:"json",data:{siteId:this.site,roleId:this.roleId,roleMask:this.get("roleMask"),roleMask2:this.get("roleMask2"),roleInfo:q.stringify(a)}}).then(k.hitch(this,function(a){a.errStatus===this.SuccessCode&&this._reload();this._displayError(a)}),k.hitch(this,this._requestError))}))},_setupControlsWithSystems:function(){this._buildPermittedSystemSelector();
return this._loginGroupSelectors.initializeWithSystems(this._systemStore)},_setupDirtyListeners:function(){setTimeout(k.hitch(this,function(){this._dirtyListeners.push(u(this.navTreeSelector,"change",k.hitch(this,function(){this._autoEnableSetting("navigationTree");this.makeDirty()})));this._dirtyListeners.push(u(this.ahacSelector,"change",k.hitch(this,function(){this._autoEnableSetting("ahacTemplate");this.makeDirty()})));this._dirtyListeners.push(u(this._loginGroupSelectors,"change",k.hitch(this,
function(){this.makeDirty()})))}),200)},_showPermittedSchedulesSelection:function(){var a={site:this.site,userIds:[this.roleId],username:this.name,isRole:!0};sessionStorage.setItem("roleIds",this.roleId);a="Users/PermittedSchedules?"+t.objectToQuery(a);l(a)},_showPermittedSystemsSelector:function(){d.remove(this._systemCBList.domNode,"hidden");d.add(this.permittedSystemsNode,"hidden");this._systemCBList.focus()},_storesPopulated:function(){this._setupControlsWithSystems().then(k.hitch(this,function(){this._isNewRole()?
(d.remove(this.wizardNextContainer,"hidden"),this.own(u(this.wizardNextButton,"click",k.hitch(this,this.wizardOnNextFunction))),this.defer(k.hitch(this,function(){this.onInitSuccess();var a=this._getRoleDetailsFromCookie();null!==a&&(this._parseFetch(a),this.makeDirty())}),250)):this._fetch().then(k.hitch(this,function(a){this._parseFetch(a);this.onInitSuccess()}))}))},_tagRemoved:function(a,b){var c=this.permittedSystems.indexOf(b.value);this.permittedSystems.splice(c,1);a.destroy();0===this.permittedSystems.length&&
(g.set(this.systemTags,"innerHTML",this.webviewStrings.allSystems),this._systemCBList.clearAll());this.set("permittedSystems",this.permittedSystems);this._autoEnableSetting("permittedSystems");this.makeDirty()},destroy:function(){this.inherited(arguments);this._cleanupDirtyListeners();this._dirtyListeners=null}})})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(p,m,k,h,g,d,l,f){return p("dijit.form.Form",[g,d,l,f],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(d){m.set(this.domNode,
"encType",d);h("ie")&&(this.domNode.encoding=d);this._set("encType",d)},reset:function(d){var c={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:d?d.target:this.domNode,target:d?d.target:this.domNode};!1!==this.onReset(c)&&c.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(d){this.reset(d);d.stopPropagation();d.preventDefault();return!1},_onSubmit:function(d){var c=this.constructor.prototype;if(this.execute!=
c.execute||this.onExecute!=c.onExecute)k.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(d)&&(d.stopPropagation(),d.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"webview/admin/roles/widget/RoleLoginGroupSelectors":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!webview/nls/all dojo/on dojo/text!./templates/RoleLoginGroupSelectors.html ../../users/widget/LoginGroupSelectors dijit/form/CheckBox ../../widget/LoginGroupSelectors/HomeGroupSelector ../../widget/LoginGroupSelectors/SystemGroupSelector".split(" "),
function(p,m,k,h,g,d){return p("webview/admin/roles/widget/LoginGroupSelectors",[d],{templateString:g,_selectorListeners:[],constructor:function(){this.webviewStrings=k},validate:function(){var d=null;this.homeGroupCB.get("checked")&&(d=this._homeGroupSelectors.validate());null===d&&this.myControlGroupCB.get("checked")&&(d=this._myControlGroupSelectors.validate());return d},_setupDirtyListeners:function(){this.own(h(this._homeGroupSelectors,"groupsLoaded",m.hitch(this,function(){this.own(h(this._homeGroupSelectors,
"change",m.hitch(this,this._onHomeGroupChange)))})));this.own(h(this._myControlGroupSelectors,"groupsLoaded",m.hitch(this,function(){this.own(h(this._myControlGroupSelectors,"change",m.hitch(this,this._onMyControlChange)))})))},_onHomeGroupChange:function(d){null===this._homeGroupSelectors.validate()&&this.homeGroupCB.set("checked",!0);this.onChange(d)},_onMyControlChange:function(d){null===this._myControlGroupSelectors.validate()&&this.myControlGroupCB.set("checked",!0);this.onChange(d)}})})},"webview/admin/users/widget/LoginGroupSelectors":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/i18n!webview/nls/all dojo/on dojo/promise/all dojo/text!./templates/LoginGroupSelectors.html ../../widget/LoginGroupSelectors/HomeGroupSelector ../../widget/LoginGroupSelectors/SystemGroupSelector ../../../widget/RoleIcon".split(" "),
function(p,m,k,h,g,d,l,f,r){return h("webview/admin/users/widget/LoginGroupSelectors",[m,p,k],{_initailLoadDeferred:null,_homeGroupPath:"tree/objects/groups",_myControlGroupPath:"tree/objects/myControlGroups",_systemStore:null,templateString:r,constructor:function(){this.webviewStrings=d},onChange:function(){},_getValueAttr:function(){return g.mixin(this._getHomeGroupValues(),this._getMyControlGroupValues())},_setValueAttr:function(c){this._homeGroupSelectors.set("value",c);this._myControlGroupSelectors.set("value",
{systemRedirect:c.myControlSystemRedirect,systemGroupMnemonic:c.myControlGroupMnemonic});this._setupDirtyListeners()},initializeWithSystems:function(c){this._systemStore=g.clone(c);this._homeGroupSelectors.initializeWithSystems(this._systemStore);this._myControlGroupSelectors.initializeWithSystems(this._systemStore);return this._waitForGroupsToLoad()},updateSystemsList:function(c){this._systemStore.setData(c);this.own(l.once(this._homeGroupSelectors,"selectionInvalidated",g.hitch(this,this._onChange)),
l.once(this._myControlGroupSelectors,"selectionInvalidated",g.hitch(this,this._onChange)));this._homeGroupSelectors.resetSystemSelection();this._myControlGroupSelectors.resetSystemSelection()},validate:function(){return this._homeGroupSelectors.validate()||this._myControlGroupSelectors.validate()},_getHomeGroupValues:function(){return this._homeGroupSelectors.get("value")},_getMyControlGroupValues:function(){var c=this._myControlGroupSelectors.get("value");return{myControlSystemRedirect:c.systemRedirect,
myControlGroupMnemonic:c.systemGroupMnemonic}},_onChange:function(c){this.onChange(c)},_setupDirtyListeners:function(){this.own(l(this._homeGroupSelectors,"groupsLoaded",g.hitch(this,function(){this.own(l(this._homeGroupSelectors,"change",g.hitch(this,this._onChange)))})));this.own(l(this._myControlGroupSelectors,"groupsLoaded",g.hitch(this,function(){this.own(l(this._myControlGroupSelectors,"change",g.hitch(this,this._onChange)))})))},_waitForGroupsToLoad:function(){return f([this._homeGroupSelectors.get("loadedDeferred"),
this._myControlGroupSelectors.get("loadedDeferred")])}})})},"webview/admin/widget/LoginGroupSelectors/HomeGroupSelector":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/on dojo/promise/all dojo/store/Memory dojo/store/Observable dojo/text!./templates/HomeGroupSelector.html ./SystemGroupSelector rc/_base/util dijit/form/Button dijit/form/RadioButton".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t){return p("webview/admin/widget/LoginGroupSelectors/HomeGroupSelector",
[b],{templateString:c,_defaultNavGroup:-1,_navGroupLoadDeferred:null,_navGroupStore:null,_redirectSystem:!1,postCreate:function(){this._navGroupLoadDeferred=new k;this._navGroupStore=new r(new f);this._fetchNavigationGroups();this._waitForAllGroupsToLoad().then(m.hitch(this,function(){this._setView()}));this.inherited(arguments)},_getLoadedDeferredAttr:function(){return this._waitForAllGroupsToLoad()},_getNavigationGroupAttr:function(){return this._hasNavGroups()?this.navGroupSelector.get("value"):
this._defaultNavGroup},_setRedirectSystemAttr:function(b){this._set("_redirectSystem",b);this._toggleHomeGroupOptions(b)},_getValueAttr:function(){return{redirectSystem:this._redirectSystem||!this._hasNavGroups(),systemRedirect:this.get("selectedSystem"),systemGroupMnemonic:this.get("selectedGroupMnemonic"),navigationGroup:this.get("navigationGroup")}},_setValueAttr:function(b){this.inherited(arguments);this.set("redirectSystem",b.redirectSystem);this.navGroupSelector&&null!==b.navigationGroup&&-1<
b.navigationGroup&&(this.navGroupSelector.set("value",b.navigationGroup),this._dirtyListeners.push(d(this.navGroupSelector,"change",m.hitch(this,function(b,a){a!==b&&this._onChange()},b.navigationGroup))));this._addGroupTypeToggleListeners()},validate:function(){var b=null;if(!this._hasNavGroups()||this.sysGroupRadioButton.get("checked"))b=this.inherited(arguments);return b},_addGroupTypeToggleListeners:function(){this._dirtyListeners.push(d(this.navGroupRadioButton,"change",m.hitch(this,function(b){b&&
(this.set("redirectSystem",!1),this._onChange())})));this._dirtyListeners.push(d(this.sysGroupRadioButton,"change",m.hitch(this,function(b){b&&(this.set("redirectSystem",!0),this._onChange())})))},_addNavGroupClicked:function(){var b="navgroups?site\x3d"+encodeURIComponent(this.site);rc.setupWizard?rc.setupWizard.warn().then(m.hitch(this,this._wizardWarningClosed,b)):this._goToPage(b)},_createNavGroupSelection:function(){this.navGroupSelector=this._createSelector(this._navGroupContainer,this._navGroupStore,
this._getFirstNavGroupId());h.set(this._navGroupLabel,"for",this.navGroupSelector.id)},_fetchNavigationGroups:function(){var b=rc.xhr.request({type:"rest",method:"GET",path:"navGroups",siteId:this.site});this.own(b);b.then(m.hitch(this,this._parseNavigationGroupResponse),m.hitch(this,this._navigationGroupRequestFailed)).always(m.hitch(this,this._navigationGroupRequestCompleted))},_getFirstNavGroupId:function(){return this._getFirstStoreItemId(this._navGroupStore,"id")},_hasNavGroups:function(){return null!==
this._navGroupStore&&1<=this._navGroupStore.data.length},_navigationGroupRequestCompleted:function(){this._navGroupLoadDeferred.resolve()},_navigationGroupRequestFailed:function(b){console.error(this.declaredClass+" : Error Occurred getting navigation groups",b)},_parseNavigationGroupResponse:function(b){var c=b.data.dataArray.map(function(a){a.name=t.unescapeHtml(a.name);return a});this._responseDataHasNavigationGroups(b.data)&&(this._navGroupStore.setData(c),this._createNavGroupSelection(b.data.dataArray))},
_responseDataHasNavigationGroups:function(b){return b&&b.dataArray&&0<b.dataArray.length},_setView:function(){var b=this._hasNavGroups(),c=this._hasGroups(),a=this._hasSystems();a?(c||this._warnNoGroups(),b||this._hideNavGroups(),this.set("redirectSystem",this._redirectSystem&&a)):this._warnNoSystems();this._showGroupTypeRadios(a&&b)},_showGroupTypeRadios:function(b){this._set("_hasRadioOptions",b);g.toggle(this.loginSelector,"hidden",!b)},_toggleHomeGroupOptions:function(b){this._hasRadioOptions&&
(this.navGroupRadioButton.set("checked",!b),this.sysGroupRadioButton.set("checked",b),g.toggle(this._navGroupPane,"hidden",b),g.toggle(this._systemGroupPane,"hidden",!b))},_waitForAllGroupsToLoad:function(){return l([this._groupsLoadedDeferred,this._navGroupLoadDeferred])},_hideNavGroups:function(){g.add(this._navGroupSelectorContainer,"hidden")},destroy:function(){this._cleanupDirtyListeners();this.inherited(arguments)}})})},"webview/admin/widget/LoginGroupSelectors/SystemGroupSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/FilteringSelect dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/hash dojo/i18n!webview/nls/all dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/SystemGroupSelector.html dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){return g("webview/admin/widget/LoginGroupSelectors/SystemGroupSelector",[m,p,k],{INVALID_SELECTION:-1,DEFAULT_GROUP:"1GRP1",site:"",templateString:a,_dirtyListeners:null,_groupPath:null,_groupSelector:null,_groupStore:null,_groupsLoadedDeferred:null,_groupToSelect:null,_homeGroupRequiredMessage:null,_invalidGroupMessage:null,_invalidSystemMessage:null,_systemRedirect:null,_systemSelector:null,_systemStore:null,constructor:function(){this.webviewStrings=b;this._groupsLoadedDeferred=
new l;this._groupStore=new u(new q({idProperty:"mne"}));this._dirtyListeners=[]},_getLoadedDeferredAttr:function(){return this._groupsLoadedDeferred},_getSelectedGroupMnemonicAttr:function(){return this._hasGroups()?this._groupSelector.get("value"):this.INVALID_SELECTION},_getSelectedSystemAttr:function(){return this._systemRedirect||this.INVALID_SELECTION},_setSystemStoreAttr:function(a){this._set("_systemStore",a)},_getValueAttr:function(){return{systemRedirect:this.get("selectedSystem"),systemGroupMnemonic:this.get("selectedGroupMnemonic")}},
_setValueAttr:function(a){this._cleanupDirtyListeners();this._groupToSelect=a.systemGroupMnemonic;this.set("systemRedirect",a.systemRedirect);this._dirtyListeners.push(t(this._systemSelector,"change",d.hitch(this,this._onSystemSelectionChanged)))},_setSystemRedirectAttr:function(a){if(this._hasSystems()){if(!this._doesStoreContainValue(this._systemStore,a)){if(0<a||null===a)this._groupToSelect=this.INVALID_SELECTION;a=this._getFirstSystemId()}this._set("_systemRedirect",a);this._systemSelector.set("value",
a);this._fetchGroupsForSystem()}else this._groupsRequestCompleted()},initializeWithSystems:function(a){this.set("systemStore",a);this._createSystemSelector();this.resetSystemSelection();0===a.data.length&&this._warnNoSystems()},onChange:function(){},onGroupsLoaded:function(){},onSelectionInvalidated:function(){},resetSystemSelection:function(){this._isSelectedSystemValid()||(this._groupToSelect=this.INVALID_SELECTION,this.set("systemRedirect"))},validate:function(){var a=null;this._hasSystems()&&
(this._isSelectedSystemValid()?this._isSelectedGroupValid()||(a=this._invalidGroupMessage):a=this._invalidSystemMessage);return a},_addSystemClicked:function(){var a="systems?site\x3d"+encodeURIComponent(this.site);rc.setupWizard?rc.setupWizard.warn().then(d.hitch(this,this._wizardWarningClosed,a)):this._goToPage(a)},_cleanupDirtyListeners:function(){if(null!==this._dirtyListeners)for(var a=this._dirtyListeners.length-1;this._dirtyListeners.length;)this._dirtyListeners[a].remove(),this._dirtyListeners.splice(a,
1),a--;else this._dirtyListeners=[]},_clearGroupStore:function(){null!==this._groupStore&&this._groupStore.setData([])},_createSelector:function(a,b,c){return new h({title:"",store:b,searchAttr:"name",autoComplete:!1,queryExpr:"*${0}*",required:!1,baseClass:"rcSelectBox form-input",labelAttr:"name",value:c},a)},_createGroupSelector:function(){this._groupSelector=this._createSelector(this._groupContainer,this._groupStore,this._getFirstGroupMnemonic());f.set(this._groupLabel,"for",this._groupSelector.id)},
_createSystemSelector:function(){this._systemSelector=this._createSelector(this._systemContainer,this._systemStore,this._getFirstSystemId());f.set(this._systemLabel,"for",this._systemSelector.id)},_doesStoreContainValue:function(a,b){return 0<a.data.length&&"undefined"!==typeof a.get(b)},_fetchGroupsForSystem:function(){this._clearGroupStore();this.own(rc.xhr.request({path:this._groupPath,type:"rest",method:"GET",systemId:this._systemRedirect}).then(d.hitch(this,this._parseGroupsFetchResponce),d.hitch(this,
this._groupsRequestFailed)).always(d.hitch(this,this._groupsRequestCompleted)))},_getFirstSystemId:function(){return this._getFirstStoreItemId(this._systemStore,"id")},_getFirstGroupMnemonic:function(){return this._getFirstStoreItemId(this._groupStore,"mne")},_getFirstStoreItemId:function(a,b){return 0<a.data.length?a.data[0][b]:this.INVALID_SELECTION},_goToPage:function(a){c(a)},_groupsResponceDataHasGroups:function(a){return a&&a.groups&&0<a.groups.length},_groupsRequestCompleted:function(){this._groupsLoadedDeferred.resolve();
this.onGroupsLoaded()},_groupsRequestFailed:function(a){this._warnNoGroups();a instanceof Error&&"cancel"===a.dojoType?console.error(this.declaredClass+"Canceled getting groups"):console.error(this.declaredClass+" : Error Occurred getting groups",a)},_hasGroups:function(){return null!==this._groupStore&&1<=this._groupStore.data.length},_hasSystems:function(){return null!==this._systemStore&&1<=this._systemStore.data.length},_hideFields:function(a,b){r.add(a,"hidden");r.remove(b,"hidden")},_initializeGroups:function(a){this._showGroupsSelector();
this._groupStore.setData(a);null===this._groupSelector&&this._createGroupSelector();this._selectGroup()},_isSelectedGroupValid:function(){return this._doesStoreContainValue(this._groupStore,this.get("selectedGroupMnemonic"))},_isSelectedSystemValid:function(){return this._doesStoreContainValue(this._systemStore,this.get("selectedSystem"))},_onChange:function(){this.onChange(this.get("value"))},_onGroupSelectionChanged:function(a){null!==this._groupToSelect&&this._groupToSelect!==a&&""!==a&&this._onChange()},
_onSystemSelectionChanged:function(a){this._systemRedirect===a||isNaN(a)||(this._groupToSelect=null,this.set("systemRedirect",a),this._onChange())},_parseGroupsFetchResponce:function(a){this._groupsResponceDataHasGroups(a.data)?this._initializeGroups(a.data.groups):this._warnNoGroups()},_selectGroup:function(){var a=this._groupToSelect;a===this.INVALID_SELECTION||this._doesStoreContainValue(this._groupStore,a)||(a=this._getFirstGroupMnemonic());this._groupSelector.set("value",a);if(rc.setupWizard)this._groupToSelect=
this._getFirstGroupMnemonic(),this._groupSelector.set("value",this._groupToSelect);else if(a===this.INVALID_SELECTION)this.onSelectionInvalidated(this.get("value"));this._dirtyListeners.push(t(this._groupSelector,"change",d.hitch(this,this._onGroupSelectionChanged)))},_warnNoGroups:function(){this._hideFields(this._groupSelectorContainer,this.noSystemGroups)},_showGroupsSelector:function(){r.remove(this._groupSelectorContainer,"hidden");r.add(this.noSystemGroups,"hidden")},_warnNoSystems:function(){this._hideFields(this._selectorsContainer,
this.noSystemNoGroups)},_wizardWarningClosed:function(a,b){b.navigate&&this._goToPage(a)},destroy:function(){this.inherited(arguments);this._cleanupDirtyListeners()}})})},"webview/admin/sites/Sites":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/json dojo/on dojo/text!webview/admin/sites/templates/sites.html dojo/topic ../_base ../../widget/WarningDialogEnums".split(" "),function(p,m,k,h,g,d,l,f,r,c){return m("webview/admin/sites/Sites",[r],{_path:"sites/",
templateString:l,nameOfIndividual:"site",auditLogObjectName:"Site",_deleteSite:function(b){rc.xhr.request({type:"rest",method:"DELETE",path:this._path,params:g.stringify(this._buildDeleteParams([b.site]))}).then(k.hitch(this,function(b){200===b.data.errStatus?(this.createDataArray(b.data),f.publish("updateNavTree")):b.data.errMsg?this._displayErrorMessage(b.data.errMsg):console.error(this.declaredClass+" - _deleteSite(): Data returned is null",b)}))},_onDeleteItem:function(){var b=this._multiSelect.getSelectedItems();
this.showConfirmationDialog(b);var f=d(this.confirmDeleteDialog,"close",k.hitch(this,function(d){switch(d){case c.returnValues.oneOrYes:h.replace(this.deleteButton.iconNode,"waiting","rcIcon");var q=[];p.forEach(b,k.hitch(this,function(a){q.push(a.value)}));d={type:"rest",method:"DELETE",path:this._path,params:g.stringify(this._buildDeleteParams(q))};d=this._send(d);null!==d&&d.then(k.hitch(this,function(a){p.forEach(b,k.hitch(this,function(b){this._onDelete(b);a.data.licenseData&&this.setLicensedSystemsInfo(a.data)}));
h.replace(this.deleteButton.iconNode,"rcIcon","waiting")}));break;case c.returnValues.allOrNo:case c.returnValues.none:break;default:console.error(this.declaredClass+" - _confirm(): Invalid Choice",d)}f.remove()}));this.own(f)},_editItem:function(){window.location.hash="#site?site\x3d"+encodeURIComponent(this.selectedItem)},_goToAdd:function(){window.location.hash="#addSite"},onSendComplete:function(b){rc.session.updateAttributes();this.emit("sendComplete",b);rc.setupWizard||this.hasIndividuals()||
this._goToAdd()},_setLabels:function(){this._multiSelect.setLabel(this.webviewStrings.hosted+" "+this.webviewStrings.wvSites+":");this._multiSelect.setHint(this.webviewStrings.msHint);this.deleteButton.set("label",this.webviewStrings.rcbDelete.toUpperCase());this.addButton.set("label",this.webviewStrings.addSite.toUpperCase());this.editButton.set("label",this.webviewStrings.rcbEdit.toUpperCase())},_getErrorMessage:function(b){var c={msg:this.errorStrings.unexpectedError,type:"error",noticeType:"sticky"};
switch(b){case 501:c.msg=this.errorStrings.duplicateSite;break;case 502:c.msg=this.errorStrings.siteDoesNotExist;break;case 504:c.msg=this.errorStrings.unexpectedError;break;case 506:c.msg=this.errorStrings.insufficientPriviledges;break;case 507:c.msg=this.errorStrings.urlInUse;break;default:console.error(this.declaredClass+" - _getErrorMessage(): Unknown error status",b)}return c},onRenderNoItems:function(){this.emit("renderNoItems",null);this._goToAdd()}})})},"webview/admin/sites/Site":function(){define("dijit/Dialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/hash dojo/i18n!rc/nls/all dojo/json dojo/on dojo/store/Memory dojo/string dojo/text!webview/admin/sites/templates/site.html dojo/topic dojox/html/entities rc/_base/util rc/StyleSwitcher rc/util/notices ../_individualBase ../widget/ImageGallery ../../util/util ../../xhrEnhanced dijit/form/Button dijit/form/CheckBox dijit/form/RadioButton dijit/form/FilteringSelect dijit/form/ValidationTextBox ./AlarmEmailSettings ./Security ./smtpConfig ../../widget/CommitButtons ../../widget/WebviewContentPane ../widget/ActiveDirectoryConfig ../widget/AdminToolbar ../widget/HelpLink rc/xhr".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A){return k("webview/admin/sites/Site",w,{acceptedFileExtensions:".jpg .jpeg .png .gif .bmp .ico".split(" "),ADConfig:null,bannerGallery:null,bannerGalleryDialog:null,bannerImageId:null,logoGallery:null,logoGalleryDialog:null,logoImageId:null,MAX_NAME_LENGTH:50,rootPath:null,templateString:q,rcStrings:f,themeStore:null,view:"properties",securitiesObj:{},_dirtyListeners:null,_MAX_FILE_UPLOAD_SIZE_IN_MB:16,_path:"site/",constructor:function(){this.wizardOnNextFunction=
this._saveProperties;var a=[];v.initialize();delete v.themes["Kiosk optimized"];delete v.themes["Kiosk optimized"];for(var c=Object.keys(v.themes),d=0;d<c.length;d++)a.push({id:c[d],label:v.themes[c[d]].name});this.themeStore=new b({data:a});this.rootPath=n.getWindowLocationOrigin()+rc.rootPath},buildRendering:function(){this.inherited(arguments);this.defaultThemeSelection.set({store:this.themeStore,queryExpr:"*${0}*"})},postCreate:function(){this.inherited(arguments);webview.auditUtil.setContextDataWithSiteId(this.site,
[{objectName:"#Site"+Number(this.site)}],this.title);this.ADConfig.validator=this._maxCharacters;this._createUploaders();"admin"===rc.session.getUsername().toLowerCase()?(d.remove(this.urlPathContainer,"hidden"),this.own(c(this.urlTB,"change",h.hitch(this,this._onChangeUrlPath))),this.urlTB.set("validator",h.hitch(this,this._urlPathValidation)),d.remove(this.defaultSiteContainer,"hidden")):(d.add(this.urlPathContainer,"hidden"),d.add(this.defaultSiteContainer,"hidden"));this.siteNameTB.set("validator",
h.hitch(this,this._siteNameValidation));this.baseUrlTB.set("validator",h.hitch(this,this._baseURLValidation));this._buildBannerGallery();this._buildLogoGallery();this.setTabIndex();this._switchView(this.view);this._children.push(this.buttonBar)},fetch:function(a){if(!this._beginUpdate())return null;var b=A.get(this._path,{handleAs:"json",preventCache:!0,query:{siteId:this.site}});b.then(h.hitch(this,function(b){b&&200===b.errStatus?this.render(b,a):b&&502===b.errStatus?this._onInitError(this._getErrorMessage(b.errStatus)):
b?this._displayErrorMessage(b):console.error(this.declaredClass+" - fetch(): Data returned is null",b);this.onInitSuccess()}),h.hitch(this,function(a){this._onInitError(a)})).always(h.hitch(this,this._endUpdate));return b},fillFields:function(b,d){this._cleanupDirtyListeners();var n=b.properties;this.securitiesObj=b.properties.securityConfig;y.isNotNullOrWhiteSpace(n.baseUrl)&&(this.rootPath=decodeURIComponent(n.baseUrl));"/"!==this.rootPath[this.rootPath.length-1]&&(this.rootPath+="/");this.baseUrlTB.set("value",
this.rootPath);this.baseUrlTB.watch("value",h.hitch(this,function(a,b){b="undefined"===typeof b?"":b.trim();this._setDirty([this.propertiesCommitButtons.saveButton],!1);""===b&&(b=a);"/"!==b[b.length-1]&&(b+="/");this._onChangeUrlPath()}));this.smtpConfig.set("keys",n.rsaKey);this.smtpConfig.set("value",n.smtp);this._dirtyListeners.push(c(this.smtpConfig,"change",h.hitch(this,function(){this._setDirty([this.propertiesCommitButtons.saveButton],!1)})));this.alarmEmailConfig.set("alarmEmailMask",n.alarmEmailSettings);
this._dirtyListeners.push(c(this.alarmEmailConfig,"change",h.hitch(this,function(){this._setDirty([this.propertiesCommitButtons.saveButton],!1)})));this.alarmEmailConfig.setupDirtyListeners();this.siteNameTB.set("value",h.trim(a.decode(b.siteName)));this.siteNameTB.watch("value",h.hitch(this,this._setDirty,[this.propertiesCommitButtons.saveButton],!1));this.urlTB.set("value",h.trim(decodeURIComponent(n.urlName)));this.urlTB.watch("value",h.hitch(this,this._setDirty,[this.propertiesCommitButtons.saveButton],
!1));"undefined"===typeof v.themes[n.defaultTheme]&&(n.defaultTheme="Gray");this.defaultThemeSelection.set("value",n.defaultTheme);this.defaultThemeSelection.watch("value",h.hitch(this,this._setDirty,[this.propertiesCommitButtons.saveButton],!1));this.defaultSite.set("checked",!0===n.isDefaultSite?!0:!1);this.defaultSite.watch("checked",h.hitch(this,this._setDirty,[this.propertiesCommitButtons.saveButton],!1));this.securityTab.fillFields(this.securitiesObj);this.own(this.securityTab.watch("dirty",
h.hitch(this,function(){this.securityTab.get("dirty")&&this._setDirty([this.propertiesCommitButtons.saveButton],!1)})));this._onChangeUrlPath();!1!==n.showTitle&&(n.showTitle=!0);this.showTitle.set("checked",n.showTitle);this.showTitle.watch("checked",h.hitch(this,this._setDirty,[this.propertiesCommitButtons.saveButton],!1));this.bannerImageId=n.bannerImageId?n.bannerImageId:null;this.logoImageId=n.logoImageId?n.logoImageId:null;this.ADConfig.fillFields(b,d);this._dirtyListeners.push(c(this.ADConfig,
"change",h.hitch(this,function(){this._setDirty([this.propertiesCommitButtons.saveButton],!1)})));null===this.bannerImageId?g.set(this.customImageType,"innerHTML",this.webviewStrings.defaultImage):rc.xhr.request({path:"fileUploader/",type:"rest",method:"GET",imageId:this.bannerImageId}).then(h.hitch(this,function(a){a=a.data.fileName;var b=a.lastIndexOf("\\")+1;a=a.substring(b);g.set(this.customImageType,"innerHTML",a)}));null===this.logoImageId?g.set(this.customLogoImageType,"innerHTML",this.webviewStrings.defaultImage):
rc.xhr.request({path:"fileUploader/",type:"rest",method:"GET",imageId:this.logoImageId}).then(h.hitch(this,function(a){a=a.data.fileName;var b=a.lastIndexOf("\\")+1;a=a.substring(b);g.set(this.customLogoImageType,"innerHTML",a)}));this._makeClean()},onBannerImageSelected:function(a){this._setDirty([this.propertiesCommitButtons.saveButton],!1);this.bannerImageId=a.id;this._updateGallery(this._updateBannerGallery);g.set(this.customImageType,"innerHTML",a.originalFilename)},onDestroyWizard:function(){this.inherited(arguments);
d.remove(this.propertiesCommitButtons.domNode,"hidden")},onLogoImageSelected:function(a){this._setDirty([this.propertiesCommitButtons.saveButton],!1);this.logoImageId=a.id;this._updateGallery(this._updateLogoGallery);g.set(this.customLogoImageType,"innerHTML",a.originalFilename)},onSendComplete:function(){rc.session.updateAttributes();rc.setupWizard&&rc.setupWizard.next();u.publish("updateNavTree")},onStartWizard:function(){this.inherited(arguments);rc.setupWizard&&(d.add(this.propertiesCommitButtons.domNode,
"hidden"),d.remove(this.wizardNextContainer,"hidden"))},resize:function(){this.inherited(arguments)},setTabIndex:function(){g.set(this.defaultThemeSelection.textbox,"tabindex",1);g.set(this.siteNameTB.textbox,"tabindex",1);g.set(this.baseUrlTB,"tabindex",1);g.set(this.urlTB,"tabindex",1);g.set(this.smtpConfig.serverPresets.textbox,"tabindex",1);g.set(this.smtpConfig.serverAddressTB,"tabindex",1);g.set(this.smtpConfig.portTB,"tabindex",1);g.set(this.smtpConfig.senderEmailTB,"tabindex",1);g.set(this.smtpConfig.usernameTB,
"tabindex",1);g.set(this.smtpConfig.passwordTB,"tabindex",1);g.set(this.ADConfig.providerDirectoryTB,"tabindex",1);g.set(this.ADConfig.domainTB,"tabindex",1);g.set(this.ADConfig.domainUserTB,"tabindex",1);g.set(this.ADConfig.domainPassTB,"tabindex",1)},_addViewToHash:function(){var a=l().split("\x26");window.location.hash=a[0]+"\x26view\x3d"+this.view},_baseURLValidation:function(a){var b=!1;a=a.trim();try{""===a?this.baseUrlTB.set("invalidMessage",this.errorStrings.emptyBaseUrl):b=!0}catch(D){return console.error(this.declaredClass+
" - _baseURLValidation(): Unexpected Error",D),!1}return b},_buildBannerGallery:function(){this.bannerGallery=new z({});this.bannerGalleryDialog=new p({title:this.webviewStrings.uploadedImageGallery,content:this.bannerGallery,baseClass:"imageGalleryDialogBox"});this.own(c(this.bannerGallery,"imageSaved",h.hitch(this,function(a){if(this.bannerImageId!==a.id)this.onBannerImageSelected(a);this.bannerGalleryDialog.hide()})));this.own(c(this.bannerGallery,"imageDeleted",h.hitch(this,function(a){rc.xhr.request({path:"site/uploadedImages",
type:"rest",method:"DELETE",siteId:this.site,fileId:a.id}).then(h.hitch(this,function(b){this._updateGallery(this._updateBannerGallery);a.id===this.bannerImageId&&(this.bannerImageId=null,g.set(this.customImageType,"innerHTML",this.webviewStrings.defaultImage),this._setDirty([this.propertiesCommitButtons.saveButton],!1));a.id===this.logoImageId&&(this.logoImageId=null,g.set(this.customLogoImageType,"innerHTML",this.webviewStrings.defaultImage),this._setDirty([this.propertiesCommitButtons.saveButton],
!1))}),h.hitch(this,function(a){console.error(this.declaredClass+" - _buildBannerGallery(): Error deleting icon file",a)}))})));this.own(c(this.galleryButton,"click",h.hitch(this,function(){this._updateGallery(this._updateBannerGallery);this.bannerGalleryDialog.show()})))},_buildLogoGallery:function(){this.logoGallery=new z({});this.logoGalleryDialog=new p({title:this.webviewStrings.uploadedImageGallery,content:this.logoGallery,baseClass:"imageGalleryDialogBox"});this.own(c(this.logoGallery,"imageSaved",
h.hitch(this,function(a){if(this.logoImageId!==a.id)this.onLogoImageSelected(a);this.logoGalleryDialog.hide()})));this.own(c(this.logoGallery,"imageDeleted",h.hitch(this,function(a){rc.xhr.request({path:"site/uploadedImages",type:"rest",method:"DELETE",siteId:this.site,fileId:a.id}).then(h.hitch(this,function(b){this._updateGallery(this._updateLogoGallery);a.id===this.bannerImageId&&(this.bannerImageId=null,g.set(this.customImageType,"innerHTML",this.webviewStrings.defaultImage),this._setDirty([this.propertiesCommitButtons.saveButton],
!1));a.id===this.logoImageId&&(this.logoImageId=null,g.set(this.customLogoImageType,"innerHTML",this.webviewStrings.defaultImage),this._setDirty([this.propertiesCommitButtons.saveButton],!1))}),h.hitch(this,function(a){console.error(this.declaredClass+" - _buildLogoGallery(): Error deleting icon file",a)}))})));this.own(c(this.logoGalleryButton,"click",h.hitch(this,function(){this._updateGallery(this._updateLogoGallery);this.logoGalleryDialog.show()})))},_checkPropertiesValidation:function(){var a=
{siteId:Number(this.site),properties:null},b={};a.properties=this.ADConfig.getFieldValues();a.properties.siteName=this.siteNameTB.get("value").toString();b=""===this.urlTB.get("value")?y.escapeSpaces(this.siteNameTB.get("value"),"-"):this.urlTB.get("value");a.properties.urlPath=encodeURIComponent(b);a.properties.baseUrl=encodeURIComponent(this.baseUrlTB.get("value"));a.properties.showTitle=this.showTitle.get("checked");a.properties.bannerImageId=this.bannerImageId;a.properties.logoImageId=this.logoImageId;
a.properties.defaultTheme=this.defaultThemeSelection.get("value");a.properties.isDefaultSite=this.defaultSite.get("checked");a.properties.smtp=this.smtpConfig.get("value");a.properties.alarmEmailSettings=this.alarmEmailConfig.get("alarmEmailMask");b=this._propertiesValidate();return{valid:b.valid,msg:b.msg,formData:a}},_cleanupDirtyListeners:function(){if(null!==this._dirtyListeners)for(var a=this._dirtyListeners.length-1;this._dirtyListeners.length;)this._dirtyListeners[a].remove(),this._dirtyListeners.splice(a,
1),a--;else this._dirtyListeners=[]},_createButtons:function(){this.own(c(this.propertiesButton.domNode,"click",h.hitch(this,this._goToProperties)));d.add(this.propertiesButton.domNode,"selected");this._buttonArray.push(this.propertiesButton);this.own(c(this.securityButton.domNode,"click",h.hitch(this,this._goToSecurity)));this._buttonArray.push(this.securityButton);this.own(c(this.clearImage,"click",h.hitch(this,function(){null!==this.bannerImageId&&this._setDirty([this.propertiesCommitButtons.saveButton],
!1);this.bannerImageId=null;g.set(this.customImageType,"innerHTML",this.webviewStrings.defaultImage)})));this.own(c(this.clearLogoImage,"click",h.hitch(this,function(){null!==this.logoImageId&&this._setDirty([this.propertiesCommitButtons.saveButton],!1);this.logoImageId=null;g.set(this.customLogoImageType,"innerHTML",this.webviewStrings.defaultImage)})));this._iconArray.push(this.propertiesCommitButtons);this.buttonBar.replaceAllIcons(this._iconArray);this.buttonBar.replaceAllButtons(this._buttonArray)},
_createUploaders:function(){this._bannerImageUploader=new dojox.form.Uploader({label:"",multiple:!1,url:"uploader/BannerImage",baseClass:"webviewButton circularButton noLabel uploader",iconClass:"rcIcon browseIcon"},this.uploaderContainer);this.own(c(this._bannerImageUploader,"change",h.hitch(this,this._uploadCustomFile,this._bannerImageUploader)));this._bannerImageUploader.startup();this.own(c(this._bannerImageUploader,"complete",h.hitch(this,this._uploadComplete,this._bannerImageUploader)));this._logoImageUploader=
new dojox.form.Uploader({label:"",multiple:!1,url:"uploader/LogoImage",baseClass:"webviewButton circularButton noLabel uploader",iconClass:"rcIcon browseIcon"},this.logoUploaderContainer);this.own(c(this._logoImageUploader,"change",h.hitch(this,this._uploadCustomFile,this._logoImageUploader)));this._logoImageUploader.startup();this.own(c(this._logoImageUploader,"complete",h.hitch(this,this._uploadComplete,this._logoImageUploader)))},_createViews:function(){this.siteProperties.setMainContent(this.propertiesContainer);
this._views.push(this.siteProperties);this.securityTab.createView();this._views.push(this.securityTab.siteSecurity)},_getErrorMessage:function(a){var b={msg:this.errorStrings.unexpectedError,type:"error",noticeType:"sticky"};switch(a){case 502:b.msg=this.errorStrings.siteDoesNotExist;break;case 504:b.msg=this.errorStrings.unexpectedError;break;case 505:b.msg=this.errorStrings.ldapConnectionFailed;break;case 506:b.msg=this.errorStrings.insufficientPriviledges;break;case 507:b.msg=this.errorStrings.urlInUse;
break;case 509:b.msg=this.errorStrings.certificateNotFound;break;default:console.error("Site.js - _getErrorMessage(): Unknown error status",a)}return b},_goToProperties:function(){this.view="properties";this._addViewToHash()},_goToSecurity:function(){this.view="security";this._addViewToHash()},_makeClean:function(){this.securityTab.set("dirty",!1);this._setDirty([this.propertiesCommitButtons.saveButton],!0)},_onChangeBaseUrl:function(a,b){b="undefined"===typeof b?"":b.trim();b!==a&&(this._setDirty([this.propertiesCommitButtons.saveButton],
!1),""===b&&(b=a),"/"!==b[b.length-1]&&(b+="/"),this.baseUrlTB.set("value",b),this._onChangeUrlPath())},_onChangeUrlPath:function(){var b=decodeURIComponent(y.escapeSpaces(this.urlTB.get("value"),"-"));""===b.trim()&&(b=y.escapeSpaces(this.siteNameTB.get("value"),"-"));this.urlTB.set("value",b);"/"!==b[b.length-1]&&(b+="/");b=this.baseUrlTB.get("value")+b;g.set(this.urlPathText,"innerHTML",a.encode(b));g.set(this.siteLink,"href",b)},_propertiesValidate:function(){var a=this.ADConfig.validate(),b=
this.smtpConfig.validate(),c=!0,d=this.rcStrings.success,n=this.alarmEmailConfig.validate();a.valid?b.valid?this.siteNameTB.isValid()?this.baseUrlTB.isValid()?this.urlTB.isValid()?n.valid||(c=!1,d=n.msg):(c=!1,d=this.urlTB.invalidMessage):(c=!1,d=this.baseUrlTB.invalidMessage):(c=!1,d=this.siteNameTB.invalidMessage):(c=!1,d=b.msg):(c=!1,d=a.msg);return{valid:c,msg:d}},_save:function(){"security"===this.view?this.securityTab.saveSecurityConfig().then(h.hitch(this,this._saveComplete)):this._saveSiteProperties()},
_saveSiteProperties:function(){var a=this._checkPropertiesValidation();a.valid?(a=a.formData,u.publish("sticky",{type:"info",message:this.errorStrings.saveInProgress}),A.put("site/properties",{handleAs:"json",data:{siteId:a.siteId,properties:r.stringify(a.properties)}}).then(h.hitch(this,this._saveComplete))):u.publish("sticky",{type:"error",message:a.msg})},_saveComplete:function(a){x.widget.clear();200===a.errStatus?(u.publish("alert",{type:"success",message:this.errorStrings.successfulSave}),this._makeClean(),
this.onSendComplete()):this._displayErrorMessage(a)},_saveProperties:function(){this._save("properties",this.propertiesCommitButtons)},_setLabels:function(){this.securityTab.setLabels()},_setupCommitButtons:function(){this.own(c(this.propertiesCommitButtons.saveButton.toolbarButtonIcon,"click",h.hitch(this,function(){this._saveProperties()})));this.own(c(this.propertiesCommitButtons.cancelButton.toolbarButtonIcon,"click",h.hitch(this,function(){this.securityTab.galleryUpdater.clearFileInputSelection();
this.fetch("properties")})))},_siteNameValidation:function(b){var c=!1;b=b.trim();try{""===b?this.siteNameTB.set("invalidMessage",this.errorStrings.emptySiteName):"admin"===b.toLowerCase()?this.siteNameTB.set("invalidMessage",this.errorStrings.adminReservedSite):null!==b.match(/[^a-z\d\-\sA-Z]/g)?this.siteNameTB.set("invalidMessage",t.substitute(this.errorStrings.xMustContainAlphaNumeric,[this.webviewStrings.siteName])):a.encode(b).length>this.MAX_NAME_LENGTH?this.siteNameTB.set("invalidMessage",
t.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])):c=!0}catch(D){return console.error(this.declaredClass+" - _siteNameValidation(): Unexpected Error",D),!1}return c},_switchView:function(a){this.view=a;m.forEach(this._views,function(a){a.domNode?d.add(a.domNode,"hidden"):d.add(a,"hidden")});m.forEach(this._buttonArray,function(a){d.remove(a.domNode,"selected")});switch(a){case "properties":d.remove(this.siteProperties.domNode,"hidden");d.add(this.propertiesButton.domNode,
"selected");break;case "security":this.securityTab.show();d.add(this.securityButton.domNode,"selected");break;default:d.remove(this.siteProperties.domNode,"hidden"),d.add(this.propertiesButton.domNode,"selected"),d.remove(this.propertiesCommitButtons.domNode,"hidden"),d.add(this.propertiesCommitButtons.domNode,"selected"),console.error(this.declaredClass+" - _switchViews(): Invalid View",a)}},_updateBannerGallery:function(a){this.bannerGallery.updateImages(a.data.imageFiles,a.data.itemCount);this.bannerGallery.selectCurrentImage(this.bannerImageId)},
_updateGallery:function(a){rc.xhr.request({path:"site/uploadedImages",type:"rest",method:"GET",siteId:this.site}).then(h.hitch(this,a),h.hitch(this,function(a){console.error(this.declaredClass+" - _updateGallery(): Error getting icon files",a)}))},_updateLogoGallery:function(a){this.logoGallery.updateImages(a.data.imageFiles,a.data.itemCount);this.logoGallery.selectCurrentImage(this.logoImageId)},_uploadComplete:function(a,b){var c=null,d=null;if(a===this._bannerImageUploader)c="bannerImageId",d=
this.customImageType;else if(a===this._logoImageUploader)c="logoImageId",d=this.customLogoImageType;else throw console.error(this.declaredClass+" - _uploadComplete(): Unknown uploader",a),Error("Unknown Uploader type");if(200===b.errStatus||500===b.errStatus){b.imageId!==this[c]&&this._setDirty([this.propertiesCommitButtons.saveButton],!1);this[c]=b.imageId;var c=b.fileName,n=c.lastIndexOf("\\")+1,c=c.substring(n);g.set(d,"innerHTML",c)}else this[c]=null,console.error(this.declaredClass+" - _uploadComplete():Could not upload file",
b)},_uploadCustomFile:function(a,b){var c={siteId:this.site},d=!0,n=b[0].name,f=n.lastIndexOf("\\")+1,n=n.substring(f),f=n.lastIndexOf("."),n=n.substring(f).toLowerCase();x.widget.clear();a.convertBytes(b[0].size).mb>=this._MAX_FILE_UPLOAD_SIZE_IN_MB&&(d=!1,u.publish("sticky",{type:"error",message:this.webviewStrings.fileExceedsMax}));if(-1===this.acceptedFileExtensions.indexOf(n)){var d=!1,q=this.errorStrings.unsupportedFileType+"\x3cul\x3e";m.forEach(this.acceptedFileExtensions,function(a){q+="\x3cli\x3e"+
a+"\x3c/li\x3e"});q+="\x3c/ul\x3e";u.publish("sticky",{type:"error",message:q})}d&&a.upload(c)},_urlPathValidation:function(a){var b=!1;a=a.trim();a=a.toLowerCase();try{"admin"===a?this.urlTB.set("invalidMessage",this.errorStrings.adminReservedSite):null!==a.match(/[^a-z\d\-\sA-Z]/g)?this.urlTB.set("invalidMessage",t.substitute(this.errorStrings.xMustContainAlphaNumeric,[this.webviewStrings.urlPath])):b=!0}catch(D){return console.error(this.declaredClass+" - _urlPathValidation():Unexpected Error",
D),!1}return b},destroy:function(){this.inherited(arguments);this._cleanupDirtyListeners()}})})},"webview/admin/widget/ImageGallery":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/form/Button dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!webview/nls/all dojo/query dojo/text!./templates/ImageGallery.html".split(" "),function(p,m,k,h,g,d,l,f,r,c,b){return h("webview/admin/widget/ImageGallery",[m,p,f],{templateString:b,imageFiles:null,itemCount:0,
selectedFile:null,constructor:function(){this.inherited(arguments);this.webviewStrings=r},postCreate:function(){this.inherited(arguments);null===this.imageFiles&&(this.imageFiles=[]);this.buildImageTable();this.buildButtons()},buildImageTable:function(b){for(var c="",d=null,a=null,n=0;n<this.itemCount;n++){d=this.imageFiles[n];0===n%5&&(a=l.create("span",{"class":"imageGalleryRow"},this.imageTable,"last"));var c="",c="navGroup"===b?"Uploads/NavGroup/":"Uploads/BannerImages/",f=l.create("span",{"class":"imageGalleryCell",
"data-filename":d.encodedFileName,title:d.originalFilename},a,"last"),c=rc.rootPath+c+d.encodedFileName;this.imageFiles[n].id=this.imageFiles[n].fileId;l.create("img",{src:c,"class":"imageIcon",onclick:g.hitch(this,this.changeSelectedImage,{filename:d.encodedFileName,id:this.imageFiles[n].id,inUseByNavGroup:d.inUseByNavGroup,originalFilename:d.originalFilename,width:d.width,height:d.height})},f,"first")}},buildButtons:function(){this.okayButton=new k({baseClass:"webviewButton",iconClass:"rcIcon okIcon",
disabled:!0,label:this.webviewStrings.rcbOkay.toUpperCase(),onClick:g.hitch(this,this._onImageSaved)});l.place(this.okayButton.domNode,this.buttonContainer,"last");var b=l.toDom("\x3cspan\x3e  \x3c/span\x3e");l.place(b,this.buttonContainer,"last");this.deleteButton=new k({baseClass:"webviewButton",iconClass:"webviewIcon svg-delete-icon",disabled:!0,label:this.webviewStrings.rcbDelete.toUpperCase(),onClick:g.hitch(this,this._onImageDeleted)});l.place(this.deleteButton.domNode,this.buttonContainer,
"last")},changeSelectedImage:function(b){var f=null;null!==this.selectedFile&&(f=c("span[data-filename\x3d'"+this.selectedFile.filename+"']",this.imageTable)[0],d.remove(f,"selected"));this.selectedFile=b;f=c("span[data-filename\x3d'"+this.selectedFile.filename+"']",this.imageTable)[0];d.add(f,"selected");this.okayButton.set("disabled",!1);!0===b.inUseByNavGroup?(this.deleteButton.set("disabled",!0),this.deleteButton.set("title",this.webviewStrings.cannotDeleteUsedNavGroupImage)):(this.deleteButton.set("disabled",
!1),this.deleteButton.set("title",""))},updateImages:function(b,c,d){l.empty(this.imageTable);this.imageFiles=b;this.itemCount=c;this.selectedFile=null;this.deleteButton.set("disabled",!0);this.okayButton.set("disabled",!0);this.buildImageTable(d)},_onImageSaved:function(){if(null!==this.selectedFile&&!this.okayButton.get("disabled"))this.onImageSaved(this.selectedFile)},onImageSaved:function(b){this.emit("imageSaved",b);return b},_onImageDeleted:function(){if(null!==this.selectedFile&&!this.deleteButton.get("disabled"))this.onImageDeleted(this.selectedFile)},
onImageDeleted:function(b){this.emit("imageDeleted",b);return b},selectCurrentImage:function(b){for(var c=null,d=0;d<this.itemCount;d++)if(c=this.imageFiles[d],c.fileId===b||c.encodedFileName===b){this.changeSelectedImage({filename:c.encodedFileName,id:c.fileId,inUseByNavGroup:c.inUseByNavGroup,originalFilename:c.originalFilename,width:c.width,height:c.height});break}}})})},"webview/admin/sites/AlarmEmailSettings":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/hash dojo/i18n!../../nls/emailalarms dojo/io-query dojo/on dojo/store/Memory dojo/text!./templates/AlarmEmailSettings.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return h("webview/admin/sites/AlarmEmailSettings",[m,p,k],{templateString:b,emailAlarmStrings:l,_dirtyListeners:[],_settingsMask:0,_titleMask:63,_bodyMask:262080,alarmEmailMask:{siteNameTitle:1,systemNameTitle:2,objectNameTitle:4,alarmTextTitle:8,alarmStateTitle:16,alarmTypeTitle:32,siteNameBody:64,systemNameBody:128,objectNameBody:256,eventParametersBody:512,statusFlagsBody:1024,alarmPriorityBody:2048,actionBody:4096,sourceBody:8192,alarmTextBody:16384,alarmTimeBody:32768,
alarmStateBody:65536,alarmTypeBody:131072,logOnLinkBody:262144},_permissionsStore:null,constructor:function(){this._permissionsStore=new c({idProperty:"maskIdx",data:[{maskIdx:"siteNameTitle",enabled:!0,attachPoint:"siteNameTitleCheck"},{maskIdx:"systemNameTitle",enabled:!0,attachPoint:"systemNameTitleCheck"},{maskIdx:"objectNameTitle",enabled:!0,attachPoint:"objectNameTitleCheck"},{maskIdx:"alarmTextTitle",enabled:!0,attachPoint:"alarmTextTitleCheck"},{maskIdx:"alarmStateTitle",enabled:!0,attachPoint:"alarmStateTitleCheck"},
{maskIdx:"alarmTypeTitle",enabled:!0,attachPoint:"alarmTypeTitleCheck"},{maskIdx:"siteNameBody",enabled:!0,attachPoint:"siteNameBodyCheck"},{maskIdx:"systemNameBody",enabled:!0,attachPoint:"systemNameBodyCheck"},{maskIdx:"objectNameBody",enabled:!0,attachPoint:"objectNameBodyCheck"},{maskIdx:"eventParametersBody",enabled:!0,attachPoint:"eventParametersBodyCheck"},{maskIdx:"statusFlagsBody",enabled:!0,attachPoint:"statusFlagsBodyCheck"},{maskIdx:"alarmPriorityBody",enabled:!0,attachPoint:"alarmPriorityBodyCheck"},
{maskIdx:"actionBody",enabled:!0,attachPoint:"actionBodyCheck"},{maskIdx:"sourceBody",enabled:!0,attachPoint:"sourceBodyCheck"},{maskIdx:"alarmTextBody",enabled:!0,attachPoint:"alarmTextBodyCheck"},{maskIdx:"alarmTimeBody",enabled:!0,attachPoint:"alarmTimeBodyCheck"},{maskIdx:"alarmStateBody",enabled:!0,attachPoint:"alarmStateBodyCheck"},{maskIdx:"alarmTypeBody",enabled:!0,attachPoint:"alarmTypeBodyCheck"},{maskIdx:"logOnLinkBody",enabled:!0,attachPoint:"logOnLinkBodyCheck"}]})},postCreate:function(){this.inherited(arguments);
this.own(r(this.alarmRecipientsButton,"click",g.hitch(this,this._gotoRecipients)))},_getAlarmEmailMaskAttr:function(){return this._settingsMask},_setAlarmEmailMaskAttr:function(b){this._permissionsStore.query({}).forEach(g.hitch(this,this._setAlarmSettings,b));this._settingsMask=b},onChange:function(){},removeDirtyListeners:function(){for(var b=0;b<this._dirtyListeners.length;++b)this._dirtyListeners[b].remove();this._dirtyListeners=[]},setupDirtyListeners:function(){this.removeDirtyListeners();this.defer(g.hitch(this,
function(){this._permissionsStore.query().forEach(g.hitch(this,function(b){"undefined"!==typeof this[b.attachPoint]&&this._dirtyListeners.push(r(this[b.attachPoint],"change",g.hitch(this,this._onChange,b)))}))}),0)},validate:function(){var b=this.get("alarmEmailMask");return 0===(b&this._titleMask)||0===(b&this._bodyMask)?{valid:!1,msg:this.emailAlarmStrings.eaErrorMissing}:{valid:!0,msg:""}},_gotoRecipients:function(){var b=f.objectToQuery({site:this.siteId});d("RemoteAlarmNotifications?"+b)},_onChange:function(b,
c){this._setBitInMask(b,c);this.onChange()},_setBitInMask:function(b,c){"undefined"!==typeof this[b.attachPoint]&&(this._settingsMask=c?this._settingsMask|this.alarmEmailMask[b.maskIdx]:this._settingsMask^this.alarmEmailMask[b.maskIdx])},_setAlarmSettings:function(b,c){var d=!1,d=!!(this.alarmEmailMask[c.maskIdx]&b);"undefined"!==typeof this[c.attachPoint]&&this[c.attachPoint].set("checked",d)},destroy:function(){this.removeDirtyListeners();this._dirtyListeners=null;this.inherited(arguments)}})})},
"webview/admin/sites/Security":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!webview/nls/securityCertificate dojo/json dojo/on dojo/query dojo/text!webview/admin/sites/templates/security.html dojo/topic ../_Widget ../widget/ImageGalleryMixin ../../util/util ../../xhrEnhanced dijit/form/CheckBox dijit/form/ValidationTextBox ../widget/GalleryUpdater ./SecurityCertificateSelector".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w){return m("webview/admin/sites/Security",[n,v],{dirty:!1,errorStrings:r,rcStrings:l,site:null,templateString:u,watermarkId:null,webviewStrings:f,securityCertificateStrings:c,widget:"security",_defaultWatermarkName:"default-watermark.png",_firstLoad:!0,_lockoutOptions:{NoLock:0,LockFor15Mins:1,WaitForAdmin:2},_lockoutOption:null,_lockoutTypes:null,_path:"Watermark",postCreate:function(){this.inherited(arguments);this._lockoutTypes=q('[name\x3d"lockoutType"]',
this.lockoutTypes);this.galleryUpdater.set("uploadParams",{siteId:this.site,widget:this.widget});this.galleryUpdater.set("validateFiles",k.hitch(this,this._uploadValidation));this.own(t(this.galleryUpdater,"clear",k.hitch(this,this._setDefaultWatermark)),t(this.galleryUpdater,"setDefault",k.hitch(this,this._setDefaultWatermark)),t(this.galleryUpdater,"fileChange",k.hitch(this,this._setWatermark)),t(this.lockoutTypes,"change",k.hitch(this,function(a){this.set("lockoutOption",a.target.value)})))},_setEnforceChangeApprovalAttr:function(a){this.enforceChangeApprovalCheckBox.set("checked",
a);this._enableApprovalSecurityFields(a);this._set("enforceChangeApproval",a)},_setHasRequiredSiteAdminUsersAttr:function(a){this.enforceChangeApprovalCheckBox.set("disabled",!a);g.toggle(this.notEnoughSiteAdminsLabelForChangeApproval,"hidden",a);var b=!a&&!0===this.enforceChangeApproval;this.numLockoutAttempts.set("disabled",b||this.noLockoutType.get("checked"));this.noLockoutType.set("disabled",b);this.fifteenMinLockoutType.set("disabled",b);this.adminLockoutType.set("disabled",b);g.toggle(this.notEnoughSiteAdminsLabelForlockoutTypes,
"hidden",!b);this._set("hasRequiredSiteAdminUsers",a)},createView:function(){this.siteSecurity.setMainContent(this.securityContainer)},fillFields:function(a){this.set("enforceChangeApproval",a.enforceChangeApproval);this.set("hasRequiredSiteAdminUsers",a.hasRequiredSiteAdminUsers);this.approvalChangeRate.set("value",a.ChangeApprovalMins);this.set("lockoutOption",a.lockoutOption);this.numLockoutAttempts.set("value",a.loginAttemptsLimit);var b=a.enforcePasswordExpiry;this.enforcePasswordExpiry.set("checked",
b);this._enablePasswordSecurityFields(b);this.passwordExpiry.set("value",a.passwordExpiryDays);b=a.watermarkConfig;this.watermarkEnable.set("checked",b.Enabled);this.watermarkId=null;var c="";null!=b&&(c=b.FileName,this.watermarkId=null==b.FileId?"DEFAULT":b.FileId);this.galleryUpdater.set("fileId",this.watermarkId);this.galleryUpdater.set("fileName",c);a.securityCertificate&&this.certificateSelector.set("certificate",a.securityCertificate);this._firstLoad&&(this._setupWatchers(),this._firstLoad=
!1);this._preventNonNumerical();this.set("dirty",!1)},_preventNonNumerical:function(){var a=document.querySelector("#changeRateValidator"),b=document.querySelector("#passwordExpiryValidator"),c=document.querySelector("#lockoutTimeValidator");t(a,"keydown",k.hitch(x,x.numericalValidator));t(b,"keydown",k.hitch(x,x.numericalValidator));t(c,"keydown",k.hitch(x,x.numericalValidator))},getFormData:function(){var a=this.getLockoutOptionValue(),b=Number(this.numLockoutAttempts.get("value"));return{enforceChangeApproval:this.enforceChangeApprovalCheckBox.get("checked"),
changeApprovalMins:Number(this.approvalChangeRate.get("value")),enforcePasswordExpiry:this.enforcePasswordExpiry.get("checked"),passwordExpiryDays:Number(this.passwordExpiry.get("value")),lockoutOption:Number(a),loginAttemptsLimit:0===b?null:b,watermarkConfig:{FileId:"DEFAULT"===this.watermarkId?null:this.watermarkId,enabled:this.watermarkEnable.get("checked")},securityCertificate:this.certificateSelector.get("certificate")}},getLockoutOptionValue:function(){return p.filter(this._lockoutTypes,function(a){return a.checked})[0].value},
saveSecurityConfig:function(){var c=this._checkSecurityValidation(),n=new d;if(c.valid){var f=c.formData,q=new d;q.then(k.hitch(this,function(c){a.publish("sticky",{type:"info",message:this.errorStrings.saveInProgress});w.put("site/SecurityConfig",{handleAs:"json",data:{siteId:f.siteId,securityConfig:b.stringify(f.securityConfig),changeReason:c}}).then(n.resolve,n.reject)}));w.get("Site/RequiresChangeApproval",{handleAs:"json",preventCache:!0,query:{siteId:f.siteId,securityConfig:b.stringify(f.securityConfig)}}).then(k.hitch(this,
function(a){a&&200===a.errStatus?q.resolve():this._validateApprovalSessionWithSecondary(f).then(q.resolve,q.reject)}))}else a.publish("sticky",{type:"error",message:c.msg});return n},setLabels:function(){h.set(this.approvalChangeRateLabel,"for",this.approvalChangeRate.id);h.set(this.approvalChangeRateLabelMins,"for",this.approvalChangeRate.id);h.set(this.noLockoutLabel,"for",this.noLockoutType.id);h.set(this.fifteenMinLockoutLabel,"for",this.fifteenMinLockoutType.id);h.set(this.adminLockoutLabel,
"for",this.adminLockoutType.id)},show:function(){g.remove(this.siteSecurity.domNode,"hidden")},validate:function(){var a=!0,b=this.rcStrings.success,c=this.getLockoutOptionValue();this.enforceChangeApprovalCheckBox.get("checked")&&!this.approvalChangeRate.isValid()?(a=!1,b=this.approvalChangeRate.invalidMessage):this.enforcePasswordExpiry.get("checked")&&!this.passwordExpiry.isValid()?(a=!1,b=this.passwordExpiry.invalidMessage):Number(c)==this._lockoutOptions.NoLock||this.numLockoutAttempts.isValid()||
(a=!1,b=this.numLockoutAttempts.invalidMessage);return{valid:a,msg:b}},_checkSecurityValidation:function(){var a={siteId:Number(this.site),securityConfig:this.getFormData()},b=this._securityConfigValidate();return{valid:b.valid,msg:b.msg,formData:a}},_enableApprovalSecurityFields:function(a){this.approvalChangeRate.set({disabled:!a,required:a});var b=Number(this.approvalChangeRate.get("value")),c=this.approvalChangeRate.get("constraints");a&&(b<c.min||b>c.max)&&this.approvalChangeRate.set("value",
c.min)},_enableLockoutFields:function(a){a=Number(a);this.numLockoutAttempts.set({disabled:a===this._lockoutOptions.NoLock,required:a!==this._lockoutOptions.NoLock});var b=Number(this.numLockoutAttempts.get("value")),c=this.numLockoutAttempts.get("constraints");a!==this._lockoutOptions.NoLock?(b<c.min||b>c.max)&&this.numLockoutAttempts.set("value",5):this.numLockoutAttempts.set("value",0)},_enablePasswordSecurityFields:function(a){this.passwordExpiry.set({disabled:!a,required:a});var b=Number(this.passwordExpiry.get("value")),
c=this.passwordExpiry.get("constraints");a&&(b<c.min||b>c.max)&&this.passwordExpiry.set("value",c.min)},_securityConfigValidate:function(){var a=this.validate(),b=!0,c=this.rcStrings.success;a.valid||(b=!1,c=a.msg);return{valid:b,msg:c}},_setDefaultWatermark:function(){this.watermarkId="DEFAULT";this.galleryUpdater.set("fileId",this.watermarkId);this.galleryUpdater.set("fileName",this._defaultWatermarkName)},_setupWatchers:function(){this.enforceChangeApprovalCheckBox.watch("checked",k.hitch(this,
function(){this.set("dirty",!0);this._enableApprovalSecurityFields(this.enforceChangeApprovalCheckBox.checked)}));this.enforcePasswordExpiry.watch("checked",k.hitch(this,function(){this.set("dirty",!0);this._enablePasswordSecurityFields(this.enforcePasswordExpiry.checked)}));this.approvalChangeRate.watch("value",k.hitch(this,function(){this.set("dirty",!0)}));this.numLockoutAttempts.watch("value",k.hitch(this,function(){this.set("dirty",!0)}));this.watch("lockoutOption",k.hitch(this,function(){this.set("dirty",
!0)}));this.passwordExpiry.watch("value",k.hitch(this,this._set,"dirty",!0));this.watermarkEnable.watch("checked",k.hitch(this,this._set,"dirty",!0));this.galleryUpdater.watch("fileId",k.hitch(this,this._set,"dirty",!0));this.certificateSelector.watch("thumbprint",k.hitch(this,this._set,"dirty",!0))},_setLockoutOptionAttr:function(a){this._enableLockoutFields(a);switch(a){case this._lockoutOptions.NoLock:this.noLockoutType.set("checked",!0);break;case this._lockoutOptions.LockFor15Mins:this.fifteenMinLockoutType.set("checked",
!0);break;case this._lockoutOptions.WaitForAdmin:this.adminLockoutType.set("checked",!0)}this._set("lockoutOption",a)},_setWatermark:function(a,b){this.watermarkId!==a&&(this.watermarkId=a,this.set("dirty",!0))}})})},"webview/admin/sites/SecurityCertificateSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/i18n!webview/nls/all dojo/i18n!webview/nls/securityCertificate dojo/text!webview/admin/sites/templates/securityCertificateSelector.html ./CertificateStoreDialog dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return h("webview/admin/sites/SecurityCertificateSelector",[m,p,k],{securityCertificateStrings:f,templateString:r,thumbprint:null,webviewStrings:l,_dialog:null,_getCertificateAttr:function(){return{thumbprint:this.thumbprint}},_setCertificateAttr:function(b){this._setFriendlyNameLabel(b);this._set("thumbprint",b.thumbprint)},_createDialog:function(){this._dialog||(this._dialog=new c(this.thumbprint),this._dialog.watch("selectedCertificate",g.hitch(this,function(b,c,d){this._onCertificateSelected(d)})))},
_setFriendlyNameLabel:function(b){b.friendlyName?d.set(this.certificateName,"innerHTML",b.friendlyName):d.set(this.certificateName,"innerHTML",b.thumbprint)},_onCertificateSelected:function(b){this._setFriendlyNameLabel(b);this.set("thumbprint",b.thumbprint)},_openDialog:function(){this._createDialog();this._dialog.show(this.thumbprint)}})})},"webview/admin/sites/CertificateStoreDialog":function(){define("dgrid/extensions/ColumnResizer dgrid/Grid dgrid/OnDemandGrid dgrid/Selection dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/securityCertificate dojo/store/Cache dojo/store/JsonRest dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/certificateStoreDialog.html rc/date ../widget/_GridDialogMixin dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w){return d("webview/admin/sites/CertificateStoreDialog",[w,g],{rcStrings:r,securityCertificateStrings:b,templateString:v,webviewStrings:c,_grid:null,_gridHeaderHeight:45,_gridRowHeight:50,_gridStore:null,_localStore:null,_remoteStore:null,_selectedThumbprint:null,_successCode:200,constructor:function(b){this._selectedThumbprint=b;this._localStore=new a(new u({idProperty:"id"}));this._remoteStore=new q({target:"CertificateStoreItems",idProperty:"id"});
this._gridStore=new a(new t(this._remoteStore,this._localStore))},postCreate:function(){this.inherited(arguments);this._buildColumnStructure();this._buildGrid()},_setSelectedCertificateAttr:function(a){this._selectedThumbprint=a.thumbprint;this._set("selectedCertificate",a)},show:function(a){this._selectedThumbprint=a;this._selectCertificateInGrid();return this.inherited(arguments)},_buildColumnStructure:function(){this._columnStructure=[{id:"issuedToCol",field:"issuedTo",label:b.issuedTo,sortable:!1},
{id:"issuedByCol",field:"issuedBy",label:b.issuedBy,sortable:!1},{id:"expirationCol",field:"expiration",label:b.expiration,sortable:!1,resizable:!1,formatter:l.hitch(this,this._formatExpirationCell)},{id:"friendlyNameCol",field:"friendlyName",label:b.friendlyName,sortable:!1}]},_buildGrid:function(){null===this._grid&&(this._grid=new (d([m,k,p,h]))({columns:this._columnStructure,sort:[{attribute:"id",descending:!1}],store:this._gridStore,keepScrollPosition:!0,loadingMessage:n.substitute(r.loadingX,
[""])},this.gridNode),this._grid.on("dgrid-refresh-complete",l.hitch(this,function(a){this._certificatesLoaded()})),this._grid.startup())},_certificatesLoaded:function(){this._resizeForCertificateCount(this._localStore.data.length);this._selectCertificateInGrid()},_formatExpirationCell:function(a,b){return x.formatUTCDate(a)},_getSelectedRowId:function(){for(var a in this._grid.selection)if(this._grid.selection[a])break;return a},_okClicked:function(){var a=this._getSelectedRowId();a&&this.set("selectedCertificate",
this._gridStore.get(a));this.hide()},_resizeForCertificateCount:function(a){f.set(this.gridNode,"height",this._gridHeaderHeight+a*this._gridRowHeight+"px");this._position()},_selectCertificateInGrid:function(){this.selectedCertificate=this._localStore.query({thumbprint:this._selectedThumbprint})[0];this._grid.clearSelection();this.selectedCertificate&&this._grid.select(this.selectedCertificate)}})})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-geometry dojo/has ../util/misc put-selector/put dojo/_base/html xstyle/css!../css/extensions/ColumnResizer.css".split(" "),
function(p,m,k,h,g,d,l,f,r){function c(a){for(var b=a.length,c=b,d=a[0].length,f=Array(b);b--;)f[b]=Array(d);for(var q={},b=0;b<c;b++)for(var g=f[b],r=a[b],l=0,u=0;l<d;l++){var h=r[u],k;if("undefined"==typeof g[l]){g[l]=h.id;if(h.rowSpan&&1<h.rowSpan){k=f;for(var t=h.rowSpan,m=b,p=l,L=h.id,H=1;H<t;H++)k[m+H][p]=L}if(0<b&&h.colSpan&&1<h.colSpan)for(k=1;k<h.colSpan;k++)if(g[++l]=h.id,h.rowSpan&&1<h.rowSpan)for(var t=f,m=h.rowSpan,p=b,L=l,H=h.id,J=1;J<m;J++)t[p+J][L]=H;q[h.id]=a[0][l].id;u++}}return q}
function b(a,b,c,d,q){if(!(0>=c)){var n=a.columns[b],g;if(n&&(g={grid:a,columnId:b,width:c,bubbles:!0,cancelable:!0},d&&(g.parentType=d),!a._resizedColumns||m.emit(a.headerNode,"dgrid-columnresize",g)))return"auto"===c?delete n.width:(n.width=c,c+="px"),(d=a._columnSizes[b])?d.set("width",c):d=f.addCssRule("#"+f.escapeCssIdentifier(a.domNode.id)+" .dgrid-column-"+f.escapeCssIdentifier(b,"-"),"width: "+c+";"),a._columnSizes[b]=d,!1!==q&&a.resize(),!0}}var t,q=0,u={create:function(){t=r("div.dgrid-column-resizer")},
destroy:function(){r(t,"!");t=null},show:function(a){a=d.position(a.domNode,!0);t.style.top=a.y+"px";t.style.height=a.h+"px";r(document.body,t)},move:function(a){t.style.left=a+"px"},hide:function(){t.parentNode.removeChild(t)}};return p(null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);q++||u.create()},destroy:function(){this.inherited(arguments);for(var a in this._columnSizes)this._columnSizes[a].remove();--q||u.destroy()},
resizeColumnWidth:function(a,c){return b(this,a,c)},configStructure:function(){var a=this._oldColumnSizes=h.mixin({},this._columnSizes),b;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(b in a)b in this._columnSizes||a[b].remove();delete this._oldColumnSizes},_configColumn:function(a){this.inherited(arguments);var b=a.id,c;"width"in a&&((c=this._oldColumnSizes[b])?c.set("width",a.width+"px"):c=f.addCssRule("#"+f.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+f.escapeCssIdentifier(b,
"-"),"width: "+a.width+"px;"),this._columnSizes[b]=c)},renderHeader:function(){this.inherited(arguments);var a=this,b;if(this.columnSets&&this.columnSets.length)for(var d=this.columnSets.length;d--;)b=h.mixin(b||{},c(this.columnSets[d]));else this.subRows&&1<this.subRows.length&&(b=c(this.subRows));for(var d=k(".dgrid-cell",a.headerNode),q=d.length;q--;){var g=d[q],u=g.columnId,t=a.columns[u],A=g.childNodes;if(t&&!1!==t.resizable){t=r("div.dgrid-resize-header-container");for(g.contents=t;0<A.length;)r(t,
A[0]);r(g,t,"div.dgrid-resize-handle.resizeNode-"+f.escapeCssIdentifier(u,"-")).columnId=b&&b[u]||u}}a.mouseMoveListen||(m(a.headerNode,".dgrid-resize-handle:mousedown"+(l("touch")?",.dgrid-resize-handle:touchstart":""),function(b){a._resizeMouseDown(b,this);a.mouseMoveListen.resume();a.mouseUpListen.resume()}),a._listeners.push(a.mouseMoveListen=m.pausable(document,"mousemove"+(l("touch")?",touchmove":""),f.throttleDelayed(function(b){a._updateResizerPosition(b)}))),a._listeners.push(a.mouseUpListen=
m.pausable(document,"mouseup"+(l("touch")?",touchend":""),function(b){a._resizeMouseUp(b);a.mouseMoveListen.pause();a.mouseUpListen.pause()})),a.mouseMoveListen.pause(),a.mouseUpListen.pause())},_resizeMouseDown:function(a,b){a.preventDefault();g.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(a);this._targetCell=k(".dgrid-column-"+f.escapeCssIdentifier(b.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(a);u.show(this)},_resizeMouseUp:function(a){var c=this._columnSizes,
d,q,r;this.adjustLastColumn&&(r=this.headerNode.clientWidth-1);this._resizedColumns||(d=k(".dgrid-cell",this.headerNode),this.columnSets&&this.columnSets.length?d=d.filter(function(a){return"0"==a.columnId.split("-")[0]&&!(a.columnId in c)}):this.subRows&&1<this.subRows.length&&(d=d.filter(function(a){return"0"==a.columnId.charAt(0)&&!(a.columnId in c)})),q=d.map(function(a){return a.offsetWidth}),d.forEach(function(a,c){b(this,a.columnId,q[c],null,!1)},this),this._resizedColumns=!0);g.setSelectable(this.domNode,
!0);d=this._targetCell;var l=this._getResizeMouseLocation(a)-this._startX,h=d.offsetWidth+l,t=this._getResizedColumnWidths(),m=t.totalWidth,t=t.lastColId,p=k(".dgrid-column-"+f.escapeCssIdentifier(t,"-"),this.headerNode)[0].offsetWidth;h<this.minWidth&&(h=this.minWidth);b(this,d.columnId,h,a.type)&&d.columnId!=t&&this.adjustLastColumn&&(m+l<r?b(this,t,"auto",a.type):p-l<=this.minWidth&&b(this,t,this.minWidth,a.type));u.hide();delete this._startX;delete this._targetCell},_updateResizerPosition:function(a){if(this._targetCell){a=
this._getResizeMouseLocation(a);var b=this._targetCell.offsetWidth,c=a;b+(a-this._startX)<this.minWidth&&(c=this._startX-(b-this.minWidth));u.move(c)}},_getResizeMouseLocation:function(a){var b=0;a.pageX?b=a.pageX:a.clientX&&(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return b},_getResizedColumnWidths:function(){var a=0,b=k((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),c=b.length;if(!c)return{};for(var d=b[c-1].columnId;c--;)a+=
b[c].offsetWidth;return{totalWidth:a,lastColId:d}}})})},"webview/admin/widget/_GridDialogMixin":function(){define(["dijit/_WidgetsInTemplateMixin","dijit/Dialog","dojo/_base/declare","dojo/_base/lang"],function(p,m,k,h){return k("webview/admin/widget/_GridDialogMixin",[m],{_grid:null,resize:function(){this.inherited(arguments);this._position()},show:function(){var g=this.inherited(arguments);g.then(h.hitch(this,function(){this._grid.resize()}));return g}})})},"webview/admin/sites/smtpConfig":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/aspect dojo/dom-attr dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!webview/nls/smtp dojo/json dojo/on dojo/request/xhr dojo/store/Memory dojo/text!./templates/smtpConfig.html dojo/topic rc/util/notices ../../util/util ../../widget/ManageCertificatesDialog dijit/form/Button dijit/form/FilteringSelect dijit/form/RadioButton dijit/form/ValidationTextBox dojox/validate/web".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B){return g("webview/admin/sites/smtpConfig",[m,p,k],{baseClass:"",errorStrings:q,enabled:!1,rcStrings:b,rsaKeys:null,smtpStrings:u,templateString:w,webviewStrings:t,showRequiredPrompt:!1,_certificateStore:null,_dirtyListeners:null,_manageCertificateDialog:null,_onChangeConnectDelay:100,_rootThumbprint:null,_testingConnection:!1,_allowDirtyFlag:!0,_widget:"site",_securityTypeMap:{0:"none",none:0,1:"ssl",ssl:1,2:"tls",tls:2},ERROR_SMTP_TEST:{success:200,
failedToConnect:501,noConfigurationSpecified:502,serverUnreachable:503,sendError:504,unknown:508},_serverPresetListener:null,_serverPresetMap:{gmail:{id:0,name:u.gmail,presets:{serverAddress:"smtp.gmail.com",serverEmailPort:587,connectionType:2}},yahoo:{id:1,name:u.yahoo,presets:{serverAddress:"smtp.mail.yahoo.com",serverEmailPort:587,connectionType:2}},msn:{id:2,name:u.msnMail,presets:{serverAddress:"smtp-mail.outlook.com",serverEmailPort:587,connectionType:2}},other:{id:3,name:b.other,presets:{serverAddress:"",
serverEmailPort:25,connectionType:0}}},_serverPresetStore:null,constructor:function(){var a=[];Object.keys(this._serverPresetMap).forEach(d.hitch(this,function(b){a.push(this._serverPresetMap[b])}));this._serverPresetStore=new x({data:a});this._certificateStore=new x},buildRendering:function(){this.inherited(arguments);this.serverPresets.set({store:this._serverPresetStore,queryExpr:"*${0}*",value:this._serverPresetMap.other.id});this.own(n(this.testButton.domNode,"click",d.hitch(this,this._testEmail)),
n(this.manageCertificates.domNode,"click",d.hitch(this,this._showManageCertificates)));this._setupOnChangeListeners();this._setPresetsListener();this._setLabels();this.senderEmailTB.set("validator",d.hitch(this,this._validateSenderEmail))},enable:function(a){this._onChange("enabled",a);this.enabled=a;this.toggleRequired(a);this.serverPresets.set("disabled",!a);this.serverPresets.set("required",a);this.serverAddressTB.set("disabled",!a);this.serverAddressTB.set("required",a);this.portTB.set("disabled",
!a);this.portTB.set("required",a);this.noneSecurityType.set("disabled",!a);this.sslSecurityType.set("disabled",!a);this.tlsSecurityType.set("disabled",!a);this.noneSecurityType.set("required",a);this.senderEmailTB.set("disabled",!a);this.senderEmailTB.set("required",a);this.usernameTB.set("disabled",!a);this.passwordTB.set("disabled",!a);this.manageCertificates.set("disabled",!a);a||this.testButton.set("disabled",!a);this._validateTestbutton()},onChange:function(a,b){},validate:function(){var a={msg:"",
valid:!0};this.enabled&&(this.serverAddressTB.get("value")?!1===this.portTB.isValid()?(a.valid=!1,a.msg=this.portTB.invalidMessage):!1===this.senderEmailTB.isValid()&&(a.valid=!1,a.msg=this.smtpStrings.invalidSmtpEmail):(a.valid=!1,a.msg=this.smtpStrings.invalidSmtpServerAddress));return a},_cleanupDirtyListeners:function(){if(null!==this._dirtyListeners)for(var a=this._dirtyListeners.length-1;this._dirtyListeners.length;)this._dirtyListeners[a].remove(),this._dirtyListeners.splice(a,1),a--;else this._dirtyListeners=
[]},_connectionTypeChanged:function(a,b){b&&this.connectionType!==a&&this._onChange("connectionType",a)},_getSecurityType:function(){var a=this._securityTypeMap.none;this.sslSecurityType.get("checked")?a=this._securityTypeMap.ssl:this.tlsSecurityType.get("checked")&&(a=this._securityTypeMap.tls);return a},_getValueAttr:function(){var a=this._getSecurityType(),b=this.senderEmailTB.get("value"),c=this.serverAddressTB.get("value"),d=this.usernameTB.get("value"),n=this.portTB.get("value"),f=this.passwordTB.get("value"),
q=null,g=this._rootThumbprint;f&&(q=A.encrypt(f,this.rsaKeys));return c?{enabled:this.enabled,connectionType:a,senderEmailAddress:b.trim(),senderUsername:d||null,serverAddress:c.trim(),serverEmailPort:n.trim(),encryptedPassword:q,rootThumbprint:g}:null},_onChange:function(a,b){if(1==this._allowDirtyFlag&&this[a]!==b){var c=this.get("value");if(null!==c){var n=d.clone(c);n[a]=b;this.onChange(n,c)}}},_populateSMTPFromData:function(a,b){this._allowDirtyFlag=b;"undefined"!==typeof a.enabled&&(this.enabled=
a.enabled,this.enableSMTP.set("checked",this.enabled),this.enable(this.enabled));this._serverPresetListener.remove();var c=this._serverPresetStore.query(d.hitch(this,function(a,b){return null!==b.presets&&b.presets.serverAddress.toLowerCase()===a.toLowerCase()?!0:!1},a.serverAddress))[0];"undefined"===typeof c?this.serverPresets.set("value",this._serverPresetMap.other.id):this.serverPresets.set("value",c.id);this.serverAddressTB.set("value",a.serverAddress);this.portTB.set("value",a.serverEmailPort);
switch(a.connectionType){case this._securityTypeMap.none:this.noneSecurityType.set("checked",!0);break;case this._securityTypeMap.ssl:this.sslSecurityType.set("checked",!0);break;case this._securityTypeMap.tls:this.tlsSecurityType.set("checked",!0)}this.senderEmailTB.set("value",a.senderEmailAddress);this.usernameTB.set("value",a.senderUsername);this.passwordTB.set("value",null);this._setManageDialogData(a);setTimeout(d.hitch(this,this._setPresetsListener),this._onChangeConnectDelay);setTimeout(d.hitch(this,
this._setupOnChangeListeners),this._onChangeConnectDelay)},_populateSMTPFromPresets:function(a){var b=this._serverPresetStore.get(a);null!==b.presets&&a!==this._serverPresetStore.get("value")&&this._populateSMTPFromData(b.presets,!0)},_serverAddressChanged:function(a){this._validateTestbutton();this._onChange("serverAddress",a)},_setManageDialogData:function(a){this._certificateStore.put({id:"root",thumbprint:a.rootThumbprint||null,filename:a.rootFilename||null,expiry:a.rootExpiryDate||null})},_setPresetsListener:function(){this._serverPresetListener=
n(this.serverPresets,"change",d.hitch(this,this._populateSMTPFromPresets));this.own(this._serverPresetListener);this._allowDirtyFlag=!0},_setKeysAttr:function(a){this.rsaKeys=a;this._set("keys",a)},_setLabels:function(){r.set(this.serverLabel,"for",this.serverPresets.id);r.set(this.addressLabel,"for",this.serverAddressTB.id);r.set(this.portLabel,"for",this.portTB.id);r.set(this.emailLabel,"for",this.senderEmailTB.id);r.set(this.usernameLabel,"for",this.usernameTB.id);r.set(this.passwordLabel,"for",
this.passwordTB.id)},_setupOnChangeListeners:function(){this._dirtyListeners=[n(this.enableSMTP,"change",d.hitch(this,this.enable)),n(this.serverAddressTB,"change",d.hitch(this,this._serverAddressChanged)),n(this.portTB,"change",d.hitch(this,this._onChange,"serverEmailPort")),n(this.senderEmailTB,"change",d.hitch(this,this._onChange,"senderEmailAddress")),n(this.usernameTB,"change",d.hitch(this,this._onChange,"senderUsername")),n(this.passwordTB,"change",d.hitch(this,this._onChange,"encryptedPassword")),
n(this.serverAddressTB,"keyup",d.hitch(this,this._validateTestbutton)),n(this.noneSecurityType,"change",d.hitch(this,this._connectionTypeChanged,this._securityTypeMap.none)),n(this.sslSecurityType,"change",d.hitch(this,this._connectionTypeChanged,this._securityTypeMap.ssl)),n(this.tlsSecurityType,"change",d.hitch(this,this._connectionTypeChanged,this._securityTypeMap.tls))]},_setValueAttr:function(a){this._cleanupDirtyListeners();a||(a={connectionType:this._securityTypeMap.none,senderEmailAddress:"",
serverAddress:"",senderUsername:"",serverEmailPort:25,enabled:!1});this.connectionType=a.connectionType;this.senderEmailAddress=a.senderEmailAddress;this.serverAddress=a.serverAddress;this.senderUsername=a.senderUsername;this.serverEmailPort=a.serverEmailPort;this._rootThumbprint=a.rootThumbprint;this.encryptedPassword=null;this._populateSMTPFromData(a,!1);this._validateTestbutton();this._set("value",a)},_showManageCertificates:function(){null===this._manageCertificateDialog?this._manageCertificateDialog=
new B({title:this.webviewStrings.manageCertificates,uploadPath:"uploader/UploadCert",allowMutual:!1,value:{root:this._certificateStore.get("root")},widget:this._widget}):this._manageCertificateDialog.set("value",{root:this._certificateStore.get("root")});var a=f.after(this._manageCertificateDialog,"execute",d.hitch(this,this._certificatesChosen),!0);this.own(a);this.own(n.once(this._manageCertificateDialog,"hide",d.hitch(this,a.remove)));this._manageCertificateDialog.show()},_testComplete:function(a){y.widget.clear();
var b="",c="error",d="sticky";switch(a.errStatus){case this.ERROR_SMTP_TEST.success:b=this.errorStrings.successfulTest;c="success";d="alert";break;case this.ERROR_SMTP_TEST.failedToConnect:b=null===a.errMessage?this.smtpStrings.noResponseFromServer:a.errMessage;break;case this.ERROR_SMTP_TEST.noConfigurationSpecified:b=this.smtpStrings.noServerAddress;break;case this.ERROR_SMTP_TEST.serverUnreachable:b=this.smtpStrings.serverDoesNotRespondToPing;break;case this.ERROR_SMTP_TEST.sendError:b=this.smtpStrings.errorSendingEmail;
break;case this.ERROR_SMTP_TEST.unknown:b=this.errorStrings.unexpectedError}this._testingConnection=!1;z.publish(d,{type:c,message:b})},_testEmail:function(){if(!this._testingConnection){this._testingConnection=!0;var b=this.get("value");null!==b&&(z.publish("sticky",{type:"info",message:this.errorStrings.testInProgress}),v.get("smtp/test",{handleAs:"json",query:{siteId:this.siteId,smtpConfig:a.stringify(b)}}).then(d.hitch(this,this._testComplete)))}},toggleRequired:function(a){var b=a?c.remove:c.add;
h.forEach(l(".mandatory",this.domNode),function(a){b(a,"hidden")},this);this.showRequiredPrompt&&b(this.requiredNode,"invisible")},_certificatesChosen:function(a){a=a.root;if(a!==this._rootThumbprint)this.onChange(a,d.clone(this._rootThumbprint));this._rootThumbprint=a;var b=this._certificateStore.get("root");b.thumbprint=a;this._certificateStore.put(b)},_validateSenderEmail:function(a){return dojox.validate.isEmailAddress(a.trim())},_validateTestbutton:function(){this.testButton.set("disabled",!(this.enabled&&
this.serverAddressTB.isValid()&&this.portTB.isValid()))},destroy:function(){this.inherited(arguments);this._cleanupDirtyListeners()}})})},"dojo/_base/query":function(){define(["../query","./NodeList"],function(p){return p})},"webview/widget/ManageCertificatesDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/dom-attr dojo/dom-class dojo/on dojo/query dojo/request/xhr dojo/text!./templates/ManageCertificatesDialog.html dojo/i18n!rc/nls/all dojo/i18n!../nls/all dojo/i18n!../nls/smtp dojox/form/Uploader dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return m("webview/widget/ManageCertificatesDialog",p,{templateString:c,rcStrings:b,title:"Manage Certificates",uploadPath:"",webviewStrings:t,uploaderType:0,_UploaderTypeMap:{root:0,client:1,privateKey:2,remoteAccess:3},widget:"",buildRendering:function(){this.inherited(arguments);this._certUploader=new dojox.form.Uploader({label:"",multiple:!1,url:this.uploadPath,baseClass:"webviewButton circularButton noLabel uploader",iconClass:"rcIcon browseIcon",onChange:k.hitch(this,
this._uploadCert,this.uploaderType)},this.rootUploader);this.own(l(this._certUploader,"complete",k.hitch(this,this._uploadComplete,this._UploaderTypeMap.root)),l(this.rootCertTB.domNode,"click",k.hitch(this,function(){var b=f("[type\x3d'file']",this._certUploader.domNode);1===b.length&&b[0].click()})));this._buttonListener();this._associateLabels();if(!0===this.allowMutual)throw"Currently Not Supported";},_associateLabels:function(){g.set(this.rootCertLabel,"for",this.rootCertTB.id)},_buttonListener:function(){this.own(l(this.clearRoot.domNode,
"click",k.hitch(this,this._clearCertificate,this._UploaderTypeMap.root)))},_clearCertificate:function(b){switch(b){case this._UploaderTypeMap.root:this.set("value",{root:{thumbprint:null,filename:null}})}},_createClientKeyUploaders:function(){throw"Not Currently Supported";},_formatExpiry:function(b){b=h.parse(b,{datePattern:"M/dd/yyyy h:mm:ss a",selector:"date"});return"undefined"!==typeof b&&null!==b?h.format(b,{formatLength:"medium"}):this.webviewStrings.invalidDate},_uploadClientPrivate:function(b){throw"Not Currently Supported";
},_uploadCert:function(b){var a={certType:b,widget:this.widget};switch(b){case this._UploaderTypeMap.root:case this._UploaderTypeMap.remoteAccess:this._certUploader.upload(a);break;case this._UploaderTypeMap.client:case this._UploaderTypeMap.privateKey:throw"Not Currently Supported";}},_uploadComplete:function(b,a){switch(b){case this._UploaderTypeMap.root:this._rootThumbprint=a.certThumbprint;this._name=a.certFilename;this._expiry=a.expiryDate;a.certFilename.match(/ \(ID (?:[a-z0-9]+\-){4}[a-z0-9]+\)/)?
this.rootCertTB.set("value",a.certFilename.split(/ \(ID (?:[a-z0-9]+\-){4}[a-z0-9]+\)/)[0]):this.rootCertTB.set("value",a.certFilename);"undefined"!==typeof a.expiryDate&&g.set(this.rootExpiry,"innerHTML",q.expires+": "+this._formatExpiry(a.expiryDate));break;case this._UploaderTypeMap.client:case this._UploaderTypeMap.privateKey:throw"Not Currently Supported";}},_getValueAttr:function(){return{root:this._rootThumbprint,name:this._name,expiry:this._expiry}},_setValueAttr:function(b){this._expiry=
this._name=this._rootThumbprint=null;if("undefined"!==typeof b.root){null!==b.root.thumbprint&&(this._rootThumbprint=b.root.thumbprint);null!==b.root.filename&&"undefined"!==typeof b.root.filename&&(this._name=b.root.filename,this.rootCertTB.set("value",-1<b.root.filename.indexOf("server2023.crt")?"server2023.crt":b.root.filename.certFilename));var a="";"undefined"!==typeof b.root.expiry&&null!==b.root.expiry&&""!==b.root.expiry&&(this._expiry=b.root.expiry,a=q.expires+": "+this._formatExpiry(b.root.expiry));
g.set(this.rootExpiry,"innerHTML",a)}null===this._rootThumbprint&&(g.set(this.rootExpiry,"innerHTML",""),this.rootCertTB.set("value",this.webviewStrings.rcbDefault.toLowerCase()))}})})},"webview/admin/widget/ActiveDirectoryConfig":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/on dojo/text!./templates/ActiveDirectoryConfig.html dojox/encoding/crypto/RSAKey ./ActiveDirectoryProvider dijit/form/Button dijit/form/CheckBox dijit/form/ValidationTextBox dojox/encoding/crypto/RSAKey-ext".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return g("webview/admin/widget/ActiveDirectoryConfig",[m,p,k,c],{enabled:!1,errorStrings:t,rsaKey:null,showRequiredPrompt:!1,templateString:u,webviewStrings:b,_dirtyListeners:null,_MaxProviders:4,_providerIndexToLabelMap:{1:b.secondProvider,2:b.thirdProvider,3:b.fourthProvider},_providers:null,constructor:function(){this._providers=[]},postCreate:function(){this.inherited(arguments);this.own(q(this.addLDAPServer,"click",d.hitch(this,this._onAddClicked)),q(this.enabledActive,
"change",d.hitch(this,function(){this.enable(this.enabledActive.checked)})))},onChange:function(a){this.emit("change",a);return a},toggleRequired:function(a){var b=a?f.remove:f.add;h.forEach(l(".mandatory",this.domNode),function(a){b(a,"hidden")},this);this.showRequiredPrompt&&b(this.requiredNode,"invisible")},fillFields:function(a){this._cleanupDirtyListeners();a=a.properties;this.providerDirectoryTB.set("value",a.provider[0]);this._providers[0]=this.providerDirectoryTB;for(var b=1;b<a.provider.length;++b)this._providers[b]?
this._providers[b].set("value",a.provider[b]):this._onAddProvider(a.provider[b]);this.domainTB.set("value",d.trim(a.domain));this._dirtyListeners.push(q(this.domainTB,"change",d.hitch(this,function(a,b){b!==a&&this._onChange()},d.trim(a.domain))));this.domainUserTB.set("value",a.domainUser||"");this._dirtyListeners.push(q(this.domainUserTB,"change",d.hitch(this,function(a,b){a||(a="");b!==a&&this._onChange()},a.domainUser)));this.domainPassTB.set("value","");this._dirtyListeners.push(q(this.domainPassTB,
"change",d.hitch(this,function(a){""!==a&&this._onChange()})));this.enabledActive.set("checked",a.enabledActive);this._dirtyListeners.push(q(this.enabledActive,"change",d.hitch(this,function(a){this.enabledActive.get("checked")!==a&&this._onChange()},a.enabledActive)));this.enableSSL.set("checked",a.enableLDAPSSL);this._dirtyListeners.push(q(this.enableSSL,"change",d.hitch(this,function(a){this.enableSSL.get("checked")!==a&&this._onChange()},a.enableLDAPSSL)));this.rsaKey=a.rsaKey;this.enabledActive.set("checked",
a.enabledActive);this.enableSSL.set("checked",a.enableLDAPSSL);this.enable(a.enabledActive)},enable:function(a){this.enabled=a;this.toggleRequired(a);for(var b=0;b<this._providers.length;++b)this._providers[b].set({disabled:!a,isRequired:a});this._toggleAddButton();this.domainTB.set({disabled:!a,required:a});this.domainUserTB.set({disabled:!a,required:a});this.domainPassTB.set({disabled:!a,required:a});a||this.enableSSL.set("checked",!1);this.enableSSL.set("disabled",!a)},validate:function(){if(this.enabledActive.checked){for(var a=
0;a<this._providers.length;++a)if(!this._providers[a].isValid())return{valid:!1,msg:this.errorStrings.emptyADProvider};if(!this.domainTB.isValid())return{valid:!1,msg:this.errorStrings.emptyDomainName};if(!this.domainUserTB.isValid())return{valid:!1,msg:this.errorStrings.emptyDomainUser}}return{valid:!0,msg:"Success"}},getFieldValues:function(){var b=this.domainPassTB.get("value").toString();if(0<b.length){var c=new a;c.setPublic(this.rsaKey.N,this.rsaKey.V);b=c.encrypt(b)}var c=this._providers.map(function(a){return encodeURI(a.get("value").toString())}),
d=this.domainTB.get("value").toString();return{provider:c,domain:encodeURI(d),domainUser:this.domainUserTB.get("value").toString(),domainPass:b,enabledActive:this.enabledActive.get("checked"),enableLDAPSSL:this.enableSSL.get("checked")}},_cleanupDirtyListeners:function(){if(null!==this._dirtyListeners)for(;this._dirtyListeners.length;)this._dirtyListeners[this._dirtyListeners.length-1].remove(),this._dirtyListeners.splice(this._dirtyListeners.length-1,1);else this._dirtyListeners=[]},_onAddClicked:function(){this.enabled&&
this._providers.length<this._MaxProviders&&(this._onAddProvider("LDAP://LDAP SERVER"),this._onChange())},_onAddProvider:function(a){if(this._providers.length<this._MaxProviders){var b=this._providers.length;a=new n({baseClass:"form-group",isRequired:this.enabled,label:this._providerIndexToLabelMap[b],providerIndex:b,value:a});r.place(a.domNode,this.redundantContainer,"last");this._providers.push(a);this.own(q(a,"removeProvider",d.hitch(this,this._onRemoveProvider)),a.watch("value",d.hitch(this,this._onChange)));
this._toggleAddButton()}},_onChange:function(){var a=this.getFieldValues();this.onChange(a)},_onRemoveProvider:function(a){this._providers.length>a&&(this._providers[a].destroy(),this._providers.splice(a,1),this._reindexProviders(),this._onChange(),this._toggleAddButton())},_reindexProviders:function(){for(var a=1;a<this._providers.length;++a)this._providers[a].set({label:this._providerIndexToLabelMap[a],providerIndex:a})},_toggleAddButton:function(){f.toggle(this.addLDAPServer,"disabled",this._providers.length>=
this._MaxProviders||!this.enabled)},destroy:function(){this.inherited(arguments);this._cleanupDirtyListeners()}})})},"webview/admin/widget/ActiveDirectoryProvider":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on dojo/text!./templates/ActiveDirectoryProvider.html dijit/form/ValidationTextBox".split(" "),function(p,m,k,h,g,d,l,f){return h("webview/admin/widget/ActiveDirectoryProvider",[m,p,k],{label:"",
templateString:f,_setLabelAttr:{node:"labelContainer",attribute:"innerHTML"},_setValueAttr:{node:"adProviderTB",attribute:"value"},postCreate:function(){this.inherited(arguments);this.own(this.adProviderTB.watch("value",g.hitch(this,this._onPropertyChanged)),l(this.deleteProvider,"click",g.hitch(this,this._onRemoveProvider)))},_getValueAttr:function(){return this.adProviderTB.get("value").toString()},_setDisabledAttr:function(f){d.toggle(this.deleteProvider,"disabled",f);this.adProviderTB.set("disabled",
f);this._set("disabled",f)},_setIsRequiredAttr:function(f){d.toggle(this.requiredIndicator,"hidden",!f);this.adProviderTB.set("required",f);this._set("isRequired",f)},isValid:function(){return this.adProviderTB.isValid()},onRemoveProvider:function(d){},_onPropertyChanged:function(d,c,b){c!==b&&this.set(d,b)},_onRemoveProvider:function(){if(!this.disabled)this.onRemoveProvider(this.providerIndex)}})})},"dojox/encoding/crypto/RSAKey-ext":function(){define(["dojo/_base/kernel","dojo/_base/lang","./RSAKey",
"../../math/BigInteger-ext"],function(p,m,k,h){p.experimental("dojox.encoding.crypto.RSAKey-ext");m.extend(k,{setPrivate:function(g,d,l){if(g&&d&&g.length&&d.length)this.n=new h(g,16),this.e=parseInt(d,16),this.d=new h(l,16);else throw Error("Invalid RSA private key");},setPrivateEx:function(g,d,l,f,r,c,b,k){if(g&&d&&g.length&&d.length)this.n=new h(g,16),this.e=parseInt(d,16),this.d=new h(l,16),this.p=new h(f,16),this.q=new h(r,16),this.dmp1=new h(c,16),this.dmq1=new h(b,16),this.coeff=new h(k,16);
else throw Error("Invalid RSA private key");},generate:function(g,d){var l=this.rngf(),f=g>>1;this.e=parseInt(d,16);for(var r=new h(d,16);;){for(;this.p=new h(g-f,1,l),this.p.subtract(h.ONE).gcd(r).compareTo(h.ONE)||!this.p.isProbablePrime(10););for(;this.q=new h(f,1,l),this.q.subtract(h.ONE).gcd(r).compareTo(h.ONE)||!this.q.isProbablePrime(10););if(0>=this.p.compareTo(this.q)){var c=this.p;this.p=this.q;this.q=c}var c=this.p.subtract(h.ONE),b=this.q.subtract(h.ONE),k=c.multiply(b);if(!k.gcd(r).compareTo(h.ONE)){this.n=
this.p.multiply(this.q);this.d=r.modInverse(k);this.dmp1=this.d.mod(c);this.dmq1=this.d.mod(b);this.coeff=this.q.modInverse(this.p);break}}l.destroy()},decrypt:function(g){var d=new h(g,16);if(this.p&&this.q){g=d.mod(this.p).modPow(this.dmp1,this.p);for(d=d.mod(this.q).modPow(this.dmq1,this.q);0>g.compareTo(d);)g=g.add(this.p);d=g.subtract(d).multiply(this.coeff).mod(this.p).multiply(this.q).add(d)}else d=d.modPow(this.d,this.n);if(!d)return null;a:{g=this.n.bitLength()+7>>3;for(var d=d.toByteArray(),
l=0,f=d.length;l<f&&!d[l];++l);if(d.length-l!==g-1||2!==d[l])g=null;else{for(++l;d[l];)if(++l>=f){g=null;break a}for(g="";++l<f;)g+=String.fromCharCode(d[l])}}return g}});return k})},"dojox/math/BigInteger-ext":function(){define(["dojo","dojox","dojox/math/BigInteger"],function(p,m){function k(a,b){return a&b}function h(a,b){return a|b}function g(a,b){return a^b}function d(a,b){return a&~b}function l(){}function f(a){return a}function r(a){this.r2=b();this.q3=b();c.ONE._dlShiftTo(2*a.t,this.r2);this.mu=
this.r2.divide(a);this.m=a}p.experimental("dojox.math.BigInteger-ext");var c=m.math.BigInteger,b=c._nbi,t=c._nbv,q=c._nbits,u=c._Montgomery;l.prototype.convert=f;l.prototype.revert=f;l.prototype.mulTo=function(a,b,c){a._multiplyTo(b,c)};l.prototype.sqrTo=function(a,b){a._squareTo(b)};r.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var c=b();a._copyTo(c);this.reduce(c);return c};r.prototype.revert=function(a){return a};r.prototype.reduce=
function(a){a._drShiftTo(this.m.t-1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a._clamp());this.mu._multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m._multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a._dAddOffset(1,this.m.t+1);for(a._subTo(this.r2,a);0<=a.compareTo(this.m);)a._subTo(this.m,a)};r.prototype.mulTo=function(a,b,c){a._multiplyTo(b,c);this.reduce(c)};r.prototype.sqrTo=function(a,b){a._squareTo(b);this.reduce(b)};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,
59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],n=67108864/a[a.length-1];p.extend(c,{_chunkSize:function(a){return Math.floor(Math.LN2*this._DB/Math.log(a))},_toRadix:function(a){null==a&&(a=10);if(0==this.signum()||2>a||36<a)return"0";
var c=this._chunkSize(a),c=Math.pow(a,c),d=t(c),n=b(),f=b(),q="";for(this._divRemTo(d,n,f);0<n.signum();)q=(c+f.intValue()).toString(a).substr(1)+q,n._divRemTo(d,n,f);return f.intValue().toString(a)+q},_fromRadix:function(a,b){this._fromInt(0);null==b&&(b=10);for(var d=this._chunkSize(b),n=Math.pow(b,d),f=!1,q=0,g=0,r=0;r<a.length;++r){var l=intAt(a,r);0>l?"-"==a.charAt(r)&&0==this.signum()&&(f=!0):(g=b*g+l,++q>=d&&(this._dMultiply(n),this._dAddOffset(g,0),g=q=0))}0<q&&(this._dMultiply(Math.pow(b,
q)),this._dAddOffset(g,0));f&&c.ZERO._subTo(this,this)},_fromNumber:function(a,b,d){if("number"==typeof b)if(2>a)this._fromInt(1);else for(this._fromNumber(a,d),this.testBit(a-1)||this._bitwiseTo(c.ONE.shiftLeft(a-1),h,this),this._isEven()&&this._dAddOffset(1,0);!this.isProbablePrime(b);)this._dAddOffset(2,0),this.bitLength()>a&&this._subTo(c.ONE.shiftLeft(a-1),this);else{d=[];var n=a&7;d.length=(a>>3)+1;b.nextBytes(d);d[0]=0<n?d[0]&(1<<n)-1:0;this._fromString(d,256)}},_bitwiseTo:function(a,b,c){var d,
n,f=Math.min(a.t,this.t);for(d=0;d<f;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){n=a.s&this._DM;for(d=f;d<this.t;++d)c[d]=b(this[d],n);c.t=this.t}else{n=this.s&this._DM;for(d=f;d<a.t;++d)c[d]=b(n,a[d]);c.t=a.t}c.s=b(this.s,a.s);c._clamp()},_changeBit:function(a,b){var d=c.ONE.shiftLeft(a);this._bitwiseTo(d,b,d);return d},_addTo:function(a,b){for(var c=0,d=0,n=Math.min(a.t,this.t);c<n;)d+=this[c]+a[c],b[c++]=d&this._DM,d>>=this._DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this._DM,d>>=this._DB;
d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this._DM,d>>=this._DB;d+=a.s}b.s=0>d?-1:0;0<d?b[c++]=d:-1>d&&(b[c++]=this._DV+d);b.t=c;b._clamp()},_dMultiply:function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this._clamp()},_dAddOffset:function(a,b){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this._DV;)this[b]-=this._DV,++b>=this.t&&(this[this.t++]=0),++this[b]},_multiplyLowerTo:function(a,b,c){var d=Math.min(this.t+a.t,b);c.s=0;for(c.t=d;0<d;)c[--d]=0;var n;for(n=
c.t-this.t;d<n;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(n=Math.min(a.t,b);d<n;++d)this.am(0,a[d],c,d,0,b-d);c._clamp()},_multiplyUpperTo:function(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;0<=--d;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c._clamp();c._drShiftTo(1,c)},_modInt:function(a){if(0>=a)return 0;var b=this._DV%a,c=0>this.s?a-1:0;if(0<this.t)if(0==b)c=this[0]%a;else for(var d=this.t-1;0<=d;--d)c=(b*c+this[d])%a;return c},_millerRabin:function(d){var n=
this.subtract(c.ONE),f=n.getLowestSetBit();if(0>=f)return!1;var q=n.shiftRight(f);d=d+1>>1;d>a.length&&(d=a.length);for(var g=b(),r=0;r<d;++r){g._fromInt(a[r]);var l=g.modPow(q,this);if(0!=l.compareTo(c.ONE)&&0!=l.compareTo(n)){for(var h=1;h++<f&&0!=l.compareTo(n);)if(l=l.modPowInt(2,this),0==l.compareTo(c.ONE))return!1;if(0!=l.compareTo(n))return!1}}return!0},clone:function(){var a=b();this._copyTo(a);return a},intValue:function(){if(0>this.s){if(1==this.t)return this[0]-this._DV;if(0==this.t)return-1}else{if(1==
this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this._DB)-1)<<this._DB|this[0]},byteValue:function(){return 0==this.t?this.s:this[0]<<24>>24},shortValue:function(){return 0==this.t?this.s:this[0]<<16>>16},signum:function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1},toByteArray:function(){var a=this.t,b=[];b[0]=this.s;var c=this._DB-a*this._DB%8,d,n=0;if(0<a--)for(c<this._DB&&(d=this[a]>>c)!=(this.s&this._DM)>>c&&(b[n++]=d|this.s<<this._DB-c);0<=a;)if(8>c?(d=(this[a]&
(1<<c)-1)<<8-c,d|=this[--a]>>(c+=this._DB-8)):(d=this[a]>>(c-=8)&255,0>=c&&(c+=this._DB,--a)),0!=(d&128)&&(d|=-256),0==n&&(this.s&128)!=(d&128)&&++n,0<n||d!=this.s)b[n++]=d;return b},equals:function(a){return 0==this.compareTo(a)},min:function(a){return 0>this.compareTo(a)?this:a},max:function(a){return 0<this.compareTo(a)?this:a},and:function(a){var c=b();this._bitwiseTo(a,k,c);return c},or:function(a){var c=b();this._bitwiseTo(a,h,c);return c},xor:function(a){var c=b();this._bitwiseTo(a,g,c);return c},
andNot:function(a){var c=b();this._bitwiseTo(a,d,c);return c},not:function(){for(var a=b(),c=0;c<this.t;++c)a[c]=this._DM&~this[c];a.t=this.t;a.s=~this.s;return a},shiftLeft:function(a){var c=b();0>a?this._rShiftTo(-a,c):this._lShiftTo(a,c);return c},shiftRight:function(a){var c=b();0>a?this._lShiftTo(-a,c):this._rShiftTo(a,c);return c},getLowestSetBit:function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var b=a*this._DB;a=this[a];if(0==a)a=-1;else{var c=0;0==(a&65535)&&(a>>=16,c+=16);0==(a&255)&&(a>>=
8,c+=8);0==(a&15)&&(a>>=4,c+=4);0==(a&3)&&(a>>=2,c+=2);0==(a&1)&&++c;a=c}return b+a}return 0>this.s?this.t*this._DB:-1},bitCount:function(){for(var a=0,b=this.s&this._DM,c=0;c<this.t;++c){for(var d=this[c]^b,n=0;0!=d;)d&=d-1,++n;a+=n}return a},testBit:function(a){var b=Math.floor(a/this._DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this._DB)},setBit:function(a){return this._changeBit(a,h)},clearBit:function(a){return this._changeBit(a,d)},flipBit:function(a){return this._changeBit(a,g)},add:function(a){var c=
b();this._addTo(a,c);return c},subtract:function(a){var c=b();this._subTo(a,c);return c},multiply:function(a){var c=b();this._multiplyTo(a,c);return c},divide:function(a){var c=b();this._divRemTo(a,c,null);return c},remainder:function(a){var c=b();this._divRemTo(a,null,c);return c},divideAndRemainder:function(a){var c=b(),d=b();this._divRemTo(a,c,d);return[c,d]},modPow:function(a,c){var d=a.bitLength(),n,f=t(1),g;if(0>=d)return f;n=18>d?1:48>d?3:144>d?4:768>d?5:6;g=8>d?new Classic(c):c._isEven()?
new r(c):new u(c);var l=[],h=3,k=n-1,v=(1<<n)-1;l[1]=g.convert(this);if(1<n)for(d=b(),g.sqrTo(l[1],d);h<=v;)l[h]=b(),g.mulTo(d,l[h-2],l[h]),h+=2;for(var m=a.t-1,x,p=!0,L=b(),d=q(a[m])-1;0<=m;){d>=k?x=a[m]>>d-k&v:(x=(a[m]&(1<<d+1)-1)<<k-d,0<m&&(x|=a[m-1]>>this._DB+d-k));for(h=n;0==(x&1);)x>>=1,--h;0>(d-=h)&&(d+=this._DB,--m);if(p)l[x]._copyTo(f),p=!1;else{for(;1<h;)g.sqrTo(f,L),g.sqrTo(L,f),h-=2;0<h?g.sqrTo(f,L):(h=f,f=L,L=h);g.mulTo(L,l[x],f)}for(;0<=m&&0==(a[m]&1<<d);)g.sqrTo(f,L),h=f,f=L,L=h,0>
--d&&(d=this._DB-1,--m)}return g.revert(f)},modInverse:function(a){var b=a._isEven();if(this._isEven()&&b||0==a.signum())return c.ZERO;for(var d=a.clone(),n=this.clone(),f=t(1),q=t(0),g=t(0),r=t(1);0!=d.signum();){for(;d._isEven();)d._rShiftTo(1,d),b?(f._isEven()&&q._isEven()||(f._addTo(this,f),q._subTo(a,q)),f._rShiftTo(1,f)):q._isEven()||q._subTo(a,q),q._rShiftTo(1,q);for(;n._isEven();)n._rShiftTo(1,n),b?(g._isEven()&&r._isEven()||(g._addTo(this,g),r._subTo(a,r)),g._rShiftTo(1,g)):r._isEven()||
r._subTo(a,r),r._rShiftTo(1,r);0<=d.compareTo(n)?(d._subTo(n,d),b&&f._subTo(g,f),q._subTo(r,q)):(n._subTo(d,n),b&&g._subTo(f,g),r._subTo(q,r))}if(0!=n.compareTo(c.ONE))return c.ZERO;if(0<=r.compareTo(a))return r.subtract(a);if(0>r.signum())r._addTo(a,r);else return r;return 0>r.signum()?r.add(a):r},pow:function(a){return this._exp(a,new l)},gcd:function(a){var b=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>b.compareTo(a)){var c=b,b=a;a=c}var c=b.getLowestSetBit(),d=a.getLowestSetBit();
if(0>d)return b;c<d&&(d=c);0<d&&(b._rShiftTo(d,b),a._rShiftTo(d,a));for(;0<b.signum();)0<(c=b.getLowestSetBit())&&b._rShiftTo(c,b),0<(c=a.getLowestSetBit())&&a._rShiftTo(c,a),0<=b.compareTo(a)?(b._subTo(a,b),b._rShiftTo(1,b)):(a._subTo(b,a),a._rShiftTo(1,a));0<d&&a._lShiftTo(d,a);return a},isProbablePrime:function(b){var c,d=this.abs();if(1==d.t&&d[0]<=a[a.length-1]){for(c=0;c<a.length;++c)if(d[0]==a[c])return!0;return!1}if(d._isEven())return!1;for(c=1;c<a.length;){for(var f=a[c],q=c+1;q<a.length&&
f<n;)f*=a[q++];for(f=d._modInt(f);c<q;)if(0==f%a[c++])return!1}return d._millerRabin(b)}});return m.math.BigInteger})},"webview/admin/widget/HelpLink":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/Tooltip dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/i18n!../../nls/all dojo/text!./templates/HelpLink.html".split(" "),function(p,m,k,h,g,d,l,f){return h("webview/admin/widget/HelpLink",[m,p],{helpText:"",hideDelay:3E3,label:"",required:!1,showDelay:2E3,showingTooltip:!1,templateString:f,
tooltip:null,webviewStrings:l,_isLabel:!0,postCreate:function(){this.inherited(arguments);this.tooltip=new k({connectId:this.id,label:this.helpText,hideDelay:this.hideDelay,showDelay:this.showDelay})},_setHelpTextAttr:function(d){this.tooltip&&this.tooltip.set("label",d);this._set("helpText",d)},_setLabelAttr:function(f){d.toggle(this.requiredNode,"hidden",!this.required);this._isLabel&&(f+=":");g.set(this.labelNode,"innerHTML",f);this._set("label",f)},_setRequiredAttr:function(f){d.toggle(this.requiredNode,
"hidden",!f);this._set("required",f)},onClick:function(){this.tooltip.open(this.domNode);this.tooltip.set("state","HIDE TIMER")},destroy:function(){this.tooltip.destroy();this.inherited(arguments)}})})},"webview/admin/sites/AddSite":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/json dojo/on dojo/string dojo/text!webview/admin/sites/templates/addSite.html dojo/topic dojox/html/entities rc/_base/util ../_base ../widget/AdminSetupWizard ../../util/util dijit/form/TextBox ../widget/HelpLink ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){return m("webview/admin/sites/AddSite",[q],{auditLogObjectName:"Site",MAX_NAME_LENGTH:50,nameOfIndividual:"site",rootPath:null,site:null,templateString:r,_path:"sites/",constructor:function(){this.rootPath=t.getWindowLocationOrigin()+rc.rootPath},postCreate:function(){this.inherited(arguments);this.startWizard(u);var a=this.own(l(this.nameTB,"change",k.hitch(this,function(){this._onChangeSiteName();a[0].remove()})));this.own(l(this.urlPathTB,"change",k.hitch(this,
this._onChangeUrlPath)));"/"!==this.rootPath[this.rootPath.length-1]&&(this.rootPath+="/");this.baseUrlTB.set("value",this.rootPath);this.own(l(this.baseUrlTB,"change",k.hitch(this,this._onChangeBaseUrl,this.rootPath)));this.nameTB.set("validator",k.hitch(this,this._siteNameValidation));this.urlPathTB.set("validator",k.hitch(this,this._urlPathValidation))},_connectEvents:function(){},render:function(a){a.data.dataArray&&0<a.data.dataArray.length?this.createDataArray(a.data):console.error("webview/admin/_base.render():No Items Found",
a);this.onRender()},createDataArray:function(a){this.reset();p.forEach(a.dataArray,k.hitch(this,function(a){this._data.push({label:a.name,value:a.id})}));this.onRender()},getWizardUnknowns:function(){var a=this._getLastIndividual();return[{name:this.nameOfIndividual,value:a.value}]},onDestroyWizard:function(){this.inherited(arguments);this.domNode&&g.add(this.wizardNextContainer,"hidden")},onSendComplete:function(a){rc.session.updateAttributes();rc.setupWizard&&(this.hasIndividuals()?(a={siteId:this._getLastIndividual().value,
siteName:this.nameTB.get("value"),urlPath:this.urlPathTB.get("value")},rc.setupWizard.next(this.getWizardUnknowns(),a)):rc.setupWizard.reset())},onStartWizard:function(){this.inherited(arguments);if(rc.setupWizard){this.wizardOnNextFunction=this.wizardRememberSite;var a=rc.setupWizard.getStepParamsFromCookie(window.location.hash);null!==a&&(this.nameTB.set("value",a.siteName),this.baseUrlTB.set("value",a.baseUrl),this.urlPathTB.set("value",a.urlPath));g.remove(this.wizardNextContainer,"hidden")}else this.wizardOnNextFunction=
this._onAddItem},validateAdd:function(){var a=!1;this.nameTB.isValid()?this.urlPathTB.isValid()?this.baseUrlTB.isValid()?a=!0:c.publish("alert",{type:"error",message:this.errorStrings.emptyBaseUrl}):c.publish("alert",{type:"error",message:this.urlPathTB.invalidMessage}):c.publish("alert",{type:"error",message:this.nameTB.invalidMessage});return a},wizardRememberSite:function(a){a=rc.setupWizard.getStepParamsFromCookie(window.location.hash);null!==a&&a.siteId?this._deleteSite(a.siteId).then(k.hitch(this,
this._onAddItem)):this._onAddItem()},_addEditContent:function(){this.contentArea.setMainContent(this.addContainer)},_buildAddParams:function(){var c=""===this.urlPathTB.get("value")?a.escapeSpaces(this.nameTB.get("value"),"-"):this.urlPathTB.get("value");return{name:b.encode(this.nameTB.get("value")),urlName:encodeURIComponent(c),baseUrl:encodeURIComponent(this.baseUrlTB.get("value"))}},_deleteSite:function(a){return rc.xhr.request({type:"rest",method:"DELETE",path:this._path,params:d.stringify(this._buildDeleteParams([a]))}).then(k.hitch(this,
function(a){200!==a.data.errStatus&&(a.data.errMsg?this._displayErrorMessage(a.data.errMsg):console.error(this.declaredClass+" - _deleteSite(): Data returned is null",a.data))}))},_getErrorMessage:function(a){var b={msg:this.errorStrings.unexpectedError,type:"error",noticeType:"sticky"};switch(a){case 501:b.msg=this.errorStrings.duplicateSite;break;case 502:b.msg=this.errorStrings.siteDoesNotExist;break;case 504:b.msg=this.errorStrings.unexpectedError;break;case 506:b.msg=this.errorStrings.insufficientPriviledges;
break;case 507:b.msg=this.errorStrings.urlInUse;break;default:console.error(this.declaredClass+" - _getErrorMessage(): Unknown error status",a)}return b},_onAddItem:function(){if(this.validateAdd()){var a=this.nameTB.get("value"),a={name:b.encode(a)};k.mixin(a,this._buildAddParams());a={type:"rest",method:"POST",path:this._path,params:d.stringify(a)};this._send(a)}},_onChangeBaseUrl:function(a,b){b="undefined"===typeof b?"":b.trim();b!==a&&(""===b?b=a:"/"!==b[b.length-1]&&(b+="/"),this.baseUrlTB.set("value",
b),this._onChangeUrlPath())},_onChangeSiteName:function(){var b=a.escapeSpaces(this.nameTB.get("value"),"-");this.urlPathTB.set("value",b)},_onChangeUrlPath:function(){var c=decodeURIComponent(a.escapeSpaces(this.urlPathTB.get("value"),"-"));""===c.trim()&&(c=a.escapeSpaces(this.nameTB.get("value"),"-"));this.urlPathTB.set("value",c);"/"!==c[c.length-1]&&(c+="/");c=this.baseUrlTB.get("value")+c;h.set(this.urlPathText,"innerHTML",b.encode(c))},_setLabels:function(){},_siteNameValidation:function(a){var c=
!1;a=a.trim();try{""===a?this.nameTB.set("invalidMessage",this.errorStrings.emptySiteName):"admin"===a.toLowerCase()?this.nameTB.set("invalidMessage",this.errorStrings.adminReservedSite):null!==a.match(/[^a-z\d\-\sA-Z]/g)?this.nameTB.set("invalidMessage",f.substitute(this.errorStrings.xMustContainAlphaNumeric,[this.webviewStrings.siteName])):b.encode(a).length>this.MAX_NAME_LENGTH?this.nameTB.set("invalidMessage",f.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])):c=!0}catch(x){return console.error(this.declaredClass+
" - _siteNameValidation(): Unknown Error",x),!1}return c},_urlPathValidation:function(a){var b=!1;a=a.trim();a=a.toLowerCase();try{"admin"===a.toLowerCase()?this.urlPathTB.set("invalidMessage",this.errorStrings.adminReservedSite):null!==a.match(/[^a-z\d\-\sA-Z]/g)?this.urlPathTB.set("invalidMessage",f.substitute(this.errorStrings.xMustContainAlphaNumeric,[this.webviewStrings.urlPath])):b=!0}catch(x){return console.error(this.declaredClass+" - _urlPathValidation(): Unexpected Error",x),!1}return b}})})},
"webview/admin/systems/Systems":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/json dojo/text!webview/admin/systems/templates/systems.html dojo/topic ../_base dijit/form/Button ../../widget/MultiSelectBox ../../widget/WebviewContentPane".split(" "),function(p,m,k,h,g,d,l){return m("webview/admin/systems/Systems",[l],{templateString:g,_path:"systems/",auditLogObjectName:"System",createDataArray:function(d){this.reset();d=d.dataArray.sort(function(d,c){return d.name.localeCompare(c.name)});
p.forEach(d,k.hitch(this,function(d){rc.session._attributes.permittedSystems.find(function(c){return c.id===d.id})&&this._data.push({label:d.name,value:d.id})}));this._multiSelect.replaceAll(this._data);this._multiSelect.setSize(this._data.length>this._maxInMultiSelect?this._maxInMultiSelect:this._data.length);this.onRender()},_deleteSystem:function(f){rc.xhr.request({type:"rest",method:"DELETE",path:this._path,params:h.stringify(this._buildDeleteParams([f.system]))}).then(k.hitch(this,function(f){200===
f.data.errStatus?(this.createDataArray(f.data),d.publish("updateNavTree")):f.data.errMsg?this._displayErrorMessage(f.data.errMsg):console.error(this.declaredClass+" - _deleteSystem(): Data returned is null",f)}))},_editItem:function(){window.location.hash="#system?site\x3d"+encodeURIComponent(this.site)+"\x26system\x3d"+encodeURIComponent(this.selectedItem)},_setLabels:function(){this._multiSelect.setLabel(this.webviewStrings.wvSystems+":");this._multiSelect.setHint(this.webviewStrings.msHint);this.addButton.set("label",
this.webviewStrings.addSystem.toUpperCase());this.deleteButton.set("label",this.webviewStrings.rcbDelete.toUpperCase());this.editButton.set("label",this.webviewStrings.rcbEdit.toUpperCase())},_getErrorMessage:function(d){d=d.errStatus;var f={msg:this.errorStrings.unexpectedError,type:"error",noticeType:"sticky"};switch(d){case 403:f.msg=this.errorStrings.notAuthenticated;break;case 501:f.msg=this.errorStrings.duplicateSystem;break;case 502:f.msg=this.errorStrings.invalidSystemLogin;break;case 503:f.msg=
this.errorStrings.sysConnectFailed;break;case 504:f.msg=this.errorStrings.unexpectedError;break;case 505:f.msg=this.errorStrings.systemDoesNotExist;break;case 506:f.msg=this.errorStrings.insufficientPriviledges;break;case 510:f.msg=this.errorStrings.addInProgress;f.type="info";break;case 511:f.msg=this.errorStrings.userCancelled;f.type="info";break;default:console.error("Systems.js - _getErrorMessage(): Unknown error status",d)}return f},fetch:function(){if(!this._beginUpdate())return null;var d=
{type:"rest",method:"GET",preventCache:!0,path:this._path};k.mixin(d,this._buildFetchParams());d=rc.xhr.request(d);d.then(k.hitch(this,function(d){d.data&&200===d.data.errStatus?(this.render(d),this.onInitSuccess()):d.data&&505===d.data.errStatus?this._onInitError(this._getErrorMessage(d.data)):(d.data?this._displayErrorMessage(d.data):console.error(this.declaredClass+" - fetch(): Data returned is null",d),this.onInitSuccess());return d}),k.hitch(this,function(d){this._onInitError(d);return d})).always(k.hitch(this,
this._endUpdate));return d},_buildFetchParams:function(){return{siteId:this.site}},_buildDeleteParams:function(d){return{systemNames:d,siteId:this.site}},_goToAdd:function(){window.location.hash="#addSystem?site\x3d"+encodeURIComponent(this.site)},onSendComplete:function(d){this.emit("sendComplete",d);rc.setupWizard||this.hasIndividuals()||this._goToAdd()},_displayErrorMessage:function(f){f=this._getErrorMessage(f);d.publish(f.noticeType,{message:f.msg,type:f.type})}})})},"webview/admin/systems/System":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!../../nls/errorMessages dojo/i18n!rc/nls/all dojo/json dojo/on dojo/promise/all dojo/string dojo/text!webview/admin/systems/templates/system.html dojo/topic rc/util/notices ./_SystemBase ../../xhrEnhanced webview/admin/widget/ProgressDialog ./settingsComponents/AdvancedSettings ./settingsComponents/ArchiveSettings ./settingsComponents/ConnectionSettings ./SystemToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return p("webview/admin/systems/System",[u],{rcStrings:d,system:null,systemName:null,templateString:b,_dirty:!1,_jobFileReminder:!1,_path:"system/",_statusPath:"system/status",postCreate:function(){webview.auditUtil.setContextDataWithSiteId(this.site,[{systemId:Number(this.system),objectName:"#System"+this.system}],this.title);if(!rc.session._attributes.permittedSystems.find(m.hitch(this,function(a){return a.id===Number(this.system)}))){if(0<rc.session._attributes.SiteMapArray.length)var a=
rc.session._attributes.SiteMapArray[0].systems.find(m.hitch(this,function(a){return a.systemId===Number(this.system)}));setTimeout(m.hitch(this,function(){var b=this.safeError(null,{name:this.rcStrings.permissionDenied,message:c.substitute(this.errorStrings.systemAccessError,[a?a.systemName:this.system]),suggestion:""});this._onInitError(b)}),this._pollInterval);return null}this._setupWatchers();this._setupCommitButtons();this.inherited(arguments);this.fetch();this.connectionSettings.setFieldsWidth(10,
0);this.archiveSettings.setFieldsWidth(15,0);this.advancedSettings.setFieldsWidth(20,0)},fetch:function(){this.toolbar.set("disabled",!0);a.get(this._path,{handleAs:"json",preventCache:!0,query:{systemId:this.system}}).then(m.hitch(this,this._fetchComplete),m.hitch(this,this._onInitError)).always(m.hitch(this.toolbar,this.toolbar.set,"disabled",!1))},fillFields:function(a){this.systemName=a.sysName;this.connectionSettings.set("value",a.properties);this.archiveSettings.set("value",a.archive);this.advancedSettings.set("value",
a.advanced)},resize:function(){this.inherited(arguments);this.connectionSettings.setFieldsWidth(0,30);this.advancedSettings.setFieldsWidth(0,45);this.archiveSettings.setFieldsWidth(0,30)},_checkValidation:function(){return this.connectionSettings.isValid()&&this.archiveSettings.isValid()&&this.advancedSettings.isValid()},_displayError:function(a){a===this.SuccessCode&&this._jobFileReminder?this._displaySuccessfulSave():this.inherited(arguments)},_displaySuccessfulSave:function(){var a=m.clone(this._ErrorMessageMap[this.SuccessCode.toString()]);
a.message+=" - "+c.substitute(this.errorStrings.jobFileReminder,["Help/Index/FileSync"]);a.noticeType="sticky";t.publish(a.noticeType,{message:a.message,type:a.type})},_fetchComplete:function(a){var b=!1;a?a.errStatus===this.SuccessCode?(this.fillFields(a),b=!0):(this._displayError(a.errStatus),505===a.errStatus?this._onInitError(this._ErrorMessageMap[a.errStatus].message):b=!0):(this._onInitError(),console.error(this.declaredClass+" - fetch(): Data returned is null",a));b&&this._firstLoad&&(this.onInitSuccess(),
this._firstLoad=!1)},_getSaveParameters:function(){var a=new k;r({connectionSettings:this.connectionSettings.get("value"),archiveSettings:this.archiveSettings.get("value"),advancedSettings:this.advancedSettings.get("value")}).then(m.hitch(this,function(b){a.resolve({siteId:this.site,systemId:this.system,properties:l.stringify(b.connectionSettings),archive:l.stringify(b.archiveSettings),advanced:l.stringify(b.advancedSettings)})}));return a.promise},_protocolChanged:function(a,b,c){"rcp"===b&&h.remove(this.rightSideContainer,
"hidden");"rcp"===c&&h.add(this.rightSideContainer,"hidden");this.advancedSettings.set(a,b,c)},_reset:function(){this.connectionSettings.reset();this.archiveSettings.reset();this.advancedSettings.reset();this.fetch()},_save:function(){this.toolbar.set("disabled",!0);m.mixin(this._ErrorMessageMap,{510:{message:g.saveInProgress,type:"info",noticeType:"sticky"}});this._checkValidation()?this._getSaveParameters().then(m.hitch(this,this._sendSystem)):this.toolbar.set("disabled",!1)},_saveComplete:function(a){q.widget.clear();
this._saveDialog.onCancel();a.errStatus===this.SuccessCode&&(this._reset(),this.fillFields(a),t.publish("updateNavTree"));this._displayError(a.errStatus)},_sendSystem:function(b){this.saveDeferred=new k;this._jobFileReminder=!0;q.widget.clear();this._saveDialog=new n;this._saveDialog.showWithoutBody(!0,g.saveInProgress);a.post(this._path,{handleAs:"json",data:b,preventCache:!0}).then(m.hitch(this,this._checkProgress));this.saveDeferred.then(m.hitch(this,this._saveComplete)).always(m.hitch(this.toolbar,
this.toolbar.set,"disabled",!1));return this.saveDeferred},_setDirty:function(a){(this._isDirty=a)?this.makeDirty():this.makeClean();this.toolbar.set("dirty",a)},_settingWidgetDirtied:function(a,b,c){if(c)this._setDirty(c);else{a=!1;b=[this.connectionSettings,this.archiveSettings];for(var d=0;d<b.length;++d)if(b[d].get("dirty")){a=!0;break}a||this._setDirty(c)}},_setupCommitButtons:function(){this.own(f(this.toolbar,"save",m.hitch(this,this._save)),f(this.toolbar,"cancel",m.hitch(this,this._reset)))},
_setupWatchers:function(){this.own(this.connectionSettings.watch("dirty",m.hitch(this,this._settingWidgetDirtied)),this.connectionSettings.watch("protocol",m.hitch(this,this._protocolChanged)),this.archiveSettings.watch("dirty",m.hitch(this,this._settingWidgetDirtied)),this.advancedSettings.watch("dirty",m.hitch(this,this._settingWidgetDirtied)))}})})},"webview/admin/systems/_SystemBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/topic ../_Widget ../../xhrEnhanced".split(" "),
function(p,m,k,h,g,d,l){return p("webview/admin/systems/_SystemBase",[d],{webviewStrings:k,_ErrorMessageMap:{"-2":{message:h.systemError_AlreadyConnected,noticeType:"sticky",type:"error"},"-3":{message:h.systemError_NotConnected,noticeType:"sticky",type:"error"},"-7":{message:h.systemError_UnknownConnection,noticeType:"sticky",type:"error"},"-40":{message:h.systemError_BadParam,noticeType:"sticky",type:"error"},"-44":{message:h.systemError_NetNumExists,noticeType:"sticky",type:"error"},"-200":{message:h.systemError_WinSockFailed,
noticeType:"sticky",type:"error"},"-201":{message:h.systemError_WinSockInitFailed,noticeType:"sticky",type:"error"},"-202":{message:h.systemError_UDPConnectError,noticeType:"sticky",type:"error"},"-203":{message:h.systemError_IPStackFailure,noticeType:"sticky",type:"error"},"-204":{message:h.systemError_TCPIPSocketFailure,noticeType:"sticky",type:"error"},"-205":{message:h.systemError_BadIPAddress,noticeType:"sticky",type:"error"},"-300":{message:h.systemError_BBMDFailure,noticeType:"sticky",type:"error"},
"-301":{message:h.systemError_NoBBMDConnection,noticeType:"sticky",type:"error"},"-302":{message:h.systemError_BadPTPPassword,noticeType:"sticky",type:"error"},"-303":{message:h.systemError_PTPDisconnectRequest,noticeType:"sticky",type:"error"},"-304":{message:h.systemError_TCPConnectionExists,noticeType:"sticky",type:"error"},"-305":{message:h.systemError_SocketClosedWithoutWarning,noticeType:"sticky",type:"error"},"-306":{message:h.systemError_BadRemoteAccessCredentials,noticeType:"sticky",type:"error"},
"-1200":{message:h.systemError_SSLCertificateFailure,noticeType:"sticky",type:"error"},1:{message:h.systemError_SystemTimeout,noticeType:"sticky",type:"error"},2:{message:h.systemError_CommPortBusy,noticeType:"sticky",type:"error"},3:{message:h.systemError_FileError,noticeType:"sticky",type:"error"},4:{message:h.systemError_CommRoutineError,noticeType:"sticky",type:"error"},5:{message:h.systemError_ControllerResponseIncorrect,noticeType:"sticky",type:"error"},6:{message:h.systemError_StateMachineReset,
noticeType:"sticky",type:"error"},7:{message:h.systemError_PanelHasNothingToSend,noticeType:"sticky",type:"error"},200:{message:h.successfulSave,noticType:"alert",type:"success"},501:{message:h.duplicateSystem,noticeType:"sticky",type:"error"},502:{message:h.invalidSystemLogin,noticeType:"sticky",type:"error"},503:{message:h.sysConnectFailed,noticeType:"sticky",type:"error"},504:{message:h.unexpectedError,noticeType:"sticky",type:"error"},505:{message:h.systemDoesNotExist,noticeType:"sticky",type:"error"},
506:{message:h.insufficientPriviledges,noticeType:"sticky",type:"error"},510:{message:h.saveInProgress,noticeType:"sticky",type:"info"},511:{message:h.userCancelled,noticeType:"alert",type:"info"},513:{message:h.jobFileMissing,noticeType:"sticky",type:"error"},514:{message:h.duplicateWVDeviceIDs,noticeType:"sticky",type:"error"},515:{message:h.duplicateFSDeviceIDs,noticeType:"sticky",type:"error"}},_pollInterval:500,_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_checkProgress:function(d){this._processId=
d.processId;510===d.errStatus?this._pollForStatus():this.saveDeferred.resolve(d)},_displayError:function(d){"undefined"===typeof this._ErrorMessageMap[d.toString()]&&(d=this.UnexpectedCode);d=this._ErrorMessageMap[d.toString()];g.publish(d.noticeType,{message:d.message,type:d.type})},_pollForStatus:function(){this._clearPollingTimer();this._pollForStatusTimer=this.defer(m.hitch(this,function(){l.get(this._statusPath,{handleAs:"json",preventCache:!0,query:{processId:this._processId||-1,abort:0}}).then(m.hitch(this,
this._checkProgress),m.hitch(this.saveDeferred,this.saveDeferred.reject))}),this._pollInterval)}})})},"webview/admin/widget/ProgressDialog":function(){define("dijit/Dialog dojo/_base/declare dojo/dom-class dojo/i18n!../../../rc/nls/all dojo/i18n!../../nls/errorMessages dojo/text!webview/admin/widget/templates/ProgressDialog.html".split(" "),function(p,m,k,h,g,d){return m("webview/admin/widget/ProgressDialog",[p],{errorStrings:g,webviewAllStrings:h,templateString:d,postCreate:function(){this.inherited(arguments);
this._resetProgress()},onCancel:function(){this.emit("closed",{});this.hide()},onHide:function(){this._resetProgress()},show:function(d,f){this.inherited(arguments);d?(this.progressRemark.innerHTML=d,k.remove(this.progressRemark,"hidden"),k.remove(this.progressText,"hidden")):(k.add(this.progressText,"hidden"),k.add(this.progressRemark,"hidden"));k.toggle(this.progressText,"hidden",!0===f)},showWithoutBody:function(d,f){this.show("",d);f&&(this.titleText.textContent=f)},showCompleted:function(){this.showStatus(0)},
showStatus:function(d){isNaN(d)||(this.progressText.innerHTML=d+"%")},_resetProgress:function(){this.progressText.innerHTML=""}})})},"webview/admin/systems/settingsComponents/AdvancedSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/on dojo/text!./templates/AdvancedSettings.html ./_SystemSettingsBase dijit/form/CheckBox dijit/form/NumberTextBox ../../widget/HelpLink".split(" "),function(p,m,k,h,g,d,l){return p("webview/admin/systems/settingsComponents/AdvancedSettings",
[l],{templateString:d,_defaultValues:{controllerID:"",webviewID:"",fileSyncID:"",apduTimeout:6E3,apduSeg:5E3,apduRetries:1,fixedPort:47808},_maxAcceptableLabelWidth:450,postCreate:function(){this.own(g(this.enablefixedBACnetPort,"change",m.hitch(this,this._toggleStaticPort)));this.own(g(this.enabledFileServer,"change",m.hitch(this,this._enableFileServer)))},setFieldsWidth:function(d,g){var c=[this.controllerIDLabel,this.webviewIDLabel,this.fixedPortLabel.domNode,this.fileSyncIDLabel.domNode,this.fileServerNetworkNumLabel.domNode];
this.setLabelWidths(c,d);this.setInputFieldsWidth(this.controllerIdContainer,this.controllerIDLabel,this.controllerIDTB,g);this.setInputFieldsWidth(this.bacnetPortContainer,this.fixedPortLabel,this.fixedBACnetPortTBCBContainer,g);this.setInputFieldsWidth(this.webviewIDContainer,this.webviewIDLabel,this.webviewIDTB,g);this.setInputFieldsWidth(this.fileServerDeviceIDContainer,this.fileSyncIDLabel,this.fileSyncIDTB,g);this.setInputFieldsWidth(this.fileServerNetworkNumberContainer,this.fileServerNetworkNumLabel,
this.fileServerNetworkNumTB,g);c=[this.apduTimeoutLabel,this.apduSegmentLabel,this.apduRetriesLabel];this.setLabelWidths(c,d);this.setInputFieldsWidth(this.apduTimeout,this.apduTimeoutLabel,this.apduTimeoutTB,0);this.setInputFieldsWidth(this.apduSegmentTimeout,this.apduSegmentLabel,this.apduSegmentTB,0);this.setInputFieldsWidth(this.apduRetries,this.apduRetriesLabel,this.apduRetriesTB,0)},_getValueAttr:function(){var d=new k;d.resolve({controllerID:isNaN(this.controllerIDTB.get("value"))?0:this.controllerIDTB.get("value"),
webviewID:isNaN(this.webviewIDTB.get("value"))?0:this.webviewIDTB.get("value"),fixedPort:isNaN(this.fixedBACnetPortTB.get("value"))?0:this.fixedBACnetPortTB.get("value"),fileSyncID:isNaN(this.fileSyncIDTB.get("value"))?0:this.fileSyncIDTB.get("value"),fileServerNetworkNumber:this.fileServerNetworkNumTB.get("value"),apduTimeout:this.apduTimeoutTB.get("value"),apduSeg:this.apduSegmentTB.get("value"),apduRetries:this.apduRetriesTB.get("value"),enableFileSync:this.enabledFileServer.get("checked")});return d.promise},
_setProtocolAttr:function(d,g){this._toggleProtocol(d,!1);this._toggleProtocol(g,!0);this._set("protocol",g)},_setValueAttr:function(d){this.controllerIDTB.set("value",d.controllerID?d.controllerID:this._defaultValues.controllerID);this.webviewIDTB.set("value",d.webviewID?d.webviewID:this._defaultValues.webviewID);var f=!1;d.fixedPort&&0<d.fixedPort&&(f=!0);this.fixedBACnetPortTB.set("disabled",!f);this.enablefixedBACnetPort.set("checked",f);this.fixedBACnetPortTB.set("value",null!==d.fixedPort&&
f?d.fixedPort:"");d.hasOwnProperty("enableFileSync")?(this.enabledFileServer.set("checked",d.enableFileSync),this._enableFileServer(d.enableFileSync)):(this.enabledFileServer.set("checked",!0),this._enableFileServer(!0));this.fileSyncIDTB.set("value",d.fileSyncID?d.fileSyncID:this._defaultValues.fileSyncID);this.fileServerNetworkNumTB.set("value",d.fileServerNetworkNumber);this.apduTimeoutTB.set("value",null!==d.apduTimeout?d.apduTimeout:this._defaultValues.apduTimeout);this.apduSegmentTB.set("value",
null!==d.apduSeg?d.apduSeg:this._defaultValues.apduSeg);this.apduRetriesTB.set("value",null!==d.apduRetries?d.apduRetries:this._defaultValues.apduRetries);this._set("value",d);this._firstLoad&&(this._setupWatchers(),this._firstLoad=!1)},_setupWatchers:function(){this._changeWatchers.push(this.controllerIDTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.webviewIDTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.enablefixedBACnetPort.watch("checked",
m.hitch(this,this._onChange)));this._changeWatchers.push(this.enabledFileServer.watch("checked",m.hitch(this,this._onChange)));this._changeWatchers.push(this.fixedBACnetPortTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.fileSyncIDTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.fileServerNetworkNumTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.apduTimeoutTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.apduSegmentTB.watch("value",
m.hitch(this,this._onChange)));this._changeWatchers.push(this.apduRetriesTB.watch("value",m.hitch(this,this._onChange)))},_toggleBVPNFields:function(d){h.toggle(this.controllerIdRequiredNote,"hidden",!d);this.controllerIDTB.set("required",d)},_toggleDualFields:function(d){h.toggle(this.controllerIdContainer,"hidden",d)},_toggleProtocol:function(d,g){switch(d){case "dual":this._toggleDualFields(g);break;case "remote":this._toggleBVPNFields(g)}},_validate:function(){var d=this.get("protocol");if("rcp"===
d)return{isValid:!0,message:this.errorStrings.successfulValidate};d="remote"===d||"bacnet"===d;if(!this.controllerIDTB.isValid())return{isValid:!1,message:this.errorStrings.invalidController};if(!this.webviewIDTB.isValid())return{isValid:!1,message:this.errorStrings.invalidWebview};var g=isNaN(this.controllerIDTB.get("value"))?0:this.controllerIDTB.get("value"),c=isNaN(this.webviewIDTB.get("value"))?0:this.webviewIDTB.get("value"),b=isNaN(this.fileSyncIDTB.get("value"))?0:this.fileSyncIDTB.get("value");
return!d||0===c||b!==g&&b!==c?this.fixedBACnetPortTB.get("disabled")||this.fixedBACnetPortTB.isValid()?this.fileSyncIDTB.isValid()?!d||0===b||b!==g&&b!==c?this.fileServerNetworkNumTB.isValid()?this.apduTimeoutTB.isValid()?this.apduSegmentTB.isValid()?this.apduRetriesTB.isValid()?{isValid:!0,message:this.errorStrings.successfulValidate}:{isValid:!1,message:this.errorStrings.invalidRetries}:{isValid:!1,message:this.errorStrings.invalidSegment}:{isValid:!1,message:this.errorStrings.invalidTimeout}:{isValid:!1,
message:this.errorStrings.invalidFileServerNetworkNum}:{isValid:!1,message:this.errorStrings.duplicateFSDeviceIDs}:{isValid:!1,message:this.errorStrings.invalidFileSync}:{isValid:!1,message:this.errorStrings.invalidPort}:{isValid:!1,message:this.errorStrings.duplicateWVDeviceIDs}}})})},"webview/admin/systems/settingsComponents/_SystemSettingsBase":function(){define("dojo/dom-style dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/i18n!../../../nls/all dojo/i18n!../../../nls/errorMessages dojo/topic".split(" "),
function(p,m,k,h,g,d,l,f){return g("webview/admin/systems/settingsComponents/_SystemSettingsBase",[k,m,h],{baseClass:"",dirty:!1,errorStrings:l,webviewStrings:d,_changeWatchers:null,_firstLoad:!0,_maxAcceptableLabelWidth:350,_maxAcceptableInputWidth:400,_minAcceptableInputWidth:45,constructor:function(){this._changeWatchers=[]},isValid:function(){var d=this._validate();d.isValid||f.publish("sticky",{type:"error",message:d.message});return d.isValid},reset:function(){this._clearWatchers();this.set("dirty",
!1);this._firstLoad=!0},setLabelWidths:function(d,c){var b=[],f;for(f=0;f<d.length;++f)b.push(d[f].clientWidth);b=Math.max.apply(Math,b)+(c||0);b>this._maxAcceptableLabelWidth?b=this._maxAcceptableLabelWidth:b<this._minAcceptableInputWidth&&(b=this._minAcceptableInputWidth);for(f=0;f<d.length;++f)p.set(d[f],"width",b+"px");return b},setInputFieldsWidth:function(d,c,b,f){d=Math.min(("undefined"!==typeof d.domNode?d.domNode.clientWidth:d.clientWidth)-("undefined"!==typeof c.domNode?c.domNode.clientWidth:
c.clientWidth)-(f||0),this._maxAcceptableInputWidth);p.set("undefined"!==typeof b.domNode?b.domNode:b,"width",d+"px");return d},_clearWatchers:function(){this._changeWatchers.forEach(function(d){d.remove()});this._changeWatchers=[]},_onChange:function(){this.set("dirty",!0)},_toggleStaticPort:function(d){this.fixedBACnetPortTB.set({disabled:!d,required:d});var c=isNaN(this.fixedBACnetPortTB.get("value"))?this._defaultValues.fixedPort:this.fixedBACnetPortTB.get("value");d?this.fixedBACnetPortTB.set("value",
c):this.fixedBACnetPortTB.set("value","")},_enableFileServer:function(d){this.fileSyncIDTB.set({disabled:!d});this.fileServerNetworkNumTB.set({disabled:!d})}})})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(p,m,k,h,g,d){var l=function(d){d=d||{};var c=k.getLocalization("dojo.cldr","number",k.normalizeLocale(d.locale)),b=d.pattern?d.pattern:c[(d.type||"decimal")+"Format"];d="number"==typeof d.places?
d.places:"string"===typeof d.places&&0<d.places.length?d.places.replace(/.*,/,""):-1!=b.indexOf(".")?b.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:c.decimal,places:d}},f=p("dijit.form.NumberTextBoxMixin",null,{pattern:function(d){return"("+(this.focused&&this.editOptions?this._regExpGenerator(m.delegate(d,this.editOptions))+"|":"")+this._regExpGenerator(d)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:g.format,_regExpGenerator:g.regexp,_decimalInfo:l(),postMixInProperties:function(){this.inherited(arguments);
this._set("type","text")},_setConstraintsAttr:function(d){var c="number"==typeof d.places?d.places:0;c&&c++;"number"!=typeof d.max&&(d.max=9*Math.pow(10,15-c));"number"!=typeof d.min&&(d.min=-9*Math.pow(10,15-c));this.inherited(arguments,[d]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value);this._decimalInfo=l(d)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var d=this.get("value");"number"!=typeof d||isNaN(d)||(d=this.format(d,this.constraints),void 0!==
d&&(this.textbox.value=d));this.inherited(arguments)}},format:function(d,c){var b=String(d);if("number"!=typeof d)return b;if(isNaN(d))return"";if(!("rangeCheck"in this&&this.rangeCheck(d,c))&&!1!==c.exponent&&/\de[-+]?\d/i.test(b))return b;this.editOptions&&this.focused&&(c=m.mixin({},c,this.editOptions));return this._formatter(d,c)},_parser:g.parse,parse:function(d,c){var b=m.mixin({},c,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=b.places){var f=b.places,f="number"===
typeof f?f:Number(f.split(",").pop());b.places="0,"+f}b=this._parser(d,b);this.editOptions&&this.focused&&isNaN(b)&&(b=this._parser(d,c));return b},_getDisplayedValueAttr:function(){var d=this.inherited(arguments);return isNaN(d)?this.textbox.value:d},filter:function(d){if(null==d||"string"==typeof d&&""==d)return NaN;"number"!=typeof d||isNaN(d)||0==d||(d=g.round(d,this._decimalInfo.places));return this.inherited(arguments,[d])},serialize:function(d,c){return"number"!=typeof d||isNaN(d)?"":this.inherited(arguments)},
_setBlurValue:function(){var d=m.hitch(m.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(d,!0)},_setValueAttr:function(d,c,b){if(void 0!==d&&void 0===b)if(b=String(d),"number"==typeof d)if(isNaN(d))b="";else{if("rangeCheck"in this&&this.rangeCheck(d,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(b))b=void 0}else d?d=void 0:(b="",d=NaN);this.inherited(arguments,[d,c,b])},_getValueAttr:function(){var d=this.inherited(arguments);if(isNaN(d)&&""!==this.textbox.value){if(!1!==
this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+g._realNumberRegexp(m.delegate(this.constraints))+"$")).test(this.textbox.value))return d=Number(this.textbox.value),isNaN(d)?void 0:d}else return d},isValid:function(d){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var c=this.get("value");return!isNaN(c)&&this.rangeCheck(c,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):
!1},_isValidSubset:function(){var d="number"==typeof this.constraints.min,c="number"==typeof this.constraints.max,b=this.get("value");if(isNaN(b)||!d&&!c)return this.inherited(arguments);var f=b|0,q=0>b,g=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),a=(this.maxLength||20)-this.textbox.value.length,n=g?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",f=g?f+"."+n:f+"",a=h.rep("9",a),g=b;q?g=Number(f+a):b=Number(f+a);return!(d&&b<this.constraints.min||c&&g>this.constraints.max)}});
p=p("dijit.form.NumberTextBox",[d,f],{baseClass:"dijitTextBox dijitNumberTextBox"});p.Mixin=f;return p})},"webview/admin/systems/settingsComponents/ArchiveSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!rc/nls/all dojo/json dojo/on dojo/text!./templates/ArchiveSettings.html dojo/topic rc/util/notices ./_SystemSettingsBase ../../../util/util ../../../xhrEnhanced dijit/form/Button dijit/form/CheckBox dijit/form/ValidationTextBox".split(" "),function(p,
m,k,h,g,d,l,f,r,c,b,t,q){return p("webview/admin/systems/settingsComponents/ArchiveSettings",[b],{rcStrings:g,templateString:f,_defaultValues:{enabled:!1,serverName:"(local)\\RCARCHIVE",dbName:"RCAUDIT",username:"sa"},_inProgressCode:510,_pollRate:500,_testConnectionPath:"TestConnect",_unexpectedErrorCode:504,_userCancelledCode:511,constructor:function(){this._testResultMap={200:{message:this.errorStrings.successfulTest,noticeType:"alert",type:"success"},404:{message:this.errorStrings.testingServer,
noticeType:"sticky",type:"error"},501:{message:this.errorStrings.invalidLogin,noticeType:"sticky",type:"error"},502:{message:this.errorStrings.invalidServer,noticeType:"sticky",type:"error"},503:{message:this.errorStrings.invalidDatabase,noticeType:"sticky",type:"error"},504:{message:this.errorStrings.unexpectedError,noticeType:"sticky",type:"error"},510:{message:this.errorStrings.testInProgress,noticeType:"alert",type:"info"},511:{message:this.errorStrings.userCancelled,noticeType:"alert",type:"info"}}},
postCreate:function(){this.own(l(this.enableRC,"change",m.hitch(this,this.set,"enabled")))},setFieldsWidth:function(b,a){this.setLabelWidths([this.serverNameLabel,this.dbNameLabel,this.dbUsernameLabel,this.dbPassLabel],b);this.setInputFieldsWidth(this.serverName,this.serverNameLabel,this.serverNameTB,a);this.setInputFieldsWidth(this.databaseName,this.dbNameLabel,this.dbNameTB,a);this.setInputFieldsWidth(this.username,this.dbUsernameLabel,this.dbUsernameTB,a);this.setInputFieldsWidth(this.password,
this.dbPassLabel,this.dbPassTB,a)},_getValueAttr:function(){var b=new k;t.getRSAKeys(!1).then(m.hitch(this,function(a){var c=this.dbPassTB.get("value");b.resolve({enabled:this.get("enabled"),systemId:this.system,serverName:this.serverNameTB.get("value").toString(),dbName:encodeURIComponent(this.dbNameTB.get("value").toString()),username:this.dbUsernameTB.get("value").toString(),pass:0===c.length?c:t.encrypt(c,a)})}));return b.promise},_setEnabledAttr:function(b){this._setRequired(b);this._set("enabled",
b)},_setValueAttr:function(b){this.enableRC.set("checked",b.enabled);this.serverNameTB.set("value",null===b.serverName?this._defaultValues.serverName:m.trim(b.serverName));this.dbNameTB.set("value",null===b.dbName?this._defaultValues.dbName:m.trim(b.dbName));this.dbUsernameTB.set("value",null===b.username?this._defaultValues.username:m.trim(b.username));this.dbPassTB.set("value","");this._set("value",b);this._firstLoad&&(this._setupWatchers(),this._firstLoad=!1)},_cancelConnectionTest:function(){this._clearPollingTimer();
q.get(this._testConnectionPath+"/status",{handleAs:"json",preventCache:!0,query:{processId:this._processId||-1,abort:1}});this._processId=-1},_checkProgress:function(b){this._processId=b.processId;b.errStatus===this._inProgressCode?this._pollForStatus():this.saveDeferred.resolve(b)},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_pollForStatus:function(){this._clearPollingTimer();this._pollForStatusTimer=this.defer(m.hitch(this,function(){q.get(this._testConnectionPath+"/status",
{handleAs:"json",preventCache:!0,query:{processId:this._processId||-1,abort:0}}).then(m.hitch(this,this._checkProgress),m.hitch(this.saveDeferred,this.saveDeferred.reject))}),this._pollRate)},_sendTestConnection:function(b){this._toggleCancelTestButton(!0);this.saveDeferred=new k;q.post(this._testConnectionPath,{handleAs:"json",preventCache:!0,data:{testSettings:d.stringify(b)}}).then(m.hitch(this,this._checkProgress));var a=l(this.cancelTestButton,"click",m.hitch(this,function(){this._cancelConnectionTest();
this.saveDeferred.cancel("User Cancelled");this.saveDeferred=null;a.remove()}));this.saveDeferred.then(m.hitch(this,function(a){this._showTestResults(a.errStatus);this._toggleCancelTestButton(!1)}),m.hitch(this,function(a){"User Cancelled"===a?this._showTestResults(this._userCancelledCode):(this._showTestResults(this._unexpectedErrorCode),console.error(this.declaredClass+" - _sendTestConnection(): Unexpected error",a.message,a));this._toggleCancelTestButton(!1)}))},_setRequired:function(b){this.serverNameTB.set("required",
b);this.dbNameTB.set("required",b);this.dbUsernameTB.set("required",b)},_setupWatchers:function(){this._changeWatchers.push(this.enableRC.watch("checked",m.hitch(this,this._onChange)));this._changeWatchers.push(this.serverNameTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.dbNameTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.dbUsernameTB.watch("checked",m.hitch(this,this._onChange)));this._changeWatchers.push(this.dbPassTB.watch("value",
m.hitch(this,this._onChange)))},_showTestResults:function(b){c.widget.clear();"undefined"===typeof this._testResultMap[b]&&b===this._unexpectedErrorCode;b=this._testResultMap[b];r.publish(b.noticeType,{message:b.message,type:b.type})},_testConnection:function(){this.get("value").then(m.hitch(this,function(b){b.systemId=this.system;this._showTestResults(this._inProgressCode);this._sendTestConnection(b)}))},_toggleCancelTestButton:function(b){h.toggle(this.cancelTestButton.domNode,"hidden",!b);h.toggle(this.testConnectionButton.domNode,
"hidden",b)},_validate:function(){if(this.get("enabled")){if(!this.serverNameTB.isValid())return{isValid:!1,message:this.errorStrings.emptyServer};if(!this.dbNameTB.isValid())return{isValid:!1,message:this.errorStrings.emptyNameField};if(!this.dbUsernameTB.isValid())return{isValid:!1,message:this.errorStrings.archiveLoginUserEmpty};if(!this.dbPassTB.isValid())return{isValid:!1,message:this.errorStrings.loginPassEmpty}}return{isValid:!0,message:this.errorStrings.successfulValidate}}})})},"webview/admin/systems/settingsComponents/ConnectionSettings":function(){define("dijit/Dialog dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/on dojo/query dojo/store/Memory dojo/string dojo/text!./templates/ConnectionSettings.html dojox/html/entities ./_SystemSettingsBase ../ManageCertificatesDialog ../../widget/FileSelector ../../../util/util dijit/form/Button dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/ValidationTextBox ../../widget/HelpLink".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return m("webview/admin/systems/settingsComponents/ConnectionSettings",[q],{defaultName:"server2023.crt",templateString:b,_certificateStore:null,_jobFileDialog:null,_jobFileSelector:null,_manageCertificateDialog:null,_protocolMap:{bacnet:"bacnetProtocolType",rcp:"rcpProtocolType",dual:"dualProtocolType",remote:"remoteProtocolType"},_remoteAccessCertificateDialog:null,_rootName:null,_rootThumbprint:null,constructor:function(){this._certificateStore=new r;this._rootName=
this.defaultName;this._certificateStore.put({id:"root",filename:this._rootName})},postCreate:function(){this._setJobFileHelpText();this.own(l(this.protocolTypes,"change",k.hitch(this,function(a){this.set("protocol",a.target.value)})))},setFieldsWidth:function(a,b){this.setLabelWidths([this.ipLabel.domNode,this.protocolLabel,this.portLabel,this.sysNameLabel.domNode,this.sysPasswordLabel.domNode,this.jobFileLabel.domNode],a);this.setInputFieldsWidth(this.IPAddressContainer,this.ipLabel,this.ipTB,b);
this.setInputFieldsWidth(this.protocolTypeContainer,this.protocolLabel,this.protocolTypes,b);this.setInputFieldsWidth(this.portContainer,this.portLabel,this.portTBWrapperContainer,b);this.setInputFieldsWidth(this.systemAccessUsernameContainer,this.sysNameLabel,this.loginTB,b);this.setInputFieldsWidth(this.systemAccessPasswordContainer,this.sysPasswordLabel,this.passwordTB,b);this.setInputFieldsWidth(this.jobFileContainer,this.jobFileLabel,this.fileUploadContainer,b)},_getProtocolAttr:function(){var a=
f('[name\x3d"protocolType"][aria-checked\x3d"true"]');if(1===a.length)return a[0].value;console.error(this.declaredClass+" - _getProtocolAttr(): Invalid protocol selected, defaulting to bacnet");return"bacnet"},_getValueAttr:function(){var a=new g;n.getRSAKeys(!1).then(k.hitch(this,function(b){b=this._getEncryptedCredentials(b);var c={sysIP:t.encode(this.ipTB.get("value")),protocolType:this.get("protocol"),port:this.portTB.get("value"),bbmd:this.bbmd.get("checked"),jobFile:this.jobFileTB.get("value"),
remoteAccessCertificate:this._rootName,remoteAccessCertificateRoot:this._rootThumbprint,remoteAccessSystemName:t.encode(this.remoteAccessSystemNameTB.get("value"))};k.mixin(c,b);a.resolve(c)}));return a.promise},_setDirtyAttr:function(a){this.loginTB.set("required",a);this.sysNameLabel.set("required",a);"remote"===this.get("protocol")?(this.remoteAccessPasswordLabel.set("required",a),this.remoteAccessPasswordTB.set("required",a)):(this.remoteAccessPasswordLabel.set("required",!1),this.remoteAccessPasswordTB.set("required",
!1));this._set("dirty",a)},_setProtocolAttr:function(a){var b;a&&(b=this._protocolMap[a.toLowerCase()]);"undefined"!==typeof b?this[b].set("checked",!0):(this[this._protocolMap.bacnet].set("checked",!0),console.error(this.declaredClass+" - _setProtocolAttr(): Invalid protocol type, defaulting to BACnet"));this._showProtocolFields(a);this._set("protocol",a)},_setValueAttr:function(a){this.ipTB.set("value",a.sysIP);this.set("protocol",a.protocolType);this.portTB.set("value",a.port);this.bbmd.set("checked",
a.bbmd);this.loginTB.set("value","");this.passwordTB.set("value","");this.jobFileTB.set("value",k.trim(a.jobFile));this._rootName=a.remoteAccessCertificate;this._rootThumbprint=a.remoteAccessCertificateRoot;this._setManageDialogData({rootFilename:a.remoteAccessCertificate,rootThumbprint:a.remoteAccessCertificateRoot});this.remoteAccessSystemNameTB.set("value",a.remoteAccessSystemName);this.remoteAccessPasswordTB.set("value","");this._set("value",a);this._firstLoad&&(this._setupWatchers(),this._firstLoad=
!1)},_certificatesChosen:function(a){var b=a.root,c=a.name,d=a.expiry;b!==this._rootThumbprint&&this._onChange(b,c,d,k.clone(this._rootThumbprint));this._rootThumbprint=b;this._rootName=a.name;this._certExpiry=a.expiry;a=this._certificateStore.get("root");a.thumbprint=b;a.filename=c;a.expiry=d;this._certificateStore.put(a)},_createJobSelector:function(){null===this._jobFileSelector&&(this._jobFileSelector=new a({searchParams:"*.ini"}),this._jobFileDialog=new p({title:this.webviewStrings.selectJobFile,
content:this._jobFileSelector,baseClass:"fileSelectorDialogBox"}),this.own(l(this._jobFileSelector,"save",k.hitch(this,function(a){this._jobFileDialog.hide();this.jobFileTB.set("value",a.path)}))),this.own(l(this._jobFileSelector,"cancel",k.hitch(this,function(){this._jobFileDialog.hide()}))))},_getEncryptedCredentials:function(a){var b=this.loginTB.get("value"),c=this.passwordTB.get("value"),d=this.remoteAccessPasswordTB.get("value"),f={};0<b.length&&(f.login=n.encrypt(b,a));0<c.length&&(f.pass=
n.encrypt(c,a));0<d.length&&(f.remoteAccessPassword=n.encrypt(d,a));return f},_setJobFileHelpText:function(){this.jobFileLabel.set("helpText",c.substitute(this.webviewStrings.jobFileInfo,["Help/Index/FileSync"]))},_setManageDialogData:function(a){this._certificateStore.put({id:"root",thumbprint:a.rootThumbprint||"",filename:a.rootFilename||"",expiry:a.rootExpiryDate||""})},_setupWatchers:function(){this._changeWatchers.push(this.ipTB.watch("value",k.hitch(this,this._onChange)));this._changeWatchers.push(this.watch("protocol",
k.hitch(this,this._onChange)));this._changeWatchers.push(this.portTB.watch("value",k.hitch(this,this._onChange)));this._changeWatchers.push(this.bbmd.watch("checked",k.hitch(this,this._onChange)));this._changeWatchers.push(this.loginTB.watch("value",k.hitch(this,this._onChange)));this._changeWatchers.push(this.passwordTB.watch("value",k.hitch(this,this._onChange)));this._changeWatchers.push(this.jobFileTB.watch("value",k.hitch(this,this._onChange)));this._changeWatchers.push(this.remoteAccessSystemNameTB.watch("value",
k.hitch(this,this._onChange)));this._changeWatchers.push(this.remoteAccessPasswordTB.watch("value",k.hitch(this,this._onChange)))},_showJobFileSelector:function(){this._createJobSelector();this._jobFileSelector.fetch();this._jobFileDialog.show()},_showManageCertificates:function(){null===this._manageCertificateDialog?this._manageCertificateDialog=new u({defaultName:this.defaultName,title:this.webviewStrings.manageCertificates,uploadPath:"uploader/UploadCert",allowMutual:!1,value:{root:this._certificateStore.get("root")},
widget:"system",uploaderType:3}):this._manageCertificateDialog.set("value",{root:this._certificateStore.get("root")});var a=h.after(this._manageCertificateDialog,"execute",k.hitch(this,this._certificatesChosen),!0);this.own(a);this.own(l.once(this._manageCertificateDialog,"hide",k.hitch(this,a.remove)));this._manageCertificateDialog.show()},_showProtocolFields:function(a){"remote"===a?(this.ipLabel.set("label",this.webviewStrings.connectionAddress),this.portLabel.innerHTML=this.webviewStrings.connectionPort+
":"):(this.ipLabel.set("label",this.webviewStrings.systemIP),this.portLabel.innerHTML=this.webviewStrings.portLabel+":");d.toggle(this.remoteAccessCertificateContainer,"hidden","remote"!==a);d.toggle(this.remoteAccessSystemNameContainer,"hidden","remote"!==a);d.toggle(this.remoteAccessPasswordContainer,"hidden","remote"!==a);d.toggle(this.bbmdContainer,"hidden","remote"===a);d.toggle(this.portContainer,"hidden","rcp"===a)},_validate:function(){if(!this.ipTB.isValid())return{isValid:!1,message:this.errorStrings.invalidIP};
if(!this.jobFileTB.isValid())return{isValid:!1,message:this.errorStrings.invalidJobFile};var a=this.get("protocol");if("rcp"!==a){if(!this.portTB.isValid())return{isValid:!1,message:this.errorStrings.invalidPort};if("remote"===a){if(!this.remoteAccessSystemNameTB.isValid())return{isValid:!1,message:this.errorStrings.remoteAccessSystemNameRequired};if(!this.remoteAccessPasswordTB.isValid())return{isValid:!1,message:this.errorStrings.remoteAccessPasswordRequired}}}return this.loginTB.isValid()?this.passwordTB.isValid()?
{isValid:!0,message:this.errorStrings.successfulValidate}:{isValid:!1,message:this.errorStrings.loginPassEmpty}:{isValid:!1,message:this.errorStrings.loginUserEmpty}}})})},"webview/admin/systems/ManageCertificatesDialog":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/text!./templates/ManageCertificatesDialog.html dojo/i18n!rc/nls/all dojo/i18n!../../nls/all ../../widget/ManageCertificatesDialog dojox/form/Uploader dijit/form/Button".split(" "),function(p,m,k,h,g,d,l){return p("webview/admin/systems/ManageCertificatesDialog",
l,{templateString:h,rcStrings:g,uploadPath:null,webviewStrings:d,defaultName:null,_buttonListener:function(){this.own(k(this.defaultRoot.domNode,"click",m.hitch(this,this.setDefault,this._UploaderTypeMap.root)))},setDefault:function(d){switch(d){case this._UploaderTypeMap.root:this.set("value",{root:{thumbprint:"",filename:this.defaultName}})}}})})},"webview/admin/widget/FileSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/tree/ObjectStoreModel dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/Evented dojo/json dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!webview/admin/widget/templates/FileSelector.html ./FileTreeServer dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return g("webview/admin/widget/FileSelector",[m,p,k,r],{templateString:a,tree:null,model:null,selectedFile:null,_jobFileStore:null,store:null,_updating:!1,searchParams:"*",systemId:null,path:"FileService",postCreate:function(){this.inherited(arguments);this.fetch()},_createTree:function(a){null!==this.store&&(this.store=null);this.store=new u(new q({data:a,getChildren:function(a){return this.query({parent:a.id})}}));null!==this.model&&this.model.destroy();
this.model=new h({store:this.store,query:{root:!0},mayHaveChildren:function(a){return a.directory}});null!==this.tree&&this.tree.destroy();this.tree=new n({model:this.model,onClick:d.hitch(this,"onFileClicked"),onDblClick:d.hitch(this,"chooseAndSave"),requestPath:this.path,searchParams:this.searchParams});f.place(this.tree.domNode,this.fileTree,"only");this.tree.startup()},chooseAndSave:function(a){a.directory||(this.selectedFile=a,this._onSave())},fetch:function(){if(!this._beginUpdate())return null;
var a=t.get(this.path,{handleAs:"json",preventCache:!0,query:{path:null,search:this.searchParams,id:null,parent:null,systemId:this.systemId}});a.then(d.hitch(this,function(a){this._createTree(a);return a}),d.hitch(this,function(a){return a})).always(d.hitch(this,this._endUpdate));return a},_beginUpdate:function(){return this._updating?!1:this._updating=!0},_endUpdate:function(){this._updating&&(this._updating=!1)},onFileClicked:function(a,c){var d=b(".dijitTreeContent.selected");0<d.length&&l.remove(d[0],
"selected");a.directory?(c.expandoNode.click(),this.okButton.set("disabled",!0),this.selectedFile=null):(this.okButton.set("disabled",!1),this.selectedFile=a);l.add(this.tree.selectedNode.contentNode,"selected");this.emit("fileClicked",a,c);return a},_onSave:function(){if(null!==this.selectedFile)this.onSave(this.selectedFile);else console.error("FileSelector.js - _onSave(): No file has been selected")},onSave:function(a){this.emit("save",a);return a},onCancel:function(){this.emit("cancel",null);
this.selectedFile=null}})})},"webview/admin/widget/FileTreeServer":function(){define("dijit/Tree dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/json dojo/request/xhr".split(" "),function(p,m,k,h,g,d){return m("webview/admin/FileTreeServer",[p],{requestPath:"",searchParams:"",persist:!1,postCreate:function(){this.inherited(arguments)},_expandNode:function(d){if(d._expandNodeDeferred)return d._expandNodeDeferred;var f=this.model,g=d.item,c=this;d._loadDeferred||(d.markProcessing(),d._loadDeferred=
new h,f.getChildren(g,k.hitch(this,function(b){var f=new h;b.length?f.resolve(b):this._getDirectoryInfo(d).then(k.hitch(this,function(c){b=c;f.resolve(b)}),k.hitch(this,function(b){console.error(c,": error loading files from server"+d.label+" children: ",b);d._loadDeferred.reject(b)}));f.then(k.hitch(this,function(b){d.unmarkProcessing();d.setChildItems(b).then(function(){d._loadDeferred.resolve(b)})}))}),function(b){console.error(c,": error loading "+d.label+" children: ",b);d._loadDeferred.reject(b)}));
f=d._loadDeferred.then(k.hitch(this,function(){var b=d.expand();this.onOpen(d.item,d);this._state(d,!0);return b}));this._startPaint(f);return f},_getDirectoryInfo:function(g){g=g.item;return d.get(this.requestPath,{handleAs:"json",query:{path:g.path,search:this.searchParams,id:g.id,parent:g.parent}})},_onDblClick:function(){}})})},"webview/admin/systems/SystemToolbar":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!../../nls/all dojo/on dojo/text!./templates/SystemToolbar.html ../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f,r){return h("webview/admin/systems/SystemToolbar",[m,p,k],{templateString:r,webviewStrings:l,postCreate:function(){this.own(f(this.cancelButton.domNode,"click",g.hitch(this,this._onClickCancel)),f(this.saveButton.domNode,"click",g.hitch(this,this._onClickSave)))},_setDirtyAttr:function(c){c?d.replace(this.saveButton.toolbarButtonIcon,"dirtySaveIcon","saveIcon"):d.replace(this.saveButton.toolbarButtonIcon,"saveIcon","dirtySaveIcon");this._set("dirty",c)},_setDisabledAttr:function(c){this.cancelButton.set("disabled",
c);this.saveButton.set("disabled",c);this._set("disabled",c)},onCancel:function(){},onSave:function(){},_onClickCancel:function(){if(!this.cancelButton.get("disabled"))this.onCancel()},_onClickSave:function(){if(!this.saveButton.get("disabled"))this.onSave()}})})},"webview/admin/systems/AddSystem":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/i18n!../../nls/errorMessages dojo/json dojo/text!./templates/addSystem.html dojo/topic rc/util/notices ./_SystemBase ../../xhrEnhanced ./settingsComponents/WizardConnectionSettings".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return p("webview/admin/systems/AddSystem",[c],{nameOfIndividual:"system",templateString:l,_path:"systems/",_statusPath:"systems/status",constructor:function(){this.wizardOnNextFunction=this._onAddItem;m.mixin(this._ErrorMessageMap,{403:{message:g.notAuthenticated,noticeType:"sticky",type:"error"},507:{message:g.systemAddFailedLicense,noticeType:"sticky",type:"error"},510:{message:g.addInProgress,type:"info",noticeType:"sticky"},512:{message:g.missingSystemName,noticeType:"sticky",
type:"error"}})},postCreate:function(){this.inherited(arguments);this.defer(m.hitch(this,function(){this.onInitSuccess()}),50)},getWizardUnknowns:function(b){return[{name:this.nameOfIndividual,value:b},{name:"site",value:this.site}]},_formatSystemSettings:function(b){var c=m.clone(b);c.controllerID=0===b.controllerID?null:b.controllerID;c.webviewID=0===b.webviewID?null:b.webviewID;return c},onSendComplete:function(b,c){this.emit("sendComplete",b);if(rc.setupWizard){var d={systemId:b},a=this._formatSystemSettings(c);
m.mixin(d,a);rc.setupWizard.next(this.getWizardUnknowns(b),d)}},onStartWizard:function(){this.inherited(arguments);if(rc.setupWizard){this.wizardOnNextFunction=this.wizardRememberSystem;var b=rc.setupWizard.getStepParamsFromCookie(window.location.hash);null!==b&&this.wizardComponentSettings.set("value",b);h.remove(this.wizardNextContainer,"hidden")}else this.wizardOnNextFunction=this._onAddItem},wizardRememberSystem:function(){var b=rc.setupWizard.getStepParamsFromCookie(window.location.hash);null!==
b&&b.systemId?this._deleteSystem(b.systemId).then(m.hitch(this,this._onAddItem)):this._onAddItem()},_addComplete:function(b,c){r.widget.clear();c.errStatus===this.SuccessCode?(f.publish("updateNavTree"),this.onSendComplete(c.newSystemId,b),this.wizardComponentSettings.reset()):this._displayError(c.errStatus)},_cancelRequest:function(){this._clearPollingTimer();f.publish("alert",{type:"info",message:this.errorStrings.cancelInProgress});b.get(this._statusPath,{handleAs:"json",query:{processId:this._processId||
-1,abort:1}}).then(m.hitch(this,this._checkProgress),m.hitch(this.saveDeferred,this.saveDeferred.reject));this._processId=-1},_checkProgress:function(c){this._processId=c.processId;510===c.errStatus?this._pollForStatus():200===c.errStatus?b.get("GetPermittedSystems",{handleAs:"json",preventCache:!0}).then(m.hitch(this,function(b){rc.session._attributes.permittedSystems=b;this.saveDeferred.resolve(c)})):this.saveDeferred.resolve(c)},_buildDeleteParams:function(b){return{systemNames:b,siteId:this.site}},
_deleteSystem:function(b){b=rc.xhr.request({type:"rest",method:"DELETE",path:this._path,params:d.stringify(this._buildDeleteParams([b]))});b.then(m.hitch(this,function(b){b.data.errStatus!==this.SuccessCode&&this._displayError(b.data.errStatus)}));return b},_onAddItem:function(){this.wizardComponentSettings.isValid()&&(r.widget.clear(),this._displayError(510),this.wizardComponentSettings.get("value").then(m.hitch(this,this._sendSystem)))},_sendFailed:function(b){this._displayError(this.UnexpectedCode);
this._cancelRequest();console.error(this.declaredClass+"Unexpected error",b)},_sendSystem:function(c){this.saveDeferred=new k;this._toggleWizardLinks(!0);b.post(this._path,{handleAs:"json",data:{siteId:this.site,systemSettings:d.stringify(c)}}).then(m.hitch(this,this._checkProgress),m.hitch(this.saveDeferred,this.saveDeferred.reject));this.saveDeferred.then(m.hitch(this,this._addComplete,c),m.hitch(this,this._sendFailed)).always(m.hitch(this,this._toggleWizardLinks,!1))},_toggleWizardLinks:function(b){h.toggle(this.wizardCancelLink,
"hidden",!b);h.toggle(this.wizardNextLink,"hidden",b)}})})},"webview/admin/systems/settingsComponents/WizardConnectionSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/on dojo/text!./templates/WizardConnectionSettings.html ./ConnectionSettings".split(" "),function(p,m,k,h,g,d,l){return p("webview/admin/systems/settingsComponents/WizardConnectionSettings",[l],{templateString:d,_defaultValues:{controllerID:"",webviewID:"",fixedPort:47808,fileServerNetworkNumber:65518},
postCreate:function(){this.inherited(arguments);this.own(g(this.enablefixedBACnetPort,"change",m.hitch(this,this._toggleStaticPort)))},_getValueAttr:function(){var d=new k,g=this.inherited(arguments),c=isNaN(this.webviewIDTB.get("value"))?0:this.webviewIDTB.get("value"),b=isNaN(this.controllerIDTB.get("value"))?0:this.controllerIDTB.get("value"),l=isNaN(this.fixedBACnetPortTB.get("value"))?0:this.fixedBACnetPortTB.get("value");g.then(m.hitch(this,function(f){d.resolve({ip:f.sysIP,webviewID:c,controllerID:b,
fileSyncID:0,fileServerNetworkNumber:this._defaultValues.fileServerNetworkNumber,protocolType:f.protocolType,port:f.port,fixedPort:l,bbmd:f.bbmd,login:f.login,pass:f.pass,jobFile:f.jobFile,remoteAccessCertificate:f.remoteAccessCertificate,remoteAccessCertificateRoot:f.remoteAccessCertificateRoot,remoteAccessSystemName:f.remoteAccessSystemName,remoteAccessPassword:f.remoteAccessPassword,allUsers:!0})}));return d.promise},_setValueAttr:function(d){this.ipTB.set("value",d.ip);this.webviewIDTB.set("value",
d.webviewID);this.controllerIDTB.set("value",d.controllerID);this.fileSyncIDTB.set("value",d.fileSyncID);this.set("protocol",d.protocol);this.jobFileTB.set("value",d.jobFile);this.portTB.set("value",d.port);this.bbmd.set("checked",d.bbmd);this._firstLoad&&(this._setupWatchers(),this._firstLoad=!1)},_setupWatcher:function(){this.inherited(arguments);this._changeWatchers.push(this.controllerIDTB.watch("value",m.hitch(this,this._onChange)));this._changeWatchers.push(this.webviewIDTB.watch("value",m.hitch(this,
this._onChange)));this._changeWatchers.push(this.enablefixedBACnetPort.watch("checked",m.hitch(this,this._onChange)));this._changeWatchers.push(this.fixedBACnetPortTB.watch("value",m.hitch(this,this._onChange)))},_showProtocolFields:function(d){this.inherited(arguments);this.controllerIDTB.set("required","remote"===d);h.toggle(this.controllerIDLabel.firstElementChild,"hidden","remote"!==d);this.remoteAccessPasswordLabel.set("required","remote"===d);this.remoteAccessPasswordTB.set("required","remote"===
d);h.toggle(this.webviewDeviceContainer,"hidden","rcp"===d);h.toggle(this.controllerIdContainer,"hidden","rcp"===d||"dual"===d);h.toggle(this.fixedPortContainer,"hidden","bacnet"!==d&&"dual"!==d)},_validate:function(){var d=this.inherited(arguments);if(d.isValid){if(!this.controllerIDTB.isValid())return{isValid:!1,message:this.errorStrings.invalidController};if(!this.webviewIDTB.isValid())return{isValid:!1,message:this.errorStrings.invalidWebview};if(!this.fixedBACnetPortTB.get("disabled")&&!this.fixedBACnetPortTB.isValid())return{isValid:!1,
message:this.errorStrings.invalidPort}}return d}})})},"webview/admin/systems/AddArchive":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/json dojo/text!./templates/addArchive.html dojo/topic rc/util/notices ./_SystemBase ../../xhrEnhanced ./settingsComponents/ArchiveSettings".split(" "),function(p,m,k,h,g,d,l,f,r){return p("webview/admin/systems/AddSystem",[f],{nameOfIndividual:"system",templateString:g,_path:"system/archive",_pollInterval:500,_statusPath:"system/status",
constructor:function(){this.wizardOnNextFunction=this._onAddItem},postCreate:function(){this.inherited(arguments);this._getSystemName().then(m.hitch(this,this._populateDefaults))},getWizardUnknowns:function(c){return[{name:this.nameOfIndividual,value:c},{name:"site",value:this.site}]},onSendComplete:function(c){this.emit("sendComplete",c);rc.setupWizard.next(null,c)},onStartWizard:function(){this.inherited(arguments);this.wizardOnNextFunction=this.wizardRememberSystem;var c=rc.setupWizard.getStepParamsFromCookie(window.location.hash);
null!==c&&this.wizardComponentSettings.set("value",c)},wizardRememberSystem:function(){var c=rc.setupWizard.getStepParamsFromCookie(window.location.hash);null!==c&&c.systemId?this._deleteSystem(c.systemId).then(m.hitch(this,this._onAddItem)):this._onAddItem()},_addComplete:function(c,b){l.widget.clear();b.errStatus===this.SuccessCode?(d.publish("updateNavTree"),this.onSendComplete(c),this.wizardComponentSettings.reset()):this._displayError(b.errStatus)},_getSystemName:function(){var c=new k;r.get("system",
{handleAs:"json",preventCache:!0,query:{systemId:this.system}}).then(m.hitch(this,function(b){b.errStatus===this.SuccessCode?c.resolve(b.sysName):c.reject("Could not get system name")}),m.hitch(this,c.reject));return c.promise},_onAddItem:function(){this.wizardComponentSettings.isValid()&&(l.widget.clear(),this._displayError(510),this.wizardComponentSettings.get("value").then(m.hitch(this,this._sendSettings)))},_populateDefaults:function(c){this.wizardComponentSettings.set("value",{enabled:!1,serverName:null,
dbName:c,username:null});this.onInitSuccess()},_sendFailed:function(c){this._displayError(this.UnexpectedCode);this._cancelRequest();console.error(this.declaredClass+"Unexpected error",c)},_sendSettings:function(c){this.saveDeferred=new k;r.post(this._path,{handleAs:"json",data:{systemId:this.system,archiveSettings:h.stringify(c)}}).then(m.hitch(this.saveDeferred,this.saveDeferred.resolve),m.hitch(this.saveDeferred,this.saveDeferred.reject));this.saveDeferred.then(m.hitch(this,this._addComplete,c),
m.hitch(this,this._sendFailed))}})})},"webview/admin/trees/Trees":function(){define("dijit/Dialog dijit/form/Button dijit/form/TextBox dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/string dojo/text!webview/admin/trees/templates/trees.html dojo/topic dojox/html/entities ../_base webview/features/navigationTrees/dialogs/CopyTreeDialog ../../widget/MultiSelectBox ../../widget/ToolbarButton ../../widget/WebviewContentPane".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q){return h("webview/admin/trees/Trees",
[t],{auditLogObjectName:"NavigationTree",individualPath:"tree",MAX_NAME_LENGTH:50,nameOfIndividual:"tree",templateString:r,_path:"trees/",_renameDialog:null,_navTreeNameOnDemandListener:null,constructor:function(){g.mixin(this.ErrorMessageMap,{501:this.errorStrings.duplicateTree,502:this.errorStrings.treeDoesNotExist})},fetch:function(){if(!this._beginUpdate())return null;var b={type:"rest",method:"GET",preventCache:!0,path:this._path};g.mixin(b,this._buildFetchParams());b=rc.xhr.request(b);b.then(g.hitch(this,
function(a){a.data&&200===a.data.errStatus?(this.editButton.set("disabled",!0),this.renameButton.set("disabled",!0),this.deleteButton.set("disabled",!0),this.copyButton.set("disabled",!0),this.selectedItem=null,this.render(a),this.onInitSuccess()):a.data&&502===a.data.errStatus?this._onInitError(this._getErrorMessage(a.data.errStatus)):(a.data?this._displayErrorMessage(a.data):console.error(this.declaredClass+" - fetch(): Data returned is null",a),this.onInitSuccess());return a}),g.hitch(this,function(a){this._onInitError(a);
return a})).always(g.hitch(this,this._endUpdate));return b},onDelete:function(b){this.emit("delete",b)},validateAdd:function(){var d=b.encode(this.nameTB.get("value"));return""===d.trim()?(c.publish("sticky",{type:"error",message:this.errorStrings.emptyNameField}),!1):d.length>this.MAX_NAME_LENGTH?(c.publish("sticky",{type:"error",message:f.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])}),!1):!0},_buildAddParams:function(){return{siteId:this.site}},_buildDeleteParams:function(b){return{treeNames:b,
siteId:this.site}},_buildFetchParams:function(){return{siteId:this.site}},_connectEvents:function(){this.own(l(this.editButton.domNode,"click",g.hitch(this,this._editTree)),l(this.copyButton.domNode,"click",g.hitch(this,this._onCopyItem)),l(this.renameButton.domNode,"click",g.hitch(this,this._onRenameItem)),l(this.deleteButton.domNode,"click",g.hitch(this,this._deleteTree)),l(this.addButton.domNode,"click",g.hitch(this,this._addTree)));this.own(l(this._multiSelect,"singleSelected",g.hitch(this,function(b){null===
b?(this.editButton.set("disabled",!0),this.renameButton.set("disabled",!0),this.deleteButton.set("disabled",!0),this.copyButton.set("disabled",!0)):(this.editButton.set("disabled",!1),this.renameButton.set("disabled",!1),this.deleteButton.set("disabled",!1),this.copyButton.set("disabled",!1),this.selectedItem=b.value)})));this.own(l(this._multiSelect,"select",g.hitch(this,function(){1<this._multiSelect.getSelectedItems().length?(this.deleteButton.set("disabled",!1),this.editButton.set("disabled",
!0),this.renameButton.set("disabled",!0),this.copyButton.set("disabled",!0)):1==this._multiSelect.getSelectedItems().length?(this.deleteButton.set("disabled",!1),this.editButton.set("disabled",!1),this.renameButton.set("disabled",!1),this.copyButton.set("disabled",!1)):(this.deleteButton.set("disabled",!0),this.editButton.set("disabled",!0),this.renameButton.set("disabled",!0),this.copyButton.set("disabled",!0))})));null===this._navTreeNameOnDemandListener&&(this._navTreeNameOnDemandListener=l(this.nameTB,
"keyup",g.hitch(this,function(){var b=this.nameTB.get("value");b&&0<b.length?this.addButton.set("disabled",!1):this.addButton.set("disabled",!0)})));this.addButton.set("disabled",!0)},_addTree:function(){this.addButton.get("disabled")||(this.addButton.hideToolTip(),this._onAddItem())},_deleteTree:function(){this.deleteButton.get("disabled")||this._onDeleteItem()},_editTree:function(b){this.editButton.get("disabled")||(this.editButton.hideToolTip(),this._editItem())},_onCopyItem:function(){this.copyButton.get("disabled")||
(this._copyDialog||(this._copyDialog=new q({siteId:this.site}),this.own(this._copyDialog,this._copyDialog.on("copyComplete",g.hitch(this,this.fetch)))),this._copyDialog.set("sourceTreeId",this.selectedItem),this._copyDialog.show())},_onDelete:function(b){1>this._multiSelect.getSelectedItems.length&&(this.deleteButton.set("disabled",!0),this.editButton.set("disabled",!0),this.renameButton.set("disabled",!0),this.copyButton.set("disabled",!0));this.onDelete(b)},_onRenameItem:function(){if(!this.renameButton.get("disabled")){if(null===
this._renameDialog){var q=d.create("div",{"class":"navTreeRenameDialogContent"});this.newNameTB=new k({baseClass:"rcTextBox",name:"newNameTB",maxLength:50});this.own(l(this.newNameTB,"keyup",g.hitch(this,function(){this.okayButton.set("disabled",""===this.newNameTB.get("value").trim())})));d.place(this.newNameTB.domNode,q,"first");this.okayButton=new m({baseClass:"webviewButton",iconClass:"rcIcon okIcon",label:this.webviewStrings.rcbOkay});this.own(l(this.okayButton.domNode,"click",g.hitch(this,function(){var a=
b.encode(this.newNameTB.get("value"));a.length>this.MAX_NAME_LENGTH?c.publish("sticky",{type:"error",message:f.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])}):this._sendNewName(a)})));d.place(this.okayButton.domNode,q,"last");this._renameDialog=new p({title:this.webviewStrings.renameTree,content:q,baseClass:"renameDialogBox"})}this.okayButton.set("disabled",!0);this.newNameTB.set("value","");this._renameDialog.show()}},_sendNewName:function(b){rc.xhr.request({type:"rest",
path:"RenameTree",method:"POST",navTreeId:this.selectedItem,newTreeName:b}).then(g.hitch(this,function(a){a.data&&200===a.data.errStatus?(c.publish("updateNavTree"),this.fetch()):this._displayErrorMessage(a.data)}),g.hitch(this,function(a){this._displayErrorMessage({errStatus:504,errMSG:"Unexpected Error"});console.error(this.declaredClass+" - _onRenameItem(): Unexpected Error renaming tree",a)})).always(g.hitch(this,function(){this._renameDialog.hide()}))},_setLabels:function(){this._multiSelect.setHint(this.webviewStrings.msHint)},
destroy:function(){null!==this._navTreeNameOnDemandListener&&(this._navTreeNameOnDemandListener.remove(),this._navTreeNameOnDemandListener=null);this.inherited(arguments)}})})},"webview/features/navigationTrees/dialogs/CopyTreeDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!webview/nls/navigationTrees dojo/on dojo/text!./templates/CopyTreeDialog.html dojo/topic webview/admin/widget/ProgressDialog webview/xhrEnhanced dijit/form/ValidationTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return m("webview/features/navigationTrees/dialogs/CopyTreeDialog",[p],{errorStrings:g,navigationTreeStrings:d,rcStrings:h,templateString:f,_pollInterval:500,_progressDismissed:!1,_progressShowing:!1,_waitLoops:0,postCreate:function(){this._progressDialog=new c;this.own(this._progressDialog,this._progressDialog.on("closed",k.hitch(this,function(){this._progressDismissed=!0;this._onCopyComplete()})),l(this.newNameTB,"keyup",k.hitch(this,function(){this.okButton.set("disabled",
!this.newNameTB.validate())})));this.newNameTB.validator=k.hitch(this,this._validateName);this.inherited(arguments)},onCancel:function(){this._close()},onCopyComplete:function(){},onOkClicked:function(){this.newNameTB.validate()&&this._createNewTree(this._getNewTreeName())},show:function(){this._progressShowing=this._progressDismissed=!1;this._waitLoops=0;this.newNameTB.reset();this.okButton.set("disabled",!0);this.inherited(arguments)},_checkProgress:function(b){this._waitLoops++;3<this._waitLoops&&
!this._progressShowing&&(this._progressShowing=!0,this._progressDialog.show(this.navigationTreeStrings.copyTreeInProgress,!0));this._processId=b.processId;switch(b.errStatus){case 200:this._showSuccessMessage();this._onCopyComplete();break;case 510:this._pollForStatus();break;default:this._showErrorMessageForCode(b.errStatus),this._onCopyComplete()}},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_close:function(){this._clearPollingTimer();this._progressDialog.hide();this.hide()},
_copyTreeTo:function(c){b.post("NavigationTree/"+this.sourceTreeId+"/Copy/"+c,{handleAs:"json"}).then(k.hitch(this,this._checkProgress),k.hitch(this,this._handleFailedRequest))},_createNewTree:function(c){b.post("Trees/",{handleAs:"json",data:{siteId:this.siteId,name:c}}).then(k.hitch(this,function(b){200===b.errStatus?this._copyTreeTo(b.id):this._handleFailedTreeCreation(b)}),k.hitch(this,this._handleFailedRequest))},_getNewTreeName:function(){return(this.newNameTB.get("value")||"").trim()},_handleFailedRequest:function(b){console.error(b);
this._showErrorMessage(this.errorStrings.unexpectedError)},_handleFailedTreeCreation:function(b){if(b&&501===b.errStatus){var c=this.newNameTB.validator,d=this.newNameTB.get("invalidMessage");this.newNameTB.set("invalidMessage",this.errorStrings.duplicateTree);this.newNameTB.validator=function(){return!1};this.newNameTB.validate();this.own(l.once(this.newNameTB,"keyup",k.hitch(this,function(){this.newNameTB.set("invalidMessage",d);this.newNameTB.validator=c;this.okButton.set("disabled",!this.newNameTB.validate())})))}else this._showErrorMessageForCode(b.errStatus)},
_onCopyComplete:function(){r.publish("updateNavTree");this._close();this.onCopyComplete()},_pollForStatus:function(){this._clearPollingTimer();this._progressDismissed||(this._pollForStatusTimer=this.defer(k.hitch(this,function(){b.get("NavigationTree/CopyStatus",{handleAs:"json",preventCache:!0,query:{processId:this._processId||-1,abort:0}}).then(k.hitch(this,this._checkProgress),k.hitch(this,this._handleFailedRequest))}),this._pollInterval))},_showErrorMessage:function(b){r.publish("sticky",{type:"error",
message:b})},_showErrorMessageForCode:function(b){switch(b){case 506:b=this.errorStrings.insufficientPermissions;break;default:b=this.errorStrings.internalError}this._showErrorMessage(b)},_showSuccessMessage:function(){r.publish("alert",{type:"success",message:this.errorStrings.operationSuccessful})},_validateName:function(){return 1<=this._getNewTreeName().length},destroy:function(){this.inherited(arguments);this._clearPollingTimer()}})})},"webview/admin/trees/Tree":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/on dojo/query dojo/text!./templates/tree.html ./_TreeNodeCreatorMixin ../_dndTreeBase ../_individualBase ../SearchableWidget ./NavTreeToolbar ../widget/AdminToolbar ../../features/navigationTrees/treeBuilding/TreeBuilder ../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return p("webview/admin/trees/Tree",[b],{_buttonArray:null,_path:"tree/",site:"",templateString:f,tree:null,postCreate:function(){this.inherited(arguments);webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#NavigationTree"+this.tree}],this.title);this.saveButton=this.navTreeToolbar.saveButton;this.selectAllTooltip=this.navTreeToolbar.selectAllButton.tooltip;this._buttonArray=[];this._iconArray=[];k.add(this.navTreeToolbar.domNode,"selected");this._iconArray.push(this.navTreeToolbar);
this.buttonBar.replaceAllIcons(this._iconArray);this._setUpBuilder();this._setupOnClicks()},isDirty:function(){return!0===this.treeBuilder.isDirty},_selectAllNodes:function(b){this.treeBuilder.checkAllItems(b);b?this.selectAllTooltip.set("label",this.webviewStrings.deselectAll):this.selectAllTooltip.set("label",this.webviewStrings.selectAll)},_setUpBuilder:function(){this.treeBuilder.startUp(this.site,this.tree)},_setupOnClicks:function(){this.own(d(this.navTreeToolbar,"selectAllClicked",m.hitch(this,
this._selectAllNodes)),d(this.navTreeToolbar,"addKeywordClicked",m.hitch(this.treeBuilder,this.treeBuilder.onAddKeywordClicked)),d(this.navTreeToolbar,"addObjectClicked",m.hitch(this.treeBuilder,this.treeBuilder.onAddObjectClicked)),d(this.navTreeToolbar,"saveClicked",m.hitch(this.treeBuilder,this.treeBuilder.onSaveClicked)),d(this.navTreeToolbar,"cancelClicked",m.hitch(this.treeBuilder,this.treeBuilder.onCancelClicked)),d(this.navTreeToolbar,"deleteClicked",m.hitch(this.treeBuilder,this.treeBuilder.onDeleteSelectedClicked)),
this.treeBuilder.watch("isDirty",m.hitch(this,function(b,c,a){this.navTreeToolbar.setDirty(a)})),this.treeBuilder.watch("hasCheckedItems",m.hitch(this,function(b,c,a){this.navTreeToolbar.toggleDeleteEnabled(a)})),this.treeBuilder.watch("isSaving",m.hitch(this,function(b,c,a){this.navTreeToolbar.toggleSaveEnabled(!a)})))},destroy:function(){this.inherited(arguments)}})})},"webview/admin/trees/_TreeNodeCreatorMixin":function(){define(["dojo/_base/declare","dojox/html/entities","./NavTreeItem"],function(p,
m,k){return p("webview/admin/trees/_TreeNodeCreatorMixin",[],{_normalizedCreator:function(h){var g={},g=h.hasOwnProperty("customIcon")&&h.customIcon.hasOwnProperty("id")?h.customIcon:{id:h.iconFileId?h.iconFileId:null,filename:h.iconFile?h.iconFile:null};return new k({pointMnemonic:h.pointMnemonic,displayName:h.displayName?m.decode(h.displayName):h.pointName,pointName:h.pointName,deviceName:h.deviceName,sysId:h.sysId,customIcon:g,urlPath:h.urlPath?decodeURIComponent(h.urlPath):null,siteUrlPath:this.urlPath,
site:this.site,pointType:h.pointType,sysName:h.sysName?h.sysName:"",childItems:void 0!==h.childItems?h.childItems:[]})}})})},"webview/admin/trees/NavTreeItem":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/DropDownMenu dijit/form/CheckBox dijit/form/DropDownButton dijit/form/ValidationTextBox dijit/MenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!webview/admin/trees/templates/navTreeItem.html dojo/query dojo/topic dojox/html/entities ../../util/globalConstants dijit/InlineEditBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D){return c("webview/admin/trees/NavTreeItem",[m,p,k,n],{templateString:y,widgetsInTemplate:!0,sysId:-1,site:"",id:"",pointType:"",displayName:"",pointMnemonic:"",customIcon:null,urlPath:"",uniqueId:null,pointName:"",deviceName:"",cbNode:null,depth:0,parent:null,hiddenFields:null,indentSize:30,siteUrlPath:"",childItems:null,childPointsArray:null,defaultColours:null,RELATIVE_PATH_TO_DEFAULT_ICONS:"../.."+dojoConfig.baseUrl+"/webview/themes/rcblack/images/DefaultNavTreeIcons/",
defaultIconMap:{alarm:"alarms.png",calendars:"calendar.png","enterprise schedule":"schedules.png",folder:"folder.png",hyperlink:"hyperlink.png","navigation group":"navigation-group.png","runtime logs":"runtime.png",schedules:"schedules.png","system groups":"system-group.png","single point trend log":"single-trendlog.png","multi point trend log":"multi-trendlog.png","workstation groups":"workstation-group.png","after hours report":"after-hours.png","after hours requests":"requests.png",programs:"cbas.png",
"point report":"point-report.png","equipment views":"equipment-view.png"},constructor:function(){this.rcStrings=v;this.webviewStrings=x;this.errorStrings=w},postCreate:function(){this.inherited(arguments);this.childPointsArray=[];this.hiddenFields={};this.Initialize()},_setDisplayNameAttr:function(a){this._set("displayName",a.replace(/[\n\r]/g," "))},Initialize:function(){""===this.displayName&&(this.displayName=this.pointName+" ("+this.pointMnemonic+")");t.set(this.domNode,"title",C.decode(this.buildTitleText()));
this.buildEditMenu();this.cbNode=new g({},this.navTreeCBContainer);q.add(this.cbNode.domNode,"tree-item-checkbox");this.createHiddenFields();this.setOnClicks();this.setIconImage();this._showChildren(this,!0);this.setValue("displayName",C.encode(this.displayName))},buildTitleText:function(){var a=this.displayName,b=this.pointMnemonic;if(this.sysName||""===this.sysName){if(""===this.sysName)switch(this.pointType.toLowerCase()){case "alarm":b="Alarm";break;case "folder":b=this.displayName;break;case "hyperlink":b=
this.urlPath;break;case "after hours report":b="AfterHoursReport";break;case "after hours requests":b="AfterHoursRequests";break;default:b=null}b||(a=this.pointName.indexOf("#"),b=this.pointName.substring(a+1));a=this.sysName;a+=this.sysName?"/"+b:b}return a},buildEditMenu:function(){var a=new h({baseClass:"webviewContextMenu"},"mainMenu");"hyperlink"===this.pointType.toLowerCase()&&(q.remove(this.urlPathLabel,"hidden"),t.set(this.urlPathLabel,"innerHTML",C.encode(this.urlPath)));a.addChild(new f({label:v.edit,
baseClass:"webviewContextMenuItem",onClick:b.hitch(this,this._onEditContents)}));a.addChild(new f({label:x.deleteItems,baseClass:"webviewContextMenuItem",onClick:b.hitch(this,this.remove)}));new d({showLabel:!1,dropDown:a,iconClass:"rc24Icon editIcon",baseClass:"webviewDropDownButton"},this.enableEditNode)},createHiddenFields:function(){this.displayNameInput.set("value",C.decode(this.displayName));this.hiddenFields.displayNameTB=this.displayNameInput;this.own(z(this.displayNameInput,"change",b.hitch(this,
function(a){this.setValue("displayName",C.encode(a))})));this.hiddenFields.urlPathTB=new l({baseClass:"rcTextBox",required:!0,invalidMessage:this.errorStrings.invalidURL,"class":"hidden",value:decodeURIComponent(this.urlPath),onBlur:b.hitch(this,function(){if(this.hiddenFields.urlPathTB.isValid()){var a=C.encode(this.hiddenFields.urlPathTB.get("value"));this.setValue("urlPath",a);this.onEditModeChange(!1)}else this.hiddenFields.urlPathTB.focus()})},this.urlPathContainer);this.hiddenFields.urlPathTB.set("validator",
b.hitch(this,this.urlValidator,this.hiddenFields.urlPathTB));this.hiddenFields.urlPathTB.isValid()},setOnClicks:function(){this.own(z(this.navIcon,"click",b.hitch(this,this._onOpenGallery)),z(this.urlPathLabel,"click",b.hitch(this,this.editUrlPath)),z(window,"click",b.hitch(this,this._closeEditors)));this.own(z(this.expandNode,"click",b.hitch(this,function(){q.contains(this.expandNode,"expandIcon")?this._showChildren(this,!0):q.contains(this.expandNode,"collapseIcon")&&this._showChildren(this,!1)})))},
setCustomIcon:function(a){this.customIcon=a;this.setIconImage()},setIconImage:function(){u.empty(this.navIcon);var a=u.create("img",{"class":"navTreeIcon",alt:this.pointType}),b=rc.rootPath+"Uploads/NavTreeIcons/";if(null===this.customIcon||null===this.customIcon.filename)b=this.RELATIVE_PATH_TO_DEFAULT_ICONS,this.defaultIconMap.hasOwnProperty(this.pointType.toLowerCase())?this.customIcon={id:null,filename:this.defaultIconMap[this.pointType.toLowerCase()]}:console.error(this.declaredClass+" - setIconClass(): Invalid point type:",
this.pointType);"trendlog.png"===this.customIcon.filename&&(-1!==this.pointName.toUpperCase().indexOf("STL")?(this.pointType="Single Point Trend Log",this.customIcon.filename="single-trendlog.png"):(this.pointType="Multi Point Trend Log",this.customIcon.filename="multi-trendlog.png"));if(null===this.customIcon.id||-1===this.customIcon.id||-1<D.DEFAULT_NAV_TREE_ICONS.indexOf(this.customIcon.filename))b=this.RELATIVE_PATH_TO_DEFAULT_ICONS;t.set(a,"src",b+this.customIcon.filename);u.place(a,this.navIcon,
"first");this.onChange()},editUrlPath:function(){q.remove(this.hiddenFields.urlPathTB.domNode,"hidden");q.add(this.urlPathLabel,"hidden");this.hiddenFields.urlPathTB.focus();this.onEditModeChange(!0)},urlValidator:function(a,b,c){var d=!1,d="hyperlink"!==this.pointType.toLowerCase()?!0:"http://"!==b&&(!a.required||!a._isEmpty(b))&&(a._isEmpty(b)||void 0!==a.parse(b,c));this.toggleInvalid(!d);return d},revertPendingChanges:function(){this.setValue("displayName",this.displayName);this.setValue("urlPath",
this.urlPath);this.onEditModeChange(!1)},editDisplayName:function(){this.displayName.edit()},onEditModeChange:function(a){q.toggle(this.domNode,"dojoDndItem",!a);this.emit("editModeChange",a)},setValue:function(a,b){switch(a){case "displayName":b!==this.displayName&&(this.displayName=C.decode(b),this.displayNameInput.set("value",this.displayName),this.onChange());break;case "urlPath":var c=C.decode(b);t.set(this.urlPathLabel,"innerHTML",b);this.hiddenFields.urlPathTB.set("value",b);q.add(this.hiddenFields.urlPathTB.domNode,
"hidden");q.remove(this.urlPathLabel,"hidden");if(c!==this.urlPath)this.onChange();this.urlPath=c;break;default:console.error(this.declaredClass+" - setValue(): Unknown Attribute",a)}},modifyChildren:function(b,c){for(var d=0;d<this.childItems.length&&this.childItems[d].id!==b.id;d++);c?this.childItems.splice(d,1):(d<this.childItems.length&&this.childItems.splice(d,1),this.childItems.push(b));0<this.childItems.length?a.set(this.expandNode,"visibility","visible"):a.set(this.expandNode,"visibility",
"hidden");this.toggleFolderIcon()},validate:function(){var a={valid:!0,msg:"Success"};this.hiddenFields.urlPathTB.isValid()||(a.valid=!1,a.msg=this.hiddenFields.urlPathTB.invalidMessage);return a},getData:function(a,b){var c={};a||(this.childPointsArray=[],a=this,b=this.childPointsArray);c=a.validate();if(!c.valid)return a.toggleInvalid(!0),B.publish("sticky",{type:"error",message:c.msg}),{invalid:!0};for(c=0;c<a.childItems.length;c++){b||(b=[]);var d=this.getData(a.childItems[c],a.childItems[c].childPointArray);
if(d.invalid)return{invalid:!0};b.push(d)}c="/";switch(a.pointType.toLowerCase()){case "alarm":c=this.siteUrlPath+"/#Alarm";break;case "navigation group":case "enterprise schedule":c=a.pointName;break;case "folder":c=null;break;case "hyperlink":c=encodeURI(a.urlPath);break;case "after hours report":c=this.siteUrlPath+"/#AfterHoursReport";break;case "after hours requests":c=this.siteUrlPath+"/#AHACRequests";break;default:c=this.siteUrlPath+"/"+a.sysId+"/#"+a.pointMnemonic}return{name:C.encode(a.displayName),
widget:c,pointType:a.pointType,iconFileId:a.customIcon.id,iconFile:a.customIcon.filename,sysId:0<a.sysId?a.sysId:null,sysName:a.sysName,children:void 0!==b?b:[]}},onChange:function(){this.emit("change",null)},_closeEditors:function(a){this.displayNameInput.editing&&!1===("INPUT"===a.target.nodeName||q.contains(a.target,"rcTextBox"))&&this.displayNameInput.save()},_onOpenGallery:function(){this.onOpenGallery()},onOpenGallery:function(){this.emit("openGallery")},_onEditContents:function(){this.onEditContents()},
onEditContents:function(){this.emit("editContents")},_showChildren:function(a,c){q.toggle(a.expandNode,"expandIcon",!c);q.toggle(a.expandNode,"collapseIcon",c);this.toggleFolderIcon();r.forEach(a.childItems,b.hitch(this,function(a){q.toggle(a.domNode,"collapsedChild",!c);0<a.childItems.length&&this._showChildren(a,c)}))},toggleFolderIcon:function(){if("folder.png"===this.customIcon.filename){var a=A(".navTreeIcon",this.domNode);if(0<a.length){var c=q.contains(this.expandNode,"collapseIcon")&&0<this.childItems.length?
"folder-2.png":"folder.png";t.set(a[0],"src",this.RELATIVE_PATH_TO_DEFAULT_ICONS+c);r.forEach(this.childItems,b.hitch(this,function(a){a.toggleFolderIcon()}))}}},toggleInvalid:function(a){q.toggle(this.contentNode,"invalid",a)},setDepth:function(b,c){this.depth=b;var d=a.get(this.expandNode,"width"),n=c*this.depth;a.set(this.contentNode,"marginLeft",n+d+"px");a.set(this.expandNode,"marginLeft",n+"px");if(0<this.childItems.length)for(d=0;d<this.childItems.length;d++)this.childItems[d].setDepth(this.depth+
1,c)},setChecked:function(a){this.cbNode.set("checked",a)},getChecked:function(){return this.cbNode.get("checked")},remove:function(){this.emit("delete",this)},destroy:function(){this.inherited(arguments);this.hiddenFields=null}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D){w=h("dijit._InlineEditor",[x,w,z],{templateString:D,contextRequire:p,postMixInProperties:function(){this.inherited(arguments);this.messages=r.getLocalization("dijit","common",this.lang);m.forEach(["buttonSave","buttonCancel"],function(a){this[a]||(this[a]=this.messages[a])},this)},buildRendering:function(){this.inherited(arguments);var a="string"==typeof this.editor?t.getObject(this.editor)||p(this.editor):this.editor,b=this.sourceStyle,
c="line-height:"+b.lineHeight+";",d=f.getComputedStyle(this.domNode);m.forEach(["Weight","Family","Size","Style"],function(a){d["font"+a]!=b["font"+a]&&(c+="font-"+a+":"+b["font"+a]+";")},this);m.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(a){this.domNode.style[a]=b[a]},this);var n=this.inlineEditBox.width;"100%"==n?(c+="width:100%;",this.domNode.style.display="block"):c+="width:"+(n+(Number(n)==n?"px":""))+";";n=t.delegate(this.inlineEditBox.editorParams,
{style:c,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new a(n,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,l.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var a=this.editWidget;this.inlineEditBox.autoSave?this.own(k.after(a,"onChange",t.hitch(this,"_onChange"),!0),q(a,"keydown",t.hitch(this,"_onKeyDown"))):"intermediateChanges"in a&&(a.set("intermediateChanges",
!0),this.own(k.after(a,"onChange",t.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var a=this.editWidget;return String(a.get("displayedValue"in a||"_getDisplayedValueAttr"in a?"displayedValue":
"value"))},_onKeyDown:function(a){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!a.altKey&&!a.ctrlKey&&(a.keyCode==b.ESCAPE?(a.stopPropagation(),a.preventDefault(),this.cancel(!0)):a.keyCode==b.ENTER&&"INPUT"==a.target.tagName&&(a.stopPropagation(),a.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&v.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(v._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){B.selectInputText(this.editWidget.focusNode)}))}});x=h("dijit.InlineEditBox"+(u("dojo-bidi")?"_NoBidi":""),x,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:C,editorWrapper:w,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=u("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(q(this.displayNode,n,t.hitch(this,"_onClick")),q(this.displayNode,"mouseover, focus",t.hitch(this,"_onMouseOver")),q(this.displayNode,"mouseout, blur",t.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=t.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);d.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(a){c.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.domNode.setAttribute("aria-disabled",a?"true":"false");a?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);d.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",a);this._set("disabled",a)},_onMouseOver:function(){this.disabled||d.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){d.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(a){this.disabled||(a&&(a.stopPropagation(),a.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
g.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var b=l.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?t.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:f.getComputedStyle(this.displayNode),save:t.hitch(this,"save"),cancel:t.hitch(this,"cancel"),
textDir:this.textDir},b);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var c=this.wrapperWidget;d.add(this.displayNode,"dijitOffScreen");d.remove(c.domNode,"dijitOffScreen");f.set(c.domNode,{visibility:"visible"});g.set(this.displayNode,"tabIndex","-1");var n=c.editWidget,q=this;a(n.onLoadDeferred,t.hitch(c,function(){n.set("displayedValue"in n||"_setDisplayedValueAttr"in n?"displayedValue":"value",q.value);this.defer(function(){c.saveButton&&c.saveButton.set("disabled",
"intermediateChanges"in n);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(a){var b=this.wrapperWidget;f.set(b.domNode,{visibility:"hidden"});d.add(b.domNode,"dijitOffScreen");d.remove(this.displayNode,"dijitOffScreen");g.set(this.displayNode,"tabIndex",this._savedTabIndex);a&&
v.focus(this.displayNode)},save:function(a){if(!this.disabled&&this.editing){this._set("editing",!1);var b=this.wrapperWidget.getValue();this.set("value",b);this._showText(a)}},setValue:function(a){c.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(a){a=t.trim(a);var b=this.renderAsHtml?a:a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":b||this.noValueIndicator;this._set("value",a);this._started&&this.defer(function(){this.onChange(a)})},getValue:function(){c.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(a){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(a))}});u("dojo-bidi")&&(x=h("dijit.InlineEditBox",
x,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));x._InlineEditor=w;return x})},"webview/admin/_dndTreeBase":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dnd/Manager dojo/dnd/Source dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/store/Memory dojo/store/Observable ./_dndAvatar ./_Widget ./SearchableWidget".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v){return k("webview/admin/_dndTreeBase",
[n,v],{_dirty:!1,_dndInvalidTypes:{AlreadyInUse:"alredyInUse",DepthOutOfRange:"depthOutOfRange",DuplicateSchedule:"duplicateSchedule",InvalidDataType:"invalidDataType",PermissionsReset:"permissionsReset",Unreachable:"unreachable",WrongRev:"wrongRev"},_path:"",_treeList:null,_treeStore:null,_updating:!1,DEFAULT_DELAY:15,dndAvatar:a,dndItemClass:"treeItemContainer",indentChild:!1,indentSize:30,manager:null,outdentChild:-1,placeBefore:!1,preventDuplicates:!0,constructor:function(){this._setSupportedTypes()},
postCreate:function(){this.inherited(arguments);this._setupManager();this._createTreeBuilder()},buildDialogBox:function(a,b,c){},checkAcceptance:function(a,b){return this.inherited(arguments)},disableDnD:function(a){this._treeList.delay=a?Number.MAX_VALUE:this.DEFAULT_DELAY;a||this._treeList.selectNone()},isInTreeList:function(a){},removeDuplicates:function(a,b){},revertPendingChanges:function(){for(var a=t(".treeItemContainer ",this._treeList.node),b,c=0;c<a.length;c++)a[c].id&&(b=p.byId(a[c].id),
b.revertPendingChanges())},setDirty:function(a,b){this._dirty=a;this._setDirty([b],a)},treeNodeCreator:function(a){},_addChild:function(a,b){c.place(b.domNode,a.domNode,"after");if(0<b.childItems.length)for(var d=0;d<b.childItems.length;d++)b.indentSize!==a.indentSize&&this._addParent(b,a),this._addChild(b,b.childItems[d])},_addParent:function(a,b){this._getParents(b,[]);if(this.preventDuplicates){var c=[];b.depth>=this._MAX_DEPTH&&(c.push(a.objId),b=p.byId(b.parent));c=this._enforceMaxDepth(a,b,
b.depth+1,c);0<c.length&&this.buildDialogBox(c,null,this._dndInvalidTypes.DepthOutOfRange,!1)}a.parent=b.id;a.setDepth(b.depth+1,this.indentSize);for(var c=t("."+this.dndItemClass,this._treeList.node),d=[],n=c.length;n;n--){var f=p.byId(c[n-1].id);f&&f.depth===a.depth&&f.parent===a.parent&&d.push(p.byId(c[n-1].id))}m.forEach(d,h.hitch(this,function(a){b.modifyChildren(a,!1);this._addChild(b,a)}));this._treeStore.put(b,{overwrite:!0})},_afterDrop:function(a,c,d,n,f){c=this._reduceNodeList(c);d=null;
f=f.target;if(!r.contains(f,"rootFolder")){if(f&&!1===r.contains(f,this._treeNodeClass))if(!1===r.contains(f,"dojoDndItem"))f=f.parentNode;else{d=null;for(var g=f.children.length-1;0<=g;--g)if(d=f.children[g],r.contains(d,this._treeNodeClass)){f=d;break}}d=this._getNearestDijitNode(f)}try{this._placeNewNode(a,c,d,null,n);var q="."+this._treeNodeClass,l=t(q,c[0])[0];for(f=!1;l&&d&&b.get(t(q,d.domNode)[0],"marginLeft")>b.get(l,"marginLeft")&&d.parent;){var h=p.byId(d.parent);if(null===h)break;else f=
!0,d=h}f&&this._placeNewNode(a,c,d,null,n)}catch(F){if("HierarchyRequestError"!==F.name||!this.preventDuplicates)throw console.error(this.declaredClass+" - _createTreeBuilder(): Unexpected error occured while trying to place node",F),F;}this.preventDuplicates&&this.removeDuplicates(a,c)},_beginUpdate:function(){return this._updating?!1:this._updating=!0},_checkForIndent:function(a){this._showRootNodePreview(!1);var c=t(".treeFolder").position();if((r.contains(a.target.parentNode,this.dndItemClass)||
r.contains(a.target.parentNode,"treeFolder")||r.contains(a.target.parentNode,"treeContainer"))&&this._treeList.isDragging){var d=null;this.placeBefore=!1;if(r.contains(a.target,"rootFolder"))if(a.touches){var n=a.touches[0];b.get(this._treeList.node,"paddingTop")>n.pageY-c[0].y&&(this.placeBefore=!0,this._showRootNodePreview(!0))}else b.get(this._treeList.node,"paddingTop")>a.offsetY&&0<a.offsetY&&(this.placeBefore=!0,this._showRootNodePreview(!0));else d=this._getNearestDijitNode(a.target),this._showRootNodePreview(!1);
null!==d&&(this.indentChild=!1,this.outdentChild=-1,this._treeList.before=!1,n=0,a.touches?(n=a.touches[0],d.depth*this.indentSize<=n.pageX-c[0].x-this.indentSize?(this.indentChild=!0,n=this.indentSize*(d.depth+1)):(d.depth-1)*this.indentSize>n.pageX-c[0].x-this.indentSize?(this.outdentChild=Math.floor((n.pageX-c[0].x)/this.indentSize),n=this.indentSize*this.outdentChild):n=this.indentSize*d.depth):d.depth*this.indentSize<=a.offsetX-this.indentSize?(this.indentChild=!0,n=this.indentSize*(d.depth+
1)):(d.depth-1)*this.indentSize>a.offsetX-this.indentSize?(this.outdentChild=Math.floor(a.offsetX/this.indentSize),n=this.indentSize*this.outdentChild):n=this.indentSize*d.depth,n+=b.get(d.expandNode,"width"),b.set(d.afterPlaceHolder,"marginLeft",n+"px"))}},_createTreeBuilder:function(){var a=c.create("div",{"class":"treeContainer treeContainerBordered"});this.treeContainerDomNode=a;c.create("span",{"class":"dndHint",innerHTML:this.webviewStrings.dndHintNavTree},a,"last");var b=c.create("div",{"class":"treeFolder rootFolder treeContainer"},
a,"last");this._treeStore=new u(new q({}));this._treeList=new f(b,{creator:h.hitch(this,this.treeNodeCreator),copyOnly:!1,allowNested:!0,autoSync:!0,delay:this.DEFAULT_DELAY,skipForm:!0,accept:["treeNode","resultNode"],maxNodes:this.MAX_NODES,checkAcceptance:h.hitch(this._treeList,this.checkAcceptance)});this.own(g.before(this._treeList,"onDndStart",h.hitch(this,function(a,b){a===this._treeList&&m.forEach(b,h.hitch(this,function(a){var b=p.byId(a.id);0<b.childItems.length&&this._hideChildren(b);r.add(a,
"hidden")}))})));this.own(g.after(this._treeList,"onMouseMove",h.hitch(this,function(a,b){this._checkForIndent(b[0])})));this.own(g.after(this._treeList,"onMouseDown",h.hitch(this,function(a){t(".dojoDndTarget div").removeClass("customSelected");this._highlightSelectedNodes(this._treeList.getSelectedNodes())})));this.own(g.after(this._treeList,"onDndDrop",h.hitch(this,this._afterDrop),!0));this.own(g.after(this._treeList,"onDndCancel",h.hitch(this,function(){this._treeList.selectNone();for(var b in this._treeList.map){var c=
p.byId(b).domNode;r.remove(c,"hidden")}this._toggleHintArea();b=t(".dojoDndItemBefore",a);m.forEach(b,function(a){r.remove(a,"dojoDndItemBefore")});this._showRootNodePreview(!1)})));this.builderWidget.setMainContent(a)},_deleteTreeNode:function(a){this._removeAllChildren(a);this._removeSingleNode(a);this._toggleHintArea()},_endUpdate:function(){this._updating&&(this._updating=!1)},_enforceMaxDepth:function(a,b,c,n){if(c>=this._MAX_DEPTH)this._setChildrensParent(a,b,n);else{var f=new d;m.forEach(a.childItems,
h.hitch(this,function(b){f.then(h.hitch(this,this._enforceMaxDepth,b,a,c+1,n))}));this.own(f);f.resolve()}return n},_findLastChild:function(a){0<a.childItems.length&&(a=this._findLastChild(a.childItems[0]));return a},_getChildArray:function(){this._treeList.sync();var a=t("."+this.dndItemClass,this._treeList.node),a=m.filter(a,function(a){return null===p.byId(a.id).parent||void 0===p.byId(a.id).parent}),b=[];m.forEach(a,function(a){a=p.byId(a.id);b.push(a.getData())});return b},_getNearestDijitNode:function(a){for(var b=
p.byId(a.id);!b;)a=a.parentNode,b=p.byId(a.id);return b?b:null},_getParentAtDepth:function(a,b){return-1===b?null:null===a.parent||void 0===a.parent||a.depth===b?a:this._getParentAtDepth(p.byId(a.parent),b)},_getParents:function(a,b){if(null===a.parent)return b;var c=p.byId(a.parent);b.push(c);this._getParents(c,b)},_getSelectedNodes:function(){var a=t(".tree-item-checkbox",this.builderWidget.domNode),a=m.filter(a,function(a){return p.byNode(a).get("checked")}),b=[];m.forEach(a,function(a){b.push(p.byNode(a.parentElement.parentElement))});
return b},_hideChildren:function(a){for(var b=0;b<a.childItems.length;b++)0<a.childItems[b].childItems.length&&this._hideChildren(a.childItems[b]),r.add(a.childItems[b].domNode,"hidden")},_highlightSelectedNodes:function(a){m.forEach(a,h.hitch(this,function(a){r.add(a,"customSelected");a=this._treeStore.query({id:a.id});0<a.length&&(a=a[0],0<a.childItems.length&&this._highlightAllChildren(a.childItems))}))},_highlightAllChildren:function(a){m.forEach(a,h.hitch(this,function(a){r.add(a.domNode,"customSelected");
0<a.childItems.length&&this._highlightAllChildren(a.childItems)}))},_placeNewNode:function(a,b,d,n,f){for(var g=b.length-1;0<=g;g--){var q=b[g];if(void 0===n||null===n)if(a===f)n=p.byId(q.id);else for(var q=a.getItem(q.id),l=Object.keys(f.map),h=l.length-1;0<=h;h--){var u=l[h];if(f.map[u].data===q.data){n=p.byId(u);break}}if(null===d||n.id!==d.id){l=null;if(this.indentChild&&d)n.parent!==d.id&&(l=p.byId(n.parent),null!==l&&(l.modifyChildren(n,!0),this._treeStore.put(l,{overwrite:!0}))),this._addChild(d,
n),this._addParent(n,d);else if(d&&d.parent)q=null,q=-1<this.outdentChild?this._getParentAtDepth(p.byId(d.parent),this.outdentChild-1):p.byId(d.parent),null!==n&&(l=p.byId(n.parent)),null!==l&&(l.modifyChildren(n,!0),this._treeStore.put(l,{overwrite:!0})),-1<this.outdentChild?(this._addChild(d,n),null!==q?this._addParent(n,q):(n.parent=null,n.setDepth(0,this.indentSize))):(l=this._findLastChild(d),this._addChild(l,n),this._addParent(n,q));else{null!==n&&(l=p.byId(n.parent));null!==l&&(l.modifyChildren(n,
!0),this._treeStore.put(l,{overwrite:!0}));n.parent=null;n.setDepth(0,this.indentSize);this.placeBefore&&c.place(n.domNode,this._treeList.node.firstChild,"before");if(n.childItems&&0<n.childItems.length)for(q=0;q<n.childItems.length;q++)this._addChild(n,n.childItems[q]);if(d&&d.childItems&&0<d.childItems.length)for(q=0;q<d.childItems.length;q++)this._addChild(d,d.childItems[q])}n._showChildren(n,r.contains(n.expandNode,"collapseIcon"));this._treeStore.put(n,{overwrite:!0});n=null}}this.placeBefore=
this.indentChild=!1;this.outdentChild=-1;this.setDirty(!0,this.saveButton)},_reduceNodeList:function(a){var b=[],c=a.filter(function(a){return-1===a.id.indexOf("dojo")}).map(function(a){return a.id});for(i=0;i<c.length;i++)for(var d=this._treeStore.query({id:c[i]}),d=0<d.length?d[0].parent:null,n=c[i];d;)-1<c.indexOf(d)&&-1===b.indexOf(n)&&b.push(n),n=d,d=this._treeStore.query({id:d}),d=0<d.length?d[0].parent:null;return a=a.filter(function(a){return-1===b.indexOf(a.id)})},_removeAllChildren:function(a){if(0===
a.childItems.length)this._removeSingleNode(a);else for(;0<a.childItems.length;)this._removeAllChildren(a.childItems[0])},_removeSingleNode:function(a){a.parent&&p.byId(a.parent).modifyChildren(a,!0);this._treeList.delItem(a.domNode.id);c.destroy(a.domNode);this._treeStore.remove(a.id);this.setDirty(!0,this.saveButton)},_setChildrensParent:function(a,b,c){m.forEach(a.childItems,h.hitch(this,function(a){c.push(a.objId);this._setChildrensParent(a,b,c);this._addParent(a,b)}));a.childItems=[];a.modifyChildren(null,
!0)},_setDirty:function(a,b){var c=b?r.remove:r.add,d=b?r.add:r.remove;m.forEach(a,h.hitch(this,function(a){d(a.toolbarButtonIcon,"dirtySaveIcon");c(a.toolbarButtonIcon,"saveIcon")}))},_setupManager:function(){this.manager=l.manager();this.manager.OFFSET_X=-10;this.manager.OFFSET_Y=10;this.manager.makeAvatar=h.hitch(this,function(){return new this.dndAvatar(this.manager)})},_showRootNodePreview:function(a){try{var c=p.byId(this._treeList.node.firstChild.id);c&&(b.set(c.beforePlaceHolder,"marginLeft",
b.get(c.expandNode,"width")+"px"),r.toggle(c.beforePlaceHolder,"hidden",!a))}catch(z){}},_toggleHintArea:function(){var a=null,b=null;if(0>=Object.keys(this._treeList.map).length){if(a=t(".noBorder",this.builderWidget.domNode)[0])b=t(".dndHint",a)[0],r.add(a,"treeContainerBordered"),r.remove(a,"noBorder"),r.remove(b,"hidden")}else if(a=t(".treeContainerBordered",this.builderWidget.domNode)[0])b=t(".dndHint",a)[0],r.remove(a,"treeContainerBordered"),r.add(a,"noBorder"),r.add(b,"hidden")},destroy:function(){this.inherited(arguments);
this._treeStore=null;null!==this._treeList&&this._treeList.destroy();this.manager=null}})})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){var a=m("dojo.dnd.Manager",[d],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},
OFFSET_X:l("touch")?4:16,OFFSET_Y:l("touch")?4:16,overSource:function(a){this.avatar&&(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=!!this.target,this.avatar.update());c.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),c.publish("/dnd/source/over",null)):c.publish("/dnd/source/over",null)},startDrag:function(a,d,f){function n(a){a.preventDefault();a.stopPropagation()}q.autoScrollStart(h.doc);
this.source=a;this.nodes=d;this.copy=!!f;this.avatar=this.makeAvatar();h.body().appendChild(this.avatar.node);c.publish("/dnd/start",a,d,this.copy);this.events=[r(h.doc,b.move,k.hitch(this,"onMouseMove")),r(h.doc,b.release,k.hitch(this,"onMouseUp")),r(h.doc,"keydown",k.hitch(this,"onKeyDown")),r(h.doc,"keyup",k.hitch(this,"onKeyUp")),r(h.doc,"dragstart",n),r(h.body(),"selectstart",n)];a="dojoDnd"+(f?"Copy":"Move");g.add(h.body(),a)},canDrop:function(a){a=!(!this.target||!a);this.canDropFlag!=a&&(this.canDropFlag=
a,this.avatar.update())},stopDrag:function(){g.remove(h.body(),["dojoDndCopy","dojoDndMove"]);p.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new u(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(q.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=!!this.source.copyState(t.getCopyKeyState(a)),
this.copy!=b&&this._setCopyStatus(b));l("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=!!this.source.copyState(t.getCopyKeyState(a));c.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);c.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else c.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case f.CTRL:a=!!this.source.copyState(!0);this.copy!=a&&this._setCopyStatus(a);
break;case f.ESCAPE:c.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==f.CTRL&&(a=!!this.source.copyState(!1),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();g.replace(h.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});t._manager=null;a.manager=t.manager=function(){t._manager||(t._manager=new a);return t._manager};return a})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),
function(p,m,k,h,g,d,l,f){return p("dojo.dnd.Avatar",null,{constructor:function(d){this.manager=d;this.construct()},construct:function(){var f=d.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),c=this.manager.source,b,g=d.create("tbody",null,f),q=d.create("tr",null,g),u=d.create("td",null,q),a=Math.min(5,this.manager.nodes.length),n=0;l("highcontrast")&&d.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},u);d.create("span",{innerHTML:c.generateText?
this._generateText():""},u);for(h.set(q,{"class":"dojoDndAvatarHeader",style:{opacity:.9}});n<a;++n)c.creator?b=c._normalizedCreator(c.getItem(this.manager.nodes[n].id).data,"avatar").node:(b=this.manager.nodes[n].cloneNode(!0),"tr"==b.tagName.toLowerCase()&&(q=d.create("table"),d.create("tbody",null,q).appendChild(b),b=q)),b.id="",q=d.create("tr",null,g),u=d.create("td",null,q),u.appendChild(b),h.set(q,{"class":"dojoDndAvatarItem",style:{opacity:(9-n)/10}});this.node=f},destroy:function(){d.destroy(this.node);
this.node=!1},update:function(){g.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(l("highcontrast")){var d=k.byId("a11yIcon"),c="+";this.manager.canDropFlag&&!this.manager.copy?c="\x3c ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(c="x"):c="o";d.innerHTML=c}f("tr.dojoDndAvatarHeader td span"+(l("highcontrast")?" span":""),this.node).forEach(function(b){b.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t){k.isAsync||f(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var q=m("dojo.dnd.Source",b,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(b,
a){h.mixin(this,h.mixin({},a));var c=this.accept;if(c.length){this.accept={};for(var d=0;d<c.length;++d)this.accept[c[d]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&g.add(this.node,"dojoDndSource");this.targetState="";this.accept&&g.add(this.node,"dojoDndTarget");this.horizontal&&g.add(this.node,"dojoDndHorizontal");this.topics=[r.subscribe("/dnd/source/over",h.hitch(this,"onDndSourceOver")),
r.subscribe("/dnd/start",h.hitch(this,"onDndStart")),r.subscribe("/dnd/drop",h.hitch(this,"onDndDrop")),r.subscribe("/dnd/cancel",h.hitch(this,"onDndCancel"))]},checkAcceptance:function(b,a){if(this==b)return!this.copyOnly||this.selfAccept;for(var c=0;c<a.length;++c){for(var d=b.getItem(a[c].id).type,f=!1,g=0;g<d.length;++g)if(d[g]in this.accept){f=!0;break}if(!f)return!1}return!0},copyState:function(b,a){if(b)return!0;2>arguments.length&&(a=this==t.manager().target);if(a){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;
return!1},destroy:function(){q.superclass.destroy.call(this);p.forEach(this.topics,function(b){b.remove()});this.targetAnchor=null},onMouseMove:function(b){if(!this.isDragging||"Disabled"!=this.targetState){q.superclass.onMouseMove.call(this,b);var a=t.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)){var n=this.getSelectedNodes();n.length&&a.startDrag(this,n,this.copyState(c.getCopyKeyState(b),!0))}this.isDragging&&
(n=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=d.position(this.current,!0)),n=this.horizontal?b.pageX-this.targetBox.x<this.targetBox.w/2==d.isBodyLtr(this.current.ownerDocument):b.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||n!=this.before)&&(this._markTargetAnchor(n),a.canDrop(!this.current||a.source!=this||!(this.current.id in this.selection)))}},onMouseDown:function(b){this.mouseDown||!this._legalMouseDown(b)||this.skipForm&&
c.isFormElement(b)||(this.mouseDown=!0,this._lastX=b.pageX,this._lastY=b.pageY,q.superclass.onMouseDown.call(this,b))},onMouseUp:function(b){this.mouseDown&&(this.mouseDown=!1,q.superclass.onMouseUp.call(this,b))},onDndSourceOver:function(b){this!==b?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(b=t.manager(),b.canDrop("Disabled"!=this.targetState&&(!this.current||b.source!=this||!(this.current.id in this.selection))))},onDndStart:function(b,a,c){this.autoSync&&
this.sync();this.isSource&&this._changeState("Source",this==b?c?"Copied":"Moved":"");a=this.accept&&this.checkAcceptance(b,a);this._changeState("Target",a?"":"Disabled");this==b&&t.manager().overSource(this);this.isDragging=!0},onDndDrop:function(b,a,c,d){if(this==d)this.onDrop(b,a,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target",
"")},onDrop:function(b,a,c){if(this!=b)this.onDropExternal(b,a,c);else this.onDropInternal(a,c)},onDropExternal:function(b,a,d){var n=this._normalizedCreator;this._normalizedCreator=this.creator?function(a,c){return n.call(this,b.getItem(a.id).data,c)}:d?function(a){var d=b.getItem(a.id);a=a.cloneNode(!0);a.id=c.getUniqueId();return{node:a,data:d.data,type:d.type}}:function(a){var c=b.getItem(a.id);b.delItem(a.id);return{node:a,data:c.data,type:c.type}};this.selectNone();d||this.creator||b.selectNone();
this.insertNodes(!0,a,this.before,this.current);!d&&this.creator&&b.deleteSelectedNodes();this._normalizedCreator=n},onDropInternal:function(b,a){var d=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(a)this._normalizedCreator=this.creator?function(a,b){return d.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id);a=a.cloneNode(!0);a.id=c.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=
function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,b,this.before,this.current);this._normalizedCreator=d}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){q.superclass.onOverEvent.call(this);t.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){q.superclass.onOutEvent.call(this);t.manager().outSource(this);if(this.isDragging&&"Disabled"!=
this.targetState)this.onDraggingOut()},_markTargetAnchor:function(b){if(this.current!=this.targetAnchor||this.before!=b)this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=b,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=
null,this.before=!0)},_markDndStatus:function(b){this._changeState("Source",b?"Copied":"Moved")},_legalMouseDown:function(b){if("touchstart"!=b.type&&!l.isLeft(b))return!1;if(!this.withHandles)return!0;for(b=b.target;b&&b!==this.node;b=b.parentNode){if(g.contains(b,"dojoDndHandle"))return!0;if(g.contains(b,"dojoDndItem")||g.contains(b,"dojoDndIgnore"))break}return!1}});return q})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){var q=m("dojo.dnd.Selector",t,{constructor:function(b,a){a||(a={});this.singular=a.singular;this.autoSync=a.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(r(this.node,c.press,h.hitch(this,"onMouseDown")),r(this.node,c.release,h.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var c=new f,a=b._empty,d;for(d in this.selection)d in a||c.push(g.byId(d));return c},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(b,a){this._addItemClass(g.byId(a),"Selected");this.selection[a]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var c=b._empty,a;for(a in this.selection)if(!(a in c)){var n=g.byId(a);this.delItem(a);d.destroy(n)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(c,a){a=a||k.global;var d=this.selection,f=b._empty,g;for(g in d)g in f||c.call(a,this.getItem(g),g,this)},sync:function(){q.superclass.sync.call(this);
this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var c=[],a=b._empty,d;for(d in this.selection)d in a||this.getItem(d)||c.push(d);p.forEach(c,function(a){delete this.selection[a]},this);return this},insertNodes:function(b,a,c,d){var n=this._normalizedCreator;this._normalizedCreator=function(a,c){var d=n.call(this,a,c);b?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,"Selected"),this._removeItemClass(d.node,"Anchor"));return d};q.superclass.insertNodes.call(this,a,c,d);this._normalizedCreator=n;return this},destroy:function(){q.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(c){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!b.getCopyKeyState(c)&&!c.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,l.isLeft(c)&&(c.stopPropagation(),c.preventDefault());else{if(!this.singular&&c.shiftKey){b.getCopyKeyState(c)||this._removeSelection();var a=this.getAllNodes();if(a.length&&(this.anchor||(this.anchor=a[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var d=0,f;d<a.length&&(f=a[d],f!=this.anchor&&f!=this.current);++d);for(++d;d<a.length;++d){f=a[d];if(f==this.anchor||f==this.current)break;this._addItemClass(f,"Selected");this.selection[f.id]=
1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?b.getCopyKeyState(c)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):b.getCopyKeyState(c)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):
(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);c.stopPropagation();c.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&
(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=r(this.node,c.move,h.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var c=b._empty,a;for(a in this.selection)if(!(a in c)){var d=g.byId(a);d&&this._removeItemClass(d,"Selected")}this.selection=
{};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return q})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){m=m("dojo.dnd.Container",r,{skipForm:!1,allowNested:!1,constructor:function(a,c){this.node=d.byId(a);
c||(c={});this.creator=c.creator||null;this.skipForm=c.skipForm;this.parent=c.dropParent&&d.byId(c.dropParent);this.map={};this.current=null;this.containerState="";l.add(this.node,"dojoDndContainer");c&&c._skipStartup||this.startup();this.events=[b(this.node,q.over,h.hitch(this,"onMouseOver")),b(this.node,q.out,h.hitch(this,"onMouseOut")),b(this.node,"dragstart",h.hitch(this,"onSelectStart")),b(this.node,"selectstart",h.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},
setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||k.global;var c=this.map,d=u._empty,f;for(f in c)f in d||a.call(b,c[f],f,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return t((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=u.getUniqueId();var c=b.getAttribute("dndType"),
d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);
return this},destroy:function(){p.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=a[0])}this.defaultCreator=u._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&
b!=this.node;)try{b=b.parentNode}catch(v){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(n){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){this.skipForm&&
u.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a,d=a.toLowerCase()+"State";l.replace(this.node,c+b,c+this[d]);this[d]=b},_addItemClass:function(a,b){l.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){l.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&l.contains(a,"dojoDndItem"))return a;
return null},_normalizedCreator:function(a,b){var c=(this.creator||this.defaultCreator).call(this,a,b);h.isArray(c.type)||(c.type=["text"]);c.node.id||(c.node.id=u.getUniqueId());l.add(c.node,"dojoDndItem");return c}});u._createNode=function(a){return a?function(b){return f.create(a,{innerHTML:b})}:u._createSpan};u._createTrTd=function(a){var b=f.create("tr");f.create("td",{innerHTML:a},b);return b};u._createSpan=function(a){return f.create("span",{innerHTML:a})};u._defaultCreatorNodes={ul:"li",ol:"li",
div:"div",p:"div"};u._defaultCreator=function(a){a=a.tagName.toLowerCase();var b="tbody"==a||"thead"==a?u._createTrTd:u._createNode(u._defaultCreatorNodes[a]);return function(a,c){var d=a&&h.isObject(a),f,n;d&&a.tagName&&a.nodeType&&a.getAttribute?(f=a.getAttribute("dndData")||a.innerHTML,d=(d=a.getAttribute("dndType"))?d.split(/\s*,\s*/):["text"],n=a):(f=d&&a.data?a.data:a,d=d&&a.type?a.type:["text"],n=("avatar"==c?u._createSpan:b)(String(f)));n.id||(n.id=u.getUniqueId());return{node:n,data:f,type:d}}};
return m})},"webview/admin/_dndAvatar":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dnd/Avatar dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/query dojo/hccss".split(" "),function(p,m,k,h,g,d,l,f,r,c,b){return k("webview/admin/_dndAvatar",g,{maximumAvatarItems:10,construct:function(){var f=this.getAvatarWidth(),f=l.create("div",{"class":"dojoDndAvatar webviewAdminScheduleTreeAvatar",style:{position:"fixed",zIndex:"1999",
marginLeft:"0",width:f+"px"}}),g=this.manager.source,h,a;c("highcontrast")&&l.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},a);h=null;for(var n=this.manager.nodes.length,k=0;k<this.maximumAvatarItems+1&&k<n;k++)h=this.manager.nodes[k],g._normalizedCreator&&((a=g.getItem(h.id).data)?(a=g._normalizedCreator(a,"avatar"),h=a.node||a.domNode):(p.byId(h.id),a&&(h=g._normalizedCreator(a,"avatar").node,d.add(h,"navTreeAvatar"))),this.manager.OFFSET_X=-Number(r.get(h,"marginLeft"))),
h.id="",a=l.create("span",{"class":"dojoDndAvatarItem webviewAdminScheduleTreeAvatar"},f),h.classList.contains("navTreeAvatar")&&(f.classList.add("navTreeAvatarParent"),a.classList.add("navTreeAvatarParent")),a.appendChild(h);this.node=f;n>this.maximumAvatarItems&&(a.appendChild(h),f=n-this.maximumAvatarItems,d.add(h,"lastAvatarNode"),"undefined"!==typeof h&&(h.innerHTML="\x3cdiv\x3e+ "+f+(1===f?" other":" others")+"\x3c/div\x3e"),l.destroy(b(".navIcon",h)[0]))},getAvatarWidth:function(){var c=b(".treeContainer",
"rcSystemContent")[0];return f.getMarginBox(c,r.getComputedStyle(c)).w}})})},"webview/admin/SearchableWidget":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/dnd/Source dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/fx dojo/on dojo/query dojo/topic ./_objectTypeMap ./widget/SearchForObjectResults".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return m("webview/admin/SearchableWidget",null,{objectTypeMap:n,
bacnetOnly:!1,extraSearchParameters:{},searchPath:"tree/objects",_BannerHeight:60,_CloseDuration:250,_DefaultPagingBarHeight:42,_FadeDuration:250,_closeHandle:null,_footerHeight:0,_headerHeight:0,_rangeChangeHandle:null,_resultsOpened:!1,_isSearchable:!1,_supportedObjectTypes:[],_toolbarHeight:0,RESIZE_BUFFER:5,closeResults:function(){this._resultsOpened=!1;this._closeResults()},createSource:function(a){return new d(a,{creator:h.hitch(this,this._pointsNodeCreator),copyOnly:!0,singular:!1,generateText:!1,
selfAccept:!1,skipForm:!0})},isSearchable:function(){return!0===this._isSearchable},publishSearchable:function(){this._isSearchable=!0;a.publish("searchableWidget",this._supportedObjectTypes,this)},publishUnsearchable:function(){this.closeResults();this._isSearchable=!1;a.publish("unsearchableWidget",this)},showResults:function(a,b,c){this._resultsOpened||this._openResults();var d=r.create("div",null);null!==c.dataArray&&0<c.dataArray.length?(d=this._getPointsNode(c.dataArray),this._totalCount=c.totalCount,
-1===b&&(b=this._totalCount-1),this._itemsPerPage=b+1-a,this._currentPage=this._totalCount>b+1?Math.floor((b+1)/c.dataArray.length):Math.ceil(this._totalCount/this._itemsPerPage)):(this._itemsPerPage=this._totalCount=0,this._currentPage=1);this.resultsWidget.buildResults(d,this._totalCount,this._itemsPerPage,this._currentPage)},updateRange:function(b){var c=b.get("currPage");b=b.get("itemsPerPage");var d={};1>c?c=1:c>Math.ceil(this._totalCount/b)&&(c=Math.ceil(this._totalCount/b));200<b?(d.low=0,
d.high=-1):(d.low=Math.floor((c-1)*b),d.high=Math.floor(c*b-1));a.publish("updateRange",d)},_clearHandles:function(){null!==this._rangeChangeHandle&&(this._rangeChangeHandle.remove(),this._rangeChangeHandle=null);null!==this._closeHandle&&(this._closeHandle.remove(),this._closeHandle=null)},_closeResults:function(){this._clearHandles();var a=this.resultsWidget.domNode.clientWidth,c=k.animateProperty({node:this.resultsWidget.contents,duration:this._FadeDuration,properties:{opacity:{start:1,end:0}}}),
d=k.animateProperty({node:this.resultsWidget.resultsTitle,duration:this._FadeDuration,properties:{opacity:{start:1,end:0}}}),f=k.animateProperty({node:this.resultsWidget.closeButton,duration:this._FadeDuration,properties:{opacity:{start:1,end:0}}}),a=k.animateProperty({node:this.resultsWidget.domNode,duration:this._CloseDuration,properties:{width:{start:a,end:0,units:"px"}}}),n=k.animateProperty({node:this.builderContainer,duration:this._CloseDuration,properties:{width:{start:66,end:100,units:"%"}},
onEnd:function(a){b.set(a,"margin-right","0%")}}),c=t.combine([c,d,f]),d=t.combine([a,n]),c=t.chain([c,d]).play();g.after(c,"onEnd",h.hitch(this,this._onClose))},_getFooterHeight:function(){if(1>this._footerHeight){var a=l.byId("rcSystemFooter");if(null!==a){var d=b.getComputedStyle(a);this._footerHeight=c.getMarginBox(a,d).h}}return this._footerHeight},_getHeaderHeight:function(){if(1>this._headerHeight){var a=l.byId("rcAdminContentHeader");null===a&&(a=u(".rcContentHeader")[0]);if(a){var d=b.getComputedStyle(a);
this._headerHeight=c.getMarginBox(a,d).h}}return this._headerHeight},_getPointsNode:function(a){var b=r.create("div",null),c=this.createSource(b);this._setupPointSourceListeners(c);p.forEach(a,h.hitch(this,this.insertPoint,c));return b},_getToolbarHeight:function(){if(1>this._toolbarHeight){var a=u(".admin-toolbar",this.domNode)[0];null==a&&(a=u(".client-toolbar",this.domNode)[0]);if(a){var d=b.getComputedStyle(a);this._toolbarHeight=c.getMarginBox(a,d).h}}return this._toolbarHeight},_onClose:function(){f.add(this.resultsWidget.domNode,
"hidden");this._searchResultExpandToFill=!1;b.set(this.builderContainer,"position","");b.set(this.resultsWidget.domNode,"z-index","");b.set(this.resultsWidget.domNode,"padding-right","");this.onCloseSearchResults()},_openResults:function(){var c;this._rangeChangeHandle=q(this.resultsWidget,"rangeChange",h.hitch(this,this.updateRange));this._closeHandle=q(this.resultsWidget,"closeResults",h.hitch(this,function(){a.publish("closeResults")}));if(this._searchResultExpandToFill)c=this.domNode.clientWidth,
b.set(this.builderContainer,"position","fixed"),b.set(this.resultsWidget.domNode,"z-index","2147483647"),b.set(this.resultsWidget.domNode,"padding-right","0");else if(c=.3*this.domNode.clientWidth,this._editAnimationContent)this._editAnimationContent.onClose();this._resize(c);f.remove(this.resultsWidget.domNode,"hidden");var d=k.animateProperty({node:this.resultsWidget.domNode,duration:this._CloseDuration,properties:{width:{start:0,end:c,units:"px"}}}),n=k.animateProperty({node:this.builderContainer,
duration:this._CloseDuration,properties:{width:{start:98,end:68,units:"%"}},onEnd:function(a){b.set(a,"margin-right","0.6%")}}),l=k.animateProperty({node:this.resultsWidget.contents,duration:this._FadeDuration,properties:{opacity:{start:0,end:1}}}),r=k.animateProperty({node:this.resultsWidget.resultsTitle,duration:this._FadeDuration,properties:{opacity:{start:0,end:1}}}),u=k.animateProperty({node:this.resultsWidget.closeButton,duration:this._FadeDuration,properties:{opacity:{start:0,end:1}}}),l=t.combine([l,
r,u]),d=t.combine([d,n]),d=t.chain([d,l]).play();this.own(g.after(d,"onEnd",h.hitch(this,function(){this.resultsWidget.resize();this.onOpenSearchResults()})));b.set(this.resultsWidget.resultsTitle,"width",c-40+"px");this._resultsOpened=!0},getSearchResultsMaxHeight:function(){var a=window.innerHeight-this._BannerHeight,a=a-this._getFooterHeight(),a=a-this._getHeaderHeight(),a=a-this._getToolbarHeight();this.gridNode?a-=2*b.get(this.gridNode,"marginTop")+10:this.builderWidget?a-=2*b.get(this.builderWidget.domNode,
"paddingTop")+10:this.builderContainer&&(a-=2*b.get(this.builderContainer,"paddingTop")+10);return a},onCloseSearchResults:function(){},onOpenSearchResults:function(){},_resize:function(a){this.resultsWidget&&(this._resultsOpened&&Math.abs(b.get(this.resultsWidget.domNode,"width")-a)>this.RESIZE_BUFFER&&(b.set(this.resultsWidget.domNode,"width",a+"px"),b.set(this.resultsWidget.resultsTitle,"width",a-40+"px"),this.resultsWidget.resize()),a=this.getSearchResultsMaxHeight(),Math.abs(b.get(this.resultsWidget.domNode,
"height")-a)>this.RESIZE_BUFFER&&(b.set(this.resultsWidget.domNode,"height",a+"px"),this.resultsWidget.resize()))},destroy:function(){this._clearHandles();this.inherited(arguments)}})})},"webview/admin/widget/SearchForObjectResults":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!../../nls/all dojo/on dojo/text!./templates/SearchForObjectResults.html ./PagingBar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return h("webview/admin/widget/SearchForObjectResults",[m,p,k],{baseClass:"",paneTitle:"Search Results",templateString:b,webviewStrings:r,_ResultsHeaderHeight:40,_TotalPaddingHeight:32,postCreate:function(){this.inherited(arguments);this.own(c(this._bottomPagingBar,["countChange","pageChange"],g.hitch(this,this._onRangeChange,this._bottomPagingBar)),c(this.closeButton,"click",g.hitch(this,this._onCloseResults)),c(this.resultsContainer,"click",g.hitch(this,this._removeSearchFocus)))},
onClose:function(){this._onCloseResults()},onCloseResults:function(){},onRangeChange:function(){},buildResults:function(b,c,d,a){this._updatePagingBar(this._bottomPagingBar,c,d,a);0<c?l.place(b,this.resultsContainer,"only"):l.place(l.create("span",{innerHTML:this.webviewStrings.noPointsFound}),this.resultsContainer,"only")},resize:function(){var b=this.domNode.clientHeight,b=b-(this._ResultsHeaderHeight+this._TotalPaddingHeight);f.set(this.contentPaneBody,"height",b+"px");this._bottomPagingBar.resize();
var c=this._bottomPagingBar.domNode.clientHeight,d=f.get(this._bottomPagingBar.domNode,"marginTop");f.set(this.resultsContainer,"height",b-c-d+"px")},_onCloseResults:function(){this.onCloseResults()},_onRangeChange:function(b){this.onRangeChange(b)},_removeSearchFocus:function(){this._focusManager.curNode&&"searchBox"===this._focusManager.curNode.dataset.dojoAttachPoint&&this._focusManager.curNode.blur()},_updatePagingBar:function(b,c,g,a){c===g?b.set({totalCount:c,currPage:a}):b.set({totalCount:c,
itemsPerPage:g,currPage:a});d.toggle(b.domNode,"hidden",!1);f.set(b.domNode,"opacity",0===c?0:1)}})})},"webview/admin/widget/PagingBar":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-style dojo/Evented dojo/i18n!webview/nls/all dojo/keys dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/PagingBar.html dijit/form/FilteringSelect dijit/form/TextBox".split(" "),function(p,
m,k,h,g,d,l,f,r,c,b,t,q,u,a){return h("webview/admin/widget/PagingBar",[m,p,k,r],{templateString:a,totalCount:0,webviewStrings:c,itemsPerPage:50,currPage:1,_AllItems:2E3,_viewOptions:null,_lastPage:-1,RESIZE_BUFFER:5,OPTIONS_WIDTH_SCALER:.6,constructor:function(){this.itemsPerPageStore=new u(new q({data:[{id:25,name:25},{id:50,name:50},{id:100,name:100},{id:200,name:200},{id:this._AllItems,name:this.webviewStrings.pagingbarAll}]}))},buildRendering:function(){this.inherited(arguments);this.viewItemOptions.set("store",
this.itemsPerPageStore);this.set("totalCount",this.totalCount);this.own(t(this.viewItemOptions,"change",g.hitch(this,this._setItemsPerPage)))},postCreate:function(){this._setupListeners();this.currPageOption.set("value",this.currPage)},resize:function(){l.toggle(this.itemCount,"hidden",!1);l.toggle(this.viewItemOptionsContainer,"hidden",!1);var a=this.domNode.clientWidth-(this.itemCount.clientWidth+this.pageJumping.clientWidth),b=a*this.OPTIONS_WIDTH_SCALER;Math.abs(this.viewItemOptionsContainer.clientWidth-
b)>=this.RESIZE_BUFFER&&f.set(this.viewItemOptionsContainer,"width",b+"px");l.toggle(this.viewItemOptionsContainer,"hidden",a<this.viewItemOptions.domNode.clientWidth+.3*this.pageJumping.clientWidth);l.toggle(this.itemCount,"hidden",this.domNode.clientWidth<this.itemCount.clientWidth+1.3*this.pageJumping.clientWidth)},_setupListeners:function(){this.own(t(this.firstPage,"click",g.hitch(this,this._goToPage,"first")),t(this.prevPage,"click",g.hitch(this,this._goToPage,"prev")),t(this.nextPage,"click",
g.hitch(this,this._goToPage,"next")),t(this.lastPage,"click",g.hitch(this,this._goToPage,"last")));this.own(t(this.currPageOption,"keypress",g.hitch(this,function(a){a.charOrCode===b.ENTER&&this._goToPage(this.currPageOption.get("value"))})))},setTotalCount:function(a){this.set("totalCount",a)},updateItemCount:function(){this._lastPage=Math.ceil(this.totalCount/this.itemsPerPage);var a=(this.currPage-1)*this.itemsPerPage+1;0>a&&(a=0);d.set(this.itemCount,"innerHTML",a+" - "+(this.currPage<this._lastPage?
this.currPage*this.itemsPerPage:this.totalCount)+" "+c.pagingbarOf+" "+this.totalCount+" "+c.pagingbarItems);this.resize()},updateItemsPerPage:function(a){var b=this.itemsPerPage*(this.currPage-1);this.itemsPerPage=Number(a);200>=this.itemsPerPage?this.viewItemOptions.set("value",this.itemsPerPage):this.viewItemOptions.set("value",this._AllItems);a=1;200>=this.itemsPerPage&&(a=b/this.itemsPerPage+1);this.updateCurrentPage(a)},_setItemsPerPage:function(a){this.set("itemsPerPage",Number(a))},onCountChange:function(){this.emit("countChange");
return this.itemsPerPage},updateCurrentPage:function(a){this.currPage=Number(a);isNaN(this.currPage)&&(this.currPage=1);"Infinity"===this._lastPage&&(this._lastPage=1);this.currPageOption.set("value",this.currPage);this.updateItemCount()},_goToPage:function(a){switch(a){case "first":this.updateCurrentPage(1);break;case "prev":1>this.currPage-1?this.updateCurrentPage(this.currPage):this.updateCurrentPage(--this.currPage);break;case "next":this.currPage+1>this._lastPage?this.updateCurrentPage(this.currPage):
this.updateCurrentPage(++this.currPage);break;case "last":this.updateCurrentPage(this._lastPage);break;default:this.updateCurrentPage(a)}this.onPageChange()},onPageChange:function(){this.emit("pageChange");return this.currPage},_setCurrPageAttr:function(a){this.currPage!==a&&this.updateCurrentPage(a)},_setItemsPerPageAttr:function(a){this.itemsPerPage!==a&&(this.itemsPerPage=a,this.onCountChange());this.updateItemsPerPage(a)},_setTotalCountAttr:function(a){this.totalCount!==a&&(this.totalCount=a,
this.updateItemCount())}})})},"webview/admin/trees/NavTreeToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!webview/admin/trees/templates/navTreeToolbar.html ../_Widget ../../widget/AddButton".split(" "),function(p,m,k,h,g,d,l,f,r,c){return p("webview/admin/trees/NavTreeToolbar",[c],{templateString:r,_isSelectAll:!0,constructor:function(){this.webviewStrings=
d;this.afterHoursStrings=g;this.nlsStrings=h;this.errorStrings=l;this.rcStrings=h},postCreate:function(){this.inherited(arguments);this.toggleDeleteEnabled(!1);this._setupOnClicks()},onAddKeyword:function(){this.emit("addKeywordClicked",this.site)},onAddObject:function(){this.emit("addObjectClicked")},onCancelClicked:function(){this.emit("cancelClicked")},onDeleteClicked:function(){this.emit("deleteClicked");this.resetSelectAll()},onSaveClicked:function(){this.emit("saveClicked")},onSelectAllClicked:function(b){this.emit("selectAllClicked",
b);return b},resetSelectAll:function(){this._isSelectAll=!0;k.remove(this.selectAllButton.toolbarButtonIcon,"deselectAllIcon");k.add(this.selectAllButton.toolbarButtonIcon,"selectAllIcon")},setDirty:function(b){k.toggle(this.saveButton.toolbarButtonIcon,"dirty",b)},toggleDeleteEnabled:function(b){this.deleteButton.set("disabled",!b)},toggleSaveEnabled:function(b){this.saveButton.set("disabled",!b)},_setupOnClicks:function(){this.own(f(this.selectAllButton.toolbarButtonIcon,"click",m.hitch(this,this._onSelectAllClicked)),
f(this.deleteButton.toolbarButtonIcon,"click",m.hitch(this,this.onDeleteClicked)),f(this.saveButton.toolbarButtonIcon,"click",m.hitch(this,this.onSaveClicked)),f(this.cancelButton.toolbarButtonIcon,"click",m.hitch(this,this.onCancelClicked)),f(this.navTreeAddButton,"addObject",m.hitch(this,this.onAddObject)),f(this.navTreeAddButton,"addKeyword",m.hitch(this,this.onAddKeyword)))},_onSelectAllClicked:function(){this.onSelectAllClicked(this._isSelectAll);var b,c;this._isSelectAll?(b="selectAllIcon",
c="deselectAllIcon"):(b="deselectAllIcon",c="selectAllIcon");k.remove(this.selectAllButton.toolbarButtonIcon,b);k.add(this.selectAllButton.toolbarButtonIcon,c);this._isSelectAll=!this._isSelectAll}})})},"webview/widget/AddButton":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/declare dojo/i18n!webview/nls/navigationGroups dojo/text!webview/widget/templates/AddButton.html dojo/on dojo/dom-class dojo/Evented dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return g("webview/widget/AddButton",[m,p,k,c],{templateString:l,navGroupStrings:d,supportsAnimations:!0,postCreate:function(){this.inherited(arguments);this.supportsAnimations||r.add(this.AnimationMenuItem,"hidden");this._addListeners()},_addListeners:function(){this.own(f(this.addButton.toolbarButtonIcon,"click",h.hitch(this,function(b){this.openMenu();b.stopPropagation();f.once(window,"click",h.hitch(this,this.closeMenu))}),f(this.ObjectMenuItem,"click",h.hitch(this,
this.emit,"addObject")),f(this.KeywordMenuItem,"click",h.hitch(this,this.emit,"addKeyword"))));this.supportsAnimations&&this.own(f(this.AnimationMenuItem,"click",h.hitch(this,this.emit,"addAnimation")))},closeMenu:function(){r.add(this.addMenu,"hidden")},openMenu:function(){r.remove(this.addMenu,"hidden")}})})},"webview/features/navigationTrees/treeBuilding/TreeBuilder":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dnd/Manager dojo/NodeList-traverse dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/query dojo/text!./templates/TreeBuilder.html dojo/topic dojo/Evented rc/util/notices webview/admin/_objectTypeMap webview/admin/SearchableWidgetWithTree webview/util/Debounce webview/xhrEnhanced ./_DndOperations ./_KeywordsConverter ./_RenderedTreeItemsTracker ./_SystemObjectsConverter ./_TreeSelection ./_TreeStoreCreator ./_TreeCreator ./_TreeDialogManager ./_WithToolbarMixin ./navTreeAvatar ./navTreeDndSource webview/widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R){return d("webview/features/navigationTrees/treeBuilding/TreeBuilder",[m,p,k,C,L,H,K,F,J,N,O,M,S],{RESIZE_BUFFER:0,dialogManager:null,dndAvatar:W,templateString:A,webviewStrings:x,_dndSource:R,_findItemWidgetId:"",_keepAliveTimeout:6E4,_keepAliveTimer:null,_supportedObjectTypes:[E.systemGroups,E.equipmentViews,E.workstationGroups,E.schedules,E.calendars,E.trendLogs,E.runtimeLogs,E.trendLogWorksheets,E.programs,
E.programsWorksheets,E.pointReports,E.pointReportWorksheet],constructor:function(){this.hyperlinkValidations={};this._rowUpdates={}},startUp:function(a,b){this.siteId=a;this.dialogManager=new P({siteId:a});this.own(this.dialogManager);this.dialogManager.on("deleteIcon",l.hitch(this,function(a){this.set("isDirty",!0);for(var b=this.getRenderedTreeItems(),c=0;c<b.length;c++)b[c].customIcon.id===a.id&&b[c].set("CustomIcon",null)}));this.builderWidget.setMainContent(this.treeRenderingDomNode);this.own(z(window,
"resize",l.hitch(this,"resize")));this.publishSearchable();this._setupManager();this._fetchGuidDeferred=this._fetchNewTreeBuilderGuid(b);this._initializeDeferred=this._fetchGuidDeferred.then(l.hitch(this,function(a,b){this.treeId=a;this.treeGuid=b;this.tree=this.createTree(this,this.treeRenderingDomNode);this.createRestStore();this._bindTreeEventHandlers();this._startRenderingTree();this.resize();this._startBuilderKeepAlive()},b));this.own(this._fetchGuidDeferred,this._initializeDeferred);this.inherited(arguments)},
afterRenderRow:function(a){this._removeNoDataState();this.addToRowRenderedMap(a);this._itemsToStartup||(this._itemsToStartup=[]);this._itemsToStartup.push(a);this._treeItemStartupDebounce=G(this._treeItemStartupDebounce,l.hitch(this,this._treeItemStartup),100)},beforeRemoveRow:function(a){a=this.tree.row(a).data;this.removeFromRowRenderedMap(a);var b=this.getIdentity(a),c=this.getTreeItemWidget(a.treeItemWidgetId);c&&(delete this.hyperlinkValidations[b],c.destroy(),delete a.treeItemWidgetId);0==this.getRenderedItemsCount()&&
this._renderNoDataState()},getIdentity:function(a){return this.tree.collection.getIdentity(a)},getSearchResultsMaxHeight:function(){return this._totalSearchResultsHeight},getTreeItemWidget:function(a){return h.byId(a)},isExpanded:function(a){return!0===this.tree._expanded[this.getIdentity(a)]},isFirstTreeItem:function(a){return this._findItemWidgetId===a},onDeleteOptionClicked:function(a){a=a.treeItemId;this._removeRows([a]);delete this.tree.treeItemsChecked[a]},onDeleteSelectedClicked:function(){this._removeRows(Object.keys(this.tree.treeItemsChecked));
this.tree.treeItemsChecked={};this.set("hasCheckedItems",!1)},onCancelClicked:function(){this.treeStore.discardChanges();this.createRestStore(this,this.treeRenderingDomNode);this._startRenderingTree();this.set("isDirty",!1);this.set("hasCheckedItems",!1)},onCheckedTreeItem:function(a,b){!0===b?this.tree.treeItemsChecked[a.treeItemId]=!0:delete this.tree.treeItemsChecked[a.treeItemId];var c=0<Object.keys(this.tree.treeItemsChecked).length;this.set("hasCheckedItems",c)},onHyperlinkItemValidated:function(a){this.hyperlinkValidations||
(this.hyperlinkValidations={});this.hyperlinkValidations[a.itemId]=a.isValid},onSaveClicked:function(){this.saveDeferred||(this._areHyperlinkItemsValid()?(this.set("isSaving",!0),this.saveDeferred=this.treeStore.saveChanges(),this.saveDeferred.then(l.hitch(this,function(){this._closeKeywordSelector();this._closeSearchResults();this.set("isDirty",!1);D.widget.clear();B.publish("alert",{type:"success",message:w.operationSuccessful});this.saveDeferred=null;this.set("isSaving",!1);this.hyperlinkValidations=
{}}),l.hitch(this,function(){B.publish("sticky",{type:"error",message:w.unexpectedError});this.saveDeferred=null;this.set("isSaving",!1)}))):B.publish("sticky",{type:"error",message:w.invalidURL}))},resize:function(){this.inherited(arguments);this._resizeDebounce=G(this._resizeDebounce,l.hitch(this,this._resizeRenderer),25)},toggleDnd:function(a){this.tree.dndSource.delay=a?this.tree.dndParams.delay:Number.MAX_VALUE},_areHyperlinkItemsValid:function(){var a=!0;this.hyperlinkValidations||(this.hyperlinkValidations=
{});for(var b in this.hyperlinkValidations)a&=this.hyperlinkValidations[b];return a},_bindTreeEventHandlers:function(){this.own(this.tree.on("dgrid-select",l.hitch(this,this.onTreeItemSelect)),this.tree.on("dgrid-deselect",l.hitch(this,this.onTreeItemDeselect)),f.after(this.tree.dndSource,"onMouseMove",l.hitch(this,function(a,b){this.onDrag(b[0])})),B.subscribe("/dnd/start",l.hitch(this,function(a,c,d){this._createPlaceHolderFirst(a);0==this.getRenderedItemsCount()?b.add(this.treeRenderingDomNode,
"first-drag-in-progress"):b.add(this.treeRenderingDomNode,"drag-in-progress")})),B.subscribe("/dnd/cancel",l.hitch(this,function(){this._destroyPlaceHolderFirst();b.remove(this.treeRenderingDomNode,"drag-in-progress");b.remove(this.treeRenderingDomNode,"first-drag-in-progress");this.showUnmovedItems()})),B.subscribe("treeNodeEdit",l.hitch(this,function(a){this.toggleDnd("start"!==a)})))},_connectTreeItem:function(a){var b=this.getTreeItemWidget(a.treeItemWidgetId);b&&(b.startup(),a=l.hitch(this,function(a,
b,c,d){a[b]=d;a.shouldExpand=!0===this.tree._expanded[a.treeItemId];if("customIcon"===b)if(d)a.iconId=d.id,a.iconFileName=d.filename;else{a.iconId=null;a.iconFileName=null;return}this._rowUpdates[a.treeItemId]=G(this._rowUpdates[a.treeItemId],l.hitch(this.treeStore,this.treeStore.put,a),100)},a),this.own(z(b,"delete",l.hitch(this,this.onDeleteOptionClicked)),b.watch("isChecked",l.hitch(this,function(a,b,c,d){this.onCheckedTreeItem(a,d)},b)),z(b,"hyperlinkValidated",l.hitch(this,this.onHyperlinkItemValidated)),
b.watch("customIcon",a),b.watch("displayName",a),b.watch("urlPath",a)),!0===b.isHyperLinkItem&&b.validateUrl(b.urlInputNode.get("value")))},_createPlaceHolderFirst:function(a){(this._findItemWidgetId=this._findPlaceHolderFirst(a))&&0<this._findItemWidgetId.length&&(a=this.getTreeItemWidget(this._findItemWidgetId))&&a.createPlaceHolderBefore()},_destroyPlaceHolderFirst:function(){if(this._findItemWidgetId&&0<this._findItemWidgetId.length){var a=this.getTreeItemWidget(this._findItemWidgetId);a&&a.destroyPlaceHolderBefore()}this._findItemWidgetId=
""},_fetchNewTreeBuilderGuid:function(a){var b=new r;I.get("NavigationTree/"+a+"/treeBuilderGuid",{handleAs:"json",preventCache:!0}).then(l.hitch(this,function(a){a&&a.guid?(this.treeGuid=a.guid,b.resolve(a.guid)):b.reject()}));return b},_findPlaceHolderFirst:function(a){var b="",c=".dgrid-row:not(.dgrid-selected)";a!=this.tree.dndSource&&(c=".dgrid-row");a=y(c,this.tree.dndSource.grid.domNode);0<a.length&&(b=this.tree.dndSource.grid.row(a[0]).data.treeItemWidgetId);return b},_getItemsNodeId:function(a){return this.tree.id+
"-row-"+a},_removeNoDataState:function(){this.noDataNode&&(q.destroy(this.noDataNode),this.noDataNode=null,b.remove(this.tree.domNode,"empty-tree"))},_removeRows:function(a){if(a||a.length){for(var b=0;b<a.length;b++){var c=a[b],d=this._getItemsNodeId(c);if(d=document.getElementById(d))this.tree.removeRow(d,!1),this.tree.removeFromExpandedMap(c)}a=this.treeStore.deleteItems(a);this.tree.dndSource&&this.tree.dndSource.processStoreResponse(a)}},_renderNoDataState:function(){this.noDataNode||(this.noDataNode=
q.create("div",{class:"no-tree-item-found",innerHTML:this.webviewStrings.dndHintNavTree},this.tree.bodyNode,"before"),b.add(this.tree.domNode,"empty-tree"))},_resizeRenderer:function(){if(this.treeRenderingDomNode){var b=t.position(c.byId("rcSystemContent"),!1),d=t.position(this.treeRenderingDomNode,!1),d=b.h-(d.y-b.y)-8;a.set(this.treeRenderingDomNode,{height:d-16+"px"});b=.3*b.w;this._totalSearchResultsHeight=d;this._resize(b)}},_sendBuilderKeepAlive:function(){I.post("NavigationTree/"+this.treeGuid+
"/keepAlive",{})},_startBuilderKeepAlive:function(){this._keepAliveTimer&&clearInterval(this._keepAliveTimer);this._keepAliveTimer=setInterval(l.hitch(this,this._sendBuilderKeepAlive),this._keepAliveTimeout)},_startRenderingTree:function(){var a=this.treeStore.getRootCollection();this._renderNoDataState();this.tree.set("collection",a)},_treeItemStartup:function(){for(var a,b=this._itemsToStartup.length-1;0<=b;b--)a=this._itemsToStartup[b],this._connectTreeItem(a);this._itemsToStartup=[]},destroy:function(){this._keepAliveTimer&&
clearInterval(this._keepAliveTimer);this.inherited(arguments)}})})},"dojo/NodeList-traverse":function(){define(["./query","./_base/lang","./_base/array"],function(p,m,k){var h=p.NodeList;m.extend(h,{_buildArrayFromCallback:function(g){for(var d=[],l=0;l<this.length;l++){var f=g.call(this[l],this[l],d);f&&(d=d.concat(f))}return d},_getUniqueAsNodeList:function(g){for(var d=[],l=0,f;f=g[l];l++)1==f.nodeType&&-1==k.indexOf(d,f)&&d.push(f);return this._wrap(d,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(g,
d){var l=this._getUniqueAsNodeList(g),l=d?p._filterResult(l,d):l;return l._stash(this)},_getRelatedUniqueNodes:function(g,d){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(d),g)},children:function(g){return this._getRelatedUniqueNodes(g,function(d,g){return m._toArray(d.childNodes)})},closest:function(g,d){return this._getRelatedUniqueNodes(null,function(l,f){do if(p._filterResult([l],g,d).length)return l;while(l!=d&&(l=l.parentNode)&&1==l.nodeType);return null})},parent:function(g){return this._getRelatedUniqueNodes(g,
function(d,g){return d.parentNode})},parents:function(g){return this._getRelatedUniqueNodes(g,function(d,g){for(var f=[];d.parentNode;)d=d.parentNode,f.push(d);return f})},siblings:function(g){return this._getRelatedUniqueNodes(g,function(d,g){for(var f=[],l=d.parentNode&&d.parentNode.childNodes,c=0;c<l.length;c++)l[c]!=d&&f.push(l[c]);return f})},next:function(g){return this._getRelatedUniqueNodes(g,function(d,g){for(var f=d.nextSibling;f&&1!=f.nodeType;)f=f.nextSibling;return f})},nextAll:function(g){return this._getRelatedUniqueNodes(g,
function(d,g){for(var f=[],l=d;l=l.nextSibling;)1==l.nodeType&&f.push(l);return f})},prev:function(g){return this._getRelatedUniqueNodes(g,function(d,g){for(var f=d.previousSibling;f&&1!=f.nodeType;)f=f.previousSibling;return f})},prevAll:function(g){return this._getRelatedUniqueNodes(g,function(d,g){for(var f=[],l=d;l=l.previousSibling;)1==l.nodeType&&f.push(l);return f})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?
[this[this.length-1]]:[],this)},even:function(){return this.filter(function(g,d){return 0!=d%2})},odd:function(){return this.filter(function(g,d){return 0==d%2})}});return h})},"webview/admin/SearchableWidgetWithTree":function(){define(["dojo/_base/declare","./_objectTypeMap","./SearchableWidget","./widget/ObjectResultsTree"],function(p,m,k,h){return p("webview/admin/SearchableWidgetWithTree",k,{_dndSource:null,_getPointsNode:function(g){null===this._dndSource&&console.error("_dndSource must be implementing by inheriting class");
var d=new h(this._dndSource);d.update(g);return d.getDomNode()}})})},"webview/admin/widget/ObjectResultsTree":function(){define("dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/store/Memory dojo/store/Observable rc/bacnet/enums rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/Object rc/bacnet/io/Number rc/util/pointObject ../../sys/job".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q){return k("webview/admin/widget/ObjectResultsTree",null,{_store:null,
_model:null,_tree:null,constructor:function(b){this._store=new l(new d({data:[{id:"root"}],getChildren:h.hitch(this,this.getChildren)}));this._model=new m({store:this._store,query:{id:"root"},mayHaveChildren:function(a){return a.mayHaveChildren}});this._tree=new p({showRoot:!1,model:this._model,openOnClick:!0,dndController:b,getIconClass:function(a){return this.dndController.itemIsDraggable(a)?"webviewIcon dragHandle":"hidden"},getRowClass:function(){return"dnd-point-item"}});this._tree.startup()},
getChildren:function(b){var a=b.pointMnemonic?t.getByMnemonic(b.pointMnemonic):null;if(null==a||a.comType!=f.comTypes.ARRAY)return this._store.query({parent:b.id});var c=new g;q.loadForAdmin(b.sysId).then(h.hitch(this,function(){this._requestArrayCount(a,b.sysId).then(h.hitch(this,function(a){for(var d=[],f=1;f<=a;f++)d.push(h.mixin(h.clone(b),{id:h.replace("{0}[{1}]",[b.id,f]),parent:b.id,name:h.replace("{0}[{1}]",[b.pointMnemonic,f]),pointMnemonic:h.replace("{0}[{1}]",[b.pointMnemonic,f]),pointName:h.replace("{0}[{1}]",
[b.pointName,f]),mayHaveChildren:!1}));c.resolve(d)}))}));return c.promise},getDomNode:function(){return this._tree.domNode},update:function(b){this._tree.set("paths",[]);this._store.setData([]);b.forEach(h.hitch(this,function(a){lastItem=a;var b=a.pointMnemonic.includes("AY")&&!a.pointMnemonic.includes("["),c=h.replace("{sysName}/{deviceName}/{pointName}({pointMnemonic})",a);this._store.put(h.mixin(a,{id:c,parent:"root",name:c,mayHaveChildren:b}))}))},_bacnetArrayCount:function(d,a,n){d=[{o:new c(f.objectTypes.OBJID_PP_ARRAY,
d),pl:[{p:new b(f.propertyTypes.PROPID_PRESENT_VALUE,f.primitiveTypes.UNSIGNED_INTEGER),i:new b(0,f.primitiveTypes.UNSIGNED_INTEGER),v:new b(0,f.primitiveTypes.UNSIGNED_INTEGER)}]}];a=new r({device:a,systemId:n},d);return rc.xhr.request({type:"bacnet",s:a}).then(h.hitch(this,function(a){return a.o[0].pl[0].v.v}),function(){return 0})},_requestArrayCount:function(b,a){var c=q.getAnyProperty(b.mainController+"DEV"+b.mainController,"BACnetNetworkNum");return b.subController||""===c||isNaN(c)?0:this._bacnetArrayCount(b.comInstance?
b.comInstance:b.pointInstance,b.mainController,a)}})})},"webview/util/Debounce":function(){define([],function(){return function(p,m,k){p&&clearTimeout(p);return setTimeout(m,k)}})},"webview/features/navigationTrees/treeBuilding/_DndOperations":function(){define("dijit/registry dojo/_base/declare dojo/_base/lang dojo/dnd/Manager dojo/NodeList-traverse dojo/dom-class dojo/query ../treeRendering/treeBuilderItem".split(" "),function(p,m,k,h,g,d,l,f){return m("webview/features/navigationTrees/treeBuilding/_DndOperations",
null,{getNextSiblingDownward:function(f,c){var b=this.getIdentity(f.data),g=-1;do{f=this.tree.down(f);if(!f)break;d.contains(f.element,"hidden")||(g=f.data.level);var q=this.getIdentity(f.data);if(q==b)return null;b=q}while(0>g||g>c);return g==c?f:null},getNextSiblingUpward:function(f,c){var b=this.getIdentity(f.data),g=-1;do{f=this.tree.up(f);if(!f)break;d.contains(f.element,"hidden")||(g=f.data.level);var q=this.getIdentity(f.data);if(q==b)return null;b=q}while(f&&g>c);return g==c?f:null},handleRowHovered:function(f){var c=
{parent:null,beforeId:null,level:null,validDropArea:!1},b=f.srcElement,g=this.tree.row(b),q=p.byId(g.data.treeItemWidgetId),l=d.contains(b,"dojoDndItemBefore"),b=d.contains(b,"dojoDndItemAfter");if(0==(l||b))return c;var a=this.tree.treeIndentWidth,b=q.level;f=f.offsetX;if(0==b)c=0;else{if(f>q.getMarginLeft())return c;c=Math.floor((f-20)/a);0>c&&(c=0)}var n=f=null,a=(b-c)*a*-1;if(c==b)f=g.data.parent;else if(b=this.getNextSiblingUpward(g,c))f=b.data.parent;(b=this.getNextSiblingDownward(g,c))&&(n=
this.getIdentity(b.data));!0===l&&!0===this.tree.treeBuilder.isFirstTreeItem(g.data.treeItemWidgetId)&&(f=null,n=this.getIdentity(g.data));q.setAfterPlaceHolderLeftMargin(a);return c={parent:f,beforeId:n,level:c,validDropArea:!0}},handleTreeItemHovered:function(f){var c={parent:null,beforeId:null,level:null,validDropArea:!1},b=l(".tree-builder-item-container",f.srcElement.parentNode).closest(".dgrid-row")[0],g=d.contains(b,"dojoDndItemBefore"),q=d.contains(b,"dojoDndItemAfter");if(0==(g||q))return c;
var b=this.tree.row(b),q=p.byId(b.data.treeItemWidgetId),h=this.tree.treeIndentWidth;f=f.offsetX;var a;f>h&&(c.parent=this.getIdentity(b.data),a=h,c.level=b.data.level+1);f<=h&&(a=0,c.parent=b.data.parent,c.level=b.data.level);f=this.getNextSiblingDownward(b,c.level);c.beforeId=f?this.getIdentity(f.data):null;!0===g&&!0===this.tree.treeBuilder.isFirstTreeItem(b.data.treeItemWidgetId)&&(a=0,c.parent=null,c.beforeId=this.getIdentity(b.data));q.setAfterPlaceHolderLeftMargin(a);c.validDropArea=!0;return c},
keywordAvatarCreator:function(d){d=this.createKeywordData(d);return this.treeItemCreator(d)},onDrag:function(f){this.tree.dndSource.dropDetails={parent:null,beforeId:null,level:null,validDropArea:!1};if(this.tree.dndSource.isDragging){var c=d.contains(f.srcElement,"dgrid-row"),b=d.contains(f.srcElement,"tree-builder-item-container");c?this.tree.dndSource.dropDetails=this.handleRowHovered(f):b?this.tree.dndSource.dropDetails=this.handleTreeItemHovered(f):this.tree.dndSource.dropDetails.validDropArea=
!0}},showUnmovedItems:function(){this.manager.nodes&&this.manager.nodes.forEach(function(f){d.remove(f,"hidden")})},systemObjectAvatarCreator:function(d){d=this.createSystemObjectData(d);return this.treeItemCreator(d)},treeItemCreator:function(d){return new f(k.clone(d))},_setupManager:function(){this.manager=h.manager();this.manager.treeBuilder=this;this.manager.makeAvatar=k.hitch(this,function(){return new this.dndAvatar(this.manager)})}})})},"webview/features/navigationTrees/treeRendering/treeBuilderItem":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/query dojo/text!webview/features/navigationTrees/treeRendering/templates/treeBuilderItem.html dojo/topic ./_TreeItemTitleMixin ./_TreeItemCheckboxMixin ./_TreeItemIconMixin ./_TreeItemDisplayNameMixin ./_TreeItemHyperlinkMixin ./_TreeItemEditMenuMixin dijit/form/CheckBox dijit/InlineEditBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y){return h("webview/features/navigationTrees/treeRendering/TreeBuilderItem",[m,p,k,r,n,v,x,w,z,y],{templateString:u,widgetsInTemplate:!0,beforePlaceHolder:null,RELATIVE_PATH_TO_DEFAULT_ICONS:"../.."+dojoConfig.baseUrl+"/webview/themes/rcblack/images/DefaultNavTreeIcons/",constructor:function(){this.inherited(arguments);this.rcStrings=c;this.webviewStrings=b;this.errorStrings=t},postCreate:function(){this.inherited(arguments);this.renderDisplayName(this.displayName,
this.pointType,this.pointMnemonic);this.renderHyperLink();this.connectEditMenuListeners();this.connectCheckboxListeners()},startup:function(){this.inherited(arguments);this.initialize();this.own(this.displayNameInputNode.watch("editing",g.hitch(this,function(a,b,c){this._disableDndForEditing(c)})))},initialize:function(){this.renderTitle();this.connectUrlListeners()},getMarginLeft:function(){return f.get(this.domNode,"marginLeft")},createPlaceHolderBefore:function(){if(null===this.beforePlaceHolder){d.remove(this.afterPlaceHolder,
"tree-placeholder-after");d.add(this.afterPlaceHolder,"tree-placeholder-after-first-node");this.beforePlaceHolder=l.create("div",{class:"tree-placeholder-before"},this.domNode,"first");var a=q(".dgrid-expando-icon",this.domNode.parentNode);0<a.length&&d.add(a[0],"tree-placeholder-before")}},destroyPlaceHolderBefore:function(){var a=!1;if(null!==this.beforePlaceHolder){l.destroy(this.beforePlaceHolder);this.beforePlaceHolder=null;a=!0;d.add(this.afterPlaceHolder,"tree-placeholder-after");d.remove(this.afterPlaceHolder,
"tree-placeholder-after-first-node");var b=q(".dgrid-expando-icon",this.domNode.parentNode);0<b.length&&d.remove(b[0],"tree-placeholder-before")}return a},setAfterPlaceHolderLeftMargin:function(a){f.set(this.afterPlaceHolder,"marginLeft",a+"px")},setValue:function(a,b){this.inherited(arguments)},_disableDndForEditing:function(b){d.toggle(this.domNode.parentElement.parentElement.parentElement.parentElement,"dojoDndItem",!b);a.publish("treeNodeEdit",b?"start":"end")},_onOpenIconGallery:function(){a.publish("openIconGallery",
this)},_onOpenEditDialog:function(){a.publish("openEditDialog",this)},toggleInvalid:function(a){d.toggle(this.treeBuilderItemNode,"invalid",a)}})})},"webview/features/navigationTrees/treeRendering/_TreeItemTitleMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojox/html/entities"],function(p,m,k){return p("webview/features/navigationTrees/treeRendering/_TreeItemTitleMixin",null,{renderTitle:function(){this._setTitle()},buildTitleText:function(){var h=this.displayName,g=this.pointMnemonic;
if(this.systemName||""===this.systemName){if(""===this.systemName)switch(this.pointType.toLowerCase()){case "alarm":g="Alarm";break;case "folder":g=this.displayName;break;case "hyperlink":g=this.urlPath;break;case "after hours report":g="AfterHoursReport";break;case "after hours requests":g="AfterHoursRequests";break;default:g=null}h=this.systemName;h+=this.systemName?"/"+g:g}return h},_setTitle:function(){m.set(this.domNode,"title",k.decode(this.buildTitleText()))}})})},"webview/features/navigationTrees/treeRendering/_TreeItemCheckboxMixin":function(){define(["dojo/_base/declare",
"dojo/_base/lang"],function(p,m){return p("webview/features/navigationTrees/treeRendering/_TreeItemCheckboxMixin",null,{_setIsCheckedAttr:function(k){this._set("isChecked",k);this.checkboxNode.set("checked",k)},connectCheckboxListeners:function(){this.own(this.checkboxNode.watch("checked",m.hitch(this,function(k,h,g){g!=this.isChecked&&this.set("isChecked",g)})))}})})},"webview/features/navigationTrees/treeRendering/_TreeItemIconMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/dom-construct",
"../../../util/globalConstants"],function(p,m,k,h){return p("webview/features/navigationTrees/treeRendering/_TreeItemIconMixin",null,{defaultIconMap:{alarm:"alarms.png",calendars:"calendar.png","enterprise schedule":"schedules.png",folder:"folder.png",hyperlink:"hyperlink.png","navigation group":"navigation-group.png","runtime logs":"runtime.png",schedules:"schedules.png","system groups":"system-group.png","single point trend log":"single-trendlog.png","multi point trend log":"multi-trendlog.png",
"workstation groups":"workstation-group.png","after hours report":"after-hours.png","after hours requests":"requests.png",programs:"cbas.png","point report":"point-report.png","equipment views":"equipment-view.png"},postCreate:function(){this.inherited(arguments);this._setIconImage()},_setIconFileNameAttr:function(g){g?(this.customIcon||(this.customIcon={}),this.customIcon.filename=g):this.customIcon&&(this.customIcon.filename=g)},_setIconIdAttr:function(g){0<g?(this.customIcon||(this.customIcon=
{}),this.customIcon.id=g):this.customIcon&&(this.customIcon.id=g)},_setCustomIconAttr:function(g){this._set("customIcon",g);this._setIconImage();this.iconId=this.customIcon.id;this.iconFileName=this.customIcon.filename},_clearIconImage:function(){k.empty(this.treeItemIconNode)},_createIconImageDomNode:function(){return k.create("img",{"class":"tree-item-icon",alt:this.pointType})},_determineTrendlogIcon:function(){"trendlog.png"===this.customIcon.filename&&(-1!==this.pointName.toUpperCase().indexOf("STL")?
(this.pointType="Single Point Trend Log",this.customIcon.filename="single-trendlog.png"):(this.pointType="Multi Point Trend Log",this.customIcon.filename="multi-trendlog.png"))},_getDefaultIconDetails:function(){var g={};g.iconPathPrefix=this.RELATIVE_PATH_TO_DEFAULT_ICONS;this.defaultIconMap.hasOwnProperty(this.pointType.toLowerCase())?g.customIcon={id:null,filename:this.defaultIconMap[this.pointType.toLowerCase()]}:console.error(this.declaredClass+" - setIconClass(): Invalid point type:",this.pointType);
return g},_setIconImage:function(){this._clearIconImage();var g=this._createIconImageDomNode(),d=rc.rootPath+"Uploads/NavTreeIcons/";if(this._shouldUseDefaultIcon()){var l=this._getDefaultIconDetails(),d=l.iconPathPrefix;this.customIcon=l.customIcon}this._determineTrendlogIcon();if(null===this.customIcon.id||-1===this.customIcon.id||-1<h.DEFAULT_NAV_TREE_ICONS.indexOf(this.customIcon.filename))d=this.RELATIVE_PATH_TO_DEFAULT_ICONS;m.set(g,"src",d+this.customIcon.filename);k.place(g,this.treeItemIconNode,
"first")},_shouldUseDefaultIcon:function(){return!(this.customIcon&&this.customIcon.filename&&0<this.customIcon.filename.length)}})})},"webview/features/navigationTrees/treeRendering/_TreeItemDisplayNameMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/on","dojox/html/entities"],function(p,m,k,h,g){return p("webview/features/navigationTrees/treeRendering/_TreeItemDisplayNameMixin",null,{_setDisplayNameAttr:function(d){d=d.replace(/[\n\r]/g," ");this._set("displayName",
g.encode(d));this._updateDisplayName(d)},renderDisplayName:function(d,g,f){d=this._getDisplayName(d,g,f);this.set("displayName",d);this._setupDisplayNameTextBox()},_getDisplayName:function(d,g,f){""===d&&(d=g,f&&(d+=" ("+f+")"));return d},_setupDisplayNameTextBox:function(){this.own(h(this.displayNameInputNode,"change",m.hitch(this,function(d){g.encode(d)!==this.displayName&&this.set("displayName",d)})),this.displayNameInputNode.watch("editing",m.hitch(this,function(d,g,f){this._disableDndForEditing(f)})));
k.remove(this.displayNameInputNode.domNode,"hidden")},_updateDisplayName:function(d){d=g.decode(d);this.displayNameInputNode.set("value",this.displayName)}})})},"webview/features/navigationTrees/treeRendering/_TreeItemHyperlinkMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on dojox/html/entities dojox/validate/regexp".split(" "),function(p,m,k,h,g,d){return p("webview/features/navigationTrees/treeRendering/_TreeItemHyperlinkMixin",null,{_setUrlPathAttr:function(d){if("hyperlink"===
this.pointType.toLowerCase()){d=d||"";var f=g.decode(d||"");this.urlInputNode.set("value",f);this.validateUrl(d);this._set("urlPath",g.encode(d))}},connectUrlListeners:function(){this.own(h(this.urlInputNode,"change",m.hitch(this,function(d){this.urlPath!==g.encode(d)&&this.set("urlPath",d)})),this.urlInputNode.watch("editing",m.hitch(this,function(d,f,g){this._disableDndForEditing(g)})))},renderHyperLink:function(){"hyperlink"!==this.pointType.toLowerCase()?(this.urlInputNode.set("disabled",!0),
k.add(this.urlInputNode.domNode,"hidden"),this.isHyperLinkItem=!1):(this.isHyperLinkItem=!0,this.validateUrl(this.urlPath),k.remove(this.urlInputNode.domNode,"hidden"))},validateUrl:function(l){var f=d.url({scheme:!0,allowIP:!0,allowLocal:!0,allowPort:!0,allowNamed:!0});l=g.decode(l).match(f);this.toggleInvalid(!l);this._onHyperlinkValidated(l);return l},_onHyperlinkValidated:function(d){this.emit("hyperlinkValidated",{isValid:d?!0:!1,itemId:this.treeItemId})}})})},"webview/features/navigationTrees/treeRendering/_TreeItemEditMenuMixin":function(){define("dijit/DropDownMenu dijit/form/DropDownButton dijit/MenuItem dojo/_base/declare dojo/_base/lang dojo/on".split(" "),
function(p,m,k,h,g,d){return h("webview/features/navigationTrees/treeRendering/_TreeItemEditMenuMixin",null,{connectEditMenuListeners:function(){this.own(d.once(this.editNode,"click",g.hitch(this,this._buildEditMenu)))},_buildEditMenu:function(){var d=new p({baseClass:"webviewContextMenu"},"mainMenu");d.addChild(new k({label:this.rcStrings.edit,baseClass:"webviewContextMenuItem",onClick:g.hitch(this,this._onOpenEditDialog)}));d.addChild(new k({label:this.webviewStrings.deleteItems,baseClass:"webviewContextMenuItem",
onClick:g.hitch(this,this._onRemove)}));var f=new m({showLabel:!1,dropDown:d,iconClass:"rc24Icon editIcon",baseClass:"webviewDropDownButton"},this.editNode);f.toggleDropDown();this.own(f,d)},_onRemove:function(){this.emit("delete",this)}})})},"webview/features/navigationTrees/treeBuilding/_KeywordsConverter":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(p,m){return p("webview/features/navigationTrees/treeBuilding/_KeywordsConverter",null,{defaultIconMap:{alarm:"alarms.png",calendars:"calendar.png",
"enterprise schedule":"schedules.png",folder:"folder.png",hyperlink:"hyperlink.png","navigation group":"navigation-group.png","runtime logs":"runtime.png",schedules:"schedules.png","system groups":"system-group.png","single point trend log":"single-trendlog.png","multi point trend log":"multi-trendlog.png","workstation groups":"workstation-group.png","after hours report":"after-hours.png","after hours requests":"requests.png",programs:"cbas.png","point report":"point-report.png","equipment views":"equipment-view.png"},
createKeywordData:function(k){var h={customIcon:{id:null,filename:null},deviceName:void 0,displayName:void 0,pointMnemonic:void 0,pointName:void 0,pointType:void 0,site:void 0,siteUrlPath:void 0,sysId:void 0,systemName:"",urlPath:null,treeItemId:void 0,parent:null,hasChildren:!1},g;g=k.keyword?this._getKeywordData(k):"Folder"===k.id?this._getFolderData(k):"Hyperlink"===k.id?this._getHyperlinkData(k):this._getSiteObjectData(k);var d={};k.hasOwnProperty("customIcon")&&k.customIcon.hasOwnProperty("id")?
d=k.customIcon:(d={id:k.iconFileId?k.iconFileId:null,filename:k.iconFile?k.iconFile:null},null===d.filename&&(g.pointType&&this.defaultIconMap.hasOwnProperty(g.pointType.toLowerCase())?d.filename=this.defaultIconMap[g.pointType.toLowerCase()]:console.error(this.declaredClass+" - createKeywordData(): Invalid point type:",g.pointType)));g.iconFileName=d.filename;g.iconId=d.id;m.mixin(h,g);return h},_getFolderData:function(k){return{displayName:k.displayText,pointType:k.id}},_getHyperlinkData:function(k){return{displayName:k.displayText,
pointType:k.id,urlPath:k.url}},_getKeywordData:function(k){"ahacrequests"===k.keyword.toLowerCase()?k.keyword="after hours requests":"afterhoursreport"===k.keyword.toLowerCase()&&(k.keyword="after hours report");return{displayName:k.displayText,pointType:k.keyword}},_getSiteObjectData:function(k){var h={displayName:k.displayText,pointName:"/#"+k.mnemonic,pointMnemonic:k.mnemonic};"EnterpriseSchedules"===k.parent?h.pointType="Enterprise Schedule":"NavigationGroups"===k.parent&&(h.pointType="Navigation Group");
return h}})})},"webview/features/navigationTrees/treeBuilding/_RenderedTreeItemsTracker":function(){define(["dojo/_base/declare"],function(p){return p("webview/features/navigationTrees/treeBuilding/_RenderedTreeItemsTracker",null,{_linkToParent:function(m,k){this.tree.treeItemsRendered.hasOwnProperty(m)||(this.tree.treeItemsRendered[m]=[]);var h=this.tree.treeItemsRendered[m];Array.isArray(h)||(h=[]);h.includes(k)||h.push(k)},addToRowRenderedMap:function(m){var k=this.getIdentity(m);this.tree.treeItemsRendered.hasOwnProperty(k)||
(this.tree.treeItemsRendered[k]=[]);m.parent&&this._linkToParent(m.parent,k)},getRenderedChildren:function(m){m=this.getIdentity(m.data);if(!this.tree.treeItemsRendered.hasOwnProperty(m))return[];m=this.tree.treeItemsRendered[m];Array.isArray(m)||(m=[]);return m},getRenderedItemsCount:function(){return Object.keys(this.tree.treeItemsRendered).length},getRenderedTreeItems:function(){var m=[],k;for(k in this.tree._rowIdToObject){var h=this.getTreeItemWidget(this.tree._rowIdToObject[k].treeItemWidgetId);
m.push(h)}return m},hasRenderedChildren:function(m){return 0<this.getRenderedChildren(m).length},isItemRendered:function(m){return this.tree.treeItemsRendered.hasOwnProperty(m)},hasRenderedChildren:function(m){return 0<this.getRenderedChildren(m).length},removeFromRowRenderedMap:function(m){var k=this.getIdentity(m);this.tree.treeItemsRendered.hasOwnProperty(k)&&(delete this.tree.treeItemsRendered[k],m.parent&&(m=m.parent,this.tree.treeItemsRendered.hasOwnProperty(m)&&(m=this.tree.treeItemsRendered[m],
Array.isArray(m)||(m=[]),k=m.indexOf(k),-1<k&&m.splice(k,1))))}})})},"webview/features/navigationTrees/treeBuilding/_SystemObjectsConverter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojox/html/entities"],function(p,m,k){return p("webview/features/navigationTrees/treeBuilding/_SystemObjectsConverter",null,{defaultIconMap:{alarm:"alarms.png",calendars:"calendar.png","enterprise schedule":"schedules.png",folder:"folder.png",hyperlink:"hyperlink.png","navigation group":"navigation-group.png",
"runtime logs":"runtime.png",schedules:"schedules.png","system groups":"system-group.png","single point trend log":"single-trendlog.png","multi point trend log":"multi-trendlog.png","workstation groups":"workstation-group.png","after hours report":"after-hours.png","after hours requests":"requests.png",programs:"cbas.png","point report":"point-report.png","equipment views":"equipment-view.png"},createSystemObjectData:function(h){var g={customIcon:{id:null,filename:null},deviceName:void 0,displayName:void 0,
pointMnemonic:void 0,pointName:void 0,pointType:void 0,site:void 0,siteUrlPath:void 0,sysId:void 0,systemName:"",urlPath:null,treeItemId:void 0,parent:null,hasChildren:!1};h=this._getSystemObjectData(h);m.mixin(g,h);return g},_getSystemObjectData:function(h){var g={};h.hasOwnProperty("customIcon")&&h.customIcon.hasOwnProperty("id")?g=h.customIcon:(g={id:h.iconFileId?h.iconFileId:null,filename:h.iconFile?h.iconFile:null},null===g.filename&&(h.pointType&&this.defaultIconMap.hasOwnProperty(h.pointType.toLowerCase())?
g.filename=this.defaultIconMap[h.pointType.toLowerCase()]:console.error(this.declaredClass+" - _getSystemObjectData(): Invalid point type:",h.pointType)));var d={};d.pointMnemonic=h.pointMnemonic;d.displayName=h.displayName?k.decode(h.displayName):h.pointName;d.pointName=h.pointName;d.deviceName=h.deviceName;d.systemId=h.sysId;d.iconFileName=g.filename;d.iconId=g.id;d.urlPath=h.urlPath?decodeURIComponent(h.urlPath):null;d.site=this.siteId;d.pointType=h.pointType;d.systemName=h.sysName?h.sysName:"";
d.pointType=h.pointType;d.childItems=void 0!==h.childItems?h.childItems:[];return d}})})},"webview/features/navigationTrees/treeBuilding/_TreeSelection":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(p,m){return p("webview/features/navigationTrees/treeBuilding/_TreeSelection",null,{checkAllItems:function(k){this.getRenderedTreeItems().forEach(m.hitch(this,function(h){h.set("isChecked",k)}))},deselectChildren:function(k){this.getRenderedChildren(k).forEach(m.hitch(this,function(h){(h=
this.tree.row(h))&&h.data&&this.tree.deselect(h.data)}))},onTreeItemDeselect:function(k){k=k.rows;for(var h=0;h<k.length;h++){var g=k[h];g.data&&g.data.hasChildren&&this.deselectChildren(g)}},onTreeItemSelect:function(k){k=k.rows;for(var h=0;h<k.length;h++){var g=k[h];g.data.hasChildren&&this.selectChildren(g)}},selectChildren:function(k){this.getRenderedChildren(k).forEach(m.hitch(this,function(h){(h=this.tree.row(h))&&h.data&&this.tree.select(h.data)}))}})})},"webview/features/navigationTrees/treeBuilding/_TreeStoreCreator":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/on","./TreeStore"],function(p,m,k,h){return p("webview/features/navigationTrees/treeBuilding/_TreeStoreCreator",[],{createRestStore:function(){this.treeStore=new h({idProperty:"treeItemId",target:"NavigationTree/"+this.treeGuid+"/items",treeGuid:this.treeGuid,treeId:this.treeId,useRangeHeaders:!0});this.own(k(this.treeStore,"dirty",m.hitch(this,this.set,"isDirty",!0)));this.treeStore.grid=this.tree}})})},"webview/features/navigationTrees/treeBuilding/TreeStore":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dstore/Rest dstore/Trackable dstore/Tree webview/xhrEnhanced".split(" "),
function(p,m,k,h,g,d,l){return p("webview/features/navigationTrees/treeBuilding/TreeStore",[h,d,g],{autoEmitEvents:!1,stringify:JSON.stringify,deleteItems:function(d){var f=new k;l.post("NavigationTree/"+this.treeGuid+"/removeTreeItems",{handleAs:"json",data:{data:JSON.stringify(d)}}).then(m.hitch(this,this._handleBatchUpdateResponse,f));return f},discardChanges:function(){var d=new k;l.put("NavigationTree/"+this.treeGuid+"/discardChanges",{handleAs:"json",data:{}}).then(m.hitch(this,this._handleDiscardChangesResponse,
d))},insertNewItems:function(d,g,c){d={itemsBeingUpdated:d,parentId:g,beforeId:c};g=new k;this._queueTreeUpdate("insertTreeItems",d,g);return g},moveItems:function(d,g,c){d={itemsBeingUpdated:d,parentId:g,beforeId:c};g=new k;this._queueTreeUpdate("moveTreeItems",d,g);return g},put:function(){return this.inherited(arguments).then(m.hitch(this,this._onDirty))},saveChanges:function(){var d=new k;l.put("NavigationTree/"+this.treeId+"/"+this.treeGuid+"/saveChanges",{handleAs:"json",data:{}}).then(m.hitch(this,
this._handleSaveChangesResponse,d));return d},_handleSaveChangesResponse:function(d,g){g&&200===g.errStatus?d.resolve():(console.error(g),d.reject())},_handleDiscardChangesResponse:function(d,g){},_handleBatchUpdateResponse:function(d,g){g?(this._onDirty(),d.resolve(g)):d.reject()},_onDirty:function(){this.emit("dirty")},_queueTreeUpdate:function(d,g,c){this._currentDeferred&&!this._currentDeferred.isRejected()?this._currentDeferred.then(m.hitch(this,this._sendTreeUpdate,d,g,c)):this._sendTreeUpdate(d,
g,c);this._currentDeferred=c},_sendTreeUpdate:function(d,g,c){l["moveTreeItems"===d?"put":"post"]("NavigationTree/"+this.treeGuid+"/"+d,{handleAs:"json",data:{data:JSON.stringify(g)}}).then(m.hitch(this,this._handleBatchUpdateResponse,c),c.reject)}})})},"dstore/Rest":function(){define("dojo/request dojo/when dojo/_base/lang dojo/json dojo/io-query dojo/_base/declare ./Request".split(" "),function(p,m,k,h,g,d,l){return d(l,{stringify:h.stringify,_getTarget:function(d){var f=this.target;return"/"==
f.slice(-1)?f+d:f+"/"+d},get:function(d,g){g=g||{};var c=k.mixin({Accept:this.accepts},this.headers,g.headers||g),b=this;return p(this._getTarget(d),{headers:c}).then(function(c){return b._restore(b.parse(c),!0)})},autoEmitEvents:!1,put:function(d,g){g=g||{};var c="id"in g?g.id:this.getIdentity(d),b="undefined"!==typeof c,f=this,q="beforeId"in g?null===g.beforeId?{"Put-Default-Position":"end"}:{"Put-Before":g.beforeId}:b&&!1!==g.overwrite?null:{"Put-Default-Position":this.defaultNewToStart?"start":
"end"},h=p(b?this._getTarget(c):this.target,{method:b&&!g.incremental?"PUT":"POST",data:this.stringify(d),headers:k.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===g.overwrite?"*":null,"If-None-Match":!1===g.overwrite?"*":null},q,this.headers,g.headers)});return h.then(function(a){var b={};"beforeId"in g&&(b.beforeId=g.beforeId);a=b.target=a&&f._restore(f.parse(a),!0)||d;m(h.response,function(a){f.emit(201===a.status?"add":"update",b)});return a})},add:function(d,g){g=
g||{};g.overwrite=!1;return this.put(d,g)},remove:function(d,g){g=g||{};var c=this;return p(this._getTarget(d),{method:"DELETE",headers:k.mixin({},this.headers,g.headers)}).then(function(b){var f=b&&c.parse(b);c.emit("delete",{id:d,target:f});return b?f:!0})}})})},"dstore/Request":function(){define("dojo/request dojo/_base/lang dojo/_base/array dojo/json dojo/_base/declare ./Store ./QueryResults".split(" "),function(p,m,k,h,g,d,l){var f=[].push;return g(d,{constructor:function(){this.headers||(this.headers=
{});this._targetContainsQueryString=0<=this.target.lastIndexOf("?")},headers:{},parse:h.parse,target:"",ascendingPrefix:"+",descendingPrefix:"-",accepts:"application/json",fetch:function(d){d=this._request(d);return new l(d.data,{response:d.response})},fetchRange:function(d){var c=d.start,b=d.end,f={};this.useRangeHeaders?f.headers=m.mixin(this._renderRangeHeaders(c,b),d.headers):(f.queryParams=this._renderRangeParams(c,b),d.headers&&(f.headers=d.headers));d=this._request(f);return new l(d.data,{totalLength:d.total,
response:d.response})},_issueFetchRequest:function(d,c){return p(d,{method:"GET",headers:c})},_request:function(d){d=d||{};var c=m.delegate(this.headers,{Accept:this.accepts});"headers"in d&&m.mixin(c,d.headers);d=this._renderUrl(d.queryParams);var b=this._issueFetchRequest(d,c),f=this,c=b.then(function(b){return f.parse(b)});return{data:c.then(function(b){b=b.items||b;for(var c=0,a=b.length;c<a;c++)b[c]=f._restore(b[c],!0);return b}),total:c.then(function(c){c=c.total;return-1<c?c:b.response.then(function(b){return(b=
b.getHeader("Content-Range"))&&(b=b.match(/\/(.*)/))&&+b[1]})}),response:b.response}},_renderFilterParams:function(d){var c=d.type,b=d.args;if(!c)return[""];if("string"===c)return[b[0]];if("and"===c||"or"===c)return[k.map(d.args,function(b){var d=this._renderFilterParams(b);return"and"!==b.type&&"or"!==b.type||b.type===c?d:"("+d+")"},this).join("and"===c?"\x26":"|")];(d=b[1])&&(d._renderUrl?d="("+d._renderUrl()+")":d instanceof Array&&(d="("+d+")"));return[encodeURIComponent(b[0])+"\x3d"+("eq"===
c?"":c+"\x3d")+encodeURIComponent(d)]},_renderSortParams:function(d){d=k.map(d,function(b){return(b.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(b.property)},this);var c=[];d&&c.push(this.sortParam?encodeURIComponent(this.sortParam)+"\x3d"+d:"sort("+d+")");return c},_renderRangeParams:function(d,c){var b=[];this.rangeStartParam?b.push(this.rangeStartParam+"\x3d"+d,this.rangeCountParam+"\x3d"+(c-d)):b.push("limit("+(c-d)+(d?","+d:"")+")");return b},_renderSelectParams:function(d){var c=
[];this.selectParam?c.push(this.selectParam+"\x3d"+d):c.push("select("+d+")");return c},_renderQueryParams:function(){var d=[],c=[];k.forEach(this.queryLog,function(b){var g=b.type,h="_render"+g[0].toUpperCase()+g.substr(1)+"Params";"filter"===g?c.push(b.normalizedArguments[0]):this[h]&&f.apply(d,this[h].apply(this,b.normalizedArguments))},this);if(c.length){var b=new this.Filter,b=b.and.apply(b,c);d.unshift.apply(d,this._renderFilterParams(b))}return d},_renderUrl:function(d){var c=this._renderQueryParams(),
b=this.target;d&&f.apply(c,d);0<c.length&&(b+=(this._targetContainsQueryString?"\x26":"?")+c.join("\x26"));return b},_renderRangeHeaders:function(d,c){var b="items\x3d"+d+"-"+(c-1);return{Range:b,"X-Range":b}}})})},"dstore/Store":function(){define("dojo/_base/lang dojo/_base/array dojo/aspect dojo/has dojo/when dojo/_base/declare ./QueryMethod ./Filter dojo/Evented".split(" "),function(p,m,k,h,g,d,l,f,r){function c(b){return function(c,d){var a=this;g(c,function(c){c={target:c};var f=d[1]||{};"beforeId"in
f&&(c.beforeId=f.beforeId);a.emit(b,c)});return c}}h.add("object-proto",!!{}.__proto__&&!{}.watch);var b=h("object-proto");return d(r,{constructor:function(b){b&&d.safeMixin(this,b);this.Model&&this.Model.createSubclass&&(this.Model=this.Model.createSubclass([]).extend({_store:this}));this.storage=new r;var f=this;this.autoEmitEvents&&(k.after(this,"add",c("add")),k.after(this,"put",c("update")),k.after(this,"remove",function(b,a){g(b,function(){f.emit("delete",{id:a[0]})});return b}))},autoEmitEvents:!0,
idProperty:"id",queryAccessors:!0,getIdentity:function(b){return b.get?b.get(this.idProperty):b[this.idProperty]},_setIdentity:function(b,c){b.set?b.set(this.idProperty,c):b[this.idProperty]=c},forEach:function(b,c){var d=this;return g(this.fetch(),function(a){for(var f=0,g;void 0!==(g=a[f]);f++)b.call(c,g,f,d);return a})},matchesFilter:function(b){var c=this.queryLog;if(c&&b){b=[b];for(var d=0,a=c.length;d<a;d++)b=c[d].querier(b);return 0<b.length}return!0},on:function(b,c,d){var a=this;return this.storage.on(b,
function(b){c&&(!d||a.matchesFilter(b&&b.target))&&c&&c(b)})},emit:function(b,c){c=c||{};c.type=b;try{return this.storage.emit(b,c)}catch(u){console.error(u)}finally{return c.cancelable}},parse:null,stringify:null,Model:null,_restore:function(c,d){var f=this.Model;if(f&&c){var a=f.prototype,n=a._restore;n?c=n.call(c,f,d):b&&d?c.__proto__=a:c=p.delegate(a,c)}return c},create:function(b){return new this.Model(b)},_createSubCollection:function(b){var c=p.delegate(this.constructor.prototype),f;for(f in this)this._includePropertyInSubCollection(f,
c)&&(c[f]=this[f]);return d.safeMixin(c,b)},_includePropertyInSubCollection:function(b,c){return!(b in c)||c[b]!==this[b]},queryLog:[],filter:new l({type:"filter",normalizeArguments:function(b){var c=this.Filter;return b instanceof c?[b]:[new c(b)]}}),Filter:f,sort:new l({type:"sort",normalizeArguments:function(b,c){var d;"function"===typeof b?d=[b]:(d=b instanceof Array?b.slice():"object"===typeof b?[].slice.call(arguments):[{property:b,descending:c}],d=m.map(d,function(a){a=p.mixin({},a);a.descending=
!!a.descending;return a}),d=[d]);return d}}),select:new l({type:"select"}),_getQuerierFactory:function(b){return this["_create"+(b[0].toUpperCase()+b.substr(1))+"Querier"]}})})},"dstore/QueryMethod":function(){define([],function(){return function(p){var m=p.type,k=p.normalizeArguments,h=p.applyQuery,g=p.querierFactory;return function(){var d=Array.prototype.slice.call(arguments),l=k?k.apply(this,d):d,d={type:m,arguments:d,normalizedArguments:l},f=this._getQuerierFactory(m)||g;f&&(d.querier=f.apply(this,
l));l=this._createSubCollection({queryLog:this.queryLog.concat(d)});return h?h.call(this,l,d):l}}})},"dstore/Filter":function(){define(["dojo/_base/declare"],function(p){function m(h){return function(){var g=this.constructor,d=new g;d.type=h;d.args=Array.prototype.slice.call(arguments);return this.type?m("and").call(g.prototype,this,d):d}}function k(h){return function(){for(var g=this.constructor,d=[],l=0;l<arguments.length;l++){var f=arguments[l];d.push(f instanceof g?f:new g(f))}g=new g;g.type=
h;g.args=d;this.type===h?g.args=this.args.concat(d):this.type?d.unshift(this):1===d.length&&d[0].type&&(g.type=d[0].type,g.args=d[0].args.slice());return g}}p=p(null,{constructor:function(h){var g=typeof h;switch(g){case "object":var g=this,d;for(d in h)var l=h[d],g=l instanceof this.constructor?g[l.type](d,l.args[0]):l&&l.test?g.match(d,l):g.eq(d,l);this.type=g.type;this.args=g.args;break;case "function":case "string":this.type=g,this.args=[h]}},and:k("and"),or:k("or"),eq:m("eq"),ne:m("ne"),lt:m("lt"),
lte:m("lte"),gt:m("gt"),gte:m("gte"),contains:m("contains"),"in":m("in"),match:m("match")});p.filterCreator=m;p.logicalOperatorCreator=k;return p})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(p,m){function k(h,g){return m(this,function(d){for(var l=0,f=d.length;l<f;l++)h.call(g,d[l],l,d)})}return function(h,g){var d=g&&"totalLength"in g;if(h.then){h=p.delegate(h);var l=h.then(function(f){var h=d?g.totalLength:f.totalLength||f.length;f.totalLength=h;return!d&&
h});h.totalLength=d?g.totalLength:l;h.response=g&&g.response}else h.totalLength=d?g.totalLength:h.length;h.forEach=k;return h}})},"dstore/Trackable":function(){define("dojo/_base/lang dojo/_base/declare dojo/aspect dojo/when dojo/promise/all dojo/_base/array dojo/on".split(" "),function(p,m,k,h,g,d,l){function f(b,c,d){for(var f=b.length-1;0<=f;--f){var a=b[f],n=a.start,a=n+a.count;if(c>a){b.splice(f+1,0,{start:c,count:d-c});return}d>=n&&(c=Math.min(c,n),d=Math.max(d,a),b.splice(f,1))}b.unshift({start:c,
count:d-c})}var r=0,c={track:function(){function b(){return function(){var a=this,b=this.inherited(arguments);h(b,function(b){b=a._results=b.slice();a._partialResults&&(a._partialResults=null);a._ranges=[];f(a._ranges,0,b.length)});return b}}function c(){return function(a){var b=this,c=a.start,d=a.end,n=this.inherited(arguments);this._results||h(n,function(a){return h(a.totalLength,function(n){var g=b._partialResults||(b._partialResults=[]);d=Math.min(d,c+a.length);g.length=n;n=[c,d-c].concat(a);
g.splice.apply(g,n);f(b._ranges,c,d);return a})});return n}}function g(a,b){r++;var c=b.target;b=p.delegate(b,z[a]);var f=b.beforeId;h(x._results||x._partialResults,function(n){if(n){var g,q,h,l=x._ranges,k,r="id"in b?b.id:u.getIdentity(c),t=-1,m=-1,D=-1,v=-1,E;if("delete"===a||"update"===a)for(g=0;-1===t&&g<l.length;++g)for(k=l[g],q=k.start,h=q+k.count;q<h;++q)if(u.getIdentity(n[q])==r){t=b.previousIndex=q;m=g;E=f==r;n.splice(t,1);k.count--;for(q=g+1;q<l.length;++q)l[q].start--;break}if("add"===
a||"update"===a){if(w){if(w([c]).length){var z=0;h=l.length-1;for(E=-1;z<=h&&-1===D;)g=z+Math.round((h-z)/2),k=l[g],m=n.slice(k.start,k.start+k.count),void 0!==f&&(E=null===f?m.length:y(m,f)),-1===E&&(E=t>=Math.max(0,k.start-1)&&t<=k.start+k.count?t:u.defaultNewToStart?0:m.length),m.splice(E,0,c),q=d.indexOf(w(m),c),r=k.start+q,0===q&&0!==k.start?h=g-1:q>=m.length-1&&r<n.length?z=g+1:(D=r,v=g);if(-1===D&&0<z&&z<l.length)var p=!0}}else{q=-1;if(void 0===f||E)"update"===a?(D=t,v=m):u.defaultNewToStart?
q=D=0:(D=n.length,q=l.length-1);else if(null===f)D=n.length,q=l.length-1;else for(g=0,h=l.length;-1===v&&g<h;++g)k=l[g],D=y(n,f,k.start,k.start+k.count),-1!==D&&(v=g);-1!==q&&-1===v&&(k=l[q])&&k.start<=D&&D<=k.start+k.count&&(v=q)}if(-1<D&&-1<v)for(b.index=D,n.splice(D,0,c),l[v].count++,g=v+1;g<l.length;++g)l[g].start++;else if(p)for(b.beforeIndex=l[z].start,g=z;g<l.length;++g)l[g].start++}b.totalLength=n.length}(n=x["on_tracked"+a])&&n.call(x,b)})}var u=this.store||this,a=[],n={add:1,update:1,"delete":1},
v;for(v in n)a.push(this.on(v,function(a){return function(b){g(a,b)}}(v)));var x=m.safeMixin(p.delegate(this),{_ranges:[],fetch:b(),fetchRange:c(),releaseRange:function(a,b){if(this._partialResults){a:for(var c=this._ranges,d=0,f;f=c[d];++d){var n=f.start,g=n+f.count;if(a<=n)if(b>=g)c.splice(d,1);else{f.start=b;f.count=g-f.start;break a}else if(a<g)if(b>n){c.splice(d,1,{start:n,count:a-n},{start:b,count:g-b});break a}else f.count=a-f.start}for(c=a;c<b;++c)delete this._partialResults[c]}},on:function(a,
b){var c=this,d=this.getInherited(arguments);return l.parse(x,a,b,function(a,f){return f in n?k.after(x,"on_tracked"+f,b,!0):d.call(c,f,b)})},tracking:{remove:function(){for(;0<a.length;)a.pop().remove();this.remove=function(){}}},track:null});this.fetchSync&&(m.safeMixin(x,{fetchSync:b(),fetchRangeSync:c()}),x.fetchSync());var w;d.forEach(this.queryLog,function(a){var b=w,c=a.querier;c&&(w=b?function(a){return c(b(a))}:c)});var z={add:{index:void 0},update:{previousIndex:void 0,index:void 0},"delete":{previousIndex:void 0}},
y=function(a,b,c,d){d=void 0!==d?d:a.length;for(c=void 0!==c?c:0;c<d;++c)if(u.getIdentity(a[c])===b)return c;return-1};return x}};g=m(null,c);g.create=function(b,d){b=m.safeMixin(p.delegate(b),c);m.safeMixin(b,d);return b};return g})},"dstore/Tree":function(){define(["dojo/_base/declare"],function(p){return p(null,{constructor:function(){this.root=this},mayHaveChildren:function(m){return"hasChildren"in m?m.hasChildren:!0},getRootCollection:function(){return this.root.filter({parent:null})},getChildren:function(m){return this.root.filter({parent:this.getIdentity(m)})}})})},
"webview/features/navigationTrees/treeBuilding/_TreeCreator":function(){define("dgrid-v2/OnDemandGrid dgrid-v2/Tree dgrid-v2/extensions/DnD dojo/_base/declare dojo/_base/lang dojo/dom-style webview/features/navigationTrees/treeRendering/treeBuilderItem ./treeExtensions".split(" "),function(p,m,k,h,g,d,l,f){return h("webview/features/navigationTrees/treeBuilding/_TreeCreator",null,{CustomGrid:h([p,m,k]),createTree:function(d,c){var b=g.mixin({treeBuilder:d,columns:this._getColumns()},new f);return new this.CustomGrid(b,
c)},_getColumns:function(){return[{label:"hidden column header 1",field:"treeItemId",sortable:!1,renderExpando:!0,expandOn:".dgrid-expando-icon:click,",renderCell:function(f,c,b,h){c=h&&"queryLevel"in h?h.queryLevel:0;f.level=c;b=g.clone(f);b=new l(b);f.treeItemWidgetId=b.id;f=b.domNode;d.set(f,"margin-"+(this.grid.isRTL?"right":"left"),20+c*this.grid.treeIndentWidth+"px");return f}}]}})})},"dgrid-v2/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(p,m,k){return p([m,
k],{})})},"dgrid-v2/Grid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/has ./List ./util/misc dojo/_base/sniff".split(" "),function(p,m,k,h,g,d,l,f){function r(c,b){b&&b.nodeType&&c.appendChild(b)}p=p(l,{columns:null,hasNeutralSort:!1,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(c){return"object"!==typeof c?this.columns[c]:this.cell(c).column},listType:"grid",cell:function(c,b){if(c.column&&c.element)return c;c.target&&c.target.nodeType&&
(c=c.target);var d;if(c.nodeType){do{if(this._rowIdToObject[c.id])break;var f=c.columnId;if(f){b=f;d=c;break}c=c.parentNode}while(c&&c!==this.domNode)}if(!d&&"undefined"!==typeof b){var g=this.row(c);if(f=g&&g.element)for(var f=f.getElementsByTagName("td"),a=0;a<f.length;a++)if(f[a].columnId===b){d=f[a];break}}if(null!=c)return{row:g||this.row(c),column:b&&this.column(b),element:d}},createRowCells:function(c,b,g,q,h){var a=k.create("table",{className:"dgrid-row-table",role:"presentation"}),n=9>d("ie")?
k.create("tbody",null,a):a,l,r,u,t,m,p,B,C,D,E;g=g||this.subRows;r=0;for(u=g.length;r<u;r++)for(p=g[r],l=k.create("tr",null,n),p.className&&(l.className=p.className),t=0,m=p.length;t<m;t++){B=p[t];C=B.id;D=B.field?" field-"+f.escapeCssIdentifier(B.field,"-"):"";(E="function"===typeof B.className?B.className(q):B.className)&&(D+=" "+E);D=k.create(c,{className:"dgrid-cell"+(C?" dgrid-column-"+f.escapeCssIdentifier(C,"-"):"")+D,role:"th"===c?"columnheader":"gridcell"});D.columnId=C;if(C=B.colSpan)D.colSpan=
C;if(C=B.rowSpan)D.rowSpan=C;b(D,B,q,h);l.appendChild(D)}return a},_createBodyRowCell:function(c,b,d,f){var g=d;b.get?g=b.get(d):"field"in b&&"_item"!==b.field&&(g=d[b.field]);b.renderCell?r(c,b.renderCell(d,g,c,f)):this._defaultRenderCell.call(b,d,g,c,f)},_createHeaderRowCell:function(c,b){var d=b.headerNode=c,f=b.field;f&&(c.field=f);b.renderHeaderCell?r(d,b.renderHeaderCell(d)):("label"in b||b.field)&&d.appendChild(document.createTextNode("label"in b?b.label:b.field));!1!==b.sortable&&f&&"_item"!==
f&&(c.sortable=!0,c.className+=" dgrid-sortable")},left:function(c,b){c.element||(c=this.cell(c));return this.cell(this._move(c,-(b||1),"dgrid-cell"))},right:function(c,b){c.element||(c=this.cell(c));return this.cell(this._move(c,b||1,"dgrid-cell"))},_defaultRenderCell:function(c,b,d){if(this.formatter){var f=this.formatter,g=this.grid.formatterScope;c="string"===typeof f&&g?g[f](b,c):this.formatter(b,c);null!=c&&c.hasOwnProperty("html")?d.innerHTML=c.html:null!=c&&d.appendChild(document.createTextNode(c))}else null!=
b&&d.appendChild(document.createTextNode(b))},renderRow:function(c,b){var d=this.createRowCells("td",m.hitch(this,"_createBodyRowCell"),b&&b.subRows,c,b),f=k.create("div",{role:"row"});f.appendChild(d);return f},renderHeader:function(){var c=this,b=this.headerNode;b.setAttribute("role","row");k.empty(b);var f=this.createRowCells("th",m.hitch(this,"_createHeaderRowCell"),this.subRows&&this.subRows.headerRows);this._rowIdToObject[f.id=this.id+"-header"]=this.columns;b.appendChild(f);this._sortListener&&
this._sortListener.remove();this._sortListener=g(f,"click,keydown",function(f){if("click"===f.type||32===f.keyCode||!d("opera")&&13===f.keyCode){var q=f.target,a,n;do if(q.sortable){a=q.field||q.columnId;n=c.sort[0];a=c.hasNeutralSort&&n&&n.property===a&&n.descending?[]:[{property:a,descending:n&&n.property===a&&!n.descending}];n={bubbles:!0,cancelable:!0,grid:c,parentType:f.type,sort:a};g.emit(f.target,"dgrid-sort",n)&&(c._sortNode=q,c.set("sort",a));break}while((q=q.parentNode)&&q!==b)}})},resize:function(){var c=
this.headerNode.firstChild,b=this.contentNode,d;this.inherited(arguments);b.style.width="";b&&c&&(d=c.offsetWidth)>b.offsetWidth&&(b.style.width=d+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(){this.inherited(arguments);this.updateSortArrow(this.sort)},_findSortArrowParent:function(c){var b=this.columns,d;for(d in b){var f=b[d];if(f.field===c)return f.headerNode}},updateSortArrow:function(c,b){this._lastSortedArrow&&
(this._lastSortedArrow.parentNode&&h.remove(this._lastSortedArrow.parentNode,"dgrid-sort-up dgrid-sort-down"),k.destroy(this._lastSortedArrow),delete this._lastSortedArrow);b&&(this.sort=c);if(c[0]){var d=c[0].property,f=c[0].descending,d=this._sortNode||this._findSortArrowParent(d);delete this._sortNode;d&&(d=d.contents||d,this._lastSortedArrow=k.create("div",{className:"dgrid-sort-arrow ui-icon",innerHTML:"\x26nbsp;",role:"presentation"},d,"first"),h.add(d,"dgrid-sort-"+(f?"down":"up")),this.resize())}},
styleColumn:function(c,b){return this.addCssRule("#"+f.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+f.escapeCssIdentifier(c,"-"),b)},_configColumns:function(c,b){var d=[],g=b instanceof Array;f.each(b,function(f,a){"string"===typeof f&&(b[a]=f={label:f});g||f.field||(f.field=a);a=f.id=f.id||(isNaN(a)?a:c+a);this._configColumn&&(this._configColumn(f,b,c),a=f.id);g&&(this.columns[a]=f);f.grid||(f.grid=this);d.push(f)},this);return g?b:d},_destroyColumns:function(){this.cleanup()},configStructure:function(){var c=
this.subRows,b=this._columns=this.columns;this.columns=!b||b instanceof Array?{}:b;if(c)for(b=0;b<c.length;b++)c[b]=this._configColumns(b+"-",c[b]);else this.subRows=[this._configColumns("",b)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(c){this._destroyColumns();this.subRows=null;this.columns=c;this._updateColumns()},_setSubRows:function(c){this._destroyColumns();this.subRows=c;this._updateColumns()},_updateColumns:function(){this.configStructure();this.renderHeader();
this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this.sort.length?(this._lastSortedArrow=null,this.updateSortArrow(this.sort)):this.resize())}});p.appendIfNode=r;return p})},"dgrid-v2/List":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/query dojo/sniff ./util/misc".split(" "),function(p,m,k,h,g,d,l,f){function r(a,b){return d("#"+f.escapeCssIdentifier(a),b)[0]}function c(a,b){a.className="dgrid-scrollbar-measure";
document.body.appendChild(a);var c=a["offset"+b]-a["client"+b];a.className="";a.parentNode&&document.body.removeChild(a);return c}function b(a){k.replace(this.domNode,a,this._class||"");this._class=a}function t(){return this._class}var q=[];l("mozilla")&&q.push("has-mozilla");l("touch")&&q.push("has-touch");k.add(document.documentElement,q);l.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a?"MSPointer":!1});var u,a;l.add("dom-scrollbar-width",function(a,b,d){return c(d,
"Width")});l.add("dom-scrollbar-height",function(a,b,d){return c(d,"Height")});l.add("dom-rtl-scrollbar-left",function(a,b,c){a=document.createElement("div");c.className="dgrid-scrollbar-measure";c.setAttribute("dir","rtl");c.appendChild(a);document.body.appendChild(c);b=!!l("ie")||!!l("trident")||/\bEdge\//.test(navigator.userAgent)||a.offsetLeft>=l("dom-scrollbar-width");c.className="";c.parentNode&&document.body.removeChild(c);h.destroy(a);c.removeAttribute("dir");return b});var n=0,v=function(){this._started&&
this.resize()},x=p(null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,addUiClasses:!0,highlightDuration:250,resizeThrottleDelay:f.defaultDelay,resizeThrottleMethod:"throttleDelayed",postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:r(b));this.create(a,b)},listType:"list",create:function(a,c){var d=this.domNode=c||document.createElement("div"),
f;a&&(this.params=a,p.safeMixin(this,a),f=a["class"]||a.className||d.className);this.sort=this.sort||[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=d.id=d.id||this.id||x.autoIdPrefix+n++;this.buildRendering();f&&b.call(this,f);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this.addUiClasses,c=this,d,n,q;q=this.isRTL="rtl"===(document.body.dir||document.documentElement.dir||
document.body.style.direction).toLowerCase();a.className="";a.setAttribute("role","grid");k.add(a,"dgrid dgrid-"+this.listType+(b?" ui-widget":""));d=this.headerNode=h.create("div",{className:"dgrid-header dgrid-header-row"+(b?" ui-widget-header":"")+(this.showHeader?"":" dgrid-header-hidden")},a);n=this.bodyNode=h.create("div",{className:"dgrid-scroller"},a);l("ff")&&(n.tabIndex=-1);this.headerScrollNode=h.create("div",{className:"dgrid-header dgrid-header-scroll dgrid-scrollbar-width"+(b?" ui-widget-header":
"")},a);this.footerNode=h.create("div",{className:"dgrid-footer"+(this.showFooter?"":" dgrid-footer-hidden")},a);q&&(a.className+=" dgrid-rtl"+(l("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));g(n,"scroll",function(b){c.showHeader&&(d.scrollLeft=b.scrollLeft||n.scrollLeft);b.stopPropagation();g.emit(a,"scroll",{scrollTarget:n})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=h.create("div",{className:"dgrid-content"+(b?" ui-widget-content":"")},this.bodyNode);b="string"===
typeof this.resizeThrottleMethod&&f[this.resizeThrottleMethod]?f[this.resizeThrottleMethod](v,this,this.resizeThrottleDelay):"function"===typeof this.resizeThrottleMethod?this.resizeThrottleMethod(m.hitch(this,v),this.resizeThrottleDelay):f.throttleDelayed(v,this,this.resizeThrottleDelay);this._resizeHandle=g(window,"resize",b);this._listeners.push(this._resizeHandle)},postCreate:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",
this.sort))},configStructure:function(){},resize:function(){var b=this.bodyNode,c=this.footerNode,c=this.showFooter?c.offsetHeight:0;this.headerScrollNode.style.height=b.style.marginTop=this.headerNode.offsetHeight+"px";b.style.marginBottom=c+"px";u||(u=l("dom-scrollbar-width"),a=l("dom-scrollbar-height"),l("ie")&&(u++,a++),f.addCssRule(".dgrid-scrollbar-width","width: "+u+"px"),f.addCssRule(".dgrid-scrollbar-height","height: "+a+"px"),17!==u&&(f.addCssRule(".dgrid-header-row","right: "+u+"px"),f.addCssRule(".dgrid-rtl-swap .dgrid-header-row",
"left: "+u+"px")))},addCssRule:function(a,b){var c=f.addCssRule(a,b);this.cleanAddedRules&&this._listeners.push(c);return c},on:function(a,b){var c=g(this.domNode,a,b);l("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){for(var a in this._rowIdToObject)if(this._rowIdToObject[a]!==this.columns){var b=r(a,this.domNode);b&&this.removeRow(b,!0)}},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();this._listeners=null}this._started=
!1;this.cleanup();h.destroy(this.domNode)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoRowId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},highlightRow:function(a,b){var c="dgrid-highlight"+(this.addUiClasses?" ui-state-highlight":"");a=a.element||a;k.add(a,c);setTimeout(function(){k.remove(a,c)},b||this.highlightDuration)},adjustRowIndices:function(a){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&this.setRowIndex(a,b++,a.rowIndex);while((a=a.nextSibling)&&a.rowIndex!==
b)}},renderArray:function(a,b,c){c=c||{};var d=c.start||0,f=document.createDocumentFragment(),n=[],g=0,q=a.length;b||(this._lastCollection=a);for(;g<q;)n[g]=this.insertRow(a[g],f,null,d++,c),g++;(a=b?b.parentNode:this.contentNode)&&a.parentNode&&(a!==this.contentNode||q)&&(a.insertBefore(f,b||null),q&&this.adjustRowIndices(n[q-1]));return n},renderHeader:function(){},setRowIndex:function(a,b,c){a.rowIndex=b;this.maintainOddEven&&(b=1===b%2?"dgrid-row-odd":"dgrid-row-even",void 0!==c?(c=1===c%2?"dgrid-row-odd":
"dgrid-row-even",c!==b&&k.replace(a,c,b)):k.add(a,b))},_autoRowId:0,insertRow:function(a,b,c,d,f){var n=this.id+"-row-"+(this.collection&&this.collection.getIdentity?this.collection.getIdentity(a):this._autoRowId++),g=r(n,this.domNode),q=g&&g.previousSibling;g&&(g===c&&(c=(c.connected||c).nextSibling),this.removeRow(g,!1,f));g=this.renderRow(a,f);g.className=(g.className||"")+" dgrid-row "+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[g.id=n]=a;b.insertBefore(g,c||null);this.setRowIndex(g,
d);q&&q.rowIndex!==g.rowIndex-1&&this.adjustRowIndices(q);return g},renderRow:function(a){var b=document.createElement("div");b.appendChild(document.createTextNode(a));return b},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||h.destroy(a)},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var c=a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&
a!==this.domNode)}else return"object"===typeof a?b=this.collection.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,r(this.id+"-row-"+b,this.domNode))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var f,n;n=f=a.element;b=b||1;do if(a=f[0>b?"previousSibling":"nextSibling"]){do if((f=a)&&-1<(f.className+" ").indexOf(c+" ")){n=f;b+=0>b?1:-1;break}while(a=(!d||!f.hidden)&&f[0>b?"lastChild":"firstChild"])}else if(f=f.parentNode,!f||f===this.bodyNode||
f===this.headerNode)break;while(b);return n},up:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){a.element||(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:function(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)},getScrollPosition:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+
a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:t,_setClass:b,_getClassName:t,_setClassName:b,_setSort:function(a,b){this.sort="string"!==typeof a?a:[{property:a,descending:b}];this._applySort()},_applySort:function(){this.refresh();
if(this._lastCollection){var a=this.sort;if(a&&0<a.length){var b=a[0].property,c=!!a[0].descending;this._lastCollection.sort(function(a,d){var f=a[b],n=d[b];void 0===f&&(f="");void 0===n&&(n="");return f===n?0:f>n!==c?1:-1})}this.renderArray(this._lastCollection)}},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;k.toggle(b,"dgrid-header-hidden",!a);this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},_setShowFooter:function(a){this.showFooter=a;k.toggle(this.footerNode,
"dgrid-footer-hidden",!a);this.resize()}});x.autoIdPrefix="dgrid_";return x})},"dgrid-v2/util/misc":function(){define(["dojo/has"],function(p){var m=[],k,h,g,d=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,l=setTimeout,f=clearTimeout;p.add("requestidlecallback",function(c){return"function"===typeof c.requestIdleCallback});var r={defaultDelay:15,throttle:function(c,b,d){var f=!1;d=d||r.defaultDelay;return function(){f||(f=!0,c.apply(b,arguments),l(function(){f=!1},d))}},throttleDelayed:function(c,b,d){var f=!1;
d=d||r.defaultDelay;return function(){if(!f){f=!0;var g=arguments;l(function(){f=!1;c.apply(b,g)},d)}}},debounce:function(c,b,d){var g;d=d||r.defaultDelay;return function(){g&&(f(g),g=null);var q=arguments;g=l(function(){g=null;c.apply(b,q)},d)}},each:function(c,b,d){var f,g;if(c)if("number"===typeof c.length)for(f=0,g=c.length;f<g;f++)b.call(d,c[f],f,c);else for(f in c)b.call(d,c[f],f,c)},addCssRule:function(c,b){k||(k=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(k),
k=k.sheet||k.styleSheet,h=k.deleteRule?"deleteRule":"removeRule",g=k.cssRules?"cssRules":"rules");var d=m.length;m[d]=(k.cssRules||k.rules).length;k.addRule?k.addRule(c,b):k.insertRule(c+"{"+b+"}",m[d]);return{get:function(b){return k[g][m[d]].style[b]},set:function(b,c){"undefined"!==typeof m[d]&&(k[g][m[d]].style[b]=c)},remove:function(){var b=m[d],c,a;if(void 0!==b)for(k[h](b),m[d]=void 0,c=d+1,a=m.length;c<a;c++)m[c]>b&&m[c]--}}},escapeCssIdentifier:function(c,b){return"string"===typeof c?c.replace(d,
b||"\\$1"):c}};return r})},"dgrid-v2/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/when dojo/query ./util/misc".split(" "),function(p,m,k,h,g,d,l,f,r){function c(b){return b&&(0<=b.className.indexOf("dgrid-row")||0<=b.className.indexOf("dgrid-loading"))}function b(b){return b&&0<=b.className.indexOf("dgrid-preload")}var t=0;return k([p,m],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,
queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:r.defaultDelay,keepScrollPosition:!1,rowHeight:0,_deleteQueue:[],postCreate:function(){this.inherited(arguments);var b=this;d(this.bodyNode,"scroll",r[this.pagingMethod](function(c){b._processScroll(c)},null,this.pagingDelay))},renderQuery:function(b,c){var a=this,d=c&&c.container||this.contentNode,f,q,k,r,u=0,m=c&&c.start||0;"level"in b&&(u=r=b.level);f={query:b,count:0,level:u,top:!1};var p={node:g.create("div",{className:"dgrid-preload",style:{height:"0"}},
d),count:0,query:b,next:f,level:u,top:!0};q=p.node;q.rowIndex=0;f.previous=p;k=f.node=g.create("div",{className:"dgrid-preload",style:{height:"0"}},d);p.id=t++;q.setAttribute("data-preloadid",p.id);f.id=t++;k.setAttribute("data-preloadid",f.id);k.rowIndex=this.minRowsPerPage;a._insertPreload(p);var C=g.create("div",{className:"dgrid-loading"},k,"before");g.create("div",{className:"dgrid-below"},C).innerHTML=this.loadingMessage;c=h.mixin({start:0,count:this.minRowsPerPage},c);null!=r&&(c.queryLevel=
r);return this._trackError(function(){var d=b(c);return a.renderQueryResults(d,k,c).then(function(b){return d.totalLength.then(function(d){var n=b.length,h=k.parentNode;!a._rows||"queryLevel"in c||(a._rows.min=0,a._rows.max=n===d?Infinity:n-1);g.destroy(C);"queryLevel"in c||(a._total=d);0===d&&h&&(a.noDataNode&&g.destroy(a.noDataNode),a._insertNoDataNode(h));p.count=m;f.count=d-n-m;k.rowIndex=m+n;d?a._updatePreloadRowHeights(p):(k.style.display="none",q.style.display="none");a._previousScrollPosition&&
h&&h.offsetHeight&&(a.scrollTo(a._previousScrollPosition),delete a._previousScrollPosition);return l(a._processScroll()).then(function(){return b})})}).otherwise(function(a){g.destroy(C);throw a;})})},_insertPreload:function(b){var c=this.preload;if(c){for(;c.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_PRECEDING;)if(c=c.previous,null==c)return;for(;c.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_FOLLOWING&&c.next;)c=c.next;c.previous.next=b;b.previous=c.previous;b=b.next;
b.next=c;c.previous=b}else this.preload=b},refresh:function(b){var c=this,a=b&&b.keepScrollPosition,d;"undefined"===typeof a&&(a=this.keepScrollPosition);a&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this._renderedCollection)return this.renderQuery(function(a){a=c._renderedCollection.fetchRange({start:a.start,end:a.start+a.count});a.then(function(a){d=a});return a}).then(function(){c._emitRefreshComplete();return d})},resize:function(){this.inherited(arguments);
this._processScroll()},cleanup:function(){this.inherited(arguments);this.preload=null},renderQueryResults:function(b){var c=this.inherited(arguments),a=this._getRenderedCollection(this.preload);a&&a.releaseRange&&c.then(function(c){c[0]&&!c[0].parentNode.tagName&&b.totalLength.then(function(){a.releaseRange(c[0].rowIndex,c[c.length-1].rowIndex+1)})});return c},_getFirstRowSibling:function(b){return b.lastChild},_calcRowHeight:function(b){var c=b.nextSibling;return c&&!/\bdgrid-preload\b/.test(c.className)?
c.offsetTop-b.offsetTop:b.offsetHeight},_calcAverageRowHeight:function(b){for(var c=b.length,a=0,d=0;d<c;d++)a+=this._calcRowHeight(b[d]);return c&&a?a/c:0},_updatePreloadRowHeights:function(){var b=this.preload,c=0;if(b){for(;b.previous;)b=b.previous;for(;b;)b.rowHeight||(b.rowHeight=this._calcAverageRowHeight(b.node.parentNode.querySelectorAll(".dgrid-row")),this._adjustPreloadHeight(b)),c=b?b.rowHeight:c,b=b.next;this.rowHeight=c}},lastScrollTop:0,_processScroll:function(d){function f(a,b){for(var c=
b?"next":"previous",d;d=a[c];)a=d;return a}function a(a,d){function g(){var c;a:{c=!d;for(var f=a;f=f[d?"previous":"next"];)if(c===f.top){c=f;break a}c=void 0}if(c&&l!==c&&!b(c.top?c.node.nextSibling:c.node.previousSibling))return h(),a=c,t=a.node,k=d?a.node.offsetTop-m:r-(a.node.offsetTop+a.node.offsetHeight),y=(c=n(t))&&c.rowIndex,E=void 0,c}function n(a){var d=b(a);(a=a[D])&&!c(a)&&(a=d&&b(a)?null:(d=g())?d:n(a));return a}function h(){a.count+=v;d&&(t.rowIndex-=v);q._adjustPreloadHeight(a);v=0;
q._releaseRange(a,d,y,E)}var l=a;a=f(a,d);var k=d?a.node.offsetTop-m:r-(a.node.offsetTop+a.node.offsetHeight),u=q.farOffRemoval,t=a.node,D=d?"previousSibling":"nextSibling",v=0,w=0,y,E;if(k>2*u){var p;y=(p=n(t))&&p.rowIndex;for(E=void 0;p&&l!==a;){var x=q._calcRowHeight(p);w+x+u>k||!c(p)?p=g():(w+=x,v+=p.count||1,q._pruneRow(p,d),"rowIndex"in p&&(E=p.rowIndex),p=n(p))}h();q._deleteNodeQueue()}}function n(a,b){do a=b?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var h=this.preload,l;this._updatePreloadRowHeights();
if(l=h&&h.rowHeight){var q=this,k=q.bodyNode,r=d&&d.scrollTop||this.getScrollPosition().y,m=k.offsetHeight+r,t;d=q.lastScrollTop;var k=q.bufferRows*l,p=k-l,D,E=!0;for(q.lastScrollTop=r;h&&!h.node.offsetWidth;)h=h.previous;for(;h&&h!==t;){t=q.preload;q.preload=h;l=h.node;var F=l.offsetTop;if(m+1+p<F)h=n(h,E=!1);else if(r-1-p>F+l.offsetHeight)h=n(h,E=!0);else{var F=((l.top?r-k:m)-F)/h.rowHeight,G=(m-r+2*k)/h.rowHeight,G=G+Math.min(Math.abs(Math.max(Math.min((r-d)*h.rowHeight,q.maxRowsPerPage/2),q.maxRowsPerPage/
-2)),10);l.top&&(F-=G);F=Math.max(F,0);10>F&&0<F&&G+F<q.maxRowsPerPage&&(G+=Math.max(0,F),F=0);G=Math.min(Math.max(G,q.minRowsPerPage),q.maxRowsPerPage,h.count);if(0===G)h=n(h,E);else{var G=Math.ceil(G),F=Math.min(Math.floor(F),h.count-G),I={};h.count-=G;var L=l,H,J=q.queryRowsOverlap,K=!h.top&&h;K?(h.previous&&(a(h),0<F&&b(l.previousSibling)?(F=Math.min(h.count,F),h.previous.count+=F,q._adjustPreloadHeight(h.previous,!0),l.rowIndex+=F,J=0):G+=F,h.count-=F),I.start=l.rowIndex-J,I.count=Math.min(G+
J,q.maxRowsPerPage),l.rowIndex=I.start+I.count):(h.next&&(L=l.nextSibling,a(h,!0),b(l.nextSibling)?(h.next.count+=h.count-F,h.next.node.rowIndex=F+G,q._adjustPreloadHeight(h.next),h.count=F,J=0,L=h.next.node):H=!0),I.start=h.count,I.count=Math.min(G+J,q.maxRowsPerPage),I.scrollingUp=!0);H&&L&&L.offsetWidth&&(H=L.offsetTop);q._adjustPreloadHeight(h);"level"in h.query&&(I.queryLevel=h.query.level);if("queryLevel"in I||!(I.start>q._total||0>I.count)){var N=g.create("div",{className:"dgrid-loading",style:{height:G*
h.rowHeight+"px"}},L,"before");g.create("div",{className:"dgrid-"+(K?"below":"above"),innerHTML:q.loadingMessage},N);N.count=G;q._trackError(function(){(function(a,b,c){var d=h.query(I);D=q.renderQueryResults(d,a,I).then(function(f){var n=q._rows;!n||"queryLevel"in I||!f.length||(b?(n.max<=n.min&&(n.min=f[0].rowIndex),n.max=f[f.length-1].rowIndex):(n.max<=n.min&&(n.max=f[f.length-1].rowIndex),n.min=f[0].rowIndex));L=a.nextSibling;g.destroy(a);c&&L&&L.offsetWidth&&q.scrollTo({y:q.bodyNode.scrollTop+
L.offsetTop-c});d.totalLength.then(function(a){"queryLevel"in I||(q._total=a,q._rows&&q._rows.max>=q._total-1&&(q._rows.max=Infinity));b&&(b.count=a-b.node.rowIndex,q._adjustPreloadHeight(b))});q._processScroll();return f},function(b){g.destroy(a);throw b;})})(N,K,H)});h=h.previous}}}}return D}},_adjustPreloadHeight:function(b,c){b.node.style.height=this._calculatePreloadHeight(b,c)+"px"},_calculatePreloadHeight:function(b,c){return Math.min(b.count*b.rowHeight,c?Infinity:this.maxEmptySpace)},_pruneRow:function(b,
c,a){this.removeRow(b,!0,a);this._queueNodeForDeletion(b)},_queueNodeForDeletion:function(b){this._deleteQueue.push(b)},_deleteNodeQueue:function(){for(var b=document.createElement("div"),c=this._deleteQueue,a=c.length;a--;)b.appendChild(c[a]);this._deleteQueue=[];setTimeout(function(){g.destroy(b)},1)},_removePreloads:function(b){if(b&&b.length){var c=this,a=this._getHeadPreload();b.forEach(function(b){if(b=c._findPreload(b,a))b.previous&&(b.previous.next=b.next),b.next&&(b.next.previous=b.previous)})}},
_getHeadPreload:function(){var b=this.preload;if(b)for(;b.previous;)b=b.previous;return b},_findPreload:function(b,c){c||(c=this._getHeadPreload());for(var a=c;a;){if(a.node===b)return a;a=a.next}},_getRenderedCollection:function(){return this._renderedCollection},_releaseRange:function(b,c,a,d){if(b){var f=b.level;b=this._getRenderedCollection(b);null!=d&&b.releaseRange&&"number"===typeof a&&"number"===typeof d&&(c?b.releaseRange(d,a+1):b.releaseRange(a,d+1),this._rows&&!f&&(this._rows[c?"max":"min"]=
d,this._rows.max>=this._total-1&&(this._rows.max=Infinity)))}}})})},"dgrid-v2/_StoreMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/dom-construct dojo/has dojo/on dojo/when".split(" "),function(p,m,k,h,g,d,l,f){function r(c){if("object"!==typeof c)c=Error(c);else if("cancel"===c.dojoType)return;l.emit(this.domNode,"dgrid-error",{grid:this,error:c,cancelable:!0,bubbles:!0})&&console.error(c)}return p(null,{collection:null,_renderedCollection:null,_rows:null,
_observerHandle:null,_structureHandle:null,shouldTrackCollection:!0,getBeforePut:!0,noDataMessage:"",loadingMessage:"",_total:0,constructor:function(){this.dirty={};this._updating={};this._columnsWithSet={};this._structureHandle=h.before(this,"configStructure",m.hitch(this,function(){this._columnsWithSet={}}))},destroy:function(){this.inherited(arguments);this._structureHandle&&this._structureHandle.remove();this._renderedCollection&&this._cleanupCollection();this._refreshTimeout&&clearTimeout(this._refreshTimeout)},
_configColumn:function(c){c.set&&(this._columnsWithSet[c.field]=c);this.inherited(arguments)},_setCollection:function(c){this._renderedCollection&&(this.cleanup(),this._cleanupCollection({shouldRevert:!c||c.storage!==this._renderedCollection.storage}));this.collection=c;if(this._started){if(c){var b=c;this.sort&&0<this.sort.length&&(b=c.sort(this.sort));b.track&&this.shouldTrackCollection&&(b=b.track(),this._rows=[],this._observerHandle=this._observeCollection(b,this.contentNode,{rows:this._rows}));
this._renderedCollection=b}this.refresh()}},_setStore:function(){},_getTotal:function(){return this._total},_cleanupCollection:function(c){c=c||{};this._observerHandle&&(this._observerHandle.remove(),this._observerHandle=this._rows=null);!1!==c.shouldRevert&&(this.dirty={});this._renderedCollection=this.collection=null},_applySort:function(){this.collection&&this.set("collection",this.collection)},_emitRefreshComplete:function(){var c=this;this._refreshTimeout=setTimeout(function(){l.emit(c.domNode,
"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:c});c._refreshTimeout=null},0)},_insertNoDataNode:function(c){this._removeNoDataNode();c=c||this.contentNode;var b=this.noDataNode=g.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage});c.insertBefore(b,this._getFirstRowSibling?this._getFirstRowSibling(c):null);return b},_removeNoDataNode:function(){return this.noDataNode?(g.destroy(this.noDataNode),delete this.noDataNode,!0):!1},row:function(){var c=this.inherited(arguments);
c&&c.data&&"undefined"!==typeof c.id&&(c.id=this.collection.getIdentity(c.data));return c},refresh:function(){var c=this.inherited(arguments);this.collection||this._insertNoDataNode();return c},refreshCell:function(c){if(!this.collection||!this._createBodyRowCell)throw Error("refreshCell requires a Grid with a collection.");this.inherited(arguments);return this.collection.get(c.row.id).then(m.hitch(this,"_refreshCellFromItem",c))},_refreshCellFromItem:function(c,b,d){var f=c.element;g.empty(f);var h=
this.dirty&&this.dirty[c.row.id];h&&(b=m.delegate(b,h));this._createBodyRowCell(f,c.column,b,d)},renderArray:function(){var c=this.inherited(arguments);this.collection||c.length&&this.noDataNode&&g.destroy(this.noDataNode);return c},insertRow:function(c,b,d,f,h){var a=this.collection,n=this.dirty,a=a&&a.getIdentity(c),l;a in n&&!(a in this._updating)&&(l=n[a]);l&&(c=m.delegate(c,l));n=this.inherited(arguments);h&&h.rows&&(h.rows[f]=n);this.noDataNode&&(g.destroy(this.noDataNode),this.noDataNode=null);
return n},updateDirty:function(c,b,d){var f=this.dirty,g=f[c];g||(g=f[c]={});g[b]=d},save:function(){function c(c,g){return function(n){var h=b._columnsWithSet,l=b._updating,q,k;if("function"===typeof n.set)n.set(g);else for(q in g)n[q]=g[q];for(q in h)k=h[q].set(n),void 0!==k&&(n[q]=k);l[c]=!0;return d.put(n).then(function(b){delete f[c];delete l[c];a[c]=b;return a})}}var b=this,d=this.collection,f=this.dirty,g=new k,a={},n=function(a){var c;return b.getBeforePut||!(c=b.row(a).data)?function(){return d.get(a)}:
function(){return c}},h=g.then(function(){return a}),l;for(l in f)var r=c(l,f[l]),h=h.then(n(l)).then(r);g.resolve();return h},revert:function(){this.dirty={};this.refresh()},_trackError:function(c){"string"===typeof c&&(c=m.hitch(this,c));var b=this,d;try{d=f(c())}catch(q){c=new k,c.reject(q),d=c.promise}d.otherwise(function(c){r.call(b,c)});return d},removeRow:function(c,b,d){var f={element:c};b||this.up(f).element!==c||this.down(f).element!==c||this._insertNoDataNode();(f=d&&d.rows||this._rows)&&
delete f[c.rowIndex];return this.inherited(arguments)},renderQueryResults:function(c,b,d){d=m.mixin({rows:this._rows},d);var f=this;return c.then(function(c){c=f.renderArray(c,b,d);delete f._lastCollection;return c})},_observeCollection:function(c,b,d){var f=this,g=d.rows,a,n=[c.on("delete, update",function(c){var n=c.previousIndex,h=c.index;void 0!==n&&g[n]&&("max"in g&&(void 0===h||h<g.min||h>g.max)&&g.max--,0>g.max&&(g.max=0),a=g[n],a.parentNode===b&&f.removeRow(a,!1,d),g.splice(n,1),("delete"===
c.type||"update"===c.type&&(n<h||void 0===h))&&g[n]&&g[n].rowIndex--);"delete"===c.type&&(a=null)}),c.on("add, update",function(c){var n=c.previousIndex,h=c.index;if(void 0!==h&&(!("max"in g)||h>=g.min&&h<=g.max)){"max"in g&&(void 0===n||n<g.min||n>g.max)&&g.max++;if(g.length){if(n=g[h],!n&&(n=g[h-1]))n=(n.connected||n).nextSibling}else n=f._getFirstRowSibling&&f._getFirstRowSibling(b);a&&n&&a.id===n.id&&(n=(n.connected||n).nextSibling);n&&!n.parentNode&&(n=document.getElementById(n.id));g.splice(h,
0,void 0);a=f.insertRow(c.target,b,n,h,d);f.highlightRow(a)}a=null}),c.on("add, delete, update",function(a){var b="undefined"!==typeof a.previousIndex?a.previousIndex:Infinity,d="undefined"!==typeof a.index?a.index:Infinity,n=Math.min(b,d);b!==d&&g[n]&&f.adjustRowIndices(g[n]);Infinity!==b&&f._processScroll&&(g[b]||g[b-1])&&f._processScroll();f._onNotification(g,a,c);c===f._renderedCollection&&"totalLength"in a&&(f._total=a.totalLength)})];return{remove:function(){for(;0<n.length;)n.pop().remove()}}},
_onNotification:function(){}})})},"dgrid-v2/Tree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/Deferred dojo/dom-construct dojo/dom-class dojo/on dojo/promise/all dojo/query dojo/when ./util/has-css3 ./Grid dojo/has!touch?./util/touch".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return p(null,{collapseOnRefresh:!1,enableTreeTransitions:!0,treeIndentWidth:9,constructor:function(){this._treeColumnListeners=[]},shouldExpand:function(a,b,c){return c},expand:function(a,
g,h,q){function n(){D||k._processScroll&&k._processScroll()}if(!this._treeColumn)return b();var k=this,r=a.element?a:this.row(a),u=!!this._expanded[r.id],v=t("transitionend"),p;a=r.element;a=-1<a.className.indexOf("dgrid-expando-icon")?a:c(".dgrid-expando-icon",a)[0];h=h||!this.enableTreeTransitions;if(a&&a.mayHaveChildren&&(h||g!==u)){var D=void 0===g?!this._expanded[r.id]:g,E=this.getScrollPosition();this._resetExpanded(r.id,D);l.replace(a,"ui-icon-triangle-1-"+(D?"se":"e"),"ui-icon-triangle-1-"+
(D?"e":"se"));l.toggle(r.element,"dgrid-row-expanded",D);g=r.element;var x=g.connected,G,I,L={};if(!x){var x=L.container=g.connected=d.create("div",{className:"dgrid-tree-container"},g,"after"),H=function(a){var b=k._renderedCollection.getChildren(r.data);k.sort&&0<k.sort.length&&(b=b.sort(k.sort));b.track&&k.shouldTrackCollection&&(x._rows=a.rows=[],b=b.track(),x._handles=[b.tracking,k._observeCollection(b,x,a)]);H.collection=b;return"start"in a?b.fetchRange({start:a.start,end:a.start+a.count}):
b.fetch()};"level"in a&&(x.level=H.level=a.level+1);if(this.renderQuery)p=q?k._renderedCollection.getChildren(r.data).fetchRange({start:0,end:1}).totalLength.then(function(a){L.start=a-k.minRowsPerPage;L.end=a-1;L.count=k.minRowsPerPage;k._previousScrollPosition=E;return k.renderQuery(H,L)}):this.renderQuery(H,L);else{var J=d.create("div",null,x);p=this._trackError(function(){return k.renderQueryResults(H(L),J,m.mixin({rows:L.rows},"level"in H?{queryLevel:H.level}:null)).then(function(a){d.destroy(J);
return a})})}v&&f(x,v,this._onTreeTransitionEnd)}x.hidden=!D;G=x.style;!v||h?(G.display=D?"block":"none",G.height="",n()):(f.once(x,v,n),D?(G.display="block",I=x.scrollHeight,G.height="0px"):(l.add(x,"dgrid-tree-resetting"),G.height=x.scrollHeight+"px"),setTimeout(function(){l.remove(x,"dgrid-tree-resetting");G.height=D?I?I+"px":"auto":"0px"},0))}return b(p)},_configColumns:function(){var a=this.inherited(arguments);this._resetExpanded();for(var b=0,c=a.length;b<c;b++)if(a[b].renderExpando){this._configureTreeColumn(a[b]);
break}return a},insertRow:function(a,b,c,d,f){f=f||{};var g=f.queryLevel="queryLevel"in f?f.queryLevel:"level"in b?b.level:0,n=this.inherited(arguments),h=this.row(n);(g=this.shouldExpand(h,g,this._expanded[h.id]))&&this._expandWhenInDom(n,f);(g||!this.collection.mayHaveChildren||this.collection.mayHaveChildren(a))&&l.add(n,"dgrid-row-expandable");return n},_expandWhenInDom:function(a,b,c){a.offsetHeight?(a=this.expand(a,!0,!0,b.scrollingUp),c&&a.then(function(){c.resolve()})):a.parentNode&&this.domNode.offsetHeight&&
(this._expandPromises&&!c&&(c=new g,this._expandPromises.push(c.promise)),setTimeout(this._expandWhenInDom.bind(this,a,b,c),0))},_queueNodeForDeletion:function(a){this.inherited(arguments);var b=a.connected;b&&this._deleteQueue.push(b)},_pruneRow:function(a,b){var d=a.connected,f;if(d){var g=this.row(a).id;this._expanded[g]&&(f=c("\x3e.dgrid-preload",d)[b?1:0])&&(f=this._findPreload(f),f=b?f.next:f.previous,f.expandedContent||(f.expandedContent={}),f.expandedContent[g]=d.offsetHeight)}this.inherited(arguments,
[a,b,{treePrune:!0,removeBelow:b}])},refresh:function(a){var c;this._expandPromises=[];c=(this.keepScrollPosition||a&&a.keepScrollPosition)&&Object.keys(this._expanded).length?this.inherited(arguments,m.mixin(a||{},{keepScrollPosition:!1})):this.inherited(arguments);return b(c).then(function(){var a=this._expandPromises;delete this._expandPromises;return r(a)}.bind(this))},removeRow:function(a,b,f){var g=a.connected,n={},h,l,q,r;g&&(g._handles&&(k.forEach(g._handles,function(a){a.remove()}),delete g._handles),
g._rows&&(n.rows=g._rows),h=c("\x3e.dgrid-row",g),l=c("\x3e.dgrid-preload",g),h&&h.length&&(this._releaseRange&&(q=h[0].rowIndex,r=h[h.length-1].rowIndex,this._releaseRange(this._findPreload(l[0]),!1,q,r)),h.forEach(function(a){f&&f.treePrune?this._pruneRow(a,f.removeBelow):this.removeRow(a,!0,n)},this)),this._removePreloads&&this._removePreloads(l),g._rows&&(g._rows.length=0,delete g._rows),b?this._queueNodeForDeletion(g):d.destroy(g));this.inherited(arguments)},_refreshCellFromItem:function(a,b){if(!a.column.renderExpando)return this.inherited(arguments);
this.inherited(arguments,[a,b,{queryLevel:c(".dgrid-expando-icon",a.element)[0].level}])},cleanup:function(){this.inherited(arguments);this.collapseOnRefresh&&this._resetExpanded()},_destroyColumns:function(){this.inherited(arguments);for(var a=this._treeColumnListeners,b=a.length;b--;)a[b].remove();this._treeColumnListeners=[];this._treeColumn=null},_calcRowHeight:function(a){var b=a.connected;return this.inherited(arguments)+(b?b.offsetHeight:0)},_configureTreeColumn:function(a){var b=this,c=".dgrid-content .dgrid-column-"+
a.id,d;this._treeColumn=a;if(!a._isConfiguredTreeColumn){var f=a.renderCell||this._defaultRenderCell;a._isConfiguredTreeColumn=!0;a.renderCell=function(c,d,g,n){var h=n&&"queryLevel"in n?n.queryLevel:0,l=!b.collection.mayHaveChildren||b.collection.mayHaveChildren(c),q;q=a.renderExpando(h,l,b._expanded[b.collection.getIdentity(c)],c);q.level=h;q.mayHaveChildren=l;(c=f.call(a,c,d,g,n))&&c.nodeType?(g.appendChild(q),g.appendChild(c)):g.insertBefore(q,g.firstChild)};"function"!==typeof a.renderExpando&&
(a.renderExpando=this._defaultRenderExpando)}var g=this._treeColumnListeners;0===g.length&&(g.push(this.on(a.expandOn||".dgrid-expando-icon:click,"+c+":dblclick,"+c+":keydown",function(a){var c=b.row(a);b.collection.mayHaveChildren&&!b.collection.mayHaveChildren(c.data)||"keydown"===a.type&&32!==a.keyCode||"dblclick"===a.type&&d&&1<d.count&&c.id===d.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||b.expand(c);-1<a.target.className.indexOf("dgrid-expando-icon")&&(d&&d.id===b.row(a).id?d.count++:
d={id:b.row(a).id,count:1})})),t("touch")&&g.push(this.on(u.selector(c,u.dbltap),function(){b.expand(this)})))},_defaultRenderExpando:function(a,b,c){var f=this.grid.isRTL?"right":"left",g="dgrid-expando-icon";b&&(g+=" ui-icon ui-icon-triangle-1-"+(c?"se":"e"));return d.create("div",{className:g,innerHTML:"\x26nbsp;",style:"margin-"+f+": "+a*this.grid.treeIndentWidth+"px; float: "+f+";"})},_onNotification:function(a,b){"delete"===b.type&&this._resetExpanded(b.id);this.inherited(arguments)},_onTreeTransitionEnd:function(a){var b=
this,c=this.style.height;c&&(this.style.display="0px"===c?"none":"block");a&&(l.add(this,"dgrid-tree-resetting"),setTimeout(function(){l.remove(b,"dgrid-tree-resetting")},0));this.style.height=""},_resetPlaceHolder:function(a){var b=this._getHeadPreload&&this._getHeadPreload();if(b)if(null!=a)a:for(;b;){var c=b.expandedContent;if(c&&c[a]){delete c[a];this._adjustPreloadHeight(b);break a}b=b.next}else for(a=b;a;)a.expandedContent&&(delete a.expandedContent,this._adjustPreloadHeight(a)),a=a.next},_resetExpanded:function(a,
b){this._resetPlaceHolder(a);null==a?this._expanded={}:b?this._expanded[a]=!0:delete this._expanded[a]},_calculatePreloadHeight:function(a){var b=this.inherited(arguments),c=a.expandedContent;c&&Object.keys(c).forEach(function(a){b+=c[a]});return b},_getRenderedCollection:function(a){return a.level?a.query.collection:this.inherited(arguments)}})})},"dgrid-v2/util/has-css3":function(){define(["dojo/has"],function(p){function m(h,g){var d=h.style,l;if(g in d)return!0;g=g.slice(0,1).toUpperCase()+g.slice(1);
for(l=k.length;l--;)if(k[l]+g in d)return k[l];return!1}var k=["ms","O","Moz","Webkit"];p.add("css-transitions",function(h,g,d){return m(d,"transitionProperty")});p.add("css-transforms",function(h,g,d){return m(d,"transform")});p.add("css-transforms3d",function(h,g,d){return m(d,"perspective")});p.add("transitionend",function(){var h=p("css-transitions");return h?!0===h?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[h]:!1});return p})},"dgrid-v2/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-class dojo/topic dojo/touch dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList ../Selection dojo/has!touch?../util/touch".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){var a=p(c,{grid:null,getObject:function(a){var b=this.grid;return b._trackError(function(){return b.collection.get(a.id.slice(b.id.length+5))})},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(a,b,c){var d=this,f=this._targetAnchor=this.targetAnchor,g=this.grid,n=g.collection;!this.before&&f&&(f=f.nextSibling);f=f&&g.row(f);r(f&&n.get(f.id),function(f){if(d!==a)d.onDropExternal(a,b,c,f);else d.onDropInternal(b,
c,f)})},onDropInternal:function(a,b,c){var d=this.grid,f=d.collection,g=this,n=g._targetAnchor,h;n&&(h=this.before?n.previousSibling:n.nextSibling);n=d.row(a[0]);(b||h!==a[0]&&(c||!n||d.down(n).element!==a[0]))&&a.forEach(function(a){r(g.getObject(a),function(a){var n=f.getIdentity(a);d._trackError(function(){var h=f.getIdentity(a),l=c?f.getIdentity(c):null;return(h===l?g._getNextItem(c).then(function(a){c=a}):f[b&&f.copy?"copy":"put"](a,{beforeId:l})).then(function(){g._selectedNodes[n]&&(g._selectedNodes[n]=
d.row(n).element)})})})})},_getNextItem:function(a){var b=this.grid;return a&&(a=b.row(a),a.element&&(a=b.down(a),a.element))?r(a.data):r(null)},onDropExternal:function(a,b,c,d){var f=this.grid,g=this.grid.collection,n=a.grid;b.forEach(function(b,h){r(a.getObject(b),function(l){f._trackError(function(){return g[g.copy?"copy":"put"](l,{beforeId:d?g.getIdentity(d):null}).then(function(){if(!c){if(n){var d=n.collection.getIdentity(l);!h&&a.selectNone();a.delItem(b.id);return n.collection.remove(d)}a.deleteSelectedNodes()}})})})})},
onDndStart:function(a){this.inherited(arguments);a===this&&(b.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){f("touch")&&this.isDragging&&1<u.countCurrentTouches(a,this.grid.touchNode)?(d.publish("/dnd/cancel"),b.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!f("touch")||1>=u.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(a){return a.getObject&&c.prototype.checkAcceptance.apply(this,
arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new t,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});p=p(q,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:a,postMixInProperties:function(){this.inherited(arguments);this.dndParams=m.mixin({accept:[this.dndSourceType]},this.dndParams);this.mouseDownEventType=l.press},postCreate:function(){function b(a){l[a.id]=a.element}function c(a){delete l[a.id];g.remove(a.element,
"dojoDndItemSelected dojoDndItemAnchor")}this.inherited(arguments);var d=this.dndConstructor||a,f=m.mixin(this.dndParams,{grid:this,dropParent:this.contentNode});"function"===typeof this.expand&&(f.allowNested=!0);this.dndSource=new d(this.bodyNode,f);var l=this.dndSource._selectedNodes={};this.on("dgrid-select",function(a){k.forEach(a.rows,b)});this.on("dgrid-deselect",function(a){k.forEach(a.rows,c)});this._listeners.push(h.after(this,"destroy",function(){delete this.dndSource._selectedNodes;l=
null;this.dndSource.destroy()},!0))},insertRow:function(a){var b=this.inherited(arguments),c="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];g.add(b,"dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});this.selection&&(c=this.collection.getIdentity(a),c in this.selection&&(this.dndSource._selectedNodes[c]=b));return b},removeRow:function(a){var b=this.row(a);this.selection&&b.id in this.selection&&delete this.dndSource._selectedNodes[b.id];
this.dndSource.delItem(b.element.id);this.inherited(arguments)}});p.GridSource=a;return p})},"dgrid-v2/Selection":function(){define("dojo/_base/declare dojo/aspect dojo/dom-class dojo/mouse dojo/on dojo/sniff dojo/has!touch?./util/touch dojo/query dojo/dom".split(" "),function(p,m,k,h,g,d,l){function f(a,b){for(var c=a.unselectable=b?"on":"",d=a.getElementsByTagName("*"),f=d.length;--f;)"INPUT"!==d[f].tagName&&"TEXTAREA"!==d[f].tagName&&(d[f].unselectable=c)}function r(a,c){var n=a.bodyNode,h=c?"text":
21>d("ff")?"-moz-none":"none";b&&"msUserSelect"!==b?n.style[b]=h:d("dom-selectstart")?c||a._selectstartHandle?c&&a._selectstartHandle&&(a._selectstartHandle.remove(),delete a._selectstartHandle):a._selectstartHandle=g(n,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(f(n,!c),c||a._unselectableHandle)?c&&a._unselectableHandle&&(a._unselectableHandle.remove(),delete a._unselectableHandle):a._unselectableHandle=m.after(a,"renderRow",function(a){f(a,
!0);return a})}d.add("dom-comparedocumentposition",function(a,b,c){return!!c.compareDocumentPosition});d.add("dom-selectstart","undefined"!==typeof document.onselectstart);var c=d("mac")?"metaKey":"ctrlKey",b=d("css-user-select"),t=d("pointer"),q=t&&"MS"===t.slice(0,2),u=t?t+(q?"Down":"down"):"mousedown",a=t?t+(q?"Up":"up"):"mouseup";"WebkitUserSelect"===b&&"undefined"!==typeof document.documentElement.style.msUserSelect&&(b=!1);return p(null,{selectionDelegate:".dgrid-row",selectionEvents:u+","+
a+",dgrid-cellfocusin",selectionTouchEvents:d("touch")?l.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();
this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!==this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},_setAllowTextSelection:function(a){"undefined"!==typeof a?r(this,a):r(this,"none"===this.selectionMode);this.allowTextSelection=a},_handleSelect:function(b,c){if(!h.isRight(b)&&
this[this._selectionHandlerName]&&this.allowSelect(this.row(c))&&("dgrid-cellfocusin"!==b.type||"mousedown"!==b.parentType)&&(b.type!==a||c===this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=b;if(!b.keyCode||!b.ctrlKey||32===b.keyCode)if(!b.shiftKey&&b.type===u&&this.isSelected(c))this._waitForMouseUp=c;else this[this._selectionHandlerName](b,c);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,b){var d=a.keyCode?a.ctrlKey:a[c];this._lastSelected===
b?this.select(b,null,!d||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var d=this._lastSelected,f=a.keyCode?a.ctrlKey:a[c],g;a.shiftKey||(g=f?null:!0,d=null);this.select(b,d,g);d||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){if(a[c]||!this.isSelected(b)||1!==this.getSelectedCount())(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:a[c])||this.clearSelection(null,!0),this._multipleSelectionHandler(a,b)},
_toggleSelectionHandler:function(a,b){this.select(b,null,null)},_initSelectionEvents:function(){var b=this,f=this.contentNode,h=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};d("touch")&&!d("pointer")&&this.selectionTouchEvents?(g(f,l.selector(h,this.selectionTouchEvents),function(a){b._handleSelect(a,this);b._ignoreMouseSelect=this}),g(f,g.selector(h,this.selectionEvents),function(c){b._ignoreMouseSelect!==this?b._handleSelect(c,this):c.type===a&&(b._ignoreMouseSelect=
null)})):g(f,g.selector(h,this.selectionEvents),function(a){b._handleSelect(a,this)});this.addKeyHandler&&this.addKeyHandler(32,function(a){b._handleSelect(a,a.target)});if(this.allowSelectAll)this.on("keydown",function(a){a[c]&&65===a.keyCode&&!/\bdgrid-input\b/.test(a.target.className)&&(a.preventDefault(),b[b.allSelected?"clearSelection":"selectAll"]())});this._setCollection&&this._listeners.push(m.before(this,"_setCollection",function(a){b._updateDeselectionAspect(a)}));this._updateDeselectionAspect()},
_updateDeselectionAspect:function(a){function b(a,b){var d=c.row(a);if(d&&c.selection[d.id])c[b](d)}var c=this,d;this._removeDeselectSignals&&this._removeDeselectSignals();d=a&&a.track&&this._observeCollection?[m.before(this,"_observeCollection",function(a){d.push(a.on("delete",function(a){"undefined"===typeof a.index&&b(a.id,"deselect")}))}),m.after(this,"_observeCollection",function(a){d.push(a.on("update",function(c){"undefined"!==typeof c.index&&b(a.getIdentity(c.target),"select")}))},!0)]:[m.before(this,
"removeRow",function(a,b){var c;b||(c=this.row(a))&&c.id in this.selection&&this.deselect(c)})];this._removeDeselectSignals=function(){for(var a=d.length;a--;)d[a].remove();d=[]}},allowSelect:function(){return!0},_fireSelectionEvent:function(a){var b=this._selectionEventQueues[a],c=this._selectionTriggerEvent,d;d={bubbles:!0,grid:this};c&&(d.parentType=c.type);d[this._selectionTargetType]=b;this._selectionEventQueues[a]=[];g.emit(this.contentNode,"dgrid-"+a,d)},_fireSelectionEvents:function(){var a=
this._selectionEventQueues,b;for(b in a)a[b].length&&this._fireSelectionEvent(b)},_select:function(a,b,c){var d,f,g;"undefined"===typeof c&&(c=!0);a.element||(a=this.row(a));if(!1===c||this.allowSelect(a))if(d=this.selection,f=!!d[a.id],null===c&&(c=!f),g=a.element,c||this.allSelected?d[a.id]=c:delete this.selection[a.id],g&&(c?k.add(g,"dgrid-selected"+(this.addUiClasses?" ui-state-active":"")):k.remove(g,"dgrid-selected ui-state-active")),c!==f&&g&&this._selectionEventQueues[(c?"":"de")+"select"].push(a),
b)if(b.element||(b=this.row(b)),b){if(b=b.element)for(d=this._determineSelectionDirection(g,b),d||(b=document.getElementById(b.id),d=this._determineSelectionDirection(g,b));a.element!==b&&(a=this[d](a));)this._select(a,null,c)}else this._lastSelected=g},_determineSelectionDirection:d("dom-comparedocumentposition")?function(a,b){var c=b.compareDocumentPosition(a);return c&1?!1:2===c?"down":"up"}:function(a,b){return 1>b.sourceIndex?!1:b.sourceIndex>a.sourceIndex?"down":"up"},select:function(a,b,c){this._select(a,
b,c);this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var c in this.selection)a!==c&&this._select(c,null,!1);b||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=this.row(this._rowIdToObject[a]);this._select(b.id,null,!0)}this._fireSelectionEvents()},getSelectedCount:function(){var a=0,b;for(b in this.selection)b&&(a+=
1);return a},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this.inherited(arguments),b=this.selection,c,d,f;for(c=0;c<a.length;c++)d=this.row(a[c]),(f=d.id in b?b[d.id]:this.allSelected)&&this.select(d,
null,f);this._fireSelectionEvents();return a}})})},"webview/features/navigationTrees/treeBuilding/treeExtensions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","./treeDnDExtensions","./treeDnDSource"],function(p,m,k,h,g){return p("webview/features/navigationTrees/treeBuilding/treeExtensions",null,{className:"navigation-tree-renderer",keepScrollPosition:!0,minRowsPerPage:500,maxRowsPerPage:1E3,farOffRemoval:9E13,pagingMethod:"throttleDelayed",selectionMode:"extendedPlus",showHeader:!1,
treeIndentWidth:30,treeItemsRendered:null,treeItemsChecked:null,constructor:function(){m.mixin(this,new h);this.dndConstructor=g;this.treeItemsRendered={};this.treeItemsChecked={}},insertRow:function(d){!0===this._expanded[d.treeItemId]&&(d.shouldExpand=!0);var g=this.inherited(arguments);this.treeBuilder.afterRenderRow(d);!0===this.selection[d.parent]&&this.select(d);return g},refresh:function(){this.treeItemsRendered&&(this.treeItemsRendered={});this.treeItemsChecked&&(this.treeItemsChecked={});
this._expanded&&(this._expanded={});return this.inherited(arguments)},removeFromExpandedMap:function(d){this._expanded[d]&&delete this._expanded[d]},removeRow:function(d){this.treeBuilder.beforeRemoveRow(d);this.inherited(arguments)},shouldExpand:function(d,g,f){return!0===d.data.shouldExpand},_extendedPlusSelectionHandler:function(d,g){this.potentiallySelected=null;var f=k("mac")?"metaKey":"ctrlKey";if(d[f]||!this.isSelected(g)||1!==this.getSelectedCount())if("checkbox"===d.srcElement.type||"text"===
d.srcElement.type||d.srcElement.id.includes("InlineEditBox")||d.srcElement.className.includes("dgrid-expando-icon")||d.srcElement.className.includes("rc24Icon editIcon"))this.potentiallySelected=g;else{var h=this.row(g).data,c=this.collection.getIdentity(h);if(h=h.parent){var b=d.keyCode?d.ctrlKey:d[f];if(this.selection.hasOwnProperty(h)&&!0===this.selection[h]&&this.selection.hasOwnProperty(c)&&!0===this.selection[c]&&b)return}(2===d.button?this.isSelected(g):d.keyCode?d.ctrlKey:d[f])||this.clearSelection(null,
!0);this._multipleSelectionHandler(d,g)}},_observeCollection:function(){return{remove:function(){}}}})})},"webview/features/navigationTrees/treeBuilding/treeDnDExtensions":function(){define(["dojo/_base/declare"],function(p){return p("webview/features/navigationTrees/treeBuilding/treeDnDExtensions",null,{dndParams:{delay:10,dndSourceType:"dgrid-row",accept:["dgrid-row","navigationTreeKeyword","navigationTreeSystemObject"]}})})},"webview/features/navigationTrees/treeBuilding/treeDnDSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/dom-geometry dojo/promise/all dojo/query dojo/topic dojo/touch dojo/has dojo/when dojo/dnd/common dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList dojo/has!touch?../util/touch".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return p("webview/features/navigationTrees/treeBuilding/treeDnDSource",q,{grid:null,checkAcceptance:function(a){return a.getObject&&q.prototype.checkAcceptance.apply(this,arguments)},getObject:function(a){var b=this.grid,c=this;return b._trackError(function(){return b.collection.get(c._getItemIdFromNode(a))})},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var b=new a,c;for(c in this.grid.selection)!0===this.grid.selection[c]&&
this._selectedNodes[c]&&b.push(this._selectedNodes[c]);b.sort(m.hitch(this,function(a,b){var c=g.position(a),d=g.position(b),c=c.y,d=d.y;if(0===c||0===d)var f=this.grid.row(a).data.level,n=this.grid.row(b).data.level,c=0===c?f:0,d=0===d?n:0;return c<d?-1:1}));return b},onDndStart:function(a,b){this.inherited(arguments);a==this&&b&&0<b.length&&b.forEach(function(a){h.add(a,"hidden")})},onDrop:function(a,b,c){var d=this.grid;d.treeBuilder._destroyPlaceHolderFirst();h.remove(d.treeBuilder.treeRenderingDomNode,
"drag-in-progress");h.remove(d.treeBuilder.treeRenderingDomNode,"first-drag-in-progress");this.dropDetails&&this.dropDetails.validDropArea?(this.grid.clearSelection(),this.grid.treeBuilder.toggleDnd(!1),a=this!==a?this.onDropExternal(a,b,c):this.onDropInternal(b),a.promise.always(m.hitch(this.grid.treeBuilder,this.grid.treeBuilder.toggleDnd,!0)),this.processStoreResponse(a)):d.treeBuilder.showUnmovedItems()},onDropExternal:function(a,c,d){var f=this.grid;d=this.grid.collection;var g=this.grid.dndSource,
n=null,h=null;g.dropDetails&&(g.dropDetails.parent&&(n=g.dropDetails.parent),g.dropDetails.beforeId&&(h=g.dropDetails.beforeId));var l=[];c.forEach(function(c,d){b(a.getObject(c),function(a){var b=a,b=a.isKeywordSelectorItem?f.treeBuilder.createKeywordData(a):f.treeBuilder.createSystemObjectData(a);l.push(b)})});return d.insertNewItems(l,n,h)},onDropInternal:function(a){var b=this.grid,c=this.grid.dndSource,d=b.collection,f=null,g=null;c.dropDetails&&(c.dropDetails.parent&&(f=c.dropDetails.parent),
c.dropDetails.beforeId&&(g=c.dropDetails.beforeId));var c=new k,n=[],h=[];a.forEach(m.hitch(this,function(a,c){var d=this._getItemIdFromNode(a),d=b.row(d),d=m.clone(d.data);h.includes(d.parent)||n.push(d);h.push(d.treeItemId)}));d.moveItems(n,f,g).then(c.resolve,c.reject);return c},onMouseDown:function(a){c("touch")&&this.isDragging&&1<n.countCurrentTouches(a,this.grid.touchNode)?(f.publish("/dnd/cancel"),u.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){if((!c("touch")||
1>=n.countCurrentTouches(a,this.grid.touchNode))&&(!this.isDragging||"Disabled"!=this.targetState)){this.simpleSelection=!1;var b=u.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();if(0===d.length&&b.treeBuilder.tree.potentiallySelected&&b.treeBuilder.tree.potentiallySelected.contains(a.target)){d.push(b.treeBuilder.tree.potentiallySelected);var f=this._getItemIdFromNode(b.treeBuilder.tree.potentiallySelected);
(b.treeBuilder.tree.treeItemsRendered[f]||[]).forEach(m.hitch(this,this._findAllChildren,b.treeBuilder.tree,d))}d.length&&b.startDrag(this,d,this.copyState(t.getCopyKeyState(a),!0))}this.isDragging&&(d=!1,this.current&&(d=l(".tree-builder-item",this.current)[0],this.targetBox=g.position(d,!0),d=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==g.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||d!=this.before)&&(this._markTargetAnchor(d),
b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection)))}},processStoreResponse:function(a){var b=m.hitch(this,function(a){return!this._itemHasNoRenderedChildren(a[0].parent)});a.then(m.hitch(this,function(a){a.insertedItems&&a.insertedItems.length&&b(a.insertedItems)&&a.insertedItems.forEach(m.hitch(this,this._updateItemInGrid));a.movedItems&&a.movedItems.length&&b(a.movedItems)&&a.movedItems.forEach(m.hitch(this,this._updateItemInGrid));a.parentItems&&a.parentItems.length&&
a.parentItems.forEach(m.hitch(this,this._updateParentItemInGrid))}))},_findAllChildren:function(a,b,c){var d=this._getItemsNodeId(c);(d=document.getElementById(d))&&b.push(d);(a.treeItemsRendered[c]||[]).forEach(m.hitch(this,this._findAllChildren,a,b))},_findItemsContainer:function(a){a.parent?(a=this._getItemsNodeId(a.parent),container=document.getElementById(a).connected):container=this.grid.contentNode;return container},_getItemIdFromNode:function(a){return a.id.slice(this.grid.id.length+5)},_getItemsNodeId:function(a){return this.grid.id+
"-row-"+a},_itemHasNoRenderedChildren:function(a){return a&&!0!==this.grid._expanded[a]?this.grid.treeItemsRendered[a]&&0===this.grid.treeItemsRendered[a].length:!1},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},_removeFromGridIfAlreadyExists:function(a){a=this._getItemsNodeId(a);(a=document.getElementById(a))&&this.grid.removeRow(a,!1)},_updateItemInGrid:function(a){this._removeFromGridIfAlreadyExists(a.treeItemId);var b=this._findItemsContainer(a),
c=null;a.beforeId&&(c=this._getItemsNodeId(a.beforeId),c=document.getElementById(c));this.grid.insertRow(a,b,c,0,{queryLevel:b.level||0})},_updateParentItemInGrid:function(a){this._removeFromGridIfAlreadyExists(a.treeItemId);var b=this._findItemsContainer(a),c=null;a.beforeId&&(c=this._getItemsNodeId(a.beforeId),c=document.getElementById(c));var d={queryLevel:b.level||0};a.hasChildren?a.shouldExpand=!0:delete this.grid._expanded[a.treeItemId];this.grid.insertRow(a,b,c,0,d)}})})},"webview/features/navigationTrees/treeBuilding/_TreeDialogManager":function(){define("dijit/_WidgetBase dijit/Dialog dijit/focus dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/Evented dojo/i18n!webview/nls/all dojo/on dojo/string dojo/topic dojox/html/entities ../dialogs/EditTreeItemDialog ../../../admin/widget/IconGallery".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return h("webview/features/navigationTrees/treeBuilding/_TreeDialogManager",[p,l],{webviewStrings:f,siteId:null,_activeNode:null,postCreate:function(){this.inherited(arguments);this.own(b.subscribe("openEditDialog",g.hitch(this,function(a){this._openEditDialog(a)})),b.subscribe("openIconGallery",g.hitch(this,function(a){this._openIconGallery(a)})));this.buildGallery()},buildGallery:function(){this.iconGallery=new u({});this.galleryDialog=new m({title:this.webviewStrings.iconGallery,
content:this.iconGallery,baseClass:"fileGalleryDialogBox"});this.own(r(this.iconGallery,"iconSaved",g.hitch(this,function(a){this._activeNode&&this._activeNode.set("CustomIcon",a);this.onIconSelected(a);this.galleryDialog.hide()})));this.own(r(this.iconGallery,"iconDeleted",g.hitch(this,function(a){rc.xhr.request({path:"tree/icons",type:"rest",method:"DELETE",siteId:this.siteId,fileId:a.id}).then(g.hitch(this,function(a){}),g.hitch(this,function(a){console.error(this.declaredClass+" - _buildGallery(): Error deleting icon file",
a)}));this._activeNode&&this._activeNode.customIcon&&this._activeNode.customIcon.id&&this._activeNode.customIcon.id===a.id&&this._activeNode.set("CustomIcon",null);this.editNodeContent&&this.editNodeContent.customIconObj&&this.editNodeContent.customIconObj.id&&this.editNodeContent.customIconObj.id===a.id&&this.editNodeContent.iconSelected(null);this.emit("deleteIcon",a);this.galleryDialog.hide()})))},onIconSelected:function(a){this.emit("iconSelected",a)},_openEditDialog:function(a){this._activeNode=
null;this.editNodeContent||(this.editNodeContent=new q({siteId:this.siteId}),this.editNodeDialog=new m({content:this.editNodeContent}),this.own(this.editNodeDialog,this.editNodeContent),this.own(r(this.editNodeContent,"finished",g.hitch(this,function(){this.editNodeDialog.hide()}))),this.own(r(this.editNodeContent,"openGallery",g.hitch(this,function(){this._updateGallery();this.galleryDialog.show()}))),this.own(r(this,"iconSelected",g.hitch(this,function(a){this.editNodeContent.iconSelected(a)}))),
this.own(r(this.editNodeContent,"updateGallery",g.hitch(this,this._updateGallery))));this.editNodeDialog.set("title",c.substitute(this.webviewStrings.xDetails,[t.encode(a.get("displayName"))]));this.editNodeContent.setContent(a);this.editNodeDialog.show();d.set(this.editNodeContent.displayNameEditor.focusNode,"tabindex",1);k.focus(this.editNodeContent.displayNameEditor.focusNode)},_openIconGallery:function(a){this._activeNode=a;this._updateGallery();this.galleryDialog.show()},_updateGallery:function(){rc.xhr.request({path:"tree/icons",
type:"rest",method:"GET",siteId:this.siteId}).then(g.hitch(this,function(a){this.iconGallery.updateIcons(a.data.iconFiles,a.data.itemCount);this.editNodeContent&&this.editNodeContent.setIconFiles(a.data.iconFiles)}),g.hitch(this,function(a){console.error(this.declaredClass+" - _updateGallery(): Error getting icon files",a)}))}})})},"webview/features/navigationTrees/dialogs/EditTreeItemDialog":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/has dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/string dojo/text!webview/features/navigationTrees/dialogs/templates/editTreeItemDialog.html dojo/topic dojox/form/Uploader dojox/html/entities rc/util/notices ../../../admin/_Widget ../../../util/globalConstants ../../../widget/WarningDialog ../../../widget/WarningDialogEnums dijit/form/Button dijit/form/TextBox dijit/form/ValidationTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z){return m("webview/features/navigationTrees/dialogs/templates/EditTreeItemDialog",v,{templateString:t,site:"",displayName:"",urlPath:"",iconSrc:"",iconPath:"",customIconObj:null,navTreeItem:null,iconFiles:null,_iconFileUploader:null,_isHyperLink:!1,_overwriteWarningDialog:null,acceptedFileExtensions:".jpg .jpeg .png .gif .bmp .ico".split(" "),MAX_FILE_UPLOAD_SIZE_IN_KB:512,RELATIVE_PATH_TO_DEFAULT_ICONS:"../.."+dojoConfig.baseUrl+"/webview/themes/rcblack/images/DefaultNavTreeIcons/",
constructor:function(){this.webviewStrings=f;this.errorStrings=r;this.rcStrings=l},postCreate:function(){this.inherited(arguments);this._createUploader();this.setupOnClicks();this.urlEditor.set("validator",k.hitch(this,this.urlValidator,this.urlEditor))},iconSelected:function(a){null===a||null===a.id?(this.navTreeItem.set("customIcon",a),this.customIconObj=this.navTreeItem.get("customIcon"),this.iconSrc=this.customIconObj.filename,this.iconPath=this.RELATIVE_PATH_TO_DEFAULT_ICONS+this.iconSrc):(this.customIconObj=
a,this.iconSrc=this.customIconObj.filename,this._getIconPath());h.set(this.iconEditor,"src",this.iconPath);h.set(this.iconEditor,"alt",this.navTreeItem.get("pointType"))},onFinished:function(){this.emit("finished")},onOpenGallery:function(a){this.emit("openGallery",a)},onUpdateGallery:function(){this.emit("updateGallery")},setContent:function(a){this.navTreeItem=a;this.customIconObj=a.get("customIcon");this.iconSrc=this.customIconObj.filename;this._getIconPath();this.displayName=a.get("displayName");
"HYPERLINK"===a.get("pointType").toUpperCase()?(this._isHyperLink=!0,this.urlPath=a.get("urlPath"),this.urlEditor.set("value",this.urlPath),g.remove(this.urlEditorContianer,"hidden")):(this._isHyperLink=!1,g.add(this.urlEditorContianer,"hidden"));h.set(this.iconEditor,"src",this.iconPath);h.set(this.iconEditor,"alt",a.get("pointType"));this.displayNameEditor.set("value",this.displayName);this.onUpdateGallery()},setIconFiles:function(a){this.iconFiles=a},setupOnClicks:function(){this.own(c(this.okButton,
"click",k.hitch(this,this._saveChanges)));this.own(c(this.cancelButton,"click",k.hitch(this,this._onFinished)));this.own(c(this.galleryButton,"click",k.hitch(this,this._onOpenGallery)))},urlValidator:function(a,b,c){return this._isHyperLink?this.navTreeItem.validateUrl(b):!0},_createUploader:function(){this._iconFileUploader=new dojox.form.Uploader({label:this.webviewStrings.uploadIcon.toUpperCase(),multiple:!1,url:"uploader/NavIcon",baseClass:"webviewButton uploader",iconClass:"webviewIcon uploadIcon",
onChange:k.hitch(this,this._uploadCustomFile)},this.uploaderContainer);this._iconFileUploader.startup();this.own(c(this._iconFileUploader,"complete",k.hitch(this,this._uploadComplete)))},_getIconPath:function(){null===this.customIconObj.id||-1===this.customIconObj.id||-1<x.DEFAULT_NAV_TREE_ICONS.indexOf(this.customIconObj.filename)?this.iconPath=this.RELATIVE_PATH_TO_DEFAULT_ICONS+this.iconSrc:this.iconPath=rc.rootPath+"Uploads/NavTreeIcons/"+this.iconSrc;return this.iconPath},_onFinished:function(){this._isHyperLink&&
this.navTreeItem.set("urlPath",a.encode(this.navTreeItem.get("urlPath")));this.onFinished()},_onOpenGallery:function(){this.onOpenGallery(this.navTreeItem)},_saveChanges:function(){var b=this._validate();b.valid?(this.navTreeItem.set("customIcon",this.customIconObj),this.navTreeItem.set("displayName",a.encode(this.displayNameEditor.get("value"))),this._isHyperLink&&this.navTreeItem.set("urlPath",a.encode(this.urlEditor.get("value"))),this.onFinished()):q.publish("sticky",{type:"error",message:b.msg})},
_validate:function(){var a={valid:!0,msg:"Success"};this._isHyperLink&&!this.urlEditor.isValid()&&(a.valid=!1,a.msg=this.urlEditor.invalidMessage);return a},_uploadComplete:function(a){if(200===a.errStatus||500===a.errStatus){var b=a.guid;if(d("trident"))var c=b.lastIndexOf("\\")+1,b=b.substring(c);a={filename:b,id:a.iconId};this.navTreeItem.set("customIcon",a);this.customIconObj=a;this.iconSrc=b;this._getIconPath();h.set(this.iconEditor,"src",this.iconPath)}else console.error(this.declaredClass+
" - _uploadComplete():Could not upload file",a)},_uploadCustomFile:function(a){var c=this._iconFileUploader,d={siteId:this.siteId},f=!0,g=a[0].name,h=g.lastIndexOf("\\")+1,g=g.substring(h),h=g.lastIndexOf("."),h=g.substring(h).toLowerCase();n.widget.clear();c.convertBytes(a[0].size).kb>=this.MAX_FILE_UPLOAD_SIZE_IN_KB&&(f=!1,q.publish("sticky",{type:"error",message:b.substitute(this.errorStrings.fileExceedsX,[this.MAX_FILE_UPLOAD_SIZE_IN_KB+"KB"])}));if(this._isDuplicateFilename(g)){f=!1;this._createWarningDialog();
var l=this._overwriteWarningDialog.on("close",k.hitch(this,function(a){switch(a){case z.returnValues.oneOrYes:c.upload(d);break;case z.returnValues.none:break;default:console.error(this.declaredClass+" - _uploadCustomFile(): Unknown choice",a)}l.remove()}));this.own(l);this._overwriteWarningDialog.open()}if(-1===this.acceptedFileExtensions.indexOf(h)){var f=!1,r=this.errorStrings.unsupportedFileType+"\x3cul\x3e";p.forEach(this.acceptedFileExtensions,function(a){r+="\x3cli\x3e"+a+"\x3c/li\x3e"});r+=
"\x3c/ul\x3e";q.publish("sticky",{type:"error",message:r})}f&&c.upload(d)},_createWarningDialog:function(){null===this._overwriteWarningDialog&&(this._overwriteWarningDialog=new w({title:this.webviewStrings.overwriteDialogTitle,type:z.types.binary,text:this.webviewStrings.overwriteDialogBody}))},_isDuplicateFilename:function(a){for(var b=!1,c=0;c<this.iconFiles.length;c++)if(this.iconFiles[c].originalFilename===a){b=!0;break}return b}})})},"webview/admin/widget/IconGallery":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/form/Button dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!webview/nls/all dojo/query dojo/text!./templates/IconGallery.html ../../util/globalConstants".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return h("webview/admin/widget/IconGallery",[m,p,f],{templateString:b,iconFiles:null,itemCount:0,selectedFile:null,RELATIVE_PATH_TO_DEFAULT_ICONS:"../.."+dojoConfig.baseUrl+"/webview/themes/rcblack/images/DefaultNavTreeIcons/",constructor:function(){this.inherited(arguments);this.webviewStrings=r},postCreate:function(){this.inherited(arguments);null===this.iconFiles&&(this.iconFiles=[]);this.buildIconTable();this.buildButtons()},buildIconTable:function(){for(var b=
null,c="",a=null,d=0;d<this.itemCount;d++){a=this.iconFiles[d];0===d%5&&(b=l.create("span",{"class":"iconGalleryRow"},this.iconTable,"last"));var f=l.create("span",{"class":"iconGalleryCell","data-filename":a.encodedFileName},b,"last");-1!==t.DEFAULT_NAV_TREE_ICONS.indexOf(a.encodedFileName)||null===a.fileId?(c=this.RELATIVE_PATH_TO_DEFAULT_ICONS+a.encodedFileName,this.iconFiles[d].id=-1):(c=rc.rootPath+"Uploads/NavTreeIcons/"+a.encodedFileName,this.iconFiles[d].id=this.iconFiles[d].fileId);l.create("img",
{src:c,"class":"navTreeIcon",onclick:g.hitch(this,this.changeSelectedIcon,{filename:a.encodedFileName,id:this.iconFiles[d].id})},f,"first")}},buildButtons:function(){this.okayButton=new k({baseClass:"webviewButton",iconClass:"rcIcon okIcon",disabled:!0,label:this.webviewStrings.rcbOkay.toUpperCase(),onClick:g.hitch(this,this._onIconSaved)});l.place(this.okayButton.domNode,this.buttonContainer,"last");this.deleteButton=new k({baseClass:"webviewButton",iconClass:"webviewIcon svg-delete-icon",disabled:!0,
label:this.webviewStrings.rcbDelete.toUpperCase(),onClick:g.hitch(this,this._onIconDeleted)});l.place(this.deleteButton.domNode,this.buttonContainer,"last")},changeSelectedIcon:function(b){var f=null;null!==this.selectedFile&&(f=c("span[data-filename\x3d'"+this.selectedFile.filename+"']",this.iconTable)[0],d.remove(f,"selected"));this.selectedFile=b;f=c("span[data-filename\x3d'"+this.selectedFile.filename+"']",this.iconTable)[0];d.add(f,"selected");this.okayButton.set("disabled",!1);-1===t.DEFAULT_NAV_TREE_ICONS.indexOf(this.selectedFile.filename)?
this.deleteButton.set("disabled",!1):this.deleteButton.set("disabled",!0)},updateIcons:function(b,c){l.empty(this.iconTable);this.iconFiles=b;this.itemCount=c;this.selectedFile=null;this.deleteButton.set("disabled",!0);this.okayButton.set("disabled",!0);this.buildIconTable()},_onIconSaved:function(){if(null!==this.selectedFile&&!this.okayButton.get("disabled"))this.onIconSaved(this.selectedFile)},onIconSaved:function(b){this.emit("iconSaved",b);return b},_onIconDeleted:function(){if(null!==this.selectedFile&&
!this.deleteButton.get("disabled"))this.onIconDeleted(this.selectedFile)},onIconDeleted:function(b){this.emit("iconDeleted",b);return b}})})},"webview/features/navigationTrees/treeBuilding/_WithToolbarMixin":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/topic webview/admin/widget/KeywordSelector webview/admin/widget/KeywordSelectorDataSource ./navTreeDndSource webview/widget/WebviewContentPane".split(" "),function(p,m,k,h,g,d,l,f){return h("webview/features/navigationTrees/treeBuilding/_WithToolbarMixin",
[],{onAddKeywordClicked:function(h){this._closeSearchResults();if(!this._keywordSelector){var c=new l({showFolders:!0,siteId:h});this._keywordSelector=new d({siteId:h,dndSource:f,keywordSelectorDataSource:c})}g.publish("showKeywordSelector",this._keywordSelector);this._keywordSelector.show()},onAddObjectClicked:function(){this._closeKeywordSelector();g.publish("filterRequestedSite",this.siteId)},_closeKeywordSelector:function(){this._keywordSelector&&this._keywordSelector.closeKeywordSelector()},
_closeSearchResults:function(){g.publish("closeResults")},_pointsNodeCreator:function(d,c){var b=null,b="avatar"===c?(new NavTreeAvatar({sysId:d.sysId,deviceName:d.deviceName,pointName:d.pointName,pointMnemonic:d.pointMnemonic,pointType:d.pointType,childItems:d.childItems,systemName:d.sysName,siteUrlPath:d.urlPath?d.urlPath:this.urlPath,displayName:d.displayName?d.displayName:d.pointName})).domNode:domConstruct.toDom(string.substitute(pointsItemTemplate,{sysId:d.sysId,sysName:d.sysName?d.sysName:
"",deviceName:d.deviceName,pointName:d.pointName,pointMnemonic:d.pointMnemonic,siteUrlPath:d.urlPath}));return{node:b,data:d,type:["resultNode"]}}})})},"webview/admin/widget/KeywordSelector":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style dojo/fx dojo/fx/easing dojo/i18n!../../nls/all dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/text!./templates/KeywordSelector.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y){return d("webview/admin/widget/KeywordSelector",[m,p,k],{baseClass:"",templateString:y,webviewStrings:n,isOpen:!1,_resizeTimeout:null,buildRendering:function(){this.inherited(arguments);this.own(v(this.closeButton,"click",f.hitch(this,this.closeKeywordSelector)))},closeKeywordSelector:function(){this._close()},onBeforeReShow:function(){},onClose:function(){},performInitialDisplay:function(a){this._cleanClonedNode(a);this.displayArgs={clonedSearchedTreeItem:a,
keywordsTree:this._buildResultsTree()};t.place(a,this.searchedTreeNodeContainer,"only");t.place(this.displayArgs.keywordsTree,this.keywordsContainer,"only");return this._animateShow()},resize:function(a){a&&null!==this._resizeTimeout&&clearTimeout(this._resizeTimeout)},show:function(){this.onBeforeReShow();this._updateKeywordSelector();this._animateShow()},_animateClose:function(){var a=new c;this.own(a);var d=u.combine([this._getOnCloseMoveAnimation(this.displayArgs.clonedSearchedTreeItem,8,-1E3),
this._getOnCloseMoveAnimation(this.displayArgs.keywordsTree,8,-1E3)]).play();r.after(d,"onEnd",f.hitch(this,function(){b.add(this.domNode,"hidden");this.isOpen=!1;a.resolve()}));return a.promise},_animateShow:function(){var a=new c;this.own(a);this.isOpen=!0;b.remove(this.domNode,"hidden");var d=u.combine([this._getOnShowMoveAnimation(this.displayArgs.clonedSearchedTreeItem,-1E3,8),this._getOnShowMoveAnimation(this.displayArgs.keywordsTree,-1E3,8)]).play();r.after(d,"onEnd",f.hitch(this,function(){a.resolve()}));
return a.promise},_buildResultsTree:function(){this._store=new z(new w({data:[{id:"root"}],getChildren:f.hitch(this,this._getTreeItemChildren)}));this._model=new g({store:this._store,query:{id:"root"},mayHaveChildren:function(a){return a.mayHaveChildren}});this._tree=new h({showRoot:!1,model:this._model,openOnClick:!0,dndController:this.dndSource,getIconClass:function(a){return this.dndController.itemIsDraggable(a)?"webviewIcon dragHandle":"hidden"},getRowClass:function(){return"dnd-point-item"}});
this._updateKeywordSelector();this._tree.startup();return this._tree.domNode},_cleanClonedNode:function(a){x(".dijitTreeNode",a).forEach(t.destroy);x(".treeMagnifingGlass",a).forEach(t.destroy);x(".dijitTreeExpando",a).forEach(t.destroy);q.set(a.firstElementChild,"paddingLeft","0px")},_close:function(){this._animateClose().then(f.hitch(this,this.onClose))},_getOnCloseMoveAnimation:function(b,c,d,f){return l.animateProperty({node:b,properties:{marginLeft:{start:c,end:d,unit:"px"}},easing:a.expoin,
duration:f||500})},_getOnShowMoveAnimation:function(b,c,d,f){return l.animateProperty({node:b,properties:{marginLeft:{start:c,end:d,unit:"px"}},easing:a.expoOut,duration:f||500})},_getTreeItemChildren:function(a){return this._store.query({parent:a.id})},_updateKeywordSelector:function(){this.keywordSelectorDataSource.fetchData().then(f.hitch(this,function(a){this._updateTree(a)}))},_updateTree:function(a){this._tree.set("paths",[]);this._store.query().forEach(f.hitch(this,function(a){this._store.remove(a.id)}));
a.forEach(f.hitch(this,function(a){var b="EnterpriseSchedules"===a.id||"NavigationGroups"===a.id;this._store.add(f.mixin(f.clone(a),{id:a.id,parent:a.parent,name:a.label,mayHaveChildren:b,isKeywordSelectorItem:!0}))}))},destroy:function(){null!==this._resizeTimeout&&clearTimeout(this._resizeTimeout)}})})},"webview/admin/widget/KeywordSelectorDataSource":function(){define("dijit/_Widget dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/promise/all dojox/html/entities".split(" "),
function(p,m,k,h,g,d,l,f,r){return m("wwebview/admin/widget/KeywordSelectorDataSource",[p],{webviewStrings:l,afterHoursStrings:d,rcStrings:g,showFolders:!1,showHyperlinks:!0,siteUrlPath:"",_siteWideNodes:null,constructor:function(){for(var c=0;c<rc.session._attributes.SiteMapArray.length;c++){var b=rc.session._attributes.SiteMapArray[c];if(b.id===this.siteId){this.siteUrlPath=b.sitePath;break}}},fetchData:function(){var c=[];this.dataCatch={enterpriseSchedules:[],navigationGroups:[]};var b=new h,
d=new h;c.push(b);c.push(d);this._getEnterpriseScheduleKeywords().always(k.hitch(this,function(){b.resolve()}));this._getNavigationGroupKeywords().always(k.hitch(this,function(){d.resolve()}));var g=new h;f(c).then(k.hitch(this,function(){this._siteWideNodes=[];this._siteWideNodes.push(this._getAfterHoursReportKeyword());this._siteWideNodes.push(this._getAHACRequestsKeyword());this._siteWideNodes.push(this._getAlarmsKeyword());this._processGetEnterpriseSchedulesResult();this.showHyperlinks&&this._siteWideNodes.push(this._getHyperlinkKeyword());
this.showFolders&&this._siteWideNodes.push(this._getFolderKeyword());this._processGetNavigationGroupsResult();g.resolve(this._siteWideNodes)}));return g},_getAfterHoursReportKeyword:function(){return{id:"AfterHoursReport",parent:"root",label:this.afterHoursStrings.afterHoursSummary,displayText:this.afterHoursStrings.afterHoursSummary,keyword:"AfterHoursReport"}},_getAHACRequestsKeyword:function(){return{id:"AHACRequests",parent:"root",label:this.webviewStrings.afterHoursRequests,displayText:this.afterHoursStrings.afterHoursRequests,
keyword:"AHACRequests"}},_getAlarmsKeyword:function(){return{id:"Alarm",parent:"root",label:this.rcStrings.alarm,displayText:this.rcStrings.alarm,keyword:"Alarm"}},_getEnterpriseScheduleKeywords:function(){return rc.xhr.request({path:"schedules/",type:"rest",method:"GET",siteId:this.siteId}).then(k.hitch(this,function(c){this.dataCatch.enterpriseSchedules=200===c.data.errStatus?c.data.dataArray:[]}),k.hitch(this,function(c){console.error(this.declaredClass+" - getSiteWideNodes(): Error getting Enterprise Schedules",
c)}))},_getFolderKeyword:function(){return{id:"Folder",parent:"root",label:this.webviewStrings.folder,displayText:this.webviewStrings.folder}},_getHyperlinkKeyword:function(){return{id:"Hyperlink",parent:"root",label:this.webviewStrings.hyperlink,displayText:this.webviewStrings.hyperlink,url:"http://"}},_getNavigationGroupKeywords:function(){return rc.xhr.request({path:"navGroups/",type:"rest",method:"GET",siteId:this.siteId}).then(k.hitch(this,function(c){this.dataCatch.navigationGroups=200===c.data.errStatus?
c.data.dataArray:[]}),k.hitch(this,function(c){console.error(this.declaredClass+" - getSiteWideNodes(): Error getting Navigation Groups",c)}))},_processGetEnterpriseSchedulesResult:function(){var c=this.dataCatch.enterpriseSchedules||[];if(0<c.length){this._siteWideNodes.push({id:"EnterpriseSchedules",parent:"root",pointType:null,label:this.webviewStrings.wvSchedules,widgetValue:null});for(var b=0;b<c.length;b++){var d=r.decode(c[b].name);this._siteWideNodes.push({id:"EnterpriseSchedule"+c[b].id,
parent:"EnterpriseSchedules",label:d,displayText:d,mnemonic:"EnterpriseSchedule"+c[b].id,sitePath:this.siteUrlPath})}}},_processGetNavigationGroupsResult:function(){var c=this.dataCatch.navigationGroups||[];if(0<c.length){this._siteWideNodes.push({id:"NavigationGroups",parent:"root",pointType:null,label:this.webviewStrings.navGroups,widgetValue:null});for(var b=0;b<c.length;b++){var d=r.decode(c[b].name);this._siteWideNodes.push({id:"NavigationGroup"+c[b].id,parent:"NavigationGroups",label:d,displayText:d,
mnemonic:"NavigationGroup"+c[b].id,sitePath:this.siteUrlPath})}}}})})},"webview/features/navigationTrees/treeBuilding/navTreeDndSource":function(){define(["dojo/_base/declare","webview/admin/pointReportDndSource"],function(p,m){return p("webview/features/navigationTrees/treeBuilding/navTreeDndSource",m,{getItem:function(k){k=this.selection[k].item;var h;k.isKeywordSelectorItem?h="navigationTreeKeyword":(h="navigationTreeSystemObject",k.isKeywordSelectorItem=!1);return{data:k,type:[h]}},getObject:function(k){k=
this.getItem(k.id).data;this.removeTreeNode(k);return k}})})},"webview/admin/pointReportDndSource":function(){define(["dijit/tree/dndSource","dojo/_base/array","dojo/_base/declare"],function(p,m,k){return k("webview/admin/pointReportDndSource",p,{copyOnly:!0,_operationInProgressCode:510,checkAcceptance:function(){return!1},getItem:function(h){return{data:this.selection[h],type:["pointsReportPoint"]}},getObject:function(h){h=this.getItem(h.id);var g=h.data.item;this.removeTreeNode(h.data);return{autoManual:null,
changeMask:0,changed:!0,error:{code:this._operationInProgressCode},id:null,mne:g.pointMnemonic,name:g.pointName,deviceName:g.deviceName,displayName:"",needsUpdate:!0,priority:null,supportsTimedOverride:null,timedOverride:null,units:[],value:null,unsaved:!0,bacnet:null===/(?:\d+(?:[a|b]\d+)?)?(?:out|in|var|con|ws|as|tbl|rt|tl|ay|vgrp|ss)(?:\d+)(?::\d+)?(?= |\[|$)/i.exec(g.pointMnemonic)}},itemIsDraggable:function(h){return!h.mayHaveChildren},onDndDrop:function(){this.onDndCancel()},setSelection:function(h){h=
m.filter(h,function(g){return this.itemIsDraggable(g.item)},this);this.inherited(arguments)}})})},"dijit/tree/dndSource":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/common dojo/dom-class dojo/dom-geometry dojo/_base/lang dojo/mouse dojo/on dojo/touch dojo/topic dojo/dnd/Manager ./_dndSelector".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t){return m("dijit.tree.dndSource",t,{isSource:!0,accept:["text","treeNode"],copyOnly:!1,dragThreshold:5,betweenThreshold:0,generateText:!0,constructor:function(b,
f){f||(f={});d.mixin(this,f);var a=f.accept instanceof Array?f.accept:["text","treeNode"];this.accept=null;if(a.length){this.accept={};for(var g=0;g<a.length;++g)this.accept[a[g]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.dropPosition="";this._lastY=this._lastX=0;this.sourceState="";this.isSource&&h.add(this.node,"dojoDndSource");this.targetState="";this.accept&&h.add(this.node,"dojoDndTarget");this.topics=[c.subscribe("/dnd/source/over",d.hitch(this,"onDndSourceOver")),
c.subscribe("/dnd/start",d.hitch(this,"onDndStart")),c.subscribe("/dnd/drop",d.hitch(this,"onDndDrop")),c.subscribe("/dnd/cancel",d.hitch(this,"onDndCancel"))]},checkAcceptance:function(){return!0},copyState:function(b){return this.copyOnly||b},destroy:function(){this.inherited(arguments);for(var b;b=this.topics.pop();)b.remove();this.targetAnchor=null},_onDragMouse:function(c,d){var a=b.manager(),f=this.targetAnchor,h=this.current,l=this.dropPosition,q="Over";h&&0<this.betweenThreshold&&(this.targetBox&&
f==h||(this.targetBox=g.position(h.rowNode,!0)),c.pageY-this.targetBox.y<=this.betweenThreshold?q="Before":c.pageY-this.targetBox.y>=this.targetBox.h-this.betweenThreshold&&(q="After"));if(d||h!=f||q!=l){f&&this._removeItemClass(f.rowNode,l);h&&this._addItemClass(h.rowNode,q);if(h)if(h==this.tree.rootNode&&"Over"!=q)a.canDrop(!1);else{l=f=!1;if(a.source==this){var l="Over"===q,k;for(k in this.selection){var r=this.selection[k];if(r.item===h.item){f=!0;break}r.getParent().id!==h.id&&(l=!1)}}a.canDrop(!f&&
!l&&!this._isParentChildDrop(a.source,h.rowNode)&&this.checkItemAcceptance(h.rowNode,a.source,q.toLowerCase()))}else a.canDrop(!1);this.targetAnchor=h;this.dropPosition=q}},onMouseMove:function(c){if(!this.isDragging||"Disabled"!=this.targetState){this.inherited(arguments);var d=b.manager();if(this.isDragging)this._onDragMouse(c);else if(this.mouseDown&&this.isSource&&(Math.abs(c.pageX-this._lastX)>=this.dragThreshold||Math.abs(c.pageY-this._lastY)>=this.dragThreshold)){var a=this.getSelectedTreeNodes();
if(a.length){if(1<a.length){var f=this.selection,g=0,h=[],l,q;a:for(;l=a[g++];){for(q=l.getParent();q&&q!==this.tree;q=q.getParent())if(f[q.id])continue a;h.push(l)}a=h}a=p.map(a,function(a){return a.domNode});d.startDrag(this,a,this.copyState(k.getCopyKeyState(c)));this._onDragMouse(c,!0)}}}},onMouseDown:function(b){if("touchstart"==b.type||l.isLeft(b))this.mouseDown=!0,this.mouseButton=b.button,this._lastX=b.pageX,this._lastY=b.pageY;this.inherited(arguments)},onMouseUp:function(b){this.mouseDown&&
(this.mouseDown=!1,this.inherited(arguments))},onMouseOut:function(){this.inherited(arguments);this._unmarkTargetAnchor()},checkItemAcceptance:function(){return!0},onDndSourceOver:function(c){this!=c?(this.mouseDown=!1,this._unmarkTargetAnchor()):this.isDragging&&b.manager().canDrop(!1)},onDndStart:function(c,d,a){this.isSource&&this._changeState("Source",this==c?a?"Copied":"Moved":"");d=this.checkAcceptance(c,d);this._changeState("Target",d?"":"Disabled");this==c&&b.manager().overSource(this);this.isDragging=
!0},itemCreator:function(b){return p.map(b,function(b){return{id:b.id,name:b.textContent||b.innerText||""}})},onDndDrop:function(b,c,a){if("Over"==this.containerState){var d=this.tree,f=d.model,g=this.targetAnchor,h=!1;this.isDragging=!1;var l,q,k;l=g&&g.item||d.item;"Before"==this.dropPosition||"After"==this.dropPosition?(l=g.getParent()&&g.getParent().item||d.item,q=g.getIndexInParent(),"After"==this.dropPosition?(q=g.getIndexInParent()+1,k=g.getNextSibling()&&g.getNextSibling().item):k=g.item):
(l=g&&g.item||d.item,h=!0);var r;p.forEach(c,function(d,h){var n=b.getItem(d.id);if(-1!=p.indexOf(n.type,"treeNode"))var m=n.data,u=m.item,t=m.getParent().item;b==this?("number"==typeof q&&l==t&&m.getIndexInParent()<q&&--q,f.pasteItem(u,t,l,a,q,k)):f.isItem(u)?f.pasteItem(u,t,l,a,q,k):(r||(r=this.itemCreator(c,g.rowNode,b)),f.newItem(r[h],l,q,k))},this);h&&this.tree._expandNode(g)}this.onDndCancel()},onDndCancel:function(){this._unmarkTargetAnchor();this.mouseDown=this.isDragging=!1;delete this.mouseButton;
this._changeState("Source","");this._changeState("Target","")},onOverEvent:function(){this.inherited(arguments);b.manager().overSource(this)},onOutEvent:function(){this._unmarkTargetAnchor();var c=b.manager();this.isDragging&&c.canDrop(!1);c.outSource(this);this.inherited(arguments)},_isParentChildDrop:function(b,c){if(!b.tree||b.tree!=this.tree)return!1;for(var a=b.tree.domNode,d=b.selection,f=c.parentNode;f!=a&&!d[f.id];)f=f.parentNode;return f.id&&d[f.id]},_unmarkTargetAnchor:function(){this.targetAnchor&&
(this._removeItemClass(this.targetAnchor.rowNode,this.dropPosition),this.dropPosition=this.targetBox=this.targetAnchor=null)},_markDndStatus:function(b){this._changeState("Source",b?"Copied":"Moved")}})})},"webview/features/navigationTrees/treeBuilding/navTreeAvatar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dnd/Avatar dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/query dojo/hccss".split(" "),function(p,m,k,h,g,d,l,f,r){return p("webview/features/navigationTrees/treeBuilding/navTreeAvatar",
k,{maximumAvatarItems:10,construct:function(){var c=this._getAvatarWidth(),c=g.create("div",{"class":"dojoDndAvatar tree-builder-avatar",style:{position:"fixed",zIndex:"1999",marginLeft:"0",width:c+"px"}}),b=this.manager.source,d;f("highcontrast")&&g.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},d);for(var q=null,k=this.manager.nodes.length,a=[],n=0,m=0,p=!1,w=0;w<k;w++){var z=this.manager.nodes[w],z=b.getItem(z.id).data;a.push(z.treeItemId);null!==z.parent&&a.includes(z.parent)||
(m++,n>=this.maximumAvatarItems?p=!0:(n++,d=z.hasOwnProperty("isKeywordSelectorItem")?z.isKeywordSelectorItem?this.manager.treeBuilder.keywordAvatarCreator(z):this.manager.treeBuilder.systemObjectAvatarCreator(z):this.manager.treeBuilder.treeItemCreator(z),z=d.node||d.domNode,this.manager.OFFSET_X=-Number(l.get(z,"marginLeft")),z.id="",d=g.create("span",{"class":"dojoDndAvatarItem tree-builder-avatar-item"},c),d.appendChild(z),q=z))}this.node=c;p&&(d.appendChild(q),c=m-this.maximumAvatarItems,h.add(q,
"lastAvatarNode"),"undefined"!==typeof q&&(q.innerHTML="\x3cdiv\x3e+ "+c+(1===c?" other":" others")+"\x3c/div\x3e"),g.destroy(r(".navIcon",q)[0]))},_getAvatarWidth:function(){var c=r(".navigation-tree-renderer")[0];return d.getMarginBox(c,l.getComputedStyle(c)).w}})})},"webview/admin/schedules/Schedules":function(){define("dijit/form/Select dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/afterHoursReport dojo/on dojo/text!./templates/schedules.html dojo/topic dojox/html/entities rc/bacnet/enums ../_base ../../xhrEnhanced dijit/form/CheckBox dijit/form/FilteringSelect ./DataTypeColourSelector".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return m("webview/admin/schedules/Schedules",[b],{auditLogObjectName:"EnterpriseSchedule",ahacStrings:g,dataType:null,individualPath:"schedule",nameOfIndividual:"schedule",templateString:l,_path:"schedules/",constructor:function(){k.mixin(this.ErrorMessageMap,{501:this.errorStrings.duplicateSchedule,502:this.errorStrings.scheduleDoesNotExist})},postCreate:function(){this.inherited(arguments);this._buildDataTypeDD();this._setListeners()},fetch:function(){if(!this._beginUpdate())return null;
var b={type:"rest",method:"GET",preventCache:!0,path:this._path};k.mixin(b,this._buildFetchParams());b=rc.xhr.request(b);b.then(k.hitch(this,function(b){b.data&&200===b.data.errStatus?(this.render(b),this.onInitSuccess()):b.data&&502===b.data.errStatus?this._onInitError(this._getErrorMessage(b.data.errStatus)):(b.data?this._displayErrorMessage(b.data):console.error(this.declaredClass+" - fetch(): Data returned is null",b),this.onInitSuccess());return b}),k.hitch(this,function(b){this._onInitError(b);
return b}));b.always(k.hitch(this,this._endUpdate));return b},showColourSelector:function(b){this.colourSelector.setType(b)},validateAdd:function(){var b=!0,d="",a=this.dataType.get("value");(a===c.primitiveTypes.REAL||a===c.primitiveTypes.UNSIGNED_INTEGER)&&1>this.colourSelector.getData().length&&(b=!1,d=this.errorStrings.colorsRequired);""===this.nameTB.get("value").trim()&&(b=!1,d=this.errorStrings.emptyESName);if(!b)return f.publish("sticky",{type:"error",message:d}),!1;this._dirty=!1;return!0},
_buildAddParams:function(){var b=this.dataType.get("value"),d=this.colourSelector.getData(),a="none"===this.currencySelect.get("value")||b!==c.primitiveTypes.ENUMERATED?null:this.currencySelect.get("value"),a={name:r.encode(this.nameTB.get("value")),dataType:b,siteId:this.site,currency:a,minuteIncrement:Number(this.minuteIncrement.get("value")),approvalRequired:this.approvalRequired.get("checked"),defaultColours:this.defaultColourSelector.getData(),binaryColours:null,multiStateColours:null,analogColours:null};
switch(b){case c.primitiveTypes.ENUMERATED:a.binaryColours=JSON.stringify(d);break;case c.primitiveTypes.REAL:a.analogColours=JSON.stringify(d);break;case c.primitiveTypes.UNSIGNED_INTEGER:a.multiStateColours=JSON.stringify(d);break;default:console.error("Schedules.js - _buildAddParams(): Invalid Data Type",b)}return a},_buildDataTypeDD:function(){this.dataType=new p({baseClass:"rcSelectBox basic-select",options:[{value:c.primitiveTypes.ENUMERATED,label:this.rcStrings.binary},{value:c.primitiveTypes.REAL,
label:this.rcStrings.analog},{value:c.primitiveTypes.UNSIGNED_INTEGER,label:this.webviewStrings.multistate}],value:c.primitiveTypes.ENUMERATED,name:"dataType"},this.dataTypeContainer);d(this.dataType,"change",k.hitch(this,function(b){this._toggleRates(b);this.showColourSelector(b)}))},_buildDeleteParams:function(b){return{siteId:this.site,ids:b}},_buildFetchParams:function(){return{siteId:this.site}},_onAddItem:function(){this.validateAdd()&&t.post(this._path,{handleAs:"json",data:this._buildAddParams()}).then(k.hitch(this,
this._goToAdd),k.hitch(this,this._displayErrorMessage,this.UnexpectedCode))},_onPreview:function(){window.location.hash="#schedule?site\x3d"+this.site+("\x26schedule\x3d"+this.selectedItem)+"\x26view\x3duserView"},_setLabels:function(){this._multiSelect.setLabel(this.webviewStrings.wvSchedules);this._multiSelect.setHint(this.webviewStrings.msHint);this.deleteButton.set("label",this.webviewStrings.rcbDelete.toUpperCase());this.addButton.set("label",this.webviewStrings.addSchedule.toUpperCase());this.editButton.set("label",
this.webviewStrings.rcbEdit.toUpperCase());this.previewButton.set("label",this.webviewStrings.preview.toUpperCase())},_setListeners:function(){this.own(d(this.defaultColourSelector,"change",k.hitch(this,function(){this._dirty=!0})),d(this.colourSelector,"change",k.hitch(this,function(){this._dirty=!0})),d(this.currencySelect,"change",k.hitch(this,function(){this._dirty=!0})),d(this.approvalRequired,"change",k.hitch(this,function(){this._dirty=!0})),d(this.minuteIncrement,"change",k.hitch(this,function(){this._dirty=
!0})),d(this.nameTB,"change",k.hitch(this,function(){""!=this.nameTB.textbox.value&&(this._dirty=!0)})))},_toggleRates:function(b){h.toggle(this.currencySelection,"hidden",b!==c.primitiveTypes.ENUMERATED)}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w){function z(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(f.hitch(this,a,b))}}var y=m("dijit.form._SelectMenu",q,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(r(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;
f.isArray(b)&&(b=b[b.length-1]);b&&p.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)}});g=m("dijit.form.Select"+(c("dojo-bidi")?"_NoBidi":""),[b,t,v],{baseClass:"dijitSelect dijitValidationTextBox",templateString:w,_buttonInputDisabled:c("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=a?a:0].value)}this.dropDown=new y({id:this.id+"_menu",parentWidget:this});h.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(b){if(b.value||b.label){var c=f.hitch(this,"_setValueAttr",b);b=new u({option:b,label:("text"===this.labelType?(b.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):b.label)||this.emptyLabel,
onClick:c,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:b.disabled||!1});b.focusNode.setAttribute("role","option");return b}return new a({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(A){}},focusChild:function(a){a&&this.set("value",
a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=x.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{p.forEach(this._getChildren(),function(a){a.destroyRecursive()});
var b=new u({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);k.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",
_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline '+
this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?n.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):n.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||
"")},reset:function(){this.inherited(arguments);n.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=d.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(r(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[l.LEFT_ARROW];delete a[l.RIGHT_ARROW]},_setStyleAttr:function(a){this.inherited(arguments);
h.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);n.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){n.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
c("dojo-bidi")&&(g=m("dijit.form.Select",g,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));g._Menu=y;g.prototype._onContainerKeydown=z("_onContainerKeydown");g.prototype._onContainerKeypress=z("_onContainerKeypress");return g})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return g("dijit.form._FormSelectWidget",q,{multiple:!1,options:null,store:null,_setStoreAttr:function(b){this._created&&this._deprecatedSetStore(b)},query:null,_setQueryAttr:function(b){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:b})},queryOptions:null,_setQueryOptionsAttr:function(b){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:b})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(b){var a=this.options||[];if(null==b)return a;if(r.isArrayLike(b))return p.map(b,"return this.getOptions(item);",this);r.isString(b)&&(b={value:b});r.isObject(b)&&(p.some(a,function(a,c){for(var d in b)if(!(d in a)||a[d]!=b[d])return!1;b=c;return!0})||(b=-1));return 0<=b&&b<a.length?a[b]:null},addOption:function(b){p.forEach(r.isArrayLike(b)?b:[b],function(a){a&&r.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(b){b=this.getOptions(r.isArrayLike(b)?
b:[b]);p.forEach(b,function(a){a&&(this.options=p.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(b){p.forEach(r.isArrayLike(b)?b:[b],function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(b,a,c){f.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(b,a,c)},_deprecatedSetStore:function(c,a,d){var f=this.store;d=d||{};if(f!==c){for(var g;g=this._notifyConnections.pop();)g.remove();c.get||(r.mixin(c,{_oldAPI:!0,get:function(a){var b=new m;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new m(function(){d.abort&&d.abort()});c.total=new m;var d=this.fetch(r.mixin({query:a,onBegin:function(a){c.total.resolve(a)},
onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return new t(c)}}),c.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[k.after(c,"onNew",r.hitch(this,"_onNewItem"),!0),k.after(c,"onDelete",r.hitch(this,"_onDeleteItem"),!0),k.after(c,"onSet",r.hitch(this,"_onSetItem"),!0)]));this._set("store",c)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);d.query&&this._set("query",d.query);d.queryOptions&&this._set("queryOptions",d.queryOptions);c&&c.query&&(this._loadingStore=!0,this.onLoadDeferred=new m,this._queryRes=c.query(this.query,this.queryOptions),b(this._queryRes,r.hitch(this,function(b){if(this.sortByLabel&&!d.sort&&b.length)if(c.getValue)b.sort(h.createSortFunction([{attribute:c.getLabelAttributes(b[0])[0]}],c));else{var f=this.labelAttr;b.sort(function(a,b){return a[f]>b[f]?1:b[f]>
a[f]?-1:0})}d.onFetch&&(b=d.onFetch.call(this,b,d));p.forEach(b,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(r.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:a);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(b):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),r.hitch(this,function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)})));return f},_setValueAttr:function(b,a){this._onChangeActive||(a=null);if(this._loadingStore)this._pendingValue=b;else if(null!=b){b=r.isArrayLike(b)?p.map(b,function(a){return r.isObject(a)?a:{value:a}}):r.isObject(b)?[b]:[{value:b}];b=p.filter(this.getOptions(b),function(a){return a&&a.value});var c=this.getOptions()||[];this.multiple||b[0]&&b[0].value||!c.length||(b[0]=
c[0]);p.forEach(c,function(a){a.selected=p.some(b,function(b){return b.value===a.value})});c=p.map(b,function(a){return a.value});if("undefined"!=typeof c&&"undefined"!=typeof c[0]){var d=p.map(b,function(a){return a.label});this._setDisplay(this.multiple?d:d[0]);this.inherited(arguments,[this.multiple?c:c[0],a]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var b=p.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?
b:b[0]},_setDisplayedValueAttr:function(b){this.set("value",this.getOptions("string"==typeof b?{label:b}:b))},_loadChildren:function(){this._loadingStore||(p.forEach(this._getChildren(),function(b){b.destroyRecursive()}),p.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var b=[].concat(this.value);if(b&&b[0]){var a=this;p.forEach(this._getChildren(),function(c){var d=p.some(b,function(a){return c.option&&
a===c.option.value});d&&!a.multiple&&(a.focusedChild=c);l.toggle(c.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d);c.domNode.setAttribute("aria-selected",d?"true":"false")},this)}},_getValueFromOpts:function(){var b=this.getOptions()||[];if(!this.multiple&&b.length){var a=p.filter(b,function(a){return a.selected})[0];if(a&&a.value)return a.value;b[0].selected=!0;return b[0].value}return this.multiple?p.map(p.filter(b,function(a){return a.selected}),function(a){return a.value})||[]:""},
_onNewItem:function(b,a){a&&a.parent||this._addOptionForItem(b)},_onDeleteItem:function(b){this.removeOption({value:this.store.getIdentity(b)})},_onSetItem:function(b){this.updateOption(this._getOptionObjForItem(b))},_getOptionObjForItem:function(b){var a=this.store,c=this.labelAttr&&this.labelAttr in b?b[this.labelAttr]:a.getLabel(b);return{value:c?a.getIdentity(b):null,label:c,item:b}},_addOptionForItem:function(b){var a=this.store;a.isItemLoaded&&!a.isItemLoaded(b)?a.loadItem({item:b,onItem:function(a){this._addOptionForItem(a)},
scope:this}):(b=this._getOptionObjForItem(b),this.addOption(b))},constructor:function(b){this._oValue=(b||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);d.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?c("\x3e *",this.srcNodeRef).map(function(b){return"separator"===b.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:b.getAttribute("data-"+f._scopeName+"-value")||b.getAttribute("value"),
label:String(b.innerHTML),selected:b.getAttribute("selected")||!1,disabled:b.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);k.after(this,"onChange",r.hitch(this,"_updateSelection"));var b=this.store;b&&(b.getIdentity||b.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(b,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var b;b=this._notifyConnections.pop();)b.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(p){var m={};p.setObject("dojo.data.util.sorter",m);m.basicComparator=function(k,h){var g=-1;null===k&&(k=void 0);null===h&&(h=void 0);if(k==h)g=0;else if(k>h||null==k)g=1;return g};m.createSortFunction=function(k,h){function g(b,c,a,d){return function(f,g){var h=d.getValue(f,b),n=d.getValue(g,
b);return c*a(h,n)}}for(var d=[],l,f=h.comparatorMap,r=m.basicComparator,c=0;c<k.length;c++){l=k[c];var b=l.attribute;if(b){l=l.descending?-1:1;var t=r;f&&("string"!==typeof b&&"toString"in b&&(b=b.toString()),t=f[b]||r);d.push(g(b,l,t,h))}}return function(b,c){for(var a=0;a<d.length;){var f=d[a++](b,c);if(0!==f)return f}return 0}};return m})},"webview/admin/schedules/DataTypeColourSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/query dojo/string dojo/text!./templates/dataTypeColourSelector.html dojox/html/entities rc/bacnet/enums ./ColourSelectorItem dijit/form/ValidationTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w){return d("webview/admin/schedules/DataTypeColourSelector",[m,p,k,b],{templateString:n,type:"",colours:null,DEFAULT_COLOURS:"#2C97DE #E94B35 #F2C500 #008D9C #0F527D #CB10B7 #336633".split(" "),constructor:function(){this.webviewStrings=q;this.rcStrings=t},postCreate:function(){this.colours=[];this.setTitle();this.showHideAddContainer();this.valueInput.set("validator",l.hitch(this,this.validateInput))},setTitle:function(){switch(this.type){case x.primitiveTypes.ENUMERATED:f.set(this.titleContainer,
"innerHTML",q.setupBinaryColours);break;case x.primitiveTypes.UNSIGNED_INTEGER:f.set(this.titleContainer,"innerHTML",q.setupMultiStateColours);break;case x.primitiveTypes.REAL:f.set(this.titleContainer,"innerHTML",q.setupAnalogColours);break;case "default":f.set(this.titleContainer,"innerHTML",q.setupDefaultColours)}},updateBinaryColours:function(a){for(var b=0;b<a.length;b++)this.colours[b].setColourValue(a[b])},showHideAddContainer:function(){var b=null;if(this.type===x.primitiveTypes.ENUMERATED)r.add(this.addItemContainer,
"hidden"),b=new w({state:t.on,dataType:this.type,colour:"#0000FF"}),this.addRow(b),b=new w({state:t.off,dataType:this.type,colour:"#FF0000"}),this.addRow(b);else if("default"===this.type){r.add(this.addItemContainer,"hidden");for(var c=1;c<=this.DEFAULT_COLOURS.length;c++)b=new w({state:a.substitute(q.levelX,[c.toString()]),dataType:this.type,colour:this.DEFAULT_COLOURS[c-1]}),this.addRow(b)}else r.remove(this.addItemContainer,"hidden")},setType:function(a){this.type=a;this._removeAllRows();this.showHideAddContainer();
this.setTitle()},addRow:function(a){if(this.type===x.primitiveTypes.REAL){for(var b=0,d=null,b=0;b<this.colours.length;b++)if(Number(a.state)<=Number(this.colours[b].state)){d=this.colours[b];break}null!==d?c.place(a.domNode,d.domNode,"before"):null===d&&0<b?(d=this.colours[b-1],c.place(a.domNode,d.domNode,"after")):this.itemContainer.appendChild(a.domNode);this.colours.splice(b,0,a)}else this.itemContainer.appendChild(a.domNode),this.colours.push(a);a.on("delete",l.hitch(this,this.deleteRow));a.on("change",
l.hitch(this,function(){this.onChange()}));this.onChange()},deleteRow:function(a){var b=g.indexOf(this.colours,a);this.colours.splice(b,1);c.destroy(a.domNode);this.onChange()},getData:function(){var a=0,b=null,c=null;g.forEach(this.colours,function(a){a.updateValues()});var d=u(".colourSelectorSingleItem",this.itemContainer);switch(this.type){case x.primitiveTypes.ENUMERATED:c={onColour:this.colours[0].colour,offColour:this.colours[1].colour};break;case x.primitiveTypes.REAL:c=[];for(a=0;a<d.length;a++)b=
h.byNode(d[a]),c.push({value:b.state,colour:b.colour,index:a});break;case x.primitiveTypes.UNSIGNED_INTEGER:c=[];for(a=0;a<d.length;a++)b=h.byNode(d[a]),c.push({value:v.encode(b.state),colour:b.colour,index:a+1});break;case "default":c=[];for(a=0;a<d.length;a++)b=h.byNode(d[a]),c.push(b.colour);break;default:console.error(this.declaredClass+" - getData(): Invalid Type",this.type)}return c},onChange:function(){this.emit("change")},validateInput:function(a){return this.type!==x.primitiveTypes.REAL&&
this.type!==x.primitiveTypes.UNSIGNED_INTEGER?!0:this.type===x.primitiveTypes.UNSIGNED_INTEGER?""!==a:!isNaN(a)&&""!==a},_removeAllRows:function(){for(;void 0!==this.colours[0];)this.deleteRow(this.colours[0])},_onAddItem:function(){if(this.valueInput.isValid()){var a=new w({state:v.encode(this.valueInput.get("value")),dataType:this.type});this.addRow(a);this.valueInput.set("value","")}}})})},"webview/admin/schedules/ColourSelectorItem":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/ValidationTextBox dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/Evented dojo/on dojo/text!./templates/colourSelectorItem.html dojox/html/entities rc/bacnet/enums ../../widget/ColorPicker".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return g("webview/admin/schedules/ColourSelectorItem",[m,k,p,r],{templateString:b,state:"",dataType:"",colour:"#4A2150",_colorPicker:null,_valueInput:null,postCreate:function(){this.inherited(arguments);this._buildContent()},_buildContent:function(){this._setupColourPicker();var a="rcTextBox";switch(this.dataType){case q.primitiveTypes.ENUMERATED:case "default":f.add(this.deleteNode,"hidden");f.remove(this.valueLabel,"hidden");a+=" hidden";break;case q.primitiveTypes.REAL:f.add(this.valueLabel,
"hidden");break;case q.primitiveTypes.UNSIGNED_INTEGER:f.remove(this.valueLabel,"hidden");a+=" hidden";break;default:console.error("ColourSelectorItem.js - _buildContent(): Invalid Data Type",this.dataType)}this._valueInput=new h({baseClass:a,required:!0,validator:d.hitch(this,this.validateInput),value:t.decode(this.state)},this.valueInputContainer);l.set(this.valueLabel,"innerHTML",this.state);this.own(c(this._valueInput,"change",d.hitch(this,this.onChange)));this.own(c(this.deleteNode,"click",d.hitch(this,
this.remove)))},_setupColourPicker:function(){this._colorPicker=new u({color:this.colour},this.colorPickerNode);this.own(c(this._colorPicker,"blurred",d.hitch(this,function(a){if(this.colour.toLowerCase()!==a.toLowerCase())this.onChange(a)})))},onChange:function(a){this.emit("change",a)},validateInput:function(a){return this.type!==q.primitiveTypes.REAL&&this.type!==q.primitiveTypes.UNSIGNED_INTEGER?!0:this.type===q.primitiveTypes.UNSIGNED_INTEGER?""!==a:!isNaN(a)&&""!==a},updateValues:function(){this._valueInput.isValid()&&
(this.state=t.encode(this._valueInput.get("value")),this.colour=this._colorPicker.get("color"))},setColourValue:function(a){this.colour=a;this._colorPicker.set("color",this.colour)},remove:function(){this.emit("delete",this)}})})},"webview/widget/ColorPicker":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/Evented dojo/on dojo/text!webview/widget/templates/ColorPicker.html webview/widget/DojoxColorPicker".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return h("webview/widget/ColorPicker",[m,k,p,f],{widgetsInTemplate:!0,templateString:c,DEFAULT_COLOR:"#cccccc",color:null,postCreate:function(){this.inherited(arguments);null===this.color&&this.set("color",this.DEFAULT_COLOR);this.colorPicker=new b({value:this.color,showHsv:!1,webSafe:!1,baseClass:"rcColorPicker",liveUpdate:!0},this.colorPickerNode);l.set(this.colorIndicator,"backgroundColor",this.color);this.own(r(this.colorPicker,"blur",g.hitch(this,function(){d.add(this.colorPickerContainer,
"hidden");this.colorPicker.Rval.blur();this.colorPicker.Bval.blur();this.colorPicker.Gval.blur();this.set("color",this.colorPicker.get("value"));l.set(this.colorIndicator,"backgroundColor",this.color);this.onBlurred(this.color)})));this.own(r(this.colorPicker.hexCode,"keyup",g.hitch(this,function(b){7===b.target.value.length&&this.colorPicker.set("value",b.target.value)})));this.own(r(this.colorIndicator,"click",g.hitch(this,function(){d.remove(this.colorPickerContainer,"hidden");this.colorPicker.startup();
this.colorPicker.focus()})));this.own(r(this.colorPicker,"change",g.hitch(this,"onChange")))},onBlurred:function(b){this.emit("blurred",b);return b},onChange:function(b){this.set("color",b);this.emit("change")},_formatHexColourString:function(b){b.startsWith("0x")&&(b=b.substring(2));b.startsWith("#")||(b="#"+b);return b},_setColorAttr:function(b){b=b?this._formatHexColourString(b):this.color;this._set("color",b);this.colorPicker&&(this.colorPicker.value=this.color);l.set(this.colorIndicator,"backgroundColor",
this.color)}})})},"webview/widget/DojoxColorPicker":function(){define("dijit/_base/focus dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/fx dojo/has dojox/widget/ColorPicker".split(" "),function(p,m,k,h,g,d,l){return m("webview/widget/ColorPicker",l,{_setPoint:function(f){var l=this.PICKER_SAT_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_W/2;d("ff")?(l=f.layerY-l,c=f.layerX-c):(l=f.offsetY-l,c=f.offsetX-c);f&&p.focus(f.target);this.animatePoint?g.slideTo({node:this.cursorNode,duration:this.slideDuration,
top:l,left:c,onEnd:h.hitch(this,function(){this._updateColor(!0);p.focus(this.cursorNode)})}).play():(k.style(this.cursorNode,{left:c+"px",top:l+"px"}),this._updateColor(!1))},_setHuePoint:function(d){d=d.offsetY-this.PICKER_HUE_SELECTOR_H/2;this.animatePoint?g.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:d,left:0,onEnd:h.hitch(this,function(){this._updateColor(!1);p.focus(this.hueCursorNode)})}).play():(k.style(this.hueCursorNode,"top",d+"px"),this._updateColor(!1))}})})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),
function(p,m,k,h,g,d,l,f){d.focus=function(h){if(h){var c="node"in h?h.node:h,b=h.bookmark;h=h.openedForWindow;var l=b?b.isCollapsed:!1;if(c){var q="iframe"==c.tagName.toLowerCase()?c.contentWindow:c;if(q&&q.focus)try{q.focus()}catch(u){}d._onFocusNode(c)}if(b&&g.withGlobal(h||g.global,f.isCollapsed)&&!l){h&&h.focus();try{g.withGlobal(h||g.global,f.moveToBookmark,null,[b])}catch(u){}}}};d.watch("curNode",function(d,c,b){f._curFocus=b;f._prevFocus=c;b&&h.publish("focusNode",b)});d.watch("activeStack",
function(d,c,b){f._activeStack=b});d.on("widget-blur",function(d,c){h.publish("widgetBlur",d,c)});d.on("widget-focus",function(d,c){h.publish("widgetFocus",d,c)});k.mixin(f,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return f.getBookmark().isCollapsed},getBookmark:function(){return(g.global==window?l:new l.SelectionManager(g.global)).getBookmark()},moveToBookmark:function(d){return(g.global==window?l:new l.SelectionManager(g.global)).moveToBookmark(d)},getFocus:function(h,c){var b=!d.curNode||
h&&m.isDescendant(d.curNode,h.domNode)?f._prevFocus:d.curNode;return{node:b,bookmark:b&&b==d.curNode&&g.withGlobal(c||g.global,f.getBookmark),openedForWindow:c}},_activeStack:[],registerIframe:function(f){return d.registerIframe(f)},unregisterIframe:function(d){d&&d.remove()},registerWin:function(f,c){return d.registerWin(f,c)},unregisterWin:function(d){d&&d.remove()}});return f})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),
function(p,m,k,h,g,d){var l=function(f){var c=f.document;this.getType=function(){if(c.getSelection){var b="text",d;try{d=f.getSelection()}catch(q){}d&&1==d.rangeCount&&(d=d.getRangeAt(0),d.startContainer==d.endContainer&&1==d.endOffset-d.startOffset&&3!=d.startContainer.nodeType&&(b="control"));return b}return c.selection.type.toLowerCase()};this.getSelectedText=function(){if(c.getSelection){var b=f.getSelection();return b?b.toString():""}return"control"==this.getType()?null:c.selection.createRange().text};
this.getSelectedHtml=function(){if(c.getSelection){var b=f.getSelection();if(b&&b.rangeCount){var d,g="";for(d=0;d<b.rangeCount;d++){var h=b.getRangeAt(d).cloneContents(),a=c.createElement("div");a.appendChild(h);g+=a.innerHTML}return g}return null}return"control"==this.getType()?null:c.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(c.getSelection){var b=f.getSelection();return b.anchorNode.childNodes[b.anchorOffset]}if((b=c.selection.createRange())&&
b.item)return c.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var b=this.getSelectedElement();if(b)return b.parentNode}else if(c.getSelection){if(b=c.getSelection()){for(b=b.anchorNode;b&&1!=b.nodeType;)b=b.parentNode;return b}}else return b=c.selection.createRange(),b.collapse(!0),b.parentElement();return null};this.hasAncestorElement=function(b){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(b){var c=
this.getSelectedElement()||this.getParentElement();return this.getParentOfType(c,arguments)};this.isTag=function(b,c){if(b&&b.tagName)for(var d=b.tagName.toLowerCase(),f=0;f<c.length;f++){var a=String(c[f]).toLowerCase();if(d==a)return a}return""};this.getParentOfType=function(b,c){for(;b;){if(this.isTag(b,c).length)return b;b=b.parentNode}return null};this.collapse=function(b){if(c.getSelection){var d=f.getSelection();d.removeAllRanges?b?d.collapseToStart():d.collapseToEnd():d.collapse(b)}else d=
c.selection.createRange(),d.collapse(b),d.select()};this.remove=function(){var b=c.selection;c.getSelection?(b=f.getSelection(),b.deleteFromDocument()):"none"!=b.type.toLowerCase()&&b.clear();return b};this.selectElementChildren=function(b,d){var g;b=m.byId(b);if(c.getSelection){var l=f.getSelection();h("opera")?(g=l.rangeCount?l.getRangeAt(0):c.createRange(),g.setStart(b,0),g.setEnd(b,3==b.nodeType?b.length:b.childNodes.length),l.addRange(g)):l.selectAllChildren(b)}else if(g=b.ownerDocument.body.createTextRange(),
g.moveToElementText(b),!d)try{g.select()}catch(a){}};this.selectElement=function(b,d){var f;b=m.byId(b);if(c.getSelection){var l=c.getSelection();f=c.createRange();l.removeAllRanges&&(h("opera")&&l.getRangeAt(0)&&(f=l.getRangeAt(0)),f.selectNode(b),l.removeAllRanges(),l.addRange(f))}else try{l=b.tagName?b.tagName.toLowerCase():"",f="img"===l||"table"===l?g.body(c).createControlRange():g.body(c).createRange(),f.addElement(b),d||f.select()}catch(a){this.selectElementChildren(b,d)}};this.inSelection=
function(b){if(b){var d,g;if(c.getSelection){var h=f.getSelection();h&&0<h.rangeCount&&(g=h.getRangeAt(0));if(g&&g.compareBoundaryPoints&&c.createRange)try{if(d=c.createRange(),d.setStart(b,0),1===g.compareBoundaryPoints(g.START_TO_END,d))return!0}catch(a){}}else{g=c.selection.createRange();try{d=b.ownerDocument.body.createTextRange(),d.moveToElementText(b)}catch(a){}if(g&&d&&1===g.compareEndPoints("EndToStart",d))return!0}}return!1};this.getBookmark=function(){var b,g,h=c.selection,l=d.curNode;if(c.getSelection){if(h=
f.getSelection())if(h.isCollapsed){if(b=l?l.tagName:"")if(b=b.toLowerCase(),"textarea"==b||"input"==b&&(!l.type||"text"==l.type.toLowerCase()))return h={start:l.selectionStart,end:l.selectionEnd,node:l,pRange:!0},{isCollapsed:h.end<=h.start,mark:h};b={isCollapsed:!0};h.rangeCount&&(b.mark=h.getRangeAt(0).cloneRange())}else g=h.getRangeAt(0),b={isCollapsed:!1,mark:g.cloneRange()}}else if(h){b=l?l.tagName:"";b=b.toLowerCase();if(l&&b&&("button"==b||"textarea"==b||"input"==b)){if(h.type&&"none"==h.type.toLowerCase())return{isCollapsed:!0,
mark:null};g=h.createRange();return{isCollapsed:g.text&&g.text.length?!1:!0,mark:{range:g,pRange:!0}}}b={};try{g=h.createRange(),b.isCollapsed=!("Text"==h.type?g.htmlText.length:g.length)}catch(a){return b.isCollapsed=!0,b}if("CONTROL"==h.type.toUpperCase())if(g.length)for(b.mark=[],h=0,l=g.length;h<l;)b.mark.push(g.item(h++));else b.isCollapsed=!0,b.mark=null;else b.mark=g.getBookmark()}return b};this.moveToBookmark=function(b){if(b=b.mark)if(c.getSelection){var d=f.getSelection();d&&d.removeAllRanges&&
(b.pRange?(d=b.node,d.selectionStart=b.start,d.selectionEnd=b.end):(d.removeAllRanges(),d.addRange(b)))}else if(c.selection&&b){var g;b.pRange?g=b.range:k.isArray(b)?(g=c.body.createControlRange(),p.forEach(b,function(b){g.addElement(b)})):(g=c.body.createTextRange(),g.moveToBookmark(b));g.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},f=new l(window);f.SelectionManager=l;return f})},"dojox/widget/ColorPicker":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/connect dojo/_base/sniff dojo/_base/window dojo/_base/event dojo/dom dojo/dom-class dojo/keys dojo/fx dojo/dnd/move dijit/registry dijit/_base/focus dijit/form/_FormWidget dijit/typematic dojox/color dojo/i18n dojo/i18n!./nls/ColorPicker dojo/i18n!dojo/cldr/nls/number dojo/text!./ColorPicker/ColorPicker.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B){p.experimental("dojox.widget.ColorPicker");return m("dojox.widget.ColorPicker",v,{showRgb:!0,showHsv:!0,showHex:!0,webSafe:!0,animatePoint:!0,slideDuration:250,liveUpdate:!1,PICKER_HUE_H:150,PICKER_SAT_VAL_H:150,PICKER_SAT_VAL_W:150,PICKER_HUE_SELECTOR_H:8,PICKER_SAT_SELECTOR_H:10,PICKER_SAT_SELECTOR_W:10,value:"#ffffff",_underlay:require.toUrl("dojox/widget/ColorPicker/images/underlay.png"),_hueUnderlay:require.toUrl("dojox/widget/ColorPicker/images/hue.png"),
_pickerPointer:require.toUrl("dojox/widget/ColorPicker/images/pickerPointer.png"),_huePickerPointer:require.toUrl("dojox/widget/ColorPicker/images/hueHandle.png"),_huePickerPointerAlly:require.toUrl("dojox/widget/ColorPicker/images/hueHandleA11y.png"),templateString:B,postMixInProperties:function(){b.contains(f.body(),"dijit_a11y")&&(this._huePickerPointer=this._huePickerPointerAlly);this._uId=a.getUniqueId(this.id);k.mixin(this,z.getLocalization("dojox.widget","ColorPicker"));k.mixin(this,z.getLocalization("dojo.cldr",
"number"));this.inherited(arguments)},postCreate:function(){this.inherited(arguments);7>l("ie")&&(this.colorUnderlay.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this._underlay+"', sizingMethod\x3d'scale')",this.colorUnderlay.src=this._blankGif.toString());this.showRgb||(this.rgbNode.style.visibility="hidden");this.showHsv||(this.hsvNode.style.visibility="hidden");this.showHex||(this.hexNode.style.visibility="hidden");this.webSafe||(this.safePreviewNode.style.visibility=
"hidden")},startup:function(){this._started||(this._started=!0,this.set("value",this.value),this._mover=new u.boxConstrainedMoveable(this.cursorNode,{box:{t:-(this.PICKER_SAT_SELECTOR_H/2),l:-(this.PICKER_SAT_SELECTOR_W/2),w:this.PICKER_SAT_VAL_W,h:this.PICKER_SAT_VAL_H}}),this._hueMover=new u.boxConstrainedMoveable(this.hueCursorNode,{box:{t:-(this.PICKER_HUE_SELECTOR_H/2),l:0,w:0,h:this.PICKER_HUE_H}}),this._subs=[],this._subs.push(d.subscribe("/dnd/move/stop",k.hitch(this,"_clearTimer"))),this._subs.push(d.subscribe("/dnd/move/start",
k.hitch(this,"_setTimer"))),this._keyListeners=[],this._connects.push(x.addKeyListener(this.hueCursorNode,{charOrCode:t.UP_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateHueCursorNode),25,25)),this._connects.push(x.addKeyListener(this.hueCursorNode,{charOrCode:t.DOWN_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateHueCursorNode),25,25)),this._connects.push(x.addKeyListener(this.cursorNode,{charOrCode:t.UP_ARROW,shiftKey:!1,metaKey:!1,
ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateCursorNode),25,25)),this._connects.push(x.addKeyListener(this.cursorNode,{charOrCode:t.DOWN_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateCursorNode),25,25)),this._connects.push(x.addKeyListener(this.cursorNode,{charOrCode:t.LEFT_ARROW,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateCursorNode),25,25)),this._connects.push(x.addKeyListener(this.cursorNode,{charOrCode:t.RIGHT_ARROW,shiftKey:!1,
metaKey:!1,ctrlKey:!1,altKey:!1},this,k.hitch(this,this._updateCursorNode),25,25)))},_setValueAttr:function(a,b){this._started&&this.setColor(a,b)},setColor:function(a,b){a=w.fromString(a);this._updatePickerLocations(a);this._updateColorInputs(a);this._updateValue(a,b)},_setTimer:function(a){if(a.node==this.cursorNode||a.node==this.hueCursorNode)n.focus(a.node),c.setSelectable(this.domNode,!1),this._timer=setInterval(k.hitch(this,"_updateColor"),45)},_clearTimer:function(a){this._timer&&(clearInterval(this._timer),
this._timer=null,this.onChange(this.value),c.setSelectable(this.domNode,!0))},_setHue:function(a){g.style(this.colorUnderlay,"backgroundColor",w.fromHsv(a,100,100).toHex())},_updateHueCursorNode:function(a,b,c){if(-1!==a){a=g.style(this.hueCursorNode,"top");b=this.PICKER_HUE_SELECTOR_H/2;a+=b;var d=!1;c.charOrCode==t.UP_ARROW?0<a&&(--a,d=!0):c.charOrCode==t.DOWN_ARROW&&a<this.PICKER_HUE_H&&(a+=1,d=!0);d&&g.style(this.hueCursorNode,"top",a-b+"px")}else this._updateColor(!0)},_updateCursorNode:function(a,
b,c){b=this.PICKER_SAT_SELECTOR_H/2;var d=this.PICKER_SAT_SELECTOR_W/2;if(-1!==a){a=g.style(this.cursorNode,"top");var f=g.style(this.cursorNode,"left");a+=b;var f=f+d,h=!1;c.charOrCode==t.UP_ARROW?0<a&&(--a,h=!0):c.charOrCode==t.DOWN_ARROW?a<this.PICKER_SAT_VAL_H&&(a+=1,h=!0):c.charOrCode==t.LEFT_ARROW?0<f&&(--f,h=!0):c.charOrCode==t.RIGHT_ARROW&&f<this.PICKER_SAT_VAL_W&&(f+=1,h=!0);h&&(f-=d,g.style(this.cursorNode,"top",a-b+"px"),g.style(this.cursorNode,"left",f+"px"))}else this._updateColor(!0)},
_updateColor:function(a){var b=this.PICKER_HUE_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_H/2,d=this.PICKER_SAT_SELECTOR_W/2,b=g.style(this.hueCursorNode,"top")+b,c=g.style(this.cursorNode,"top")+c,d=g.style(this.cursorNode,"left")+d,b=Math.round(360-b/this.PICKER_HUE_H*360),d=w.fromHsv(b,d/this.PICKER_SAT_VAL_W*100,100-c/this.PICKER_SAT_VAL_H*100);this._updateColorInputs(d);this._updateValue(d,a);b!=this._hue&&this._setHue(b)},_colorInputChange:function(a){var b,c=!1;switch(a.target){case this.hexCode:b=
w.fromString(a.target.value);c=!0;break;case this.Rval:case this.Gval:case this.Bval:b=w.fromArray([this.Rval.value,this.Gval.value,this.Bval.value]);c=!0;break;case this.Hval:case this.Sval:case this.Vval:b=w.fromHsv(this.Hval.value,this.Sval.value,this.Vval.value),c=!0}c&&(this._updatePickerLocations(b),this._updateColorInputs(b),this._updateValue(b,!0))},_updateValue:function(a,b){var c=a.toHex();this.value=this.valueNode.value=c;if(b&&(!this._timer||this.liveUpdate))this.onChange(c)},_updatePickerLocations:function(a){var b=
this.PICKER_HUE_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_H/2,d=this.PICKER_SAT_SELECTOR_W/2;a=a.toHsv();b=Math.round(this.PICKER_HUE_H-a.h/360*this.PICKER_HUE_H)-b;d=Math.round(a.s/100*this.PICKER_SAT_VAL_W)-d;c=Math.round(this.PICKER_SAT_VAL_H-a.v/100*this.PICKER_SAT_VAL_H)-c;this.animatePoint?(q.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:b,left:0}).play(),q.slideTo({node:this.cursorNode,duration:this.slideDuration,top:c,left:d}).play()):(g.style(this.hueCursorNode,"top",b+"px"),
g.style(this.cursorNode,{left:d+"px",top:c+"px"}));a.h!=this._hue&&this._setHue(a.h)},_updateColorInputs:function(a){var b=a.toHex();this.showRgb&&(this.Rval.value=a.r,this.Gval.value=a.g,this.Bval.value=a.b);this.showHsv&&(a=a.toHsv(),this.Hval.value=Math.round(a.h),this.Sval.value=Math.round(a.s),this.Vval.value=Math.round(a.v));this.showHex&&(this.hexCode.value=b);this.previewNode.style.backgroundColor=b;this.webSafe&&(this.safePreviewNode.style.backgroundColor=b)},_setHuePoint:function(a){var b=
this.PICKER_HUE_SELECTOR_H/2;a=a.layerY||a.y-a.target.getBoundingClientRect().top;a-=b;this.animatePoint?q.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:a,left:0,onEnd:k.hitch(this,function(){this._updateColor(!0);n.focus(this.hueCursorNode)})}).play():(g.style(this.hueCursorNode,"top",a+"px"),this._updateColor(!0))},_setPoint:function(a){var b=this.PICKER_SAT_SELECTOR_H/2,c=this.PICKER_SAT_SELECTOR_W/2,d=a.layerY||a.y-a.target.getBoundingClientRect().top,d=d-b,b=a.layerX||a.x-
a.target.getBoundingClientRect().left,b=b-c;a&&n.focus(a.target);this.animatePoint?q.slideTo({node:this.cursorNode,duration:this.slideDuration,top:d,left:b,onEnd:k.hitch(this,function(){this._updateColor(!0);n.focus(this.cursorNode)})}).play():(g.style(this.cursorNode,{left:b+"px",top:d+"px"}),this._updateColor(!0))},_handleKey:function(a){},focus:function(){this.focused||n.focus(this.focusNode)},_stopDrag:function(a){r.stop(a)},destroy:function(){this.inherited(arguments);h.forEach(this._subs,function(a){d.unsubscribe(a)});
delete this._subs}})})},"dojox/color":function(){define(["./color/_base"],function(p){return p})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(p,m,k,h){p=m.getObject("color",!0,p);p.Color=k;p.blend=k.blendColors;p.fromRgb=k.fromRgb;p.fromHex=k.fromHex;p.fromArray=k.fromArray;p.fromString=k.fromString;p.greyscale=h.makeGrey;m.mixin(p,{fromCmy:function(g,d,h){m.isArray(g)?(d=g[1],h=g[2],g=g[0]):m.isObject(g)&&(d=g.m,h=g.y,g=g.c);return new k({r:Math.round(255*
(1-g/100)),g:Math.round(255*(1-d/100)),b:Math.round(255*(1-h/100))})},fromCmyk:function(g,d,h,f){m.isArray(g)?(d=g[1],h=g[2],f=g[3],g=g[0]):m.isObject(g)&&(d=g.m,h=g.y,f=g.b,g=g.c);f/=100;return new k({r:Math.round(255*(1-Math.min(1,g/100*(1-f)+f))),g:Math.round(255*(1-Math.min(1,d/100*(1-f)+f))),b:Math.round(255*(1-Math.min(1,h/100*(1-f)+f)))})},fromHsl:function(g,d,h){m.isArray(g)?(d=g[1],h=g[2],g=g[0]):m.isObject(g)&&(d=g.s,h=g.l,g=g.h);d/=100;for(h/=100;0>g;)g+=360;for(;360<=g;)g-=360;var f,l;
120>g?(f=(120-g)/60,l=g/60,g=0):240>g?(f=0,l=(240-g)/60,g=(g-120)/60):(f=(g-240)/60,l=0,g=(360-g)/60);f=2*d*Math.min(f,1)+(1-d);l=2*d*Math.min(l,1)+(1-d);g=2*d*Math.min(g,1)+(1-d);.5>h?(f*=h,l*=h,g*=h):(f=(1-h)*f+2*h-1,l=(1-h)*l+2*h-1,g=(1-h)*g+2*h-1);return new k({r:Math.round(255*f),g:Math.round(255*l),b:Math.round(255*g)})}});p.fromHsv=function(g,d,h){m.isArray(g)?(d=g[1],h=g[2],g=g[0]):m.isObject(g)&&(d=g.s,h=g.v,g=g.h);360==g&&(g=0);d/=100;h/=100;var f,l,c;if(0==d)l=c=f=h;else{var b=g/60;g=Math.floor(b);
var t=b-g,b=h*(1-d),q=h*(1-d*t);d=h*(1-d*(1-t));switch(g){case 0:f=h;l=d;c=b;break;case 1:f=q;l=h;c=b;break;case 2:f=b;l=h;c=d;break;case 3:f=b;l=q;c=h;break;case 4:f=d;l=b;c=h;break;case 5:f=h,l=b,c=q}}return new k({r:Math.round(255*f),g:Math.round(255*l),b:Math.round(255*c)})};m.extend(k,{toCmy:function(){return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var g,d=this.r/255,h=this.g/255,f=this.b/255;g=Math.min(1-d,1-h,1-
f);return{c:Math.round((1-d-g)/(1-g)*100),m:Math.round((1-h-g)/(1-g)*100),y:Math.round((1-f-g)/(1-g)*100),b:Math.round(100*g)}},toHsl:function(){var g=this.r/255,d=this.g/255,h=this.b/255,f=Math.min(g,h,d),k=Math.max(g,d,h),c=k-f,b=0,m=0,f=(f+k)/2;0<f&&1>f&&(m=c/(.5>f?2*f:2-2*f));0<c&&(k==g&&k!=d&&(b+=(d-h)/c),k==d&&k!=h&&(b+=2+(h-g)/c),k==h&&k!=g&&(b+=4+(g-d)/c),b*=60);return{h:b,s:Math.round(100*m),l:Math.round(100*f)}},toHsv:function(){var g=this.r/255,d=this.g/255,h=this.b/255,f=Math.max(g,d,
h),k=f-Math.min(g,h,d),c=null,b=0==f?0:k/f;0==b?c=0:(c=g==f?60*(d-h)/k:d==f?120+60*(h-g)/k:240+60*(g-d)/k,0>c&&(c+=360));return{h:c,s:Math.round(100*b),v:Math.round(100*f)}}});return p})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(p,m,k,h){var g={};m.setObject("dojo.colors",g);var d=function(d,g,c){0>c&&++c;1<c&&--c;var b=6*c;return 1>b?d+(g-d)*b:1>2*c?g:2>3*c?d+(g-d)*(2/3-c)*6:d};p.colorFromRgb=k.fromRgb=function(f,g){var c=f.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);
if(c){var b=c[2].split(/\s*,\s*/),l=b.length,c=c[1];if("rgb"==c&&3==l||"rgba"==c&&4==l)return c=b[0],"%"==c.charAt(c.length-1)?(c=h.map(b,function(a){return 2.56*parseFloat(a)}),4==l&&(c[3]=b[3]),k.fromArray(c,g)):k.fromArray(b,g);if("hsl"==c&&3==l||"hsla"==c&&4==l){var c=(parseFloat(b[0])%360+360)%360/360,q=parseFloat(b[1])/100,r=parseFloat(b[2])/100,q=.5>=r?r*(q+1):r+q-r*q,r=2*r-q,c=[256*d(r,q,c+1/3),256*d(r,q,c),256*d(r,q,c-1/3),1];4==l&&(c[3]=b[3]);return k.fromArray(c,g)}}return null};var l=
function(d,g,c){d=Number(d);return isNaN(d)?c:d<g?g:d>c?c:d};k.prototype.sanitize=function(){this.r=Math.round(l(this.r,0,255));this.g=Math.round(l(this.g,0,255));this.b=Math.round(l(this.b,0,255));this.a=l(this.a,0,1);return this};g.makeGrey=k.makeGrey=function(d,g){return k.fromArray([d,d,d,g])};m.mixin(k.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,
226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,
150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,
136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],
navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,
87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return k})},"webview/admin/schedules/Schedule":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/hash dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/io-query dojo/on dojo/json dojo/query dojo/store/Memory dojo/string dojo/text!./templates/schedule.html dojo/text!./templates/scheduleItem.html dojo/topic dojox/html/entities rc/_base/test rc/bacnet/enums rc/util/encoding/base16 rc/util/encoding/base64 rc/util/notices ./ColourSelectorItem ./ScheduleTreeItem ../_dndTreeBase ../trees/NavTreeAvatar ../../widget/WarningDialog ../../widget/WarningDialogEnums dijit/form/FilteringSelect dijit/form/NumberTextBox dijit/form/RadioButton ./DataTypeColourSelector ./NavScheduleToolbar ../widget/SearchForObjectResults ../widget/AdminToolbar ../../widget/CommitButtons ../../widget/SearchByField ../../widget/TitlePane ../../widget/ToolbarButton ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M){return k("webview/admin/schedules/Schedule",[K],{templateString:A,bacnetOnly:!0,_path:"schedule/",_hash:"schedule",cancelHandle:null,schedule:null,esDataType:null,defaultColours:null,_buttonArray:null,_views:null,dataType:null,esName:"",approvalRequired:!1,esType:null,cleanupEnabled:"",schedulesDialog:null,preventDuplicates:!0,saveDeferred:null,_processId:null,_MAX_DEPTH:6,_isSelectAll:!0,view:"properties",_schedNameChanged:!1,
_nameListener:null,_defaultColourListener:null,_summaryColourListener:null,_cleanupListener:null,_numDaysListener:null,_cleanupTimeListener:null,_incrementListener:null,_currencyListener:null,_approvalRequiredListener:null,_numDaysOnDemandListener:null,_userContent:null,_userViewOnClick:null,_originalScheduleStore:null,_defaultRate:0,_treeNodeClass:"scheduleTreeItem",ahacStrings:u,rcStrings:q,postCreate:function(){this.inherited(arguments);l.set(this.approvalLabel,"for",this.approvalRequiredCB.id);
this._buildHash();this._buttonArray=[];this._iconArray=[];this.saveButton=this.scheduleTreeToolbar.saveButton;this.selectAllButton=this.scheduleTreeToolbar.selectAllButton;this.deleteButton=this.scheduleTreeToolbar.deleteButton;this.viewButton=this.scheduleTreeToolbar.viewButton;this.cancelSaveButton=this.scheduleTreeToolbar.cancelSaveButton;this.selectAllTooltip=this.selectAllButton.tooltip;this._createButtons();this._setupOnClicks();this.setupCommitButtons();this._views=[];this._createViews();this.fetch();
this.schedulesDialog=new O({title:"",type:M.types.binary,text:""});this.own(v(this,"destroyUserContent",h.hitch(this,this._goToPage,"scheduleTree")));this._switchView(this.view);this.setTabIndex()},_goToPage:function(a,b){this.goToPage(this._hash+"\x26view\x3d"+a)},setTabIndex:function(){l.set(this.nameTB.textbox,"tabindex",1);this.minuteIncrementSelect.set("tabindex",1);this.currencySelect.set("tabindex",1);l.set(this.numDaysTB.textbox,"tabindex",1);l.set(this.cleanupTimeTB.textbox,"tabindex",1);
l.set(this.numDaysOnDemandTB.textbox,"tabindex",1)},_afterDrop:function(){this.inherited(arguments);this._setTotals()},_buildHash:function(){var a=t();this.isAdminPage()||E.mode<E.PROXY_LIVE&&(a=G.toCharString(I.decode(a)));if(0===a.indexOf(this._hash))this._hash+="?site\x3d"+this.site,this._hash+="\x26schedule\x3d"+encodeURIComponent(this.schedule);else{var b=a.substring(a.indexOf("?")+1,a.length),b=n.queryToObject(b);this._hash=a.split("\x26")[0];this.view=b.view;this.site=b.site;this.schedule=
this._hash.split("?")[0].replace("EnterpriseSchedule","")}},_setLabels:function(){this.propertiesButton.set("label",this.webviewStrings.propertiesButton.toLocaleUpperCase());this.scheduleTreeButton.set("label",this.webviewStrings.scheduleTreeLabel.toLocaleUpperCase());this.clearSchedulesButton.set("label",this.webviewStrings.wipeSchedules.toLocaleUpperCase())},_createButtons:function(){this.own(v(this.propertiesButton.domNode,"click",h.hitch(this,this._goToPage,"properties")));f.add(this.propertiesButton.domNode,
"selected");this._buttonArray.push(this.propertiesButton);this.own(v(this.scheduleTreeButton.domNode,"click",h.hitch(this,this._goToPage,"scheduleTree")));this._buttonArray.push(this.scheduleTreeButton);this._iconArray.push(this.scheduleTreeToolbar);this._iconArray.push(this.propertiesCommitButtons);this.buttonBar.replaceAllButtons(this._buttonArray);this.buttonBar.replaceAllIcons(this._iconArray);this.own(v(this.clearSchedulesButton.domNode,"click",h.hitch(this,this._confirmClearSchedules)));this.own(v(this.clearExpiredEventsNowButton.domNode,
"click",h.hitch(this,this._confirmClearExpiredEvents)))},_setupOnClicks:function(){this._userViewOnClick=v(this.scheduleTreeToolbar,"viewClicked",h.hitch(this,this._goToPage,"userView"));this.own(v(this.scheduleTreeToolbar,"selectAllClicked",h.hitch(this,this._onSelectAllClicked)),v(this.scheduleTreeToolbar,"deleteClicked",h.hitch(this,this.onDeleteClicked)));v(this.scheduleTreeToolbar,"saveClicked",h.hitch(this,function(){this.scheduleTreeToolbar.showCancelOption(!0);this._validateScheduleTree()}));
v(this.scheduleTreeToolbar,"cancelClicked",h.hitch(this,function(){this.revertPendingChanges();this.fetch()}),this._userViewOnClick)},_createViews:function(){this.esProperties.setMainContent(this.propertiesContainer);this._views.push(this.esProperties.domNode);this._views.push(this.scheduleTreeContainerNode)},_switchView:function(a){m.forEach(this._views,function(a){f.add(a,"hidden")});m.forEach(this._buttonArray,function(a){f.remove(a.domNode,"selected")});switch(a){case "properties":f.remove(this.esProperties.domNode,
"hidden");f.add(this.propertiesButton.domNode,"selected");f.remove(this.propertiesCommitButtons.domNode,"hidden");f.add(this.propertiesCommitButtons.domNode,"selected");f.add(this.scheduleTreeToolbar.domNode,"hidden");f.remove(this.scheduleTreeToolbar.domNode,"selected");break;case "scheduleTree":f.remove(this.scheduleTreeContainerNode,"hidden");f.add(this.scheduleTreeButton.domNode,"selected");f.remove(this.propertiesCommitButtons.domNode,"selected");f.add(this.propertiesCommitButtons.domNode,"hidden");
f.add(this.scheduleTreeToolbar.domNode,"selected");f.remove(this.scheduleTreeToolbar.domNode,"hidden");this.publishSearchable();break;case "userView":this.loadUserContent();break;default:f.remove(this.propertiesCommitButtons.domNode,"hidden"),f.add(this.propertiesCommitButtons.domNode,"selected"),f.add(this.scheduleTreeToolbar.domNode,"hidden"),f.remove(this.scheduleTreeToolbar.domNode,"selected"),console.error(this.declaredClass+" - _switchView(): Invalid View",a)}},_confirmClearSchedules:function(){this.schedulesDialog.set("type",
M.types.binary);this.schedulesDialog.set("title",this.errorStrings.confirmWipeSchedules);this.schedulesDialog.set("text",this.errorStrings.confirmWipeSchedulesBody);var a=this.schedulesDialog.on("close",h.hitch(this,function(b){switch(b){case M.returnValues.oneOrYes:this._clearSchedules();break;case M.returnValues.none:break;default:console.error(this.declaredClass+" - _confirmClearSchedules(): Unknown choice",b)}a.remove()}));this.own(a);this.schedulesDialog.open()},_clearSchedules:function(){var a=
{path:"ClearSchedulesForES",type:"rest",method:"POST",enterpriseScheduleId:this.schedule,siteId:this.site,load:h.hitch(this,function(a){return this._checkProgress(a.data,"ClearSchedulesForES")}),error:h.hitch(this,function(a){this.saveDeferred.reject(a);return a})};this.saveDeferred=new d;this._validateApprovalSessionWithReason(a).then(function(){rc.xhr.request(a)},function(){});this.saveDeferred.then(h.hitch(this,function(a){200===a.progress.errStatus?C.publish("alert",{type:"success",message:this.errorStrings.successfulClear}):
508===a.progress.errStatus?m.forEach(a.progress.error,h.hitch(this,function(a){C.publish("sticky",{type:"error",message:y.substitute(this.errorStrings.failedToWipeXinX,[a.schedule,a.systemName])});console.error(this.declaredClass+" - _clearSchedules(): Could not wipe schedule",a)})):(a=this._getErrorMessage(a.progress.errStatus),C.publish(a.noticeType,{type:a.type,message:a.msg}))}),h.hitch(this,function(a){var b=this._getErrorMessage(504);C.publish(b.noticeType,{type:b.type,message:b.msg});console.error(this.declaredClass+
" - _clearSchedules(): Unexpected Error",a)}))},_confirmClearExpiredEvents:function(){this.schedulesDialog.set("type",M.types.binary);this.schedulesDialog.set("title",this.webviewStrings.confirmCleanupTitle);this.schedulesDialog.set("text",this.webviewStrings.confirmCleanup);var a=this.schedulesDialog.on("close",h.hitch(this,function(b){switch(b){case M.returnValues.oneOrYes:this._clearExpiredEvents();break;case M.returnValues.none:break;default:console.error(this.declaredClass+" - _confirmClearExpiredEvents(): Unknown choice",
b)}a.remove()}));this.own(a);this.schedulesDialog.open()},_clearExpiredEvents:function(){var a={path:"CleanupSchedulesForEnterpriseSchedule",type:"rest",method:"POST",enterpriseScheduleId:this.schedule,daysOfDormancy:this.numDaysOnDemandTB,load:h.hitch(this,function(a){return this._checkProgress(a.data,"CleanupSchedulesForEnterpriseSchedule")}),error:h.hitch(this,function(a){this.saveDeferred.reject(a);return a})};this.saveDeferred=new d;rc.xhr.request(a);this.saveDeferred.then(h.hitch(this,function(a){200===
a.progress.errStatus?C.publish("alert",{type:"success",message:this.webviewStrings.successfullyClearedExpiredEvents}):508===a.progress.errStatus?m.forEach(a.progress.error,h.hitch(this,function(a){C.publish("sticky",{type:"error",message:y.substitute(this.webviewStrings.failedToClearExpiredEvents,[a.schedule,a.systemName])});console.error(this.declaredClass+" - _clearExpiredEvents(): Could not clear expired events",a)})):(a=this._getErrorMessage(a.progress.errStatus),C.publish(a.noticeType,{type:a.type,
message:a.msg}))}),h.hitch(this,function(a){var b=this._getErrorMessage(504);C.publish(b.noticeType,{type:b.type,message:b.msg});console.error(this.declaredClass+" - _clearExpiredEvents(): Unexpected Error",a)}))},_toggleHintArea:function(){this.inherited(arguments);this.viewButton.set("disabled",0>=Object.keys(this._treeList.map).length)},setupCommitButtons:function(){this.own(v(this.propertiesCommitButtons.saveButton.toolbarButtonIcon,"click",h.hitch(this,function(){this.propertiesCommitButtons.showCancelOption(!0);
this.getProperties(this.propertiesCommitButtons)})));this.own(v(this.propertiesCommitButtons.cancelButton.toolbarButtonIcon,"click",h.hitch(this,function(){this.fetch()})))},showColourSelector:function(a){this.colourSelector.setType(a)},_resize:function(){this.inherited(arguments);var a=c.get(this.colourSelection,"width"),b=c.get(this.enterpriseCleanupConfiguration,"width"),d=c.get(this.propertiesContainer,"width"),a=a+b>d;f.toggle(this.colourSelection,"colour-prevent-overlap",a);f.toggle(this.enterpriseCleanupConfiguration,
"cleanup-prevent-overlap",a)},_save:function(a,b){if(this._beginUpdate()){var c=this._checkValidation();if(c.valid){var d=rc.xhr.request(a),f=v(b.cancelSaveButton.toolbarButtonIcon,"click",function(){d.cancel("User Cancelled");f.remove()});d.then(h.hitch(this,function(a){this._endUpdate();if(200===a.data.errStatus)"scheduleTree"===this.view&&(this._treeStore.data=[]),this.fetch(),C.publish("alert",{type:"success",message:this.errorStrings.successfulSave}),this.resultsWidget.onClose(),C.publish("updateNavTree",
!1);else{var b=this._getErrorMessage(a.data.errStatus);C.publish(b.noticeType,{message:b.msg,type:b.type})}return a}),h.hitch(this,function(a){this._onInitError(a);this._endUpdate();return a}));d.always(h.hitch(this,function(){b.showCancelOption(!1)}));return d}this._endUpdate();b&&b.showCancelOption(!1);c.msg?C.publish("sticky",{type:"error",message:c.msg}):console.error("Schedule.js - _save(): Invalid input but no message",c)}},_checkValidation:function(){var a="",b=!0;"properties"===this.view&&
0===this.nameTB.get("value").replace(/^\s+|\s+$/gm,"").length&&(b=!1,a=this.errorStrings.emptyESName);return{valid:b,msg:a}},_cancellableSave:function(a,b){this._beginUpdate()&&(this.saveDeferred=new d,rc.xhr.requestNow(a),this.cancelPath="scheduleTree/",this.saveDeferred.then(h.hitch(this,this._parseSaveResponse,b),h.hitch(this,this._parseSaveError)))},_parseSaveResponse:function(a,b){this._endUpdate();a.showCancelOption(!1);L.widget.clear();200===b.errStatus?(this._treeStore.data=[],this.fetch(),
C.publish("alert",{type:"success",message:this.errorStrings.successfulSave}),this.resultsWidget.onCloseResults()):this._displayErrorMessage(b.errStatus);return b},_parseSaveError:function(a,b){this._endUpdate();a.showCancelOption(!1);L.widget.clear();b===this.errorStrings.userCancelled?this._displayErrorMessage(511):console.error(this.declaredClass+" - _cancellableSave(): Unexpected error",e);return b},_displayErrorMessage:function(a){a=this._getErrorMessage(a);C.publish(a.noticeType,{message:a.msg,
type:a.type})},isInTreeList:function(a){var b=0,c;for(c in this._treeList.map)this._treeList.map[c].data.objId===a.objId&&b++;return 1<b},removeDuplicates:function(a,b){var c=[];m.forEach(b,h.hitch(this,function(b){var d=0,f;for(f in this._treeList.map)this._treeList.map[f].data.objId===a.map[b.id].data.objId&&d++;1<d&&c.push(a.map[b.id].data.objId)}));0<c.length&&this.buildDialogBox(c,null,this._dndInvalidTypes.DuplicateSchedule,!0)},fetch:function(){this.scheduleTreeToolbar.showCancelOption(!1);
if(this._beginUpdate()){var a=rc.xhr.request({path:"scheduletree/",type:"rest",method:"GET",siteId:this.site,enterpriseScheduleId:this.schedule,view:this.view});a.then(h.hitch(this,function(a){502===a.data.errStatus?this._onInitError(this._getErrorMessage(a.data.errStatus)):this._parseScheduleTreeFetch(a);return a}),h.hitch(this,function(a){this._onInitError(a);return a}));a.always(h.hitch(this,this._endUpdate));return a}},_parseScheduleTreeFetch:function(a){L.widget.clear();this._schedNameChanged&&
(this._hash="schedule",this._buildHash(),window.location.hash=this._hash);this.fillFields(a);this.resetSelectAll();"properties"===this.view?this.setDirty(!1,this.propertiesCommitButtons.saveButton):"scheduleTree"===this.view&&(this.setDirty(!1,this.saveButton),this.scheduleTreeToolbar.resetSelectAll());this.onInitSuccess()},defaultColoursChanged:function(){var a=this.defaultColours;m.forEach(this._treeStore.data,function(b){b.set("defaultColours",a)})},_setupPropertyListeners:function(){null===this._nameListener&&
(this._nameListener=v(this.nameTB,"change",h.hitch(this,function(a){this.setDirty(a!==this.esName,this.propertiesCommitButtons.saveButton)})));null===this._defaultColourListener&&(this._defaultColourListener=v(this.defaultColourSelector,"change",h.hitch(this,function(){this.setDirty(!0,this.propertiesCommitButtons.saveButton)})));null===this._summaryColourListener&&(this._summaryColourListener=v(this.colourSelector,"change",h.hitch(this,function(){this.setDirty(!0,this.propertiesCommitButtons.saveButton)})));
null===this._cleanupListener&&(this._cleanupListener=v(this.enabledCleanup,"change",h.hitch(this,function(a){this.setDirty(a!==this.cleanupEnabled,this.propertiesCommitButtons.saveButton);this.enabledCleanup.getValue()?(f.remove(this.daysToExpireSettings,"hidden"),f.remove(this.timeToRun,"hidden")):(f.add(this.daysToExpireSettings,"hidden"),f.add(this.timeToRun,"hidden"))})));null===this._numDaysListener&&(this._numDaysListener=v(this.numDaysTB,"change",h.hitch(this,function(a){this.setDirty(a!==
this.cleanupDaysDormant,this.propertiesCommitButtons.saveButton)})));null===this._numDaysOnDemandListener&&(this._numDaysOnDemandListener=v(this.numDaysOnDemandTB,"keyup",h.hitch(this,function(){isNaN(this.numDaysOnDemandTB.get("value"))?this.clearExpiredEventsNowButton.set("disabled",!0):this.clearExpiredEventsNowButton.set("disabled",!1)})));null===this._cleanupTimeListener&&(this._cleanupTimeListener=v(this.cleanupTimeTB,"change",h.hitch(this,function(a){this.setDirty(a!==this.cleanupTime,this.propertiesCommitButtons.saveButton)})));
null===this._incrementListener&&(this._incrementListener=v(this.minuteIncrementSelect,"change",h.hitch(this,function(a){this.setDirty(Number(a)!==this.minuteIncrement,this.propertiesCommitButtons.saveButton)})));null===this._currencyListener&&(this._currencyListener=v(this.currencySelect,"change",h.hitch(this,function(a){var b=!1,b="none"===a?"none"!==this.currency&&null!==this.currency:a!==this.currency;this.setDirty(b,this.propertiesCommitButtons.saveButton)})));null===this._approvalRequiredListener&&
(this._approvalRequiredListener=v(this.approvalRequiredCB,"change",h.hitch(this,function(){this.setDirty(this.approvalRequiredCB.get("checked")!==this.approvalRequired,this.propertiesCommitButtons.saveButton)})))},_getErrorMessage:function(a){var b={msg:this.errorStrings.unexpectedError,type:"error",noticeType:"sticky"};switch(a){case 501:b.msg=this.errorStrings.duplicateSchedule;break;case 502:b.msg=this.errorStrings.scheduleDoesNotExist;break;case 504:b.msg=this.errorStrings.unexpectedError;break;
case 505:b.msg=this.errorStrings.siteDoesNotExist;break;case 506:b.msg=this.errorStrings.insufficientPriviledges;break;case 510:b.msg=this.errorStrings.validationInProgress;b.type="info";break;case 511:b.msg=this.errorStrings.userCancelled;b.type="info";break;case 517:b.msg=this.errorStrings.systemDoesNotExist;break;default:console.error(this.declaredClass+" - _getErrorMessage(): Invalid Error Status",a)}return b},fillFields:function(a){var b=this.esDataType=a.data.esDataType;"properties"===this.view&&
this._fillProperties(a.data.properties,b);"scheduleTree"===this.view&&(this.defaultColours=a.data.properties.defaultColours,this._fillScheduleTree(a.data.scheduleTree));this._setLabels();this._buildAuditLogContext()},_buildAuditLogContext:function(){webview.auditUtil.setContextDataWithSiteId(this.site,[{systemId:null,objectName:"#EnterpriseSchedule"+this.schedule}],this.title)},_fillScheduleTree:function(a){for(var b=w(".treeItemContainer",this._treeList.node),c=0;c<b.length;c++)r.destroy(b[c]),this._treeStore.remove(b[c].id);
this._treeList.clearItems();var d=[];m.forEach(a,h.hitch(this,function(a){this._flattenScheduleTree(a,d)}));this._originalScheduleStore=new z({data:d});this.createNodesBasedOnData(d);this._setTotals()},_fillProperties:function(a,b){this.defaultColours=a.defaultColours;this.defaultColoursChanged();this.esName=D.decode(a.esName);this.nameTB.set("value",this.esName);l.set(this.dataTypeContainer,"innerHTML",b);this.showColourSelector(b);0<this.defaultColours.length&&(this.defaultColourSelector.set("DEFAULT_COLOURS",
this.defaultColours),this.defaultColourSelector.setType("default"));"undefined"!==typeof a.approvalRequired&&(this.approvalRequired=a.approvalRequired,this.approvalRequiredCB.set("checked",this.approvalRequired));var c=null;this.colourSelector.setType(b);f.add(this.currencySelectionContainer,"hidden");switch(b){case F.primitiveTypes.ENUMERATED:f.remove(this.currencySelectionContainer,"hidden");this.esType=F.primitiveTypes.ENUMERATED;l.set(this.dataTypeContainer,"innerHTML",this.rcStrings.binary);
c=a.binaryColours;void 0===c.onColour&&(c.onColour="#0000FF");void 0===c.offColour&&(c.offColour="#FF0000");this.colourSelector.updateBinaryColours([c.onColour,c.offColour]);break;case F.primitiveTypes.REAL:this.esType=F.primitiveTypes.REAL;c=a.analogColours;l.set(this.dataTypeContainer,"innerHTML",this.rcStrings.analog);m.forEach(c,h.hitch(this,function(a){this.colourSelector.addRow(new H({colour:a.colour,state:a.value.toString(),dataType:b}))}));break;case F.primitiveTypes.UNSIGNED_INTEGER:this.esType=
F.primitiveTypes.UNSIGNED_INTEGER;c=a.multiStateColours;l.set(this.dataTypeContainer,"innerHTML",this.webviewStrings.multistate);m.forEach(c,h.hitch(this,function(a){this.colourSelector.addRow(new H({colour:a.colour,state:a.label,dataType:b}))}));break;default:console.error(this.declaredClass+" - fillFields(): Invalid Data Type",this.esDataType)}this.currency=null===a.currency?"none":a.currency;this.currencySelect.set("value",this.currency);this.minuteIncrement=a.minuteIncrement;this.minuteIncrementSelect.set("value",
this.minuteIncrement);this.cleanupEnabled=a.cleanupEnabled;this.enabledCleanup.set("checked",this.cleanupEnabled);this.disabledCleanup.set("checked",!this.cleanupEnabled);this.cleanupDaysDormant=a.cleanupDaysDormant;this.numDaysTB.set("value",this.cleanupDaysDormant);this.cleanupTime=a.cleanupTime;this.cleanupTimeTB.set("value",this.cleanupTime);this.cleanupTimeTB.set("validator",h.hitch(this,function(a){return this.timeValidation(a)}));this.clearExpiredEventsNowButton.set("disabled",!0);null!==this._nameListener&&
(this._nameListener.remove(),this._nameListener=null);null!==this._defaultColourListener&&(this._defaultColourListener.remove(),this._defaultColourListener=null);null!==this._summaryColourListener&&(this._summaryColourListener.remove(),this._summaryColourListener=null);null!==this._cleanupListener&&(this._cleanupListener.remove(),this._cleanupListener=null);null!==this._numDaysListener&&(this._numDaysListener.remove(),this._numDaysListener=null);null!==this._cleanupTimeListener&&(this._cleanupTimeListener.remove(),
this._cleanupTimeListener=null);null!==this._numDaysOnDemandListener&&(this._numDaysOnDemandListener.remove(),this._numDaysOnDemandListener=null);this._setupPropertyListeners()},timeValidation:function(a){var b=!1;a.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9]):([0-5]?[0-9])$/)?b=!0:a.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])$/)&&(b=!0);return b},_flattenScheduleTree:function(a,b){var c=m.filter(b,function(b){return b.id===a.id});0>=c&&b.push(a);for(var d=0;d<a.schedules.length;d++)0<a.schedules[d].schedules.length?
this._flattenScheduleTree(a.schedules[d],b):(c=[],c=m.filter(b,function(b){return b.id===a.schedules[d].id}),0>=c&&b.push(a.schedules[d]))},createNodesBasedOnData:function(a){for(var b=0;b<a.length;b++){var c=this.generateScheduleTreeObject(a[b]),d=null;if("null"!==a[b].parent){var d=m.filter(a,function(c){return c.id===a[b].parent})[0],f;for(f in this._treeList.map)if(this._treeList.map[f].data.objId===d.mnemonic+"|"+d.systemId){c.parent=f;break}d=p.byId(c.parent)}this._treeList.insertNodes(!1,[c]);
var g=p.byId(Object.keys(this._treeList.map).pop());this.indentChild=void 0!==c.parent;this._placeNewNode(null,[g.node],d,g)}this._toggleHintArea()},generateScheduleTreeObject:function(a){return{scheduleColor:a.color,objId:a.mnemonic+"|"+a.systemId,schedName:D.decode(a.label),bacnetID:a.mnemonic,systemId:a.systemId?a.systemId:-1,sysName:a.sysName,colourSet:!0,defaultColours:this.defaultColours,rate:Number(a.rate)||this._defaultRate,childItems:[]}},treeNodeCreator:function(a){var b=new J({currency:this.currency,
scheduleColor:a.scheduleColor,objId:a.bacnetID+"|"+a.systemId,schedName:D.decode(a.schedName),bacnetID:a.bacnetID,systemId:a.systemId?a.systemId:-1,sysName:a.sysName,depth:a.depth,colourSet:a.colourSet||!1,parent:void 0!==a.parent?a.parent:null,esDataType:this.esDataType,defaultColours:this.defaultColours,childItems:void 0!==a.childItems?a.childItems:[],rate:a.rate?a.rate:this._defaultRate});b.on("delete",h.hitch(this,this._deleteTreeNode));b.setDepth(b.depth,this.indentSize);b.on("editModeChange",
h.hitch(this,this.disableDnD));b.on("change",h.hitch(this,function(a){this._treeList.selectNone();f.add(a.domNode,"dojoDndItem");this.setDirty(!0,this.saveButton)},b));b.on("rateChange",h.hitch(this,function(a,b){a.rate=b;this._setTotals()},b));0>=m.filter(this._treeStore.data,function(b){return b.bacnetID+"|"+b.systemId===a.bacnetID+"|"+a.systemId}).length&&this._treeStore.put(b);return{node:b.domNode,data:a,type:["treeNode"]}},_pointsNodeCreator:function(a,b){var c=null;"avatar"===b?c=(new N({sysId:a.systemId,
deviceName:a.deviceName,pointName:a.schedName,pointMnemonic:a.bacnetID,pointType:"Schedules",childItems:a.childItems,sysName:a.sysName,siteUrlPath:a.urlPath?a.urlPath:this.siteUrl,displayName:a.schedName})).domNode:(c=r.toDom(y.substitute(B,{currency:this.currency,sysName:a.sysName||this.site,bacnetID:a.bacnetID,deviceName:a.deviceName,schedName:a.schedName,systemId:a.systemId?a.systemId:-1,objId:a.bacnetID+"|"+a.systemId,rate:a.rate||this._defaultRate})),l.set(c,"title",a.schedName+"("+a.bacnetID+
")"));return{node:c,data:a,type:["resultNode"]}},_setupPointSourceListeners:function(a){this.own(g.after(a,"onDndDrop",a.selectNone))},insertPoint:function(a,b){a.insertNodes(!1,[{sysName:b.sysName,systemId:b.sysId?b.sysId:-1,bacnetID:b.pointMnemonic,schedName:b.pointName,deviceName:b.deviceName,objId:b.pointMnemonic+"|"+b.sysId,depth:-1}])},_setSupportedTypes:function(){this._supportedObjectTypes=[this.objectTypeMap.schedules]},_validateScheduleTree:function(){var a={path:"validateScheduleTree/",
type:"rest",method:"POST",load:h.hitch(this,function(a){return this._checkProgress(a.data,"validateScheduleTree")}),error:h.hitch(this,function(a){this.saveDeferred.reject(a);return a}),params:x.stringify({siteId:this.site,entId:this.schedule,scheduleTree:this._getChildArray()})};L.widget.clear();this.saveDeferred=new d;this.cancelPath="schedule/dataType";rc.xhr.request(a);this.cancelHandle=v(this.scheduleTreeToolbar.cancelSaveButton.toolbarButtonIcon,"click",h.hitch(this,function(){this._cancelRequest();
this.saveDeferred.cancel(this.errorStrings.userCancelled);this.saveDeferred=null;this.cancelHandle.remove()}));this.saveDeferred.then(h.hitch(this,this._treeValidationComplete),h.hitch(this,function(a){this.scheduleTreeToolbar.showCancelOption(!1);L.widget.clear();if(a===this.errorStrings.userCancelled){var b=this._getErrorMessage(511);C.publish(b.noticeType,{message:b.msg,type:b.type})}else console.error(this.declaredClass+" - _validateDataType(): Unexpected error occured",a);return a}))},_treeValidationComplete:function(a){L.widget.clear();
0===a.schedules.length||0===a.users.length?this._validateDataType():this.buildDialogBox(a.schedules,a.users,this._dndInvalidTypes.PermissionsReset,!1,!0)},_validateDataType:function(){this.scheduleTreeToolbar.disableCancelSaveOption(!0);this.cancelHandle.remove();var a=[];m.forEach(this._treeStore.data,function(b){a.push({bacnetID:b.bacnetID,systemId:b.systemId})});var b={path:"schedule/dataType",type:"rest",method:"POST",timeout:4E4,load:h.hitch(this,function(a){return this._checkProgress(a.data,
"schedule/dataType")}),error:h.hitch(this,function(a){this.saveDeferred.reject(a);return a}),params:x.stringify({esDataType:this.esDataType,entId:this.schedule,siteId:this.site,schedules:a})};L.widget.clear();this.saveDeferred=new d;this.cancelPath="schedule/dataType";rc.xhr.request(b);this.saveDeferred.then(h.hitch(this,this._validationComplete),h.hitch(this,function(a){this.scheduleTreeToolbar.showCancelOption(!1);L.widget.clear();if(a===this.errorStrings.userCancelled){var b=this._getErrorMessage(511);
C.publish(b.noticeType,{message:b.msg,type:b.type})}else console.error(this.declaredClass+" - _validateDataType(): Unexpected error occured",a);return a}))},_validationComplete:function(a){for(var b={},c=[],d=[],f=h.hitch(this,function(){C.publish("alert",{type:"success",message:this.errorStrings.successfulValidate});var a={path:"scheduleTree/",type:"rest",method:"POST",load:h.hitch(this,function(a){return this._checkProgress(a.data,"scheduleTree")}),error:h.hitch(this,function(a){this.saveDeferred.reject(a);
return a}),siteId:this.site,params:x.stringify({siteId:this.site,entId:this.schedule,esDataType:this.esDataType,properties:null,scheduleTree:this._getChildArray()})};this._validateApprovalSessionWithReason(a).then(h.hitch(this,function(){L.widget.clear();C.publish("alert",{type:"info",message:this.errorStrings.saveInProgress});this._cancellableSave(a,this.scheduleTreeToolbar)}),function(){})}),g=h.hitch(this,function(){this.scheduleTreeToolbar.onsaveClicked()}),d=w(".treeFolder \x3e .treeItemContainer \x3e .scheduleTreeItem \x3e .bacnetLabel",
this.scheduleTreeContainerNode),n=0;n<d.length;n++)d[n]=d[n].innerHTML;m.forEach(a.results,h.hitch(this,function(a){if(!b[a.bacnetID]){b[a.bacnetID]=a;for(var f=0;f<d.length;f++)a.bacnetID===d[f]&&c.push(a)}}));if(1===a.results.length&&200===a.results[0].errStatus)f();else{var l=[],k=[],r=[],t=[],u=!1;a=h.hitch(this,function(a){0===this._originalScheduleStore.query(h.hitch(this,this.scheduleExistedBefore,a)).length&&(u=!0);switch(a.errStatus){case 507:l.push(a.bacnetID+"|"+a.systemId);break;case 508:k.push(a.bacnetID+
"|"+a.systemId);break;case 509:r.push(a.bacnetID+"|"+a.systemId);break;case 513:t.push(a.bacnetID+"|"+a.systemId)}});m.forEach(c,a);0<r.length?this.buildDialogBox(r,null,this._dndInvalidTypes.AlreadyInUse,!1,u,f,g):0<l.length?this.buildDialogBox(l,null,this._dndInvalidTypes.InvalidDataType,!1,u,f,g):0<t.length?this.buildDialogBox(t,null,this._dndInvalidTypes.WrongRev,!0,u,f,g):0<k.length?this.buildDialogBox(k,null,this._dndInvalidTypes.Unreachable,!1,u,f,g):(C.publish("sticky",{type:"error",message:"\x3cp\x3e"+
q.unexpected+"\x3c/p\x3e\x3cp\x3e"+q.couldNotSave+" "+q.pleaseTryAgain+"\x3c/p\x3e"}),this.scheduleTreeToolbar.showCancelOption(!1));r=k=l=null}},scheduleExistedBefore:function(a,b){return a.bacnetID===b.mnemonic&&Number(a.systemId)===Number(b.systemId)},_checkProgress:function(a,b){var c=-1;"scheduleTree"===b||"validateScheduleTree"===b?(this._processId=a.processId,c=a.errStatus):(this._processId=a.progress.processId,c=a.progress.errStatus);if(510===c){if("CleanupSchedulesForEnterpriseSchedule"===
b||"ClearSchedulesForES"===b||"schedule/dataType"===b)c="",c="schedule/dataType"===b?this.errorStrings.validationInProgress:this.errorStrings.clearingSchedules,c=[c,"\x3cbr /\x3e",a.progress.completed,this.webviewStrings.outOf,a.progress.outOf].join(" "),C.publish("alert",{type:"info",message:c});this._pollForStatus(b)}else this.saveDeferred.resolve(a)},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_pollForStatus:function(a){this._clearPollingTimer();this._pollForStatusTimer=
setTimeout(h.hitch(this,function(){return rc.xhr.request({type:"rest",method:"GET",path:a+"/status",processId:this._processId||-1,abort:0,load:h.hitch(this,function(b){if(b.data)return this._checkProgress(b.data,a)}),error:h.hitch(this,function(a){C.publish("sticky",{type:"error",message:"\x3cp\x3e"+q.unexpected+"\x3c/p\x3e\x3cp\x3e"+q.couldNotSave+" "+q.pleaseTryAgain+"\x3c/p\x3e"});this.scheduleTreeToolbar.showCancelOption(!1);this.saveDeferred.reject(a);return a})})}),500);return this.saveDeferred},
_cancelRequest:function(){this._clearPollingTimer();rc.xhr.requestNow({type:"rest",method:"GET",path:this.cancelPath+"/status",processId:this._processId||-1,abort:1});this._processId=-1},getNodeByObjId:function(a,b,c){if(null===a||void 0===a)return null;var d=null,f;for(f in b.map)if(b.map[f].data.objId===a&&(d=f,!c))break;return d},buildDialogBox:function(a,b,c,d,f,g,n){b=this.buildDialogMessage(c,a,b,d,f);this.schedulesDialog.set("text",b);var l=this.schedulesDialog.on("close",h.hitch(this,function(b){d&&
m.forEach(a,h.hitch(this,function(a){a=this.getNodeByObjId(a,this._treeList,d);a=p.byId(a);this._deleteTreeNode(a)}));switch(b){case M.returnValues.oneOrYes:switch(c){case this._dndInvalidTypes.InvalidDataType:case this._dndInvalidTypes.Unreachable:"function"===typeof g&&g();break;case this._dndInvalidTypes.DepthOutOfRange:case this._dndInvalidTypes.DuplicateSchedule:break;case this._dndInvalidTypes.AlreadyInUse:f=!0;this.scheduleTreeToolbar.showCancelOption(!1);break;case this._dndInvalidTypes.PermissionsReset:this._validateDataType();
break;default:"function"===typeof n&&n(),this.scheduleTreeToolbar.showCancelOption(!1)}break;case M.returnValues.none:this._cancelSave();this.scheduleTreeToolbar.showCancelOption(!1);break;default:console.error(this.declaredClass+" - buildDialogBox(): Unknown choice",b)}l.remove()}));this.own(l);L.widget.clear();this.schedulesDialog.open()},buildDialogMessage:function(a,b,c,d,f){var g=f="";switch(a){case this._dndInvalidTypes.InvalidDataType:this.schedulesDialog.set("type",M.types.binary);this.schedulesDialog.set("title",
this.webviewStrings.invalidDataTypeTitle);f=this.webviewStrings.invalidDataTypePre;g=this.webviewStrings.invalidDataTypePost;break;case this._dndInvalidTypes.Unreachable:this.schedulesDialog.set("type",M.types.binarySave);this.schedulesDialog.set("title",this.webviewStrings.unreachableScheduleTitle);f=this.webviewStrings.unreachableSchedulePre;g=this.webviewStrings.unreachableSchedulePost;break;case this._dndInvalidTypes.AlreadyInUse:this.schedulesDialog.set("type",M.types.informative);this.schedulesDialog.set("title",
this.webviewStrings.alreadyInUseScheduleTitle);f=this.webviewStrings.alreadyInUseSchedulePre;g=this.webviewStrings.alreadyInUseSchedulePost;break;case this._dndInvalidTypes.DuplicateSchedule:this.schedulesDialog.set("type",M.types.informative);this.schedulesDialog.set("title",this.webviewStrings.duplicateBlockTitle);f=this.webviewStrings.duplicateBlockPre;g=this.webviewStrings.duplicateBlockPost;break;case this._dndInvalidTypes.DepthOutOfRange:this.schedulesDialog.set("type",M.types.informative);
this.schedulesDialog.set("title",this.webviewStrings.depthOutOfRangeTitle);f=this.webviewStrings.depthOutOfRangePre;g=this.webviewStrings.depthOutOfRangePost;break;case this._dndInvalidTypes.WrongRev:this.schedulesDialog.set("type",M.types.informative);this.schedulesDialog.set("title",this.webviewStrings.wrongRevisionTitle);f=this.webviewStrings.wrongRevisionPre;g=this.webviewStrings.wrongRevisionPost;break;case this._dndInvalidTypes.PermissionsReset:this.schedulesDialog.set("type",M.types.binary);
this.schedulesDialog.set("title",this.webviewStrings.permissionsReset);f=this.webviewStrings.permissionsResetPre;g=this.webviewStrings.permissionsResetPost;g+="\x3cul \x3e";m.forEach(c,h.hitch(this,function(a){g+='\x3cli class\x3d"warningDialogItem"\x3e'+a.name+"\x3c/li\x3e"}));g+="\x3c/ul\x3e";break;default:console.error(this.declaredClass+" - buildDialogBox(): Invalid invalidType",a)}var n=f+'\x3cul class\x3d"warningDialogItems"\x3e';a===this._dndInvalidTypes.PermissionsReset?m.forEach(b,h.hitch(this,
function(a){null!==a.name&&(n+='\x3cli class\x3d"warningDialogItem"\x3e'+a.name+"\x3c/li\x3e")})):m.forEach(b,h.hitch(this,function(b){b=this.getNodeByObjId(b,this._treeList,d);if(b=p.byId(b))b.wipe=a===this._dndInvalidTypes.InvalidDataType?!0:!1,a!==this._dndInvalidTypes.DepthOutOfRange&&b.setInvalid(),n+='\x3cli class\x3d"warningDialogItem"\x3e'+b.schedName+" ("+b.bacnetID+")\x3c/li\x3e"}));return n+='\x3c/ul\x3e\x3cspan class\x3d"mainDialogText"\x3e'+g+"\x3c/span\x3e"},getProperties:function(a){var b=
this.currencySelect.get("value"),b={siteId:this.site,entId:this.schedule,esDataType:this.esDataType,esName:D.encode(this.nameTB.get("value")),cleanupEnabled:this.enabledCleanup.checked,cleanupDaysDormant:this.numDaysTB.get("value"),cleanupTime:this.cleanupTimeTB.get("value"),currency:"none"===b||this.esDataType!==F.primitiveTypes.ENUMERATED?null:b,approvalRequired:this.approvalRequiredCB.get("checked"),minuteIncrement:Number(this.minuteIncrementSelect.get("value")),properties:{defaultColours:null,
binaryColours:null,multiStateColours:null,analogColours:null},scheduleTree:null};b.properties.defaultColours=this.defaultColourSelector.getData();switch(this.esDataType){case F.primitiveTypes.ENUMERATED:b.properties.binaryColours=this.colourSelector.getData();break;case F.primitiveTypes.REAL:b.properties.analogColours=this.colourSelector.getData();break;case F.primitiveTypes.UNSIGNED_INTEGER:b.properties.multiStateColours=this.colourSelector.getData();break;default:console.error(this.declaredClass+
" - getProperties(): Invalid Data Type",this.esDataType)}b={path:"schedule/properties",type:"rest",method:"POST",params:x.stringify(b)};this._save(b,a)},_onSelectAllClicked:function(){var b=w(".tree-item-checkbox",this.builderWidget.domNode);m.forEach(b,h.hitch(this,function(a){p.byNode(a).set("checked",this._isSelectAll)}));var c;this._isSelectAll?(b="selectAllIcon",c="deselectAllIcon",this.selectAllTooltip.set("label",a.deselectAll)):(b="deselectAllIcon",c="selectAllIcon",this.selectAllTooltip.set("label",
a.selectAll));f.remove(this.selectAllButton.toolbarButtonIcon,b);f.add(this.selectAllButton.toolbarButtonIcon,c);this._isSelectAll=!this._isSelectAll},onDeleteClicked:function(){var a=this._getSelectedNodes();m.forEach(a,h.hitch(this,function(a){a&&this._deleteTreeNode(a)}));this.resetSelectAll();this.emit("deleteClicked")},resetSelectAll:function(){this._isSelectAll=!0;f.remove(this.selectAllButton.toolbarButtonIcon,"deselectAllIcon");f.add(this.selectAllButton.toolbarButtonIcon,"selectAllIcon")},
_getChildCosts:function(a){var b=a.rate;if(0===a.childItems.length)return a.set("total",0),a.rate;for(var c=0;c<a.childItems.length;++c)b+=this._getChildCosts(a.childItems[c]);b!==a.rate?a.set("total",b):a.set("total",0);return b},_setTotals:function(){this._treeStore.query({parent:null}).forEach(h.hitch(this,this._getChildCosts))},_cancelSave:function(){this.saveDeferred&&(this._cancelRequest(),this.saveDeferred.cancel(),this.saveDeferred=null)},destroy:function(){this._clearPollingTimer();null!==
this._treeStore&&m.forEach(this._treeStore.data,function(a){a.destroy()});this._treeStore=null;null!==this._treeList&&this._treeList.destroy();this.manager=null;null!==this.schedulesDialog&&this.schedulesDialog.destroy();null!==this._nameListener&&(this._nameListener.remove(),this._nameListener=null);null!==this._defaultColourListener&&(this._defaultColourListener.remove(),this._defaultColourListener=null);null!==this._summaryColourListener&&(this._summaryColourListener.remove(),this._summaryColourListener=
null);null!==this._cleanupListener&&(this._cleanupListener.remove(),this._cleanupListener=null);null!==this._numDaysListener&&(this._numDaysListener.remove(),this._numDaysListener=null);null!==this._cleanupTimeListener&&(this._cleanupTimeListener.remove(),this._cleanupTimeListener=null);null!==this._numDaysOnDemandListener&&(this._numDaysOnDemandListener.remove(),this._numDaysOnDemandListener=null);null!==this._userContent&&this._userContent.destroy();this._cancelSave();this.inherited(arguments)},
loadUserContent:function(){this._userContent||(f.add(this.containerNode,"hidden"),f.add(this._topContent,"hidden"),this._loadUserContent("EnterpriseSchedule"+this.schedule))},destroyRecursive:function(){this.destroy();this.inherited(arguments)}})})},"webview/admin/schedules/ScheduleTreeItem":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/DropDownMenu dijit/form/CheckBox dijit/form/DropDownButton dijit/MenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/currency dojo/dom-attr dojo/dom-class dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/string dojo/text!./templates/scheduleTreeItem.html dojo/topic dojox/html/entities dojox/widget/ColorPicker rc/bacnet/enums ../../util/globalConstants ../widget/DialogRateEdit dijit/InlineEditBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G){return r("webview/admin/schedules/ScheduleTreeItem",[m,p,k,n],{templateString:A,_colorPicker:null,_dialogRateEdit:null,editMenu:null,scheduleColor:"#4A2150",schedName:"",currency:null,rateString:null,rate:0,total:0,bacnetID:"",systemId:-1,id:"",childItems:null,scheduleDataArray:null,wipe:!1,esDataType:"",cbNode:null,colourSet:!1,depth:-1,parent:null,hiddenFields:null,indentSize:30,defaultColours:null,MAX_NAME_LENGTH:50,constructor:function(){this.webviewStrings=
x;this.rcStrings=v;this.errorStrings=w},postCreate:function(){this.inherited(arguments);this.scheduleDataArray=[];this.hiddenFields={};if(null===this.defaultColours||void 0===this.defaultColours)this.defaultColours="#2C97DE #E94B35 #F2C500 #008D9C #0F527D #CB10B7 #336633".split(" ");this.buildEditMenu();a.set(this.scheduleColorIndicator,"backgroundColor",this.scheduleColor);this.cbNode=new g({},this.scheduleTreeCBContainer);u.add(this.cbNode.domNode,"tree-item-checkbox");this.createHiddenFields();
this.setOnClicks();this._showChildren(this,!0);this.setValue("schedName",C.encode(this.schedName));this.set("rate",this.rate)},_setSchedNameAttr:function(a){this._set("schedName",a.replace(/[\n\r]/g," "))},buildEditMenu:function(){null!==this.editMenu&&(this.editMenu=null);this.editMenu=new h({baseClass:"webviewContextMenu"});this.editMenu.addChild(new l({label:this.webviewStrings.editScheduleName,baseClass:"webviewContextMenuItem",onClick:c.hitch(this,this.editSchedName)}));this.editMenu.addChild(new l({label:this.webviewStrings.defaultColour,
baseClass:"webviewContextMenuItem",onClick:c.hitch(this,function(){this.colourSet=!1;this.setDepth(this.depth,this.indentSize,!0);this.onChange()})}));this.editMenu.addChild(new l({label:this.webviewStrings.setScheduleColour,baseClass:"webviewContextMenuItem",onClick:c.hitch(this,this.openColourPicker)}));this.esDataType===E.primitiveTypes.ENUMERATED&&this.editMenu.addChild(new l({label:this.webviewStrings.setScheduleRate,baseClass:"webviewContextMenuItem",onClick:c.hitch(this,this.openRateEditor)}));
this.editMenu.addChild(new l({label:this.webviewStrings.editScheduleDelete,baseClass:"webviewContextMenuItem",onClick:c.hitch(this,this.remove)}));new d({showLabel:!1,dropDown:this.editMenu,iconClass:"rc24Icon editIcon",baseClass:"webviewDropDownButton"},this.enableEditNode)},buildColourPicker:function(){null===this._colorPicker&&(this._colorPicker=new D({value:this.scheduleColor,showHsv:!1,webSafe:!1,baseClass:"rcColorPicker",liveUpdate:!0},this.colorPickerNode),this.own(z(this._colorPicker,"blur",
c.hitch(this,this.onColorUpdated))),this.own(z(this._colorPicker,"click",c.hitch(this,this.onColorUpdated))),this.own(z(this._colorPicker.cursorNode,"click",c.hitch(this,this.onColorUpdated))),this.own(z(this._colorPicker.hexCode,"keyup",c.hitch(this,function(a){7===a.target.value.length&&this._colorPicker.set("value",a.target.value)}))))},onColorUpdated:function(){var b=this._colorPicker.get("value");u.add(this.colorPickerContainer,"hidden");this._colorPicker.Rval.blur();this._colorPicker.Bval.blur();
this._colorPicker.Gval.blur();this.colourSet=!0;if(b.toLowerCase()!==this.scheduleColor.toLowerCase().trim())this.onChange();this.scheduleColor=this._colorPicker.get("value");a.set(this.scheduleColorIndicator,"backgroundColor",this.scheduleColor);this.onEditModeChange(!1)},buildRateDialog:function(){null===this._dialogRateEdit&&(this._dialogRateEdit=new G({value:this.rate,valueName:this.schedName}),this.own(b.after(this._dialogRateEdit._dialog,"hide",c.hitch(this,function(){this.onEditModeChange(!1)}))))},
createHiddenFields:function(){this.hiddenFields.schedNameTB=this.scheduleName;this.own(this.scheduleName.watch("value",c.hitch(this,function(a,b,c){c=C.encode(c);c!==b&&this.setValue("schedName",c)})))},setOnClicks:function(){this.own(z(this.scheduleColorIndicator,"click",c.hitch(this,this.openColourPicker)),z(window,"click",c.hitch(this,this._closeScheduleNameEditor)));this.own(z(this.expandNode,"click",c.hitch(this,function(){u.contains(this.expandNode,"expandIcon")?this._showChildren(this,!0):
u.contains(this.expandNode,"collapseIcon")&&this._showChildren(this,!1)})));this.own(z(this.editNodeIcon,"click",c.hitch(this,function(){"none"!==a.get(this.editMenu,"display")&&null!==this.editMenu&&this.editMenu.focus()})))},openColourPicker:function(){this.buildColourPicker();this.onEditModeChange(!0);u.remove(this.colorPickerContainer,"hidden");this._colorPicker.value=this.scheduleColor;this._colorPicker.startup();this._colorPicker.focus()},openRateEditor:function(){this.buildRateDialog();this.onEditModeChange(!0);
this._dialogRateEdit.show(this.rate,this)},editSchedName:function(){this.scheduleName.edit()},revertPendingChanges:function(){this.setValue("schedName",this.schedName);this.onEditModeChange(!1)},setValue:function(a,b){if("rate"===a)this.set("rate",b);else{if("schedName"===a){if(b.length>this.MAX_NAME_LENGTH){this.hiddenFields.schedNameTB.set("value",this.schedName);B.publish("sticky",{type:"info",message:y.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])});return}if(this.schedName!==
b)this.onChange();this.scheduleName.set("value",C.decode(b))}this[a]=C.decode(b)}},onEditModeChange:function(a){u.toggle(this.domNode,"dojoDndItem",!a);this.emit("editModeChange",a)},modifyChildren:function(b,c){for(var d=0;d<this.childItems.length&&this.childItems[d].id!==b.id;d++);c?this.childItems.splice(d,1):(d<this.childItems.length&&this.childItems.splice(d,1),this.childItems.push(b));0<this.childItems.length?a.set(this.expandNode,"visibility","visible"):a.set(this.expandNode,"visibility","hidden")},
getData:function(a,b){a||(this.scheduleDataArray=[],a=this,b=this.scheduleDataArray);for(var c=0;c<a.childItems.length;c++){a.childItems[c].scheduleDataArray=[];var d=this.getData(a.childItems[c],a.childItems[c].scheduleDataArray);0>=f.filter(b,function(a){return a.uniqueId===d.uniqueId}).length&&b.push(d)}return{uniqueId:a.objId,label:C.encode(a.schedName),mnemonic:a.bacnetID,systemId:a.systemId,color:a.scheduleColor,rate:this.esDataType===E.primitiveTypes.ENUMERATED?a.rate:0,wipe:a.wipe,schedules:b}},
_closeScheduleNameEditor:function(a){this.scheduleName.editing&&!1===("INPUT"===a.target.nodeName||u.contains(a.target,"rcTextBox"))&&this.scheduleName.save()},_showChildren:function(a,b){b?(u.remove(a.expandNode,"expandIcon"),u.add(a.expandNode,"collapseIcon")):(u.add(a.expandNode,"expandIcon"),u.remove(a.expandNode,"collapseIcon"));f.forEach(a.childItems,c.hitch(this,function(a){u.toggle(a.domNode,"collapsedChild",!b);0<a.childItems.length&&this._showChildren(a,b)}))},setInvalid:function(){u.add(this.contentNode,
"invalid")},setDepth:function(b,c,d){var f=void 0!==this.depth&&this.depth!==b;this.depth=b;if(f||d)this.scheduleColor=this.getDefaultColour(),this.buildColourPicker(),this._colorPicker.set("value",this.scheduleColor);a.set(this.scheduleColorIndicator,"backgroundColor",this.scheduleColor);b=a.get(this.expandNode,"width");d=c*this.depth;a.set(this.contentNode,"marginLeft",d+b+"px");a.set(this.expandNode,"marginLeft",d+"px");if(0<this.childItems.length)for(b=0;b<this.childItems.length;b++)this.childItems[b].setDepth(this.depth+
1,c)},_setRateAttr:function(a){var b="";0<a&&(null!==this.currency&&F.CurrencyToSymbol.hasOwnProperty(this.currency)?this.rateString=t.format(a,{currency:this.currency,symbol:F.CurrencyToSymbol[this.currency]}):this.rateString=a.toFixed(2),b=this.rateString+x.scheduleRate);if(0<this.total)var c="",c=null!==this.currency&&F.CurrencyToSymbol.hasOwnProperty(this.currency)?t.format(this.total,{currency:this.currency,symbol:F.CurrencyToSymbol[this.currency]}):this.total.toFixed(2),c=[" (",c,x.scheduleRate,
" ",this.rcStrings.rtrTotal.toLowerCase(),")"],b=b+c.join("");q.set(this.rateLabel,"innerHTML",b);q.set(this.rateLabel,"title",b);u.toggle(this.rateLabel,"hidden",0===a&&0===this.total);if(this.rate!==a)this.onRateChange(a);this.rate=a},_setTotalAttr:function(a){this.total=a;this.set("rate",this.rate)},onRateChange:function(a){this.emit("rateChange",a);this.onChange()},onChange:function(){this.emit("change",null)},getDefaultColour:function(){return this.defaultColours[this.depth%this.defaultColours.length]},
remove:function(){this.emit("delete",this)},destroy:function(){this.inherited(arguments);this.hiddenFields=null}})})},"dojo/currency":function(){define("./_base/array ./_base/lang ./number ./i18n ./i18n!./cldr/nls/currency ./cldr/monetary".split(" "),function(p,m,k,h,g,d){var l={};m.setObject("dojo.currency",l);l._mixInDefaults=function(f){f=f||{};f.type="currency";var g=h.getLocalization("dojo.cldr","currency",f.locale)||{},c=f.currency,b=d.getData(c);p.forEach(["displayName","symbol","group","decimal"],
function(d){b[d]=g[c+"_"+d]});b.fractional=[!0,!1];return m.mixin(b,f)};l.format=function(d,g){return k.format(d,l._mixInDefaults(g))};l.regexp=function(d){return k.regexp(l._mixInDefaults(d))};l.parse=function(d,g){return k.parse(d,l._mixInDefaults(g))};return l})},"dojo/cldr/monetary":function(){define(["../_base/kernel","../_base/lang"],function(p,m){var k={};m.setObject("dojo.cldr.monetary",k);k.getData=function(h){var g={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,
ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:2,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0}[h];h={}[h];"undefined"==typeof g&&(g=2);"undefined"==typeof h&&(h=0);return{places:g,round:h}};return k})},"webview/admin/widget/DialogRateEdit":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/string dojo/text!webview/admin/widget/templates/DialogRateEdit.html dojo/_base/declare dijit/Dialog dijit/form/ValidationTextBox dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r){return r("rc/reliable/_group/DialogEdit",[m,p,k],{value:null,valueName:null,templateString:f,webviewStrings:d,rcStrings:g,treeItem:null,buildRendering:function(){this.inherited(arguments);this._valueRate.set("invalidMessage",l.substitute(this.webviewStrings.valueMustHaveLessThanXDecimal,["2"]));h.set(this.errorTextContainer,"innerHTML",l.substitute(this.webviewStrings.valueMustHaveLessThanXDecimal,["2"]))},postCreate:function(){this.inherited(arguments);this._errorDialog.set("title",
g.invalidInput)},show:function(c,b){void 0!==c&&(this.value=c);null!==this.valueName&&(this._dialog.titleNode.innerHTML=this.webviewStrings.setScheduleRateDlg+this.valueName);this.treeItem=b;this._valueRate.set("value",this.value.toFixed(2));this._dialog.show();this._valueRate.focus();this._valueRate.focusNode.select()},_onClickCancel:function(){this._dialog.hide()},_onClickOk:function(){this._valueRate.isValid()?(this.treeItem.set("rate",Number(this._valueRate.value)),this._dialog.hide()):this._errorDialog.show()},
_closeErrorDialog:function(){this._errorDialog.hide()}})})},"webview/admin/trees/NavTreeAvatar":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-attr dojo/text!webview/admin/trees/templates/navTreeAvatar.html dojox/html/entities ./NavTreeItem".split(" "),function(p,m,k,h,g,d,l,f){return h("webview/admin/trees/NavTreeAvatar",[m,p,k,f],{templateString:d,Initialize:function(){""===this.displayName&&(this.displayName=this.pointName+" ("+
this.pointMnemonic+")");g.set(this.domNode,"title",l.decode(this.buildTitleText()));g.set(this.displayLabel,"innerHTML",this.displayName);this.setIconImage()}})})},"webview/admin/schedules/NavScheduleToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/text!webview/admin/schedules/templates/NavScheduleToolbar.html ../_Widget".split(" "),function(p,m,k,h,g,d,l,f){return p("webview/admin/Schedule/NavScheduleToolbar",
[f],{templateString:l,_buttons:null,constructor:function(){this.webviewStrings=g;this.nlsStrings=h},postCreate:function(){this.inherited(arguments);this._setupOnClicks()},_setupOnClicks:function(){this.own(d(this.selectAllButton.toolbarButtonIcon,"click",m.hitch(this,this._onSelectAllClicked)),d(this.deleteButton.toolbarButtonIcon,"click",m.hitch(this,this.onDeleteClicked)),d(this.saveButton.toolbarButtonIcon,"click",m.hitch(this,this.onSaveClicked)),d(this.cancelButton.toolbarButtonIcon,"click",
m.hitch(this,this.onCancelClicked)),d(this.viewButton.toolbarButtonIcon,"click",m.hitch(this,function(){if(!this.viewButton.get("disabled"))this.onViewClicked()})),d(this.viewButton.toolbarButtonIcon,"click",m.hitch(this,this.onCancelSaveClicked)))},showCancelOption:function(d){d?(this.disableCancelSaveOption(!1),k.remove(this.cancelSaveButton.domNode,"hidden"),k.add(this.saveButton.domNode,"disabled"),k.add(this.cancelButton.domNode,"hidden")):(k.add(this.cancelSaveButton.domNode,"hidden"),k.remove(this.saveButton.domNode,
"disabled"),k.remove(this.cancelButton.domNode,"hidden"))},disableCancelSaveOption:function(d){this.cancelSaveButton.set("disabled",d)},_onSelectAllClicked:function(){this.onSelectAllClicked(this._isSelectAll);var d,c;this._isSelectAll?(d="selectAllIcon",c="deselectAllIcon"):(d="deselectAllIcon",c="selectAllIcon");k.remove(this.selectAllButton.toolbarButtonIcon,d);k.add(this.selectAllButton.toolbarButtonIcon,c);this._isSelectAll=!this._isSelectAll},onSelectAllClicked:function(d){this.emit("selectAllClicked");
return d},onDeleteClicked:function(){this.emit("deleteClicked");this.resetSelectAll()},onSaveClicked:function(){this.emit("saveClicked")},onCancelClicked:function(){this.emit("cancelClicked")},onViewClicked:function(){this.emit("viewClicked");this.viewButton.tooltip.close()},onCancelSaveClicked:function(){this.emit("cancelSaveClicked")},resetSelectAll:function(){this._isSelectAll=!0;k.remove(this.selectAllButton.toolbarButtonIcon,"deselectAllIcon");k.add(this.selectAllButton.toolbarButtonIcon,"selectAllIcon")}})})},
"webview/admin/users/Users":function(){define("dgrid/selector dojo/_base/declare dojo/_base/lang dojo/hash dojo/i18n!rc/nls/all dojo/i18n!../../nls/afterHoursReport dojo/i18n!../../nls/all dojo/i18n!../../nls/roles dojo/io-query dojo/json dojo/text!./templates/users.html ./_UsersBase ./UsersListBase ./UserToolbar ./UserListToolbar ../../widget/CommitButtons".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q){return m("webview/admin/users/Users",[t,q],{_dataPath:"Users",_gridFilter:"",_gridString:l.wvUser,
_hash:"#users",_sortAttribute:"userId",editTemplate:b,rcStrings:g,roleStrings:f,postCreate:function(){this.inherited(arguments);sessionStorage.removeItem("userIds");webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#User"}],this.title);null!==this.userSystem&&(this._gridToolbar.set("filter",{systemsAssigned:[this.userSystem]}),this._gridFilter=c.stringify({systemsAssigned:[this.userSystem]}))},_buildGridStructure:function(){return[p({selectorType:k.hitch(this,this._createSelectorCheckbox),
id:"selectorCol",label:"",field:"id",sortable:!1}),{id:"userIdCol",label:this.webviewStrings.userName,field:"userId",searchable:!0,formatter:k.hitch(this,this._formatName)},{id:"displayNameCol",label:this.webviewStrings.displayName,field:"name",searchable:!0,formatter:k.hitch(this,this._formatEncodedName)},{id:"permittedSystemsCol",label:this.webviewStrings.permittedSystems,altName:this.webviewStrings.systems,field:"systemsAssigned",filter:!0,sortable:!1,searchable:!1,renderCell:k.hitch(this,this._renderSystemTags)},
{id:"treeCol",label:this.webviewStrings.tree,field:"treeName",searchable:!0,formatter:k.hitch(this,this._formatEncodedName)},{id:"reportTemplateCol",label:d.reportTemplate,field:"reportTemplateName",searchable:!0,formatter:k.hitch(this,this._formatEncodedName)},{id:"homeGroupCol",label:this.webviewStrings.homeGroup,field:"homeGroup",searchable:!0,formatter:k.hitch(this,this._formatEncodedName)},{id:"myControlHomeGroupCol",label:this.webviewStrings.myControlGroup,field:"myControlGroup",searchable:!0,
formatter:k.hitch(this,this._formatEncodedName)},{id:"roleCol",label:this.webviewStrings.roleLabel,field:"roles",sortable:!1,searchable:!1,formatter:k.hitch(this,this._formatUserRoles)},{id:"lastLoginCol",label:this.webviewStrings.lastLogin,field:"lastLogin",searchable:!1}]},_createDeleteParams:function(b){return{siteId:this.site,userIds:b}},_formatUserRoles:function(b){var a="";if(0<b.length&&3>=b.length)a=b.map(function(a){return a.roleName}).join(", ");else if(3<b.length)return b.length+" "+this.webviewStrings.roleLabel;
return a},_gotoPermittedSchedule:function(){sessionStorage.setItem("userIds",Object.keys(this.grid.selection));var b=this._dataPath+"/PermittedSchedules?"+r.objectToQuery({site:this.site});h(b)},_onClickItemName:function(b){if(b=this.grid.cell(b.target).row.data)this.userID=b.userId,this.ID=b.id,this.goToLoginInfo()},_toggleGridToolbar:function(b){var a=[],c=null,d=!1,f=!1,g=!1,h;for(h in b.grid.selection)b.grid.selection[h]&&(a.push(h),c=b.grid.store.get(h),0<c.roles.length&&(g=!0),"admin"!==c.userId.toLowerCase()&&
(d=!0,"public"!==c.userId.toLowerCase()&&(f=!0)));this._gridToolbar.toggleButtons(0===a.length?this._gridToolbar.selectionType.NONE:a.length!==this.grid._rowsOnPage?this._gridToolbar.selectionType.SOME:this._gridToolbar.selectionType.ALL,d,f,g)}})})},"webview/admin/users/_UsersBase":function(){define("dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/cookie dojo/dom-class dojo/hash dojo/i18n!../../nls/roles dojo/io-query dojo/on dojo/promise/all dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!webview/admin/users/templates/_basePost.html dojo/text!webview/admin/users/templates/_basePre.html dojo/topic dojox/html/entities ./UsersBase ../../widget/WarningDialog ../../widget/WarningDialogEnums dijit/form/Button ../widget/AdminToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A){return k("webview/admin/users/_UserBase",z,{confirmResetDialog:null,editTemplate:"",ID:null,name:"",nameOfIndividual:"userID",postTemplate:n,preTemplate:v,roleStrings:f,saveDeferred:null,userID:"",wizardStarted:!1,_hash:"#users",_path:"users/",_systemList:null,setupWizardPermissions:{roleMask:-15734817,roleMask2:42,permissions:{accessLevel:3,autoLogoffTime:15,customHelpURL:"",helpGuid:""}},permissionsMap:{changeEndUser:{maskIdx:"endUser",enabled:!1,
attachPoint:"endUserValues"},changeOperator:{maskIdx:"operator",enabled:!1,attachPoint:"operatorValues"},userEnabled:{maskIdx:"userEnabled",enabled:!0,attachPoint:"userEnabled"},manageNavigationGroups:{maskIdx:"navGroupAdmin",enabled:!1,attachPoint:"manageNavGroup"},viewAlarms:{maskIdx:"viewAlarms",enabled:!1,attachPoint:"viewAlarms"},editScheduleTree:{maskIdx:"entSchedAdmin",enabled:!1,attachPoint:"editScheduleTree"},manageNavigationTrees:{maskIdx:"navTreeAdmin",enabled:!1,attachPoint:"manageNavTree"},
manageSystems:{maskIdx:"admin",enabled:!1,attachPoint:"manageSystems"},manageUsers:{maskIdx:"usersAdmin",enabled:!1,attachPoint:"manageUsers"},showLogon:{maskIdx:"showLogout",enabled:!1,attachPoint:"showLogon"},bacnetAdvChg:{maskIdx:"bacnetAdvChg",enabled:!1,attachPoint:"bacnetAdvChg"},notClassChg:{maskIdx:"notChg",enabled:!1,attachPoint:"notClassChg",isExtended:!0},changeArrays:{maskIdx:"aryChg",enabled:!1,attachPoint:"changeArrays"},changeCalendar:{maskIdx:"asChg",enabled:!1,attachPoint:"calendars"},
changeWeeklySchedules:{maskIdx:"wsChg",enabled:!1,attachPoint:"weeklySchedules"},changeTrendlogs:{maskIdx:"editTrendlogs",enabled:!1,attachPoint:"trendlogWorksheet"},changeExceptionSchedules:{maskIdx:"esChg",enabled:!1,attachPoint:"exceptionSchedules"},changeVariables:{maskIdx:"varChg",enabled:!1,attachPoint:"changeVariables"},changeLoops:{maskIdx:"conChg",enabled:!1,attachPoint:"pidLoops"},changeOutputs:{maskIdx:"outChg",enabled:!1,attachPoint:"changeOutputs"},popupAlarms:{maskIdx:"alarmDisable",
enabled:!1,attachPoint:"popupAlarms"},changeDateTime:{maskIdx:"setTime",enabled:!1,attachPoint:"changeDateTime"},autoLogoff:{maskIdx:"autoLogout",enabled:!1,attachPoint:"autoLogOff"},mustEnterChange:{maskIdx:"reasonReq",enabled:!1,attachPoint:"mustExplain"},changeAutoManual:{maskIdx:"autoManual",enabled:!1,attachPoint:"auto"},ackAlarms:{shift:29,maskIdx:"alarmAck",enabled:!1,attachPoint:"ackAlarms"},viewAudit:{shift:30,maskIdx:"audit",enabled:!1,attachPoint:"auditTrail"},changeInputs:{shift:31,maskIdx:"inChg",
enabled:!1,attachPoint:"changeInputs"},modifyAfterHoursEvents:{maskIdx:"modifyAfterHoursEvents",enabled:!1,attachPoint:"modifyAfterHoursEvents",isExtended:!0},approveAfterHoursEvents:{maskIdx:"approveAfterHoursEvents",enabled:!1,attachPoint:"approveAfterHoursEvents",isExtended:!0},modifyDefaultSchedule:{maskIdx:"modifyDefaultSchedule",enabled:!1,attachPoint:"modifyDefaultSchedule",isExtended:!0},viewAfterHoursReport:{maskIdx:"viewAfterHoursReport",enabled:!1,attachPoint:"viewAfterHoursReport",isExtended:!0},
configureEventPriority:{maskIdx:"configureEventPriority",enabled:!1,attachPoint:"configureEventPriority",isExtended:!0},configureAfterHoursEventReporting:{maskIdx:"configureAfterHoursEventReporting",enabled:!1,attachPoint:"configureAfterHoursEventReporting",isExtended:!0},administerReportTemplates:{maskIdx:"administerReportTemplates",enabled:!1,attachPoint:"administerReportTemplates",isExtended:!0},programsWorksheet:{maskIdx:"programsWorksheet",enabled:!1,attachPoint:"programsWorksheet",isExtended:!0},
accessPrograms:{maskIdx:"accessPrograms",enabled:!1,attachPoint:"accessPrograms",isExtended:!0},modifyPrograms:{maskIdx:"modifyPrograms",enabled:!1,attachPoint:"modifyPrograms",isExtended:!0},enableDisablePrograms:{maskIdx:"enableDisablePrograms",enabled:!1,attachPoint:"enableDisablePrograms",isExtended:!0},sendMultiplePrograms:{maskIdx:"sendMultiplePrograms",enabled:!1,attachPoint:"sendMultiplePrograms",isExtended:!0},popupAHAC:{maskIdx:"popupAHAC",enabled:!1,attachPoint:"popupAHAC",isExtended:!0},
panFileBackup:{maskIdx:"panFileBackup",enabled:!1,attachPoint:"panFileBackup",isExtended:!0},panFileRestore:{maskIdx:"panFileRestore",enabled:!1,attachPoint:"panFileRestore",isExtended:!0},panFileOverwrite:{maskIdx:"panFileOverwrite",enabled:!1,attachPoint:"panFileOverwrite",isExtended:!0},cleanUpAlarmHistory:{maskIdx:"cleanUpAlarmHistory",enabled:!1,attachPoint:"cleanUpAlarmHistory",isExtended:!0}},_USER_ENABLED_MASK:-268435457,_MAX_FILE_UPLOAD_SIZE_IN_MB:16,_FULL_PERMISSION_PUBLIC_USER_ROLEMASK:1875905559,
_ADMIN_PERMISSION_ROLE_MASK:-110100513,constructor:function(){this.templateString=this.preTemplate+this.editTemplate+this.postTemplate},postCreate:function(){this.inherited(arguments);this.isAdmin()&&!rc.session.isAdminUser()&&this._disableToolbarButtons()},getWizardUnknowns:function(){var a=[{name:"site",value:this.site},{name:this.nameOfIndividual,value:this.userID}];this.userSystem&&this.userSystem.length&&a.push({name:"system",value:this.userSystem});return a},goToAddSystem:function(a){window.location.hash=
this._buildHash("#AddSystem")},goToLoginInfo:function(a){a=this._buildHash("#Users/LoginInfo");a+="\x26userID\x3d"+encodeURIComponent(this.userID);a+="\x26ID\x3d"+this.ID;window.location.hash=a},goToList:function(a){window.location.hash=this._buildHash("#Users")},goToPermissions:function(a){a=this._buildHash("#Users/Permissions");a+="\x26userID\x3d"+encodeURIComponent(this.userID);a+="\x26ID\x3d"+this.ID;window.location.hash=a},goToRoleList:function(){var a=r.objectToQuery({site:this.site});l("#rolesList?"+
a)},hasPermission:function(a,b,c){var d=!1;return d=c?!!(rc.session.roles2[a]&b):!!(rc.session.roles[a]&b)},isAdmin:function(){return this.userID&&"admin"===this.userID.toLowerCase()},isPublic:function(){return this.userID&&"public"===this.userID.toLowerCase()},isSiteAdmin:function(){var a=rc.session.adminRoles.admin|rc.session.adminRoles.usersAdmin;return(this.originalRoleMask&a)===a},isUserWizard:function(){return rc.setupWizard&&"webview/widget/AdminUserWizard"===rc.setupWizard.declaredClass},
isUserWizardRunning:function(){if(rc.setupWizard)return this.isUserWizard();var a=g("wiz");if(a&&"AdminUserWizard"===a)return!0},onDestroyWizard:function(){this.inherited(arguments);this.wizardStarted=!1;this.domNode&&this.buttonBar&&d.remove(this.buttonBar.domNode,"hidden")},onSendComplete:function(a){this.emit("sendComplete",a);rc.setupWizard&&!this.isUserWizard()&&rc.setupWizard.next(this.getWizardUnknowns(),{})},onStartWizard:function(){this.inherited(arguments)},resetUser:function(){this._showConfirmResetDialog();
var a=c(this.confirmResetDialog,"close",h.hitch(this,function(b){switch(b){case A.returnValues.oneOrYes:this._sendResetUser(this.ID);break;case A.returnValues.allOrNo:break;default:console.error(this.declaredClass+" - _onResetItems(): Unknown choice",b)}a.remove()}))},_buildConfirmResetDialog:function(){null===this.confirmResetDialog&&(this.confirmResetDialog=new y({type:A.types.binaryConfirm,title:this.webviewStrings.confirmResetAction}))},_buildFetchParams:function(){},_buildHash:function(a){a+=
"?site\x3d"+encodeURIComponent(this.site);this.userSystem&&(a+="\x26system\x3d"+encodeURIComponent(this.userSystem));return a},_createDropdownSelector:function(b,c,d,f){var g=null;d.data.dataArray?g=d.data.dataArray:d.data.templates&&(g=d.data.templates);f&&g.splice(0,0,{name:this.webviewStrings.none,value:-1,id:null});m.forEach(g,function(a){a.id=a.value?a.value:a.name;a.name=w.decode(a.name)});c?m.forEach(g,h.hitch(this,function(a){try{c.add(a)}catch(I){}})):c=new a(new u({data:g}));return new p({title:"",
store:c,searchAttr:"name",value:f?"None":"",required:!1,baseClass:"rcSelectBox form-input"},b)},_disableToolbarButtons:function(){this.buttonBar.set("changesDisabled",!0)},_fetchUserInfo:function(){if(!this._beginUpdate())return null;var a={type:"rest",method:"GET",path:"user/",siteId:this.site,userID:Number(this.ID),user:this.userID||""},c=this._getChangeApproval(),a=rc.xhr.request(a);b({userInfo:a,approval:c}).then(h.hitch(this,function(a){200===a.userInfo.data.errStatus&&200===a.approval.errStatus?
this.fillFields(a):console.error(this.declaredClass+" - _fetchUserInfo(): Error Returned",a.userInfo.data);return a}),h.hitch(this,function(a){this._onInitError(a);return a})).always(h.hitch(this,this._endUpdate));return a},_getFormData:function(){this._send({path:"user/",type:"rest",method:"get",siteId:this.site,userID:null!==this.ID?Number(this.ID):-1,user:this.userID},"all").then(h.hitch(this,this.onInitSuccess))},_getSystemObjFromId:function(a){for(var b in this._systemList)if(this._systemList[b].id===
a)return this._systemList[b];return{}},_hasAllSystems:function(a){var b=!1;if(a.length===this._systemList.length-1)for(var b=!0,c=1;c<this._systemList.length;c++)if(-1===a.indexOf(this._systemList[c])){b=!1;break}return b},_sendResetUser:function(a){a=q.put(this._path+"/Reset",{handleAs:"json",data:{userIds:a}});a.then(h.hitch(this,function(a){200!==a.errStatus?this._displayError(a):this._fetchUserInfo()}));return a},_setNameAttr:function(a){this.name=a},_showConfirmResetDialog:function(){null===
this.confirmResetDialog&&this._buildConfirmResetDialog();var a=this.webviewStrings.confirmResetUsers+"\x3cbr /\x3e\x3cbr /\x3e\x3cul\x3e",a=a+("\x3cli\x3e"+this.userID+"\x3c/li\x3e"),a=a+("\x3c/ul\x3e"+this.webviewStrings.sureToContinue);this.confirmResetDialog.set("text",a);this.confirmResetDialog.open()},_showHidePublicUserFields:function(){var a=t(".nonPublicField",this.loginInfoContainer),b=t(".nonPublicField",this.permissionsContainer),a=a.concat(b),c=this.isPublic();m.forEach(a,h.hitch(this,
function(a){d.toggle(a,"hidden",c)}))},_showError:function(a){x.publish("alert",{type:"error",message:a})},destroy:function(){this.inherited(arguments);this.confirmResetDialog&&(this.confirmResetDialog=null)}})})},"webview/admin/users/UserToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/cookie dojo/Deferred dojo/dom-class dojo/hash dojo/i18n!../../nls/alarms dojo/i18n!../../nls/all dojo/i18n!../../nls/roles dojo/io-query dojo/on dojo/query dojo/request/xhr dojo/text!./templates/UserToolbar.html ../_Widget ../../widget/WarningDialog ../../widget/WarningDialogEnums dijit/form/Button ../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v){return p("webview/admin/users/UserToolbar",[a],{templateString:u,alarmsStrings:l,isIndividualUser:!1,isSelectAll:!0,roleStrings:r,webviewStrings:f,_hasSystems:!1,_systemRequestPending:!0,_systemWarningDialog:null,postCreate:function(){this.inherited(arguments);this._checkForSystems();this._setupEmitters()},_setChangesDisabledAttr:function(a){this.saveButton.set("disabled",a);this.selectAllButton.set("disabled",a);this._set("changesDisabled",a)},_setDirtyAttr:function(a){g.replace(this.saveButton.toolbarButtonIcon,
a?"dirtySaveIcon":"saveIcon",a?"saveIcon":"dirtySaveIcon");this._set("dirty",a)},_setHasIconButtonsAttr:function(a){[this.selectAllButton,this.saveButton,this.cancelButton].forEach(function(b){g.toggle(b.domNode,"hidden",!a);b.set("disabled",!a)});a&&this.set("hasSelectAll",this.hasSelectAll);this._set("hasIconButtons",a)},_setHasResetAttr:function(a){a=!1;g.toggle(this.resetButton.domNode,"hidden",!a);this.resetButton.set("disabled",!a);this._set("hasReset",a)},_setHasSelectAllAttr:function(a){g.toggle(this.selectAllButton.domNode,
"hidden",!a);this.selectAllButton.set("disabled",!a);this._set("hasSelectAll",a)},_setIsIndividualUserAttr:function(a){[this.permissionsButton,this.loginInfoButton].forEach(function(b){g.toggle(b.domNode,"hidden",!a);b.set("disabled",!a)});this._set("isIndividualUser",a)},_setIsVisibleAttr:function(a){g.toggle(this.domNode,"hidden",!a);this._set("isVisible",a)},_setIsSelectAllAttr:function(a){a?(g.replace(this.selectAllButton.toolbarButtonIcon,"selectAllIcon","deselectAllIcon"),this.selectAllButton.tooltip.set("label",
this.webviewStrings.selectAll)):(g.replace(this.selectAllButton.toolbarButtonIcon,"deselectAllIcon","selectAllIcon"),this.selectAllButton.tooltip.set("label",this.webviewStrings.deselectAll));this._set("isSelectAll",a)},_setSelectedButtonAttr:function(a){"undefined"!==typeof this[a]&&(t(".selected",this.buttonsContainer).forEach(function(a){g.remove(a,"selected")}),g.add(this[a].domNode,"selected"))},disableAll:function(){this._onNavigate=function(){};[this.saveButton,this.selectAllButton,this.cancelButton].forEach(function(a){a.set("disabled",
!0)})},onCancel:function(){this.emit("cancel")},onReset:function(){this.emit("reset")},onSave:function(){this.emit("save")},onSelectAll:function(a){this.emit("selectAll",a)},_checkForSystems:function(){var a=q.get("systems",{handleAs:"json",query:{siteId:this.site}});this.own(a);a.then(m.hitch(this,function(a){this._systemRequestPending=!1;this._hasSystems=a.errStatus===this.SuccessCode?0<a.dataArray.length:!1}),m.hitch(this,function(){this._hasSystems=this._systemRequestPending=!1}))},_gotoAdd:function(){this._systemRequestPending?
this.defer(m.hitch(this,this._gotoAdd),250):this._hasSystems?this._onNavigate("add"):this._showSystemWarningDialog().then(m.hitch(this,this._onNavigate,"systemAdd"))},_onNavigate:function(a){var b={site:this.site},f="";switch(a){case "usersList":f="users?";break;case "add":k("user",c.queryToObject(d()).userID,{path:"/"});b.ID="-1";f="#Users/AddUser?";break;case "permission":b.userID=this.userID;b.ID=this.ID;f="#Users/Permissions?";break;case "info":b.userID=this.userID;b.ID=this.ID;f="#Users/LoginInfo?";
break;case "rolesList":f="#rolesList?";break;case "systemAdd":f="#AddSystem?"}a=c.objectToQuery(b);d(f+a)},_setupEmitters:function(){this.own(b(this.usersListButton.domNode,"click",m.hitch(this,this._onNavigate,"usersList")),b(this.addUserButton.domNode,"click",m.hitch(this,this._gotoAdd)),b(this.permissionsButton.domNode,"click",m.hitch(this,function(){this.permissionsButton.get("disabled")||this._onNavigate("permission")})),b(this.loginInfoButton.domNode,"click",m.hitch(this,function(){this.loginInfoButton.get("disabled")||
this._onNavigate("info")})),b(this.rolesListButton.domNode,"click",m.hitch(this,this._onNavigate,"rolesList")),b(this.saveButton.domNode,"click",m.hitch(this,function(){if(!this.saveButton.get("disabled"))this.onSave()})),b(this.selectAllButton.domNode,"click",m.hitch(this,function(){this.selectAllButton.get("disabled")||this._toggleSelectAll()})),b(this.cancelButton.domNode,"click",m.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancel()})))},_showSystemWarningDialog:function(){var a=
new h;this.own(a);null===this._systemWarningDialog&&(this._systemWarningDialog=new n({title:this.webviewStrings.cannotAddUser,type:v.types.binary,text:this.webviewStrings.newUserNoSystemWarning,closeButtonVisible:!1}),this._systemWarningDialog.dialogButtonsOneOrYes.set("label",this.webviewStrings.addSystem));var b=this._systemWarningDialog.on("close",m.hitch(this,function(c){switch(c){case v.returnValues.oneOrYes:a.resolve();break;case v.returnValues.none:a.reject();break;default:a.reject(),console.error(this.declaredClass+
" - _showSystemWarningDialog(): Invalid choice",c)}b.remove()}));this.own(b);this._systemWarningDialog.open();return a.promise},_toggleSelectAll:function(){this.onSelectAll(this.isSelectAll);this.set("isSelectAll",!this.isSelectAll)}})})},"webview/admin/users/LoginInfo":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-style dojo/hash dojo/i18n!../../nls/afterHoursReport dojo/i18n!../../nls/all dojo/i18n!../../nls/resetPassword dojo/i18n!../../nls/roles dojo/io-query dojo/json dojo/on dojo/promise/all dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!./templates/LoginInfo.html dojo/topic dojox/html/entities dojox/validate rc/_base/util rc/util/notices ./_LoginInfoWizardMixin ./_UsersBase ./RoleManager webview/util/util ../../widget/ChecklistButton ../../widget/RoleTag ../../widget/UserTag ../../widget/WarningDialog ../../widget/WarningDialogEnums ../../xhrEnhanced dijit/form/CheckBox dijit/form/Textarea dijit/form/ValidationTextBox ./widget/ApprovalPassword ./UserToolbar ./widget/LoginGroupSelectors ../../widget/CommitButtons ../../widget/RoleIcon ../../widget/WebviewContentPane dojox/validate/web".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P){return k("webview/admin/users/LoginInfo",[I,G],{editTemplate:A,assignedRoles:[],_hash:"#Users/LoginInfo",_navTreeSelector:null,_navTreeStore:null,_afterHoursTemplateSelector:null,_afterHoursTemplateStore:null,_confirmDialog:null,_permittedSystems:null,_dirtyListeners:[],_roleCBList:null,_roleManager:null,_roleStore:null,_systemCBList:null,_systemList:null,_userType:0,ahacStrings:c,passwordsChanged:!1,watchHandles:[],
webviewStrings:b,resetPasswordStrings:t,roleStrings:q,constructor:function(){this._permittedSystems=[];this._roleStore=new z;this._overrideSpecificErrorMessages()},postCreate:function(){this.inherited(arguments);sessionStorage.removeItem("userIds");if(this.shouldSetContext){var a=this._buildAuditLogTitle();webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#User"+this.ID}],a)}this._unhideUserInfoTabs(!0);l.add(this.buttonBar.loginInfoButton.domNode,"selected");this._showHidePublicUserFields();
this.isAdmin()&&(l.add(this.permittedSystemsContainer,"hidden"),l.add(this.rolesContainer,"hidden"),l.add(this.permittedSchedulesContainer,"hidden"));this._canUserHaveRoles()||x(".roleIcon",this.domNode).forEach(function(a){l.add(a,"hidden")});this._setupValidators();this._addListeners();v({roleData:this._buildRoleStore(),systems:this.buildSystemList(),treeData:this._getDropDownData("trees/",!1),reportData:this._getDropDownData("ReportTemplates/",!1)}).then(h.hitch(this,function(a){this._navTreeStore=
new y(new z);m.forEach(a.treeData.data.dataArray,function(a){a.value=a.id});this._navTreeSelector=this._createDropdownSelector(this.navTreeSelectContainer,this._navTreeStore,a.treeData,!0);d.set(this.navTreeLabel,"for",this._navTreeSelector.id);this._afterHoursTemplateStore=new y(new z);m.forEach(a.reportData.data.templates,function(a){a.value=a.id});this._afterHoursTemplateSelector=this._createDropdownSelector(this.ahacReportSelectContainer,this._afterHoursTemplateStore,a.reportData,!0);d.set(this.ahacReportTemplateLabel,
"for",this._afterHoursTemplateSelector.id);this.isUserWizardRunning()?setTimeout(h.hitch(this,this.onInitSuccess),5):this._getFormData()}));this.approvalPasswordWidget.set("userPassword",this.loginInfoPassword)},_setAssignedRolesAttr:function(a){this._set("assignedRoles",a);this._buildRoleTags()},buildSystemList:function(){return this._buildSystemList().then(h.hitch(this,this._setupControlsWithSystems))},makeClean:function(){this.inherited(arguments);this.buttonBar&&this.buttonBar.set("dirty",!1)},
makeDirty:function(){this.inherited(arguments);this.buttonBar&&this.buttonBar.set("dirty",!0)},_buildAhacTemplateInfo:function(a){a.ahacReportTemplateId=-1!==this._afterHoursTemplateSelector.get("value")?this._afterHoursTemplateSelector.get("value"):null},_buildAuditLogTitle:function(){return this.userID+" "+this.title},_buildHomeGroupInfo:function(a){h.mixin(a,this._loginGroupSelectors.get("homeGroupValues"))},_buildMyControlGroupInfo:function(a){h.mixin(a,this._loginGroupSelectors.get("value"))},
_buildNavTreeInfo:function(a){a.navTree=-1!==this._navTreeSelector.get("value")?this._navTreeSelector.get("value"):null},_buildPermittedSystemsInfo:function(a){var b=[],c;for(c in this._permittedSystems)"undefined"!==typeof this._permittedSystems[c].value&&b.push(this._permittedSystems[c].value);"Admin"===this.userID&&(b=[]);a.systemsAssigned=b},_buildRoleAssigner:function(){this._roleCBList=new J({list:this._roleStore.data.map(function(a){return{isDisabled:a.isDisabled,name:a.name,value:a.id}}),
baseClass:"role-permitted-systems hidden"},this.rolesCBList);this.own(n(this.rolesNode,"click",h.hitch(this,function(){l.remove(this._roleCBList.domNode,"hidden");l.add(this.rolesNode,"hidden");this._roleCBList.focus()})),n(this._roleCBList,"editEnd",h.hitch(this,this._rolesAssignedChanged)))},_buildRoleStore:function(){return w.get("roles/NameIdPairings",{handleAs:"json",preventCache:!0,query:{siteId:this.site}}).then(h.hitch(this,function(a){a.errStatus===this.SuccessCode&&(a=a.roles.map(function(a){return{isDisabled:a.isDisabled,
id:a.roleId,name:a.roleName}}),this._roleStore.setData(a),this._buildRoleAssigner())}))},_buildRoleTags:function(){for(this.rolesTags.firstChild&&this.rolesTags.firstChild.nodeType===Node.TEXT_NODE&&this.rolesTags.removeChild(this.rolesTags.firstChild);this.rolesTags.firstElementChild;){var a=p.byNode(this.rolesTags.firstElementChild);a&&a.destroy()}0===this.assignedRoles.length?d.set(this.rolesTags,"innerHTML",this.roleStrings.noRolesAssigned):this.assignedRoles.forEach(h.hitch(this,this._buildSingleRoleTag))},
_buildRolesAssignedInfo:function(a,b){a.rolesAssigned=b?b.map(h.hitch(this,function(a){a=this._roleStore.get(a);return{isDisabled:a.isDisabled,roleId:a.id,roleName:a.name}})):[]},_buildSingleRoleTag:function(a){if(a=this._roleStore.get(a)){a=new K({isDisabled:a.isDisabled,value:a.id,name:a.name,title:a.name});this.own(n(a,"clickRemove",h.hitch(this,this._roleRemoved)));this.rolesTags.appendChild(a.domNode);var b=a.domNode.firstElementChild.getBoundingClientRect().width,c=a.domNode.lastElementChild.getBoundingClientRect().width;
f.set(a.domNode,"width",b+c+5+"px")}},_buildSystemTags:function(){for(this.systemTags.firstChild&&this.systemTags.firstChild.nodeType===Node.TEXT_NODE&&this.systemTags.removeChild(this.systemTags.firstChild);this.systemTags.firstElementChild;){var a=p.byNode(this.systemTags.firstElementChild);a&&a.destroy()}0===this._permittedSystems.length||this._hasAllSystems(this._permittedSystems)&&2<this._systemList.length?(d.set(this.systemTags,"innerHTML",this.webviewStrings.allSystems),this._permittedSystems=
[]):m.forEach(this._permittedSystems,h.hitch(this,function(a){if(void 0!==a.value){var b=new N({value:a.value,name:a.name,title:a.name});this.own(n(b,"clickRemove",h.hitch(this,function(a){a=this._permittedSystems.indexOf(this._getSystemObjFromId(a.value));this._permittedSystems.splice(a,1);b.destroy();0===this._permittedSystems.length&&(d.set(this.systemTags,"innerHTML",this.webviewStrings.allSystems),this._systemCBList.clearAll());this._permittedSystemsChanged();this.makeDirty()})));this.systemTags.appendChild(b.domNode)}}))},
_createSystemCBList:function(){"Admin"!==this.userID&&(this._systemCBList=new J({list:this._systemList},this.systemCBList),l.add(this._systemCBList.domNode,"hidden"),this.own(n(this._systemCBList,"editEnd",h.hitch(this,function(){var a=this._systemCBList.get("selected"),b=h.clone(this._permittedSystems);this._permittedSystems=[];-1===a.indexOf("*")&&m.forEach(a,h.hitch(this,function(a){a=this._getSystemObjFromId(Number(a));-1===this._permittedSystems.indexOf(a)&&this._permittedSystems.push(a)}));
this._buildSystemTags();-1!==a.indexOf("*")?this._systemCBList.selectAll():a.length===this._systemList.length-1&&this._systemCBList.clearAll();E.arraysAreSame(this._permittedSystems,b)||(this._permittedSystemsChanged(),this.makeDirty());l.remove(this.permittedSystemsNode,"hidden");l.add(this._systemCBList.domNode,"hidden")},this._permittedSystems))),this.own(n(this._systemCBList,"notAny",h.hitch(this,function(){var a=this._systemCBList.get("selected");-1!==a.indexOf("*")?this._permittedSystems=[]:
m.forEach(a,h.hitch(this,function(a){a=this._getSystemObjFromId(Number(a));-1===this._permittedSystems.indexOf(a)&&this._permittedSystems.push(a)}));-1!==a.indexOf("*")&&a.length===this._systemList.length-1?this._systemCBList.toggleSpecific("*"):-1===a.indexOf("*")&&a.length===this._systemList.length-1&&this._systemCBList.selectAll()}))))},_deleteAssignedRoles:function(a){P.del("Users/UserRoles",{handleAs:"json",data:{siteId:this.site,userId:this.ID,roleId:a}}).then(h.hitch(this,function(a){a.errStatus===
this.SuccessCode&&this._fetchUserInfo();this._displayError(a)}))},_displayedAppliedRoles:function(a,b){var c=this.roleStrings.settingHasBeenOverridden;null!==b[a]&&(c="permittedSchedules"===a||"permittedSystems"===a?b[a]:b[a][0]);return c},_makeLoginInfoWatchers:function(a,b){this._makeWatcher(this.loginInfoPassword,"value",h.hitch(this,function(){this.passwordsChanged=!0;this.makeDirty("")}));this._makeWatcher(this.approvalPasswordWidget.approvalPassword,"value",h.hitch(this,function(){this.passwordsChanged=
!0;this.makeDirty("")}));this._makeWatcher(this.approvalPasswordWidget.approvalPasswordVerify,"value",h.hitch(this,this.makeDirty,""));this._makeWatcher(this.approvalPasswordWidget.approvalPasswordResetRequired,"checked",h.hitch(this,this.makeDirty,""));this._makeWatcher(this.enabledRadioButton,"checked",h.hitch(this,this.makeDirty));this._makeWatcher(this.passwordVerify,"value",h.hitch(this,this.makeDirty,""));this._makeWatcher(this.loginInfoEmail,"value",h.hitch(this,this.makeDirty,H.decodeURIComponent(a.email)));
this._makeWatcher(this.passwordResetRequired,"checked",h.hitch(this,this.makeDirty,b));this._makeWatcher(this.givenName,"value",h.hitch(this,this.makeDirty,H.decodeURIComponent(a.name)));this._makeWatcher(this.comments,"value",h.hitch(this,this.makeDirty,H.decodeURIComponent(a.comments)));this._makeWatcher(this._afterHoursTemplateSelector,"value",h.hitch(this,this.makeDirty,a.ahacReportTemplateId));this._makeWatcher(this._navTreeSelector,"value",h.hitch(this,this.makeDirty,a.navTree));this._makeWatcher(this.unlockUser,
"checked",h.hitch(this,this.makeDirty))},_addListeners:function(){this.own(n(this.permittedSystemsNode,"click",h.hitch(this,this._showPermittedSystemsSelection)));this.own(n(this.permittedSchedules,"click",h.hitch(this,this._showPermittedSchedulesSelection)));this.own(n(this.loginInfoPassword,"keyup",h.hitch(this,function(){this.passwordVerify.validate()})));this.own(n(this.passwordVerify,"keyup",h.hitch(this,function(){this.loginInfoPassword.validate()})))},_makeWatcher:function(a,b,c){a=a.watch(b,
c);this.watchHandles.push(a)},_overrideSpecificErrorMessages:function(){this.ErrorMessageMap[520]=this.resetPasswordStrings.loginMustNotMatchApproval;this.ErrorMessageMap[521]=this.resetPasswordStrings.approvalMustNotMatchLogin},_rolesChanged:function(a,b){var c=new g;this.own(c);this.isDirty()?c=this._showLostChangesWarning():c.resolve();c.then(h.hitch(this,!0===b?this._deleteAssignedRoles:this._updateAssignedRoles,a),h.hitch(this,function(){this.set("assignedRoles",this.assignedRoles)}))},_roleRemoved:function(a){rc.setupWizard?
this._wizardRemoveRole(Number(a.value)):this._rolesChanged(Number(a.value),!0)},_showLostChangesWarning:function(){var a=new g;this.own(a);this._confirmDialog=this._createWarningDialog(this._confirmDialog);this._confirmDialog.set({type:M.types.binaryConfirm,title:this.webviewStrings.confirmUnsavedChanges,text:this.errorStrings.unsavedChangesContinue,closeButtonVisible:!1});var b=this._confirmDialog.on("close",h.hitch(this,function(c){switch(c){case M.returnValues.oneOrYes:a.resolve();break;case M.returnValues.allOrNo:a.reject();
break;default:a.reject(),console.error(this.declaredClass+" - _confirm(): Invalid Choice",c)}b.remove()}));this.own(b);this._confirmDialog.open();return a.promise},_showPermittedSchedulesSelection:function(){if(!1!==rc.session.isAdminUser()||!this.isAdmin()){var a={site:this.site,userIds:[this.ID],username:this.userID};sessionStorage.setItem("userIds",this.ID);a="Users/PermittedSchedules?"+u.objectToQuery(a);r(a)}},_showPermittedSystemsSelection:function(){var a=[];m.forEach(this._permittedSystems,
function(b){a.push(b.value)});this._systemCBList.setMultiple(a,!0);l.add(this.permittedSystemsNode,"hidden");l.remove(this._systemCBList.domNode,"hidden");this._systemCBList.focus()},_unhideUserInfoTabs:function(a){this.inherited(arguments);var b=a?l.remove:l.add;this.userID&&"admin"!==this.userID.toLowerCase()?b(this.enabledField,"hidden"):l.add(this.enabledField,"hidden")},_updateAssignedRoles:function(b){P.put("Users/Multiple",{handleAs:"json",data:{siteId:this.site,userIds:[this.userID].toString(),
IDs:[this.ID],propertyName:"roles",newValue:a.stringify(b)}}).then(h.hitch(this,function(a){a.errStatus===this.SuccessCode&&this._fetchUserInfo();this._displayError(a)}))},_checkValidation:function(){var a=this.validate(),b=C.encode(this.loginInfoPassword.get("value")),c=C.encode(this.approvalPasswordWidget.get("approvalField")),d={siteId:this.site,userID:this.userID,forcePasswordReset:0===this._userType?this.passwordResetRequired.get("checked"):!1,forceApprovalPasswordReset:this.approvalPasswordWidget.get("approvalReset"),
ID:"Admin"===this.userID?null:this.ID,roleMask:0,roleMask2:0,permissions:null,loginInfo:null,lockedOut:!1===this.unlockUser.disabled?this.unlockUser.get("checked"):!1,confirmedRolesDropWarning:!1};d.loginInfo={email:encodeURIComponent(this.loginInfoEmail.get("value")),password:null,approvalPassword:null,name:encodeURIComponent(this.givenName.get("value")),comments:encodeURIComponent(this.comments.get("value")),userType:this._userType};this._buildAhacTemplateInfo(d.loginInfo);this._buildNavTreeInfo(d.loginInfo);
this._buildHomeGroupInfo(d.loginInfo);this._buildMyControlGroupInfo(d.loginInfo);this._buildPermittedSystemsInfo(d.loginInfo);d.roleMask=this._getRoleMask();d.roleMask2=this._getRoleMask2();var f=new g,n=function(){return{valid:a.valid,msg:a.msg,formData:d}},l={};""!==b&&(l.encryptedUserPassword=H.encryptPassword(b,!this.passwordsChanged));""!==c&&(l.encryptedApprovalPassword=H.encryptPassword(c,!this.passwordsChanged));0<Object.keys(l).length?v(l).then(h.hitch(this,function(a){"undefined"!==typeof a.encryptedUserPassword&&
(d.loginInfo.password=a.encryptedUserPassword);"undefined"!==typeof a.encryptedApprovalPassword&&(d.loginInfo.approvalPassword=a.encryptedApprovalPassword);f.resolve(n())}),h.hitch(f,f.reject)):f.resolve(n());return f.promise},_getRoleMask:function(){var a=this.originalRoleMask||0;-1!==this._navTreeSelector.get("value")&&(a|=rc.session.roles.showTree);return a=this.isAdmin()?a|this._ADMIN_PERMISSION_ROLE_MASK:this.enabledRadioButton.checked?a|rc.session.roles.userEnabled:a&~rc.session.roles.userEnabled},
_getRoleMask2:function(){return this.originalRoleMask2||0},_connectResetButton:function(){this.buttonBar.hasReset&&this.own(n(this.buttonBar,"reset",h.hitch(this,this.resetUser)))},_connectToToolbar:function(){this.own(n(this.buttonBar,"cancel",h.hitch(this,function(){this.passwordsChanged=!1;this._fetchUserInfo()})),n(this.buttonBar,"save",h.hitch(this,this._saveLoginInfo)))},_getNewRoleList:function(a){var b=[];this._canUserHaveRoles()&&(this._roleManager.set("updatedLoginInfo",a),this._roleManager.dropRolesWithConflicts(this.appliedRoles),
b=this._roleManager.get("roleList"));return b},_canUserHaveRoles:function(){return!this.isAdmin()&&!this.isPublic()},_createViews:function(){this.loginInfoArea.setMainContent(this.loginInfoContainer);this._connectToToolbar()},_setRoleInheritanceIcons:function(a){var b,c,d;for(d in a)"undefined"!==typeof this._roleManager[d]&&(b=this._roleManager[d],c={visibility:null!==a[d],disabled:!1,roleInheritance:this._displayedAppliedRoles(d,a)},b.forHomeGroup?this._loginGroupSelectors[b.attachPoint].set(c):
this[b.attachPoint].set(c));this.set("appliedRoles",a)},_setupControlsWithSystems:function(){this._createSystemCBList();return this._loginGroupSelectors.initializeWithSystems(this._systemStore)},_setupValidators:function(){this.loginInfoEmail.set("validator",h.hitch(this,function(a,b){return""===a?!0:D.isEmailAddress(a,b)}));this.loginInfoPassword.set("validator",h.hitch(this,this.isPasswordValidForLoginInfo));this.passwordVerify.set("validator",h.hitch(this,this.isPasswordValidForLoginInfo))},_setNameAttr:function(a){this.inherited(arguments);
rc.setupWizard&&rc.setupWizard.alterStepTitle("changeInfo",{userID:this.name})},setHomeGroup:function(a){this._permittedSystemsChanged();this._loginGroupSelectors.set("value",{redirectSystem:a.redirectSystem,systemRedirect:a.systemRedirect,myControlSystemRedirect:a.myControlSystemRedirect,navigationGroup:a.navigationGroup,systemGroupMnemonic:a.systemGroupMnemonic,myControlGroupMnemonic:a.myControlGroupMnemonic});rc.setupWizard||this._dirtyListeners.push(n(this._loginGroupSelectors,"change",h.hitch(this,
function(a,b){"undefined"!==typeof b.systemGroupMnemonic&&(a.redirectSystem!==b.redirectSystem?this.makeDirty():!0!==a.redirectSystem||Number(a.systemRedirect)===Number(b.systemRedirect)&&a.systemGroupMnemonic===b.systemGroupMnemonic?!1===a.redirectSystem&&Number(a.navigationGroup)!==Number(b.navigationGroup)&&this.makeDirty():this.makeDirty());"undefined"!==typeof b.myControlGroupMnemonic&&(Number(a.myControlSystemRedirect)===Number(b.myControlSystemRedirect)&&a.myControlGroupMnemonic===b.myControlGroupMnemonic||
this.makeDirty())},a)))},buildSystemTags:function(a){this._permittedSystems=[];m.forEach(a.systemsAssigned,h.hitch(this,function(a){"number"===typeof a&&this._permittedSystems.push(this._getSystemObjFromId(a))}));this._buildSystemTags();this.setHomeGroup(a)},_unwatchAll:function(){for(;null!==this.watchHandles&&0<this.watchHandles.length;)this.watchHandles.pop().unwatch()},_cleanupDirtyListeners:function(){if(null!==this._dirtyListeners)for(var a=this._dirtyListeners.length-1;this._dirtyListeners.length;)this._dirtyListeners[a].remove(),
this._dirtyListeners.splice(a--,1);else this._dirtyListeners=[]},fillFields:function(a){var b=a,c=a.approval;"undefined"!==typeof a.userInfo&&(b=a.userInfo.data);if(200===b.errStatus){this._unwatchAll();this._cleanupDirtyListeners();this.makeClean();a={};var f,g;if(b.permissions||b.loginInfo||b.roleMask){a=b.loginInfo;f=b.roleMask;g=b.roleMask2;this.name=b.loginInfo.name;this.set("name",this.name);this.originalRoleMask=f;this.originalRoleMask2=g;d.set(this.loginInfoUsername,"innerHTML",this.userID);
switch(a.userType){case 1:d.set(this.loginInfoUserType,"innerHTML",this.webviewStrings.activeDirectoryUser);this._userType=1;break;case 2:d.set(this.loginInfoUserType,"innerHTML",this.webviewStrings.activeDirectoryGroup);this._userType=2;break;default:d.set(this.loginInfoUserType,"innerHTML",this.webviewStrings.localUser),this._userType=0}g=rc.session.getUsername().toLowerCase()===b.userID.toLowerCase();var n=this.isAdmin()||this.isSiteAdmin();this.approvalPasswordWidget.fillFields(c,b,g,n,this.isPublic());
c=rc.session.hasPermission(this.permissionsMap.userEnabled.maskIdx,f);this.enabledRadioButton.set("checked",c);this.disabledRadioButton.set("checked",!c);this.givenName.set("value",H.decodeURIComponent(a.name));this.loginInfoEmail.set("value",H.decodeURIComponent(a.email));this.loginInfoPassword.set("value","");this.passwordVerify.set("value","");this.passwordResetRequired.set("checked",b.forcePasswordReset);this.approvalPasswordWidget.clearPasswords();this.comments.set("value",H.decodeURIComponent(a.comments));
this._initializeUnlockUserCheckbox(b.lockedOut);this._afterHoursTemplateSelector.set("value",null!==a.ahacReportTemplateId?a.ahacReportTemplateId:-1);this._navTreeSelector.set("value",null!==a.navTree?a.navTree:-1);rc.startupWizard||this._makeLoginInfoWatchers(a,b.forcePasswordReset);this.buildSystemTags(a);this.set("assignedRoles",a.rolesAssigned.map(function(a){return a.roleId}));this._roleManager=new L({originalLoginInfo:a,roleList:h.clone(this.assignedRoles)});d.set(this.permittedSchedules,"innerHTML",
a.isScheduleRestricted?this.webviewStrings.view:this.webviewStrings.allBlocks);1===a.userType||2===a.userType||this.isPublic()?(l.add(this.passwordContainer,"hidden"),l.add(this.passwordMatchContainer,"hidden"),l.add(this.passwordResetContainer,"hidden")):(l.remove(this.passwordContainer,"hidden"),l.remove(this.passwordMatchContainer,"hidden"),l.remove(this.passwordResetContainer,"hidden"));0<a.rolesAssigned.length?this.buttonBar.set("hasReset",!0):this.buttonBar.set("hasReset",!1);this._connectResetButton();
this._setRoleInheritanceIcons(b.loginInfo.appliedRoles)}}else console.error(this.declaredClass+" - fillFields(): Error Occurred",b)},isPasswordValidForLoginInfo:function(a){return l.contains(this.passwordContainer,"hidden")||""===a?!0:this._validatePassword(a,this.loginInfoPassword,this.passwordVerify).valid},_validatePassword:function(a,b,c){var d={valid:!0,msg:"success"},f=b.get("value"),g=c.get("value");if(""===f.trim())b.set("invalidMessage",this.errorStrings.loginPassEmpty),c.set("invalidMessage",
this.errorStrings.loginPassEmpty),d.valid=!1,d.msg=this.errorStrings.loginPassEmpty;else if(a!==f||a!==g)b.set("invalidMessage",this.errorStrings.pwDoNotMatch),c.set("invalidMessage",this.errorStrings.pwDoNotMatch),d.valid=!1,d.msg=this.errorStrings.pwDoNotMatch;return d},validate:function(){var a=!1,b=this._loginGroupSelectors.validate();b&&this.isPublic()&&(this._selectDefaultHomeGroup(),b=null);b||(this.loginInfoPassword.isValid()||this.isPublic()?this.passwordVerify.isValid()?this.approvalPasswordWidget.isValid()?
this.loginInfoEmail.isValid()?(a=!0,b="Success"):b=this.loginInfoEmail.invalidMessage:b=this.approvalPasswordWidget.getInvalidMessage():b=this.passwordVerify.invalidMessage:b=this.loginInfoPassword.invalidMessage);return{valid:a,msg:b}},_performSave:function(b,c){this.set("assignedRoles",c);this._buildRolesAssignedInfo(b.loginInfo,c);b.confirmedRolesDropWarning=!0;var d=new g;this.passwordsChanged?this._validateApprovalSessionWithSecondary(b.loginInfo).then(d.resolve,d.reject):d.resolve();d.then(h.hitch(this,
function(){var c=P.put("user/logininfo",{handleAs:"json",preventCache:!0,data:{userData:a.stringify(b)}});this.own(c);c.then(h.hitch(this,function(a){a.errStatus===this.SuccessCode&&(this.passwordsChanged=!1,this._isSiteWizard()?rc.setupWizard.next():(this._onSave(),this._fetchUserInfo()));this._displayErrorMessage(a)}))}))},_saveLoginInfo:function(){this._checkValidation().then(h.hitch(this,function(a){if(a.valid){var b=this._getNewRoleList(a.formData.loginInfo),c=new g;this.own(c);if(E.arraysAreSame(b,
this.assignedRoles))c.resolve();else{var d=this.assignedRoles.filter(function(a){return-1===b.indexOf(a)});this._showRoleWarningDialog(c,this._confirmDialog,d)}c.then(h.hitch(this,this._performSave,a.formData,b))}else a.msg&&B.publish("sticky",{type:"error",message:a.msg})}))},_selectDefaultHomeGroup:function(){var a,b;0<this._loginGroupSelectors._homeGroupSelectors._groupStore.length&&(a=this._loginGroupSelectors._homeGroupSelectors._groupStore.data[0].mne);b=this._loginGroupSelectors._homeGroupSelectors._systemRedirect;
this._loginGroupSelectors.set("value",{systemRedirect:b,systemGroupMnemonic:a,myControlSystemRedirect:b,myControlGroupMnemonic:a})},_createWarningDialog:function(a){null===a&&(a=new O({type:M.types.binaryConfirm,title:"",text:""}));return a},_showRoleWarningDialog:function(a,b,c){b=this._createWarningDialog(b);var d=this.roleStrings.removedFromRoles+"\x3cul class\x3d'role-warning-list'\x3e";c.forEach(h.hitch(this,function(a){(a=this._roleStore.get(a))&&(d+="\x3cli\x3e"+a.name+"\x3c/li\x3e")}));d+=
"\x3c/ul\x3e"+this.webviewStrings.wishToContinue;b.set({type:M.types.binaryConfirm,title:this.roleStrings.confirmOverride,text:d,closeButtonVisible:!1});var f=b.on("close",h.hitch(this,function(b){switch(b){case M.returnValues.oneOrYes:a.resolve();break;case M.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+" - _confirm(): Invalid Choice",b)}f.remove()}));this.own(f);b.open()},_permittedSystemsChanged:function(){var a;a=0!==this._permittedSystems.length?this._permittedSystems:
this._getAllSystems();this._loginGroupSelectors.updateSystemsList(a)},_getAllSystems:function(){var a=h.clone(this._systemList);a.splice(0,1);return a},_rolesAssignedChanged:function(){var a=this._roleCBList.get("selected").map(function(a){return Number(a)});this._roleCBList.clearAll();0<a.length&&(rc.setupWizard?this._wizardAddRole(a):this._rolesChanged(a));l.add(this._roleCBList.domNode,"hidden");l.remove(this.rolesNode,"hidden")},_tagRemoved:function(a,b){if("undefined"!==typeof this[b]){var c=
this[b],d=c.indexOf(a.value);c.splice(d,1);this.set(b,c);this.makeDirty()}},destroy:function(){P.clearAllRequests();this._cleanupDirtyListeners();this._confirmDialog&&(this._confirmDialog.close(),this._confirmDialog.destroy());this.inherited(arguments)},_send:function(a,b,c,d){if(!this._beginUpdate())return null;a=rc.xhr.request(a);var f=this._getChangeApproval();this.own(a,f);v({userInfo:a,approval:f}).then(h.hitch(this,function(a){a.userInfo.data&&200===a.userInfo.data.errStatus&&200===a.approval.errStatus?
(d||this.render(a,b),c&&(F.widget.clear(),B.publish("alert",{type:"success",message:this.errorStrings.successfulSave}),this._onSave())):a.userInfo.data?this._displayErrorMessage(a.userInfo.data):console.error(this.declaredClass+" - _send(): Data returned is null",a);if(c)this.onSendComplete(a.userInfo.data);return a}),h.hitch(this,this._onInitError));a.always(h.hitch(this,this._endUpdate));return a},_initializeUnlockUserCheckbox:function(a){a?this.unlockUser.set("checked",!0):(l.add(this.unlockUserLB,
"disabled"),this.unlockUser.set("disabled",!0))}})})},"webview/admin/users/_LoginInfoWizardMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/aspect dojo/Deferred dojo/json dojo/on dojo/topic rc/_base/util rc/util/notices ./RoleManager ../../util/util ../../xhrEnhanced".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return m("webview/admin/users/_LoginInfoWizardMixin",[],{onStartWizard:function(){this.inherited(arguments);var a=null;if(this.isUserWizard()){var b=
rc.setupWizard.getStepParamsFromCookie("#users/permissions?site\x3d"+this.site+"\x26userID\x3d"+this.userID),a=rc.setupWizard.getStepParamsFromCookie(window.location.hash);this._wizardInitData(a,b);this.wizardOnNextFunction=this._wizardRememberLoginInfo;this.own(g.after(rc.setupWizard,"onCompleteSteps",k.hitch(this,this._wizardPerformSave)))}else if(this.wizardOnNextFunction=this._saveLoginInfo,a=rc.setupWizard.getStepParamsFromCookie(window.location.hash))this._navTreeSelector.set("value",null!==
a.navTree?a.navTree:-1),this._afterHoursTemplateSelector.set("value",null!==a.ahacReportTemplateId?a.ahacReportTemplateId:-1),this.buildSystemTags(a.loginInfo);h.toggle(this.navTreeFields,"hidden",!(this._navTreeSelector&&1<this._navTreeSelector.store.data.length));h.toggle(this.ahacReportTemplateFields,"hidden",!(this._afterHoursTemplateSelector&&1<this._afterHoursTemplateSelector.store.data.length));this.buttonBar.set("isVisible",!1);h.remove(this.loginInfoRight,"rightContainer");h.add(this.loginInfoRight,
"leftContainer");h.add(this.loginInfoLeft,"hidden");h.remove(this.loginWizardNextContainer,"hidden");h.remove(this.loginPromptNode,"hidden");h.add(this.permittedSchedulesContainer,"hidden");rc.setupWizard.alterStepTitle("changeInfo",{userID:this.name})},_buildLoginInfoData:function(){var a={};this._buildHomeGroupInfo(a);this._buildMyControlGroupInfo(a);this._buildPermittedSystemsInfo(a);this._buildNavTreeInfo(a);this._buildAhacTemplateInfo(a);this._buildRolesAssignedInfo(a);a.appliedRoles=this.appliedRoles;
return a},_buildLocalInfo:function(){var a=this.localLoginInfo||{};null===this.appliedRoles.homeGroup&&this._buildHomeGroupInfo(a);null===this.appliedRoles.myControlGroup&&this._buildMyControlGroupInfo(a);null===this.appliedRoles.permittedSystems&&this._buildPermittedSystemsInfo(a);null===this.appliedRoles.navTree&&this._buildNavTreeInfo(a);null===this.appliedRoles.ahacTemplate&&this._buildAhacTemplateInfo(a);a.appliedRoles={homeGroup:null,myControlGroup:null,permittedSystems:null,navTree:null,ahacTemplate:null};
this.set("localLoginInfo",a)},_cancelRequest:function(){this._clearPollingTimer();var a=this._path.replace(/\//,"")+"status";rc.xhr.requestNow({type:"rest",method:"GET",path:a,processId:this._processId||-1,abort:1,username:this.userID,siteId:this.site});this._processId=-1},_isSiteWizard:function(){return rc.setupWizard&&!this.isUserWizard()},_mergeLocalWithRoleInfo:function(a){a.redirectSystem=a.redirectSystem||this.localLoginInfo.redirectSystem;a.systemRedirect=a.systemRedirect||this.localLoginInfo.systemRedirect;
a.navigationGroup=a.navigationGroup||this.localLoginInfo.navigationGroup;a.systemGroupMnemonic=a.systemGroupMnemonic||this.localLoginInfo.systemGroupMnemonic;a.systemsAssigned=a.systemsAssigned||this.localLoginInfo.systemsAssigned;a.myControlSystemRedirect=a.myControlSystemRedirect||this.localLoginInfo.myControlSystemRedirect;a.myControlGroupMnemonic=a.myControlGroupMnemonic||this.localLoginInfo.myControlGroupMnemonic;a.navTree=a.navTree||this.localLoginInfo.navTree;a.ahacReportTemplateId=a.ahacReportTemplateId||
this.localLoginInfo.ahacReportTemplateId;return a},_showCancelOption:function(a){this.wizardNextButtonText.innerHTML=a?this.webviewStrings.rcbCancel:this.webviewStrings.next;h.toggle(this.wizardNextButtonIcon,"waiting",a);h.toggle(this.wizardNextButtonIcon,"webviewCommitButton",a);h.toggle(this.wizardNextButtonIcon,"whitePlayIcon",!a)},_wizardAddRole:function(a){var b=[];p.forEach(a,k.hitch(this,function(a){this.assignedRoles.includes(a)||b.push(a)}));a=b.concat(this.assignedRoles);this._wizardRolesChanged(a)},
_wizardAddUser:function(a,b,c){this.set("assignedRoles",b);var d=f(this.loginWizardNextLink,"click",k.hitch(this,function(){this._cancelRequest();try{this.saveDeferred.cancel("User Cancelled")}catch(w){}this.saveDeferred=null;d.remove()}));a.load=k.hitch(this,function(a){if(a.data)return this._checkProgress(a.data,this._path)});this.saveDeferred.then(k.hitch(this,function(a){if(a&&200!==a.errStatus)return c.reject({type:"error",msg:this._getErrorMessage(a.errStatus)}),!1;a&&200===a.errStatus&&r.publish("updateNavTree");
this._showCancelOption(!1);return!0}),k.hitch(this,function(a){"User Cancelled"===a||"cancel"===a.dojoType?c.reject({type:"error",msg:this._getErrorMessage(511)}):(console.error(this.declaredClass+" - _addUser(): Unknown Error",a),c.reject({type:"error",msg:"Unknown Error Adding User"}));this._showCancelOption(!1);return a}));this._showCancelOption(!0);this._send(a,"",!0,!0);return this.saveDeferred.promise},_wizardDoAddUser:function(a,b,f){this.saveDeferred=new d;var g=this._getNewRoleList(b.loginInfo);
b=new d;this.own(b);if(c.arraysAreSame(g,this.assignedRoles))b.resolve();else{var h=this.assignedRoles.filter(function(a){return-1===g.indexOf(a)});this._showRoleWarningDialog(b,this._confirmDialog,h)}h={type:"rest",method:"POST",path:this._path};a.isActiveDirectory&&(a.password=null);h.params=l.stringify(a);b.then(k.hitch(this,this._wizardAddUser,h,g,f));return this.saveDeferred.promise},_wizardInitData:function(a,b){this.set("name",rc.setupWizard.getUserDisplayName());null!==b?(this.originalRoleMask=
b.roleMask,this.originalRoleMask2=b.roleMask2):(this.originalRoleMask=this.setupWizardPermissions.roleMask,this.originalRoleMask2=this.setupWizardPermissions.roleMask2);this._wizardFillFields("undefined"===typeof a||null===a?{systemsAssigned:[],navTree:-1,ahacReportTemplateId:-1,redirectSystem:!0,systemRedirect:-1,navigationGroup:-1,systemGroupMnemonic:"",myControlSystemRedirect:-1,myControlGroupMnemonic:"",appliedRoles:{homeGroup:null,myControlGroup:null,permittedSystems:null,navTree:null,ahacTemplate:null}}:
a.loginInfo)},_wizardFillFields:function(a){this._navTreeSelector&&this._navTreeSelector.set("value",a.navTree);this._afterHoursTemplateSelector&&this._afterHoursTemplateSelector.set("value",a.ahacReportTemplateId);this.buildSystemTags(a);this._roleManager=new t({originalLoginInfo:a,roleList:k.clone(this.assignedRoles)});this._setRoleInheritanceIcons(a.appliedRoles);this.set("originalLoginInfo",a)},_wizardPerformSave:function(a){var c=new d;b.widget.clear();r.publish("alert",{type:"info",message:this.errorStrings.addInProgress});
var f=a[0].h,g=this._wizardDoAddUser(a[0].stepParams,a[2].stepParams,c);g.then(k.hitch(this,function(b){b&&200===b.errStatus&&(f=a[1].h,this._wizardSavePermissions(a[1].stepParams,c).then(k.hitch(this,function(b){b&&200===b.errStatus&&(f=a[2].h,this._wizardSaveLoginInfo(a[2].stepParams,c).then(k.hitch(this,function(a){a&&200===a.errStatus&&this._wizardSaveRoles(a.id,this.assignedRoles,c).then(k.hitch(this,function(a){a&&200===a.errStatus?c.resolve(!0):c.reject({type:"error",msg:"Unknown Error"})}))})))})))}));
c.then(k.hitch(this,function(){b.widget.clear();rc.setupWizard.next(this.getWizardUnknowns(),null)}),k.hitch(this,function(a){b.widget.clear();try{g.cancel()}catch(z){}r.publish("sticky",{type:a.type,message:a.msg+"  "+this.webviewStrings.goBackTo+' \x3ca style\x3d"color: inherit;" href\x3d'+f+"\x3e"+this.webviewStrings.thisStep+"\x3c/a\x3e "+this.webviewStrings.toFixThis})})).always(q.clearRSAKeys)},_wizardRememberLoginInfo:function(){var a=this.validate();a.valid?(a={roleMask:this._getRoleMask(),
roleMask2:this._getRoleMask2(),siteId:this.site,userID:this.userID,loginInfo:this._buildLoginInfoData()},this.userSystem=a.loginInfo.systemRedirect,this.isUserWizard()?rc.setupWizard.completeSteps(this.getWizardUnknowns(),a):rc.setupWizard.next(this.getWizardUnknowns(),a)):a.msg&&this._showError(a.msg)},_wizardRemoveRole:function(a){var b=k.clone(this.assignedRoles);b.splice(b.indexOf(a),1);this._wizardRolesChanged(b)},_wizardRolesChanged:function(a){0<a.length?(this._buildLocalInfo(),u.get("Roles/LoginInfo",
{handleAs:"json",preventCache:!0,query:{siteId:this.site,roleIds:a}}).then(k.hitch(this,function(b){if(b.errStatus===this.SuccessCode){var c=this._mergeLocalWithRoleInfo(b.loginInfo);this.set("assignedRoles",a);this._wizardFillFields(c)}this._displayError(b)}))):(this.set("assignedRoles",a),this._wizardFillFields(this.localLoginInfo))},_wizardSaveLoginInfo:function(a,b){var c=u.post("User/AddUser",{handleAs:"json",data:{params:l.stringify(a)}});c.then(k.hitch(this,function(a){return a&&200!==a.errStatus?
(b.reject({type:"error",msg:this._getErrorMessage(a.errStatus)}),console.error(this.declaredClass+" - _wizardSaveLoginInfo(): Data returned is null",a),!1):!0}),k.hitch(this,function(a){console.error(this.declaredClass+" - _wizardSaveLoginInfo(): unknown error",a);b.reject({type:"error",msg:a.message})}));return c},_wizardSavePermissions:function(a,b){var c=u.post("User/Permissions",{handleAs:"json",data:{params:l.stringify(a)}});c.then(k.hitch(this,function(a){return a&&200!==a.errStatus?(b.reject({type:"error",
msg:this._getErrorMessage(a.data.errStatus)}),console.error(this.declaredClass+" - _wizardDoSavePermissions(): Data returned is null",a),!1):!0}),k.hitch(this,function(a){console.error(this.declaredClass+" - _wizardDoSavePermissions(): unexpected error",a);b.reject({type:"error",msg:a.message})}));return c},_wizardSaveRoles:function(a,b,c){a=u.put("Users/Multiple",{handleAs:"json",data:{siteId:this.site,userIds:[this.userID].toString(),IDs:[a],propertyName:"roles",newValue:l.stringify(b)}});a.then(k.hitch(this,
function(a){return a.data&&200!==a.data.errStatus?(c.reject({type:"error",msg:this._getErrorMessage(a.data.errStatus)}),console.error(this.declaredClass+" - _wizardSaveAssignedRoles(): Data returned is null",a),!1):!0}),k.hitch(this,function(a){console.error(this.declaredClass+" - _wizardSaveAssignedRoles(): unexpected error",a);c.reject({type:"error",msg:a.message})}));return a}})})},"webview/admin/users/RoleManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","rc/_base/util",
"../roles/rolesEnums"],function(p,m,k,h,g){return p("webview/admin/users/RoleManager",[k],{updatedLoginInfo:{},originalLoginInfo:null,roleList:null,_ahacKey:"ahacReportTemplateId",_navTreeKey:"navTree",_schedulesRestrictedKey:"schedulesRestricted",_systemsAssignedKey:"systemsAssigned",constructor:function(){this.ahacTemplate={mask:g.settingsMask.ahacTemplate,attachPoint:"ahacTemplateRoleIcon",loginInfoKey:this._ahacKey,dropRolesWithConflict:m.hitch(this,this._hasSelectorChanged,this._ahacKey),forHomeGroup:!1};
this.homeGroup={mask:g.settingsMask.homeGroup,attachPoint:"homeGroupRoleIcon",loginInfoKey:"",dropRolesWithConflict:m.hitch(this,this._hasHomeGroupChanged),forHomeGroup:!0};this.myControlGroup={mask:g.settingsMask.myControlGroup,attachPoint:"myControlGroupRoleIcon",loginInfoKey:"",dropRolesWithConflict:m.hitch(this,this._hasMyControlGroupChanged),forHomeGroup:!0};this.navTree={mask:g.settingsMask.navigationTree,attachPoint:"navTreeRoleIcon",loginInfoKey:this._navTreeKey,dropRolesWithConflict:m.hitch(this,
this._hasSelectorChanged,this._navTreeKey),forHomeGroup:!1};this.permittedSchedules={mask:g.settingsMask.permittedSchedules,attachPoint:"permittedSchedulesRoleIcon",loginInfoKey:this._schedulesRestrictedKey,dropRolesWithConflict:function(){},forHomeGroup:!1};this.permittedSystems={mask:g.settingsMask.permittedSystems,attachPoint:"permittedSystemsRoleIcon",loginInfoKey:this.systemsAssignedKey,dropRolesWithConflict:m.hitch(this,this._hasPermittedSystemsChanged),forHomeGroup:!1}},dropRolesWithConflicts:function(d){for(var g in d){var f=
d[g];null!=f&&this[g].dropRolesWithConflict(f,this.updatedLoginInfo)}},_getAllowedSystemsFromRole:function(d){for(var g=[],f=0;f<d.length;++f)if(null!==d[f].systemsAssigned)for(var h=0;h<d[f].systemsAssigned.length;h++)g.includes(d[f].systemsAssigned[h])||g.push(d[f].systemsAssigned[h]);return g},_hasHomeGroupChanged:function(d){var g=!1;(g=this.updatedLoginInfo.redirectSystem!==this.originalLoginInfo.redirectSystem?!0:this.updatedLoginInfo.redirectSystem?Number(this.updatedLoginInfo.systemRedirect)!==
Number(this.originalLoginInfo.systemRedirect)?!0:this.updatedLoginInfo.systemGroupMnemonic!==this.originalLoginInfo.systemGroupMnemonic:Number(this.updatedLoginInfo.navigationGroup)!==Number(this.originalLoginInfo.navigationGroup))&&this._removeRoles(d)},_hasMyControlGroupChanged:function(d){var g=!1;(g=Number(this.updatedLoginInfo.myControlSystemRedirect)!==Number(this.originalLoginInfo.myControlSystemRedirect)?!0:this.updatedLoginInfo.myControlGroupMnemonic!==this.originalLoginInfo.myControlGroupMnemonic)&&
this._removeRoles(d)},_hasPermittedSystemsChanged:function(d){var g=this._getAllowedSystemsFromRole(d);h.arraysAreSame(this.updatedLoginInfo.systemsAssigned,g)||(m.hitch(this,function(){var d=!1;this.updatedLoginInfo.systemsAssigned.forEach(function(f){g.includes(f)||(d=!0)});return d})()?this._removeRoles(d):d.forEach(m.hitch(this,function(d){d.systemsAssigned.forEach(m.hitch(this,function(f){this.updatedLoginInfo.systemsAssigned.includes(f)||(this.roleList=this.roleList.filter(m.hitch(this,function(c){return c!==
d.roleId})))}))})))},_hasSelectorChanged:function(d,g){var f=Number(this.updatedLoginInfo[d]),h=Number(this.originalLoginInfo[d]);-1===f?0<h&&this._removeRoles(g):f!==h&&this._removeRoles(g)},_removeRoles:function(d){d.forEach(m.hitch(this,function(d){this.roleList=this.roleList.filter(m.hitch(this,function(f){return f!==d.roleId}))}));d=null}})})},"webview/admin/roles/rolesEnums":function(){define([],function(){return{settingsMask:{enabled:1,navigationTree:2,ahacTemplate:4,homeGroup:8,myControlGroup:16,
permittedSystems:32,permittedSchedules:64,forceAllSchedules:128,forceAllSystems:256}}})},"webview/widget/RoleTag":function(){define(["dijit/Tooltip","dojo/_base/declare","dojo/dom-class","dojo/i18n!../nls/all","./SystemTag"],function(p,m,k,h,g){return m("webview/widget/UserTag",[g],{baseClass:"",isDisabled:!1,tooltip:null,webviewStrings:h,_tooltipText:"",_setIsDisabledAttr:function(d){k.toggle(this.domNode,"disabled-role",d);this._tooltipText=d?this.webviewStrings.disabledLabel:"";null!==this.tooltip?
this.tooltip.set("label",this._tooltipText):this._buildTooltip(this._tooltipText);this._set("isDisabled",d)},postCreate:function(){this.inherited(arguments);this._buildTooltip(this._tooltipText)},_buildTooltip:function(d){null===this.tooltip&&(this.tooltip=new p({connectId:this.domNode,label:d,position:["above"],showDelay:0}))},destroy:function(){this.tooltip&&this.tooltip.destroy();this.inherited(arguments)}})})},"webview/admin/users/widget/ApprovalPassword":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!../../../nls/all dojo/i18n!../../../nls/errorMessages dojo/on dojo/text!./templates/ApprovalPassword.html dijit/form/CheckBox dijit/form/ValidationTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return h("webview/admin/users/widget/ApprovalPassword",[m,p,k],{templateString:c,webviewStrings:l,errorStrings:f,approvalEnabled:!1,userPassword:null,postCreate:function(){this.inherited(arguments);this._setupValidators();this._addListeners()},_clearValidators:function(){this.approvalPassword.set("validator",function(){return!0});this.approvalPasswordVerify.set("validator",function(){return!0})},_getApprovalFieldAttr:function(){return this.approvalPassword.get("value")},
_setApprovalEnabledAttr:function(b){d.toggle(this.approvalPasswordLogicContainer,"hidden",!b);this._set("approvalEnabled",b)},_getApprovalResetAttr:function(){return this.approvalPasswordResetRequired.get("disabled")?null:this.approvalPasswordResetRequired.get("checked")},_setApprovalFieldAttr:function(b){this.approvalPassword.set("value",b)},_setApprovalResetAttr:function(b){this.approvalReset!=b&&this.approvalPasswordResetRequired.set("checked",b);this._set("approvalReset",b)},_setUserPasswordAttr:function(b){this._set("userPassword",
b)},_setVerifyFieldAttr:function(b){this.approvalPasswordVerify.set("value",b)},_setupValidators:function(){this.approvalPassword.set("validator",g.hitch(this,this.isApprovalPasswordValid));this.approvalPasswordVerify.set("validator",g.hitch(this,this.isApprovalPasswordValid))},fillFields:function(b,c,d,f,a){b&&!a?b.changeApproval?(this.set("approvalEnabled",!0),this.set("approvalReset",c.forceApprovalPasswordReset||c.approvalPasswordRequired),this._disableResetRequiredCheckbox(c.approvalPasswordRequired)):
(this.set("approvalEnabled",d&&f),this.set("approvalReset",c.forceApprovalPasswordReset)):this.set("approvalEnabled",!1)},clearPasswords:function(){this._clearValidators();this.approvalPasswordVerify.set("value","",!1);this.approvalPassword.set("value","",!1);this._setupValidators()},getInvalidMessage:function(){return this.approvalPassword.isValid()?this.approvalPasswordVerify.invalidMessage:this.approvalPassword.invalidMessage},isApprovalPasswordValid:function(b){return d.contains(this.approvalPasswordContainer,
"hidden")?!0:this._validateApprovalPassword(b,this.userPassword.get("value")).valid},isValid:function(){return this.approvalPassword.isValid()&&this.approvalPasswordVerify.isValid()},resetRequiredValue:function(){return this.approvalEnabled?this.get("approvalReset"):null},validateApprovalPassword:function(b,c){return this._validateApprovalPassword(b,c)},_addListeners:function(){this.own(r(this.approvalPassword,"keyup",g.hitch(this.approvalPasswordVerify,"validate",!1)),r(this.approvalPasswordVerify,
"keyup",g.hitch(this.approvalPassword,"validate",!1)),r(this.approvalPasswordResetRequired,"change",g.hitch(this,this.set,"approvalReset")))},_disableResetRequiredCheckbox:function(b){this.approvalPasswordResetRequired.set("disabled",b);d.toggle(this.approvalPasswordResetRequiredLB,"disabled",b)},_validateApprovalPassword:function(b,c){var d={valid:!0,msg:"success"},f=this.approvalPassword.get("value"),a=this.approvalPasswordVerify.get("value");if(""!==f||""!==a)""===f.trim()&&this.approvalEnabled?
(this.approvalPassword.set("invalidMessage",this.errorStrings.approvalPasswordEmpty),this.approvalPasswordVerify.set("invalidMessage",this.errorStrings.approvalPasswordEmpty),d.valid=!1,d.msg=this.errorStrings.approvalPasswordEmpty):b!==f||b!==a?(this.approvalPassword.set("invalidMessage",this.errorStrings.pwDoNotMatch),this.approvalPasswordVerify.set("invalidMessage",this.errorStrings.pwDoNotMatch),d.valid=!1,d.msg=this.errorStrings.pwDoNotMatch):this.approvalEnabled&&f===c&&(this.approvalPassword.set("invalidMessage",
this.errorStrings.approvalPasswordDifference),this.approvalPasswordVerify.set("invalidMessage",this.errorStrings.approvalPasswordDifference),d.valid=!1,d.msg=this.errorStrings.approvalPasswordDifference);return d}})})},"webview/admin/users/Permissions":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/json dojo/on dojo/text!./templates/Permissions.html dojo/topic ./_UsersBase ../../widget/WarningDialog ../../widget/WarningDialogEnums ./RolemaskPermissions ./UserToolbar ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return p("webview/admin/users/Permissions",[f],{editTemplate:d,loginInfo:null,originalRoleMask:null,originalRoleMask2:null,hasEnabledRoles:null,confirmRemoveRolesDialog:null,_hash:"#Users/Permissions",_isSelect:!0,postCreate:function(){this.inherited(arguments);this._showHidePublicUserFields();if(this.shouldSetContext){var b=this._buildAuditLogTitle();webview.auditUtil.setContextDataWithSiteId(this.site,[{objectName:"#User"+this.ID}],b)}this.isUserWizardRunning()?this._initializeWizard():
this.own(g(this.rolemaskPermissions,"change",m.hitch(this,this.makeDirty)));this.rolemaskPermissions.set("isPublic",this.isPublic());this.rolemaskPermissions.set("isAdmin",this.isAdmin());this.rolemaskPermissions.setupHelpPath().then(m.hitch(this,this._helpFileSelectorCreated))},makeClean:function(){this.inherited(arguments);this.buttonBar&&this.buttonBar.set("dirty",!1)},makeDirty:function(){this.inherited(arguments);this.buttonBar&&this.buttonBar.set("dirty",!0)},resize:function(){this.inherited(arguments);
this.rolemaskPermissions.resize()},onStartWizard:function(){this.inherited(arguments);this.isUserWizard()?this.wizardOnNextFunction=this.wizardRememberPermissions:this.wizardOnNextFunction=this.savePermissions;var b=rc.setupWizard.getStepParamsFromCookie(window.location.hash);this.wizardFillFields(b);rc.setupWizard.alterStepTitle("changePermissions",{userID:this.name});k.remove(this.rolemaskPermissions.permissionsWizardNextContainer,"hidden");k.remove(this.permissionsPromptNode,"hidden")},onDestroyWizard:function(){this.inherited(arguments);
this.domNode&&(k.add(this.permissionsPromptNode,"hidden"),k.add(this.rolemaskPermissions.permissionsWizardNextContainer,"hidden"))},_buildAuditLogTitle:function(){return this.userID+" "+this.title},_confirmToSaveChanges:function(b){null===this.confirmRemoveRolesDialog&&(this.confirmRemoveRolesDialog=new r({type:c.types.binaryConfirm,title:this.webviewStrings.confirmUpdateAction}));this.confirmRemoveRolesDialog.set("text",this.rolemaskPermissions.roleStrings.confirmRolesRemovalText+" "+this.webviewStrings.sureToContinue);
this.confirmRemoveRolesDialog.open();var d=g(this.confirmRemoveRolesDialog,"close",m.hitch(this,function(f){switch(f){case c.returnValues.oneOrYes:this._send(b,"permissions",!0,!1,!1).then(m.hitch(this,function(b){518!==b.data.errStatus&&this._fetchUserInfo()}));break;case c.returnValues.allOrNo:break;default:console.error(this.declaredClass+" - _showConfirmRolesRemoveDialog(): Unknown choice",f)}d.remove()}));this.own(d)},_checkValidation:function(){var b={siteId:this.site,userID:this.userID,ID:this.ID,
roleMask:0,roleMask2:0,permissions:{},confirmedRolesDropWarning:!1},c=this.rolemaskPermissions.validate();if(c.valid){m.mixin(b.permissions,this.rolemaskPermissions.get("extraPermissions"));var d=this.rolemaskPermissions.get("roleMask");b.roleMask=null===d.rolemask?0:d.rolemask;b.roleMask2=null===d.extendedRolemask?0:d.extendedRolemask;d=!0;this.isPublic()&&(d=this.hasPermission(this.permissionsMap.userEnabled.maskIdx,this.originalRoleMask));d&&(b.roleMask|=rc.session.roles.userEnabled);this.isPublic()&&
(b.roleMask&=this._FULL_PERMISSION_PUBLIC_USER_ROLEMASK)}this.isUserWizardRunning()?b.confirmedRolesDropWarning=!1:b.confirmedRolesDropWarning=this._inheritedPermissionsChanged(b.roleMask,b.roleMask2);return{valid:c.valid,msg:c.msg,formData:h.stringify(b),roleMask:b.roleMask,roleMask2:b.roleMask2}},_connectToToolbar:function(){this.own(g(this.buttonBar,"cancel",m.hitch(this,this._fetchUserInfo)),g(this.buttonBar,"save",m.hitch(this,this._saveUserInfo)),g(this.buttonBar,"selectAll",m.hitch(this.rolemaskPermissions,
this.rolemaskPermissions.toggleSelectAll)))},_createViews:function(){this.permissionsArea.setMainContent(this.permissionsContainer)},_helpFileSelectorCreated:function(){this._connectToToolbar();this.isUserWizardRunning()?setTimeout(m.hitch(this,this.onInitSuccess),5):this._getFormData()},_inheritedPermissionsChanged:function(b,c){var d=(this.originalRoleMask|rc.session.roles.customHelp)!==(b|rc.session.roles.customHelp);return this.hasEnabledRoles&&(d||this.originalRoleMask2!==c||this.rolemaskPermissions.accessLevelChanged||
this.rolemaskPermissions.autoLogOffValueChanged)},_initializeWizard:function(){this.rolemaskPermissions.onClickWizardNext=m.hitch(this,this._onClickWizardNext);this.buttonBar.set("isVisible",!1);k.remove(this.selectAllPermissions,"hidden");this.own(g(this.selectAllPermissions,"click",m.hitch(this,this._toggleWizardSelectAll)))},_setNameAttr:function(b){this.inherited(arguments);rc.setupWizard&&rc.setupWizard.alterStepTitle("changePermissions",{userID:this.name})},_setPermissions:function(b,c,d,f){rc.setupWizard||
(this.rolemaskPermissions.removeDirtyListeners(),this.makeClean());this.rolemaskPermissions.set("roleMask",b,!1,f?f.appliedPermissionRoles:null);this.rolemaskPermissions.set("roleMask",c,!0,f?f.appliedPermissionRoles2:null);this.rolemaskPermissions.set("extraPermissions",d);this.originalRoleMask=b;this.originalRoleMask2=c;f&&(this.hasEnabledRoles=f.hasOwnProperty("hasEnabledRoles")?f.hasEnabledRoles:!1);this.buttonBar.set("isSelectAll",!this.rolemaskPermissions.get("allSelected"));rc.setupWizard||
this.rolemaskPermissions.setupDirtyListeners()},_toggleWizardSelectAll:function(){var b=k.contains(this.selectAllPermissions,"selectAllIcon");this.rolemaskPermissions.toggleSelectAll(b);b?k.replace(this.selectAllPermissions,"deselectAllIcon","selectAllIcon"):k.replace(this.selectAllPermissions,"selectAllIcon","deselectAllIcon")},wizardFillFields:function(b){var c={},d,f;b?(d=b.roleMask,f=b.roleMask2,c=b.permissions):(d=this.setupWizardPermissions.roleMask,f=this.setupWizardPermissions.roleMask2,c=
this.setupWizardPermissions.permissions);this.name=rc.setupWizard.getUserDisplayName();this.set("name",this.name);this._setPermissions(d,f,c,b)},fillFields:function(b){var c=b;"undefined"!==typeof b.userInfo&&(c=b.userInfo.data);if(200===c.errStatus){if(c.roleMask||c.permissions){b=c.permissions;var d=c.roleMask,f=c.roleMask2;this.loginInfo=c.loginInfo;this.name=this.loginInfo.name;this.set("name",this.name);this._setPermissions(d,f,b,c);this.makeClean()}}else console.error(this.declaredClass+" - fillFields(): Error Occurred",
c)},wizardRememberPermissions:function(){var b=this._checkValidation();b.valid?rc.setupWizard.next(this.getWizardUnknowns(),h.parse(b.formData)):b.msg&&this._showError(b.msg)},_saveUserInfo:function(){var b=this._checkValidation(),c={path:"user/permissions",type:"rest",method:"post"},d=h.parse(b.formData);d.updateUserPermissions=!0;c.params=h.stringify(d);b.valid?this._inheritedPermissionsChanged(b.roleMask,b.roleMask2)?this._confirmToSaveChanges(c):this._send(c,"permissions",!0,!1,!1):b.msg&&l.publish("sticky",
{type:"error",message:b.msg})}})})},"webview/admin/users/PermittedSchedules":function(){define("dijit/form/CheckBox dijit/form/FilteringSelect dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/debounce dojo/Deferred dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/enterpriseSchedules dojo/i18n!../../nls/errorMessages dojo/i18n!../../nls/roles dojo/on dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/PermittedSchedules.html dojo/topic rc/_base/util ../_individualBase ../../widget/ToolbarButton ../../widget/WarningDialog ../../widget/WarningDialogEnums ../widget/AdminToolbar ../../widget/CommitButtons ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G){return d("webview/admin/users/PermittedSchedules",D,{templateString:A,enterpriseStrings:u,errorStrings:a,roleStrings:n,webviewStrings:q,_DefaultTreeRootObject:{id:-1,name:"root",type:"root",value:null,rate:0,hasChildren:!0},_ErrorCodeToMessageMap:{200:t.success,403:a.accessForbidden,502:a.siteDoesNotExist,504:a.unexpectedError,506:a.generalInsufficientPrivileges},_SuccessCode:200,_UnexpectedCode:504,_appliedRoles:null,_currentSelect:{},
_confirmChangesDialog:null,_displayNames:null,_enterpriseScheduleSelector:null,_enterpriseScheduleStore:null,_haveDisplayedError:!1,_isBatch:!1,_permittedSchedules:null,_scheduleTree:null,_scheduleTreeStore:null,_scheduleTreeModel:null,_selectedEnterpriseSchedule:-1,_usersInfo:null,constructor:function(){this._enterpriseScheduleStore=new z(new w);this._permittedSchedules=[];this._treeNodeWithCheckbox=d(k._TreeNode,{buildRendering:function(){this.inherited(arguments);"schedule"===this.item.type&&(this.checkboxNode=
new p({value:Number(this.item.id),_onClick:function(){}}),b.place(this.checkboxNode.domNode,this.iconNode,"before"),this.own(v(this.checkboxNode,"change",l.hitch(this,this._onCheckboxChange))))},_onCheckboxChange:function(a){this.onCheckboxChange(a,this.item,this)},onCheckboxChange:function(){}})},buildRendering:function(){this.inherited(arguments);this._buildTreeModel([this._DefaultTreeRootObject]);this._createEnterpriseScheduleSelector()},postCreate:function(){this.inherited(arguments);var a=[];
g.forEach(this.userIds,function(b){a.push({systemId:null,objectName:"#User"+b})});var b=this._buildAuditLogTitle();webview.auditUtil.setContextDataWithSiteId(this.site,a,b);this._isBatch=this.userIds instanceof Array&&1<this.userIds.length;this._setTitleContent()},fetch:function(){x.get("schedules",{handleAs:"json",query:{siteId:this.site},preventCache:!0}).then(l.hitch(this,this._populateSelectorStore))},_allSelected:function(){var a=Object.keys(this._currentSelect);return this._scheduleTreeStore.query({type:"schedule"}).length===
a.length},_buildAuditLogTitle:function(){return this.username+" "+this.title},_buildScheduleTree:function(){var a=new r;this.own(a);null!==this._scheduleTree&&this._scheduleTree.destroy();this._scheduleTree=new k({model:this._scheduleTreeModel,baseClass:"schedule-permissions-tree",showRoot:!1,autoExpand:!0,getIconStyle:l.hitch(this,function(a){if("schedule"===a.type)return{backgroundColor:a.color}}),onClick:l.hitch(this,this._onScheduleTreeItemClick),_createTreeNode:l.hitch(this,function(a){a=new this._treeNodeWithCheckbox(a);
this.own(v(a,"checkboxChange",l.hitch(this,this._modifyScheduleSelection)));return a})});b.place(this._scheduleTree.domNode,this.scheduleTreeContainer,"only");this._scheduleTree.startup();this._scheduleTree.onLoadDeferred.then(l.hitch(this,a.resolve));return a.promise},_buildTreeModel:function(a){null!==this._scheduleTreeStore&&(this._scheduleTreeStore=null);this._scheduleTreeStore=new z(new w({data:a,getChildren:function(a){return this.query({parent:a.id})}}));null!==this._scheduleTreeModel&&this._scheduleTreeModel.destroy();
this._scheduleTreeModel=new h({store:this._scheduleTreeStore,query:{type:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}});return this._buildScheduleTree()},_createButtons:function(){this._saveButton=this.propertiesCommitButtons.saveButton;this._cancelButton=this.propertiesCommitButtons.cancelButton;this._saveButton.set("disabled",!0);var a=[this._createSelectAllButton(),this.propertiesCommitButtons];this.own(v(this._saveButton.domNode,"click",l.hitch(this,this._save)),v(this._cancelButton.domNode,
"click",l.hitch(this,function(){this._getScheduleTree(this._selectedEnterpriseSchedule)})));this.buttonBar.replaceAllIcons(a)},_createEnterpriseScheduleSelector:function(){var a=b.create("div",{"class":"toolbar-selectors"},b.create("div",{"class":"es-permissions"},this.buttonBar.domNode,"first"),"first");this._enterpriseScheduleSelector=new m({baseClass:"rcSelectBox ",store:this._enterpriseScheduleStore,searchAttr:"name",labelAttr:"name",labelType:"html",autoComplete:!1,queryExpr:"*${0}*",placeHolder:this.enterpriseStrings.selectEnterpriseSchedule,
required:!1,onChange:l.hitch(this,this._onEnterpriseScheduleChange)});b.place(this._enterpriseScheduleSelector.domNode,a,"first")},_createSelectAllButton:function(){this._selectAllButton=new E({titleStr:this.webviewStrings.selectAll,iconClass:"rc24Icon toolbarButtonIcon selectAllIcon",disabled:!0});this.own(v(this._selectAllButton.domNode,"click",l.hitch(this,this._selectAll)));return this._selectAllButton},_createViews:function(){this.permittedSchedulesContainer.setMainContent(this.propertiesContainer);
this._views.push(this.permittedSchedulesContainer)},_displayErrorMessage:function(a){var b=this._ErrorCodeToMessageMap[this._UnexpectedCode],c="sticky",d="error";"undefined"!==typeof this._ErrorCodeToMessageMap[a]&&(a===this._SuccessCode&&(c="alert",d="success"),b=this._ErrorCodeToMessageMap[a]);B.publish(c,{type:d,message:b})},_getScheduleTree:function(a){this._currentSelect={};this._haveDisplayedError=!1;!1===isNaN(a)&&""!==a?(this._selectedEnterpriseSchedule=a,x.get("EnterpriseSchedules/GetFlatScheduleTree",
{handleAs:"json",query:{enterpriseId:a,ignoreRestrictions:!0},preventCache:!0}).then(l.hitch(this,this._populateTreeStore))):(this._saveButton.set("disabled",!0),this._selectAllButton.set("disabled",!0),this._buildTreeModel([this._DefaultTreeRootObject]),this._selectedEnterpriseSchedule=-1)},_modifyScheduleSelection:function(a,b){a?this._currentSelect[b.value]=a:delete this._currentSelect[b.value];f(l.hitch(this,this._updateDirtyFlag),100).apply();f(l.hitch(this,this._updateSelectAll),100).apply()},
_onEnterpriseScheduleChange:function(a){this._selectedEnterpriseSchedule!==a&&(this._dirty?this._warnOfChanges("changes").then(l.hitch(this,this._getScheduleTree,a),l.hitch(this,function(a){this._enterpriseScheduleSelector.set("value",a)},this._selectedEnterpriseSchedule)):this._getScheduleTree(a))},_onScheduleTreeItemClick:function(a,b){var c=!b.checkboxNode.get("checked"),d=this._scheduleTreeStore.get(a.parent);"root"!==d.type&&(d=this._scheduleTree.getNodesByItem(d)[0],"undefined"!==typeof d&&
d.checkboxNode.get("checked")&&(c=!0,!1===this._haveDisplayedError&&(B.publish("sticky",{type:"error",message:this.enterpriseStrings.allChildrenMustBeSelected}),this._haveDisplayedError=!0)));b.checkboxNode.set("checked",c);this._selectChildSchedules(a.value,c)},_populateSelectorStore:function(a){a.errStatus===this._SuccessCode?(this._enterpriseScheduleStore.setData(a.dataArray),this.onInitSuccess()):this._onInitError(a.errMSG)},_populateTreeStore:function(a){a.errStatus===this._SuccessCode?(a.scheduleData.unshift(this._DefaultTreeRootObject),
this._buildTreeModel(a.scheduleData).then(l.hitch(this,this._treeBuilt))):this._displayErrorMessage(a.errStatus)},_save:function(a,b){b=b||null;if(!1===this._saveButton.get("disabled")){var c=[];this._allSelected()||(c=Object.keys(this._currentSelect));var d=!1,f=l.hitch(this,function(){x.put("SchedulesPermission",{handleAs:"json",data:{userIds:this.userIds,enterpriseSchedule:this._enterpriseScheduleSelector.get("value"),scheduleIds:c,isRole:this.isRole,confirmPending:d},preventCache:!0}).then(l.hitch(this,
this._saveComplete))});if(this._isBatch)if(this.isRole)this._warnOfChanges("batchSave").then(f);else if(b)this._warnOfChanges("batchSave",b).then(f);else{for(var g=!1,h=0;h<this._usersInfo.length;h++)if(!0===this._usersInfo[h].hasRoles){g=!0;break}g?(d=!0,f()):this._warnOfChanges("batchSave").then(f)}else!this.isRole&&this._appliedRoles&&this._appliedRoles.length&&this._dirty?this._warnOfRoles().then(f):f()}},_saveComplete:function(a){a.errStatus===this._SuccessCode?a.hasOwnProperty("usersBeingDroppedFromRoles")&&
Array.isArray(a.usersBeingDroppedFromRoles)?0<a.usersBeingDroppedFromRoles.length?this._save(null,a.usersBeingDroppedFromRoles):this._save(null,[]):(this._permittedSchedules=[],Object.keys(this._currentSelect).forEach(l.hitch(this,function(a){this._permittedSchedules.push(Number(a))})),this._setDirty([this._saveButton],!0),this._displayErrorMessage(a.errStatus)):this._displayErrorMessage(a.errStatus)},_selectAll:function(){if(!1===this._selectAllButton.get("disabled")){var a=c.contains(this._selectAllButton.toolbarButtonIcon,
"selectAllIcon"),b=this._scheduleTreeStore.query({type:"schedule"});this._selectSchedules(b,a)}},_selectSchedules:function(a,b){for(var c=0;c<a.length;++c)this._scheduleTree.getNodesByItem(a[c])[0].checkboxNode.set("checked",b)},_selectChildSchedules:function(a,b){this._scheduleTreeStore.query({parent:a}).forEach(l.hitch(this,function(a){this._scheduleTree.getNodesByItem(a)[0].checkboxNode.set("checked",b);this._selectChildSchedules(a.value,b)}))},_setTitleContent:function(){var a=l.hitch(this,function(a){a.errStatus===
this._SuccessCode&&(this.isRole?this._displayNames=a.displayNames:this._usersInfo=a.usersInfo)});x.get("GetUserDetails",{handleAs:"json",query:{userIds:this.userIds,isRole:this.isRole},preventCache:!0}).then(a)},_showWarning:function(a,b){var c=new r;this.own(c);null===this._confirmChangesDialog?this._confirmChangesDialog=new F({title:a,text:b,type:G.types.binary,closeButtonVisible:!1}):(this._confirmChangesDialog.set("title",a),this._confirmChangesDialog.set("text",b));var d=this._confirmChangesDialog.on("close",
l.hitch(this,function(a){switch(a){case G.returnValues.oneOrYes:c.resolve(!0);break;case G.returnValues.none:!1===c.isResolved()&&c.reject();break;default:console.error(this.declaredClass+" - _warnOfChanges(): Unknown choice",a)}d.remove()}));this.own(d);this._confirmChangesDialog.open();return c.promise},_getRolesRemovalMessage:function(a){if(!a||a&&!Array.isArray(a)||a&&0===a.length)return"";var b=this.roleStrings.confirmBatchRolesDropText+"\x3cbr /\x3e\x3cul\x3e";g.forEach(a,l.hitch(this,function(a){b+=
"\x3cli\x3e"+a+"\x3c/li\x3e"}));b+="\x3c/ul\x3e"+this.webviewStrings.sureToContinue;return"\x3cbr /\x3e"+b},_treeBuilt:function(){this._saveButton.set("disabled",!1);this._selectAllButton.set("disabled",!1);this._setDirty([this._saveButton],!0);this._isBatch||-1===this._selectedEnterpriseSchedule||x.get("SchedulesPermission",{handleAs:"json",query:{userId:this.userIds,enterpriseScheduleId:this._selectedEnterpriseSchedule,isRole:this.isRole},preventCache:!0}).then(l.hitch(this,this._usersPermittedSchedulesRetrieved))},
_updateDirtyFlag:function(){var a=[];Object.keys(this._currentSelect).forEach(function(b){a.push(Number(b))});var b=!1,b=this._allSelected()&&0===this._permittedSchedules.length?!0:a.length!==this._permittedSchedules.length?!1:C.arraysAreSame(a,this._permittedSchedules);this._setDirty([this._saveButton],b)},_updateSelectAll:function(){this._allSelected()?(c.replace(this._selectAllButton.toolbarButtonIcon,"deselectAllIcon","selectAllIcon"),this._selectAllButton.tooltip.set("label",this.webviewStrings.deselectAll)):
(c.replace(this._selectAllButton.toolbarButtonIcon,"selectAllIcon","deselectAllIcon"),this._selectAllButton.tooltip.set("label",this.webviewStrings.selectAll))},_usersPermittedSchedulesRetrieved:function(a){if(a.errStatus===this._SuccessCode){this._permittedSchedules=[];"undefined"!==typeof a.schedules&&a.schedules instanceof Array&&a.schedules.forEach(l.hitch(this,function(a){this._permittedSchedules.push(Number(a))}));this.isRole||(this._appliedRoles=a.appliedRoles);a=[];if(0===this._permittedSchedules.length)a=
this._scheduleTreeStore.query({type:"schedule"});else for(var b=0;b<this._permittedSchedules.length;++b)a.push(this._scheduleTreeStore.get(this._permittedSchedules[b]));this._selectSchedules(a,!0)}else this._displayErrorMessage(a.errStatus)},_warnOfChanges:function(a,b){b=b||null;var c="";if(this._isBatch)if(!0===this.isRole){for(var c=this.enterpriseStrings.followingRolesAffected+":\x3cbr/\x3e\x3cul\x3e",d=0;d<this._displayNames.length;++d)c+="\x3cli\x3e"+this._displayNames[d]+"\x3c/li\x3e";c+="\x3c/ul\x3e"+
this.webviewStrings.wishToContinue}else{c=this.enterpriseStrings.followingUsersAffected+":\x3cbr/\x3e\x3cul\x3e";for(d=0;d<this._usersInfo.length;++d)c+="\x3cli\x3e"+this._usersInfo[d].userName+"\x3c/li\x3e";c=c+"\x3c/ul\x3e"+this._getRolesRemovalMessage(b)}return this._showWarning("changes"===a?this.webviewStrings.confirmUnsavedChanges:this.enterpriseStrings.batchUpdate,"changes"===a?this.errorStrings.unsavedChangesContinue:c)},_warnOfRoles:function(){var a=this.roleStrings.removedFromRoles+"\x3cul class\x3d'role-warning-list'\x3e";
this._appliedRoles.forEach(l.hitch(this,function(b){a+="\x3cli\x3e"+b.roleName+"\x3c/li\x3e"}));a+="\x3c/ul\x3e"+this.webviewStrings.wishToContinue;return this._showWarning(this.roleStrings.confirmOverride,a)},destroy:function(){this.inherited(arguments);sessionStorage.removeItem("userIds");sessionStorage.removeItem("roleIds")}})})},"dojo/debounce":function(){define([],function(){return function(p,m){var k;return function(){k&&clearTimeout(k);var h=this,g=arguments;k=setTimeout(function(){p.apply(h,
g)},m)}}})},"webview/admin/users/NavPermissionsToolbar":function(){define(["dojo/_base/declare","dojo/i18n!webview/nls/all","dojo/text!webview/admin/users/templates/NavPermissionsToolbar.html","../_Widget","webview/widget/CommitButtons"],function(p,m,k,h){return p("webview/admin/users/NavPermissionsToolbar",[h],{templateString:k,constructor:function(){this.webviewStrings=m}})})},"webview/admin/users/AddUser":function(){define("dojo/_base/declare dojo/_base/lang dojo/cookie dojo/Deferred dojo/dom-class dojo/json dojo/on dojo/promise/all dojo/request/xhr dojo/text!webview/admin/users/templates/AddUser.html dojo/topic dojox/html/entities rc/util/notices ./_UsersBase ../../util/util dijit/form/RadioButton dijit/form/ValidationTextBox ./widget/ApprovalPassword ./NavPermissionsToolbar ../widget/HelpLink ../../widget/CommitButtons ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){return p("webview/admin/users/AddUser",u,{editTemplate:c,_hash:"#Users/AddUser",_ldapEnabled:!1,_userType:0,postCreate:function(){this.inherited(arguments);this._setupValidators();this._addListeners();this._getLDAPStatus().always(m.hitch(this,function(){this.onInitSuccess()}));this.username.set("validator",m.hitch(this,this._usernameValidation));this.approvalPasswordWidget.set("approvalEnabled",rc.session.enforceChangeApproval);this.approvalPasswordWidget.set("userPassword",
this.addUserPassword)},_addListeners:function(){this.own(l(this.addUserPassword,"keyup",m.hitch(this,function(){this.addUserPasswordVerify.validate()})));this.own(l(this.addUserPasswordVerify,"keyup",m.hitch(this,function(){this.addUserPassword.validate()})));this.own(l(this.ldapUser,"click",m.hitch(this,this._onClickLDAPUser)),l(this.ldapGroup,"click",m.hitch(this,this._onClickLDAPGroup)),l(this.localUser,"click",m.hitch(this,this._onClickLocalUser)))},_onClickLDAPUser:function(){g.add(this.addPasswordContainer,
"hidden");g.add(this.addPasswordVerifyContainer,"hidden");g.add(this.addDisplayNameContainer,"hidden");g.add(this.resetPasswordContainer,"hidden");this.displayName.set("validator",m.hitch(this,this._displayNameNoValidation));this._userType=1},_onClickLDAPGroup:function(){g.add(this.addPasswordContainer,"hidden");g.add(this.addPasswordVerifyContainer,"hidden");g.remove(this.addDisplayNameContainer,"hidden");g.add(this.resetPasswordContainer,"hidden");this.displayName.set("validator",m.hitch(this,this._displayNameNoValidation));
this._userType=2},_onClickLocalUser:function(){g.remove(this.addPasswordContainer,"hidden");g.remove(this.addPasswordVerifyContainer,"hidden");g.remove(this.addDisplayNameContainer,"hidden");g.remove(this.resetPasswordContainer,"hidden");this.displayName.set("validator",m.hitch(this,this._displayNameValidation));this._userType=0},onStartWizard:function(){this.inherited(arguments);var a=rc.setupWizard.getStepParamsFromCookie(window.location.hash);this.isUserWizard()?this.wizardOnNextFunction=this.wizardRememberUser:
this.wizardOnNextFunction=this.addUser;null!==a&&(this.username.set("value",decodeURIComponent(a.username)),this.userID=a.username,this.set("name",a.name),this.displayName.set("value",decodeURIComponent(a.name)),a.isActiveDirectory?this._onClickLDAPUser():this.passwordResetRequired.set("checked",a.forcePasswordReset||!1));g.remove(this.addWizardNextContainer,"hidden");g.remove(this.addPromptNode,"hidden")},onDestroyWizard:function(){this.inherited(arguments);k("userID","");this.domNode&&(g.add(this.addPromptNode,
"hidden"),g.add(this.addWizardNextContainer,"hidden"))},_getLDAPStatus:function(){var a=r.get("site/",{handleAs:"json",preventCache:!0,query:{siteId:this.site}});a.then(m.hitch(this,function(a){(this._ldapEnabled=a.properties.enabledActive)?this.ldapUser.set("checked",!0):this.localUser.set("checked",!0);this._ldapEnabled?this._onClickLDAPUser():(this.ldapUser.set("disabled",!0),this.ldapGroup.set("disabled",!0));return a}),m.hitch(this,function(a){this.localUser.set("checked",!0);console.error(this.declaredClass+
" - _getLDAPStatus(): Error Occurred",a)}));return a},_createViews:function(){this.addUserArea.setMainContent(this.adChoice)},addUser:function(){this.adCommitButtons.showCancelOption(!0);this.validateAdd(this.adCommitButtons)},_setupValidators:function(){this.addUserPassword.set("validator",m.hitch(this,this.isPasswordValidForAdding));this.addUserPasswordVerify.set("validator",m.hitch(this,this.isPasswordValidForAdding))},wizardRememberUser:function(){var b=this.validNames(),c={};if(b.valid){var d=
this._isLDAPUser(),g=d?{valid:!0}:this.validatePassword(this.addUserPassword.get("value")),l=t.encode(this.approvalPasswordWidget.get("approvalField")),k=t.encode(this.addUserPassword.get("value")),q=this.approvalPasswordWidget.validateApprovalPassword(l,k);if(b.valid&&g.valid&&q.valid){var r=this.approvalPasswordWidget.resetRequiredValue(),b=new h;d?b.resolve(""):b.promise=a.encryptPassword(k,!1);f({encryptedUserPassword:b.promise,encryptedApproval:a.encryptPassword(l,!1)}).then(m.hitch(this,function(a){null!==
a?(c={isActiveDirectory:0!==this._userType?!0:!1,siteId:this.site,username:encodeURIComponent(this.username.get("value")),password:a.encryptedUserPassword,approvalPassword:a.encryptedApproval,forceApprovalPasswordReset:r,name:encodeURIComponent(this.displayName.get("value")),userType:this._userType},c.forcePasswordReset=c.isActiveDirectory?!1:this.passwordResetRequired.get("checked"),this.userID=encodeURIComponent(this.username.get("value")),this._validateApprovalSessionWithSecondary({password:c.password,
approvalPassword:c.approvalPassword}).then(m.hitch(this,function(a){c.changeReason=a;rc.setupWizard.next(this.getWizardUnknowns(),c)}))):this._showError(g.msg)}))}else b.valid?g.valid?q.valid||this._showError(q.msg):this._showError(g.msg):this._showError(b.msg)}else this._showError(b.msg)},_addUser:function(a,c){if(!this._beginUpdate())return null;q.widget.clear();this.saveDeferred=new h;rc.xhr.request(a);var d=l(c.cancelSaveNode,"click",m.hitch(this,function(){this._cancelRequest(this._path,this._processId);
this.saveDeferred.cancel("User Cancelled");this.saveDeferred=null;d.remove()}));this.saveDeferred.then(m.hitch(this,function(a){this._endUpdate();q.widget.clear();if(200===a.errStatus){var d=this._send({path:"user/",type:"rest",method:"get",siteId:this.site,userID:this.userID},"all",!0,!0,!0);rc.setupWizard||d.then(m.hitch(this,this.goToLoginInfo))}else d=this._getErrorMessage(a.errStatus),b.publish(d.noticeType,{type:d.type,message:d.msg});c.showCancelOption(!1);return a}),m.hitch(this,function(a){q.widget.clear();
if("User Cancelled"===a){var d=this._getErrorMessage(511);b.publish(d.noticeType,{type:d.type,message:d.msg})}else console.error(this.declaredClass+" - _addUser(): Unknown Error",a);this._endUpdate();c.showCancelOption(!1);return a}))},_isLDAPUser:function(){return 1===this._userType||2===this._userType},isPasswordValidForAdding:function(a){return this._validatePassword(a,this.addUserPassword,this.addUserPasswordVerify).valid},validatePassword:function(a){return this._validatePassword(a,this.addUserPassword,
this.addUserPasswordVerify)},_validatePassword:function(a,b,c){var d={valid:!0,msg:"success"},f=b.get("value"),g=c.get("value");if(""===f)b.set("invalidMessage",this.errorStrings.loginPassEmpty),c.set("invalidMessage",this.errorStrings.loginPassEmpty),d.valid=!1,d.msg=this.errorStrings.loginPassEmpty;else if(a!==f||a!==g)b.set("invalidMessage",this.errorStrings.pwDoNotMatch),c.set("invalidMessage",this.errorStrings.pwDoNotMatch),d.valid=!1,d.msg=this.errorStrings.pwDoNotMatch;return d},_displayNameValidation:function(a){return this._nameValidation(a,
this.displayName)},_displayNameNoValidation:function(a){return!0},_usernameValidation:function(a){return this._nameValidation(a,this.username)},_nameValidation:function(a,b){var c=!1;a=a.trim();a=a.toLowerCase();try{"admin"===a||"administrator"===a?b.set("invalidMessage",this.errorStrings.adminReservedName):""!==a&&(c=!0)}catch(w){return console.error(this.declaredClass+" - _nameValidation(): Unknown Error",w,a,b),!1}return c},validNames:function(){var a={valid:!1,msg:""};this.username.isValid()?
this.displayName.isValid()?a.valid=!0:a.msg=this.displayName.get("invalidMessage"):a.msg=this.username.get("invalidMessage");return a},_addActiveDirectoryUser:function(a,b){var c=this.validNames();if(c.valid){var f={siteId:this.site,username:encodeURIComponent(this.username.get("value")),name:encodeURIComponent(this.displayName.get("value")),userType:this._userType};this.userID=encodeURIComponent(this.username.get("value"));a.params=d.stringify(f);this._addUser(a,b)}else this._showError(c.msg);return c},
_addLocalUser:function(b,c){var d=this.validNames(),f=this.validatePassword(this.addUserPassword.get("value"));d.valid&&f.valid?a.encryptPassword(this.addUserPassword.get("value")).then(m.hitch(this,this._passwordEncrypted,b,c),m.hitch(this,function(a){console.error(this.declaredClass+" - _checkLoginType(): Could not encrypt password",a)})):(d.valid||this._showError(d.msg),f.valid||this._showError(f.msg));return d},_passwordEncrypted:function(a,b,c){c={siteId:this.site,username:encodeURIComponent(this.username.get("value")),
password:c,forcePasswordReset:this.passwordResetRequired.get("checked"),name:encodeURIComponent(this.displayName.get("value")),userType:this._userType};this.userID=encodeURIComponent(this.username.get("value"));null!==c&&(a.params=d.stringify(c),this._addUser(a,b))},validateAdd:function(a){var c=this.validNames();c.valid?(c={type:"rest",method:"POST",path:this._path,load:m.hitch(this,function(a){if(a.data)return this._checkProgress(a.data,this._path)})},q.widget.clear(),b.publish("alert",{type:"info",
message:this.errorStrings.addInProgress}),this.ldapUser.get("checked")?this._addActiveDirectoryUser(c,a):this._addLocalUser(c,a)):this._showError(c.msg)}})})},"webview/admin/navGroups/NavGroups":function(){define("dijit/Dialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/has dojo/on dojo/string dojo/text!webview/admin/navGroups/templates/navGroups.html dojo/topic dojox/form/Uploader rc/util/notices ../_base ../widget/ImageGallery ../../widget/WarningDialog ../../widget/WarningDialogEnums dijit/form/Button dijit/form/TextBox dijit/form/ValidationTextBox dojo/sniff ../../widget/MultiSelectBox ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v){return k("webview/admin/navGroups/NavGroups",[u],{acceptedFileExtensions:[".jpg",".jpeg",".png",".gif",".bmp"],auditLogObjectName:"NavigationGroup",graphic:null,imageGallery:null,imageGalleryDialog:null,individualPath:"navGroup",MAX_NAME_LENGTH:50,nameOfIndividual:"navgroup",templateString:c,_MAX_FILE_UPLOAD_SIZE_IN_MB:25,_path:"navGroups/",_uploadedFiles:null,constructor:function(){this._uploadedFiles=[];h.mixin(this.ErrorMessageMap,{501:this.errorStrings.duplicateGroup,
502:this.errorStrings.groupDoesNotExist})},postCreate:function(){this.inherited(arguments);this._createUploader();this._buildGallery()},clearFields:function(){this.nameTB.set("value","");this.graphic=null;this.graphicFileTB.set("value","")},fetch:function(){if(!this._beginUpdate())return null;var a={type:"rest",method:"GET",preventCache:!0,path:this._path};h.mixin(a,this._buildFetchParams());a=rc.xhr.request(a);a.then(h.hitch(this,function(a){a.data&&200===a.data.errStatus?(this.render(a),this.onInitSuccess()):
a.data&&502===a.data.errStatus?this._onInitError(this._getErrorMessage(a.data.errStatus)):(a.data?this._displayErrorMessage(a.data):console.error(this.declaredClass+" - fetch(): Data returned is null",a),this.onInitSuccess());return a}),h.hitch(this,function(a){this._onInitError(a);return a})).always(h.hitch(this,this._endUpdate));return a},onImageSelected:function(a){this.emit("imageSelected",a);this.graphicFileTB.set("value",a.originalFilename);this.graphic=a.filename;this._updateGallery()},validateAdd:function(){var a=
this.nameTB.get("value");return""===a.trim()?(b.publish("sticky",{type:"error",message:this.errorStrings.emptyNameField}),!1):a.length>this.MAX_NAME_LENGTH?(b.publish("sticky",{type:"error",message:r.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])}),!1):null===this.graphic?(b.publish("sticky",{type:"error",message:this.errorStrings.noGraphicFile}),!1):!0},_addEditContent:function(){this.contentArea.setMainContent(this.listContainer);this.addContainer&&this.contentArea.setMainContent(this.addContainer)},
_buildAddParams:function(){return{siteId:this.site,graphicFile:this.graphic}},_buildDeleteParams:function(a){return{navGroupIds:a,siteId:this.site}},_buildFetchParams:function(){return{siteId:this.site}},_buildGallery:function(){this.imageGallery=new a({});this.imageGalleryDialog=new p({title:this.webviewStrings.uploadedBackgroundsGallery,content:this.imageGallery,baseClass:"imageGalleryDialogBox"});this.own(f(this.imageGallery,"imageSaved",h.hitch(this,function(a){this.onImageSelected(a);this.imageGalleryDialog.hide()})));
this.own(f(this.imageGallery,"imageDeleted",h.hitch(this,function(a){this.graphicFileTB.get("value")===a.originalFilename&&(this.graphicFileTB.set("value",null),this.graphic=null);rc.xhr.request({path:"NavGroupGraphicFiles",type:"rest",method:"DELETE",siteId:this.site,fileId:a.id}).then(h.hitch(this,this._updateGallery),h.hitch(this,function(a){console.error(this.declaredClass+" - _buildGallery(): Error deleting icon file",a)}))})));this.own(f(this.imageGalleryButton,"click",h.hitch(this,function(){this._updateGallery();
this.imageGalleryDialog.show()})))},_connectEvents:function(){this.own(f(this._multiSelect,"singleSelected",h.hitch(this,function(a){null===a?(d.add(this.editButton.domNode,"hidden"),d.add(this.previewButton.domNode,"hidden")):(d.remove(this.editButton.domNode,"hidden"),d.remove(this.previewButton.domNode,"hidden"),this.selectedItem=a.value)})));this.own(f(this._multiSelect,"select",h.hitch(this,function(){0<this._multiSelect.getSelectedItems().length?d.remove(this.deleteButton.domNode,"hidden"):
d.add(this.deleteButton.domNode,"hidden")})))},_createUploader:function(){this._graphicFileUploader=new t({label:this.webviewStrings.upload.toUpperCase(),multiple:!1,showInput:!0,url:rc.pathInfo.sitePath+"/uploader/NavGroup",baseClass:"webviewButton uploader",iconClass:"webviewIcon uploadIcon",onChange:h.hitch(this,this._uploadGraphicFile)},this.graphicFileUploader);this._graphicFileUploader.startup();this.own(f(this._graphicFileUploader,"complete",h.hitch(this,this._uploadComplete)))},_createWarningDialog:function(){this._uploadedFiles=
[];rc.xhr.request({path:"NavGroupGraphicFiles/",type:"rest",method:"GET",siteId:this.site}).then(h.hitch(this,function(a){a.data&&m.forEach(a.data,h.hitch(this,function(a){this._uploadedFiles.push(a.fileName)}))}));this._overwriteWarningDialog=new n({title:this.webviewStrings.overwriteDialogTitle,type:v.types.binary,text:this.webviewStrings.overwriteDialogBody})},_onPreview:function(){var a="?site\x3d"+encodeURIComponent(this.site),b="\x26navgroup\x3d"+encodeURIComponent(this.selectedItem);window.location.hash=
"#navGroup"+a+b+"\x26view\x3duserView"},_setLabels:function(){this._multiSelect.setLabel(this.webviewStrings.navGroups+":");this._multiSelect.setHint(this.webviewStrings.msHint);g.set(this.dataLabel,"innerHTML",this.webviewStrings.navGroupName);this.addButton.set("label",this.webviewStrings.addNavGroup.toUpperCase())},_updateGallery:function(){rc.xhr.request({path:"NavGroupGraphicFiles",type:"rest",method:"GET",siteId:this.site}).then(h.hitch(this,function(a){this.imageGallery.updateImages(a.data,
a.data.length,"navGroup");this.imageGallery.selectCurrentImage(this.graphic)}),h.hitch(this,function(a){console.error(this.declaredClass+" - _updateGallery(): Error getting icon files",a)}))},_uploadComplete:function(a){if(200===a.errStatus){var b=a.fileName;if(l("trident"))var c=b.lastIndexOf("\\")+1,b=b.substring(c);this.graphicFileTB.set("value",b);this.graphic=a.guid;this._uploadedFiles.push(b)}else this._displayErrorMessage(a)},_uploadGraphicFile:function(a){var c={siteId:this.site},d=!0,f=a[0].name,
g=f.lastIndexOf("\\")+1,f=f.substring(g),g=f.lastIndexOf("."),f=f.substring(g);q.widget.clear();this._graphicFileUploader.convertBytes(a[0].size).mb>=this._MAX_FILE_UPLOAD_SIZE_IN_MB&&(d=!1,b.publish("sticky",{type:"error",message:r.substitute(this.errorStrings.fileExceedsX,[this._MAX_FILE_UPLOAD_SIZE_IN_MB+"MB"])}));if(-1===this.acceptedFileExtensions.indexOf(f.toLowerCase())){var d=!1,h=this.errorStrings.unsupportedFileType+"\x3cul\x3e";m.forEach(this.acceptedFileExtensions,function(a){h+="\x3cli\x3e"+
a+"\x3c/li\x3e"});h+="\x3c/ul\x3e";b.publish("sticky",{type:"error",message:h})}d&&this._graphicFileUploader.upload(c)}})})},"webview/admin/navGroups/NavGroup":function(){define("dijit/Dialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/has dojo/hash dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/io-query dojo/on dojo/text!./templates/navGroup.html dojo/topic dojox/form/Uploader rc/_base/test rc/util/encoding/base16 rc/util/encoding/base64 rc/util/notices ../_Widget ../widget/ImageGallery ../../widget/WarningDialog ../../widget/WarningDialogEnums ../../features/navigationGroups/_WithToolbarsMixin ../../features/navigationGroups/groupBuilding/BuilderStateManager ../../features/navigationGroups/groupRendering/ScaleFactorManager dojo/sniff dijit/form/ValidationTextBox ./NavGroupToolbar ../widget/AdminToolbar ../../widget/ClientToolBar ../../features/navigationGroups/groupBuilding/GroupBuilder ../../widget/CommitButtons ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F){return k("webview/admin/navGroups/NavGroup",[y,D],{_MAX_FILE_UPLOAD_SIZE_IN_MB:25,acceptedFileExtensions:[".jpg",".jpeg",".png",".gif",".bmp"],_path:"navGroupAdmin/",templateString:u,webviewStrings:c,errorStrings:b,rcStrings:r,siteUrl:null,VIEW_PROPERTIES:"properties",VIEW_BUILDER:"builder",_navigationGroupBuilder:null,_hash:"navGroup",_overwriteWarningDialog:null,allowEdit:!0,constructor:function(){this.builderStateManager=new E({editMode:!0,
siteUrl:this.siteUrl,siteId:this.site});this.scaleFactorManager=new F;this.dirtyListeners=[]},postCreate:function(){this.inherited(arguments);this.searchPath=this.groupBuilder.searchPath;this.own(this.watch("siteUrl",h.hitch(this,function(a,b,c){this.builderStateManager.set("siteUrl",c)})));this.builderStateManager.set("site",Number(this.site));this.builderStateManager.set("siteId",Number(this.site));this._buildGallery();this._createButtons();this._createUploader();this._setUpCommitButtons();this._setUpHash();
this._setUpViews();this._switchView(this.view)},resize:function(){this.inherited(arguments);this.groupBuilder.resize()},_setGroupNameAttr:function(a){this.nameTB.set("value",a);this.emit("setTitle",a+" "+c.settings);this._set("groupName",a);this.clientButtonBar&&this.clientButtonBar.setTitle(a);this._buildAuditLogContext()},isSearchable:function(){return this.groupBuilder.groupRenderer.isSearchable()},onImageSelected:function(a){this.setDirty(!0);this.graphicFile=this.newGraphic=a.filename;this._updateGallery();
this._updateBackgroundImagePreview({originalName:a.originalFilename,width:a.width,height:a.height})},print:function(){this.printAsImage(this.groupBuilder.groupRenderer.domNode,this.scaleFactorManager.availableDimensions.width)},publishSearchable:function(){this.groupBuilder.publishSearchable()},setDirty:function(a){this._dirty=a;this._setDirty([this.propertiesCommitButtons.saveButton],a)},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_buildAuditLogContext:function(){webview.auditUtil.setContextDataWithSiteId(this.site,
[{systemId:null,objectName:"#NavigationGroup"+this.navgroup}],this.groupName)},_buildGallery:function(){this.imageGallery=new A({});this.imageGalleryDialog=new p({title:this.webviewStrings.uploadedBackgroundsGallery,content:this.imageGallery,baseClass:"imageGalleryDialogBox"});this.own(q(this.imageGallery,"imageSaved",h.hitch(this,function(a){if(this.graphicFile!==a.filename)this.onImageSelected(a);this.imageGalleryDialog.hide()})));this.own(q(this.imageGallery,"imageDeleted",h.hitch(this,function(a){rc.xhr.request({path:"NavGroupGraphicFiles",
type:"rest",method:"DELETE",siteId:this.site,fileId:a.id}).then(h.hitch(this,this._updateGallery),h.hitch(this,function(a){console.error(this.declaredClass+" - _buildGallery(): Error deleting icon file",a)}))})));this.own(q(this.imageGalleryButton,"click",h.hitch(this,function(){this._updateGallery();this.imageGalleryDialog.show()})))},_checkProperties:function(){var a={msg:"Success",valid:!0};if(""===this.nameTB.get("value").trim())a.valid=!1,a.msg=b.nameIsEmpty;else if(null===this.newGraphic||""===
this.newGraphic.trim())a.valid=!1,a.msg="No background image selected";return a},_clearDirtyListeners:function(){for(var a=this.dirtyListeners.length-1;0<this.dirtyListeners.length;)this.dirtyListeners[a].remove(),this.dirtyListeners.splice(a,1),a--},_createButtons:function(){this.buttonBar.replaceAllButtons([this.propertiesButton,this.builderButton]);this.buttonBar.replaceAllIcons([this.propertiesCommitButtons,this.navGroupToolbar]);this.initializeToolbars()},_createUploader:function(){this._graphicFileUploader=
new n({style:{marginBottom:".5em"},label:this.webviewStrings.upload.toUpperCase(),multiple:!1,showInput:!0,url:rc.pathInfo.sitePath+"/uploader/NavGroup",baseClass:"webviewButton uploader",iconClass:"webviewIcon uploadIcon",onChange:h.hitch(this,this._uploadGraphicFile)},this.graphicFileUploader);this._graphicFileUploader.startup();this.own(q(this._graphicFileUploader,"complete",h.hitch(this,this._uploadComplete)))},_createWarningDialog:function(){null===this._overwriteWarningDialog&&(this._overwriteWarningDialog=
new B({type:C.types.binaryConfirm,title:c.confirmUnsavedChanges,text:b.unsavedChangesContinue,closeButtonVisible:!1}))},_getErrorMessage:function(a){var b={msg:this.errorStrings.unexpectedError,type:"error",noticeType:"sticky"};switch(a){case 200:b.msg=this.errorStrings.successfulSave;b.type="success";b.noticeType="alert";break;case 501:b.msg=this.errorStrings.navGroupNotFound;break;case 504:b.msg=this.errorStrings.unexpectedError;break;case 505:b.msg=this.errorStrings.backgroundImageNotFound;break;
case 506:b.msg=this.errorStrings.duplicateGroup;break;case 403:b.msg=this.errorStrings.notAuthenticated;break;default:console.error(this.declaredClass+" - _getErrorMessage(): Invalid Error Status",a)}return b},_onBuilderClicked:function(){if(this._dirty){this._createWarningDialog();var a=this._overwriteWarningDialog.on("close",h.hitch(this,function(b){switch(b){case C.returnValues.oneOrYes:this._switchView(this.VIEW_BUILDER);break;case C.returnValues.none:break;default:console.error(this.declaredClass+
" - _uploadCustomFile(): Unknown choice",b)}a.remove()}));this.own(a);this._overwriteWarningDialog.open()}else this._switchView(this.VIEW_BUILDER)},_onPropertiesClicked:function(){this._switchView(this.VIEW_PROPERTIES)},_onUpdatedDetails:function(a){a?(this.onInitSuccess(),this.nameTB.get("value")!==a.name&&(this._clearDirtyListeners(),q.once(this.nameTB,"change",h.hitch(this,function(a){this._setUpDirtyListeners()}))),this.newGraphic=a.backgroundImagePath,this.set("graphicFile",a.backgroundImagePath),
this.set("groupName",a.name),this._updateBackgroundImagePreview({originalName:a.backgroundImageOriginalName,width:a.backgroundWidth,height:a.backgroundHeight}),this.setDirty(!1)):this._onInitError()},_setDirty:function(a,b){var c=b?d.remove:d.add,f=b?d.add:d.remove;m.forEach(a,h.hitch(this,function(a){f(a.toolbarButtonIcon,"dirtySaveIcon");c(a.toolbarButtonIcon,"saveIcon")}))},_setUpHash:function(){var a=f();this.isAdminPage()||v.mode<v.PROXY_LIVE&&(a=x.toCharString(w.decode(a)));if(0===a.indexOf(this._hash))this._hash+=
"?site\x3d"+this.site,this._hash+="\x26navgroup\x3d"+encodeURIComponent(this.navgroup);else{var b=a.substring(a.indexOf("?")+1,a.length),b=t.queryToObject(b);this._hash=a.substring(0,a.indexOf("\x26"));this.view=b.view;this.navgroup=this._hash.split("?")[0].replace("NavigationGroup","")}},_setUpBuilder:function(){this.groupBuilder.startUp(this.scaleFactorManager,this.builderStateManager,this.rightSideFlyout);this.own(this.groupBuilder.groupRenderer.watch("groupDetails",h.hitch(this,function(a,b,c){this._onUpdatedDetails(c)})))},
_setUpCommitButtons:function(){this.own(q(this.propertiesCommitButtons.saveButton.toolbarButtonIcon,"click",h.hitch(this,this._saveProperties)),q(this.propertiesCommitButtons.cancelButton.toolbarButtonIcon,"click",h.hitch(this.groupBuilder,this.groupBuilder.reloadGroupDetails)))},_setUpDirtyListeners:function(){this._clearDirtyListeners();this.dirtyListeners.push(q(this.nameTB,"change",h.hitch(this,function(a){this.navGroupName!==a&&this.setDirty(!0)})))},_setUpProperties:function(){this.groupProperties.setMainContent(this.propertiesContainer)},
_setUpTabActiveListeners:function(){this.own(q(window,"visibilitychange",h.hitch(this.groupBuilder.groupRenderer,this.groupBuilder.groupRenderer.onVisibilityChanged)))},_setUpViews:function(){this._views={};this._views[this.VIEW_PROPERTIES]={selector:this.propertiesButton.domNode,view:this.groupProperties.domNode,toolbarButtons:this.propertiesCommitButtons.domNode};this._views[this.VIEW_BUILDER]={selector:this.builderButton.domNode,view:this.groupBuilder.domNode,toolbarButtons:this.navGroupToolbar.domNode};
this._setUpBuilder();this._setUpProperties();this._setUpTabActiveListeners()},_switchView:function(a){if(!this._currentView||this._currentView!==a){m.forEach(Object.keys(this._views),h.hitch(this,function(a){d.add(this._views[a].view,"hidden")}));var b,c;a===this.VIEW_PROPERTIES?(this._currentView=this.VIEW_PROPERTIES,this.builderStateManager.set("userEditInProgress",!0),this.groupBuilder.closeBuilderTools(),b=this._views[this.VIEW_BUILDER],c=this._views[this.VIEW_PROPERTIES],this.groupBuilder.publishUnsearchable()):
(this._currentView=this.VIEW_BUILDER,this.builderStateManager.set("userEditInProgress",!1),b=this._views[this.VIEW_PROPERTIES],c=this._views[this.VIEW_BUILDER],this.groupBuilder.resize(),"userView"===a?this._onClickView():this.builderStateManager.set("editMode",!0),this.groupBuilder.publishSearchable());this._toggleViewSelection(b,!1);this._toggleViewSelection(c,!0)}},_toggleViewSelection:function(a,b){d.toggle(a.view,"hidden",!b);d.toggle(a.selector,"selected",b);a.toolbarButtons&&d.toggle(a.toolbarButtons,
"hidden",!b)},_updateBackgroundImagePreview:function(a){if(this.newGraphic){var b=rc.rootPath+"Uploads/NavGroup/"+this.newGraphic;b!==this._previewImage&&(this._previewImage=b,g.set(this.imagePreview,"src",this._previewImage))}this.graphicFileTB.innerText=a.originalName;g.set(this.imageWidth,"innerHTML",a.width+"px");g.set(this.imageHeight,"innerHTML",a.height+"px")},_uploadComplete:function(a){if(200===a.errStatus||500===a.errStatus){var b=a.fileName;if(l("trident"))var c=b.lastIndexOf("\\")+1,b=
b.substring(c);this.graphicFileTB.innerText=b;this.newGraphic=a.guid;this.newGraphic!==this.graphicFile&&this.setDirty(!0);this._updateBackgroundImagePreview({originalName:b,width:a.width,height:a.height})}},_uploadGraphicFile:function(b){var c={siteId:this.site},d=!0,f=b[0].name,g=f.lastIndexOf("\\")+1,f=f.substring(g),g=f.lastIndexOf("."),f=f.substring(g);z.widget.clear();this._graphicFileUploader.convertBytes(b[0].size).mb>=this._MAX_FILE_UPLOAD_SIZE_IN_MB&&(d=!1,a.publish("sticky",{type:"error",
message:string.substitute(this.errorStrings.fileExceedsX,[this._MAX_FILE_UPLOAD_SIZE_IN_MB+"MB"])}));if(-1===this.acceptedFileExtensions.indexOf(f.toLowerCase())){var d=!1,h=this.errorStrings.unsupportedFileType+"\x3cul\x3e";m.forEach(this.acceptedFileExtensions,function(a){h+="\x3cli\x3e"+a+"\x3c/li\x3e"});h+="\x3c/ul\x3e";a.publish("sticky",{type:"error",message:h})}d&&this._graphicFileUploader.upload(c)},_saveProperties:function(){var b=this._checkProperties();b.valid?rc.xhr.request({path:this._path+
"Properties",type:"rest",method:"POST",navGroupId:this.navgroup,navGroupName:this.nameTB.get("value").trim(),navGroupImage:this.newGraphic}).then(h.hitch(this,function(b){200===b.data.errStatus&&(a.publish("updateNavTree",!1),this.setDirty(!1));b=this._getErrorMessage(b.data.errStatus);a.publish(b.noticeType,{type:b.type,message:b.msg})}),h.hitch(this,function(b){console.error(this.declaredClass+" - _saveProperties(): Save failed",b.message);b=this._getErrorMessage(504);a.publish(b.noticeType,{type:b.type,
message:b.msg})})):a.publish("alert",{type:"error",message:b.msg})},_updateGallery:function(){rc.xhr.request({path:"NavGroupGraphicFiles",type:"rest",method:"GET",siteId:this.site}).then(h.hitch(this,function(a){for(var b=a.data.length-1;0<b;b--)if(a.data[b].encodedFileName===this.newGraphic){a.data[b].inUseByNavGroup=!0;break}this.imageGallery.updateImages(a.data,a.data.length,"navGroup");this.imageGallery.selectCurrentImage(this.newGraphic)}),h.hitch(this,function(a){console.error(this.declaredClass+
" - _updateGallery(): Error getting icon files",a)}))},destroy:function(){for(;this.dirtyListeners.length;)this.dirtyListeners[this.dirtyListeners.length-1].remove(),this.dirtyListeners.splice(this.dirtyListeners.length-1,1);this.inherited(arguments)}})})},"webview/features/navigationGroups/_WithToolbarsMixin":function(){define("dijit/Tooltip dojo/_base/declare dojo/_base/lang dojo/cookie dojo/dom-class dojo/i18n!rc/nls/all dojo/on ../../widget/ClientToolBar".split(" "),function(p,m,k,h,g,d,l,f){return m("webview/features/navigationGroups/_WithToolbarsMixin",
[],{_menuItems:[d.tbScaled,d.tbFullsize,d.tbStretched],_currentState:0,_navGroupCookieName:"navgroup",onInitSuccess:function(){this.inherited(arguments);this.builderStateManager.get("editMode")||this._readStateFromCookie()},initializeToolbars:function(){this.clientButtonBar||(this.clientButtonBar=new f({class:"nav-group-client-toolbar"}));this._connectToolbars();rc.session.hasRole(rc.session.adminRoles.navGroupAdmin)&&(this._editButton=this.clientButtonBar.addToolBarItem(d.edit,"edit","rc24Icon editIcon",
k.hitch(this,this._onClickEdit)),this._editButton.tooltip=new p({connectId:this._editButton.domNode,label:d.edit,position:["above"],showDelay:0}));this._scaleButton=this.clientButtonBar.addToolBarItem(this._menuItems[this._currentState],"scale","rc24Icon scaleIcon",k.hitch(this,this._onClickScaleButton));this._scaleButton.tooltip=new p({connectId:this._scaleButton.domNode,label:this._menuItems[this._currentState],position:["above"],showDelay:0});return this.clientButtonBar},_connectToolbars:function(){this.navGroupToolbar.zoomTools.set("scaleFactorManager",
this.scaleFactorManager);this.navGroupToolbar.set("builderStateManager",this.builderStateManager);this.own(l(this.navGroupToolbar,"viewClicked",k.hitch(this,this._onClickView)),l(this.navGroupToolbar,"undoClicked",k.hitch(this.groupBuilder,this.groupBuilder.onUndoClicked)),l(this.navGroupToolbar,"redoClicked",k.hitch(this.groupBuilder,this.groupBuilder.onRedoClicked)),l(this.navGroupToolbar,"addAnimationClicked",k.hitch(this.groupBuilder,this.groupBuilder.onAddAnimationClicked)),l(this.navGroupToolbar,
"addKeywordClicked",k.hitch(this.groupBuilder,this.groupBuilder.onAddKeywordClicked)),l(this.navGroupToolbar,"addObjectClicked",k.hitch(this.groupBuilder,this.groupBuilder.onAddObjectClicked)));this.navGroupToolbar.setSiteUrl(this.siteUrl)},_onClickEdit:function(){this.builderStateManager.set("editMode",!0);g.remove(this.buttonBar.domNode,"hidden");g.add(this.clientButtonBar.domNode,"hidden")},_onClickScaleButton:function(){this._scaleButton.tooltip.close&&this._scaleButton.tooltip.close();this._setCurrentState(this._currentState+
1)},_onClickView:function(){this.builderStateManager.set("editMode",!1);g.remove(this.clientButtonBar.domNode,"hidden");g.add(this.buttonBar.domNode,"hidden");this._readStateFromCookie()},_setCurrentState:function(d){this._currentState=d%3;this._scaleButton.set("tooltipLabel",this._menuItems[this._currentState]);this._scaleButton.tooltip.set?this._scaleButton.tooltip.set("label",this._menuItems[this._currentState]):this._scaleButton.set("title",this._menuItems[this._currentState]);switch(this._currentState){case 2:this.scaleFactorManager.setToStretchedDimensions();
break;case 1:this.scaleFactorManager.set("scaleFactor",1);break;default:this.scaleFactorManager.set("scaleFactor",NaN)}d=h(this._navGroupCookieName);var c={};d&&(c=JSON.parse(d));c.scale=this._currentState;h(this._navGroupCookieName,JSON.stringify(c),{expires:365,path:"/"})},_readStateFromCookie:function(){var d=h(this._navGroupCookieName);d&&(d=JSON.parse(d),this._setCurrentState(d.scale))}})})},"webview/widget/ClientToolBar":function(){define("dijit/_TemplatedMixin dijit/Menu dijit/form/Button dijit/layout/ContentPane dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/Evented dojo/i18n!webview/nls/alarms dojo/i18n!rc/nls/all dojo/on dojo/text!./templates/ClientToolBar.html ./ChecklistButton ./MenuBarZoomTools ./PopupMenuBarItem".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x){return d("webview/widget/ClientToolBar",[h,p,b],{baseClass:"clientToolBar",region:"top",_rightMargin:10,_itemPoistion:0,_buttons:null,templateString:a,postCreate:function(){this.inherited(arguments);this._init()},_init:function(){this._buttons={}},addToolBarItem:function(a,b,d,f){a=this._makeToolBarItem(a,b,d,f);this._buttons[b]=a;r.place(a.domNode,this.buttonContainer,"first");b=c.get(this.buttonContainer,"width");c.set(this.buttonContainer,"width",b+
40+"px");return a},addMenuDropDownItem:function(a,b,d,f){a=this._makeMenuDropDownItem(a,b,d,f);r.place(a.menu.domNode,this.buttonContainer,"first");d=c.get(this.buttonContainer,"width");c.set(this.buttonContainer,"width",d+40+"px");this._buttons[b]=a.menu;return a.dropDown},_makeToolBarItem:function(a,b,c,d){return new k({region:"right",tooltipLabel:a||"",label:"",baseClass:this.baseClass+"Item "+b+" "+a+" toolbarButton",iconClass:"clientToolBarIcon "+c,onClick:d||""})},_makeMenuDropDownItem:function(a,
b,c,d){var f=new m({tooltipLabel:a||"",baseClass:this.baseClass+"Item "+b+" "+a});a=new x({label:"",baseClass:this.baseClass+"Item "+b+" "+a,iconClass:"rc24Icon clientToolBarIcon "+c,popup:d.dropDown});f.addChild(a);return{menu:f,dropDown:a}},addZoomTools:function(){this._zoomTools&&(this._buttons.zoomTools=null,this.zoomTools.destroyRecursive(),delete this._buttons.zoomTools);this._zoomTools=new v({baseClass:"toolBarZoomer clientToolBarZoomer ",iconBaseClass:"webviewIcon clientToolBarIcon",menuBar:this});
return this._buttons.zoomTools=this._zoomTools},_userIsAdmin:function(){return"admin"===rc.session.getUsername().toLowerCase()},makeSystemFilter:function(){var a=null,a=this._userIsAdmin()?rc.xhr.request({path:"GetSystemsForSite",type:"rest",method:"GET"}):rc.xhr.request({path:"GetPermittedSystems/",type:"rest",method:"GET"});a.always(l.hitch(this,function(a){if(a.data){if(1<a.data.length){var b=[];g.forEach(a.data,l.hitch(this,function(a){b.push({name:a.name,value:a.id,checked:Number(webview.pathUtil.currentSiteInfo.system)===
a.id?!0:!1})}));var d=new n({className:"clientToolBarItem system-filter-menu-item",label:t.filterBySystem,list:b,name:q.systems,templateString:"\x3cspan\x3e\x3c/span\x3e"});this.own(u(d,"editEnd",l.hitch(this,function(){this.onSystemFilter(d.get("value"))})));this._buttons.SystemFilter=d;r.place(d.domNode,this.buttonContainer,"first");a=c.get(this.buttonContainer,"width");c.set(this.buttonContainer,"width",a+150+"px")}}else console.error(this.declaredClass+" - _createSystemFilter(): Error getting permitted systems",
a)}))},onSystemFilter:function(a){this.emit("systemFilter",a);return a},getPageButtons:function(){return this._buttons},getButton:function(a){return this._buttons[a]},setTitle:function(a){f.set(this._title,{innerHTML:a,title:a})},destroy:function(){Object.keys(this._buttons).forEach(l.hitch(this,function(a){this._buttons[a].tooltip&&this._buttons[a].tooltip.destroyRecursive();this._buttons[a].destroyRecursive()}));this._buttons=[];this.inherited(arguments)}})})},"webview/widget/MenuBarZoomTools":function(){define("dijit/_Widget dijit/form/Button dojo/_base/declare dojo/_base/lang dojo/i18n!webview/nls/all ./MenuBarItem".split(" "),
function(p,m,k,h,g,d){return k("webview/widget/ClientToolBar",[p],{_buttons:{},baseClass:null,zoomFactor:0,MAX_ZOOM_LEVEL:2,ZOOM_FACTOR:.2,isEnabled:!0,menuBar:null,postCreate:function(){this.inherited(arguments);this.zoomOut=new m({tooltipLabel:g.zoomOut,label:"",baseClass:"clientToolBarItem menuBarZoomOut",iconClass:"rc24Icon clientToolBarIcon zoomOutIcon",onClick:h.hitch(this,this._zoomOut)});this.zoomIn=new m({tooltipLabel:g.zoomIn,label:"",baseClass:"clientToolBarItem menuBarZoomIn",iconClass:"rc24Icon clientToolBarIcon zoomInIcon",
onClick:h.hitch(this,this._zoomIn)});this.zoomState=new d({tooltipLabel:g.zoomOut,label:"",baseClass:"clientToolBarLabel menuBarZoomState",iconClass:"noIcon"});this.menuBar.addChild(this.zoomOut);this.menuBar.addChild(this.zoomState);this.menuBar.addChild(this.zoomIn)},_zoomIn:function(){this.zoomFactor!==this.MAX_ZOOM_LEVEL&&this.isEnabled&&this._onZoom(!0)},_zoomOut:function(){this.zoomFactor!==-1*this.MAX_ZOOM_LEVEL&&this.isEnabled&&this._onZoom(!1)},disableZoom:function(d){this.isEnabled=!d},
_setZoomState:function(){var d;0===this.zoomFactor?d="":0<this.zoomFactor?d=Math.round(100*(this.zoomFactor+1)):0>this.zoomFactor&&(d=Math.round(1/(Math.abs(this.zoomFactor)+1)*100));this.zoomState.set("label",d+(""!==d?"%":""))},_onZoom:function(d){this.zoomFactor=d?this.zoomFactor+this.ZOOM_FACTOR:this.zoomFactor-this.ZOOM_FACTOR;this.zoomFactor=Math.round(10*this.zoomFactor)/10;this._setZoomState(this.zoomFactor);this.onZoom({isReset:!1,zoomFactor:this.zoomFactor})},onZoom:function(d){return d},
resetZoom:function(){this.zoomFactor=0;this._setZoomState()}})})},"webview/features/navigationGroups/groupBuilding/BuilderStateManager":function(){define(["dijit/_WidgetBase","dojo/_base/declare"],function(p,m){return m("webview/features/navigationGroups/groupBuilder/BuilderStateManager",[p],{editMode:null,siteId:null,siteUrl:null,undoRedoInProgress:!1,userEditInProgress:!1,_setUndoRedoInProgressAttr:function(k){this.set("userEditInProgress",k);this._set("undoRedoInProgress",k)}})})},"webview/features/navigationGroups/groupRendering/ScaleFactorManager":function(){define(["dojo/_base/declare",
"dojo/Stateful"],function(p,m){return p("webview/features/navigationGroups/groupRendering/ScaleFactorManager",[m],{DEFAULT_SCALE_FACTOR:1,MAXIMUM_SCALE_FACTOR:3,MINIMUM_SCALE_FACTOR:.25,SCALE_INCREMENT:.1,_isScaledToFit:!1,isStretched:!1,_availableDimensionsSetter:function(k){this.availableDimensions=k;this._calculateScaledToFitAndStretched()},_backgroundDimensionsGetter:function(){return this.backgroundDimensions&&this.backgroundDimensions.width&&this.backgroundDimensions.height?this.backgroundDimensions:
null},_backgroundDimensionsSetter:function(k){this.backgroundDimensions&&this.backgroundDimensions.width===k.width&&this.backgroundDimensions.height===k.height||(this.backgroundDimensions=k,this._calculateScaledToFitAndStretched())},_dimensionScaleFactorsGetter:function(){return{height:this.get("heightScaleFactor")||this.DEFAULT_SCALE_FACTOR,width:this.get("widthScaleFactor")||this.DEFAULT_SCALE_FACTOR}},_isMaximumScaleSetter:function(k){k&&this.set("isMinimumScale",!1)},_isMinimumScaleSetter:function(k){k&&
this.set("isMaximumScale",!1)},_scaleFactorSetter:function(k){this.scaleFactor=k;this.isStretched=!1;isNaN(k)?(k=this.scaledToFitFactor,this._isScaledToFit=!0):this._isScaledToFit=!1;k>=this.MAXIMUM_SCALE_FACTOR?this.set("isMaximumScale",!0):k<=this.MINIMUM_SCALE_FACTOR?this.set("isMinimumScale",!0):(this.set("isMaximumScale",!1),this.set("isMinimumScale",!1));this._isScaledToFit||(k=Math.min(this.MAXIMUM_SCALE_FACTOR,k),k=Math.max(this.MINIMUM_SCALE_FACTOR,k));this.set("widthScaleFactor",k);this.set("heightScaleFactor",
k)},getScaledCssFontStyling:function(k){var h=Math.min(this.widthScaleFactor,this.heightScaleFactor);if(k&&k["font-size"]&&h){var g=parseInt(k["font-size"]);isNaN(g)?delete k["font-size"]:k["font-size"]=g*h+"pt"}return k},setToStretchedDimensions:function(){this.isStretched=!0;this.set("heightScaleFactor",this.stretchedScaledFactors.height);this.set("widthScaleFactor",this.stretchedScaledFactors.width)},scaleDown:function(){this.set("scaleFactor",this.widthScaleFactor+this.SCALE_INCREMENT)},scaleUp:function(){this.set("scaleFactor",
this.widthScaleFactor-this.SCALE_INCREMENT)},_calculateScaledToFitAndStretched:function(){this.stretchedScaledFactors=this._getStretchedScaleFactors();this.scaledToFitFactor=this._getScaledToFitScaleFactor(this.stretchedScaledFactors);this.isStretched?this.setToStretchedDimensions():(!0===this._isScaledToFit||isNaN(this.scaleFactor))&&this.set("scaleFactor",NaN)},_getScaledToFitScaleFactor:function(k){return Math.min(k.width,k.height)},_getStretchedScaleFactors:function(){var k=this.get("availableDimensions"),
h=this.get("backgroundDimensions"),g={height:this.DEFAULT_SCALE_FACTOR,width:this.DEFAULT_SCALE_FACTOR};k&&h&&(g.height=k.height/h.height,g.width=k.width/h.width);return g},_scaleFactorGetter:function(){return this.scaleFactor}})})},"webview/admin/navGroups/NavGroupToolbar":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!webview/admin/navGroups/templates/navGroupToolbar.html ../../widget/UndoRedoButtons ../../widget/ZoomTools ../../widget/AddButton".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return h("webview/admin/groups/NavGroupToolbar",[m,p,k,d],{site:"",siteUrlPath:"",templateString:t,_siteWideNodes:null,constructor:function(){this.webviewStrings=r;this.afterHoursStrings=f;this.errorStrings=c;this.rcStrings=l},postCreate:function(){this.inherited(arguments);this._setupListeners();this.navGroupUndoRedoButtons.enableRedoOption(!1);this.navGroupUndoRedoButtons.enableUndoOption(!1)},_setBuilderStateManagerAttr:function(b){this.own(b.watch("hasRedoItems",
g.hitch(this,function(b,a,c){this.navGroupUndoRedoButtons.enableRedoOption(c)})),b.watch("hasUndoItems",g.hitch(this,function(b,a,c){this.navGroupUndoRedoButtons.enableUndoOption(c)})),b.watch("undoRedoInProgress",g.hitch(this,function(b,a,c){this._toggleUndoRedoEnabled(!c)})));this._set("builderStateManager",b)},_setupListeners:function(){this.own(b(this.navGroupUndoRedoButtons.undoButton,"click",g.hitch(this,this.onUndoClicked)),b(this.navGroupUndoRedoButtons.redoButton,"click",g.hitch(this,this.onRedoClicked)),
b(this.viewButton.toolbarButtonIcon,"click",g.hitch(this,this.onViewClicked)),b(this.navGroupAddButton,"addObject",g.hitch(this,this.onAddObject)),b(this.navGroupAddButton,"addAnimation",g.hitch(this,this.onAddAnimation)),b(this.navGroupAddButton,"addKeyword",g.hitch(this,this.onAddKeyword)))},setSiteUrl:function(b){this.siteUrlPath=b},setZoomDropdownLevel:function(b){var c=dom.byId("dijit_form_FilteringSelect_0");b=Math.round(100*b).toString().concat("%");domAttr.set(c,"value",b)},onAddAnimation:function(){this.emit("addAnimationClicked")},
onUndoClicked:function(){this.emit("undoClicked")},onRedoClicked:function(){this.emit("redoClicked")},onViewClicked:function(){this.emit("viewClicked")},onAddKeyword:function(){this.emit("addKeywordClicked",this.site)},onAddObject:function(){this.emit("addObjectClicked")},_toggleUndoRedoEnabled:function(b){b?(this.navGroupUndoRedoButtons.enableUndoOption(this.builderStateManager.hasUndoItems),this.navGroupUndoRedoButtons.enableRedoOption(this.builderStateManager.hasRedoItems)):(this.navGroupUndoRedoButtons.enableUndoOption(!1),
this.navGroupUndoRedoButtons.enableRedoOption(!1))}})})},"webview/widget/UndoRedoButtons":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/i18n!webview/nls/all dojo/text!webview/widget/templates/UndoRedoButtons.html dijit/Tooltip dijit/form/Button".split(" "),function(p,m,k,h,g,d,l){return h("webview/widget/UndoRedoButtons",[m,p,k],{templateString:d,webviewStrings:g,postCreate:function(){this.inherited(arguments);this.undoButton.tooltip=
new l({connectId:this.undoButton.domNode,label:g.undo,position:["above"],showDelay:0});this.redoButton.tooltip=new l({connectId:this.redoButton.domNode,label:g.redo,position:["above"],showDelay:0})},enableUndoOption:function(d){this.undoButton.set("disabled",!d)},enableRedoOption:function(d){this.redoButton.set("disabled",!d)}})})},"webview/widget/ZoomTools":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/store/Memory dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/text!webview/widget/templates/ZoomTools.html dijit/Tooltip dijit/form/Button dijit/form/ComboBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return h("webview/widget/ZoomTools",[m,p,k],{templateString:c,webviewStrings:f,constructor:function(){this.zoomOptions=new d({data:[{id:1,label:"25%",scaleFactor:.25},{id:2,label:"33%",scaleFactor:.33},{id:3,label:"50%",scaleFactor:.5},{id:4,label:"100%",scaleFactor:1},{id:5,label:"150%",scaleFactor:1.5},{id:6,label:"200%",scaleFactor:2},{id:7,label:"300%",scaleFactor:3},{id:8,label:l.tbScaled,scaleFactor:NaN}]})},postCreate:function(){this.inherited(arguments);this._levelSelector.set("store",
this.zoomOptions);this.own(r(this._levelSelector,"change",g.hitch(this,this._onChangeZoomSelection)));this.zoomOut.tooltip=new b({connectId:this.zoomOut.domNode,label:f.zoomOut,position:["above"],showDelay:0});this.zoomIn.tooltip=new b({connectId:this.zoomIn.domNode,label:f.zoomIn,position:["above"],showDelay:0})},_setScaleFactorManagerAttr:function(b){this._set("scaleFactorManager",b);this.own(this.scaleFactorManager.watch("isMaximumScale",g.hitch(this,function(b,c,a){this.zoomIn.set("disabled",
a)})));this.own(this.scaleFactorManager.watch("isMinimumScale",g.hitch(this,function(b,c,a){this.zoomOut.set("disabled",a)})));this.own(this.scaleFactorManager.watch("widthScaleFactor",g.hitch(this,function(b,c,a){this.scaleFactorManager.get("isStretched")||(b=isNaN(this.scaleFactorManager.get("scaleFactor"))?l.tbScaled:Math.round(100*a)+"%",this._levelSelector.set("value",b))})));this._levelSelector.set("value",l.tbScaled)},_onChangeZoomSelection:function(b){var c=this.zoomOptions.query({label:b})[0];
c?this.scaleFactorManager.set("scaleFactor",c.scaleFactor):(b=(b=/^(\d+).?\d*?%?$/i.exec(b))?b[1]/100:this.scaleFactorManager.get("scaleFactor"),this.scaleFactorManager.set("scaleFactor",b))},_onClickZoomIn:function(){this.scaleFactorManager.scaleUp()},_onClickZoomOut:function(){this.scaleFactorManager.scaleDown()}})})},"webview/features/navigationGroups/groupBuilding/GroupBuilder":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/i18n!webview/nls/all dojo/on dojo/text!./templates/GroupBuilder.html dojo/topic dojo/Evented webview/admin/_objectTypeMap webview/admin/SearchableWidgetWithTree webview/crossCutting/topicEvents webview/admin/widget/KeywordSelector webview/admin/widget/KeywordSelectorDataSource webview/util/Debounce webview/util/util ./nodeUpdating/_AnimationNodeUpdateRequests ./nodeUpdating/_TextNodeUpdateRequests ./nodeUpdating/AnimationNodeUpdater ./nodeUpdating/GroupChangeTracker ./nodeUpdating/TextNodeUpdater ./DndManager ./navGroupDndSource ../_WithToolbarsMixin ../dialogs/editAnimationContent/EditAnimationContent ../dialogs/editAnimationContent/EditAnimationPresenter ../dialogs/insertAnimationContent/InsertAnimationContent ../dialogs/nodeConfigurationDialog/NodeConfigurationDialog ../dialogs/nodeConfigurationDialog/ConfigurationDialogPresenter ../groupRendering/_RenderingPresenter ../groupRendering/_RenderingRequests ../groupRendering/groupNodes/GroupNodeManager webview/widget/WebviewContentPane ../groupRendering/GroupRenderer".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R){return g("webview/features/navigationGroups/groupBuilding/GroupBuilder",[m,p,k,w,v],{templateString:a,webviewStrings:q,_dndSource:H,I_KEY_CODE:73,N_KEY_CODE:78,P_KEY_CODE:80,Y_KEY_CODE:89,Z_KEY_CODE:90,_supportedObjectTypes:[x.inputs,x.outputs,x.variables,x.loops,x.arrays,x.systemGroups,x.equipmentViews,x.workstationGroups,x.schedules,x.calendars,x.trendLogs,x.runtimeLogs,x.trendLogWorksheets,x.programs,x.programsWorksheets,
x.pointReports,x.pointReportWorksheet],_searchResultExpandToFill:!1,undoRedoInProgress:!1,constructor:function(){this._connectKeyboardListeners();this._groupPresenterStartUpDeferred=new f;this.own(this._groupPresenterStartUpDeferred)},postCreate:function(){this.own(n.subscribe(z.addAssociatedObject,d.hitch(this,this.onAddAssociatedObject)),n.subscribe(z.addClickDestinationKeyword,d.hitch(this,this.onAddClickDestinationKeyword)),n.subscribe(z.editAnimationConfigurationClicked,d.hitch(this,this._openEditAnimationDialog)),
n.subscribe(z.editNodeConfigurationClicked,d.hitch(this,this._openNodeConfigurationDialog)),n.subscribe(z.closeSearchResultsPane,d.hitch(this,this.closeResults)));this.inherited(arguments)},closeBuilderTools:function(){this.rightSideFlyout.hide();this._closeKeywordSelector();this._closeSearchResults()},getSearchResultsMaxHeight:function(){return this.scaleFactorManager.get("availableDimensions").height},onAddAssociatedObject:function(a){this._closeKeywordSelector();this._searchResultExpandToFill=
!0;n.publish("filterRequestedSite",this.site);this.rightSideFlyout.onBeforeAddObjects();this._editAnimationContent.resize()},onAddClickDestinationKeyword:function(a){this._closeSearchResults();this._closeCanvasKeywordSelector();if(!this._clickDestinationskeywordSelector){var b=new A({siteId:a,showHyperlinks:!1});this._clickDestinationskeywordSelector=new y({siteId:a,dndSource:this._dndSource,keywordSelectorDataSource:b})}n.publish("showKeywordSelector",this._clickDestinationskeywordSelector);this._clickDestinationskeywordSelector.show();
this.rightSideFlyout.onBeforeAddObjects();this._editAnimationContent.resize()},onAddKeywordClicked:function(a){this._closeSearchResults();this.rightSideFlyout.hide();this._closeClickDestinationsKeywordSelector();if(!this._keywordSelector){var b=new A({siteId:a});this._keywordSelector=new y({siteId:a,dndSource:this._dndSource,keywordSelectorDataSource:b})}n.publish("showKeywordSelector",this._keywordSelector);this._keywordSelector.show()},onAddAnimationClicked:function(){this._openInsertAnimationDialog()},
onAddObjectClicked:function(){this._closeKeywordSelector();this.rightSideFlyout.hide();n.publish("filterRequestedSite",this.site)},onCloseSearchResults:function(){this.resize()},onOpenSearchResults:function(){this.resize()},onUndoClicked:function(){if(!this.builderStateManager.get("undoRedoInProgress")){var a=this._groupChangeTracker.undoChange();this._syncOpenEditorWithUndoRedoChanges(a)}},onRedoClicked:function(){if(!this.builderStateManager.get("undoRedoInProgress")){var a=this._groupChangeTracker.redoChange();
this._syncOpenEditorWithUndoRedoChanges(a)}},reloadGroupDetails:function(){this._groupPresenter.reloadGroupDetails()},resize:function(){this.inherited(arguments);this._resizeDebounce=B(this._resizeDebounce,d.hitch(this,this._resizeRenderer),25)},startUp:function(a,b,c){this.set("rightSideFlyout",c);this.set("scaleFactorManager",a);this.set("builderStateManager",b);this._setUpRenderer();this._groupChangeTracker=new G({groupId:this.groupId,builderStateManager:this.builderStateManager});var d={groupChangeTracker:this._groupChangeTracker,
groupId:this.groupId,requestManager:new D(this.groupId),builderStateManager:this.builderStateManager};this._animationNodeUpdater=new F(d);d={groupChangeTracker:this._groupChangeTracker,groupId:this.groupId,requestManager:new E(this.groupId)};this._textNodeUpdater=new I(d);this.own(this._animationNodeUpdater,this._textNodeUpdater);this.inherited(arguments)},_closeCanvasKeywordSelector:function(){this._keywordSelector&&this._keywordSelector.closeKeywordSelector()},_closeClickDestinationsKeywordSelector:function(){this._clickDestinationskeywordSelector&&
this._clickDestinationskeywordSelector.closeKeywordSelector()},_closeKeywordSelector:function(){this._closeCanvasKeywordSelector();this._closeClickDestinationsKeywordSelector()},_closeSearchResults:function(){n.publish("closeResults")},_connectKeyboardListeners:function(){this.own(u(l.doc.body,"keydown",d.hitch(this,function(a){if(a.keyCode===this.P_KEY_CODE&&!1===a.ctrlKey)this._toggleShowBoxes(!0);else if(a.keyCode===this.I_KEY_CODE&&!1===a.ctrlKey)this._toggleShowInvisibleNodeSequence(!0);else if(a.keyCode===
this.N_KEY_CODE&&!1===a.ctrlKey)this._toggleShowNodeSequence(!0);else if(a.keyCode===this.Z_KEY_CODE&&!0===a.ctrlKey)this.onUndoClicked();else if(a.keyCode===this.Y_KEY_CODE&&!0===a.ctrlKey)this.onRedoClicked()})),u(l.doc.body,"keyup",d.hitch(this,function(a){a.keyCode===this.P_KEY_CODE?this._toggleShowBoxes(!1):a.keyCode===this.N_KEY_CODE?this._toggleShowNodeSequence(!1):a.keyCode===this.I_KEY_CODE&&this._toggleShowInvisibleNodeSequence(!1)})))},_isAnimationEditorOpenForNode:function(a){return this._editAnimationPresenter&&
this._editAnimationPresenter.isOpen()&&this._editAnimationPresenter.animationNode.nodeId===a},_onUpdateComplete:function(){this.builderStateManager.set("userEditInProgress",!1)},_onUpdateStarted:function(){this.builderStateManager.set("userEditInProgress",!0)},_openEditAnimationDialog:function(a){this._closeKeywordSelector();this._editAnimationContent||(this._editAnimationContent=new K({site:this.site}),this.own(this._editAnimationContent),this._editAnimationContent.startup());this._editAnimationPresenter||
(this._editAnimationPresenter=new N({view:this._editAnimationContent,builderStateManager:this.builderStateManager,animationNodeUpdater:this._animationNodeUpdater}));this.own(u.once(this._editAnimationPresenter,"close",d.hitch(this,function(){this.rightSideFlyout.hide();this._closeKeywordSelector()})));this._editAnimationPresenter.initialize(this.groupId,a,this.scaleFactorManager.get("backgroundDimensions"));this.rightSideFlyout.show(this._editAnimationContent.domNode)},_openInsertAnimationDialog:function(){this._closeKeywordSelector();
this.insertAnimationContent||(this.insertAnimationContent=new O,this.own(this.insertAnimationContent));this.own(u.once(this.insertAnimationContent,"close",d.hitch(this.rightSideFlyout,this.rightSideFlyout.hide)));this.rightSideFlyout.show(this.insertAnimationContent.domNode)},_openNodeConfigurationDialog:function(a){this._onUpdateStarted();this._configDialog||(this._configDialog=new M,this.own(this._configDialog));this._configDialogPresenter||(this._configDialogPresenter=new P({view:this._configDialog,
textNodeUpdater:this._textNodeUpdater}));this.own(u.once(this._configDialog,"hide",d.hitch(this,function(a){a.set("selectedForEdit",!1);this._onUpdateComplete()},a)));this._configDialogPresenter.initialize(this.groupId,a,this.groupRenderer.get("nodeFont"),this.scaleFactorManager.get("backgroundDimensions"))},_resizeRenderer:function(){if(this.groupRenderer.domNode){var a=b.position(r.byId("rcSystemContent"),!1),c=b.position(this.groupRenderer.domNode,!1),c={width:a.w-(c.x-a.x)-.02*a.w+8,height:a.h-
(c.y-a.y)-8};t.set(this.builderContainer.domNode,{height:c.height+"px",width:c.width+"px"});this.scaleFactorManager.set("availableDimensions",c);this._resize(this._searchResultExpandToFill?a.w:.3*a.w)}},_setScaleFactorManagerAttr:function(a){this.own(a.watch("heightScaleFactor",d.hitch(this,function(a,b,c){isNaN(c)||b===c||this.resize()})));this._set("scaleFactorManager",a)},_setBuilderStateManagerAttr:function(a){this.editModeListener&&this.editModeListener.remove();this.editModeListener=a.watch("editMode",
d.hitch(this,function(a,b,c){this.resize();this._toggleEditMode(c)}));a.get("siteUrl")&&!this._groupPresenterStartUpDeferred.isFulfilled()?this._groupPresenterStartUpDeferred.resolve():this._groupPresenterStartUpDeferred.isFulfilled()||(this.siteUrlListener&&this.siteUrlListener.remove(),this.siteUrlListener=a.watch("siteUrl",d.hitch(this,function(a,b,c){c&&(this._groupPresenterStartUpDeferred.resolve(),this.siteUrlListener.unwatch())})),this.own(this.siteUrlListener));this.own(this.editModeListener);
var b=a.get("editMode");this._toggleEditMode(b);this._set("builderStateManager",a);this.groupRenderer.set("builderStateManager",a)},_setUpRenderer:function(){this.builderContainer.setMainContent(this.groupRenderer.domNode);this._groupPresenterStartUpDeferred.then(d.hitch(this,function(){this._groupNodeManger=new R({nodeContainer:this.groupRenderer.nodeContainer,scaleFactorManager:this.scaleFactorManager,builderStateManager:this.builderStateManager});this._dndManager=new L({nodeContainer:this.groupRenderer.nodeContainer,
nodeManager:this._groupNodeManger});this._toggleDnd(this.builderStateManager.get("editMode"));this.own(this._groupNodeManger,this._dndManager,u(this._groupNodeManger,"nodeResizing",d.hitch(this,function(){this._toggleDnd(!1);c.toggle(this.groupRenderer.nodeContainer,"nodes-resizing",!0);this._onUpdateStarted()})),u(this._groupNodeManger,"nodeResized",d.hitch(this,function(a){this._toggleDnd(!0);c.toggle(this.groupRenderer.nodeContainer,"nodes-resizing",!1);this._groupNodeManger.isTextNode(a.originalNode.nodeId)?
this._textNodeUpdater.updateNodes([a]).always(d.hitch(this,this._onUpdateComplete)):(this._groupNodeManger.getAnimationNode(a.originalNode.nodeId).set(a.updatedNode),this._syncOpenEditorWithPositionChange(a.updatedNode),this._animationNodeUpdater.updateNodes([a]).always(d.hitch(this,this._onUpdateComplete)))})),u(this._dndManager,"updatedNodes",d.hitch(this,function(a,b){b?(this._syncOpenEditorWithPositionChange(a[0].updatedNode),this._animationNodeUpdater.updateNodes(a).always(d.hitch(this,this._onUpdateComplete))):
this._textNodeUpdater.updateNodes(a).always(d.hitch(this,this._onUpdateComplete))})),u(this._dndManager,"addedNodes",d.hitch(this,function(a,b){b?this._animationNodeUpdater.addNodes(a).always(d.hitch(this,this._onUpdateComplete)):this._textNodeUpdater.addNodes(a).always(d.hitch(this,this._onUpdateComplete))})),u(this._dndManager,"dndCancel",d.hitch(this,this._onUpdateComplete)),u(this._dndManager,"dndStart",d.hitch(this,this._onUpdateStarted)));this.groupRenderer.set("scaleFactorManager",this.scaleFactorManager);
this._groupPresenterStartUpDeferred.then(d.hitch(this,function(){var a=new W;this._groupPresenter=new S(this.groupRenderer,a,this._groupNodeManger,this.siteId,this.groupId);this.groupRenderer._groupPresenter=this._groupPresenter;this.own(a,this._groupPresenter)}))}))},_syncOpenEditor:function(a){a&&this._isAnimationEditorOpenForNode(a.nodeId)&&this._editAnimationPresenter.syncEditor(a)},_syncOpenEditorWithPositionChange:function(a){a&&(a={nodeId:a.nodeId,updatedProperties:d.clone(a)},delete a.updatedProperties.nodeId,
this._syncOpenEditor(a))},_syncOpenEditorWithUndoRedoChanges:function(a){a&&(C.isArrayNotNullOrEmpty(a.nodesToUpdate)&&h.forEach(a.nodesToUpdate,d.hitch(this,function(a){this._syncOpenEditor(a)})),C.isArrayNotNullOrEmpty(a.nodesToDelete)&&h.forEach(a.nodesToDelete,d.hitch(this,function(a){if(a&&this._isAnimationEditorOpenForNode(a.nodeId))this._editAnimationPresenter.view.onClose()})))},_toggleDnd:function(a){this._dndManager&&(a?this._dndManager.enable():this._dndManager.disable())},_toggleEditMode:function(a){this._toggleDnd(a);
this._toggleSearchable(a);!a&&this.rightSideFlyout&&this.rightSideFlyout.hide()},_toggleSearchable:function(a){a?this.publishSearchable():(this.publishUnsearchable(),this._closeKeywordSelector())},_toggleShowBoxes:function(a){a=a&&!0===this.builderStateManager.get("editMode");c.toggle(this.groupRenderer.nodeContainer,"p-shortcut",a)},_toggleShowInvisibleNodeSequence:function(a){c.toggle(this.groupRenderer.nodeContainer,"i-shortcut",a)},_toggleShowNodeSequence:function(a){c.toggle(this.groupRenderer.nodeContainer,
"n-shortcut",a)},destroy:function(){this.rightSideFlyout.closePane();this.inherited(arguments);this._configDialogPresenter=this._configDialog=this._configDialogRequests=null}})})},"webview/crossCutting/topicEvents":function(){define(function(){return{addClickDestinationKeyword:"addClickDestinationKeyword",addAssociatedObject:"addAssociatedObject",animationEdit:"animationEdit",animationEditClose:"animationEditClose",closeSearchResultsPane:"closeSearchResultsPane",editAnimationConfigurationClicked:"editAnimationConfigurationClicked",
editNodeConfigurationClicked:"editNodeConfigurationClicked",groupNodeClicked:"groupNodeClicked"}})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/_AnimationNodeUpdateRequests":function(){define(["dijit/_WidgetBase","dojo/_base/declare","webview/xhrEnhanced"],function(p,m,k){return m("webview/features/navigationGroups/groupBuilding/nodeUpdating/_TextNodeRequests",[p],{_rootPath:"NavigationGroup",_updateNodePath:"/AnimationNodeConfiguration",constructor:function(h){this.groupId=h},addAnimationNodes:function(h){h=
k.post(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",preventCache:!0,data:{data:JSON.stringify(h)}});this.own(h);return h},deleteNodes:function(h){h=k.del(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",data:{nodeIds:h}});this.own(h);return h},getConfigurationDataForNode:function(h,g){this._configurationRequest&&this._configurationRequest.cancel();return this._configurationRequest=k.get(this._rootPath+h+this._updateNodePath+g,{handleAs:"json",preventCache:!0})},
updateAnimationNodes:function(h){h=k.put(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",preventCache:!0,data:{data:JSON.stringify(h)}});this.own(h);return h},destroy:function(){this.inherited(arguments);this._configurationRequest&&this._configurationRequest.cancel()}})})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/_TextNodeUpdateRequests":function(){define(["dijit/_WidgetBase","dojo/_base/declare","webview/xhrEnhanced"],function(p,m,k){return m("webview/features/navigationGroups/groupBuilding/nodeUpdating/_TextNodeUpdateRequests",
[p],{_rootPath:"NavigationGroup/",_updateNodePath:"/TextNodeConfiguration",constructor:function(h){this.groupId=h},addTextNodes:function(h){h=k.post(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",preventCache:!0,data:{data:JSON.stringify(h)}});this.own(h);return h},deleteNodes:function(h){h=k.del(this._rootPath+this.groupId,{handleAs:"json",data:{nodeIds:h}});this.own(h);return h},getConfigurationDataForNode:function(h,g){this._configurationRequest&&this._configurationRequest.cancel();
return this._configurationRequest=k.get(this._rootPath+h+"/"+g,{handleAs:"json",preventCache:!0})},updateTextNodes:function(h){h=k.put(this._rootPath+this.groupId+this._updateNodePath,{handleAs:"json",preventCache:!0,data:{data:JSON.stringify(h)}});this.own(h);return h},destroy:function(){this.inherited(arguments);this._configurationRequest&&this._configurationRequest.cancel()}})})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/AnimationNodeUpdater":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/promise/all dojox/html/entities webview/crossCutting/errors/_OnErrorMixin ./_AnimationNodeUpdateRequests".split(" "),
function(p,m,k,h,g,d,l,f){return k("webview/features/navigationGroups/groupBuilding/nodeUpdating/AnimationNodeUpdater",[p,f,l],{groupChangeTracker:null,groupId:null,specialProperties:["attributes","nodeId","linkedObjects","clickDestinations"],addNodes:function(d){var c=this._getFormattedDataForNodes(d,!0);d=this.requestManager.addAnimationNodes(c.formattedUpdatedNodes);d.then(h.hitch(this,function(b){this._onUpdateSuccess(b);1===b.resultCode&&(this._onAddSuccess(b.newNodeIds,c.changeReceipts),this._trackChanges(c.changeReceipts))}),
h.hitch(this,this._onError));return d},applyNodeChanges:function(d){var c=[];if(0<d.nodesToDelete.length){var b=m.map(d.nodesToDelete,function(b){return b.nodeId}),b=this.requestManager.deleteNodes(b);b.then(h.hitch(this,this._onUpdateSuccess),h.hitch(this,this._onError));c.push(b)}if(0<d.nodesToAdd.length){for(var f=[],b=0;b<d.nodesToAdd.length;b++)f.push(d.nodesToAdd[b].nodeId),d.nodesToAdd[b].nodeId=-1;b=this.requestManager.addAnimationNodes(d.nodesToAdd);b.then(h.hitch(this,function(b){this._onUpdateSuccess(b);
if(1===b.resultCode&&b.newNodeIds&&d.nodesToAdd.length===b.newNodeIds.length)for(var c=0;c<d.nodesToAdd.length;c++)d.onNodeIdChange(f[c],b.newNodeIds[c]),d.nodesToAdd[c].nodeId=b.newNodeIds[c]}),h.hitch(this,this._onError));c.push(b)}0<d.nodesToUpdate.length&&(b=this.requestManager.updateAnimationNodes(d.nodesToUpdate),b.then(h.hitch(this,this._onUpdateSuccess),h.hitch(this,this._onError)),c.push(b));return g(c)},deleteNodes:function(d){var c=[],b=[];m.forEach(d,h.hitch(this,function(d){b.push(d.nodeId);
c.push({beforeChange:this._getFormattedData(d),afterChange:null})}));d=this.requestManager.deleteNodes(b);d.then(h.hitch(this,function(b){this._onUpdateSuccess(b);this._updateChangeReceiptsWithResponse(c,b);this._trackChanges(c)}));return d},getConfigurationDataForNode:function(d,c){return this.requestManager.getConfigurationDataForNode(d,c)},updateNodes:function(d){var c=this._getFormattedDataForNodes(d,!1);d=this.requestManager.updateAnimationNodes(c.formattedUpdatedNodes);d.then(h.hitch(this,function(b){this._onUpdateSuccess(b);
this._updateChangeReceiptsWithResponse(c.changeReceipts,b);this._trackChanges(c.changeReceipts)}),h.hitch(this,this._onError));return d},_applyChangeResultToChangeReceipt:function(d,c){c.originalAttributes&&(d.beforeChange.attributes=c.originalAttributes);c.updatedAttributes&&d.afterChange&&(d.afterChange.attributes=c.updatedAttributes);c.originalLinkedObjects&&(d.beforeChange.linkedObjects=c.originalLinkedObjects,d.afterChange&&(d.afterChange.linkedObjects=[]));c.originalClickDestinations&&(d.beforeChange.clickDestinations=
c.originalClickDestinations,d.afterChange&&(d.afterChange.clickDestinations=[]));c.originalMapLocations&&(d.beforeChange.updatedProperties.mapLocations=c.originalMapLocations.join(";"),d.afterChange&&(d.afterChange.updatedProperties.mapLocations=null))},_getFormattedData:function(f){var c={nodeId:f.nodeId,updatedProperties:{}};m.forEach(Object.keys(f),h.hitch(this,function(b){this.specialProperties.includes(b)||(c.updatedProperties[b]=f[b])}));f.linkedObjects&&(c.linkedObjects=f.linkedObjects);f.clickDestinations&&
(c.clickDestinations=f.clickDestinations);f.attributes&&(c.attributes=[],m.forEach(f.attributes,h.hitch(this,function(b){b=h.clone(b);"string"===typeof b.value&&(b.value=d.encode(b.value));c.attributes.push(b)})));return c},_getFormattedDataForNodes:function(d,c){var b=[],f=[];m.forEach(d,h.hitch(this,function(d){var g={};g.afterChange=this._getFormattedData(d.updatedNode);c?(g.afterChange.nodeId=-1,g.beforeChange=null):g.beforeChange=this._getFormattedData(d.originalNode);b.push(g);f.push(g.afterChange)}));
return{changeReceipts:b,formattedUpdatedNodes:f}},_onAddSuccess:function(d,c){if(d&&c.length===d.length)for(var b=0;b<c.length;b++)c[b].afterChange.nodeId=d[b]},_onUpdateSuccess:function(d){1!==d.resultCode&&d.errorMessage&&this._onError(d);this.builderStateManager&&this.builderStateManager.set("userEditInProgress",!1)},_trackChanges:function(d){this.groupChangeTracker.addNewChange({changeMaker:this,changeReceipts:d})},_updateChangeReceiptsWithResponse:function(d,c){m.forEach(d,h.hitch(this,function(b){var d=
c.changeResults[b.beforeChange.nodeId];d&&this._applyChangeResultToChangeReceipt(b,d)}))},destroy:function(){this.inherited(arguments);this.requestManager.destroy()}})})},"webview/crossCutting/errors/_OnErrorMixin":function(){define(["dojo/_base/declare","dojo/i18n!webview/nls/errorMessages","dojo/topic","rc/util/notices"],function(p,m,k,h){return p("webview/crossCutting/errors/_OnErrorMixin",[],{disableErrorToasts:!1,_onError:function(g){var d;d=g&&g.message?g.message:g&&g.errMSG?g.errMSG:g&&g.errorMessage?
g.errorMessage:m.unexpectedError;this.disableErrorToasts||(h.widget.clear(),k.publish("sticky",{type:"error",message:d}));console.error(JSON.stringify(g))}})})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/GroupChangeTracker":function(){define(["dijit/_WidgetBase","dojo/_base/declare","dojo/_base/lang","dojo/Deferred","webview/crossCutting/collections/Stack"],function(p,m,k,h,g){return m("webview/features/navigationGroups/groupBuilding/node/Updating/GroupChangeTracker",[p],{MAX_STACK:100,
hasRedoItems:!1,hasUndoItems:!1,_redoStack:null,_undoStack:null,constructor:function(){this._undoStack=new g({maxSize:this.MAX_STACK});this._redoStack=new g({maxSize:this.MAX_STACK});this.own(this._undoStack.watch("isEmpty",k.hitch(this,function(d,g,f){this.builderStateManager.set("hasUndoItems",!f)})),this._redoStack.watch("isEmpty",k.hitch(this,function(d,g,f){this.builderStateManager.set("hasRedoItems",!f)})))},addNewChange:function(d){this._undoStack.push(d);this._redoStack.clear()},undoChange:function(){var d=
this._undoStack.pop();if(!d)return null;this.builderStateManager.set("undoRedoInProgress",!0);var g=this._getNodeChanges(d.changeReceipts,!1);d.changeMaker.applyNodeChanges(g).then(k.hitch(this._redoStack,this._redoStack.push,d)).always(k.hitch(this.builderStateManager,this.builderStateManager.set,"undoRedoInProgress",!1));return g},redoChange:function(){var d=this._redoStack.pop();if(!d)return null;this.builderStateManager.set("undoRedoInProgress",!0);var g=this._getNodeChanges(d.changeReceipts,
!0);d.changeMaker.applyNodeChanges(g).then(k.hitch(this._undoStack,this._undoStack.push,d)).always(k.hitch(this.builderStateManager,this.builderStateManager.set,"undoRedoInProgress",!1));return g},_formatChangeReceipt:function(d,g){return!0===g?{afterChange:d.beforeChange,beforeChange:d.afterChange}:d},_updateNodeIds:function(d,g,f){if(d&&!(1>d.size()))for(var h=d.size(),c=0;c<h;c++)for(var b=d._stack[c],l=0;l<b.changeReceipts.length;l++){var k=b.changeReceipts[l];k&&k.beforeChange&&k.beforeChange.nodeId===
g&&(k.beforeChange.nodeId=f);k&&k.afterChange&&k.afterChange.nodeId===g&&(k.afterChange.nodeId=f)}},_getNodeChanges:function(d,g){for(var f={nodesToDelete:[],nodesToAdd:[],nodesToUpdate:[],onNodeIdChange:k.hitch(this,function(b,c){this._updateNodeIds(this._undoStack,b,c);this._updateNodeIds(this._redoStack,b,c)})},h=0;h<d.length;h++){var c=this._formatChangeReceipt(d[h],g);null===c.beforeChange&&null!==c.afterChange?f.nodesToDelete.push(c.afterChange):null!==c.beforeChange&&null===c.afterChange?f.nodesToAdd.push(c.beforeChange):
null!==c.beforeChange&&null!==c.afterChange&&f.nodesToUpdate.push(c.beforeChange)}return f}})})},"webview/crossCutting/collections/Stack":function(){define(["dojo/_base/declare","dojo/Stateful"],function(p,m){return p("webview/crossCutting/collections/Stack",[m],{maxSize:0,isEmpty:!0,constructor:function(){this._resetStack()},clear:function(){this._resetStack();this._setIsEmpty()},peek:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},pop:function(){var k=this._stack.pop();
this._setIsEmpty();return k},push:function(k){this._stack.push(k);this._resize();this._setIsEmpty()},size:function(){return this._stack.length},_resetStack:function(){this._stack=[]},_resize:function(){0<this.maxSize&&this.maxSize<this._stack.length&&(this._stack=this._stack.splice(this._stack.length-this.maxSize,this.maxSize))},_setIsEmpty:function(){this.set("isEmpty",0===this._stack.length)}})})},"webview/features/navigationGroups/groupBuilding/nodeUpdating/TextNodeUpdater":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/promise/all webview/crossCutting/errors/_OnErrorMixin".split(" "),
function(p,m,k,h,g,d){return k("webview/features/navigationGroups/groupBuilding/nodeUpdating/TextNodeUpdater",[p,d],{groupChangeTracker:null,groupId:null,specialProperties:["nodeFont","nodeId","linkedObject","secondaryLinkedObject"],addNodes:function(d){var f=this._getFormattedDataForNodes(d,!0);d=this.requestManager.addTextNodes(f.formattedUpdatedNodes);d.then(h.hitch(this,function(d){this._onUpdateSuccess(d);1===d.resultCode&&(this._onAddSuccess(d.newNodeIds,f.changeReceipts),this._trackChanges(f.changeReceipts))}),
h.hitch(this,this._onError));return d},applyNodeChanges:function(d){var f=[];if(0<d.nodesToDelete.length){var l=m.map(d.nodesToDelete,function(b){return b.nodeId}),l=this.requestManager.deleteNodes(l);l.then(h.hitch(this,this._onUpdateSuccess),h.hitch(this,this._onError));f.push(l)}if(0<d.nodesToAdd.length){for(var c=[],l=0;l<d.nodesToAdd.length;l++)c.push(d.nodesToAdd[l].nodeId),d.nodesToAdd[l].nodeId=-1;l=this.requestManager.addTextNodes(d.nodesToAdd);l.then(h.hitch(this,function(b){this._onUpdateSuccess(b);
if(1===b.resultCode&&b.newNodeIds&&d.nodesToAdd.length===b.newNodeIds.length)for(var f=0;f<d.nodesToAdd.length;f++)d.onNodeIdChange(c[f],b.newNodeIds[f]),d.nodesToAdd[f].nodeId=b.newNodeIds[f]}),h.hitch(this,this._onError));f.push(l)}0<d.nodesToUpdate.length&&(l=this.requestManager.updateTextNodes(d.nodesToUpdate),l.then(h.hitch(this,this._onUpdateSuccess),h.hitch(this,this._onError)),f.push(l));return g(f)},deleteNodes:function(d){var f=[],g=[];m.forEach(d,h.hitch(this,function(c){g.push(c.nodeId);
f.push({beforeChange:this._getFormattedData(c),afterChange:null})}));d=this.requestManager.deleteNodes(g);d.then(h.hitch(this,function(c){this._onUpdateSuccess(c);1===c.resultCode&&this._trackChanges(f)}));return d},getConfigurationDataForNode:function(d,f){return this.requestManager.getConfigurationDataForNode(d,f)},updateNodes:function(d){var f=this._getFormattedDataForNodes(d,!1);d=this.requestManager.updateTextNodes(f.formattedUpdatedNodes);d.then(h.hitch(this,function(d){this._onUpdateSuccess(d);
1===d.resultCode&&this._trackChanges(f.changeReceipts)}),h.hitch(this,this._onError));return d},_getFormattedData:function(d){var f={nodeId:d.nodeId,updatedProperties:{}};m.forEach(Object.keys(d),h.hitch(this,function(g){this.specialProperties.includes(g)||(f.updatedProperties[g]=d[g])}));d.linkedObject&&(f.linkedObject=d.linkedObject);d.secondaryLinkedObject&&(f.secondaryLinkedObject=d.secondaryLinkedObject);d.nodeFont&&(f.nodeFont=d.nodeFont);return f},_getFormattedDataForNodes:function(d,f){var g=
[],c=[];m.forEach(d,h.hitch(this,function(b){var d={};d.afterChange=this._getFormattedData(b.updatedNode);f?(d.afterChange.nodeId=-1,d.beforeChange=null):d.beforeChange=this._getFormattedData(b.originalNode);g.push(d);c.push(d.afterChange)}));return{changeReceipts:g,formattedUpdatedNodes:c}},_onAddSuccess:function(d,f){if(d&&f.length===d.length)for(var g=0;g<f.length;g++)f[g].afterChange.nodeId=d[g]},_onUpdateSuccess:function(d){1!==d.resultCode&&d.errorMessage&&this._onError(d)},_trackChanges:function(d){this.groupChangeTracker.addNewChange({changeMaker:this,
changeReceipts:d})},destroy:function(){this.inherited(arguments);this.requestManager.destroy()}})})},"webview/features/navigationGroups/groupBuilding/DndManager":function(){define("dijit/_WidgetBase dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dnd/Manager dojo/dnd/Source dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/on dojo/topic dojo/query webview/util/util ./NavGroupAvatar".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,
x){return h("webview/features/navigationGroups/groupBuilder/DndManager",[p],{DEFAULT_DELAY:3,DEFAULT_NODE_HEIGHT:38,DND_Y_OFFSET:5,dndAvatar:x,dndItemClass:"group-node",manager:null,nodeContainer:null,_groupSource:null,_horizontalCursorOffset:0,_verticalCursorOffset:0,constructor:function(){this._setupManager()},postCreate:function(){this._addedAnimationNodes=[];this._addedTextNodes=[];this._createGroupSource();this._cancelSubscription=a.subscribe("/dnd/cancel",g.hitch(this,this._onDndCancel))},_setNodeContainerAttr:function(a){this._set("nodeContainer",
a)},_setNodeManagerAttr:function(a){this.own(u(a,"animationNodesAdded",g.hitch(this,this._animationNodesAdded)),u(a,"textNodesAdded",g.hitch(this,this._textNodesAdded)));this._set("nodeManager",a)},enable:function(){this._groupSource.delay=this.DEFAULT_DELAY},disable:function(){this._groupSource.delay=Number.MAX_VALUE},getFontForAvatar:function(){return this.nodeManager.getFontForAvatar()},onAddedNodes:function(a){},onDndCancel:function(){},onDndStart:function(){},onUpdatedNodes:function(a,b){},_animationNodesAdded:function(a){this._insertNodesToSource(a);
this._addedAnimationNodes&&(k.forEach(this._addedAnimationNodes,function(a){a.destroy()}),this._addedAnimationNodes=[])},_createGroupSource:function(){null==this._groupSource&&(this._groupSource=new f(this.nodeContainer,{creator:g.hitch(this.nodeManager,this.nodeManager.createDndNode),copyOnly:!1,allowNested:!0,autoSync:!1,singular:!0,generateText:!1,delay:this.DEFAULT_DELAY,skipForm:!0,accept:["navGroupPoint","resultNode"]}),this.own(d.before(this._groupSource,"onDndStart",g.hitch(this,this._onDndStart),
!0)),this.own(d.after(this._groupSource,"onDndDrop",g.hitch(this,this._onDndDrop))),this.own(d.after(this._groupSource,"onMouseUp",g.hitch(this._groupSource,this._groupSource.selectNone))),this.own(d.after(this._groupSource,"onDndCancel",g.hitch(this,function(){if(!this.manager.canDropFlag){var a=n(".animation-node-overlay",this.manager.avatar.node);1===a.length&&(a=m.byId(a[0].id),a.nodeId&&(a=this.nodeManager.getAnimationNode(a.nodeId),b.remove(a.domNode,"hidden")))}null!==this._groupSource.anchor&&
b.remove(this._groupSource.anchor,"hidden")}))))},_insertNodesToSource:function(a){this._groupSource.insertNodes(!1,a);this._groupSource.sync()},_onDndCancel:function(){this.onDndCancel()},_onDndDrop:function(a,c){if(c[3]===this._groupSource){var d=[],f=!1;c[0]===this._groupSource?d=c[1]:(f=Object.keys(c[3].selection),k.forEach(f,function(a){d.push(r.byId(a))}),f=!0);for(var g=q.get(this.nodeContainer,"width"),h=q.get(this.nodeContainer,"height"),l=c[4],t=n(".node-container").position(),u=[],p=this.DEFAULT_NODE_HEIGHT,
v=!1,w=0;w<d.length;w++){var z;if(d[w].getAttribute)z=m.byNode(d[w]),v=2===z.renderType;else if(d[w].node)z=m.byNode(d[w].node),f=!0;else{console.error("Couldn't drop node: "+d[w]);break}var x=-1,K=-1;if(l.target===this._groupSource.node)l.changedTouches?(K=l.changedTouches[0],x=K.pageX-t[0].x,K=K.pageY-t[0].y+this.DND_Y_OFFSET):(x=l.offsetX,K=l.offsetY+this.DND_Y_OFFSET);else{for(var x=l.target,N=x.offsetLeft,K=x.offsetTop;!b.contains(x,this.dndItemClass);)x=x.offsetParent,N+=x.offsetLeft,K+=x.offsetTop;
x=N+l.offsetX;K=K+l.offsetY+this.DND_Y_OFFSET}f&&(0===w&&p!==z.domNode.offsetHeight&&(p=document.getElementById(z.id).offsetHeight),K+=w*p);var x=100*(x+this._horizontalCursorOffset)/g,K=100*(K+this._verticalCursorOffset)/h,O;v&&f?(N=z.widthPx,O=z.heightPx):(N=z.domNode.clientWidth,O=z.domNode.clientHeight);x/100*g+N>g&&(x=(g-N-1)/g*100);K/100*h+O>h&&(K=(h-O-1)/h*100);x=Math.max(0,x);K=Math.max(0,K);f?v?(N={originalNode:null,updatedNode:{nodeId:null,animationName:z.animationName,height:z.relativeHeight,
width:z.relativeWidth,positioningLeft:x,positioningTop:K,aspectLocked:!1,attributes:z.animationAttributes,versionId:z.versionId}},q.set(z.domNode,"pointer-events","none"),this._addedAnimationNodes.push(z)):(N={originalNode:null,updatedNode:{nodeId:z.nodeId,renderType:this.nodeManager.RENDER_TYPE_MAP.TEXT_NODE,positioningLeft:x,positioningTop:K,height:0,width:0,showUnits:!0,linkedObject:{name:z.displayText,mnemonic:z.mnemonic,systemId:z.systemId,keyword:z.keyword,url:z.url}}},this._addedTextNodes.push(z)):
(N=this.nodeManager.getNodeById(z.nodeId),N={originalNode:{nodeId:z.nodeId,positioningLeft:N.positioningLeft,positioningTop:N.positioningTop},updatedNode:{nodeId:z.nodeId,positioningLeft:x,positioningTop:K}});u.push(N);z.set("positioningLeft",x);z.set("positioningTop",K)}if(v&&!f)for(w=0;w<d.length;w++)z=m.byNode(d[w]),g=this.nodeManager.getAnimationNode(z.nodeId),g.set({positioningLeft:u[0].updatedNode.positioningLeft,positioningTop:u[0].updatedNode.positioningTop}),b.remove(g.domNode,"hidden");
if(f)this.onAddedNodes(u,v);else this.onUpdatedNodes(u,v);for(w=0;w<d.length;w++)z=m.byNode(d[w]),b.remove(z.domNode,"hidden");this._groupSource.selectNone()}},_onDndStart:function(a,c){this.onDndStart();if(a===this._groupSource){if(1===c.length){var d=this._groupSource.getItem(c[0].id).data;2===d.renderType&&d.nodeId&&(d=this.nodeManager.getAnimationNode(d.nodeId),b.add(d.domNode,"hidden"))}k.forEach(c,g.hitch(this,function(a){b.add(a,"hidden")}))}},_setupManager:function(){this.manager=l.manager();
this.manager.OFFSET_Y=this.DND_Y_OFFSET;this.manager.groupNodeManager=this;this.manager.makeAvatar=g.hitch(this,function(){var a=event.clientX,b=event.clientY,c=new this.dndAvatar(this.manager);this.defaultFont&&q.set(c.node,this.defaultFont);if(c.isNewNode())this._verticalCursorOffset=this._horizontalCursorOffset=0;else{var d=t.position(c.manager.nodes[0]);this._horizontalCursorOffset=-1*(a-d.x+1);this._verticalCursorOffset=-1*(b-d.y+1);a=this._horizontalCursorOffset+"px";q.set(c.node,"margin-top",
this._verticalCursorOffset+"px");q.set(c.node,"margin-left",a);q.set(c.node,"pointer-events","none")}return c})},_textNodesAdded:function(a){this._addedTextNodes&&(k.forEach(this._addedTextNodes,function(a){a.destroy()}),this._addedTextNodes=[]);this._insertNodesToSource(a)},destroy:function(){this.inherited(arguments);this._cancelSubscription.remove()}})})},"webview/features/navigationGroups/groupBuilding/NavGroupAvatar":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dnd/Avatar dojo/dom-construct dojo/dom-class dojo/dom-style dojo/has dojo/hccss".split(" "),
function(p,m,k,h,g,d,l,f,r){return k("webview/features/navigationGroups/groupBuilding/NavGroupAvatar",g,{_newNode:!1,construct:function(){var c=d.create("div",{"class":"group-node-avatar",style:{position:"fixed",zIndex:"1999",marginLeft:"0"}}),b=this.manager.source,g;r("highcontrast")&&d.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},g);m.forEach(this.manager.nodes,h.hitch(this,function(h,l){if(this.manager.groupNodeManager){var a=b.getItem(h.id)||h;a&&(h=this.manager.groupNodeManager.nodeManager.createDndNode(a.data,
"avatar").node,this._styleAvatarNode(a,h));this.manager.OFFSET_X=-Number(f.get(h,"marginLeft"))}g=d.create("span",{"class":"node-container"},c);g.appendChild(h)}));f.set(c,this.manager.groupNodeManager.getFontForAvatar());this.node=c},isNewNode:function(){return this._newNode},_styleAvatarNode:function(c,b){if(c.data.domNode){var d={};c.data.domNode.style.width&&(d.width=f.get(c.data.domNode,"width")+"px");c.data.domNode.style.height&&(d.height=f.get(c.data.domNode,"height")+"px");c.data.newAnimationNode&&
(d.width=c.data.defaultConfig.width,d.Height=c.data.defaultConfig.height);f.set(b,d)}if(!c.data.domNode||c.data.newAnimationNode)this._newNode=!0}})})},"webview/features/navigationGroups/groupBuilding/navGroupDndSource":function(){define(["dojo/_base/declare","webview/admin/pointReportDndSource"],function(p,m){return p("webview/features/navigationGroups/groupBuilding/navGroupDndSource",m,{getItem:function(k){k=this.selection[k].item;var h={},h=k.isKeywordSelectorItem?this._getKeywordSelectionItemData(k):
this._getObjectSelectionItemData(k);return{data:h,type:["navGroupPoint"]}},_getKeywordSelectionItemData:function(k){return{displayIndex:1,displayText:k.displayText,mnemonic:k.mnemonic,keyword:k.keyword,url:k.url,systemId:null,systemName:"",editable:!1,id:null,inManual:!1,inFault:!1,positioningLeft:1,positioningTop:5,renderType:1}},_getObjectSelectionItemData:function(k){return{displayIndex:1,displayText:k.pointName,mnemonic:k.pointMnemonic,systemId:k.sysId,systemName:k.sysName,editable:!1,id:null,
inManual:!1,inFault:!1,positioningLeft:1,positioningTop:5,renderType:1}}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/EditAnimationContent":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/text!./templates/EditAnimationContent.html dojo/topic webview/crossCutting/topicEvents webview/util/util ./tabs/AnimationAttributesTab dijit/layout/TabContainer dijit/layout/ContentPane ./tabs/AnimationHelpTab ./tabs/AnimationLinkedObjectsTab ./tabs/AnimationPropertiesTab".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w){return h("webview/features/navigationGroups/dialogs/EditAnimationContent/EditAnimationContent",[m,p,k],{navigationGroupsStrings:q,rcStrings:b,webviewStrings:t,templateString:a,_override:!1,_currentTabClass:null,_hiddenAttributes:!1,_hiddenHelp:!1,_hiddenLinkedObjects:!1,_hiddenTabClass:"hidden-tabs-",_previousWidth:null,postCreate:function(){this.own(u(this._animationObjects,"changedClickDestinations",g.hitch(this,this._onChangedClickDestinations)),
u(this._animationObjects,"changedLinkedObjectsAndDestinations",g.hitch(this,this._onChangedLinkedObjectsAndDestinations)),u(this._animationObjects,"changedLinkedObjects",g.hitch(this,this._onChangedLinkedObjects)),u(this._animationObjects,"changedMapLocations",g.hitch(this,this._onChangedMapLocations)),u(this._animationProperties,"changedAnimation",g.hitch(this,this._onChangedAnimation)),u(this._animationProperties,"changedPositioning",g.hitch(this,this._onChangedPositioning)),u(this._animationProperties,
"changedProperty",g.hitch(this,this._onChangedProperty)),u(this._animationProperties,"deleteNodeClicked",g.hitch(this,this._onDeleteNode)))},_setAnimationPropertiesAttr:function(a){this._animationProperties.removeChangeListeners();this._animationProperties.set(a);this._animationProperties.enableChangeListeners()},_setAttributesDataAttr:function(a){this._destroyExistingAttributeEditors();a&&(x.isArrayNotNullOrEmpty(a.supportedAttributes)||a.error)?(this._hiddenAttributes=!1,this._attributesContent=
new w(a),r.place(this._attributesContent.domNode,this._animationAttributesTab.domNode),this._attributesChangeListener=u(this._attributesContent,"changedAttribute",g.hitch(this,this._onChangedAttribute)),this.own(this._attributesContent,this._attributesChangeListener)):this._hiddenAttributes=!0;this._toggleTabVisibility(this._animationAttributesTab,this._hiddenAttributes)},_setHelpContentAttr:function(a){a&&a.length&&0<a.length?(this._hiddenHelp=!1,this._animationHelp.set("content",a[0])):this._hiddenHelp=
!0;this._toggleTabVisibility(this._animationHelpTab,this._hiddenHelp)},_setLinkedObjectsDataAttr:function(a){a&&a.points&&0<a.points.length?(this._hiddenLinkedObjects=!1,this._animationObjects.set(a)):this._hiddenLinkedObjects=!0;this._toggleTabVisibility(this._animationObjectsTab,this._hiddenLinkedObjects)},_setInitializingAttr:function(a){this.editPaneTabs.selectChild(this._animationPropertiesTab);f.toggle(this.loadingOverlay,"hidden",!a);f.toggle(this.loadingAnimation,"hidden",!a);c.set(this.loadingOverlay,
"opacity",a?1:0)},_getPositioningDataAttr:function(){return this._animationProperties.get("positioningData")},onChangedAnimation:function(a){},onChangedAttribute:function(a){},onChangedLinkedObjectsAndDestinations:function(a,b,c){},onChangedClickDestinations:function(a){},onClose:function(){},onChangedLinkedObjects:function(a){},onChangedProperty:function(a){},onChangedPositioning:function(){},onDeleteNode:function(){},resize:function(){this.inherited(arguments);this.editPaneTabs.resize()},syncAttributes:function(a){this._attributesContent&&
this._attributesContent.syncAttributes(a)},syncObjects:function(a){this._animationProperties&&this._animationObjects.syncObjects(a)},syncProperties:function(a){this._animationProperties&&this._animationProperties.syncProperties(a)},_destroyExistingAttributeEditors:function(){this._attributesChangeListener&&this._attributesChangeListener.remove();this._attributesContent&&this._attributesContent.destroy()},_getNumberOfHiddenTabs:function(){return this._hiddenAttributes+this._hiddenHelp+this._hiddenLinkedObjects},
_onChangedAnimation:function(a){this.onChangedAnimation(a)},_onChangedAttribute:function(a){this.onChangedAttribute(a)},_onChangedLinkedObjectsAndDestinations:function(a,b,c){this.onChangedLinkedObjectsAndDestinations(a,b,c)},_onChangedClickDestinations:function(a){this.onChangedClickDestinations(a)},_onChangedMapLocations:function(a){this.onChangedProperty(a)},_onClose:function(){n.publish("closeResults");n.publish(v.closeSearchResultsPane);this.onClose()},_onDeleteNode:function(){this.onDeleteNode()},
_onChangedLinkedObjects:function(a){this.onChangedLinkedObjects(a)},_onChangedPositioning:function(){this.onChangedPositioning()},_onChangedProperty:function(a){this.onChangedProperty(a)},_resizeTabs:function(){this._currentTabClass&&f.remove(this.editPaneTabs.domNode,this._currentTabClass);var a=this._getNumberOfHiddenTabs();this._currentTabClass=this._hiddenTabClass+a;f.add(this.editPaneTabs.domNode,this._currentTabClass)},_toggleTabVisibility:function(a,b){var c=l.get(a.domNode.parentNode,"aria-labelledby"),
c=d.byId(c);f.toggle(a,"hidden",b);f.toggle(c,"hidden",b);f.toggle(c.parentElement,"hidden",b);this._resizeTabs()},destroy:function(){this._destroyExistingAttributeEditors();this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationAttributesTab":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/text!./templates/AnimationAttributesTab.html rc/_base/util webview/util/util ./AttributeEditor".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){return g("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationAttributesTab",[m,p,k],{navigationGroupsStrings:b,webviewStrings:c,templateString:t,_editorMap:null,_setAttributeValuesAttr:function(a){a||(a={});this._set("attributeValues",a)},_setErrorAttr:function(a){a?(this._errorLabel.innerHTML=a,f.add(this.domNode,"in-error")):f.remove(this.domNode,"in-error")},_setSupportedAttributesAttr:function(a){u.isArrayNotNullOrEmpty(a)&&(this.set("error",
null),this._editorMap={},h.forEach(a,d.hitch(this,function(a){a&&(a.value=a.value||"",this._addAttribute(a))})))},onChangedAttribute:function(a){},syncAttributes:function(a){u.isArrayNotNullOrEmpty(a)&&h.forEach(a,d.hitch(this,function(a){var b=this._editorMap[a.attributeName];b&&b.syncValue(a)}))},_addAttribute:function(b){b.value=this._getAttributeValue(b);var c=d.hitch(this,this._onChangedAttribute,b.attributeName,b.dataType),c=new a(this.animationName,b,c);c.editor&&(this._editorMap[b.attributeName]=
c,this.own(c));this._addAttributeToContainer(b.title,b.dataType,c.editor,c.labelPosition)},_addAttributeToContainer:function(a,b,c,d){var f=r.create("div",{className:"attribute-item "+b});c&&(c.startup(),r.place(c.domNode,f));a&&(a=q.escapeHtml(a),"first"===d&&(a+=":"),a=r.create("label",{className:c?"attribute-label":"section-title",innerHTML:a}),r.place(a,f,d),"bool"===b&&l.set(a,"for",c.id));r.place(f,this._attributeContainer)},_addDefaultSectionHeader:function(){return r.place("\x3cdiv class\x3d'section-title'\x3e"+
this.navigationGroupsStrings.animations.attributes.configuration+"\x3c/div\x3e",this._attributeContainer)},_getAttributeValue:function(a){return this.attributeValues&&"undefined"!==typeof this.attributeValues[a.attributeName]?this.attributeValues[a.attributeName]:a.value},_onChangedAttribute:function(a,b,c,d,f){this.onChangedAttribute({attributeName:a,dataType:b,value:f,originalValue:d})},destroy:function(){this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AttributeEditor":function(){define("dojo/_base/array dojo/_base/declare dojo/i18n!webview/nls/navigationGroups dojo/store/Memory dojo/store/Observable webview/features/animations/FileAttributeSelector webview/widget/ColorPicker dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/NumberSpinner dijit/form/Textarea dijit/form/TextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return m("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AttributeEditor",[],{navigationGroupsStrings:k,constructor:function(b,c,a){this._changeListenerCallback=a;this._buildEditor(b,c);this._connectChangeListener(a)},syncValue:function(b){this.editor&&this._valueProperty&&(this._removeChangeListener(),this.editor.set(this._valueProperty,b.value),this._connectChangeListener())},_buildEditor:function(g,h){this._valueProperty=this.editor=null;this.labelPosition=
"first";var a=h.value;switch(h.dataType){case "bool":this.labelPosition="last";this._valueProperty="checked";this.editor=new f({checked:a});break;case "color":this._valueProperty="color";isNaN(a)||(a="#"+a.toString(16));this.editor=new l({baseClass:"color-picker",color:a});break;case "file":this.labelPosition="";this._valueProperty="selectedFile";this.editor=new d({fileType:this._getFileType(h),animationName:g,attributeName:this._getFileSelectorTitle(h),selectedFile:a});h.title=null;break;case "multi-line":this._valueProperty=
"value";this.editor=new b({baseClass:"rcTextArea form-input large",value:a});break;case "multi-state":this._valueProperty="value";this.editor=new r({store:this._getStoreForValues(h.values),searchAttr:"id",value:a,baseClass:"rcSelectBox form-input large"});break;case "number":this._valueProperty="value";this.editor=new c({baseClass:"form-input large",value:a});break;case "string":this._valueProperty="value";this.editor=new t({baseClass:"rcTextBox form-input large",value:a});break;default:this.labelPosition=
""}},_connectChangeListener:function(){this._removeChangeListener();this.editor&&this._valueProperty&&this._changeListenerCallback&&(this._changeListener=this.editor.watch(this._valueProperty,this._changeListenerCallback))},_getFileType:function(b){var c="all";this._isJsonFileAttribute(b)?c="json":this._isImageFileAttribute(b)&&(c="image");return c},_getFileSelectorTitle:function(b){return b.attributeName.startsWith("gSetStyles")?this.navigationGroupsStrings.animations.attributes.commonAttributeStyling:
b.title},_getStoreForValues:function(b){var c=new g(new h({data:[]}));b&&"string"===typeof b&&p.forEach(b.split(";"),function(a){c.add({id:a})});return c},_isImageFileAttribute:function(b){return b.attributeName.startsWith("gImage")||b.attributeName.startsWith("gIcon")||b.attributeName.startsWith("gImg")||b.value.endsWith(".png")},_isJsonFileAttribute:function(b){return b.attributeName.startsWith("gSetStyles")||b.title.includes("JSON")||b.value&&b.value.endsWith(".json")},_removeChangeListener:function(){this._changeListener&&
this._changeListener.remove()},destroy:function(){this.editor&&this.editor.destroy();this._removeChangeListener()}})})},"webview/features/animations/FileAttributeSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/FileAttributeSelector.html webview/xhrEnhanced webview/crossCutting/forms/fileUploader/FileUploader".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return g("webview/features/animations/FileAttributeSelector",[m,p,k],{acceptedFiles:".*",attributeName:"",animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation",existingLabel:r.animations.attributes.existingFile,navigationGroupsStrings:r,selectedFile:"",templateString:q,uploadLabel:r.animations.attributes.uploadFile,webviewStrings:f,postCreate:function(){this.inherited(arguments);this.own(c(this._fileUploader,"uploadComplete",d.hitch(this,this._onUploadComplete)),
c(this._existingFileSelector,"change",d.hitch(this,this._onFileSelected)),c(this._existingFileSelector.textbox,"click",d.hitch(this,this._onClickExistingSelector)));this._existingFileStore=new t(new b({idProperty:"name"}));this._existingFileSelector.set("store",this._existingFileStore);this.selectedFile?this.selectExistingFile(this.selectedFile):this.initialize()},_setAcceptedFilesAttr:function(a){this._fileUploader.set("acceptedFiles",a);this._set("acceptedFiles",a)},_setAnimationNameAttr:function(a){this._set("animationName",
a);this._fileUploader.set("uploadPath",this.animationFilesPath+"/"+a)},_setSelectedFileAttr:function(a){this._set("selectedFile",a);this._existingFileStore&&!this._existingFileSelector.get("disabled")&&this._selectExistingFile(a)},_setFileTypeAttr:function(a){"json"===a?(this.set("acceptedFiles",".json"),this._uploadRadioButtonLabel.innerHTML=this.navigationGroupsStrings.animations.attributes.uploadJsonConfig,this._existingRadioButtonLabel.innerHTML=this.navigationGroupsStrings.animations.attributes.existingJSON):
("image"===a?this.set("acceptedFiles","image/*"):this.set("acceptedFiles",".*"),this._uploadRadioButtonLabel.innerHTML=this.navigationGroupsStrings.animations.attributes.uploadFile,this._existingRadioButtonLabel.innerHTML=this.navigationGroupsStrings.animations.attributes.existingFile);this._set("fileType",a)},initialize:function(){!0!==this.initialized&&(this._loadExistingFiles(),this.initialized=!0)},onFileSelected:function(a){this.set("selectedFile",a)},selectExistingFile:function(a){this._fileUploader.set("disabled",
!0);this._uploadRadioButton.set("checked",!1);this._existingRadioButton.set("checked",!0);this._loadExistingFiles().then(d.hitch(this,this._selectExistingFile,a))},_clearExistingFileSelector:function(){this._existingFileStore.setData([]);this._existingFileSelector.set("value",null)},_existingSelected:function(){this._fileUploader.set("disabled",!0);this._onFileSelected(this._existingFileSelector.get("value"));return this._loadExistingFiles().then(d.hitch(this,function(){this._existingFileSelector.set("disabled",
!1)}))},_loadExistingFiles:function(){this.loadExistingDeferred&&this.loadExistingDeferred.isCanceled()&&this.loadExistingDeferred.cancel();this.loadExistingDeferred=u.get(this.animationFilesPath+"Files/"+this.animationName+"/"+this.fileType,{handleAs:"json",preventCache:!0});this.own(this.loadExistingDeferred);this.loadExistingDeferred.then(d.hitch(this,this._onLoadExistingFiles),d.hitch(this,function(a){this._onLoadExistingFilesFailure();console.error(a);this.loadExistingDeferred=null}));return this.loadExistingDeferred},
_onFileSelected:function(a){this.set("selectedFile",a);this.onFileSelected(a)},_onClickExistingSelector:function(){var a=this._existingFileSelector.get("value"),b=0;a&&(b=1+this._existingFileStore.index[a]);(a=this._existingFileSelector.store.data[b])||(a=this._existingFileSelector.store.data[0]);this._existingFileSelector.set("value",a.name)},_onLoadExistingFiles:function(a){a&&0<a.length?(this._existingFileStore.setData([]),h.forEach(a,d.hitch(this,function(a){this._existingFileStore.put({name:a})})),
this._setExistingFileRadioButtonDisabled(!1)):this._onLoadExistingFilesFailure();this.loadExistingDeferred=null},_onLoadExistingFilesFailure:function(){this._uploadRadioButton.set("checked",!0);this._uploadSelected();this._setExistingFileRadioButtonDisabled(!0);this._clearExistingFileSelector()},_onUploadComplete:function(a){this._loadExistingFiles().then(d.hitch(this,function(){this._existingFileSelector.set("value",a)}))},_selectExistingFile:function(a){this._existingFileSelector.set("disabled",
!1);this._existingFileSelector.set("value",a)},_setExistingFileRadioButtonDisabled:function(a){this._existingRadioButton.set("disabled",a);l.toggle(this._existingRadioButtonLabel,"disabled",a)},_uploadSelected:function(){this._existingFileSelector.set("disabled",!0);this._fileUploader.set("disabled",!1);var a=this._fileUploader.get("value");a&&this._onFileSelected(a)}})})},"webview/crossCutting/forms/fileUploader/FileUploader":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!./templates/FileUploader.html webview/crossCutting/errors/_OnErrorMixin webview/xhrEnhanced".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return g("webview/crossCutting/fileUploader/fileUploader",[m,p,k,q],{_MAX_FILE_UPLOAD_SIZE_IN_MB:25,acceptedFiles:".*",disableErrorToasts:!0,disabled:!1,displayFileExtension:!0,invalidFile:r.invalidFile,errorStrings:c,templateString:t,postCreate:function(){this.inherited(arguments);l.set(this._fileInput,"accept",this.acceptedFiles);this.own(b(this._fileInput,"change",d.hitch(this,this._onFileSelected)))},_setAcceptedFilesAttr:function(a){this._acceptedFileExtensions=
a.split("|");this._set("acceptedFiles",a);l.set(this._fileInput,"accept",this.acceptedFiles)},_setDisabledAttr:function(a){this._browseButton.set("disabled",a);f.toggle(this.domNode,"disabled",a);this._set("disabled",a)},_getValueAttr:function(){return this._selectedFile.innerText},_setValueAttr:function(a){this._selectedFile.innerText=a},clear:function(){this._fileInput.value=null;this._toggleInError();this.onUploadComplete(null)},getErrorMessage:function(a){return this.invalidFile},onUploadComplete:function(a){},
_onClickBrowse:function(){this.disabled||this._fileInput.click()},_onError:function(a){this.inherited(arguments);this._toggleInError(a);this.onUploadComplete(null)},_onFileSelected:function(){var a=this._fileInput.files[0];a&&this._validateFile(a)&&(this._uploadedFile=a.name,this._uploadFile(a))},_onUploadComplete:function(a){a.fileName?(this._toggleInError(!1),this.displayFileExtension&&(a.fileName=this._uploadedFile),this._selectedFile.innerText=a.fileName,this.onUploadComplete(a.fileName)):this._onError(a)},
_toggleInError:function(a){var b=!1;a&&(b=!0,this._errorMessage.innerText=this.getErrorMessage(a));f.toggle(this.domNode,"in-error",b);this._selectedFile.innerText=null},_uploadFile:function(a){var b=new FormData;b.append(a.name,a);u.post(this.uploadPath,{handleAs:"json",data:b}).then(d.hitch(this,this._onUploadComplete),d.hitch(this,this._onError))},_validateFile:function(a){var b=!0;a=a.name;var c=a.lastIndexOf("\\")+1;a=a.substring(c);this._validateFileExtension(a)||(b=!1,this._toggleInError(!0));
return b},_validateFileExtension:function(a){var b=a.lastIndexOf("."),c=a.substring(b);return h.some(this._acceptedFileExtensions,d.hitch(this,function(a){return".*"===a||a===c||a.startsWith("image")}))}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(p,m,k,h){return p("dijit.form.NumberSpinner",[k,h.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(g,d){var h=this.constraints,f=isNaN(g),k=
!isNaN(h.max),c=!isNaN(h.min);f&&0!=d&&(g=0<d?c?h.min:k?h.max:0:k?this.constraints.max:c?h.min:0);var b=g+d;if(f||isNaN(b))return g;k&&b>h.max&&(b=h.max);c&&b<h.min&&(b=h.min);return b},_onKeyDown:function(g){if(!(this.disabled||this.readOnly||g.keyCode!=m.HOME&&g.keyCode!=m.END||g.ctrlKey||g.altKey||g.metaKey||"undefined"==typeof this.get("value"))){var d=this.constraints[g.keyCode==m.HOME?"min":"max"];"number"==typeof d&&this._setValueAttr(d,!1);g.stopPropagation();g.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return p("dijit.form._Spinner",f,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:.9,smallDelta:1,largeDelta:10,templateString:r,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(b){return b},_arrowPressed:function(b,d,f){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),d*f),!1),c.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=
null},_typematicCallback:function(b,c,d){var f=this.smallDelta;c==this.textbox&&(c=d.keyCode,f=c==m.PAGE_UP||c==m.PAGE_DOWN?this.largeDelta:this.smallDelta,c=c==m.UP_ARROW||c==m.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==b?this._arrowReleased(c):this._arrowPressed(c,c==this.upArrowNode?1:-1,f)},_wheelTimer:null,_mouseWheeled:function(b){if(this.focused){b.stopPropagation();b.preventDefault();var c=b.wheelDelta/120;Math.floor(c)!=c&&(c=0<b.wheelDelta?1:-1);b=b.detail?-1*b.detail:c;if(0!==b){var d=
this[0<b?"upArrowNode":"downArrowNode"];this._arrowPressed(d,b,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(d)},50)}}},_setConstraintsAttr:function(b){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):
this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(b,c){this.focusNode.setAttribute("aria-valuenow",b);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,g.wheel,k.hitch(this,"_mouseWheeled")),l.addListener(this.upArrowNode,this.textbox,{keyCode:m.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),l.addListener(this.downArrowNode,this.textbox,
{keyCode:m.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),l.addListener(this.upArrowNode,this.textbox,{keyCode:m.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),l.addListener(this.downArrowNode,this.textbox,{keyCode:m.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,
this.defaultTimeout,this.minimumTimeout))}})})},"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(p,m,k,h,g){return m("dijit.layout.TabContainer",k,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(d){var g=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?p.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+
"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":g,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},d)},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?h:g)}})})},
"dijit/layout/_TabContainerBase":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style ./StackContainer ./utils ../_TemplatedMixin dojo/text!./templates/TabContainer.html".split(" "),function(p,m,k,h,g,d,l,f){return p("dijit.layout._TabContainerBase",[g,l],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:f,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,
"");this.srcNodeRef&&h.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||m.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(m.add(this.domNode,"dijitTabContainerNested"),m.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),m.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),m.add(this.containerNode,"dijitTabPaneWrapperNested")):m.add(this.domNode,
"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(d){m.add(d.domNode,"dijitTabPane");this.inherited(arguments)},removeChild:function(d){m.remove(d.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var f=this.selectedChildWidget;if(this.doLayout){var c=this.tabPosition.replace(/-h/,"");this.tablist.region=c;c=[this.tablist,
{domNode:this.tablistSpacer,region:c},{domNode:this.containerNode,region:"center"}];d.layoutChildren(this.domNode,this._contentBox,c);this._containerContentBox=d.marginBox2contentBox(this.containerNode,c[2]);f&&f.resize&&f.resize(this._containerContentBox)}else{if(this.tablist.resize){c=this.tablist.domNode.style;c.width="0";var b=k.getContentBox(this.domNode).w;c.width="";this.tablist.resize({w:b})}f&&f.resize&&f.resize()}}},destroy:function(d){this.tablist&&this.tablist.destroy(d);this.inherited(arguments)}})})},
"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){d("dijit-legacy-requires")&&r(0,function(){require(["dijit/layout/StackController"])});k=k("dijit.layout.StackContainer",u,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);
h.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(f(this.domNode,"keydown",l.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();p.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=t.byId(m(this.id+"_selectedChild")):p.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},this);var b=this.selectedChildWidget;!b&&a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);
c.publish(this.id+"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){var b=a.domNode,c=g.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",a.domNode,"replace"),d=a["aria-label"]||a.title||a.label;d&&c.setAttribute("aria-label",d);g.place(b,c);a._wrapper=c;
this.inherited(arguments);"none"==b.style.display&&(b.style.display="block");a.domNode.removeAttribute("title")},addChild:function(a,b){this.inherited(arguments);this._started&&(c.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){var b=p.indexOf(this.getChildren(),a);this.inherited(arguments);g.destroy(a._wrapper);delete a._wrapper;this._started&&c.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===
a&&(this.selectedChildWidget=void 0,this._started)){var d=this.getChildren();d.length&&this.selectChild(d[Math.max(b-1,0)])}this._started&&this.layout()}},selectChild:function(a,d){var f;a=t.byId(a);this.selectedChildWidget!=a&&(f=this._transition(a,this.selectedChildWidget,d),this._set("selectedChildWidget",a),c.publish(this.id+"-selectChild",a,this._focused),this.persist&&m(this.id+"_selectedChild",this.selectedChildWidget.id));return b(f||!0)},_transition:function(a,b){b&&this._hideChild(b);var c=
this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=p.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){c.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;
a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);a._wrapper&&h.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&h.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){if(!a.onClose||a.onClose(this,a))this.removeChild(a),
a.destroyRecursive()},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;p.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});k.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};l.extend(q,k.ChildWidgetProperties);return k})},"dijit/layout/TabController":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){t=p("dijit.layout._TabButton"+(g("dojo-bidi")?"_NoBidi":""),f.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:t,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);m.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var b=this.domNode;this.defer(function(){b.className=b.className},1)},_setCloseButtonAttr:function(b){this._set("closeButton",b);
h.toggle(this.domNode,"dijitClosable",b);this.closeNode.style.display=b?"":"none";b&&(b=d.getLocalization("dijit","common"),this.closeNode&&k.set(this.closeNode,"title",b.itemClose))},_setDisabledAttr:function(b){this.inherited(arguments);if(this.closeNode)if(b)k.remove(this.closeNode,"title");else{var c=d.getLocalization("dijit","common");k.set(this.closeNode,"title",c.itemClose)}},_setLabelAttr:function(b){this.inherited(arguments);this.showLabel||this.params.title||(this.iconNode.alt=l.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}});g("dojo-bidi")&&(t=p("dijit.layout._TabButton",t,{_setLabelAttr:function(b){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}}));p=p("dijit.layout.TabController",f,{baseClass:"dijitTabController",templateString:"\x3cdiv role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown:onkeydown'\x3e\x3c/div\x3e",tabPosition:"top",buttonWidget:t,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var f=
new c({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(a){return h.contains(a,"dijitClosable")&&!h.contains(a,"dijitTabDisabled")}});this.own(f);var g=d.getLocalization("dijit","common"),a=this;f.addChild(new b({label:g.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(b){b=r.byNode(this.getParent().currentTarget);a.onCloseButtonClick(b.page)}}))}});
p.TabButton=t;return p})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){h=m("dijit.layout._StackButton",u,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(a){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role",
"tab")}});m=m("dijit.layout.StackController",[b,t,q],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:h,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(a){return c.byId(this.id+"_"+a)},postCreate:function(){this.inherited(arguments);this.own(f.subscribe(this.containerId+"-startup",d.hitch(this,"onStartup")),f.subscribe(this.containerId+"-addChild",d.hitch(this,"onAddChild")),
f.subscribe(this.containerId+"-removeChild",d.hitch(this,"onRemoveChild")),f.subscribe(this.containerId+"-selectChild",d.hitch(this,"onSelectChild")),f.subscribe(this.containerId+"-containerKeyDown",d.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(l(this.containerNode,"click",d.hitch(this,function(a){var b=c.getEnclosingWidget(a.target);if(b!=this.containerNode&&!b.disabled&&b.page)for(a=a.target;a!==this.containerNode;a=a.parentNode)if(k.contains(a,this.buttonWidgetCloseClass)){this.onCloseButtonClick(b.page);
break}else if(a==b.domNode){this.onButtonClick(b.page);break}})))},onStartup:function(a){this.textDir=a.textDir;p.forEach(a.children,this.onAddChild,this);if(a.selected)this.onSelectChild(a.selected);var b=c.byId(this.containerId).containerNode,f=d.hitch(this,"pane2button");a={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var g=function(a,c){return l(b,"attrmodified-"+a,function(a){var b=f(a.detail&&a.detail.widget&&
a.detail.widget.id);b&&b.set(c,a.detail.newValue)})},h;for(h in a)this.own(g(h,a[h]))},destroy:function(a){this.destroyDescendants(a);this.inherited(arguments)},onAddChild:function(a,b){var c=new (d.isString(this.buttonWidget)?d.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+a.id,name:this.id+"_"+a.id,label:a.title,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||this.textDir,showLabel:a.showTitle,iconClass:a.iconClass,closeButton:a.closable,
title:a.tooltip,page:a});this.addChild(c,b);a.controlButton=c;if(!this._currentChild)this.onSelectChild(a);c=a._wrapper.getAttribute("aria-labelledby")?a._wrapper.getAttribute("aria-labelledby")+" "+c.id:c.id;a._wrapper.removeAttribute("aria-label");a._wrapper.setAttribute("aria-labelledby",c)},onRemoveChild:function(a){this._currentChild===a&&(this._currentChild=null);var b=this.pane2button(a.id);b&&(this.removeChild(b),b.destroy());delete a.controlButton},onSelectChild:function(a){if(a){if(this._currentChild){var b=
this.pane2button(this._currentChild.id);b.set("checked",!1);b.focusNode.setAttribute("tabIndex","-1")}b=this.pane2button(a.id);b.set("checked",!0);this._currentChild=a;b.focusNode.setAttribute("tabIndex","0");c.byId(this.containerId)}},onButtonClick:function(a){var b=this.pane2button(a.id);r.focus(b.focusNode);this._currentChild&&this._currentChild.id===a.id&&b.set("checked",!0);c.byId(this.containerId).selectChild(a)},onCloseButtonClick:function(a){c.byId(this.containerId).closeChild(a);this._currentChild&&
(a=this.pane2button(this._currentChild.id))&&r.focus(a.focusNode||a.domNode)},adjacent:function(a){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(a=!a);var b=this.getChildren(),c=p.indexOf(b,this.pane2button(this._currentChild.id)),d=b[c],f;do c=(c+(a?1:b.length-1))%b.length,f=b[c];while(f.disabled&&f!=d);return f},onkeydown:function(a,b){if(!this.disabled&&!a.altKey){var c=null;if(a.ctrlKey||!a._djpage){switch(a.keyCode){case g.LEFT_ARROW:case g.UP_ARROW:a._djpage||
(c=!1);break;case g.PAGE_UP:a.ctrlKey&&(c=!1);break;case g.RIGHT_ARROW:case g.DOWN_ARROW:a._djpage||(c=!0);break;case g.PAGE_DOWN:a.ctrlKey&&(c=!0);break;case g.HOME:for(var d=this.getChildren(),f=0;f<d.length;f++){var h=d[f];if(!h.disabled){this.onButtonClick(h.page);break}}a.stopPropagation();a.preventDefault();break;case g.END:d=this.getChildren();for(f=d.length-1;0<=f;f--)if(h=d[f],!h.disabled){this.onButtonClick(h.page);break}a.stopPropagation();a.preventDefault();break;case g.DELETE:case 87:this._currentChild.closable&&
(a.keyCode==g.DELETE||a.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),a.stopPropagation(),a.preventDefault());break;case g.TAB:a.ctrlKey&&(this.onButtonClick(this.adjacent(!a.shiftKey).page),a.stopPropagation(),a.preventDefault())}null!==c&&(this.onButtonClick(this.adjacent(c).page),a.stopPropagation(),a.preventDefault())}}},onContainerKeyDown:function(a){a.e._djpage=a.page;this.onkeydown(a.e)}});m.StackButton=h;return m})},"dijit/layout/ScrollingTabController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z){t=m("dijit.layout.ScrollingTabController",[u,n],{baseClass:"dijitTabController dijitScrollingTabController",templateString:t,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var a=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+
this.tabPosition.substr(1).replace(/-.*/,"")+"None",k.add(a,"tabStrip-disabled"));k.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);g.set(this.domNode,"visibility","");this._postStartup=!0;this.own(f(this.containerNode,"attrmodified-label, attrmodified-iconclass",l.hitch(this,function(a){this._dim&&this.resize(this._dim)})))},onAddChild:function(a,b){this.inherited(arguments);g.set(this.containerNode,"width",g.get(this.containerNode,"width")+200+"px")},
onRemoveChild:function(a,b){var c=this.pane2button(a.id);this._selectedTab===c.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=r("\x3e .tabStripButton",this.domNode).filter(function(a){if(this.useMenu&&a==this._menuBtn.domNode||this.useSlider&&(a==this._rightBtn.domNode||a==this._leftBtn.domNode))return this._btnWidth+=h.getMarginSize(a).w,!0;g.set(a,"display","none");return!1},this)},_getTabsWidth:function(){var a=this.getChildren();
if(a.length){var b=a[this.isLeftToRight()?0:a.length-1].domNode,a=a[this.isLeftToRight()?a.length-1:0].domNode;return a.offsetLeft+a.offsetWidth-b.offsetLeft}return 0},_enableBtn:function(a){var b=this._getTabsWidth();a=a||g.get(this.scrollNode,"width");return 0<b&&a<b},resize:function(b){this._dim=b;this.scrollNode.style.height="auto";var c=this._contentBox=a.marginBox2contentBox(this.domNode,{h:0,w:b.w});c.h=this.scrollNode.offsetHeight;h.setContentSize(this.domNode,c);c=this._enableBtn(this._contentBox.w);
this._buttons.style("display",c?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";a.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());
this._postResize=!0;return{h:this._contentBox.h,w:b.w}},_getScroll:function(){return this.isLeftToRight()||8>c("ie")||c("trident")&&c("quirks")||c("webkit")?this.scrollNode.scrollLeft:g.get(this.containerNode,"width")-g.get(this.scrollNode,"width")+(c("trident")||c("edge")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(a){if(this.isLeftToRight()||8>c("ie")||c("trident")&&c("quirks")||c("webkit"))return a;var b=g.get(this.containerNode,"width")-g.get(this.scrollNode,"width");return(c("trident")||
c("edge")?-1:1)*(a-b)},onSelectChild:function(a,b){var c=this.pane2button(a.id);if(c){var d=c.domNode;if(d!=this._selectedTab&&(this._selectedTab=d,this._postResize)){var f=this._getScroll();f>d.offsetLeft||f+g.get(this.scrollNode,"width")<d.offsetLeft+g.get(d,"width")?(d=this.createSmoothScroll(),b&&(d.onEnd=function(){c.focus()}),d.play()):b&&c.focus()}this.inherited(arguments)}},_getScrollBounds:function(){var a=this.getChildren(),b=g.get(this.scrollNode,"width"),c=g.get(this.containerNode,"width")-
b,d=this._getTabsWidth();if(a.length&&d>b)return{min:this.isLeftToRight()?0:a[a.length-1].domNode.offsetLeft,max:this.isLeftToRight()?a[a.length-1].domNode.offsetLeft+a[a.length-1].domNode.offsetWidth-b:c};a=this.isLeftToRight()?0:c;return{min:a,max:a}},_getScrollForSelectedTab:function(){var a=this._selectedTab,b=g.get(this.scrollNode,"width"),c=this._getScrollBounds(),a=a.offsetLeft+g.get(a,"width")/2-b/2;return a=Math.min(Math.max(a,c.min),c.max)},createSmoothScroll:function(a){if(0<arguments.length){var b=
this._getScrollBounds();a=Math.min(Math.max(a,b.min),b.max)}else a=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var c=this,f=this.scrollNode,g=new d.Animation({beforeBegin:function(){this.curve&&delete this.curve;var b=f.scrollLeft,h=c._convertToScrollLeft(a);g.curve=new d._Line(b,h)},onAnimate:function(a){f.scrollLeft=a}});this._anim=g;this._setButtonClass(a);return g},_getBtnNode:function(a){for(a=a.target;a&&!k.contains(a,"tabStripButton");)a=a.parentNode;
return a},doSlideRight:function(a){this.doSlide(1,this._getBtnNode(a))},doSlideLeft:function(a){this.doSlide(-1,this._getBtnNode(a))},doSlide:function(a,b){if(!b||!k.contains(b,"dijitTabDisabled")){var c=.75*g.get(this.scrollNode,"width")*a,c=this._getScroll()+c;this._setButtonClass(c);this.createSmoothScroll(c).play()}},_setButtonClass:function(a){var b=this._getScrollBounds();this._leftBtn.set("disabled",a<=b.min);this._rightBtn.set("disabled",a>=b.max)}});q=m("dijit.layout._ScrollingTabControllerButtonMixin",
null,{baseClass:"dijitTab tabStripButton",templateString:q,tabIndex:"",isFocusable:function(){return!1}});m("dijit.layout._ScrollingTabControllerButton",[w,q]);m("dijit.layout._ScrollingTabControllerMenuButton",[w,z,q],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(a){this.dropDown=new v({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var c=b.byId(this.containerId);p.forEach(c.getChildren(),function(a){var b=
new x({id:a.id+"_stcMi",label:a.title,iconClass:a.iconClass,disabled:a.disabled,ownerDocument:this.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir||c.textDir,onClick:function(){c.selectChild(a)}});this.dropDown.addChild(b)},this);a()},closeDropDown:function(a){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return t})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationHelpTab":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/i18n!webview/nls/all dojo/text!./templates/AnimationHelpTab.html".split(" "),
function(p,m,k,h,g,d){return h("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationHelpTab",[m,p,k],{webviewStrings:g,templateString:d,_setContentAttr:function(d){this.versionContent.textContent=this.webviewStrings.version+": "+d.version;this.informationContent.textContent=d.content}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationLinkedObjectsTab":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/extensions/ColumnResizer dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/Button dijit/form/TextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/on dojo/string dojo/topic dojo/store/Memory dojo/store/Observable dojo/dom-construct dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/text!./templates/AnimationLinkedObjectsTab.html dojox/html/entities webview/crossCutting/topicEvents webview/util/util ./LinkedObjectDndSource webview/widget/AddButton webview/widget/WarningDialog webview/widget/WarningDialogEnums".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H){return t("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationLinkedObjectsTab",[d,g,l],{navigationGroupsStrings:B,webviewStrings:A,templateString:C,site:null,fixedPointCount:!0,columns:0,purposeMask:"",_columnStyleHidden:"display: none;",_columnStyleVisible:"display: table-cell;",_confirmDialog:null,_grid:null,_mapLocationsAttribute:"animationLocationsAttribute",constructor:function(){this._gridStore=
new z(new w({idProperty:"associationIndex"}));this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._createGrid()},_setErrorAttr:function(b){b?(this._errorLabel.innerHTML=b,a.add(this.domNode,"in-error")):a.remove(this.domNode,"in-error")},_setClickDestinationsAttr:function(a){F.isArrayNotNullOrEmpty(a)&&b.forEach(a,q.hitch(this,function(a){if(a){var b=this._getRow(Math.floor(a.associationIndex/2),!1);b&&(b.destination=a,this._gridStore.put(b))}}))},_setLinkedObjectsAttr:function(a){if(F.isArrayNotNullOrEmpty(a)){this._revertGrid();
var c=0;b.forEach(a,q.hitch(this,function(a){if(a){var b=this._getRow(Math.floor((a.associationIndex+1)/2),!0);b&&(0<this.columns&&(b.purpose=this._getPurpose(c,this.columns)),b.object=a,b.displayName=a.name,this._gridStore.put(b))}c++}));this._addEmptyRowForAdditionalObjects()}},_setMapLocationsAttr:function(a){F.isArrayNotNullOrEmpty(a)&&(this._revertGrid(),b.forEach(a,q.hitch(this,function(a,b){var c=this._getRow(b+1,!1);if(c){var d=a.split(",");c.latitude=d[0]||"";c.longitude=d[1]||"";this._gridStore.put(c)}})))},
_setPointsAttr:function(a){this.set("error",null);this._gridStore.setData([]);this._revertGrid();var c=this.hasRowsWithLocations=this.hasRowsWithDisplayName=this.hasRowsWithClickDestination=!1,d=!1,f=!1;b.forEach(a,q.hitch(this,function(a,b){c=!0===a.link;d|=!0===a.displayname;f|=!0===a.location;this._gridStore.add({associationIndex:b+1,destination:null,displayName:"",hasClickDestination:c,hasDisplayName:d,hasLocations:f,latitude:"",longitude:"",object:null,purpose:a.purpose,type:a.type});this.hasRowsWithClickDestination|=
c;this.hasRowsWithDisplayName|=d;this.hasRowsWithLocations|=f}));this._hideUnusedColumns();this._set("points",a)},syncObjects:function(a){var b={linkedObjects:this._getLinkedObjects(),clickDestinations:this._getClickDestinations(),mapLocations:this._getMapLocations().split(";")};a=q.mixin(b,a);this.set("points",this.points);this.set(a)},onChangedLinkedObjectsAndDestinations:function(a,b,c){},onChangedClickDestinations:function(a){},onChangedLinkedObjects:function(a){},onChangedMapLocations:function(a){},
resize:function(){this.inherited(arguments);this._grid.resize()},_canEditDisplayName:function(a){return a.hasDisplayName&&a.object},_canEditLocation:function(a){return a.hasLocations&&a.object},_createGrid:function(){null===this._grid&&(this._grid=new (t([p,k,h]))({columns:this._getColumnStructure(),store:this._gridStore,isPagingGrid:!1},this.gridNode),this.own(this._grid),this._grid.startup(),this._connectGrid())},_connectGrid:function(){this.own(n(this._grid,"dgrid-refresh-complete",q.hitch(this._grid,
"resize")),n(this._grid,".dgrid-column-displayNameCol:dgrid-datachange",q.hitch(this,this._onChangedDisplayName)),n(this._grid,".dgrid-column-latitudeCol:dgrid-datachange",q.hitch(this,this._onChangedLocation)),n(this._grid,".dgrid-column-longitudeCol:dgrid-datachange",q.hitch(this,this._onChangedLocation)))},_formatDisplayNameCell:function(a,b){return this._canEditDisplayName(b)?a||"":""},_formatLatitudeCell:function(a,b){return this._canEditLocation(b)?a||"":""},_formatLongitudeCell:function(a,
b){return this._canEditLocation(b)?a||"":""},_getClickDestinations:function(){var a=b.filter(this._gridStore.data,function(a){return null!==a.destination});return b.map(a,function(a){return q.clone(a.destination)})},_getColumnStructure:function(){return[{id:"rowCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.row,field:"associationIndex",sortable:!1,hidden:!1},{id:"purposeCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.purpose,field:"purpose",sortable:!1,
hidden:!1},{id:"typeCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.type,field:"type",sortable:!1,hidden:!1},m({id:"latitudeCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.latitude,field:"latitude",canEdit:q.hitch(this,this._canEditLocation),editOn:"click",editor:r,editorArgs:{baseClass:"rcTextBox",maxLength:256},hidden:!0,sortable:!1,formatter:q.hitch(this,this._formatLatitudeCell)}),m({id:"longitudeCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.longitude,
field:"longitude",canEdit:q.hitch(this,this._canEditLocation),editOn:"click",editor:r,editorArgs:{baseClass:"rcTextBox",maxLength:256},hidden:!0,sortable:!1,formatter:q.hitch(this,this._formatLongitudeCell)}),{id:"objectCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.object,field:"object",sortable:!1,hidden:!1,renderCell:q.hitch(this,this._renderObjectCell)},m({id:"displayNameCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.displayName,field:"displayName",
canEdit:q.hitch(this,this._canEditDisplayName),editOn:"click",editor:r,editorArgs:{baseClass:"rcTextBox",maxLength:256},hidden:!1,sortable:!1,formatter:q.hitch(this,this._formatDisplayNameCell)}),{id:"destinationCol",label:this.navigationGroupsStrings.animations.editPane.objectConfig.destination,field:"destination",sortable:!1,hidden:!1,renderCell:q.hitch(this,this._renderDestinationCell)}]},_getLinkedObjects:function(){var a=b.filter(this._gridStore.data,function(a){return null!==a.object});return b.map(a,
function(a){return q.clone(a.object)})},_getMapLocations:function(){var a=[];b.forEach(this._gridStore.data,function(b){b.hasLocations&&(a[b.associationIndex-1]=[b.latitude||"",b.longitude||""].join())});return a.join(";")},_createRow:function(a){var b=this.navigationGroupsStrings.animations.editPane.objectConfig.displayValues,c=this.navigationGroupsStrings.animations.editPane.objectConfig.displayType;0<this.points.length&&(b=this.points[this.points.length-1].purpose,c=this.points[this.points.length-
1].type);return{associationIndex:a,hasClickDestination:this.hasRowsWithClickDestination,hasDisplayName:this.hasRowsWithDisplayName,hasLocations:this.hasRowsWithLocations,latitude:"",longitude:"",purpose:b,type:c,object:null,destination:null}},_getRow:function(a,b){var c=this._gridStore.get(a);c||this.fixedPointCount||1!=b||(c=this._createRow(a));return c},_hideUnusedColumns:function(){var a=this.hasRowsWithClickDestination?this._columnStyleVisible:this._columnStyleHidden;this._grid.styleColumn("destinationCol",
a);a=this.hasRowsWithDisplayName?this._columnStyleVisible:this._columnStyleHidden;this._grid.styleColumn("displayNameCol",a);a=this.hasRowsWithLocations?this._columnStyleVisible:this._columnStyleHidden;this._grid.styleColumn("latitudeCol",a);this._grid.styleColumn("longitudeCol",a)},_insertObjects:function(a,b,d){var f=[],g="object"===d;a.forEach(q.hitch(this,function(a,h){var l=b+h,k=this._getRow(l,g);if(k){var n=c.byNode(a),l={associationIndex:"object"===d?2*l-1:2*l,mnemonic:n.item.pointMnemonic,
systemId:n.item.sysId};!g&&n.item.isKeywordSelectorItem&&(l.name=n.item.displayText,l.keyword=n.item.keyword,l.mnemonic=n.item.mnemonic);if(!g||l.mnemonic||l.systemId)k=q.clone(k),k[d]=l,g&&k.hasDisplayName&&(l.name=n.item.pointName,k.displayName=n.item.pointName),f.push(k)}}));0<f.length&&(g?(this._onChangedLinkedObjects(f),this._addEmptyRowForAdditionalObjects()):"destination"===d&&this._onChangedClickDestinations(f))},_onChangedClickDestinations:function(a){destinationData={original:this._getClickDestinations()};
b.forEach(a,q.hitch(this,function(a){this._gridStore.put(a)}));this._revertGrid();destinationData.updated=this._getClickDestinations();this.onChangedClickDestinations(destinationData)},_onChangedDisplayName:function(a){linkedObjectData={original:this._getLinkedObjects()};var b=this._gridStore.get(a.rowId);b.displayName=D.encode(a.value);b.object.name=a.value;this._gridStore.put(b);linkedObjectData.updated=this._getLinkedObjects();this.onChangedLinkedObjects(linkedObjectData);this._revertGrid()},_onChangedLinkedObjects:function(a){linkedObjectData=
{original:this._getLinkedObjects()};b.forEach(a,q.hitch(this,function(a){this._gridStore.put(a)}));this._grid.refresh({keepScrollPosition:!0});linkedObjectData.updated=this._getLinkedObjects();this.onChangedLinkedObjects(linkedObjectData)},_onChangedLocation:function(a){locationData={property:"mapLocations",originalValue:this._getMapLocations()};var b=this._gridStore.get(a.rowId);b[a.cell.column.field]=a.value;this._gridStore.put(b);locationData.value=this._getMapLocations();this.onChangedMapLocations(locationData);
this._revertGrid()},_onDeleteClickDestinations:function(a){var b={original:this._getClickDestinations()};a.destination=null;this._gridStore.put(a);b.updated=this._getClickDestinations();this.onChangedClickDestinations(b)},_onDeleteLinkedObject:function(a){var b={original:this._getLinkedObjects()},c={original:this._getClickDestinations()},d={property:"mapLocations",originalValue:this._getMapLocations()};a.destination=null;a.object=null;!this.fixedPointCount&&0<this._gridStore.data.length?(this._gridStore.remove(a.associationIndex),
this._grid.refresh({keepScrollPosition:!0}),this._reindexGrid()):this._gridStore.put(a);b.updated=this._getLinkedObjects();c.updated=this._getClickDestinations();d.value=this._getMapLocations();this.onChangedLinkedObjectsAndDestinations(b,c,d)},_onDeletePrompt:function(a){this._showConfirmDialog(a,"object"===a.columnKey).then(q.hitch(this,function(a){"object"===a.columnKey?this._onDeleteLinkedObject(a):this._onDeleteClickDestinations(a)}))},_openKeywordsSelectionPane:function(){x.publish(E.addClickDestinationKeyword,
this.site)},_openObjSelectionPane:function(){x.publish(E.addAssociatedObject,this.site)},_renderCellHelper:function(b,c,d,g){var h=y.create("div"),l=y.create("span",{"class":"mnemonic-container"},h),k=!1;c?(l.innerText=c.mnemonic||c.keyword||"",0===l.innerText.length&&(k=!0)):k=!0;if(!0===k){var m;"object"===g?m=new f({showLabel:!1,iconClass:"rcIcon add-icon",baseClass:"add-object-button",onClick:q.hitch(this,"_openObjSelectionPane")}):"destination"===g&&(m=new I({supportsAnimations:!1}),a.add(m.domNode,
"addDestinationKeyword"),this.own(n(m,"addObject",q.hitch(this,"_openObjSelectionPane")),n(m,"addKeyword",q.hitch(this,"_openKeywordsSelectionPane"))));m.startup();y.place(m.domNode,h)}else c=q.clone(b),c.columnKey=g,c=new f({showLabel:!1,iconClass:"rcIcon remove-icon",baseClass:"remove-object-button",onClick:q.hitch(this,this._onDeletePrompt,c)}),c.startup(),y.place(c.domNode,h);d=new G(d);this.own(n(d,"Drop",q.hitch(this,function(a,c,d){this._insertObjects(c,b.associationIndex,g)})));return h},
_renderDestinationCell:function(a,b,c){return a.hasClickDestination&&a.object?this._renderCellHelper(a,b,c,"destination"):null},_renderObjectCell:function(a,b,c){return this._renderCellHelper(a,b,c,"object")},_revertGrid:function(){this._grid.dirty={};this._grid.refresh({keepScrollPosition:!0})},_showConfirmDialog:function(a,b){var c;c=b&&a.object?a.object.name?a.object.name:a.object.mnemonic:a.destination&&a.destination.mnemonic?a.destination.mnemonic:"point";c=v.substitute(A.confirmDeleteX,[c||
"point"]);var d=new u;null===this._confirmDialog?this._confirmDialog=new L({title:A.discard,text:c,type:H.types.binaryConfirm}):this._confirmDialog.set("text",c);var f=this._confirmDialog.on("close",q.hitch(this,function(b){switch(b){case H.returnValues.oneOrYes:d.resolve(a);break;case H.returnValues.allOrNo:d.reject(a);break;default:console.error(this.declaredClass+" - _showConfirmDialog(): Unknown choice",b)}f.remove()}));this.own(f);this._confirmDialog.open();return d.promise},_addEmptyRowForAdditionalObjects:function(){if(!this.fixedPointCount&&
!1===b.some(this._gridStore.data,function(a){if(null===a.destination&&null===a.object)return emptyRowIndex=a.associationIndex,!0})){var a=1;0<this._gridStore.data.length&&(a=this._gridStore.data[this._gridStore.data.length-1].associationIndex+1);a=this._createRow(a);a.purpose=this._getPurpose(this._gridStore.data.length,this.columns);this._gridStore.put(a)}},_reindexGrid:function(){var a=[],c=0;b.forEach(this._gridStore.data,q.hitch(this,function(b,d){var f=q.clone(b);0<this.columns&&(f.purpose=this._getPurpose(d,
this.columns));c++;f.object&&(f.object.associationIndex=c);c++;f.destination&&(f.destination.associationIndex=c);f.associationIndex=d+1;a.push(f)}));this._gridStore.setData(a);this._revertGrid()},_getPurpose:function(a,b){if(""===this.purposeMask)return"";var c=this.purposeMask.replace("1","#r#").replace("1","#c#"),d=a%b+1;return c.replace("#r#",Math.floor(a/b)+1).replace("#c#",d)}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/LinkedObjectDndSource":function(){define(["dojo/dnd/Source",
"dojo/_base/declare"],function(p,m){return m("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/LinkedObjectDndSource",p,{isSource:!1,accept:["navGroupPoint"],onDrop:function(k,h,g){}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationPropertiesTab":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/text!./templates/AnimationPropertiesTab.html ../../_NodePositioningViewMixin webview/features/animations/AnimationSelector".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return g("webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationPropertiesTab",[m,p,k,t],{_currentHeight:null,_currentWidth:null,navigationGroupsStrings:r,templateString:b,webviewStrings:f,postCreate:function(){this.inherited(arguments);this._changeListeners=[];this.own(c(this._animationSelector,"animationSelected",d.hitch(this,this._onChangedAnimation)));this._animationSelector.initialize();this.afterInitialize()},_setAnimationNameAttr:function(b){this._setAnimationNameLabel(b);
this._animationSelector.selectExistingAnimation(b)},_setAspectLockedAttr:function(b){l.toggle(this.lockIcon,"locked",b);this._set("aspectLocked",b);this._aspectLockedListener||(this._aspectLockedListener=this.watch("aspectLocked",d.hitch(this,function(b,a,c){this.onChangedProperty({property:b,value:c,originalValue:a})})),this._changeListeners.push(this._aspectLockedListener))},onChangedAnimation:function(b){},onDeleteNodeClicked:function(){},onChangedProperty:function(b){},onChangedPositioning:function(b){},
enableChangeListeners:function(){this.removeChangeListeners();this._changeListeners=[this.heightInput.watch("value",d.hitch(this,function(b,c,a){this.heightInput.isValid()&&this._onHeightChanged(a)})),this.widthInput.watch("value",d.hitch(this,function(b,c,a){this.widthInput.isValid()&&this._onWidthChanged(a)})),this.positionX.watch("value",d.hitch(this,function(b,c,a){if(this.positionX.isValid())this.onChangedPositioning()})),this.positionY.watch("value",d.hitch(this,function(b,c,a){if(this.positionY.isValid())this.onChangedPositioning()})),
this.watch("aspectLocked",d.hitch(this,function(b,c,a){this.onChangedProperty({property:b,value:a,originalValue:c})}))]},syncProperties:function(b){if(b){this.removeChangeListeners();var c={aspectLocked:this.aspectLocked};c.positioningData=this.get("positioningData");c=d.mixin(c,b);this.set(c);this.enableChangeListeners()}},_onChangedAnimation:function(b){b&&(b.originalName=this._getAnimationNameLabel()||"",b.originalName.toLowerCase()!==b.name.toLowerCase()&&(this._setAnimationNameLabel(b.name),
this.onChangedAnimation(b)))},_onHeightChanged:function(b){this.aspectLocked?this._currentHeight!==b&&(this._currentWidth=b=Math.floor(b*this.aspectRatio),this.widthInput.set("value",b),this.onChangedPositioning()):(this.set("aspectRatio",this.widthInput.get("value")/b),this.onChangedPositioning())},_onWidthChanged:function(b){this.aspectLocked?this._currentWidth!==b&&(this._currentHeight=b=Math.floor(b/this.aspectRatio),this.heightInput.set("value",b),this.onChangedPositioning()):(this.set("aspectRatio",
b/this.heightInput.get("value")),this.onChangedPositioning())},_getAnimationNameLabel:function(){return this._animationName.innerHTML},_setAnimationNameLabel:function(b){this._animationName.innerHTML=b},removeChangeListeners:function(){this._changeListeners&&(h.forEach(this._changeListeners,function(b){b.remove()}),this._changeListeners=[]);this._aspectLockedListener&&(this._aspectLockedListener=null)},_onToggleAspectLock:function(){this.set("aspectLocked",!this.aspectLocked)},destroy:function(){this.removeChangeListeners();
this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/_NodePositioningViewMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(p,m){return p("webview/features/navigationGroups/dialogs/_NodePositioningViewMixin",[],{_getPositioningDataAttr:function(){return{x:this.positionX.get("value"),y:this.positionY.get("value"),w:this.widthInput.get("value"),h:this.heightInput.get("value")}},_setPositioningDataAttr:function(k){this.positionX.set("value",k.x);this.positionY.set("value",
k.y);this.widthInput.set("value",k.w);this.heightInput.set("value",k.h)},afterInitialize:function(){this.positionX.validator=m.hitch(this,this._xPositionValidator);this.positionY.validator=m.hitch(this,this._yPositionValidator);this.widthInput.validator=m.hitch(this,this._widthValidator);this.heightInput.validator=m.hitch(this,this._heightValidator)},_heightValidator:function(k){var h=!1;k=Number(k);var g=Number(this.positionY.get("value"))+k;!isNaN(g)&&this.backgroundDimensions&&(h=0<k&&g<=this.backgroundDimensions.height);
return h},_widthValidator:function(k){var h=!1;k=Number(k);var g=Number(this.positionX.get("value"))+k;!isNaN(g)&&this.backgroundDimensions&&(h=0<k&&g<=this.backgroundDimensions.width);return h},_xPositionValidator:function(k){var h=!1;k=Number(k);!isNaN(k)&&this.backgroundDimensions&&(h=0<=k&&k<=this.backgroundDimensions.width);return h},_yPositionValidator:function(k){var h=!1;k=Number(k);!isNaN(k)&&this.backgroundDimensions&&(h=0<=k&&k<=this.backgroundDimensions.height);return h}})})},"webview/features/animations/AnimationSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/AnimationSelector.html webview/xhrEnhanced webview/crossCutting/forms/fileUploader/FileUploader".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return g("webview/features/animations/AnimationSelector",[m,p,k],{acceptedFiles:".rca",animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation/",navigationGroupsStrings:r,templateString:q,thumbnailPath:"/_thumbnail.png",webviewStrings:f,postCreate:function(){this.inherited(arguments);this.own(c(this._animationUploader,"uploadComplete",d.hitch(this,this._onUploadComplete)),c(this._existingAnimationSelector,"change",d.hitch(this,this._onExistingSelected)),c(this._existingAnimationSelector.textbox,
"click",d.hitch(this,this._onClickExistingSelector)));this._existingAnimationStore=new t(new b({idProperty:"value"}));this._existingAnimationSelector.set("store",this._existingAnimationStore);this._animationUploader.getErrorMessage=d.hitch(this,this.getErrorMessage)},getErrorMessage:function(a){return a&&"Invalid file name."===a.errorMessage?this.navigationGroupsStrings.animations.invalidRcaName:this.navigationGroupsStrings.animations.invalidRca},initialize:function(){!0!==this.initialized&&(this._animationUploader.clear(),
this._loadExistingAnimations(),this.initialized=!0)},onAnimationSelected:function(a){},selectExistingAnimation:function(a){var b=!this._isUploadedAnimation(a);b&&this._animationUploader.set("value",null);this._existingRadioButton.set("checked",b);this._loadExistingAnimations().then(d.hitch(this,function(){this._existingAnimationSelector.set("value",a.toLowerCase());this._existingAnimationSelector.set("disabled",!b)}))},_clearExistingAnimationSelector:function(){this._existingAnimationStore.setData([]);
this._existingAnimationSelector.set("value",null)},_existingSelected:function(){this._animationUploader.set("value",null);this._animationUploader.set("disabled",!0);this._onAnimationSelected(this._existingAnimationSelector.get("value"));this._loadExistingAnimations().then(d.hitch(this,function(){this._existingAnimationSelector.set("disabled",!1)}))},_isUploadedAnimation:function(a){var b=this._animationUploader.get("value");return b&&b.toLowerCase()===a.toLowerCase()},_loadExistingAnimations:function(){this.loadExistingDeferred&&
this.loadExistingDeferred.isCanceled()&&this.loadExistingDeferred.cancel();this.loadExistingDeferred=u.get(this.animationFilesPath,{handleAs:"json",preventCache:!0});this.own(this.loadExistingDeferred);this.loadExistingDeferred.then(d.hitch(this,this._onLoadExistingAnimations),d.hitch(this,function(a){this._onLoadExistingAnimationFailure();console.error(a);this.loadExistingDeferred=null}));return this.loadExistingDeferred},_onAnimationSelected:function(a){var b=null;a&&(b={name:a,previewPath:this.animationFilesPath+
a+this.thumbnailPath});this.onAnimationSelected(b)},_onClickExistingSelector:function(){var a=this._existingAnimationSelector.get("value"),b=0;a&&(b=1+this._existingAnimationStore.index[a]);(a=this._existingAnimationSelector.store.data[b])||(a=this._existingAnimationSelector.store.data[0]);this._existingAnimationSelector.set("value",a.value)},_onExistingSelected:function(a){a=this._existingAnimationStore.query({value:a})[0].name;this._onAnimationSelected(a)},_onLoadExistingAnimations:function(a){a&&
0<a.length?(this._existingAnimationStore.setData([]),h.forEach(a,d.hitch(this,function(a){this._existingAnimationStore.put({name:a,value:a.toLowerCase()})})),this._setExistingAnimationRadioButtonDisabled(!1)):this._onLoadExistingAnimationFailure();this.loadExistingDeferred=null},_onLoadExistingAnimationFailure:function(){this._uploadRadioButton.set("checked",!0);this._uploadSelected();this._setExistingAnimationRadioButtonDisabled(!0);this._clearExistingAnimationSelector()},_onUploadComplete:function(a){this._loadExistingAnimations().then(d.hitch(this,
function(){this._existingAnimationSelector.set("value",(a||"").toLowerCase())}))},_setExistingAnimationRadioButtonDisabled:function(a){this._existingRadioButton.set("disabled",a);l.toggle(this._existingRadioButtonLabel,"disabled",a)},_uploadSelected:function(){this._existingAnimationSelector.set("disabled",!0);this._animationUploader.set("disabled",!1);var a=this._animationUploader.get("value");a&&this._onAnimationSelected(a)}})})},"webview/features/navigationGroups/dialogs/editAnimationContent/EditAnimationPresenter":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/on dojox/html/entities webview/crossCutting/errors/_OnErrorMixin webview/util/Debounce ../_NodePositioningMixin".split(" "),
function(p,m,k,h,g,d,l,f,r){return k("webview/features/navigationGroups/dialogs/EditAnimationContent/EditAnimationPresenter",[p,r,l],{BATCH_UPDATE_DEBOUNCE:250,animationNodeUpdater:null,_isClosed:!0,_setViewAttr:function(c){this._removeViewListeners();this._set("view",c);this._viewListeners=[g(c,"changedAnimation",h.hitch(this,this._onChangedAnimation)),g(c,"changedAttribute",h.hitch(this,this._onChangedAttribute)),g(c,"changedClickDestinations",h.hitch(this,this._onChangedClickDestinations)),g(c,
"changedLinkedObjects",h.hitch(this,this._onChangedLinkedObjects)),g(c,"changedLinkedObjectsAndDestinations",h.hitch(this,this._onChangedLinkedObjectsAndDestinations)),g(c,"changedPositioning",h.hitch(this,this._onChangedPositioning)),g(c,"changedProperty",h.hitch(this,this._onChangedProperty)),g(c,"close",h.hitch(this,this._onClose)),g(c,"deleteNode",h.hitch(this,this._onNodeDeleted))]},initialize:function(c,b,d){this._isClosed=!1;this.backgroundDimensions=d;this.animationNode=b;this.groupId=c;this.nodeId=
b.nodeId;this.measuredFullSizeDimensions=b.get("measuredFullSizePxDimensions");this.view.set("initializing",!0);this._loadConfiguration()},isOpen:function(){return!1===this._isClosed},onClose:function(){},syncEditor:function(c){c&&(c.updatedProperties&&c.updatedProperties.animationName?this._loadConfiguration():(this._syncAttributes(c.attributes),this._syncObjects(c),this._syncProperties(c.updatedProperties)))},_getEmptyChangeData:function(){return{updatedNode:{nodeId:this.nodeId},originalNode:{nodeId:this.nodeId}}},
_loadConfiguration:function(){this.animationNodeUpdater.getConfigurationDataForNode(this.groupId,this.nodeId).then(h.hitch(this,this._onLoadedConfigurationData))},_mergeChangeData:function(c,b){var d={},f=c.originalNode.linkedObjects,g=c.originalNode.clickDestinations,a=c.originalNode.attributes||{},l=c.updatedNode.attributes||{};d.updatedNode=h.mixin(c.updatedNode,b.updatedNode);d.originalNode=h.mixin(h.clone(b.originalNode),c.originalNode);b.updatedNode.linkedObjects&&(d.updatedNode.linkedObjects=
b.updatedNode.linkedObjects,d.originalNode.linkedObjects=f?f:b.originalNode.linkedObjects);b.updatedNode.clickDestinations&&(d.updatedNode.clickDestinations=b.updatedNode.clickDestinations,d.originalNode.clickDestinations=g?g:b.originalNode.clickDestinations);d.updatedNode.attributes=h.mixin(l,b.updatedNode.attributes||{});d.originalNode.attributes=h.mixin(b.originalNode.attributes||{},a);return d},_onChangedAnimation:function(c){c.originalName!==c.name&&(this._sendNodeUpdate({swappedAnimation:!0,
updatedNode:{nodeId:this.nodeId,animationName:c.name||""},originalNode:{nodeId:this.nodeId,animationName:c.originalName||""}}),this.animationNode.set("animationName",c.name))},_onChangedAttribute:function(c){var b=h.clone(c);b.value=c.originalValue;delete c.originalValue;var d=this._getEmptyChangeData();d.updatedNode.attributes={};d.originalNode.attributes={};d.updatedNode.attributes[c.attributeName]=c;d.originalNode.attributes[c.attributeName]=b;"tableColumns"===c.attributeName&&(this.view._animationObjects.columns=
c.value,this.view._animationObjects._reindexGrid());this._sendNodeUpdate(d);this.animationNode.updateAttributes([c])},_onChangedLinkedObjectsAndDestinations:function(c,b,d){var f=this._getEmptyChangeData();f.updatedNode.linkedObjects=c.updated;f.originalNode.linkedObjects=c.original;f.updatedNode.clickDestinations=b.updated;f.originalNode.clickDestinations=b.original;f.updatedNode.mapLocations=d.value;f.originalNode.mapLocations=d.originalValue;this._sendNodeUpdate(f)},_onChangedClickDestinations:function(c){var b=
this._getEmptyChangeData();b.updatedNode.clickDestinations=c.updated;b.originalNode.clickDestinations=c.original;this._sendNodeUpdate(b)},_onChangedLinkedObjects:function(c){var b=this._getEmptyChangeData();b.updatedNode.linkedObjects=c.updated;b.originalNode.linkedObjects=c.original;this._sendNodeUpdate(b)},_onChangedPositioning:function(){var c=this._getEmptyChangeData(),b=this.view.get("positioningData"),d=this._getUpdatedPositioningData(b),f=this._getRelativePositioning(this.originalPositioning),
g=Object.keys(d);0!==g.length&&(m.forEach(g,h.hitch(this,function(a){c.updatedNode[a]=d[a];c.originalNode[a]=f[a]})),this._sendNodeUpdate(c),this.originalPositioning=b,this.animationNode.set(d))},_onChangedProperty:function(c){var b=this._getEmptyChangeData();b.updatedNode[c.property]=c.value;b.originalNode[c.property]=c.originalValue;this._sendNodeUpdate(b);this.animationNode.set(c.property,c.value)},_onClose:function(){this._isClosed=!0;this.onClose()},_onError:function(c){c&&"cancel"===c.dojoType||
(this.inherited(arguments),this._onClose())},_onLoadedConfigurationData:function(c){if(c.nodeConfiguration){try{this._setAnimationProperties(c.nodeConfiguration);var b=c.dialogConfig;b?(this._setAnimationAttributes(b,c.nodeConfiguration),this._setAnimationLinkedObjects(b,c.nodeConfiguration),this._setAnimationHelpContent(b)):c.errorMessage&&this._setNoDialogConfig(c.errorMessage)}catch(t){console.error(t)}this.view.set("initializing",!1)}else console.error(c),this._onError(c)},_onNodeDeleted:function(){this.builderStateManager.set("userEditInProgress",
!0);this.animationNodeUpdater.deleteNodes([{nodeId:this.animationNode.nodeId,animationName:this.animationNode.animationName,aspectLocked:this.animationNode.aspectLocked,height:this.animationNode.height,positioningLeft:this.animationNode.positioningLeft,positioningTop:this.animationNode.positioningTop,width:this.animationNode.width}]).always(h.hitch(this.builderStateManager,this.builderStateManager.set,"userEditInProgress",!1));this.animationNode.destroy();this.view.onClose()},_queueBatchUpdate:function(){this._batchDebounce=
f(this._batchDebounce,h.hitch(this,this._sendBatchedUpdates),this.BATCH_UPDATE_DEBOUNCE)},_sendBatchedUpdates:function(){this.builderStateManager.set("userEditInProgress",!0);if(this._updateDeferred&&!this._updateDeferred.isFulfilled())this._queueBatchUpdate();else{this._batchedUpdateData.originalNode.attributes&&(this._batchedUpdateData.originalNode.attributes=Object.values(this._batchedUpdateData.originalNode.attributes));this._batchedUpdateData.updatedNode.attributes&&(this._batchedUpdateData.updatedNode.attributes=
Object.values(this._batchedUpdateData.updatedNode.attributes));var c=this._batchedUpdateData.swappedAnimation;this._updateDeferred=this.animationNodeUpdater.updateNodes([this._batchedUpdateData]);this._updateDeferred.always(h.hitch(this,function(){this.builderStateManager.set("userEditInProgress",!1);c&&this._loadConfiguration()}));this._batchedUpdateData=null}},_sendNodeUpdate:function(c){this._batchedUpdateData=this._batchedUpdateData?this._mergeChangeData(this._batchedUpdateData,c):c;this._queueBatchUpdate()},
_setAnimationAttributes:function(c,b){for(var f in b.animationAttributes){var g=b.animationAttributes[f];"string"===typeof g&&(g=d.decode(g),b.animationAttributes[f]=g)}f={animationName:b.animationName,attributeValues:b.animationAttributes||{}};f.supportedAttributes=c.dialogAttributes||[];this.view.set("attributesData",f)},_setAnimationHelpContent:function(c){this.view.set("helpContent",c.helpContent)},_setAnimationLinkedObjects:function(c,b){var d={fixedPointCount:!0===c.fixedPointCount,points:c.points||
[],linkedObjects:b.linkedObjectsMap,clickDestinations:b.clickDestinationsMap||[],mapLocations:b.mapLocations},f=0;d.fixedPointCount||(f=1,m.forEach(c.dialogAttributes,function(b){"tableColumns"===b.attributeName&&(f=b.value)}),this.view._animationObjects.purposeMask=d.points[0].purpose,this.view._animationObjects.columns=f);this.view.set("linkedObjectsData",d)},_setAnimationProperties:function(c){this.originalPositioning=this._getAbsolutePositioning(c);this.view.set("animationProperties",{backgroundDimensions:this.backgroundDimensions,
animationName:c.animationName,aspectLocked:c.aspectLocked,aspectRatio:this.originalPositioning.w/this.originalPositioning.h,positioningData:this.originalPositioning})},_setNoDialogConfig:function(c){this.view.set("helpContent",c);c={error:c};this.view.set("attributesData",c);this.view.set("linkedObjectsData",c)},_syncAttributes:function(c){c&&(this.animationNode.updateAttributes(c),this.view.syncAttributes(c))},_syncObjects:function(c){var b=null;c.updatedProperties&&(b=c.updatedProperties.mapLocations||
null);if(c.clickDestinations||c.linkedObjects||b){var d={};c.clickDestinations&&(d.clickDestinations=c.clickDestinations);c.linkedObjects&&(d.linkedObjects=c.linkedObjects);b&&(d.mapLocations=b.split(";"));this.view.syncObjects(d)}},_syncProperties:function(c){if(c&&0<Object.keys(c).length){c=h.clone(c);delete c.mapLocations;var b={},d={};m.forEach(["height","width","positioningLeft","positioningTop"],function(b){"undefined"!==typeof c[b]&&(d[b]=c[b])});var f=this._getRelativePositioning(this.view.get("positioningData")),
f=h.mixin(f,d);this.animationNode.set(f);"undefined"!==typeof c.aspectLocked&&(b.aspectLocked=c.aspectLocked,this.animationNode.set("aspectLocked",c.aspectLocked));b.positioningData=this._getAbsolutePositioning(f);this.view.syncProperties(b)}},_removeViewListeners:function(){this._viewListeners&&0<this._viewListeners.length&&(m.forEach(this._viewListeners,function(c){c.remove()}),this._viewListeners=null)},destroy:function(){this._removeViewListeners();this.inherited(arguments)}})})},"webview/features/navigationGroups/dialogs/_NodePositioningMixin":function(){define(["dojo/_base/declare"],
function(p){return p("webview/features/navigationGroups/dialogs/_NodePositioningMixin",[],{_getAbsolutePositioning:function(m){this.view.set("backgroundDimensions",this.backgroundDimensions);return{x:Math.round(this.backgroundDimensions.width*(m.positioningLeft||0)/100),y:Math.round(this.backgroundDimensions.height*(m.positioningTop||0)/100),w:Math.round(this.backgroundDimensions.width*(m.width||0)/100||this.measuredFullSizeDimensions.x),h:Math.round(this.backgroundDimensions.height*(m.height||0)/
100||this.measuredFullSizeDimensions.y)}},_getRelativePositioning:function(m){return{positioningLeft:m.x/this.backgroundDimensions.width*100,positioningTop:m.y/this.backgroundDimensions.height*100,width:m.w/this.backgroundDimensions.width*100,height:m.h/this.backgroundDimensions.height*100}},_getUpdatedPositioningData:function(m){var k=this._getRelativePositioning(m);this.originalPositioning.x===m.x&&delete k.positioningLeft;this.originalPositioning.y===m.y&&delete k.positioningTop;this.originalPositioning.w===
m.w&&delete k.width;this.originalPositioning.h===m.h&&delete k.height;return k},_setPositioningFields:function(m){this.originalPositioning=m=this._getAbsolutePositioning(m);this.view.set("positioningData",m)}})})},"webview/features/navigationGroups/dialogs/insertAnimationContent/InsertAnimationContent":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dnd/Source dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/text!./templates/InsertAnimationContent.html ../../groupRendering/groupNodes/AnimationNodeOverlay webview/features/animations/AnimationSelector".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return g("webview/features/navigationGroups/dialogs/insertAnimationContent/InsertAnimationContent",[m,p,k],{navigationGroupsStrings:b,templateString:q,rcStrings:r,webviewStrings:c,postCreate:function(){this.inherited(arguments);this._animationSelector.initialize();this.own(t(this._animationSelector,"animationSelected",d.hitch(this,this._onAnimationSelected)));this._createDnDSource()},onClose:function(){},_DnDSourceItemCreator:function(a){return{node:a.domNode,
data:a,type:["navGroupPoint"]}},_createDndPreviewAvatar:function(){this._previewAvatar=new u({aspectLocked:!0,nodeId:null,renderType:2,newAnimationNode:!0});this._DnDSource.insertNodes(!1,[this._previewAvatar])},_createDnDSource:function(){this._DnDSource=new h(this._previewContainer,{creator:d.hitch(this,this._DnDSourceItemCreator),accept:[],copyOnly:!0,delay:0,autoSync:!0,isSource:!0,selfAccept:!1,singular:!0,generateText:!1});this._createDndPreviewAvatar()},_onAnimationSelected:function(a){a&&
a.name?(this.selectedAnimation=a.name,f.remove(this._previewContainer,"hidden")):(this.selectedAnimation=null,f.add(this._previewContainer,"hidden"));this._previewAvatar.set("animationName",this.selectedAnimation)},_onClose:function(){this.onClose()}})})},"webview/features/navigationGroups/groupRendering/groupNodes/AnimationNodeOverlay":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!webview/nls/navigationGroups dojo/on dojo/text!./templates/AnimationNodeOverlay.html require ./_BasicNodeMixin ./_ResizableNodeMixin ./../../../animations/AnimationDefaultConfigProvider".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){return h("webview/features/navigationGroups/groupNode/AnimationNodeOverlay",[m,p,k,q,u],{templateString:b,animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation/",navGroupStrings:r,thumbnailPath:"/_thumbnail.png",genericThumbnailPath:null,constructor:function(){this.inherited(arguments);this.genericThumbnailPath=t.toUrl("webview")+"/themes/rcblack/images/RCGFX.png"},postCreate:function(){this.inherited(arguments);this.own(c(this.editIconNode,"click",g.hitch(this,
this.emit,"editConfigurationClicked")),this.watch("aspectLocked",g.hitch(this,function(a,b,c){this._disableResizeHandles();this._enableResizeHandles()})),c(this.thumbnail,"error",g.hitch(this,function(){d.set(this.thumbnail,"src",this.genericThumbnailPath)})));l.toggle(this.thumbnail,"existing-node",!0!==this.newAnimationNode);l.toggle(this.domNode,"new-animation-node",!0===this.newAnimationNode)},_setAnimationNameAttr:function(b){if(b){var c=d.get(this.thumbnail,"src"),f=this.get("animationName");
c&&f===b||(d.set(this.thumbnail,"src",this.animationFilesPath+b+this.thumbnailPath),this.loadingDefaultAnimationConfig=null);!this.newAnimationNode||this.isAvatar||this.loadingDefaultAnimationConfig||(l.add(this.domNode,"fetching-attributes"),this.loadingDefaultAnimationConfig=a.getDefaultConfig(b),this.loadingDefaultAnimationConfig.then(g.hitch(this,function(a){this._set("defaultConfig",a);l.remove(this.domNode,"fetching-attributes")})))}else d.set(this.thumbnail,"src",null),l.remove(this.domNode,
"fetching-attributes"),this.loadingDefaultAnimationConfig=null;this._set("animationName",b)},_setDisplayIndexAttr:function(a){f.set(this.domNode,{"z-index":a})},_setHeightAttr:function(a){f.set(this.domNode,{height:a+"%"})},_setHeightPxAttr:function(a){f.set(this.domNode,{height:a+"px"})},_setNewAnimationNodeAttr:function(a){this._set("newAnimationNode",a)},_setWidthAttr:function(a){f.set(this.domNode,{width:a+"%"})},_setWidthPxAttr:function(a){f.set(this.domNode,{width:a+"px"})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/_BasicNodeMixin":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-style dojo/Evented ./_NodeActionsMixin ./_ResizableNodeMixin".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return h("webview/features/navigationGroups/GroupNodes/_BasicNodeMixin",[r,f],{_setDisplayIndexAttr:function(b){this.displayIndexNode.innerText=b?b.toString():"0";l.set(this.domNode,{"z-index":b})},_setHintTextAttr:function(b){g.set(this.domNode,"title",b)},_setHeightAttr:function(b){l.set(this.domNode,{height:0!==b?b+"%":null})},_setInFaultAttr:function(b){d.toggle(this.faultIconNode,"hidden",!b)},_setInManualAttr:function(b){d.toggle(this.manualHandNode,"hidden",!b)},
_setSelectedForEditAttr:function(b){d.toggle(this.domNode,"selected-for-edit",b)},_getMeasuredFullSizePxDimensionsAttr:function(){return{x:this.domNode.offsetWidth/this.scaleFactorManager.widthScaleFactor,y:this.domNode.offsetHeight/this.scaleFactorManager.heightScaleFactor}},_setPositioningLeftAttr:function(b){l.set(this.domNode,{left:b+"%"});this._set("positioningLeft",b)},_setPositioningTopAttr:function(b){l.set(this.domNode,{top:b+"%"});this._set("positioningTop",b)},_setWidthAttr:function(b){l.set(this.domNode,
{width:0!==b?b+"%":null})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/_NodeActionsMixin":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/has dojo/on dojo/topic rc/_base/util rc/util/encoding/base16 rc/util/encoding/base64 webview/crossCutting/topicEvents webview/crossCutting/windowUtil ../../dialogs/editObjectDialog/_DialogPresenter ../../dialogs/editObjectDialog/_DialogRequests".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return h("webview/features/navigationGroups/GroupNodes/_NodeActionsMixin",[],{hasLink:!1,_clickHandler:null,_setBuilderStateManagerAttr:function(a){this.editModeListener&&this.editModeListener.remove();this.editModeListener=a.watch("editMode",g.hitch(this,function(a,b,c){this._onChangeEditMode(c)}));this.own(this.editModeListener);this._onChangeEditMode(a.get("editMode"));this._set("builderStateManager",a)},_setEditableAttr:function(b){d.toggle(this.domNode,
"editable-node",b);b?this._setClickHandler(function(b){this.editDialogPresenter||(this.editDialogPresenter=new a({requestManager:new n({nodeId:this.nodeId,site:this.builderStateManager.get("siteId")})}),this.own(this.editDialogPresenter));r.publish(q.groupNodeClicked,this.editDialogPresenter);b.stopPropagation()}):this.hasLink||this._clearClickHandler();this._set("editable",b)},_setActionLinkAttr:function(a){var b=null!=a;d.toggle(this.domNode,"linkable-node",b);b?this._setClickHandler(function(b){a.hash?
this._goToObject(a,b):this._goToUrl(a.url,b);b.stopPropagation()}):this.editable||this._clearClickHandler();this._set("hasLink",b)},_clearClickHandler:function(){this._clickHandler&&(this._clickHandler.remove(),this._clickHandler=null)},_createClickToDialogPresenter:function(b){var c=null;this.builderStateManager&&(c=this.builderStateManager.get("siteId"));return new a({requestManager:new n({nodeId:this.nodeId,clickDestAssocIndex:b,site:c,_editableDataPath:"NavigationGroupClickDestEditableObjectData/",
_objectUpdatePath:"NavigationGroupClickDestEditObject/",_relinquishPath:"NavigationGroupRelinquishClickDestObject/"})})},_goToObject:function(a,d){var f=a.hash?a.hash:a.Hash;test.mode<test.PROXY_LIVE&&(f=t.encode(b.strToHex(f)));var g=u.getFullPath();"Admin"===rc.pathInfo.site&&this.builderStateManager&&(g=g.replace(/admin\/$/ig,this.builderStateManager.get("siteUrl")+"/"));if(a.systemId||a.SystemId)g+=a.systemId?a.systemId:a.SystemId+"/";c.gotoExternalLink(g+("#"+f),d)},_goToUrl:function(a,b){a=
decodeURIComponent(a);c.gotoExternalLink(a,b)},_onChangeEditMode:function(a){a?this._clearClickHandler():this._clickHandlerFunction&&this._setClickHandler(this._clickHandlerFunction)},_openClickDestination:function(a){if(this.clickDestinationMap.hasOwnProperty(a)){var b=this.clickDestinationMap[a];null===b===!0?(a=this._createClickToDialogPresenter(a),r.publish(q.groupNodeClicked,a)):b.Hash?this._goToObject(b):this._goToUrl(b.Url)}},_updateAnimationPoint:function(b){var c=null;this.builderStateManager&&
(this.builderStateManager.set("userEditInProgress",!0),c=this.builderStateManager.get("siteId"));for(var d=1;d<this.gelData.length;d++)this.gelData[d].mne===b.mne&&this.gelData[d].systemId===b.systemId&&(this.gelData[d].gValue=b.gValue);b=new a({animationGel:b,requestManager:new n({nodeId:this.nodeId,clickDestAssocIndex:b.mne,_objectUpdatePath:"NavigationGroupAnimationEditObject/",site:c})});this.own(b);r.publish(q.animationEdit,b)},_setClickHandler:function(a){this._clearClickHandler();this._clickHandlerFunction=
a;this.builderStateManager.get("editMode")||(this._clickHandler=f(this.domNode,"click",g.hitch(this,a)))},destroy:function(){this._clearClickHandler();this.inherited(arguments)}})})},"webview/crossCutting/windowUtil":function(){define(function(){return{getFullPath:function(){return window.location.origin+window.location.pathname},open:function(p){window.open(p)},openNewTab:function(p){window.open(p,"_blank")}}})},"webview/features/navigationGroups/dialogs/editObjectDialog/_DialogPresenter":function(){define(["dijit/_WidgetBase",
"dojo/_base/declare","dojo/topic","webview/crossCutting/topicEvents"],function(p,m,k,h){return m("webview/features/navigationGroups/dialog/editObjectDialog/_DialogPresenter",[p],{_view:null,animationGel:null,EDITOR_TYPES:{NUMERIC:0,DIGITAL:1,TEXT_FIELD:2,TEXT_BLOB:3},RESULT_CODE_SUCCESS:1,initialize:function(g){this._view=g;this.requestManager.getNodesEditableData(this,this._onLoadedEditableData,this._onError);this._view.show()},initializeForAnimation:function(g){this._view=g;this.sendDataForAnimation()},
relinquishIndexes:function(g){this.requestManager.relinquishIndexes({updatedObject:{mnemonic:this.objectValues.mnemonic,systemId:this.objectValues.systemId},relinquishedIndexes:g},this,this._onRelinquishedPriorityArray,this._onError)},reloadPriorityArray:function(){this.requestManager.getNodesEditableData(this,this._onLoadedPriorityArrayData,this._onError)},sendData:function(){if(this._view.validate()){var g={reason:this._view.get("reason"),updatedObject:{mnemonic:this.objectValues.mnemonic,systemId:this.objectValues.systemId},
objectValues:{value:this._view.get("objectValue"),autoManualState:this._view.get("valueOverrideState"),timedOverride:this._view.get("timedOverride")}};this.requestManager.sendData(g,this,this._onObjectUpdateData,this._onError)}},sendDataForAnimation:function(){var g=this._validateAnimationValue();"number"===typeof g&&(g=g.toString());this.requestManager.sendData({reason:"Modified by interactive HTML animation",updatedObject:{mnemonic:this.animationGel.mne,systemId:this.animationGel.systemId},objectValues:{value:g,
autoManualState:null,timedOverride:null}},this,this._onAnimationObjectUpdateData,this._onError)},_onError:function(g){this._view.onError(g)},_onAnimationObjectUpdateData:function(g){this._onObjectUpdateData(g);k.publish(h.animationEditClose)},_onLoadedEditableData:function(g){g.objectValues?g.objectValues.errorMessage?(this._view.onError(g.objectValues),this._view.hide()):(this._view.set("objectName",g.descriptor),this._view.set("reason",""),this._setObjectValues(g.objectValues),this._setReasonRequired(g.requiresReason),
this._view.toggleOverrideOptionsEnabled(g.canEditOverrideOptions),this._view.set("initializing",!1)):(this._view.onError(g),this._view.hide())},_onLoadedPriorityArrayData:function(g){if(g.objectValues)this._view.set("priorityArray",g.objectValues.priorityArray),!0===this._reloadAfterSave&&(this._view.onSuccess(),this._reloadAfterSave=!1);else this._view.onError(g)},_onObjectUpdateData:function(g){if(g.resultCode!==this.RESULT_CODE_SUCCESS)this._view.onError(g);else this._view.onSuccess(),this._view.hide()},
_onRelinquishedPriorityArray:function(g){if(g.resultCode!==this.RESULT_CODE_SUCCESS)this._view.onError(g);else this._reloadAfterSave=!0,this.reloadPriorityArray()},_setEditorType:function(g,d,h){switch(g){case this.EDITOR_TYPES.DIGITAL:this._view.showDigitalEditor(d,h);break;case this.EDITOR_TYPES.TEXT_FIELD:this._view.showTextFieldEditor(d);break;case this.EDITOR_TYPES.TEXT_BLOB:this._view.showTextBlobEditor(d);break;default:1<d.split(":").length?this._view.showTimeEditor(d):this._view.showNumericEditor(d)}},
_setObjectValues:function(g){this.objectValues=g;g.priorityArray&&0<g.priorityArray.length?this._view.set("priorityArray",g.priorityArray):this._view.set("priorityArray",null);isNaN(g.overrideValue)?this._view.toggleOverrideOptionsVisible(!1):(this._view.toggleOverrideOptionsVisible(!0),this._view.set("overrideOptions",g.overrideOptions),this._view.set("selectedOverrideOption",Number(g.overrideValue)),isNaN(g.timedOverride)||this._view.set("timedOverride",g.timedOverride));this._setEditorType(g.editorType,
g.value,g.digitalStates)},_setReasonRequired:function(g){g=g||!1!==rc.session.enforceChangeApproval;this._view.set("reasonRequired",g)},_validateAnimationValue:function(){var g=this.animationGel.gValue;if(0==this.animationGel.bAnalog&&this.animationGel.hasOwnProperty("strMSString")&&this.animationGel.strMSString.length){var d=this.animationGel.strMSString.split(";");if(0<d.length)for(var h=0;h<d.length;h++)if(d[h]==g){g=h;break}}return g}})})},"webview/features/navigationGroups/dialogs/editObjectDialog/_DialogRequests":function(){define(["dijit/_WidgetBase",
"dojo/_base/declare","dojo/_base/lang","webview/changeApproval/_ApprovalSessionMixin","webview/xhrEnhanced"],function(p,m,k,h,g){return m("webview/features/navigationGroups/dialog/editObjectDialog/_DialogRequests",[p,h],{_editableDataPath:"NavigationGroupEditableObjectData/",_objectUpdatePath:"NavigationGroupEditObject/",_relinquishPath:"NavigationGroupRelinquishObject/",nodeId:null,clickDestAssocIndex:null,site:null,getNodesEditableData:function(d,h,f){this._editableDataRequest&&this._editableDataRequest.cancel();
var l={handleAs:"json",preventCache:!0};null!==this.clickDestAssocIndex&&(l.query={clickDestAssocIndex:this.clickDestAssocIndex});return this._editableDataRequest=g.get(this._editableDataPath+this.nodeId,l).then(k.hitch(d,h),k.hitch(d,f))},relinquishIndexes:function(d,h,f,m){this._relinquishRequest&&this._relinquishRequest.cancel();var c={data:JSON.stringify(d)};null!==this.clickDestAssocIndex&&(c.clickDestAssocIndex=this.clickDestAssocIndex);this._validateApprovalSessionWithReason(c).then(k.hitch(this,
function(){this._relinquishRequest=g.post(this._relinquishPath+this.nodeId,{handleAs:"json",data:c}).then(k.hitch(h,f),k.hitch(h,m))}),function(){});return this._relinquishRequest},sendData:function(d,h,f,m){this._sendRequest&&this._sendRequest.cancel();var c={data:JSON.stringify(d)};null!==this.clickDestAssocIndex&&(c.clickDestAssocIndex=this.clickDestAssocIndex);this._validateApprovalSession(c).then(k.hitch(this,function(){this._sendRequest=g.post(this._objectUpdatePath+this.nodeId,{handleAs:"json",
data:c}).then(k.hitch(h,f),k.hitch(h,m))}),function(){});return this._sendRequest},destroy:function(){this._editableDataRequest&&this._editableDataRequest.cancel();this._relinquishRequest&&this._relinquishRequest.cancel();this._sendRequest&&this._sendRequest.cancel()}})})},"webview/features/navigationGroups/groupRendering/groupNodes/_ResizableNodeMixin":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-style dojo/Evented dojo/on dojo/touch ./_NodeActionsMixin".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return g("webview/features/navigationGroups/GroupNodes/_ResizableNodeMixin",[c],{MIN_DIMENSION:25,_enableResizeHandles:function(){this.aspectLocked?(this._resizeHandles=[b(this.sResizePoint,t.press,d.hitch(this,this._resizeNode,"s")),b(this.eResizePoint,t.press,d.hitch(this,this._resizeNode,"e"))],f.add(this.nResizePoint,"hidden"),f.add(this.nwResizePoint,"hidden"),f.add(this.wResizePoint,"hidden"),f.add(this.swResizePoint,"hidden"),f.add(this.seResizePoint,"hidden"),
f.add(this.neResizePoint,"hidden")):(this._resizeHandles=[b(this.nResizePoint,t.press,d.hitch(this,this._resizeNode,"n")),b(this.nwResizePoint,t.press,d.hitch(this,this._resizeNode,"nw")),b(this.wResizePoint,t.press,d.hitch(this,this._resizeNode,"w")),b(this.swResizePoint,t.press,d.hitch(this,this._resizeNode,"sw")),b(this.sResizePoint,t.press,d.hitch(this,this._resizeNode,"s")),b(this.seResizePoint,t.press,d.hitch(this,this._resizeNode,"se")),b(this.eResizePoint,t.press,d.hitch(this,this._resizeNode,
"e")),b(this.neResizePoint,t.press,d.hitch(this,this._resizeNode,"ne"))],f.remove(this.nResizePoint,"hidden"),f.remove(this.nwResizePoint,"hidden"),f.remove(this.wResizePoint,"hidden"),f.remove(this.swResizePoint,"hidden"),f.remove(this.seResizePoint,"hidden"),f.remove(this.neResizePoint,"hidden"));h.forEach(this._resizeHandles,d.hitch(this,function(b){this.own(b)}))},_disableResizeHandles:function(){this._resizeHandles&&this._resizeHandles.length&&h.forEach(this._resizeHandles,function(b){b.remove()});
delete this._resizeHandles},_onChangeEditMode:function(b){this.inherited(arguments);b?this._enableResizeHandles():this._disableResizeHandles()},_onResizing:function(){this.emit("resizing");f.add(this.domNode,"resizing")},_onResized:function(b){this.aspectLocked?this._onResizedWithAspectRatio():this._onResizedWithoutAspectRatio(b);f.remove(this.domNode,"resizing")},_onResizedWithoutAspectRatio:function(b){var a=this._getNodePositionDetails();b.includes("n")||b.includes("s")||(delete a.height,delete this.originalNode.height);
b.includes("n")||(delete a.positioningTop,delete this.originalNode.positioningTop);b.includes("w")||b.includes("e")||(delete a.width,delete this.originalNode.width);b.includes("w")||(delete a.positioningLeft,delete this.originalNode.positioningLeft);this.emit("resized",{originalNode:this.originalNode,updatedNode:a});delete this.originalNode},_onResizedWithAspectRatio:function(){var b=this._getNodePositionDetails();delete b.positioningLeft;delete this.originalNode.positioningLeft;delete b.positioningTop;
delete this.originalNode.positioningTop;this.emit("resized",{originalNode:this.originalNode,updatedNode:b});delete this.originalNode},_getNodePositionDetails:function(){return{nodeId:this.nodeId,width:r.get(this.domNode,"width")/this._parentWidth*100,height:r.get(this.domNode,"height")/this._parentHeight*100,positioningLeft:r.get(this.domNode,"left")/this._parentWidth*100,positioningTop:r.get(this.domNode,"top")/this._parentHeight*100}},_resizeNode:function(c,a){this._onResizing(!0);this._parentWidth=
r.get(this.domNode.parentElement,"width");this._parentHeight=r.get(this.domNode.parentElement,"height");this._widthPx=r.get(this.domNode,"width");this._heightPx=r.get(this.domNode,"height");this._currentBottom=this._parentHeight-r.get(this.domNode,"top")-r.get(this.domNode,"height");this._currentRight=this._parentWidth-r.get(this.domNode,"left")-r.get(this.domNode,"width");this.originalNode=this._getNodePositionDetails();var f=b(window,t.move,d.hitch(this,this._mouseMoving,c,a)),g=b(window,t.release,
d.hitch(this,function(){f.remove();g.remove();this._onResized(c)}))},_getBackgroundSize:function(){return this.scaleFactorManager.backgroundDimensions},isBoundaryValid:function(b,a){switch(b){case "n":return 0<a||0<r.get(this.domNode,"top")-this.nResizePoint.offsetHeight;case "s":return 0>a||this.sResizePoint.offsetHeight+r.get(this.domNode,"height")+r.get(this.domNode,"top")<this.domNode.parentElement.offsetHeight;default:console.error(this.declaredClass+" - isBoundaryValid(): Unknown direction",
b)}},_mouseMoving:function(b,a,c){var f=c.clientX-a.clientX,g=c.clientY-a.clientY,h=this._widthPx,l=this._heightPx,k=this.MIN_DIMENSION,n=d.hitch(this,function(a){a*=this._heightPx/this._widthPx;var b=this._parentHeight-r.get(this.domNode,"top")-this.sResizePoint.offsetHeight;l=Math.max(k,Math.min(a,b));a>b&&(l=void 0);return l}),q=d.hitch(this,function(a){a*=this._widthPx/this._heightPx;var b=this._parentWidth-r.get(this.domNode,"left")-this.eResizePoint.offsetWidth;h=Math.max(k,Math.min(a,b));a>
b&&(h=void 0);return h});a=d.hitch(this,function(){var a=r.get(this.domNode,"height")+r.get(this.domNode,"top")-this.nResizePoint.offsetHeight;l=Math.max(k,Math.min(l-g,a));r.set(this.domNode,{height:l+"px",top:null,bottom:this._currentBottom+"px"})});c=d.hitch(this,function(){var a=this._parentWidth-r.get(this.domNode,"left")-this.eResizePoint.offsetWidth;h=Math.max(k,Math.min(h+f,a));a={width:h+"px"};if(this.aspectLocked){var b=n(h);if(!b)return;a.height=b+"px"}r.set(this.domNode,a)});var m=d.hitch(this,
function(){var a=this._parentHeight-r.get(this.domNode,"top")-this.sResizePoint.offsetHeight;l=Math.max(k,Math.min(l+g,a));a={height:l+"px"};if(this.aspectLocked){var b=q(l);if(!b)return;a.width=b+"px"}r.set(this.domNode,a)}),D=d.hitch(this,function(){var a=r.get(this.domNode,"width")+r.get(this.domNode,"left")-this.wResizePoint.offsetWidth;h=Math.max(k,Math.min(h-f,a));r.set(this.domNode,{width:h+"px",left:null,right:this._currentRight+"px"})});b.includes("n")&&a();b.includes("w")&&D();b.includes("s")&&
m();b.includes("e")&&c()},destroy:function(){this.inherited(arguments);this._disableResizeHandles()}})})},"webview/features/animations/AnimationDefaultConfigProvider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/Deferred","webview/xhrEnhanced"],function(p,m,k,h,g){m=m("webview/features/animations/AnimationDefaultConfigProvider",null,{animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation",getDefaultConfig:function(d){return this._loadConfigFile(d)},_loadConfigFile:function(d){this.configFileLoading&&
!this.configFileLoading.isCanceled()&&this.configFileLoading.cancel();this.requestDeferred=new h;this.configFileLoading=g.get(this.animationFilesPath+"/"+d+"/dialog-config.json",{handleAs:"json",preventCache:!0});this.configFileLoading.then(k.hitch(this,this._parseDefaultConfig),k.hitch(this,function(d){this._onLoadConfigFailure();this.configFileLoading=null}));return this.requestDeferred},_onLoadConfigFailure:function(){this.requestDeferred.resolve(null);this.configFileLoading=null},_parseDefaultConfig:function(d){if(d){var g=
{height:d.Height,width:d.Width,fixedPointCount:d.FixedPointCount,attributes:[],versionId:d.VersionId};(d=d["Custom Attributes"])&&k.isArray(d)&&p.forEach(d,k.hitch(this,function(d){(d=d.Attributes)&&k.isArray(d)&&p.forEach(d,k.hitch(this,function(d){d.variable&&g.attributes.push({attributeName:d.variable,dataType:d.type,value:d.value})}))}));this.requestDeferred.resolve(g);this.configFileLoading=null}else this._onLoadConfigFailure()}});m.instance||(m.instance=new m);return m.instance})},"webview/features/navigationGroups/dialogs/nodeConfigurationDialog/NodeConfigurationDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/navigationGroups dojo/on dojo/store/Memory dojo/text!./templates/NodeConfigurationDialog.html webview/crossCutting/dialogs/DialogWithLoadingOverlayMixin ../_NodePositioningViewMixin dijit/form/Button dijit/form/CheckBox dijit/form/NumberSpinner webview/widget/ColorPicker webview/widget/FontSelector".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return m("webview/features/navigationGroups/dialog/NodeConfigurationDialog",[p,b,t],{defaultColour:"#bcd1d9",navGroupStrings:l,rcStrings:g,templateString:c,webviewStrings:d,_displayTypeSelectionStore:null,_modifiableBySelectionStore:null,constructor:function(){this._modifiableBySelectionStore=new r({data:[{name:this.navGroupStrings.configDialog.modifiedBy.operator,id:!1},{name:this.navGroupStrings.configDialog.modifiedBy.endUser,id:!0}]});this._displayTypeSelectionStore=
new r({data:[{name:this.navGroupStrings.configDialog.showPointType.invisible,id:0},{name:this.navGroupStrings.configDialog.showPointType.name,id:1},{name:this.navGroupStrings.configDialog.showPointType.value,id:2},{name:this.navGroupStrings.configDialog.showPointType.displayName,id:3}]})},postCreate:function(){this.inherited(arguments);this.modifiableBySelector.set({store:this._modifiableBySelectionStore,queryExpr:"*${0}*"});this.displayTypeSelect.set({store:this._displayTypeSelectionStore,queryExpr:"*${0}*"});
this._connectOnChangeListeners();this._connectDropDownCycleListeners()},_setDisplayNameAttr:function(b){this.displayName.set("value",b)},_setDisplayTypeAttr:function(b){this.displayTypeSelect.set("value",b)},_setFontColourAttr:function(b){this.fontColourPicker.set("color",b)},_setFontFamilyAttr:function(b){this.fontSelect.set("value",b)},_setFontSizeAttr:function(b){this.fontSize.set("value",b)},_setModifiableByAttr:function(b){this.modifiableBySelector.set("value",b)},_setObjectNameAttr:function(b){this.objectNameLabel.innerHTML=
b},_setShowUnitsAttr:function(b){this.showUnitCheckBox.set("value",b)},disableValueDisplayTypeOption:function(){this._displayTypeSelectionStore.setData([{name:this.navGroupStrings.configDialog.showPointType.invisible,id:0},{name:this.navGroupStrings.configDialog.showPointType.name,id:1},{name:this.navGroupStrings.configDialog.showPointType.displayName,id:3}])},enableValueDisplayTypeOption:function(){this._displayTypeSelectionStore.setData([{name:this.navGroupStrings.configDialog.showPointType.invisible,
id:0},{name:this.navGroupStrings.configDialog.showPointType.name,id:1},{name:this.navGroupStrings.configDialog.showPointType.value,id:2},{name:this.navGroupStrings.configDialog.showPointType.displayName,id:3}])},onClickedCancel:function(){this.hide()},onClickedDelete:function(){},onClickedOk:function(){},toggleHyperLinkVisibility:function(b){this.hyperLink.set("disabled",!b);this.hyperLink.set("required",b);h.toggle(this.inputContainer,"withHyperLink",b)},toggleModifiableByVisibility:function(b){this.modifiableBySelector.set("disabled",
!b);h.toggle(this.inputContainer,"withModifiableBySelector",b)},toggleUnitsVisibility:function(b){this.showUnitCheckBox.set("disabled",!b);h.toggle(this.inputContainer,"withUnitsToggle",b)},validate:function(){var b=!0;this._isShown()&&(b=this.inherited(arguments));this.okButton.set("disabled",!b);return b},_connectOnChangeListeners:function(){this.own(f(this.modifiableBySelector,"change",k.hitch(this,this.validate)),f(this.fontSelect,"change",k.hitch(this,this.validate)),f(this.fontSize,"change",
k.hitch(this,this.validate)),f(this.displayTypeSelect,"change",k.hitch(this,this.validate)),f(this.positionX,"change",k.hitch(this,this.validate)),f(this.positionY,"change",k.hitch(this,this.validate)),f(this.widthInput,"change",k.hitch(this,this.validate)),f(this.heightInput,"change",k.hitch(this,this.validate)),f(this.hyperLink,"keyup",k.hitch(this,this.validate)),f(this.displayName,"keyup",k.hitch(this,this.validate)))},_connectDropDownCycleListeners:function(){this.own(f(this.displayTypeSelect.textbox,
"click",k.hitch(this,this._onCycleDisplayTypeSelector)),f(this.modifiableBySelector.textbox,"click",k.hitch(this,this._onCycleModifiableBySelector)),f(this.fontSelect.textbox,"click",k.hitch(this,this._onCycleFontFamilySelector)))},_onClickedOk:function(){if(this.validate())this.onClickedOk()},_onCycleDisplayTypeSelector:function(){var b=this.displayTypeSelect.get("item"),b=1+this.displayTypeSelect.store.data.indexOf(b);b>=this.displayTypeSelect.store.data.length&&(b=0);this.displayTypeSelect.set("value",
this.displayTypeSelect.store.data[b].id)},_onCycleFontFamilySelector:function(){var b=this.fontSelect.get("item"),b=1+this.fontSelect.store.data.indexOf(b);b>=this.fontSelect.store.data.length&&(b=0);this.fontSelect.set("value",this.fontSelect.store.data[b].name)},_onCycleModifiableBySelector:function(){var b=this.modifiableBySelector.get("item");this.modifiableBySelector.set("value",!(b&&b.id))}})})},"webview/crossCutting/dialogs/DialogWithLoadingOverlayMixin":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojo/dom-style"],function(p,m,k){return p("webview/crossCutting/dialogs/DialogWithLoadingOverlayMixin",[],{_setInitializingAttr:function(h){m.toggle(this.loadingOverlay,"hidden",!h);m.toggle(this.loadingAnimation,"hidden",!h);k.set(this.loadingOverlay,"opacity",h?1:0);this.okButton.set("disabled",h)}})})},"webview/widget/FontSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-style dojo/store/Memory dojo/store/Observable dijit/form/_ComboBoxMenu dijit/form/FilteringSelect".split(" "),
function(p,m,k,h,g,d,l){d=m("webview/widget/_ComboBoxMenu",d,{_createOption:function(d,g){var c=this._createMenuItem(),b=g(d);b.html?c.innerHTML=b.label:c.appendChild(c.ownerDocument.createTextNode(b.label));k.set(c,"fontFamily",b.label);""===c.innerHTML&&(c.innerHTML="\x26#160;");return c}});return m("webview/widget/FontSelector",l,{fonts:"Arial;Baskerville;Calibri;Cambria;Courier New;Georgia;Helvetica;Lucida Console;Lucida Grande;Palatino;Times;Verdana".split(";"),dropDownClass:d,constructor:function(){var d=
[];p.forEach(this.fonts,function(f){d.push({name:f,id:f})},this);this.store=new g(new h({data:d}))},onChange:function(d){this.inherited(arguments);this.changeFont(d);return d},_setValueAttr:function(){this.inherited(arguments);this.changeFont(this.value)},changeFont:function(d){k.set(this.textbox,"fontFamily",d)}})})},"webview/features/navigationGroups/dialogs/nodeConfigurationDialog/ConfigurationDialogPresenter":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/on webview/crossCutting/errors/_OnErrorMixin ../_NodePositioningMixin".split(" "),
function(p,m,k,h,g,d){return m("webview/features/navigationGroups/dialog/ConfigurationDialogPresenter",[p,d,g],{view:null,textNodeUpdater:null,_setViewAttr:function(d){this.own(h(d,"clickedOk",k.hitch(this,this._updateNodesConfiguration)));this.own(h(d,"clickedDelete",k.hitch(this,this._deleteNode)));this._set("view",d)},initialize:function(d,f,g,c){this.backgroundDimensions=c;this.nodeId=f.nodeId;this.defaultFont=g;this.measuredFullSizeDimensions=f.get("measuredFullSizePxDimensions");this.view.set("initializing",
!0);this.view.show();this.textNodeUpdater.getConfigurationDataForNode(d,this.nodeId).then(k.hitch(this,this._onLoadedConfigurationData))},_deleteNode:function(){var d=this._getOriginalNode(this._getOriginalPositioning(),this._getOriginalNodeFont());d.linkedObject={keyword:this.originalData.nodeConfiguration.primaryLink.keyword,mnemonic:this.originalData.nodeConfiguration.primaryLink.mnemonic,systemId:this.originalData.nodeConfiguration.primaryLink.systemId,url:this.originalData.nodeConfiguration.primaryLink.url,
name:this.originalData.nodeConfiguration.primaryLink.name};this.originalData.nodeConfiguration.secondaryLink&&(d.secondaryLinkedObject={keyword:this.originalData.nodeConfiguration.secondaryLink.keyword,mnemonic:this.originalData.nodeConfiguration.secondaryLink.mnemonic,systemId:this.originalData.nodeConfiguration.secondaryLink.systemId,url:this.originalData.nodeConfiguration.secondaryLink.url,name:this.originalData.nodeConfiguration.secondaryLink.name});d.renderType=this.originalData.renderType;this.textNodeUpdater.deleteNodes([d]).then(k.hitch(this.view,
this.view.hide))},_onLoadedConfigurationData:function(d){!d.errorMessage&&d.nodeConfiguration&&d.nodeConfiguration.primaryLink?(this.originalData=d,this.view.toggleUnitsVisibility(1==d.hasUnits),1==d.hasDisplayValue?this.view.enableValueDisplayTypeOption():this.view.disableValueDisplayTypeOption(),this._setFontFields(d.nodeConfiguration.nodeFont),this._setPositioningFields(d.nodeConfiguration),this._setUpDialogType(d.nodeConfiguration),this.view.set("nodeId",d.nodeConfiguration.nodeId),this.view.set("objectName",
d.nodeName),this.view.set("displayName",d.nodeConfiguration.displayName||null),this.view.set("displayType",d.nodeConfiguration.displayType),this.view.set("initializing",!1),this.view.afterInitialize()):(console.error(d),this._onError(d))},_getOriginalNode:function(d,f){k.mixin(d,{nodeId:this.originalData.nodeConfiguration.nodeId,displayName:this.originalData.nodeConfiguration.displayName||null,modifiableByEndUser:this.originalData.nodeConfiguration.modifiableByEndUser,showUnits:this.originalData.nodeConfiguration.showUnits,
nodeFont:f,displayType:this.originalData.nodeConfiguration.displayType});this.originalData.nodeConfiguration.primaryLink.url&&(d.linkedObject={url:this.originalData.nodeConfiguration.primaryLink.url});return d},_getOriginalNodeFontDiff:function(){var d=this.view.fontColourPicker.get("color"),f=this.view.fontSelect.get("value"),g=this.view.fontSize.get("value"),c={},b=!1;this.originalFontColour!==d&&(c.colour=this.originalFontColour,b=!0);this.originalFontFamily!==f&&(c.fontFamily=this.originalFontFamily,
b=!0);this.originalFontSize!==g&&(c.size=this.originalFontSize,b=!0);return{nodeFont:c,didChange:b}},_getOriginalNodeFont:function(){var d={};d.colour=this.originalFontColour;d.fontFamily=this.originalFontFamily;d.size=this.originalFontSize;return d},_getUpdatedNodeFont:function(){var d=this.view.fontColourPicker.get("color"),f=this.view.fontSelect.get("value"),g=this.view.fontSize.get("value"),c={};this.originalFontColour!==d&&(c.colour=d);this.originalFontFamily!==f&&(c.fontFamily=f);this.originalFontSize!==
g&&(c.size=g);return c},_getOriginalPositioningDiff:function(){var d=this.view.get("positioningData"),f={},g=!1;this.originalPositioning.x!==d.x&&(f.positioningLeft=this.originalPositioning.x/this.backgroundDimensions.width*100,g=!0);this.originalPositioning.y!==d.y&&(f.positioningTop=this.originalPositioning.y/this.backgroundDimensions.height*100,g=!0);this.originalPositioning.w!==d.w&&(f.width=this.originalPositioning.w/this.backgroundDimensions.width*100,g=!0);this.originalPositioning.h!==d.h&&
(f.height=this.originalPositioning.h/this.backgroundDimensions.height*100,g=!0);return{positioningData:f,didChange:g}},_getOriginalPositioning:function(){return{positioningLeft:this.originalPositioning.x/this.backgroundDimensions.width*100,positioningTop:this.originalPositioning.y/this.backgroundDimensions.height*100,width:this.originalPositioning.w/this.backgroundDimensions.width*100,height:this.originalPositioning.h/this.backgroundDimensions.height*100}},_isWorkstation:function(d){return/^125\D/i.test(d)},
_onError:function(d){d&&"cancel"===d.dojoType||(this.inherited(arguments),this.view.hide())},_setFontFields:function(d){this.originalFontColour=this.defaultFont.color;this.originalFontFamily=this.defaultFont["font-family"];this.originalFontSize=parseInt(this.defaultFont["font-size"]);d&&(d.colour&&(this.originalFontColour=d.colour),d.fontFamily&&(this.originalFontFamily=d.fontFamily),d.size&&(this.originalFontSize=d.size));this.view.set("fontColour",this.originalFontColour);this.view.set("fontFamily",
this.originalFontFamily);this.view.set("fontSize",this.originalFontSize)},_setUpDialogType:function(d){0<d.primaryLink.systemId?this._setUpDialogForSystemObject(d):d.primaryLink.mnemonic?this._setUpDialogForSiteObject():d.primaryLink.keyword?this._setUpDialogForStaticKeywordObject(d):d.primaryLink.url&&this._setUpDialogForHyperLinkObject(d)},_setUpDialogForHyperLinkObject:function(d){this.view.hyperLink.set("value",d.primaryLink.url);this.view.toggleHyperLinkVisibility(!0);this.view.toggleModifiableByVisibility(!1)},
_setUpDialogForSiteObject:function(){this.view.toggleHyperLinkVisibility(!1);this.view.toggleModifiableByVisibility(!1)},_setUpDialogForStaticKeywordObject:function(){this.view.toggleHyperLinkVisibility(!1);this.view.toggleModifiableByVisibility(!1)},_setUpDialogForSystemObject:function(d){this.view.toggleHyperLinkVisibility(!1);var f=this._isWorkstation(d.primaryLink.mnemonic);d.primaryLink.isEditable?(this.view.toggleModifiableByVisibility(!0),this.view.set("modifiableBy",!1!==d.modifiableByEndUser),
this.view.set("showUnits",d.showUnits)):f?this.view.toggleModifiableByVisibility(!1):(this.view.toggleModifiableByVisibility(!0),this.view.set("modifiableBy",!1!==d.modifiableByEndUser))},_updateNodesConfiguration:function(){var d=this._getUpdatedPositioningData(this.view.get("positioningData")),f=this._getUpdatedNodeFont(),g=this.originalData.nodeConfiguration.modifiableByEndUser,c=this.originalData.nodeConfiguration.showUnits,b=this._isWorkstation(this.originalData.nodeConfiguration.primaryLink.mnemonic);
0<this.originalData.nodeConfiguration.primaryLink.systemId&&this.originalData.nodeConfiguration.primaryLink.isEditable?(g="true"===this.view.modifiableBySelector.get("value"),c=this.view.showUnitCheckBox.get("value")&&!0):b||(g="true"===this.view.modifiableBySelector.get("value"));k.mixin(d,{nodeId:this.view.nodeId,displayName:this.view.displayName.get("value"),modifiableByEndUser:g,showUnits:c,nodeFont:f,displayType:parseInt(this.view.displayTypeSelect.get("value"))});f=!1;this.originalData.nodeConfiguration.primaryLink&&
this.originalData.nodeConfiguration.primaryLink.url&&(d.linkedObject={url:this.view.hyperLink.get("value")},f=!0);this.originalData.nodeConfiguration.displayType!==d.displayType&&0===d.displayType&&0===this.originalData.nodeConfiguration.width&&("undefined"===typeof d.height&&(d.height=this.measuredFullSizeDimensions.y/this.backgroundDimensions.height*100),"undefined"===typeof d.width&&(d.width=this.measuredFullSizeDimensions.x/this.backgroundDimensions.width*100));b=this._getOriginalPositioningDiff();
g=this._getOriginalNodeFontDiff();c=this._getOriginalNode(b.positioningData,g.nodeFont);b=0|b.didChange;b|=g.didChange;b|=c.displayName!==d.displayName;b|=c.modifiableByEndUser!==d.modifiableByEndUser;b|=c.showUnits!==d.showUnits;b|=c.displayType!==d.displayType;f&&(b|=c.linkedObject.url!==d.linkedObject.url);d=[{originalNode:c,updatedNode:d}];b?this.textNodeUpdater.updateNodes(d).then(k.hitch(this.view,this.view.hide)):this.view.hide()}})})},"webview/features/navigationGroups/groupRendering/_RenderingPresenter":function(){define(["dojo/_base/declare",
"dojo/promise/all","dojo/_base/lang"],function(p,m,k){return p("webview/features/navigationGroups/groupRendering/_RenderingPresenter",null,{groupGuid:null,rangeStart:"",_isPaused:!1,_nodeManager:null,_refreshTimer:null,_refreshInterval:5E3,_renderData:null,_requestManager:null,_view:null,constructor:function(h,g,d,l,f){this._view=h;this._requestManager=g;this._nodeManager=d;this.siteId=l;this.groupId=f;this.restartUpdates()},pauseUpdates:function(){this._isPaused=!0;this._cancelRefresh()},reloadGroupDetails:function(){this._loadGroupDetails()},
restartUpdates:function(){this._isPaused=!1;this._cancelRefresh();this._queueRefresh();this._loadGroupDetails()},_cancelRefresh:function(){this._clearTimer();this._animationRequest&&(this._animationRequest.cancel(),this._animationRequest=null);this._textNodeRequest&&(this._textNodeRequest.cancel(),this._textNodeRequest=null);this._requestManager.cancelRequests()},_checkGuid:function(h){return this.groupGuid!==h},_clearTimer:function(){this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=
null)},_loadBackgroundImage:function(){var h=this._requestManager.buildBackgroundPath(this);h!==this.backgroundSource&&(this.backgroundSource=h,this._view.set("BackgroundImageSource",this.backgroundSource))},_loadGroupDetails:function(){this._requestManager.loadGroupDetails(this,this._onLoadDetails,this._onFirstLoadFailure)},_loadInitialRenderData:function(){this._isPaused||(this.rangeStart="",this._textNodeRequest=this._requestManager.loadInitialTextRenderData(this,this._onInitialLoadTextNodes,this._onLoadRenderDataError),
this._animationRequest=this._requestManager.loadInitialAnimationRenderData(this,this._onInitialLoadAnimations,this._onLoadRenderDataError))},_loadRenderData:function(){if(!this._isPaused){if(!this._textNodeRequest||this._textNodeRequest.isFulfilled())this._textNodeRequest=this._requestManager.loadUpdatedTextRenderData(this,this._onUpdatedRenderData,this._onLoadRenderDataError);if(!this._animationRequest||this._animationRequest.isFulfilled())this._animationRequest=this._requestManager.loadAnimationRenderData(this,
this._onLoadAnimations,this._onLoadRenderDataError)}},_onLoadAnimations:function(h){h.errMSG?this._onLoadRenderDataError(h):this._nodeManager.updateAnimationNodes(h.nodes)},_onInitialLoadAnimations:function(h){h.errMSG?this._onLoadRenderDataError(h):(this._onLoadAnimations(h),this._animationRequest=this._requestManager.loadAnimationRenderData(this,this._onLoadAnimations,this._onLoadRenderDataError))},_onInitialLoadTextNodes:function(h){this._nodeManager.removeNodes();this._onUpdatedRenderData(h)},
_queueRefresh:function(){this._clearTimer();this._refreshTimer=setInterval(k.hitch(this,this._loadGroupDetails),this._refreshInterval)},_onFirstLoadFailure:function(h){this._view.onError(h)},_onLoadDetails:function(h){if(h.errMSG)this._onFirstLoadFailure(h);else{var g=this._checkGuid(h.guid);this._setDetails(h);g?(this._loadBackgroundImage(),this._cancelRefresh(),this._queueRefresh(),this._loadInitialRenderData()):this._loadRenderData()}},_onUpdatedRenderData:function(h){!0!==this._isPaused&&(h.errMSG?
this._onLoadRenderDataError(h):(h.lastUpdated&&""!==h.lastUpdated&&(this.rangeStart=h.lastUpdated),this._nodeManager.updateNodes(h.nodes)))},_onLoadRenderDataError:function(h){this._view.onError(h)},_setDetails:function(h){this.groupGuid=h.guid;h.defaultFont&&(this._view.set("defaultFont",h.defaultFont),this._nodeManager.set("defaultFont",h.defaultFont));this._view.set("groupDetails",h)},destroy:function(){this.pauseUpdates();this._clearTimer()}})})},"webview/features/navigationGroups/groupRendering/_RenderingRequests":function(){define(["dojo/_base/declare",
"dojo/_base/lang","../../../xhrEnhanced"],function(p,m,k){return p("webview/features/navigationGroups/groupRendering/_RenderingRequests",null,{_animationsRenderPath:"NavigationGroupAnimationNodeRenderData/",_backgroundPath:"NavigationGroupBackground/",_detailsPath:"NavigationGroupDetails/",_renderPath:"NavigationGroupRenderData/",_initialAnimationsRenderPath:"NavigationGroupAnimationNodeRenderDataInitialLoad/",_updatedRenderPath:"NavigationGroupUpdatedRenderData/",buildBackgroundPath:function(h){return this._backgroundPath+
this._groupPath(h)},loadAnimationRenderData:function(h,g,d){this._animationRenderDataRequest&&!this._animationRenderDataRequest.isFulfilled()&&this._animationRenderDataRequest.cancel();return this._animationRenderDataRequest=k.get(this._animationsRenderPath+h.groupId,{handleAs:"json",preventCache:!0}).then(m.hitch(h,g),m.hitch(h,d))},loadInitialAnimationRenderData:function(h,g,d){this._animationDataRequest&&!this._animationDataRequest.isFulfilled()&&this._animationDataRequest.cancel();return this._animationDataRequest=
k.get(this._initialAnimationsRenderPath+h.groupId,{handleAs:"json",preventCache:!0}).then(m.hitch(h,g),m.hitch(h,d))},loadGroupDetails:function(h,g,d){this._groupDetailsRequest&&!this._groupDetailsRequest.isFulfilled()&&this._groupDetailsRequest.cancel();this._groupDetailsRequest=k.get(this._detailsPath+h.groupId,{handleAs:"json",preventCache:!0});this._groupDetailsRequest.then(m.hitch(h,g),m.hitch(h,d));return this._groupDetailsRequest},loadInitialTextRenderData:function(h,g,d){this._renderDataRequest&&
!this._renderDataRequest.isFulfilled()&&this._renderDataRequest.cancel();this._renderDataRequest=k.get(this._renderPath+h.groupId,{handleAs:"json",preventCache:!0});this._renderDataRequest.then(m.hitch(h,g),m.hitch(h,d));return this._renderDataRequest},loadUpdatedTextRenderData:function(h,g,d){this._updatedRenderDataRequest&&!this._updatedRenderDataRequest.isFulfilled()&&this._updatedRenderDataRequest.cancel();this._updatedRenderDataRequest=k.get(this._updatedRenderPath+h.groupId,{handleAs:"json",
preventCache:!0,query:{rangeStart:h.rangeStart}});this._updatedRenderDataRequest.then(m.hitch(h,g),m.hitch(h,d));return this._updatedRenderDataRequest},_groupPath:function(h){return h.groupId+"/"+h.groupGuid},cancelRequests:function(){this._animationDataRequest&&!this._animationDataRequest.isFulfilled()&&this._animationDataRequest.cancel();this._animationRenderDataRequest&&!this._animationRenderDataRequest.isFulfilled()&&this._animationRenderDataRequest.cancel();this._groupDetailsRequest&&!this._groupDetailsRequest.isFulfilled()&&
this._groupDetailsRequest.cancel();this._renderDataRequest&&!this._renderDataRequest.isFulfilled()&&this._renderDataRequest.cancel();this._updatedRenderDataRequest&&!this._updatedRenderDataRequest.isFulfilled()&&this._updatedRenderDataRequest.cancel()},destroy:function(){this.cancelRequests()}})})},"webview/features/navigationGroups/groupRendering/groupNodes/GroupNodeManager":function(){define("dijit/_WidgetBase dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/Evented dojo/on dojo/store/Memory ./AnimationNode ./AnimationNodeOverlay ./TextNode webview/sys/alarmApi".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return k("webview/features/navigationGroups/groupRendering/GroupNodes/GroupNodeManager",[p,d],{nodeContainer:null,_nodeMap:null,_animationNodesMap:null,RENDER_TYPE_MAP:{TEXT_NODE:1,ANIMATION_NODE:2},constructor:function(){this._nodeMap=new f({idProperty:"nodeId"});this._animationNodesMap=new f({idProperty:"nodeId"})},postCreate:function(){var b;"Admin"===rc.pathInfo.site&&(b=this.builderStateManager.get("siteUrl"));this.alarmApiLoaded=t.loadOnce(b);this.own(this.alarmApiLoaded)},
_setNodeContainerAttr:function(b){this._set("nodeContainer",b)},addNodes:function(b){var c=[];m.forEach(b,h.hitch(this,function(a){c.push(this._createNode(a))}));return c},createDndNode:function(b,d){b.domNode||(b.renderType===this.RENDER_TYPE_MAP.TEXT_NODE?b=this.getNewTextNode(b):b.renderType===this.RENDER_TYPE_MAP.ANIMATION_NODE&&(b=new c(b)));var a=b;if(!0===b.newAnimationNode){var a=b.defaultConfig.height||b.thumbnail.offsetHeight,f=b.defaultConfig.width||b.thumbnail.offsetWidth,g=this.scaleFactorManager.get("backgroundDimensions"),
l=Math.max(a/g.height,f/g.width);1<l&&(a/=l,f/=l);var l=a/g.height*100,g=f/g.width*100,k=this.scaleFactorManager.get("dimensionScaleFactors");k&&(a&&(a*=k.height),f&&(f*=k.width));a=new c({isAvatar:!0,animationName:b.animationName,aspectLocked:b.aspectLocked,renderType:b.renderType,newAnimationNode:!0,widthPx:f,heightPx:a,relativeHeight:l,relativeWidth:g,animationAttributes:b.defaultConfig.attributes,versionId:b.defaultConfig.versionId})}else"avatar"===d&&(a=h.clone(b),a.id=null,a.nodeId=null,a.renderType!=
this.RENDER_TYPE_MAP.ANIMATION_NODE||a.newAnimationNode||a.set("animationName",b.animationName));return{node:a.domNode,data:a,type:["navGroupNode"]}},getAnimationNode:function(b){return this._animationNodesMap.get(b)},getAnimationNodeOverlays:function(){var b=[];m.forEach(this._animationNodesMap.data,function(c){b.push(c.getOverlayNode())});return b},getFontForAvatar:function(){return this.scaleFactorManager.getScaledCssFontStyling(h.clone(this.defaultFont))},getNewTextNode:function(c){c=new b(c);
c.set("scaleFactorManager",this.scaleFactorManager);c.onWidthScaleFactorChange(this.scaleFactorManager.get("widthScaleFactor"));return c},getNodeById:function(b){var c=this.getTextNode(b);c||(c=this.getAnimationNode(b));return c},getNodes:function(){return this._nodeMap.data},getTextNode:function(b){return this._nodeMap.get(b)},isAnimationNode:function(b){return this._animationNodesMap.get(b)?!0:!1},isTextNode:function(b){return this._nodeMap.get(b)?!0:!1},removeAnimationNodes:function(){m.forEach(this._animationNodesMap.data,
function(b){b.destroy()});this._animationNodesMap.setData([])},removeNodes:function(){m.forEach(this._nodeMap.data,function(b){b.destroy()});this._nodeMap.setData([])},updateAnimationNodes:function(b){this.alarmApiLoaded.then(h.hitch(this,function(c){var a=[],d=[];m.forEach(b,h.hitch(this,function(b){var f=this._animationNodesMap.get(b.nodeId);if(f){this._animationNodesMap.remove(b.nodeId);var g=f.hasOverlayNode(),h=null;g&&(h=f.getOverlayNode());m.forEach(Object.keys(b),function(a){f.set(a,b[a]);
g&&h.hasOwnProperty(a)&&h.set(a,b[a])})}else b.alarmApiPath=c,f=this._buildAnimationNode(b,c),d.push(f.getOverlayNode());a.push(f)}));m.forEach(this._animationNodesMap.data,function(a){a.destroy()});this._animationNodesMap.setData(a);this.emit("animationNodesAdded",d)}))},updateNodes:function(b){var c=[];m.forEach(b,h.hitch(this,function(a){var b=this._nodeMap.get(a.nodeId);b?m.forEach(Object.keys(a),function(c){b.set(c,a[c])}):(b=this._buildNode(a),this._nodeMap.put(b),c.push(b))}));this.emit("textNodesAdded",
c)},_buildAnimationNode:function(b){b.scaleFactorManager=this.scaleFactorManager;b.builderStateManager=this.builderStateManager;b.renderType=this.RENDER_TYPE_MAP.ANIMATION_NODE;b=new r(b,g.create("span",null,this.nodeContainer));this.own(l(b,"overlayNodeResizing",h.hitch(this,this.emit,"nodeResizing")),l(b,"overlayNodeResized",h.hitch(this,this.emit,"nodeResized")));this.builderStateManager.get("editMode")&&b.getOverlayNode();return b},_buildNode:function(c){c.scaleFactorManager=this.scaleFactorManager;
c.builderStateManager=this.builderStateManager;c.renderType=this.RENDER_TYPE_MAP.TEXT_NODE;c=new b(c);this.own(l(c,"resizing",h.hitch(this,this.emit,"nodeResizing")),l(c,"resized",h.hitch(this,this.emit,"nodeResized")));return c},_createAnimationNode:function(b){var c=this._getFreeCoordinates();b={linkedObject:b.linkedObject,nodeId:-1,positioningLeft:c.x,positioningTop:c.y,renderType:this.RENDER_TYPE_MAP.ANIMATION_NODE};this._animationNodesMap.put(this._buildAnimationNode(b));return b},_createNode:function(b){var c=
this._getFreeCoordinates();b={linkedObject:b.linkedObject,nodeId:-1,positioningLeft:c.x,positioningTop:c.y,renderType:this.RENDER_TYPE_MAP.TEXT_NODE};this._nodeMap.put(this._buildNode(b));return b},destroy:function(){this._animationNodesMap=this._nodeMap=null;this.inherited(arguments)}})})},"webview/features/navigationGroups/groupRendering/groupNodes/AnimationNode":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/text!./templates/AnimationNode.html dojo/topic dojox/html/entities webview/crossCutting/topicEvents webview/features/animations/_AnimationDestroyerMixin webview/util/Debounce webview/util/util ../_HasScaleFactorMixin ./_BasicNodeMixin ./_TrendLogLoaderMixin ./AnimationNodeOverlay".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B){return g("webview/features/navigationGroups/groupNode/AnimationNode",[m,p,k,z,y,A,v],{templateString:q,baseUrl:"webview/features/animations/resources/html/animLoader.html",clickDestinationMap:{},interactiveArea:null,mouseOverListener:null,animationFilesPath:rc.pathInfo.sitePath+"/HtmlAnimation",postCreate:function(){this.inherited(arguments);this._buildAnimationLoader(this.animationLastModified);this.own(this.watch("height",d.hitch(this,this._updateAnimation)),
this.watch("width",d.hitch(this,this._updateAnimation)),this.watch("animationName",d.hitch(this,this._onAnimationChanged)))},_coordinatesInRectangle:function(a,b){return a.x>=b.x&&a.x<=b.x+b.width&&a.y>=b.y&&a.y<=b.y+b.height},_getMouseCoordsInAnimation:function(a,b){var d=c.position(a);return{x:b.pageX-d.x,y:b.pageY-d.y}},_mouseOver:function(a){if(this.interactiveArea){var c=d.hitch(this,function(a){b.set(this.domNode,{"pointer-events":a?"auto":"none"})});this._coordinatesInRectangle({x:a.pageX,
y:a.pageY},this.interactiveArea)||(c(!1),this.mouseOverListener=t(window,"mousemove",d.hitch(this,function(a){a=this._getMouseCoordsInAnimation(this.domNode,a);if(0>a.x||0>a.y||a.x>this.domNode.offsetWidth||a.y>this.domNode.offsetHeight)this.mouseOverListener&&(this.mouseOverListener.remove(),this.mouseOverListener=null),c(!0);this._coordinatesInRectangle(a,this.interactiveArea)&&c(!0)})),this.own(this.mouseOverListener))}},_setAspectLockedAttr:function(a){this._set("aspectLocked",a);this.hasOverlayNode()&&
this.overlayNode.set("aspectLocked",a)},_setAnimationLastModifiedAttr:function(a){this._set("animationLastModified",a);this._lastModifiedFor&&this.lastModifiedFor!==this.animationName&&this._onAnimationChanged();this._lastModifiedFor=this.animationName},_setGelDataAttr:function(b){if(b&&0<b.length){for(var c in b[0]){var d=b[0][c];"string"===typeof d&&(d=a.decode(d));b[0][c]=d}this.gelData=b;this._reloading&&this._hasConfigurationChanged()?this._initializeAnimation():this._updateAnimation();this._reloading=
!1}else this._isAnimationInitialized()&&(this._reloading=!0)},_setHeightAttr:function(a){this.inherited(arguments);this._set("height",a);this.hasOverlayNode()&&this.overlayNode.set("height",a)},_setPositioningLeftAttr:function(a){this.inherited(arguments);this.hasOverlayNode()&&this.overlayNode.set("positioningLeft",a)},_setPositioningTopAttr:function(a){this.inherited(arguments);this.hasOverlayNode()&&this.overlayNode.set("positioningTop",a)},_setWidthAttr:function(a){b.set(this.domNode,{width:a+
"%"});this.inherited(arguments);this._set("width",a);this.hasOverlayNode()&&this.overlayNode.set("width",a)},_updateInteractiveArea:function(a,b){this.interactiveArea=b},getOverlayNode:function(){this.overlayNode||(this.overlayNode=new B({animationName:this.animationName,aspectLocked:this.params.aspectLocked,builderStateManager:this.params.builderStateManager,displayIndex:this.params.displayIndex,height:this.params.height,nodeId:this.params.nodeId,positioningLeft:this.params.positioningLeft,positioningTop:this.params.positioningTop,
renderType:this.renderType,scaleFactorManager:this.params.scaleFactorManager,width:this.params.width},r.create("span",null,this.domNode.parentNode)),this.own(this.overlayNode,t(this.overlayNode,"editConfigurationClicked",d.hitch(this,this._onEditConfigurationClicked)),t(this.overlayNode,"resizing",d.hitch(this,this.emit,"overlayNodeResizing")),t(this.overlayNode,"resized",d.hitch(this,this.emit,"overlayNodeResized"))));return this.overlayNode},hasOverlayNode:function(){return this.overlayNode?!0:
!1},onHeightScaleFactorChange:function(){this._updateAnimation()},onWidthScaleFactorChange:function(){this._updateAnimation()},updateAttributes:function(b){this.gelData&&this.gelData[0]&&(h.forEach(b,d.hitch(this,function(b){"string"===typeof b.value&&(b.value=a.decode(b.value));this.gelData[0][b.attributeName]=b.value})),this.animationObject&&this._initializeAnimation())},_buildAnimationLoader:function(){this.source=require.toUrl(this.baseUrl);f.set(this.iframeNode,"src",this.source);this.own(t.once(this.iframeNode,
"load",d.hitch(this,this._loadAnimation)))},_dataUpdated:function(a){this._updateAnimationPoint(a)},_destroyAnimation:function(){this.animationObject&&(this._destroyHTMLAnimation(this.animationObject,this.iframeNode.contentWindow),this.animationObject=null)},_hasConfigurationChanged:function(){return this._isAnimationInitialized()?this._haveLinkedObjectsChanged()||this._haveAttributesChanged():!1},_haveAttributesChanged:function(){var a=this.gelData[0];return!h.every(Object.keys(a),d.hitch(this,function(b){return this.animationObject.gels[0][b]===
a[b]}))},_haveLinkedObjectsChanged:function(){if(this.animationObject.gels.length!==this.gelData.length)return!0;for(var a=1;a<this.gelData.length;a++){var b=this.gelData[a],c=this.animationObject.gels[a];if(!b&&c||!c&&b)return!0;if(b||c)if(c&&b&&c.groupElementLocation!==b.groupElementLocation||c&&b&&b.systemId!==c.systemId||b.mne!==c.mne)return!0}return!1},_initializeAnimation:function(){this._destroyAnimation();this._removeAnimationListeners();this.animationObject=this.animationConstructor(this.animationArgs);
this._animationListeners=[l.after(this.animationObject,"groupElementTouched",d.hitch(this,this._linkTouched),!0),l.after(this.animationObject,"dataUpdated",d.hitch(this,this._dataUpdated),!0),l.after(this.animationObject,"InteractiveAreaCallback",d.hitch(this,this._updateInteractiveArea),!0),l.after(this.animationObject,"animationMouseOver",d.hitch(this,this._mouseOver),!0)];this.gelData&&0<this.gelData.length&&(this._mixinAnimationProperties(),this._updateAnimation(),this._hasTrendData()&&this._updateTrendData())},
_isAnimationInitialized:function(){return this.animationObject&&w.isArrayNotNullOrEmpty(this.gelData)},_linkTouched:function(a){this._openClickDestination(a)},_mixinAnimationProperties:function(){if(0<this.animationObject.gels.length){var a=d.mixin({},d.clone(this.animationObject.gels[0]));this.gelData[0]=d.mixin(a,this.gelData[0]);this.animationObject.gels=this.gelData}},_onAnimationChanged:function(a,b,c){b&&(this._destroyAnimation(),this.reloadDebounce=x(this.reloadDebounce,d.hitch(this,function(){this.iframeNode.contentWindow.location.reload(!0);
this.own(t.once(this.iframeNode,"load",d.hitch(this,this._loadAnimation)))},25)))},_onEditConfigurationClicked:function(a){this.builderStateManager.get("editMode")&&u.publish(n.editAnimationConfigurationClicked,this);a.stopPropagation()},_loadAnimation:function(){if(this.iframeNode.contentWindow.animationLoader){this._destroyAnimation();var a=[this.animationFilesPath,this.animationLastModified,this.animationName].join("/")+"/",b=a+this.animationName+".js";this.animationArgs={relativePath:a,alarmApiPath:this.alarmApiPath,
groupElementTouched:function(){},InteractiveAreaCallback:function(a,b){}};this.animationLoader=this.iframeNode.contentWindow.animationLoader;this.animationLoader(b).then(d.hitch(this,function(a){this.animationConstructor=a;this._initializeAnimation()}))}},_removeAnimationListeners:function(){this._animationListeners&&0<this._animationListeners.length&&h.forEach(this._animationListeners,function(a){a.remove()});this._animationListeners=[]},_resizeAnimation:function(){if(this.animationObject){this.animationObject._loadMaps?
this._resizeViaDomNode():this._resizeViaTransform();try{this.animationObject.resize&&this.animationObject.resize()}catch(C){}}},_resizeViaDomNode:function(){var a=c.position(this.domNode);b.set(this.animationObject.domNode,{width:a.w-2+"px",height:a.h-2+"px"});this.animationObject.domNode.firstElementChild&&b.set(this.animationObject.domNode.firstElementChild,{position:"unset"})},_resizeViaTransform:function(){var a=c.position(this.domNode),a="scale("+(a.w-2)/this.animationObject.stageWidth+","+(a.h-
2)/this.animationObject.stageHeight+")";b.set(this.iframeNode.contentDocument.body,{MozTransformOrigin:"0 0",MozTransform:a,webkitTransformOrigin:"0 0",webkitTransform:a,oTransformOrigin:"0 0",oTransform:a,msTransformOrigin:"0 0",msTransform:a,transformOrigin:"0 0",transform:a,overflow:"hidden"})},_setAnimationGelData:function(){this.animationObject.gels.length===this.gelData.length?this.animationObject.setGroupElements(this.gelData):0<this.animationObject.gels.length&&this._mixinAnimationProperties()},
_updateAnimation:function(){this._resizeAnimation();if(this._isAnimationInitialized()&&this.animationObject&&!this._createTrendLogLoader())try{this._setAnimationGelData(),this.animationObject.UpdateData()}catch(C){}},destroy:function(){this._destroyTrendLogLoader();this._destroyAnimation();this._removeAnimationListeners();this.inherited(arguments)}})})},"webview/features/animations/_AnimationDestroyerMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(p,m,
k){return m("webview/features/animations/_AnimationDestroyerMixin",[],{_destroyHTMLAnimation:function(h,g){h&&(h.destroy(),p.forEach(Object.keys(h),k.hitch(this,function(d){h[d]&&"object"===typeof h[d]&&"function"===typeof h[d].destroy&&h[d].destroy()})));g.clearAllIntervals()}})})},"webview/features/navigationGroups/groupRendering/_HasScaleFactorMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(p,m){return p("webview/features/navigationGroups/_HasScaleFactorMixin",[],{_setScaleFactorManagerAttr:function(k){this._set("scaleFactorManager",
k);this.own(this.scaleFactorManager.watch("heightScaleFactor",m.hitch(this,function(h,g,d){this.onHeightScaleFactorChange(d)})));this.own(this.scaleFactorManager.watch("widthScaleFactor",m.hitch(this,function(h,g,d){this.onWidthScaleFactorChange(d)})));if(this.scaleFactorManager.heightScaleFactor)this.onHeightScaleFactorChange(this.scaleFactorManager.heightScaleFactor);if(this.scaleFactorManager.widthScaleFactor)this.onWidthScaleFactorChange(this.scaleFactorManager.widthScaleFactor)},onHeightScaleFactorChange:function(k){throw"onScaleChange: Not Implemented";
},onWidthScaleFactorChange:function(k){throw"onScaleChange: Not Implemented";}})})},"webview/features/navigationGroups/groupRendering/groupNodes/_TrendLogLoaderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on rc/date rc/util/pointObject ./trends/SystemTrendLogLoader".split(" "),function(p,m,k,h,g,d,l){return p("webview/features/navigationGroups/GroupNodes/_TrendLogLoaderMixin",[k],{_defaultTrendTimer:2E4,trendLogLoader:null,_loadTrendDataTimer:null,chartItems:[],_cancelTrendDataTimer:function(){this._loadTrendDataTimer&&
(window.clearTimeout(this._loadTrendDataTimer),this._loadTrendDataTimer=null)},_createTrendLogLoader:function(){if(null===this.trendLogLoader)for(var f=1;f<this.gelData.length;f++){var g=this.gelData[f];if(g&&g.mne&&g.systemId&&(this.pointName=d.getByMnemonic(g.mne),"function"===typeof this.pointName.isTrendLog&&this.pointName.isTrendLog())){this.trendLogLoader=new l(this.pointName,g.systemId);this._loaderCreated=h(this.trendLogLoader,"loaderCreated",m.hitch(this,function(){this._loadTrendData()}));
break}}return null!==this.trendLogLoader},_destroyTrendLogLoader:function(){null!==this.trendLogLoader&&(this.trendLogLoader.destroy(),this.trendLogLoader=null)},_getDisplayName:function(d,g){var c=/^(\d+)\D+.*/,b="",f=null;g.name&&(b=null!==(f=c.exec(g.mnemonic))&&Number(f[1])!==d?"{"+f[1]+"}"+g.name:g.name);return b},_hasTrendData:function(){return this.chartItems&&0<this.chartItems.length},_loadTrendData:function(){this.trendLogLoader&&(this.trendLogLoader.resetData(this),this.trendLogLoader.load(this).always(m.hitch(this,
function(){try{this.chartItems=this.trendLogLoader.getChartItems(),this._updateTrendData()}catch(f){console.error("Failed Fetch: ",this,f,f.message)}this._resetTrendDataTimer()})))},_parseTrendData:function(){if(0<this.chartItems.length){for(var d=[],h=6E4*(new Date).getTimezoneOffset(),c=0;c<this.chartItems.length;c++){var b={},l=this.pointName.isBACnet()?this.pointName.device:this.pointName.mainController;b.Units=this.chartItems[c].unit?this.chartItems[c].unit:"";b.strName=this._getDisplayName(l,
this.chartItems[c]);b.gValue=[];for(var k=!1,l=0;l<this.chartItems[c].data.length;l++)null!=this.chartItems[c].data[l]&&null!=this.chartItems[c].data[l].x&&(k=g.formatDateToAny(new Date(this.chartItems[c].data[l].x+h),"yyyy/MM/dd HH:mm:ss"),b.gValue.push({x:k,y:null!=this.chartItems[c].data[l].y?this.chartItems[c].data[l].y:0}),k=!0);k&&d.push(b)}for(c=0;c<d.length;c++)this.gelData.length>c+1?m.mixin(this.gelData[c+1],d[c]):this.gelData.push(d[c])}},_resetTrendDataTimer:function(){this._cancelTrendDataTimer();
this._loadTrendDataTimer=window.setTimeout(m.hitch(this,this._loadTrendData),this._defaultTrendTimer)},_updateTrendData:function(){this._parseTrendData();this.animationObject.gels.length!==this.gelData.length&&(this._mixinAnimationProperties(),this.animationObject.gels=this.gelData);this.animationObject.setGroupElements(this.gelData);1<this.gelData.length&&this.animationObject.UpdateData()}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/SystemTrendLogLoader":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/number dojo/on rc/_base/Error webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Loader webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Loader webview/sys/job".split(" "),
function(p,m,k,h,g,d,l,f,r){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/SystemTrendLogLoader",k,{pointName:null,systemId:null,io:null,bFirstLiveRecord:!1,SAMPLE_SIZE:512,_recordCount:0,_objects:null,_loaderCreatedTimer:50,_loaderCreated:null,isLC:!1,_colors:"#06F #6f0 cyan #93f red #fc0 #f60 #666".split(" "),_letters:"ABCDEFGH".split(""),constructor:function(c,b){this.pointName=c;this.systemId=b;this.set("sampleSize",this.SAMPLE_SIZE);r.loadSystemOnce(this.systemId).then(m.hitch(this,
function(){c.isBACnet()?(this._logType=this.pointName.type,this.pointInstance=this.pointName.instance,this.mainController=this.pointName.device,this.io=new l(this.systemId)):this.io=new f(this.systemId);this._loaderCreated=window.setTimeout(m.hitch(this,this._loaderCreated),this._loaderCreatedTimer)}))},get:function(c){var b="";this.hasOwnProperty(c)&&(b=this[c]);return b},getChartItems:function(){return this.io?this.io.getChartItems():[]},load:function(){if(this.io)return this.io.load(this);var c=
new Deferred;c.resolve();return c.promise},onRestartTimer:function(c){return c},resetData:function(c){this.io&&this.io.resetData(this)},safeError:function(c,b){var f;c instanceof d?f=c:"object"===typeof b?(f=new d(b),f.e=c):f=new d({name:nlsAll.unexpectedError,message:nlsAll.unexpected,suggestion:nlsAll.unexpectedFix,renderHtml:!0,e:c});return f},set:function(c,b){this[c]=b},_formatValue:function(c,b,d){return"Time"!==d?h.round(c,b):c},_loaderCreated:function(){this._loaderCreated&&(window.clearTimeout(this._loaderCreated),
this._loaderCreated=null);g.emit(this,"loaderCreated")},_onClearTimeout:function(){g.emit(this,"clearTimeout")},_replace:function(c){return c},destroy:function(){this.io&&(this.io.destroy(),this.io=null)}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Loader":function(){define(["dojo/_base/declare","./Archive","./BACnet","../rcp/Resources","rc/bacnet/_trend/io/Loader"],function(p,m,k,h,g){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Loader",
g,{liveDataClass:k,archiveDataClass:m,resourceClass:h,constructor:function(d){this.systemId=d;this.l=new this.liveDataClass(this.systemId);this._r=new this.resourceClass(this.systemId);this.a=new this.archiveDataClass({l:this,systemId:this.systemId})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Archive":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/Deferred","rc/bacnet/_trend/io/Archive"],function(p,m,k,h,g){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Archive",
g,{_path:"RCArchive/",systemId:null,constructor:function(d){d.systemId&&(this.systemId=d.systemId)},_validateArchiveConfig:function(){var d=new h;d.resolve(!0);return d.promise},_fetch:function(d,g,f,r){var c="",b="";0<f&&(c=this._dateToServiceFormat(f));r&&(b=this._dateToServiceFormat(r));var l=new h;f={gid:"TL",type:"archive",method:"GET",path:this._path+"GetPagedTLData",url:this._path+"GetPagedTLData",cmdObj:{strMne:d.pointName.toMnemonic(),dateStart:c,dateEnd:b,sampleSize:g,systemId:this.systemId},
load:m.hitch(this,function(b){try{if(b.data.Error&&console.error(b.data.Error),null!==b.data.DateFirst){var c=k.parse(b.data.DateFirst,{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a"});c||(c=new Date(b.data.DateFirst));this.dateFirst=c.getTime()-6E4*c.getTimezoneOffset();(c=k.parse(b.data.DateLast,{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a"}))||(c=new Date(b.data.DateLast));this.dateLast=c.getTime()-6E4*c.getTimezoneOffset();this._decode(d,b.data,this.dateFirst,this.dateLast,g);l.resolve(!0)}else l.resolve(!1)}catch(a){console.error("Error could not parse or decode the DateFirst or DateLast from the widget: ",
a),l.reject(a)}}),error:m.hitch(this,function(b){b=Error("Error fetching archive data:"+b.message);l.reject(b);return b})};rc.xhr.request(f);return l.promise},_fetchTotalRecordCount:function(d){var g=new h;d={gid:"TL",type:"archive",method:"GET",path:this._path+"GetTotalRecords",url:this._path+"GetTotalRecords",cmdObj:{strMne:d,systemId:this.systemId},load:m.hitch(this,function(d){g.resolve(d.data)}),error:m.hitch(this,function(d){g.resolve(d.data)})};rc.xhr.request(d);return g.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/BACnet":function(){define(["dojo/_base/declare",
"rc/bacnet/_trend/io/Bacnet","./Device","./Header"],function(p,m,k,h){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/BACnet",m,{systemId:null,constructor:function(g){this.systemId=g;this.h=new h({b:this},g);this.d=new k({b:this},g)}})})},"rc/bacnet/_trend/io/Bacnet":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented ./Device ./Header ../DataManager".split(" "),function(p,m,k,h,g,d,l){return p("rc/bacnet/_trend/io/Bacnet",[h],{h:null,
d:null,datam:null,dateFirst:0,dateLast:0,constructor:function(){this.h=new d({b:this});this.d=new g({b:this});this.datam=new l;this.datam.dataSource=this.datam.DS_LIVE},load:function(d,g,c){var b=new k,f=m.hitch(this,function(c){this.dateLast=this.datam.getLastTime();if(d.bFirstLiveRecord)this.dateFirst=this.datam.getFirstTime();else{var a=this.h.interval;a||(a=(this.dateLast-this.datam.getFirstTime())/this.datam.getTimeLength());this.dateFirst=this.dateLast-d._recordCount*a;this.dateFirst-=this.dateFirst%
1E3}this.onLoad(c);b.resolve(c)}),h=m.hitch(this,function(c){b.reject(c);this.onError(c);return c});g=m.hitch(this,function(){return this.d.load(d,this.datam,c).then(f,h)});this.h.load(d,this.datam).then(g,h);return b.promise},onLoad:function(){this.emit("load")},onError:function(){this.emit("error")},destroy:function(){this.h=this.datam=this.d=null}})})},"rc/bacnet/_trend/io/Device":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/string ../../enums ../../io/Array ../../io/Date ../../io/DateTime ../../io/List ../../io/LogMultipleRecord ../../io/LogRecord ../../io/Number ../../io/Object ../../io/ReadRange ../../io/service/ReadRange ../../io/Time ../../unit ../../../_base/Error ../../../xhr ../../../date".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A){return m("rc/bacnet/_trend/io/Device",null,{b:null,_totalRecordCount:0,_bufferSize:0,_recordCount:0,TRENDSTYLE:{TRENDSTYLE_UNDEFINED:0,TRENDSTYLE_ORIGINAL:1,TRENDSTYLE_NEW:2},_trendStyle:0,MAX_SEQUENCE:Math.pow(2,32)-1,_recordClass:q,_range:null,_traces:null,_last:-1,_more:-1,_records:null,_resultFlag:null,_firstSequence:-1,firstSequence:-1,seqFetchRetries:0,_MAXRETRIES:2,trend:null,datam:null,constructor:function(a){k.mixin(this,a)},load:function(a,
b,c){this.trend=a;this.datam=b;a._logType==l.objectTypes.OBJID_TREND_LOG_MULTIPLE&&(this._recordClass=t);var d=this._fetch(c),f=k.hitch(this,function(a){d.reject(a);this.onError(a)});d.then(k.hitch(this,function(c){try{switch(a._logType){case l.objectTypes.OBJID_TREND_LOG:this._decodeSTL(a,b,c);break;case l.objectTypes.OBJID_TREND_LOG_MULTIPLE:this._decodeMTL(a,b,c);break;default:f("Error - No Log Type Set")}this.onLoad(this)}catch(I){f("Error loading device data",I)}}),k.hitch(this,f));return d},
_buildTempTraces:function(){for(var a={name:"",mnemonic:"",data:[],allData:[],min:null,max:null,hMin:null,hMax:null,isChartable:!0},b=[],c=0;c<this.datam.objects.length;c++){var d=k.clone(a);d.name=this.datam.objects[c].name;d.mnemonic=this.datam.objects[c].mnemonic;b[c]=d}return b},addRecordMTL:function(a,b){for(var c=0;c<b.length;c++)"ok"!==a.status?this.addRecord(a,a.status,a.status,b[c]):this.addRecord(a,a.status,a[b[c].mnemonic],b[c]);return a},addRecord:function(a,b,c,d){a.status=b;a[d.mnemonic]=
c;this.addTraceData(a,d);return a},_decodeSTL:function(a,b,c){var d=null;if(this.hasNewLogs){var d=c,f=new Date;c=6E4*f.getTimezoneOffset();var h;a.updateButtonClicked||(this.hasLogs=!1);a=[];var l=this._buildTempTraces();this.hasLogs=!0;for(var k=0;k<d.length;k++)switch(f=new Date(d[k].dt.d.y+1900,d[k].dt.d.m-1,d[k].dt.d.d,d[k].dt.t.h,d[k].dt.t.m,d[k].dt.t.s),f={dateTimeCol:f.getTime()-c,status:"ok",index:1},f[b.objects[0].mnemonic]=null,h="",h=d[k].ld.v,d[k].c){case 0:switch(d[k].ld.ary[1]){case 64:case 192:h=
g.logDeleted;break;case 32:h=g.logInterrupted;break;case 128:h=g.logDisabled;break;case 0:h=g.logEnabled;break;default:h=g.logStatusErr}a.push(this.addRecord(f,h,h,l[0]));break;case 1:case 2:case 3:case 4:case 5:a.push(this.addRecord(f,"ok",this.trend._formatValue(h,6,this.datam.objects[0].unit),l[0]));break;case 6:h=this._decodeBitString(d[k].ld,this.trend._objects[0].p.v);a.push(this.addRecord(f,"ok",h,l[0]));break;case 7:a.push(this.addRecord(f,"ok","(Null)",l[0]));break;case 8:a.push(this.addRecord(f,
"ok",g.bacnetError,l[0]));break;case 9:a.push(this.addRecord(f,g.timeChanged,g.timeChanged,l[0]))}this._addRecords(a,l)}return d},_decodeBitString:function(a,b){for(var c=[],d=[g.inAlarm,g.fault,g.overridden,g.outOfService],f="{",h="{",k=8-a.ary[0],n=0;n<k;n++)c.push(a.getBit(n));p.forEach(c,function(a,b){a?(f+=d[b],h+="T,"):(f+=",",h+="F,")},this);h=h.slice(0,-1);f+="}";h+="}";return b==l.propertyTypes.PROPID_STATUS_FLAGS?h.concat("...",f):h},_decodeMTL:function(a,b,c){try{var d=null;if(this.hasNewLogs){var d=
c,f,h=new Date,l;a.updateButtonClicked||(this.hasLogs=!1);a=[];var k=this._buildTempTraces();this.hasLogs=!0;for(c=0;c<d.length;c++)switch(h=new Date(d[c].dt.d.y+1900,d[c].dt.d.m-1,d[c].dt.d.d,d[c].dt.t.h,d[c].dt.t.m,d[c].dt.t.s),l={dateTimeCol:h.getTime()-A.getTimezoneOffsetMsec(h),status:"ok"},d[c].ld.c){case 0:switch(d[c].ld.da[0].d.ary[1]){case 64:case 192:f=g.logDeleted;break;case 32:f=g.logInterrupted;break;case 128:f=g.logDisabled;break;case 0:f=g.logEnabled;break;default:f=g.logStatusErr}l.status=
f;a.push(this.addRecordMTL(l,k));break;case 1:p.forEach(d[c].ld.da,function(a,c){try{var d=b.objects[c].mnemonic,f=this.trend._objects[c];l[d]=null;switch(a.c){case 0:case 1:case 2:case 3:case 4:l[d]=this.trend._formatValue(a.d.v,6,b.objects[c].unit);break;case 5:b.objects[c].unit=w.getAbbreviation(95);l[d]=this._decodeBitString(a.d,f.p.v);break;case 6:l[d]="(Null)";break;case 7:l[d]=g.bacnetError;break;default:l[d]=g.bacnetErrorUnsupportedData}}catch(O){console.error("Error Processing Values: ",
O)}},this);try{null!=a&&a.push(this.addRecordMTL(l,k))}catch(H){console.error("Error Pushing addRecordMTL Values: ",H)}break;case 2:l.status=g.timeChanged;a.push(this.addRecordMTL(l,k));break;default:l.status=g.bacnetError,a.push(this.addRecordMTL(l,k))}try{this._addRecords(a,k)}catch(H){console.error("Error Adding Records: ",H)}}return d}catch(H){console.error("Error _decodeMTL failed: ",H,"this",this)}},addTraceData:function(a,b){null==b.hMax&&(b.hMax=b.hMin=a.dateTimeCol);b.hMin=Math.min(b.hMin,
a.dateTimeCol);b.hMax=Math.max(b.hMax,a.dateTimeCol);if("ok"!==a.status||isNaN(parseFloat(a[b.mnemonic])))"{"===a[b.mnemonic][0]&&(b.isChartable=!1),b.data.push(null),b.allData.push(null);else{var c=parseFloat(a[b.mnemonic]);null==b.max&&(b.max=b.min=c);b.min=Math.min(b.min,c);b.max=Math.max(b.max,c);c={x:a.dateTimeCol,y:c};b.data.push(c);b.allData.push(c)}},_addRecords:function(a,b){var c,d;if((this._gridItems=k.clone(a))&&0<this._gridItems.length)if(this._gridItems[0].dateTimeCol<this._gridItems[this._gridItems.length-
1].dateTimeCol)for(c=0;c<a.length;c++)for(d=0;d<b.length;d++)this.datam.insertTimeValues(d,c,a[c].dateTimeCol,a[c][b[d].mnemonic]);else for(c=a.length-1;0<=c;c--)for(d=0;d<b.length;d++)this.datam.insertTimeValues(d,c,a[c].dateTimeCol,a[c][b[d].mnemonic])},_fetch:function(a){var b=[],c,f;0!==this.trend._recordCount?(c=Math.min(this.trend._recordCount,this.trend.sampleSize),f=this.trend._recordCount):f=c=this.trend.sampleSize;this._records=[];var l=new h;a=a?this._fetchByTime(a,c):this._fetchBySequence(c,
f);c=k.hitch(this,function(){this.hasNewLogs=!0;b=this._records;l.resolve(b)});f=k.hitch(this,function(a){console.error("_fetch handleError e: ",a);l.reject(this.trend.safeError(a,{name:d.substitute(g.problemInX,[g.stl]),message:this.trend._replace(g.couldNotLoad)+" "+g.dataProblem,suggestion:g.dataProblemFix}))});a.then(c,f);return l.promise},_fetchBySequence:function(a,b){var c=new h,d;-1===this.firstSequence?(d=this.trend._recordCount,this.trend.bFirstLiveRecord=b<this.trend._recordCount?!1:!0,
d=this.trend._totalRecordCount):(d=this.trend._recordCount-this.datam.getTimeLength(),this.trend.bFirstLiveRecord=a+this.datam.getTimeLength()<this.trend._recordCount?!1:!0,d=this.firstSequence-Math.min(d,a),d=Math.max(d,this.trend._totalRecordCount-this.trend._recordCount+1));this.bySequence(d,a,b,-1).then(k.hitch(this,function(a){c.resolve(a)}),k.hitch(this,function(a){c.reject(a)}));return c.promise},_fetchByTime:function(a,b){var c=new h,d=Math.abs(b),f,g;this.byTime(a,b).then(k.hitch(this,function(h){this._resultFlag=
h.o[0].pl[0].rr.r.f;this._records=h.o[0].pl[0].rr.r.d.l;this._firstSequence=h.o[0].pl[0].rr.r.fs.v;if(this.trend.io.isArchiveSupported||this._resultFlag.getBit(0))this.trend.bFirstLiveRecord=!0;if(-1!==this.firstSequence)if(this._firstSequence+this._records.length>=this.firstSequence){var l=this.firstSequence-this._firstSequence;this._records.splice(l,this._records.length-l);b=this._records.length}else this._records.length>=b&&(b+=this.firstSequence-(this._firstSequence+this._records.length));this._resultFlag.getBit(1)?
c.resolve({more:0,records:this._records,f:this._resultFlag}):(-1===this._firstSequence&&console.error("FSN \x3d\x3d -1","this._records",this._records,"this._firstSequence",this._firstSequence,"results",h,"time",a,"count",b),0<b?(g=this._firstSequence+this._records.length,b-=this._records.length):(g=this._firstSequence+1,b+=this._records.length),(this._more=Math.abs(b)<d?1:0)&&0!==b&&0<this._records.length?(0>b&&(b*=-1),f=this.bySequence(g,b,this.trend._recordCount,1),f.then(k.hitch(this,function(a){c.resolve(a)}))):
c.resolve({more:0,records:this._records,f:this._resultFlag}))}),k.hitch(this,function(a){c.reject(a)}));return c.promise},bySequence:function(a,b,c,d){var f=new h;this._more=1;this.seqFetchRetries=0;this.bySequenceHelper(a,d,Math.abs(b),0,!0,f,c);return f.promise},byTime:function(a,b){var c=new h;this._xhrReadRangeByTime(0<=b?1:-1,a,Math.abs(b)).then(k.hitch(this,function(a){c.resolve(a)}),k.hitch(this,function(a){c.reject(a)}));return c.promise},bySequenceHelper:function(a,b,c,d,f,g,h){h===d?this.seqFetchRetries++:
this.seqFetchRetries=0;f&&(this._trendStyle=this.TRENDSTYLE.TRENDSTYLE_UNDEFINED);0>=h||this.seqFetchRetries>this._MAXRETRIES?(this.seqFetchRetries=this._more=0,this.firstSequence=this._records.length?this._firstSequence:-1,g.resolve({more:0,records:this._records,f:this._resultFlag})):this._xhrReadRangeBySequence(b,a,c).then(k.hitch(this,function(d){var l=d.o[0].pl[0].rr.r.d.l;this._firstSequence=d.o[0].pl[0].rr.r.fs.v;this._resultFlag=d.o[0].pl[0].rr.r.f;d=h;var k=!0;f&&(-1!==this._firstSequence?
(this.firstSequence=this._firstSequence,this._trendStyle===this.TRENDSTYLE.TRENDSTYLE_UNDEFINED&&(this._trendStyle=this.firstSequence+l.length-1===this.trend._totalRecordCount?this.TRENDSTYLE.TRENDSTYLE_NEW:this.TRENDSTYLE.TRENDSTYLE_ORIGINAL),f=!1):(a++,k=!1,this._more=!0));k&&(this._more=this._resultFlag.getBit(2),this._last=this._resultFlag.getBit(1),b=1,this._trendStyle===this.TRENDSTYLE.TRENDSTYLE_NEW&&(b=-1),this._records=0<b?this._records.concat(l):l.concat(this._records),1===this._last&&0<
b?this._more=!1:a=this._trendStyle===this.TRENDSTYLE.TRENDSTYLE_NEW?this._firstSequence-1:this._firstSequence+l.length,h-=l.length,c-=l.length,this._records.length>=this.trend._recordCount&&(this._records.splice(this.trend._recordCount-1,this._records.length-this.trend._recordCount),this._more=!1));this._more&&0<c?(1>a?a=this.MAX_SEQUENCE+a:a>this.MAX_SEQUENCE&&(a-=this.MAX_SEQUENCE),this.bySequenceHelper(a,b,c,d,f,g,h)):g.resolve({more:0,records:this._records,f:this._resultFlag})}),k.hitch(this,
function(a){g.reject(a)}))},_checkDuplicateRecords:function(a,b){var c,d=1+b,f=!0,g,h;c=Math.min(Math.min(a.length,this._records.length-d),10);for(var l=0;l<c;l++,d++)if(g=this._records[d],h=a[l],g=new Date(g.dt.d.y+1900,g.dt.d.m-1,g.dt.d.d,g.dt.t.h,g.dt.t.m,g.dt.t.s),h=new Date(h.dt.d.y+1900,h.dt.d.m-1,h.dt.d.d,h.dt.t.h,h.dt.t.m,h.dt.t.s),g.getTime()!==h.getTime()){f=!1;break}h=g=null;return f},_xhrReadRangeByTime:function(a,b,d){var f=new h,g=new Date(b),l=g.getFullYear(),n=g.getMonth()+1,m=g.getDate(),
q=g.getDay();b=g.getHours();var t=g.getMinutes(),g=g.getSeconds(),l=new r(l,n,m,q);b=new x(b,t,g);b=new c(l,b);this._fetchLogs(a,b,d,7).then(k.hitch(this,function(a){f.resolve(a)}),k.hitch(this,function(a){f.reject(a)}));return f.promise},_xhrReadRangeBySequence:function(a,b,c){return this._fetchLogs(a,b,c,6)},_fetchLogs:function(c,m,q,r){var t=new h;6===r&&(m=new u(m,l.primitiveTypes.UNSIGNED_INTEGER));c=[{o:new a(this.trend._logType,this.trend.pointInstance),pl:[{p:new u(l.propertyTypes.PROPID_LOG_BUFFER,
l.primitiveTypes.ENUMERATED),i:-1,rr:new n({i:m,f:new f([],l.primitiveTypes.BIT_STRING),c:new u(q*c,l.primitiveTypes.SIGNED_INTEGER),d:new b(new this._recordClass),fs:new u(0,l.primitiveTypes.UNSIGNED_INTEGER)},r)}]}];c={type:"bacnet",gid:"BTL",s:new v({device:this.trend.mainController},c),timeout:25E3,load:k.hitch(this,function(a){try{if(1==a.e&&"rc/bacnet/io/Error"===a.o[0].pl[0].v.declaredClass&&37==a.o[0].pl[0].v.co.v)throw new z({name:d.substitute(g.problemInX,[g.stl]),message:this.trend._replace(g.couldNotLoad)+
" "+g.dataProblem,suggestion:g.dataProblemFix,e:a});this.service=a}catch(I){throw this.trend.safeError(I,{name:this.trend._replace(g.problemInX),message:this.trend._replace(g.couldNotLoad)+" "+g.dataProblem,suggestion:g.dataProblemFix});}}),error:function(a){}};rc.xhr.request(c).then(k.hitch(this,function(a){t.resolve(a);this.trend._onClearTimeout()}),k.hitch(this,function(a){t.reject(a)}));this.trend.onRestartTimer(25);return t.promise},_reload:function(){this._resumeUpdating=!0;this._stopFetch();
this._isRendered=!1;this._range=[];return this._fetch()},_stopFetch:function(){this.stopUpdating();this._endUpdate()},onLoad:function(){},onError:function(){},destroy:function(){this.datam=this.trend=this._range=this.b=null}})})},"rc/bacnet/io/LogMultipleRecord":function(){define(["dojo/_base/declare","./DateTime","./LogData","../error"],function(p,m,k,h){return p("rc/bacnet/io/LogMultipleRecord",null,{dt:null,ld:null,constructor:function(){this.dt=new m;this.ld=new k},encode:function(){var g=[];
g.push(14);g=g.concat(this.dt.encode());g.push(15);g.push(30);g=g.concat(this.ld.encode());g.push(31);return g},decode:function(g,d){if(14!=g[d++])return h.throwError(65,62),d;d=this.dt.decode(g,d);if(15!=g[d++]||30!=g[d++])return h.throwError(65,62),d;d=this.ld.decode(g,d);31!=g[d++]&&h.throwError(65,62);return d},toString:function(){return"{dateTime:"+this.dt.toString()+", logData:"+this.ld.toString()+"}"}})})},"rc/bacnet/io/LogData":function(){define("dojo/_base/declare ./Array ./Error ./Number ../enums ../error".split(" "),
function(p,m,k,h,g,d){return p("rc/bacnet/io/LogData",null,{c:0,da:null,encode:function(){var d,f=[];switch(this.c){case 0:case 2:d=this.da[this.da.length-1];f=d.d.encode(this.c<<4|8);break;case 1:for(var g=0;g<this.da.length;g++)f.push(30),d=this.da[g],f=f.concat(d.d.encode(d.c<<4|8)),f.push(31)}return f},decode:function(l,f){var r,c;this.c=(l[f]&240)>>>4;this.da=[];switch(this.c){case 0:c={d:new m([],g.primitiveTypes.BIT_STRING)};this.da.push(c);f=c.d.decode(l,f);break;case 1:for(f++;31!=l[f]&&
f<l.length;){c={};c.c=(l[f]&240)>>>4;r=0;switch(c.c){case 2:r+=5;case 1:r++;case 4:r++;case 3:r++;case 0:r++;case 6:c.d=new h(0,r);this.da.push(c);break;case 5:c.d=new m([],g.primitiveTypes.BIT_STRING);this.da.push(c);break;case 7:c.d=new k;this.da.push(c);f++;f=c.d.decode(l,f);f++;continue;case 8:break;default:return d.throwError(65,62),f}c.d&&(f=c.d.decode(l,f))}f++;break;case 2:c={d:new h(0,g.primitiveTypes.REAL)};this.da.push(c);f=c.d.decode(l,f);break;default:d.throwError(65,62)}return f},toString:function(){for(var d=
"{choice:"+this.c+", data:[",f=0;f<this.da.length;f++)d=this.da[f].c?d+("{choice:"+this.da[f].c+", data:"+this.da[f].d.toString()+"}, "):d+("{data:"+this.da[f].d.toString()+"}, ");this.da.length&&(d=d.slice(0,-2));return d+"]}"}})})},"rc/bacnet/io/LogRecord":function(){define("dojo/_base/declare ./Array ./DateTime ./Error ./Number ../enums ../error".split(" "),function(p,m,k,h,g,d,l){return p("rc/bacnet/io/LogRecord",null,{dt:null,c:0,ld:null,s:null,constructor:function(){this.dt=new k},encode:function(){var d=
[];d.push(14);d=d.concat(this.dt.encode());d.push(15);d.push(30);d=d.concat(this.ld.encode(this.c<<4|8));d.push(31);this.s&&(d=d.concat(this.s.encode(40)));return d},decode:function(f,k){var c;if(14!=f[k++])return k;k=this.dt.decode(f,k);if(15!=f[k++]||30!=f[k++])return k;this.c=(f[k]&240)>>>4;c=0;this.ld=null;switch(this.c){case 0:case 6:this.ld=new m([],d.primitiveTypes.BIT_STRING);k=this.ld.decode(f,k);break;case 3:c+=5;case 9:case 2:c++;case 5:c++;case 4:c++;case 1:c++;case 7:this.ld=new g(0,
c);k=this.ld.decode(f,k);break;case 8:k++;this.ld=new h;k=this.ld.decode(f,k);k++;break;case 10:return k;default:return l.throwError(65,62),k}if(31!=f[k++])return l.throwError(65,62),k;40==(f[k]&248)&&(this.s=new m([],d.primitiveTypes.BIT_STRING),k=this.s.decode(f,k));return k},toString:function(){return"{dateTime:"+this.dt.toString()+", choice:"+this.c+", logData:"+this.ld.toString()+(null!=this.s?", status:"+this.s.toString():"")+"}"}})})},"rc/bacnet/io/ReadRange":function(){define("dojo/_base/declare ./Array ./List ./LogRecord ./Number ../enums ../error".split(" "),
function(p,m,k,h,g,d,l){return p("rc/bacnet/io/ReadRange",null,{r:null,c:0,constructor:function(f,l){this.r=f||{i:new g(0,d.primitiveTypes.UNSIGNED_INTEGER),f:new m([],d.primitiveTypes.BIT_STRING),c:new g(0,d.primitiveTypes.SIGNED_INTEGER),d:new k(h()),fs:new g(0,d.primitiveTypes.UNSIGNED_INTEGER)};this.c=l||3},encode:function(){var d=[];this.r.i&&(d.push(this.c<<4|14),d=d.concat(this.r.i.encode()),this.r.c.t=3,d=d.concat(this.r.c.encode()),d.push(this.c<<4|15));return d},decode:function(f,h){var c;
h=this.r.f.decode(f,h);c=new g(0,d.primitiveTypes.UNSIGNED_INTEGER);h=c.decode(f,h);if(94!=f[h++])return l.throwError(65,62),h;h=this.r.d.decode(f,h);this.r.c=c;if(95!=f[h++])return h;104==(f[h]&248)?("fs"in this.r||(this.r.fs=new g(0,d.primitiveTypes.UNSIGNED_INTEGER)),h=this.r.fs.decode(f,h)):this.r.fs.v=-1;return h},toString:function(){var d="{choice:"+this.c,d=d+(", range:{index:"+this.r.i.toString()),d=d+(", flags:"+this.r.f.toString()),d=d+(", count:"+this.r.c.toString()),d=d+(", data:"+this.r.d.toString()),
d=d+(", dataCount:"+this.r.d.l.length);return d+=", firstSequence:"+this.r.fs.toString()+"}}"}})})},"rc/bacnet/io/service/ReadRange":function(){define(["dojo/_base/declare","./ReadPropertyMultiple"],function(p,m){return p("rc/bacnet/io/service/ReadRange",m,{constructor:function(){this.inherited(arguments);this.s=26},updateSupportsMultiple:function(){this._s=this.s}})})},"rc/bacnet/_trend/io/Header":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/i18n!rc/nls/all dojo/promise/all dojo/string ../../enums ../../io/DeviceObjectPropertyReferenceList ../../io/Number ../../io/Object ../../io/service/ReadPropertyMultiple ../../Object ../../../_base/Error ../../../xhr".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return m("rc/bacnet/_trend/io/Header",[g],{b:null,isFloat:!1,logWrapped:!1,twoBanks:!1,interval:0,headerIndex:0,lastSampleTime:0,rawObjects:null,objects:null,units:null,isChanged:!0,constructor:function(a){this.b=a;this.objects=[];this.units=[];this.rawObjects=[];k.mixin(this,a)},load:function(a,b){this.trend=a;this.datam=b;var c=new h,d=k.hitch(this,function(a){c.reject(a);this.onError(a)});this._fetch(a).then(k.hitch(this,function(f){try{this._decode(a,
b,f).then(k.hitch(this,function(){c.resolve(this);this.onLoad(this)}),k.hitch(this,function(a){c.resolve(this);this.onLoad(this)}))}catch(A){d(A)}}),k.hitch(this,d));return c.promise},_fetch:function(g){this._recordCount=0;var h=[{o:new t(g._logType,g.pointInstance),pl:[{p:new b(r.propertyTypes.PROPID_RECORD_COUNT,r.primitiveTypes.ENUMERATED),i:-1,v:new b(0,r.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(r.propertyTypes.PROPID_LOG_DEVICE_OBJECT_PROPERTY,r.primitiveTypes.ENUMERATED),i:-1,v:new c},{p:new b(r.propertyTypes.PROPID_TOTAL_RECORD_COUNT,
r.primitiveTypes.ENUMERATED),i:-1,v:new b(0,r.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(r.propertyTypes.PROPID_BUFFER_SIZE,r.primitiveTypes.ENUMERATED),i:-1,v:new b(0,r.primitiveTypes.UNSIGNED_INTEGER)},{p:new b(r.propertyTypes.PROPID_LOG_INTERVAL,r.primitiveTypes.ENUMERATED),i:-1,v:new b(0,r.primitiveTypes.UNSIGNED_INTEGER)}]}];return rc.xhr.request({type:"bacnet",gid:"BTL",s:new q({device:g.mainController},h),load:k.hitch(this,function(b){try{if(1==b.e&&"rc/bacnet/io/Error"===b.o[0].pl[0].v.declaredClass)switch(b.o[0].pl[0].v.cl.v){case 0:case 1:case 7:throw new a({name:f.substitute(d.xNotFound,
[d.stl]),message:this.trend._replace(d.couldNotLoad)+" "+d.objNotFound,suggestion:d.objNotFoundFix,e:b.o[0].pl[0].v.toStringMsg()});default:throw new a("Problem in data.");}this.service=b;g._recordCount=this.service.o[0].pl[0].v.v;g._objects=this.service.o[0].pl[1].v.l;g._totalRecordCount=this.service.o[0].pl[2].v.v;g._bufferSize=this.service.o[0].pl[3].v.v;this.interval=10*this.service.o[0].pl[4].v.v}catch(z){throw g.safeError(z,{name:this.trend._replace(d.problemInX),message:this.trend._replace(d.couldNotLoad)+
" "+d.dataProblem,suggestion:d.dataProblemFix});}}),error:k.hitch(this,function(a){return g.safeError(a,{name:f.substitute(d.xNotFound,[d.stl]),message:this.trend._replace(d.couldNotLoad)+" "+d.hostOffline,suggestion:d.hostOfflineFix})})})},_decode:function(a,b,c){a._objects=this.service.o[0].pl[1].v.l;var d,f,g=new h,n=[];p.forEach(a._objects,function(c,g){null==c.d?(f=a.mainController,c.d=new t(r.objectTypes.OBJID_DEVICE,Number(a.mainController))):f=c.d.i;d=new u(f,c.o.t,c.o.i,c.p?c.p.v:null);b.addObject(a,
g,d,null);if(""==b.objects[g].unit&&2>=c.o.t){var h=this._fetchProperties(a,c);n.push(h);h.then(k.hitch(this,function(a){b.setUnit(a.o[0].pl[0].v.v,b.objects[g]);return a}),k.hitch(this,function(){return!0}))}},this);0==n.length?g.resolve(!0):l(n).then(k.hitch(this,function(){g.resolve(!0)}),k.hitch(this,function(a){g.resolve(!0)}));return g.promise},_fetchProperties:function(a,c){var d=c.d?c.d.i:a.mainController,f=[{o:new t(c.o.t,c.o.i),pl:[{p:new b(r.propertyTypes.PROPID_UNITS,r.primitiveTypes.ENUMERATED),
i:-1,v:new b(0,r.primitiveTypes.ENUMERATED)}]}];return rc.xhr.request({type:"bacnet",gid:"BTL",s:new q({device:d},f),error:function(a){this.error("_fetchProperties error: ",a)}})},log:function(){var a=Array.prototype.slice.call(arguments);a.unshift(this.declaredClass);console.log.apply(this,a)},onLoad:function(){this.emit("load",arguments)},onError:function(){this.emit("error",arguments)},destroy:function(){this.units=this.rawObjects=this.objects=this.b=null}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Device":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/string rc/bacnet/enums rc/bacnet/io/Array rc/bacnet/_trend/io/Device rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/ReadRange rc/bacnet/io/service/ReadRange rc/_base/Error".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Device",[f],{systemId:null,constructor:function(a,b){b&&(this.systemId=b)},_fetchLogs:function(a,f,p,x){var n=new k;6===x&&(f=new c(f,d.primitiveTypes.UNSIGNED_INTEGER));a=[{o:new b(this.trend._logType,this.trend.pointInstance),pl:[{p:new c(d.propertyTypes.PROPID_LOG_BUFFER,d.primitiveTypes.ENUMERATED),i:-1,rr:new t({i:f,f:new l([],d.primitiveTypes.BIT_STRING),c:new c(p*a,d.primitiveTypes.SIGNED_INTEGER),
d:new r(new this._recordClass),fs:new c(0,d.primitiveTypes.UNSIGNED_INTEGER)},x)}]}];a={type:"bacnetSystem",gid:"BTL",systemId:this.systemId,s:new q({device:this.trend.mainController},a),timeout:25E3,load:m.hitch(this,function(a){try{if(1==a.e&&"rc/bacnet/io/Error"===a.o[0].pl[0].v.declaredClass&&37==a.o[0].pl[0].v.co.v)throw new u({name:g.substitute(h.problemInX,[h.stl]),message:this.trend._replace(h.couldNotLoad)+" "+h.dataProblem,suggestion:h.dataProblemFix,e:a});this.service=a}catch(y){throw this.trend.safeError(y,
{name:this.trend._replace(h.problemInX),message:this.trend._replace(h.couldNotLoad)+" "+h.dataProblem,suggestion:h.dataProblemFix});}}),error:function(a){}};rc.xhr.request(a).then(m.hitch(this,function(a){n.resolve(a);this.trend._onClearTimeout()}),m.hitch(this,function(a){n.reject(a)}));this.trend.onRestartTimer(25);return n.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Header":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/string rc/bacnet/_trend/io/Header rc/bacnet/enums rc/bacnet/io/DeviceObjectPropertyReferenceList rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/_base/Error".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/bacnet/Header",[g],{systemId:null,constructor:function(b,c){this.systemId=c},_fetch:function(g){this._recordCount=0;var q=[{o:new r(g._logType,g.pointInstance),pl:[{p:new f(d.propertyTypes.PROPID_RECORD_COUNT,d.primitiveTypes.ENUMERATED),i:-1,v:new f(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new f(d.propertyTypes.PROPID_LOG_DEVICE_OBJECT_PROPERTY,d.primitiveTypes.ENUMERATED),i:-1,v:new l},{p:new f(d.propertyTypes.PROPID_TOTAL_RECORD_COUNT,
d.primitiveTypes.ENUMERATED),i:-1,v:new f(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new f(d.propertyTypes.PROPID_BUFFER_SIZE,d.primitiveTypes.ENUMERATED),i:-1,v:new f(0,d.primitiveTypes.UNSIGNED_INTEGER)},{p:new f(d.propertyTypes.PROPID_LOG_INTERVAL,d.primitiveTypes.ENUMERATED),i:-1,v:new f(0,d.primitiveTypes.UNSIGNED_INTEGER)}]}];return rc.xhr.request({type:"bacnetSystem",gid:"BTL",systemId:this.systemId,s:new c({device:g.mainController},q),load:m.hitch(this,function(c){try{if(1==c.e&&"rc/bacnet/io/Error"===
c.o[0].pl[0].v.declaredClass)switch(c.o[0].pl[0].v.cl.v){case 0:case 1:case 7:throw new b({name:h.substitute(k.xNotFound,[k.stl]),message:this.trend._replace(k.couldNotLoad)+" "+k.objNotFound,suggestion:k.objNotFoundFix,e:c.o[0].pl[0].v.toStringMsg()});default:throw new b("Problem in data.");}this.service=c;g._recordCount=this.service.o[0].pl[0].v.v;g._objects=this.service.o[0].pl[1].v.l;g._totalRecordCount=this.service.o[0].pl[2].v.v;g._bufferSize=this.service.o[0].pl[3].v.v;this.interval=10*this.service.o[0].pl[4].v.v}catch(a){throw g.safeError(a,
{name:this.trend._replace(k.problemInX),message:this.trend._replace(k.couldNotLoad)+" "+k.dataProblem,suggestion:k.dataProblemFix});}}),error:m.hitch(this,function(b){return g.safeError(b,{name:h.substitute(k.xNotFound,[k.stl]),message:this.trend._replace(k.couldNotLoad)+" "+k.hostOffline,suggestion:k.hostOfflineFix})})})},_fetchProperties:function(b,g){var h=g.d?g.d.i:b.mainController,a=[{o:new r(g.o.t,g.o.i),pl:[{p:new f(d.propertyTypes.PROPID_UNITS,d.primitiveTypes.ENUMERATED),i:-1,v:new f(0,d.primitiveTypes.ENUMERATED)}]}];
return rc.xhr.request({type:"bacnetSystem",gid:"BTL",systemId:this.systemId,s:new c({device:h},a),error:function(a){this.error("_fetchProperties error: ",a)}})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Resources":function(){define("dojo/_base/declare dojo/_base/lang rc/sys/cunit rc/sys/decpnt webview/sys/desc webview/sys/job".split(" "),function(p,m,k,h,g,d){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Resources",null,{systemId:null,
constructor:function(d){this.systemId=d},load:function(){var l=g.loadSystemOnce(this.systemId);l.then(m.hitch(this,function(){return h.loadOnce()})).then(m.hitch(this,function(){return k.loadSystemOnce(this.systemId)}));l.always(m.hitch(this,function(){return d.loadSystemOnce(this.systemId)}));return l}})})},"rc/bacnet/_trend/io/Loader":function(){define(["dojo/_base/declare","./Archive","./Bacnet","../DataManager","rc/reliable/_trend/io/Loader"],function(p,m,k,h,g){return p("rc/bacnet/_trend/io/Loader",
g,{dataManagerClass:h,liveDataClass:k,archiveDataClass:m,resetData:function(d){this.inherited(arguments);this.l.d.firstSequence=-1}})})},"rc/reliable/_trend/io/Loader":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/topic ./Archive ./Reliable ./Resources ../DataManager ../../../date".split(" "),function(p,m,k,h,g,d,l,f,r,c){return p("rc/reliable/_trend/io/Loader",[h],{datam:null,_r:null,l:null,a:null,totalArchiveRecords:0,totalLiveRecords:0,numTimesArchive:0,
numTimesLive:0,isArchiveSupported:null,liveFirst:!0,dateFirstArchive:0,dateLastArchive:0,dateSelectedFirst:0,dateSelectedLast:0,dateSelectedDiff:0,dataManagerClass:r,liveDataClass:l,archiveDataClass:d,resourceClass:f,_previousArchiveState:null,constructor:function(b){this._r=new this.resourceClass;this.datam=new this.dataManagerClass;this.l=new this.liveDataClass;this.a=new this.archiveDataClass({l:this})},load:function(b){var d=new k,f=b.get("sampleSize");this.numTimesLive=this.l.datam.getTimeLength();
var g=this.a._fetchTotalRecordCount(b.pointName.toMnemonic()),a=m.hitch(this,function(a){0<a?(this.totalArchiveRecords=a,this.isArchiveSupported=this.a.enabled=!0):(this.isArchiveSupported=this.a.enabled=!1,this.numTimesArchive=this.totalArchiveRecords=0);var g=m.hitch(this,function(){this.a.validatePoints(this.l.datam);this.datam.removeAll(!0);this.dateFirstArchive=this.a.dateFirst;this.dateLastArchive=this.a.dateLast;this.numTimesLive=this.l.datam.getTimeLength();this.numTimesArchive=this.a.enabled?
this.a.datam.getTimeLength():0;if(0===this.numTimesArchive&&0===this.numTimesLive)return h("No live or archive logs found"),d.promise;0===this.dateSelectedFirst&&0===this.dateSelectedLast&&(this.dateSelectedLast=this.l.dateLast);0<this.dateSelectedFirst?(this.datam.dateSelectedFirst=this.dateSelectedFirst,this.datam.dateSelectedLast=0):0<this.dateSelectedLast&&(this.datam.dateSelectedLast=this.dateSelectedLast,this.datam.dateSelectedFirst=0);0<this.numTimesLive&&(0===this.dateSelectedLast||this.l.datam.getFirstTime()<=
this.dateSelectedLast)&&this.datam.merge(this.l.datam,f);0<this.numTimesArchive&&(this.datam.merge(this.a.datam,f),this.numTimesLive=this.l.datam.getTimeLength());0<this.dateSelectedLast&&(this.datam.trimFromTime(this.dateSelectedLast,f,!0),this.datam.times.length>f?this.datam.trimExtra(f):this.datam.times.length<f&&this.datam.mergeOld(f,!1));0<this.dateSelectedFirst&&this.datam.times.length>f&&this.datam.trimToTime(this.dateSelectedFirst,f,!0);this.totalLiveRecords=b.bFirstLiveRecord?this.numTimesLive:
b._recordCount;this.datam.dateSelectedFirst=this.datam.times[0];this.datam.dateSelectedLast=this.datam.times[this.datam.times.length-1];this.datam.dateSelectedDiff=this.dateSelectedLast-this.dateSelectedFirst;d.resolve(this);this.onLoad(this);this.checkState();return d.promise}),h=m.hitch(this,function(a){d.reject(a);this.checkState();this.onError(a)}),k=m.hitch(this,function(){var a;if(b.bFirstLiveRecord)return g();if(this.l.datam.getTimeLength())return this.l.datam.getFirstTime()>this.dateSelectedFirst?
this.l.load(b,f,this.dateSelectedFirst).then(g,g):g();a=0;this.a.enabled&&(a=this.a.datam.getLastTime(),a+=c.getTimezoneOffsetMsec(a));return this.l.load(b,f,a).then(g,g)});a=m.hitch(this,function(){var a=this.dateSelectedLast;this.dateSelectedFirst||this.dateSelectedLast||(a=new Date,a.setDate(a.getDate()+2),a=a.getTime());this.dateSelectedFirst>this.dateLastArchive&&(a=this.dateLastArchive,this.dateSelectedFirst=0);return this.a.load(b,f,this.dateSelectedFirst,a).always(k)});this.a.enabled&&0<this.totalArchiveRecords&&
this.dateSelectedFirst<=this.dateLastArchive?this._r.load().always(a):this._r.load().always(k)});g.always(a);return d.promise},checkState:function(){null!==this._previousArchiveState&&this.a.enabled!==this._previousArchiveState&&g.publish("archiveStateChanged",!0);this._previousArchiveState=this.a.enabled},getDateRange:function(){return[this.getDateFirst(),this.getDateLast()]},getDateFirst:function(){return this.a&&this.a.dateFirst?this.a.dateFirst:this.l.dateFirst},getDateLast:function(){return this.l.dateLast?
this.l.dateLast:this.a.dateLast},buildSliderInfo:function(){var b=this.getDateFirst(),c=this.getDateLast(),d=this.datam.times.length?this.datam.times.length:this.numTimesArchive+this.numTimesLive,f=this.datam.getTimeLength()?this.datam.getFirstTime():this.datam.dateSelectedFirst,a=this.datam.getTimeLength()?this.datam.getLastTime():this.datam.dateSelectedLast;return{current:{first:f,last:a,diff:a-f,count:d},total:{first:b,last:c,count:d},sample:{minimum:10,maximum:Math.min(2E3,this.totalArchiveRecords+
this.totalLiveRecords),count:d}}},getChartItems:function(){return this.datam.getChartItems()},getGridItems:function(){return this.datam.getGridItems()},onLoad:function(){this.emit("load")},onError:function(){this.emit("error")},resetData:function(b){this.dateFirstArchive=this.dateLastArchive=this.dateSelectedLast=this.dateSelectedFirst=0;this.datam.removeAll();this.l.datam.removeAll();this.a.datam.removeAll();b.bFirstLiveRecord=!1},destroy:function(){this.l=this.datam=this.a=this._r=null;this.numTimesLive=
this.totalArchiveRecords=this.numTimesArchive=0;this.isArchiveSupported=null},logTime:function(b,c){}})})},"rc/reliable/_trend/io/Reliable":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented ./Header ./Device ../DataManager ../../../sys/job".split(" "),function(p,m,k,h,g,d,l,f){return p("rc/reliable/_trend/io/Reliable",[h],{h:null,d:null,datam:null,dateFirst:0,dateLast:0,BANK_SIZE:32,constructor:function(){this.h=new g({r:this});this.d=new d({r:this});this.datam=new l;
this.datam.dataSource=this.datam.DS_LIVE},load:function(d){this.datam.removeAll();var c=new k;d.isLC=f.isLC(d.pointName);d.isLC&&(this.BANK_SIZE=2);var b=m.hitch(this,function(b){this.dateFirst=this.datam.getFirstTime();this.dateLast=this.datam.getLastTime();c.resolve(b);this.onLoad(b);return c.promise}),g=m.hitch(this,function(b){c.reject(b);this.onError(b);return b}),h=m.hitch(this,function(){return this.d.load(d,this.datam).then(b,g)});this.h.load(d,this.datam).then(h,g);return c.promise},onLoad:function(){this.emit("load")},
onError:function(){this.emit("error")},destroy:function(){this.h=this.datam=this.d=null}})})},"rc/reliable/_trend/io/Header":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/i18n!rc/nls/all ../../Point ../../unit ../../../_base/Error ../../../util/encoding/base16 ../../../xhr".split(" "),function(p,m,k,h,g,d,l,f,r,c,b){return m("rc/reliable/_trend/io/Header",[g],{r:null,isFloat:!1,logWrapped:!1,twoBanks:!1,interval:0,headerIndex:0,lastSampleTime:0,
rawObjects:null,objects:null,units:null,isChanged:!0,constructor:function(b){this.objects=[];this.units=[];this.rawObjects=[];k.mixin(this,b)},load:function(b,c){var d=new h,a=k.hitch(this,function(a){d.reject(a);this.onError(a)});this._fetch(b).then(k.hitch(k.hitch(this,function(f){try{this._decode(b,c,f),d.resolve(this),this.onLoad(this)}catch(v){a(v)}})),k.hitch(a));return d.promise},_fetch:function(b){var c=b.pointName,f=new h,a,g={gid:"TL",type:"rcp",method:"GET",cmdObj:{dest:c.mainController,
subt:c.subnetType,subd:c.subController,src:0,cmd:10,xl:Math.floor((c.comInstance-1)/this.r.BANK_SIZE),xh:0,cnt:0},load:k.hitch(this,function(g){g=g.data;if(1>g.length)g=new r({name:b._replace(d.problemInX),message:b._replace(d.couldNotLoad)+" "+d.objNotFound,suggestion:d.objNotFoundFix}),f.reject(g);else{a=b.isLC?23:48;var h=(c.comInstance-1)%this.r.BANK_SIZE*a;g=g.slice(h,h+a);f.resolve(g)}}),error:k.hitch(this,function(a){console.error("_fetch","error",a);f.reject(a)})};rc.xhr.request(g);return f.promise},
_decode:function(b,d,g){var a=[],h=[],m,q,r;b.isLC?(this.twoBanks=m=!1,this.headIndex=c.toIntEnd(g.slice(11,13)),this.lastSampleTime=c.toIntEnd(g.slice(18,22)),this.logWrapped=g[13],q=1E3*(g[8]+60*g[9]+3600*g[10]),r=g.slice(14,18),g=g.slice(0,8)):(m=g[35]&2,this.twoBanks=0==g[36],this.headIndex=c.toIntEnd(g.slice(32,34)),this.lastSampleTime=c.toIntEnd(g.slice(22,26)),this.logWrapped=g[34],q=1E3*(g[26]+60*g[27]+3600*g[28]),r=g.slice(38,44),g=g.slice(10,22));0===q&&(q=1E3);if(0!=this.lastSampleTime&&
(this.headIndex=m?4*this.headIndex:2*this.headIndex,0!==Math.max.apply(null,g))){for(var t,u,A=0;A<g.length;A+=2)if(t=c.toIntEnd(g.slice(A,A+2)),0===t)a.push(null),d.addPlaceholderObject();else{u=new l(t,b.pointName);a.push(u);var B=A/2;t=r[B];t>f.analog.length&&(t=0);h.push(f.getAnalog(f.getAnalogIndex(t,u)));d.addObject(b,B,u,t)}b=function(a,b){return k.isArray(a)&&k.isArray(b)&&a.length==b.length?p.every(a,function(a,c){return a==b[c]},this):!1};q!=this.interval||m!=this.isFloat||b(g,this.rawObjects)?
this.isChanged=!0:this.isChanged=!1;this.isFloat=m;this.interval=q;this.rawObjects=g;this.objects=a;this.units=h}},log:function(){var b=Array.prototype.slice.call(arguments);b.unshift(this.declaredClass);console.log.apply(this,b)},onLoad:function(){this.emit("load")},onError:function(){this.emit("error")},destroy:function(){this.units=this.rawObjects=this.objects=this.b=null}})})},"rc/reliable/_trend/io/Device":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented dojo/i18n!rc/nls/all ../../../util/encoding/base16 ../../../xhr".split(" "),
function(p,m,k,h,g,d,l){return p("rc/reliable/_trend/io/Device",[h],{r:null,hasLogs:!1,hasNewLogs:!1,lastLogTime:0,constructor:function(d){m.mixin(this,d)},load:function(d,g){var c=new k,b=this._fetch(d),f=m.hitch(this,function(b){c.reject(b);this.onError(b)});b.then(m.hitch(m.hitch(this,function(b){try{this._decode(d,g,b),d.bFirstLiveRecord=!0,c.resolve(this),this.onLoad(this)}catch(u){f(u)}})),m.hitch(f));return c.promise},_fetch:function(d){var f=new k,c=this.r.h.twoBanks,b=[],g=m.hitch(this,function(a){b=
b.concat(a.data);c?(c=0,l.xh=1,this._fetchCmd(l).then(g,h)):f.resolve(b)}),h=m.hitch(this,function(a){f.resolve(a)});d=d.pointName;var l={dest:d.mainController,subt:d.subnetType,subd:d.subController,src:0,cmd:22,xl:d.comInstance-1,xh:0,cnt:0};this._fetchCmd(l).then(g,h);return f.promise},_fetchCmd:function(d){var f=new k;d={gid:"TL",type:"rcp",method:"GET",cmdObj:d,load:m.hitch(this,function(c){f.resolve(c)}),error:m.hitch(this,function(c){f.reject(c)})};rc.xhr.request(d);return f.promise},_decode:function(d,
h,c){try{this.hasLogs=!1;this.hasNewLogs=!0;var b,f,k,l,a,n,m,r,p;this.r.h.isFloat?(f=4,a="toFloatEnd"):(f=2,a="halfFloatToFloatEnd");l=this.r.h.interval/1E3;n=d.isLC?4*f:6*f;p=b=0;if(this.r.h.logWrapped)for(r=c.length/n,k=this.r.h.lastSampleTime-l*r,m=this.r.h.headIndex;m<c.length;m+=n)b++,this._decodeOneRow(h,c,m,p++,a,f,1E3*(k+b*l));else r=this.r.h.headIndex/n,k=this.r.h.lastSampleTime-l*r;for(m=0;m<this.r.h.headIndex;m+=n)b++,this._decodeOneRow(h,c,m,p++,a,f,1E3*(k+b*l));this.lastLogTime==h.getFirstTime()&&
(this.hasNewLogs=!1);h.getTimeLength()&&(this.lastSampleTime=h.getLastTime(),this.hasLogs=!0)}catch(z){throw d.safeError(z,{name:d._replace(g.problemInX),message:d._replace(g.couldNotLoad)+" "+g.dataProblem,suggestion:g.dataProblemFix});}},_decodeOneRow:function(f,g,c,b,h,l,k){for(var a=0;a<this.r.h.objects.length;a++)if(null!=this.r.h.objects[a]){var n=c+a*l,m=c+(a+1)*l,n="Count"==this.r.h.units[a]?d.toUnsignedEnd(g.slice(n,m)):d[h](g.slice(n,m));f.insertTimeValues(a,b,k,n)}},onLoad:function(){this.emit("load")},
onError:function(){this.emit("error")},destroy:function(){this.r=null}})})},"rc/reliable/_trend/io/Resources":function(){define("dojo/_base/declare dojo/_base/lang ../../../sys/cunit ../../../sys/decpnt ../../../sys/desc ../../../sys/job".split(" "),function(p,m,k,h,g,d){return p("rc/reliable/_trend/io/Resources",null,{load:function(){var l=g.loadOnce();l.then(m.hitch(this,function(){return h.loadOnce()}),m.hitch(this,function(){return k.loadOnce()}));l.always(m.hitch(this,function(){return d.loadOnce()}));
return l}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Loader":function(){define(["dojo/_base/declare","rc/reliable/_trend/io/Loader","./Archive","./Reliable","./Resources"],function(p,m,k,h,g){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Loader",m,{liveDataClass:h,archiveDataClass:k,resourceClass:g,systemId:null,constructor:function(d){this.systemId=d;this.l=new this.liveDataClass(this.systemId);this._r=new this.resourceClass(this.systemId);
this.a=new this.archiveDataClass({l:this,systemId:this.systemId})}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Archive":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/Deferred","rc/reliable/_trend/io/Archive"],function(p,m,k,h,g){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Archive",g,{_path:"RCArchive/",systemId:null,constructor:function(d){d.systemId&&(this.systemId=d.systemId)},_validateArchiveConfig:function(){var d=
new h;d.resolve(!0);return d.promise},_fetch:function(d,g,f,r){var c="",b="";0<f&&(c=this._dateToServiceFormat(f));r&&(b=this._dateToServiceFormat(r));var l=new h;f={gid:"TL",type:"archive",method:"GET",path:this._path+"GetPagedTLData",url:this._path+"GetPagedTLData",cmdObj:{strMne:d.pointName.toMnemonic(),dateStart:c,dateEnd:b,sampleSize:g,systemId:this.systemId},load:m.hitch(this,function(b){try{if(b.data.Error&&console.error(b.data.Error),null!==b.data.DateFirst){var c=k.parse(b.data.DateFirst,
{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a"});this.dateFirst=c.getTime()-6E4*c.getTimezoneOffset();c=k.parse(b.data.DateLast,{selector:"date",datePattern:"MM/dd/yyyy HH:mm:ss a"});this.dateLast=c.getTime()-6E4*c.getTimezoneOffset();this._decode(d,b.data,this.dateFirst,this.dateLast,g);l.resolve(!0)}else l.resolve(!1)}catch(a){console.error("Error could not parse or decode the dateFirst or dateLast from the widget: ",a),l.reject(a)}}),error:m.hitch(this,function(b){b=Error("Error fetching archive data:"+
b.message);l.reject(b);return b})};rc.xhr.request(f);return l.promise},_fetchTotalRecordCount:function(d){var g=new h;d={gid:"TL",type:"archive",method:"GET",path:this._path+"GetTotalRecords",url:this._path+"GetTotalRecords",cmdObj:{strMne:d,systemId:this.systemId},load:m.hitch(this,function(d){g.resolve(d.data)}),error:m.hitch(this,function(d){g.reject(d)})};rc.xhr.request(d);return g.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Reliable":function(){define(["dojo/_base/declare",
"rc/reliable/_trend/io/Reliable","./Header","./Device"],function(p,m,k,h){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Reliable",m,{systemId:null,constructor:function(g){this.systemId=g;this.h=new k({r:this},g);this.d=new h({r:this},g)}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Header":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all rc/reliable/_trend/io/Header rc/_base/Error".split(" "),
function(p,m,k,h,g,d,l){return m("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Header",[d],{systemId:null,constructor:function(d,g){g&&(this.systemId=g)},_fetch:function(d){var f=d.pointName,c=new h,b,m={gid:"TL",type:"rcpSystem",method:"GET",cmdObj:{dest:f.mainController,subt:f.subnetType,subd:f.subController,src:0,cmd:10,xl:Math.floor((f.comInstance-1)/this.r.BANK_SIZE),xh:0,cnt:0,systemId:this.systemId},load:k.hitch(this,function(h){h=h.data;if(1>h.length)h=new l({name:d._replace(g.problemInX),
message:d._replace(g.couldNotLoad)+" "+g.objNotFound,suggestion:g.objNotFoundFix}),c.reject(h);else{b=d.isLC?23:48;var k=(f.comInstance-1)%this.r.BANK_SIZE*b;h=h.slice(k,k+b);c.resolve(h)}}),error:k.hitch(this,function(b){console.error("_fetch","error",b);c.reject(b)})};rc.xhr.request(m);return c.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Device":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","rc/reliable/_trend/io/Device"],function(p,
m,k,h){return p("webview/features/navigationGroups/groupRendering/groupNodes/trends/rcp/Device",[h],{systemId:null,constructor:function(g,d){d&&(this.systemId=d)},_fetchCmd:function(g){g.systemId=this.systemId;var d=new k;g={gid:"TL",type:"rcpSystem",method:"GET",cmdObj:g,load:m.hitch(this,function(g){d.resolve(g)}),error:m.hitch(this,function(g){d.reject(g)})};rc.xhr.request(g);return d.promise}})})},"webview/features/navigationGroups/groupRendering/groupNodes/TextNode":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-class dojo/dom-style dojo/i18n!webview/nls/navigationGroups dojo/text!./templates/TextNode.html dojo/topic webview/crossCutting/topicEvents ./_BasicNodeMixin ./_ResizableNodeMixin ../_HasNodeWithFontScalingMixin".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return h("webview/features/navigationGroups/GroupNodes/TextNode",[m,p,k,b,t,q],{WARNING_ICON_SIZE:15,WARNING_ICON_MARGIN_PX:4,navGroupStrings:l,templateString:f,_setDisplayTextAttr:function(b){this.displayValueNode.innerText=b;g.toggle(this.containerNode,"i-shortcut",!b||0===b.length)},_getNodeWithFontAttr:function(){return this.domNode},onHeightScaleFactorChange:function(b){this.inherited(arguments);this._scaleNodeIcons(b)},_scaleNodeIcons:function(b){var a=this.WARNING_ICON_SIZE*
b;b*=this.WARNING_ICON_MARGIN_PX;a+="px";a={width:a,height:a,margin:"auto "+b+"px"};d.set(this.faultIconNode,a);d.set(this.manualHandNode,a)},onEditConfigurationClicked:function(b){this.builderStateManager.get("editMode")&&(r.publish(c.editNodeConfigurationClicked,this),this.set("selectedForEdit",!0));b.stopPropagation()}})})},"webview/features/navigationGroups/groupRendering/_HasNodeWithFontScalingMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","./_HasScaleFactorMixin"],
function(p,m,k,h){return p("webview/features/navigationGroups/_HasNodeWithFontScalingMixin",[h],{scaleFactor:1,_getNodeWithFontAttr:function(){throw"_getNodeWithFontAttr: Not Implemented";},_setNodeFontAttr:function(g){this._set("nodeFont",g);this.scaleFactorManager&&this._setFont()},_getNodeFontAttr:function(){return m.clone(this.nodeFont)},_setScaleFactorManagerAttr:function(g){this.inherited(arguments);this._setFont()},onHeightScaleFactorChange:function(g){this._setFont()},onWidthScaleFactorChange:function(g){this._setFont()},
_setFont:function(){if(this.scaleFactorManager&&this.get("nodeFont")){var g=this.scaleFactorManager.getScaledCssFontStyling(this.get("nodeFont"));k.set(this.get("nodeWithFont"),g);g&&g["font-size"]?this.set("scaledFontSize",parseFloat(g["font-size"])):this.set("scaledFontSize",0)}}})})},"webview/sys/alarmApi":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/Evented ../crossCutting/windowUtil ../xhrEnhanced".split(" "),function(p,m,k,h,g,d){p=p("webview/sys/alarmApi",[h],{_apiLoaded:null,
_lastSiteUrl:null,loadOnce:function(d){this._apiLoaded=new k;this._loadAlarmApiDetails(d).then(m.hitch(this,this._apiLoaded.resolve),m.hitch(this,this._apiLoaded.reject));return this._apiLoaded.promise},_loadAlarmApiDetails:function(h){var f=new k,l="AlarmApi";h&&(l=g.getFullPath().replace(/admin\/$/ig,h+"/"+l));"undefined"!==typeof this._alarmApiPath&&this._lastSiteUrl===h?f.resolve(this._alarmApiPath):(this._lastSiteUrl=h,d.get(l,{handleAs:"json",preventCache:!0}).then(m.hitch(this,function(c){c&&
c.alarmApiPath?(this._alarmApiPath=c.alarmApiPath,f.resolve(this._alarmApiPath)):f.reject()}),m.hitch(this,f.reject)));return f.promise}});webview.AlarmApi||(webview.AlarmApi=new p);return webview.AlarmApi})},"webview/features/navigationGroups/groupRendering/GroupRenderer":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-style dojo/on dojo/text!./templates/GroupRenderer.html dojo/topic webview/crossCutting/topicEvents ./_HasNodeWithFontScalingMixin ../../systemData/EditObjectDialog".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return h("webview/features/navigationGroups/groupRendering/GroupRenderer",[m,p,k,q],{groupId:null,scaleFactor:1,siteId:null,templateString:c,_dataRequester:null,_groupPresenter:null,postCreate:function(){this.inherited(arguments);this.own(b.subscribe(t.groupNodeClicked,g.hitch(this,this._openEditDialog)),b.subscribe(t.animationEdit,g.hitch(this,this._openHeadlessEditDialog)),b.subscribe(t.animationEditClose,g.hitch(this,this._closeHeadlessEditDialog)))},_setBackgroundDimensionsAttr:function(a){this.scaleFactorManager.set("backgroundDimensions",
a)},_setBuilderStateManagerAttr:function(a){this.own(a.watch("editMode",g.hitch(this,function(a,b,c){this._onChangeEditMode(c)})),a.watch("userEditInProgress",g.hitch(this,function(a,b,c){l.toggle(this.domNode,"edit-in-progress",c);c?this._groupPresenter.pauseUpdates():this._groupPresenter.restartUpdates()})));this._onChangeEditMode(a.get("editMode"));this._set("builderStateManager",a)},_setBackgroundImageSourceAttr:function(a){a&&""!==a?d.set(this.backgroundImage,"src",a):f.set(this.backgroundImage,
{background:"#000000 no-repeat center / cover"})},_setDefaultFontAttr:function(a){this.set("nodeFont",a)},_setGroupDetailsAttr:function(a){this.set("title",a.title);this.set("backgroundDimensions",{height:a.backgroundHeight,width:a.backgroundWidth});this._originalDimensions={height:a.backgroundHeight,width:a.backgroundWidth};this._set("groupDetails",a)},_setGroupIdAttr:function(a){this._set("groupId",Number(a))},_getNodeWithFontAttr:function(){return this.nodeContainer},_setSiteIdAttr:function(a){this._set("siteId",
Number(a))},_setTitleAttr:function(a){this._set("title",a)},onError:function(a){a&&"cancel"===a.dojoType||console.error(JSON.stringify(a))},onHeightScaleFactorChange:function(a){this.inherited(arguments);this._resizeCanvas()},onVisibilityChanged:function(){"hidden"===document.visibilityState?this._groupPresenter.pauseUpdates():!0!==this.builderStateManager.get("userEditInProgress")&&this._groupPresenter.restartUpdates()},onWidthScaleFactorChange:function(a){this.inherited(arguments);this._resizeCanvas()},
_onChangeEditMode:function(a){l.toggle(this.domNode,"edit-mode",a);l.toggle(this.domNode,"viewing-mode",!a)},_closeHeadlessEditDialog:function(){this.builderStateManager.set("userEditInProgress",!1);this._headlessEditPointDialog&&(this._headlessEditPointDialog.destroy(),this._headlessEditPointDialog=null)},_openHeadlessEditDialog:function(a){this.builderStateManager.set("userEditInProgress",!0);this._headlessEditPointDialog&&(this._headlessEditPointDialog.destroy(),this._headlessEditPointDialog=null);
this._headlessEditPointDialog=new u;this._headlessEditPointDialog.set("dialogPresenter",a);a.initializeForAnimation(this._headlessEditPointDialog)},_openEditDialog:function(a){this.builderStateManager.set("userEditInProgress",!0);this._editPointDialog||(this._editPointDialog=new u);r.once(this._editPointDialog,"hide",g.hitch(this,function(){this.builderStateManager.set("userEditInProgress",!1)}));this._editPointDialog.set("dialogPresenter",a);a.initialize(this._editPointDialog)},_resizeCanvas:function(){var a=
this.scaleFactorManager.get("backgroundDimensions"),b=this.scaleFactorManager.get("dimensionScaleFactors");a&&b&&(a={height:Math.floor(a.height*b.height)+"px",width:Math.floor(a.width*b.width)+"px"},f.set(this.backgroundImageContainer,a),f.set(this.nodeContainer,a),f.set(this.groupContainer,a))},destroy:function(){this._editPointDialog&&(this._editPointDialog.destroy(),this._editPointDialog=null);this._headlessEditPointDialog&&(this._headlessEditPointDialog.destroy(),this._headlessEditPointDialog=
null);this.inherited(arguments)}})})},"webview/features/systemData/EditObjectDialog":function(){define("dijit/ConfirmDialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!rc/nls/systemData dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/EditObjectDialog.html dojo/topic rc/util/notices webview/crossCutting/dialogs/DialogWithLoadingOverlayMixin ./PriorityArrayDialog dijit/Dialog dijit/form/Button dijit/form/FilteringSelect dijit/form/SimpleTextarea dijit/form/ValidationTextBox ../../bacnet/_widget/TimedInput".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x){return k("webview/features/systemData/EditObjectDialog",[p,v],{templateString:u,rcStrings:l,webviewStrings:r,systemDataStrings:f,reasonRequired:!1,hasPriorityArray:!1,OVERRIDE_VALUES:{AUTOMATIC:1,MANUAL:2,TIMED:3,OVERRIDE:4,SWITCH:5},postCreate:function(){this.inherited(arguments);this.own(b(this._digitalValueInput.textbox,"click",h.hitch(this,this._onClickDigitalSelector)),b(this._overrideSelector.textbox,"click",h.hitch(this,this._onClickOverrideSelector)))},
_setDialogPresenterAttr:function(a){this.dialogPresenter&&this.dialogPresenter.destroy();this._set("dialogPresenter",a)},_setHasPriorityArrayAttr:function(a){g.toggle(this._priorityArrayButton.domNode,"hidden",!a);this._priorityArrayButton.set("disabled",!a);this._set("hasPriorityArray",a)},_setObjectNameAttr:function(a){this._objectNameLabel.innerHTML=a;this._set("objectName",a)},_getObjectValueAttr:function(){return this._activeEditor.item?this._activeEditor.item.value:this._activeEditor.get("value")},
_setOverrideOptionsAttr:function(a){this._overrideSelector.set({store:new q(new t({data:a,idProperty:"value"})),value:-1})},_setPriorityArrayAttr:function(a){var b=null!=a;this.set("hasPriorityArray",b);this._set("priorityArray",a);this._priorityArrayDialog&&b&&this._priorityArrayDialog.set("priorityArray",a)},_getReasonAttr:function(){return this._reasonInput.get("value")},_setReasonAttr:function(a){this._reasonInput.reset();this._reasonInput.set("value",a)},_setReasonRequiredAttr:function(a){g.toggle(this.reasonRequiredSign,
"hidden",!a);this._reasonInput.set("required",a);this._set("reasonRequired",a)},_setSelectedOverrideOptionAttr:function(a){this._overrideSelector.set("value",a)},_setTimedOverrideAttr:function(a){this._timedOverrideInput.set("value",a)},_getTimedOverrideAttr:function(){var a=this.get("valueOverrideState");return this._isTimedOverride(a)?this._timedOverrideInput.get("value"):null},_getValueOverrideStateAttr:function(){return this._overrideSelector.get("value")},onError:function(b){this._priorityArrayDialog&&
this._priorityArrayDialog.hide();var d;d=b&&b.message?b.message:b&&b.errMSG?b.errMSG:b&&b.errorMessage?b.errorMessage:c.unexpectedError;n.widget.clear();a.publish("sticky",{type:"error",message:d});console.error(JSON.stringify(b))},onSuccess:function(){a.publish("alert",{message:l.success,type:"success"})},show:function(){this.set("initializing",!0);this.inherited(arguments)},showDigitalEditor:function(a,b){this._activeEditor=this._digitalValueInput;var c=new q(new t({idProperty:"name"}));m.forEach(b,
function(a,b){c.put({value:b,name:a})});this._digitalValueInput.set("store",c);this._digitalValueInput.set("value",a);g.toggle(this.domNode,"single-line-editor",!0);this._hideAllEditors();g.toggle(this._digitalValueInput.domNode,"hidden",!1)},showNumericEditor:function(a){this._activeEditor=this._numericValueInput;this._numericValueInput.set("value",a);g.toggle(this.domNode,"single-line-editor",!0);this._hideAllEditors();g.toggle(this._numericValueInput.domNode,"hidden",!1)},showTextBlobEditor:function(a){this._activeEditor=
this._textBlobInput;this._textBlobInput.set("value",a);g.toggle(this.domNode,"single-line-editor",!1);this._hideAllEditors();g.toggle(this._textBlobInput.domNode,"hidden",!1)},showTimeEditor:function(a){this._activeEditor=this._timeValueInput;this._timeValueInput.set("value",a);g.toggle(this.domNode,"single-line-editor",!1);this._hideAllEditors();g.toggle(this._timeValueInput.domNode,"hidden",!1)},showTextFieldEditor:function(a){this._activeEditor=this._textFieldInput;this._textFieldInput.set("value",
a);g.toggle(this.domNode,"single-line-editor",!0);this._hideAllEditors();g.toggle(this._textFieldInput.domNode,"hidden",!1)},toggleOverrideOptionsEnabled:function(a){this._overrideSelector.set("disabled",!a);this._timedOverrideInput.set("disabled",!a);a||this.set("priorityArray",null)},toggleOverrideOptionsVisible:function(a){g.toggle(this.domNode,"no-override-options",!a);g.toggle(this._timedContainer,"hidden",!0);g.toggle(this._reasonInput.domNode,"with-timed",!1);this.set("hasOverrideOptions",
a)},validate:function(){var a=!0;this.hasOverrideOptions&&this._isTimedOverride(this.get("valueOverrideState"))&&(a=this._timedOverrideInput.validate());(a=a&&this._reasonInput.validate()&&this._activeEditor.validate())||this._showInputValidationError();return a},_closeErrorDialog:function(){this._errorDialog.hide()},_hideAllEditors:function(){g.toggle(this._textBlobInput.domNode,"hidden",!0);g.toggle(this._textFieldInput.domNode,"hidden",!0);g.toggle(this._timeValueInput.domNode,"hidden",!0);g.toggle(this._numericValueInput.domNode,
"hidden",!0);g.toggle(this._digitalValueInput.domNode,"hidden",!0)},_isTimedOverride:function(a){return Number(a)===this.OVERRIDE_VALUES.TIMED},_onChangeValueOverrideOption:function(a){a=this._isTimedOverride(a);g.toggle(this._reasonInput.domNode,"with-timed",a);g.toggle(this._timedContainer,"hidden",!a)},_onClickDigitalSelector:function(){var a=this._digitalValueInput.get("value"),a=this._digitalValueInput.store.query({name:a})[0],b=0;a&&(b=1+a.value);(a=this._digitalValueInput.store.query({value:b})[0])||
(a=this._digitalValueInput.store.data[0]);this._digitalValueInput.set("value",a.name)},_onClickOverrideSelector:function(){if(!this._overrideSelector.get("disabled")){var a=1+Number(this._overrideSelector.get("value"));this._overrideSelector.store.query({value:a})[0]||(a=this._overrideSelector.store.data[0].value);this._overrideSelector.set("value",a)}},_onClickCancel:function(){this.hide()},_onClickOk:function(){this.dialogPresenter.sendData()},_onClickPriorityArrayButton:function(){this._priorityArrayDialog||
(this._priorityArrayDialog=new x,this.own(this._priorityArrayDialog,b(this._priorityArrayDialog,"relinquish",h.hitch(this,function(a){this.dialogPresenter.relinquishIndexes(a)})),b(this._priorityArrayDialog,"load",h.hitch(this,function(){this.dialogPresenter.reloadPriorityArray()}))));this._priorityArrayDialog.set("objectName",this.get("objectName"));this._priorityArrayDialog.set("priorityArray",this.get("priorityArray"));this._priorityArrayDialog.show()},_showInputValidationError:function(){this._errorDialog.show()},
destroy:function(){this.dialogPresenter.destroy();this.inherited(arguments)}})})},"webview/features/systemData/PriorityArrayDialog":function(){define("dgrid/Grid dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/_WidgetsInTemplateMixin dijit/Dialog dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/text!./templates/PriorityArrayDialog.html dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x){return r("webview/features/systemData/PriorityArrayDialog",[d,g],{templateString:x,rcStrings:t,webviewStrings:q,priorityNames:t.priorityNames,reasonRequired:!1,constructor:function(){this._gridStore=new v(new n({idProperty:"pnumber"}));this._createColumnStructure()},postCreate:function(){this.inherited(arguments);this._createGrid()},_setObjectNameAttr:function(a){this._objectNameLabel.innerHTML=a},_setPriorityArrayAttr:function(a){this._grid&&this._grid.clearSelection();
f.forEach(a,c.hitch(this,function(a,b){this._gridStore.put({pcheckbox:!1,pnumber:b+1,pname:this.priorityNames[b+1]||t.available+" "+(b+1),value:null!=a?a:t.relinquish})}));this._setHeight()},onLoad:function(){},onShow:function(){this._setHeight()},onRelinquish:function(){},_connectGrid:function(){this.own(u(this._grid,["dgrid-select","dgrid-deselect"],c.hitch(this,function(){this._relinquishButton.set("disabled",0===Object.keys(this._grid.selection).length)})))},_createColumnStructure:function(){this._columnStructure=
[h({selectorType:c.hitch(this,this._createSelectorCheckbox),id:"selectorCol",label:"",field:"pcheckbox",sortable:!1}),{id:"numberCol",label:"#",field:"pnumber",sortable:!1},{id:"nameCol",label:t.priorityName,field:"pname",sortable:!1},{id:"valueCol",label:t.value,field:"value",sortable:!1}]},_createGrid:function(){this._grid=new (r([p,m,k]))({selectionMode:"none",columns:this._columnStructure,sort:[{attribute:"pnumber",descending:!1}],store:this._gridStore},this.gridNode);this._connectGrid()},_createSelectorCheckbox:function(a,
d,f){a=new l({checked:a,onChange:c.hitch(this,function(a,b){b?this._grid.select(a):this._grid.deselect(a)},f.pnumber),value:!0});b.place(a.domNode,d,"only");return a.domNode},_onClickLoad:function(){this.onLoad()},_onClickClose:function(){this.hide()},_onClickRelinquish:function(){var a=[];f.forEach(Object.keys(this._grid.selection),c.hitch(this,function(b){!0===this._grid.selection[b]&&a.push(b)}));this.onRelinquish(a)},_setHeight:function(){this._grid.resize();var b=a(".priorities-grid .dgrid-scroller")[0].offsetTop,
b=a(".priorities-grid .dgrid-content")[0].clientHeight+b;this._grid.domNode.style.height=b+"px"}})})},"webview/bacnet/_widget/TimedInput":function(){define(["dijit/form/ValidationTextBox","dojo/_base/declare"],function(p,m){return m("webview/bacnet/_widget/TimedInput",p,{defaultValue:30,trim:!0,useSeconds:!1,useDefault:!0,buildRendering:function(){this.useSeconds?this.set("pattern","^(?:[0-9]{2}:){2}[0-9]{2}$"):this.set("pattern","^[0-9]{2}:[0-9]{2}$");this.inherited(arguments)},_getMinutesString:function(k){var h=
Math.floor(k/60);k%=60;var g="";10>h&&(g="0");g+=h+":";10>k&&(g+="0");return g+k},_getSecondsString:function(k){var h=Math.floor(k/3600),g=Math.floor(k/60);k%=60;var d="";10>h&&(d="0");d+=h+":";10>g&&(d+="0");d+=g+":";10>k&&(d+="0");return d+k},_getValueAttr:function(){var k=this.inherited(arguments),k=k.split(":"),h=0,g=0,d=0;switch(k.length){case 1:this.useSeconds?d=Number(k[0]):g=Number(k[0]);break;case 2:this.useSeconds?(g=Number(k[0]),d=Number(k[1])):(h=Number(k[0]),g=Number(k[1]));break;case 3:if(this.useSeconds){h=
Number(k[0]);g=Number(k[1]);d=Number(k[2]);break}default:throw"Invalid input";}return k=this.useSeconds?3600*h+60*g+d:60*h+g},_setValueAttr:function(k){if(isNaN(k))throw"Value must be a number";0>=k&&this.useDefault&&(k=this.defaultValue);k=this.useSeconds?this._getSecondsString(k):this._getMinutesString(k);this.inherited(arguments,[k])}})})},"webview/admin/panelFiles/PanelFiles":function(){define("dgrid/Grid dgrid/extensions/ColumnResizer dgrid/OnDemandGrid dgrid/Selection dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/errorMessages dojo/i18n!../../nls/panelfiles dojo/i18n!../../nls/programs dojo/json dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/PanelFiles.html ./widget/AutoNetworkBackup ../_Widget ../widget/NetworkTree ../widget/ResultsDialog ../../util/globalConstants ../../widget/dialogs/PromptForPassword ../../widget/WarningDialog ../../widget/WarningDialogEnums ../../xhrEnhanced rc/bacnet/enums rc/date ./PanelFilesToolbar ../widget/AdminToolbar ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P){return l("webview/admin/panelFiles/PanelFiles",[G],{errorStrings:x,panfileStrings:w,programStrings:z,rcStrings:n,templateString:E,webviewStrings:v,_autoNetworkBackupDialog:null,_backupRestoreMap:null,_constantHeights:-1,_descriptionMap:null,_dependentChange:null,_EmptyPasswordAllowedCode:67,_IncorrectPassword:1,_GoodPasswordRestore:49,_GoodPasswordBackup:3,_OperationInProgress:510,_grid:null,_gridStore:null,_lastSavedPanelFileStore:null,
_thirdPartyPanelFileOperation:!1,_thirdPartyOperationAttempts:0,_thirdPartyPassword:"",_selectedNodes:[],_type:"",_messageMap:null,_overwriteConfirmDialog:null,_passwordDialog:null,_rejectedPanelFileTypes:[],_resultsDialog:null,_updateFilterTimeout:null,constructor:function(){this._views=[];this._backupRestoreMap={backup:{title:this.panfileStrings.backupInProgress,completeMessage:this.panfileStrings.backupFinished,path:this.getPathForFiles()+"/backup"},restore:{title:this.panfileStrings.restoreInProgress,
completeMessage:this.panfileStrings.restoreFinished,path:this.getPathForFiles()+"/restore"}};this._gridStore=new C(new B({idProperty:"name"}));this._lastSavedPanelFileStore=new C(new B({idProperty:"bacnetDeviceNumber"}));this._rejectedPanelFileTypes=[H.PanelFileCompatibilityTypes.rcp,H.PanelFileCompatibilityTypes.none];this._messageMap={backup:{0:this.panfileStrings.idle,200:this.panfileStrings.successfulBackups,201:this.panfileStrings.backupSuccessfulWithRetries,501:this.errorStrings.cannotAccessSystem,
504:this.panfileStrings.panelBackupCRCErrors,505:this.panfileStrings.backupErrors,506:this.panfileStrings.backupInsufficientPrivileges,508:this.panfileStrings.BACnetError,510:this.panfileStrings.backupInProgress,511:this.panfileStrings.backupUserCancelled,515:this.panfileStrings.overwritePermission},restore:{0:this.panfileStrings.idle,200:this.panfileStrings.restoreSuccessful,201:this.panfileStrings.restoreSuccessfulWithRetries,501:this.errorStrings.cannotAccessSystem,504:this.panfileStrings.restoreSuccessfulWithErrors,
508:this.panfileStrings.BACnetError,510:this.panfileStrings.restoreInProgress,511:this.panfileStrings.restoreUserCancelled}};this._descriptionMap={0:this.panfileStrings.emptyString,1:this.panfileStrings.incorrectPassword,2:this.panfileStrings.continuing,3:this.panfileStrings.startingBackup,4:this.panfileStrings.gettingControllerStatusX,5:this.panfileStrings.controllerStatusErrorX,7:this.panfileStrings.controllerOperational,8:this.panfileStrings.controllerStatusError,9:this.panfileStrings.noErrorContinue,
10:this.panfileStrings.successRetrievedConfigFiles,11:this.panfileStrings.gettingConfigFilesInfoXOfX,12:this.panfileStrings.passwordIncorrect,13:this.panfileStrings.fileObjectsAccessMethodsReceived,14:this.panfileStrings.controllerStateNotChanged,15:this.panfileStrings.backupFailed,16:this.panfileStrings.restoreFailed,17:this.panfileStrings.gettingControllerStatus,18:this.panfileStrings.backupFailed,19:this.panfileStrings.restoreFailed,20:this.panfileStrings.errorGettingFileObject,21:this.panfileStrings.controllerXRecordsReturned,
22:this.panfileStrings.controllerXBytesStream,23:this.panfileStrings.controllerSuccessfullyRetrieved,24:this.panfileStrings.unauthModOfConfigFileXDuringBackup,25:this.panfileStrings.unexpectedStateDuringBackup,26:this.panfileStrings.controllerBackupCRCErrors,27:this.panfileStrings.backupHadErrors,28:this.panfileStrings.restoreHadErrors,29:this.panfileStrings.backupCompletedWithRetries,30:this.panfileStrings.backupCompletedSuccessfully,31:this.panfileStrings.restoreCompletedWithRetries,32:this.panfileStrings.restoreCompletedSuccessfully,
33:this.panfileStrings.groupXMLJSONBackupSuccess,34:this.panfileStrings.getXMLJSONError,35:this.panfileStrings.getConfigError,36:this.panfileStrings.getFileAccessMethodsError,37:this.panfileStrings.recordDataForXRetrieved,38:this.panfileStrings.fileObjectRestoreSuccess,39:this.panfileStrings.streamDataForXRetrieved,40:this.panfileStrings.fileObjectDataReadSuccess,41:this.panfileStrings.errorX,42:this.panfileStrings.panelFileNumXDoesNotMatchControllerNum,43:this.panfileStrings.incompatibleFileTypeX,
44:this.panfileStrings.invalidFileNameX,45:this.panfileStrings.fileNotFoundX,46:this.panfileStrings.errorOpeningFileX,47:this.panfileStrings.internalFileErrorX,48:this.panfileStrings.deviceBackupRestoreInProgress,49:this.panfileStrings.startingRestore,50:this.panfileStrings.groupConfigDataRestoredSuccess,51:this.panfileStrings.restoreFileObjectError,52:this.panfileStrings.restoredXSuccess,53:this.panfileStrings.restoringXObjectToOldFirmware,54:this.panfileStrings.zeroedX,55:this.panfileStrings.invalidConfigDataTryingToRestoreXObj,
56:this.panfileStrings.restoreXSuccessXrecordsFromX,57:this.panfileStrings.restoreXSuccessXStreamSizeX,58:this.panfileStrings.restoreWasSuccessful,59:this.panfileStrings.cannotOpenPanelFile,60:this.panfileStrings.invalidPanelFileName,61:this.panfileStrings.panelFilePathTooBig,62:this.panfileStrings.unableToCreatePanelFile,63:this.panfileStrings.errorLoadingDescriptors,64:this.panfileStrings.loadingDescriptors,65:this.panfileStrings.descriptorsFinishedLoading,66:this.panfileStrings.descriptorsFinishedLoadingWithErrors,
67:this.panfileStrings.emptyPasswordAllowed,68:this.panfileStrings.clientCreated,69:this.panfileStrings.clientTerminated,70:this.panfileStrings.errorTimeout,71:this.panfileStrings.fileSystemLocked,72:this.panfileStrings.errorUnknown,73:this.panfileStrings.fileSystemBusy,74:this.panfileStrings.alreadyMounted,75:this.panfileStrings.notMounted,76:this.panfileStrings.badParameter,77:this.panfileStrings.fileNotFound,78:this.panfileStrings.cannotCreateFile,79:this.panfileStrings.invalidCRC,80:this.panfileStrings.internalError,
81:this.panfileStrings.insufficientMemory,82:this.panfileStrings.directoryListingFailed,83:this.panfileStrings.systemStatusLoadFailed,84:this.panfileStrings.fileSystemStarting,85:this.panfileStrings.fileFull,86:this.panfileStrings.fileReadError,87:this.panfileStrings.fileWriteError,88:this.panfileStrings.badPacket,89:this.panfileStrings.unknownObject,90:this.panfileStrings.fileNameTooLong,91:this.panfileStrings.invalidFileName,92:this.panfileStrings.directoryPathTooLong,93:this.panfileStrings.invalidDirectoryName,
94:this.panfileStrings.cannotCreateDirectory,95:this.panfileStrings.fileTooLarge,96:this.panfileStrings.alreadyConnected,97:this.panfileStrings.notConnected,98:this.panfileStrings.file_d_of_d_s,99:this.panfileStrings.directoryListingComplete,100:this.panfileStrings.backupDirectoryCannotBeCreated,101:this.panfileStrings.fileDownloadComplete,102:this.panfileStrings.fileUpdloadComplete,103:this.panfileStrings.filesStoredInPanelFile,104:this.panfileStrings.temporaryMPVUpdateFolderDeleted,105:this.panfileStrings.mpvFilesDeleted,
106:this.panfileStrings.startingFilesDownload,107:this.panfileStrings.noResourcesFoundToBackUp,108:this.panfileStrings.noResourcesFoundToRestore};f.mixin(this.ErrorMessageMap,{515:this.panfileStrings.overwritePermission})},postCreate:function(){this.inherited(arguments);var a=rc.session._attributes.permittedSystems.find(f.hitch(this,function(a){return a.id===Number(this.system)}));if(rc.session.hasRole(rc.session.roles2.panFileBackup,!0)||rc.session.hasRole(rc.session.roles2.panFileRestore,!0))if(a)webview.auditUtil.setContextDataWithSiteId(this.site,
[{systemId:this.system,objectName:"#PanelFile"}],this.title),this._setupLabels(),this._createViews(),this._createButtons(),this._buildColumnStructure(),this._getSystemTree().then(f.hitch(this,function(a){this.onInitSuccess();this._buildSystemTree(a);this._getPanelFiles().then(f.hitch(this,this._parsePanelFiles));this._buildGrid()})),this._toolbar.autoBackupButton.set("disabled",!rc.session.hasRole(rc.session.roles2.panFileBackup,!0));else{if(0<rc.session._attributes.SiteMapArray.length)var b=rc.session._attributes.SiteMapArray[0].systems.find(f.hitch(this,
function(a){return a.systemId===Number(this.system)}));this._throwFullscreenError({name:this.rcStrings.permissionDenied,message:D.substitute(this.errorStrings.systemAccessError,[b?b.systemName:this.system]),suggestion:"",e:null})}else this._throwFullscreenError({name:this.errorStrings.insufficientPermissions,message:this.panfileStrings.permissionErrorMessage,suggestion:this.errorStrings.contactAdmin,e:null})},formatDetailsCell:function(a,b){var c={1:!0,5:!0,8:!0,12:!0,15:!0,16:!0,18:!0,19:!0,20:!0,
24:!0,25:!0,26:!0,27:!0,28:!0,34:!0,35:!0,36:!0,41:!0,42:!0,43:!0,44:!0,45:!0,46:!0,47:!0,51:!0,55:!0,59:!0,60:!0,61:!0,62:!0,63:!0,66:!0},d=this.inherited(arguments);"undefined"!==typeof b.detailsDescription&&"undefined"!==typeof b.detailsDescription.baseDescription&&"undefined"!==typeof c[b.detailsDescription.baseDescription]&&(d="\x3cspan class\x3d'detail-is-error'\x3e"+d+"\x3c/span\x3e");return d},getPathForFiles:function(){return"PanelFile"},getPathForTree:function(){return"SystemTree"},setToolBarMenus:function(a){a.Print=
!1;this.userToolBar.resetMenusAndHelp(a)},_addDependentListener:function(){this._removeDependentListener();this._dependentChange=A(this._systemTree,"checkedChange",f.hitch(this,this._updateDependants));this.own(this._dependentChange)},_addToolbarListeners:function(){this.own(A(this._toolbar,"backup",f.hitch(this,this._backupPanelFile)),A(this._toolbar,"restore",f.hitch(this,this._restorePanelFile)),A(this._toolbar,"autoBackup",f.hitch(this,this._showAutoBackup)),A(this._toolbar,"log",f.hitch(this,
this._showLog)))},_askUserForOverwrite:function(){var a=new c;this.own(a);null===this._overwriteConfirmDialog&&(this._overwriteConfirmDialog=new K({type:N.types.binaryConfirm,closeButtonVisible:!1,title:this.panfileStrings.fileOverwrite,text:this.panfileStrings.confirmOverwrite}));var b=this._overwriteConfirmDialog.on("close",f.hitch(this,function(c){switch(c){case N.returnValues.oneOrYes:a.resolve();break;case N.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+" - _confirm(): Unknown choice",
c)}b.remove()}));this.own(b);this._overwriteConfirmDialog.open();return a.promise},_backupPanelFile:function(){var a=this._systemTree.get("checked");this._prepareBackupRestoreObject(a,"backup").then(f.hitch(this,this._performBackupRestore)).then(f.hitch(this,this._parseBackupRestoreResults))},_buildColumnStructure:function(){this._columnStructure=[{id:"nameCol",field:"name",label:this.webviewStrings.name,sortable:!0,renderCell:f.hitch(this,this._buildFilenameCell)},{id:"typeCol",field:"compatibilityType",
label:this.webviewStrings.trendlogType,sortable:!0,formatter:f.hitch(this,this._getPanelFileType)},{id:"deviceCol",field:"device",label:this.panfileStrings.device,sortable:!0},{id:"sizeCol",field:"size",label:this.panfileStrings.size,sortable:!0,formatter:f.hitch(this,function(a){var b=a;1E9<a?b=(a/1E9>>>0)+"GB":1E6<a?b=(a/1E6>>>0)+"MB":1E3<a&&(b=(a/1E3>>>0)+"KB");return b})},{id:"modifiedCol",field:"modified",label:this.panfileStrings.modified,sortable:!0,formatter:f.hitch(this,function(a){return r.format(new Date(a),
{formatLength:"medium"})})}]},_buildFilenameCell:function(a,b,c){c=u.create("div",{"class":"filename-cell"},c,"only");u.create("div",{"class":"filename-icon svg-16px svg-"+a.deviceModel.split(" ")[0].toLowerCase()+"Icon"},c,"first");u.create("span",{innerHTML:b},c,"last");return c},_buildGrid:function(){null===this._grid&&(this._grid=new (l([p,k,h,m]))({columns:this._columnStructure,sort:[{attribute:"name",descending:!1}],store:this._gridStore,maxRowsPerPage:256,minRowsPerPage:128,maxEmptySpace:10,
keepScrollPosition:!0,noDataMessage:D.substitute(this.webviewStrings.noXFound,[this.panfileStrings.panelFiles]),selectionMode:"single"},this.gridNode),this._grid.startup(),this.own(A(this._grid,["dgrid-select","dgrid-deselect"],f.hitch(this,this._gridSelectionChanged))))},_buildSystemTree:function(a){a=a.filter(f.hitch(this,function(a){return"device"!==a.type||-1===this._rejectedPanelFileTypes.indexOf(a.compatibilityType)}));a=new C(new B({data:a,getChildren:function(a){return this.query({parent:a.id})}}));
var b=a.query(f.hitch(a,function(a){return"network"!==a.type||0<this.getChildren(a).length}));a.setData(b);b=new g({store:a,query:{type:"root"},labelAttr:"name",mayHaveChildren:function(a){return 0<this.store.query({parent:a.id}).length}});this._systemTree=new I({model:b,showRoot:!1});this._systemTree.placeAt(this.deviceGutter);this._systemTree.startup();if(this.device){var c=a.query(f.hitch(this,function(a){return"device"===a.widget&&Number(a.widgetId)===Number(this.device)}));1===c.length&&this.own(A.once(this._systemTree,
"load",f.hitch(this,function(){this._systemTree.expandToNode(c[0]).then(f.hitch(this,function(){this._systemTree.setCheckboxState(c[0],!0)}))})))}this.own(A(this._systemTree,"checkedChange",f.hitch(this,function(){null!==this._updateFilterTimeout&&(clearTimeout(this._updateFilterTimeout),this._updateFilterTimeout=null);this._updateFilterTimeout=setTimeout(f.hitch(this,this._updateFilteredFiles),100)})));this._addDependentListener()},_canBackUpRestoreSelectedDevices:function(a){var b=!1;switch(a.length){case 0:b=
!1;break;case 1:b=!0;break;default:b=a.some(function(a){return a.compatibilityType!==H.PanelFileCompatibilityTypes.thirdParty})}return b},_checkTestPasswordStatus:function(a,b,c){var g=function(a,d){1==d?O.get(b+"/status",{handleAs:"json",preventCache:!0,query:{systemId:this.system,userId:rc.session._attributes.userId,processId:c.processId,abort:!0}}):O.get(b+"/status",{handleAs:"json",preventCache:!0,query:{systemId:this.system,userId:rc.session._attributes.userId,processId:c.processId,removeOpOnCompletion:!1}}).then(f.hitch(this,
this._checkTestPasswordStatus,a,b))},h=!1,k=!1;"undefined"!==typeof c.results&&0<c.results.length&&(k=c.results,h=d.some(k,f.hitch(this,function(a){return d.some(a.detailsDescriptions,f.hitch(this,function(a){return a.baseDescription===this._GoodPasswordRestore||a.baseDescription===this._GoodPasswordBackup}))})),k=d.some(k,f.hitch(this,function(a){return d.some(a.detailsDescriptions,f.hitch(this,function(a){a=a.subDescriptions;for(var b=0;b<a.length;b++)if(2==a[b].type)try{var c=y.parse(a[b].value);
if(4===c.errorClass&&26===c.errorCode)return!0}catch(Y){}return!1}))})));!1===h&&!1===k&&c.completed!==c.total?setTimeout(f.hitch(this,g,a,!1),250):!0===k||c.errStatus&&508===c.errStatus?(setTimeout(f.hitch(this,g,a,!0),10),this._promptForPassword(a)):a.resolve({passwordSuccess:!0,password:""})},_createAutoNetworkBackupDialog:function(){this._autoNetworkBackupDialog=new F({title:this.panfileStrings.autoNetworkBackup,queryParams:{systemId:this.system}})},_createButtons:function(){this.buttonBar.addIcon(this._toolbar);
this.setTooltips();this._addToolbarListeners()},_createResultsDialog:function(){null===this._resultsDialog&&(this._resultsDialog=new L({formatDetailsCell:this.formatDetailsCell,staticTitle:"",headerMap:{name:this.panfileStrings.panelName,object:this.rcStrings.file,details:this.programStrings.smDetails},completeMessageMap:{backup:this.panfileStrings.backupFinished,restore:this.panfileStrings.restoreFinished},messageMap:{backup:f.hitch(this,this._decodeBackupRestoreDetails),restore:f.hitch(this,this._decodeBackupRestoreDetails)},
typeMap:{backup:this.panfileStrings.successfulBackups,restore:"Successful Restores"}}),this.own(A(this._resultsDialog,"done",f.hitch(this,function(){this._getPanelFiles().then(f.hitch(this,this._parsePanelFiles))}))))},_createViews:function(){this.panelFilesWidget.setMainContent(this.panelFilesContent);this._views.push(this.panelFilesWidget)},_decodeBackupRestoreDetails:function(a,b,c){var d=a;if(c.detailsDescription){if(a=c.detailsDescription,d=this._descriptionMap[a.baseDescription],a.subDescriptions)for(a=
a.subDescriptions,b=0;b<a.length;b++)switch(a[b].type){case 1:c=M.objectNames[a[b].value];c=void 0===c?this.panfileStrings.fileObject+" "+a[b].value:c;d=d.replace("%s",c);break;case 2:d=d.replace("%s",this._decodeBACnetError(a[b].value).replace(":\x3cbr \x3e"," - "));break;case 3:d=d.replace("%d",a[b].value);break;case 4:d=d.replace("%s",P.formatUTC(parseInt(a[b].value)));break;case 5:d=d.replace("%s",a[b].value);break;default:console.error(this.declaredClass+" - _decodeBackupRestoreDetails(): Unknown choice",
a[b].type)}}else"undefined"!==typeof this._messageMap[b]&&"undefined"!==typeof this._messageMap[b][a]&&(d=this._messageMap[b][a]);return d},_getConstantHeights:function(){-1===this._constantHeights&&(this._constantHeights=0,b.byId("rcAdminContentHeader")&&(this._constantHeights=a.get("rcAdminContentHeader","height"),this._constantHeights+=a.get("rcAdminContentHeader","paddingTop")),b.byId("rcSystemFooter")&&(this._constantHeights+=a.get("rcSystemFooter","height")),this._constantHeights+=a.get(this.buttonBar.domNode,
"height"),this._constantHeights+=a.get(this.buttonBar.domNode,"marginTop"),this._constantHeights+=a.get(this.buttonBar.domNode,"marginBottom"));return this._constantHeights},_getPanelFiles:function(){var a=new c;this.own(a);O.get(this.getPathForFiles(),{handleAs:"json",preventCache:!0,query:{systemId:this.system}}).then(f.hitch(this,a.resolve),f.hitch(this,a.reject));return a.promise},_getPanelFileType:function(a){var b="Unkwnown";"undefined"!==typeof H.PanelFileCompatibilityTypes[a]?b=H.PanelFileCompatibilityTypes[a]:
console.error(this.declaredClass+"_getPanelFileType(): Unknown type",a);return b},_getSystemTree:function(){var a=new c;this.own(a);O.get(this.getPathForTree(),{handleAs:"json",preventCache:!0,query:{userId:rc.session._attributes.userId,systemId:this.system}}).then(f.hitch(this,a.resolve),f.hitch(this,a.reject));return a.promise},_gridSelectionChanged:function(a){"dgrid-select"===a.type?this.panelFileTB.set("value",a.rows[0].data.name):this.panelFileTB.set("value","")},_parsePanelFiles:function(a){a.errStatus===
this.SuccessCode?(this._gridStore.setData(a.panelFiles),this._lastSavedPanelFileStore.setData(a.lastSavedPanelFile),this._grid.refresh(),this._toolbar.logButton.set("disabled",a.systemHasLoggedResult?!1:!0)):this._displayError(a)},_parseBackupRestoreResults:function(a){if(a.errStatus!==this.SuccessCode)this._displayError(a);else{var b=new c;this._thirdPartyPanelFileOperation&&0==this._thirdPartyOperationAttempts?this._checkTestPasswordStatus(b,this._backupRestoreMap[a.type].path,{results:[],processId:a.processId,
completed:0,total:1}):b.resolve({passwordSuccess:!0,password:""});b.then(f.hitch(this,function(b){1==b.passwordSuccess?(this._createResultsDialog(),this._resultsDialog.show(),this._resultsDialog.set("queryParams",{systemId:this.system,userId:rc.session._attributes.userId,processId:a.processId}),this._resultsDialog.set({title:this._backupRestoreMap[a.type].title,path:this._backupRestoreMap[a.type].path+"/status"})):(this._thirdPartyPassword=b.password,this._prepareBackupRestoreObject(this._selectedNodes,
this._type,1).then(f.hitch(this,this._performBackupRestore)).then(f.hitch(this,this._parseBackupRestoreResults)))}))}},_performBackupRestore:function(a){var b=new c,d=a.selectedNodes;1<d.length&&(d=d.filter(function(a){return a.compatibilityType!==H.PanelFileCompatibilityTypes.thirdParty}));var g=d.filter(function(a){return"device"===a.type}).map(function(a){return a.widgetId}),h;0<d.length&&(d.some(function(a){return a.compatibilityType===H.PanelFileCompatibilityTypes.thirdParty})?(this._thirdPartyPanelFileOperation=
!0,b.resolve(this._thirdPartyPassword)):b.resolve(""),h=b.then(f.hitch(this,function(b){var c=this._backupRestoreMap[a.type].path,d={userId:rc.session._attributes.userId,systemId:this.system,devices:g,filename:1<g.length?"":a.filename,encryptedPassword:b};if("backup"===a.type)f.mixin(d,{needsBundling:a.needsBundling,filePrefix:a.filePrefix});else if("restore"===a.type)return this._validateApprovalSessionWithReason(d).then(f.hitch(this,function(){return O.put(c,{handleAs:"json",preventCache:!0,data:d})}));
return O.put(c,{handleAs:"json",preventCache:!0,data:d})})));return h},_prepareBackupRestoreObject:function(a,b,d){this._thirdPartyOperationAttempts=d?d:0;this._thirdPartyPanelFileOperation=!1;0===this._thirdPartyOperationAttempts&&(this._thirdPartyPassword="");this._selectedNodes=a;this._type=b;d=new c;this.own(d);var g=[],h=this.filePrefixTB.get("value").trim(),k=a.some(function(a){return"device"!==a.type});if(!k){var l=this.panelFileTB.get("value").trim();1===a.length&&""!==l?g.push(l):g=a.map(function(a){return[h,
a.widgetId].join("")})}a={type:b,selectedNodes:a,needsBundling:k,filePrefix:h,filename:1===g.length?g[0]:""};k||"restore"===b||0===this._gridStore.query(function(a){return-1<g.indexOf(a.name)}).length?d.resolve(a):rc.session.hasRole(rc.session.roles2.panFileOverwrite,!0)?this._askUserForOverwrite().then(f.hitch(this,d.resolve,a),f.hitch(this,d.reject)):(this._displayError({errStatus:515}),d.reject());return d.promise},_promptForPassword:function(a){null===this._passwordDialog&&(this._passwordDialog=
new J({title:this.webviewStrings.devicePassword}),this._passwordDialog.startup());this._passwordDialog.set("encryptedDeferred",a);this.own(A(this._passwordDialog,"cancel",f.hitch(this,function(){a.reject()})));this._passwordDialog.show()},_removeDependentListener:function(){null!==this._dependentChange&&(this._dependentChange.remove(),this._dependentChange=null)},_removeParentSelection:function(a){for(var b=new c,d=[];a&&"system"!==a.widget;)a=this._systemTree.model.store.get(a.parent),d.push(a);
d.forEach(f.hitch(this,function(a){this._systemTree.setCheckboxState(a,!1)}));this.defer(b.resolve);return b.promise},_resize:function(){var b=a.get(this.domNode.parentElement,"height"),b=b-this._getConstantHeights(),b=b-2*a.get(this.panelFilesWidget.domNode,"paddingTop"),b=b-2*a.get(this.panelFilesWidget.contentPaneBody,"paddingTop"),b=b-a.get(this.panelFileSettings,"height"),c=a.get(this.panelFilesWidget.contentPaneBody,"width"),c=c-2*a.get(this.panelFilesWidget.contentPaneBody,"paddingLeft");a.set(this.deviceGutter,
{height:b+"px",width:.3*c+"px"});a.set(this.gridNode,{height:b+"px",width:.7*c+"px"});this._grid&&this._grid.resize()},_restorePanelFile:function(){var a=this._systemTree.get("checked");this._prepareBackupRestoreObject(a,"restore").then(f.hitch(this,this._performBackupRestore)).then(f.hitch(this,this._parseBackupRestoreResults))},_setupLabels:function(){t.set(this.panelFileLB,"for",this.panelFileTB.id);t.set(this.filePrefixLB,"for",this.filePrefixTB.id)},_showAutoBackup:function(){null===this._autoNetworkBackupDialog&&
this._createAutoNetworkBackupDialog();this._autoNetworkBackupDialog.show()},_showLog:function(){this._createResultsDialog();this._resultsDialog._getErrorMessage=function(){return""};this._resultsDialog.show();this._resultsDialog.set("queryParams",{systemId:this.system});this._resultsDialog.set({title:"",path:this.getPathForFiles()+"/Log"})},_toggleFields:function(a){var b=this._systemTree.get("checked");this._toolbar.backupButton.set("disabled",!this._canBackUpRestoreSelectedDevices(b)||!rc.session.hasRole(rc.session.roles2.panFileBackup,
!0));(a=1!==b.length||a)?(this.controllerNumberValueLB.innerText="",this.panelFileTB.set("value","")):(this.controllerNumberValueLB.innerText=b[0].widgetId,b=this._lastSavedPanelFileStore.get(b[0].widgetId),this.panelFileTB.set("value","undefined"!==typeof b?b.lastSavedFilename:""));this.panelFileTB.set("disabled",a);q.toggle(this.controllerNumberLB,"disabled",a);q.toggle(this.panelFileLB,"disabled",a)},_toggleGridAndFields:function(a){this._grid.set("selectionMode",a?"none":"single");q.toggle(this.gridNode,
"disabled",a);this._toggleFields(a)},_updateDependants:function(a,b){"system"===a.widget?this._systemTree.model.store.query({widget:"network"}).forEach(f.hitch(this,function(a){this._systemTree.expandToNode(a).then(f.hitch(this,function(){this._systemTree.setCheckboxState(a,b)}))})):"network"===a.widget?this._systemTree.model.store.query({parent:a.id}).forEach(f.hitch(this,function(a){this._systemTree.expandToNode(a).then(f.hitch(this,function(){this._systemTree.setCheckboxState(a,b)}))})):b||(this._removeDependentListener(),
this._removeParentSelection(a).then(f.hitch(this,this._addDependentListener)))},_updateFilteredFiles:function(){var a=this._systemTree.get("checked");this._toolbar.restoreButton.set("disabled",!this._canBackUpRestoreSelectedDevices(a)||!rc.session.hasRole(rc.session.roles2.panFileRestore,!0));if(0===a.length||a.some(function(a){return"system"===a.widget}))this._grid.set("query",{});else{var b=[];a.forEach(function(a){-1===b.indexOf(a.compatibilityType)&&b.push(a.compatibilityType)});a.filter(function(a){return"network"===
a.widget}).forEach(f.hitch(this,function(a){this._systemTree.model.store.query({parent:a.id}).forEach(function(a){-1===b.indexOf(a.compatibilityType)&&b.push(a.compatibilityType)})}));this._grid.set("query",function(a){return-1<b.indexOf(a.compatibilityType)})}1<a.length||a.some(f.hitch(this,function(a){return-1<this._rejectedPanelFileTypes.indexOf(a.compatibilityType)||"system"===a.widget||"network"===a.widget}))?this._toggleGridAndFields(!0):this._toggleGridAndFields(!1)},destroy:function(){this.inherited(arguments);
O.clearAllRequests();null!==this._updateFilterTimeout&&(clearTimeout(this._updateFilterTimeout),this._updateFilterTimeout=null)}})})},"webview/admin/panelFiles/widget/AutoNetworkBackup":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!../../../nls/all dojo/i18n!../../../nls/errorMessages dojo/i18n!../../../nls/panelfiles dojo/on dojo/query dojo/request/xhr dojo/text!./templates/AutoNetworkBackup.html dojo/topic dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/RadioButton dijit/form/Select dijit/form/ValidationTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return m("webview/admin/panelFiles/widget/AutoNetworkBackup",[p],{closable:!1,isEnabled:!1,isOkButtonEnabled:!1,panfileStrings:r,queryParams:{},radioSelection:0,rcStrings:d,templateString:q,webviewStrings:l,_autoBackupTypeMap:{Daily:0,Weekly:1,Monthly:2},_autoNetworkBackupPreferences:{},_ErrorMap:{501:f.cannotAccessSystem,505:f.systemDoesNotExist,506:r.backupInsufficientPrivileges},_path:"AutoNetworkBackup",_radioLookup:null,_successCode:200,postCreate:function(){this.inherited(arguments);
var a=[];h.getNames("days","wide").forEach(function(b,c){a.push({label:b,value:c})});a[0].selected=!0;this.daysOfWeekDD.options=a;g.set(this.enableLabel,"for",this.enableCheckbox.id);this._radioLookup={0:this.dailyRecurrence,1:this.weeklyRecurrence,2:this.monthlyRecurrence};this._setupListeners();this._fetchData()},_setIsEnabledAttr:function(a){this.dailyRecurrence.set("disabled",!a);this.weeklyRecurrence.set("disabled",!a);this.monthlyRecurrence.set("disabled",!a);this.daysOfWeekDD.set("disabled",
!a||this._autoBackupTypeMap.Weekly!==this.radioSelection);this.dayOfMonthTB.set("disabled",!a||this._autoBackupTypeMap.Monthly!==this.radioSelection);this._set("isEnabled",a)},_setIsOkButtonEnabledAttr:function(a){this.okButton.set("disabled",!a);this._set("isOkButtonEnabled",a)},_setRadioSelectionAttr:function(a){this.daysOfWeekDD.set("disabled",!this.isEnabled||this._autoBackupTypeMap.Weekly!==a);this.dayOfMonthTB.set("disabled",!this.isEnabled||this._autoBackupTypeMap.Monthly!==a);this._set("radioSelection",
a)},_checkThenSetOkButtonState:function(){this.set("isOkButtonEnabled",this.timeTB.isValid()&&(this.dayOfMonthTB.isValid()||2!==this.radioSelection||!this.isEnabled))},_fetchData:function(){t.get(this._path,{handleAs:"json",preventCache:!0,query:this.queryParams}).then(k.hitch(this,this._parseFetch))},_getErrorMessage:function(a){var b=a.errMSG;"undefined"!==typeof this._ErrorMap[a.errStatus]&&(b=this._ErrorMap[a.errStatus]);return b},_onCancel:function(){this.hide();this._fetchData()},_onOk:function(){this.hide();
this._sendData()},_parseFetch:function(a){a.errStatus===this._successCode&&a.autoNetworkBackupPreferences&&(this._autoNetworkBackupPreferences=a.autoNetworkBackupPreferences,this.filenamePrefixTB.set("value",this._autoNetworkBackupPreferences.filenamePrefix),this.daysOfWeekDD.set("value",this._autoNetworkBackupPreferences.dayOfWeek),this.dayOfMonthTB.set("value",this._autoNetworkBackupPreferences.dayOfMonth),this.timeTB.set("value",this._autoNetworkBackupPreferences.time.slice(0,5)),"undefined"!==
typeof this._radioLookup[this._autoNetworkBackupPreferences.type]&&(this._radioLookup[this._autoNetworkBackupPreferences.type].set("checked",!0),this.set("radioSelection",this._autoNetworkBackupPreferences.type)),this.enableCheckbox.set("checked",this._autoNetworkBackupPreferences.enabled),this.set("isEnabled",this._autoNetworkBackupPreferences.enabled));this._checkThenSetOkButtonState()},_parseSave:function(a){a.errStatus!==this._successCode&&(a=this._getErrorMessage(a),u.publish("sticky",{type:"error",
message:a}))},_sendData:function(){this._autoNetworkBackupPreferences={filenamePrefix:this.filenamePrefixTB.get("value"),enabled:this.isEnabled,type:this.radioSelection,dayOfWeek:this.daysOfWeekDD.get("value"),dayOfMonth:""===this.dayOfMonthTB.get("value")?1:this.dayOfMonthTB.get("value"),time:""===this.timeTB.get("value")?"00:00":this.timeTB.get("value")};t.put(this._path,{handleAs:"json",data:{userId:rc.session._attributes.userId,systemId:this.queryParams.systemId,autoNetworkBackupPreferences:JSON.stringify(this._autoNetworkBackupPreferences)}}).then(k.hitch(this,
this._parseSave))},_setupListeners:function(){this.own(c(this.okButton,"click",k.hitch(this,this._onOk)),c(this.cancelButton,"click",k.hitch(this,this._onCancel)),c(this.enableCheckbox,"change",k.hitch(this,function(a){this.set("isEnabled",a);this._checkThenSetOkButtonState()})),c(this.dayOfMonthTB,"change",k.hitch(this,function(){this._checkThenSetOkButtonState()})),c(this.timeTB,"change",k.hitch(this,function(){this._checkThenSetOkButtonState()})),c(b("[name\x3d'_autoBackupType']"),"change",k.hitch(this,
function(){setTimeout(k.hitch(this,function(){this.set("radioSelection",Number(this._autoBackupForm.get("value")._autoBackupType));this._checkThenSetOkButtonState()}),1)})))}})})},"webview/admin/widget/NetworkTree":function(){define(["dijit/Tree","dojo/_base/declare","dojo/_base/lang","dojo/store/Memory","./NetworkTreeNode"],function(p,m,k,h,g){return m("webview/admin/panelFiles/widget/NetworkTree",[p],{_selectedCheckboxStore:null,constructor:function(){this._selectedCheckboxStore=new h},expandToNode:function(d){var g=
dijit.defaultDuration;dijit.defaultDuration=20;var f=[d.id];d=d.parent;for(var h=null;null!==d;)f.unshift(d),h=this.model.store.query({id:d}),d=1===h.length?h[0].parent:null;return this.set("path",f).then(k.hitch(this,function(c){dijit.defaultDuration=c},g))},getIconClass:function(d){var g="dijitTreeIcon dijitLeaf ";if(d.widget&&d.widget.length){var f=d.widget.toLowerCase();if(d.type)switch(d.type.toLowerCase()){case "user":f="users";break;case "device":d.deviceModel=d.deviceModel.replace(/3rd/i,
"third-party"),f=d.deviceModel.toLowerCase()}g+="svg-"+f+"Icon"}return g},onCheckedChange:function(d,g){},setCheckboxState:function(d,g){var f=this.getNodesByItem(d);1===f.length&&"undefined"!==typeof f[0]&&f[0].selectorNode&&f[0].selectorNode.set("checked",g)},updateSelectedStore:function(d,g){g?this._selectedCheckboxStore.put(d,{overwrite:!0}):this._selectedCheckboxStore.remove(d.id);this.onCheckedChange(d,g)},_createTreeNode:function(d){return new g(d)},_getCheckedAttr:function(){return this._selectedCheckboxStore.data},
_onDblClick:function(){}})})},"webview/admin/widget/NetworkTreeNode":function(){define("dijit/_WidgetsInTemplateMixin dijit/Tree dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on dojo/i18n!../../nls/all dojo/text!./templates/TreeNode.html dijit/form/CheckBox".split(" "),function(p,m,k,h,g,d,l,f){return k("webview/admin/widget/NetworkTreeNode",[m._TreeNode,p],{templateString:f,webviewStrings:l,postCreate:function(){this.inherited(arguments);this.set("nodeType",this.item.type);this._setupListeners()},
_setNodeTypeAttr:function(d){g.add(this.domNode,"node-type-"+d);this._set("nodeType",d)},_setLabelAttr:function(d){d=d.replace(/network/i,this.webviewStrings.network);this.inherited(arguments)},_setupListeners:function(){this.own(d(this.contentNode,"click",h.hitch(this,this._toggleCheckbox)),d(this.selectorNode,"change",h.hitch(this,function(d){this.setSelected(!1);this.tree.updateSelectedStore(this.item,d)})))},_toggleCheckbox:function(){this.selectorNode.set("checked",!this.selectorNode.get("checked"))}})})},
"webview/admin/widget/ResultsDialog":function(){define("dgrid/extensions/ColumnResizer dgrid/Grid dgrid/OnDemandGrid dgrid/tree dijit/_WidgetsInTemplateMixin dijit/Dialog dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!./templates/ResultsDialog.html ./_GridDialogMixin ../../util/util rc/date dijit/form/Button".split(" "),function(p,m,k,h,g,d,l,
f,r,c,b,t,q,u,a,n,v,x,w,z,y){return l("webview/admin/widget/ResultsDialog",[w,g],{closable:!0,completeMessage:"",headerMap:{},messageMap:{},currentTaskMap:{},pollInterval:500,queryParams:{},rcStrings:t,resultType:"",templateString:x,totalControllers:0,totalSuccessful:0,typeMap:{},webviewStrings:q,_BACnetErrorCode:508,_grid:null,_processId:-1,_successStatuses:{inProgress:0,failed:1,successful:2},constructor:function(){this._gridStore=new v(new n({mayHaveChildren:function(a){return 0!==this.query({parent:a.id}).total},
getChildren:function(a,b){return this.query({parent:a.id})}}))},postCreate:function(){this.inherited(arguments);this._buildColumnStructure();this._buildGrid();this.own(u(this.cancelActionButton,"click",f.hitch(this,this.onCancel)))},_setPathAttr:function(a){this._set("path",a);this._fetchData()},_setResultTypeAttr:function(a){if("undefined"===typeof this.typeMap[a])throw"Result type is not defined in type map.  Make sure type map is set before setting result type";this._set("resultType",a);r.set(this.resultTypeLabel,
{innerHTML:this.typeMap[a]})},_setStaticTitleAttr:function(a){this._set("staticTitle",a);this.set("title",this.title)},_setTitleAttr:function(a){this._set("title",a);a=""===this.staticTitle?"":this.staticTitle+" - ";""===this.title?r.set(this.titleNode,"innerHTML",this.staticTitle):r.set(this.titleNode,"innerHTML",a+this.title)},_setTotalControllersAttr:{node:"totalControllerContainer",type:"innerHTML"},_setTotalSuccessfulAttr:{node:"totalSuccessfulContainer",type:"innerHTML"},formatDetailsCell:function(a,
b){var c=a;a===this._BACnetErrorCode&&null!==b.bacnetError?c=z.decodeBACnetError(b.bacnetError).replace(":\x3cbr \x3e"," - "):"function"===typeof this.messageMap[this.resultType]&&(c=this.messageMap[this.resultType](a,this.resultType,b));return c+=" @"+y.formatUTC(b.timestamp)},onCancel:function(){clearTimeout(this._simulateDelay);var b=this.path;!1===/\/status$/i.test(b)&&(b+="/status");if(-1!==this._processId){var c=f.mixin(this.queryParams,{processId:this._processId,abort:!0});a.get(b,{handleAs:"json",
preventCache:!0,query:c})}},onDone:function(a){},show:function(){this._reset();return this.inherited(arguments)},_buildColumnStructure:function(){if("undefined"===typeof this.headerMap.name||"undefined"===typeof this.headerMap.object||"undefined"===typeof this.headerMap.details)throw"Header map must be defined in constructor";this._columnStructure=[h({id:"nameCol",field:"name",label:this.headerMap.name,sortable:!1,shouldExpand:function(){return!1},renderCell:f.hitch(this,this._buildNameCell)}),{id:"objectCol",
field:"object",label:this.headerMap.object,shouldExpand:function(){return!1},sortable:!1},{id:"detailsCol",field:"details",label:this.headerMap.details,sortable:!1,shouldExpand:function(){return!1},formatter:f.hitch(this,this.formatDetailsCell)}]},_buildGrid:function(){null===this._grid&&(this._grid=new (l([m,k,p,h]))({columns:this._columnStructure,sort:[{attribute:"id",descending:!1}],store:this._gridStore,maxEmptySpace:10,keepScrollPosition:!0,style:{height:"400px"},noDataMessage:"loading..."},
this.gridNode),this._grid.startup())},_buildNameCell:function(a,c,d){d=b.create("div",{"class":"name-cell"},d,"only");switch(a.success){case this._successStatuses.failed:a="svg-clear-icon";break;case this._successStatuses.successful:a="svg-check-icon";break;case this._successStatuses.inProgress:a="svg-waiting";break;default:a=""}b.create("span",{"class":"status-icon "+a},d,"first");b.create("span",{innerHTML:c},d,"last");return d},_fetchData:function(){a.get(this.path,{handleAs:"json",preventCache:!0,
query:this.queryParams}).then(f.hitch(this,this._parseFetch))},_parseFetch:function(a){var b=a.results;this.set({resultType:a.type,totalControllers:a.total});this._processId=a.processId;var c=a.completed===a.total;b.forEach(f.hitch(this,function(a){if(a.detailsDescriptions&&(a.parent=null,a.detailsDescription=a.detailsDescriptions.pop(),a.timestamp=a.detailsDescription.timestamp,c))for(var b=0;b<a.detailsDescriptions.length;b++){var d={};d.detailsDescription=a.detailsDescriptions[b];d.parent=a.id;
d.id=d.parent+"-"+b;d.timestamp=d.detailsDescription.timestamp;d.name="";d.success=null;this._gridStore.put(d)}this._gridStore.put(a)}));c&&b.forEach(f.hitch(this,function(a){a.detailsDescriptions&&this._grid.expand(a.id,!1,!0)}));c?(this._processId=-1,this.set("title",this.completeMessageMap[this.resultType]),a=this._gridStore.query({success:this._successStatuses.successful}),this.set("totalSuccessful",a.length),this._toggleSummary(!0),this.onDone(a)):this._simulateDelay=setTimeout(f.hitch(this,
function(){this.set("queryParams",f.mixin(this.queryParams,{processId:this._processId}));this._fetchData()}),this.pollInterval)},_reset:function(){this._gridStore.setData([]);this._grid.refresh();this.set({title:"",totalControllers:0,totalSuccessful:0,_processId:-1});this._toggleSummary(!1)},_toggleSummary:function(a){c.toggle(this.summaryContainer,"hidden",!a);c.toggle(this.buttonContainer,"hidden",a)}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),
function(p,m,k,h,g,d,l,f,r,c){function b(b,a,d,f){f=this.grid.isRTL?"right":"left";var g=".dgrid-expando-icon";a&&(g+=".ui-icon.ui-icon-triangle-1-"+(d?"se":"e"));b=c("div"+g+"[style\x3dmargin-"+f+": "+b*(this.indentWidth||9)+"px; float: "+f+"]");b.innerHTML="\x26nbsp;";return b}function t(b){var a=this,d=this.style.height;d&&(this.style.display="0px"==d?"none":"block");b&&(c(this,".dgrid-tree-resetting"),setTimeout(function(){c(a,"!dgrid-tree-resetting")}));this.style.height=""}function q(q){var a=
q.renderCell||f.defaultRenderCell,n,p;q||(q={});q.shouldExpand=q.shouldExpand||function(a,b,c){return c};d.after(q,"init",function(){var a=q.grid,f=".dgrid-content .dgrid-column-"+q.id,u=[];a.cleanEmptyObservers=!1;if(!a.store)throw Error("dgrid tree column plugin requires a store to operate.");q.renderExpando||(q.renderExpando=b);u.push(a.on(q.expandOn||".dgrid-expando-icon:click,"+f+":dblclick,"+f+":keydown",function(b){var c=a.row(b);a.store.mayHaveChildren&&!a.store.mayHaveChildren(c.data)||"keydown"==
b.type&&32!=b.keyCode||"dblclick"==b.type&&p&&1<p.count&&c.id==p.id&&-1<b.target.className.indexOf("dgrid-expando-icon")||a.expand(c);-1<b.target.className.indexOf("dgrid-expando-icon")&&(p&&p.id==a.row(b).id?p.count++:p={id:a.row(b).id,count:1})}));l("touch")&&u.push(a.on(r.selector(f,r.dbltap),function(){a.expand(this)}));a._expanded||(a._expanded={});u.push(d.after(a,"insertRow",function(a){var b=this.row(a);q.shouldExpand(b,n,this._expanded[b.id])&&this.expand(a,!0,!0);return a}));u.push(d.before(a,
"removeRow",function(b,d){var f=b.connected;f&&(h("\x3e.dgrid-row",f).forEach(function(b){a.removeRow(b,!0)}),d||c(f,"!"))}));q.collapseOnRefresh&&u.push(d.after(a,"cleanup",function(){this._expanded={}}));a._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};a.expand=function(b,d,f){var n=b.element?b:a.row(b),m=l("transitionend");b=new k;var r=b.promise;b.resolve();b=n.element;b=-1<b.className.indexOf("dgrid-expando-icon")?b:h(".dgrid-expando-icon",b)[0];f=f||
!1===q.enableTransitions;if(b&&b.mayHaveChildren&&(f||d!==!!this._expanded[n.id])){var p=void 0===d?!this._expanded[n.id]:d;c(b,".ui-icon-triangle-1-"+(p?"se":"e")+"!ui-icon-triangle-1-"+(p?"e":"se"));d=n.element;var u=d.connected,y,v,w={originalQuery:this.query};if(!u){var u=w.container=d.connected=c(d,"+div.dgrid-tree-container"),A=function(b){return a.store.getChildren(n.data,b)};q.allowDuplicates&&(w.parentId=n.id);"level"in b&&(A.level=b.level);r=r.then(function(){if(a.renderQuery)return a.renderQuery(A,
w);var b=c(u,"div"),d=a.renderArray(A(w),b,"level"in A?{queryLevel:A.level}:{});k.when(d,function(){c(b,"!")});return d});m?g(u,m,t):t.call(u)}u.hidden=!p;y=u.style;!m||f?(y.display=p?"block":"none",y.height=""):(p?(y.display="block",v=u.scrollHeight,y.height="0px"):(c(u,".dgrid-tree-resetting"),y.height=u.scrollHeight+"px"),setTimeout(function(){c(u,"!dgrid-tree-resetting");y.height=p?v?v+"px":"auto":"0px"}));p?this._expanded[n.id]=!0:delete this._expanded[n.id]}return r};d.after(q,"destroy",function(){m.forEach(u,
function(a){a.remove()});delete a.expand;delete a._calcRowHeight})});q.renderCell=function(b,d,f,g){var h=q.grid,k=Number(g&&g.queryLevel)+1,l=!h.store.mayHaveChildren||h.store.mayHaveChildren(b),m=g.parentId,k=n=isNaN(k)?0:k,h=q.renderExpando(k,l,h._expanded[(m?m+"-":"")+h.store.getIdentity(b)],b);h.level=k;h.mayHaveChildren=l;(b=a.call(q,b,d,f,g))&&b.nodeType?(c(f,h),c(f,b)):f.insertBefore(h,f.firstChild)};return q}q.defaultRenderExpando=b;return q})},"webview/widget/dialogs/PromptForPassword":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/keys dojo/on dojo/text!./templates/PromptForPassword.html dojox/html/entities ../../util/util dijit/form/Form dijit/form/TextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return m("webview/widget/dialogs/PromptForPassword",[p],{rcStrings:d,encryptedDeferred:null,templateString:c,title:l.enterPassword,postCreate:function(){this.inherited(arguments);g.set(this.passwordLB,"for",this.passwordTB.id);this.passwordForm.onSubmit=function(){return!1};this.own(r(this,"keypress",k.hitch(this,this._checkForEnter)),r(this.passwordForm,"submit",k.hitch(this,this._onSubmit)));null===this.encryptedDeferred&&(this.encryptedDeferred=new h)},_setEncryptedDeferredAttr:function(b){this.encryptedDeferred=
b},_getValueAttr:function(){return this.passwordForm.get("value")},show:function(){this.passwordForm.reset();this.inherited(arguments)},_checkForEnter:function(b){b.code===f.ENTER&&this._onSubmit()},_onSubmit:function(){this.inherited(arguments);var c=this.get("value");"undefined"!==typeof c.password&&""!==c.password?t.encryptPassword(b.encode(c.password)).then(k.hitch(this,function(b){this.encryptedDeferred.resolve({password:b,passwordSuccess:!1})})):this.encryptedDeferred.resolve({password:"",passwordSuccess:!1})}})})},
"webview/admin/panelFiles/PanelFilesToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!../../nls/panelfiles dojo/on dojo/text!./templates/PanelFilesToolbar.html ../_Widget ../../widget/ToolbarButton".split(" "),function(p,m,k,h,g,d){return p("webview/admin/worksheets/programs/PanelFilesToolbar",[d],{panfileStrings:k,templateString:g,_buttons:null,postCreate:function(){this.inherited(arguments);this._setupOnClicks();this._buildButtonMap()},clearDirty:function(){},getButton:function(d){return this._buttons[d]},
getPageButtons:function(){return this._buttons},makeDirty:function(){},setTitle:function(){},_buildButtonMap:function(){this._buttons={backupButton:this.backupButton,restoreButton:this.restoreButton,autoBackupButton:this.autoBackupButton,logButton:this.logButton}},_setupOnClicks:function(){this.own(h(this.backupButton.domNode,"click",m.hitch(this,function(){this.backupButton.get("disabled")||h.emit(this,"backup")})),h(this.restoreButton.domNode,"click",m.hitch(this,function(){this.restoreButton.get("disabled")||
h.emit(this,"restore")})),h(this.autoBackupButton.domNode,"click",m.hitch(this,function(){this.autoBackupButton.get("disabled")||h.emit(this,"autoBackup")})),h(this.logButton.domNode,"click",m.hitch(this,function(){this.logButton.get("disabled")||h.emit(this,"log")})))}})})},"webview/admin/programs/Program":function(){define("dijit/Dialog dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/fx dojo/i18n!rc/nls/all dojo/i18n!rc/nls/systemData dojo/i18n!../../nls/all dojo/i18n!../../nls/programs dojo/on dojo/promise/all dojo/query dojo/request/xhr dojo/string dojo/topic dojo/text!./templates/program.html rc/bacnet/enums rc/bacnet/property rc/sys/decpnt ./PointMenu ./WatchPointMenu ./widget/OptionsDialog ./widget/ProgramDndPoint ./widget/SaveFileDialog ../_Widget ../SearchableWidget ../widget/DevicePullout ../widget/FileSelector ../widget/ResultsDialog ../../sys/job ../../util/AlarmUtil ../../util/pointObject ../../util/util ../../widget/EditPointDialog ../../widget/WarningDialog ../../widget/WarningDialogEnums ./ProgramToolbar ../widget/SearchForObjectResults ../widget/AdminToolbar ../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R,V,Q,X){return m("webview/admin/programs/Program",[J,K],{bacnetOnly:!0,baseClass:"",programStrings:n,rcStrings:q,searchPath:"Program/objects",templateString:B,titleString:null,traces:[],useDescriptors:!0,showInlineValues:!1,userOptions:null,watches:[],_resultsDialog:null,webviewStrings:a,_CompilerErrorsCode:515,_DefaultGutterWidth:24,_ResizeBufferSize:16,_canEditTypes:{input:!0,output:!0,value:!0},_cancelHandle:null,
_confirmDialog:null,_deviceName:"",_devicePullout:null,_descriptorRe:/^(.+?)(:\d+)?(\[(?: ?)\d+(?: ?)\])?$/,_descriptorToMnemonicMap:null,_editableMnemonicRe:/(\d+)?((?:ai|ao|av|bi|bo|bv|blo|mi|mo|mv)(?:\d+))(:\d+)?$/i,_editor:null,_editorChangeListener:null,_editPointDialog:null,_fetchInterval:null,_fileSelector:null,_firstLoad:!0,_gutterRefreshTimer:null,_inlineValuesRe:/<(\S+)>/g,_intervalTime:500,_keyListener:null,_lastOpenedFilename:null,_loadFileDialog:null,_okHandle:null,_optionsDialog:null,
_pointMenu:null,_pollForStatusTimer:null,_pollForMultipleStatusTimer:null,_propertyIdentifierRe:/:(\d+)/,_propertyUtility:null,_refreshDefer:null,_replaceTitleTextSet:!1,_saveFileDialog:null,_supportedContextMenu:{input:!0,rcpInput:!0,output:!0,rcpOutput:!0,value:!0,rcpValue:!0,loop:!0,schedule:!0,array:!0,calendar:!0},_valuesLoadInterval:5E3,_valuesLoadTimer:null,_views:null,_watchListMenu:null,constructor:function(){this._views=[];this.readOnly=!rc.session.hasRole(rc.session.roles2.modifyPrograms,
!0);this._propertyUtility=new D;this._messageMap={sendMultiple:{200:this.programStrings.smUpdatedSuccessfully,508:this.programStrings.smUpdateHadErrors,510:this.programStrings.smSendInProgress}};this._setSupportedTypes();E.loadOnce()},postCreate:function(){this.inherited(arguments);if(!rc.session.hasRole(rc.session.roles2.accessPrograms,!0))return setTimeout(h.hitch(this,function(){var a=this.safeError(null,{name:this.rcStrings.permissionDenied,message:y.substitute(this.rcStrings.notAuthToViewX,[this.webviewStrings.programs]),
suggestion:""});this._onInitError(a)}),500),null;this._createViews();this._setupEditor();this._createButtons();this._addToolbarListeners();this._fetchUserPreferences(!1);this._createFileSelector();!1===this.isAdminPage()&&(this.mnemonic=null);this._buildExtraSearchParameters();x([this._fetch(),this._fetchDeviceName(),this._buildDescriptorArrays(),P.loadForAdmin(this.system)]).then(h.hitch(this,function(a){this._setAlarmContext();this._editor.session.setMode("ace/mode/cbas");this._deviceName=a[1].deviceName;
this._parseFetch(a[0]);this._setReadOnly()}),h.hitch(this,function(a){this._onInitError(a)}));this.own(g.after(this.resultsWidget,"resize",h.hitch(this,this.resize)))},createSource:function(a){return a},getPathForFetch:function(){return"Program"},insertPoint:function(a,b){var d=new L({sysId:null!==b.sysId?b.sysId:-1,sysName:null!==b.sysName?b.sysName:"",deviceName:null!==b.deviceName?b.deviceName:"",pointName:null!==b.pointName?b.pointName:"",pointMnemonic:null!==b.pointMnemonic?b.pointMnemonic:"",
pointType:null!==b.pointType?b.pointType:"",programDevice:Number(this.device)});this.own(g.before(d,"drag",h.hitch(this,function(a){a.set("useDescriptors",this.useDescriptors)},d)));c.place(d.domNode,a,"last")},makeClean:function(){this.inherited(arguments);this._toolbar.clearDirty&&(this._toolbar.clearDirty(),this._toolbar.sendButton.set("disabled",!0))},makeDirty:function(){this.inherited(arguments);this._toolbar.makeDirty&&(this._toolbar.makeDirty(),this._toolbar.sendButton.set("disabled",this.readOnly))},
print:function(){var a=h.clone(this.editorNode);b.set(a,"backgroundColor","white");var c=w("style",this.domNode);c&&a.appendChild(h.clone(c[0]));w("textarea, .ace_scrollbar",a).forEach(function(b){a.removeChild(b)});w(".ace_marker-layer, .ace_cursor-layer",a).forEach(function(a){b.set(a,"display","none")});this.printWithPreview(a)},publishSearchable:function(){A.publish("searchableWidget",this._supportedObjectTypes,this,!0)},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_addOptionsDialogListeners:function(){this.own(v(this._optionsDialog,
"cancel",h.hitch(this,this._fetchUserPreferences,!1)),v(this._optionsDialog,"ok",h.hitch(this,this._onOptionsDialogOk)),v(this._optionsDialog,"restore",h.hitch(this,this._fetchUserPreferences,!0)))},_addToolbarListeners:function(){this.own(v(this._toolbar,"send",h.hitch(this,this._sendChanges)),v(this._toolbar,"cancel",h.hitch(this,this._revertChanges)),v(this._toolbar,"renumber",h.hitch(this,this._fetchRenumberProgram)),v(this._toolbar,"sendMultiple",h.hitch(this,this._onSendMultipleClicked)),v(this._toolbar,
"saveFile",h.hitch(this,this._showSaveFileDialog)),v(this._toolbar,"openFile",h.hitch(this,this._showLoadFileDialog)),v(this._toolbar,"toggleAutoComplete",h.hitch(this,this._toggleAutoComplete)),v(this._toolbar,"toggleTrace",h.hitch(this,this._toggleTrace)),v(this._toolbar,"toggleMnemonics",h.hitch(this,this._toggleMnemonicsValidation)),v(this._toolbar,"toggleValues",h.hitch(this,this._toggleValuesValidation)),v(this._toolbar,"replace",h.hitch(this,this._showReplaceDialog)),v(this._toolbar,"clearTrace",
h.hitch(this,this._clearTrace)),v(this._toolbar,"showOptions",h.hitch(this,this._showOptions)))},_addToWatch:function(a,b){var c=this._getDetailsFromPoint(a);c.mnemonic&&(c=this._buildPointMnemonic(c,b),z.put("ProgramWatchList",{handleAs:"json",data:{systemId:this.system,userId:rc.session._attributes.userId,programMnemonic:this._getProgramMnemonic(),pointMnemonic:c}}).then(h.hitch(this,this._watchChanged)))},_applyGeneralEditorSettings:function(){var a="";this.userOptions.underscore&&(a="underline");
this.userOptions.strikethrough&&(a+=" line-through");var c=w(".ace_text-layer",this.editorNode);"undefined"!==typeof c&&b.set(c[0],{"text-decoration":a});b.set(this.editorNode,{"font-size":this.userOptions.fontSize+"pt","background-color":this.userOptions.syntaxHighlighting?this.userOptions.colours.background:"#24252E",color:this.userOptions.colours.normal,"font-weight":this.userOptions.bold?"bold":"","font-style":this.userOptions.italicize?"italic":""})},_applySyntaxHighlighting:function(){var a=
w("style",this.domNode);"undefined"!==typeof a[0]&&c.destroy(a[0]);c.create("style",{innerHTML:(this.userOptions.syntaxHighlighting?[".ace_comment { color: "+this.userOptions.colours.comments+" !important; }",".ace_statement { color: "+this.userOptions.colours.statements+" !important; }",".ace_function { color: "+this.userOptions.colours.functions+" !important; }",".ace_linenumber { color: "+this.userOptions.colours.lineNumbers+" !important; }",".ace_alarm_text { color: "+this.userOptions.colours.alarmText+
" !important; }",".ace_input { color: "+this.userOptions.colours.inputs+" !important; }",".ace_rcpInput { color: "+this.userOptions.colours.inputs+" !important; }",".ace_output { color: "+this.userOptions.colours.outputs+" !important; }",".ace_rcpOutput { color: "+this.userOptions.colours.outputs+" !important; }",".ace_value { color: "+this.userOptions.colours.valuesAndArrays+" !important; }",".ace_rcpValue { color: "+this.userOptions.colours.valuesAndArrays+" !important; }",".ace_array { color: "+
this.userOptions.colours.valuesAndArrays+" !important; }",".ace_object { color: "+this.userOptions.colours.otherObjects+" !important; }",".ace_present_value { color: "+this.userOptions.colours.presentValues+" !important; }",".ace_calendar { color: "+this.userOptions.colours.otherObjects+" !important; }",".ace_schedule { color: "+this.userOptions.colours.otherObjects+" !important; }",".ace_loop { color: "+this.userOptions.colours.otherObjects+" !important; }"]:[".ace_comment { color: "+this.userOptions.colours.normal+
" !important; }",".ace_statement { color: "+this.userOptions.colours.normal+" !important; }",".ace_function { color: "+this.userOptions.colours.normal+" !important; }",".ace_linenumber { color: "+this.userOptions.colours.normal+" !important; }",".ace_alarm_text { color: "+this.userOptions.colours.normal+" !important; }",".ace_input { color: "+this.userOptions.colours.normal+" !important; }",".ace_rcpInput { color: "+this.userOptions.colours.normal+" !important; }",".ace_output { color: "+this.userOptions.colours.normal+
" !important; }",".ace_rcpOutput { color: "+this.userOptions.colours.normal+" !important; }",".ace_value { color: "+this.userOptions.colours.normal+" !important; }",".ace_rcpValue { color: "+this.userOptions.colours.normal+" !important; }",".ace_array { color: "+this.userOptions.colours.normal+" !important; }",".ace_object { color: "+this.userOptions.colours.normal+" !important; }",".ace_present_value { color: "+this.userOptions.colours.normal+" !important; }",".ace_calendar { color: "+this.userOptions.colours.normal+
" !important; }",".ace_schedule { color: "+this.userOptions.colours.normal+" !important; }",".ace_loop { color: "+this.userOptions.colours.normal+" !important; }"]).join("\n")},this.domNode,"last")},_buildAuditLogContext:function(a){var b=[],c=h.hitch(this,function(a,b){b.push({systemId:this.system,objectName:a})}),d=[];a.inlineValues&&(d=Object.keys(a.inlineValues));for(var f=0;f<a.programPointsCount&&f<d.length;f++)c(d[f],b);d=c(this._getProgramMnemonic(),b);a=this._buildAuditLogTitle(a.name);webview.auditUtil.setContextDataWithSiteId(this.site,
b,a)},_buildAuditLogTitle:function(a){return this._deviceName+" ("+this.device+") - "+a+" ("+this._getProgramMnemonic()+")"},_buildDescriptorArrays:function(){var a=new d;this.own(a);z.get("Program/Descriptors",{handleAs:"json",query:{deviceId:this.device,systemId:this.system},preventCache:!0}).then(h.hitch(this,function(b){200===b.errStatus?("undefined"!==typeof this._editor.session.$modes["ace/mode/cbas"]&&delete this._editor.session.$modes["ace/mode/cbas"],this._descriptorToMnemonicMap=b.lookup,
ace.config.inputDescriptors=b.inputDescriptors,ace.config.outputDescriptors=b.outputDescriptors,ace.config.valueDescriptors=b.valueDescriptors,ace.config.rcpInputDescriptors=b.rcpInputDescriptors,ace.config.rcpOutputDescriptors=b.rcpOutputDescriptors,ace.config.rcpValueDescriptors=b.rcpValueDescriptors,ace.config.scheduleDescriptors=b.scheduleDescriptors,ace.config.loopDescriptors=b.loopDescriptors,ace.config.arrayDescriptors=b.arrayDescriptors,ace.config.calendarDescriptors=b.calendarDescriptors,
ace.config.otherDescriptors=b.otherDescriptors):console.error("Could not load descriptors",b);a.resolve()}));return a.promise},_buildExtraSearchParameters:function(){this.extraSearchParameters={deviceNumber:this.device}},_buildFullPointName:function(a,b,c,d){return"{"+a+"} "+b+" ("+c+(d&&d!=C.propertyTypes.PROPID_PRESENT_VALUE?":"+d.toString():"")+")"},_buildPointMnemonic:function(a,b){var c=a.mnemonic;a.property&&a.property!==C.propertyTypes.PROPID_PRESENT_VALUE&&(c+=":"+a.property);a.arrayIndex&&
-1!==a.arrayIndex&&(c+="array"===b?"[ "+a.arrayIndex+" ]":"["+a.arrayIndex+"]");return c},_buildSingleWatch:function(a,b){var d=this.useDescriptors?b.name:b.mne,f="";if(b.error.code===this.SuccessCode)switch(b.value.type){case "analog":f=b.value.value;null!==b.units&&(f+=" "+b.units[0]);break;case "multi-state":case "binary":f=R.tryTranslateStateText(b.units[b.value.value]);break;default:f=b.value.value}else{var g=this.ErrorMessageMap[510];this.ErrorMessageMap[510]=y.substitute(this.rcStrings.loadingX,
[this.rcStrings.value]);f=this._getErrorMessage(b.error.code,b.error.msg);this.ErrorMessageMap[510]=g}d=c.create("p",{"class":"watch-point"+(b.local?" local-watch":" custom-watch"),innerHTML:d+" \x3d "+f},a,"last");!1===b.local&&this.own(v(d,"click",h.hitch(this,this._showWatchMenu,b.mne)))},_buildTitle:function(a){a=this._deviceName+" ("+this.device+") - "+a+" ("+this._getProgramMnemonic()+")";this._setTitle(a)},_buildWatchDisplay:function(){var a=c.create("article",{"class":"local-watch-container"},
this.traceGutter,"last");this.watches.filter(function(a){return a.local}).forEach(h.hitch(this,this._buildSingleWatch,a));c.create("div",{"class":"watch-separator",innerHTML:"\x26nbsp;"},this.traceGutter,"last");a=this.watches.filter(function(a){return!1===a.local});a.forEach(h.hitch(this,this._buildSingleWatch,this.traceGutter));a.some(function(a){return 510===a.error.code})&&(null!==this._refreshDefer&&this._refreshDefer.remove(),this._refreshDefer=this.defer(h.hitch(this,this._refreshWatches),
5E3))},_clearFetchInterval:function(){null!==this._fetchInterval&&(clearInterval(this._fetchInterval),this._fetchInterval=null)},_clearPollingTimer:function(a){clearTimeout(a)},_clearTrace:function(){var a=new d;a.then(h.hitch(this,function(){this._fetch(!0,!0).then(h.hitch(this,this._parseFetch))}));this._promptWhenDirty(a)},_createButtons:function(){this.buttonBar.addIcon(this._toolbar);this.setTooltips();this._setReadOnly()},_createDevicePullout:function(){this._devicePullout=new N({device:this.device,
isBACnetOnly:!0,systemId:this.system,relativeNode:this.builderWidget.contentPaneBody,okLabel:this.programStrings.sendMultiple});this.own(v(this._devicePullout,"clickOk",h.hitch(this,this._sendMultiple)));c.place(this._devicePullout.domNode,this.builderWidget.contentPaneBody,"last")},_createFileSelector:function(){this._fileSelector=new O({searchParams:"*.bas",systemId:this.system})},_createLoadFileDialog:function(){this._loadFileDialog=new p({title:this.programStrings.controlBasicFile,draggable:!0,
content:this._fileSelector,baseClass:"basFileSelectorDialogBox"});this._loadFileDialog.content.okButton.set({iconClass:"rcIcon openIcon",label:this.programStrings.open});this._setupLoadFileListeners()},_createOptionsDialog:function(){this._optionsDialog=new I({title:"Options",userOptions:this.userOptions,draggable:!1});this._addOptionsDialogListeners()},_createSaveFileDialog:function(){this._saveFileDialog=new H({title:this.programStrings.controlBasicFile,lastOpenedFilename:this._lastOpenedFilename,
draggable:!1});this._setupSaveFileListeners()},_createViews:function(){this.builderWidget.setMainContent(this.programsContent);this._views.push(this.builderWidget)},_decodeSendMultipleDetails:function(a,b){var c=a;"undefined"!==typeof this._messageMap[b]&&"undefined"!==typeof this._messageMap[b][a]&&(c=this._messageMap[b][a]);return c},_displayCompilerErrors:function(a){c.empty(this.traceGutter);this._resizeGutter(!0).then(h.hitch(this,function(){for(var b=0;b<a.length;++b)c.create("div",{"class":"compiler-error",
innerHTML:a[b]},this.traceGutter,"last")}))},_drawTraces:function(){var a=this._getLineHeight(),c=w(".trace-indicator",this.programsContent);if("undefined"!==typeof c)for(var d=0;d<c.length;d++)b.set(c[d],{"font-size":this.userOptions.fontSize+"pt",height:a+"px","line-height":a+"px"});b.set(this.traceGutter,{visibility:"visible"})},_editPoint:function(a){a=this._getDetailsFromPoint(a);a.mnemonic&&this._editableMnemonicRe.test(a.mnemonic)&&this._showEditPointDialog(a)},_editorValueSet:function(){this._editor.session.getUndoManager().reset();
this._removeEditorChangeListener(this._editorChangeListener);this._editorChangeListener=this._editor.getSession().on("change",h.hitch(this,function(){this.defer(h.hitch(this,function(){!1===this._editor.session.$undoManager.isClean()?this.makeDirty():this.makeClean()}))}));this._editor.onScrollLeftChange();this._toggleTrace(!this._toolbar.get("isShowingWatch"))},_fetch:function(a,b){this._clearFetchInterval();var c=this.getPathForFetch();return z.get(c,{handleAs:"json",query:{systemId:this.system,
device:this.device,instance:this.mne,descriptors:this.useDescriptors,inlineValues:this.showInlineValues,forceReload:a?a:!1,clearTrace:b?b:!1},preventCache:!0})},_fetchDeviceName:function(){return z.get("DeviceName",{handleAs:"json",query:{systemId:this.system,deviceNumber:this.device}})},_fetchRenumberProgram:function(){var a=this._editor.getValue().split("\n");z.put("RenumberProgram",{handleAs:"json",data:{programLines:a,systemId:this.system},preventCache:!0}).then(h.hitch(this,function(a){this._editor.setValue(a.programLines.join("\n"),
-1);a.errStatus===this._CompilerErrorsCode?this._displayCompilerErrors(a.compilerMsgs):this._displayError(a)}))},_fetchProgramFile:function(a){z.get("ProgramFile",{handleAs:"json",query:{filePath:a}}).then(h.hitch(this,function(a){200===a.errStatus?this._editor&&this._editor.setValue(a.programLines?a.programLines.join("\n"):"",-1):this._displayError(a)}))},_fetchUserPreferences:function(a){z.get("ProgramPreferences",{handleAs:"json",query:{userId:a?-1:rc.session._attributes.userId}}).then(h.hitch(this,
function(a){this._parseUserPreferencesFetch(a);this._updateEditorCss()}))},_getDescriptorForMnemonic:function(a){for(var b in this._descriptorToMnemonicMap)if(this._descriptorToMnemonicMap[b]===a)return b;return""},_getErrorMessage:function(a,b){var c="";if("undefined"!==typeof this.ErrorMessageMap[a]){if(c=this.ErrorMessageMap[a],a===this.SuccessCode){var d=b.match(/(\d+) bytes/);d&&(c=y.substitute(n.sendSuccess,[d[1]]))}}else 508===a?c=this._decodeBACnetError(b):(c=this.errorStrings.unexpectedError,
console.error("Unexpected Error: ",b));return c},_getLineHeight:function(){var a=w(".ace_line",this.editorNode);return 0<a.length?b.get(a[0],"height"):0},_getDetailsFromPoint:function(a){var b=W.getInfoFromMnemonic(a,this.device),c=null,d=null,f=C.propertyTypes.PROPID_PRESENT_VALUE,g=-1;null!==b?(d=b.pointMnemonic,f=b.property,g=b.arrayIndex,c=this._getDescriptorForMnemonic(b.pointMnemonic)):(b=this._descriptorRe.exec(a))?(c=a,"undefined"!==typeof this._descriptorToMnemonicMap[b[1]]?(d=this._descriptorToMnemonicMap[b[1]],
"undefined"!==typeof b[2]&&(f=Number(b[2].substr(1))),"undefined"!==typeof b[3]&&(g=Number(/(\d+)/.exec(b[3])[1]))):console.error(this.declaredClass+" - _getDetailsFromPoint(): Could not find mnemonic",a)):console.error(this.declaredClass+" - _getDetailsFromPoint(): Point does not match descriptors",a);return{descriptor:c,mnemonic:d,property:f,arrayIndex:g}},_getProgramMnemonic:function(){return this.device+"PRG"+this.mne},_onClose:function(){this.inherited(arguments);this.resize()},_onOptionsDialogOk:function(){this.userOptions=
this._optionsDialog.get("userOptions");this._sendUserOptions();this._updateEditorCss()},_onEditorClick:function(a){var b=this._editor.getCursorPosition(),c=h.clone(this._editor.session.getTokenAt(b.row,b.column)),d=this._editor.selection.getLineRange(b.row,!0),f=!1;if(null!==c){var g=this._editor.session.getTokenAt(b.row,c.start+c.value.length+1),k=null;null!==g&&(null!==(k=/(\[(?: ?)\d+(?: ?)\])/.exec(g.value))?c.value+=k[1]:"array"===c.type&&(f=!0))}null!==c&&"undefined"!==typeof this._supportedContextMenu[c.type]&&
b.column!==d.end.column?this._showPointMenu(a,c,f):null!==this._pointMenu&&this._pointMenu.hide()},_onSendMultipleClicked:function(){null===this._devicePullout&&this._createDevicePullout();this._devicePullout.show()},_parseFetch:function(a){a.errStatus===this.SuccessCode?a.initialLoad?(this._clearFetchInterval(),this._firstLoad&&(this._firstLoad=!1,this.onInitSuccess(),this.publishSearchable()),this._buildTitle(a.name),this.watches=a.watches,this.traces=a.traces||[],this.makeClean(),this._removeEditorChangeListener(this._editorChangeListener),
null!==a.inlineValues&&this._parseInlineValues(a),this._editor&&(this._editor.setValue(a.programLines?a.programLines.join("\n"):"",-1),this.defer(h.hitch(this,this._editorValueSet))),this._buildAuditLogContext(a)):this._setFetchInterval():(this._clearFetchInterval(),this._displayError(a));this._toolbar.toggleFetchers(!1)},_parseInlineValues:function(a){for(var b in a.programLines)for(var c;null!==(c=this._inlineValuesRe.exec(a.programLines[b]));){var d=a.inlineValues[c[1]],f;if(d)if(200===d.error.code){switch(d.value.type){case "binary":case "multi-state":if(d.units&&
Array.isArray(d.units)){f=R.tryTranslateStateText(d.units[d.value.value]);break}default:f=d.value.value}"string"===typeof f?f=f.replace(/ /g,String.fromCharCode(183)):"number"===typeof f&&(f+="")}else 508===d.error.code&&(f=this._decodeBACnetError(d.error.msg),f=f.replace("\x3cbr \x3e"," "),f=f.replace(/ /g,String.fromCharCode(183)));a.programLines[b]=a.programLines[b].replace(c[0],"\x3c"+f+"\x3e");this._inlineValuesRe.lastIndex+=f.length-c[1].length}},_parseUserPreferencesFetch:function(a){a.errStatus===
this.SuccessCode?(this.userOptions=a.userOptions,null===this._optionsDialog?this._createOptionsDialog():this._optionsDialog.refreshContent(this.userOptions),this._setEditorAutoComplete(this.userOptions.autoComplete),this._toolbar.set("autoComplete",this.userOptions.autoComplete)):this._displayError(a)},_promptWhenDirty:function(a){this.isDirty()?this._showConfirmDialog().then(h.hitch(this,function(){a.resolve()}),h.hitch(this,function(){a.reject()})):a.resolve()},_pointMenuRemoveFromWatchClicked:function(a,
b){var c=this._getDetailsFromPoint(a);c.mnemonic&&(c=this._buildPointMnemonic(c,b),this._removeFromWatch([c]))},_pollForStatus:function(a,b){this._clearPollingTimer(b);b=setTimeout(h.hitch(this,function(){z.get(a+"/status",{handleAs:"json",query:{processId:this._processId||-1,abort:0},preventCache:!0}).then(h.hitch(this,function(c){510===c.errStatus?(this._processId=c.processId,this._pollForStatus(a,b)):c.errStatus===this._CompilerErrorsCode?this._displayCompilerErrors(c.compilerMsgs):(c.errStatus===
this.SuccessCode&&(this.makeClean(),this._editorValueSet([]),this._fetch(!0).then(h.hitch(this,this._parseFetch))),this._displayError(c))}))}),500)},_refreshWatches:function(){this._refreshDefer&&(this._refreshDefer=null);z.get("ProgramWatches",{handleAs:"json",query:{userId:rc.session._attributes.userId,systemId:this.system,programMnemonic:this._getProgramMnemonic()}}).then(h.hitch(this,this._watchChanged))},_reloadData:function(){this._fetch().then(h.hitch(this,this._parseFetch))},_removeEditorChangeListener:function(a){null!==
a&&(this._editor.session.off("change",a),a=null)},_removeFromWatch:function(a){z.del("ProgramWatchList",{handleAs:"json",data:{systemId:this.system,userId:rc.session._attributes.userId,programMnemonic:this._getProgramMnemonic(),pointMnemonics:a}}).then(h.hitch(this,this._watchChanged))},_resize:function(){this.inherited(arguments);this._resizeContainer();this._editor&&this._editor.resize();this._devicePullout&&this._devicePullout.resize()},_resizeContainer:function(){var a=l.byId("rcSystemContent").clientHeight;
l.byId("rcAdminContentHeader")&&(a-=l.byId("rcAdminContentHeader").clientHeight);var a=a-this.buttonBar.domNode.clientHeight,a=a-2*b.get(this.buttonBar.domNode,"marginTop"),a=a-2*b.get(this.builderWidget.domNode,"paddingTop"),a=a-2*b.get(this.builderWidget.contentPaneBody,"paddingTop"),a=a-this._ResizeBufferSize,c=this.traceGutter.clientWidth+this._ResizeBufferSize;b.set(this.traceGutter,{height:a+"px"});b.set(this.editorNode,{height:a+"px",width:this.builderWidget.contents.clientWidth-(c+this._ResizeBufferSize)+
"px"})},_resizeGutter:function(a){var c=new d;this.own(c);var f=b.get(this.programsContent,"width"),l=b.get(this.traceGutter,"width"),n=b.get(this.editorNode,"width");a=a?.3*f-this._ResizeBufferSize:this._DefaultGutterWidth;f=f-(a+this._ResizeBufferSize)-this._ResizeBufferSize;l=k.animateProperty({node:this.traceGutter,duration:300,properties:{width:{start:l,end:a,units:"px"}}});n=k.animateProperty({node:this.editorNode,duration:300,properties:{width:{start:n,end:f,units:"px"}}});n=t.combine([l,n]).play();
this.own(g.after(n,"onEnd",h.hitch(this,function(){this._editor.resize();c.resolve()})));return c.promise},_revertChanges:function(){this._fetch().then(h.hitch(this,this._parseFetch))},_sendMultipleComplete:function(a){this._dirty&&a.some(h.hitch(this,function(a){return Number(a.object)===Number(this.device)}))&&this.makeClean()},_setAlarmContext:function(){S.setAlarmContextForBACnetDevice(this.system,this.device)},_showLoadFileDialog:function(){null===this._fileSelector&&this._createFileSelector();
null===this._loadFileDialog&&this._createLoadFileDialog();this._loadFileDialog.show()},_showSaveFileDialog:function(){null===this._saveFileDialog&&this._createSaveFileDialog();var a=this._fileSelector.store.query({root:!1});this._saveFileDialog.currentFiles=[];for(var b=0;b<a.length;b++)this._saveFileDialog.currentFiles.push(a[b].name);this._saveFileDialog.show()},_showOptions:function(){null===this._optionsDialog&&this._createOptionsDialog();this._optionsDialog.show()},_showSendMultipleStatusLog:function(a,
b){null===this._resultsDialog&&(this._resultsDialog=new M({staticTitle:"",currentTaskMap:this.ErrorMessageMap,headerMap:{name:this.programStrings.smDeviceName,object:this.programStrings.smDeviceNum,details:this.programStrings.smDetails},completeMessageMap:{sendMultiple:this.programStrings.smComplete},messageMap:{sendMultiple:h.hitch(this,this._decodeSendMultipleDetails)},typeMap:{sendMultiple:this.programStrings.smSuccessfulSend}}),this.own(v(this._resultsDialog,"done",h.hitch(this,this._sendMultipleComplete))));
this._resultsDialog.show();this._resultsDialog.set("queryParams",{processId:b});this._resultsDialog.set({title:this.programStrings.smInProgress,completeMessage:this.programStrings.smComplete,path:a})},_sendChanges:function(){var a=this._editor.getValue().split("\n").map(function(a){return encodeURIComponent(a).replace("%0D","")}),b={siteId:this.site,systemId:this.system,device:this.device,instance:this.mne,programLines:a};this._validateApprovalSessionWithReason(b).then(h.hitch(this,function(){z.put("Program",
{handleAs:"json",data:b}).then(h.hitch(this,function(a){510===a.errStatus?(this._processId=a.processId,this._pollForStatus(this.getPathForFetch(),this._pollForStatusTimer)):a.errStatus===this._CompilerErrorsCode?this._displayCompilerErrors(a.compilerMsgs):(a.errStatus===this.SuccessCode&&(this.makeClean(),this._editorValueSet([]),this._fetch(!0).then(h.hitch(this,this._parseFetch))),this._displayError(a))}),h.hitch(this,function(a){console.error(this.declaredClass+" - _sendChanges(): Could not save",
a)}))}),function(){})},_sendMultiple:function(a){var b=this._editor.getValue().split("\n").map(function(a){return encodeURIComponent(a).replace("%0D","")}),c={siteId:this.site,systemId:this.system,device:this.device,instance:this.mne,programLines:b,devices:a};this._validateApprovalSessionWithReason(c).then(h.hitch(this,function(){z.put("SendMultipleProgram",{handleAs:"json",data:c}).then(h.hitch(this,function(a){510===a.errStatus?(this._processId=a.processId,this._showSendMultipleStatusLog("SendMultipleProgram/status",
this._processId)):a.errStatus===this._CompilerErrorsCode?this._displayCompilerErrors(a.compilerMsgs):(a.errStatus===this.SuccessCode&&(this.makeClean(),this._editorValueSet([])),this._displayError(a))}),h.hitch(this,function(a){console.error(this.declaredClass+" - _sendChanges(): Could not save",a)}))}),function(){})},_saveProgramFile:function(a){var b=this._editor.getValue().split("\n");z.put("ProgramFile",{handleAs:"json",data:{fileName:a,programLines:b,systemId:Number(this.system)}}).then(h.hitch(this,
function(a){200===a.errStatus?A.publish("alert",{type:"success",message:this.errorStrings.successfulSave}):this._displayError(a);this._fileSelector.fetch()}))},_sendUserOptions:function(){z.put("ProgramPreferences",{handleAs:"json",data:{userId:rc.session._attributes.userId,userOptions:JSON.stringify(this.userOptions)}})},_setEditorAutoComplete:function(a){this._editor.setOptions({enableBasicAutocompletion:a,enableLiveAutocompletion:a})},_setFetchInterval:function(){this._clearFetchInterval();this._fetchInterval=
setInterval(h.hitch(this,this._reloadData),this._intervalTime)},_setLabelsForReplaceDialog:function(){if(!this._replaceTitleTextSet){var a=w(".ace_search",this.editorNode)[0];if("undefined"===typeof a)this.defer(h.hitch(this,this._setLabelsForReplaceDialog),5);else{var b=w(".ace_replace_form \x3e [action\x3d'replaceAll']",a)[0],c=28;"undefined"!==typeof b&&(c=9*b.textContent.length+20);this._setupReplaceSection(c);this._setupSearchSection(c);this._setupOptionsSection(c);r.add(a,"showing");this._replaceTitleTextSet=
!0}}},_setReadOnly:function(a){a=a||this.readOnly;this._setSendMultipleButtonEnabled(a);this._toolbar.filesMenu.set("disabled",a);this._toolbar.replaceButton.set("disabled",a);this._toolbar.renumberButton.set("disabled",a);this._editor.setReadOnly(a)},_setSendMultipleButtonEnabled:function(a){a=a||!rc.sys.job.isOpen({device:this.device})||!rc.session.hasRole(rc.session.roles2.sendMultiplePrograms,!0);this._toolbar.sendMultipleButton.set("disabled",a)},_setSupportedTypes:function(){this._supportedObjectTypes=
[this.objectTypeMap.inputs,this.objectTypeMap.outputs,this.objectTypeMap.variables,this.objectTypeMap.loops,this.objectTypeMap.schedules,this.objectTypeMap.calendars,this.objectTypeMap.arrays,this.objectTypeMap.programs,this.objectTypeMap.runtimeLogs,this.objectTypeMap.trendLogs]},_setTraces:function(a){null!==this._gutterRefreshTimer&&(clearTimeout(this._gutterRefreshTimer),this._gutterRefreshTimer=null);this._gutterRefreshTimer=setTimeout(h.hitch(this,function(){this._setTracesDebounce(a);this._gutterRefreshTimer=
null}),this._intervalTime)},_setTracesDebounce:function(a){c.empty(this.traceGutter);var b=this._getLineHeight();this._resizeGutter(!1).then(h.hitch(this,function(){for(var d=0;d<a.length;++d)c.create("div",{"class":"trace-indicator",innerHTML:a[d]?"T":"\x26nbsp;",style:{"font-size":this.userOptions.fontSize+"pt",height:b+"px","line-height":b+"px"}},this.traceGutter,"last")}))},_setupEditor:function(){var a=ace.require("ace/ext/language_tools");this._editor=ace.edit(this.editorNode);this._editor.$blockScrolling=
Infinity;a.setCompleters([a.keyWordCompleter]);this._editor.setOptions({fontFamily:"courier",fontSize:"10pt",showFoldWidgets:!1,showGutter:!1,showLineNumbers:!1,showPrintMargin:!1,wrap:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!0,readOnly:this.readOnly});this._editor.commands.removeCommand("find");this.own(g.after(this._editor.commands.byName.replace,"exec",h.hitch(this,this._setLabelsForReplaceDialog)));this._editor.session.on("changeScrollTop",h.hitch(this,function(a){this.traceGutter.scrollTop=
a}));this._editor.on("paste",function(a){a.text=a.text.replace(/\t/g," ")});this.own(v(this.editorNode,"click",h.hitch(this,this._onEditorClick)),v(this.editorNode,"dragenter",h.hitch(this,function(){r.add(this.editorNode,"dragging")})),v(this.editorNode,"dragleave, drop",h.hitch(this,function(){r.remove(this.editorNode,"dragging")})))},_setupLoadFileListeners:function(){this.own(v(window,"resize",h.hitch(this,function(){this._loadFileDialog.open&&this._loadFileDialog._position()})),v(this._fileSelector,
"save",h.hitch(this,function(a){this._loadFileDialog.hide();this._fetchProgramFile(a.path);this._setSaveFileDialogFilename(a.name)})),v(this._fileSelector,"cancel",h.hitch(this,function(){this._loadFileDialog.hide()})))},_setupOptionsSection:function(){var a=w(".ace_search",this.editorNode)[0],b=w(".ace_search_options \x3e [action\x3d'toggleRegexpMode']",a)[0];"undefined"!==typeof b&&f.set(b,"title",this.programStrings.regexpSearch);b=w(".ace_search_options \x3e [action\x3d'toggleCaseSensitive']",
a)[0];"undefined"!==typeof b&&f.set(b,"title",this.programStrings.matchCase);b=w(".ace_search_options \x3e [action\x3d'toggleWholeWords']",a)[0];"undefined"!==typeof b&&f.set(b,"title",this.programStrings.matchWholeWord);a=w(".ace_search_options \x3e [action\x3d'searchInSelection']",a)[0];"undefined"!==typeof a&&f.set(a,"title",this.programStrings.searchInSelection)},_setupPointSourceListeners:function(a){this.own(g.after(a,"onDndDrop",a.selectNone))},_setupReplaceSection:function(a){var c=w(".ace_search",
this.editorNode)[0],d=w(".ace_replace_form \x3e [action\x3d'replaceAll']",c)[0];"undefined"!==typeof d&&(f.set(d,{innerHTML:this.webviewStrings.all,title:this.programStrings.replaceAll}),b.set(d,"width",a+"px"));d=w(".ace_replace_form \x3e input",c)[0];if("undefined"!==typeof d){f.set(d,"placeholder",this.programStrings.replaceWith);var g=b.get(d,"width");b.set(d,"width",g-a+"px")}c=w(".ace_replace_form \x3e [action\x3d'replaceAndFindNext']",c)[0];"undefined"!==typeof c&&(f.set(c,{innerHTML:"",title:this.programStrings.replace}),
b.set(c,"width",a+"px"))},_setupSaveFileListeners:function(){this.own(v(this._saveFileDialog,"save",h.hitch(this,function(){var a=this._saveFileDialog.filenameTB.value;a.match(/\.bas$/)||(a+=".bas");this._saveProgramFile(a)})))},_setSaveFileDialogFilename:function(a){null!==this._saveFileDialog&&this._saveFileDialog.set("lastOpenedFilename",a);this._lastOpenedFilename=a},_setupSearchSection:function(a){var c=w(".ace_search",this.editorNode)[0],d=w(".ace_search_form \x3e input",c)[0];"undefined"!==
typeof d&&(f.set(d,"placeholder",this.programStrings.findWhat),this.defer(h.hitch(this,function(){d.focus()}),50));var g=w(".ace_search_form \x3e [action\x3d'findPrev']",c)[0];"undefined"!==typeof g&&(f.set(g,"title",this.programStrings.findPreviousBtnToolTip),b.set(g,"width",a+"px"));g=w(".ace_search_form \x3e [action\x3d'findNext']",c)[0];"undefined"!==typeof g&&(f.set(g,"title",this.programStrings.findNextBtnToolTip),b.set(g,"width",a+"px"));c=w(".ace_search_form \x3e [action\x3d'findAll']",c)[0];
"undefined"!==typeof c&&(f.set(c,"innerHTML",this.webviewStrings.all),b.set(c,"width",a+"px"))},_showConfirmDialog:function(){var b=new d;null===this._confirmDialog&&(this._confirmDialog=new Q({title:a.unsavedChanges,text:n.unsavedChanges,type:X.types.binaryConfirm}));var c=this._confirmDialog.on("close",h.hitch(this,function(a){switch(a){case X.returnValues.oneOrYes:b.resolve();break;case X.returnValues.allOrNo:b.reject();break;default:console.error(this.declaredClass+" - _showConfirmDialog(): Unknown choice",
a)}c.remove()}));this.own(c);this._confirmDialog.open();return b.promise},_showEditPointDialog:function(a){null===this._editPointDialog&&(this._editPointDialog=new V({title:u.editObject,system:this.system,site:this.site,reasonRequired:rc.session.reasonRequired()}));a.name=this._buildFullPointName(this._deviceName,a.descriptor,a.mnemonic,a.property);this._editPointDialog.set("data",a);this._editPointDialog.show()},_showPointMenu:function(a,b,c){null===this._pointMenu&&(this._pointMenu=new F,this.own(v(this._pointMenu,
"edit",h.hitch(this,this._editPoint)),v(this._pointMenu,"addToWatch",h.hitch(this,this._addToWatch)),v(this._pointMenu,"removeFromWatch",h.hitch(this,this._pointMenuRemoveFromWatchClicked))));var d=this._getDetailsFromPoint(b.value),f=this.watches.filter(function(a){return!1===a.local}).some(h.hitch(this,function(a){var c=this._buildPointMnemonic(d,b.type);return a.mne===c})),g="undefined"!==typeof this._canEditTypes[b.type],k=this._propertyIdentifierRe.exec(b.value);k&&(k=this._propertyUtility._getSupportedType(Number(k[k.length-
1])),k===C.primitiveTypes.BACNET_OBJECT_IDENTIFIER||k===C.primitiveTypes.COMPLEX)&&(g=!1);this._pointMenu.set({canEdit:g,disableWatch:c,point:b.value,pointType:b.type,isRemove:f});this._pointMenu.show(a)},_showReplaceDialog:function(){this._editor.execCommand("replace")},_showWatch:function(){null!==this._gutterRefreshTimer&&(clearTimeout(this._gutterRefreshTimer),this._gutterRefreshTimer=null);this._gutterRefreshTimer=setTimeout(h.hitch(this,function(){this._showWatchDebounce();this._gutterRefreshTimer=
null}),this._intervalTime)},_showWatchDebounce:function(){c.empty(this.traceGutter);this._resizeGutter(!0).then(h.hitch(this,this._buildWatchDisplay))},_showWatchMenu:function(a,b){null===this._watchListMenu&&(this._watchListMenu=new G,this.own(v(this._watchListMenu,"removeSingle",h.hitch(this,this._removeFromWatch)),v(this._watchListMenu,"removeAll",h.hitch(this,function(){var a=this.watches.filter(function(a){return!1===a.local}).map(function(a){return a.mne});this._removeFromWatch(a)})),v(window.document,
"click",h.hitch(this,function(a){!1===r.contains(a.target,"custom-watch")&&this._watchListMenu.hide()}))));this._watchListMenu.set("point",a);this._watchListMenu.show(b)},_toggleAutoComplete:function(){this._setEditorAutoComplete(this._toolbar.get("autoComplete"));this.userOptions.autoComplete=this._toolbar.get("autoComplete");this._sendUserOptions()},_toggleMnemonics:function(){this._toolbar.toggleFetchers(!0);this.useDescriptors=!this.useDescriptors;this._reloadData()},_toggleMnemonicsValidation:function(){var a=
new d;a.then(h.hitch(this,this._toggleMnemonics));this._promptWhenDirty(a)},_toggleTrace:function(a){a?this._setTraces(this.traces):this._showWatch()},_toggleValues:function(a){this.showInlineValues=!a;this._toolbar.toggleFetchers(!0);this._setReadOnly(this.showInlineValues);this.showInlineValues?(this._valuesLoadTimer=setInterval(h.hitch(this,this._reloadData),this._valuesLoadInterval),this._keyListener=v(this._editor.textInput.getElement(),"keydown",h.hitch(this,function(a){this._toolbar.set("showValues",
!1);R.stopEvent(a)})),this.own(this._keyListener)):(null!==this._valuesLoadTimer&&(clearInterval(this._valuesLoadTimer),this._valuesLoadTimer=null),null!==this._keyListener&&(this._keyListener.remove(),this._keyListener=null));this._reloadData()},_toggleValuesValidation:function(a){var b=new d;b.then(h.hitch(this,this._toggleValues,a),h.hitch(this._toolbar,this._toolbar.resetToggleValues));this._promptWhenDirty(b)},_updateEditorCss:function(){var a=b.get(this.editorNode,"font-size");this._applyGeneralEditorSettings();
a!==b.get(this.editorNode,"font-size")&&(b.set(this.traceGutter,{visibility:"hidden"}),this.defer(h.hitch(this,this._drawTraces),500));this._applySyntaxHighlighting()},_watchChanged:function(a){a.errStatus===this.SuccessCode&&(this.watches=a.watches);this._toggleTrace(!this._toolbar.get("isShowingWatch"))},destroy:function(){this.traces=[];this.watches=[];null!==this._pointMenu&&this._pointMenu.destroyRecursive();this._editor&&(this._removeEditorChangeListener(this._editorChangeListener),this._editor.session.removeAllListeners("changeScrollTop"),
this._editor.destroy());this._refreshDefer&&this._refreshDefer.remove();this._clearPollingTimer(this._pollForStatusTimer);this._clearPollingTimer(this._pollForMultipleStatusTimer);this._clearPollingTimer(this._gutterRefreshTimer);clearInterval(this._fetchInterval);clearInterval(this._valuesLoadTimer);this.inherited(arguments)}})})},"rc/bacnet/property":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all ./enums ./unit ./io/AnyPrimitive ./io/Array ./io/Date ./io/DateTime ./io/DeviceObjectPropertyReference ./io/Number ./io/Object ./io/service/ReadPropertyMultiple ./io/Time ./io/util ./Object ../_base/Error ../date rc/util/encoding/base16".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y){return m("rc/bacnet/property",null,{core:[8,8,9,7,7,-1,9,2,-1,1,2,2,7,1,4,2,-1,2,-1,-1,9,4,4,-1,1,4,4,9,7,7,-1,7,-1,2,4,8,9,9,-1,2,2,9,2,7,7,4,7,1,7,4,9,1,8,-1,-1,-1,10,11,7,4,-1,4,2,2,2,4,2,2,4,4,7,-1,9,2,2,12,12,7,-1,9,-1,1,9,-1,9,13,2,-1,2,2,9,7,9,4,9,2,8,8,2,1,9,-1,-1,9,4,-1,4,9,4,-1,7,8,9,2,-1,-1,-1,9,2,3,2,7,-1,-1,2,4,2,4,2,-1,-1,-1,-1,1,2,4,4,2,-1,2,2,2,-1,-1,1,2,2,2,2,-1,-1,4,-1,2,-1,2,4,-1,9,-1,9,-1,2,9,-1,-1,-1,2,7,-1,-1,-1,-1,2,13,-1,
4,2,2,-1,2,-1,2,-1,-1,-1,2,-1,4,-1,2,2,-1,1,-1,2,2,9,8,2,-1,2,-1,-1,2,1,-1,-1,-1,-1,-1,-1,-1,2,-1,4,-1,-1,-1,2,-1,-1,7,-1,-1,-1,9,2,-1,2,2,9,2,9,-1,9,-1,-1,-1,-1,-1,-1,-1,-1,2,-1,-1,9,-1,-1,-1,-1,-1,2,-1,2,-1,-1,-1,-1,9,9,-1,9,9,-1,-1,3,-1,-1,-1,1,-1,2,-1,9,-1,-1,-1,-1,-1,-1,1,2,-1,2,-1,1,-1,2,2,1,1,-1,2,1,9,2,1,-1,9,2,-1,-1,-1,-1,2,2,1,2,7,7,-1,-1,-1,-1,-1,7,9,3,-1,-1,2,2,-1,-1,2,9,2,1,-1,-1,-1,2,2,2,-1,2,9,2,2,2,8,-1,1,-1,-1,8,2,2,-1,-1,7,1,1,12,2,1,-1,9,1,-1,-1,-1,-1,1,2,-1,-1,2,9,-1,7,1,2,4,4,
2,9,4,-1,2,4,4,4,9,1,-1,4,4,-1,2,-1,2,2,9,-1,1,9,2,6,6,1,2,2,6,-1,-1,9,6,1,6,2,1,-1,-1,1,9,-1,2,4,-1,1,6,7,2,9,9,-1,-1,-1,-1,-1,-1,-1,9,6,2,2,6,6,-1,1,2,2,6,7,-1,9,-1,-1,-1,1,9,4,9,9,9,2,12,4,-1,9,-1,-1,2,-1,9,12,2,-1,-1,-1,12,12,-1,2,9,1,1,-1,-1,9,2,7,7,-1,-1,-1,-1,9,-1],exts:[-1,2,2,-1,-1,1,2,2,1,7,9,9,8,2,-1,-1,7,7,2,12,7,7,2,-1,-1,-1,-1,-1,12,9,1,4,2,-1,4,4,-1,2,-1,7,-1,6,1,1,-1,-1,-1,9,2,9,-1,2,2,6,2,-1,-1,9,2,1,7,-1,2,2,1,1,2,2,2,1,2,6,4,-1,9,-1,-1,4,-1,8,2,3,2,2,6,6,1,3,2,2,-1,-1,1,6,-1,2,
7,2,8,2,2,1,6,7,-1,-1,-1,-1,2,7,7,7,1,2,7,4,11,6,2,7,7,7,7,9,1,7,-1,7,1,7,6,1,7,1,7,12,9,7,9,1,2,-1,1,1,2,2,2,9,7,2,-1,7,9,-1,7,7,-1,-1,1,-1,-1,2,2,12,12,-1,-1,-1,-1,9,1,7,1,-1,1,2,1,1,1,1,9,2,2,2,4,4,9,9,2,6,-1,7,2,-1,-1,2,2,1,1,1,2,2,1,1,2,1,7,-1,2,2,9,2,2,1,7,1,8,9,9,9,7,7,7,7,12,2,2,2,1,-1,9,2,2,9,2,3,7,-1,2,1,4,9,-1,-1,12,-1,-1,-1,-1,9,-1,7,1,1,7,2,2,2,2,1,-1,2,-1,9,2,2,-1,9,2,1,1,9,2,2,2,2,10,1,7,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,2,2,1,1,-1,-1,-1,9,-1,-1,7,-1,-1,12],diagnostics:[4,2,2,
2,2,2,2,2,2,2,2,2,2,2,-1,-1,-1,4,7,-1,-1,-1,7,1,-1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,-1,-1,7,-1,2,2,2,2,2,2,2,2,2,-1,1,6,2,2,2,-1,4,2,1,-1,2,4,4,2,2,-1,2,1],extDiagnostics:[7,7,7,7,7,7,1,7],_bitStrUnusedBits:{0:5,1:5,35:5,52:6,111:4,198:4},regExp:"",stringValue:"",prompt:"",isSet:!1,propertyObject:null,property:null,hostObject:null,value:0,arrayIndex:-1,type:null,device:null,constructor:function(){arguments.length&&this.set.apply(this,arguments)},set:function(a,b,c,f,h){if("number"!==typeof a)throw new w({message:g.noPropertyProvided,
suggestion:g.noPropertyProvidedSuggestion});var k=v.isPropertyAnArray(a)?f:-1;if(this.property!==a||this.arrayIndex!=k||this.device!=h||this.hostObject.type!=b.type||this.hostObject.instance!=b.instance)this.stringValue="",this.isSet=!1;this.property=a;this.value=c||0;this.arrayIndex=v.isPropertyAnArray(a)?f:-1;this.hostObject=b||null;this.device=h||null;this.type=0===this.arrayIndex?d.primitiveTypes.UNSIGNED_INTEGER:this._getSupportedType(this.property);this.propertyObject=this._getPropertyObject(this.type)},
fetch:function(a){if(null==this.hostObject||null==this.device)throw new w({message:g.noPropertyProvided,suggestion:g.noPropertyProvidedSuggestion});return v.isPropertyAnArray(this.property)&&0==this.arrayIndex?this._fetch(a,d.primitiveTypes.UNSIGNED_INTEGER):this.type===d.primitiveTypes.COMPLEX&&222===this.property?this._fetch(a,d.primitiveTypes.CHARACTER_STRING):this._fetch(a)},isArray:function(){switch(this.property){case d.propertyTypes.PROPID_ACTION:case d.propertyTypes.PROPID_ACTION_TEXT:case d.propertyTypes.PROPID_EXCEPTION_SCHEDULE:case d.propertyTypes.PROPID_OBJECT_LIST:case d.propertyTypes.PROPID_PRIORITY:case d.propertyTypes.PROPID_PRIORITY_ARRAY:case d.propertyTypes.PROPID_WEEKLY_SCHEDULE:case d.propertyTypes.PROPID_EVENT_TIME_STAMPS:case d.propertyTypes.PROPID_SLAVE_PROXY_ENABLE:case d.propertyTypes.PROPID_AUTO_SLAVE_DISCOVERY:case d.propertyTypes.PROPID_CONFIGURATION_FILES:case d.propertyTypes.PROPID_STATE_TEXT:return!0;
default:return!1}},updateValueFromValueObject:function(a){this.propertyObject=a;this.isSet=!0;this._setDisplayInfo()},_getPropertyObject:function(a){var b;switch(a){case d.primitiveTypes.BINARY:case d.primitiveTypes.UNSIGNED_INTEGER:case d.primitiveTypes.SIGNED_INTEGER:case d.primitiveTypes.REAL:case d.primitiveTypes.DOUBLE:case d.primitiveTypes.ENUMERATED:b=new q(0,a);break;case d.primitiveTypes.DATE:b=new c(0,0,0,0);break;case d.primitiveTypes.TIME:b=new n(0,0,0,0);break;case d.primitiveTypes.OCTET_STRING:case d.primitiveTypes.CHARACTER_STRING:case d.primitiveTypes.BIT_STRING:b=
new r([],a);break;case d.primitiveTypes.ANY_PRIMITIVE:b=new f;break;case d.primitiveTypes.BACNET_OBJECT_IDENTIFIER:b=new u(0,0);break;case d.primitiveTypes.NULL:case d.primitiveTypes.COMPLEX:this.property===d.propertyTypes.PROPID_OBJECT_PROPERTY_REFERENCE?b=new t(new u(d.objectTypes.OBJID_DEVICE,this.device)):v.isPropertyAnArray(this.property)&&(b=new f)}return b},_fetch:function(b,c){c||(c=this.type);var f=this._getPropertyObject(c);if(!k.isObject(f))return null;f=[{o:new u(this.hostObject.type,
this.hostObject.instance),pl:[{p:new q(this.property,d.primitiveTypes.ENUMERATED),i:v.isPropertyAnArray(this.property)?new q(this.arrayIndex,d.primitiveTypes.UNSIGNED_INTEGER):-1,v:f}]}];f=new a({device:this.device,index:b},f);return rc.xhr.request({gid:"GRP",type:"bacnet",s:f,handle:k.hitch(this,function(b){if(b instanceof w)return b.classCode&&(this.propertyObject=b.classCode),b;k.isObject(b)&&b.isInstanceOf(a)&&this._onFetch(b.o[0].pl[0].v);return this.propertyObject}),silentError:!0})},_onFetch:function(a){this.propertyObject=
a;this.isSet=!0;this._setDisplayInfo()},_setDisplayInfo:function(){var a=this.propertyObject;if(a)if("rc/bacnet/io/Object"===a.declaredClass)this.regExp="\\d+\\s\\d+",this.prompt=g.objectIDType,this.stringValue=d.mnemonics[a.t]+a.i;else if("number"===typeof a.t)switch(a.t){case d.primitiveTypes.BINARY:this.regExp="0|1";this.prompt=g.booleanOnly;this.stringValue=a.v+"";break;case d.primitiveTypes.UNSIGNED_INTEGER:this.regExp="[0-9]*.?[0-9]+";this.prompt=g.unsignedNumbers;this.stringValue=a.v+"";break;
case d.primitiveTypes.SIGNED_INTEGER:case d.primitiveTypes.REAL:case d.primitiveTypes.DOUBLE:this.regExp="[-+]?[0-9]*.?[0-9]+";this.prompt=g.signedNumbers;this.stringValue=a.v+"";break;case d.primitiveTypes.ENUMERATED:this.regExp="\\d+";this.prompt=g.postitveIntegersOnly;this.isUnit(this.property)?this.stringValue=l.getAbbreviation(a.v):this.stringValue=a.v+"";break;case d.primitiveTypes.BIT_STRING:this.property===d.propertyTypes.PROPID_STATUS_FLAGS?(this.regExp="Alm\\s(0|1)\\sFlt\\s(0|1)\\sOvrRdn\\s(0|1)\\sOOS\\s(0|1)",
this.prompt=g.statusFlags,this.stringValue=this._toDisplayStatusBits(a,this.property)):(this.regExp="((0|1),){"+(this._getUsedBits(a.ary)-1)+"}(0|1)",this.prompt=g.bitString,this.stringValue=this.bitStringToString(a));break;case d.primitiveTypes.CHARACTER_STRING:(this.stringValue=a.getString())&&0<this.stringValue.length&&(this.stringValue=this.stringValue.split("\r").join("\x3cbr\x3e"));break;case d.primitiveTypes.OCTET_STRING:this.regExp="((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]),)*(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";
this.prompt=g.octets;this.stringValue=a.ary.join();break;case d.primitiveTypes.DATE:this.regExp="(0?\\d|[1-2]\\d|3[0-1])\\/(0?\\d|1[0-2])\\/\\d{1,4}";this.prompt=g.dateFormat;this.stringValue=a.d+"/"+a.m+"/"+(a.y+1900);break;case d.primitiveTypes.TIME:this.regExp="((0?\\d|1\\d|2[0-3]):(0?\\d|[1-5]\\d):(0?\\d|[1-5]\\d).([0]?\\d|[1-9]\\d))";this.prompt=g.timeFormat;this.stringValue=a.h+":"+(10>a.m?"0"+a.m:a.m)+":"+a.s+"."+a.hh;break;case d.primitiveTypes.ANY_PRIMITIVE:this.stringValue=a.v.v.toString()}else if(a instanceof
t){this.prompt="Mnemonic: Property[index]  ex. 1000DEV1000: 76[2]";var c=new x(a.d?a.d.i:this.device,a.o.t,a.o.i),h=null!=a.i?"["+a.i+"]":"";this.stringValue=c.toMnemonic()+": "+a.p.v+h;this.regExp="\\d+\\D{2,5}\\d+(:)\\s\\d+|\\d+\\D{2,5}\\d+(:)\\s\\d+\\[\\d+\\]"}else if(a instanceof f)this.regExp="\\w*",this.prompt=g.anyValue,this.stringValue=a.v.v.toString();else if(a instanceof b){this.regExp="(0?\\d|[1-2]\\d|3[0-1])\\/(0?\\d|1[0-2])\\/\\d{1,4}s+((0?\\d|1\\d|2[0-3]):(0?\\d|[1-5]\\d):(0?\\d|[1-5]\\d).([0]?\\d|[1-9]\\d))";
this.prompt=g.dateTimeFormat;var c=10>a.t.m?"0"+a.t.m:a.t.m,h=10>a.t.s?"0"+a.t.s:a.t.s,k=["Valid dow vals are 1-7",g.monday,g.tuesday,g.wednesday,g.thursday,g.friday,g.saturday,g.sunday],k=0<a.d.dow&&8>a.d.dow?k[a.d.dow]+" ":"",n=a.d.m;255===a.d.m?n="Any":13===a.d.m?n="Odd":14===a.d.m?n="Even":32===a.d.m&&(n="Last");var m=a.d.d;33===a.d.d?m="Odd":34===a.d.d&&(m="Even");this.stringValue=k+m+"/"+n+"/"+(255===a.d.y?"Any":a.d.y+1900)+" "+(255===a.t.h?"Any":a.t.h)+":"+(255===c?"Any":c)+":"+(255===h?"Any":
h)+"."+(255===a.t.hh?"Any":a.t.hh)}},setValue:function(a){this.stringValue=a;var c=this.propertyObject,f=[];if(c)if(c instanceof u)f=a.split(" "),c.t=f[0]=parseInt(f[0],10),c.i=f[1]=parseInt(f[1],10);else if("number"===typeof c.t)switch(c.t){case d.primitiveTypes.BINARY:case d.primitiveTypes.UNSIGNED_INTEGER:case d.primitiveTypes.SIGNED_INTEGER:case d.primitiveTypes.ENUMERATED:case d.primitiveTypes.REAL:case d.primitiveTypes.DOUBLE:c.v=parseFloat(a);break;case d.primitiveTypes.DATE:this.setDateValue(c,
a);break;case d.primitiveTypes.TIME:this.setTimeValue(c,a);break;case d.primitiveTypes.ANY_PRIMITIVE:this.property===d.propertyTypes.PROPID_SCHEDULE_DEFAULT&&(c.v.v=parseInt(a,10));break;case d.primitiveTypes.CHARACTER_STRING:f=this._getStringLength(this.property);a.length>f&&(a=a.slice(0,f));c.ary=y.strToHex(a);break;case d.primitiveTypes.BIT_STRING:f=this.property===d.propertyTypes.PROPID_STATUS_FLAGS?this._getStatusBits(a):a.split(",");c=this.bitArrayToBacnetBitString(f,c);break;case d.primitiveTypes.OCTET_STRING:c.ary=
a.split(",")}else if(c instanceof t){var h=/\D+/,h=a.split(h),f=parseFloat(h[0]),k=parseFloat(h[1]);c.p=new q(parseFloat(h[2])||d.propertyTypes.PROPID_PRESENT_VALUE,d.primitiveTypes.ENUMERATED);c.i=parseFloat(h[3])||null;null!=c.i&&(c.i=new q(c.i,d.primitiveTypes.UNSIGNED_INTEGER));h=/\d+/;h=a.split(h);a=p.indexOf(v.baseMnes,h[1]);c.o=new u(a,k);c.d=new u(d.objectTypes.OBJID_DEVICE,f)}else c instanceof b&&(f=a.match("(0?\\d|[1-2]\\d|3[0-1])\\/(0?\\d|1[0-2])\\/\\d{1,4}")[0],this.setDateValue(c.d,f),
f=["Valid dow vals are 1-7",g.monday,g.tuesday,g.wednesday,g.thursday,g.friday,g.saturday,g.sunday],k=a.match("([A-Za-z]+)")[0],f=f.indexOf(k),1<=f&&(c.d.dow=f),a=a.match("((0?\\d|1\\d|2[0-3]):(0?\\d|[1-5]\\d):(0?\\d|[1-5]\\d).([0]?\\d|[1-9]\\d))")[0],this.setTimeValue(c.t,a))},setTimeValue:function(a,b){var c=b.split(":"),d=[0,0];2<c.length&&(d=c[2].split("."));a.h=parseInt(c[0],10);a.m=parseInt(c[1],10);a.s=parseInt(d[0],10);a.hh=parseInt(d[1],10);return a},setDateValue:function(a,b){var c=b.split("/");
a.y=parseInt(c[2],10)-1900;a.m=parseInt(c[1],10);a.d=parseInt(c[0],10);c=(new Date(a.y,a.m,a.d)).getDay();0===c&&(c=7);a.dow=c;return a},bitStringToString:function(a){for(var b=this._getUsedBits(a.ary),c=[],d=0;d<b;d++)c[d]=a.getBit(d);return c.join()},_getUsedBits:function(a){return 8*(a.length-1)-a[0]},bitArrayToBacnetBitString:function(a,b){var c,d=[],f;if(a.length){b.ary=[];c=a.length%8;f=Math.floor(a.length/8);c&&f++;b.ary.push(c?8-c:0);c=function(a){for(var b=128,c=0,d=0;d<a.length;d++)c+=b*
a[d],b/=2;return c};for(var g=0,h=0;h<f;h++)d.push(a.slice(g,g+8)),g+=8,b.ary.push(c(d[h]))}return b},_toDisplayStatusBits:function(a){for(var b=["Alm","Flt","OvrRdn","OOS"],c="",d=this._getUsedBits(a.ary),f=0;f<d;f++)c+=b[f]+" "+a.getBit(f)+" ";return c},_getStatusBits:function(a){a=a.split(" ");var b=[];b.push(a[1]);b.push(a[3]);b.push(a[5]);b.push(a[7]);return b},_getStateText:function(a){for(var b="",c=0;c<a.length;c++)b+=a[c].getString()+";";a.length&&(b=b.slice(0,-1));return b},isCharString:function(){return this.propertyObject.hasOwnProperty("t")&&
7===this.propertyObject.t?!0:!1},isUnit:function(){switch(this.property){case d.propertyTypes.PROPID_UNITS:case d.propertyTypes.PROPID_PROPORTIONAL_CONSTANT_UNITS:case d.propertyTypes.PROPID_OUTPUT_UNITS:case d.propertyTypes.PROPID_INTEGRAL_CONSTANT_UNITS:case d.propertyTypes.PROPID_DERIVATIVE_CONSTANT_UNITS:case d.propertyTypes.PROPID_CONTROLLED_VARIABLE_UNITS:return!0;default:return!1}},_isList:function(){switch(this.property){case d.propertyTypes.PROPID_RECIPIENT_LIST:case d.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:case d.propertyTypes.PROPID_DATELIST:case d.propertyTypes.PROPID_TIME_SYNCHRONIZATION_RECIPIENTS:case d.propertyTypes.PROPID_VT_CLASSES_SUPPORTED:case d.propertyTypes.PROPID_ACTIVE_VT_SESSIONS:case 55:case d.propertyTypes.PROPID_DEVICE_ADDRESS_BINDING:case d.propertyTypes.PROPID_ACTIVE_COV_SUBSCRIPTIONS:case d.propertyTypes.PROPID_MANUAL_SLAVE_ADDRESS_BINDING:case d.propertyTypes.PROPID_SLAVE_ADDRESS_BINDING:return!0;
default:return!1}},canAddRemoveListElement:function(){switch(this.property){case d.propertyTypes.PROPID_RECIPIENT_LIST:case d.propertyTypes.PROPID_LIST_OF_OBJECT_PROPERTY_REFERENCES:case d.propertyTypes.PROPID_DATELIST:case d.propertyTypes.PROPID_TIME_SYNCHRONIZATION_RECIPIENTS:return!0;default:return!1}},_getStringLength:function(a){return{3:32,4:32,12:64,28:255,29:64,31:64,43:32,44:64,46:32,48:64,58:64,70:64,77:64,85:255,121:32,110:32,168:64,352:64}[a]||32},_getSupportedType:function(a){return 0<=
a&&491>=a?this.core[a]:1024<=a&&1330>=a?this.exts[a-1024]:2048<=a&&2122>=a?this.diagnostics[a-2048]:65536<=a&&65543>=a?this.extDiagnostics[a-65536]:-1},toString:function(){return"rc.bacnet.Property , property: "+this.property+", property io obj : "+this.propertyObject+", type: "+this.type+", value: "+this.value+", array index: "+this.arrayIndex+", hostObject: "+this.hostObject+", device: "+this.device}})})},"webview/admin/programs/PointMenu":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../../nls/programs dojo/keys dojo/on dojo/text!./templates/PointMenu.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return k("webview/admin/programs/PointMenu",[m,p],{baseClass:"",canEdit:!1,disableWatch:!1,programStrings:c,rcStrings:r,templateString:q,_EnglishHeight:58,_EnglishWidth:134,postCreate:function(){this.inherited(arguments);l.place(this.domNode,window.document.body,"last");this._buildEventItemMap();this.own(t(this.editItem,"click",h.hitch(this,this._itemClicked,"edit")),t(this.addToWatchItem,"click",h.hitch(this,this._itemClicked,"addToWatch")),t(this.cancelItem,"click",
h.hitch(this,this._itemClicked,"cancel")),t(window,"keydown",h.hitch(this,function(c){c.keyCode===b.ESCAPE&&this.hide()})))},hide:function(){d.add(this.domNode,"hidden")},onAddToWatch:function(b,a){},onEdit:function(b,a){},onRemoveFromWatch:function(b,a){},show:function(b){var a=window.document.body.clientWidth,c=window.document.body.clientHeight,g="left",h="right",k="bottom",l="top",m=b.clientX,q=b.clientY;0>=a-(b.clientX+this._EnglishWidth)&&(g="right",h="left",m=a-b.clientX);0>=c-(b.clientY+this._EnglishHeight)&&
(l="bottom",k="top",q=c-b.clientY);f.set(this.domNode,g,m+"px");f.set(this.domNode,l,q+"px");f.set(this.domNode,h,"");f.set(this.domNode,k,"");d.remove(this.domNode,"hidden")},_buildEventItemMap:function(){this._itemEventMap={addToWatch:"_onAddToWatch",edit:"_onEdit",cancel:"hide"}},_itemClicked:function(b){b=this._itemEventMap[b];"undefined"!==typeof b&&(this[b](this.point,this.pointType),this.hide())},_onAddToWatch:function(b,a){if(!this.disableWatch)if(this.isRemove)this.onRemoveFromWatch(b,a);
else this.onAddToWatch(b,a)},_onEdit:function(b,a){if(this.canEdit)this.onEdit(b,a)},_setCanEditAttr:function(b){this.inherited(arguments);this.canEdit=b;d.toggle(this.editItem,"disabled",!this.canEdit)},_setDisableWatchAttr:function(b){this.inherited(arguments);this.disableWatch=b;d.toggle(this.addToWatchItem,"disabled",this.disableWatch)},_setIsRemoveAttr:function(b){this.inherited(arguments);this.isRemove=b;g.set(this.addToWatchItem,"innerHTML",this.isRemove?this.programStrings.removeFromWatchlist:
this.programStrings.addToWatchList)}})})},"webview/admin/programs/WatchPointMenu":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!../../nls/all dojo/i18n!../../nls/programs dojo/keys dojo/on dojo/text!./templates/WatchPointMenu.html".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t){return k("webview/admin/programs/PointMenu",[m,p],{baseClass:"",programStrings:r,templateString:t,webviewStrings:f,_EnglishHeight:58,
_EnglishWidth:134,postCreate:function(){this.inherited(arguments);d.place(this.domNode,window.document.body,"last");this._buildEventItemMap();this.own(b(this.removeSingle,"click",h.hitch(this,this._itemClicked,"removeSingle")),b(this.removeAll,"click",h.hitch(this,this._itemClicked,"removeAll")),b(this.cancelItem,"click",h.hitch(this,this._itemClicked,"cancel")),b(window,"keydown",h.hitch(this,function(b){b.keyCode===c.ESCAPE&&this.hide()})))},hide:function(){g.add(this.domNode,"hidden")},onCancel:function(){this.hide()},
onRemoveAll:function(){},onRemoveSingle:function(b){},show:function(b){var c=window.document.body.clientWidth,a=window.document.body.clientHeight,d="left",f="right",h="bottom",k="top",m=b.clientX,q=b.clientY;0>=c-(b.clientX+this._EnglishWidth)&&(d="right",f="left",m=c-b.clientX);0>=a-(b.clientY+this._EnglishHeight)&&(k="bottom",h="top",q=a-b.clientY);l.set(this.domNode,d,m+"px");l.set(this.domNode,k,q+"px");l.set(this.domNode,f,"");l.set(this.domNode,h,"");g.remove(this.domNode,"hidden")},_buildEventItemMap:function(){this._itemEventMap=
{removeAll:"onRemoveAll",removeSingle:"onRemoveSingle",cancel:"onCancel"}},_itemClicked:function(b){b=this._itemEventMap[b];"undefined"!==typeof b&&(this[b]([this.point]),this.hide())}})})},"webview/admin/programs/widget/OptionsDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/programs dojo/on dojo/text!./templates/OptionsDialog.html ../../../widget/ButtonGroupButton dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select ../../../widget/ButtonGroup webview/widget/ColorPicker".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return m("webview/admin/programs/widget/OptionsDialog",[p],{templateString:r,buttonGroupButtons:null,userOptions:null,rcStrings:g,webviewStrings:d,programStrings:l,postCreate:function(){this.inherited(arguments);this._buildButtonGroup();this._populateDialog();this._setupOnClicks();this._setupStylingListeners();this._styleFontSample()},_getUserOptionsAttr:function(){this._syncUserOptions();return this.userOptions},onOk:function(){},onCancel:function(){},onRestore:function(){},
refreshContent:function(b){this.userOptions=b;this._populateDialog();this._styleFontSample()},_buildButtonGroup:function(){null===this.buttonGroupButtons&&(this.buttonGroupButtons={},this.buttonGroupButtons.bold=new c({content:"\x3cstrong\x3eB\x3c/strong\x3e"}),this.buttonGroupButtons.italic=new c({content:"\x3cem\x3eI\x3c/em\x3e"}),this.buttonGroupButtons.underline=new c({content:"\x3cu\x3eU\x3c/u\x3e"}),this.buttonGroupButtons.strikethrough=new c({content:"\x3cstrike\x3eS\x3c/strike\x3e"}),this.buttonGroup.addButton(this.buttonGroupButtons.bold.domNode),
this.buttonGroup.addButton(this.buttonGroupButtons.italic.domNode),this.buttonGroup.addButton(this.buttonGroupButtons.underline.domNode),this.buttonGroup.addButton(this.buttonGroupButtons.strikethrough.domNode))},_onCancel:function(){this.onCancel()},_onOk:function(){this.onOk()},_onRestore:function(){this.onRestore()},_setupOnClicks:function(){this.own(f(this.restoreButton,"click",k.hitch(this,this._onRestore)),f(this.okButton,"click",k.hitch(this,this._onOk)),f(this.cancelButton,"click",k.hitch(this,
this._onCancel)))},_setupStylingListeners:function(){this.own(f(this.fontSize,"change",k.hitch(this,function(){this._syncUserOptions();this._styleFontSample()})),f(this.normalColourPicker,"blurred",k.hitch(this,function(){this._syncUserOptions();this._styleFontSample()})),f(this.buttonGroup,"change",k.hitch(this,function(){this._syncUserOptions();this._styleFontSample()})))},_syncUserOptions:function(){this.userOptions.fontSize=this.fontSize.get("value");this.userOptions.colours.normal=this.normalColourPicker.get("color");
this.userOptions.bold=this.buttonGroupButtons.bold.get("checked");this.userOptions.italicize=this.buttonGroupButtons.italic.get("checked");this.userOptions.underscore=this.buttonGroupButtons.underline.get("checked");this.userOptions.strikethrough=this.buttonGroupButtons.strikethrough.get("checked");this.userOptions.syntaxHighlighting=this.syntaxHighlightingCheckBox.get("checked");this.userOptions.colours.comments=this.commentColourPicker.get("color");this.userOptions.colours.statements=this.statementsColourPicker.get("color");
this.userOptions.colours.functions=this.functionsColourPicker.get("color");this.userOptions.colours.lineNumbers=this.lineNumbersColourPicker.get("color");this.userOptions.colours.alarmText=this.alarmTextColourPicker.get("color");this.userOptions.colours.inputs=this.inputsColourPicker.get("color");this.userOptions.colours.outputs=this.outputsColourPicker.get("color");this.userOptions.colours.valuesAndArrays=this.ValuesAndArraysColourPicker.get("color");this.userOptions.colours.otherObjects=this.otherObjectsColourPicker.get("color");
this.userOptions.colours.background=this.backgroundColourPicker.get("color");this.userOptions.colours.presentValues=this.presentValuesColourPicker.get("color")},_populateDialog:function(){this.fontSize.set("value",this.userOptions.fontSize);this.normalColourPicker.set("color",this.userOptions.colours.normal);this.buttonGroupButtons.bold.set("checked",this.userOptions.bold);this.buttonGroupButtons.italic.set("checked",this.userOptions.italicize);this.buttonGroupButtons.underline.set("checked",this.userOptions.underscore);
this.buttonGroupButtons.strikethrough.set("checked",this.userOptions.strikethrough);this.syntaxHighlightingCheckBox.set("checked",this.userOptions.syntaxHighlighting);this.commentColourPicker.set("color",this.userOptions.colours.comments);this.statementsColourPicker.set("color",this.userOptions.colours.statements);this.functionsColourPicker.set("color",this.userOptions.colours.functions);this.lineNumbersColourPicker.set("color",this.userOptions.colours.lineNumbers);this.alarmTextColourPicker.set("color",
this.userOptions.colours.alarmText);this.inputsColourPicker.set("color",this.userOptions.colours.inputs);this.outputsColourPicker.set("color",this.userOptions.colours.outputs);this.ValuesAndArraysColourPicker.set("color",this.userOptions.colours.valuesAndArrays);this.otherObjectsColourPicker.set("color",this.userOptions.colours.otherObjects);this.backgroundColourPicker.set("color",this.userOptions.colours.background);this.presentValuesColourPicker.set("color",this.userOptions.colours.presentValues)},
_styleFontSample:function(){var b="";this.userOptions.underscore&&(b="underline");this.userOptions.strikethrough&&(b+=" line-through");h.set(this.fontSample,{"font-size":this.userOptions.fontSize+"pt",color:this.userOptions.colours.normal,"text-decoration":b,"font-weight":this.userOptions.bold?"bold":"","font-style":this.userOptions.italicize?"italic":""})}})})},"webview/widget/ButtonGroupButton":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/text!webview/widget/templates/ButtonGroupButton.html dijit/form/CheckBox".split(" "),
function(p,m,k,h,g){return h("webview/widget/ButtonGroupButton",[m,p,k],{templateString:g,baseClass:"",content:"\x26nbsp;",_getCheckedAttr:function(){return this.checkBox.get("checked")},_setCheckedAttr:function(d){this.checkBox.set("checked",d)}})})},"webview/widget/ButtonGroup":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","dojo/dom-construct","dojo/text!webview/widget/templates/ButtonGroup.html"],function(p,m,k,h,g){return k("webview/widget/ButtonGroup",[m,p],
{templateString:g,baseClass:"",addButton:function(d){h.place(d,this.buttonsContainer)}})})},"webview/admin/programs/widget/ProgramDndPoint":function(){define(["dojo/_base/declare","dojo/dom-class","../../widget/NativeDndPoint"],function(p,m,k){return p("webview/admin/programs/widget/ProgramDndPoint",[k],{useDescriptors:!1,programDevice:-1,drag:function(h){m.add(this.domNode,"dragging");h.dataTransfer.effectAllowed=this.effectAllowed;if(this.useDescriptors){var g=this._getDescriptorForProgram();h.dataTransfer.setData("text",
" "+g)}else h.dataTransfer.setData("text"," "+this.pointMnemonic)},_getDescriptorForProgram:function(){var h=this.pointName.replace(/ /g,String.fromCharCode(183)),g=null;null!==(g=/^(\d+)(?:[a-z])+?\d+?/i.exec(this.pointMnemonic))&&(g=Number(g[1]),g!==this.programDevice&&(h="{"+g+"}"+h));return h}})})},"webview/admin/widget/NativeDndPoint":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare","dojo/dom-class","dojo/text!./templates/NativeDndPoint.html"],function(p,m,
k,h,g){return k("webview/admin/widget/NativeDndPoint",[m,p],{templateString:g,deviceName:"",effectAllowed:"copy",pointName:"",pointMnemonic:"",drag:function(d){h.add(this.domNode,"dragging");d.dataTransfer.effectAllowed=this.effectAllowed;d.dataTransfer.setData("text"," "+this.pointMnemonic)},stopDrag:function(){h.remove(this.domNode,"dragging")}})})},"webview/admin/programs/widget/SaveFileDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/programs dojo/on dojo/text!./templates/SaveFileDialog.html ../../../widget/WarningDialog ../../../widget/WarningDialogEnums dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return m("webview/admin/programs/widget/SaveFileDialog",[p],{currentFiles:[],lastOpenedFilename:null,placeholderName:"program.bas",programStrings:d,rcStrings:h,templateString:f,webviewStrings:g,_confirmOverwriteDialog:null,postCreate:function(){this.inherited(arguments);this._setupOnClicks();this.okButton.set("label",this.rcStrings.rcbSave)},_setLastOpenedFilenameAttr:function(b){this.filenameTB.set("value",b);this._set("lastOpenedFilename",b)},onSave:function(){},onCancel:function(){},
_createConfirmOverwriteDialog:function(){this._confirmOverwriteDialog=new r({title:this.webviewStrings.overwriteDialogTitle,type:c.types.binary,text:this.webviewStrings.overwriteDialogBody})},_onCancel:function(){this.onCancel()},_onSave:function(){this.onSave()},_onSubmit:function(){this._wouldOverwrite()?this._showConfirmOverwriteDialog():(this.inherited(arguments),this._onSave())},_setupOnClicks:function(){this.own(l(this.cancelButton,"click",k.hitch(this,this._onCancel)))},_showConfirmOverwriteDialog:function(){null===
this._confirmOverwriteDialog&&this._createConfirmOverwriteDialog();var b=this._confirmOverwriteDialog.on("close",k.hitch(this,function(d){switch(d){case c.returnValues.oneOrYes:this.onExecute();this.execute(this.get("value"));this._onSave();break;case c.returnValues.none:break;default:console.error(this.declaredClass+" - _createConfirmOverwriteDialog(): Unknown choice",d)}b.remove()}));this.own(b);this._confirmOverwriteDialog.open()},_wouldOverwrite:function(){var b=this.filenameTB.value;b.match(/\.bas$/)||
(b+=".bas");for(var c=0;c<this.currentFiles.length;c++)if(b===this.currentFiles[c])return!0;return!1}})})},"webview/admin/widget/DevicePullout":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/fx dojo/i18n!rc/nls/all dojo/on dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/text!./templates/DevicePullout.html ./NetworkTree ../../util/globalConstants dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z){return d("webview/admin/widget/DevicePullout",[m,p,k],{baseClass:"",rcStrings:q,templateString:x,_MinPulloutWidth:328,_deviceCheckboxes:[],_isOpen:!1,_networkTree:null,_totalVerticalPadding:0,_treeLoaded:!1,postCreate:function(){this.inherited(arguments);this._fetchDevices()},hide:function(){g.forEach(this._deviceCheckboxes,function(a){a.set("checked",!1)});var a=b.get(this.domNode,"width"),a=l.animateProperty({node:this.domNode,properties:{width:{start:a,
end:0}}}),c=l.animateProperty({node:this.contents,duration:150,properties:{opacity:{start:1,end:0}},onEnd:f.hitch(this,function(){r.add(this.contents,"hidden");this._removeDeviceSelection()})});t.chain([c,a]).play();this._isOpen=!1},onClickCancel:function(){},onClickOk:function(a){},resize:function(){if(this._isOpen){var a=.3*b.get(this.relativeNode,"width"),a=Math.max(a,this._MinPulloutWidth),c=b.get(this.relativeNode,"height");b.set(this.domNode,{height:c+this._totalVerticalPadding+"px",width:a+
"px"});this._setDeviceContainerMaxHeight()}},show:function(){if(!this._isOpen){var a=.3*b.get(this.relativeNode,"width"),a=Math.max(a,this._MinPulloutWidth),a=l.animateProperty({node:this.domNode,properties:{width:{start:0,end:a}},onEnd:f.hitch(this,function(){r.remove(this.contents,"hidden");this._setDeviceContainerMaxHeight();this._selectDeviceNode()})}),c=l.animateProperty({node:this.contents,duration:150,properties:{opacity:{start:0,end:1}}});t.chain([a,c]).play();this._isOpen=!0}},_buildNetworkTree:function(a){var b=
[z.PanelFileCompatibilityTypes.pyramidProCom,z.PanelFileCompatibilityTypes.pyramidProSys,z.PanelFileCompatibilityTypes.pyramidProWebCom,z.PanelFileCompatibilityTypes.pyramidProWebSys,z.PanelFileCompatibilityTypes.ssc,z.PanelFileCompatibilityTypes.sscMaxwell,z.PanelFileCompatibilityTypes.thirdParty];a=a.filter(function(a){return-1===b.indexOf(a.compatibilityType)});a=new v(new n({data:a,getChildren:function(a){return this.query({parent:a.id})}}));var c=a.query(f.hitch(a,function(a){return"network"!==
a.type||0<this.getChildren(a).length}));a.setData(c);a=new h({store:a,query:{type:"root"},labelAttr:"name",mayHaveChildren:function(a){return 0<this.store.query({parent:a.id}).length}});this._networkTree=new w({model:a,showRoot:!1});this._networkTree.placeAt(this.deviceContainer);this._networkTree.startup();this.own(u.once(this._networkTree,"load",f.hitch(this,function(){this._treeLoaded=!0})))},_fetchDevices:function(){return a.get("GetDeviceForPullout",{handleAs:"json",query:{userId:rc.session._attributes.userId,
systemId:this.systemId}}).then(f.hitch(this,this._buildNetworkTree))},_onClickCancel:function(){this.onClickCancel();this.hide()},_onClickOk:function(){var a=this._networkTree.get("checked").filter(function(a){return"device"===a.type}).map(function(a){return a.widgetId});this.onClickOk(a);this.hide()},_removeDeviceSelection:function(){this._networkTree.get("checked").forEach(f.hitch(this,function(a){this._networkTree.setCheckboxState(a,!1)}))},_selectDeviceNode:function(){if(this.device&&null!==this._networkTree){var a=
this._networkTree.model.store.query(f.hitch(this,function(a){return"device"===a.widget&&Number(a.widgetId)===Number(this.device)}));1===a.length&&(!1===this._treeLoaded?this.own(u.once(this._networkTree,"load",f.hitch(this,function(){this._networkTree.expandToNode(a[0]).then(f.hitch(this,function(){this._networkTree.setCheckboxState(a[0],!0)}))}))):this._networkTree.expandToNode(a[0]).then(f.hitch(this,function(){this._networkTree.setCheckboxState(a[0],!0)})))}},_setDeviceContainerMaxHeight:function(){var a=
b.get(this.domNode,"height"),d=b.getComputedStyle(this.buttonContainer),d=c.getMarginBox(this.buttonContainer,d);b.set(this.deviceContainer,{maxHeight:a-d.h+"px"})},_setRelativeNodeAttr:function(a){this.inherited(arguments);this.relativeNode=a;var c=b.get(this.relativeNode,"height");this._totalVerticalPadding=b.get(this.relativeNode,"paddingTop")+b.get(this.relativeNode,"paddingBottom")-1;b.set(this.domNode,{height:c+this._totalVerticalPadding+"px"})}})})},"webview/widget/EditPointDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!rc/nls/grp dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/promise/all dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/EditPointDialog.html dojo/topic rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/Array rc/bacnet/io/Error rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/service/WritePropertyMultiple rc/bacnet/unit rc/reliable/unit rc/util/numberUtil ../bacnet/Object ../bacnet/property ../sys/job ../changeApproval/_ApprovalSessionMixin ./_PointEditAuditLoggerMixin ./DialogRelinquish dijit/form/Button dijit/form/FilteringSelect dijit/form/SimpleTextarea dijit/form/ValidationTextBox ../bacnet/_widget/TimedInput".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S){return m("webview/widget/EditPointDialog",[p,M,P],{arrayIndex:-1,reasonRequired:!1,rcStrings:r,webviewStrings:b,templateString:w,_autoManualStates:{auto:0,manual:1,timed:2},_autoManualStore:null,_device:-1,_fetchingDataDfd:null,_currentInputType:0,_inputTypes:{analog:0,digital:1,text:2},_instance:-1,_pointRoleMap:{},_statusFlags:null,_priority8:null,_rangeIndex:0,_relinquishDialog:null,_stateText:[],_supportsAutoManual:!1,
_supportsPriorityArray:!1,_supportsTimedOverride:!1,_timedOverrideMinutes:0,_type:-1,_units:-1,_approvalToken:null,_writeDeferred:null,isSSC:!1,constructor:function(){this._autoManualStore=new v(new n({data:[{id:0,name:r.auto},{id:1,name:r.manual}]}));this._digitalInputStore=new n;this._buildPointRoleMap()},postCreate:function(){this.autoManualSelector.set({store:this._autoManualStore,value:0});this.own(q(this.digitalValueInput.textbox,"click",h.hitch(this,this._onClickMultiState)));this.own(q(this.autoManualSelector.textbox,
"click",h.hitch(this,this._onClickAutoManual)));this.own(q(this.autoManualSelector,"change",h.hitch(this,this._toggleTimedField)));this._implementUserPermissions();this.inherited(arguments);this.own(q(this.numericValueInput,"keyup",h.hitch(this,function(){this.okButton.set("disabled",!this._shouldShowSubmit())})))},hide:function(){this.inherited(arguments);this._cancelFetchDfd();l.remove(this.loadingOverlay,"hidden");l.add(this.loadingAnimation,"hidden");f.set(this.loadingOverlay,"opacity",1);l.add(this.errorOverlay,
"hidden");this.reasonField.reset()},_addRCPArrayPropertyWrite:function(a){var b=Number(this._inputField.get("value")),b=new E(b,y.primitiveTypes.REAL);a.push({p:new E(y.propertyTypes.PROPID_PP_ARRAY_VALUES,y.primitiveTypes.ENUMERATED),i:new E(this.arrayIndex,y.primitiveTypes.UNSIGNED_INTEGER),v:b,pr:new E(10,y.primitiveTypes.UNSIGNED_INTEGER)})},_buildPointRoleMap:function(){this._pointRoleMap={1:rc.session.roles.outChg,2:rc.session.roles.inChg,3:rc.session.roles.varChg,4:rc.session.roles.conChg,
12:rc.session.roles.aryChg}},_cancelFetchDfd:function(){null!==this._fetchingDataDfd&&!1===this._fetchingDataDfd.isFulfilled()&&(this._fetchingDataDfd.cancel(),this._fetchingDataDfd=null)},_displayInitialFetchErrors:function(a){var b="";if(a instanceof Array){for(var b={},c=0;c<a.length;++c)b[a[c].message]=1;b=Object.keys(b).join("\x3cbr /\x3e")}else b=a.message;d.set(this.errorMessageContainer,"innerHTML",b);this._fetchingDataDfd.reject(!0)},_getDescriptorAndProperty:function(){var a=new g;this.own(a);
var b=new g;this.own(b);var c=[{o:new F(this._type,this._instance),pl:[{p:new E(y.propertyTypes.PROPID_OBJECT_NAME,y.primitiveTypes.ENUMERATED),i:-1,v:new B([],y.primitiveTypes.CHARACTER_STRING)},{p:new E(this.property,y.primitiveTypes.ENUMERATED),i:-1!==this.arrayIndex?new E(this.arrayIndex,y.primitiveTypes.ENUMERATED):-1,v:new A}]}];this._bacnetPropertyObject=new N(this.property,this._bacnetObject,null,this.arrayIndex,this._device);this._bacnetPropertyObject.systemId=this.system;rc.xhr.request({type:"bacnetSystem",
s:new G({device:this._device},c),systemId:this.system,preventCache:this.preventCache,load:h.hitch(this,function(a){this._parseDescriptorAndPropertyRead(a).then(h.hitch(this,b.resolve),h.hitch(this,b.reject))}),error:h.hitch(this,function(a){b.reject(a)})});u([this._bacnetPropertyObject.fetch(this.arrayIndex),b.promise]).then(h.hitch(this,a.resolve),h.hitch(this,a.reject));return a.promise},_getPropertiesToWrite:function(){var a=new F(this._type,this._instance),b=[];if(this._bacnetObject.type===y.objectTypes.OBJID_PP_ARRAY)this._addRCPArrayPropertyWrite(b);
else if(this.property!==y.propertyTypes.PROPID_PRESENT_VALUE)this._bacnetPropertyObject.setValue(this._inputField.get("value")),b.push({p:new E(this.property,y.primitiveTypes.ENUMERATED),i:-1!==this.arrayIndex?new E(this.arrayIndex,y.primitiveTypes.ENUMERATED):-1,v:new A(this._bacnetPropertyObject.propertyObject)});else{var c=8,d=null!==this._priority8,f=Number(this.autoManualSelector.get("value")),g=1<=f?this._autoManualStates.manual:this._autoManualStates.auto;switch(this._bacnetObject.type){case y.objectTypes.OBJID_ANALOG_VALUE:case y.objectTypes.OBJID_BINARY_VALUE:case y.objectTypes.OBJID_MULTI_STATE_VALUE:case y.objectTypes.OBJID_ANALOG_INPUT:case y.objectTypes.OBJID_BINARY_INPUT:case y.objectTypes.OBJID_MULTI_STATE_INPUT:case y.objectTypes.OBJID_LOOP:case y.objectTypes.OBJID_SCHEDULE:case y.objectTypes.OBJID_ACCUMULATOR:case y.objectTypes.OBJID_PULSE_CONVERTER:case y.objectTypes.OBJID_PROGRAM:this._statusFlags&&
this._statusFlags.getBit(3)!==g&&b.push({p:new E(y.propertyTypes.PROPID_OUT_OF_SERVICE,y.primitiveTypes.ENUMERATED),i:-1,v:new E(g?1:0,y.primitiveTypes.BINARY)})}f===this._autoManualStates.auto?(this._bacnetObject.hasPriorityArray()&&d&&b.push({p:new E(y.propertyTypes.PROPID_PRESENT_VALUE,y.primitiveTypes.ENUMERATED),i:-1,v:new E(0,y.primitiveTypes.NULL),pr:new E(8,y.primitiveTypes.UNSIGNED_INTEGER)}),c=10):this._supportsTimedOverride&&(d=0,f===this._autoManualStates.timed&&(d=this._timedOverrideTB.get("value")),
b.push({p:new E(y.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES,y.primitiveTypes.ENUMERATED),i:-1,v:new E(d,y.primitiveTypes.UNSIGNED_INTEGER)}));f=Number(this._inputField.get("value"));(f!==this._value.v||8===c&&this._supportsPriorityArray)&&b.push({p:new E(y.propertyTypes.PROPID_PRESENT_VALUE,y.primitiveTypes.ENUMERATED),i:-1,v:new E(f,this._value.t),pr:this._supportsPriorityArray?new E(c,y.primitiveTypes.UNSIGNED_INTEGER):null})}return[{o:a,pl:b}]},_getSaveSuccessMessage:function(){return t.successfulSave},
_fadeLoading:function(a){a&&l.remove(this.errorOverlay,"hidden");k.fadeOut({node:this.loadingOverlay,onEnd:h.hitch(this,function(){l.add(this.loadingOverlay,"hidden")})}).play()},_fetchOtherProperties:function(){var a=new g;if(this.property!==y.propertyTypes.PROPID_PRESENT_VALUE)a.resolve();else{var b=[];this._bacnetObject.hasStateText()?this._bacnetObject.isBinary()?(b.push({p:new E(y.propertyTypes.PROPID_ACTIVE_TEXT,y.primitiveTypes.ENUMERATED),i:-1,v:new B([],y.primitiveTypes.CHARACTER_STRING)}),
b.push({p:new E(y.propertyTypes.PROPID_INACTIVE_TEXT,y.primitiveTypes.ENUMERATED),i:-1,v:new B([],y.primitiveTypes.CHARACTER_STRING)})):b.push({p:new E(y.propertyTypes.PROPID_STATE_TEXT,y.primitiveTypes.ENUMERATED),i:-1,v:new D(new B([],y.primitiveTypes.CHARACTER_STRING))}):this._hasUnits()&&b.push({p:new E(y.propertyTypes.PROPID_UNITS,y.primitiveTypes.ENUMERATED),i:-1,v:new E(0,y.primitiveTypes.UNSIGNED_INTEGER)});this._bacnetObject.hasPriorityArray()&&b.push({p:new E(y.propertyTypes.PROPID_PRIORITY_ARRAY,
y.primitiveTypes.ENUMERATED),i:new E(8,y.primitiveTypes.ENUMERATED),v:new A});this._bacnetObject.hasStatusFlags()&&b.push({p:new E(y.propertyTypes.PROPID_STATUS_FLAGS,y.primitiveTypes.ENUMERATED),i:-1,v:new B([],y.primitiveTypes.BIT_STRING)});b.push({p:new E(y.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES,y.primitiveTypes.ENUMERATED),i:-1,v:new E(0,y.primitiveTypes.UNSIGNED_INTEGER)});b=[{o:new F(this._type,this._instance),pl:b}];rc.xhr.request({type:"bacnetSystem",s:new G({device:this._device},
b),systemId:this.system,preventCache:this.preventCache,load:h.hitch(this,function(b){this._parseFetch(b);a.resolve()}),error:h.hitch(this,function(b){a.reject(b)})})}return a.promise},_hasUnits:function(){return this._bacnetObject.type<=y.objectTypes.OBJID_ANALOG_VALUE||this._bacnetObject.type==y.objectTypes.OBJID_PP_ARRAY},_hideInputs:function(){a(".second-column",this.containerNode).forEach(h.hitch(this,function(a){l.add(a,"hidden")}));l.add(this.valueInputContainer,"no-buttons");f.set(this.relinquishButtonContainer,
"visibility","hidden");l.add(this.numericValueInput.domNode,"hidden");l.add(this.textValueInput.domNode,"hidden");l.add(this.digitalValueInput.domNode,"hidden")},_isBinaryObject:function(a){return this._bacnetObject.type==y.objectTypes.OBJID_BINARY_INPUT||this._bacnetObject.type==y.objectTypes.OBJID_BINARY_VALUE||this._bacnetObject.type==y.objectTypes.OBJID_BINARY_OUTPUT?!0:!1},_isMultistateObject:function(a){return this._bacnetObject.type==y.objectTypes.OBJID_MULTI_STATE_INPUT||this._bacnetObject.type==
y.objectTypes.OBJID_MULTI_STATE_VALUE||this._bacnetObject.type==y.objectTypes.OBJID_MULTI_STATE_OUTPUT?!0:!1},_implementUserPermissions:function(){this.autoManualSelector.set("disabled",!rc.session.hasRole(rc.session.roles.autoManual));this.reasonRequired?this.own(q(this.reasonField,"keyup",h.hitch(this,function(a){this.okButton.set("disabled",!this._shouldShowSubmit())}))):(this.okButton.set("disabled",!this._shouldShowSubmit()),a(".requiredNote",this.containerNode).forEach(h.hitch(this,function(a){l.add(a,
"hidden")})),a(".required-sign",this.containerNode).forEach(h.hitch(this,function(a){l.add(a,"hidden")})))},_getDecimalPlaces:function(){return this._hasUnits()?rc.sys.decpnt.get(this._units):this._bacnetObject.type==y.objectTypes.OBJID_LOOP?rc.sys.decpnt.get(H.analogUnits.PERCENT):null},_makeWriteRequest:function(a){var b=this._getBACnetSystemValidateRequestData(a,this._approvalToken);return this._validateApprovalSession(b,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(h.hitch(this,function(b){b&&
b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=b.approvalToken);a.s.approvalToken=this._approvalToken;return rc.xhr.request(a)}),function(){})},_onClickAutoManual:function(){var a=this.autoManualSelector.value+1;a>1+this._supportsTimedOverride&&(a=0);this.autoManualSelector.set("value",a)},_onClickMultiState:function(){this._rangeIndex++;this._isBinaryObject(this._bacnetObject.type)&&this._rangeIndex>=this._stateText.length&&(this._rangeIndex=0);this._isMultistateObject(this._bacnetObject.type)&&
this._rangeIndex>=this._stateText.length+1&&(this._rangeIndex=1);this.digitalValueInput.set("value",this._rangeIndex)},_onClickRelinquish:function(){null===this._relinquishDialog&&(this._relinquishDialog=new S({isReadOnly:!1===rc.session.hasRole(this._pointRoleMap[this._bacnetObject.comType]),mnemonic:this.mnemonic,site:this.site,reasonRequired:this.reasonRequired}));this._relinquishDialog.set({mnemonic:this.mnemonic,system:this.system,device:this._device,type:this._type,instance:this._instance});
this._relinquishDialog.set("displayName",this._objectName+" ("+this.mnemonic+")");this._relinquishDialog.show()},_onSubmit:function(){this._approvalToken=null;null===this._writeDeferred&&(this.okButton.set("disabled",!0),this._writeDeferred=this._writeValue(),this._writeDeferred.then(h.hitch(this,this._writeSuccess),h.hitch(this,this._writeFailed)))},_parseDescriptorAndPropertyRead:function(a){var b=new g,c=!1,d=[];a=a.o;for(var f=null,h=0;h<a.length;++h)for(var f=a[h].pl,k=0;k<f.length;++k)if(f[k].v instanceof
C)c=!0,d.push({message:f[k].v.toStringMsg()});else switch(f[k].p.v){case y.propertyTypes.PROPID_OBJECT_NAME:this._setPointName(f[k].v.getString());break;default:this._objectType=f[k].v.v.t,this._rangeIndex=this._value=f[k].v.v,this._inputField=this._objectType===y.primitiveTypes.CHARACTER_STRING?this.textValueInput:this.numericValueInput}c?b.reject(d):b.resolve();return b.promise},_parseFetch:function(a){this._stateText=[];this._supportsPriorityArray=this._supportsTimedOverride=this._supportsAutoManual=
!1;this._timedOverrideMinutes=0;this._priority8=this._statusFlags=null;a=a.o;var b=null;this.autoManualSelector.set("value",0);for(var c=0;c<a.length;++c)for(var b=a[c].pl,d=0;d<b.length;++d)if(!1===b[d].v instanceof C)switch(b[d].p.v){case y.propertyTypes.PROPID_INACTIVE_TEXT:this._inputField=this.digitalValueInput;this._stateText[0]={id:0,name:b[d].v.getString()};break;case y.propertyTypes.PROPID_ACTIVE_TEXT:this._inputField=this.digitalValueInput;this._stateText[1]={id:1,name:b[d].v.getString()};
break;case y.propertyTypes.PROPID_STATE_TEXT:this._inputField=this.digitalValueInput;this._stateText=[];for(var f=0;f<b[d].v.l.length;++f)this._stateText.push({id:f+1,name:b[d].v.l[f].getString()});break;case y.propertyTypes.PROPID_PRIORITY_ARRAY:this._supportsPriorityArray=!0;b[d].v.v.t!==y.primitiveTypes.NULL&&(this._priority8=b[d].v.v.v);break;case y.propertyTypes.PROPID_PP_TIMED_OVERRIDE_MINUTES:this._supportsTimedOverride=!0;this._timedOverrideMinutes=b[d].v.v;break;case y.propertyTypes.PROPID_STATUS_FLAGS:this._statusFlags=
b[d].v;this._supportsAutoManual=!0;break;case y.propertyTypes.PROPID_UNITS:this._units=L.toRcUnit(b[d].v.v,this.isSSC)}this._digitalInputStore.setData(this._stateText);this.digitalValueInput.set("store",this._digitalInputStore)},_setDataAttr:function(a){this._cancelFetchDfd();this.defer(h.hitch(this,function(){l.remove(this.loadingAnimation,"hidden")}),500);this._hideInputs();this._fetchingDataDfd=new g;this.name=a.name;this.mnemonic=a.mnemonic;this.property=a.property;this.arrayIndex=a.arrayIndex;
if(a=/^(\d+)(.+?)(\d+)$/.exec(a.mnemonic))this._device=Number(a[1]),this._type=y.mnemonicToType[a[2].toLowerCase()],this._instance=Number(a[3]),this._bacnetObject=new K(this._device,this._type,this._instance),this.isSSC=O.isSSC({device:this._device});this._getDescriptorAndProperty().then(h.hitch(this,this._fetchOtherProperties)).then(h.hitch(this,function(){null!==this._fetchingDataDfd&&(this._showInputs(),this._fetchingDataDfd.resolve(!1))})).otherwise(h.hitch(this,this._displayInitialFetchErrors));
this._fetchingDataDfd.then(h.hitch(this,this._fadeLoading),h.hitch(this,this._fadeLoading,!0))},_setPointName:function(a){this._objectName=a;a=a+" ("+this.mnemonic;this.property!==y.propertyTypes.PROPID_PRESENT_VALUE&&(a+=":"+this.property);d.set(this.pointName,"innerHTML",a+")")},_shouldShowSubmit:function(){var a=this._inputField!==this.numericValueInput||this.numericValueInput.isValid(),b=0>=this._timedOverrideMinutes||this._timedOverrideTB.isValid(),c=this.reasonRequired?this.reasonField.isValid():
!0,d=!0;this._statusFlags&&this._bacnetObject&&this._statusFlags.getBit(2)&&this.property===y.propertyTypes.PROPID_PRESENT_VALUE&&(this._bacnetObject.type==y.objectTypes.OBJID_ANALOG_VALUE||this._bacnetObject.type==y.objectTypes.OBJID_BINARY_VALUE||this._bacnetObject.type==y.objectTypes.OBJID_MULTI_STATE_VALUE)&&(d=!1);return a&&b&&c&&d},_showInputs:function(){switch(this._value.t){case y.primitiveTypes.CHARACTER_STRING:case y.primitiveTypes.BIT_STRING:this._inputField=this.textValueInput;this._inputField.set("value",
this._bacnetPropertyObject.stringValue);break;default:var a;a=this._getDecimalPlaces();a=0<=Number(a)?J.formatFloat(this._value.v,a,0):this._value.valueOf();this._inputField.set("value",a)}l.remove(this._inputField.domNode,"hidden");d.set(this.valueLabel,"for",this._inputField.id);if(this.property===y.propertyTypes.PROPID_PRESENT_VALUE){if(this._supportsPriorityArray||this._supportsAutoManual)a=null!==this._priority8||1===this._statusFlags.getBit(3)?this._autoManualStates.manual:this._autoManualStates.auto,
l.remove(this.relinquishAndAutoManualContainer,"hidden"),l.remove(this.valueInputContainer,"no-buttons"),this._supportsPriorityArray&&f.set(this.relinquishButtonContainer,"visibility","visible"),this.autoManualSelector.set("value",a);this._supportsTimedOverride?(this._autoManualStore.put({id:this._autoManualStates.timed,name:this.rcStrings.timed}),0<this._timedOverrideMinutes?(this._timedOverrideTB.set("value",this._timedOverrideMinutes),this.autoManualSelector.set("value",this._autoManualStates.timed)):
this._timedOverrideTB.set("value",0)):this._autoManualStore.remove(this._autoManualStates.timed)}this.okButton.set("disabled",!this._shouldShowSubmit());this._toggleReadOnly()},_toggleReadOnly:function(){var a=!1===rc.session.hasRole(this._pointRoleMap[this._bacnetObject.comType]),b=this._statusFlags&&this._statusFlags.getBit(2),c=this.property===y.propertyTypes.PROPID_PRESENT_VALUE&&(this._bacnetObject.type==y.objectTypes.OBJID_ANALOG_VALUE||this._bacnetObject.type==y.objectTypes.OBJID_BINARY_VALUE||
this._bacnetObject.type==y.objectTypes.OBJID_MULTI_STATE_VALUE);this._inputField.set("disabled",!!(a||c&&b));this.autoManualSelector.set("disabled",!(!a&&!b&&!1!==rc.session.hasRole(rc.session.roles.autoManual)));this._timedOverrideTB.set("disabled",a);l.toggle(this.okButton.domNode,"hidden",a);f.set(this.reasonField.domNode,"visibility",a?"hidden":"");f.set(this.reasonLabel,"visibility",a?"hidden":"")},_toggleTimedField:function(a){a===this._autoManualStates.timed?(l.remove(this.reasonField.domNode,
"timed-hidden"),l.remove(this.timedContainer,"hidden")):(l.add(this.reasonField.domNode,"timed-hidden"),l.add(this.timedContainer,"hidden"))},_getAutoManualStateForAuditEntry:function(){return this._autoManualState},_getBACnetPropertyForAuditEntry:function(){return this.property},_getMnemonicForAuditEntry:function(){return this.mnemonic},_getPointTypeForAuditEntry:function(){var a;this._bacnetObject.isAnalog()?a="analog ":this._bacnetObject.isBinary()?a="binary ":this._bacnetObject.isMultistate()&&
(a="multistate ");return a+=["output","input","value"][this.pointName.comType-1]},_getPropertyValueForAuditEntry:function(){return this._inputField.get("value")},_getReasonForAuditEntry:function(){return this.reasonField.get("value")},_getStringValueForAuditEntry:function(){var a="";0<this._stateText.length?(a=this._digitalInputStore.get(this._inputField.get("value")).name,a=this._unlocalizeStateValue(a)):a=this._inputField.get("value");return a},_getSystemForAuditEntry:function(){return this.system},
_writeComplete:function(){this.okButton.set("disabled",!1);this._writeDeferred=null},_writeFailed:function(a){this._writeComplete();a instanceof Error&&z.publish("sticky",{type:"error",message:a.message})},_writeSuccess:function(){this._writeComplete();this._writeAuditEntry();z.publish("alert",{message:this._getSaveSuccessMessage(),type:"success"});this.onExecute();this.execute(this.get("value"))},_writeValue:function(){var a=new g;this.own(a);var b=this._getPropertiesToWrite();0<b[0].pl.length?(b=
new I({device:this._device},b),this._makeWriteRequest({type:"bacnetSystem",s:b,systemId:this.system,preventCache:this.preventCache,load:h.hitch(this,a.resolve),error:h.hitch(this,function(b){a.reject(b)})})):a.resolve();return a},destroy:function(){this._cancelFetchDfd();this.inherited(arguments)}})})},"rc/bacnet/io/service/WritePropertyMultiple":function(){define(["dojo/_base/array","dojo/_base/declare","./_ServiceMultiple","../../../sys/job","../../../util/encoding/base16"],function(p,m,k,h,g){return m("rc/bacnet/io/service/WritePropertyMultiple",
k,{isMultiple:!1,_buffAry:null,_buffAryIdx:0,constructor:function(d,g,f){this.t=0;this.s=f?15:16;this.r=d;this.o=g},updateSupportsMultiple:function(){this._s=15;if(h.data&&16==this.s){var d=this.r.device;d&&(d=d+"DEV"+d,h.hasFlag(d,"ServicesSupport3",128)&&"1"==h.getAnyProperty(d,"WriteMultiple")&&(this._s=16,this.isMultiple=!0))}},_encode:function(d){var g,f=this.isMultiple?0:16;this.buff=[];p.forEach(d,function(d){this.buff=this.buff.concat(d.o.encode(12));this.isMultiple&&this.buff.push(30);p.forEach(d.pl,
function(c){g=f;this.buff=this.buff.concat(c.p.encode(g|8));g+=16;-1!=c.i&&(this.buff=this.buff.concat(c.i.encode(g|8)));g+=16;this.buff.push(g|14);this.buff=this.buff.concat(c.v.encode());this.buff.push(g|15);c.pr&&(g+=16,this.buff=this.buff.concat(c.pr.encode(g|8)))},this);this.isMultiple&&this.buff.push(31)},this);return this.buff},_decode:function(d,g){this.buff=d;2!=(d[0]&240)>>>4?this.e=1:this.idx=d.length}})})},"rc/util/numberUtil":function(){define(["dojo/_base/declare"],function(p){return p("rc/util/numberUtil",
null,{_scientificRange:999999999,formatFloat:function(m,k,h){var g="";m>this._scientificRange||m<-this._scientificRange||h?(m=m.toExponential(k).split("+"),m[1]="000".slice(0,3-m[1].length)+m[1],g=m.join("+")):g=m.toFixed(k);return g}})()})},"webview/bacnet/property":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred rc/_base/Error rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/Array rc/bacnet/io/Date rc/bacnet/io/DeviceObjectPropertyReference rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/Time rc/bacnet/io/util rc/bacnet/property".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){return p("webview/bacnet/property",[a],{systemId:-1,_fetch:function(a,p){var n=null,v=new k;p||(p=this.type);switch(p){case g.primitiveTypes.BINARY:case g.primitiveTypes.UNSIGNED_INTEGER:case g.primitiveTypes.SIGNED_INTEGER:case g.primitiveTypes.REAL:case g.primitiveTypes.DOUBLE:case g.primitiveTypes.ENUMERATED:n=new c(0,p);break;case g.primitiveTypes.DATE:n=new f(0,0,0,0);break;case g.primitiveTypes.TIME:n=new q(0,0,0,0);break;case g.primitiveTypes.OCTET_STRING:case g.primitiveTypes.CHARACTER_STRING:case g.primitiveTypes.BIT_STRING:n=
new l([],p);break;case g.primitiveTypes.ANY_PRIMITIVE:n=new d;break;case g.primitiveTypes.BACNET_OBJECT_IDENTIFIER:n=new b(0,0);break;case g.primitiveTypes.NULL:case g.primitiveTypes.COMPLEX:this.property===g.propertyTypes.PROPID_OBJECT_PROPERTY_REFERENCE&&(n=new r(new b(g.objectTypes.OBJID_DEVICE,this.device)))}null===n&&v.resolve(null);n=[{o:new b(this.hostObject.type,this.hostObject.instance),pl:[{p:new c(this.property,g.primitiveTypes.ENUMERATED),i:u.isPropertyAnArray(this.property)?new c(this.arrayIndex,
g.primitiveTypes.UNSIGNED_INTEGER):-1,v:n}]}];n=new t({device:this.device,index:a},n);rc.xhr.request({type:"bacnetSystem",s:n,systemId:this.systemId,handle:m.hitch(this,function(a){a instanceof h?v.resolve(a):m.isObject(a)&&a.isInstanceOf(t)&&this._onFetch(a.o[0].pl[0].v);v.resolve(this.propertyObject)}),silentError:!0});return v.promise}})})},"webview/widget/_PointEditAuditLoggerMixin":function(){define(["dojo/_base/declare","dojo/i18n!rc/nls/units","rc/bacnet/enums","../xhrEnhanced"],function(p,
m,k,h){return p("webview/widget/_PointEditAuditLoggerMixin",[],{unitStrings:m,_getAutoManualStateForAuditEntry:function(){throw"_getAutoManualStateForAuditEntry must be implemented";},_getBACnetPropertyForAuditEntry:function(){throw"_getBACnetPropertyForAuditEntry must be implemented";},_getMnemonicForAuditEntry:function(){throw"_getMnemonicForAuditEntry must be implemented";},_getPointTypeForAuditEntry:function(){throw"_getPointTypeForAuditEntry must be implemented";},_getPropertyValueForAuditEntry:function(){throw"_getPropertyValueForAuditEntry must be implemented";
},_getReasonForAuditEntry:function(){throw"_getReasonForAuditEntry must be implemented";},_getStringValueForAuditEntry:function(){throw"_getStringValueForAuditEntry must be implemented";},_getSystemForAuditEntry:function(){throw"_getSystemForAuditEntry must be implemented";},_writeAuditEntry:function(){var g={mnemonic:this._getMnemonicForAuditEntry(),reason:this._getReasonForAuditEntry(),systemId:this._getSystemForAuditEntry()},d=this._getBACnetPropertyForAuditEntry();null!=d&&d!==k.propertyTypes.PROPID_PRESENT_VALUE?
(g.value=this._getPropertyValueForAuditEntry(),g.property=d,h.put("BACnetPropertyAuditEntry/",{handleAs:"json",data:{auditEntry:JSON.stringify(g)}})):(g.autoManual=this._getAutoManualStateForAuditEntry(),g.pointType=this._getPointTypeForAuditEntry(),g.value=this._getStringValueForAuditEntry(),h.put("PointChangedAuditEntry/",{handleAs:"json",data:{auditEntry:JSON.stringify(g)}}))},_unlocalizeStateValue:function(g){var d=Object.entries(this.unitStrings.__proto__).find(function(d){return d[1]===g}),
h;d&&2===d.length&&(h=this.unitStrings[d[0]+"Unlocalized"]);return void 0===h?g:h}})})},"webview/widget/DialogRelinquish":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!rc/nls/grp dojo/string dojo/topic rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/service/WritePropertyMultiple ../reliable/_group/DialogRelinquish".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v){return p("webview/widget/DialogRelinquish",[v],{device:-1,instance:-1,mnemonic:null,site:null,type:-1,_approvalToken:null,_fetch:function(){var d=new k;this.own(d);this._setDevice();var f=[{o:this._getObjectProperty(),pl:[{p:new q(c.propertyTypes.PROPID_PRIORITY_ARRAY,c.primitiveTypes.ENUMERATED),i:-1,v:new t(new b(0,c.primitiveTypes.UNSIGNED_INTEGER))}]}],f=new a({device:this._device},f,!0);rc.xhr.requestNow({gid:"PriorityArrayRequest",type:"bacnetSystem",
s:f,systemId:this.system}).then(m.hitch(this,function(a){this._decode(a);d.resolve(a)}),m.hitch(this,function(a){console.error(this.declaredClass+" - _fetch(): Error fetching priority array",a);d.reject(a)}));return d.promise},_getObjectProperty:function(){return new u(this.type,this.instance)},_makeWriteRequest:function(a){var b=this._getBACnetSystemValidateRequestData(a,this._approvalToken);return this.reasonRequired?this._validateApprovalSessionWithReason(b,!1,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(m.hitch(this,
function(b,c){this.reasonEntered=b;c&&0<c.length&&(this._approvalToken=c);return rc.xhr.requestNow(a)})):this._validateApprovalSession(b,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(m.hitch(this,function(b){this.reasonEntered=null;b&&b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=approvalToken);return rc.xhr.requestNow(a)}))},_onClickRelinquish:function(){if(!1===this.isReadOnly){for(var a=Object.keys(this._grid.selection),b=[],d=[],f=a.length-1;0<=f;--f){var g=this._gridStore.get(a[f]);
b.push(g.pname);d.push({p:new q(c.propertyTypes.PROPID_PRESENT_VALUE,c.primitiveTypes.ENUMERATED),i:-1,v:new q(0,c.primitiveTypes.NULL),pr:new q(g.pnumber,c.primitiveTypes.UNSIGNED_INTEGER)})}a=[{o:this._getObjectProperty(),pl:d}];a=new n({device:this._device},a);this._makeWriteRequest({gid:"RelinquishRequest",type:"bacnetSystem",s:a,systemId:this.system}).then(m.hitch(this,this._relinquishComplete,b),m.hitch(this,function(a){console.error(this.declaredClass+" - _onClickRelinquish(): Error relinquishing priorities",
a)}))}},_relinquishComplete:function(a){r.publish("audit",{systemId:this.system,mnemonic:this.mnemonic,action:d.relinquished,details:f.substitute(l.prioritiesRelinquished,[a.join(", ")]),reason:this._getChangeReason()});this._fetch();this._grid.clearSelection()},_setDisplayNameAttr:function(a){h.set(this._objName,"innerHTML",a);this._fetch()},_setDevice:function(){this._device=this.device},_setGroupElementAttr:function(){throw"Not supported";},_setIsReadOnlyAttr:function(a){this.inherited(arguments);
this.isReadOnly=a;g.set(this._relinquishB.domNode,"visibility",a?"hidden":"")}})})},"webview/reliable/_group/DialogRelinquish":function(){define("dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!webview/nls/all dojo/text!./templates/DialogRelinquish.html rc/reliable/_group/DialogRelinquish ../../changeApproval/_ApprovalSessionMixin".split(" "),function(p,m,k,h,g,d,l,f){return m("webview/reliable/_group/DialogRelinquish",[l,f],{templateString:d,title:g.priorities,
reasonEntered:null,reasonRequired:!1,_approvalToken:null,_createSelectorCheckbox:function(d,c,b){d=new p({checked:d,onChange:k.hitch(this,function(b,c){c?this._grid.select(b):this._grid.deselect(b)},b.pnumber),value:!0});h.place(d.domNode,c,"only");return d.domNode},_getChangeReason:function(){return this.reasonEntered},_onClickRelinquish:function(){this._approvalToken=null;return this.inherited(arguments)},_relinquishError:function(d){d!==this.changeApprovalCancelledError&&this.inherited(arguments)},
_makeWriteRequest:function(d){var c=this._getBACnetValidateRequestData(d,this._approvalToken);return this.reasonRequired?this._validateApprovalSessionWithReason(c,!1,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(k.hitch(this,function(b){this.reasonEntered=b?b.reason:null;b&&b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=b.approvalToken);d.s.approvalToken=this._approvalToken;return rc.xhr.requestNow(d)})):this._validateApprovalSession(c,this.validationTypes.REQUEST_APPROVAL_TOKEN).then(k.hitch(this,
function(b){this.reasonEntered=null;b&&b.approvalToken&&0<b.approvalToken.length&&(this._approvalToken=approvalToken);d.s.approvalToken=this._approvalToken;return rc.xhr.requestNow(d)}))}})})},"rc/reliable/_group/DialogRelinquish":function(){define("dgrid/Grid dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/_WidgetsInTemplateMixin dijit/Dialog dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!rc/nls/grp dojo/on dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/DialogRelinquish.html dojo/topic rc/bacnet/enums rc/bacnet/io/AnyPrimitive rc/bacnet/io/List rc/bacnet/io/Number rc/bacnet/io/Object rc/bacnet/io/service/ReadPropertyMultiple rc/bacnet/io/service/WritePropertyMultiple rc/reliable/ReliableEnums rc/xhr dijit/Dialog dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I){return r("rc/reliable/_group/DialogRelinquish",[d,g],{baseClass:"",priorityNames:"",templateString:z,title:q.priorityName,_checkBoxClass:null,_gridStore:null,constructor:function(){this.rcStrings=q;this._gridStore=new x(new v({idProperty:"pnumber"}));this._createColumnStructure()},postCreate:function(){this.inherited(arguments);this.priorityNames=q.priorityNames;this._createGrid()},capitalizeString:function(a){return a.toUpperCase()},
_connectGrid:function(){this.own(a(this._grid,["dgrid-select","dgrid-deselect"],c.hitch(this,function(){this._relinquishB.set("disabled",0===Object.keys(this._grid.selection).length)})))},_createColumnStructure:function(){this._columnStructure=[h({selectorType:c.hitch(this,this._createSelectorCheckbox),id:"selectorCol",label:"",field:"pcheckbox",sortable:!1}),{id:"numberCol",label:"#",field:"pnumber",sortable:!1},{id:"nameCol",label:q.priorityName,field:"pname",sortable:!1},{id:"valueCol",label:q.value,
field:"value",sortable:!1}]},_createGrid:function(){this._grid=new (r([p,m,k]))({selectionMode:"none",columns:this._columnStructure,sort:[{attribute:"pnumber",descending:!1}],store:this._gridStore},this.gridNode);this._connectGrid()},_createSelectorCheckbox:function(a,b,d){a=new l({checked:a,onChange:c.hitch(this,function(a,b){b?this._grid.select(a):this._grid.deselect(a)},d.pnumber),value:!0});this._checkBoxClass&&a.set("baseClass",this._checkBoxClass);t.place(a.domNode,b,"only");return a.domNode},
_decode:function(a){f.forEach(a.o[0].pl[0].v.l,c.hitch(this,function(a,b){this._gridStore.put({pcheckbox:!1,pnumber:b+1,pname:this.priorityNames[b+1]||q.available+" "+(b+1),value:0===a.v.t?q.relinquish:a.v.valueOf()})}));this._grid.resize();this._setHeight()},_fetch:function(){var a=new b;this.own(a);this._setDevice();var d=[{o:this._getObjectProperty(),pl:[{p:new D(A.propertyTypes.PROPID_PRIORITY_ARRAY,A.primitiveTypes.ENUMERATED),i:-1,v:new C(new B(0,A.primitiveTypes.UNSIGNED_INTEGER))}]}],d=new F({device:this._device},
d,!0);rc.xhr.requestNow({gid:"PriorityArrayRequest",type:"bacnet",s:d}).then(c.hitch(this,function(b){this._decode(b);a.resolve(b)}),c.hitch(this,function(b){console.error(this.declaredClass+" - _fetch(): Error fetching priority array",b);a.reject(b)}));return a.promise},_getChangeReason:function(){return""},_getObjectProperty:function(){var a;if(this.groupElement.isBacnet)a=this.groupElement.pointName.type;else switch(this.groupElement.pointName.comType){case I.pointTypes.RCP_OUTPUT:a=A.objectTypes.OBJID_PP_RCP_OUTPUTS;
break;case I.pointTypes.RCP_INPUT:a=A.objectTypes.OBJID_PP_RCP_INPUTS;break;case I.pointTypes.RCP_VARIABLE:a=A.objectTypes.OBJID_PP_RCP_VARIABLES}return new E(a,this.groupElement.pointName.comInstance)},_makeWriteRequest:function(a){return rc.xhr.requestNow(a)},_onClickRelinquish:function(){for(var a=Object.keys(this._grid.selection),b=[],d=[],f=a.length-1;0<=f;--f){var g=this._gridStore.get(a[f]);b.push(g.pname);d.push({p:new D(A.propertyTypes.PROPID_PRESENT_VALUE,A.primitiveTypes.ENUMERATED),i:-1,
v:new D(0,A.primitiveTypes.NULL),pr:new D(g.pnumber,A.primitiveTypes.UNSIGNED_INTEGER)})}a=[{o:this._getObjectProperty(),pl:d}];a=new G({device:this._device},a);this._makeWriteRequest({gid:"RelinquishRequest",type:"bacnet",s:a}).then(c.hitch(this,this._relinquishComplete,b),c.hitch(this,this._relinquishError))},_relinquishComplete:function(a){var b=rc.sys.job.getControllerName(this.groupElement.isBacnet,this.groupElement.pointName,this.groupElement.flashObject.strName);y.publish("audit",{pointName:b,
user:rc.session.getUsername(),action:u.relinquished,details:w.substitute(u.prioritiesRelinquished,[a.join(", ")]),reason:this._getChangeReason()});this._fetch();this._grid.clearSelection()},_relinquishError:function(a){console.error(this.declaredClass+" - _onClickRelinquish(): Error relinquishing priorities",a)},_setDevice:function(){this._device=this.groupElement.isBacnet?this.groupElement.psdDevice:rc.sys.job.getBacnetDeviceNum(this.groupElement.pointName)},_setGroupElementAttr:function(a){this.groupElement=
a;this._objName.innerHTML=this.groupElement.flashObject.strName+(this.groupElement.flashObject.strName!==this.groupElement.mnemonic?" ("+this.groupElement.mnemonic+")":"");this._fetch()},_setHeight:function(){var a=n(".prioritiesGrid .dgrid-scroller")[0].offsetTop,a=n(".prioritiesGrid .dgrid-content")[0].clientHeight+a;this._grid.domNode.style.height=a+"px"}})})},"rc/reliable/ReliableEnums":function(){define([],function(){return{pointTypes:{INVALID:-1,RCP_OUTPUT:1,RCP_INPUT:2,RCP_VARIABLE:3,RCP_PID_LOOP:4,
RCP_WEEKLY_SCHEDULE:5,RCP_ANNUAL_SCHEDULE:6,RCP_PROGRAM:7,RCP_RUNTIME:9,RCP_TRENDLOG:10,RCP_GROUP:11,RCP_ARRAY:12,RCP_TABLE:13},subType:{NULL_POINT:0,OUTPUTS:1,INPUTS:2,VARIABLES_1_32:3,CONTROLLERS:4,WEEKLY_SCHEDULES:5,ANNUAL_SCHEDULES:6,PROGRAMS:7,RUNTIME_LOGS_33_64:8,RUNTIME_LOGS_1_32:9,TREND_LOGS:10,GROUPS:11,ARRAYS:12,VARIABLES_33_64:13,VARIABLES_65_96:14,VARIABLES_97_128:15}}})},"webview/admin/programs/ProgramToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/programs dojo/i18n!../../nls/worksheets dojo/on dojo/text!./templates/ProgramToolbar.html ./widget/FilesMenu ../_Widget ../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return p("webview/admin/programs/ProgramToolbar",[t],{_isAutoCompleteEnabled:!0,isShowingWatch:!1,programStrings:l,rcStrings:g,templateString:c,webviewStrings:d,worksheetStrings:f,_buttons:null,_filesMenu:null,_hideIconClass:"svg-value-dis",_isShowingValues:!1,_showIconClass:"svg-value-en",postCreate:function(){this.inherited(arguments);this._setupOnClicks();this._buildButtonMap();this.toggleMnemonicsButton.set("state","mnemonic")},clearDirty:function(){k.remove(this.sendButton.toolbarButtonIcon,
"dirty")},getButton:function(b){return this._buttons[b]},getPageButtons:function(){return this._buttons},makeDirty:function(){k.add(this.sendButton.toolbarButtonIcon,"dirty")},onToggleAutoComplete:function(b){r.emit(this,"toggleAutoComplete",b)},onToggleValues:function(b){r.emit(this,"toggleValues",b);this._isShowingValues=!this._isShowingValues},onToggleTrace:function(b){r.emit(this,"toggleTrace",b);this.isShowingWatch=!this.isShowingWatch},resetToggleValues:function(){this._isShowingValues=!1;this._displayValuesButton()},
setTitle:function(b){},toggleFetchers:function(b){this.toggleMnemonicsButton.set("disabled",b);this.toggleValuesButton.set("disabled",b)},_buildButtonMap:function(){this._buttons={sendButton:this.sendButton,cancelButton:this.cancelButton,sendMultipleButton:this.sendMultipleButton,toggleMnemonicsButton:this.toggleMnemonicsButton,toggleTraceButton:this.toggleTraceButton,toggleValuesButton:this.toggleValuesButton,replaceButton:this.replaceButton,renumberButton:this.renumberButton,clearTraceButton:this.clearTraceButton,
optionsButton:this.optionsButton}},_displayValuesButton:function(){this.toggleValuesButton.set("titleStr",this.programStrings.displayValues);k.replace(this.toggleValuesButton.toolbarButtonIcon,this._showIconClass,this._hideIconClass)},_getAutoCompleteAttr:function(){return this._isAutoCompleteEnabled},_getShowingValuesAttr:function(){return this._isShowingValues},_hideValuesButton:function(){this.toggleValuesButton.set("titleStr",this.programStrings.hideValues);k.replace(this.toggleValuesButton.toolbarButtonIcon,
this._hideIconClass,this._showIconClass)},_setAutoCompleteAttr:function(b){(this._isAutoCompleteEnabled=b)?(b=this.programStrings.disableAutoComplete,k.add(this.autoCompleteButton.toolbarButtonIcon,"enabled")):(b=this.programStrings.enableAutoComplete,k.remove(this.autoCompleteButton.toolbarButtonIcon,"enabled"));this.autoCompleteButton.set("titleStr",b)},_setShowValuesAttr:function(b){this._isShowingValues!==b&&this._onToggleValues()},_setupFilesMenuListeners:function(){this.own(r(this._filesMenu,
"save",m.hitch(this,function(){r.emit(this,"saveFile");this._filesMenu.hide()})),r(this._filesMenu,"open",m.hitch(this,function(){r.emit(this,"openFile");this._filesMenu.hide()})))},_setupOnClicks:function(){this.own(r(this.sendButton.domNode,"click",m.hitch(this,function(){this.sendButton.get("disabled")||r.emit(this,"send")})),r(this.cancelButton.domNode,"click",m.hitch(this,function(){this.cancelButton.get("disabled")||r.emit(this,"cancel")})),r(this.sendMultipleButton.domNode,"click",m.hitch(this,
function(){this.sendMultipleButton.get("disabled")||r.emit(this,"sendMultiple")})),r(this.filesMenu.domNode,"click",m.hitch(this,this._onFilesMenu)),r(this.toggleTraceButton.domNode,"click",m.hitch(this,function(){this.toggleTraceButton.get("disabled")||this._onToggleTrace()})),r(this.toggleMnemonicsButton.domNode,"click",m.hitch(this,function(){this.toggleMnemonicsButton.get("disabled")||this._onToggleMnemonic()})),r(this.toggleValuesButton.domNode,"click",m.hitch(this,function(){this.toggleValuesButton.get("disabled")||
this._onToggleValues()})),r(this.replaceButton.domNode,"click",m.hitch(this,function(){this.replaceButton.get("disabled")||r.emit(this,"replace")})),r(this.renumberButton.domNode,"click",m.hitch(this,function(){this.renumberButton.get("disabled")||r.emit(this,"renumber")})),r(this.clearTraceButton.domNode,"click",m.hitch(this,function(){this.clearTraceButton.get("disabled")||r.emit(this,"clearTrace")})),r(this.optionsButton.domNode,"click",m.hitch(this,function(){this.optionsButton.get("disabled")||
r.emit(this,"showOptions")})),r(this.autoCompleteButton.domNode,"click",m.hitch(this,this._onToggleAutoComplete)))},_onFilesMenu:function(){null===this._filesMenu?(this._filesMenu=new b,h.place(this._filesMenu.domNode,this.filesMenu.domNode),this._setupFilesMenuListeners()):this._filesMenu.show()},_onToggleAutoComplete:function(){this.set("autoComplete",!this._isAutoCompleteEnabled);this.onToggleAutoComplete(this._isAutoCompleteEnabled)},_onToggleMnemonic:function(){"mnemonic"===this.toggleMnemonicsButton.get("state")?
(this.toggleMnemonicsButton.set("titleStr",this.webviewStrings.name),this.toggleMnemonicsButton.set("state","name")):(this.toggleMnemonicsButton.set("titleStr",this.rcStrings.mnemonic),this.toggleMnemonicsButton.set("state","mnemonic"));r.emit(this,"toggleMnemonics")},_onToggleTrace:function(){this.toggleTraceButton.get("disabled")||(this.toggleTraceButton.set("titleStr",this.isShowingWatch?this.programStrings.watch:this.programStrings.trace),this.onToggleTrace(this.isShowingWatch))},_onToggleValues:function(){this._isShowingValues?
this._displayValuesButton():this._hideValuesButton();this.onToggleValues(this._isShowingValues)}})})},"webview/admin/programs/widget/FilesMenu":function(){define("dijit/DropDownMenu dijit/MenuItem dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/programs dojo/keys dojo/on".split(" "),function(p,m,k,h,g,d,l,f,r){return k("webview/admin/programs/widget/FilesMenu",[p],{baseClass:"file-menu",programStrings:l,webviewStrings:d,_buttons:{},_clickListener:null,
_openSaveDropDown:null,postCreate:function(){this.inherited(arguments);this._buildButtons();this._setupListeners()},hide:function(){g.add(this.domNode,"hidden");null!==this._clickListener&&this._clickListener.remove()},onOpen:function(){},onSave:function(){},show:function(){g.remove(this.domNode,"hidden");this._clickListener=r(window,"click",h.hitch(this,function(c){c.target.classList&&c.target.classList.contains("svg-folder")||this.hide()}))},_buildButtons:function(){this._buttons.openButton=new m({label:this.programStrings.open,
baseClass:"menu-item",iconClass:""});this._buttons.saveButton=new m({label:this.webviewStrings.save,baseClass:"menu-item",iconClass:""});this.addChild(this._buttons.openButton);this.addChild(this._buttons.saveButton)},_setupListeners:function(){this.own(r(this._buttons.saveButton.domNode,"click",h.hitch(this,function(){this.onSave()})),r(this._buttons.openButton.domNode,"click",h.hitch(this,function(){this.onOpen()})),r(window,"keydown",h.hitch(this,function(c){c.keyCode===f.ESCAPE&&this.hide()})));
this._clickListener=r(window,"click",h.hitch(this,function(c){c.target.classList&&c.target.classList.contains("svg-folder")||this.hide()}))},destroy:function(){null!==this._clickListener&&this._clickListener.remove();this.inherited(arguments)}})})},"webview/admin/worksheets/notificationClasses/NotificationClasses":function(){define("dgrid/Grid dgrid/extensions/ColumnReorder dgrid/editor dgrid/OnDemandGrid dgrid/Selection dijit/form/Textarea dijit/form/ValidationTextBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/json dojo/on dojo/promise/all dojo/query dojo/request/xhr dojo/string dojo/text!./templates/NotificationClasses.html ./widgets/AddNotificationClass ./widgets/DestinationsEditor ./widgets/EmailsEditor ./widgets/PriorityEditor ../../AdminWorksheetBase ../../../widget/ColumnHider ./NotificationClassesToolbar ../../widget/AdminToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K){return r("webview/admin/worksheets/notificationClasses/NotificationClasses",[J],{templateString:F,dataTypeName:w.notificationClasses,widgetName:w.notificationClasses,widgetNameKey:"notificationClasses",identityProperty:"instance",rcAlarmStrings:v,rcStrings:x,webviewStrings:w,errorStrings:z,_addNotificationClassDialog:null,_alarmPriorityTextMap:{},_alarmTypeMap:{},_alarmTypeMaster:{},_canEdit:!1,_cannotAccessSystemStatus:501,
_destinationsEditorDialog:null,_emailsEditorDialog:null,_firstLoad:!0,_getStatusDeferred:null,_grid:null,_gridStore:null,_pollForStatusTimer:null,_priorityEditorDialog:null,_processId:-1,postCreate:function(){this.inherited(arguments);c.mixin(this.ErrorMessageMap,{507:z.notificationClassDoesNotExist,509:z.cannotCreateNotificationClass,512:z.cannotDeleteNotificationClass});B([this._fetch(),this._getAlarmPriorityText()]).then(c.hitch(this,function(a){var b=this._buildColumnStructure();this._buildGrid(b);
this._parseFetch(a[0])}),c.hitch(this,function(a){this._onInitError(a)}));this._intervalTime=1E3;this.own(b.after(this,"makeDirty",this._clearFetchTimeout,!0))},makeDirty:function(){this._canEdit&&(this.inherited(arguments),this._toolbar.sendButton.set("disabled",!1))},makeClean:function(){this.inherited(arguments);this._toolbar.sendButton.set("disabled",!0);this._gridStore.query({changed:!0}).forEach(c.hitch(this,function(a){a.changed=!1;this._gridStore.put(a)}))},resize:function(){this.inherited(arguments);
if(this._adminTopContent){var a=this._adminTopContent.clientWidth,a=a-this._contentHeaderIcon.clientWidth;n.set(this._contentHeaderTitle,"width",a-50+"px")}},_addNotificationClass:function(a){D.post("NotificationClass",{handleAs:"json",data:{systemId:this.system,instance:a.type,mne:[this.device,this.mne,a.type].join(""),name:a.name}}).then(c.hitch(this,function(a,b){this._displayError(b);200===b.errStatus&&(delete this._alarmTypeMap[a.type],this._gridStore.put(b.notificationClass))},a),c.hitch(this,
function(a){console.error(this.declaredClass+" - _addNotificationClass(): Could not add notification class",a)}))},_addToolbarListeners:function(){this.own(A(this._toolbar,"cancel",c.hitch(this,this._revertChanges)),A(this._toolbar,"export",c.hitch(this,this._export)),A(this._toolbar,"send",c.hitch(this,this._saveChanges)))},_buildGrid:function(a){null===this._grid&&(this._grid=new (r([p,h,K,m,g]))({columns:a,sort:[{attribute:"instance",descending:!1}],store:this._gridStore,selectionMode:this._canEdit?
"extended":"none",maxRowsPerPage:256,maxEmptySpace:10,noDataMessage:this._getLoadingString()},this.gridNode),this._grid.startup(),this._resizeGrid(),this._connectGrid())},_buildColumnStructure:function(){return[k({editor:l,editOn:"click",label:this.webviewStrings.name,field:"name",id:"nameCol",className:"colourlessLink",sortable:!1,canEdit:c.hitch(this,function(){return this._canEdit}),editorArgs:{baseClass:"rcTextBox",maxLength:256}}),{id:"alarmTypeCol",field:"alarmType",sortable:!1,label:this.rcAlarmStrings.alarmType,
formatter:function(a,b){return 65!==b.instance?b.instance+" - "+a:"N/A"}},{id:"priorityCol",field:"alarmPriority",label:this.rcAlarmStrings.priority,sortable:!1,renderCell:c.hitch(this,function(b,d,f){var g=a.create("span",{innerHTML:this._getAlarmPriorityString(b),title:this._getAlarmPriorityString(b)},f,"only");u.add(f,"colourlessLink");this.own(A(f,"click",c.hitch(this,this._showPriorityDialog,d,b)));return g})},k({editor:d,editOn:"none",id:"descriptionCol",field:"description",label:this.rcStrings.description,
sortable:!1,canEdit:!1,renderCell:c.hitch(this,this._buildDescriptionCell)}),{id:"destinationsCol",field:"destinations",label:this.webviewStrings.destinations,sortable:!1,renderCell:c.hitch(this,this._renderDialogCell,this._showDestinationsDialog,"destinationIcon")},{id:"emailsCol",field:"emails",label:this.webviewStrings.emails,sortable:!1,hidden:!0,unhidable:!1,renderCell:c.hitch(this,this._renderDialogCell,this._showEmailsEditorDialog,"emailIcon")}]},_clearGridStore:function(){this._grid.set("noDataMessage",
this._getLoadingString());for(var a=this._gridStore.data.length-1;0<=a;--a)this._gridStore.remove(this._gridStore.data[a].instance)},_connectGrid:function(){this.inherited(arguments);this.own(A(this._grid,[".dgrid-column-nameCol:dgrid-datachange",".dgrid-column-descriptionCol:dgrid-datachange"],c.hitch(this,function(a){this.defer(c.hitch(this,this._onInlineChange,a))})))},headerIconClass:function(){return"rcNotificationClassesHeaderIcon"},_displayFetchError:function(a,b){this._displayError({errStatus:504,
errMSG:"Unexpected Error"+b});console.error(this.declaredClass+" - _fetch(): Error fetching data",b);a.reject()},_export:function(){this.exportToCSV(this._grid,"notificationclasses.csv",this.widgetName)},_fetch:function(a){this._clearFetchTimeout();return D.get("NotificationClass/",{handleAs:"json",preventCache:!0,query:{systemId:this.system,mne:this.device+this.mne,forceReload:a?a:!1}})},_getAlarmPriorityString:function(a){try{return 0===a.alarmPriority.toAlarmPriority&&65!==a.instance?this._alarmTypeMaster[a.instance].defaultPriority+
" - "+this._alarmPriorityTextMap[this._alarmTypeMaster[a.instance].defaultPriority]:a.alarmPriority.toAlarmPriority+" - "+this._alarmPriorityTextMap[a.alarmPriority.toAlarmPriority]}catch(O){return"N/A"}},_getAlarmPriorityText:function(){var a=new t;this.own(a);var b=D.get("AlarmPriorities",{handleAs:"json",query:{siteId:this.site}}).then(c.hitch(this,function(b){200===b.errStatus?(f.forEach(b.data,c.hitch(this,function(a){this._alarmPriorityTextMap[a.priority]=a.name})),this._getAlarmTypes(a)):(console.error(this.declaredClass+
" - _getAlarmPriorityText(): Error reading alarm priorities",b),a.reject())}),c.hitch(this,function(b){console.error(this.declaredClass+" - _getAlarmPriorityText(): Error getting alarm priorities",b);a.reject()}));this.own(b);return a},_getAlarmTypes:function(a){var b=D.get("AlarmTypes",{handleAs:"json",query:{siteId:this.site}}).then(c.hitch(this,function(b){200===b.errStatus?(f.forEach(b.data,c.hitch(this,function(a){this._alarmTypeMap[a.type]={name:a.name,defaultPriority:a.defaultPriority};this._alarmTypeMaster[a.type]=
{name:a.name,defaultPriority:a.defaultPriority}})),a.resolve()):(console.error(this.declaredClass+" - _getAlarmPriorityText(): Error reading alarm priorities",b),a.reject())}),c.hitch(this,function(b){console.error(this.declaredClass+" - _getAlarmPriorityText(): Error getting alarm priorities",b);a.reject()}));this.own(b)},_objectsAreEqual:function(a,b){var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;++d){if(!b.hasOwnProperty(c[d]))return!1;if("object"===typeof b[c[d]]){if(!this._objectsAreEqual(a[c[d]],
b[c[d]]))return!1}else if(b[c[d]]!==a[c[d]])return!1}return!0},_onAddNotificationClass:function(){this._gridStore.query().forEach(c.hitch(this,function(a){delete this._alarmTypeMap[a.instance]}));null===this._addNotificationClassDialog?this._addNotificationClassDialog=new G({value:this._alarmTypeMap,title:this.webviewStrings.createNotificationClass}):this._addNotificationClassDialog.set("value",this._alarmTypeMap);var a=b.after(this._addNotificationClassDialog,"execute",c.hitch(this,this._addNotificationClass),
!0),d=b.after(this._addNotificationClassDialog,"hide",c.hitch(this,function(){setTimeout(c.hitch(this,function(){d.remove();a.remove()}),250)}));this._addNotificationClassDialog.show()},_onInlineChange:function(a){var b=this._gridStore.get(a.rowId),c=a.cell.column.field;b[c]!==a.value&&(b.changed=!0,this.makeDirty());b[c]=a.value;this._gridStore.put(b);this._grid.revert()},_render:function(a){if(200===a.errStatus){var b=new t;this.own(b);setTimeout(c.hitch(this,function(){b.resolve()}),250);a=this._buildColumnStructure();
this._buildGrid(a);return b.promise}a=this.safeError(a,{message:this._getErrorMessage(a.errStatus,a.errMSG)});this.onInitError(a)},_renderDialogCell:function(b,d,f,g,h){d=a.create("span",{"class":"webviewIcon "+d},h,"first");this.own(A(h,"click",c.hitch(this,b,g,f)));u.add(h,"colourlessLink");return d},_resizeGrid:function(){this.inherited(arguments);if(null!==this._grid){var a=n.get("rcSystemContent","height"),b=C(".userToolBarContainer",document.body)[0],c=n.get(b,"height"),d=n.get(b,"paddingTop"),
f=n.get(b,"paddingBottom"),g=2*n.get(b,"marginTop"),b=2*n.get(b,"borderWidth"),c=c+d+f+g+b,f=C(".horizontalDivider",document.body)[0],d=n.get(f,"height"),f=n.get(f,"borderWidth"),d=d+f,f=n.get(this.buttonBar.domNode,"height"),g=n.get(this.buttonBar.domNode,"paddingTop"),f=f+g,g=2*n.get(this._grid.domNode,"marginTop"),b=2*n.get(this._grid.domNode,"borderWidth");n.set(this._grid.domNode,"height",a-(c+d+f+(g+b))+"px")}},_saveChanges:function(){var a=this._gridStore.query({changed:!0});D.put("NotificationClass",
{handleAs:"json",data:{systemId:this.system,mne:this.device+""+this.mne,data:y.stringify(a)}}).then(c.hitch(this,function(a){510===a.errStatus?(this._processId=a.processId,this._pollForStatus("NotificationClass")):(this._displayError(a),200===a.errStatus&&(this.makeClean(),this._grid.revert(),this._grid.set("store",this._gridStore),this._setFetchTimeout()))}),c.hitch(this,function(a){console.error(this.declaredClass+" - _saveChanges(): Could not save changes",a)}))},_setTitle:function(a){this.inherited(arguments);
this._contentHeaderTitle&&q.set(this._contentHeaderTitle,{innerHTML:a})},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_pollForStatus:function(a){this._clearPollingTimer();this._pollForStatusTimer=setTimeout(c.hitch(this,function(){D.get(a+"/status",{handleAs:"json",query:{processId:this._processId||-1,abort:0},preventCache:!0}).then(c.hitch(this,function(a){510===a.errStatus?(this._processId=a.processId,this._pollForStatus("NotificationClass")):(this._displayError(a),200===
a.errStatus&&(this.makeClean(),this._grid.revert(),this._grid.set("store",this._gridStore),this._setFetchTimeout()))}))}),500)},_setCanEditFlag:function(){this._canEdit=rc.session.hasRole(rc.session.roles2.notChg,!0)},_showDestinationsDialog:function(a,d){this._emitDialogEditorShowEvent(d,"destinationsCol");null===this._destinationsEditorDialog?this._destinationsEditorDialog=new I({title:d.name+" ("+d.mne+"): "+this.webviewStrings.notificationClassDestinations,gridStore:a,_canEdit:this._canEdit,style:{width:"1024px"},
onHide:c.hitch(this,this._emitDialogEditorHideEvent,d,"destinationsCol")}):this._destinationsEditorDialog.set({gridStore:a,title:d.name+" ("+d.mne+"): "+this.webviewStrings.notificationClassDestinations});var g=b.after(this._destinationsEditorDialog,"execute",c.hitch(this,function(a,b){var d=this._gridStore.get(a),g=[];d.destinations.length===b.length?g=c.clone(d.destinations):(d.changed=!0,this.makeDirty());d.destinations=[];f.forEach(b,c.hitch(this,function(a,b){d.changed||this._objectsAreEqual(g[b],
a)||(d.changed=!0,this.makeDirty());d.destinations.push(a)}));this._gridStore.put(d)},d.instance),!0),h=b.after(this._destinationsEditorDialog,"hide",c.hitch(this,function(){setTimeout(c.hitch(this,function(){h.remove();g.remove()}),250)}));this._destinationsEditorDialog.show()},_showEmailsEditorDialog:function(a,d){this._emitDialogEditorShowEvent(d,"emailsCol");null===this._emailsEditorDialog?this._emailsEditorDialog=new L({_canEdit:this._canEdit,title:d.name+" ("+d.mne+"): "+this.webviewStrings.notificationClassEmails,
gridStore:a,onHide:c.hitch(this,this._emitDialogEditorHideEvent,d,"emailsCol")}):this._emailsEditorDialog.set({gridStore:a,title:d.name+" ("+d.mne+"): "+this.webviewStrings.notificationClassEmails});var g=b.after(this._emailsEditorDialog,"execute",c.hitch(this,function(a,b){var d=this._gridStore.get(a),g=[];d.emails.length===b.length?g=c.clone(d.emails):(d.changed=!0,this.makeDirty());d.emails=[];f.forEach(b,c.hitch(this,function(a,b){d.changed||this._objectsAreEqual(g[b],a)||(d.changed=!0,this.makeDirty());
d.emails.push(a)}));this._gridStore.put(d)},d.instance),!0),h=b.after(this._emailsEditorDialog,"hide",c.hitch(this,function(){setTimeout(c.hitch(this,function(){h.remove();g.remove()}),250)}));this._emailsEditorDialog.show()},_showPriorityDialog:function(a,d){this._emitDialogEditorShowEvent(d,"priorityCol");null===this._priorityEditorDialog?this._priorityEditorDialog=new H({title:d.name+" ("+d.mne+"): "+this.webviewStrings.notificationClassPriorities,priorityMap:this._alarmPriorityTextMap,value:a,
onHide:c.hitch(this,this._emitDialogEditorHideEvent,d,"priorityCol")}):this._priorityEditorDialog.set({value:a,title:d.name+" ("+d.mne+"): "+this.webviewStrings.notificationClassPriorities});var f=b.after(this._priorityEditorDialog,"execute",c.hitch(this,function(a,b){var c=this._gridStore.get(a);this._objectsAreEqual(b,c.alarmPriority)||(c.changed=!0,this.makeDirty());c.alarmPriority=b;this._gridStore.put(c)},d.instance),!0),g=b.after(this._priorityEditorDialog,"hide",c.hitch(this,function(){setTimeout(c.hitch(this,
function(){g.remove();f.remove()}),250)}));this._priorityEditorDialog.show()},_toggleEmailColumn:function(a){this._grid&&this._grid.toggleColumnHiddenState("emailsCol",!a)},_updateGrid:function(a){a.initialLoad&&this._firstLoad&&(this._render(a),this._grid.set("noDataMessage",this.webviewStrings.noResultsFound));this._toggleEmailColumn(a.data.emailSupported);this._gridStore.setData(a.data.data)},destroy:function(){this.inherited(arguments);null!==this._getStatusDeferred&&this._getStatusDeferred.cancel();
this._adminTopContent&&a.destroy(this._adminTopContent);this._clearFetchTimeout()}})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/on dojo/query dojo/dnd/Source put-selector/put xstyle/css!../css/extensions/ColumnReorder.css".split(" "),function(p,m,k,h,g,d,l){function f(b,c){var d=c[2],a=b[d?"columnSets":"subRows"][c[1]];return d?a[c[2]]:a}function r(b,c,d){c[2]?b.columnSets[c[1]][c[2]]=d:b.subRows[c[1]]=d}function c(b,c){return c.slice(("dgrid-"+
b+"-").length)}var b=/(\d+)(?:-(\d+))?$/;p=m(d,{copyState:function(){return!1},checkAcceptance:function(b,c){return b==this},_legalMouseDown:function(b){return-1<b.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(d){var g=this.grid,l=b.exec(c(g.id,d[0].getAttribute("dndType"))),a=l[2]?"columnSets":"subRows",n=f(g,l),m=g.columns;this.inherited(arguments);l&&setTimeout(function(){var b=k.map(d[0].parentNode.childNodes,function(a){return m[a.columnId]});
r(g,l,b);b={grid:g,subRow:b,column:m[d[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};b[a]=g[a];h.emit(g.domNode,"dgrid-columnreorder",b)?g.set(a,g[a]):(r(g,l,n),g.renderHeader(),this._sort&&this._sort.length&&this.updateSortArrow(this._sort))},0)}});m=m(null,{columnDndConstructor:p,_initSubRowDnd:function(b,c){var d,a,f,g;a=0;for(f=b.length;a<f;a++)g=b[a],!1!==g.reorderable&&(g=g.headerNode,"TH"!=g.tagName&&(g=g.parentNode),l(g,".dojoDndItem[dndType\x3d"+c+"]"),d||(d=g.parentNode));d&&this._columnDndSources.push(new this.columnDndConstructor(d,
{horizontal:!0,grid:this}))},renderHeader:function(){var b="dgrid-"+this.id+"-",c,d;this.inherited(arguments);this._columnDndSources=[];if(this.columnSets)for(d=0,c=this.columnSets.length;d<c;d++)k.forEach(this.columnSets[d],function(a,c){this._initSubRowDnd(a,b+d+"-"+c)},this);else k.forEach(this.subRows,function(a,c){this._initSubRowDnd(a,b+c)},this)},_destroyColumns:function(){this._columnDndSources&&k.forEach(this._columnDndSources,function(b){b.destroy()});this.inherited(arguments)}});m.ColumnDndSource=
p;return m})},"webview/admin/worksheets/notificationClasses/widgets/AddNotificationClass":function(){define("dijit/ConfirmDialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/store/Memory dojo/store/Observable dojo/text!./templates/AddNotificationClass.html dijit/form/Button dijit/form/FilteringSelect".split(" "),function(p,m,k,h,g,d,l,f,r,c,b){return k("webview/admin/worksheets/notificationClass/widgets/AddNotificationClass",
[p],{templateString:b,value:null,constructor:function(){this.rcAlarmStrings=d;this.rcStrings=l;this.webviewStrings=f;this._alarmTypeStore=new c(new r({idProperty:"type"}))},buildRendering:function(){this.inherited(arguments);this.alarmTypeDD.set({store:this._alarmTypeStore,queryExpr:"*${0}*"});this.okButton.set("disabled",!0)},postCreate:function(){this.inherited(arguments);this.okButton.set("label",this.rcStrings.btnOk.toUpperCase());this.cancelButton.set("label",this.rcStrings.btnCancel.toUpperCase());
this.own(g.after(this.nameTB,"validate",h.hitch(this,function(){this.okButton.set("disabled",!this.nameTB.isValid())}),!0))},_getValueAttr:function(){return{type:Number(this.alarmTypeDD.get("value")),name:this.nameTB.get("value")}},_setValueAttr:function(b){for(var c=this._alarmTypeStore.data.length-1;0<=c;--c)this._alarmTypeStore.remove(this._alarmTypeStore.data[c].id);c=Object.keys(b);m.forEach(c,h.hitch(this,function(c,a){this._alarmTypeStore.put({type:Number(c),name:c+" - "+b[c].name});0===a&&
this.alarmTypeDD.set("value",c)}));this.nameTB.set("value",null)}})})},"webview/admin/worksheets/notificationClasses/widgets/DestinationsEditor":function(){define("dgrid/editor dijit/ConfirmDialog dijit/form/CheckBox dijit/form/ValidationTextBox dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on dojo/text!webview/widget/templates/ConfirmActionBar.html dojo/text!./templates/DestinationsEditor.html ./DestinationEditor ./EmailsEditor ../../../widget/AddRemoveToolbar ../../../widget/AdminToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return g("webview/admin/worksheets/notificationClass/widgets/DestinationsEditor",[t],{templateString:c,_defaultStoreItem:{type:2,location:null,days:254,fromTime:"00:00:00",toTime:"23:59:59",events:160,confirmed:!1,process:0},_canEdit:!0,_destinationEditor:null,_destinationEditorDialog:null,_destinationEnums:{device:0,network:1,global:2,networkMac:3},_buildColumns:function(){this._columnStructure=[{id:"destinationCol",field:"type",label:this.webviewStrings.destinations,
renderCell:d.hitch(this,function(b,c,a){c=this._getDestinationText(b);this.own(f(a,"click",d.hitch(this,this._showDestinationEditor,b)));return this._renderBitStringColumn(c,a)})},{id:"daysCol",field:"days",label:this.webviewStrings.days,renderCell:d.hitch(this,function(b,c,a){var g=254===c?this.rcStrings.all:this._getBitStringText(c,this._daysMap,"days");this.own(f(a,"click",d.hitch(this,this._showBitStringDialog,"days",b.id,c)));return this._renderBitStringColumn(g,a)})},p({editor:h,canEdit:d.hitch(this,
function(){return this._canEdit}),editOn:"click",id:"fromTimeCol",field:"fromTime",label:this.webviewStrings.timeFrom,className:"colourlessLink",editorArgs:{baseClass:"rcTextBox",pattern:"([0-1][0-9]|2[0-3]):[0-5]?[0-9]:[0-5]?[0-9]",required:!0}}),p({editor:h,canEdit:d.hitch(this,function(){return this._canEdit}),editOn:"click",id:"toTimeCol",field:"toTime",label:this.webviewStrings.timeTo,className:"colourlessLink",editorArgs:{baseClass:"rcTextBox",pattern:"([0-1][0-9]|2[0-3]):[0-5]?[0-9]:[0-5]?[0-9]",
required:!0}}),{id:"eventsCol",field:"events",label:this.webviewStrings.events,renderCell:d.hitch(this,function(b,c,a){var g=224===c?this.rcStrings.all:this._getBitStringText(c,this._eventsMap);this.own(f(a,"click",d.hitch(this,this._showBitStringDialog,"events",b.id,c)));return this._renderBitStringColumn(g,a)})},p({id:"confirmCol",editor:k,canEdit:d.hitch(this,function(b){switch(b.type){case this._destinationEnums.device:case this._destinationEnums.networkMac:return this._canEdit;default:return!1}}),
field:"confirmed",formatter:d.hitch(this,function(){return""}),label:this.webviewStrings.confirmed,editorArgs:{value:!0}}),p({editor:h,editOn:"click",canEdit:d.hitch(this,function(){return this._canEdit}),field:"process",label:this.webviewStrings.process,className:"colourlessLink",editorArgs:{baseClass:"rcTextBox",pattern:"[0-9]+",required:!0}})]},_getDestinationText:function(b){var c="";switch(b.type){case this._destinationEnums.device:c=this.rcStrings.device+" "+b.location.device;break;case this._destinationEnums.network:c=
0===b.location.network?this.webviewStrings.localNetwork:this.webviewStrings.network+" "+b.location.network;break;case this._destinationEnums.global:c=this.webviewStrings.globalBroadcast;break;case this._destinationEnums.networkMac:c=this.webviewStrings.network+" "+b.location.network+", "+this.rcStrings.address+" "+b.location.mac}return c},_onDestinationSave:function(b){b=this._gridStore.get(b);var c=this._destinationEditor.get("value");b.type=c.type;b.location=c.location;this._gridStore.put(b)},_onSubmit:function(){this._grid.save();
this.onExecute();this.execute(this.get("value"))},_showDestinationEditor:function(c){var g={type:c.type,location:c.location};null===this._destinationEditorDialog&&(this._destinationEditorDialog=new m({actionBarTemplate:r}),this._destinationEditorDialog.okButton.set("label",this.rcStrings.btnOk.toUpperCase()),this._destinationEditorDialog.cancelButton.set("label",this.rcStrings.btnCancel.toUpperCase()));null===this._destinationEditor?(this._destinationEditor=new b({_canEdit:this._canEdit,value:g}),
this._destinationEditorDialog.set({content:this._destinationEditor.domNode,title:this.webviewStrings.editDestination}),this.own(f(this._destinationEditor,"textboxChange",d.hitch(this,function(a){this._destinationEditorDialog.okButton.set("disabled",!a)})))):this._destinationEditor.set("value",g);var a=f(this._destinationEditorDialog,"execute",d.hitch(this,this._onDestinationSave,c.id)),h=l.after(this._destinationEditorDialog,"hide",d.hitch(this,function(){setTimeout(d.hitch(this,function(){h.remove();
a.remove()}),250)}));this._destinationEditorDialog.show()}})})},"webview/admin/worksheets/notificationClasses/widgets/DestinationEditor":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/text!./templates/DestinationEditor.html dijit/form/RadioButton dijit/form/ValidationTextBox".split(" "),function(p,m,k,h,g,d,l,f,r,c,b){return g("webview/admin/worksheets/notificationClasses/widget/DestinationEditor",
[m,p,k],{templateString:b,value:null,_currentType:null,_destinationEnums:{device:0,network:1,global:2,networkMac:3},constructor:function(){this.rcStrings=f;this.webviewStrings=r},buildRendering:function(){this.inherited(arguments);this._radioButtons=[this.deviceRB,this.networkRB,this.globalRB,this.networkMacRB];this._textboxes=[this.deviceTB,this.networkTB,this.networkMacTB,this.macTB]},postCreate:function(){this.inherited(arguments);h.forEach(this._radioButtons,d.hitch(this,function(b){b.set({disabled:!this._canEdit});
this.own(c(b,"change",d.hitch(this,this._typeChanged,b)))}));h.forEach(this._textboxes,d.hitch(this,function(b){b.set({disabled:!this._canEdit});this.own(l.after(b,"validate",d.hitch(this,this._onTextboxChange,b)),!0)}))},onTextboxChange:function(b){},_getValueAttr:function(){var b={type:this._currentType,location:{}};switch(b.type){case this._destinationEnums.device:b.location.device=Number(this.deviceTB.get("value"));break;case this._destinationEnums.network:b.location.network=Number(this.networkTB.get("value"));
break;case this._destinationEnums.global:b.location=null;break;case this._destinationEnums.networkMac:b.location.network=Number(this.networkMacTB.get("value")),b.location.mac=this.macTB.get("value")}return b},_onTextboxChange:function(b){if(!b.get("disabled"))this.onTextboxChange(b.isValid())},_setValueAttr:function(b){h.forEach(this._textboxes,function(b){b.set("value","")});this._radioButtons[b.type].set("checked",!0);switch(b.type){case this._destinationEnums.device:this.deviceTB.set("value",b.location.device);
break;case this._destinationEnums.network:this.networkTB.set("value",b.location.network);break;case this._destinationEnums.networkMac:this.networkMacTB.set("value",b.location.network),this.macTB.set("value",b.location.mac)}this.value=b},_typeChanged:function(b,c){switch(b.value){case this._destinationEnums.device:this.deviceTB.set({disabled:!c,required:c});c&&this.deviceTB.focus();this._onTextboxChange(this.deviceTB);break;case this._destinationEnums.network:this.networkTB.set({disabled:!c,required:c});
c&&this.networkTB.focus();this._onTextboxChange(this.networkTB);break;case this._destinationEnums.global:if(c)this.onTextboxChange(!0);break;case this._destinationEnums.networkMac:this.networkMacTB.set({disabled:!c,required:c}),c&&this.networkMacTB.focus(),this._onTextboxChange(this.networkMacTB),this.macTB.set({disabled:!c,required:c}),this._onTextboxChange(this.macTB)}c&&(this._currentType=Number(b.value))}})})},"webview/admin/worksheets/notificationClasses/widgets/EmailsEditor":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/Selection dijit/ConfirmDialog dijit/form/ValidationTextBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/date/locale dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/store/Memory dojo/store/Observable dojo/text!webview/widget/templates/ConfirmActionBar.html dojo/text!./templates/EmailsEditor.html dojo/topic ./EventSelector ../../widgets/DaySelector webview/admin/_Widget dojox/validate/web ../../../widget/AddRemoveToolbar ../../../widget/AdminToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C){return f("webview/admin/worksheets/notificationClass/widgets/EmailsEditor",[C,g],{templateString:z,gridStore:null,_canEdit:!0,_daysMap:{},_daySelector:null,_eventSelector:null,_grid:null,_bitStringDialog:null,_defaultStoreItem:{address:"",days:254,fromTime:"00:00:00",toTime:"23:59:59",events:0},constructor:function(){this.rcStrings=q;this.webviewStrings=u;this.errorStrings=a;this._gridStore=new x(new v);this._buildColumns();this._eventsMap=
{128:this.webviewStrings.toAlarm,64:this.webviewStrings.toFault,32:this.webviewStrings.toNormal};var c=b.getNames("days","abbr"),d=128;l.forEach(c,r.hitch(this,function(a,b){0===b?this._daysMap[2]=a:(this._daysMap[d]=a,d>>=1)}))},postCreate:function(){this.inherited(arguments);this._buildGrid();this._createButtons();this.okButton.set("label",this.rcStrings.btnOk.toUpperCase());this.cancelButton.set("label",this.rcStrings.btnCancel.toUpperCase())},show:function(){this.inherited(arguments);null!==this._grid&&
this._grid.resize()},_addNew:function(){var a=r.clone(this._defaultStoreItem);a.id=this._gridStore.data.length;this._gridStore.add(a)},_buildColumns:function(){this._columnStructure=[m({editor:d,editOn:"click",canEdit:r.hitch(this,function(){return this._canEdit}),id:"emailCol",field:"address",label:this.webviewStrings.emailAddress,editorArgs:{baseClass:"rcTextBox",validator:dojox.validate.isEmailAddress},renderCell:function(a,b,c){return t.create("span",{"class":"linkable",innerHTML:b,title:b},c,
"only")}}),{id:"daysCol",field:"days",label:this.webviewStrings.days,renderCell:r.hitch(this,function(a,b,c){var d=254===b?this.rcStrings.all:this._getBitStringText(b,this._daysMap,"days");this.own(n(c,"click",r.hitch(this,this._showBitStringDialog,"days",a.id,b)));return this._renderBitStringColumn(d,c)})},m({editor:d,canEdit:r.hitch(this,function(){return this._canEdit}),editOn:"click",id:"fromTimeCol",field:"fromTime",label:this.webviewStrings.timeFrom,editorArgs:{baseClass:"rcTextBox",pattern:"([0-1][0-9]|2[0-3]):[0-5]?[0-9]:[0-5]?[0-9]"},
renderCell:function(a,b,c){return t.create("span",{"class":"linkable",innerHTML:b,title:b},c,"only")}}),m({editor:d,canEdit:r.hitch(this,function(){return this._canEdit}),editOn:"click",id:"toTimeCol",field:"toTime",label:this.webviewStrings.timeTo,editorArgs:{baseClass:"rcTextBox",pattern:"([0-1][0-9]|2[0-3]):[0-5]?[0-9]:[0-5]?[0-9]"},renderCell:function(a,b,c){return t.create("span",{"class":"linkable",innerHTML:b,title:b},c,"only")}}),{id:"eventsCol",field:"events",label:this.webviewStrings.events,
renderCell:r.hitch(this,function(a,b,c){var d=224===b?this.rcStrings.all:this._getBitStringText(b,this._eventsMap);this.own(n(c,"click",r.hitch(this,this._showBitStringDialog,"events",a.id,b)));return this._renderBitStringColumn(d,c)})}]},_buildGrid:function(){null===this._grid&&(this._grid=new (f([p,k,h]))({columns:this._columnStructure,store:this._gridStore,sort:[{attribute:"id",descending:!1}],maxRowsPerPage:256,maxEmptySpace:10}),t.place(this._grid.domNode,this.gridNode,"only"),this._grid.startup(),
this._connectGrid())},_connectGrid:function(){this.own(n(this._grid,["dgrid-select","dgrid-deselect"],r.hitch(this,this._toggleDeleteButton)))},_createButtons:function(){this.buttonBar.addIcon(this._toolbar);this.own(n(this._toolbar,"delete",r.hitch(this,this._removeSelected)),n(this._toolbar,"add",r.hitch(this,this._addNew)));this.setTooltips()},_getBitStringText:function(a,b,c){if(0===a)return this.webviewStrings.none;for(var d=Object.keys(b),f=Number(d[d.length-1]),g=[],d=Number(d[0])>>1;f>d;)(a&
f)===f&&("days"===c&&2===f?g.unshift(b[f]):g.push(b[f])),f>>=1;return g.join("/")},_getGridStoreAttr:function(){return this._gridStore},_getValueAttr:function(){var a=r.clone(this._gridStore.data);l.forEach(a,function(a){delete a.id});return a},_onBitStringSave:function(a,b){var c=0,d=this._gridStore.get(b);switch(a){case "days":c=this._daySelector.get("value");d.days=c;break;case "events":c=this._eventSelector.get("value"),d.events=c}this._gridStore.put(d)},_onSubmit:function(){this._grid.save();
0===this._gridStore.query({address:""}).length?this.inherited(arguments):y.publish("alert",{type:"error",message:this.errorStrings.emailAddressCannotBeEmpty})},_removeSelected:function(){var a=Object.keys(this._grid.selection);l.forEach(a,r.hitch(this,function(a){this._gridStore.remove(a)}))},_renderBitStringColumn:function(a,b){/.*\/$/.test(a)&&(a=a.substring(0,a.length-1));var c=t.create("div",{style:{verticalAlign:"top"}},b,"only");t.create("span",{innerHTML:a,title:a,style:{display:"inline-block",
width:"75%",textOverflow:"clip",overflowX:"hidden"}},c,"first");t.create("span",{"class":"webviewIcon textEditIcon",style:{verticalAlign:"top",marginLeft:"5px"}},c,"last");return c},_setGridStoreAttr:function(a){for(var b=this._gridStore.data.length-1;0<=b;--b)this._gridStore.remove(this._gridStore.data[b].id);l.forEach(a,r.hitch(this,function(a,b){a.id=b;this._gridStore.put(a)}));this._grid&&this._grid.set("store",this._gridStore)},_showBitStringDialog:function(a,b,d){null===this._bitStringDialog&&
(this._bitStringDialog=new g({actionBarTemplate:w}),this._bitStringDialog.okButton.set("label",this.rcStrings.btnOk.toUpperCase()),this._bitStringDialog.cancelButton.set("label",this.rcStrings.btnCancel.toUpperCase()));switch(a){case "days":null===this._daySelector?(this._eventSelector=null,this._daySelector=new B({_canEdit:this._canEdit,value:d}),this._bitStringDialog.set({content:this._daySelector.domNode,title:this.webviewStrings.validDays})):this._daySelector.set("value",d);break;case "events":null===
this._eventSelector?(this._daySelector=null,this._eventSelector=new A({_canEdit:this._canEdit,value:d}),this._bitStringDialog.set({content:this._eventSelector.domNode,title:this.webviewStrings.events})):this._eventSelector.set("value",d)}this._bitStringDialog.show();var f=n(this._bitStringDialog,"execute",r.hitch(this,this._onBitStringSave,a,b)),h=c.after(this._bitStringDialog,"hide",r.hitch(this,function(){setTimeout(r.hitch(this,function(){h.remove();f.remove()}),250)}))},_toggleDeleteButton:function(){var a=
Object.keys(this._grid.selection);this._toolbar.deleteButton.set("disabled",0===a.length||!this._canEdit)}})})},"webview/admin/worksheets/notificationClasses/widgets/EventSelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/i18n!webview/nls/all dojo/text!./templates/EventSelector.html dijit/form/CheckBox".split(" "),function(p,m,k,h,g,d){return h("webview/admin/worksheets/notificationClasses/widget/EventSelector",[m,p,k],{templateString:d,
value:0,_canEdit:!0,_minIterator:16,_iterStart:128,constructor:function(){this.inherited(arguments);this.webviewStrings=g},buildRendering:function(){this.inherited(arguments);this._eventMap={128:this.toAlarm,64:this.toFault,32:this.toNormal};this.toFault.set({disabled:!this._canEdit});this.toNormal.set({disabled:!this._canEdit});this.toAlarm.set({disabled:!this._canEdit})},_getValueAttr:function(){for(var d=this._iterStart,f=0;d>this._minIterator;)!0===this._eventMap[d].get("checked")&&(f|=d),d>>=
1;return this.value=f},_setValueAttr:function(d){for(var f=this._iterStart,g=null,c=!1;f>this._minIterator;)g=this._eventMap[f],c=(d&f)===f,g.set("checked",c),f>>=1;this.value=d}})})},"webview/admin/worksheets/widgets/DaySelector":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/date/locale dojo/dom-attr dojo/dom-class dojo/text!./templates/DaySelector.html".split(" "),function(p,m,k,h,g,d,l){return k("webview/admin/worksheets/widgets/DaySelector",[m,p],{templateString:l,
value:0,_canEdit:!0,_maxIterator:254,_iterStart:2,constructor:function(){this.inherited(arguments);var d=h.getNames("days","narrow","standAlone");this.sundayLabel=d[0];this.mondayLabel=d[1];this.tuesdayLabel=d[2];this.wednesdayLabel=d[3];this.thursdayLabel=d[4];this.fridayLabel=d[5];this.saturdayLabel=d[6];d=h.getNames("days","wide","standAlone");this.sundayFullLabel=d[0];this.mondayFullLabel=d[1];this.tuesdayFullLabel=d[2];this.wednesdayFullLabel=d[3];this.thursdayFullLabel=d[4];this.fridayFullLabel=
d[5];this.saturdayFullLabel=d[6]},buildRendering:function(){this.inherited(arguments);this._dayMap={128:{container:this.monday,checkbox:this.mondayCB},64:{container:this.tuesday,checkbox:this.tuesdayCB},32:{container:this.wednesday,checkbox:this.wednesdayCB},16:{container:this.thursday,checkbox:this.thursdayCB},8:{container:this.friday,checkbox:this.fridayCB},4:{container:this.saturday,checkbox:this.saturdayCB},2:{container:this.sunday,checkbox:this.sundayCB}};for(var d in this._dayMap)this._dayMap[d].checkbox.disabled=
!this._canEdit},_checkboxChanged:function(f){d.toggle(this._dayMap[f.currentTarget.value].container,"checked",f.currentTarget.checked)},_getValueAttr:function(){for(var d=this._iterStart,h=0;d<this._maxIterator;)!0===g.get(this._dayMap[d].checkbox,"checked")&&(h|=d),d<<=1;return this.value=h},_setValueAttr:function(f){for(var h=this._iterStart,c=null,b=!1;h<this._maxIterator;)c=this._dayMap[h],b=(f&h)===h,g.set(c.checkbox,"checked",b),d.toggle(c.container,"checked",b),h<<=1;this._set("value",f)}})})},
"webview/admin/widget/AddRemoveToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/text!./templates/AddRemoveToolbar.html ../_Widget webview/widget/IconButton".split(" "),function(p,m,k,h,g,d,l){return p("webview/widget/AddRemoveToolbar",[l],{templateString:d,_buttons:null,_canEdit:!0,constructor:function(){this.webviewStrings=h;this.rcStrings=k},postCreate:function(){this.inherited(arguments);this._setupOnClicks();this._buildButtonMap()},
getPageButtons:function(){return this._buttons},onAdd:function(){g.emit(this,"add")},onDelete:function(){g.emit(this,"delete")},_buildButtonMap:function(){this._buttons={addButton:this.addButton,deleteButton:this.deleteButton};this.addButton.set({disabled:!this._canEdit});this.deleteButton.set({disabled:!this._canEdit})},_setupOnClicks:function(){this.own(g(this.addButton.domNode,"click",m.hitch(this,function(){if(!this.addButton.get("disabled"))this.onAdd()})),g(this.deleteButton.domNode,"click",
m.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onDelete()})))}})})},"webview/widget/IconButton":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare","dojo/dom-class","dojo/text!./templates/IconButton.html"],function(p,m,k,h,g){return k("webview/widget/IconButton",[m,p],{templateString:g,tooltipLabel:"",_isDisabled:!1,postCreate:function(){this.inherited(arguments);this.set("disabled",this._isDisabled)},_setDisabledAttr:function(d){this._isDisabled=
d;h.toggle(this.domNode,"disabled",d)},_getDisabledAttr:function(){return this._isDisabled}})})},"webview/admin/worksheets/notificationClasses/widgets/PriorityEditor":function(){define("dijit/ConfirmDialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/store/Memory dojo/store/Observable dojo/text!./templates/PriorityEditor.html webview/admin/_Widget dijit/form/Button dijit/form/FilteringSelect".split(" "),function(p,m,k,h,g,d,l,f,r,c){return k("webview/admin/worksheets/notificationClass/widgets/PriorityEditor",
[c,p],{templateString:r,value:null,_ackMap:null,_iterStart:32,_maxIter:256,_priorityStore:null,canEdit:!1,constructor:function(){this.rcStrings=g;this.webviewStrings=d;this._canEdit=rc.session.hasRole(rc.session.roles2.notChg,!0);this._priorityStore=new f(new l({idProperty:"priority"}))},buildRendering:function(){this.inherited(arguments);this._ackMap={32:this.toNormalCB,64:this.toFaultCB,128:this.toAlarmCB};this.toAlarmDD.set({store:this._priorityStore,disabled:!this._canEdit,queryExpr:"*${0}*"});
this.toFaultDD.set({store:this._priorityStore,disabled:!this._canEdit,queryExpr:"*${0}*"});this.toNormalDD.set({store:this._priorityStore,disabled:!this._canEdit,queryExpr:"*${0}*"});this.toFaultCB.set({disabled:!this._canEdit});this.toNormalCB.set({disabled:!this._canEdit});this.toAlarmCB.set({disabled:!this._canEdit})},postCreate:function(){this.inherited(arguments);this.okButton.set("label",this.rcStrings.btnOk.toUpperCase());this.cancelButton.set("label",this.rcStrings.btnCancel.toUpperCase())},
_getValueAttr:function(){var b=0,c={toAlarmPriority:Number(this.toAlarmDD.get("value")),toFaultPriority:Number(this.toFaultDD.get("value")),toNormalPriority:Number(this.toNormalDD.get("value"))},d=Object.keys(this._ackMap);m.forEach(d,h.hitch(this,function(c){this._ackMap[c].get("checked")&&(b|=c)}));c.ackBits=b;return c},_setPriorityMapAttr:function(b){var c=Object.keys(b);m.forEach(c,h.hitch(this,function(c){this._priorityStore.put({priority:c,name:c+" - "+(0!==Number(c)?b[c]:this.rcStrings.defaultValue)})}))},
_setValueAttr:function(b){this.toAlarmDD.set("value",b.toAlarmPriority);this.toFaultDD.set("value",b.toFaultPriority);this.toNormalDD.set("value",b.toNormalPriority);for(var c=this._iterStart;c<this._maxIter;)this._ackMap[c].set("checked",(c&b.ackBits)===c),c<<=1}})})},"webview/admin/AdminWorksheetBase":function(){define("dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../nls/all dojo/i18n!../nls/worksheets dojo/on dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string ./_ConfirmGridDeleteMixin ./_GridAutoRefreshMixin ./_Widget ./worksheets/widgets/DescriptionEditor ./worksheets/widgets/NewWorksheetInstance ../util/GridCellFormatter ../widget/dGridExtensions/dGridExcelExporterMixin".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z){return m("webview/admin/AdminWorksheetBase",[n,w,u,a,z],{AutoManualEnums:{auto:0,manual:1,timed:2,0:"auto",1:"manual",2:"timed"},allowSpecificInstances:!0,dataTypeName:null,identityProperty:"id",rcStrings:d,webviewStrings:l,widgetName:null,widgetNameKey:null,worksheetStrings:f,_addPopup:null,_descriptionEditorDialog:null,_canEdit:!1,_constantHeights:-1,_deleteDialog:null,_fetchTimeout:null,_firstLoad:!0,_grid:null,_gridStore:null,_intervalTime:5E3,
_resizeTimeout:null,constructor:function(){this._createStores();this._setCanEditFlag()},postCreate:function(){this.inherited(arguments);this.connectExportButton();this._createButtons();this._addToolbarListeners()},formatNumberCell:function(a,b){return this._isPlaceholderRow(b)?"":this.inherited(arguments)},makeClean:function(){this.inherited(arguments);this._toolbar.clearDirty&&this._toolbar.clearDirty()},makeDirty:function(){this.inherited(arguments);this._toolbar.makeDirty&&this._toolbar.makeDirty()},
print:function(){this.printDGrid(this._grid)},_resize:function(){this.inherited(arguments);this._resizeGrid()},_resizeGrid:function(){null!==this._grid&&this._grid.resize()},_addDialog:function(a,b){this._canEdit&&(null===this._addPopup?this._addPopup=new x({allowSpecificInstances:this.allowSpecificInstances,title:a,maxLength:b?b:"",execute:k.hitch(this,this._performAdd)}):this._addPopup.reset(),this._addPopup.show())},_addToolbarListeners:function(){throw"_addToolbarListeners(): Must be implemented in child class";
},_buildAuditLogContext:function(a){var b=[];a.forEach(k.hitch(this,function(a){b.push({systemId:this.system,objectName:a})}));a=this.widgetNameKey;var c=this._buildMnemonicString();webview.auditUtil.setContextDataWithSiteIdForWorksheets(this.site,b,a,c)},_buildDescriptionCell:function(a,b,c){var d=this._canEditRow(a),d=g.create("div",{title:q.substitute(this.rcStrings.editX,[this.rcStrings.description]),"class":"description-container"+(d?" colourlessLink":"")},c,"only");b=b||"";g.create("span",{title:b,
innerHTML:b.replace(/\n/g,"\x3cbr /\x3e"),"class":"description-text"},d,"first");this._isPlaceholderRow(a)||(g.create("span",{"class":"webviewIcon textEditIcon"},d,"last"),this.own(r(c,"click",k.hitch(this,this._showDescriptionDialog,b,a))));return d},_buildColumnStructure:function(){throw"_buildColumnStructure(): Must be implemented in child class";},_buildGrid:function(){throw"_buildGrid(): Must be implemented in child class";},_buildMnemonicString:function(){return"programsworksheet"===this.type?
"("+this.device+"PRGS)":"("+this.mnemonic+")"},_buildTitle:function(a){if(null===this.widgetName)throw"Base class must set widget name";this.set("title",a.deviceName+" - "+this.widgetName);this._setTitle(this.title)},_canAccessRow:function(a){return!this._isPlaceholderRow(a)},_canEditDescription:function(a){return this._canEditRow(a)},_canEditRow:function(a){return this._canEdit&&this._canAccessRow(a)},_createButtons:function(){this.buttonBar.addIcon(this._toolbar);this.setTooltips()},_createDescriptionDialog:function(){null===
this._descriptionEditorDialog&&(this._descriptionEditorDialog=new v({baseClass:"viewDescriptionDialog"}))},_createSelectorCheckbox:function(a,b,c){a=this._isPlaceholderRow(c);var d=new p({checked:this._isRowSelected(c),definedValue:c[this.identityProperty],disabled:a});g.place(d.domNode,b,"only");a&&h.add(d.domNode,"hidden");this.own(r(d,"change",k.hitch(this,function(a,b){b?this._grid.select(a):this._grid.deselect(a)},this._getRowIdentifier(c))));return d.domNode},_createStores:function(){this._gridStore=
new t(new b({idProperty:this.identityProperty}))},_descriptionSet:function(a,b){if(a.description!==b){var c=this._grid.store.getIdentity(a),d=this._grid.cell(c,"descriptionCol"),f={grid:this._grid,cell:d,rowId:c,value:b,bubbles:!0,cancelable:!0};this._grid.updateDirty(c,"description",b);r.emit(d.element,"dgrid-datachange",f);this._grid.refresh({keepScrollPosition:!0})}},_fetch:function(a){throw"_fetch(): Must be implemented by child class";},_fetchDeviceName:function(){return c.get("DeviceName",{handleAs:"json",
query:{systemId:this.system,deviceNumber:this.device}})},_getFirstSelectedRow:function(){for(var a in this._grid.selection)if(this._grid.selection[a])break;return this._gridStore.get(a)},_getLoadingString:function(){if(null===this.dataTypeName)throw"_getLoadingString(): Child class must specify 'dataTypeName'";return'\x3cdiv class\x3d"loadingContainer"\x3e\x3cspan class\x3d"waiting"\x3e\x3c/span\x3e\x3cspan class\x3d"loadingMessage"\x3e'+q.substitute(this.rcStrings.loadingX,[this.dataTypeName])+"\x3c/span\x3e\x3c/div\x3e"},
_getRowIdentifier:function(a){return a.mne},_getTitle:function(){this._fetchDeviceName().then(k.hitch(this,this._buildTitle))},_getTotalRowSelection:function(){var a=0,b;for(b in this._grid.selection)this._grid.selection[b]&&++a;return a},_isPlaceholderRow:function(a){if("undefined"===typeof a.name)throw'_isPlaceholderRow() requires row to contain a "name" field';return a.name===this.PlaceholderName},_isRowSelected:function(a){return this._grid&&!0===this._grid.selection[this._getRowIdentifier(a)]},
_performAdd:function(){throw"_performAdd(): Must be implemented by child class";},_performDelete:function(){throw"_performDelete(): Must be implemented by child class";},_refreshGridInPlace:function(){this._grid&&this._grid.refresh({keepScrollPosition:!0})},_reloadData:function(a){this._fetch(a).then(k.hitch(this,this._parseFetch))},_revertChanges:function(){this._grid.revert();this.makeClean();this._reloadData(!0)},_setCanEditFlag:function(){throw"_setCanEditFlag(): Must be implemented by child class";
},_showDescriptionDialog:function(a,b){this._emitDialogEditorShowEvent(b,"descriptionCol");this._createDescriptionDialog();this._descriptionEditorDialog.set({title:b.name+" ("+b.mne+"): "+this.webviewStrings.description,value:a,canEdit:this._canEditDescription(b),execute:k.hitch(this,this._descriptionSet,b),onHide:k.hitch(this,this._emitDialogEditorHideEvent,b,"descriptionCol")});this._descriptionEditorDialog.show()},_toggleButtons:function(){return this._getTotalRowSelection()},_worksheetItemInUse:function(a){var b=
function(a,b){return b.instance===a&&b.name!==this.PlaceholderName},c=!1,d=null;0<this._gridStore.query({name:a.name}).length?(d=this.worksheetStrings.nameInUse,c=!0):-1!==a.specificInstance&&0<this._gridStore.query(k.hitch(this,b,a.specificInstance)).length&&(d=this.worksheetStrings.instanceInUse,c=!0);return{inUse:c,message:d}},destroy:function(){this.inherited(arguments);null!==this._addPopup&&this._addPopup.destroyRecursive()}})})},"webview/admin/_ConfirmGridDeleteMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!../nls/all ../widget/WarningDialog ../widget/WarningDialogEnums".split(" "),
function(p,m,k,h,g,d,l){return m("webview/admin/_ConfirmGridDeleteMixin",null,{webviewStrings:g,_deleteDialog:null,_grid:null,_confirmDelete:function(f,g){null===this._grid&&console.error(this.declaredClass+" - _confirmDelete(): Mixin must be added to class with _grid property");var c=h.create("div");null===this._deleteDialog&&(this._deleteDialog=new d({title:this.webviewStrings.confirmDeleteAction,type:l.types.binary,content:c}));var b="\x3cdiv\x3e"+g+"\x3cul\x3e";p.forEach(f,k.hitch(this,function(c){b+=
"\x3cli\x3e"+this._grid.store.get(c).name+"\x3c/li\x3e"}));b+="\x3c/ul\x3e\x3c/div\x3e";c=h.toDom(b);this._deleteDialog.set("content",c);var m=this._deleteDialog.on("close",k.hitch(this,function(b){switch(b){case l.returnValues.oneOrYes:this._performDelete();break;case l.returnValues.none:break;default:console.error(this.declaredClass+" - _confirmDelete(): Unknown choice",b)}m.remove()}));this.own(m);this._deleteDialog.open()},_performDelete:function(){throw"_performDelete must be implemented";}})})},
"webview/admin/_GridAutoRefreshMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on"],function(p,m,k){return p("webview/admin/_GridAutoRefreshMixin",null,{_dirty:!1,_fetchTimeout:null,_grid:null,_intervalTime:5E3,_autoReloadEnabled:!0,makeClean:function(){this.inherited(arguments);this._autoReloadEnabled=!0},makeDirty:function(){this.inherited(arguments);this._disableAutoReload()},_canAutoRefresh:function(){return!this._dirty},_clearFetchTimeout:function(){this._fetchTimeout&&
(clearTimeout(this._fetchTimeout),this._fetchTimeout=null)},_connectGrid:function(){this.own(k(this._grid,"dgrid-select, dgrid-deselect",m.hitch(this,this._onSelectionChange)),k(this._grid,"dgrid-editor-show",m.hitch(this,this._disableAutoReload)),k(this._grid,"dgrid-editor-hide",m.hitch(this,this._enableAutoReload)))},_disableAutoReload:function(){this._autoReloadEnabled=!1;this._clearFetchTimeout()},_emitDialogEditorShowEvent:function(h,g){var d=this._grid.store.getIdentity(h),d=this._grid.cell(d,
g);k.emit(d.element,"dgrid-editor-show",{bubbles:!0})},_emitDialogEditorHideEvent:function(h,g){var d=this._grid.store.getIdentity(h),d=this._grid.cell(d,g);k.emit(d.element,"dgrid-editor-hide",{bubbles:!0})},_enableAutoReload:function(){this._autoReloadEnabled=!0;this._canAutoRefresh()&&this._setFetchTimeout()},_parseFetch:function(h){!0===this._autoReloadEnabled&&(h.errStatus===this.SuccessCode?(this._updateGrid(h),h.initialLoad&&this._firstLoad&&(this._intervalTime=5E3,this.onInitSuccess(),this._firstLoad=
!1),this._refreshGridInPlace(),this._setFetchTimeout()):(this._clearFetchTimeout(),h=this.safeError(h,{message:this._getErrorMessage(h.errStatus,h.errMSG)}),this.onInitError(h)))},_reloadData:function(){throw"_reloadData must be implemented by inheriting class";},_setFetchTimeout:function(h){h||(this._clearFetchTimeout(),this._fetchTimeout=setTimeout(m.hitch(this,this._reloadData),this._intervalTime))},_updateGrid:function(h){throw"_updateGrid must be implemented by inheriting class";},destroy:function(){this.inherited(arguments);
this._clearFetchTimeout()}})})},"webview/admin/worksheets/widgets/DescriptionEditor":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/dom-attr dojo/i18n!rc/nls/all dojo/i18n!../../../nls/all dojo/text!./templates/DescriptionEditor.html dijit/form/Button dijit/form/Textarea".split(" "),function(p,m,k,h,g,d){return m("webview/admin/worksheets/widgets/DescriptionEditor",[p],{baseClass:"",canEdit:!0,rcStrings:h,templateString:d,maxCharacters:255,value:"",webviewStrings:g,_setValueAttr:{node:"descriptionInput",
attribute:"value"},postCreate:function(){this.inherited(arguments);k.set(this.inputLabel,"for",this.descriptionInput.id)},_getValueAttr:function(){return this.descriptionInput.get("value")},show:function(){this._enableFields();return this.inherited(arguments)},_enableFields:function(){this.descriptionInput.set("disabled",!this.canEdit);this.descriptionInput.set("maxLength",this.maxCharacters);k.set(this.inputLabel,"innerHTML",this.webviewStrings.description+":\x3cbr /\x3e("+this.webviewStrings.maxCharacters+
": "+this.maxCharacters+")");this.okButton.set("disabled",!this.canEdit)}})})},"webview/admin/worksheets/widgets/NewWorksheetInstance":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!rc/nls/all dojo/on dojo/topic dojo/text!./templates/NewWorksheetInstance.html dijit/form/Form dijit/form/RadioButton dijit/form/TextBox dijit/form/Button".split(" "),function(p,m,k,h,g,d,l,f,r,c){return m("webviewadminworksheetswidgetsNewWorksheetInstance",
p,{allowSpecificInstances:!0,maxLength:"",rcStrings:l,webviewStrings:g,templateString:c,InstanceTypes:{next:0,specific:1},checkForInstance:!1,postCreate:function(){this.inherited(arguments);this.name.set("maxLength",this.maxLength);this._createListeners();this._toggleOkButton()},reset:function(){this.nextInstanceType.set("checked",!0);this.name.set("value","");this.specificInstance.set("value","")},show:function(){this.inherited(arguments);setTimeout(k.hitch(this.name,this.name.focus),250)},_createListeners:function(){this.own(f(this.specificInstanceType,
"change",k.hitch(this,this._toggleInstanceContainer)),f(this.name,"change, keyup",k.hitch(this,this._toggleOkButton)),f(this.specificInstance,"change, keyup",k.hitch(this,this._toggleOkButton)),f(this.okButton,"click",k.hitch(this,this._validateName)),this.watch("checkForInstance",k.hitch(this,this._toggleOkButton)))},_getValueAttr:function(){var b={specificInstance:-1,name:this.name.get("value")};this.specificInstanceType.get("checked")&&(b.specificInstance=Number(this.specificInstance.get("value")));
return b},_setAllowSpecificInstancesAttr:function(b){h.toggle(this.instanceTypeContainer,"hidden",!b);b||this.reset();this._set("allowSpecificInstances",b)},_toggleInstanceContainer:function(b){h.toggle(this.specificContainer,"invisible",!b);this.set("checkForInstance",b);b&&this.specificInstance.focus()},_toggleOkButton:function(){var b=!0,c=this.name.get("value").trim();this.checkForInstance&&(b=""!==this.specificInstance.get("value").trim());""!==c&&/\*|\?|"|<|>|\/|\||:|\\/i.exec(c)&&(b=!1);this.okButton.set("disabled",
!b)},_validateName:function(){var b=this.name.get("value").trim();if(null!==/\*|\?|"|<|>|\/|\||:|\\/i.exec(b))return this.reset(),this.okButton.set("disabled",!0),r.publish("sticky",{message:d.invalidPointReportName,type:"error"}),!1}})})},"webview/util/GridCellFormatter":function(){define("dijit/form/CheckBox dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../nls/all dojo/number dojo/on dojo/store/Memory ./dateUtils ../widget/InlineEditBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v){return h("webview/util/GridCellFormatter",null,{PlaceholderName:"WV_PLACEHOLDER",displayEnums:{EDITABLE:1,READONLY:2,INVISIBLE:4},rcStrings:b,webviewStrings:t,allowSelect:function(a){return a.data.name!==this.PlaceholderName},buildClippedCell:function(a,b,c,d){a=r.create("div",{"class":"clipped-data-container"},a,"only");r.create("span",{innerHTML:b,title:c,"class":"clipped-data-text"},a,"first");r.create("span",{"class":"webviewIcon textEditIcon"},a,"last");
d&&this.own(u(a,"click",d));return a},formatAutoManualCell:function(a,b){var c="";if(b.name!==this.PlaceholderName)switch(c=this.rcStrings.auto,Number(a)){case 0:c=this.rcStrings.auto;break;case 1:c=this.rcStrings.manual;break;default:throw"Unsupported auto/manual type";}return c},formatBooleanCell:function(a,b){var c="";b.name!==this.PlaceholderName&&(c=a?this.webviewStrings.yes:this.webviewStrings.no);return c},formatByteSizeCell:function(a,b){var c="";b.name!==this.PlaceholderName&&(c="4"===a||
0==a?4:2);return c},formatDateTimeCell:function(a,b){var c="";null!==a&&(c=n.bacnetDateToJSDate(a.date),c.setHours(a.time.h,a.time.m,a.time.s),c=d.format(c,{formatLength:"short"}));return c},formatNumberCell:function(a){return q.format(a)},formatTimerCell:function(a,b){var c="";if(b.name!=this.PlaceholderName)switch(c=this.webviewStrings.enabledLabel,String(a)){case "false":c=this.webviewStrings.disabledLabel;break;case "true":c=this.webviewStrings.enabledLabel;break;default:throw"Unsupported enabled/disabled type";
}return c},getLabel:function(a){switch(a.toLowerCase()){case "name":return this.webviewStrings.name;case "point":case "point1":case "point2":case "point3":case "point4":case "point5":case "point6":case "point7":case "point8":var b="";try{b=this._pointIndexRegex.exec(a)[2]}catch(z){}return this.webviewStrings.point+" "+b;case "enable":return this.webviewStrings.enable;case "logtype":return this.webviewStrings.logType;case "increment":return this.webviewStrings.increment;case "interval":return this.webviewStrings.interval;
case "usehalffloat":return this.webviewStrings.bytes;case "length":return this.webviewStrings.length;case "description":return this.webviewStrings.description;case "advanced":return this.rcStrings.advanced;case "firstsample":return this.webviewStrings.firstSample;case "lastsample":return this.webviewStrings.lastSample;default:return a}},renderBooleanCell:function(a,b,c,d){a=new p({checked:c,disabled:a});b.name!==this.PlaceholderName?u(a,"change",g.hitch(this,function(a){u.emit(this,"checkboxChange",
a,b,d)})):f.add(a.domNode,"invisible");return a.domNode},renderDateTimeCell:function(a,b,c){c="";null!==b&&(c=n.bacnetDateToJSDate(b.date),c.setHours(b.time.h,b.time.m,b.time.s),c=d.format(c,{formatLength:"short"}));b=r.create("span",{innerHTML:c});a.name===this.PlaceholderName&&f.add(b,"invisible");return b},renderHourMinSecCell:function(a,b,c,d,g){0!==c.logtype&&(a=!0);a=(new v({value:d||"00:00:00",maxLength:b,hideOnDisabled:!0,pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}",disabled:a})).domNode;c.name===
this.PlaceholderName&&f.add(a,"invisible");return a},renderMultiStateCell:function(b,c,d,h,l){var n=[];k.forEach(b,function(a,b){n.push({id:b,name:a})});b=new a({data:n});c=new m({store:b,value:h,baseClass:"rcSelectBox",disabled:c});d.name!==this.PlaceholderName?u(c,"change",g.hitch(this,function(a){u.emit(this,"multistateChange",a,d,l)})):f.add(c.domNode,"invisible");return c.domNode},renderNumberCell:function(a,b,c,d){b.enable&&(a=!0);a=(new v({value:c,pattern:"[0-9]*",disabled:a})).domNode;b.name===
this.PlaceholderName&&f.add(a,"invisible");return a},renderPointCell:function(a,b,c){var d="";null!==b.name&&(d+=b.name);null!==b.mne&&(d+=" ("+b.mne+")");l.set(c,"title",d);b=r.create("span",{innerHTML:d});a.name===this.PlaceholderName&&f.add(b,"invisible");return b},renderTextCell:function(a,b,c,d,g){a=(new v({value:d,maxLength:b,pattern:".*",disabled:a})).domNode;c.name===this.PlaceholderName&&f.add(a,"invisible");return a},_hideCellDataForEditor:function(a,b){b.name===this.PlaceholderName&&(a=
"");return a},_positionAndShowColumnToggle:function(a){c.set(this._grid.hiderMenuNode,"top",a.currentTarget.getBoundingClientRect().bottom+"px");this._grid._toggleColumnHiderMenu(a.currentTarget)}})})},"webview/util/dateUtils":function(){define(["dojo/_base/declare","dojo/date/locale","dojo/i18n!webview/nls/all","dojox/calendar/time"],function(p,m,k,h){return new (p("webview/util/dateUtils",null,{MAX_MILLISECONDS_FROM_EPOCH:864E13,MILLISECONDS_IN_DAY:864E5,floorTime:function(g){g=new Date(g);null!==
g&&g.setHours(0,0,0,0);return g},ceilingTime:function(g){g=new Date(g);null!==g&&g.setHours(23,59,59,999);return g},isAllDay:function(g,d){return 0===g.getHours()&&0===g.getMinutes()&&23===d.getHours()&&59===d.getMinutes()},getBACnetDayLabelMap:function(g){g=m.getNames("days",g,"standalone");return{128:g[1],64:g[2],32:g[3],16:g[4],8:g[5],4:g[6],2:g[0]}},getFirstDayOfWeek:function(g){return h.floorToWeek(new Date(g),null,null,0)},getFirstDayOfMonth:function(g){return h.floorToMonth(new Date(g))},getLastDayOfMonth:function(g){g=
new Date(g);g.setMonth(g.getMonth()+1);g.setDate(-1);return g},getMonthAbbreviation:function(g){return k.monthAbbrsOfYear[g]},getDayOfWeek:function(g){return k.daysOfWeek[g]},isSameDate:function(g,d){return g.getFullYear()===d.getFullYear()&&g.getMonth()===d.getMonth()&&g.getDate()===d.getDate()},addMinutes:function(g,d){var h=new Date(g);h.setMinutes(h.getMinutes()+d);return h},bacnetDateToJSDate:function(g){var d=new Date;d.setDate(15);255<g.y?d.setFullYear(g.y):d.setFullYear(g.y+1900);d.setMonth(g.m);
d.setDate(g.dom);return d},jsDateToBACnetDate:function(g){return{y:g.getFullYear(),m:g.getMonth(),dom:g.getDate()}},getLastSundayOfMonth:function(g){var d=new Date(g);d.setDate(1);d.setMonth(g.getMonth()+1);d.setDate(0);d.setDate(d.getDate()-d.getDay());return d},isLastSundayofMonth:function(g){var d=this.getLastSundayOfMonth(g);return this.isSameDate(g,d)},isFirstDayOfMonthAndSunday:function(g){return 0===g.getDay()&&1===g.getDate()},getDaysInMonth:function(g){var d=new Date(g);d.setMonth(g.getMonth()+
1);d.setDate(0);return d.getDate()},getDOWOfFirstDayOfMonth:function(g){g=new Date(g);g.setDate(1);return g.getDay()}}))})},"dojox/calendar/time":function(){define(["dojo/_base/lang","dojo/date","dojo/cldr/supplemental","dojo/date/stamp"],function(p,m,k,h){var g={newDate:function(d,g){g=g||Date;var f;if("number"==typeof d)return new g(d);if(d.getTime)return new g(d.getTime());if(d.toGregorian)return f=d.toGregorian(),g!==Date&&(f=new g(f.getTime())),f;if("string"==typeof d){f=h.fromISOString(d);if(null===
f)throw Error("Cannot parse date string ("+d+'), specify a "decodeDate" function that translates this string into a Date object');g!==Date&&(f=new g(f.getTime()));return f}},floorToDay:function(d,h,f){f=f||Date;h||(d=g.newDate(d,f));d.setHours(0,0,0,0);return d},floorToMonth:function(d,h,f){f=f||Date;h||(d=g.newDate(d,f));d.setDate(1);d.setHours(0,0,0,0);return d},floorToWeek:function(d,h,f,r,c){h=h||Date;f=f||m;r=void 0==r||0>r?k.getFirstDayOfWeek(c):r;c=d.getDay();return c==r?d:g.floorToDay(f.add(d,
"day",c>r?-c+r:-c+r-7),!0,h)},floor:function(d,h,f,k,c){k=g.floorToDay(d,k,c);switch(h){case "week":return g.floorToWeek(k,firstDayOfWeek,dateModule,locale);case "minute":k.setHours(d.getHours());k.setMinutes(Math.floor(d.getMinutes()/f)*f);break;case "hour":k.setHours(Math.floor(d.getHours()/f)*f)}return k},isStartOfDay:function(d,g,f){f=f||m;return 0==f.compare(this.floorToDay(d,!1,g),d)},isToday:function(d,g){g=g||Date;var f=new g;return d.getFullYear()==f.getFullYear()&&d.getMonth()==f.getMonth()&&
d.getDate()==f.getDate()},isOverlapping:function(d,g,f,h,c,b){if(null==g||null==h||null==f||null==c)return!1;d=d.dateModule;if(b){if(1==d.compare(g,c)||1==d.compare(h,f))return!1}else if(-1!=d.compare(g,c)||-1!=d.compare(h,f))return!1;return!0}};return g})},"webview/widget/InlineEditBox":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/text!./templates/InlineEditBox.html dijit/form/ValidationTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r){return h("webview/widget/InlineEditBox",[m,p,k],{templateString:r,value:"",maxLength:32,pattern:"*",disabled:!1,hideOnDisabled:!1,postCreate:function(){this.inherited(arguments);this._buildConnections();this.disabled&&(this.hideOnDisabled&&l.add(this.domNode,"hidden"),l.remove(this.valueText,"linkable"))},_buildConnections:function(){this.own(f(this.valueText,"click",g.hitch(this,function(){this.disabled||(l.remove(this.valueTextBox.domNode,"hidden"),l.add(this.valueText,
"hidden"),this.valueTextBox.focus())})));this.own(f(this.valueTextBox,"blur",g.hitch(this,function(){l.add(this.valueTextBox.domNode,"hidden");l.remove(this.valueText,"hidden");this.value=this.valueTextBox.get("value");d.set(this.valueText,"innerHTML",this.value)})))},_setDisabledAttr:function(c){this.inherited(arguments);this.disabled=c;l.toggle(this.valueText,"linkable",!c);this.hideOnDisabled&&l.toggle(this.domNode,"hidden",c)}})})},"webview/widget/dGridExtensions/dGridExcelExporterMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojox/html/entities dojo/on dojo/request/iframe".split(" "),
function(p,m,k,h,g,d,l,f){return m("webview/widget/dGridExtensions/dGridExcelExporterMixin",[],{_exportPath:"ExportExcel",_exportColumnStructure:null,connectExportButton:function(){this._enableExcelExportButton();this.own(l(this._toolbar,"excelExportClicked",k.hitch(this,this.exportGridAsExcel)));rc.session.enforceChangeApproval&&this._disableCSVExportButton()},exportGridAsExcel:function(){if(!this._grid.store)return exportDeferred.reject("Grid does not contain a store"),exportDeferred.promise;var d=
this._grid.store.query(this._grid.query,this.getGridQueryOptions(this._grid));d instanceof dojo.Deferred?d.then(k.hitch(this,this._exportExcel)):this._exportExcel(d)},_disableCSVExportButton:function(){this._toolbar.exportButton.set("disabled",!0);h.add(this._toolbar.exportButton.domNode,"hidden")},_enableExcelExportButton:function(){this._toolbar.excelButton.set("disabled",!1);h.remove(this._toolbar.excelButton.domNode,"hidden")},_exportExcel:function(g){f._currentDfd=null;f._fireNextRequest();f.post(this._exportPath,
{handleAs:"document",data:{documentName:this.fullTitle||this._toolbar.title||this.title,gridData:d.encode(JSON.stringify(this._parseGridData(g))),siteId:this.site}})},_parseGridData:function(d,c){for(var b=[],f="",g=[],h=this._getVisibleColumns(this._grid),a=Object.keys(h),l=0;l<a.length;++l){f=this._grid.column(h[a[l]]).label;if(null===f||void 0===f)f="";g.push(f)}b.push(g);p.forEach(d,k.hitch(this,this._parseVisibleGridData,b,a,h));return b},_parseVisibleGridData:function(d,c,b,f){tempStringArray=
[];var g=!1;"undefined"!==typeof f.name&&f.name===this.PlaceHolderName&&(g=!0);for(var h=0;h<=c.length;++h)formattedValue="",!g&&f.hasOwnProperty(c[h])&&(formattedValue=this.formatGridDataValue(f,c[h],b)),tempStringArray.push(formattedValue||"");d.push(tempStringArray)},formatGridDataValue:function(d,c,b){var f="";b=this._grid.columns[b[c]];return f="exporter"in b?b.exporter(d[c],d):"editor"in b?"logtype"===c?[this.webviewStrings.polled,this.webviewStrings.cov,this.webviewStrings.triggered][parseInt(d[c])]:
"increment"===c?1===d.logtype?d.increment:"":"interval"===c?0===d.logtype?d.interval:"":"enable"===c?d[c]?"TRUE":"FALSE":"useHalfFloat"===c?d[c]?"2":"4":d[c]:"renderCell"in b?b.renderCell(d,d[c],g.create("span")).innerText:"formatter"in b?b.formatter(d[c],d):d[c]}})})},"webview/widget/ColumnHider":function(){define("dgrid/util/misc dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/has dojo/i18n!dgrid/extensions/nls/columnHider dojo/on put-selector/put xstyle/css!dgrid/css/extensions/ColumnHider.css".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return k("webview/widget/ColumnHider",null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:f,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_activeGrid:null,_bodyListener:null,_renderHiderMenuEntries:function(){var b=this.subRows,c=!0,d,f,a,g;delete this._columnHiderFirstCheckbox;a=0;for(d=b.length;a<d;a++)for(g=0,f=b[a].length;g<f;g++){this._renderHiderMenuEntry(b[a][g]);var h=!0!==b[a][g].hidden&&!0!==b[a][g].unhidable;c&&h&&(c=!1,this._columnHiderFirstCheckbox=
this._columnHiderCheckboxes[b[a][g].id])}},_renderHiderMenuEntry:function(b){var f=b.id,g=p.escapeCssIdentifier(f,"-"),k,a,l;b.hidden&&(b.hidden=!1,this._hideColumn(f),b.hidden=!0);if(!b.unhidable){k=c("div.dgrid-hider-menu-row");a=this.domNode.id+"-hider-menu-check-"+g;var v=h.hitch(this,function(a){var b=!l.get("checked");l.set("checked",b);this.contentNode&&r.emit(this.hiderMenuNode,"columnChange",{columnId:a,isHide:!b})},f);this._listeners.push(r(k,"click",v));l=this._columnHiderCheckboxes[f]=
new m({value:g,onClick:v});c(k,l.domNode);d.create("label",{innerHTML:b.label||b.field||""},k,"last");l.id=a;c(this.hiderMenuNode,k);l.set("checked",!b.hidden)}},renderHeader:function(b){function d(a){a.stopPropagation()}if(b)return this.inherited(arguments);var f=this,g=this.hiderMenuNode,a=this.hiderToggleNode,h;this.inherited(arguments);if(g){for(h in this._columnHiderRules)this._columnHiderRules[h].remove();g.innerHTML=""}else a=this.hiderToggleNode=c(this.domNode,"button.ui-icon.dgrid-hider-toggle[type\x3dbutton][aria-label\x3d"+
this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(r(a,"click",function(a){f._toggleColumnHiderMenu(a)})),g=this.hiderMenuNode=c("div.dgrid-hider-menu[role\x3ddialog][aria-label\x3d"+this.i18nColumnHider.popupLabel+"]"),g.id=this.id+"-hider-menu",this._listeners.push(r(g,"keyup",function(b){27===(b.charCode||b.keyCode)&&(f._toggleColumnHiderMenu(b),a.focus())})),g.style.display="none",c(this.domNode,g),this._listeners.push(r(g,"columnChange",function(a){f._updateColumnHiddenState(a.columnId,
a.isHide)})),this._listeners.push(r(g,"mousedown",d),r(a,"mousedown",d)),this._bodyListener||(this._bodyListener=r.pausable(document,"mousedown",function(a){this._activeGrid&&this._activeGrid._toggleColumnHiderMenu(a)}),this._bodyListener.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);for(var b in this._columnHiderRules)this._columnHiderRules[b].remove()},getColumnHiderMenuState:function(){return this._hiderMenuOpened},
left:function(b,c){return this.right(b,-c)},right:function(b,c){b.element||(b=this.cell(b));for(var d=this.inherited(arguments),f=b;d.column.hidden;){d=this.inherited(arguments,[d,0<c?1:-1]);if(f.element===d.element)return b;f=d}return d},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_toggleColumnHiderMenu:function(b){var c=this._hiderMenuOpened,d=this.hiderMenuNode,f=this.domNode,a;b&&g.toggle(b.domNode||b,"open",!c);d.style.display=c?"none":"";c?d.style.height="":(d.offsetHeight>
f.offsetHeight-12&&(d.style.height=f.offsetHeight-12+"px"),(a=this._columnHiderFirstCheckbox.domNode)&&a.focus());this._bodyListener[c?"pause":"resume"]();this._activeGrid=c?null:this;this._hiderMenuOpened=!c},_hideColumn:function(b){var c="#"+p.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-";this._columnHiderRules[b]||(this._columnHiderRules[b]=p.addCssRule(c+p.escapeCssIdentifier(b,"-"),"display: none;"))},_showColumn:function(b){this._columnHiderRules[b]&&(this._columnHiderRules[b].remove(),
delete this._columnHiderRules[b])},_updateColumnHiddenState:function(b,c){this[c?"_hideColumn":"_showColumn"](b);this.columns[b].hidden=c;r.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[b],hidden:c,bubbles:!0});this.resize()},toggleColumnHiddenState:function(b,c){"undefined"===typeof c&&(c=!this._columnHiderRules[b]);this._updateColumnHiddenState(b,c);this._columnHiderCheckboxes[b].set("checked",!c)}})})},"webview/admin/worksheets/notificationClasses/NotificationClassesToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/text!./templates/NotificationClassesToolbar.html ../widgets/WorksheetToolbar webview/widget/ToolbarButton".split(" "),
function(p,m,k,h,g){return p("webview/admin/worksheets/notificationClasses/NotificationClassesToolbar",[g],{templateString:h,_buildButtonMap:function(){this._buttons={sendButton:this.sendButton,cancelButton:this.cancelButton}},_setupOnClicks:function(){this.own(k(this.excelButton.domNode,"click",m.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),k(this.sendButton.domNode,"click",m.hitch(this,function(){if(!this.sendButton.get("disabled"))this.onSend()})),k(this.cancelButton.domNode,
"click",m.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancel()})),k(this.exportButton.domNode,"click",m.hitch(this,function(){if(!this.exportButton.get("disabled"))this.onExport()})))}})})},"webview/admin/worksheets/widgets/WorksheetToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../../nls/all dojo/i18n!../../../nls/worksheets dojo/on ../../_Widget ../../../widget/IconButton ../../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f){return p("webview/admin/worksheets/widgets/WorksheetToolbar",[f],{rcStrings:h,webviewStrings:g,worksheetStrings:d,_buttons:null,postCreate:function(){this.inherited(arguments);this._setupOnClicks();this._buildButtonMap()},clearDirty:function(){k.remove(this.sendButton.toolbarButtonIcon,"dirty")},getButton:function(d){return this._buttons[d]},getPageButtons:function(){return this._buttons},makeDirty:function(){k.add(this.sendButton.toolbarButtonIcon,"dirty")},onAdd:function(){l.emit(this,
"add")},onCancel:function(){l.emit(this,"cancel")},onDelete:function(){l.emit(this,"delete")},onEdit:function(){l.emit(this,"edit");this.editButton.tooltip.close()},onExcelExportClicked:function(){l.emit(this,"excelExportClicked")},onExport:function(){l.emit(this,"export")},onToggleColumns:function(d){l.emit(this,"toggleColumns",d)},onSend:function(){l.emit(this,"send")},setTitle:function(d){},_buildButtonMap:function(){this._buttons={sendButton:this.sendButton,cancelButton:this.cancelButton,editButton:this.editButton,
exportButton:this.exportButton,excelExport:this.excelButton,toggleButton:this.toggleButton,addButton:this.addButton,deleteButton:this.deleteButton}},_setupOnClicks:function(){this.own(l(this.excelButton.domNode,"click",m.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),l(this.sendButton.domNode,"click",m.hitch(this,function(){if(!this.sendButton.get("disabled"))this.onSend()})),l(this.cancelButton.domNode,"click",m.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancel()})),
l(this.addButton.domNode,"click",m.hitch(this,function(){if(!this.addButton.get("disabled"))this.onAdd()})),l(this.deleteButton.domNode,"click",m.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onDelete()})),l(this.editButton.domNode,"click",m.hitch(this,function(){if(!this.editButton.get("disabled"))this.onEdit()})),l(this.toggleButton.domNode,"click",m.hitch(this,function(d){if(!this.toggleButton.get("disabled"))this.onToggleColumns(d)})),l(this.exportButton.domNode,"click",m.hitch(this,
function(){if(!this.exportButton.get("disabled"))this.onExport()})))}})})},"webview/admin/worksheets/programs/ProgramsWorksheet":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/Textarea dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!../../../nls/all dojo/i18n!../../../nls/worksheets dojo/json dojo/number dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/string dojo/text!./templates/ProgramsWorksheet.html dojo/topic ../../AdminWorksheetBase ../../../sys/job ../../../util/AlarmUtil ../../../widget/ColumnHider ../../../widget/dGridExtensions/ColumnReorder ./ProgramsWorksheetToolbar ../../widget/AdminToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O){return t("webview/admin/worksheets/programs/ProgramsWorksheet",[H],{dataTypeName:z.programs,identityProperty:"instance",MAX_NAME_LENGTH:32,templateString:I,TimerEnums:{enabled:"true",disabled:"false","true":"enabled","false":"disabled"},widgetName:z.programs,widgetNameKey:"programs",worksheetStrings:y,_autoManualStore:null,_columnStructure:null,_firstLoad:!0,_pollForStatusTimer:null,_programBaseURL:"",_timerStore:null,
_isThirdParty:0,postCreate:function(){this.inherited(arguments);if(rc.session._attributes.permittedSystems.find(q.hitch(this,function(a){return a.id===Number(this.system)})))q.mixin(this.ErrorMessageMap,{509:this.errorStrings.cannotCreateProgram,512:this.errorStrings.cannotDeleteProgram,520:this.errorStrings.cannotCreateProgram+". "+G.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH.toString()])+"."}),this._setCanEditFlag(),this._getTitle(),J.loadForAdmin(this.system).then(q.hitch(this,
function(a){this._setAlarmContext();this._isPyramid=J.isPyramid(this.device+"DEV"+this.device);this._isThirdParty=J.isThirdParty(this.device+"DEV"+this.device);this._buildColumnStructure();this._toolbar.sendButton.set("disabled",!0);this._setProgramBaseURL();J.isSSC(this.device+"DEV"+this.device)&&v.add(this.dbRemaining,"hidden");this._fetch().then(q.hitch(this,this._parseFetch),q.hitch(this,this._onInitError));this._intervalTime=500}));else{if(0<rc.session._attributes.SiteMapArray.length)var a=rc.session._attributes.SiteMapArray[0].systems.find(q.hitch(this,
function(a){return a.systemId===Number(this.system)}));this._throwFullscreenError({name:this.rcStrings.permissionDenied,message:G.substitute(this.errorStrings.systemAccessError,[a?a.systemName:this.system]),suggestion:"",e:null})}rc.session.hasRole(rc.session.roles2.programsWorksheet,!0)||v.add(this._toolbar.addButton.domNode,"disabled")},getPathForFetch:function(){return"ProgramsWorksheet/"},headerIconClass:function(){return"rcProgramsWorksheetHeaderIcon"},resize:function(){this.inherited(arguments);
if(this._adminTopContent){var a=this._adminTopContent.clientWidth,a=a-this._contentHeaderIcon.clientWidth;w.set(this._contentHeaderTitle,"width",a-50+"px")}},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_addToolbarListeners:function(){this.own(C(this._toolbar,"add",q.hitch(this,this._addDialog,this.worksheetStrings.createProgram,this.MAX_NAME_LENGTH)),C(this._toolbar,"cancel",q.hitch(this,this._revertChanges)),C(this._toolbar,"delete",q.hitch(this,this._removeProgram)),C(this._toolbar,
"edit",q.hitch(this,this._editProgram)),C(this._toolbar,"export",q.hitch(this,this._export)),C(this._toolbar,"send",q.hitch(this,this._sendChanges)),C(this._toolbar,"toggleColumns",q.hitch(this,this._positionAndShowColumnToggle)))},_buildAuditLogContextFilter:function(a){var b=[this.device+"PRG%"];a.forEach(q.hitch(this,function(a){a.mne&&(a=a.mne.split("PRG"),0<a.length&&a[0]!==this.device&&b.push(this.device+"PRG"+a[1]))}));this._buildAuditLogContext(b)},_buildColumnStructure:function(){this._columnStructure=
[g({selectorType:q.hitch(this,this._createSelectorCheckbox),id:"selectorCol",field:"mne",label:"",hidden:!rc.session.hasRole(rc.session.roles2.programsWorksheet,!0),unhidable:!0,sortable:!1,exporter:function(){return""}}),{id:"instanceCol",field:"instance",label:this.worksheetStrings.instance,sortable:!0,renderCell:q.hitch(this,this._buildProgramLinkCell)},m({editor:r,editOn:"click",label:this.webviewStrings.name,field:"name",id:"nameCol",className:"colourlessLink",sortable:!0,canEdit:q.hitch(this,
this._canEditRow),editorArgs:{baseClass:"rcTextBox",maxLength:this._isThirdParty?64:32},formatter:q.hitch(this,this._hideCellDataForEditor)}),m({editor:d,id:"runCol",field:"run",label:this.worksheetStrings.run,className:this._canEnableDisable?"colourlesslink":"",canEdit:q.hitch(this,this._checkCanEnableDisable),simplePrint:!0,editorArgs:{disabled:!1===this._canEnableDisable||1===this._isThirdParty,value:!0},formatter:q.hitch(this,this._hideCellDataForEditor)}),m({editor:l,editOn:"click",id:"autoManualCol",
field:"autoManual",label:this.rcStrings.autoManual,className:this._canEdit?"colourlessLink":"",sortable:!0,editorArgs:{store:this._autoManualStore,baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!1,queryExpr:"*${0}*"},canEdit:q.hitch(this,this._canEditRow),formatter:q.hitch(this,this.formatAutoManualCell),exporter:q.hitch(this,this.formatAutoManualCell)}),this._isPyramid?m({editor:l,editOn:"click",id:"timerCol",field:"timer",label:this.worksheetStrings.timer,className:this._canEdit?"colourlessLink":
"",editorArgs:{store:this._timerStore,baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!1},canEdit:q.hitch(this,this._canEditRow),formatter:q.hitch(this,this.formatTimerCell)}):null,this._isPyramid?m({editor:r,editOn:"click",id:"timeCol",field:"time",label:this.worksheetStrings.timeInterval,sortable:!0,className:this._canEdit?"colourlessLink":"",canEdit:q.hitch(this,this._canEditRow),editorArgs:{baseClass:"rcTextBox",maxLength:7,pattern:"^(?:\\d+:)*?\\d+$"}}):null,this._isPyramid?m({editor:r,
editOn:"click",id:"timeRemainingCol",field:"timeRemaining",label:this.worksheetStrings.timeRemaining,sortable:!0,className:this._canEdit?"colourlessLink":"",canEdit:q.hitch(this,this._canEditRow),editorArgs:{baseClass:"rcTextBox",maxLength:7,pattern:"^(?:\\d+:)*?\\d+$"}}):null,this._isThirdParty?null:{id:"sizeCol",field:"size",label:this.worksheetStrings.size,sortable:!0,formatter:q.hitch(this,this._hideCellDataForEditor)},{id:"exitCol",field:"exit",label:this.worksheetStrings.exit,sortable:!0,formatter:q.hitch(this,
this.formatBooleanCell)},m({editor:f,editOn:"none",id:"descriptionCol",field:"description",label:this.rcStrings.description,sortable:!0,renderCell:q.hitch(this,this._buildDescriptionCell)})].filter(function(a){return null!==a})},_buildGrid:function(){null===this._grid&&(this._grid=new (t([p,k,N,O,h,g]))({allowSelect:q.hitch(this,this.allowSelect),columns:this._columnStructure,deselectOnRefresh:!1,keepScrollPosition:!0,maxRowsPerPage:256,maxEmptySpace:10,minRowsPerPage:128,noDataMessage:this._getLoadingString(),
selectionMode:"none",sort:[{attribute:"instance",descending:!1}],store:this._gridStore},this.gridNode),this._grid.startup(),this._connectGrid(),this._toggleButtons())},_buildProgramLinkCell:function(a,b,c){var d=x.create("div",null,c,"only");if(a.name!==this.PlaceholderName){var f=this._programBaseURL;!1===/#\d+PRG/i.test(this._programBaseURL)&&(f+="\x26mne\x3d");f=this.getObfuscatedHash(f+b);d=x.create("div",{"class":"instance-container"},c,"only");rc.session.hasRole(rc.session.roles2.accessPrograms,
!0)?x.create("a",{"class":"linkable",href:f,innerHTML:b,title:G.substitute(this.rcStrings.gotoX,[a.name])},d,"first"):x.create("a",{innerHTML:b,title:G.substitute(this.rcStrings.gotoX,[a.name])},d,"first")}return d},_canEditDescription:function(a){return this._canEdit},_checkCanEnableDisable:function(a){return this._canEnableDisable&&a.name!==this.PlaceholderName},_checkValueChange:function(a,b,c){var d=!1;switch(c){case "autoManual":d=Number(b)!==a;break;default:d=b!==a}return d},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},
_connectGrid:function(){this.inherited(arguments);this.own(C(this._grid,"dgrid-select, dgrid-deselect",q.hitch(this,this._onSelectionChange)),C(this._grid,"dgrid-datachange",q.hitch(this,function(a){this.defer(q.hitch(this,this._toggleSendButton,a))})))},_createStores:function(){this.inherited(arguments);this._autoManualStore=new F({data:[{id:this.AutoManualEnums.auto,name:this.rcStrings.auto},{id:this.AutoManualEnums.manual,name:this.rcStrings.manual}]});this._timerStore=new F({data:[{id:this.TimerEnums.enabled,
name:this.webviewStrings.enabledLabel},{id:this.TimerEnums.disabled,name:this.webviewStrings.disabledLabel}]})},_deleteProgram:function(a){var c=new u,d=this.getPathForFetch(),f={siteId:this.site,systemId:this.system,device:this.device,instances:a};this._validateApprovalSessionWithReason(f).then(q.hitch(this,function(){E.del(d,{handleAs:"json",data:f}).then(q.hitch(this,function(d){d&&200===d.errStatus?(b.forEach(a,q.hitch(this,function(a){null!==a&&this._grid.store.remove(a)})),this._displayError(d),
c.resolve(),this._revertChanges()):c.reject(d.instances)}),q.hitch(this,function(b){L.publish("sticky",{type:"error",message:this.errorStrings.unexpectedError});console.error(this.declaredClass+" - _deleteProgram(): Could not delete program(s)",a,b);c.reject()}))}),function(){});return c.promise},_editProgram:function(){var a=this._getFirstSelectedRow(),b=this._programBaseURL;!1===/#\d+PRG/i.test(this._programBaseURL)&&(b+="\x26mne\x3d");b+=a.instance;b=this.getObfuscatedHash(b);window.location.hash=
b},_export:function(){this.exportToCSV(this._grid,"programs.csv",this.widgetName)},_fetch:function(a){this._clearFetchTimeout();var b=this.getPathForFetch();return E.get(b,{handleAs:"json",query:{systemId:this.system,device:this.device,forceReload:a?a:!1},preventCache:!0})},_getConstantHeights:function(){-1===this._constantHeights&&(this._constantHeights=0,a.byId("rcAdminContentHeader")&&(this._constantHeights=w.get("rcAdminContentHeader","height"),this._constantHeights+=w.get("rcAdminContentHeader",
"paddingTop")),this._constantHeights+=w.get(this.buttonBar.domNode,"height"),this._constantHeights+=w.get(this.buttonBar.domNode,"marginTop"),this._constantHeights+=w.get(this.buttonBar.domNode,"marginBottom"),this._constantHeights+=w.get(this._grid.headerNode,"paddingBottom"),this._constantHeights+=2*w.get(this._grid.domNode,"marginTop"),this._constantHeights+=2*w.get(this._grid.domNode,"borderWidth"),this._constantHeights+=w.get(this.dbRemaining,"height"));return this._constantHeights},_getRowIdentifier:function(a){return a.instance},
_onSelectionChange:function(a){var d="dgrid-select"===a.type,f=null,g=null;b.forEach(a.rows,q.hitch(this,function(a){f=D(".dijitCheckBox",a.element)[0];g=c.byNode(f);g.set("checked",d)}));a=Object.keys(this._grid.selection).filter(q.hitch(this,function(a){return this._grid.selection[a]}));this._toolbar.set("isSelectAll",a.length!==this._grid.store.data.filter(q.hitch(this,function(a){return this._canAccessRow(a)})).length);a=0<a.filter(q.hitch(this,function(a){return this._canEditRow(this._grid.store.get(a))})).length;
this._toolbar.deleteButton.set("disabled",!a)},_setTitle:function(a){this.inherited(arguments);this._contentHeaderTitle&&n.set(this._contentHeaderTitle,{innerHTML:a})},_parseFetch:function(a){a.errStatus===this.SuccessCode?(this._buildAuditLogContextFilter(a.data),this._gridStore.setData(a.data),this._setDatabaseRemaining(a.dbBytesRemaining,a.dbPercentRemaining,a.cbasBytesRemaining,a.cbasPercentRemaining),a.initialLoad&&this._firstLoad&&(this._intervalTime=5E3,this.onInitSuccess(),this._buildGrid(),
this._resizeGrid(),this._firstLoad=!1,this._grid.set("noDataMessage",z.noResultsFound)),this._setFetchTimeout(),this._refreshGridInPlace()):(a=this.safeError(a,{message:this._getErrorMessage(a.errStatus,a.errMSG)}),this.onInitError(a))},_performAdd:function(a){var b=this._worksheetItemInUse(a);if(b.inUse)L.publish("sticky",{message:b.message,type:"error"});else{var c=this.getPathForFetch(),d={siteId:this.site,systemId:this.system,device:this.device,instance:a.specificInstance,name:a.name};this._validateApprovalSessionWithReason(d).then(q.hitch(this,
function(){E.post(c,{handleAs:"json",data:d}).then(q.hitch(this,function(a){a&&200===a.errStatus&&this._revertChanges();this._displayError(a)}),q.hitch(this,function(a){L.publish("sticky",{message:this.errorStrings.unexpectedError,type:"error"});console.error(this.declaredClass+" - _performAdd(): Error Adding Program",a)}))}),function(){})}},_performDelete:function(){var a=[],b=this._grid.selection,c;for(c in b)a.push(Number(c));this._deleteProgram(a).otherwise(q.hitch(this,function(a){for(var b=
this.errorStrings.cannotDeleteProgram,c=0;c<a.length;c++)b+="\x3cbr /\x3e"+this._grid.store.get(a[c]).name;L.publish("sticky",{message:b,type:"error"})}))},_removeProgram:function(){if(!this._canEdit)return!1;var a=[],b=this._grid.selection,c;for(c in b)b[c]&&a.push(c);this._confirmDelete(a,this.worksheetStrings.confirmDeletePrograms)},_resizeGrid:function(){this.inherited(arguments);if(null!==this._grid){var a=w.get(this.domNode.parentElement,"height"),a=a-this._getConstantHeights();w.set(this._grid.domNode,
"height",a+"px")}},_revertChanges:function(){this.inherited(arguments);this._toolbar.sendButton.set("disabled",!0)},_sendChanges:function(){var a=Object.keys(this._grid.dirty).map(q.hitch(this,function(a){return q.mixin(this._gridStore.get(a),this._grid.dirty[a])})),b=this.getPathForFetch(),c={siteId:this.site,programs:A.stringify(a),systemId:this.system,device:this.device};this._validateApprovalSessionWithReason(c).then(q.hitch(this,function(){this._grid.save();E.put(b,{handleAs:"json",data:c}).then(q.hitch(this,
function(a){510===a.errStatus?(this._processId=a.processId,this._pollForStatus(this.getPathForFetch())):(this._displayError(a),a.errStatus===this.SuccessCode&&this._revertChanges())}))}),function(){})},_pollForStatus:function(a){this._clearPollingTimer();this._pollForStatusTimer=setTimeout(q.hitch(this,function(){E.get(a+"/status",{handleAs:"json",query:{processId:this._processId||-1,abort:0},preventCache:!0}).then(q.hitch(this,function(a){510===a.errStatus?(this._processId=a.processId,this._pollForStatus(this.getPathForFetch())):
(this._displayError(a),a.errStatus===this.SuccessCode&&this._revertChanges())}))}),500)},_setAlarmContext:function(){K.setAlarmContextForBACnetDevice(this.system,this.device)},_setCanEditFlag:function(){this._canEdit=rc.session.hasRole(rc.session.roles2.programsWorksheet,!0);this._canEnableDisable=rc.session.hasRole(rc.session.roles2.enableDisablePrograms,!0)},_setDatabaseRemaining:function(a,b,c,d){null!==c?n.set(this.dbRemaining,"innerHTML",G.substitute(this.worksheetStrings.cbasdbRemaining,[B.format(a),
b,B.format(c),d])):n.set(this.dbRemaining,"innerHTML",G.substitute(this.worksheetStrings.databaseRemaining,[B.format(a),b]))},_setProgramBaseURL:function(){var a=this.getUnobfuscatedHash(window.location.hash);/#\d+prgs/i.test(a)?this._programBaseURL=a.substring(0,a.length-1):this._programBaseURL=a.replace(/#.+\?/,"#program?").replace(/&mne=.+(?:&.+)?$/i,"")},_toggleButtons:function(){var a=this.inherited(arguments),b=this._getFirstSelectedRow(),b=!this._canEdit||"undefined"===typeof b;"undefined"!==
typeof this._toolbar.deleteButton&&this._toolbar.deleteButton.set("disabled",b);"undefined"!==typeof this._toolbar.editButton&&(1!==a&&(b=!0),this._toolbar.editButton.set("disabled",b))},_toggleSendButton:function(a){var b=this._gridStore.get(a.rowId),c=a.cell.column.field;if(!0===this._checkValueChange(b[c],a.value,c))this._toolbar.sendButton.set("disabled",!1),this.makeDirty();else{var d=this._grid.dirty;if(1===Object.keys(d).length&&"undefined"!==typeof d[a.rowId]){a=d[a.rowId];var d=!1,f;for(f in a)if(f!==
c&&a[f]!==b[f]){d=!0;break}!1===d&&(this._grid.revert(),this._toolbar.sendButton.set("disabled",!0),this.makeClean())}else"undefined"!==typeof d[a.rowId]&&(delete this._grid.dirty[a.rowId][c],0===Object.keys(this._grid.dirty[a.rowId]).length&&delete this._grid.dirty[a.rowId])}},destroy:function(){this.inherited(arguments);this._adminTopContent&&x.destroy(this._adminTopContent)},_updateGrid:function(a){this._buildAuditLogContextFilter(a.data);this._gridStore.setData(a.data);this._setDatabaseRemaining(a.dbBytesRemaining,
a.dbPercentRemaining,a.cbasBytesRemaining,a.cbasPercentRemaining);a.initialLoad&&this._firstLoad&&(this._buildGrid(),this._resizeGrid(),this._grid.set("noDataMessage",z.noResultsFound))}})})},"webview/widget/dGridExtensions/ColumnReorder":function(){define(["dgrid/extensions/ColumnReorder","dojo/_base/declare"],function(p,m){return m("webview/widget/dGridExtensions/ColumnReorder",[p],{constructor:function(){this.columnDndConstructor=m(this.columnDndConstructor,{_legalMouseDown:function(k){return null==
this.grid._activeCell&&this.inherited(arguments)}})}})})},"webview/admin/worksheets/programs/ProgramsWorksheetToolbar":function(){define(["dojo/_base/declare","dojo/text!./templates/ProgramsWorksheetToolbar.html","../widgets/WorksheetToolbar"],function(p,m,k){return p("webview/admin/worksheets/programs/ProgramsWorksheetToolbar",[k],{templateString:m})})},"webview/admin/worksheets/remoteAlarms/RemoteAlarmNotifications":function(){define("dgrid/Grid dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/editor dgrid/Keyboard dgrid/OnDemandGrid dgrid/Selection dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom dojo/dom-construct dojo/dom-style dojo/i18n!../../../nls/all dojo/i18n!../../../nls/panelfiles dojo/i18n!../../../nls/remoteAlarmNotifications dojo/io-query dojo/json dojo/on dojo/promise/all dojo/query dojo/store/Cache dojo/store/JsonRest dojo/store/Memory dojo/store/Observable dojo/string dojo/topic dojo/text!./templates/RemoteAlarmNotifications.html require rc/_base/util ./AlarmTypeSelector ../widgets/DaySelectionDialog ../widgets/SystemSelectionDialog ../../AdminWorksheetBase ../../worksheets/widgets/SelectRecipientsDialog ../../../util/dateUtils ../../../widget/ColumnHider ../../../widget/UserInErrorTag ../../../widget/WarningDialog ../../../widget/WarningDialogEnums ../../../xhrEnhanced dijit/form/FilteringSelect ./RemoteAlarmsToolbar ../../widget/AdminToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R,V,Q,X,Z){return c("webview/admin/worksheets/remoteAlarms/RemoteAlarmNotifications",[P],{remoteAlarmStrings:w,templateString:H,webviewStrings:v,_alarmTypeStore:null,_bitsInMaxDayString:8,_confirmDeleteDialog:null,_dayLabels:W.getBACnetDayLabelMap("abbr"),_daySelectionDialog:null,_systemSelectionDialog:null,_destinationTypeMap:{user:0,role:1,email:2},_dialogs:[],_everyDayBitString:254,_filterObject:{destinations:null,
systemsAssigned:null},_selectRecipientsDialog:null,_systemStore:null,_systemFilterStore:null,_updateDfd:null,_userFilterStore:null,constructor:function(){b.mixin(this.ErrorMessageMap,{518:this.remoteAlarmStrings.noAccessToSystems,519:this.remoteAlarmStrings.noEmailAddress})},postCreate:function(){this.inherited(arguments);this._buildColumnStructure();B({userFilterData:this._fetchFilterData(this.getPathForUserFilterData()),systemFilterData:this._fetchFilterData(this.getPathForSystemFilterData()),alarmTypeData:this._fetchFilterData(this.getPathForAlarmTypeData()),
systems:this._fetchFilterData("systems")}).then(b.hitch(this,function(a){this._setAlarmTypeData(a.alarmTypeData);this._setFilterData(a);this._createFilters();this._systemStore.setData(a.systems.dataArray);this.onInitSuccess();this._buildGrid()}));this._getSitePromise.then(b.hitch(this,this._missingFieldsWarning))},connectExportButton:function(){},getPathForAdd:function(){return"AlarmNotification/Rules"},getPathForFetch:function(){return"AlarmNotification/Rules"},getPathForAlarmTypeData:function(){return"AlarmNotification/AlarmTypeData"},
getPathForSystemFilterData:function(){return"AlarmNotification/SystemFilterData"},getPathForUserFilterData:function(){return"AlarmNotification/UserFilterData"},_addToolbarListeners:function(){this.own(A(this._toolbar,"add",b.hitch(this,this._addNewRule)),A(this._toolbar,"delete",b.hitch(this,function(){this._showConfirmDeleteDialog().then(b.hitch(this,this._deleteSelected))})))},_addNewRule:function(){var a=Z.post("AlarmNotification/Rules",{handleAs:"json",preventCache:!0,data:{siteId:this.site}});
this.own(a);a.then(b.hitch(this,function(a){this._grid.refresh();this._displayError(a)}))},_applyFilter:function(a,b,c){var d;(d=a.get(c))?this._filterObject[b]=d:this._filterObject[b]=null;a=y.stringify(this._filterObject);null!==this._grid&&this._grid.set("query",{siteId:this.site,filter:a})},_buildColumnStructure:function(){this._columnStructure=[h({editor:N,editOn:"dgrid-cellfocusin",label:this.remoteAlarmStrings.alarmTypes,field:"alarmTypes",id:"alarmTypesCol",className:"colourlessLink",sortable:!1,
resizable:!0,editorArgs:{baseClass:"rcSelectBox",labelAttr:"label",sortByLabel:!1,store:this._alarmTypeStore},formatter:function(a){return a.map(function(a){return a.type+" - "+a.name}).join(", ")}}),{id:"daysCol",field:"days",label:this.webviewStrings.days,sortable:!1,resizable:!0,renderCell:b.hitch(this,this._buildDaySelectionEditor)},{id:"systemsCol",field:"systemsAssigned",label:this.webviewStrings.wvSystems,sortable:!1,resizable:!0,renderCell:b.hitch(this,this._buildSystemsAssignedCell)},{id:"usersCol",
field:"destinations",label:this.remoteAlarmStrings.recipients,sortable:!1,resizable:!0,renderCell:b.hitch(this,this._buildUsersCell)},h({editor:f,id:"htmlCol",field:"enableHTML",label:this.remoteAlarmStrings.htmlFormat,sortable:!0,resizable:!1,simplePrint:!0,editorArgs:{baseclass:"dijitCheckBox enabled-checkbox",value:!0},formatter:b.hitch(this,this._hideCellDataForEditor)})]},_buildDaySelectionEditor:function(a,c,d){c=this._getDaysFromBitString(c);return this.buildClippedCell(d,c,"",b.hitch(this,
this._showDaySelectorDialog,a))},_buildGrid:function(){null===this._grid&&(this._grid=new (c([p,d,R,m,k,l,g]))({columns:this._columnStructure,keepScrollPosition:!0,query:{siteId:this.site},selectionMode:"single",sort:[{attribute:"id",descending:!1}],store:this._gridStore},this.gridNode),this._grid.startup(),this._resizeGrid(),this._connectGrid())},_buildSystemsAssignedCell:function(a,c,d){if(a.allSystems)c=this.webviewStrings.all;else switch(c.length){case 0:c="-";break;case 1:c=this._systemStore.get(c[0]).name;
break;default:c=c.length+" "+this.webviewStrings.wvSystems}return this.buildClippedCell(d,"\x3cspan class\x3d'count-text'\x3e"+c+"\x3c/span\x3e",c,b.hitch(this,this._showSystemSelectorDialog,a))},_buildTitle:function(){},_buildUsersCell:function(c,d,f){f=this.buildClippedCell(f,"","",b.hitch(this,this._showSelectRecipientsDialog,c));var g=C(".clipped-data-text",f);g&&g.length&&(c=this._getUserTags(d,c.id),a.place(c,g[0]));return f},_checkAlarmTypes:function(a,b){var c=!1;b.value=b.value.map(function(a){delete a.label;
return a});if(a.alarmTypes.length!==b.value.length)a.alarmTypes=b.value,c=!0;else for(var d=a.alarmTypes.map(function(a){return a.type}).sort(),f=b.value.map(function(a){return a.type}).sort(),g=0;g<d.length;++g)if(d[g]!==f[g]){a.alarmTypes=b.value;c=!0;break}return c},_connectGrid:function(){this.own(A(this._grid,["dgrid-select","dgrid-deselect"],b.hitch(this,this._toggleButtons)),A(this._grid,["dgrid-datachange"],b.hitch(this,this._saveIfDirty)))},_createButtons:function(){a.place(this.recipientFilters,
this.buttonBar.buttonsContainer);this.inherited(arguments)},_createFilters:function(){this.userFilter.set({labelAttr:"displayName",queryExpr:"*${0}*",searchAttr:"displayName",store:this._userFilterStore});this.systemsFilter.set({queryExpr:"*${0}*",store:this._systemFilterStore});this.own(A(this.userFilter,"change",b.hitch(this,this._applyFilter,this._userFilterStore,"destinations")),A(this.systemsFilter,"change",b.hitch(this,this._applyFilter,this._systemFilterStore,"systemsAssigned")))},_createSelectRecipientsDialog:function(a){this._selectRecipientsDialog||
(this._selectRecipientsDialog=new S({title:this.remoteAlarmStrings.selectedRecipients,site:this.site}),this.own(A(this._selectRecipientsDialog,"valueChange",b.hitch(this,this.makeDirty)),A(this._selectRecipientsDialog,"hide",b.hitch(this,this.makeClean))),this._dialogs.push(this._selectRecipientsDialog))},_createStores:function(){this._remoteStore=new E({target:this.getPathForFetch(),idProperty:"id"});this._localStore=new F({idProperty:"id"});this._gridStore=new G(new D(this._remoteStore,this._localStore));
this._alarmTypeStore=new F({idProperty:"type"});this._systemStore=new F;this._userFilterStore=new G(new F({idProperty:"index"}));this._systemFilterStore=new G(new F)},_deleteSelected:function(){var a=Number(Object.keys(this._grid.selection)[0]);isNaN(a)||(a=this._grid.store.remove(a),this.own(a),a.then(b.hitch(this,function(a){a&&this._grid.refresh()})))},_missingFieldsWarning:function(){var a=null,b=K.getWindowLocationOrigin()+rc.rootPath+"Admin/#site?site\x3d"+this.site;this.baseUrl||this.smtp?
this.baseUrl?this.smtp||(a=I.substitute(this.webviewStrings.setupSMTPPrompt,{siteLinkURL:b})):a=I.substitute(this.webviewStrings.setupBaseUrlPrompt,{siteLinkURL:b}):a=I.substitute(this.webviewStrings.setupURLSMTPPrompt,{siteLinkURL:b});a&&L.publish("sticky",{type:"warning",message:a})},_fetch:function(){var a=this.getPathForFetch(),a=Z.get(a,{handleAs:"json",preventCache:!0,query:{siteId:this.site}});this.own(a);return a},_fetchDeviceName:function(){var a=new q;a.resolve();return a.promise},_fetchFilterData:function(a){a=
Z.get(a,{handleAs:"json",preventCache:!0,query:{siteId:this.site}});this.own(a);return a},_getConstantHeights:function(){-1===this._constantHeights&&(this._constantHeights=0,u.byId("rcAdminContentHeader")&&(this._constantHeights=n.get("rcAdminContentHeader","height"),this._constantHeights+=n.get("rcAdminContentHeader","paddingTop")),this._constantHeights+=n.get(this.buttonBar.domNode,"height"),this._constantHeights+=n.get(this.buttonBar.domNode,"marginTop"),this._constantHeights+=n.get(this.buttonBar.domNode,
"marginBottom"),this._constantHeights+=n.get(this._grid.headerNode,"paddingBottom"),this._constantHeights+=2*n.get(this._grid.domNode,"marginTop"),this._constantHeights+=2*n.get(this._grid.domNode,"borderWidth"));return this._constantHeights},_getDaysFromBitString:function(a){var b=[],c;if(a!==this._everyDayBitString)for(var d=1;d<this._bitsInMaxDayString;++d)c=1<<d,(a&c)===c&&b.push(this._dayLabels[c]);else b=[x.everyDay];return b.length?b.reverse().join("/"):"-"},_getErrorMessageForRule:function(a){var c=
"",d=[];a.errors.forEach(b.hitch(this,function(a){"undefined"!==typeof this.ErrorMessageMap[a.errStatus]?d.push(this.ErrorMessageMap[a.errStatus]):d.push(a.errMSG)}));switch(a.type){case this._destinationTypeMap.user:c=this._getHashLinkForUser(a);break;case this._destinationTypeMap.role:c=this._getHashLinkForRole(a);break;default:return""}return c=I.substitute(d.join("  "),{displayName:a.displayName,hashLink:c})},_getHashLinkForRole:function(a){return"#roleLoginInfo?"+z.objectToQuery({site:this.site,
roleId:a.id})},_getHashLinkForUser:function(a){return"#Users/LoginInfo?"+z.objectToQuery({site:this.site,userID:a.displayName,ID:a.id})},_getUserTags:function(c,d){var f=a.create("span"),g;switch(c.length){case 0:g="-";break;case 1:g=c[0];g=0<g.errors.length&&g.errors[0].errorStatus===this.SuccessCode?"":g.displayName;break;default:g=c.length+" "+this.remoteAlarmStrings.recipients}a.create("span",{className:"count-text",innerHTML:g},f,"first");g=c.filter(b.hitch(this,function(a){return a.errors&&
a.errors.length&&a.errors.some(b.hitch(this,function(a){return a.errStatus!==this.SuccessCode}))}));if(g.length){var h=a.create("span",{className:"error-tags"},f,"last");r.forEach(g,b.hitch(this,function(c){c=new V({title:c.displayName,name:c.displayName,errorMessage:this._getErrorMessageForRule(c),value:c});a.place(c.domNode,h,"last");this.own(A(c,"clickRemove",b.hitch(this,this._removeDestination,d)))}))}return f},_removeDestination:function(a,b){var c=this._grid.store.get(a),d=b.value.type,f=b.value.id,
g=c.destinations.filter(function(a){return a.id!==f||a.type!==d});this._updateDestinations(c,g)},_resizeGrid:function(){this.inherited(arguments);if(null!==this._grid){var a=n.get(this.domNode.parentElement,"height"),a=a-this._getConstantHeights();n.set(this._grid.domNode,"height",a+"px")}},_saveIfDirty:function(a){var b=this._grid.store.get(a.rowId);if(b)switch(a.cell.column.field){case "alarmTypes":this._checkAlarmTypes(b,a)&&this._updateStore(b);break;case "enableHTML":b.enableHTML!==a.value&&
(b.enableHTML=!b.enableHTML,this._updateStore(b));break;case "days":case "destinations":case "systemsAssigned":break;default:console.error(this.declaredClass+" - _saveIfDirty(): Unknown updated property",a)}},_setAlarmTypeData:function(a){a.errStatus===this.SuccessCode&&(a=a.data.map(function(a){return{type:a.type,name:a.name,label:a.type+" - "+a.name}}),this._alarmTypeStore.setData(a))},_setCanEditFlag:function(){this._canEdit=rc.session.hasSystemsAdminRole()},_setFilterData:function(a){this._userFilterStore.setData(a.userFilterData.data);
this._systemFilterStore.setData(a.systemFilterData.data)},_showConfirmDeleteDialog:function(){var a=new q;null===this._confirmDeleteDialog&&(this._confirmDeleteDialog=new Q({title:this.webviewStrings.confirmDeleteAction,text:this.remoteAlarmStrings.confirmDeleteEmailAlarm,type:X.types.deleteCancel}));var c=this._confirmDeleteDialog.on("close",b.hitch(this,function(b){switch(b){case X.returnValues.oneOrYes:a.resolve();break;case X.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+
" - _showConfirmDeleteDialog(): Unknown choice",b),a.reject()}c.remove()}));this.own(c);this._confirmDeleteDialog.open();return a.promise},_showDaySelectorDialog:function(a){null===this._daySelectionDialog&&(this._daySelectionDialog=new O({title:this.webviewStrings.validDays,warningTitle:this.remoteAlarmStrings.noDaysSelected,warningContent:this.remoteAlarmStrings.confirmNoDays}),this.own(A(this._daySelectionDialog,"change",b.hitch(this,this.makeDirty)),A(this._daySelectionDialog,"hide",b.hitch(this,
this.makeClean))),this._dialogs.push(this._daySelectionDialog));this._daySelectionDialog.set({value:a.days});this._daySelectionDialog.show();a=t.after(this._daySelectionDialog,"execute",b.hitch(this,this._updateDaysSelected,a),!0);this.own(A.once(this._daySelectionDialog,"hide",b.hitch(this,a.remove)))},_showSystemSelectorDialog:function(a){var c=Z.get("systems",{handleAs:"json",preventCache:!0,query:{siteId:this.site}});this.own(c);c.then(b.hitch(this,function(c){c=c.dataArray.map(function(a){return{displayName:a.name,
id:a.id,uniqueId:a.id,errors:{errStatus:200},type:"system"}});null===this._systemSelectionDialog&&(this._systemSelectionDialog=new M({title:this.remoteAlarmStrings.systemSelectAlarm}));this._systemSelectionDialog.set({allSystems:c,systemsSelected:b.clone(a.systemsAssigned),allSystemsChecked:b.clone(a.allSystems)});this._systemSelectionDialog.show();c=t.after(this._systemSelectionDialog,"execute",b.hitch(this,this._updateSystemsSelected,a),!0);this.own(A.once(this._systemSelectionDialog,"hide",b.hitch(this,
c.remove)),A(this._systemSelectionDialog,"valueChange",b.hitch(this,this.makeDirty)),A(this._systemSelectionDialog,"hide",b.hitch(this,this.makeClean)));this._dialogs.push(this._systemSelectionDialog)}))},_showSelectRecipientsDialog:function(a){this._createSelectRecipientsDialog(a);this._selectRecipientsDialog.set({destinations:b.clone(a.destinations),systemsAssigned:b.clone(a.systemsAssigned)});this._selectRecipientsDialog.show();a=t.after(this._selectRecipientsDialog,"execute",b.hitch(this,this._updateDestinations,
a),!0);this.own(A.once(this._selectRecipientsDialog,"hide",b.hitch(this,a.remove)))},_toggleButtons:function(a){this._toolbar.deleteButton.set("disabled","dgrid-deselect"===a.type)},_updateDaysSelected:function(a,b){a.days!==b&&(a.days=b,this._updateStore(a))},_updateDestinations:function(a,b){var c=a.destinations.map(function(a){return a.uniqueId}),d=b.map(function(a){return a.uniqueId});K.arraysAreSame(c,d)||(a.destinations=b,this._updateStore(a))},_updateStore:function(a){null===this._updateDfd&&
(this._updateDfd=this._grid.store.put(a),this.own(this._updateDfd),this._updateDfd.then(b.hitch(this,function(a){this._updateDfd=null;this._displayError(a);B({userFilterData:this._fetchFilterData(this.getPathForUserFilterData()),systemFilterData:this._fetchFilterData(this.getPathForSystemFilterData())}).then(b.hitch(this,function(a){this._grid.revert();this._setFilterData(a)}))})))},_updateSystemsSelected:function(a){var b=this._systemSelectionDialog.get("systemsSelected"),c=this._systemSelectionDialog.get("allSystemsChecked");
K.arraysAreSame(a.systemsAssigned,b)&&a.allSystems===c||(a.systemsAssigned=b,a.allSystems=c,this._updateStore(a))},destroy:function(){r.forEach(this._dialogs,b.hitch(this,function(a){a.hide()}));this.inherited(arguments)}})})},"dgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/_base/lang dojo/has put-selector/put ./util/misc dojo/_base/Deferred dojo/_base/sniff".split(" "),function(p,m,k,h,g,d,l,f){function r(a){a.preventDefault()}var c={checkbox:1,radio:1,button:1},b=
/\bdgrid-cell\b/,t=/\bdgrid-row\b/,q=p(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=h.mixin({},q.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=h.mixin({},q.defaultHeaderKeyMap))},postCreate:function(){function a(a){var b=a.target;return b.type&&(!c[b.type]||32==a.keyCode)}function d(c){function d(){g._focusedHeaderNode&&(g._focusedHeaderNode.tabIndex=-1);if(g.showHeader){if(h)for(var a=0,b,c=g.headerNode.getElementsByTagName("th");b=
c[a];++a){if(n.test(b.className)){g._focusedHeaderNode=r=b;break}}else g._focusedHeaderNode=r=g.headerNode;r&&(r.tabIndex=g.tabIndex)}}var h=g.cellNavigation,n=h?b:t,q=c===g.headerNode,r=c;q?(d(),m.after(g,"renderHeader",d,!0)):m.after(g,"renderArray",function(a){return f.when(a,function(a){var b=g._focusedNode||r;if(n.test(b.className)&&l.contains(c,b))return a;for(var d=0,f=c.getElementsByTagName("*"),h;h=f[d];++d)if(n.test(h.className)){b=g._focusedNode=h;break}b.tabIndex=g.tabIndex;return a})});
g._listeners.push(k(c,"mousedown",function(b){a(b)||g._focusOnNode(b.target,q,b)}));g._listeners.push(k(c,"keydown",function(b){if(!b.metaKey&&!b.altKey){var c=g[q?"headerKeyMap":"keyMap"][b.keyCode];c&&!a(b)&&c.call(g,b)}}))}this.inherited(arguments);var g=this;this.tabableHeader&&(d(this.headerNode),k(this.headerNode,"dgrid-cellfocusin",function(){g.scrollTo({x:this.scrollLeft})}));d(this.contentNode);this._debouncedEnsureRowScroll=l.debounce(this._ensureRowScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);
var b=this,c=document.activeElement===this._focusedNode,d=this[this.cellNavigation?"cell":"row"](this._focusedNode),f=d.row||d,g;a=a.element||a;a===f.element&&((g=this.down(f,!0))&&g.element!==a||(g=this.up(f,!0)),this._removedFocus={active:c,rowId:f.id,columnId:d.column&&d.column.id,siblingId:g&&g.element!==a?g.id:void 0},setTimeout(function(){b._removedFocus&&b._restoreFocus(f.id)},0),this._focusedNode=null);this.inherited(arguments)},insertRow:function(a){var b=this.inherited(arguments);this._removedFocus&&
!this._removedFocus.wait&&this._restoreFocus(b);return b},_restoreFocus:function(a){var b=this._removedFocus,c;if((a=(a=a&&this.row(a))&&a.element&&a.id===b.rowId?a:"undefined"!==typeof b.siblingId&&this.row(b.siblingId))&&a.element){if(!a.element.parentNode.parentNode){b.wait=!0;return}"undefined"!==typeof b.columnId&&(c=this.cell(a,b.columnId))&&c.element&&(a=c);b.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(d(a.element,".dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=
a.element)}delete this._removedFocus},addKeyHandler:function(a,b,c){return m.after(this[c?"headerKeyMap":"keyMap"],a,b,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_focusOnNode:function(a,c,f){var l="_focused"+(c?"Header":"")+"Node",n=this[l],m=this.cellNavigation?"cell":"row",q=this[m](a),r,p,D,
u,E;if(a=q&&q.element){if(this.cellNavigation)for(r=a.getElementsByTagName("input"),E=0,D=r.length;E<D;E++)if(p=r[E],(-1!=p.tabIndex||"_dgridLastValue"in p)&&!p.disabled){8>g("ie")&&(p.style.position="relative");p.focus();8>g("ie")&&(p.style.position="");u=!0;break}null!==f&&(f=h.mixin({grid:this},f),f.type&&(f.parentType=f.type),f.bubbles||(f.bubbles=!0));n&&(d(n,"!dgrid-focus[!tabIndex]"),8>g("ie")&&(n.style.position=""),f&&(f[m]=this[m](n),k.emit(n,"dgrid-cellfocusout",f)));n=this[l]=a;f&&(f[m]=
q);l=this.cellNavigation?b:t;!u&&l.test(a.className)&&(8>g("ie")&&(a.style.position="relative"),a.tabIndex=this.tabIndex,a.focus());d(a,".dgrid-focus");f&&k.emit(n,"dgrid-cellfocusin",f);this.cellNavigation&&(this.columnSets||1<this.subRows.length)&&!c&&this._debouncedEnsureRowScroll(q.row.element)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){(a=a||this._focusedNode)?this._focusOnNode(a,!1):this.contentNode.focus()}}),u=q.moveFocusVertical=function(a,
b){var c=this.cellNavigation,d=this[c?"cell":"row"](a),d=c&&d.column.id,f=this.down(this._focusedNode,b,!0);c&&(f=this.cell(f,d));this._focusOnNode(f,!1,a);a.preventDefault()};p=q.moveFocusUp=function(a){u.call(this,a,-1)};var a=q.moveFocusDown=function(a){u.call(this,a,1)},n=q.moveFocusPageUp=function(a){u.call(this,a,-this.pageSkip)},v=q.moveFocusPageDown=function(a){u.call(this,a,this.pageSkip)},x=q.moveFocusHorizontal=function(a,b){if(this.cellNavigation){var c=!this.row(a);this._focusOnNode(this.right(this["_focused"+
(c?"Header":"")+"Node"],b),c,a);a.preventDefault()}},w=q.moveFocusLeft=function(a){x.call(this,a,-1)},z=q.moveFocusRight=function(a){x.call(this,a,1)},y=q.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a));a.preventDefault()},A=q.moveHeaderFocusHome=function(a){y.call(this,a,!0)},B=q.moveFocusEnd=function(a,b){var c=this,d=this.cellNavigation,k=this.contentNode,l=k.scrollTop+(b?0:k.scrollHeight),k=k[b?
"firstChild":"lastChild"],n=-1<k.className.indexOf("dgrid-preload"),q=n?k[(b?"next":"previous")+"Sibling"]:k,r=q.offsetTop+(b?0:q.offsetHeight),p;if(n){for(;q&&0>q.className.indexOf("dgrid-row");)q=q[(b?"next":"previous")+"Sibling"];if(!q)return}!n||1>k.offsetHeight?(d&&(q=this.cell(q,this.cell(a).column.id)),this._focusOnNode(q,!1,a)):(g("dom-addeventlistener")||(a=h.mixin({},a)),p=m.after(this,"renderArray",function(g){p.remove();return f.when(g,function(f){f=f[b?0:f.length-1];d&&(f=c.cell(f,c.cell(a).column.id));
c._focusOnNode(f,!1,a)})}));l===r&&a.preventDefault()},C=q.moveFocusHome=function(a){B.call(this,a,!0)};q.defaultKeyMap={32:r,33:n,34:v,35:B,36:C,37:w,38:p,39:z,40:a};q.defaultHeaderKeyMap={32:r,35:y,36:A,37:w,39:z};return q})},"webview/admin/worksheets/remoteAlarms/AlarmTypeSelector":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-attr","../../../widget/form/MultiSelector"],function(p,m,k,h,g){return m("webview/admin/worksheets/remoteAlarms/AlarmTypeSelector",
[g],{_getNewValueObject:function(d){return{label:d.type+" - "+d.name,value:d.type}}})})},"webview/widget/form/MultiSelector":function(){define("dijit/form/Select dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on ./DropDownMultiMenu ./MultiMenuItem".split(" "),function(p,m,k,h,g,d,l,f,r){return k("webview/widget/form/MultiSelector",[p],{baseClass:"rcSelectBox",multiple:!0,required:!0,_getValueAttr:function(){return this.dropDown.get("value")},_setValueAttr:function(c,
b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=c;else if(null!=c){c=h.isArrayLike(c)?m.map(c,this._getNewValueObject):h.isObject(c)?[c]:[{value:c}];c=m.filter(this.getOptions(c),function(b){return b&&void 0!==b.value&&null!==b.value});var d=this.getOptions()||[];this.multiple||c[0]&&c[0].value||!d.length||(c[0]=d[0]);m.forEach(d,function(b){b.selected=m.some(c,function(a){return a.value===b.value})});var f=m.map(c,function(b){return b.value});"undefined"===typeof f||0<
f.length&&"undefined"===typeof f[0]||(d=m.map(c,function(b){return b.label}),this._setDisplay(d),this.dropDown&&this.dropDown.set("value",c),this.defer(h.hitch(this,function(){this._handleOnChange([this.multiple?f:f[0],b]);this._updateSelection();g.set(this.valueNode,"value",this.get("value"));this._refreshState()})))}},isValid:function(){var c=this.get("value");return"undefined"!==typeof c[0]?!this.required||this._allItemsInStore(c):!this.required},refreshItems:function(){this.store&&this.store.query().forEach(h.hitch(this,
function(c){this._getMenuItemForOption(this._getNewValueObject(c))}))},_allItemsInStore:function(c){for(var b=0<c.length,d=0;d<c.length;++d)if("undefined"===typeof this.store.get(c[d].type)){b=!1;break}return b},_fillContent:function(){this.options||(this.options=[]);this.value?"string"===typeof this.value&&this._set("value",this.value.split(", ")):this._set("value",this._getValueFromOpts());this.dropDown=new f({id:this.id+"_menu",parentWidget:this});this.refreshItems();this.own(l(this.dropDown,"blur",
h.hitch(this,this._setValue)));d.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(c){c=new r({option:c,value:c.value,label:("text"===this.labelType?(c.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):c.label)||this.emptyLabel,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:c.disabled||!1});this.dropDown.addItemToMap(c);return c},_getNewValueObject:function(c){return{label:c.name,value:c.id}},_getValueFromOpts:function(){var c=
this.getOptions()||[];return c.length?m.map(m.filter(c,function(b){return b.selected}),function(b){return b.item})||[]:""},_setDisplay:function(c){c=("text"===this.labelType?(c||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):c)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline "'+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+c.join(", ")+"\x3c/span\x3e"},_setValue:function(){this.set("value",this.dropDown.get("value"))}})})},
"webview/widget/form/DropDownMultiMenu":function(){define(["dijit/form/Select","dojo/_base/declare"],function(p,m){return m("webview/widget/form/DropDownMultiMenu",[p._Menu],{_widgetMap:{},_getValueAttr:function(){return Object.values(this._widgetMap).filter(function(k){if("undefined"!==typeof k.checkboxNode)return k.checkboxNode.get("checked")}).map(function(k){return k.option.item})},_setValueAttr:function(k){this._removeSelection();for(var h=0;h<k.length;++h)"undefined"!==typeof this._widgetMap[k[h].value]&&
"undefined"!==typeof this._widgetMap[k[h].value].checkboxNode&&this._widgetMap[k[h].value].checkboxNode.set("checked",!0);this._set("value",k)},addItemToMap:function(k){this._widgetMap[k.value]=k},onItemClick:function(){},_removeSelection:function(){Object.values(this._widgetMap).forEach(function(k){"undefined"!==typeof k.checkboxNode&&k.checkboxNode.set("checked",!1)})},destroy:function(){this._widgetMap={};this.inherited(arguments)}})})},"webview/widget/form/MultiMenuItem":function(){define("dijit/MenuItem dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/on dojo/text!./templates/MultiMenuItem.html dijit/form/CheckBox".split(" "),
function(p,m,k,h,g,d,l){return k("webview/widget/form/MultiMenuItem",[p,m],{label:"",templateString:l,_setDisabledAttr:function(d){this.checkboxNode.set("disabled",d);this._set("disabled",d)},_setIconClassAttr:null,_setLabelAttr:function(d){this._set("label",d);var f="",c;c=d.search(/{\S}/);if(0<=c){var f=d.charAt(c+1),b=d.substr(0,c);d=d.substr(c+3);c=b+f+d;d=b+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+f+"\x3c/span\x3e"+d}else c=d;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);
this.labelNode.innerHTML=d;this._set("shortcutKey",f)},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"click",h.hitch(this,function(d){"td"===d.target.tagName.toLowerCase()&&this.checkboxNode.set("checked",!this.checkboxNode.get("checked"))})));g.set(this.labelNode,"for",this.checkboxNode.id)}})})},"webview/admin/worksheets/widgets/DaySelectionDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/text!./templates/DaySelectionDialog.html ../../../widget/WarningDialog ../../../widget/WarningDialogEnums dijit/form/Button ./DaySelector".split(" "),
function(p,m,k,h,g,d,l,f){return m("webview/admin/worksheets/widgets/DaySelectionDialog",p,{rcStrings:g,templateString:d,_confirmDialog:null,_minDayValue:2,_getValueAttr:function(){return this.daySelector.get("value")},_setValueAttr:function(d){this.daySelector.set({value:d});this._set("value",d)},_createConfirmDialog:function(d,c){null===c&&(c=new l({type:f.types.binaryConfirm,title:this.warningTitle,text:this.warningContent,closeButtonVisible:!1}));var b=c.on("close",k.hitch(this,function(c){switch(c){case f.returnValues.oneOrYes:d.resolve();
break;case f.returnValues.allOrNo:d.reject();break;default:console.error(this.declaredClass+" - _confirm(): Invalid Choice",c)}b.remove()}));this.own(b);c.open();return c},_onSubmit:function(){var d=new h;this.own(d);this.get("value")<this._minDayValue?this._createConfirmDialog(d,this._confirmDialog):d.resolve();d.then(k.hitch(this,function(){this.onExecute();this.execute(this.get("value"))}))}})})},"webview/admin/worksheets/widgets/SystemSelectionDialog":function(){define("dijit/ConfirmDialog dijit/focus dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!../../../nls/remoteAlarmNotifications dojo/on dojo/text!./templates/SystemSelectionDialog.html ../../../widget/WarningDialog ../../../widget/WarningDialogEnums dijit/form/Button dijit/form/CheckBox dijit/form/Form dijit/form/Select dijit/form/ValidationTextBox ../../widget/ListSelection ../../../widget/SearchByField".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return k("webview/admin/worksheets/widgets/SystemSelectionDialog",p,{allSystems:[],rcStrings:f,remoteAlarmNotificationsStrings:c,templateString:t,webviewString:r,_selectedSystems:[],_confirmDialog:null,_fetchTimeout:0,_successCode:200,postCreate:function(){this.inherited(arguments);this._setupOnClicks()},_getAllSystemsCheckedAttr:function(){return this.allSystemsCheck.get("checked")},_setAllSystemsCheckedAttr:function(a){this.allSystemsCheck.set("checked",a)},
_getSystemsSelectedAttr:function(){return this.listSelection.get("selection").map(function(a){return a.id})},_setSystemsSelectedAttr:function(a){var b=[],c=this.allSystems.filter(function(c){for(var d=0;d<a.length;d++)if(c.id===a[d])return b.push(c),!1;return!0});this._selectedSystems=b;this.listSelection.reset(this._selectedSystems);this.listSelection.set("leftGridContent",c,"system")},hide:function(){this.inherited(arguments);l.remove(document.body,"list-selection-avatar");this.textSearchField.searchBox.value=
""},show:function(){this.inherited(arguments);l.add(document.body,"list-selection-avatar")},_disableListSelection:function(){var a=this.allSystemsCheck.get("checked");this.listSelection.toggleDisabled(a);this.textSearchField.set("disabled",a);this.textSearchField.searchBox.value="";this._filterSystems(this.textSearchField.searchBox.value)},_filterSystems:function(a){var b=this._selectedSystems;a=a.toLowerCase();var c=this.allSystems.filter(function(c){if(!c.displayName.toLowerCase().includes(a))return!1;
for(var d=0;d<b.length;d++)if(c.id===b[d].id)return!1;return!0});this.listSelection.set("leftGridContent",c,"system")},_createConfirmDialog:function(a,b){null===b&&(b=new q({type:u.types.binaryConfirm,title:this.remoteAlarmNotificationsStrings.noSystemsSelected,text:this.remoteAlarmNotificationsStrings.systemNoSystemsWarning,closeButtonVisible:!1}));var c=b.on("close",h.hitch(this,function(b){switch(b){case u.returnValues.oneOrYes:a.resolve();break;case u.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+
" - _confirm(): Invalid Choice",b),a.reject()}c.remove()}));this.own(c);b.open()},_onSubmit:function(){var a=new d;this.own(a);this.allSystemsCheck.get("checked")||0!==this._selectedSystems.length?a.resolve():this._createConfirmDialog(a,this._confirmDialog);a.then(h.hitch(this,function(){this.onExecute();this.execute()}))},_performSearch:function(){this._filterSystems(this.textSearchField.searchBox.value);clearTimeout(this._fetchTimeout);this._fetchTimeout=null},_searchChanged:function(){null!==this._fetchTimeout&&
(clearTimeout(this._fetchTimeout),this._fetchTimeout=null);this._fetchTimeout=setTimeout(h.hitch(this,this._performSearch),500)},_setupOnClicks:function(){this.own(b(this.textSearchField,"keyup",h.hitch(this,this._searchChanged)),g.after(this.textSearchField,"reset",h.hitch(this,this._searchChanged)),b(this.allSystemsCheck,"change",h.hitch(this,this._disableListSelection)),b(this.textSearchField.searchButton,"click",h.hitch(this,function(){this._filterSystems(this.textSearchField.searchBox.value)})),
b(this.listSelection,"select",h.hitch(this,function(){m.curNode&&m.curNode.blur()})))},destroy:function(){this._fetchTimeout&&clearTimeout(this._fetchTimeout);this.inherited(arguments)}})})},"webview/admin/widget/ListSelection":function(){define("dgrid/extensions/DnD dgrid/OnDemandGrid dgrid/Selection dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!../../nls/remoteAlarmNotifications dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/ListSelection.html ./ListSelectionNode dijit/form/Button dgrid/extensions/_DnD-touch-autoscroll".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return f("webview/admin/widget/ListSelection",[g,h,d],{templateString:a,baseClass:"",closeHandles:{},leftListSelectionNodeMap:{},remoteAlarmNotificationsStrings:b,rightListSelectionNodeMap:{},site:"",tooltips:{},_disabled:!1,_gridMap:{Left:0,Right:1},_enableMoveLeftButton:!1,_enableMoveRightButton:!1,_leftGrid:null,_leftGridType:null,_rightGrid:null,_rightGridObserver:null,postCreate:function(){this.inherited(arguments);this._buildGrids();this._addListeners()},
_getSelectionAttr:function(){return this._rightGrid.store.query()},_setEnableMoveLeftButtonAttr:function(a){c.toggle(this.leftButton,"disabled",!a);this._set("enableMoveLeftButton",a)},_setEnableMoveRightButtonAttr:function(a){c.toggle(this.rightButton,"disabled",!a);this._set("enableMoveRightButton",a)},_setLeftGridContentAttr:function(a,b){this._leftGridType=b;this._leftGrid.store.setData(a);l.forEach(this._rightGrid.store.data,r.hitch(this,function(a){null!==this._leftGrid.store.get(a.uniqueId)&&
this._leftGrid.store.remove(a.uniqueId)}));this._leftGrid.refresh();this._set("leftGridContent",a)},_setLeftSelectionTitleValueAttr:{node:"leftSelectionTitle",attribute:"innerHTML"},_setRightSelectionTitleValueAttr:{node:"rightSelectionTitle",attribute:"innerHTML"},addItem:function(a){this._rightGrid.store.get(a.uniqueId)||this._rightGrid.store.add(a)},toggleDisabled:function(a){this._disabled=a;c.toggle(this.domNode,"disabled",a);this._leftGrid.dndSource.delay=a?Number.MAX_VALUE:0;this._leftGrid.set("selectionMode",
a?"none":"extended");this._rightGrid.set("selectionMode",a?"none":"extended");this.set("enableMoveLeftButton",!a);this.set("enableMoveRightButton",!a)},onSelect:function(){},onValueChange:function(){},reset:function(a){null!==this._rightGridObserver&&this._rightGridObserver.cancel();this.leftListSelectionNodeMap={};this.rightListSelectionNodeMap={};this._rightGrid.store.setData(a);this._leftGrid.store.setData([]);this._rightGrid.refresh();this._leftGrid.refresh();this._rightGridObserver=this._rightGrid.store.query().observe(r.hitch(this,
this._onValueChange))},_addListeners:function(){this.own(t(this.rightGridNode,["dgrid-select","dgrid-deselect"],r.hitch(this,this._gridSelectionChanged,this._gridMap.Right)),t(this.leftGridNode,["dgrid-select","dgrid-deselect"],r.hitch(this,this._gridSelectionChanged,this._gridMap.Left)),t(this.rightButton,"click",r.hitch(this,this._moveGridItems,this._gridMap.Right,this._leftGrid,this._rightGrid)),t(this.leftButton,"click",r.hitch(this,this._moveGridItems,this._gridMap.Left,this._rightGrid,this._leftGrid)))},
_buildGrids:function(){null===this._leftGrid&&(this._leftGrid=this._createGrid(this.leftGridNode,this._gridMap.Left));null===this._rightGrid&&(this._rightGrid=this._createGrid(this.rightGridNode,this._gridMap.Right))},_canMove:function(a,b){return b===this._gridMap.Right||a.type===this._leftGridType},_createGrid:function(a,b){var c=new (f([m,p,k]))({columns:[{id:"displayNameCol",field:"displayName",renderCell:r.hitch(this,this._createListSelectionNode,b)}],sort:[{attribute:"displayName",descending:!1}],
store:new u(new q({idProperty:"uniqueId"})),maxRowsPerPage:40,minRowsPerPage:20,keepScrollPosition:!0,allowSelectAll:!0,dndParams:{isSource:b===this._gridMap.Left}},a);c.startup();return c},_createListSelectionNode:function(a,b,c,d){c=new n({rowObject:r.clone(b),value:c,node:d,site:this.site});a===this._gridMap.Left?this.leftListSelectionNodeMap[b.id]=c:this.rightListSelectionNodeMap[b.id]=c;return c},_gridSelectionChanged:function(a,b){if(!this._disabled){var c=Object.keys(b.grid.selection).length;
1<c&&(a===this._gridMap.Left?b.rows.forEach(r.hitch(this,function(a){this.leftListSelectionNodeMap[a.data.id].hideTooltip()})):b.rows.forEach(r.hitch(this,function(a){this.rightListSelectionNodeMap[a.data.id].hideTooltip()})));0===c?a===this._gridMap.Right?this.set("enableMoveLeftButton",!1):this.set("enableMoveRightButton",!1):a===this._gridMap.Right?(this._leftGrid.clearSelection(),this.set("enableMoveLeftButton",!0),this.set("enableMoveRightButton",!1)):(this._rightGrid.clearSelection(),this.set("enableMoveLeftButton",
!1),this.set("enableMoveRightButton",!0));this.onSelect()}},_moveGridItems:function(a,b,c){this._disabled||(a===this._gridMap.Right?this.enableMoveRightButton:this.enableMoveLeftButton)&&l.forEach(Object.keys(b.selection),r.hitch(this,function(d){if(null!==d){var f=b.store.get(d);this._canMove(f,a)&&c.store.add(f);b.store.remove(d)}}))},_onValueChange:function(){this.onValueChange()},destroy:function(){null!==this._rightGridObserver&&this._rightGridObserver.cancel();this.inherited(arguments)}})})},
"dgrid/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/on dojo/topic dojo/has dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList put-selector/put ../Selection dojo/has!touch?../util/touch dojo/has!touch?./_DnD-touch-autoscroll xstyle/css!dojo/resources/dnd.css".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){var a=p(r,{grid:null,getObject:function(a){var b=this.grid;return b.store.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&
a.target!=this.grid.bodyNode},onDrop:function(a,b,c){var d=this,f=this._targetAnchor=this.targetAnchor,g=this.grid,k=g.store;!this.before&&f&&(f=f.nextSibling);f=f&&g.row(f);h.when(f&&k.get(f.id),function(f){if(d!=a)d.onDropExternal(a,b,c,f);else d.onDropInternal(b,c,f)})},onDropInternal:function(a,b,c){var d=this.grid,f=d.store,g=this,k=g._targetAnchor,l;k&&(l=this.before?k.previousSibling:k.nextSibling);k=d.row(a[0]);(b||l!==a[0]&&(c||!k||d.down(k).element!=a[0]))&&a.forEach(function(a){h.when(g.getObject(a),
function(a){var h=f.getIdentity(a);f[b&&f.copy?"copy":"put"](a,{before:c});g._selectedNodes[h]&&(g._selectedNodes[h]=d.row(h).element)})})},onDropExternal:function(a,b,c,d){var f=this.grid.store,g=a.grid;b.forEach(function(b,k){h.when(a.getObject(b),function(l){c||(g?h.when(g.store.getIdentity(l),function(c){!k&&a.selectNone();a.delItem(b.id);g.store.remove(c)}):a.deleteSelectedNodes());f[f.copy?"copy":"put"](l,{before:d})})})},onDndStart:function(a,b,d){this.inherited(arguments);a==this&&(this.grid.cancelTouchScroll&&
this.grid.cancelTouchScroll(),c.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){f("touch")&&this.isDragging&&1<u.countCurrentTouches(a,this.grid.touchNode)?(l.publish("/dnd/cancel"),c.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!f("touch")||1>=u.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(a,b){return a.getObject&&r.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);
var a=new b,c;for(c in this.grid.selection)a.push(this._selectedNodes[c]);return a}});p=p(q,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:a,postMixInProperties:function(){this.inherited(arguments);this.dndParams=m.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function b(a){d[a.id]=a.element}function c(a){delete d[a.id];t(a.element,"!dojoDndItemSelected!dojoDndItemAnchor")}this.inherited(arguments);this.dndSource=new (this.dndConstructor||a)(this.bodyNode,m.mixin(this.dndParams,
{grid:this,dropParent:this.contentNode}));var d=this.dndSource._selectedNodes={};this.on("dgrid-select",function(a){k.forEach(a.rows,b)});this.on("dgrid-deselect",function(a){k.forEach(a.rows,c)});g.after(this,"destroy",function(){delete this.dndSource._selectedNodes;d=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"==typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];t(b,".dojoDndItem");this.dndSource.setItem(b.id,{data:a,
type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});p.GridSource=a;return p})},"webview/admin/widget/ListSelectionNode":function(){define("dijit/popup dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!webview/nls/remoteAlarmNotifications dojo/io-query dojo/mouse dojo/on dojo/string dojo/text!./templates/ListSelectionNode.html ../_Widget ../../widget/TooltipDialog dijit/form/Button".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return m("webview/admin/widget/ListSelectionNode",[q],{templateString:t,closeHandle:null,isHovered:!1,node:null,remoteAlarmNotificationsStrings:l,rowObject:null,site:"",tooltip:null,value:null,_checkForMouseTimer:200,_recipientTypeMap:{User:0,Role:1,Email:2},_showDelay:500,postCreate:function(){h.set(this.node,"innerHTML",this.value);this._renderInErrorItems()},hideTooltip:function(){p.close(this.tooltip)},_buildTooltipContents:function(){var a=d.create("div",
{className:"user-in-error-tooltip-container"}),b=d.create("div",{className:"toastCloseIcon",innerHTML:"\x26times;"},a,"last");d.create("div",{className:"user-in-error-tooltip-contents",innerHTML:this._getErrorMessageForRule(this.rowObject)},a,"last");this.closeHandle=c(b,"click",k.hitch(p,p.close,this.tooltip));this.own(this.closeHandle);return a},_clearShowPopupTimeout:function(){this._showPopupTimeout&&clearTimeout(this._showPopupTimeout)},_closePopup:function(){this.tooltip.get("isHovered")||this.isHovered?
this.defer(k.hitch(this,this._closePopup),this._checkForMouseTimer):p.close(this.tooltip)},_getErrorMessageForRule:function(a){var c="",d=[];a.errors.forEach(k.hitch(this,function(a){"undefined"!==typeof this.ErrorMessageMap[a.errStatus]?d.push(this.ErrorMessageMap[a.errStatus]):d.push(a.errMSG)}));switch(a.type){case this._recipientTypeMap.User:c=this._getHashLinkForUser(a);break;case this._recipientTypeMap.Role:c=this._getHashLinkForRole(a);break;default:return""}return c=b.substitute(d.join("  "),
{displayName:a.displayName,hashLink:c})},_getHashLinkForRole:function(a){return"#roleLoginInfo?"+f.objectToQuery({site:this.site,roleId:a.id})},_getHashLinkForUser:function(a){return"#Users/LoginInfo?"+f.objectToQuery({site:this.site,userID:a.displayName,ID:a.id})},_renderInErrorItems:function(){this.rowObject.type!==this._recipientTypeMap.Email&&0<this.rowObject.errors.length&&this.rowObject.errors[0].errStatus!==this.SuccessCode&&(g.add(this.node,"error-no-email"),this.tooltip=new u({baseClass:"user-in-error-tooltip",
content:this._buildTooltipContents()}),this.own(c(this.node,r.enter,k.hitch(this,this._showTooltip)),c(this.node,r.leave,k.hitch(this,function(){this._clearShowPopupTimeout();this.isHovered=!1;this.defer(k.hitch(this,this._closePopup),this._checkForMouseTimer)}))))},_showTooltip:function(){this._showPopupTimeout&&clearTimeout(this._showPopupTimeout);this._showPopupTimeout=setTimeout(k.hitch(this,function(){p.open({popup:this.tooltip,orient:["above","below-alt"],around:this.node});this.isHovered=!0}),
this._showDelay)},destroy:function(){this._clearShowPopupTimeout();p.close(this.tooltip);this.tooltip.destroy();this.inherited(arguments)}})})},"webview/widget/TooltipDialog":function(){define("dijit/TooltipDialog dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/has dojo/mouse dojo/on".split(" "),function(p,m,k,h,g,d,l){return m("webview/widget/TooltipDialog",[p],{isHovered:!1,_linkClickHandler:null,_setContentAttr:function(d){this.inherited(arguments);if(g("touch")){null!==this._linkClickHandler&&
this._linkClickHandler.remove();var f=l(this.domNode,l.selector("a","click"),k.hitch(this,function(c){window.open(c.target.href)}));this.own(f);this._linkClickHandler=f}h.place(d,this.containerNode,"replace");this._set("content",d)},postCreate:function(){this.inherited(arguments);this.own(l(this.domNode,d.enter,k.hitch(this,this.set,"isHovered",!0)),l(this.domNode,d.leave,k.hitch(this,this.set,"isHovered",!1)))},destroy:function(){null!==this._linkClickHandler&&(this._linkClickHandler.remove(),this._linkClickHandler=
null);this.inherited(arguments)}})})},"webview/admin/worksheets/widgets/SelectRecipientsDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dom-attr dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../../nls/all dojo/i18n!../../../nls/errorMessages dojo/i18n!../../../nls/remoteAlarmNotifications dojo/i18n!../../../nls/roles dojo/on dojo/query dojo/request/xhr dojo/text!./templates/SelectRecipientsDialog.html dojox/validate/web ../../../widget/WarningDialog ../../../widget/WarningDialogEnums dijit/form/Button dijit/form/Form dijit/form/Select dijit/form/ValidationTextBox ../../widget/ListSelection ../../../widget/SearchByField".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w){return m("webview/admin/worksheets/widget/SelectRecipientsDialog",p,{templateString:n,destinations:[],errorStrings:c,radioSelection:2,rcStrings:f,remoteAlarmNotificationsStrings:b,rolesStrings:t,site:"",systemsAssigned:[],webviewStrings:r,_confirmDialog:null,_fetchTimeout:0,_recipientTypeMap:{User:0,Role:1,Email:2},_successCode:200,postCreate:function(){this.inherited(arguments);this.own(q(this.listSelection,"valueChange",k.hitch(this,this._onValueChange)));
this._setupOnClicks()},_getDestinationsAttr:function(){return this.listSelection.get("selection")},_setDestinationsAttr:function(a){this.listSelection.reset(a);this._recipientTypeForm.set("value",{recipientType:this._recipientTypeMap.Email});this.set("radioSelection",this._recipientTypeMap.Email);this._set("destinations",a)},_setShowEmailFieldAttr:function(a){l.toggle(this.textEmailContainer,"hidden",!a);this._set("showEmailField",a)},_setShowSearchFieldAttr:function(a){l.toggle(this.textSearchContainer,
"hidden",!a);this._set("showSearchField",a)},_setRadioSelectionAttr:function(a){switch(a){case this._recipientTypeMap.User:this.listSelection.set("leftSelectionTitleValue",this.webviewStrings.listUsers);this.textSearchField.set("value","");this._fetchUsers();break;case this._recipientTypeMap.Role:this.listSelection.set("leftSelectionTitleValue",this.rolesStrings.roleList);this.textSearchField.set("value","");this._fetchRoles();break;default:this.listSelection.set("leftSelectionTitleValue","\x26nbsp;"),
this.listSelection.set("leftGridContent",[],null)}this._toggleTextFields(a===this._recipientTypeMap.Email);this._set("radioSelection",a)},hide:function(){this.inherited(arguments);l.remove(document.body,"list-selection-avatar")},onValueChange:function(){},show:function(){this.inherited(arguments);l.add(document.body,"list-selection-avatar")},_createConfirmDialog:function(a,b){null===b&&(b=new x({type:w.types.binaryConfirm,title:this.remoteAlarmNotificationsStrings.noRecipientsSelected,text:this.remoteAlarmNotificationsStrings.confirmNoRecipients,
closeButtonVisible:!1}));var c=b.on("close",k.hitch(this,function(b){switch(b){case w.returnValues.oneOrYes:a.resolve();break;case w.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+" - _confirm(): Invalid Choice",b)}c.remove()}));this.own(c);b.open()},_fetchUsers:function(){this.own(a.get("Users/UserInfoForAlarmRecipient",{handleAs:"json",preventCache:!0,query:{siteId:this.site,alarmSystemsAssigned:this.systemsAssigned,filter:JSON.stringify({search:"userId\x3d~"+this.textSearchField.get("typedValue")+
"~"})}}).then(k.hitch(this,function(a){Array.isArray(a)&&(a=a.map(k.hitch(this,function(a){return{uniqueId:a.userId+this._recipientTypeMap.User,displayName:a.userId,id:a.id,errors:this._getErrors(a,this._recipientTypeMap.User),type:this._recipientTypeMap.User}})),this.listSelection.set("leftGridContent",a,this._recipientTypeMap.User))})))},_fetchRoles:function(){this.own(a.get("Roles/NameIdPairingsForAlarmRecipient",{handleAs:"json",preventCache:!0,query:{siteId:this.site,alarmSystemsAssigned:this.systemsAssigned,
filter:JSON.stringify({search:"name\x3d~"+this.textSearchField.get("typedValue")+"~"})}}).then(k.hitch(this,function(a){a.errStatus===this._successCode&&(a=a.roles.map(k.hitch(this,function(a){return{uniqueId:a.roleName+this._recipientTypeMap.Role,displayName:a.roleName,id:a.roleId,errors:this._getErrors(a,this._recipientTypeMap.Role),type:this._recipientTypeMap.Role}})),this.listSelection.set("leftGridContent",a,this._recipientTypeMap.Role))})))},_getErrors:function(a,b){var c=[];b!==this._recipientTypeMap.User||
a.hasEmail||c.push({errStatus:519});a.hasSystemsAssigned||c.push({errStatus:518});return c},_onAddEmail:function(){var a=this.emailTB.get("value");v.isEmailAddress(a)&&this.listSelection.addItem({uniqueId:a+this._recipientTypeMap.Email,displayName:a,id:"0",type:this._recipientTypeMap.Email})},_onSubmit:function(){var a=new g;this.own(a);0>=this.listSelection.get("selection").length?this._createConfirmDialog(a,this._confirmDialog):a.resolve();a.then(k.hitch(this,function(){this.onExecute();this.execute(this.get("destinations"))}))},
_onValueChange:function(){this.onValueChange()},_performSearch:function(){this.radioSelection===this._recipientTypeMap.User?this._fetchUsers():this.radioSelection===this._recipientTypeMap.Role&&this._fetchRoles();this._fetchTimeout=null},_searchChanged:function(){null!==this._fetchTimeout&&(clearTimeout(this._fetchTimeout),this._fetchTimeout=null);this._fetchTimeout=setTimeout(k.hitch(this,this._performSearch),500)},_setupOnClicks:function(){this.own(q(this.addEmailButton,"click",k.hitch(this,this._onAddEmail)),
q(u("[name\x3d'recipientType']"),"change",k.hitch(this,function(){setTimeout(k.hitch(this,function(){this.set("radioSelection",Number(this._recipientTypeForm.get("value").recipientType))}),1)})),q(this.textSearchField,"keyup",k.hitch(this,this._searchChanged)),h.after(this.textSearchField,"reset",k.hitch(this,this._searchChanged)))},_toggleTextFields:function(a){this.set("showSearchField",!a);this.set("showEmailField",a)}})})},"webview/widget/UserInErrorTag":function(){define("dijit/popup dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/mouse dojo/on ./SystemTag ./TooltipDialog".split(" "),
function(p,m,k,h,g,d,l,f){return m("webview/widget/UserInErrorTag",[l],{baseClass:"user-in-error",closeHandle:null,errorMessage:"",isHovered:!1,tooltip:null,_checkForMouseTimer:200,postCreate:function(){this.inherited(arguments);this.tooltip=new f({baseClass:"user-in-error-tooltip",content:this._buildTooltipContents()});this.own(d(this.domNode,g.enter,k.hitch(this,this._showTooltip)),d(this.domNode,g.leave,k.hitch(this,function(){this.isHovered=!1;this.defer(k.hitch(this,this._closePopup),this._checkForMouseTimer)})))},
_setErrorMessageAttr:function(d){this._set("errorMessage",d);null!==this.tooltip&&this.tooltip.set("content",this._buildTooltipContents())},_buildTooltipContents:function(){this.closeHandle&&this.closeHandle.remove();var f=h.create("div",{className:"user-in-error-tooltip-container"}),c=h.create("div",{className:"toastCloseIcon",innerHTML:"\x26times;"},f,"last");h.create("div",{className:"user-in-error-tooltip-contents",innerHTML:this.errorMessage},f,"last");this.closeHandle=d(c,"click",k.hitch(p,
p.close,this.tooltip));this.own(this.closeHandle);return f},_closePopup:function(){this.tooltip.get("isHovered")||this.isHovered?this.defer(k.hitch(this,this._closePopup),this._checkForMouseTimer):p.close(this.tooltip)},_showTooltip:function(){p.open({popup:this.tooltip,orient:["above","below-alt"],around:this.domNode});this.isHovered=!0},destroy:function(){p.close(this.tooltip);this.tooltip.destroy();this.inherited(arguments)}})})},"webview/admin/worksheets/remoteAlarms/RemoteAlarmsToolbar":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/on","dojo/text!./templates/RemoteAlarmsToolbar.html","../widgets/WorksheetToolbar"],function(p,m,k,h,g){return p("webview/admin/worksheets/remoteAlarms/RemoteAlarmsToolbar",[g],{templateString:h,clearDirty:function(){},makeDirty:function(){},_buildButtonMap:function(){this._buttons={addButton:this.addButton,deleteButton:this.deleteButton}},_setupOnClicks:function(){this.own(k(this.addButton.domNode,"click",m.hitch(this,function(){if(!this.addButton.get("disabled"))this.onAdd()})),
k(this.deleteButton.domNode,"click",m.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onDelete()})))}})})},"webview/admin/worksheets/trendLogs/TrendLogPoints":function(){define("dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dnd/Source dojo/dom-class dojo/dom-construct dojo/json dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/TrendLogPoints.html dojo/text!../../templates/pointsItem.html dojo/topic rc/bacnet/enums rc/bacnet/io/Error rc/bacnet/io/Number ./TrendLogPointItem ../../_dndTreeBase ../../../changeApproval/_ApprovalSessionMixin ../../../widget/WarningDialog ../../../widget/WarningDialogEnums ../../../xhrEnhanced ../../widget/SearchForObjectResults ../../widget/AdminToolbar ../../../widget/CommitButtons ../../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E){return k("webview/admin/worksheets/trendLogs/TrendLogPoints",[A,B],{templateString:a,_fetchDeferred:null,_maxPoints:1,_processId:-1,_saveWarningDialog:null,_searchRequest:null,_trendData:{},_buttonArray:null,_fetchInterval:null,_intervalTime:500,_firstLoad:!0,postCreate:function(){this.inherited(arguments);if(!rc.session.hasRole(rc.session.adminRoles.editTrendlogs,!0))return setTimeout(h.hitch(this,function(){var a=this.safeError(null,
{name:this.rcStrings.permissionDenied,message:u.substitute(this.rcStrings.notAuthToViewX,[this.webviewStrings.trendLogPoints]),suggestion:""});this._onInitError(a)}),500),null;this.publishSearchable();this._iconArray=[];this._iconArray.push(this.commitButtons);this.buttonBar.replaceAllIcons(this._iconArray);null===this.mnemonic&&(this.mnemonic=this.mne);this._setFetchInterval();this._fetch().then(h.hitch(this,this._render),h.hitch(this,function(a){this._onInitError(a)}));this.setupCommitButtons()},
fetch:function(){var a=new d;this.own(a);this._fetch().then(h.hitch(this,function(b){200===b.errStatus?(this._render(b),this.set("title",b.data.trend.name),this._setTitle(this.title),a.resolve()):(b=this._getErrorMessage(b.errStatus,b.errMessage),v.publish("sticky",{message:b,type:"error"}),a.reject(b))}),h.hitch(this,function(b){v.publish("sticky",{message:this.errorStrings.unexpectedError,type:"error"});a.reject(b)}));return a.promise},publishSearchable:function(){v.publish("searchableWidget",this._supportedObjectTypes,
this,!0)},setupCommitButtons:function(){var a=this.commitButtons;this.own(b(a.saveButton.toolbarButtonIcon,"click",h.hitch(this,this._savePoints)),b(a.cancelButton.toolbarButtonIcon,"click",h.hitch(this,this._clearAndfetch)))},treeNodeCreator:function(a){var b=new y({pointMnemonic:a.pointMnemonic,pointName:a.pointName});b.on("delete",h.hitch(this,this._deleteNode));b.on("mnemonicChanged",h.hitch(this,this.setDirty,!0,this.commitButtons.saveButton));this._treeStore.put(b);return{node:b.domNode,data:a,
type:["treeNode"]}},_setFetchInterval:function(){this._clearFetchInterval();this._fetchInterval=setInterval(h.hitch(this,this._reloadData),this._intervalTime)},_clearFetchInterval:function(){null!=this._fetchInterval&&(clearInterval(this._fetchInterval),this._fetchInterval=null)},_reloadData:function(){this._fetch().then(h.hitch(this,this._render),h.hitch(this,function(a){this._onInitError(a)}))},_atLimit:function(a,b){var c="moved"===a.sourceState.toLowerCase()||this._treeList.getAllNodes().length+
b.length<=this._maxPoints;c||v.publish("alert",{message:this.webviewStrings.maxPointsReached,type:"info"});return c},_setupPointSourceListeners:function(a){this.own(g.after(a,"onDndDrop",a.selectNone))},insertPoint:function(a,b){a.insertNodes(!1,[{sysId:null!==b.sysId?b.sysId:-1,sysName:null!==b.sysName?b.sysName:"",deviceName:null!==b.deviceName?b.deviceName:"",pointName:null!==b.pointName?b.pointName:"",pointMnemonic:null!==b.pointMnemonic?b.pointMnemonic:"",pointType:null!==b.pointType?b.pointType:
"",urlPath:this.urlPath}])},_setSupportedTypes:function(){this._supportedObjectTypes=[this.objectTypeMap.inputs,this.objectTypeMap.outputs,this.objectTypeMap.variables,this.objectTypeMap.loops,this.objectTypeMap.schedules,this.objectTypeMap.calendars,this.objectTypeMap.arrays]},_clearAndfetch:function(){this._firstLoad=!0;var a=this._treeList.getAllNodes();m.forEach(a,h.hitch(this,function(a){this._deleteNode(p.byNode(a))}));this.fetch().then(h.hitch(this,this.setDirty,!1,this.commitButtons.saveButton))},
_createTreeBuilder:function(){var a=r.create("div",{"class":"treeContainer treeContainerBordered"});r.create("span",{"class":"dndHint",innerHTML:this.webviewStrings.dndHint},a,"last");var b=r.create("div",{"class":"treeFolder rootFolder treeContainer"},a,"last");this._treeStore=new q(new t({}));this._treeList=new l(b,{creator:h.hitch(this,this.treeNodeCreator),copyOnly:!1,allowNested:!0,autoSync:!0,delay:this.DEFAULT_DELAY,skipForm:!0,accept:["treeNode","resultNode"],checkAcceptance:h.hitch(this,
this._atLimit)});this.own(g.before(this._treeList,"onDndStart",h.hitch(this,function(a,b){a===this._treeList&&m.forEach(b,h.hitch(this,function(a){f.add(a,"hidden")}))})));this.own(g.after(this._treeList,"onDndCancel",h.hitch(this,function(){var a=Object.keys(this._treeList.map);m.forEach(a,function(a){a=p.byId(a).domNode;f.remove(a,"hidden")});this.setDirty(this._pointsHaveChanged(),this.commitButtons.saveButton);this._toggleHintArea()}),!0));this.builderWidget.setMainContent(a)},_deleteNode:function(a){this._treeList.delItem(a.domNode.id);
r.destroy(a.domNode);this._treeStore.remove(a.id);this.setDirty(this._pointsHaveChanged(),this.commitButtons.saveButton)},_fetch:function(){return E.get("GetTrendLogs/",{handleAs:"json",preventCache:!0,query:{systemId:this.system,mne:this.mnemonic,specificTrend:!0}})},_getCurrentPoints:function(){var a=this._treeList.getAllNodes(),b=[];m.forEach(a,h.hitch(this,function(a){a=p.byNode(a);b.push({mne:a.pointMnemonic,name:a.pointName})}));return b},_getErrorMessage:function(a,b){switch(a){case 200:return this.errorStrings.operationSuccessful;
case 403:return this.errorStrings.accessForbidden;case 501:return this.errorStrings.cannotAccessSystem;case 502:return this.errorStrings.userHasNoAccess;case 504:return this.errorStrings.unexpectedError;case 505:return this.errorStrings.siteDoesNotExist;case 506:return this.errorStrings.insufficientPriviledges;case 507:return this.errorStrings.unsupportedTrendlog;case 508:return this._getBACnetErrorMessage(b);case 509:return this.errorStrings.unableToCreateTrendlog;case 510:return this.errorStrings.operationInProgress;
case 511:return this.errorStrings.userCancelled;case 512:return this.unableToDeleteTrend;case 513:return this.errorStrings.rcwvsError;case 517:return this.errorStrings.systemDoesNotExist;default:return b}},_goBackToWorksheet:function(){var a=this.mnemonic.match(/MTL/i)?"MTLS":"STLS",b;this.isAdminPage()?(b="trendlogworksheet/View?site\x3d"+this.site,b+="\x26system\x3d"+this.system+"\x26device\x3d"+this.device+"\x26mne\x3d"+a):b=this.device+a;setTimeout(h.hitch(this,function(){window.location.hash=
this.getObfuscatedHash("#"+b)}),750)},_pointsHaveChanged:function(){var a=this._getCurrentPoints(),b=this._trendData.points;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c].name!==b[c].name||a[c].mne!==b[c].mne)return!0;return!1},_pointsNodeCreator:function(a,b){var c=null,c="avatar"===b?(new y({baseClass:"trendLogPoint",pointName:a.pointName,pointMnemonic:a.pointMnemonic})).domNode:r.toDom(u.substitute(n,{sysId:a.sysId,sysName:a.sysName?a.sysName:"",deviceName:a.deviceName,pointName:a.pointName,
pointMnemonic:a.pointMnemonic,siteUrlPath:a.urlPath}));return{node:c,data:a,type:["resultNode"]}},_saveErrorMsg:function(a){a=this._getErrorMessage(a.errStatus,a.errMSG);v.publish("sticky",{message:a,type:"error"})},_render:function(a){if(200===a.errStatus)a.initialLoad&&this._firstLoad&&(this._clearFetchInterval(),this._renderData(a.data),this.onInitSuccess(),this._firstLoad=!1);else{this._clearFetchInterval();var b=this._getErrorMessage(a.errStatus,a.errMSG);v.publish("sticky",{message:b,type:"error"});
this.onInitError(a.errMSG)}},_renderData:function(a){this.set("title",a.trend.name);this._setTitle(this.title);this._trendData=a.trend;this._maxPoints=a.maxPoints;for(var b=0;b<a.trend.points.length;b++){var c=a.trend.points[b];this._treeList.insertNodes(!1,[{pointMnemonic:c.mne,pointName:c.name}])}this._toggleHintArea()},_savePoints:function(){if(this._validatePoints()){var a=this._getCurrentPoints();this._trendData.points=a;this._dirty?this._showSaveConfirm():this._goBackToWorksheet()}else v.publish("sticky",
{message:this.webviewStrings.arraysMustHaveIndex,type:"error"})},_sendSaveRequest:function(){var a=new d;this.own(a);var b={};b[this.mnemonic]=c.stringify(this._trendData);var f={siteId:this.site,systemId:this.system,instanceData:c.stringify(b)};this._validateApprovalSessionWithReason(f).then(h.hitch(this,function(){E.put("TrendLogs",{handleAs:"json",preventCache:!0,data:f}).then(h.hitch(this,function(b){200===b.errStatus?(v.publish("alert",{message:this.errorStrings.successfulSave,type:"success"}),
this.setDirty(!1,this.commitButtons.saveButton),a.resolve()):a.reject(b)}),h.hitch(this,function(b){a.reject(b)}))}),function(){});return a.promise},_getBACnetErrorMessage:function(a){var b="";"object"===typeof a?(b="",a.hasOwnProperty("errorClass")?b=new w(new z(a.errorClass,x.primitiveTypes.UNSIGNED_INTEGER),new z(a.errorCode,x.primitiveTypes.UNSIGNED_INTEGER)):a.hasOwnProperty("type")&&(b=new w(new z(a.type,x.primitiveTypes.UNSIGNED_INTEGER),new z(a.reason,x.primitiveTypes.UNSIGNED_INTEGER))),
b=this.errorStrings.bacnetError+": "+b.toStringMsg()):(b=this.errorStrings.bacnetError,console.error("BACnet error",a));return b},_showSaveConfirm:function(){null===this._saveWarningDialog&&(this._saveWarningDialog=new C({title:this.rcStrings.warning,type:D.types.binary,text:this.webviewStrings.modifyingPointsResets}));var a=this._saveWarningDialog.on("close",h.hitch(this,function(b){switch(b){case D.returnValues.oneOrYes:this._sendSaveRequest().then(h.hitch(this,this._goBackToWorksheet),h.hitch(this,
this._saveErrorMsg));break;case D.returnValues.none:break;default:console.error(this.declaredClass+" - _showSaveConfirm(): Unknown choice",b)}a.remove()}));this.own(a);this._saveWarningDialog.open()},_validatePoints:function(){var a=/^(\d+)(\w+)(\d+)/i,b=this._treeList.getAllNodes(),c=!0;m.forEach(b,h.hitch(this,function(b){b=p.byNode(b);var d=a.exec(b.pointMnemonic);null!==d&&"ay"===d[2].toLowerCase()&&0>b.indexValue&&(b.setInvalid(),c=!1)}));return c},destroy:function(){this.inherited(arguments);
this._clearFetchInterval()}})})},"webview/admin/worksheets/trendLogs/TrendLogPointItem":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/ConfirmDialog dijit/DropDownMenu dijit/form/DropDownButton dijit/form/ValidationTextBox dijit/MenuItem dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/on dojo/text!webview/widget/templates/ConfirmActionBar.html dojo/text!./templates/TrendLogPointItem.html dojo/topic rc/_base/util rc/bacnet/enums".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A){return r("webview/admin/worksheets/trendLogs/TrendLogPointItem",[m,p,k],{templateString:w,_getObjectRegex:/^(\d+)(\w+)(\d+)/i,_propertyDialog:null,_setPropertyTB:null,_lastDialog:"",_mnemonicPartAllRegex:/^(\w+)(:)(\d+)(\[)(\d+)(\])$/i,_mnemonicPartsPropertyRegex:/^(\w+)(:)(\d+)$/i,_menomincPartsIndexRegex:/^(\w+)(\[)(\d+)(\])$/i,indexValue:-1,property:85,pointMnemonic:"",pointName:"",constructor:function(){this.inherited(arguments);this.rcStrings=
u;this.webviewStrings=a;this.errorStrings=n},postMixInProperties:function(){this.inherited(arguments);if(this._mnemonicPartAllRegex.test(this.pointMnemonic)){var a=this._mnemonicPartAllRegex.exec(this.pointMnemonic);this.property=Number(a[3]);this.indexValue=Number(a[5])}else this._mnemonicPartsPropertyRegex.test(this.pointMnemonic)?this.property=Number(this._mnemonicPartsPropertyRegex.exec(this.pointMnemonic)[3]):this._menomincPartsIndexRegex.test(this.pointMnemonic)&&(this.indexValue=Number(this._menomincPartsIndexRegex.exec(this.pointMnemonic)[3]))},
buildRendering:function(){this.inherited(arguments);this._buildEditMenu()},setInvalid:function(){t.add(this.contentNode,"invalid")},_buildDialogContent:function(){var a=q.create("div",{"class":"setPropertyDialogContents"});q.create("label",{innerHTML:this.webviewStrings.value+":","for":"propertyInput"},a,"first");var b=q.create("span",null,a,"last");this._setPropertyTB=new l({baseClass:"rcTextBox",value:"",pattern:"(\\d+)"},b,"last");return a},_buildEditMenu:function(){var a=new g({baseClass:"webviewContextMenu trendLogPoint"});
a.addChild(new f({label:this.rcStrings.rcDelete,baseClass:"webviewContextMenuItem",onClick:c.hitch(this,this._onRemove)}));a.addChild(new f({label:this.webviewStrings.setPropertyValue,baseClass:"webviewContextMenuItem",onClick:c.hitch(this,this._setProperty)}));a.addChild(new f({label:this.webviewStrings.setIndexValue,baseClass:"webviewContextMenuItem",onClick:c.hitch(this,this._setIndex)}));a.startup();(new d({showLabel:!1,dropDown:a,iconClass:"rc24Icon editIcon",baseClass:"webviewDropDownButton",
onClick:function(){this.focus()}},this.editNode)).startup()},_createPropertyDialog:function(){this._propertyDialog=new h({title:"",baseClass:"setPropertyDialog",content:this._buildDialogContent(),actionBarTemplate:x});this.own(v(this._propertyDialog.okButton,"click",c.hitch(this,this._onConfirmDialogOk)));this.own(v(this._propertyDialog,"hide",c.hitch(this,this._onConfirmDialogHide)))},_onConfirmDialogOk:function(a){if(null===this._setPropertyTB)console.error("_setPropertyTB was not initialized");
else{var b=this._setPropertyTB.get("value").trim();"index"===this._lastDialog?this._trySetNewIndex(a,b):"property"===this._lastDialog&&this._trySetNewProperty(a,b)}},_onConfirmDialogHide:function(){this._setPropertyTB.set("value","")},_trySetNewIndex:function(a,b){if(""===b)b="-1";else if(!this._setPropertyTB.isValid()){y.stopEvent(a);return}this._setPointMnemonic(b,this.property)},_trySetNewProperty:function(a,b){""===b?(z.publish("sticky",{message:this.errorStrings.valueFieldEmpty,type:"error"}),
y.stopEvent(a)):this._setPropertyTB.isValid()?this._setPointMnemonic(this.indexValue,b):y.stopEvent(a)},_setPointMnemonic:function(a,b){var c=this.pointMnemonic;this.indexValue=Number(a);this.property=Number(b);var d=this._getPointMnemonic();c!==d&&(this.pointMnemonic=d,this._updatePointMnemonic())},_getPointMnemonic:function(){var a=null,a=this.pointMnemonic;this._getObjectRegex.test(this.pointMnemonic)&&(a=this._getObjectRegex.exec(this.pointMnemonic)[0]);a=this.property!==A.propertyTypes.PROPID_PRESENT_VALUE?
a+":"+this.property:a;-1!==this.indexValue&&(a+=["[",this.indexValue,"]"].join(""));return a},_updatePointMnemonic:function(){b.set(this.displayNode,"innerHTML",this.pointName+"\x26nbsp;("+this.pointMnemonic+")");v.emit(this.domNode,"mnemonicChanged",this)},_onRemove:function(){v.emit(this.domNode,"delete",this)},_setIndex:function(){null===this._propertyDialog&&this._createPropertyDialog();this._propertyDialog.set("title",this.webviewStrings.enterIndexValue);this._setPropertyTB.set("value",this.indexValue===
Number("-1")?"":this.indexValue);this._propertyDialog.show();this._lastDialog="index"},_setProperty:function(){null===this._propertyDialog&&this._createPropertyDialog();this._propertyDialog.set("title",this.webviewStrings.enterPropertyValue);this._setPropertyTB.set("value",this.property);this._propertyDialog.show();this._lastDialog="property"}})})},"webview/admin/worksheets/trendLogs/TrendLogsView":function(){define("dgrid/Grid dgrid/extensions/ColumnResizer dgrid/extensions/DijitRegistry dgrid/editor dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/ConfirmDialog dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/Textarea dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/hash dojo/json dojo/on dojo/query dojo/store/Memory dojo/string dojo/text!../../../widget/templates/ConfirmActionBar.html dojo/text!./templates/TrendLogsView.html dojo/topic rc/_base/test rc/_base/util rc/bacnet/enums rc/bacnet/error rc/util/encoding/base16 rc/util/encoding/base64 ../widgets/AdvancedTrendPropertyEditor ../../AdminWorksheetBase ../../../sys/job ../../../util/AlarmUtil ../../../util/util ../../../util/xport ../../../widget/ColumnHider ../../../widget/WarningDialog ../../../widget/WarningDialogEnums ../../../xhrEnhanced dijit/form/Button ./TrendLogToolbar ../../widget/AdminToolbar ../../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R,V,Q,X,Z,da,T,aa,Y){return a("webview/admin/worksheets/trendLogs/TrendLogsView",[R],{templateString:H,_addTrendNameTB:null,_advancedPropertiesContent:null,_advancedPropertiesDialog:null,_BACnetErrorCode:508,_byteSizeOptions:null,_buttonArray:null,_canEdit:!1,_clearTrendDialog:null,_columnFields:{advanced:"advanced",description:"description",enable:"enable",increment:"increment",instance:"id",interval:"interval",
length:"length",logType:"logtype",name:"name"},_columnStructure:[],_confirmChangeLossesDialog:null,_descriptionIsEditable:!0,_iconArray:null,identityProperty:"id",defaultTrendObject:{mne:"",name:"",archived:!1,points:[],enable:!1,logtype:0,increment:.2,interval:"00:00:00",length:128,description:"",advanced:{start:{date:null,time:null,always:!0},end:{date:null,time:null,never:!0}},firstSample:null,lastSample:null},_deleteTrendsDialog:null,_fetchDeferred:null,_fieldThatClearData:["length","advanced"],
_firstLoad:!0,_grid:null,_hash:"trendlogworksheet/View",_instanceRegex:/(\d+)([a-z]+)(\d+)/i,_gridStore:null,_maxRows:0,_pointIndexRegex:/([a-zA-Z]*)(\d*)([a-zA-Z]*)/i,_pollForStatusTimer:null,_processId:-1,_remoteTrendlogStore:null,_trendlogBaseURL:"",_trendStates:{POLLED:0,COV:1,TRIGGERED:2},postCreate:function(){this._buttonArray=[];this._iconArray=[];n.mixin(this.ErrorMessageMap,{507:this.errorStrings.unsupportedTrendlog,509:this.errorStrings.unableToCreateTrendlog,512:this.errorStrings.unableToDeleteTrend});
"MTLS"===this.type||"MTLS"===this.mne?(this.widgetName=this.webviewStrings.multipointTrendLogs,this.widgetNameKey="multipointTrendLogs"):(this.widgetName=this.webviewStrings.singlePointTrendLogs,this.widgetNameKey="singlePointTrendLogs");this.inherited(arguments);this.system=this.system||rc.pathInfo.system;this._setTrendlogBaseURL();this._fetch().then(n.hitch(this,this._parseFetch),n.hitch(this,function(a){this._onInitError(a)}));V.loadForAdmin(this.system).then(n.hitch(this,this._setAlarmContext));
this._intervalTime=500},exportToCSV:function(a,b,c){var d=[],f="",g=[],h=B("trident")?"\r\n":"\n",k=new v;this.own(k);if(!a.store)return k.reject("Grid does not contain a store"),k.promise;var l=this._getVisibleColumns(a),m=Object.keys(l);c&&d.push(c);for(c=0;c<m.length;++c)f=a.column(l[m[c]]).label,f=N.unescapeHtml(f),f=N.escapeCsv(f),f=N.escapeSpecialCharacters(f),g.push('"'+f+'"');d.push(g.join(","));var q=function(c){g=[];var h=!1;"undefined"!==typeof c.name&&c.name===this.PlaceHolderName&&(h=
!0);for(var k=0;k<m.length;++k)if(c.hasOwnProperty(m[k])||-1!==m[k].indexOf("point")){if(h)f="";else{var n=a.columns[l[m[k]]];if("editor"in n)f=n.field===this._columnFields.increment?c.logtype===this._trendStates.COV?c.increment:"":n.field===this._columnFields.interval?c.logtype===this._trendStates.POLLED?c.interval:"":c[m[k]];else if("renderCell"in n){var q="",q="pointCell"===n.className?c.points[Number(m[k].split("point")[1])-1]:c[m[k]];"undefined"!==typeof q?"advanced"===n.field?(n=!0===q.start.always?
"Always":this._formatAdvanced(q,!0),q=!0===q.end.never?"Never":this._formatAdvanced(q,!1),f="Start: "+n+" Stop: "+q):f=n.renderCell(c,q,y.create("span")).innerText:f=""}else f="formatter"in n?n.formatter(c[m[k]],c):c[m[k]];"alarm.csv"===b&&"action"===m[k]&&(q=/>(.*)</g.exec(f),null!==q&&(f=q[1]));"logtype"===m[k]?f=[this.webviewStrings.polled,this.webviewStrings.cov,this.webviewStrings.triggered][parseInt(f)]:"useHalfFloat"===m[k]&&(f=f?"2":"4");f=N.unescapeHtml(f);f=N.escapeCsv(f);f=N.escapeSpecialCharacters(f);
f=encodeURI(f)}g.push('"'+f+'"')}d.push(g.join(","))};c=a.store.query(a.get("query"),this.getGridQueryOptions(a));c instanceof dojo.Deferred?c.then(n.hitch(this,function(a){u.forEach(a,n.hitch(this,q));(new Z).csv(b,d.join(h)).then(k.resolve,k.reject)})):(u.forEach(c,n.hitch(this,q)),(new Z).csv(b,d.join(h)).then(k.resolve,k.reject));return k.promise},formatGridDataValue:function(a,b){var c="";if("advanced"===b)var c=!0===a.advanced.start.always?"Always":this._formatAdvanced(a.advanced,!0),d=!0===
a.advanced.end.never?"Never":this._formatAdvanced(a.advanced,!1),c="Start: "+c+" Stop: "+d;else c=this.inherited(arguments);return c},resize:function(){this.inherited(arguments);if(this._adminTopContent){var a=this._adminTopContent.clientWidth,a=a-this._contentHeaderIcon.clientWidth;A.set(this._contentHeaderTitle,"width",a-50+"px")}},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_goToPage:function(a,b){this.goToPage(this._hash)},_buildHash:function(){this._hash=C()},_advancedFieldChanged:function(a,
b){try{var c=[],d;for(d in a)if(void 0!==b[d]){if("object"===typeof a[d]&&null!==a[d]&&null!==b[d]){if(this._advancedFieldChanged(a[d],b[d]))return!0}else if(a[d]!==b[d])return!0;c.push(d)}else return!0;for(d in b)if(-1!==c.indexOf(d))return!0;return!1}catch(ha){return!0}},_addToolbarListeners:function(){this.own(E(this._toolbar,"add",n.hitch(this,this._addDialog,this.webviewStrings.createTrendLog)),E(this._toolbar,"cancel",n.hitch(this,this._revertChanges)),E(this._toolbar,"delete",n.hitch(this,
this._removeTrendlog)),E(this._toolbar,"export",n.hitch(this,this._export)),E(this._toolbar,"send",n.hitch(this,this._saveChanges)),E(this._toolbar,"toggleColumns",n.hitch(this,this._positionAndShowColumnToggle)));if(!this._canEdit){var a=this._toolbar.getPageButtons();Object.keys(a).forEach(function(b){"columnButton"!==b&&a[b].set("disabled",!0)})}},_buildDialogContent:function(){var a=y.create("div",{"class":"addTrendDialogContents"}),b=y.create("span",null,a,"last");this._addTrendNameTB=new t({baseClass:"rcTextBox"},
b,"last");y.create("label",{innerHTML:this.webviewStrings.trendLogName+":","for":this._addTrendNameTB.id},a,"first");return a},_buildGrid:function(b){null===this._grid?(this._maxRows=b.max,this._normalizeStructure(b.columns),this._grid=new (a([p,g,k,da,m,d]))({allowSelect:n.hitch(this,this.allowSelect),columns:this._columnStructure,deselectOnRefresh:!1,selectionMode:"none",sort:[{attribute:"id",descending:!1}],store:this._gridStore},this.gridNode),this._grid.startup(),this._resizeGrid(),this._toolbar.sendButton.set("disabled",
!0),this._toolbar.cancelButton.set("disabled",!0),this._toolbar.deleteButton.set("disabled",!0),this._connectGrid()):(b.initialLoad&&this._firstLoad&&(this._normalizeStructure(b.columns),this._grid.set("columns",this._columnStructure)),this._grid.refresh({keepScrollPosition:!0}),this._resetSaveButton())},_buildPointCell:function(a,b,c){var d="";null!==b.name&&(d+=b.name);null!==b.mne&&(d+=" ("+b.mne+")");b=y.create("div",{innerHTML:d,title:d});z.add(c,this._canEdit?"enabled":"disabled");a.name!==
this.PlaceholderName?this.own(E(c,"click",n.hitch(this,this._editTrendPoints,a.id))):(z.add(b,"invisible"),z.remove(c,"colourlessLink"));return b},_buildTrendlogLinkCell:function(a,b,c){var d=y.create("div",null,c,"only");if(a.name!==this.PlaceholderName){var f="";if(this.isAdminPage()){for(var g,d=0;d<rc.session._attributes.SiteMapArray.length;d++)if(rc.session._attributes.SiteMapArray[d].siteId===Number(this.site)){g=rc.session._attributes.SiteMapArray[d].sitePath;break}f=rc.pathInfo.app+g+"/"+
this.system+"/"}f+=this.getObfuscatedHash(this._trendlogBaseURL+b,!0);d=y.create("div",{"class":"instance-container"},c,"only");y.create("a",{"class":"linkable",href:f,innerHTML:b,title:I.substitute(this.rcStrings.gotoX,[a.name])},d,"first")}return d},_canEditDescription:function(){return this.inherited(arguments)&&this._descriptionIsEditable&&this._canEdit},_checkCanEdit:function(a,b){b.name===this.PlaceholderName&&(a=!0);return this._canEdit&&!a},_createButtons:function(){this._iconArray.push(this._toolbar);
this.buttonBar.replaceAllIcons(this._iconArray)},headerIconClass:function(){return"MTLS"===this.type?"rcTrendlogMultipleIcon":"rcTrendlogSingleIcon"},_connectGrid:function(){this.inherited(arguments);this.own(E(this._grid,"dgrid-datachange",n.hitch(this,function(a){var b=!1;"advanced"===a.cell.column.field&&(b=this._advancedFieldChanged(a.oldValue,a.value));if(b){var c=this._gridStore.get(a.rowId);c[a.cell.column.field]=a.value;this._gridStore.put(c,{id:a.rowId})}if("advanced"!==a.cell.column.field||
b)this._toolbar.sendButton.set("disabled",!1),this._toolbar.cancelButton.set("disabled",!1),this.makeDirty()})));this.own(E(this._grid,".dgrid-column-nameCol:dgrid-editor-hide",n.hitch(this,function(a){a.editor.isValid()||J.publish("sticky",{message:this.errorStrings.descriptorIsPredefined,type:"error"})})));this.own(E(this._grid,".dgrid-column-logtypeCol:dgrid-datachange",n.hitch(this,this._updateIntervalStyling)));this.own(E(this._grid,".dgrid-column-incrementCol:dgrid-sort",n.hitch(this,this._customGridSort)))},
_createStores:function(){this.inherited(arguments);this._byteSizeOptions=new G({data:[{id:"4",name:"4"},{id:"2",name:"2"}]})},_customGridSort:function(a){a.preventDefault();var b=null,c=a.sort[0],d=null,f=!1,d="undefined"!==typeof this._grid.sortObject?this._grid.sortObject:this._grid.get("sort")[0];d.attribute===c.attribute&&(f=!1===d.descending);switch(c.attribute){case "increment":b=this._sortIncrement;break;default:console.error(this.declaredClass+" - _customGridSort(): Unexpected sort attribute",
c)}this._grid.sortObject=c;this._grid.sortObject.descending=f;this._grid.set("sort",n.hitch(this,b,f));this._grid.updateSortArrow(a.sort,!1)},_deleteTrendlogs:function(a){var b=new v,c={siteId:this.site,instances:a,systemId:this.system};this._validateApprovalSessionWithReason(c).then(n.hitch(this,function(){Y.del("TrendLogs",{handleAs:"json",preventCache:!0,data:c}).then(n.hitch(this,function(a){a.errStatus===this.SuccessCode?(a.errors&&Object.keys(a.errors).length?(this._displayDeleteErrorMessage(a.errors),
b.reject()):(this._displayDeleteSuccessMessage(),b.resolve()),a.successes.length&&this._removeDeletedTrendlogsFromGrid(a.successes)):(a.errors&&Object.keys(a.errors).length?this._displayDeleteErrorMessage(a.errors):this._displayError(a),b.reject())}),n.hitch(this,function(a){J.publish("sticky",{type:"error",message:this.errorStrings.unexpectedError});console.error(this.declaredClass+" - _deleteTrend(): Could not delete trend",trendMne,a);b.reject()}))}),function(){});return b.promise},_displayDeleteErrorMessage:function(a){a=
Object.keys(a);var b=this.errorStrings.followingTrendlogsFailedToDelete+"\x3cul\x3e";a.forEach(n.hitch(this,function(a){a=this._instanceRegex.exec(a);null!==a&&(b+="\x3cli\x3e"+this._grid.store.get(Number(a[3])).name+"\x3c/li\x3e")}));b+="\x3c/ul\x3e";J.publish("sticky",{message:b,type:"error"})},_displayDeleteSuccessMessage:function(){J.publish("alert",{message:this._getErrorMessage(this.SuccessCode,"Delete Successful"),type:"success"})},_displayUpdateErrorMessage:function(a){var b=Object.keys(a),
c=this.webviewStrings.couldNotSaveFollowingTrends+"\x3cul\x3e";b.forEach(n.hitch(this,function(b){var d=this._instanceRegex.exec(b);null!==d&&(c+="\x3cli\x3e"+this._grid.store.get(Number(d[3])).name);a[b].StatusCode==this._BACnetErrorCode&&(b=D.parse(a[b].ErrorMessage),c+=": "+M.codes.error[b.reason]);c+="\x3c/li\x3e"}));c+="\x3c/ul\x3e";J.publish("sticky",{message:c,type:"error"})},_editTrendPoints:function(a){if(this._canEdit)if(this._dirty){null===this._confirmChangeLossesDialog&&(this._confirmChangeLossesDialog=
new T({title:this.rcStrings.warning,text:this.rcStrings.unsavedWarning+"  "+this.rcStrings.discardChanges,type:aa.types.binary}));var b=this._confirmChangeLossesDialog.on("close",n.hitch(this,function(c){switch(c){case aa.returnValues.oneOrYes:this.makeClean();this._goToEditPoints(a);break;case aa.returnValues.none:break;default:console.error(this.declaredClass+" - _editTrendPoints(): Unknown choice",c)}b.remove()}));this.own(b);this._confirmChangeLossesDialog.open()}else this._goToEditPoints(a)},
_export:function(){this.exportToCSV(this._grid,"trendlogs.csv",this.widgetName)},_fetch:function(a){this._firstLoad=0===this._trendlogCount();this._clearFetchTimeout();var b=C();this.isAdminPage()||K.mode<K.PROXY_LIVE&&(b=P.toCharString(S.decode(b)));return Y.get("GetTrendLogs/",{handleAs:"json",preventCache:!0,query:{systemId:this.system,mne:this.mnemonic,forceReload:a?a:!1}})},_formatAdvanced:function(a,b){return b?a.start.date.dom+"/"+a.start.date.m+"/"+a.start.date.y+" "+a.start.time.h+":"+X.pad(a.start.time.m,
2,0)+":"+X.pad(a.start.time.s,2,0):a.end.date.dom+"/"+a.end.date.m+"/"+a.end.date.y+" "+a.end.time.h+":"+X.pad(a.end.time.m,2,0)+":"+X.pad(a.end.time.s,2,0)},_formatButtonText:function(a){return a.toUpperCase()},_getRowIdentifier:function(a){return a.instance},_goToEditPoints:function(a){a=this._gridStore.get(a).mne;var b;this.isAdminPage()?(b="#trendlogworksheet/Points?site\x3d"+this.site,b+="\x26system\x3d"+this.system+"\x26device\x3d"+this.device+"\x26mne\x3d"+a,window.location.hash=b):(b=window.location.hash,
window.location.hash=this.getObfuscatedHash("#"+a+"/Points"))},_normalizeStructure:function(a){this._columnStructure=[l({selectorType:n.hitch(this,this._createSelectorCheckbox),id:"selectorCol",field:"mne",label:"",hidden:!rc.session.hasRole(rc.session.adminRoles.editTrendlogs,!0),unhidable:!0,sortable:!1,exporter:function(){return""}}),{field:"id",label:this.webviewStrings.instance,id:"mneCol",renderCell:n.hitch(this,this._buildTrendlogLinkCell)}];for(var d=0;d<a.length;d++){var f=null,f=a[d],g=
f.display!==this.displayEnums.EDITABLE;switch(f.type.toLowerCase()){case "text":"name"!==f.id?("description"===f.id&&(this._descriptionIsEditable=!g),f=h({editor:b,editOn:"none",label:this.getLabel(f.id),field:f.id,id:f.id+"Col",sortable:!1,canEdit:!1,hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,renderCell:n.hitch(this,this._buildDescriptionCell)})):f=h({editor:t,editOn:"click",label:this.getLabel(f.id),field:f.id,id:f.id+"Col",className:!this._canEdit||
g?"":"colourlessLink",canEdit:n.hitch(this,function(a,b){b.name===this.PlaceholderName&&(a=!0);return this._canEdit&&!a},g),hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,editorArgs:{baseClass:"rcTextBox",maxLength:f.width||256,disabled:g,validator:n.hitch(this,this._validateNameField)},formatter:n.hitch(this,this._hideCellDataForEditor)});break;case "point":f={field:f.id,label:this.getLabel(f.id),id:f.id+"Col",className:"pointCell",hidden:f.display===
this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,sortable:!1,printContent:n.hitch(this,function(a,b){var c=/\w+(\d+)/i.exec(a.id)[1]-1;return b.points[c]?b.points[c].name+" ("+b.points[c].mne+")":""},f),get:n.hitch(this,function(a,b,c){a=Number(b.exec(a)[2])-1;return a<c.points.length?c.points[a]:{name:null,mne:null}},f.id,this._pointIndexRegex),renderCell:n.hitch(this,this._buildPointCell)};break;case "bool":f="enable"!==f.id?h({editor:c,editOn:"click",label:this.getLabel(f.id),
field:f.id,id:f.id+"Col",className:!this._canEdit||g?"":"colourlessLink",canEdit:n.hitch(this,this._checkCanEdit,g),hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,resizable:!1,editorArgs:{disabled:g,store:this._byteSizeOptions,baseClass:"rcSelectBox"},set:function(a){return"4"===a.useHalfFloat?!1:!0},get:function(a){return a.useHalfFloat?"2":"4"},formatter:n.hitch(this,this.formatByteSizeCell)}):h({editor:r,label:this.getLabel(f.id),field:f.id,id:f.id+
"Col",className:!this._canEdit||g?"":"colourlessLink",canEdit:n.hitch(this,this._checkCanEdit,g),hidden:f.display===this.displayEnums.INVISIBLE,resizable:!1,simplePrint:!0,printContent:n.hitch(this,function(a,b){return"WV_PLACEHOLDER"===b.name?"":b.enable},f),editorArgs:{disabled:g,value:!0},formatter:n.hitch(this,this._hideCellDataForEditor)});break;case "multistate":var k=[];u.forEach(f.values,n.hitch(this,function(a){a=this._trendStates[a.toUpperCase()];var b="";switch(a){case 0:b=this.webviewStrings.polled;
break;case 1:b=this.webviewStrings.cov;break;case 2:b=this.webviewStrings.triggered}k.push({id:a,name:b})}));var m=new G({data:k}),f=h({editor:c,editOn:"click",field:f.id,label:this.getLabel(f.id),canEdit:n.hitch(this,this._checkCanEdit,g),id:f.id+"Col",className:!this._canEdit||g?"":"colourlessLink",resizable:!1,hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,editorArgs:{store:m,baseClass:"rcSelectBox"},formatter:n.hitch(this,function(a,b,c){var d=
"";c.name!==this.PlaceholderName&&(d=a.get(b).name);return d},m)});break;case "hourminsec":f=h({editor:t,editOn:"click",label:this.getLabel(f.id),field:f.id,id:f.id+"Col",className:!this._canEdit||g?"":"colourlessLink",resizable:!1,hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,printContent:n.hitch(this,function(a,b){var c=this._gridStore.get(b.id);return 1===c.logtype||2===c.logtype||"WV_PLACEHOLDER"===b.name?"":b.interval},f),editorArgs:{baseClass:"rcTextBox",
maxLength:f.width||256,disabled:g,pattern:"[0-9]{2}:[0-9]{2}:[0-9]{2}"},canEdit:n.hitch(this,function(a,b,c,d){if(!this._canEdit||c.name===this.PlaceholderName)return!1;d=this._grid.row(c.id);b=this._grid.cell(d,b);if(a||Number(c.logtype)!==this._trendStates.POLLED)return z.add(b.element,"hideValue"),z.remove(b.element,"colourlessLink"),!1;z.remove(b.element,"hideValue");this._canEdit&&z.add(b.element,"colourlessLink");return!0},g,f.id+"Col"),renderCell:n.hitch(this,function(a,b,c,d){c=y.create("span",
{innerHTML:c});a||Number(b.logtype)!==this._trendStates.POLLED?(z.add(d,"hideValue"),z.remove(d,"colourlessLink")):(z.remove(d,"hideValue"),this._canEdit&&z.add(d,"colourlessLink"));b.name===this.PlaceholderName&&(z.add(c,"invisible"),z.remove(d,"colourlessLink"));return c},g)});break;case "number":f="increment"!==f.id?h({editor:t,editOn:"click",label:this.getLabel(f.id),field:f.id,id:f.id+"Col",className:!this._canEdit||g?"":"colourlessLink",canEdit:n.hitch(this,this._checkCanEdit,g),resizable:!1,
editorArgs:{baseClass:"rcTextBox",maxLength:f.width||256,disabled:g,pattern:"(\\d+)"},hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,formatter:n.hitch(this,this._hideCellDataForEditor)}):h({editor:t,editOn:"click",label:this.getLabel(f.id),field:f.id,id:f.id+"Col",resizable:!1,className:!this._canEdit&&g?"":"colourlessLink",hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,editorArgs:{baseClass:"rcTextBox",
maxLength:f.width||256,disabled:g,pattern:"^(-?)(\\d+)(\\.?)(\\d?)(\\d?)$"},canEdit:n.hitch(this,function(a,b,c){if(!this._canEdit||c.name===this.PlaceholderName)return!1;var d=this._grid.row(c.id);b=this._grid.cell(d,b);if(a||Number(c.logtype)!==this._trendStates.COV)return z.add(b.element,"hideValue"),z.remove(b.element,"colourlessLink"),!1;z.remove(b.element,"hideValue");this._canEdit&&z.add(b.element,"colourlessLink");return!0},g,f.id+"Col"),printContent:n.hitch(this,function(a,b){var c=this._gridStore.get(b.id);
return 0===c.logtype||2===c.logtype?"":c.increment},f),renderCell:n.hitch(this,function(a,b,c,d){c=y.create("span",{innerHTML:c});a||Number(b.logtype)!==this._trendStates.COV?(z.add(d,"hideValue"),z.remove(d,"colourlessLink")):(z.remove(d,"hideValue"),this._canEdit&&z.add(d,"colourlessLink"));b.name===this.PlaceholderName&&(z.add(c,"invisible"),z.remove(d,"colourlessLink"));return c},g)});break;case "object":f={label:this.getLabel(f.id),field:f.id,id:f.id+"Col",resizable:!1,className:g?"":"colourlessLink",
hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,printContent:n.hitch(this,function(a,b){var c=this._gridStore.get(b.id).advanced,d="";c&&(d=!0===c.start.always?"Always":this._formatAdvanced(c,!0),c=!0===c.end.never?"Never":this._formatAdvanced(c,!1),d="Start: "+d+" Stop: "+c);return d},f),renderCell:n.hitch(this,function(a,b,c,d){c=y.create("div",{});y.create("span",{"class":"webviewIcon optionsIcon"},c,"first");b.name!==this.PlaceholderName?this.own(E(d,
"click",n.hitch(this,this._showAdvancedOptionsDialog,a,b))):(z.add(c,"invisible"),z.remove(d,"colourlessLink"));return c},f)};break;case "datetime":f={field:f.id,label:this.getLabel(f.id),id:f.id+"Col",resizable:!1,hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE,renderCell:n.hitch(this,this.renderDateTimeCell)};break;default:f={field:f.id,label:this.getLabel(f.id),id:f.id+"Col",hidden:f.display===this.displayEnums.INVISIBLE,unhidable:f.display===this.displayEnums.INVISIBLE}}this._columnStructure.push(f)}},
_trendlogCount:function(){return this._grid&&this._grid.store?this._grid.store.data.length:0},_onOkToSave:function(a,b){var c=a.map(n.hitch(this,function(a){a=n.mixin(this._grid.store.get(a),this._grid.dirty[a]);a.useHalfFloat=!0===a.useHalfFlat||"2"===a.useHalfFloat;return a}));this._saveTrendlogs(c).then(n.hitch(this,function(){J.publish("alert",{message:this.errorStrings.successfulSave,type:"success"});this._grid.save();this._reloadData(!0);this._resetSaveButton();b.resolve()}),n.hitch(this,function(){this._grid.revert();
this._reloadData(!0);this._resetSaveButton()}))},_onSelectionChange:function(a){var b="dgrid-select"===a.type,c=null,d=null;u.forEach(a.rows,n.hitch(this,function(a){c=F(".dijitCheckBox",a.element)[0];d=q.byNode(c);d.set("checked",b)}));a=Object.keys(this._grid.selection).filter(n.hitch(this,function(a){return this._grid.selection[a]}));this._toolbar.set("isSelectAll",a.length!==this._grid.store.data.filter(n.hitch(this,function(a){return this._canAccessRow(a)})).length);a=0<a.filter(n.hitch(this,
function(a){return this._canEditRow(this._grid.store.get(a))})).length;this._toolbar.deleteButton.set("disabled",!a)},_parseVisibleGridData:function(a,b,c,d){if(d.hasOwnProperty("points"))for(var f=0;f<d.points.length;++f)d["point"+(f+1)]=d.points[f];this.inherited(arguments)},_performAdd:function(a){var b=this._trendInUse(a);if(b.inUse)J.publish("sticky",{message:b.message,type:"error"});else{var c={siteId:this.site,mne:this.mnemonic,name:a.name,instance:a.specificInstance,systemId:this.system};
this._validateApprovalSessionWithReason(c).then(n.hitch(this,function(){Y.post("TrendLogs",{handleAs:"json",preventCache:!0,data:c}).then(n.hitch(this,function(a){a.errStatus===this.SuccessCode&&this._reloadData(!0);this._displayError(a)}),n.hitch(this,function(a){J.publish("sticky",{message:this.errorStrings.unexpectedError,type:"error"});console.error(this.declaredClass+" - _performAdd(): Error Adding Trend Log",a)}))}),function(){})}},_performDelete:function(){var a=[],b=this._grid.selection,c;
for(c in b)if(b[c]){var d=this._grid.store.get(c);a.push(d.mne)}this._deleteTrendlogs(a).then(n.hitch(this,this._reloadData,!0))},_populateGridStore:function(a){var b=[],c=[this.mnemonic.substring(0,this.mnemonic.length-1)+"%"],d=n.hitch(this,function(a){var d=this._instanceRegex.exec(a.mne);d?(a.id=Number(d[3]),b.push(a),c.push(a.mne),a.points.forEach(function(a){c.push(a.mne)})):console.error(this.declaredClass+" - populateGridStore(dataToPopulate): Could not add trend log")});u.forEach(a,d);this._buildAuditLogContext(c);
this._gridStore.setData(b)},_removeDeletedTrendlogsFromGrid:function(a){a.forEach(n.hitch(this,function(a){a=this._instanceRegex.exec(a);null!==a&&this._grid.store.remove(Number(a[3]))}))},_removeTrendlog:function(){if(!this._canEdit)return!1;var a=[],b=this._grid.selection,c;for(c in b)b[c]&&a.push(c);this._confirmDelete(a,this.webviewStrings.confirmDeleteTrendlogs)},_resetSaveButton:function(){this.makeClean();this._toolbar.sendButton.set("disabled",!0);this._toolbar.cancelButton.set("disabled",
!0)},_resizeGrid:function(){this.inherited(arguments);if(null!==this._grid){var a=A.get("rcSystemContent","height"),b=0;x.byId("rcAdminContentHeader")&&(b+=A.get("rcAdminContentHeader","height"));var c=A.get(this.buttonBar.domNode,"height"),d=A.get(this.buttonBar.domNode,"paddingTop"),f=A.get(this.buttonBar.domNode,"paddingBottom"),g=A.get(this.buttonBar.domNode,"marginTop"),h=A.get(this.buttonBar.domNode,"marginBottom"),c=c+d+f+g+h,d=2*A.get(this._grid.domNode,"marginTop"),f=2*A.get(this._grid.domNode,
"borderWidth");A.set(this._grid.domNode,"height",a-(b+c+(d+f))+"px")}},_saveChanges:function(){if(this._canEdit){var a=[],b=[],c=new v,d=null,f=null,g=Object.keys(this._grid.dirty);u.forEach(g,n.hitch(this,function(c){d=Object.keys(this._grid.dirty[c]);for(var g=0;g<d.length;g++)if(f=d[g],-1!==this._fieldThatClearData.indexOf(f)&&("advanced"!==f||this._grid.dirty[c].advanced.clearLogData)){b.push(this._grid.store.get(c).name);break}a.push(c)}));if(0<b.length){var h="\x3cul\x3e";u.forEach(b,function(a){h+=
"\x3cli\x3e"+a+"\x3c/li\x3e"});h+="\x3c/ul\x3e "+this.webviewStrings.wishToContinue;null===this._clearTrendDialog&&(this._clearTrendDialog=new T({title:this.webviewStrings.confirmClear,type:aa.types.binary}));this._clearTrendDialog.set("content",h);this._clearTrendDialog.set("text",this.webviewStrings.wipeTrendLogs+": ");var k=this._clearTrendDialog.on("close",n.hitch(this,function(b){switch(b){case aa.returnValues.oneOrYes:this._onOkToSave(a,c);break;case aa.returnValues.none:break;default:console.error(this.declaredClass+
" - _saveChanges(): Unknown choice",b)}k.remove()}));this.own(k);this._clearTrendDialog.open()}else this._onOkToSave(a,c);return c.promise}},_saveTrendlogs:function(a){var b=new v,c={};a.forEach(function(a){c[a.mne]=D.stringify(a)});var d={siteId:this.site,systemId:this.system,instanceData:D.stringify(c)};this._validateApprovalSessionWithReason(d).then(n.hitch(this,function(){Y.put("TrendLogs",{handleAs:"json",preventCache:"true",data:d}).then(n.hitch(this,function(a){a.errStatus===this.SuccessCode?
a.errors&&Object.keys(a.errors).length?(this._displayUpdateErrorMessage(a.errors),b.reject()):b.resolve():(a.errors&&Object.keys(a.errors).length?this._displayUpdateErrorMessage(a.errors):this._displayError(a),b.reject())}),n.hitch(this,function(a){J.publish("sticky",{message:this.errorStrings.unexpectedError,type:"error"});console.error(this.declaredClass+" - _saveTrendlogs(): Could not save trend log",a);b.reject()}))}),function(){});return b.promise},_setAlarmContext:function(){Q.setAlarmContextForBACnetDevice(this.system,
this.device)},_setCanEditFlag:function(){this._canEdit=rc.session.hasRole(rc.session.adminRoles.editTrendlogs)},_setTitle:function(a){this.inherited(arguments);this._contentHeaderTitle&&w.set(this._contentHeaderTitle,{innerHTML:a})},_setTrendlogBaseURL:function(){var a=this.getUnobfuscatedHash(window.location.hash);/#\d+(m|s)tls/i.test(a)?this._trendlogBaseURL=a.substring(0,a.length-1):this._trendlogBaseURL="#"+this.mnemonic.substring(0,this.mnemonic.length-1)},_showAdvancedOptionsDialog:function(a,
b){this._emitDialogEditorShowEvent(b,"advancedCol");var c=this._gridStore.get(b.id).advanced;null===this._advancedPropertiesDialog&&(this._advancedPropertiesContent=new W({_canEdit:this._canEdit,disableEditStart:a.object.start.display!==this.displayEnums.EDITABLE,disableEditEnd:a.object.end.display!==this.displayEnums.EDITABLE,onHide:n.hitch(this,this._emitDialogEditorHideEvent,b,"advancedCol")}),this._advancedPropertiesDialog=new f({title:this.rcStrings.advanced,actionBarTemplate:L,content:this._advancedPropertiesContent.domNode}),
this._advancedPropertiesDialog.cancelButton.set("label",this.webviewStrings.cancel.toLocaleUpperCase()));this._advancedPropertiesDialog._onSubmit=n.hitch(this,function(a){if(this._advancedPropertiesContent.isValid()){var b=this._advancedPropertiesContent.get("value"),c=this._gridStore.get(a.id);this._advancedFieldChanged(c.advanced,b)&&(c.advanced=b,this._gridStore.put(c,{id:a.id}),this._grid.dirty.hasOwnProperty(a.id)?this._grid.dirty[a.id].advanced=b:this._grid.dirty[a.id]={advanced:b},this._toolbar.sendButton.set("disabled",
!1),this._toolbar.cancelButton.set("disabled",!1),this.makeDirty());this._advancedPropertiesDialog.onExecute();this._advancedPropertiesDialog.execute(this._advancedPropertiesDialog.get("value"))}},b);this._advancedPropertiesContent.set("value",c);this._advancedPropertiesDialog.show()},_sortIncrement:function(a,b,c){return a?X.alphaNumericSort(b.increment.toString(),c.increment.toString()):-1*X.alphaNumericSort(b.increment.toString(),c.increment.toString())},_trendInUse:function(a){var b=function(a,
b){return b.id===a&&b.name!==this.PlaceholderName},c=!1,d=null;0<this._gridStore.query({name:a.name}).length?(d=this.worksheetStrings.nameInUse,c=!0):-1!==a.specificInstance&&0<this._gridStore.query(n.hitch(this,b,a.specificInstance)).length&&(d=this.worksheetStrings.instanceInUse,c=!0);return{inUse:c,message:d}},_toggleButtons:function(){var a=this.inherited(arguments);"undefined"!==typeof this._toolbar.deleteButton&&this._toolbar.deleteButton.set("disabled",!this._canEdit||1>a)},_updateGrid:function(a){a.initialLoad&&
(this._populateGridStore(a.data.data),this._buildGrid(a.data))},_updateIntervalStyling:function(a){var b=a.cell.row,c=b.data,d=this._grid.cell(b,"intervalCol");void 0!==d.element&&(a.grid.columns.intervalCol.editorArgs.disabled||Number(c.logtype)!==this._trendStates.POLLED?(z.add(d.element,"hideValue"),z.remove(d.element,"colourlessLink")):(z.remove(d.element,"hideValue"),this._canEdit&&z.add(d.element,"colourlessLink")));b=this._grid.cell(b,"incrementCol");void 0!==b.element&&(a.grid.columns.incrementCol.editorArgs.disabled||
Number(c.logtype)!==this._trendStates.COV?(z.add(b.element,"hideValue"),z.remove(b.element,"colourlessLink")):(z.remove(b.element,"hideValue"),this._canEdit&&z.add(b.element,"colourlessLink")))},_validateNameField:function(a){a=a.toUpperCase().trim();var b=O.mnemonics.concat(["TBL","GRP","AY","SS"]);if(!a||!isNaN(a)||-1!==N.reservedKeywords.indexOf(a)||-1!==b.indexOf(a)||-1!=="ALARM-TYPE ALARM APDIAL CALL CLEAR CLOSE DALARM DECLARE DISABLE ENABLE END ELSE FOR GOSUB GOTO HANGUP IDLE IF IF- IF LET NEXT ON-ALARM ON-ERROR ON OPEN PHONE PRINT-AT PRINT RELINQUISH REMOTE-GET REMOTE-SET REM RETURN SET-PRINTER SET-PRIORITY SHARE-NET SHARE START STOP THEN WAIT WRITE".split(" ").indexOf(a))return!1;
var c=/(\d+)([a-z|\-]+)(\d+)/i.exec(a);if(null!==c)return-1===b.indexOf(c[2]);c=/([a-z|\-|\_|\s]+)(\d+)/i.exec(a);if(null!==c)return-1===b.indexOf(c[1]);c=/(\d+)([a-z|\-]+)/i.exec(a);return null!==c?-1===b.indexOf(c[2]):!0},destroy:function(){this.inherited(arguments);this._adminTopContent&&y.destroy(this._adminTopContent);this._clearFetchTimeout()}})})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(p,m,k){return p(null,{minSize:0,
maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){k.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var h=k.getEnclosingWidget(this.domNode.parentNode);h&&h.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);k.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},
resize:function(h){h&&m.setMarginBox(this.domNode,h);this.inherited(arguments)},_set:function(h,g){this[h]=g},watch:function(){},getParent:function(){return k.getEnclosingWidget(this.domNode.parentNode)}})})},"webview/admin/worksheets/widgets/AdvancedTrendPropertyEditor":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/focus dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/query dojo/text!./templates/AdvancedTrendPropertyEditor.html ../../../util/dateUtils dijit/form/CheckBox dijit/form/TimeTextBox rc/widget/DateTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return d("webview/admin/worksheets/widgets/AdvancedTrendPropertyEditor",[m,p,k],{templateString:q,baseClass:"",clearLogData:!1,forClientSide:!1,end:{date:null,time:null,never:!0},start:{date:null,time:null,always:!0},stopWhenFull:!1,_canEdit:!1,constructor:function(){this.rcStrings=r;this.webviewStrings=c},postCreate:function(){this.inherited(arguments);f.toggle(this.clearLogDataContainer,"hidden",this.forClientSide);this._createConnections();this._toggleFields();
this._canEdit&&this._setDisabledState()},focus:function(){h.focus(this.domNode)},isValid:function(){var a=null,b=null;if(!this.alwaysStartCB.get("checked")){if(!this.startDate.isValid()||!this.startTime.isValid())return!1;var a=new Date(this.startDate.get("value")),c=new Date(this.startTime.get("value")),a=a.setHours(c.getHours(),c.getMinutes(),c.getSeconds())}if(!this.neverStopCB.get("checked")){if(!this.endDate.isValid()||!this.endTime.isValid())return!1;b=new Date(this.endDate.get("value"));c=
new Date(this.endTime.get("value"));b=b.setHours(c.getHours(),c.getMinutes(),c.getSeconds())}return null!==a&&null!==b&&a>b?(f.add(this.endDate.domNode,"dijitError"),f.add(this.endTime.domNode,"dijitError"),!1):!0},_cleanupInvalids:function(){var a=t(".dijitError",this.domNode);g.forEach(a,function(a){f.remove(a,"dijitError")})},_createConnections:function(){g.forEach([this.startTime,this.endTime],l.hitch(this,function(a){this.own(b(a,"blur",l.hitch(this,this.focus)))}));this.own(b(this.alwaysStartCB,
"change",l.hitch(this,function(a){this.startDate.set("disabled",a||this.disableEditStart);this.startTime.set("disabled",a||this.disableEditStart)})));this.own(b(this.neverStopCB,"change",l.hitch(this,function(a){this.endDate.set("disabled",a||this.disableEditEnd);this.endTime.set("disabled",a||this.disableEditEnd)})))},_setDisabledState:function(){this.startDate.set("disabled",this.alwaysStartCB.get("checked"));this.startTime.set("disabled",this.alwaysStartCB.get("checked"));this.endDate.set("disabled",
this.neverStopCB.get("checked"));this.endTime.set("disabled",this.neverStopCB.get("checked"))},_setValueAttr:function(a){if(a.start){this.start=a.start;var b=new Date;null!==this.start.date&&(this.start.date.m--,b=u.bacnetDateToJSDate(this.start.date));null!==this.start.time&&b.setHours(this.start.time.h,this.start.time.m,this.start.time.s);this.startDate.set("value",b);this.startTime.set("value",b);this.alwaysStartCB.set("checked",this.start.always)}a.end&&(this.end=a.end,b=new Date,null!==this.end.date&&
(this.end.date.m--,b=u.bacnetDateToJSDate(this.end.date)),null!==this.end.time&&b.setHours(this.end.time.h,this.end.time.m,this.end.time.s),this.endDate.set("value",b),this.endTime.set("value",b),this.neverStopCB.set("checked",this.end.never));a.hasOwnProperty("stopWhenFull")&&(this.stopWhenFull=a.stopWhenFull,this.stopWhenFullCB.set("checked",this.stopWhenFull));this.clearLogData=!1;this.clearLogDataCB.set("checked",!1);this._cleanupInvalids()},_toggleFields:function(){this.alwaysStartCB.set("disabled",
!this._canEdit);this.startDate.set("disabled",!this._canEdit);this.startTime.set("disabled",!this._canEdit);this.neverStopCB.set("disabled",!this._canEdit);this.endDate.set("disabled",!this._canEdit);this.endTime.set("disabled",!this._canEdit);this.stopWhenFullCB.set("disabled",!this._canEdit);this.clearLogDataCB.set("disabled",!this._canEdit)},_getDateValue:function(a){var b=new Date(this[a+"Date"].get("value"));a=new Date(this[a+"Time"].get("value"));a={date:{dom:255,m:255,y:255},time:{h:a.getHours(),
m:a.getMinutes(),s:a.getSeconds()}};a.date=u.jsDateToBACnetDate(b);a.date.m++;return a},_getValueAttr:function(){var a=this.start,b=this.end;this.alwaysStartCB.get("checked")?(a.date=null,a.time=null):a=this._getDateValue("start");a.always=this.alwaysStartCB.get("checked");this.neverStopCB.get("checked")?(b.date=null,b.time=null):b=this._getDateValue("end");b.never=this.neverStopCB.get("checked");return{start:a,end:b,stopWhenFull:this.stopWhenFullCB.get("checked"),clearLogData:this.clearLogDataCB.get("checked")}}})})},
"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(p,m,k,h,g){return p("dijit.form.TimeTextBox",g,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:h,_selector:"time",value:new Date(""),maxHeight:-1,openDropDown:function(d){this.inherited(arguments);this.dropDown.on("input",k.hitch(this,function(){this.set("value",this.dropDown.get("value"),!1)}))},_onInput:function(){this.inherited(arguments);
var d=this.get("displayedValue");this.filterString=d&&!this.parse(d,this.constraints)?d.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return g("dijit._TimePicker",
[a,n],{baseClass:"dijitTimePicker",pickerMin:"T00:00:00",pickerMax:"T23:59:59",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:h.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){f.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",
a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,d){a=this.ownerDocument.createDocumentFragment();for(b=0;b<this._maxIncrement;b++)(c=this._createOption(b))&&a.appendChild(c);return a},_showText:function(){var a=h.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);var b=function(a){return 3600*
a.getHours()+60*a.getMinutes()+a.getSeconds()},c=b(this._clickableIncrementDate),b=b(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=a(this.pickerMin);this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=b/c;a=a(this.pickerMax);a.setFullYear(1970,0,1);a=.001*(a.getTime()-this._refDate.getTime());this._maxIncrement=Math.ceil((a+1)/c);c=this._getFilteredNodes();!c.firstChild&&this.filterString?(this.filterString="",this._showText()):
this.domNode.appendChild(c)},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in{clickableIncrement:1,visibleIncrement:1,pickerMin:1,pickerMax:1})b in a&&(this[b]=a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var b=new Date(this._refDate),c=this._clickableIncrementDate;b.setHours(b.getHours()+c.getHours()*a,b.getMinutes()+c.getMinutes()*a,b.getSeconds()+
c.getSeconds()*a);"time"==this.constraints.selector&&b.setFullYear(1970,0,1);var d=k.format(b,this.constraints);if(this.filterString&&0!==d.toLowerCase().indexOf(this.filterString))return null;c=this.ownerDocument.createElement("div");c.className=this.baseClass+"Item";c.date=b;c.idx=a;l.create("div",{"class":this.baseClass+"ItemInner",innerHTML:d},c);d=1>a%this._visibleIncrement&&-1<a%this._visibleIncrement;a=!d&&!(a%this._clickableIncrement);d?c.className+=" "+this.baseClass+"Marker":a&&(c.className+=
" "+this.baseClass+"Tick");this.isDisabledDate(b)&&(c.className+=" "+this.baseClass+"ItemDisabled");this.value&&!m.compare(this.value,b,this.constraints.selector)&&(c.selected=!0,c.className+=" "+this.baseClass+"ItemSelected",this._selectedDiv=c,d?c.className+=" "+this.baseClass+"MarkerSelected":a&&(c.className+=" "+this.baseClass+"TickSelected"),this._highlightOption(c,!0));return c},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(a,
b){var c=a.target.date||a.target.parentNode.date;c&&!this.isDisabledDate(c)&&(this._set("value",c),this.emit("input"),b&&(this._highlighted_option=null,this.set("value",c),this.onChange(c)))},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}d.toggle(a,this.baseClass+"ItemHover",b);d.contains(a,this.baseClass+
"Marker")?d.toggle(a,this.baseClass+"MarkerHover",b):d.toggle(a,this.baseClass+"TickHover",b)}},handleKey:function(a){if(a.keyCode==r.DOWN_ARROW)return this.selectNextNode(),this._onOptionSelected({target:this._highlighted_option},!1),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==r.UP_ARROW)return this.selectPreviousNode(),this._onOptionSelected({target:this._highlighted_option},!1),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==r.ENTER||a.keyCode===r.TAB){if(!this._keyboardSelected&&
a.keyCode===r.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option},!0);return a.keyCode===r.TAB}},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,!1)},onClick:function(a){this._onOptionSelected({target:a},!0)}})})},"webview/admin/worksheets/trendLogs/TrendLogToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/text!./templates/TrendLogToolbar.html ../widgets/WorksheetToolbar webview/widget/IconButton".split(" "),
function(p,m,k,h,g){return p("webview/admin/worksheets/trendLogs/TrendLogToolbar",[g],{templateString:h,_buttons:null,getPageButtons:function(){return this._buttons},_buildButtonMap:function(){this._buttons={sendButton:this.sendButton,cancelButton:this.cancelButton,addButton:this.addButton,deleteButton:this.deleteButton,columnButton:this.columnButton}},_setupOnClicks:function(){this.own(k(this.excelButton.domNode,"click",m.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),
k(this.sendButton.domNode,"click",m.hitch(this,function(){if(!this.sendButton.get("disabled"))this.onSend()})),k(this.cancelButton.domNode,"click",m.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancel()})),k(this.addButton.domNode,"click",m.hitch(this,function(){if(!this.addButton.get("disabled"))this.onAdd()})),k(this.deleteButton.domNode,"click",m.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onDelete()})),k(this.columnButton.domNode,"click",m.hitch(this,
function(d){if(!this.columnButton.get("disabled"))this.onToggleColumns(d)})),k(this.exportButton.domNode,"click",m.hitch(this,function(){if(!this.exportButton.get("disabled"))this.onExport()})))}})})},"webview/admin/SetupFinished":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/i18n!webview/nls/all dojo/i18n!webview/nls/roles dojo/request/xhr dojo/string dojo/text!webview/admin/templates/setupFinished.html dojox/html/entities rc/_base/util ./_Widget ../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t){return p("webview/admin/SetupFinished",[t],{roleStrings:d,templateString:r,webviewStrings:null,site:"",system:"",wizardMemoryKey:null,prevWizardStepHash:null,constructor:function(){this.webviewStrings=g},onStartWizard:function(){this.emit("startWizard",null);this.inherited(arguments);rc.setupWizard.hideNext()},onDestroyWizard:function(){this.emit("destroyWizard",null);this.inherited(arguments)},_onClickLink:function(b){rc.setupWizard&&rc.setupWizard.stop()},postCreate:function(){this.inherited(arguments);
this.setupContentPane.setMainContent(this.contentNode);this._hideUnuseableLinks();rc.setupWizard&&(this.wizardMemoryKey=rc.setupWizard.wizardMemoryKey,this.prevWizardStepHash=rc.setupWizard.prevWizardStepHash,null!==this.wizardMemoryKey&&sessionStorage.setItem(this.wizardMemoryKey,rc.setupWizard.wizardMemoryValue),rc.setupWizard.stop());l.get("site/",{handleAs:"json",query:{siteId:this.site}}).always(m.hitch(this,function(c){var d=null;200===c.errStatus&&(d=c.properties.urlName);c=encodeURIComponent(this.site);
null!==this.system&&(d?(d=b.getWindowLocationOrigin()+rc.rootPath+d+"/"+this.system+"/",k.set(this.visitSiteNode,"href",d)):h.add(this.visitSiteNode,"hidden"));"admin"===rc.session.getUsername().toLowerCase()&&k.set(this.createSiteNode,"href",rc.adminUrl+"#addsite");rc.session.hasRole(rc.session.roles.admin)&&k.set(this.createSystemNode,"href",rc.adminUrl+"#addsystem?site\x3d"+c);rc.session.hasRole(rc.session.roles.usersAdmin)&&(k.set(this.createUserNode,"href",rc.adminUrl+"#users/adduser?site\x3d"+
c),k.set(this.createRoleNode,"href",rc.adminUrl+"#rolePermissions?site\x3d"+this.site+"\x26roleId\x3d-1"));rc.session.hasRole(rc.session.roles.navTreeAdmin)&&k.set(this.createTreeNode,"href",rc.adminUrl+"#trees?site\x3d"+c);rc.session.hasRole(rc.session.roles.navGroupAdmin)&&k.set(this.createGroupNode,"href",rc.adminUrl+"#navgroups?site\x3d"+c);rc.session.hasRole(rc.session.roles.entSchedAdmin)&&k.set(this.createScheduleNode,"href",rc.adminUrl+"#schedules?site\x3d"+c);k.set(this.visitSiteNode,"innerHTML",
g.visitSiteNode);k.set(this.visitSiteNode,"title",g.visitSiteNode);this.onInitSuccess()}))},_hideUnuseableLinks:function(){h.toggle(this.createSiteItem,"hidden","admin"!==rc.session.getUsername().toLowerCase());h.toggle(this.createSystemItem,"hidden",!rc.session.hasRole(rc.session.roles.admin));h.toggle(this.createUserItem,"hidden",!rc.session.hasRole(rc.session.roles.usersAdmin));h.toggle(this.createRoleItem,"hidden",!rc.session.hasRole(rc.session.roles.usersAdmin));h.toggle(this.createTreeItem,
"hidden",!rc.session.hasRole(rc.session.roles.navTreeAdmin));h.toggle(this.createGroupItem,"hidden",!rc.session.hasRole(rc.session.roles.navGroupAdmin));h.toggle(this.createScheduleItem,"hidden",!rc.session.hasRole(rc.session.roles.entSchedAdmin))},destroy:function(){this.inherited(arguments);sessionStorage.getItem(this.wizardMemoryKey)&&window.location.hash!==this.prevWizardStepHash&&sessionStorage.removeItem(this.wizardMemoryKey)}})})},"webview/reliable/EnterpriseSchedule":function(){define("dijit/form/FilteringSelect dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/unload dojo/aspect dojo/date dojo/Deferred dojo/promise/all dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/hash dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/enterpriseSchedules dojo/i18n!webview/nls/errorMessages dojo/io-query dojo/json dojo/mouse dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./_enterpriseSchedule/templates/EnterpriseSchedule.html dojo/topic dojox/html/entities rc/_base/Error rc/_base/test rc/_base/util rc/_Widget rc/bacnet/error rc/util/encoding/base16 rc/util/encoding/base64 rc/util/notices ../_base/tooltip ../util/dateUtils ../util/globalConstants ../util/util ../widget/WarningDialog ../widget/WarningDialogEnums ./_enterpriseSchedule/StoreMixin ./_enterpriseSchedule/calendarEvents/CalEvent ./_enterpriseSchedule/widget/_BlockTreeNode ./_enterpriseSchedule/widget/BlockManager ./_enterpriseSchedule/overriddenViews/HorizontalRenderer ./_enterpriseSchedule/overriddenViews/LabelRenderer ./_enterpriseSchedule/overriddenViews/MatrixView ./_enterpriseSchedule/overriddenViews/VerticalRenderer dijit/layout/BorderContainer ./_enterpriseSchedule/Calendar ./_enterpriseSchedule/EnterpriseScheduleToolbar ./_enterpriseSchedule/EventEditor ./_enterpriseSchedule/ScheduleTree ../widget/TitlePane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R,V,Q,X,Z,da,T,aa,Y,U,ba,ca,ea,ha){return g("webview/reliable/EnterpriseSchedule",[W],{SUMMARY_FETCH_INTERVAL:1E4,bacnetOnly:!0,blockId:0,blockManagerDialog:null,blockStore:null,blockFilteringSelect:null,blocks:null,data:null,instanceDefaultAppliesTo:null,isFirstLoad:!0,newBlock:!1,pointInstance:0,previouslySelected:null,saving:!1,searchPath:"tree/objects",summaryColours:null,templateString:K,validateDeferred:null,
validateData:null,view:"schedule",warningDialog:null,widgetsInTemplate:!0,_adminContent:null,_blockTree:null,_blockTreeModel:null,_blockTreeStore:null,_cancelConnect:null,_prevBlockId:null,_currentBlockId:null,_editPaneHeight:0,_errorTypes:{error:0,reject:1,abort:2,success:3},_eventCreationConfirmationDialog:null,_fetchPromiseObj:{},_genericConfirmDialog:null,_genericConfirmDialogHandle:null,_hasCostRate:!1,_hash:null,_inSummary:!0,_isBlockRequest:!1,_menuItems:null,_path:"EnterpriseSchedules/",_reloadTimer:null,
_rightPaneClosed:!1,_rightPaneClosedWidth:53,_rightPaneMinWidth:250,_rightPaneOpenWidth:null,_saveLoadEvent:null,_saveConnect:null,_scheduleMap:null,_tooltipIds:null,_treeRootTemplate:{},_updateScheduleDetailsDeferred:null,_updating:!1,ERROR_CODE:{Success:200,Duplicate:501,NotExist:502,Unknown:504,SiteDoesNotExist:505,Insufficient:506,WrongDataType:507,BACnetError:508,BlockAlreadyExists:509,ValidationInProgress:510,UserCancelled:511,Insufficient_Protocol:513,NoScheduleTree:514,EventNotFound:515,ScheduleEventNotFound:516,
SystemDoesNotExist:517,ScheduleNotFound:518,ScheduleEventUnLinked:519},constructor:function(a){this.site=a.site||-1;this.warningDialog=new Y({title:"",type:U.types.binary,text:""});this._treeRootTemplate={id:"root",name:"root",type:"root",value:null,hasChildren:!0}},postCreate:function(){this.inherited(arguments);this._fetchPromiseObj.EnterpriseScheduleData=this._fetchEnterpriseSchedule(this.pointInstance,this.blockId);this._tooltipIds=[];this._setUpHash();this._switchView(this.view)},addEvent:function(a,
b){var c=this.calendar.on("storeReady",d.hitch(this,function(a,b){this.finishedEvent(a,this._hasCostRate,b);this.eventEditor.setStoreReady(!0);c.remove()},b,a.reason));a.color=this.data.isBlockGroup?"#5A245E":this.colorMap[a.schedules[0]];a.dirty="dirty";this.calendar.add(a)},buildRendering:function(){this.inherited(arguments);I.get("BlockManager/GetESName",{query:{enterpriseId:this.pointInstance},handleAs:"json"}).then(d.hitch(this,this._setTitle))},calendarRendered:function(){this.isFirstLoad&&
(this.isFirstLoad=!1,this.calendar.columnView.set("startTimeOfDay",{hours:6,duration:3E3}),this.onInitSuccess());if(!this.canEdit||this._inSummary)this.calendar.disable(),u.add(this.editEventPane.domNode,"hidden"),u.add(this.scheduleTreePane.domNode,"topPane");this.eventEditor.colorMap=this.colorMap;this.eventEditor.enterpriseId=this.data.entId;this.eventEditor.render(this.data.schedule.id,this.calendar.getScheduleInfo(),this.scheduleTree,this.data.dataType,this.data.stateValues,this.data.minuteIncrement,
this.data.currency);this.eventEditor.setDefaultAppliesTo(this.instanceDefaultAppliesTo);this.eventEditor.set("appliesToIsReadOnly",this.data.isBlockGroup);this.eventEditor.setStoreReady(!0);this.closeEventPane();this.eventEditor.setStoreReady(!1)},cancel:function(){this._changeSchedule(this.data.schedule.id,!0)},clearToasts:function(){X.widget.clear()},closeEventPane:function(){this.editEventPane.open?this.editEventPane.arrowNode.click():this.eventEditor.toggleEditState();this.eventEditor.reset()},
deleteEvent:function(a,b,c){var f=this.calendar.on("storeReady",d.hitch(this,function(a,b){this.finishedEvent(a,!1,b);this.eventEditor.setStoreReady(!0);f.remove()},c,a.reason));a.action="delete";a.dirty="dirty";this.calendar.remove(a,b)},dndEditDateRange:function(a){for(var b=this.calendar.store.query({eventId:a.item.eventId}),c=0;c<b.length;c++){var d=b[c],f=null,g=null;a.item.id!==d.id?(f=new Date(d.endTime),g=new Date(d.startTime)):(0===r.compare(a.source._editEndTimeSave,a.item.endTime,"date")&&
0===r.compare(a.source._editStartTimeSave,a.item.startTime,"date")||N.publish("alert",{message:y.modifyDateRange,type:"info"}),f=new Date(a.source._editEndTimeSave),g=new Date(a.source._editStartTimeSave));f.setHours(a.item.endTime.getHours(),a.item.endTime.getMinutes());g.setHours(a.item.startTime.getHours(),a.item.startTime.getMinutes());d.startTime=new Date(g);d.endTime=new Date(f);a.item.id===d.id&&(a.item.startTime=new Date(g),a.item.endTime=new Date(f));this.calendar.store.put(d);g=f=null}},
dndEditTerminating:function(a){for(var b=a.item.startTime,c=a.item.endTime,d=this.calendar.store.query(function(b){return b.eventId===a.item.eventId}),f=0;f<d.length;f++){var g=d[f];g.startTime.setHours(b.getHours(),b.getMinutes(),b.getSeconds(),0);g.endTime.setHours(c.getHours(),c.getMinutes(),c.getSeconds(),0);this.calendar.store.put(g,{id:g.id})}},dndMoveDay:function(a){if(0!==r.compare(a.source._editEndTimeSave,a.item.endTime,"date")||0!==r.compare(a.source._editStartTimeSave,a.item.startTime,
"date"))for(var b=this.calendar.store.query({eventId:a.item.eventId}),c=0;c<b.length;c++){var d=b[c],f=null,g=null,f=new Date(d.endTime),g=new Date(d.startTime);g.setFullYear(a.item.startTime.getFullYear(),a.item.startTime.getMonth(),a.item.startTime.getDate());f.setFullYear(a.item.endTime.getFullYear(),a.item.endTime.getMonth(),a.item.endTime.getDate());d.startTime=new Date(g);d.endTime=new Date(f);a.item.id===d.id&&(a.item.startTime=new Date(g),a.item.endTime=new Date(f));this.calendar.store.put(d)}},
editEvent:function(a,b){var c=this.calendar.on("storeReady",d.hitch(this,function(a,b){this.finishedEvent(a,this._hasCostRate,b);this.eventEditor.setStoreReady(!0);c.remove()},b,a.reason));a.dirty="dirty";this.calendar.edit(a)},fetch:function(a,b,c){this.calendar.disable();this.blockId!==b&&(this.newBlock=!0);this.blockId=b;c&&!this.saving&&this.clearToasts();this.makeClean();this.calendar.setDirty(!1);this._fetchSequence(a,b).then(d.hitch(this,function(a){this.calendar.currentSelectedItem=null;this.eventEditor.clear();
this.saving=!1;this._inSummary||this.calendar&&this.canEdit&&this.calendar.enable();return a}),d.hitch(this,function(a){this._onInitError(a);this._inSummary||this.calendar&&this.canEdit&&this.calendar.enable();setTimeout(this.clearToasts,500)}))},fetchAndClear:function(a,b){var c=d.hitch(this,function(a){this.fetch(this.pointInstance,a,!0);!this._inSummary||null!==this._reloadTimer&&this._previousBlockId==a?this._inSummary||null===this._reloadTimer||(clearInterval(this._reloadTimer),this._reloadTimer=
null):(null!==this._reloadTimer&&(clearInterval(this._reloadTimer),this._reloadTimer=null),this._reloadTimer=setInterval(d.hitch(this,function(){this._prevBlockId=this._currentBlockId;this._currentBlockId=null;this.fetch(this.pointInstance,a,!0)}),this.SUMMARY_FETCH_INTERVAL))});if(!0!==b&&this._dirty&&!this.saving){var f=d.clone(this.eventEditor.getInfo()),g=d.hitch(this,function(a){this.calendar.selectedItem=null;this.calendar.selectedItems=[];c(a)});this._promptUserForSave(f).then(d.hitch(this,
function(){this._saveClicked();g(a)}))}else c(a)},finishedEvent:function(a,b,c){this.eventEditor.setStoreReady(!1);this.onChange();a&&this._validateAndSave(b,c)},goToAdminView:function(){null!==this._reloadTimer&&(clearInterval(this._reloadTimer),this._reloadTimer=null);var a={site:this.site,view:"scheduleTree"};this.isAdminPage()&&(a.schedule=this.pointInstance);a=this._hash+"?"+C.objectToQuery(a);this.isAdminPage()||(a=aa.mnemonicToUri(a));w(a)},makeClean:function(){this.inherited(arguments);this.calendar.calendarToolbar.disableNavigation(!1);
rc.session.isPrivate()&&rc.session.canEditEnterprise()&&(this._cancelButton&&this._cancelButton.set("disabled",!0),this._saveButton&&this._saveButton.set("disabled",!0))},makeDirty:function(){this.inherited(arguments);this.calendar.calendarToolbar.disableNavigation(!0);rc.session.isPrivate()&&rc.session.canEditEnterprise()&&(this._cancelButton&&this._cancelButton.set("disabled",!1),this._saveButton&&this._saveButton.set("disabled",!1))},onChange:function(){this.makeDirty();this.calendar.setDirty(!0,
this.eventEditor.getInfo(!0));this.emit("change")},openEventPane:function(){this.editEventPane.open||this.editEventPane.arrowNode.click()},openRightContentPane:function(a){this.editEventPane.open||this.scheduleTreePane.open?this.editEventPane.open&&(this._editPaneHeight=this.editEventPane.wipeNode.scrollHeight):(this._rightPaneClosed=!1,this.editEventPane.wipeNode.scrollHeight=this._editPaneHeight,this.rightContent.resize({w:this._getRightPaneWidth()}),this._container.resize(),u.remove(this.editEventPane.domNode,
"collapsed"),u.remove(this.scheduleTreePane.domNode,"collapsed"))},print:function(){this.calendar.columnView.set("startTimeOfDay",{hours:0,duration:0});this.printWithPreview(d.clone(this.domNode))},render:function(a){if(a&&200===a.errStatus)this.data=a,this.pointInstance=this.data.entId,this._render(this.data);else if(a)switch(a.errStatus){case 502:throw new M({name:J.substitute(z.xNotFound,[y.es]),message:B.scheduleDoesNotExist,suggestion:B.scheduleDoesNotExistFix});case 503:throw new M({name:J.substitute(z.xNotFound,
[y.scheduleTreeLabel]),message:B.scheduleContainsNoScheduleTree,suggestion:B.scheduleContainsNoScheduleTreeFix});case 518:N.publish("sticky",{type:"error",message:B.cannotCommunicate+"\x3cbr /\x3e"+B.suggestResave});break;default:console.error(this.declaredClass+" - _render(): Invalid error Status")}else throw new M({name:J.substitute(z.xNotFound,[y.es]),message:y.cannotLoadES,suggestion:y.hostOfflineFix});},renderWidgets:function(){this.isFirstLoad?this.updateBlockSelector().then(d.hitch(this,function(){this.calendar.render(this.data,
this.colorMap,this.blockStore,this.scheduleTree,this.summaryColours);this.eventEditor.enterpriseId=this.data.entId;this.eventEditor.createAppliesToManager(this.blocks,this.scheduleTree._scheduleStore.query(this._getNonRootItems));this.calendarRendered(null===this.data);this._destroyLoader()})):(this.calendar.render(this.data,this.colorMap,this.blockStore,this.scheduleTree,this.summaryColours,!0),this.calendarRendered(null===this.data));this._resizeScheduleTreeHeight()},resize:function(){this.inherited(arguments);
if(this._adminTopContent){var a=this._adminTopContent.clientWidth,a=a-this._contentHeaderIcon.clientWidth;v.set(this._contentHeaderTitle,"width",a-50+"px")}},resizeRightContent:function(){if(!this._rightPaneClosed)if(this.editEventPane.open||this.scheduleTreePane.open)!0===this.scheduleTreePane.open&&this._resizeScheduleTreeHeight();else{this._rightPaneClosed=!0;var a=v.getComputedStyle(this.rightContent.domNode);this._rightPaneOpenWidth=n.getMarginBox(this.rightContent.domNode,a).w;u.add(this.editEventPane.domNode,
"collapsed");u.add(this.scheduleTreePane.domNode,"collapsed");this.rightContent.resize({w:0});this._container.resize();this.rightContent.resize({w:this._rightPaneClosedWidth});this._container.resize()}},saveByMode:function(){this.summaryAfterSave=!0;this.eventEditor.isDirty?this.eventEditor._onUpdate():this._validateAndSave()},send:function(a,b,c){this.saving=!0;this.eventEditor.isDirty&&this.eventEditor.update();this.makeClean();this.calendar.disable();this._hasCostRate&&(a||void 0===a)?this._validate(b).then(d.hitch(this,
this.sendValidated,c),d.hitch(this,function(){this.clearToasts();this.saving=!1;this._inSummary||this.calendar&&this.canEdit&&this.calendar.enable()})):this.sendValidated(c)},sendWithReason:function(a,b){this.inherited(arguments);!rc.session.enforceChangeApproval&&this._changeReasonDialog&&this._changeReasonDialog.reasonTB.set("value",b)},sendValidated:function(a){this.clearToasts();this.closeEventPane();this.saveDeferred=new c;rc.xhr.request(a);this.saveDeferred.then(d.hitch(this,function(a){this.summaryAfterSave&&
this.calendar._changeView("summary");this.summaryAfterSave=!1;if("undefined"!==typeof a.errorArray&&0!==a.errorArray.length)throw"Could not save Changes";for(var b=0;b<a.newEventIds.length;++b)"undefined"!==typeof this.data.schedule.events[b]&&-1===this.data.schedule.events[b].eventId&&d.mixin(this.data.schedule.events[b],{eventId:a.newEventIds[b],action:"update",dirty:"clean"});this.calendar.setDirty(!1)}));this.saveDeferred.promise.always(d.hitch(this,function(){this._inSummary||this.calendar&&
this.canEdit&&this.calendar.enable();this.calendar.currentSelectedItem=null;this.eventEditor.clear();this.clearToasts();this.saving=!1;this.calendar.setDirty(!1);this.eventEditor.isDirty=!1;this.eventEditor.reset();this.calendar.render(this.data,this.colorMap,this.blockStore,this.scheduleTree,this.summaryColours,!1)}))},setReturnToAdmin:function(a){this._editButton.onClick=a},showErrors:function(a){var b="";h.forEach(a,d.hitch(this,function(a){b&&b.length&&(b+="\x3cbr /\x3e\x3cbr /\x3e");b+=this._decodeErrorMessage(a)}));
b&&b.length&&N.publish("sticky",{type:"error",message:b})},toggleEventDetails:function(a){this._inSummary=a;this.fetchAndClear(this.data.schedule.id);a?(u.add(this.editEventPane.domNode,"hidden"),u.add(this.scheduleTreePane.domNode,"topPane")):this.canEdit&&(u.remove(this.editEventPane.domNode,"hidden"),u.remove(this.scheduleTreePane.domNode,"topPane"));this._resizeScheduleTreeHeight()},updateBlockSelector:function(){var a=function(a,b){return aa.alphaNumericSort(a,b,"name")},b=new c;this.own(b);
rc.xhr.request({path:"BlockManager/",type:"rest",method:"GET",entId:this.data.entId}).then(d.hitch(this,function(c){if(c.data&&200===c.data.errStatus){this.blocks=[];if(c.data.blocks)for(var f=0;f<c.data.blocks.length;f++)this.blocks.push(c.data.blocks[f]);var f={name:y.allBlocks,label:'\x3cspan class\x3d"menu-item"\x3e'+y.allBlocks+"\x3c/span\x3e",id:-1},g={name:"\f",label:'\x3cspan class\x3d"sectionDivider"\x3e'+(y.blocks.charAt(0).toLocaleUpperCase()+y.blocks.substring(1))+"\x3c/span\x3e",id:-2};
c.data.blocks?(c.data.blocks.sort(d.hitch(this,a)),h.forEach(c.data.blocks,d.hitch(this,function(a){a.label='\x3cspan class\x3d"menu-item"\x3e'+a.name+"\x3c/span\x3e";a.name=O.decode(a.name)})),c.data.blocks.unshift(g),c.data.blocks.unshift(f)):c.data.blocks=[f];null===this.blockStore?this.blockStore=new L({data:c.data.blocks}):this.blockStore.setData(c.data.blocks);null===this.blockFilteringSelect?(this.blockFilteringSelect=new p({baseClass:"rcSelectBox blockSelector",hasDividers:!0,store:this.blockStore,
searchAttr:"name",labelAttr:"label",labelType:"html",autoComplete:!1,queryExpr:"*${0}*"},this.blockSelection,"first"),this.blockFilteringSelect.set("value",-1),this.blockFilteringSelect.startup(),this.own(F(this.blockFilteringSelect,"change",d.hitch(this,function(a){this._toggleBlockTree(a)})))):void 0!==this.blockStore.get(this.blockFilteringSelect.get("value"))?this._toggleBlockTree(Number(this.blockFilteringSelect.get("value"))):(this._toggleBlockTree(-1),this.blockFilteringSelect.set("value",
"-1"));b.resolve(c.data)}else console.error(this.declaredClass+" - updateBlockSelector(): Error getting blocks",c),b.reject(c)}),d.hitch(this,function(a){console.error(this.declaredClass+" - updateBlockSelector(): Unexpected Error",a);b.reject(a)}));return b.promise},updateDayOfWeek:function(a){var b=a.item.startTime.getDay();a.item.repeat.value.dow=b},warnUserOfReadOnly:function(){if(this._inSummary)var a=!1,b=F(window,"mousemove",d.hitch(this,function(){a=!0})),c=F(window,"mouseup",d.hitch(this,
function(){a&&N.publish("sticky",{type:"info",message:B.summaryReadOnly});a=!1;b.remove();c.remove()}))},_askForEventCreationConfirmation:function(a){var b=new c;this.own(b);addEvents=[];addEvents=h.filter(a,function(a){return"add"===a.action});if(20<addEvents.length){null===this._eventCreationConfirmationDialog?this._eventCreationConfirmationDialog=new Y({type:U.types.binaryConfirm,closeButtonVisible:!1,title:A.maxEventCreationWarningTitle,text:J.substitute(A.maxEventCreationWarning,[addEvents.length])}):
this._eventCreationConfirmationDialog.set("text",J.substitute(A.maxEventCreationWarning,[addEvents.length]));var f=this._eventCreationConfirmationDialog.on("close",d.hitch(this,function(a){switch(a){case U.returnValues.oneOrYes:b.resolve();break;case U.returnValues.allOrNo:b.reject();break;default:console.error(this.declaredClass+" - _confirm(): Unknown choice",a)}f.remove()}));this.own(f);this._eventCreationConfirmationDialog.open()}else b.resolve();return b.promise},_beginUpdate:function(){if(this._updating)return!1;
this.calendar&&this.calendar.disable();this.scheduleTree&&this.scheduleTree.disableFields(!0);this._updating=!0;X.widget.clear();this._disableButtons(!0);return this._updating},_buildBlockTree:function(b){var c=[this._treeRootTemplate];null!==this._blockTree&&this._blockTree.destroy();null!==this._blockTreeModel&&this._blockTreeModel.destroy();b&&(c=b);this._blockTreeStore=new H(new L({data:c,getChildren:function(a){return this.query({parent:a.id})}}));this._blockTreeModel=new k({store:this._blockTreeStore,
query:{id:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}});this._blockTree=new m({model:this._blockTreeModel,baseClass:"blockNavigationTree",showRoot:!1,getIconStyle:d.hitch(this,function(a){if("schedule"===a.type)return{background:a.color,marginRight:"4px",marginBottom:"4px",width:"14px",height:"14px"}}),_createTreeNode:d.hitch(this,function(a){return"schedule"===a.item.type?new m._TreeNode(a):new ea(a)}),onClick:d.hitch(this,function(a,b){b!==this._blockTree._getFirst()&&this._blockTree._getFirst().setSelected(!1);
this._isBlockRequest="block"===a.type;this._changeSchedule(a.value)})});this._blockTree.startup();a.place(this._blockTree.domNode,this.blockTreeView,"only")},_changeSchedule:function(a,b){this.fetchAndClear(a,b);null!==this._updateScheduleDetailsDeferred&&!1===this._updateScheduleDetailsDeferred.isCanceled()&&this._updateScheduleDetailsDeferred.cancel("Navigation");!this._isBlockRequest&&0<a&&(this._updateScheduleDetailsDeferred=new c,this.own(this._updateScheduleDetailsDeferred),I.get("EnterpriseSchedules/UpdateScheduleDetails",
{query:{scheduleId:a},handleAs:"json"}).then(d.hitch(this,this._checkProgress)),this._updateScheduleDetailsDeferred.then(d.hitch(this,this.showErrors),d.hitch(this,this._clearPollingTimer)))},_checkForDirtyEvents:function(){return 0<this.calendar.store.query({dirty:"dirty"}).length},_checkItemForChange:function(a){var b=!1;if(-1===a.eventId||this.eventEditor.isDirty)b=!0;return b},_checkProgress:function(a){if("undefined"!==typeof a.processId)switch(this._statusProcessId=a.processId,a.errStatus){case 200:this._updateScheduleDetailsDeferred.resolve(a);
break;case 510:this._pollForStatus();break;case 508:this._updateScheduleDetailsDeferred.resolve(a.errors)}},_checkSaveResults:function(a){200!==a.status&&this.showErrors(a.errorArray);this.saveDeferred.resolve(a);return this.saveDeferred},_checkValidateResults:function(b){if(b.status===this.ERROR_CODE.Success||b.status===this.ERROR_CODE.ScheduleEventUnLinked)if(0===b.data.length&&b.status===this.ERROR_CODE.Success)this.validateDeferred.resolve();else{var c=a.create("div");if(0<b.data.length){a.create("div",
{innerHTML:A.overlappingEvents},c);var f=a.create("ul",{"class":"scheduleLinks"},c),g=[];b.data.forEach(d.hitch(this,function(b){if(!g.includes(b.id)){g.push(b.id);var c=function(a){if(a.id.toString()===b.id.toString())return a},h;b.isBlock?(h=this.blockStore.data.find(c),h.isBlock=!0):h=this.scheduleTree._scheduleStore.data.find(c);c=a.create("li",{"class":"linkable dark scheduleLink",innerHTML:h.name},f);this.own(F(c,"click",d.hitch(this,function(){this.validateDeferred.reject();this.makeClean();
this.calendar.setDirty(!1);this._scheduleLinkDialog.close();h.isBlock?(this.blockFilteringSelect.set("value",-1),this.blockFilteringSelect.set("value",h.id)):(this.blockFilteringSelect.set("value",-1),this._selectNodeTimer=setTimeout(d.hitch(this,function(){clearTimeout(this._selectNodeTimer);this.scheduleTree.selectNode(h.id)}),500))})))}}))}a.create("span",{innerHTML:A.proceedWithSave},c);this._scheduleLinkDialog=new Y({title:A.invalidEvent,type:U.types.binaryConfirm,content:c,closeButtonVisible:!1});
this.own(F(this._scheduleLinkDialog,"close",d.hitch(this,function(a){switch(a){case U.returnValues.oneOrYes:this.validateDeferred.resolve();break;case U.returnValues.allOrNo:this.makeDirty();a=this.calendar.store.query({action:"delete"});0<a.length&&this.calendar.store.remove(a[0].id);this.calendar.set("selectedItem",this.calendar.dirtyEvent);this.validateDeferred.reject();break;case U.returnValues.none:break;default:console.error(this.declaredClass+" - _promptUserForSave(): Unknown choice",a)}})));
this._scheduleLinkDialog.open()}else this.showErrors(b.errorArray),this.validateDeferred.reject();return this.validateDeferred},_cleanupDndEvents:function(a){switch(a.item.repeat.type){case T.REPEAT_EXCEPTION:this.dndMoveDay(a);break;case T.REPEAT_RANGE:this.dndEditDateRange(a,!1);break;case T.REPEAT_RECURRENCE:this.dndMoveDay(a);this.updateDayOfWeek(a);break;case T.REPEAT_CALENDAR:if(a.item.repeat.start&&a.item.repeat.end){var b=a.item.repeat.value[0].type;b===T.REPEAT_RECURRENCE?this.dndEditTerminating(a):
b===T.REPEAT_RANGE&&this.dndEditDateRange(a,!0)}else this.dndEditDateRange(a,!1)}},_clearPollingTimer:function(){clearTimeout(this._pollForStatusTimer)},_cloneEvent:function(a){return new ca(a)},_createBlockManager:function(a){this.blockManagerDialog=new ha({site:this.site,enterpriseScheduleId:a,maxRatio:.98,draggable:!1,title:y.manageBlocks,blocks:this.blocks,scheduleTreeData:this.scheduleTree._scheduleStore.query(this._getNonRootItems)});this.own(f.after(window,"onresize",d.hitch(this,this._resizeBlockManagerScrollArea)),
F(this.blockManagerDialog,"blockModify",d.hitch(this,this._changeSchedule,this.blockId)),F(this.blockManagerDialog,"refreshBlocks",d.hitch(this,function(){this.updateBlockSelector().then(d.hitch(this,function(){this.blockManagerDialog.updateBlocks(this.blocks);this.eventEditor.updateBlockSelector(this.blocks)}))})))},_createContentHeader:function(){var b=a.create("div",{"class":"rcContentHeader"}),c=a.create("span",{"class":"rcHeaderIconWrapper"},b);this._contentHeaderIcon=a.create("span",{"class":"rcHeaderIcon rcSchedulesHeaderIcon"},
c);this._contentHeaderTitle=a.create("h1",{"class":"rcHeaderText"},b);return b},_createCustomLoader:function(){a.create("div",{id:"preloader2",className:"preloader"},this.domNode.parentElement,"first")},_createGenericPrompt:function(){null===this._genericConfirmDialog&&(this._genericConfirmDialog=new Y({type:U.types.binarySave}))},_createToolbar:function(){this._saveButton=this._toolbar.getButton("save");this._cancelButton=this._toolbar.getButton("cancel");this._ahacButton=this._toolbar.getButton("ahac");
this._editButton=this._toolbar.getButton("edit");var b=rc.session.isPrivate()&&rc.session.canEditEnterprise(),c=rc.session.isPrivate()&&rc.session.hasRole(rc.session.roles.entSchedAdmin);this._toolbar.set("canEdit",b);this._toolbar.set("admin",c);this.own(F(this._toolbar,"saveClicked",d.hitch(this,this._saveClicked)),F(this._toolbar,"cancelClicked",d.hitch(this,this.cancel)),F(this._toolbar,"ahacClicked",d.hitch(this,this._goToReport)),F(this._toolbar,"editClicked",d.hitch(this,this.goToAdminView)));
b?this._saveLoader=a.create("span",{className:"syncLoader"},this._saveButton.titleNode,"first"):this.calendar.disable();return this._toolbar},_decodeErrorMessage:function(a){var b=[64,65,67],c=y.invalidParamErrMsg+y.errMsgTemplateEnd,c=""===a.block?c+a.schedule:c+a.block;if(a.hasOwnProperty("error")&&a.error.hasOwnProperty("type")){switch(Number(a.error.type)){case this._errorTypes.error:c=70===a.error.reason?B.cannotCommunicate:R.codes.error[a.error.reason];break;case this._errorTypes.reject:c=R.codes.reject[a.error.reason];
break;case this._errorTypes.abort:c=-1!==b.indexOf(a.error.reason)?B.cannotCommunicate:R.codes.abort[a.error.reason]}c+=y.errMsgTemplateEnd+a.block}return c},_decodeProgressResponse:function(a){if("undefined"!==typeof a.progress){var b={processId:a.progress.processId,errStatus:510};a.progress.completed===a.progress.outOf&&("undefined"!==typeof a.progress.error?(b.errStatus=508,b.errors=a.progress.error):b.errStatus=200);this._checkProgress(b)}},_destroyLoader:function(){t.byId("preloader2")&&a.destroy("preloader2")},
_disableButtons:function(a){Object.keys(this._buttons).forEach(d.hitch(this,function(b){this._buttons[b].set("disabled",a)}))},_discardSingleEventChanges:function(a,b,c,d){d?(this.makeClean(),this.fetch(this.pointInstance,this.data.schedule.id,!0)):this._itemSelected(a,b,c);this.calendar.currentSelectedItem=null},_endUpdate:function(){this._updating&&(!this._inSummary&&this.canEdit&&this.calendar&&this.calendar.enable(),this.scheduleTree&&this.scheduleTree.disableFields(!1),this._disableButtons(!1),
this._updating=!1,this.makeClean(),this.calendar.setDirty(!1))},_fetchEnterpriseSchedule:function(a,b){var f=new c,g={type:"rest",method:"GET",timeout:12E4,path:this._path+a,blockId:b,isBlockGroup:this._isBlockRequest,siteId:this.site,load:d.hitch(this,function(a){f.resolve(a.data)}),error:d.hitch(this,function(a){f.reject(new M({name:J.substitute(z.xNotFound,[y.es]),message:y.cannotLoadES,suggestion:y.hostOfflineFix,e:a}))})};this.newBlock=!1;rc.xhr.requestNow(g);return f.promise},_fetchSequence:function(a,
f){var g=new c;this._fetchPromiseObj.ScheduleData=this._fetchSchedule(a,f);b(this._fetchPromiseObj).then(d.hitch(this,function(a){var b=this.data;"undefined"!==typeof a.EnterpriseScheduleData&&(this.site=a.EnterpriseScheduleData.siteID,this.increments=a.EnterpriseScheduleData.minuteIncrement,this._hasCostRate=a.EnterpriseScheduleData.hasCostRate,b=a.EnterpriseScheduleData);b.schedule=a.ScheduleData.schedule;b.isBlockGroup=a.ScheduleData.isBlockGroup;b.defaultAppliesTo=a.ScheduleData.defaultAppliesTo;
this._fetchPromiseObj={};try{this.render(b),g.resolve()}catch(ga){"TypeError"===ga.name?console.error(this.declaredClass+" - _fetchSequence: render() threw exceptoin",ga):this._onInitError(ga)}}));return g.promise},_fetchSchedule:function(a,b){var f=new c,g={type:"rest",method:"GET",timeout:12E4,path:"Schedule/"+a,blockId:b,isBlockGroup:this._isBlockRequest,updateIfDifferent:this.newBlock,siteId:this.site,viewRange:D.stringify(this._getViewRange()),load:d.hitch(this,function(a){f.resolve(a.data)}),
error:d.hitch(this,function(a){f.reject(new M({name:J.substitute(z.xNotFound,[y.es]),message:y.cannotLoadES,suggestion:y.hostOfflineFix,e:a}))})};this.newBlock=!1;rc.xhr.requestNow(g);return f.promise},_getDeleteContent:function(a){var b="";if(this._isDailyEvent(a))b=y.deleteDailyText;else if(a.repeat.type===T.REPEAT_RANGE)b=y.deleteDateRangeText;else if(a.repeat.type===T.REPEAT_CALENDAR||this._isCalendarOverride(a))b=y.deleteCalText;return b},_getNonRootItems:function(a){return"root"!==a.type},_getSendRequest:function(a,
b){return{gid:"es",type:"rest",method:"POST",timeout:12E4,path:this._path+this.pointInstance,blockId:this.data.schedule.id,forBlock:this._isBlockRequest,siteID:this.site,postData:D.stringify(a),reason:b||"",load:d.hitch(this,function(a){return this._checkSaveResults(a.data)}),error:d.hitch(this,function(a){return this.saveDeferred.reject(new M({name:J.substitute(z.xNotFound,[y.es]),message:y.cannotLoadES,suggestion:y.hostOfflineFix,e:a}))})}},_getViewRange:function(){var a={start:null,end:null};this.calendar&&
(a=d.clone(this.calendar.get("viewRange")));null===a.start&&(a.start=da.getFirstDayOfWeek(new Date),a.end=new Date(a.start),a.end.setDate(a.end.getDate()+7));a.start=a.start.getTime()/1E3;a.end=a.end.getTime()/1E3;return a},_goToReport:function(){null!==this._reloadTimer&&(clearInterval(this._reloadTimer),this._reloadTimer=null);var a=C.objectToQuery({scheduleId:this.blockId,forBlock:this._isBlockRequest,site:this.site});w(this.getUri("TenantReport?"+a))},_isAllWildCard:function(a){return a.y===T.WILDCARD&&
a.m===T.WILDCARD&&a.dom===T.WILDCARD},_isCalendarOverride:function(a){var b=!1;a.repeat.type===T.REPEAT_OVERRIDE&&(b=-1!=a.repeat["for"].toLowerCase().indexOf("cal"));return b},_isDailyEvent:function(a){return a.repeat.type===T.REPEAT_EXCEPTION&&this._isAllWildCard(a.repeat.value)},_isSpecialDelete:function(a){var b=!1;if(this._isDailyEvent(a))b=!0;else if(a.repeat.type===T.REPEAT_RANGE)b=!0;else if(a.repeat.type===T.REPEAT_CALENDAR||this._isCalendarOverride(a))b=!0;return b},_isTypeGrouped:function(a){return a.repeat.type!==
T.REPEAT_WEEKLY},_itemSelected:function(a,b,c){this.calendar.setDirty(!1);null===a&&null===b.renderer&&this.closeEventPane();c||null===b.newValue?this.closeEventPane():(null!==a?this.calendar.store.get(a.id)?this.calendar.currentSelectedItem=d.clone(this.calendar.store.get(a.id)):this.calendar.currentSelectedItem=d.clone(a):a=new ca({}),this.eventEditor.fillData(d.clone(a),this.calendar._isEventEditable(b.newValue)),"undefined"!==typeof b.triggerEvent&&this.openEventPane())},_loadUserSchedule:function(){this.setUpToolbar(this._container);
this._createCustomLoader();this._container.startup();this._setupListeners();this.own(F(this.scheduleTree,"treeLoaded",d.hitch(this,this._selectScheduleAfterTreeLoaded)));l.addOnUnload(d.hitch(this,this._onUnload));this.canEdit=rc.session.canEditEnterprise();this._buildBlockTree()},_onCancel:function(a){this.calendar.store.remove(a.id);this._checkForDirtyEvents()||(this.makeClean(),this.calendar.setDirty(!1));this.closeEventPane()},_onChangeCalendar:function(a){if(a&&this.calendar.editable&&null!==
a.triggerEvent){var b=null,c=E.isRight(a.triggerEvent);a.item?(a.item.originalStartTime=a.source._editStartTimeSave,a.item.originalEndTime=a.source._editEndTimeSave,b=a.item):a.newValue&&(b=a.newValue);if(!this._inSummary&&!this.saving){var f=this.eventEditor._dataStore.get(this.eventEditor._eventId);if(this.eventEditor.isDirty&&null!==a.oldValue&&null!==this.calendar.currentSelectedItem&&void 0!==f){var g=this.calendar.currentView.triggerExtent;this.calendar.currentView.set("triggerExtent",Number.MAX_SAFE_INTEGER);
this._promptUserForSave(f).then(d.hitch(this,function(a){this.calendar.set("selectedItem",a.oldValue);this.calendar.currentView.set("triggerExtent",g);this.eventEditor._onUpdate()},a),d.hitch(this,function(){this.calendar.set("selectedItem",a.oldValue);this.calendar.currentView.set("triggerExtent",g)}))}else this._itemSelected(b,a,c)}}},_onConfirmDelete:function(a,b){switch(a){case U.returnValues.allOrNo:case U.returnValues.oneOrYes:this._checkForDirtyEvents()?this.deleteEvent(b,a,!1):(this.deleteEvent(b,
a,!0),this.calendar.setDirty(!1));break;case U.returnValues.none:break;default:console.error(this.declaredClass+" - _onConfirmDelete(): Unknown choice",a)}},_onCreate:function(a){this.addEvent(a,!0)},_onDelete:function(a){null!==this.validateData&&h.forEach(this.validateData.events,d.hitch(this,function(b){b.eventId===a.eventId&&this.validateDeferred.cancel()}));if(-1===a.eventId){this.calendar.store.remove(a.id);this._checkForDirtyEvents()||(this.makeClean(),this.calendar.setDirty(!1));var b=this.eventEditor._storeReady;
this.eventEditor._storeReady=!0;this.closeEventPane();this.eventEditor._storeReady=b}else if(1<this.calendar.getEventsByEventId(a.eventId).length&&this._isTypeGrouped(a))if(this._isSpecialDelete(a))b=this._getDeleteContent(a),this._showDeletePrompt(b).then(d.hitch(this,this.deleteEvent,a,"all",!0));else{this.warningDialog.set("title",y.deleteTitleText);this.warningDialog.set("type",U.types.multi);this.warningDialog.set("text",y.deleteGroupText);this.warningDialog.open();var c=this.warningDialog.on("close",
d.hitch(this,function(b){this._onConfirmDelete(b,a,c);c.remove()}));this.own(c)}else this._showDeletePrompt(J.substitute(y.confirmDeleteX,[a.label])).then(d.hitch(this,this.deleteEvent,a,"one",!0))},_onEditCalendarEnd:function(a){var b=a.item.repeat.type;a.item._item.isAllDay&&(a.preventDefault(),a.item.endTime.getDate()!==a.item.startTime.getDate()&&a.item.endTime.setDate(a.item.endTime.getDate()-1),a.item.startTime.setHours(0,0,0,0),a.item.endTime.setHours(23,59,59,0));0===a.item.endTime.getHours()&&
0===a.item.endTime.getMinutes()&&(a.item.endTime.setDate(a.item.endTime.getDate()-1),a.item.endTime.setHours(23,59,59,0));if(!this._inSummary)switch(a.item._item.originalStartTime=a.source._editStartTimeSave,a.item._item.originalEndTime=a.source._editEndTimeSave,b!==T.REPEAT_CALENDAR&&b!==T.REPEAT_RANGE&&(a.item._item.startTime=a.item.startTime,a.item._item.endTime=a.item.endTime),d.mixin(a.item._item,a.item),delete a.item._item._item,this.eventEditor.fillData(a.item._item,null),this.eventEditor._onDirty(),
a.item._item.action){case "add":this.eventEditor.repeatSelection.fillData(a.item._item);a.item._item.dirty="dirty";this.onChange();break;case "update":this._cleanupDndEvents(a);this.editEvent(a.item._item,!1);break;case "delete":this.deleteEvent(a.item._item,"one",!1);break;default:console.error(this.declaredClass+" - _onEditCalendarEnd(): Invalid event action",a.item._item.action)}},_onUnload:function(){this.saving&&this._clearPollingTimer()},_onUpdate:function(a){for(var b=this.calendar.store.query({eventId:a.submittedEvent.eventId}),
c=0;c<b.length;++c)b[c].id!==a.submittedEvent.id&&(b[c].schedules=a.submittedEvent.schedules,this.calendar.store.put(b[c]));if(a.schedulesRemoved){b=this._cloneEvent(a.submittedEvent);delete b.id;b.repeat={type:T.REPEAT_EXCEPTION,value:{y:-1,m:-1,dom:-1}};b.dontMerge=!0;var f=a.originalSchedules;h.forEach(a.submittedEvent.schedules,d.hitch(this,function(a){a=f.indexOf(a);-1<a&&f.splice(a,1)}));0<f.length&&(b.schedules=f,this.deleteEvent(b,"one",!1))}this.editEvent(a.submittedEvent,!0)},_pollForStatus:function(){this._clearPollingTimer();
this._pollForStatusTimer=setTimeout(d.hitch(this,function(){I.get(this._path+"status",{query:{abort:0,processId:this._statusProcessId},handleAs:"json"}).then(d.hitch(this,this._decodeProgressResponse))}),500)},_promptUserForSave:function(a){var b=new c;this.own(b);!1===this._checkItemForChange(a)?b.resolve(!1):(this._createGenericPrompt(),this._genericConfirmDialog.set("title",y.confirmUnsavedChanges),this._genericConfirmDialog.set("text",B.unsavedChangesContinue),this._genericConfirmDialog.set("type",
U.types.binarySave),this._genericConfirmDialogHandle=this._genericConfirmDialog.on("close",d.hitch(this,function(a){switch(a){case U.returnValues.oneOrYes:b.resolve(!0);break;case U.returnValues.allOrNo:case U.returnValues.none:b.reject();break;default:console.error(this.declaredClass+" - _promptUserForSave(): Unknown choice",a)}this._genericConfirmDialogHandle.remove()})),this.own(this._genericConfirmDialogHandle),this._genericConfirmDialog.dialog.show());return b.promise},_render:function(a){this.summaryColours=
a.summaryColours;this.colorMap=this.scheduleTree.getColourMap();this.instanceDefaultAppliesTo=a.defaultAppliesTo;this._currentBlockId=a.schedule.id;this.emit("render")},_resizeBlockManagerScrollArea:function(){this.blockManagerDialog.resize({l:10,t:10,h:.98*document.body.clientHeight,w:.98*document.body.clientWidth});var a=v.getComputedStyle(this.blockManagerDialog.domNode),a=n.getMarginBox(this.blockManagerDialog.domNode,a).h,b=v.getComputedStyle(this.blockManagerDialog.titleBar),b=n.getMarginBox(this.blockManagerDialog.titleBar,
b).h,c=v.get(this.blockManagerDialog.containerNode,"paddingTop"),c=c+v.get(this.blockManagerDialog.containerNode,"paddingBottom"),d=v.getComputedStyle(this.blockManagerDialog.searchContainer),d=n.getMarginBox(this.blockManagerDialog.searchContainer,d).h,f=v.get(this.blockManagerDialog.scheduleSelectionPane.domNode,"paddingTop"),f=f+v.get(this.blockManagerDialog.scheduleSelectionPane.domNode,"paddingBottom"),a=a-b-c-d-f;v.set(this.blockManagerDialog.scheduleSelectionPane.domNode,"height",Math.floor(a)+
"px");v.set(this.blockManagerDialog.blockPreviewPane.contentPaneBody,"height",Math.floor(a)+"px")},_resizeScheduleTreeHeight:function(){var a=window.innerHeight,b=G("#rcSystemHeader")[0],c=v.getComputedStyle(b),b=n.getMarginBox(b,c).h,c=this.scheduleTreePane.domNode.offsetParent.offsetTop,d=v.getComputedStyle(this.editEventPane.domNode),d=n.getMarginBox(this.editEventPane.domNode,d).h,f=v.get(this.scheduleTreePane.domNode,"marginTop"),f=f+v.get(this.scheduleTreePane.domNode,"marginBottom"),g=v.getComputedStyle(this.scheduleTreePane.titleBarNode),
g=n.getMarginBox(this.scheduleTreePane.titleBarNode,g).h,h=v.getComputedStyle(this.blockSelectionContainer),h=n.getMarginBox(this.blockSelectionContainer,h).h,k=G(".rcAlarmsMiniBar"),l=0;0<k.length&&(l=v.getComputedStyle(k[0]),l=n.getMarginBox(k[0],l).h);v.set(this.scheduleTreeContainer,"maxHeight",a-b-c-d-f-g-h-l-5+"px")},_resizeScheduleTreeWidth:function(){var a=v.getComputedStyle(this.scheduleTreeContainer).width;v.set(this.scheduleTree.treeContainer,"width",a)},_returnFromAdmin:function(){window.location.hash=
this.getUri(this._hash)},_saveClicked:function(){this.eventEditor._onUpdate()},_selectScheduleAfterTreeLoaded:function(){var a=null;this._linkedSystem||this._linkedSchedule?this.scheduleTree.selectLinkedSchedule(this._linkedSystem,this._linkedSchedule)||(a=new M({name:B.urlErrorTitle,message:B.urlErrorMessage,suggestion:B.urlErrorAction})):this.scheduleTree.selectFirstSchedule()||(a=new M({name:z.loadFailed,message:y.noSchedulesFound}));this._makeTreeFitFirstNode();null!==a&&this._onInitError(a)},
_getRightPaneWidth:function(){var a=this.scheduleTree.getFirstNode();width=a&&a.rowNode&&a.rowNode.clientWidth?Number(a.rowNode.clientWidth)+20:this._rightPaneOpenWidth;return Math.max(width,this._rightPaneMinWidth)},_makeTreeFitFirstNode:function(){var a=this._getRightPaneWidth();this.rightContent.resize({w:0});this._container.resize();this.rightContent.resize({w:a});this._container.resize()},_setRepeat:function(a){var b=a.originalEvent.repeat,c=this.calendar.getUniqueIndexFromEvent(a.originalEvent),
b=this.calendar.getEventsByUniqueIdx(c,b.type,a.originalEvent.eventId);h.forEach(b,d.hitch(this,function(b){b.dirty="dirty";b.repeat=a.newEvent.repeat;this.calendar.putInStore([b],0)}))},_setLabels:function(a){var b=a.newEvent.repeat,c=a.newEvent.label,f=this.calendar.getUniqueIndexFromEvent(a.newEvent,a.originalLabel);a=this.calendar.getEventsByUniqueIdx(f,b.type,a.newEvent.eventId);h.forEach(a,d.hitch(this,function(a){a.dirty="dirty";a.label=c}))},_setTitle:function(a){this.title=null!==a&&void 0!==
a.errStatus&&200===a.errStatus?a.esName||this.title||"":a||this.title||"";this._toolbar&&this.title&&this._toolbar.setTitle(this.title);this.fullTitle=this.title;this.onSetTitle(this.fullTitle)},_setUpHash:function(){var a=w();this.isAdminPage()||P.mode<P.PROXY_LIVE&&(a=this._unobfuscateUrlQuery(a));a=a.split("?");if(1<a.length){var b=C.queryToObject(a[1]);2===Object.keys(b).length&&(b.site?(this.site=b.site,this.view=b.view):(this._linkedSystem=b.system,this._linkedSchedule=b.schedule))}this._hash=
a[0]},_setupListeners:function(){this.own(F(this.calendar,"change",d.hitch(this,this._onChangeCalendar)),F(this.calendar,"itemEditEnd",d.hitch(this,this._onEditCalendarEnd)),F(this.calendar,"contextDelete",d.hitch(this,this._onDelete)),F(this.calendar,"triggerSave",d.hitch(this,this.saveByMode)),F(this.calendar,"changeSummary",d.hitch(this,this.toggleEventDetails)),F(this.calendar,"makeClean",d.hitch(this,this.makeClean)),F(this.calendar,"navigateBlocks",d.hitch(this,this._changeSchedule)),F(this.calendar,
"parentBlock",d.hitch(this,function(a,b){b?(this.blockFilteringSelect.set("value",-1),this.blockFilteringSelect.set("value",a)):this.scheduleTree.selectNode(a)})),F(this.scheduleTree,"change",d.hitch(this,this._changeSchedule)),F(this.scheduleTree,"resize",d.hitch(this,this._resizeScheduleTreeWidth)),F(this.eventEditor,"blockChange",d.hitch(this,function(a,b){b?(this.blockFilteringSelect.set("value",-1),this.blockFilteringSelect.set("value",a)):this.scheduleTree.selectNode(a)})),F(this.eventEditor,
"dirty",d.hitch(this,this.onChange)),F(this.eventEditor,"contentChanged",d.hitch(this,function(){this.editEventPane.get("open")&&this.editEventPane._setOpenAttr(!0,!0);this._resizeScheduleTreeHeight()})));h.forEach(["update","create","delete","cancel"],function(a){this.own(F(this.eventEditor,a,d.hitch(this,"_on"+S.toTitleCase(a))))},this);this.own(F(this.eventEditor,"labelChange",d.hitch(this,this._setLabels)),F(this.eventEditor,"repeatTypeChange",d.hitch(this,this._setRepeat)),f.after(this.calendar.columnView,
"_onGridMouseDown",d.hitch(this,this.warnUserOfReadOnly)),F(this.calendar,"viewRangeChange",d.hitch(this,function(){this.data&&this.fetchAndClear(this.data.schedule.id)})),f.after(this,"render",d.hitch(this,this.renderWidgets)),F(this.blockManagerButton,"click",d.hitch(this,function(){this.data&&this._showBlockManagerDialog(this.data.entId)})),F(this.editEventPane,"toggle",d.hitch(this,this.resizeRightContent)),F(this.scheduleTreePane,"toggle",d.hitch(this,this.resizeRightContent)),F(this.editEventPane,
"willToggle",d.hitch(this,this.openRightContentPane,!0)),F(this.scheduleTreePane,"willToggle",d.hitch(this,this.openRightContentPane,!1)),F(window,"resize",d.hitch(this,this._resizeScheduleTreeHeight)),F(this.calendarContainer,"resize",d.hitch(this.calendar.resize)))},_showBlockManagerDialog:function(a){null===this.blockManagerDialog&&this._createBlockManager(a);this.blockManagerDialog._selectedBlocks=[];this.blockManagerDialog.show()},_showDeletePrompt:function(a){var b=new c;this._createGenericPrompt();
this._genericConfirmDialog.set("title",y.confirmDelete);this._genericConfirmDialog.set("text",a);this._genericConfirmDialog.set("type",U.types.deleteCancel);this._genericConfirmDialogHandle=this._genericConfirmDialog.on("close",d.hitch(this,function(a){switch(a){case U.returnValues.oneOrYes:b.resolve();break;case U.returnValues.allOrNo:b.reject();break;case U.returnValues.none:break;default:console.error(this.declaredClass+" - _showDeletePrompt(): Invalid error Status")}this._genericConfirmDialogHandle.remove()}));
this.own(this._genericConfirmDialogHandle);this._genericConfirmDialog.dialog.show();return b.promise},_switchView:function(a){switch(a){case "properties":case "scheduleTree":this._viewAdmin();break;default:this._loadUserSchedule()}},_toggleBlockTree:function(a){if(0<a)rc.xhr.request({path:"BlockManager/SchedulesForPreview",type:"rest",method:"GET",blockId:a}).then(d.hitch(this,function(b){b.data&&200===b.data.errStatus&&(b=[this._treeRootTemplate].concat(b.data.blockData),this._buildBlockTree(b),
this._isBlockRequest=!0,this._changeSchedule(a),this._blockTree._getFirst().setSelected())})),u.remove(this._blockTree.domNode,"hidden"),u.add(this.scheduleTree.domNode,"hidden");else{this._isBlockRequest=!1;u.add(this._blockTree.domNode,"hidden");u.remove(this.scheduleTree.domNode,"hidden");this.scheduleTree.selectFirstSchedule();var b=this.scheduleTree.get("selected");b&&this._changeSchedule(b.id)}},_unobfuscateUrlQuery:function(a){var b=a.split("?");a=V.toCharString(Q.decode(b[0]));1<b.length&&
(a+="?"+b[1]);return a},_updateContentHeader:function(){q.set(this._contentHeaderTitle,{innerHTML:this._adminContent.esName+" "+y.settings})},_validate:function(a){N.publish("sticky",{type:"info",message:y.checkingOverlappingEvents+"..."});this.validateDeferred=new c;this.validateData=a;a={gid:"es",type:"rest",method:"POST",timeout:12E4,path:this._path+"overlappingEvents/"+this.pointInstance,blockId:this.data.schedule.id,siteID:this.site,postData:D.stringify(a),load:d.hitch(this,function(a){this.validateData=
null;return this.validateDeferred.isCanceled()?(this.clearToasts(),null):this._checkValidateResults(a.data)}),error:d.hitch(this,function(a){return this.validateDeferred.reject(new M({name:J.substitute(z.xNotFound,[y.es]),message:y.cannotLoadES,suggestion:y.hostOfflineFix,e:a}))})};rc.xhr.request(a);return this.validateDeferred},_validateAndSave:function(a,b){var c=F(this,"sendReasonAdded",d.hitch(this,function(f){c.remove();if(rc.session.reasonRequired()&&!f)this.showChangeReasonError();else{var g=
""!=this._changeReason?this._changeReason:b,h=this.calendar.encode();this._askForEventCreationConfirmation(h.events).then(d.hitch(this,function(){var b=this._getSendRequest(h,g);this._validateApprovalSession(b).then(d.hitch(this,function(){this.send(a,h,b)}),function(){})}),function(){})}}));this.sendWithReason("enterprise-schedule",b)},_viewAdmin:function(){this._adminContent||(u.add(this.containerNode,"hidden"),u.add(window.document.body,"admin"),this._loadAdminContent({iconClass:"rcScheduleHeaderIcon",
schedule:this.pointInstance,site:this.site,title:"",type:"schedule"},"webview/admin/schedules/Schedule"))},destroy:function(){this.inherited(arguments);this._destroyLoader();null!==this._saveConnect&&this._saveConnect.remove();null!==this._cancelConnect&&this._cancelConnect.remove();null!==this._saveLoadEvent&&this._saveLoadEvent.remove();null!==this._updateScheduleDetailsDeferred&&!1===this._updateScheduleDetailsDeferred.isCanceled()&&this._updateScheduleDetailsDeferred.cancel("Navigation");null!==
this._reloadTimer&&(clearInterval(this._reloadTimer),this._reloadTimer=null);this._onUnload();h.forEach(this._tooltipIds,function(a){Z.remove(a)},this);this.blockManagerDialog&&this.blockManagerDialog.destroy();this.calendar&&this.calendar.destroy();this.eventEditor&&this.eventEditor.destroy();this.scheduleTree&&this.scheduleTree.destroy();this._adminContent&&(u.remove(window.document.body,"admin"),this._adminContent.destroy());this._adminTopContent&&a.destroy(this._adminTopContent);this._scheduleLinkDialog&&
this._scheduleLinkDialog.destroy()}})})},"webview/reliable/_enterpriseSchedule/StoreMixin":function(){define(["dojo/_base/lang","dojox/calendar/StoreMixin","dojox/html/entities","webview/util/globalConstants"],function(p,m,k,h){p.extend(m,{colorAttr:"color",priorityAttr:"npriority",repeatTypeAttr:"repeat",parentScheduleAttr:"schedules",startValueAttr:"startValue",summaryColorAttr:"summaryColor",_getParentSchedule:function(g){return this.domScheduleTree.getParentFromArray(g)},_getBlockLabel:function(g){return null!==
this.blockStore&&(g=this.blockStore.get(g[0]),void 0!==g)?k.encode(g.name):""},itemToRenderItem:function(g,d){if(this.owner)return this.owner.itemToRenderItem(g,d);var k=null,f=null;if(null===g.blockId){var m=this._getParentSchedule(g[this.parentScheduleAttr]);null!==m&&-1===g.sourceScheduleId?(k=Number(m.id),f=m.name):-1!==g.sourceScheduleId&&(k=g.sourceScheduleId,f=g.sourceScheduleName)}else f=this._getBlockLabel(g.blockId);var m=p.hitch(this,function(){var b=!1;1<g[this.parentScheduleAttr].length?
b=k!==this._blockIndex:g.blockId&&0<g.blockId.length&&(b=!0);return b}),c=p.hitch(this,function(){var b=!1;0<this.domScheduleTree._scheduleStore.query({id:k}).length&&(b=!0);return b}),b=0;if(g[this.repeatTypeAttr].type!==h.REPEAT_WEEKLY)if(null===g.blockId)b=this._getTotalRateFromScheduleArray(g.schedules);else{var t=g.blockId;g.blockId instanceof Array&&(t=g.blockId[0]);t=this.blockStore.get(t);"undefined"!==typeof t&&(b=t.rate)}return{id:d.getIdentity(g),eventId:g.eventId,summary:g[this.summaryAttr],
label:g.label,currency:this.currency,totalRate:b,startTime:this.decodeDate&&this.decodeDate(g[this.startTimeAttr])||this.newDate(g[this.startTimeAttr],this.dateClassObj),endTime:this.decodeDate&&this.decodeDate(g[this.endTimeAttr])||this.newDate(g[this.endTimeAttr],this.dateClassObj),allDay:null!=g[this.allDayAttr]?g[this.allDayAttr]:!1,cssClass:this.cssClassFunc?this.cssClassFunc(g):null,color:g[this.colorAttr],npriority:g[this.priorityAttr],repeatType:g[this.repeatTypeAttr].type,repeat:g[this.repeatTypeAttr],
schedules:g.schedules,parentSchedule:k,parentBlockLabel:f,hasParent:m(),hasAccessParent:c(),startValue:g[this.startValueAttr],summaryColor:g[this.summaryColorAttr],exclude:g.exclude||!1,reason:g.reason||"",index:"undefined"!==typeof g.index?g.index:Number.MAX_SAFE_INTEGER,blockId:g.blockId}},_getTotalRateFromScheduleArray:function(g){var d=0;this.domScheduleTree._scheduleStore.query(p.hitch(this,function(d){return-1<g.indexOf(d.id)&&0<d.rate})).forEach(p.hitch(this,function(g){d+=g.rate}));return d},
_updateItems:function(g,d,k){var f=!0,l=null;g=this.itemToRenderItem(g,this.store);-1!=d?k!=d?(this.items.splice(d,1),this.setItemSelected&&this.isItemSelected(g)&&(this.setItemSelected(g,!1),this.dispatchChange(g,this.get("selectedItem"),null,null))):(l=this.items[d],d=this.dateModule,f=(0!=d.compare(g.startTime,l.startTime)||0!=d.compare(g.endTime,l.endTime))&&g.repeatType!==h.REPEAT_RANGE&&l.repeatType!==h.REPEAT_RANGE&&g.repeatType!==h.REPEAT_CALENDAR&&l.repeatType!==h.REPEAT_CALENDAR,p.mixin(l,
g)):-1!=k&&this.items.splice(k,0,g);f?this._refreshItemsRendering():this.updateRenderers(l)}});return m})},"dojox/calendar/StoreMixin":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/dom-class dojo/Stateful dojo/when".split(" "),function(p,m,k,h,g,d,l){return p("dojox.calendar.StoreMixin",d,{store:null,query:{},queryOptions:null,startTimeAttr:"startTime",endTimeAttr:"endTime",summaryAttr:"summary",allDayAttr:"allDay",subColumnAttr:"calendar",cssClassFunc:null,
decodeDate:null,encodeDate:null,displayedItemsInvalidated:!1,itemToRenderItem:function(d,g){return this.owner?this.owner.itemToRenderItem(d,g):{id:g.getIdentity(d),summary:d[this.summaryAttr],startTime:this.decodeDate&&this.decodeDate(d[this.startTimeAttr])||this.newDate(d[this.startTimeAttr],this.dateClassObj),endTime:this.decodeDate&&this.decodeDate(d[this.endTimeAttr])||this.newDate(d[this.endTimeAttr],this.dateClassObj),allDay:null!=d[this.allDayAttr]?d[this.allDayAttr]:!1,subColumn:d[this.subColumnAttr],
cssClass:this.cssClassFunc?this.cssClassFunc(d):null}},renderItemToItem:function(d,g){if(this.owner)return this.owner.renderItemToItem(d,g);var c={};c[g.idProperty]=d.id;c[this.summaryAttr]=d.summary;c[this.startTimeAttr]=this.encodeDate&&this.encodeDate(d.startTime)||d.startTime;c[this.endTimeAttr]=this.encodeDate&&this.encodeDate(d.endTime)||d.endTime;d.subColumn&&(c[this.subColumnAttr]=d.subColumn);return"unstored"===this.getItemStoreState(d)?c:h.mixin(d._item,c)},_computeVisibleItems:function(d){if(this.owner)return this.owner._computeVisibleItems(d);
d.items=this.storeManager._computeVisibleItems(d)},_initItems:function(d){this.set("items",d);return d},_refreshItemsRendering:function(d){},_setStoreAttr:function(d){this.store=d;return this.storeManager.set("store",d)},_getItemStoreStateObj:function(d){return this.storeManager._getItemStoreStateObj(d)},getItemStoreState:function(d){return this.storeManager.getItemStoreState(d)},_cleanItemStoreState:function(d){this.storeManager._cleanItemStoreState(d)},_setItemStoreState:function(d,g){this.storeManager._setItemStoreState(d,
g)}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/CalEvent":function(){define(["dojo/_base/declare","webview/util/globalConstants"],function(p,m){return p("webview/reliable/_enterpriseSchedule/calendarEvents/CalEvent",null,{constructor:function(k){var h=new Date,g=new Date(Date.now()+9E5),d={type:m.REPEAT_EXCEPTION,value:{dom:h.getDate(),m:h.getMonth(),y:h.getFullYear()}};!1===rc.session.canEditException()&&(d={type:m.REPEAT_WEEKLY,value:h.getDay()});this.groupId=null;this.eventId=-1;
this.mnemonic="";this.label="New Event";this.summary="";this.startTime=h;this.startValue=null;this.endTime=g;this.endValue="Relinquish";this.schedules=[];this.isAllDay=!1;this.valueType=this.value=null;this.repeat=d;this.color="#aaa";this.action="add";this.index=Number.MAX_SAFE_INTEGER;this.dirty="clean";this.priority="normal";this.npriority=m.MAX_PRIORITY;this.blockId=null;this.exclude=!1;this.reason="";for(var l in k)"undefined"!==typeof k[l]&&(this[l]=k[l]);k&&(this.blockId=!k.blockId||k.blockId instanceof
Array?void 0===k.blockId?null:k.blockId:[k.blockId]);null!==this.startTime&&null!==this.endTime&&this.startTime>this.endTime&&(k=new Date(this.startTime),this.startTime=new Date(this.endTime),this.endTime=new Date(k))}})})},"webview/reliable/_enterpriseSchedule/widget/_BlockTreeNode":function(){define(["dijit/Tree","dojo/_base/declare","dojo/text!./templates/BlockTreeNode.html"],function(p,m,k){return m("webview/reliable/_enterpriseSchedule/widget/_BlockTreeNode",[p._TreeNode],{templateString:k})})},
"webview/reliable/_enterpriseSchedule/widget/BlockManager":function(){define("dijit/Dialog dijit/form/Button dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/TextBox dijit/registry dijit/Tooltip dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/_base/lang dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/json dojo/keys dojo/on dojo/query dojo/request/xhr dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/BlockManager.html dojo/topic dojox/html/entities rc/_base/util rc/StyleSwitcher rc/_Widget ./BlockManagerConfirmContent ./_BlockTreeNode ./_TreeCheckBoxNode ../BlockPreviewObservable ../../../util/util ../../../widget/WarningDialog ../../../widget/WarningDialogEnums ../../../widget/TitlePane ../../../widget/WebviewContentPane".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R,V,Q){return b("webview/reliable/_enterpriseSchedule/widget/BlockManager",[O,p],{templateString:L,MAX_NAME_LENGTH:50,blockFilteringSelect:null,blockStore:null,blocks:[],confirmDeleteDialog:null,confirmUpdateDialog:null,confirmEmptyDeleteDialog:null,enterpriseScheduleId:null,firstLoad:!0,lastMatchIndex:0,matchingScheduleNodes:null,newBlockDialog:null,previouslySelected:null,scheduleMapBuilt:!1,scheduleTree:null,
scheduleTreeData:null,site:null,warningDialog:null,_blocks:null,_blockSelectionStore:null,_blockStore:null,_buildPreviewDebounce:null,_clearingSelection:!1,_currentCompleteSchedules:[],_currentScheduleSelection:[],_currentViewedBlockContents:[],_defaultHalfBlinkTime:750,_deleteConfirmContent:null,_DefaultPreviewRootObject:{id:"root",name:"root",type:"root",value:null,rate:0,hasChildren:!0},_DefaultTreeRootObject:{id:-1,name:"root",type:"root",value:null,rate:0,hasChildren:!0},_disableBlockSelection:!1,
_ignoreBlockChange:!1,_pendingBlockChange:!1,_previewTree:null,_previewStore:null,_readOnly:!1,_schedules:null,_scheduleTreeModel:null,_scheduleTreeStore:null,_selectedBlocks:[],_updateConfirmContent:null,constructor:function(){this.rcStrings=w;this.webviewStrings=z;this.errorStrings=y},postCreate:function(){this.inherited(arguments);this._blocks={};this._currentScheduleSelection=[];this._previewStore=new W(new F({notifyOnSetData:!0,data:[this._DefaultPreviewRootObject],getChildren:function(a){return this.query({parent:a.id})}}));
this.own(this._previewStore.query({type:"block"}).observe(q.hitch(this,function(a,b){-1<b&&this._previewStore.query({parent:a.id}).forEach(q.hitch(this,function(a){this._previewStore.remove(a.id)}))})));this._blockSelectionStore=new G(new F({data:[{name:this.webviewStrings.newBlock,label:'\x3cspan class\x3d"menu-item"\x3e'+this.webviewStrings.newBlock+"\x3c/span\x3e",id:-1}]}));this._scheduleTreeStore=new G(new F({data:[{id:-1,name:"root",type:"root",value:null,hasChildren:!0}],getChildren:function(a){return this.query({parent:a.id})}}));
this._scheduleTreeModel=new r({store:this._scheduleTreeStore,query:{type:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}});this._treeNodeWithCheckbox=b(f._TreeNode,{buildRendering:function(){this.inherited(arguments);"schedule"===this.item.type&&(this.checkboxNode=new k({labelText:"",definedValue:this.item.id,_onClick:function(){}}),n.add(this.checkboxNode.domNode,"block-checkbox"),v.place(this.checkboxNode.domNode,this.iconNode,"before"),this.own(C(this.checkboxNode,"change",q.hitch(this,
this._onCheckboxChange))))},_onCheckboxChange:function(a){this.onCheckboxChange(a,this.item,this)},onCheckboxChange:function(){}});this._blockStore=new F;1===this._scheduleTreeStore.data.length&&(this.scheduleTreeData.unshift(this._DefaultTreeRootObject),this._scheduleTreeStore.setData(this.scheduleTreeData));this._blockStore.setData(this.blocks);this._createCommitButtons();this._setupOnClicks();this.blockPreviewPane.setTitleContent(this.webviewStrings.blockPreview,"left");window.onbeforeunload=q.hitch(this,
this._onbeforeunload)},getSelectedSchedules:function(){return this._getSelectedSchedules()},hide:function(a){if(void 0!==a&&!1!==a)if(this._dirty){null===this.warningDialog&&(this.warningDialog=new V({title:"",type:Q.types.binary,text:""}));this.warningDialog.set("title",this.webviewStrings.confirmUnsavedChanges);this.warningDialog.set("type",Q.types.binaryConfirm);this.warningDialog.set("text",this.webviewStrings.unsavedChangesCloseDialog);this.warningDialog.open();var b=C(this.warningDialog,"close",
q.hitch(this,function(a){switch(a){case Q.returnValues.oneOrYes:this.makeClean(!0);this.hide();break;case Q.returnValues.allOrNo:break;default:console.error(this.declaredClass+" - hide(): Unknown choice",a)}b.remove()}));this.own(b)}else this.inherited(arguments);else this.inherited(arguments);C.emit(this,"hide")},makeClean:function(a){this._dirty===a&&(n.toggle(this.saveNode.firstChild,"dirtySaveIcon",!a),n.toggle(this.saveNode.firstChild,"saveIcon",a));this._dirty=!a},onBlockModify:function(){C.emit(this,
"blockModify")},onRefreshBlocks:function(){C.emit(this,"refreshBlocks")},show:function(a){a||this._resetContent();this.makeClean(!0);this.inherited(arguments);this.defer(q.hitch(this,this._buildDisplayedContent))},updateBlocks:function(a){n.add(this.navPrev,"hidden");n.add(this.navNext,"hidden");n.add(this.noResults,"hidden");this._pendingBlockChange=!1;if(0===a.length||!1===K.arraysAreSame(a,this._blockStore.query(this._getRealBlocks)))this._pendingBlockChange=!0,this._blockStore.setData(a),this.blocks=
a,this._updateBlockSelection(),this._buildBlockSelector(q.clone(a));this.makeClean(!0)},_blinkNode:function(a){var b="#282D2F",c="#46575D";"White"===N.getStyle()&&(b="#E4E8EA",c="#BCD1D9");t.animateProperty({node:a,duration:this._defaultHalfBlinkTime,properties:{backgroundColor:{start:b,end:c}},onEnd:q.hitch(this,function(){t.animateProperty({node:a,duration:this._defaultHalfBlinkTime,properties:{backgroundColor:{start:c,end:b}},onEnd:function(){x.set(a,"backgroundColor","")}}).play()})}).play()},
_buildBlockCheckbox:function(a){var b=D("[data-query-block-id\x3d'"+a.id+"']",this.blockTreeContainer);0<b.length&&(this._blocks[a.id].destroy(),v.destroy(b[0]));b=this._createTreeCheckBoxNode(a.name,a.id);this.own(C(b,"checked",q.hitch(this,function(a,b,c){this.makeClean(!1);this._modifyBlockSelection(a,b,c)})));this._blocks[a.id]=b;v.place(b.domNode,this.blockTreeContainer,"last")},_buildBlockSelector:function(a){if(a)a.sort(q.hitch(this,function(a,b){return R.alphaNumericSort(a,b,"name")})),c.forEach(a,
q.hitch(this,function(a){a.label='\x3cspan class\x3d"menu-item"\x3e'+a.name+"\x3c/span\x3e";a.name=J.decode(a.name)})),a.unshift({name:"\f",label:"\x3cspan class\x3d'sectionDivider'\x3e"+this.webviewStrings.blocks+"\x3c/span\x3e",id:-2}),a.unshift({name:this.webviewStrings.newBlock,label:'\x3cspan class\x3d"menu-item"\x3e'+this.webviewStrings.newBlock+"\x3c/span\x3e",id:-1});else throw"Blocks must be passed in";this._blockSelectionStore.setData(a);null===this.blockFilteringSelect?(this.blockFilteringSelect=
new h({baseClass:"rcSelectBox blockSelector",hasDividers:!0,store:this._blockSelectionStore,placeHolder:this.webviewStrings.blockSelectorPlaceholder,searchAttr:"name",labelAttr:"label",labelType:"html",validate:function(){return!0},autoComplete:!1,queryExpr:"*${0}*"},this.blockSelector,"first"),this.blockFilteringSelect.startup(),this.own(C(this.blockFilteringSelect,"change",q.hitch(this,function(a){""!==a&&this._onBlockSelectorChange(a)})))):this.blockFilteringSelect.set("store",this._blockSelectionStore)},
_buildDisplayedContent:function(){null===this.scheduleTree&&this._buildScheduleTree();this.updateBlocks(this.blocks);this._buildNodeSelection();this._buildPreview()},_buildNodeSelection:function(){this.firstLoad?(this.firstLoad=!1,this._buildScheduleMap(),this._setScheduleTreeName(),this._createBlockSelection(),v.place(this.blockSelectionContainer.domNode,this.scheduleSelectionPane.domNode,"first"),v.place(this.scheduleSelectionContainer.domNode,this.scheduleSelectionPane.domNode,"last")):this._pendingBlockChange&&
(this._createBlockSelection(),v.place(this.blockSelectionContainer.domNode,this.scheduleSelectionPane.domNode,"first"));this.makeClean(!0)},_buildPreview:function(){null!==this._previewTree&&(this._previewTree.destroy(),this._previewTree=null);this._buildPreviewDebounce=null;this._previewModel=new r({store:this._previewStore,query:{id:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}});this._previewTree=new f({model:this._previewModel,baseClass:"blockNavigationTree",showRoot:!1,getIconStyle:q.hitch(this,
function(a){if("schedule"===a.type)return{backgroundColor:a.color,backgroundImage:"none",marginBottom:"4px",marginRight:"4px",height:"14px",width:"14px"}}),_createTreeNode:q.hitch(this,function(a){return"schedule"===a.item.type?new f._TreeNode(a):new P(a)}),onClick:q.hitch(this,this._onPreviewItemClick)});this.blockPreviewPane.setMainContent(this._previewTree.domNode);this._previewTree.startup()},_buildScheduleMap:function(){if(null===this._schedules){this._schedules={map:{},orderedNodes:[]};for(var b=
null,c=D(".block-checkbox",this.scheduleTree.domNode),f=0;f<c.length;f++){var b=d.byNode(c[f]),b=this._scheduleTreeStore.query({value:b.definedValue})[0],g=this.scheduleTree.getNodesByItem(b)[0];a.set(g.domNode,"data-query-string",b.name.toLocaleLowerCase());this._schedules.map[b.value]=g.checkboxNode;this._schedules.orderedNodes[f]=g.checkboxNode}this.scheduleMapBuilt=!0}},_buildScheduleTree:function(){this.scheduleTree=new f({model:this._scheduleTreeModel,baseClass:"blockNavigationTree",showRoot:!1,
autoExpand:!0,getIconStyle:q.hitch(this,function(a){if("schedule"===a.type)return{backgroundColor:a.color,backgroundImage:"none",marginBottom:"4px",marginRight:"4px",height:"14px",width:"14px"}}),onClick:q.hitch(this,this._onScheduleTreeItemClick),_createTreeNode:q.hitch(this,function(a){a=new this._treeNodeWithCheckbox(a);this.own(C(a,"checkboxChange",q.hitch(this,this._modifyScheduleSelection)));return a})});v.place(this.scheduleTree.domNode,this.scheduleTreeContainer,"first");this.scheduleTree.startup()},
_clearSelection:function(a){var b=0;if(null===a){this._clearingSelection=!0;this._selectedBlocks=[];a=Object.keys(this._blocks);for(b=a.length-1;0<=b;b--)this._blocks[a[b]]instanceof S&&this._blocks[a[b]].set("checked",!1);if(this._schedules&&this._schedules.map)for(b=this._schedules.orderedNodes.length-1;0<=b;b--)this._schedules.orderedNodes[b]instanceof k&&this._schedules.orderedNodes[b].set("checked",!1);this._clearingSelection=!1;this._previewStore.setData([this._DefaultPreviewRootObject]);this._buildPreview()}else c.forEach(a.blocks,
q.hitch(this,function(a){this._blocks.hasOwnProperty(a)&&(this._blocks[a].set("checked",!1),a=this._selectedBlocks.indexOf(a),-1<a&&this._selectedBlocks.splice(a,1))})),c.forEach(a.schedules,q.hitch(this,function(a){this._schedules.map.hasOwnProperty(a)&&this._schedules.map[a].set("checked",!1)}))},_createBlock:function(a){this._showNewBlockDialog(a).then(q.hitch(this,this._sendNewBlock))},_createBlockSelection:function(){Object.keys(this._blocks).forEach(q.hitch(this,function(a){this._blocks[a].destroy()}));
this._blockStore.query(this._getRealBlocks).forEach(q.hitch(this,this._buildBlockCheckbox))},_createTreeCheckBoxNode:function(a,b){return new S({blockId:b,name:a,disabled:this._disableBlockSelection})},_createCommitButtons:function(){this.commitNodes=v.create("span",{"class":"blockManagerCommitOptions"});this.saveNode=v.create("div",{"class":"blockManagerCommitNode"},this.commitNodes,"first");v.create("span",{"class":"rc24Icon saveIcon commitIcon"},this.saveNode,"first");v.create("span",{"class":"blockManagerCommitText"},
this.saveNode,"last");this.own(C(this.saveNode,"click",q.hitch(this,this._saveBlock)));this.deleteNode=v.create("div",{"class":"blockManagerCommitNode"},this.commitNodes,"last");v.create("span",{"class":"rc24Icon deleteIcon commitIcon"},this.deleteNode,"first");v.create("span",{"class":"blockManagerCommitText"},this.deleteNode,"last");this.saveTooltip=new l({connectId:this.saveNode,label:z.save,position:["above"],showDelay:0});n.add(this.saveTooltip.domNode,"buttonBar");this.deleteTooltip=new l({connectId:this.deleteNode,
label:w.rcDelete,position:["above"],showDelay:0});n.add(this.deleteTooltip.domNode,"buttonBar");this.own(C(this.deleteNode,"click",q.hitch(this,this._deleteBlock)));this.blockPreviewPane.setTitleContent(this.commitNodes,"right")},_deleteBlock:function(){if(0<Number(this.blockFilteringSelect.get("value"))){var a=[];c.forEach(this._currentCompleteSchedules,q.hitch(this,function(b){a.push(this._scheduleTreeStore.get(b).name)}));0<a.length?this._deleteBlockWithSchedules(a):this._deleteEmptyBlock()}else H.publish("alert",
{type:"error",message:this.errorStrings.noBlockSelected})},_deleteBlockWithSchedules:function(a){null===this.confirmDeleteDialog&&(this.confirmDeleteDialog=new V({type:Q.types.save,title:""}));this.confirmDeleteDialog.set("title",this.webviewStrings.confirmDeleteAction);this.confirmDeleteDialog.set("closeButtonVisible",!1);this.confirmDeleteDialog.set("type",Q.types.save);var b=this.confirmDeleteDialog.on("close",q.hitch(this,function(a){switch(a){case Q.returnValues.oneOrYes:this._sendDeleteBlock(!0);
break;case Q.returnValues.allOrNo:this._sendDeleteBlock(!1);break;case Q.returnValues.none:break;default:console.error(this.declaredClass+" - _deleteBlock(): Unknown choice",a)}b.remove()}));this.own(b);null===this._deleteConfirmContent&&(this._deleteConfirmContent=new M);this._deleteConfirmContent.setContent(a,this.webviewStrings.confirmDeleteText);this.confirmDeleteDialog.set("text",this._deleteConfirmContent.domNode.innerHTML);this.confirmDeleteDialog.open()},_deleteEmptyBlock:function(){null===
this.confirmEmptyDeleteDialog&&(this.confirmEmptyDeleteDialog=new V({type:Q.types.binaryConfirm}));this.confirmEmptyDeleteDialog.set("title",this.webviewStrings.confirmDeleteAction);this.confirmEmptyDeleteDialog.set("text",this.webviewStrings.confirmDeleteEmptyBlock);this.confirmEmptyDeleteDialog.set("type",Q.types.binaryConfirm);this.confirmEmptyDeleteDialog.set("closeButtonVisible",!1);var a=this.confirmEmptyDeleteDialog.on("close",q.hitch(this,function(b){switch(b){case Q.returnValues.oneOrYes:this._sendDeleteBlock(!1);
break;case Q.returnValues.allOrNo:break;case Q.returnValues.none:break;default:console.error(this.declaredClass+" - _deleteEmptyBlock(): Unknown choice",b)}a.remove()}));this.own(a);this.confirmEmptyDeleteDialog.open()},_displayErrorMessage:function(a){var b="",c="sticky",d="error";switch(a.errStatus){case 200:b=this.errorStrings.successfulSave;c="alert";d="success";break;case 501:b=this.errorStrings.blockNameExists;break;case 502:b=this.errorStrings.blockDoesNotExist;break;case 503:b=this.errorStrings.noChangesFound;
break;case 504:b=this.errorStrings.unexpectedError;console.error(this.declaredClass+" - _displayErrorMessage():Unexected Error",a.errMSG);break;case 505:b=this.errorStrings.noSchedulesInBlock;break;case 506:b=this.errorStrings.scheduleDoesNotExist;break;case 507:b=this.errorStrings.blockCannotContainItself;break;case 510:b=this.errorStrings.saveInProgress;d="info";break;case 511:b=this.errorStrings.userCancelled;d="info";break;default:b="Unexpected Error",console.error(this.declaredClass+" - _displayErrorMessage(): Unknown error status",
a)}H.publish(c,{message:b,hasConfirm:!1,type:d})},_displayScheduleErrors:function(a){if(504===a.errStatus&&a.progress&&(a=a.progress.error,a instanceof Array))for(var b=0;b<a.length;b++)H.publish("sticky",{message:I.substitute(this.errorStrings.couldNotUpdateX,[a[b].block]),type:"error"}),console.error(this.declaredClass+" _displayScheduleErrors(): Error updating schedules",a[b])},_doBlockChange:function(a){""!==a&&0<a?this._getNodesToSelect(a).then(q.hitch(this,function(a){this._currentViewedBlockContents=
null!==a.blocks?a.blocks:[];this._currentScheduleSelection=null!==a.schedules?a.schedules:[];this._previewStore.notifyOnSetData=!1;this._selectCBNodes(a);setTimeout(q.hitch(this,function(){this._previewStore.notifyOnSetData=!0;this._previewStore.setData(this._previewStore.data)}),20);this.makeClean(!0);this._currentCompleteSchedules=[];this._completedCheckboxes=0;if(null!==a.blocks){var b=H.subscribe("blockContentReceived",q.hitch(this,function(a){++this._completedCheckboxes===a&&(this._previewStore.query({type:"schedule"}).forEach(q.hitch(this,
function(a){-1===this._currentCompleteSchedules.indexOf(a.value)&&this._currentCompleteSchedules.push(a.value)})),b.remove())},a.blocks.length));this.own(b)}else null!==a.schedules&&(this._currentCompleteSchedules=a.schedules)})):(this._currentViewedBlockContents=[],this._currentScheduleSelection=[],this._currentCompleteSchedules=[]);-2===a&&null!==this.previouslySelected&&this.blockFilteringSelect.set("value",this.previouslySelected);-2!==a&&a!==this.previouslySelected&&(this.previouslySelected=
a)},_findSchedule:function(){var a=this.scheduleSearchTB.get("value").toLocaleLowerCase();this.matchingScheduleNodes=D('[data-query-string *\x3d "'+a+'"]',this.scheduleSelectionPane.domNode);this.lastMatchIndex=0;0<this.matchingScheduleNodes.length?(n.remove(this.navNext,"hidden"),n.remove(this.navPrev,"hidden"),n.add(this.noResults,"hidden"),this._scrollToMatch(this.lastMatchIndex)):(n.add(this.navNext,"hidden"),n.add(this.navPrev,"hidden"),n.remove(this.noResults,"hidden"))},_getBlockContents:function(a){var b=
new u;this.own(b);rc.xhr.request({path:"BlockManager/SchedulesForPreview",type:"rest",method:"GET",blockId:a}).then(q.hitch(this,function(a){a.data&&200===a.data.errStatus&&b.resolve(a.data.blockData)}),q.hitch(this,function(a){console.error(this.declaredClass+" - _getBlockContents(): Error getting contents",a);b.reject(a)}));return b.promise},_getChangedIds:function(a){var b={schedulesToRemove:[],schedulesToAdd:[]};a.sort(R.compareGreaterThan);this._currentCompleteSchedules.sort(R.compareGreaterThan);
for(var c=0;c<this._currentCompleteSchedules.length;c++)-1===a.indexOf(this._currentCompleteSchedules[c])&&b.schedulesToRemove.push(this._currentCompleteSchedules[c]);for(c=0;c<a.length;c++)-1===this._currentCompleteSchedules.indexOf(a[c])&&b.schedulesToAdd.push(a[c]);return b},_getNodesToSelect:function(a){var b=new u;this.own(b);-1!==a&&""!==a?rc.xhr.request({path:"BlockManager/Schedules/",type:"rest",method:"GET",blockId:a}).then(q.hitch(this,function(a){a.data&&200!==a.data.errStatus?(this._displayErrorMessage(a.data),
b.reject(a.data.errMSG),console.error(this.declaredClass+" - _getNodesToSelect(): Error getting schedules to select",a)):b.resolve(a.data.blockData)}),q.hitch(this,function(a){console.error(this.declaredClass+" - _getNodesToSelect(): Unexpected Error",a);this._displayErrorMessage({errStatus:-1,errMSG:""});b.reject(a)})):b.resolve();return b.promise},_getRealBlocks:function(a){return 0<a.id},_getScheduleTree:function(){var a=new u;E.get("EnterpriseSchedules/GetFlatScheduleTree",{handleAs:"json",query:{enterpriseId:this.enterpriseScheduleId}}).then(q.hitch(this,
function(b){b&&200===b.errStatus&&(b=b.scheduleData,b.unshift(this._DefaultTreeRootObject),this._populateTreeStore(b),a.resolve())}),q.hitch(this,function(b){console.error(this.declaredClass+" - _getScheduleTree(): Error fetching schedules",b);a.reject(b)}));return a.promise},_getSelectedSchedules:function(){var a=[];null!==this._schedules&&c.forEach(this._schedules.orderedNodes,q.hitch(this,function(b){b.get("checked")&&a.push(Number(b.get("definedValue")))}));return a},_hasChanged:function(a,b){if(a.length!==
this._currentScheduleSelection.length||b.length!==this._currentViewedBlockContents.length)return!0;a.sort(R.compareGreaterThan);this._currentScheduleSelection.sort(R.compareGreaterThan);for(var c=0;c<a.length;c++)if(a[c]!==this._currentScheduleSelection[c])return!0;b.sort(R.compareGreaterThan);this._currentViewedBlockContents.sort(R.compareGreaterThan);for(c=0;c<b.length;c++)if(b[c]!==this._currentViewedBlockContents[c])return!0;return!1},_modifyBlockSelection:function(a,b,d){if(d){d=this._previewStore.query(q.hitch(function(b){return"block"===
b.type&&"root"===b.parent&&-1===R.alphaNumericSort(a,b.name)}));0<d.length&&d.forEach(q.hitch(this,function(a){this._previewStore.remove(a.id)}));d.unshift({id:"block"+b,name:a,type:"block",value:b,parent:"root",rate:0,hasChildren:!0});var f=this._previewStore.query({type:"schedule",parent:"root"});f.forEach(q.hitch(this,function(a){this._previewStore.remove(a.id)}));d.forEach(q.hitch(this,function(a){this._previewStore.put(a)}));f.forEach(q.hitch(this,function(a){this._previewStore.put(a)}));this._getBlockContents(b).then(q.hitch(this,
function(a){c.forEach(a,q.hitch(this,function(a){this._previewStore.put(a)}));H.publish("blockContentReceived")}),q.hitch(this,function(a){console.error(this.declaredClass+" - _modifyBlockSelection(): Error getting block contents",a)}));-1===this._selectedBlocks.indexOf(b)&&this._selectedBlocks.push(b)}else{for(d=this._selectedBlocks.indexOf(b);-1<d;)this._selectedBlocks.splice(d,1),d=this._selectedBlocks.indexOf(b);this._removeChildrenFromPreview(this._previewStore.query({parent:"block"+b}));this._previewStore.remove("block"+
b)}},_modifyScheduleSelection:function(a,b){if(!this._clearingSelection&&!1!==this.open)if(a){var c=this._previewStore.query();if(0<c.length){var d=[];d.push(c[0]);if(1==c.length)d.push({id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1});else{for(var f=this._schedules.orderedNodes.indexOf(this._schedules.map[b.value]),g=!1,h=1;h<c.length;h++){var k=c[h];if(!1===g){var l=this._schedules.orderedNodes.indexOf(this._schedules.map[k.value]);
f<l&&(g=!0,d.push({id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1}))}d.push(k)}!1===g&&d.push({id:"schedule"+b.value,name:b.name,color:b.color,type:"schedule",value:b.value,parent:"root",rate:b.rate,hasChildren:!1})}this._previewStore.setData(d)}}else this._previewStore.query({type:"schedule",parent:"root",value:b.value}).forEach(q.hitch(this,function(a){this._previewStore.remove(a.id)}))},_onbeforeunload:function(a){a=a||window.event;
var b=w.unsavedWarning;if(this._dirty)return a&&(a.returnValue=b),b},_onBlockSelectorChange:function(a){if(this._ignoreBlockChange)this._ignoreBlockChange=!1;else if(this._dirty&&a!==this.previouslySelected){null===this.warningDialog&&(this.warningDialog=new V({title:"",type:Q.types.binaryConfirm,text:"",closeButtonVisible:!1}));this.warningDialog.set("title",this.webviewStrings.confirmUnsavedChanges);this.warningDialog.set("text",this.errorStrings.unsavedChangesContinue);this.warningDialog.set("type",
Q.types.binaryConfirm);this.warningDialog.set("closeButtonVisible",!1);var b=this.warningDialog.on("close",q.hitch(this,function(c){switch(c){case Q.returnValues.oneOrYes:this.makeClean(!0);this._doBlockChange(a);break;case Q.returnValues.allOrNo:this._ignoreBlockChange=!0;this.blockFilteringSelect.set("value",this.previouslySelected);break;default:console.error(this.declaredClass+" - _onBlockSelectorChange(): Unknown choice",c)}b.remove()}));this.own(b);this.warningDialog.open()}else this._doBlockChange(a)},
_onNewBlock:function(a,b){var c=D(".block-selection",this.scheduleSelectionPane.domNode)[0],c=D("[data-query-block-id]",c).filter(function(b){return-1===R.alphaNumericSort(a,b.title)})[0],d=this._createTreeCheckBoxNode(a,b);this.own(C(d,"checked",q.hitch(this,this._modifyBlockSelection)));this._blocks[b]=d;void 0!==c?v.place(d.domNode,c,"before"):v.place(d.domNode,this.blockTreeContainer,"last");this.onRefreshBlocks();this._doBlockChange(b);this.blockFilteringSelect&&this.blockFilteringSelect.set("displayedValue",
a)},_onPreviewItemClick:function(a){var b=null;"schedule"===a.type?(a=this._scheduleTreeStore.query({type:"schedule",value:a.value})[0],b=this.scheduleTree.getNodesByItem(a)[0].labelNode):"block"===a.type?(b=D(".block-selection",this.scheduleSelectionPane.domNode)[0],b=D('[data-query-string \x3d "'+a.name.toLowerCase()+'"]',b)[0]):console.error(this.declaredClass+" - _onPreviewItemClick(): Unknown type",a);null!==b&&(this._blinkNode(b),a=this.scheduleSelectionPane.containerNode,a.scrollTop=b.offsetTop-
a.offsetTop)},_onScheduleTreeItemClick:function(a,b){this._readOnly||b.checkboxNode.get("disabled")||(this.makeClean(!1),b.checkboxNode.get("checked")?(b.checkboxNode.set("checked",!1),this._previewStore.query({value:a.value,type:"schedule",parent:"root"}).forEach(q.hitch(this,function(a){this._previewStore.remove(a.id)})),this._selectChildSchedules(a.value,!1)):(this._previewStore.notifyOnSetData=!1,b.checkboxNode.set("checked",!0),this._selectChildSchedules(a.value,!0),setTimeout(q.hitch(this,function(){this._previewStore.notifyOnSetData=
!0;this._previewStore.setData(this._previewStore.data)}),20)))},_populateTreeStore:function(a){this._scheduleTreeStore=new G(new F({data:a,getChildren:function(a){return this.query({parent:a.id})}}));this._scheduleTreeModel=new r({store:this._scheduleTreeStore,query:{type:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}})},_removeBlock:function(a){this._blocks[a].destroy();this._blockSelectionStore.remove(a);delete this._blocks[a];for(var b=0;b<this.blocks.length;++b)if(this.blocks[b].id===
a){this.blocks.splice(b,1);break}this._previewStore.query(function(a){return"root"!==a.id}).forEach(q.hitch(this,function(a){this._previewStore.remove(a.id)}));this.blockFilteringSelect.reset();this._clearSelection(null)},_removeChildrenFromPreview:function(a){a.forEach(q.hitch(this,function(a){a.hasChildren&&this._removeChildrenFromPreview(this._previewStore.query({parent:a.id}));this._previewStore.remove(a.id)}))},_resetContent:function(){this._clearSelection(null);this._previewStore.setData([this._DefaultPreviewRootObject]);
this.blockFilteringSelect&&this.blockFilteringSelect.reset()},_saveBlock:function(){var a=Number(this.blockFilteringSelect.get("value")),b=!1;0===a&&0<this.previouslySelected&&(""===this.blockFilteringSelect.get("displayedValue")?a=-1:(a=this.previouslySelected,b=!0));var d=this._getSelectedSchedules();if(0<d.length||0<this._selectedBlocks.length)if(0<a)if(this._hasChanged(d,this._selectedBlocks)){var f=[];this._previewStore.query({type:"schedule"}).forEach(function(a){-1===f.indexOf(a.value)&&f.push(a.value)});
a=this._getChangedIds(f);if(0<a.schedulesToAdd.length||0<a.schedulesToRemove.length){var g=[],h=[],k=!1,b=this.webviewStrings.confirmUpdateAddText,d=[this.webviewStrings.and,this.webviewStrings.confirmUpdateDeleteText].join(" ");c.forEach(a.schedulesToAdd,q.hitch(this,function(a){a=this._scheduleTreeStore.query({value:a})[0];g.push(a.name);0<a.rate&&(k=!0)}));0<a.schedulesToRemove.length&&0<a.schedulesToAdd.length?c.forEach(a.schedulesToRemove,q.hitch(this,function(a){h.push(this._scheduleTreeStore.query({value:a})[0].name)})):
0<a.schedulesToRemove.length&&(c.forEach(a.schedulesToRemove,q.hitch(this,function(a){g.push(this._scheduleTreeStore.query({value:a})[0].name)})),b=this.webviewStrings.confirmDeleteText);null===this.confirmUpdateDialog&&(this.confirmUpdateDialog=new V({title:"",type:Q.types.save}));this.confirmUpdateDialog.set("title",this.webviewStrings.confirmUpdateAction);this.confirmUpdateDialog.set("type",Q.types.save);null===this._updateConfirmContent&&(this._updateConfirmContent=new M);this._updateConfirmContent.setContent(g,
b,h,d,k);this.confirmUpdateDialog.set("text",this._updateConfirmContent.domNode.innerHTML);var l=this.confirmUpdateDialog.on("close",q.hitch(this,function(a){switch(a){case Q.returnValues.oneOrYes:this._sendBlockUpdate(!0);break;case Q.returnValues.allOrNo:this._sendBlockUpdate(!1);break;case Q.returnValues.none:break;default:console.error(this.declaredClass+" - saveBlock(): Unknown choice",a)}l.remove()}));this.own(l);this.confirmUpdateDialog.open()}else this._sendBlockUpdate(!1)}else b?(this._sendBlockUpdate(!1),
this.updateBlockCheckBoxName(a,this.blockFilteringSelect.get("displayedValue"))):(this._displayErrorMessage({errStatus:200,errMSG:"Success"}),this.makeClean(!0));else-1===a?this._createBlock(null,this._selectedBlocks,this._getSelectedSchedules()):this._createBlock(this.blockFilteringSelect.get("displayedValue"));else this._displayErrorMessage({errStatus:505,errMessage:"Block contains no schedules"})},_scrollToMatch:function(a){var b=this.containerNode;this._blinkNode(this.matchingScheduleNodes[a]);
b.scrollTop=this.matchingScheduleNodes[a].offsetTop-b.offsetTop},_selectCBNodes:function(a){var b=null!==a.blocks?a.blocks:[],d=null!==a.schedules?a.schedules:[],f=[],g=[];0===b.length?this._clearSelection(null):(c.forEach(this._selectedBlocks,function(a){-1===b.indexOf(a)&&f.push(a)}),c.forEach(this._getSelectedSchedules(),function(a){-1===d.indexOf(a)&&g.push(a)}),this._clearSelection({blocks:f,schedules:g}));c.forEach(b,q.hitch(this,function(a){this._blocks[a].set("checked",!0)}));c.forEach(d,
q.hitch(this,function(a){this._schedules.map[a].set("checked",!0)}))},_selectChildSchedules:function(a,b){this._scheduleTreeStore.query({parent:a}).forEach(q.hitch(this,function(a){var c=this._schedules.map[a.value];c.get("disabled")||(c.set("checked",b),this._selectChildSchedules(a.value,b))}))},_sendBlockUpdate:function(a){var b=Number(this.blockFilteringSelect.get("value"));0===b&&-1!==this.previouslySelected&&null!==this.previouslySelected&&(b=this.previouslySelected);var c=this.blockFilteringSelect.get("displayedValue"),
d={path:"BlockManager/Update",type:"rest",method:"POST",blockId:b,blockName:c,updateSchedules:a,siteId:this.site,blocks:A.stringify(this._selectedBlocks),schedules:A.stringify(this._getSelectedSchedules())};this.updateBlockCheckBoxName(b,c);b=new u;a?this._validateApprovalSessionWithReason(d).then(b.resolve,b.reject):b.resolve();b.then(q.hitch(this,function(){rc.xhr.request(d).then(q.hitch(this,function(a){a.data&&200===a.data.errStatus?(this.makeClean(!0),this.onRefreshBlocks(),this._doBlockChange(this.blockFilteringSelect.get("value"))):
a.data&&507===a.data.errStatus?this._showDuplicateBlock():console.error(this.declaredClass+" - _sendBlockUpdate(): "+a.data.errMSG,a.data);this._displayErrorMessage(a.data)}),q.hitch(this,function(a){console.error(this.declaredClass+" - _sendBlockUpdate(): Unexpected Error",a);this._displayErrorMessage({errStatus:-1,errMSG:""})}))}),function(){})},_sendDeleteBlock:function(a){var b=Number(this.blockFilteringSelect.get("value")),c={path:"BlockManager/",type:"rest",method:"DELETE",deleteEvents:a,blockId:b,
siteId:this.site},b=new u;a?this._validateApprovalSessionWithReason(c).then(b.resolve,b.reject):b.resolve();b.then(q.hitch(this,function(){rc.xhr.request(c).then(q.hitch(this,function(a){a.data&&200===a.data.errStatus?(this._removeBlock(a.blockId),this.makeClean(!0),this.onRefreshBlocks()):console.error(this.declaredClass+" - _sendDeleteBlock(): "+a.data.errMSG,a.data);this._displayErrorMessage(a.data)}),q.hitch(this,function(a){console.error(this.declaredClass+" - _sendDeleteBlock(): Unexpected Error",
a);this._displayErrorMessage({errStatus:-1,errMSG:""})}))}),function(){})},_sendNewBlock:function(a){var b=this._selectedBlocks,c=this._getSelectedSchedules();rc.xhr.request({path:"BlockManager/",type:"rest",method:"POST",entId:this.enterpriseScheduleId,blockName:a,blocks:0<b.length?A.stringify(this._selectedBlocks):null,schedules:0<c.length?A.stringify(this._getSelectedSchedules()):null}).then(q.hitch(this,function(a){a.data&&200===a.data.errStatus&&(this._blockStore.put({id:a.data.newId,name:a.blockName}),
this._onNewBlock(a.blockName,a.data.newId),this.makeClean(!0));this._displayErrorMessage(a.data)}))},_setScheduleTreeName:function(){var a=new u;this.own(a);rc.xhr.request({path:"BlockManager/GetESName",type:"rest",method:"GET",enterpriseId:this.enterpriseScheduleId}).then(q.hitch(this,function(b){b.data&&200===b.data.errStatus?a.resolve(b.data.esName):(b.data?this._displayErrorMessage(b.data):this._displayErrorMessage({errStatus:-1,errMSG:"No Data Returned"}),a.reject())}),q.hitch(this,function(b){this._displayErrorMessage({errStatus:-1,
errMSG:"Error getting Enterprise Schedule Name"});console.error(this.declaredClass+" - _setScheduleTreeName(): Error getting ES Name",b);a.reject(b)}));return a.promise},_setupOnClicks:function(){this.own(C(this.scheduleSearchButton,"click",q.hitch(this,this._findSchedule)));this.own(C(this.scheduleSearchTB,"keypress",q.hitch(this,function(a){a.charOrCode===B.ENTER&&this._findSchedule()})));this.own(C(this.navPrev,"click",q.hitch(this,function(){this.lastMatchIndex=0!==this.lastMatchIndex?this.lastMatchIndex-
1:this.matchingScheduleNodes.length-1;this._scrollToMatch(this.lastMatchIndex)})));this.own(C(this.navNext,"click",q.hitch(this,function(){this.lastMatchIndex=this.lastMatchIndex!==this.matchingScheduleNodes.length-1?this.lastMatchIndex+1:0;this._scrollToMatch(this.lastMatchIndex)})))},_showDuplicateBlock:function(){this._previewTree.expandAll().then(q.hitch(this,function(){this._previewStore.query({value:this.blockFilteringSelect.get("value")}).forEach(q.hitch(this,function(a){a=this._previewTree.getNodesByItem(a)[0];
if(void 0!==a){this._previewTree.set("selectedNode",a);var b=this.blockPreviewPane.contentPaneBody;b.scrollTop=a.domNode.offsetTop-b.offsetTop;this._blinkNode(a.domNode)}}))}))},_showNewBlockDialog:function(a){var b=new u;this.own(b);if(null===this.newBlockDialog){this.dialogContent=v.create("div",{"class":"newBlockDialogContent"});this.newNameTB=new g({baseClass:"rcTextBox",value:null!==a?a:""});this.dialogContent.appendChild(this.newNameTB.domNode);var c=v.create("div",{"class":"button-container"},
this.dialogContent,"last");this.saveNewName=new m({baseClass:"webviewButton",iconClass:"rcIcon okIcon",disabled:null===a||""===a,label:this.webviewStrings.rcbOkay});c.appendChild(this.saveNewName.domNode);this.cancelNewName=new m({baseClass:"webviewButton",iconClass:"rcIcon cancelIcon",label:this.webviewStrings.rcbCancel});c.appendChild(this.cancelNewName.domNode);this.own(C(this.newNameTB,"keyup",q.hitch(this,function(){""!==this.newNameTB.get("value")?this.saveNewName.set("disabled",!1):this.saveNewName.set("disabled",
!0)})));this.newBlockDialog=new p({title:this.webviewStrings.saveAs,baseClass:"save-block-as",content:this.dialogContent})}var d=C(this.saveNewName,"click",q.hitch(this,function(a){var b=this.newNameTB.get("value");""!==b&&J.encode(b).length<this.MAX_NAME_LENGTH?b!==this.webviewStrings.newBlock&&b!==this.webviewStrings.allBlocks?(a.resolve(b),this.newBlockDialog.hide(),f&&f.remove(),d.remove()):H.publish("alert",{type:"error",message:this.errorStrings.reservedName+" "+b}):""===b?(H.publish("sticky",
{type:"error",message:this.errorStrings.emptyNameField}),console.error(this.declaredClass+" - _showNewBlockDialog(): New name empty")):H.publish("alert",{type:"error",message:I.substitute(this.errorStrings.invalidNameFieldExceedsX,[this.MAX_NAME_LENGTH])})},b)),f=C(this.cancelNewName,"click",q.hitch(this,function(a){a.reject("User Cancelled");this.newBlockDialog.hide();d&&d.remove();f.remove()},b));this.newNameTB.set("value",null!==a?a:"");this.newBlockDialog.show();return b.promise},_updateBlockSelection:function(){this._blockStore.query().forEach(q.hitch(this,
function(a){this.updateBlockCheckBoxName(a.id,a.name)}))},updateBlockCheckBoxName:function(b,c){var d=D('[data-query-block-id \x3d "'+b+'"]',this.blockTreeContainer)[0];d&&(a.set(d,"title",c),(d=D(".block-checkbox-label",d)[0])&&a.set(d,"innerHTML",c))},destroy:function(){this.makeClean(!0);this.scheduleTree&&(this.scheduleTree.destroy(),this.scheduleTree=null);this._previewTree&&(this._previewTree.destroy(),this._previewTree=null);this.inherited(arguments)}})})},"webview/reliable/_enterpriseSchedule/widget/BlockManagerConfirmContent":function(){define("dijit/_TemplatedMixin dijit/_Widget dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/i18n!webview/nls/enterpriseSchedules dojo/text!./templates/BlockManagerConfirmContent.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return h("webview/reliable/_enterpriseSchedule/widget/BlockManagerConfirmContent",[m,p],{templateString:c,enterpriseScheduleStrings:r,postCreate:function(){this.inherited(arguments)},setContent:function(b,c,h,m,a){l.toggle(this.costWarning,"hidden",!a);d.set(this.topTextContainer,"innerHTML",c);d.set(this.topSchedules,"innerHTML","");k.forEach(b,g.hitch(this,function(a){f.create("li",{innerHTML:a},this.topSchedules,"last")}));h&&0<h.length?(d.set(this.bottomTextContainer,
"innerHTML",m),d.set(this.bottomSchedules,"innerHTML",""),k.forEach(h,g.hitch(this,function(a){f.create("li",{innerHTML:a},this.bottomSchedules,"last")})),l.remove(this.bottomArea,"hidden")):l.add(this.bottomArea,"hidden")}})})},"webview/reliable/_enterpriseSchedule/widget/_TreeCheckBoxNode":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/text!./templates/_TreeCheckBoxNode.html dijit/form/CheckBox".split(" "),
function(p,m,k,h,g,d,l){return h("webview/reliable/_enterpriseSchedule/widget/_TreeCheckBoxNode",[m,p,k],{templateString:l,checked:!1,disabled:!1,blockId:null,name:null,postCreate:function(){this.inherited(arguments);this.set("disabled",this.disabled);this.label.innerHTML=this.name;this.checkbox.set("onClick",function(){return!1});this.domNode.title=this.name;g.set(this.domNode,"data-query-string",this.name.toLocaleLowerCase());g.set(this.domNode,"data-query-block-id",this.blockId)},_getCheckedAttr:function(){return this.checked},
_setCheckedAttr:function(d){this.checkbox.set("checked",d);this._set("checked",d);this.onChecked(this.name,this.blockId,d)},_getDisabledAttr:function(){return this.disabled},_setDisabledAttr:function(f){this.checkbox.set("disabled",f);d.toggle(this.domNode,"disabled",f);this._set("disabled",f)},onChecked:function(){},_onClick:function(){this.disabled||this.set("checked",!this.checked)}})})},"webview/reliable/_enterpriseSchedule/BlockPreviewObservable":function(){define(["dojo/_base/kernel","dojo/_base/lang",
"dojo/when","dojo/_base/array"],function(p,m,k,h){p=function(g){function d(b,d){var f=g[b];f&&(g[b]=function(h){var a;"put"===b?a=g.getIdentity(h):"setData"==b&&(a=this.notifyOnSetData);if(c)return f.apply(this,arguments);c=!0;try{var l=f.apply(this,arguments);k(l,function(b){d("object"==typeof b&&b||h,a)});return l}finally{c=!1}})}var l=[],f=0;g=m.delegate(g);g.notify=function(b,c){f++;for(var d=l.slice(),g=0,a=d.length;g<a;g++)d[g](b,c)};var r=g.query;g.query=function(b,c){c=c||{};var d=r.apply(this,
arguments);if(d&&d.forEach){var p=m.mixin({},c);delete p.start;delete p.count;var a=g.queryEngine&&g.queryEngine(b,p),n=f,t=[],x;d.observe=function(b,m){1==t.push(b)&&l.push(x=function(b,l){k(d,function(d){var k=d.length!=c.count,q,r;if(++n!=f)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var p,u=-1,y=-1;if(void 0!==l){var w=[].concat(d);a&&!b&&(w=a(d));q=0;for(r=d.length;q<r;q++){var v=d[q];if(g.getIdentity(v)==l&&!(0>w.indexOf(v))){p=v;u=q;!a&&
b||d.splice(q,1);break}}}a?b&&(a.matches?a.matches(b):a([b]).length)&&(q=-1<u?u:d.length,d.splice(q,0,b),y=h.indexOf(a(d),b),d.splice(q,1),c.start&&0==y||!k&&y==d.length?y=-1:d.splice(y,0,b)):b&&(void 0!==l?y=u:c.start||(y=g.defaultIndex||0,d.splice(y,0,b)));if((-1<u||-1<y)&&(m||!a||u!=y))for(k=t.slice(),q=0;d=k[q];q++)d(b||p,u,y)})});var q={};q.remove=q.cancel=function(){var a=h.indexOf(t,b);-1<a&&(t.splice(a,1),t.length||l.splice(h.indexOf(l,x),1))};return q}}return d};var c;d("put",function(b,
c){g.notify(b,c)});d("add",function(b){g.notify(b)});d("remove",function(b){g.notify(void 0,b)});d("setData",function(b,c){c&&dojo.forEach(b,function(b){var c=g.getIdentity(b);c&&(g.notify(void 0,c),g.notify(b,g.getIdentity(b)))})});return g};m.setObject("webview.reliable._enterpriseSchedule.BlockPreviewObservable",p);return p})},"webview/reliable/_enterpriseSchedule/overriddenViews/HorizontalRenderer":function(){define(["dojo/_base/lang","dojo/text!./templates/HorizontalRenderer.html","dojox/calendar/HorizontalRenderer",
"./_RendererMixin"],function(p,m,k){return p.extend(k,{templateString:m})})},"dojox/calendar/HorizontalRenderer":function(){define("dojo/_base/declare dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin ./_RendererMixin dojo/text!./templates/HorizontalRenderer.html".split(" "),function(p,m,k,h,g,d){return p("dojox.calendar.HorizontalRenderer",[k,h,g],{templateString:d,_orientation:"horizontal",visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:32,endTimeLabel:30},
_displayValueMap:{beforeIcon:"inline",afterIcon:"inline"},_displayValue:"inline",arrowPadding:12,_isElementVisible:function(d,f,g,c){var b;b=this.isLeftToRight();"startTimeLabel"==d&&(this.labelContainer&&(b&&g||!b&&f)?m.set(this.labelContainer,"marginRight",this.arrowPadding+"px"):m.set(this.labelContainer,"marginRight",0),this.labelContainer&&(!b&&g||b&&f)?m.set(this.labelContainer,"marginLeft",this.arrowPadding+"px"):m.set(this.labelContainer,"marginLeft",0));switch(d){case "startTimeLabel":b=
this.item.startTime;if(this.item.allDay||this.owner.isStartOfDay(b))return!1;break;case "endTimeLabel":if(b=this.item.endTime,this.item.allDay||this.owner.isStartOfDay(b))return!1}return this.inherited(arguments)},getDisplayValue:function(d){return(d=this._displayValueMap[d])?d:this._displayValue},postCreate:function(){this.inherited(arguments);this._applyAttributes()}})})},"dojox/calendar/_RendererMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/dom-class",
"dojo/Stateful"],function(p,m,k,h,g){return p("dojox.calendar._RendererMixin",g,{item:null,owner:null,edited:!1,focused:!1,hovered:!1,selected:!1,storeState:!1,moveEnabled:!0,resizeEnabled:!0,_orientation:"vertical",_displayValue:"block",_displayValueMap:{},visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:45,endTimeLabel:50},_setSelectedAttr:function(d){this._setState("selected",d,"Selected")},_setFocusedAttr:function(d){this._setState("focused",d,"Focused")},
_setEditedAttr:function(d){this._setState("edited",d,"Edited")},_setHoveredAttr:function(d){this._setState("hovered",d,"Hovered")},_setStoreStateAttr:function(d){var g=null;switch(d){case "storing":g="Storing";break;case "unstored":g="Unstored";break;default:g=null}var f=this.stateNode||this.domNode;h.remove(f,"Storing");h.remove(f,"Unstored");this._set("storeState",d);null!=g&&h.add(f,g)},_setState:function(d,g,f){this[d]!=g&&(h[g?"add":"remove"](this.stateNode||this.domNode,f),this._set(d,g))},
_setItemAttr:function(d){null==d?(this.item&&this.item.cssClass&&h.remove(this.domNode,this.item.cssClass),this.item=null):(null!=this.item?(this.item.cssClass!=d.cssClass&&this.item.cssClass&&h.remove(this.domNode,this.item.cssClass),this.item=m.mixin(this.item,d)):this.item=d,d.cssClass&&h.add(this.domNode,d.cssClass))},_setText:function(d,g,f){this.owner&&this.owner._setText(d,g,f)},_isElementVisible:function(d,g,f,h){var c,b=this.visibilityLimits[d];switch(d){case "moveHandle":c=this.moveEnabled;
break;case "resizeStartHandle":c=this.mobile?this.resizeEnabled&&!g&&this.edited&&(-1==b||h>b):this.resizeEnabled&&!g&&(-1==b||h>b);break;case "resizeEndHandle":c=this.mobile?this.resizeEnabled&&!f&&this.edited&&(-1==b||h>b):this.resizeEnabled&&!f&&(-1==b||h>b);break;case "startTimeLabel":c=this.mobile?!g&&(!this.edited||this.edited&&(-1==b||h>b)):!g&&(-1==b||h>b);break;case "endTimeLabel":c=this.edited&&!f&&(-1==b||h>b);break;case "summaryLabel":c=this.mobile?!this.edited||this.edited&&(-1==b||h>
b):-1==b||h>b}return c},_formatTime:function(d,g){if(this.owner){var f=this.owner.get("formatItemTimeFunc");if(null!=f&&"function"===typeof f)return f(g,d,this.owner,this.item)}return d.dateLocaleModule.format(g,{selector:"time"})},getDisplayValue:function(d){return this._displayValue},updateRendering:function(d,g){g=g||this.item.h;d=d||this.item.w;if(g||d){this.item.h=g;this.item.w=d;var f="vertical"==this._orientation?g:d,h=this.owner.renderData,c=0!=h.dateModule.compare(this.item.range[0],this.item.startTime),
b=0!=h.dateModule.compare(this.item.range[1],this.item.endTime),l;null!=this.beforeIcon&&(l="horizontal"!=this._orientation||this.isLeftToRight()?c:b,k.set(this.beforeIcon,"display",l?this.getDisplayValue("beforeIcon"):"none"));null!=this.afterIcon&&(l="horizontal"!=this._orientation||this.isLeftToRight()?b:c,k.set(this.afterIcon,"display",l?this.getDisplayValue("afterIcon"):"none"));this.moveHandle&&(l=this._isElementVisible("moveHandle",c,b,f),k.set(this.moveHandle,"display",l?this.getDisplayValue("moveHandle"):
"none"));this.resizeStartHandle&&(l=this._isElementVisible("resizeStartHandle",c,b,f),k.set(this.resizeStartHandle,"display",l?this.getDisplayValue("resizeStartHandle"):"none"));this.resizeEndHandle&&(l=this._isElementVisible("resizeEndHandle",c,b,f),k.set(this.resizeEndHandle,"display",l?this.getDisplayValue("resizeEndHandle"):"none"));this.startTimeLabel&&(l=this._isElementVisible("startTimeLabel",c,b,f),k.set(this.startTimeLabel,"display",l?this.getDisplayValue("startTimeLabel"):"none"),l&&this._setText(this.startTimeLabel,
this._formatTime(h,this.item.startTime)));this.endTimeLabel&&(l=this._isElementVisible("endTimeLabel",c,b,f),k.set(this.endTimeLabel,"display",l?this.getDisplayValue("endTimeLabel"):"none"),l&&this._setText(this.endTimeLabel,this._formatTime(h,this.item.endTime)));this.summaryLabel&&(l=this._isElementVisible("summaryLabel",c,b,f),k.set(this.summaryLabel,"display",l?this.getDisplayValue("summaryLabel"):"none"),l&&this._setText(this.summaryLabel,this.item.summary,!0))}}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/_RendererMixin":function(){define("dojo/_base/lang dojo/currency dojo/date dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojox/calendar/_RendererMixin webview/util/globalConstants".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return p.extend(c,{summaryHandle:null,watchHandle:null,updateRendering:function(b,c){c=c||this.item.h;b=b||this.item.w;if(!c&&!b)return null;this.item.h=c;this.item.w=b;var k="vertical"==this._orientation?c:b,a=this.owner.renderData,l=0!=a.dateModule.compare(this.item.range[0],this.item.startTime),m=0!=a.dateModule.compare(this.item.range[1],this.item.endTime),q;null!=this.beforeIcon&&(q="horizontal"!=this._orientation||this.isLeftToRight()?l:m,d.set(this.beforeIcon,
"display",q?this.getDisplayValue("beforeIcon"):"none"));null!=this.afterIcon&&(q="horizontal"!=this._orientation||this.isLeftToRight()?m:l,d.set(this.afterIcon,"display",q?this.getDisplayValue("afterIcon"):"none"));this.moveHandle&&(q=this._isElementVisible("moveHandle",l,m,k),d.set(this.moveHandle,"display",q?this.getDisplayValue("moveHandle"):"none"));this.resizeStartHandle&&(q=this._isElementVisible("resizeStartHandle",l,m,k),d.set(this.resizeStartHandle,"display",q?this.getDisplayValue("resizeStartHandle"):
"none"));this.resizeEndHandle&&(q=this._isElementVisible("resizeEndHandle",l,m,k),d.set(this.resizeEndHandle,"display",q?this.getDisplayValue("resizeEndHandle"):"none"));this.startTimeLabel&&(q="vertical"===this._orientation?!0:this._isElementVisible("startTimeLabel",l,m,k),d.set(this.startTimeLabel,"display",q?this.getDisplayValue("startTimeLabel"):"none"),q&&this._setText(this.startTimeLabel,this._formatTime(a,this.item.startTime)+" - "+this._formatTime(a,this.item.endTime)));this.summaryLabel&&
(q=this._isElementVisible("summaryLabel",l,m,k),h.set(this.summaryLabel,"innerHTML",this.item.summary),d.set(this.summaryLabel,"display",q?this.getDisplayValue("summaryLabel"):"none"),0<this.item.totalRate&&0<this.item.startValue?(g.remove(this.costLabel,"hidden"),this._updateCostAndRate()):g.add(this.costLabel,"hidden"),this.item.hasParent&&this.item.hasAccessParent&&!this.item.editable?(g.add(this.summaryLabel,"linkable"),g.add(this.sourceLabel,"linkable"),null!==this.watchHandle&&(this.watchHandle.remove(),
this.watchHandle=null),this.watchHandle=this.watch("selected",p.hitch(this,this.resetOnclickListener))):(g.remove(this.summaryLabel,"linkable"),g.remove(this.sourceLabel,"linkable")),q&&(this.item.hasParent?(this._setText(this.summaryLabel,this.item.summary,!0),this._setText(this.sourceLabel,f.source+": "+this.item.parentBlockLabel,!0),g.remove(this.sourceLabel,"hidden")):(this._setText(this.summaryLabel,this.item.summary,!0),this._setText(this.sourceLabel,"",!0),g.add(this.sourceLabel,"hidden"))));
"delete"===this.item.action&&d.set(this.domNode,"display","none");k="";this.item.color&&(k=this.getRGBAColour(this.item.color,!1),d.set(this.domNode,"backgroundColor",k),this.bgNode&&d.set(this.bgNode,"backgroundColor",k));this.item.summaryColor&&(k=this.getRGBAColour(this.item.summaryColor,!0),d.set(this.domNode,"backgroundColor",k),this.bgNode&&d.set(this.bgNode,"backgroundColor",k));return this.domNode},resetOnclickListener:function(b,c,d){null!==this.summaryHandle&&(this.summaryHandle.remove(),
this.summaryHandle=null);!0===d&&setTimeout(p.hitch(this,function(){this.summaryHandle=r(this.summaryLabel.parentElement,"click",p.hitch(this,this.scheduleChangeClicked))}),250)},scheduleChangeClicked:function(){null!==this.summaryHandle&&(this.summaryHandle.remove(),this.summaryHandle=null);if(null===this.item.blockId)this.onBlockChange(this.item.parentSchedule,!1);else this.onBlockChange(this.item.blockId,!0)},onBlockChange:function(b,c){g.remove(this.summaryLabel,"linkable");g.remove(this.sourceLabel,
"linkable");return{blockId:b,forBlockGroup:c}},getRGBAColour:function(c,d){var f,a,g=null;4<c.length?(f=parseInt(c.substr(1,2),16),a=parseInt(c.substr(3,2),16),g=parseInt(c.substr(5,2),16)):(f=parseInt(c.substr(1,1)+c.substr(1,1),16),a=parseInt(c.substr(2,1)+c.substr(2,1),16),g=parseInt(c.substr(3,1)+c.substr(3,1),16));var h=d?"1":"0.2";switch(this.item.repeatType){case b.REPEAT_WEEKLY:case b.REPEAT_OVERRIDE:f="rgba("+f+","+a+","+g+","+h+")";break;case b.REPEAT_CALENDAR:f=null===this.item.repeat.start||
null===this.item.repeat.end?"rgba("+f+","+a+","+g+","+h+")":"rgba("+f+","+a+","+g+",1)";break;case b.REPEAT_RECURRENCE:if(this.item.repeat.value.wom!==b.WILDCARD||this.item.repeat.value.m!==b.WILDCARD){f="rgba("+f+","+a+","+g+","+h+")";break}default:f="rgba("+f+","+a+","+g+",1)"}return f},_updateCostAndRate:function(){var c={};null!==this.item.currency&&(c={currency:this.item.currency,symbol:b.CurrencyToSymbol[this.item.currency]});var d=this.item.totalRate.toFixed(2);null!==this.item.currency&&(d=
m.format(this.item.totalRate,c));var g=k.difference(this.item.startTime,this.item.endTime,"second")/3600*this.item.totalRate,a=g.toFixed(2);null!==this.item.currency&&(a=m.format(g,c));this._setText(this.costLabel,d+f.scheduleRate+" "+l.rtrTotal+" "+a,!0)}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/LabelRenderer":function(){define(["dojo/_base/lang","dojo/text!./templates/LabelRenderer.html","dojox/calendar/LabelRenderer","./_RendererMixin"],function(p,m,k){return p.extend(k,{templateString:m})})},
"dojox/calendar/LabelRenderer":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","./_RendererMixin","dojo/text!./templates/LabelRenderer.html"],function(p,m,k,h,g){return p("dojox.calendar.LabelRenderer",[m,k,h],{templateString:g,_orientation:"horizontal",resizeEnabled:!1,visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:45,endTimeLabel:30},_isElementVisible:function(d,g,f,h){switch(d){case "startTimeLabel":if(this.item.allDay&&
this.item.range[0].getTime()!==this.item.startTime.getTime())return!1}return this.inherited(arguments)},_displayValue:"inline",postCreate:function(){this.inherited(arguments);this._applyAttributes()}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/MatrixView":function(){define("dojo/_base/html dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dojo/query dojox/calendar/MatrixView ../utilityFunctions".split(" "),function(p,m,k,h,g,d,l,f,r,
c,b){return m.extend(c,{labelRendererHeight:20,expandRendererHeight:20,cellPaddingSides:3,cellPaddingTop:22,itemToRendererKindFunc:function(b){return"label"},styleGridCell:function(b,c,d){d=d.dateModule;this.isToday(c)?k.add(b,"dojoxCalendarToday"):null!=this.refStartTime&&null!=this.refEndTime&&(0<=d.compare(c,this.refEndTime)||0>=d.compare(d.add(c,"day",1),this.refStartTime))&&k.add(b,"dojoxCalendarDayDisabled");this.isWeekEnd(c)&&k.add(b,"dojoxCalendarWeekend")},_buildColumnHeader:function(b,c){var d=
this.columnHeaderTable;if(d){var a=b.columnCount-(c?c.columnCount:0),f=r("tbody",d),g=r("tr",d),f=1==f.length?f[0]:p.create("tbody",null,d),g=1==g.length?g[0]:h.create("tr",null,f),f=0;if(0<a)for(f=0;f<a;f++)h.create("td",null,g);else for(a=-a,f=0;f<a;f++)g.removeChild(g.lastChild);r("td",d).forEach(function(a,c){a.className="";var d=null;try{d=b.dates[0][c],this._setText(a,this._formatColumnHeaderLabel(d))}catch(y){}0==c?k.add(a,"first-child"):c==this.renderData.columnCount-1&&k.add(a,"last-child");
d&&this.styleColumnHeaderCell(a,d,b)},this);this.yearColumnHeaderContent&&this._setText(this.yearColumnHeaderContent,"Week")}},_buildRowHeader:function(b,c){var g=this.rowHeaderTable;if(g){var a=r("tbody",g),n,a=1==a.length?a[0]:h.create("tbody",null,g),q=b.rowCount-(c?c.rowCount:0),p=0;if(0<q)for(p=0;p<q;p++){n=h.create("tr",null,a);n=h.create("td",null,n);var t=[];t.push(f(n,"click",m.hitch(this,this._rowHeaderClick)));l("touch")||(t.push(f(n,"mousedown",function(a){k.add(a.currentTarget,"Active")})),
t.push(f(n,"mouseup",function(a){k.remove(a.currentTarget,"Active")})),t.push(f(n,"mouseover",function(a){k.add(a.currentTarget,"Hover")})),t.push(f(n,"mouseout",function(a){k.remove(a.currentTarget,"Hover")})));this._rowHeaderHandles.push(t)}else for(q=-q,p=0;p<q;p++)for(a.removeChild(a.lastChild),n=this._rowHeaderHandles.pop();0<n.length;)n.pop().remove();r("tr",g).forEach(function(a,c){d.set(a,"height",this._getRowHeight(c)+"px");var f;try{f=b.dates[c][0]}catch(C){}var g=r("td",a)[0];g.className=
"";0==c&&k.add(g,"first-child");c==this.renderData.rowCount-1&&k.add(g,"last-child");f&&(this.styleRowHeaderCell(g,f,b),this._setText(g,this._formatRowHeaderLabel(f)))},this)}},_createLabelLayoutItems:function(c,d,f,a){if("undefined"!==typeof this.labelRenderer&&null!==this.labelRenderer){for(var g,h=this.renderData,k=h.dateModule,l=[],q=0;q<a.length;q++){var r=a[q];g=this.floorToDay(r.startTime,!1,h);for(var p=this.dateModule.compare;-1===p(g,r.endTime)&&-1===p(g,f);){var t=k.add(g,"day",1),t=this.floorToDay(t,
!0),u=this.computeRangeOverlap(h,r.startTime,r.endTime,g,t);c=k.difference(d,this.floorToDay(u[0],!1,h),"day");if(c>=this.columnCount)break;if(0<=c){var t=l[c],D=!1,u=m.mixin({startOffset:c,range:u,item:r},r);if("undefined"===typeof t)t=[],l[c]=t;else for(c=0;c<t.length;c++)if(b.compareEventOrder(u,t[c])){t.splice(c,0,u);D=!0;break}D||t.push(u)}g=k.add(g,"day",1);this.floorToDay(g,!0)}}return l}},_layoutLabelItemsImpl:function(b,c,f,a,h){for(var k,l,n=this.renderData,q=n.cells[b],r=this._getRowHeight(b),
p=this.labelRendererHeight,t=g.getMarginBox(this.itemContainer).w,u=0;u<c.length;u++)if(k=c[u],null!=k){var D=this.expandRenderer?f[u]?r-this.expandRendererHeight:r:r;l=null==h||null==h[u]?this.cellPaddingTop:h[u]+this.verticalGap;for(var E=g.position(this._getCellAt(b,u)),F=E.x-n.gridTablePosX,G=0;G<k.length;G++){if(l+p+this.verticalGap<=D){var I=k[G];m.mixin(I,{start:F,end:F+E.w});var L=this._createRenderer(I,"label",this.labelRenderer,"dojoxCalendarLabel"),H=this.isItemBeingEdited(I)&&!this.liveLayout&&
this._isEditing,J=H?this._getRowHeight(b)-this.cellPaddingTop:p;n.rtl&&(I.start=t-I.end,I.end=I.start+E.w);d.set(L.container,{top:(H?this.cellPaddingTop:l)+"px",left:I.start+this.cellPaddingSides+"px",width:E.w-2*this.cellPaddingSides+"px",height:J+"px"});this._applyRendererLayout(I,L,q,E.w,J,"label")}else break;l+=p+this.verticalGap}for(;G<k.length;)null==a[u]?a[u]=[k[G]]:a[u].push(k[G]),G++}}})})},"dojox/calendar/MatrixView":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/lang dojo/_base/sniff dojo/_base/fx dojo/_base/html dojo/on dojo/dom dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/query dojo/i18n ./ViewBase dojo/text!./templates/MatrixView.html dijit/_TemplatedMixin".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x){return p("dojox.calendar.MatrixView",[n,x],{templateString:v,baseClass:"dojoxCalendarMatrixView",_setTabIndexAttr:"domNode",viewKind:"matrix",renderData:null,startDate:null,refStartTime:null,refEndTime:null,columnCount:7,rowCount:5,horizontalRenderer:null,labelRenderer:null,expandRenderer:null,horizontalDecorationRenderer:null,percentOverlap:0,verticalGap:2,horizontalRendererHeight:17,labelRendererHeight:14,expandRendererHeight:15,cellPaddingTop:16,expandDuration:300,
expandEasing:null,layoutDuringResize:!1,roundToDay:!0,showCellLabel:!0,scrollable:!1,resizeCursor:"e-resize",constructor:function(){this.invalidatingProperties="columnCount rowCount startDate horizontalRenderer horizontalDecaorationRenderer labelRenderer expandRenderer rowHeaderDatePattern columnHeaderLabelLength cellHeaderShortPattern cellHeaderLongPattern percentOverlap verticalGap horizontalRendererHeight labelRendererHeight expandRendererHeight cellPaddingTop roundToDay itemToRendererKindFunc layoutPriorityFunction formatItemTimeFunc textDir items".split(" ");
this._ddRendererList=[];this._ddRendererPool=[];this._rowHeaderHandles=[]},destroy:function(a){this._cleanupRowHeader();this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initialized=!0;this.invalidRendering||this.refreshRendering()},_createRenderData:function(){var a={};a.dateLocaleModule=this.dateLocaleModule;a.dateClassObj=this.dateClassObj;a.dateModule=this.dateModule;a.dates=[];a.columnCount=this.get("columnCount");a.rowCount=this.get("rowCount");a.sheetHeight=this.itemContainer.offsetHeight;
this._computeRowsHeight(a);var b=this.get("startDate");null==b&&(b=new a.dateClassObj);this.startDate=b=this.floorToDay(b,!1,a);for(var c=0;c<a.rowCount;c++){a.dates.push([]);for(var d=0;d<a.columnCount;d++)a.dates[c].push(b),b=this.addAndFloor(b,"day",1)}a.startTime=this.newDate(a.dates[0][0],a);a.endTime=this.newDate(a.dates[a.rowCount-1][a.columnCount-1],a);a.endTime=a.dateModule.add(a.endTime,"day",1);a.endTime=this.floorToDay(a.endTime,!0);this.displayedItemsInvalidated&&!this._isEditing?(this.displayedItemsInvalidated=
!1,this._computeVisibleItems(a)):this.renderData&&(a.items=this.renderData.items);this.displayedDecorationItemsInvalidated?a.decorationItems=this.decorationStoreManager._computeVisibleItems(a):this.renderData&&(a.decorationItems=this.renderData.decorationItems);a.rtl=!this.isLeftToRight();return a},_validateProperties:function(){this.inherited(arguments);if(1>this.columnCount||isNaN(this.columnCount))this.columnCount=1;if(1>this.rowCount||isNaN(this.rowCount))this.rowCount=1;if(isNaN(this.percentOverlap)||
0>this.percentOverlap||100<this.percentOverlap)this.percentOverlap=0;if(isNaN(this.verticalGap)||0>this.verticalGap)this.verticalGap=2;if(isNaN(this.horizontalRendererHeight)||1>this.horizontalRendererHeight)this.horizontalRendererHeight=17;if(isNaN(this.labelRendererHeight)||1>this.labelRendererHeight)this.labelRendererHeight=14;if(isNaN(this.expandRendererHeight)||1>this.expandRendererHeight)this.expandRendererHeight=15},_setStartDateAttr:function(a){this.displayedItemsInvalidated=!0;this._set("startDate",
a)},_setColumnCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("columnCount",a)},_setRowCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("rowCount",a)},__fixEvt:function(a){a.sheet="primary";a.source=this;return a},_formatRowHeaderLabel:function(a){return this.rowHeaderDatePattern?this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:this.rowHeaderDatePattern}):this.getWeekNumberLabel(a)},_formatColumnHeaderLabel:function(a){return this.renderData.dateLocaleModule.getNames("days",
this.columnHeaderLabelLength?this.columnHeaderLabelLength:"wide","standAlone")[a.getDay()]},cellHeaderShortPattern:null,cellHeaderLongPattern:null,_formatGridCellLabel:function(b,c,d){0==c&&0==d||1==b.getDate()?this.cellHeaderLongPattern?c=this.cellHeaderLongPattern:(c=a.getLocalization("dojo.cldr",this._calendar),c=c["dateFormatItem-MMMd"]):this.cellHeaderShortPattern?c=this.cellHeaderShortPattern:(c=a.getLocalization("dojo.cldr",this._calendar),c=c["dateFormatItem-d"]);return this.renderData.dateLocaleModule.format(b,
{selector:"date",datePattern:c})},refreshRendering:function(){this.inherited(arguments);if(this.domNode){this._validateProperties();var a=this.renderData,b=this.renderData=this._createRenderData();this._createRendering(b,a);this._layoutDecorationRenderers(b);this._layoutRenderers(b)}},_createRendering:function(a,c){if(0>=a.rowHeight)a.columnCount=1,a.rowCount=1,a.invalidRowHeight=!0;else{if(c&&this.itemContainerTable){var d=u(".dojoxCalendarItemContainerRow",this.itemContainerTable);c.rowCount=d.length}this._buildColumnHeader(a,
c);this._buildRowHeader(a,c);this._buildGrid(a,c);this._buildItemContainer(a,c);this.buttonContainer&&null!=this.owner&&this.owner.currentView==this&&b.set(this.buttonContainer,{right:0,left:0})}},_buildColumnHeader:function(a,b){var d=this.columnHeaderTable;if(d){var f=a.columnCount-(b?b.columnCount:0);8==g("ie")&&(null==this._colTableSave?this._colTableSave=h.clone(d):0>f&&(this.columnHeader.removeChild(d),q.destroy(d),this.columnHeaderTable=d=h.clone(this._colTableSave),this.columnHeader.appendChild(d),
f=a.columnCount));var k=u("tbody",d),n=u("tr",d),k=1==k.length?k[0]:l.create("tbody",null,d),n=1==n.length?n[0]:q.create("tr",null,k);if(0<f)for(k=0;k<f;k++)q.create("td",null,n);else for(f=-f,k=0;k<f;k++)n.removeChild(n.lastChild);u("td",d).forEach(function(b,d){b.className="";var f=a.dates[0][d];this._setText(b,this._formatColumnHeaderLabel(f));0==d?c.add(b,"first-child"):d==this.renderData.columnCount-1&&c.add(b,"last-child");this.styleColumnHeaderCell(b,f,a)},this);this.yearColumnHeaderContent&&
this._setText(this.yearColumnHeaderContent,a.dateLocaleModule.format(a.dates[0][0],{selector:"date",datePattern:"yyyy"}))}},styleColumnHeaderCell:function(a,b,d){c.add(a,this._cssDays[b.getDay()]);this.isWeekEnd(b)&&c.add(a,"dojoxCalendarWeekend")},_rowHeaderHandles:null,_cleanupRowHeader:function(){for(;0<this._rowHeaderHandles.length;)for(var a=this._rowHeaderHandles.pop();0<a.length;)a.pop().remove()},_rowHeaderClick:function(a){var b=u("td",this.rowHeaderTable).indexOf(a.currentTarget);this._onRowHeaderClick({index:b,
date:this.renderData.dates[b][0],triggerEvent:a})},_buildRowHeader:function(a,d){var k=this.rowHeaderTable;if(k){var l=u("tbody",k),n,l=1==l.length?l[0]:q.create("tbody",null,k),m=a.rowCount-(d?d.rowCount:0);if(0<m)for(var r=0;r<m;r++){n=q.create("tr",null,l);n=q.create("td",null,n);var p=[];p.push(f(n,"click",h.hitch(this,this._rowHeaderClick)));g("touch")||(p.push(f(n,"mousedown",function(a){c.add(a.currentTarget,"Active")})),p.push(f(n,"mouseup",function(a){c.remove(a.currentTarget,"Active")})),
p.push(f(n,"mouseover",function(a){c.add(a.currentTarget,"Hover")})),p.push(f(n,"mouseout",function(a){c.remove(a.currentTarget,"Hover")})));this._rowHeaderHandles.push(p)}else for(m=-m,r=0;r<m;r++)for(l.removeChild(l.lastChild),n=this._rowHeaderHandles.pop();0<n.length;)n.pop().remove();u("tr",k).forEach(function(d,f){b.set(d,"height",this._getRowHeight(f)+"px");var g=a.dates[f][0],h=u("td",d)[0];h.className="";0==f&&c.add(h,"first-child");f==this.renderData.rowCount-1&&c.add(h,"last-child");this.styleRowHeaderCell(h,
g,a);this._setText(h,this._formatRowHeaderLabel(g))},this)}},styleRowHeaderCell:function(a,b,c){},_buildGrid:function(a,d){var f=this.gridTable;if(f){var k=u("tr",f),l=a.rowCount-k.length,n=0<l,m=a.columnCount-(k?u("td",k[0]).length:0);8==g("ie")&&(null==this._gridTableSave?this._gridTableSave=h.clone(f):0>m&&(this.grid.removeChild(f),q.destroy(f),this.gridTable=f=h.clone(this._gridTableSave),this.grid.appendChild(f),m=a.columnCount,l=a.rowCount,n=!0));k=u("tbody",f);k=1==k.length?k[0]:q.create("tbody",
null,f);if(n)for(var r=0;r<l;r++)q.create("tr",null,k);else for(l=-l,r=0;r<l;r++)k.removeChild(k.lastChild);var p=a.rowCount-l,t=n||0<m,m=t?m:-m;u("tr",f).forEach(function(b,c){if(t){var d=c>=p?a.columnCount:m;for(c=0;c<d;c++){var f=q.create("td",null,b);q.create("span",null,f)}}else for(c=0;c<m;c++)b.removeChild(b.lastChild)});u("tr",f).forEach(function(d,f){b.set(d,"height",this._getRowHeight(f)+"px");d.className="";0==f&&c.add(d,"first-child");f==a.rowCount-1&&c.add(d,"last-child");u("td",d).forEach(function(b,
d){b.className="";0==d&&c.add(b,"first-child");d==a.columnCount-1&&c.add(b,"last-child");var g=a.dates[f][d],h=u("span",b)[0];this._setText(h,this.showCellLabel?this._formatGridCellLabel(g,f,d):null);this.styleGridCell(b,g,a)},this)},this)}},styleGridCellFunc:null,defaultStyleGridCell:function(a,b,d){c.add(a,this._cssDays[b.getDay()]);d=this.dateModule;this.isToday(b)?c.add(a,"dojoxCalendarToday"):null!=this.refStartTime&&null!=this.refEndTime&&(0<=d.compare(b,this.refEndTime)||0>=d.compare(d.add(b,
"day",1),this.refStartTime))?c.add(a,"dojoxCalendarDayDisabled"):this.isWeekEnd(b)&&c.add(a,"dojoxCalendarWeekend")},styleGridCell:function(a,b,c){this.styleGridCellFunc?this.styleGridCellFunc(a,b,c):this.defaultStyleGridCell(a,b,c)},_buildItemContainer:function(a,d){var f=this.itemContainerTable;if(f){var k=[],l=a.rowCount-(d?d.rowCount:0);8==g("ie")&&(null==this._itemTableSave?this._itemTableSave=h.clone(f):0>l&&(this.itemContainer.removeChild(f),this._recycleItemRenderers(!0),this._recycleExpandRenderers(!0),
q.destroy(f),this.itemContainerTable=f=h.clone(this._itemTableSave),this.itemContainer.appendChild(f),l=a.columnCount));var n=u("tbody",f),m,n=1==n.length?n[0]:q.create("tbody",null,f);if(0<l)for(var r=0;r<l;r++)m=q.create("tr",null,n),c.add(m,"dojoxCalendarItemContainerRow"),m=q.create("td",null,m),m=q.create("div",null,m),c.add(m,"dojoxCalendarContainerRow");else for(l=-l,r=0;r<l;r++)n.removeChild(n.lastChild);u(".dojoxCalendarItemContainerRow",f).forEach(function(a,c){b.set(a,"height",this._getRowHeight(c)+
"px");k.push(a.childNodes[0].childNodes[0])},this);a.cells=k}},resize:function(a){this.inherited(arguments);this._resizeHandler(null,!1)},_resizeHandler:function(a,c){var f=this.renderData;if(null==f)this.refreshRendering();else{if(f.sheetHeight!=this.itemContainer.offsetHeight&&(f.sheetHeight=this.itemContainer.offsetHeight,-1==this.getExpandedRowIndex()?(this._computeRowsHeight(),this._resizeRows()):this.expandRow(f.expandedRow,f.expandedRowCol,0,null,!0),f.invalidRowHeight)){delete f.invalidRowHeight;
this.renderData=null;this.displayedItemsInvalidated=!0;this.refreshRendering();return}this.layoutDuringResize||c?setTimeout(h.hitch(this,function(){this._layoutRenderers(this.renderData);this._layoutDecorationRenderers(this.renderData)}),20):(b.set(this.itemContainer,"opacity",0),this._recycleItemRenderers(),this._recycleExpandRenderers(),void 0!=this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(h.hitch(this,function(){delete this._resizeTimer;this._resizeRowsImpl(this.itemContainer,
"tr");this._layoutRenderers(this.renderData);this._layoutDecorationRenderers(this.renderData);0==this.resizeAnimationDuration?b.set(this.itemContainer,"opacity",1):d.fadeIn({node:this.itemContainer,curve:[0,1]}).play(this.resizeAnimationDuration)}),200))}},resizeAnimationDuration:0,getExpandedRowIndex:function(){return null==this.renderData.expandedRow?-1:this.renderData.expandedRow},collapseRow:function(a,c,f){var g=this.renderData;void 0==f&&(f=!0);void 0==a&&(a=this.expandDuration);if(g&&null!=
g.expandedRow&&-1!=g.expandedRow)if(f&&a){f=g.expandedRow;var k=g.expandedRowHeight;delete g.expandedRow;this._computeRowsHeight(g);var l=this._getRowHeight(f);g.expandedRow=f;this._recycleExpandRenderers();this._recycleItemRenderers();b.set(this.itemContainer,"display","none");this._expandAnimation=new d.Animation({curve:[k,l],duration:a,easing:c,onAnimate:h.hitch(this,function(a){this._expandRowImpl(Math.floor(a))}),onEnd:h.hitch(this,function(a){this._expandAnimation=null;this._collapseRowImpl(!1);
this._resizeRows();b.set(this.itemContainer,"display","block");setTimeout(h.hitch(this,function(){this._layoutRenderers(g)}),100);this.onExpandAnimationEnd(!1)})});this._expandAnimation.play()}else this._collapseRowImpl(f)},_collapseRowImpl:function(a){var b=this.renderData;delete b.expandedRow;delete b.expandedRowHeight;this._computeRowsHeight(b);if(void 0==a||a)this._resizeRows(),this._layoutRenderers(b)},expandRow:function(a,c,f,g,k){var l=this.renderData;if(!l||0>a||a>=l.rowCount)return-1;if(void 0==
c||0>c||c>=l.columnCount)c=-1;void 0==k&&(k=!0);void 0==f&&(f=this.expandDuration);void 0==g&&(g=this.expandEasing);var n=this._getRowHeight(a),m=l.sheetHeight-Math.ceil(this.cellPaddingTop*(l.rowCount-1));l.expandedRow=a;l.expandedRowCol=c;l.expandedRowHeight=m;k&&(f?(this._recycleExpandRenderers(),this._recycleItemRenderers(),b.set(this.itemContainer,"display","none"),this._expandAnimation=new d.Animation({curve:[n,m],duration:f,delay:50,easing:g,onAnimate:h.hitch(this,function(a){this._expandRowImpl(Math.floor(a))}),
onEnd:h.hitch(this,function(){this._expandAnimation=null;b.set(this.itemContainer,"display","block");setTimeout(h.hitch(this,function(){this._expandRowImpl(m,!0)}),100);this.onExpandAnimationEnd(!0)})}),this._expandAnimation.play()):this._expandRowImpl(m,!0))},_expandRowImpl:function(a,b){var c=this.renderData;c.expandedRowHeight=a;this._computeRowsHeight(c,c.sheetHeight-a);this._resizeRows();b&&this._layoutRenderers(c)},onExpandAnimationEnd:function(a){},_resizeRows:function(){0>=this._getRowHeight(0)||
(this.rowHeaderTable&&this._resizeRowsImpl(this.rowHeaderTable,"tr"),this.gridTable&&this._resizeRowsImpl(this.gridTable,"tr"),this.itemContainerTable&&this._resizeRowsImpl(this.itemContainerTable,"tr"))},_computeRowsHeight:function(a,b){var c=null==a?this.renderData:a;b=b||c.sheetHeight;b--;7==g("ie")&&(b-=c.rowCount);if(1==c.rowCount)c.rowHeight=b,c.rowHeightFirst=b,c.rowHeightLast=b;else{var d=null==c.expandedRow?c.rowCount:c.rowCount-1,f=b/d,h;h=b-Math.floor(f)*d;var k=Math.abs(b-Math.ceil(f)*
d),d=1;h<k?(f=Math.floor(f),k=h):(d=-1,f=Math.ceil(f));h=f+d*Math.floor(k/2);c.rowHeight=f;c.rowHeightFirst=h;c.rowHeightLast=h+k%2*d}},_getRowHeight:function(a){var b=this.renderData;return a==b.expandedRow?b.expandedRowHeight:0==b.expandedRow&&1==a||0==a?b.rowHeightFirst:b.expandedRow==this.renderData.rowCount-1&&a==this.renderData.rowCount-2||a==this.renderData.rowCount-1?b.rowHeightLast:b.rowHeight},_resizeRowsImpl:function(a,c){dojo.query(c,a).forEach(function(a,c){b.set(a,"height",this._getRowHeight(c)+
"px")},this)},_setHorizontalRendererAttr:function(a){this._destroyRenderersByKind("horizontal");this._set("horizontalRenderer",a)},_setLabelRendererAttr:function(a){this._destroyRenderersByKind("label");this._set("labelRenderer",a)},_destroyExpandRenderer:function(a){a.destroyRecursive&&a.destroyRecursive();l.destroy(a.domNode)},_setExpandRendererAttr:function(a){for(;0<this._ddRendererList.length;)this._destroyExpandRenderer(this._ddRendererList.pop());var b=this._ddRendererPool;if(b)for(;0<b.length;)this._destroyExpandRenderer(b.pop());
this._set("expandRenderer",a)},_ddRendererList:null,_ddRendererPool:null,_getExpandRenderer:function(a,b,c,d,f){if(null==this.expandRenderer)return null;var g=this._ddRendererPool.pop();null==g&&(g=new this.expandRenderer);this._ddRendererList.push(g);g.set("owner",this);g.set("date",a);g.set("items",b);g.set("rowIndex",c);g.set("columnIndex",d);g.set("expanded",f);return g},_recycleExpandRenderers:function(a){for(var c=0;c<this._ddRendererList.length;c++){var d=this._ddRendererList[c];d.set("Up",
!1);d.set("Down",!1);a&&d.domNode.parentNode.removeChild(d.domNode);b.set(d.domNode,"display","none")}this._ddRendererPool=this._ddRendererPool.concat(this._ddRendererList);this._ddRendererList=[]},_defaultItemToRendererKindFunc:function(a){return 1440<=Math.abs(this.renderData.dateModule.difference(a.startTime,a.endTime,"minute"))?"horizontal":"label"},naturalRowsHeight:null,_roundItemToDay:function(a){var b=a.startTime;a=a.endTime;this.isStartOfDay(b)||(b=this.floorToDay(b,!1,this.renderData));
this.isStartOfDay(a)||(a=this.renderData.dateModule.add(a,"day",1),a=this.floorToDay(a,!0));return{startTime:b,endTime:a}},_sortItemsFunction:function(a,b){this.roundToDay&&(a=this._roundItemToDay(a),b=this._roundItemToDay(b));var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return c},_overlapLayoutPass3:function(a){for(var b=0,c=0,d=[],f=t.position(this.gridTable).x,g=0;g<this.renderData.columnCount;g++){for(var h=!1,c=t.position(this._getCellAt(0,
g)),b=c.x-f,c=b+c.w,k=a.length-1;0<=k&&!h;k--)for(var l=0;l<a[k].length;l++)if(h=a[k][l],h=h.start<c&&b<h.end){d[g]=k+1;break}h||(d[g]=0)}return d},applyRendererZIndex:function(a,c,d,f,g,h){b.set(c.container,{zIndex:g||f?c.renderer.mobile?100:0:void 0==a.lane?1:a.lane+1})},_layoutDecorationRenderers:function(a){null==a||null==a.decorationItems||0>=a.rowHeight||(this.gridTable&&null==this._expandAnimation&&null!=this.horizontalDecorationRenderer?(this._layoutStep=a.columnCount,this.renderData.gridTablePosX=
t.position(this.gridTable).x,this.inherited(arguments)):this.decorationRendererManager.recycleItemRenderers())},_layoutRenderers:function(a){null==a||null==a.items||0>=a.rowHeight||(!this.gridTable||null!=this._expandAnimation||null==this.horizontalRenderer&&null==this.labelRenderer?this._recycleItemRenderers():(this.renderData.gridTablePosX=t.position(this.gridTable).x,this._layoutStep=a.columnCount,this._recycleExpandRenderers(),this._hiddenItems=[],this._offsets=[],this.naturalRowsHeight=[],this.inherited(arguments)))},
_offsets:null,_layoutInterval:function(a,b,c,d,f,g){if(null!=this.renderData.cells)if("dataItems"===g){var h=[];a=[];for(var k=0;k<f.length;k++){var l=f[k],n=this._itemToRendererKind(l);"horizontal"==n?h.push(l):"label"==n&&a.push(l)}f=this.getExpandedRowIndex();if(-1==f||f==b){f=[];k=null;l=[];if(0<h.length&&this.horizontalRenderer)var k=this._createHorizontalLayoutItems(b,c,d,h,g),m=this._computeHorizontalOverlapLayout(k,l);var q,h=[];0<a.length&&this.labelRenderer&&(q=this._createLabelLayoutItems(b,
c,d,a),this._computeLabelOffsets(q,h));c=this._computeColHasHiddenItems(b,l,h);null!=k&&this._layoutHorizontalItemsImpl(b,k,m,c,f,g);null!=q&&this._layoutLabelItemsImpl(b,q,c,f,l,g);this._layoutExpandRenderers(b,c,f);this._hiddenItems[b]=f}}else this.horizontalDecorationRenderer&&(k=this._createHorizontalLayoutItems(b,c,d,f,g),null!=k&&this._layoutHorizontalItemsImpl(b,k,null,!1,null,g))},_createHorizontalLayoutItems:function(a,b,c,d,f){var g=this.renderData,k=g.dateModule,l=g.rtl?-1:1,n=[];f="decorationItems"===
f;for(var m=0;m<d.length;m++){var q=d[m],r=this.computeRangeOverlap(g,q.startTime,q.endTime,b,c),p=k.difference(b,this.floorToDay(r[0],!1,g),"day"),u=g.dates[a][p],y=t.position(this._getCellAt(a,p,!1)),v=y.x-g.gridTablePosX;g.rtl&&(v+=y.w);if(f&&!q.isAllDay||!f&&!this.roundToDay&&!q.allDay)v+=l*this.computeProjectionOnDate(g,u,r[0],y.w);var v=Math.ceil(v),w=k.difference(b,this.floorToDay(r[1],!1,g),"day"),A;w>g.columnCount-1?(y=t.position(this._getCellAt(a,g.columnCount-1,!1)),A=g.rtl?y.x-g.gridTablePosX:
y.x-g.gridTablePosX+y.w):(u=g.dates[a][w],y=t.position(this._getCellAt(a,w,!1)),A=y.x-g.gridTablePosX,g.rtl&&(A+=y.w),!f&&this.roundToDay?this.isStartOfDay(r[1])||(A+=l*y.w):A+=l*this.computeProjectionOnDate(g,u,r[1],y.w));A=Math.floor(A);g.rtl&&(u=A,A=v,v=u);A>v&&(q=h.mixin({start:v,end:A,range:r,item:q,startOffset:p,endOffset:w},q),n.push(q))}return n},_computeHorizontalOverlapLayout:function(a,b){for(var c=this.renderData,d=this.horizontalRendererHeight,f=this.computeOverlapping(a,this._overlapLayoutPass3),
g=this.percentOverlap/100,h=0;h<c.columnCount;h++){var k=f.addedPassRes[h],l=c.rtl?c.columnCount-h-1:h;b[l]=0==g?0==k?0:1==k?d:d+(k-1)*(d+this.verticalGap):0==k?0:k*d-(k-1)*g*d+this.verticalGap;b[l]+=this.cellPaddingTop}return f},_createLabelLayoutItems:function(a,b,c,d){if(null!=this.labelRenderer){for(var f=this.renderData,g=f.dateModule,k=[],l=0;l<d.length;l++){var n=d[l];a=this.floorToDay(n.startTime,!1,f);for(var m=this.dateModule.compare;-1==m(a,n.endTime)&&-1==m(a,c);){var q=g.add(a,"day",
1),q=this.floorToDay(q,!0),q=this.computeRangeOverlap(f,n.startTime,n.endTime,a,q),r=g.difference(b,this.floorToDay(q[0],!1,f),"day");if(r>=this.columnCount)break;if(0<=r){var p=k[r];null==p&&(p=[],k[r]=p);p.push(h.mixin({startOffset:r,range:q,item:n},n))}a=g.add(a,"day",1);this.floorToDay(a,!0)}}return k}},_computeLabelOffsets:function(a,b){for(var c=0;c<this.renderData.columnCount;c++)b[c]=null==a[c]?0:a[c].length*(this.labelRendererHeight+this.verticalGap)},_computeColHasHiddenItems:function(a,
b,c){for(var d=[],f=this._getRowHeight(a),g,h=0,k=0;k<this.renderData.columnCount;k++)g=null==b||null==b[k]?this.cellPaddingTop:b[k],g+=null==c||null==c[k]?0:c[k],g>h&&(h=g),d[k]=g>f;this.naturalRowsHeight[a]=h;return d},_layoutHorizontalItemsImpl:function(a,c,d,f,h,k){d=this.renderData.cells[a];a=this._getRowHeight(a);for(var l=this.horizontalRendererHeight,n=this.percentOverlap/100,m=0;m<c.length;m++){var r=c[m],p=r.lane;if("dataItems"===k){var t=this.cellPaddingTop,t=0==n?t+p*(l+this.verticalGap):
t+p*(l-n*l),p=!1,u=a;if(this.expandRenderer){for(u=r.startOffset;u<=r.endOffset;u++)if(f[u]){p=!0;break}u=p?a-this.expandRendererHeight:a}if(t+l<=u){var p=this._createRenderer(r,"horizontal",this.horizontalRenderer,"dojoxCalendarHorizontal"),v=(u=this.isItemBeingEdited(r)&&!this.liveLayout&&this._isEditing)?a-this.cellPaddingTop:l,y=r.end-r.start;9<=g("ie")&&r.start+y<this.itemContainer.offsetWidth&&y++;b.set(p.container,{top:(u?this.cellPaddingTop:t)+"px",left:r.start+"px",width:y+"px",height:v+
"px"});this._applyRendererLayout(r,p,d,y,v,"horizontal")}else for(t=r.startOffset;t<r.endOffset;t++)null==h[t]?h[t]=[r.item]:h[t].push(r.item)}else p=this.decorationRendererManager.createRenderer(r,"horizontal",this.horizontalDecorationRenderer,"dojoxCalendarDecoration"),v=a,y=r.end-r.start,9<=g("ie")&&r.start+y<this.itemContainer.offsetWidth&&y++,b.set(p.container,{top:"0",left:r.start+"px",width:y+"px",height:v+"px"}),q.place(p.container,d),b.set(p.container,"display","block")}},_layoutLabelItemsImpl:function(a,
c,d,f,g){for(var k,l,n=this.renderData,m=n.cells[a],q=this._getRowHeight(a),r=this.labelRendererHeight,p=t.getMarginBox(this.itemContainer).w,u=0;u<c.length;u++)if(k=c[u],null!=k){k.sort(h.hitch(this,function(a,b){return this.dateModule.compare(a.range[0],b.range[0])}));var v=this.expandRenderer?d[u]?q-this.expandRendererHeight:q:q;l=null==g||null==g[u]?this.cellPaddingTop:g[u]+this.verticalGap;for(var y=t.position(this._getCellAt(a,u)),w=y.x-n.gridTablePosX,A=0;A<k.length;A++){if(l+r+this.verticalGap<=
v){var x=k[A];h.mixin(x,{start:w,end:w+y.w});var B=this._createRenderer(x,"label",this.labelRenderer,"dojoxCalendarLabel"),z=this.isItemBeingEdited(x)&&!this.liveLayout&&this._isEditing,W=z?this._getRowHeight(a)-this.cellPaddingTop:r;n.rtl&&(x.start=p-x.end,x.end=x.start+y.w);b.set(B.container,{top:(z?this.cellPaddingTop:l)+"px",left:x.start+"px",width:y.w+"px",height:W+"px"});this._applyRendererLayout(x,B,m,y.w,W,"label")}else break;l+=r+this.verticalGap}for(;A<k.length;A++)null==f[u]?f[u]=[k[A]]:
f[u].push(k[A])}},_applyRendererLayout:function(a,c,d,f,g,h){var k=this.isItemBeingEdited(a),l=this.isItemSelected(a),n=this.isItemHovered(a),m=this.isItemFocused(a),r=c.renderer;r.set("hovered",n);r.set("selected",l);r.set("edited",k);r.set("focused",this.showFocus?m:!1);r.set("moveEnabled",this.isItemMoveEnabled(a._item,h));r.set("storeState",this.getItemStoreState(a));"label"!=h&&r.set("resizeEnabled",this.isItemResizeEnabled(a,h));this.applyRendererZIndex(a,c,n,l,k,m);r.updateRendering&&r.updateRendering(f,
g);q.place(c.container,d);b.set(c.container,"display","block")},_getCellAt:function(a,b,c){void 0!=c&&1!=c||this.isLeftToRight()||(b=this.renderData.columnCount-1-b);return this.gridTable.childNodes[0].childNodes[a].childNodes[b]},_layoutExpandRenderers:function(a,b,c){if(this.expandRenderer){var d=this.renderData;if(d.expandedRow==a)null!=d.expandedRowCol&&-1!=d.expandedRowCol&&this._layoutExpandRendererImpl(d.expandedRow,d.expandedRowCol,null,!0);else if(null==d.expandedRow)for(var f=0;f<d.columnCount;f++)b[f]&&
this._layoutExpandRendererImpl(a,d.rtl?d.columnCount-1-f:f,c[f],!1)}},_layoutExpandRendererImpl:function(a,c,d,f){var g=this.renderData,k=h.clone(g.dates[a][c]),l=null,n=g.cells[a],l=this._getExpandRenderer(k,d,a,c,f);a=t.position(this._getCellAt(a,c));a.x-=g.gridTablePosX;this.layoutExpandRenderer(l,k,d,a,this.expandRendererHeight);q.place(l.domNode,n);b.set(l.domNode,"display","block")},layoutExpandRenderer:function(a,c,d,f,g){b.set(a.domNode,{left:f.x+"px",width:f.w+"px",height:g+"px",top:f.h-
g-1+"px"})},_onItemEditBeginGesture:function(a){var b=this._edProps,c=b.editedItem,d=a.dates,f=this.newDate("resizeEnd"==b.editKind?c.endTime:c.startTime);"label"!=b.rendererKind&&"move"==a.editKind&&(c.allDay||this.roundToDay)&&(b.dayOffset=this.renderData.dateModule.difference(this.floorToDay(d[0],!1,this.renderData),f,"day"));this.inherited(arguments)},_computeItemEditingTimes:function(a,b,c,d,f){var g=this.renderData.dateModule,h=this._edProps;if("label"!=c)if(a.allDay||this.roundToDay){var k=
this.isStartOfDay(d[0]);switch(b){case "resizeEnd":!k&&a.allDay&&(d[0]=g.add(d[0],"day",1));case "resizeStart":k||(d[0]=this.floorToDay(d[0],!0));break;case "move":d[0]=g.add(d[0],"day",h.dayOffset);break;case "resizeBoth":k||(d[0]=this.floorToDay(d[0],!0)),this.isStartOfDay(d[1])||(d[1]=this.floorToDay(g.add(d[1],"day",1),!0))}}else d=this.inherited(arguments);return d},getTime:function(a,b,c,d){var f=this.renderData;null!=a&&(c=t.position(this.itemContainer,!0),a.touches?(d=void 0==d?0:d,b=a.touches[d].pageX-
c.x,c=a.touches[d].pageY-c.y):(b=a.pageX-c.x,c=a.pageY-c.y));d=t.getContentBox(this.itemContainer);0>b?b=0:b>d.w&&(b=d.w-1);0>c?c=0:c>d.h&&(c=d.h-1);a=t.getMarginBox(this.itemContainer).w/f.columnCount;c=null==f.expandedRow?Math.floor(c/(t.getMarginBox(this.itemContainer).h/f.rowCount)):f.expandedRow;d=t.getContentBox(this.itemContainer);f.rtl&&(b=d.w-b);d=Math.floor(b/a);b=Math.floor(1440*(b-d*a)/a);a=null;c<f.dates.length&&d<this.renderData.dates[c].length&&(a=this.newDate(this.renderData.dates[c][d]),
a=this.renderData.dateModule.add(a,"minute",b));return a},_onGridMouseUp:function(a){this.inherited(arguments);this._gridMouseDown&&(this._gridMouseDown=!1,this._onGridClick({date:this.getTime(a),triggerEvent:a}))},_onGridTouchEnd:function(a){this.inherited(arguments);var b=this._gridProps;b&&(this._isEditing||(b.fromItem||b.editingOnStart||this.selectFromEvent(a,null,null,!0),b.fromItem||(this._pendingDoubleTap&&this._pendingDoubleTap.grid?(this._onGridDoubleClick({date:this.getTime(this._gridProps.event),
triggerEvent:this._gridProps.event}),clearTimeout(this._pendingDoubleTap.timer),delete this._pendingDoubleTap):(this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),this._pendingDoubleTap={grid:!0,timer:setTimeout(h.hitch(this,function(){delete this._pendingDoubleTap}),this.doubleTapDelay)}))),this._gridProps=null)},_onRowHeaderClick:function(a){this._dispatchCalendarEvt(a,"onRowHeaderClick")},onRowHeaderClick:function(a){},expandRendererClickHandler:function(a,
b){k.stop(a);var c=b.get("rowIndex"),d=b.get("columnIndex");this._onExpandRendererClick(h.mixin(this._createItemEditEvent(),{rowIndex:c,columnIndex:d,renderer:b,triggerEvent:a,date:this.renderData.dates[c][d]}))},onExpandRendererClick:function(a){},_onExpandRendererClick:function(a){this._dispatchCalendarEvt(a,"onExpandRendererClick");a.isDefaultPrevented()||(-1!=this.getExpandedRowIndex()?this.collapseRow():this.expandRow(a.rowIndex,a.columnIndex))},snapUnit:"minute",snapSteps:15,minDurationUnit:"minute",
minDurationSteps:15,triggerExtent:3,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!1})})},"dojox/calendar/ViewBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/_base/event dojo/_base/html dojo/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/on dojo/date dojo/date/locale dojo/when dijit/_WidgetBase dojox/widget/_Invalidating dojox/widget/Selection ./time ./StoreMixin ./StoreManager ./RendererManager".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C){return p("dojox.calendar.ViewBase",[x,A,w,z],{datePackage:a,_calendar:"gregorian",viewKind:null,_layoutStep:1,_layoutUnit:"day",resizeCursor:"n-resize",formatItemTimeFunc:null,_cssDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),_getFormatItemTimeFuncAttr:function(){if(this.formatItemTimeFunc)return this.formatItemTimeFunc;if(null!=this.owner)return this.owner.get("formatItemTimeFunc")},_viewHandles:null,doubleTapDelay:300,constructor:function(b){b=
b||{};this._calendar=b.datePackage?b.datePackage.substr(b.datePackage.lastIndexOf(".")+1):this._calendar;this.dateModule=b.datePackage?m.getObject(b.datePackage,!1):a;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?m.getObject(b.datePackage+".locale",!1):n;this._viewHandles=[];this.storeManager=new B({owner:this,_ownerItemsProperty:"items"});this.storeManager.on("layoutInvalidated",m.hitch(this,this._refreshItemsRendering));this.storeManager.on("dataLoaded",m.hitch(this,
function(a){this.set("items",a)}));this.storeManager.on("renderersInvalidated",m.hitch(this,function(a){this.updateRenderers(a)}));this.rendererManager=new C({owner:this});this.rendererManager.on("rendererCreated",m.hitch(this,this._onRendererCreated));this.rendererManager.on("rendererReused",m.hitch(this,this._onRendererReused));this.rendererManager.on("rendererRecycled",m.hitch(this,this._onRendererRecycled));this.rendererManager.on("rendererDestroyed",m.hitch(this,this._onRendererDestroyed));this.decorationStoreManager=
new B({owner:this,_ownerItemsProperty:"decorationItems"});this.decorationStoreManager.on("layoutInvalidated",m.hitch(this,this._refreshDecorationItemsRendering));this.decorationStoreManager.on("dataLoaded",m.hitch(this,function(a){this.set("decorationItems",a)}));this.decorationRendererManager=new C({owner:this});this._setupDayRefresh()},destroy:function(a){this.rendererManager.destroy();for(this.decorationRendererManager.destroy();0<this._viewHandles.length;)this._viewHandles.pop().remove();this.inherited(arguments)},
_setupDayRefresh:function(){var a=this.newDate(new Date),b=y.floor(a,"day",1,this.dateClassObj),b=this.dateModule.add(b,"day",1),b=23==b.getHours()?this.dateModule.add(b,"hour",2):y.floorToDay(b,!0,this.dateClassObj);setTimeout(m.hitch(this,function(){this._isEditing||this.refreshRendering(!0);this._setupDayRefresh()}),b.getTime()-a.getTime()+5E3)},resize:function(a){a&&q.setMarginBox(this.domNode,a)},beforeActivate:function(){},afterActivate:function(){},beforeDeactivate:function(){},afterDeactivate:function(){},
_getTopOwner:function(){for(var a=this;void 0!=a.owner;)a=a.owner;return a},_createRenderData:function(){},_validateProperties:function(){},_setText:function(a,b,c){if(null!=b)if(!c&&a.hasChildNodes())a.childNodes[0].childNodes[0].nodeValue=b;else{for(;a.hasChildNodes();)a.removeChild(a.lastChild);var d=h.doc.createElement("span");l("dojo-bidi")&&this.applyTextDir(d,b);c?d.innerHTML=b:d.appendChild(h.doc.createTextNode(b));a.appendChild(d)}},isAscendantHasClass:function(a,c,d){for(;a!=c&&a!=document;){if(b.contains(a,
d))return!0;a=a.parentNode}return!1},isWeekEnd:function(a){return n.isWeekend(a)},getWeekNumberLabel:function(a){a.toGregorian&&(a=a.toGregorian());return n.format(a,{selector:"date",datePattern:"w"})},addAndFloor:function(a,b,c){a=this.dateModule.add(a,b,c);return a=23==a.getHours()?this.dateModule.add(a,"hour",2):y.floorToDay(a,!0,this.dateClassObj)},floorToDay:function(a,b){return y.floorToDay(a,b,this.dateClassObj)},floorToMonth:function(a,b){return y.floorToMonth(a,b,this.dateClassObj)},floorDate:function(a,
b,c,d){return y.floor(a,b,c,d,this.dateClassObj)},isToday:function(a){return y.isToday(a,this.dateClassObj)},isStartOfDay:function(a){return y.isStartOfDay(a,this.dateClassObj,this.dateModule)},isOverlapping:function(a,b,c,d,f,g){return y.isOverlapping(a,b,c,d,f,g)},computeRangeOverlap:function(a,b,c,d,f,g){var h=a.dateModule;if(null==b||null==d||null==c||null==f)return null;var k=h.compare(b,f),l=h.compare(d,c);if(g){if(0==k||1==k||0==l||1==l)return null}else if(1==k||1==l)return null;return[this.newDate(0<
h.compare(b,d)?b:d,a),this.newDate(0<h.compare(c,f)?f:c,a)]},isSameDay:function(a,b){return null==a||null==b?!1:a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()},computeProjectionOnDate:function(a,b,c,d){var f=a.dateModule,g=a.minHours,h=a.maxHours;if(0>=d||-1==f.compare(c,b))return 0;var k=function(a){return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds()},l=this.floorToDay(b,!1,a);if(c.getDate()!=l.getDate())if(c.getMonth()==l.getMonth()){if(c.getDate()<
l.getDate())return 0;if(c.getDate()>l.getDate()&&24>h)return d}else if(c.getFullYear()==l.getFullYear()){if(c.getMonth()<l.getMonth())return 0;if(c.getMonth()>l.getMonth())return d}else{if(c.getFullYear()<l.getFullYear())return 0;if(c.getFullYear()>l.getFullYear())return d}if(this.isSameDay(b,c)||24<h){f=m.clone(b);a=0;null!=g&&0!=g&&(f.setHours(g),a=k(f));f=m.clone(b);f.setHours(h);f=null==h||24==h?86400:24<h?86400+k(f):k(f);g=0;g=24<h&&b.getDate()!=c.getDate()?86400+k(c):k(c);if(g<a)return 0;if(g>
f)return d;b=d*(g-a)/(f-a)}else{if(c.getDate()<b.getDate()&&c.getMonth()==b.getMonth())return 0;c=this.floorToDay(c);h=a.dateModule.add(b,"day",1);h=this.floorToDay(h,!1,a);b=1==f.compare(c,b)&&0==f.compare(c,h)||1==f.compare(c,h)?d:0}return b},getTime:function(a,b,c,d){return null},getSubColumn:function(a,b,c,d){return null},getSubColumnIndex:function(a){if(this.subColumns)for(var b=0;b<this.subColumns.length;b++)if(this.subColumns[b]==a)return b;return-1},newDate:function(a){return y.newDate(a,
this.dateClassObj)},_isItemInView:function(a){var b=this.renderData,c=b.dateModule;return-1==c.compare(a.startTime,b.startTime)?!1:1!=c.compare(a.endTime,b.endTime)},_ensureItemInView:function(a){var b=this.renderData,c=b.dateModule,d=Math.abs(c.difference(a.startTime,a.endTime,"millisecond")),f=!1;-1==c.compare(a.startTime,b.startTime)?(a.startTime=b.startTime,a.endTime=c.add(a.startTime,"millisecond",d),f=!0):1==c.compare(a.endTime,b.endTime)&&(a.endTime=b.endTime,a.startTime=c.add(a.endTime,"millisecond",
-d),f=!0);return f},scrollable:!0,autoScroll:!0,_autoScroll:function(a,b,c){return!1},scrollMethod:"auto",_setScrollMethodAttr:function(a){this.scrollMethod!=a&&(this.scrollMethod=a,void 0!==this._domScroll&&(this._domScroll?c.set(this.sheetContainer,this._cssPrefix+"transform","translateY(0px)"):this.scrollContainer.scrollTop=0),delete this._domScroll,a=this._getScrollPosition(),delete this._scrollPos,this._setScrollPosition(a))},_startAutoScroll:function(a){var b=this._scrollProps;b||(b=this._scrollProps=
{});b.scrollStep=a;b.isScrolling||(b.isScrolling=!0,b.scrollTimer=setInterval(m.hitch(this,this._onScrollTimer_tick),10))},_stopAutoScroll:function(){var a=this._scrollProps;a&&a.isScrolling&&(clearInterval(a.scrollTimer),a.scrollTimer=null);this._scrollProps=null},_onScrollTimer_tick:function(a){},_scrollPos:0,_hscrollPos:0,getCSSPrefix:function(){return l("ie")?"-ms-":l("webkit")?"-webkit-":l("mozilla")?"-moz-":l("opera")?"-o-":""},_hScrollNodes:null,_setScrollPositionBase:function(a,b){if(!(b&&
this._scrollPos==a||!b&&this._hScrollPos==a)){if(void 0===this._domScroll){var d=this.get("scrollMethod");this._domScroll="auto"===d?!l("ios")&&!l("android")&&!l("webkit"):"dom"===d}d=0;b?(d=q.getMarginBox(this.scrollContainer),d=q.getMarginBox(this.sheetContainer).h-d.h):(d=q.getMarginBox(this.grid),d=q.getMarginBox(this.gridTable).w-d.w);0>a?a=0:a>d&&(a=d);b?this._scrollPos=a:this._hScrollPos=a;var f=!this.isLeftToRight();if(this._domScroll)b?this.scrollContainer.scrollTop=a:k.forEach(this._hScrollNodes,
function(b){c.set(b,"left",(f?1:-1)*a+"px")},this);else{this._cssPrefix||(this._cssPrefix=this.getCSSPrefix());var g=this._cssPrefix+"transform";if(b)c.set(this.sheetContainer,g,"translateY(-"+a+"px)");else{var h="translateX("+(f?"":"-")+a+"px)";k.forEach(this._hScrollNodes,function(a){c.set(a,g,h)},this)}}}},_setScrollPosition:function(a){this._setScrollPositionBase(a,!0)},_getScrollPosition:function(){return this._scrollPos},_setHScrollPosition:function(a){this._setScrollPositionBase(a,!1)},_setHScrollPositionImpl:function(a,
b,d){var f=b?null:"translateX(-"+a+"px)";k.forEach(this._hScrollNodes,function(d){b?(d.scrollLeft=a,c.set(d,"left",-a+"px")):c.set(d,cssProp,f)},this)},_hScrollPos:0,_getHScrollPosition:function(){return this._hScrollPos},scrollView:function(a){},ensureVisibility:function(a,b,c,d,f){},_getStoreAttr:function(){return this.owner?this.owner.get("store"):this.store},_setItemsAttr:function(a){this._set("items",a);this.displayedItemsInvalidated=!0},_refreshItemsRendering:function(){var a=this.renderData;
this._computeVisibleItems(a);this._layoutRenderers(a)},_refreshDecorationItemsRendering:function(){var a=this.renderData;this._computeVisibleItems(a);this._layoutDecorationRenderers(a)},invalidateLayout:function(){this._layoutRenderers(this.renderData);this._layoutDecorationRenderers(this.renderData)},_setDecorationItemsAttr:function(a){this._set("decorationItems",a);this.displayedDecorationItemsInvalidated=!0},_getDecorationStoreAttr:function(){return this.owner?this.owner.get("decorationStore"):
this.decorationStore},_setDecorationStoreAttr:function(a){this.decorationStore=a;this.decorationStoreManager.set("store",a)},computeOverlapping:function(a,b){if(0==a.length)return{numLanes:0,addedPassRes:[1]};for(var c=[],d=0;d<a.length;d++)this._layoutPass1(a[d],c);d=null;b&&(d=m.hitch(this,b)(c));return{numLanes:c.length,addedPassRes:d}},_layoutPass1:function(a,b){for(var c=!0,d=0;d<b.length;d++){for(var f=b[d],c=!1,g=0;g<f.length&&!c;g++)f[g].start<a.end&&a.start<f[g].end&&(c=!0,f[g].extent=1);
if(!c){a.lane=d;a.extent=-1;f.push(a);return}}b.push([a]);a.lane=b.length-1;a.extent=-1},_layoutInterval:function(a,b,c,d,f){},layoutPriorityFunction:null,_sortItemsFunction:function(a,b){var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return c},_layoutRenderers:function(a){this._layoutRenderersImpl(a,this.rendererManager,a.items,"dataItems")},_layoutDecorationRenderers:function(a){this._layoutRenderersImpl(a,this.decorationRendererManager,
a.decorationItems,"decorationItems")},_layoutRenderersImpl:function(a,b,c,d){if(c){b.recycleItemRenderers();b=a.dateModule;var f=this.newDate(a.startTime),g=m.clone(f);c=c.concat();for(var h=[],l,n={},q=0;-1==b.compare(f,a.endTime)&&0<c.length;){var f=this.addAndFloor(f,this._layoutUnit,this._layoutStep),r=m.clone(f);a.minHours&&g.setHours(a.minHours);void 0!=a.maxHours&&24!=a.maxHours&&(24>a.maxHours&&(r=b.add(f,"day",-1)),r=this.floorToDay(r,!0,a),r.setHours(a.maxHours-(24>a.maxHours?0:24)));l=
k.filter(c,function(b){var c=this.isOverlapping(a,b.startTime,b.endTime,g,r);c?(n[b.id]=!0,h.push(b)):n[b.id]?delete n[b.id]:h.push(b);return c},this);c=h;h=[];0<l.length&&(l.sort(m.hitch(this,this.layoutPriorityFunction?this.layoutPriorityFunction:this._sortItemsFunction)),this._layoutInterval(a,q,g,r,l,d));g=m.clone(f);q++}this._onRenderersLayoutDone(this)}},_recycleItemRenderers:function(a){this.rendererManager.recycleItemRenderers(a)},getRenderers:function(a){return this.rendererManager.getRenderers(a)},
itemToRendererKindFunc:null,_itemToRendererKind:function(a){return this.itemToRendererKindFunc?this.itemToRendererKindFunc(a):this._defaultItemToRendererKindFunc(a)},_defaultItemToRendererKindFunc:function(a){return null},_createRenderer:function(a,b,c,d){return this.rendererManager.createRenderer(a,b,c,d)},_onRendererCreated:function(a){if(a.source==this)this.onRendererCreated(a);null!=this.owner&&this.owner._onRendererCreated(a)},onRendererCreated:function(a){},_onRendererRecycled:function(a){if(a.source==
this)this.onRendererRecycled(a);null!=this.owner&&this.owner._onRendererRecycled(a)},onRendererRecycled:function(a){},_onRendererReused:function(a){if(a.source==this)this.onRendererReused(a);null!=this.owner&&this.owner._onRendererReused(a)},onRendererReused:function(a){},_onRendererDestroyed:function(a){if(a.source==this)this.onRendererDestroyed(a);null!=this.owner&&this.owner._onRendererDestroyed(a)},onRendererDestroyed:function(a){},_onRenderersLayoutDone:function(a){this.onRenderersLayoutDone(a);
null!=this.owner&&this.owner._onRenderersLayoutDone(a)},onRenderersLayoutDone:function(a){},_recycleRenderer:function(a,b){this.rendererManager.recycleRenderer(a,b)},_destroyRenderer:function(a){this.rendererManager.destroyRenderer(a)},_destroyRenderersByKind:function(a){this.rendererManager.destroyRenderersByKind(a)},_updateEditingCapabilities:function(a,b){var c=this.isItemMoveEnabled(a,b.rendererKind),d=this.isItemResizeEnabled(a,b.rendererKind),f=!1;c!=b.get("moveEnabled")&&(b.set("moveEnabled",
c),f=!0);d!=b.get("resizeEnabled")&&(b.set("resizeEnabled",d),f=!0);f&&b.updateRendering()},updateRenderers:function(a,b){if(null!=a)for(var c=m.isArray(a)?a:[a],d=0;d<c.length;d++){var f=c[d];if(null!=f&&null!=f.id){var g=this.rendererManager.itemToRenderer[f.id];if(null!=g)for(var h=this.isItemSelected(f),k=this.isItemHovered(f),l=this.isItemBeingEdited(f),n=this.showFocus?this.isItemFocused(f):!1,q=0;q<g.length;q++){var r=g[q].renderer;r.set("hovered",k);r.set("selected",h);r.set("edited",l);r.set("focused",
n);r.set("storeState",this.getItemStoreState(f));this.applyRendererZIndex(f,g[q],k,h,l,n);b||(r.set("item",f),r.updateRendering&&r.updateRendering())}}}},applyRendererZIndex:function(a,b,d,f,g,h){c.set(b.container,{zIndex:g||f?20:void 0==a.lane?0:a.lane})},getIdentity:function(a){return this.owner?this.owner.getIdentity(a):a.id},_setHoveredItem:function(a,b){if(this.owner)this.owner._setHoveredItem(a,b);else if(this.hoveredItem&&a&&this.hoveredItem.id!=a.id||null==a||null==this.hoveredItem){var c=
this.hoveredItem;this.hoveredItem=a;this.updateRenderers([c,this.hoveredItem],!0);a&&b&&this._updateEditingCapabilities(a._item?a._item:a,b)}},hoveredItem:null,isItemHovered:function(a){return this._isEditing&&this._edProps?a.id==this._edProps.editedItem.id:this.owner?this.owner.isItemHovered(a):null!=this.hoveredItem&&this.hoveredItem.id==a.id},isItemFocused:function(a){return this._isItemFocused?this._isItemFocused(a):!1},_setSelectionModeAttr:function(a){this.owner?this.owner.set("selectionMode",
a):this.inherited(arguments)},_getSelectionModeAttr:function(a){return this.owner?this.owner.get("selectionMode"):this.inherited(arguments)},_setSelectedItemAttr:function(a){this.owner?this.owner.set("selectedItem",a):this.inherited(arguments)},_getSelectedItemAttr:function(a){return this.owner?this.owner.get("selectedItem"):this.selectedItem},_setSelectedItemsAttr:function(a){this.owner?this.owner.set("selectedItems",a):this.inherited(arguments)},_getSelectedItemsAttr:function(){return this.owner?
this.owner.get("selectedItems"):this.inherited(arguments)},isItemSelected:function(a){return this.owner?this.owner.isItemSelected(a):this.inherited(arguments)},selectFromEvent:function(a,b,c,d){this.owner?this.owner.selectFromEvent(a,b,c,d):this.inherited(arguments)},setItemSelected:function(a,b){this.owner?this.owner.setItemSelected(a,b):this.inherited(arguments)},createItemFunc:null,_getCreateItemFuncAttr:function(){return this.owner?this.owner.get("createItemFunc"):this.createItemFunc},createOnGridClick:!1,
_getCreateOnGridClickAttr:function(){return this.owner?this.owner.get("createOnGridClick"):this.createOnGridClick},_gridMouseDown:!1,_tempIdCount:0,_tempItemsMap:null,_onGridMouseDown:function(a){this._gridMouseDown=!0;this.showFocus=!1;this._isEditing&&this._endItemEditing("mouse",!1);this._doEndItemEditing(this.owner,"mouse");this.set("focusedItem",null);this.selectFromEvent(a,null,null,!0);this._setTabIndexAttr&&this[this._setTabIndexAttr].focus();if(this._onRendererHandleMouseDown){var b=this.get("createItemFunc");
if(b){var b=this._createdEvent=b(this,this.getTime(a),a,this.getSubColumn(a)),c=this.get("store");if(b&&null!=c){if(void 0==c.getIdentity(b)){var d="_tempId_"+this._tempIdCount++;b[c.idProperty]=d;null==this._tempItemsMap&&(this._tempItemsMap={});this._tempItemsMap[d]=!0}c=this.itemToRenderItem(b,c);c._item=b;this._setItemStoreState(b,"unstored");var d=this._getTopOwner(),f=d.get("items");d.set("items",f?f.concat([c]):[c]);this._refreshItemsRendering();(b=this.getRenderers(b))&&0<b.length&&(b=b[0])&&
(this._onRendererHandleMouseDown(a,b.renderer,"resizeEnd"),this._startItemEditing(c,"mouse"))}}}},_onGridMouseMove:function(a){},_onGridMouseUp:function(a){},_onGridTouchStart:function(a){var b=this._edProps;this._gridProps={event:a,fromItem:this.isAscendantHasClass(a.target,this.eventContainer,"dojoxCalendarEvent")};this._isEditing&&(this._gridProps&&(this._gridProps.editingOnStart=!0),m.mixin(b,this._getTouchesOnRenderers(a,b.editedItem)),0==b.touchesLen&&(b&&b.endEditingTimer&&(clearTimeout(b.endEditingTimer),
b.endEditingTimer=null),this._endItemEditing("touch",!1)));this._doEndItemEditing(this.owner,"touch");g.stop(a)},_doEndItemEditing:function(a,b){if(a&&a._isEditing){var c=a._edProps;c&&c.endEditingTimer&&(clearTimeout(c.endEditingTimer),c.endEditingTimer=null);a._endItemEditing(b,!1)}},_onGridTouchEnd:function(a){},_onGridTouchMove:function(a){},__fixEvt:function(a){return a},_dispatchCalendarEvt:function(a,b){a=this.__fixEvt(a);this[b](a);if(this.owner)this.owner[b](a);return a},_onGridClick:function(a){a.triggerEvent||
(a={date:this.getTime(a),triggerEvent:a});this._dispatchCalendarEvt(a,"onGridClick")},onGridClick:function(a){},_onGridDoubleClick:function(a){a.triggerEvent||(a={date:this.getTime(a),triggerEvent:a});this._dispatchCalendarEvt(a,"onGridDoubleClick")},onGridDoubleClick:function(a){},_onItemClick:function(a){this._dispatchCalendarEvt(a,"onItemClick")},onItemClick:function(a){},_onItemDoubleClick:function(a){this._dispatchCalendarEvt(a,"onItemDoubleClick")},onItemDoubleClick:function(a){},_onItemContextMenu:function(a){this._dispatchCalendarEvt(a,
"onItemContextMenu")},onItemContextMenu:function(a){},_getStartEndRenderers:function(a){a=this.rendererManager.itemToRenderer[a.id];if(null==a)return null;if(1==a.length)return a=a[0].renderer,[a,a];for(var b=this.renderData,c=!1,d=!1,f=[],g=0;g<a.length;g++){var h=a[g].renderer;c||(c=0==b.dateModule.compare(h.item.range[0],h.item.startTime),f[0]=h);d||(d=0==b.dateModule.compare(h.item.range[1],h.item.endTime),f[1]=h);if(c&&d)break}return f},editable:!0,moveEnabled:!0,resizeEnabled:!0,isItemEditable:function(a,
b){return"storing"!=this.getItemStoreState(a)&&this.editable&&(this.owner?this.owner.isItemEditable(a,b):!0)},isItemMoveEnabled:function(a,b){return this.isItemEditable(a,b)&&this.moveEnabled&&(this.owner?this.owner.isItemMoveEnabled(a,b):!0)},isItemResizeEnabled:function(a,b){return this.isItemEditable(a,b)&&this.resizeEnabled&&(this.owner?this.owner.isItemResizeEnabled(a,b):!0)},_isEditing:!1,isItemBeingEdited:function(a){return this._isEditing&&this._edProps&&this._edProps.editedItem&&this._edProps.editedItem.id==
a.id},_setEditingProperties:function(a){this._edProps=a},_startItemEditing:function(a,b){this._isEditing=!0;this._getTopOwner()._isEditing=!0;var c=this._edProps;c.editedItem=a;c.storeItem=a._item;c.eventSource=b;c.secItem=this._secondarySheet?this._findRenderItem(a.id,this._secondarySheet.renderData.items):null;c.ownerItem=this.owner?this._findRenderItem(a.id,this.items):null;if(!c.liveLayout){c.editSaveStartTime=a.startTime;c.editSaveEndTime=a.endTime;c.editItemToRenderer=this.rendererManager.itemToRenderer;
c.editItems=this.renderData.items;c.editRendererList=this.rendererManager.rendererList;this.renderData.items=[c.editedItem];var d=c.editedItem.id;this.rendererManager.itemToRenderer={};this.rendererManager.rendererList=[];var f=c.editItemToRenderer[d];c.editRendererIndices=[];k.forEach(f,m.hitch(this,function(a,b){null==this.rendererManager.itemToRenderer[d]?this.rendererManager.itemToRenderer[d]=[a]:this.rendererManager.itemToRenderer[d].push(a);this.rendererManager.rendererList.push(a)}));c.editRendererList=
k.filter(c.editRendererList,function(a){return null!=a&&a.renderer.item.id!=d});delete c.editItemToRenderer[d]}this._layoutRenderers(this.renderData);this._onItemEditBegin({item:a,storeItem:c.storeItem,eventSource:b})},_onItemEditBegin:function(a){this._editStartTimeSave=this.newDate(a.item.startTime);this._editEndTimeSave=this.newDate(a.item.endTime);this._dispatchCalendarEvt(a,"onItemEditBegin")},onItemEditBegin:function(a){},_endItemEditing:function(a,b){this._editingGesture&&this._endItemEditingGesture(a);
this._isEditing=!1;this._getTopOwner()._isEditing=!1;var c=this._edProps;k.forEach(c.handles,function(a){a.remove()});c.liveLayout||(this.renderData.items=c.editItems,this.rendererManager.rendererList=c.editRendererList.concat(this.rendererManager.rendererList),m.mixin(this.rendererManager.itemToRenderer,c.editItemToRenderer));this._onItemEditEnd(m.mixin(this._createItemEditEvent(),{item:c.editedItem,storeItem:c.storeItem,eventSource:a,completed:!b}));this._layoutRenderers(this.renderData);this._edProps=
null},_onItemEditEnd:function(a){this._dispatchCalendarEvt(a,"onItemEditEnd");if(!a.isDefaultPrevented()){var b=this.get("store"),c=this.renderItemToItem(a.item,b),d=this._getItemStoreStateObj(a.item);if(null!=d&&"unstored"==d.state)if(a.completed){c=m.mixin(d.item,c);this._setItemStoreState(c,"storing");var f=b.getIdentity(c);a=null;this._tempItemsMap&&this._tempItemsMap[f]&&(a={temporaryId:f},delete this._tempItemsMap[f],delete c[b.idProperty]);v(b.add(c,a),m.hitch(this,function(a){(m.isObject(a)?
b.getIdentity(a):a)!=f&&this._removeRenderItem(f)}))}else this._removeRenderItem(d.id);else a.completed?(this._setItemStoreState(c,"storing"),b.put(c)):(a.item.startTime=this._editStartTimeSave,a.item.endTime=this._editEndTimeSave)}},_removeRenderItem:function(a){for(var b=this._getTopOwner(),c=b.get("items"),d=!1,f=c.length-1;0<=f;f--)if(c[f].id==a){c.splice(f,1);d=!0;break}this._cleanItemStoreState(a);d&&(b.set("items",c),this.invalidateLayout())},onItemEditEnd:function(a){},_createItemEditEvent:function(){return{cancelable:!0,
bubbles:!1,__defaultPrevent:!1,preventDefault:function(){this.__defaultPrevented=!0},isDefaultPrevented:function(){return this.__defaultPrevented}}},_startItemEditingGesture:function(a,b,c,d){var f=this._edProps;if(f&&null!=f.editedItem){this._editingGesture=!0;var g=f.editedItem;f.editKind=b;this._onItemEditBeginGesture(this.__fixEvt(m.mixin(this._createItemEditEvent(),{item:g,storeItem:f.storeItem,startTime:g.startTime,endTime:g.endTime,editKind:b,rendererKind:f.rendererKind,triggerEvent:d,dates:a,
eventSource:c})));f.itemBeginDispatched=!0}},_onItemEditBeginGesture:function(a){var b=this._edProps,c=b.editedItem,d=a.dates;b.editingTimeFrom=[];b.editingTimeFrom[0]=d[0];b.editingItemRefTime=[];b.editingItemRefTime[0]=this.newDate("resizeEnd"==b.editKind?c.endTime:c.startTime);"resizeBoth"==b.editKind&&(b.editingTimeFrom[1]=d[1],b.editingItemRefTime[1]=this.newDate(c.endTime));d=this.renderData.dateModule;b.inViewOnce=this._isItemInView(c);if("label"==b.rendererKind||this.roundToDay)b._itemEditBeginSave=
this.newDate(c.startTime),b._itemEditEndSave=this.newDate(c.endTime);b._initDuration=d.difference(c.startTime,c.endTime,c.allDay?"day":"millisecond");this._dispatchCalendarEvt(a,"onItemEditBeginGesture");a.isDefaultPrevented()||"mouse"!=a.eventSource||(b.editLayer=t.create("div",{style:"position: absolute; left:0; right:0; bottom:0; top:0; z-index:30; tabIndex:-1; background-image:url('"+this._blankGif+"'); cursor: "+("move"==a.editKind?"move":this.resizeCursor),onresizestart:function(a){return!1},
onselectstart:function(a){return!1}},this.domNode),b.editLayer.focus())},onItemEditBeginGesture:function(a){},_waDojoxAddIssue:function(b,c,d){var f=this.renderData.dateModule;return"gregorian"!=this._calendar&&0>d?(b=b.toGregorian(),b=a.add(b,c,d),new this.renderData.dateClassObj(b)):f.add(b,c,d)},_computeItemEditingTimes:function(a,b,c,d,f){c=this.renderData.dateModule;a=this._edProps;"move"==b&&(b=c.difference(a.editingTimeFrom[0],d[0],"millisecond"),d[0]=this._waDojoxAddIssue(a.editingItemRefTime[0],
"millisecond",b));return d},_moveOrResizeItemGesture:function(a,b,c,d){if(this._isEditing&&null!=a[0]){var f=this._edProps,g=f.editedItem,h=this.renderData.dateModule,k=f.editKind,l=[a[0]];"resizeBoth"==k&&(l[1]=a[1]);var l=this._computeItemEditingTimes(g,f.editKind,f.rendererKind,l,b),n=l[0],q=!1;a=m.clone(g.startTime);var r=m.clone(g.endTime),p=g.subColumn,t="keyboard"==f.eventSource?!1:this.allowStartEndSwap;if("move"==k)null!=d&&g.subColumn!=d&&this.allowSubColumnMove&&(g.subColumn=d,q=this.get("store"),
l=this.renderItemToItem(g,q),m.mixin(g,this.itemToRenderItem(l,q)),q=!0),0!=h.compare(g.startTime,n)&&(q=h.difference(g.startTime,g.endTime,"millisecond"),g.startTime=this.newDate(n),g.endTime=h.add(g.startTime,"millisecond",q),q=!0);else if("resizeStart"==k)0!=h.compare(g.startTime,n)&&(-1!=h.compare(g.endTime,n)?g.startTime=this.newDate(n):t?(g.startTime=this.newDate(g.endTime),g.endTime=this.newDate(n),f.editKind=k="resizeEnd","touch"==b&&(f.resizeEndTouchIndex=f.resizeStartTouchIndex,f.resizeStartTouchIndex=
-1)):(g.startTime=this.newDate(g.endTime),g.startTime.setHours(n.getHours()),g.startTime.setMinutes(n.getMinutes()),g.startTime.setSeconds(n.getSeconds())),q=!0);else if("resizeEnd"==k)0!=h.compare(g.endTime,n)&&(1!=h.compare(g.startTime,n)?g.endTime=this.newDate(n):t?(g.endTime=this.newDate(g.startTime),g.startTime=this.newDate(n),f.editKind=k="resizeStart","touch"==b&&(f.resizeStartTouchIndex=f.resizeEndTouchIndex,f.resizeEndTouchIndex=-1)):(g.endTime=this.newDate(g.startTime),g.endTime.setHours(n.getHours()),
g.endTime.setMinutes(n.getMinutes()),g.endTime.setSeconds(n.getSeconds())),q=!0);else if("resizeBoth"==k)q=!0,n=this.newDate(n),l=this.newDate(l[1]),-1!=h.compare(n,l)&&(t?(t=n,n=l,l=t):q=!1),q&&(g.startTime=n,g.endTime=l);else return!1;if(!q)return!1;b=m.mixin(this._createItemEditEvent(),{item:g,storeItem:f.storeItem,startTime:g.startTime,endTime:g.endTime,editKind:k,rendererKind:f.rendererKind,triggerEvent:c,eventSource:b});"move"==k?this._onItemEditMoveGesture(b):this._onItemEditResizeGesture(b);
1==h.compare(g.startTime,g.endTime)&&(k=g.startTime,g.startTime=g.endTime,g.endTime=k);q=p!=g.subColumn||0!=h.compare(a,g.startTime)||0!=h.compare(r,g.endTime);if(!q)return!1;this._layoutRenderers(this.renderData);f.liveLayout&&null!=f.secItem?(f.secItem.startTime=g.startTime,f.secItem.endTime=g.endTime,this._secondarySheet._layoutRenderers(this._secondarySheet.renderData)):null!=f.ownerItem&&this.owner.liveLayout&&(f.ownerItem.startTime=g.startTime,f.ownerItem.endTime=g.endTime,this.owner._layoutRenderers(this.owner.renderData));
return!0}},_findRenderItem:function(a,b){b=b||this.renderData.items;for(var c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null},_onItemEditMoveGesture:function(a){this._dispatchCalendarEvt(a,"onItemEditMoveGesture");if(!a.isDefaultPrevented()){var b=a.source._edProps,c=this.renderData,d=c.dateModule;"label"==b.rendererKind||this.roundToDay&&!a.item.allDay?(c=this.floorToDay(a.item.startTime,!1,c),c.setHours(b._itemEditBeginSave.getHours()),c.setMinutes(b._itemEditBeginSave.getMinutes()),d=d.add(c,
"millisecond",b._initDuration)):a.item.allDay?(c=this.floorToDay(a.item.startTime,!0),d=d.add(c,"day",b._initDuration)):(c=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps),d=d.add(c,"millisecond",b._initDuration));a.item.startTime=c;a.item.endTime=d;b.inViewOnce||(b.inViewOnce=this._isItemInView(a.item));b.inViewOnce&&this.stayInView&&this._ensureItemInView(a.item)}},_DAY_IN_MILLISECONDS:864E5,onItemEditMoveGesture:function(a){},_onItemEditResizeGesture:function(a){this._dispatchCalendarEvt(a,
"onItemEditResizeGesture");if(!a.isDefaultPrevented()){var b=a.source._edProps,c=this.renderData,d=c.dateModule,f=a.item.startTime,g=a.item.endTime;"resizeStart"==a.editKind?a.item.allDay?f=this.floorToDay(a.item.startTime,!1,this.renderData):this.roundToDay?(f=this.floorToDay(a.item.startTime,!1,c),f.setHours(b._itemEditBeginSave.getHours()),f.setMinutes(b._itemEditBeginSave.getMinutes())):f=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps):"resizeEnd"==a.editKind?a.item.allDay?this.isStartOfDay(a.item.endTime)||
(g=this.floorToDay(a.item.endTime,!1,this.renderData),g=d.add(g,"day",1)):this.roundToDay?(g=this.floorToDay(a.item.endTime,!1,c),g.setHours(b._itemEditEndSave.getHours()),g.setMinutes(b._itemEditEndSave.getMinutes())):(g=this.floorDate(a.item.endTime,this.snapUnit,this.snapSteps),"mouse"==a.eventSource&&(g=d.add(g,this.snapUnit,this.snapSteps))):(f=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps),g=this.floorDate(a.item.endTime,this.snapUnit,this.snapSteps),g=d.add(g,this.snapUnit,this.snapSteps));
a.item.startTime=f;a.item.endTime=g;c=a.item.allDay||b._initDuration>=this._DAY_IN_MILLISECONDS&&!this.allowResizeLessThan24H;this.ensureMinimalDuration(this.renderData,a.item,c?"day":this.minDurationUnit,c?1:this.minDurationSteps,a.editKind);b.inViewOnce||(b.inViewOnce=this._isItemInView(a.item));b.inViewOnce&&this.stayInView&&this._ensureItemInView(a.item)}},onItemEditResizeGesture:function(a){},_endItemEditingGesture:function(a,b){if(this._isEditing){this._editingGesture=!1;var c=this._edProps,
d=c.editedItem;c.itemBeginDispatched=!1;this._onItemEditEndGesture(m.mixin(this._createItemEditEvent(),{item:d,storeItem:c.storeItem,startTime:d.startTime,endTime:d.endTime,editKind:c.editKind,rendererKind:c.rendererKind,triggerEvent:b,eventSource:a}))}},_onItemEditEndGesture:function(a){var b=this._edProps;delete b._itemEditBeginSave;delete b._itemEditEndSave;this._dispatchCalendarEvt(a,"onItemEditEndGesture");!a.isDefaultPrevented()&&b.editLayer&&(l("ie")&&(b.editLayer.style.cursor="default"),setTimeout(m.hitch(this,
function(){this.domNode&&(this.domNode.focus(),b.editLayer.parentNode.removeChild(b.editLayer),b.editLayer=null)}),10))},onItemEditEndGesture:function(a){},ensureMinimalDuration:function(a,b,c,d,f){a=a.dateModule;"resizeStart"==f?(c=a.add(b.endTime,c,-d),1==a.compare(b.startTime,c)&&(b.startTime=c)):(c=a.add(b.startTime,c,d),-1==a.compare(b.endTime,c)&&(b.endTime=c))},doubleTapDelay:300,snapUnit:"minute",snapSteps:15,minDurationUnit:"hour",minDurationSteps:1,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,
allowResizeLessThan24H:!1,allowSubColumnMove:!0})})},"dojox/widget/_Invalidating":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful"],function(p,m,k){return p("dojox.widget._Invalidating",k,{invalidatingProperties:null,invalidRendering:!1,postscript:function(h){this.inherited(arguments);if(this.invalidatingProperties)for(var g=this.invalidatingProperties,d=0;d<g.length;d++)this.watch(g[d],m.hitch(this,this.invalidateRendering)),h&&g[d]in h&&this.invalidateRendering()},addInvalidatingProperties:function(h){this.invalidatingProperties=
this.invalidatingProperties?this.invalidatingProperties.concat(h):h},invalidateRendering:function(){this.invalidRendering||(this.invalidRendering=!0,setTimeout(m.hitch(this,this.validateRendering),0))},validateRendering:function(){this.invalidRendering&&(this.refreshRendering(),this.invalidRendering=!1)},refreshRendering:function(){}})})},"dojox/widget/Selection":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/sniff","dojo/_base/lang","dojo/Stateful"],function(p,m,k,h,g){return p("dojox.widget.Selection",
g,{constructor:function(){this.selectedItems=[]},selectionMode:"single",_setSelectionModeAttr:function(d){"none"!=d&&"single"!=d&&"multiple"!=d&&(d="single");d!=this.selectionMode&&(this.selectionMode=d,"none"==d?this.set("selectedItems",null):"single"==d&&this.set("selectedItem",this.selectedItem))},selectedItem:null,_setSelectedItemAttr:function(d){this.selectedItem!=d&&(this._set("selectedItem",d),this.set("selectedItems",d?[d]:null))},selectedItems:null,_setSelectedItemsAttr:function(d){var g=
this.selectedItems;this.selectedItems=d;this.selectedItem=null;null!=g&&0<g.length&&this.updateRenderers(g,!0);this.selectedItems&&0<this.selectedItems.length&&(this.selectedItem=this.selectedItems[0],this.updateRenderers(this.selectedItems,!0))},_getSelectedItemsAttr:function(){return null==this.selectedItems?[]:this.selectedItems.concat()},isItemSelected:function(d){return null==this.selectedItems||0==this.selectedItems.length?!1:m.some(this.selectedItems,h.hitch(this,function(g){return this.getIdentity(g)==
this.getIdentity(d)}))},getIdentity:function(d){},setItemSelected:function(d,g){if("none"!=this.selectionMode&&null!=d){var f=this.get("selectedItems");if("single"==this.selectionMode)g?this.set("selectedItem",d):this.isItemSelected(d)&&this.set("selectedItems",null);else if(g)this.isItemSelected(d)||(null==f?f=[d]:f.unshift(d),this.set("selectedItems",f));else{var h=m.filter(f,function(c){return c.id!=d.id});null!=h&&h.length!=f.length&&this.set("selectedItems",h)}}},selectFromEvent:function(d,g,
f,h){if("none"==this.selectionMode)return!1;var c,b=this.get("selectedItem"),l=g?this.isItemSelected(g):!1,m=k("mac")?d.metaKey:d.ctrlKey;null==g?m||null==this.selectedItem||(this.set("selectedItem",null),c=!0):"multiple"==this.selectionMode?(m?this.setItemSelected(g,!l):this.set("selectedItem",g),c=!0):m?(this.set("selectedItem",l?null:g),c=!0):l||(this.set("selectedItem",g),c=!0);h&&c&&this.dispatchChange(b,this.get("selectedItem"),f,d);return c},dispatchChange:function(d,g,f,h){this.onChange({oldValue:d,
newValue:g,renderer:f,triggerEvent:h})},onChange:function(){}})})},"dojox/calendar/StoreManager":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/dom-class dojo/Stateful dojo/Evented dojo/when".split(" "),function(p,m,k,h,g,d,l,f){return p("dojox.calendar.StoreManager",[d,l],{owner:null,store:null,_ownerItemsProperty:null,_getParentStoreManager:function(){return this.owner&&this.owner.owner?this.owner.owner.get("storeManager"):null},_initItems:function(d){this.set("items",
d);return d},_itemsSetter:function(d){this.items=d;this.emit("dataLoaded",d)},_computeVisibleItems:function(d){var c=d.startTime,b=d.endTime,f=null,g=this.owner[this._ownerItemsProperty];g&&(f=m.filter(g,function(f){return this.owner.isOverlapping(d,f.startTime,f.endTime,c,b)},this));return f},_updateItems:function(d,c,b){var f=!0,g=null,k=this.owner.itemToRenderItem(d,this.store);k._item=d;this.items=this.owner[this._ownerItemsProperty];if(-1!==c)b!==c?(this.items.splice(c,1),this.owner.setItemSelected&&
this.owner.isItemSelected(k)&&(this.owner.setItemSelected(k,!1),this.owner.dispatchChange(k,this.get("selectedItem"),null,null))):(g=this.items[c],b=this.owner.dateModule,f=0!==b.compare(k.startTime,g.startTime)||0!==b.compare(k.endTime,g.endTime),h.mixin(g,k));else if(-1!==b){if(d=d.temporaryId){c=this.items?this.items.length:0;for(--c;0<=c;c--)if(this.items[c].id===d){this.items[c]=k;break}c=this._getItemStoreStateObj({id:d});this._cleanItemStoreState(d);this._setItemStoreState(k,c?c.state:null)}if((d=
this._getItemStoreStateObj(k))&&"storing"===d.state){if(this.items&&this.items[b]&&this.items[b].id!==k.id){c=this.items.length;for(--c;0<=c;c--)if(this.items[c].id===k.id){this.items.splice(c,1);break}this.items.splice(b,0,k)}h.mixin(d.renderItem,k)}else this.items.splice(b,0,k);this.set("items",this.items)}this._setItemStoreState(k,"stored");this.owner._isEditing||(f?this.emit("layoutInvalidated"):this.emit("renderersInvalidated",g))},_storeSetter:function(d){var c,b=this.owner;this._observeHandler&&
(this._observeHandler.remove(),this._observeHandler=null);d?(c=d.query(b.query,b.queryOptions),c.observe&&(this._observeHandler=c.observe(h.hitch(this,this._updateItems),!0)),c=c.map(h.hitch(this,function(c){var f=b.itemToRenderItem(c,d);null==f.id&&console.err("The data item "+c.summary+" must have an unique identifier from the store.getIdentity(). The calendar will NOT work properly.");f._item=c;return f})),c=f(c,h.hitch(this,this._initItems))):c=this._initItems([]);this.store=d;return c},_getItemStoreStateObj:function(d){var c=
this._getParentStoreManager();if(c)return c._getItemStoreStateObj(d);c=this.get("store");return null!=c&&null!=this._itemStoreState?(d=void 0===d.id?c.getIdentity(d):d.id,this._itemStoreState[d]):null},getItemStoreState:function(d){var c=this._getParentStoreManager();if(c)return c.getItemStoreState(d);if(null==this._itemStoreState)return"stored";c=this.get("store");d=void 0===d.id?c.getIdentity(d):d.id;d=this._itemStoreState[d];return null!=c&&void 0!==d?d.state:"stored"},_cleanItemStoreState:function(d){var c=
this._getParentStoreManager();if(c)return c._cleanItemStoreState(d);if(this._itemStoreState)return this._itemStoreState[d]?(delete this._itemStoreState[d],!0):!1},_setItemStoreState:function(d,c){var b=this._getParentStoreManager();if(b)b._setItemStoreState(d,c);else{void 0===this._itemStoreState&&(this._itemStoreState={});var b=this.get("store"),f=void 0===d.id?b.getIdentity(d):d.id,g=this._itemStoreState[f];"stored"===c||null==c?void 0!==g&&delete this._itemStoreState[f]:b&&(this._itemStoreState[f]=
{id:f,item:d,renderItem:this.owner.itemToRenderItem(d,b),state:c})}}})})},"dojox/calendar/RendererManager":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/dom-class dojo/dom-style dojo/Stateful dojo/Evented".split(" "),function(p,m,k,h,g,d,l,f,r){return p("dojox.calendar.RendererManager",[l,f],{owner:null,rendererPool:null,rendererList:null,itemToRenderer:null,constructor:function(c){this.rendererPool=[];this.rendererList=[];this.itemToRenderer={}},destroy:function(){for(;0<
this.rendererList.length;)this.destroyRenderer(this.rendererList.pop());for(var c in this._rendererPool){var b=this._rendererPool[c];if(b)for(;0<b.length;)this.destroyRenderer(b.pop())}},recycleItemRenderers:function(c){for(;0<this.rendererList.length;){var b=this.rendererList.pop();this.recycleRenderer(b,c)}this.itemToRenderer={}},getRenderers:function(c){if(null==c||null==c.id)return null;c=this.itemToRenderer[c.id];return null==c?null:c.concat()},createRenderer:function(c,b,d,f){if(null!=c&&null!=
b&&null!=d){var g=f=null,g=this.rendererPool[b];null!=g&&(f=g.shift());null==f?(g=new d,f={renderer:g,container:g.domNode,kind:b},this.emit("rendererCreated",{renderer:f,source:this.owner,item:c})):(g=f.renderer,this.emit("rendererReused",{renderer:g,source:this.owner,item:c}));g.owner=this.owner;g.set("rendererKind",b);g.set("item",c);b=this.itemToRenderer[c.id];null==b&&(this.itemToRenderer[c.id]=b=[]);b.push(f);this.rendererList.push(f);return f}return null},recycleRenderer:function(c,b){this.emit("rendererRecycled",
{renderer:c,source:this.owner});var f=this.rendererPool[c.kind];null==f?this.rendererPool[c.kind]=[c]:f.push(c);b&&c.container.parentNode.removeChild(c.container);d.set(c.container,"display","none");c.renderer.owner=null;c.renderer.set("item",null)},destroyRenderer:function(c){this.emit("rendererDestroyed",{renderer:c,source:this.owner});var b=c.renderer;b.destroy&&b.destroy();k.destroy(c.container)},destroyRenderersByKind:function(c){for(var b=[],d=0;d<this.rendererList.length;d++){var f=this.rendererList[d];
f.kind==c?this.destroyRenderer(f):b.push(f)}this.rendererList=b;if(c=this.rendererPool[c])for(;0<c.length;)this.destroyRenderer(c.pop())}})})},"webview/reliable/_enterpriseSchedule/utilityFunctions":function(){define(["dojo/_base/lang","dojo/date","dojo/json","rc/_base/util","../../util/globalConstants"],function(p,m,k,h,g){return{compareDateRepeats:function(d,g){var f=!0;return f=d.dom!==g.dom?!1:d.m!==g.m?!1:d.y===g.y},compareDayOfWeek:function(d,g){var f=!0;return f=d instanceof Array&&g instanceof
Array?h.arraysAreSame(d,g):d instanceof Array&&1===d.length?d[0]===g:g instanceof Array&&1===g.length?d===g[0]:d===g},compareEventOrder:function(d,g){var f=!1;if(d.startTime<g.startTime||d.startTime===g.startTime&&d.endTime<g.endTime)f=!0;return f},eventsAreEqual:function(d,g){var f=!0;d.startTime.setMilliseconds(0);g.startTime.setMilliseconds(0);d.endTime.setMilliseconds(0);g.endTime.setMilliseconds(0);return f=d.id!==g.id?!1:0!==m.compare(d.startTime,g.startTime,"time")||0!==m.compare(d.endTime,
g.endTime,"time")?!1:d.label!==g.label?!1:d.npriority!==g.npriority?!1:d.startValue!==g.startValue?!1:h.arraysAreSame(d.schedules,g.schedules)?this.isSameRepeat(d.repeat,g.repeat):!1},isSameRepeat:function(d,h){var f=!1;if(d.type!==h.type)f=!1;else switch(d.type){case g.REPEAT_WEEKLY:f=this.compareDayOfWeek(d.value,h.value);break;case g.REPEAT_EXCEPTION:f=this.compareDateRepeats(d.value,h.value);break;case g.REPEAT_RANGE:f=this.compareDateRepeats(d.value.start,h.value.start)&&this.compareDateRepeats(d.value.end,
h.value.end);break;case g.REPEAT_RECURRENCE:f=this.recurrenceRepeatsAreSame(d.value,h.value);break;case g.REPEAT_CALENDAR:f=this.terminatingRepeatsAreSame(d,h);break;default:console.error("utilityFunctions - isSameRepeat(): Repeat type not supported",d)}return f},recurrenceRepeatsAreSame:function(d,g){var f=!0;return f=d.m!==g.m?!1:d.wom!==g.wom?!1:this.compareDayOfWeek(d.dow,g.dow)},terminatingRepeatsAreSame:function(d,g){var f=!0,h=d.value instanceof Array&&g.value instanceof Array;if(!1===this.compareDateRepeats(d.start,
g.start))f=!1;else if(!1===this.compareDateRepeats(d.end,g.end))f=!1;else if(h)if(d.value.length!==g.value.length)f=!1;else for(d.value=d.value.sort(p.hitch(this,this._sortByJSONString)),g.value=g.value.sort(p.hitch(this,this._sortByJSONString)),h=0;h<d.value.length;++h){if(!1===this.isSameRepeat(d.value[h],g.value[h])){f=!1;break}}else f=d.value instanceof Array&&1===d.value.length?this.isSameRepeat(d.value[0],g.value):g.value instanceof Array&&1===g.value.length?this.isSameRepeat(d.value,g.value[0]):
this.isSameRepeat(d.value,g.value);return f},_sortByJSONString:function(d,g){var f=0;k.stringify(d)>k.stringify(g)?f=1:k.stringify(d)>k.stringify(g)&&(f=-1);return f}}})},"webview/reliable/_enterpriseSchedule/overriddenViews/VerticalRenderer":function(){define(["dojo/_base/lang","dojo/text!./templates/VerticalRenderer.html","dojox/calendar/VerticalRenderer","./_RendererMixin"],function(p,m,k){return p.extend(k,{templateString:m})})},"dojox/calendar/VerticalRenderer":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dijit/_TemplatedMixin","./_RendererMixin","dojo/text!./templates/VerticalRenderer.html"],function(p,m,k,h,g){return p("dojox.calendar.VerticalRenderer",[m,k,h],{templateString:g,postCreate:function(){this.inherited(arguments);this._applyAttributes()},_isElementVisible:function(d,g,f,h){var c;switch(d){case "startTimeLabel":c=this.item.startTime;if(this.item.allDay||this.owner.isStartOfDay(c))return!1;break;case "endTimeLabel":if(c=this.item.endTime,this.item.allDay||this.owner.isStartOfDay(c))return!1}return this.inherited(arguments)}})})},
"webview/reliable/_enterpriseSchedule/Calendar":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/date/locale dojo/dom-class dojo/has dojo/i18n!webview/nls/all dojo/on dojo/mouse dojo/query dojo/store/Memory dojo/store/Observable dojo/text!./templates/calendar.html dojo/when dojox/calendar/Calendar rc/_base/util webview/util/dateUtils webview/util/globalConstants webview/widget/WarningDialog webview/widget/WarningDialogEnums ./utilityFunctions ./calendarEvents/Calendar ./calendarEvents/Date ./calendarEvents/DateRange ./calendarEvents/Recurrence ./calendarEvents/Weekly ./EventManager ./overriddenViews/CalendarBase dijit/Menu dijit/MenuItem webview/reliable/_enterpriseSchedule/widget/CalendarToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I){return m("webview/reliable/_enterpriseSchedule/Calendar",[n,I],{columnViewProps:{_showSecondarySheet:!1},createOnGridClick:!0,currentSelectedItem:null,DEFAULT_VALUE:"default value",dirtyEvent:null,eventManager:null,isBlockGroup:!1,isDirty:!1,saveDialog:null,templateString:u,viewRange:{start:null,end:null},widgetsInTemplate:!0,_blockIndex:-1,_colorMap:null,_compactColumn:"dd EEE",_compactMatrix:"EEE",_contextMenuOpenConnection:null,
_currentWidth:0,_editableStore:null,_increments:0,_isSummaryView:!0,_isMonthView:!1,_maxCompactWidth:700,_previousState:!0,_renderedScheduleId:-1,_storeReady:!0,_summaryStore:null,postCreate:function(){this.inherited(arguments);this.saveDialog=new z({title:f.changeViewTitleText,type:y.types.save,text:f.changeViewText});this.set("createOnGridClick",!l("touch"));this.set("createItemFunc",k.hitch(this,this._onCreateEvent));this.set("cssClassFunc",k.hitch(this,this._setCSSClass));this.set("firstDayOfWeek",
0);this.set("isItemResizeEnabled",k.hitch(this,this._isEventResizable));this.set("isItemMoveEnabled",k.hitch(this,this._isEventMovable));this.set("isItemEditable",k.hitch(this,this._isEventEditable));this.own(h.after(this.columnView,"styleRowHeaderCell",k.hitch(this,function(a,b){var c=b[0],d="am",f=b[1];12<=f?d="pm":0===f&&(f=12);12<f&&(f-=12);c.innerHTML="\x3cspan\x3e"+f+":00 "+d+"\x3c/span\x3e"})));this.own(h.after(this.columnView,"styleColumnHeaderCell",k.hitch(this,function(a,b){if(this._currentWidth<
this._maxCompactWidth){var c=g.format(b[1],{selector:"date",datePattern:this._compactColumn});b[0].innerHTML="\x3cspan\x3e"+c+"\x3c/span\x3e"}})));this.own(h.after(this.matrixView,"styleColumnHeaderCell",k.hitch(this,function(a,b){if(this._currentWidth<this._maxCompactWidth){var c=g.format(b[1],{selector:"date",datePattern:this._compactMatrix});b[0].innerHTML="\x3cspan\x3e"+c+"\x3c/span\x3e"}})));this.own(r(this,"itemContextMenu",k.hitch(this,this._onContextClick)));this.own(r(this.contextMenuDelete,
"click",k.hitch(this,this._onContextDelete)));this.own(r(this,"rendererCreated",k.hitch(this,function(a){this.own(r(a.renderer.renderer,"blockChange",k.hitch(this,this.onParentBlock)))})));this.columnView.set("minHours",0);this.columnView.set("maxHours",24);this.columnView.set("timeSlotDuration",30);this.columnView.set("hourSize",50);this.columnView.set("columnHeaderDatePattern","dd EEEE");this.columnView.set("layoutPriorityFunction",k.hitch(this,this._sortByPriority));this.columnView.set("_sortItemsFunction",
k.hitch(this,this._sortByPriority));this.own(r(this,"itemEditBegin",k.hitch(this,function(a){null===this.currentSelectedItem&&(this.currentSelectedItem=k.clone(a.item._item))})),r(this,"itemClick",k.hitch(this,function(a){this.currentSelectedItem=k.clone(a.item)})));this.own(r(this.calendarToolbar,"doViewChange",k.hitch(this,this.doViewChange)),r(this.calendarToolbar,"viewRangeChange",k.hitch(this,this._onViewRangeChange)))},resize:function(a){this.inherited(arguments);this._currentWidth=a.w;a.w<
this._maxCompactWidth?d.add(this.domNode,"compact"):d.remove(this.domNode,"compact");this.currentView&&this.currentView.refreshRendering();this.calendarToolbar.resize(a)},_onViewRangeChange:function(a){this.set("date",null);this.set("startDate",null);this.set("endDate",null);this.viewRange=a;"month"===this.dateInterval?(this.set("startDate",a.start),this.set("endDate",a.end)):this.set("date",a.start);this.onViewRangeChange(this.viewRange)},onViewRangeChange:function(a){},matrixViewRowHeaderClick:function(a){this.set("dateInterval",
"week");this.set("dateIntervalSteps",1);this.set("date",a.date)},_onNavigateBlocks:function(a){this.onNavigateBlocks(a)},onNavigateBlocks:function(a){r.emit(this,"navigateBlocks",a);return a},onParentBlock:function(a,b){r.emit(this,"parentBlock",a,b);return a},disable:function(a){a||this.set("selectionMode","none");this.set("editable",!1)},enable:function(){rc.session.isPrivate()&&rc.session.canEditEnterprise()&&(this.set("selectionMode","single"),this.set("editable",!0))},_navigate:function(a){var b=
this.dateModule,c=this.get("dateInterval");if("month"===c){var c=this.get("startDate"),d=this.get("endDate");1!==c.getDate()&&(c.setDate(1),c.setMonth(c.getMonth()+1));c.setMonth(c.getMonth()+a);d=new Date(c);d.setMonth(d.getMonth()+1);this.set("startDate",c);this.set("endDate",d)}else if(d=this.get("date"),null==d){var c=this.get("startDate"),d=this.get("endDate"),f=b.difference(c,d,"day");1==a?(d=b.add(d,"day",1),this.set("startDate",d),this.set("endDate",b.add(d,"day",f))):(c=b.add(c,"day",-1),
this.set("startDate",b.add(c,"day",-f)),this.set("endDate",c))}else c=this.get("dateInterval"),f=this.get("dateIntervalSteps"),this.set("date",b.add(d,c,a*f))},doViewChange:function(a){if(this.isDirty)if("summary"!==a.toLowerCase()){this.saveDialog.open();var b=this.saveDialog.on("close",k.hitch(this,function(c){switch(c){case y.returnValues.oneOrYes:this.onTriggerSave();this._changeView(a);this.setDirty(!1);break;case y.returnValues.allOrNo:this.setDirty(!1);this.onMakeClean();this._changeView(a);
break;case y.returnValues.none:break;default:console.error(this.declaredClass+" - _navigation(): Invalid Choice",c)}b.remove()}));this.own(b)}else this.onTriggerSave();else this._changeView(a)},_changeView:function(a){if("today"===a||"day"===a||"week"===a)this._previousState&&!this._isSummaryView&&this._showSummaryView(),this.set("date",null),this.set("startDate",null),this.set("endDate",null);switch(a){case "previous":this.previousRange();break;case "next":this.nextRange();break;case "today":this.todayButtonClick();
break;case "day":this.dayButtonClick();break;case "week":this.weekButtonClick();break;case "month":this.monthButtonClick();break;case "summary":this._previousState=!this._previousState;this.setDirty(!1);this.onMakeClean();this._showSummaryView(!1);break;default:console.error("Calendar.js - _changeView(): Invalid button type",a)}},onTriggerSave:function(){r.emit(this,"triggerSave")},onMakeClean:function(){r.emit(this,"makeClean")},_isEventEditable:function(a,b){var c=!1,d=(new t({data:this.items})).get(a.id);
if(d){if(!this.isDirty||this._checkSameAsDirtyEvent(d))c=!0,c=this._checkPermission(d)?this._checkCalendarState(d)?this._checkForFromParent(d)?this._checkEventFromWebView(d):!1:!1:!1;d.editable=c;a.editable=c}return c},_checkSameAsDirtyEvent:function(a){return this.dirtyEvent&&a.eventId===this.dirtyEvent.eventId},_checkCalendarState:function(a){a=!0;if(this._isSummaryView||!this.editable)a=!1;return a},_checkEventFromWebView:function(a){var b=!0,c={2:function(a){return a.value.start.dom!==w.WILDCARD&&
a.value.start.m!==w.WILDCARD&&a.value.start.y!==w.WILDCARD&&a.value.end.dom!==w.WILDCARD&&a.value.end.m!==w.WILDCARD&&a.value.end.y!==w.WILDCARD},3:function(a){return a.value.wom===w.WILDCARD&&a.value.m===w.WILDCARD},4:function(a){return null!==a.start&&null!==a.end},5:function(){return!1}};"undefined"!==typeof c[a.repeatType]&&(b=c[a.repeatType](a.repeat));return b},_checkForFromParent:function(a){var b=!0;if(null!==a.blockId&&(!this.isBlockGroup||-1===a.blockId.indexOf(this._blockIndex))||null===
a.blockId&&Number(a.parentSchedule)!==Number(this._blockIndex))b=!1;return b},_checkPermission:function(a){var b=!0;if(!rc.session.canEditDefault()&&a.repeatType===w.REPEAT_WEEKLY||!rc.session.canEditException()&&a.repeatType!==w.REPEAT_WEEKLY)b=!1;return b},_isEventMovable:function(a,b){var c=x.isAllDay(a.startTime,a.endTime);a.moveEnabled=!(a.repeat.type===w.REPEAT_RANGE&&c);a.moveEnabled&&a.repeat.type===w.REPEAT_WEEKLY&&(a.moveEnabled=!1);return this.isItemEditable(a,b)&&a.moveEnabled},_isEventResizable:function(a,
b){a.resizeEnabled=!0;return this.isItemEditable(a,b)&&a.resizeEnabled},_showSummaryView:function(a,b){!0!==a&&(this._isSummaryView=!this._isSummaryView);var c=this._isSummaryView;this.calendarToolbar.toggleSummaryButton(!c);if(c)this.disable(),this._summaryStore?this._summaryStore.setData([]):this._summaryStore=new q(new t),this.eventManager.decodeSummary(this._colorMap).then(k.hitch(this,function(a){this._summaryStore.setData(a);this.set("store",this._summaryStore);this._setSummaryClass(!0)})),
this.columnView.set("percentOverlap",100);else{rc.session.canEditEnterprise()&&this.enable();var d=this.eventManager.decode(this._colorMap);if(this._editableStore)if(!a||b)this._editableStore.setData(d);else{var f=-1;"undefined"!==typeof d[0]&&(f=d[0].eventId);this._editableStore.query(function(a){return a.eventId===f||-1===a.eventId||"delete"===a.action}).forEach(k.hitch(this,function(a){this._editableStore.remove(a.id)}));for(var g=0;g<d.length;g++)this._editableStore.put(d[g])}else this._editableStore=
new q(new t({data:d}));this.set("store",this._editableStore);this._setSummaryClass(!1);this.columnView.set("percentOverlap",70)}if(!a)this.onChangeSummary(c)},_setSummaryClass:function(a){p.forEach(this.columnView.items,k.hitch(this,function(b){if(a)b.cssClass+=" summary";else{var c=b.cssClass.indexOf(" summary");-1!==c&&(b.cssClass=b.cssClass.substring(0,c))}}))},onChangeSummary:function(a){r.emit(this,"changeSummary",a);return a},_setViewRangeFromDate:function(a){this.calendarToolbar.setViewRange(a,
this.dateInterval)},_setViewRangeFromView:function(a,b,c){this.calendarToolbar.setViewRange(this.currentView.startDate,this.dateInterval,!1,c)},getScheduleInfo:function(){return{valueType:this.eventManager.schedule.valueType,defaultValue:this.eventManager.schedule.value,mnemonic:this.eventManager.schedule.mnemonic,defaultBlock:this.eventManager.schedule.id}},_onCreateEvent:function(a,b,d){if(this.editable&&c.isLeft(d)&&!this.isDirty){d=this.columnView;var f=this.dateModule;a==d?(a=this.floorDate(b,
"minute",d.timeSlotDuration),b=f.add(a,"minute",0===this._increments?d.timeSlotDuration:this._increments)):(a=this.floorToDay(b),b=f.add(a,"day",1));a=this.eventManager.onCreateEvent(a,b);this.setDirty(!0,a);return a}d&&v.stopEvent(d)},_onContextClick:function(a){this.editable?(v.stopEvent(a.triggerEvent),!1!==a.renderer.resizeEnabled&&!1!==a.renderer.moveEnabled&&(this.contextMenu._openMyself({target:a.renderer.domNode,coords:{x:a.triggerEvent.pageX,y:a.triggerEvent.pageY}}),null!==this._contextMenuOpenConnection&&
(this._contextMenuOpenConnection.remove(),this._contextMenuOpenConnection=null),this._contextMenuOpenConnection=h.after(this.contextMenu,"onClose",k.hitch(this,function(){window.setTimeout(k.hitch(this,this.enable),1E3)})))):v.stopEvent(a.triggerEvent)},_onContextDelete:function(){p.forEach(this.selectedItems,function(a){this.onContextDelete(a)},this)},onContextDelete:function(a){r.emit(this,"contextDelete",a);return a},_sortByPriority:function(a,b){var c=0;a.npriority<b.npriority?c=1:a.npriority>
b.npriority?c=-1:null!==a.index&&null!==b.index?a.index>b.index?c=1:a.index<b.index&&(c=-1):null!==a.index&&null===b.index?c=1:null===a.index&&null!==b.index?c=-1:null===a.index&&null===b.index?a.eventId>b.eventId?c=1:a.eventId<b.eventId&&(c=-1):(c=this.dateModule.compare(a.startTime,b.startTime),0===c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime)));return c},onChange:function(){},setCalendarActions:function(a,b){var c,d;for(c=0;c<b.repeat.value.length;c++){var f=!0;for(d=0;d<a.repeat.value.length;d++)if(A.isSameRepeat(b.repeat.value[c],
a.repeat.value[d])){f=!1;break}f&&(b.repeat.value[c].action="add")}for(c=0;c<a.repeat.value.length;c++){f=!0;for(d=0;d<b.repeat.value.length;d++)if(A.isSameRepeat(a.repeat.value[c],b.repeat.value[d])){f=!1;break}f&&(b.repeat.value.push(a.repeat.value[c]),b.repeat.value[b.repeat.value.length-1].action="delete")}},_put:function(a){if(a instanceof Array)return this.putInStore(a,0);this._storeReady=!1;if(a.repeat.type!==w.REPEAT_EXCEPTION){var b=new Date(a.startTime),c=new Date(a.endTime),d=new Date(b.getFullYear(),
b.getMonth(),b.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),0);this.selectedItem&&a.id===this.selectedItem.id&&a.repeat.type===w.REPEAT_RANGE&&this.selectedItem.originalStartTime?(a.startTime=new Date(this.selectedItem.originalStartTime.getFullYear(),this.selectedItem.originalStartTime.getMonth(),this.selectedItem.originalStartTime.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),0),a.endTime=new Date(this.selectedItem.originalStartTime.getFullYear(),this.selectedItem.originalStartTime.getMonth(),
this.selectedItem.originalStartTime.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),0)):d.getTime()<b.getTime()?(a.startTime=d,a.endTime=b):a.endTime=d}return this.putInStore([a],0)},putInStore:function(b,c){c===b.length?this._onStoreReady():a(this.store.put(b[c]),this.putInStore(b,++c))},add:function(a){var b=this.eventManager.buildEvent(a);a.summary=b instanceof Array?b[0].summary:b.summary;this._put(b)},edit:function(a){var b=k.clone(a);this._removeTerminatingEvents(a.eventId);var b=this.eventManager.buildEvent(b),
c=b instanceof Array;if(c)for(var d=0;d<b.length;++d)b[d].repeat.type!==w.REPEAT_CALENDAR&&b[d].repeat.type!==w.REPEAT_RANGE&&this._updateRepeats(b[d]);else b.repeat.type!==w.REPEAT_CALENDAR&&b.repeat.type!==w.REPEAT_RANGE&&this._updateRepeats(b);a.summary=c?b[0].summary:b.summary;this._put(b)},removeFromStore:function(a){try{this.store.remove(a.id)}catch(H){}},remove:function(a,b){try{var c=[],c="all"===b?this.getEventsByEventId(a.eventId):[a];p.forEach(c,function(a){a.action="delete";a.dirty="dirty";
a.endTime=a.startTime});this._put(c);p.forEach(c,function(a){this.updateRenderers(a)},this);this.onChange()}catch(K){}},_onStoreReady:function(){this._storeReady=!0;return this.onStoreReady()},onStoreReady:function(){r.emit(this,"storeReady")},render:function(a,b,c,d,f,g){a.schedule&&a.schedule instanceof Object&&(this.currency=a.currency,this.scheduleTree=a.scheduleTree,this.blockStore=c,this.domScheduleTree=d,this.isBlockGroup=a.isBlockGroup,this._increments=rc.session.canEditDefault()?0:a.minuteIncrement,
this.esData={esName:a.esName,esDataType:a.dataType,esStates:a.stateValues,esSummaryColours:f},this._render(a.schedule,b,f,g))},_removeTerminatingEvents:function(a){this.store.query(k.hitch(this,function(b){return b.repeat.type===w.REPEAT_CALENDAR&&b.eventId===a})).forEach(k.hitch(this,function(a){a.repeat={};this.store.put(a)}))},_render:function(a,b,c,d){this._setIncrements();this._blockIndex=Number(a.id);d&&this._reset();this._buildEventManager(a,this.esData,c);this._colorMap=b;b=a.id!==this._renderedScheduleId;
this._renderedScheduleId=a.id;this._showSummaryView(!0,b);this.calendarToolbar.updateLabel(a.label);var f=r(this.currentView,"renderersLayoutDone",k.hitch(this,function(a){a.hasOwnProperty("effectivePeriod")&&this._styleInactiveSchedules(a.effectivePeriod);f.remove()},a))},_setIncrements:function(){0<this._increments?(this.columnView.set("minDurationSteps",this._increments),this.columnView.set("minDurationUnit","minute")):this._increments=0},_styleInactiveSchedules:function(a){var b=new Date(-1*x.MAX_MILLISECONDS_FROM_EPOCH),
c=new Date(x.MAX_MILLISECONDS_FROM_EPOCH);a.start.m!==w.WILDCARD&&a.start.dom!==w.WILDCARD&&(a.start.y===w.WILDCARD&&(a.start.y=this.viewRange.start.getFullYear()-1900),b=x.bacnetDateToJSDate(a.start),b.setHours(0,0,0,0));a.end.m!==w.WILDCARD&&a.end.dom!==w.WILDCARD&&(a.end.y===w.WILDCARD&&(a.end.y=this.viewRange.end.getFullYear()-1900),c=x.bacnetDateToJSDate(a.end),c.setHours(23,59,59,99));a=[];var d=new Date;if(this.viewRange.start.getTime()<b.getTime())for(d=new Date(this.viewRange.start);d.getTime()<
b.getTime()&&d.getTime()<this.viewRange.end.getTime();)a.push(d.getDate()),d.setDate(d.getDate()+1);if(this.viewRange.end.getTime()>c.getTime()){c.getTime()<this.viewRange.start.getTime()?(d=new Date(this.viewRange.start),d.setHours(23,59,59,99)):d=new Date(c);for(;d.getTime()<this.viewRange.end.getTime();)a.push(d.getDate()),d.setDate(d.getDate()+1);c.getTime()<this.viewRange.start.getTime()&&(d=this.viewRange.start.getDate(),a.splice(0,a.indexOf(d)))}"columns"===this.currentView.viewKind?this._setColumnViewEffectivePeriod(a):
this._setMatrixViewEffectivePeriod(a,b,c)},_setColumnViewEffectivePeriod:function(a){for(var c=[],f=b(".dojoxCalendarColumnHeader table",this.currentView.header)[0],g=b("span",f),h="",f=0;f<g.length&&a.length;f++)g[f]&&(h=g[f].innerHTML.replace(/[^0-9]/gi,""),Number(h)===a[0]&&(c.push(f),a.splice(0,1)));a=b(".dojoxCalendarContainerTable td",this.currentView.scrollContainer);for(f=0;f<a.length;f++)d.toggle(a[f],"inactiveSchedule",-1!==c.indexOf(f))},_setMatrixViewEffectivePeriod:function(a,c,f){f=
[];var g=b("td span span",this.currentView.gridTable),h=0,k=28,l=new Date(this.viewRange.start);1!==l.getDate()?(h=l.getDate(),l.setDate(15),l.setMonth(l.getMonth()+2),l.setDate(0),k=l.getDate(),l.setDate(0),h=l.getDate()-h):(l.setMonth(l.getMonth()+1),l.setDate(0),k=l.getDate());var l=0,n="";if(c.getTime()>=this.viewRange.start.getTime())for(l=0;l<=h&&a.length;l++)g[l]&&(n=g[l].innerHTML.replace(/[^0-9]/gi,""),Number(n)===a[0]&&(f.push(l),a.splice(0,1)));for(;l<=k+h&&a.length;)g[l]&&(n=g[l].innerHTML.replace(/[^0-9]/gi,
""),Number(n)===a[0]&&(f.push(l),a.splice(0,1))),l++;for(;l<g.length&&a.length;)g[l]&&(n=g[l].innerHTML.replace(/[^0-9]/gi,""),Number(n)===a[0]&&(f.push(l),a.splice(0,1))),l++;a=b("td",this.currentView.gridTable);for(l=0;l<a.length;l++)d.toggle(a[l],"inactiveSchedule",-1!==f.indexOf(l))},_updateRepeats:function(a){this.store.query({eventId:a.eventId}).forEach(function(b){b.id!==a.id&&(b.repeat=a.repeat)})},_reset:function(){this._schedule=null;this.store&&this.store.setData([]);if(this.items&&this.items.length)for(var a=
this.items.length-1;0<=a;--a)-1===this.items[a].eventId&&this.items.splice(a,1)},encode:function(){var a=this.getEventsByRepeatType();return this.eventManager.groupedEncode(a)},_buildEventManager:function(a,b,c){this.viewRange=this.calendarToolbar.getCurrentDateRange();this.eventManager?this.eventManager.reset(a,k.clone(this.viewRange),b,c):(h.after(this,"_applyViewChange",k.hitch(this,this._setViewRangeFromView),!0),this.eventManager=new G({schedule:a,viewRange:this.viewRange,esData:b,summaryColours:c}))},
getAllDirtyEvents:function(){var a=this.store.query({dirty:"dirty"}),b=this.getMergedEvents(),c=[];p.forEach(a,k.hitch(this,function(a){this._inArray(a,c)||-1===a.eventId&&"delete"===a.action||c.push(a);a=this.getUniqueIndexFromEvent(a);p.forEach(b[a],k.hitch(this,function(a){this._inArray(a,c)||-1===a.eventId&&"delete"===a.action||c.push(a)}))}));var d={};p.forEach(c,k.hitch(this,function(a){if((a.repeat.type!==w.REPEAT_EXCEPTION||a.repeat.value.y!==w.WILDCARD||a.repeat.value.m!==w.WILDCARD||a.repeat.value.dom!==
w.WILDCARD)&&a.repeat.type!==w.REPEAT_RANGE){var b=this.getUniqueIndexFromEvent(a);d[b]||(d[b]={eventArray:[],hasMerged:!1});a.dontMerge||d[b].eventArray.push(a)}}));for(var f in d)1<d[f].eventArray.length&&d[f].eventArray[0].repeat.type===w.REPEAT_WEEKLY&&this._dirtyDefaultEvents(d[f].eventArray);var g=[];p.forEach(c,k.hitch(this,function(a){"clean"!==a.dirty&&g.push(a)}));return g},_inArray:function(a,b){for(var c=0;c<b.length;c++)if(b[c].action===a.action&&b[c].startTime===a.startTime&&b[c].endTime===
a.endTime&&b[c].startValue===a.startValue&&b[c].endValue===a.endValue)return!0;return!1},areEqual:function(a,b){var c=!1;a.repeat.type===b.repeat.type&&a.startTime.toTimeString()===b.startTime.toTimeString()&&(c=this.getUniqueIndexFromEvent(a)===this.getUniqueIndexFromEvent(a));return c},getUniqueIndexFromEvent:function(a,b){var c,d=null,f=a.label,g=17,g=void 0===a.npriority?"high"===a.priority?2:9:a.npriority;b&&(f=b);if(void 0!==a.repeat.type)switch(a.repeat.type){case w.REPEAT_WEEKLY:d=new F({summaryColours:this.esData.esSummaryColours});
c=a.repeat.value;a.repeat.value instanceof Array&&1==a.repeat.value.length&&(c=a.repeat.value[0]);break;case w.REPEAT_EXCEPTION:d=new C({summaryColours:this.esData.esSummaryColours});c=d.getUniqueIndex(a.repeat.value.y,a.repeat.value.m,a.repeat.value.dom,f,a.schedules,a.blockId,g);break;case w.REPEAT_RANGE:d=new D({summaryColours:this.esData.esSummaryColours});c=d.getUniqueIndex(a.repeat.value.start.y,a.repeat.value.start.m,a.repeat.value.start.dom,f,a.schedules,a.blockId,g);c^=d.getUniqueIndex(a.repeat.value.end.y,
a.repeat.value.end.m,a.repeat.value.end.dom,f,a.schedules,a.blockId,g);break;case w.REPEAT_RECURRENCE:d=new E({summaryColours:this.esData.esSummaryColours});c=d.getUniqueIndex(a.repeat.value.m,a.repeat.value.wom,a.repeat.value.dow,f,a.schedules,a.blockId,g);break;case w.REPEAT_CALENDAR:d=new B({summaryColours:this.esData.esSummaryColours});c=d.getUniqueIndex(a);break;default:console.error(this.declaredClass+" - getUniqueIndexFromEvent: Invalid Repeat Type",a.repeat.type)}return c},getEventsByRepeatType:function(){var a=
this.getAllDirtyEvents(),b={repeatWeekly:[],repeatDate:[],repeatDateRange:[],repeatRecurrence:[],repeatCalendar:[],repeatOverride:[]};p.forEach(a,k.hitch(this,function(a){switch(a.repeat.type){case w.REPEAT_WEEKLY:b.repeatWeekly.push(a);break;case w.REPEAT_EXCEPTION:b.repeatDate.push(a);break;case w.REPEAT_RANGE:b.repeatDateRange.push(a);break;case w.REPEAT_RECURRENCE:b.repeatRecurrence.push(a);break;case w.REPEAT_CALENDAR:b.repeatCalendar.push(a);break;case w.REPEAT_OVERRIDE:b.repeatOverride.push(a);
break;default:console.error("Calendar.js - getEventsByRepeatType: Invalid Repeat Type",a.repeat.type)}}),this);return b},getMergedEvents:function(){var a={};p.forEach(this.store.data,k.hitch(this,function(b){var c=this.getUniqueIndexFromEvent(b);if(void 0!==c){a[c]||(a[c]=[]);if(!1===p.some(a[c],k.hitch(this,function(a){return this.areEqual(a,b)})))a[c].push(b);else if("delete"===b.action)for(var d=0;d<a[c].length;d++)if(1==this.areEqual(a[c][d],b)){a[c][d]=b;break}if(!b.dontMerge)for(var f=this.store.query({eventId:b.eventId}),
d=0;d<f.length;d++)this.getUniqueIndexFromEvent(f[d])===c||f[d].dontMerge||!1!==this.areEqual(b,f[d])||a[c].push(f[d])}}));return a},getEventsByUniqueIdx:function(a,b,c){c=this.store.query({eventId:c});var d=[];p.forEach(c,k.hitch(this,function(c){c.repeat.type===b&&this.getUniqueIndexFromEvent(c)===a&&d.push(c)}));return d},getEventsByEventId:function(a){return this.store.query({eventId:a})},_dirtyDefaultEvents:function(a){for(var b=0;b<a.length;++b)a[b].dirty="dirty"},_setCSSClass:function(a){a=
a.color?a.color:a.summaryColor;var b="whiteFont";try{var c=parseInt(a.substr(1,2),16),d=parseInt(a.substr(3,2),16),f=parseInt(a.substr(5,2),16),b=128<=.2126*c+.7152*d+.0722*f?"blackFont":"whiteFont"}catch(O){}return b},onItemClick:function(a){this._isMonthView&&(this._setDateAttr(a.item.startTime),this.calendarToolbar.doViewChange("day"),this._isMonthView=!1)},setDirty:function(a,b){this.dirtyEvent=(this.isDirty=a)?b:null},destroy:function(){this.inherited(arguments);null!==this._contextMenuOpenConnection&&
(this._contextMenuOpenConnection.remove(),this._contextMenuOpenConnection=null)}})})},"dojox/calendar/Calendar":function(){define("dojo/_base/declare dojo/_base/lang ./CalendarBase ./ColumnView ./ColumnViewSecondarySheet ./VerticalRenderer ./DecorationRenderer ./MatrixView ./HorizontalRenderer ./LabelRenderer ./ExpandRenderer ./Keyboard ./Mouse dojo/text!./templates/Calendar.html dijit/form/Button dijit/Toolbar dijit/ToolbarSeparator".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return p("dojox.calendar.Calendar",
k,{templateString:u,_createDefaultViews:function(){var a=p([g,t,q]),a=p([h,t,q])(m.mixin({secondarySheetClass:a,verticalRenderer:d,horizontalRenderer:r,expandRenderer:b,horizontalDecorationRenderer:l,verticalDecorationRenderer:l},this.columnViewProps)),k=p([f,t,q])(m.mixin({horizontalRenderer:r,horizontalDecorationRenderer:l,labelRenderer:c,expandRenderer:b},this.matrixViewProps));this.columnView=a;this.matrixView=k;a=[a,k];this.installDefaultViewsActions(a);return a},installDefaultViewsActions:function(a){this.matrixView.on("rowHeaderClick",
m.hitch(this,this.matrixViewRowHeaderClick));this.columnView.on("columnHeaderClick",m.hitch(this,this.columnViewColumnHeaderClick))}})})},"dojox/calendar/CalendarBase":function(){define("dojo/_base/declare dojo/_base/sniff dojo/_base/event dojo/_base/lang dojo/_base/array dojo/cldr/supplemental dojo/dom dojo/dom-class dojo/dom-style dojo/dom-construct dojo/dom-geometry dojo/date dojo/date/locale dojo/_base/fx dojo/fx dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./StoreMixin ./StoreManager dojox/widget/_Invalidating dojox/widget/Selection ./time dojo/i18n!./nls/buttons".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D){return p("dojox.calendar.CalendarBase",[v,x,w,z,A,B],{baseClass:"dojoxCalendar",datePackage:t,startDate:null,endDate:null,date:null,minDate:null,maxDate:null,dateInterval:"week",dateIntervalSteps:1,viewContainer:null,firstDayOfWeek:-1,formatItemTimeFunc:null,editable:!0,moveEnabled:!0,resizeEnabled:!0,columnView:null,matrixView:null,columnViewProps:null,matrixViewProps:null,createOnGridClick:!1,createItemFunc:null,currentView:null,_currentViewIndex:-1,
views:null,_calendar:"gregorian",constructor:function(a){this.views=[];this.invalidatingProperties="store items startDate endDate views date minDate maxDate dateInterval dateIntervalSteps firstDayOfWeek".split(" ");a=a||{};this._calendar=a.datePackage?a.datePackage.substr(a.datePackage.lastIndexOf(".")+1):this._calendar;this.dateModule=a.datePackage?h.getObject(a.datePackage,!1):t;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?h.getObject(a.datePackage+".locale",
!1):q;this.invalidateRendering();this.storeManager=new y({owner:this,_ownerItemsProperty:"items"});this.storeManager.on("layoutInvalidated",h.hitch(this,this._refreshItemsRendering));this.storeManager.on("renderersInvalidated",h.hitch(this,this._updateRenderers));this.storeManager.on("dataLoaded",h.hitch(this,function(a){this.set("items",a)}));this.decorationStoreManager=new y({owner:this,_ownerItemsProperty:"decorationItems"});this.decorationStoreManager.on("layoutInvalidated",h.hitch(this,this._refreshDecorationItemsRendering));
this.decorationStoreManager.on("dataLoaded",h.hitch(this,function(a){this.set("decorationItems",a)}))},buildRendering:function(){this.inherited(arguments);null!=this.views&&0!=this.views.length||this.set("views",this._createDefaultViews())},_applyAttributes:function(){this._applyAttr=!0;this.inherited(arguments);delete this._applyAttr},_setStartDateAttr:function(a){this._set("startDate",a);this._startDateChanged=this._timeRangeInvalidated=!0},_setEndDateAttr:function(a){this._set("endDate",a);this._endDateChanged=
this._timeRangeInvalidated=!0},_setDateAttr:function(a){this._set("date",a);this._dateChanged=this._timeRangeInvalidated=!0},_setDateIntervalAttr:function(a){this._set("dateInterval",a);this._timeRangeInvalidated=!0},_setDateIntervalStepsAttr:function(a){this._set("dateIntervalSteps",a);this._timeRangeInvalidated=!0},_setFirstDayOfWeekAttr:function(a){this._set("firstDayOfWeek",a);null!=this.get("date")&&"week"==this.get("dateInterval")&&(this._timeRangeInvalidated=!0)},_setTextDirAttr:function(a){g.forEach(this.views,
function(b){b.set("textDir",a)})},refreshRendering:function(){this.inherited(arguments);this._validateProperties()},_refreshItemsRendering:function(){this.currentView&&this.currentView._refreshItemsRendering()},_updateRenderers:function(a){this.currentView&&this.currentView.updateRenderers(a)},_refreshDecorationItemsRendering:function(){this.currentView&&this.currentView._refreshDecorationItemsRendering()},resize:function(a){a&&b.setMarginBox(this.domNode,a);this.currentView&&this.currentView.resize()},
_validateProperties:function(){var a=this.dateModule,b=this.get("startDate"),c=this.get("endDate"),d=this.get("date");(-1>this.firstDayOfWeek||6<this.firstDayOfWeek)&&this._set("firstDayOfWeek",0);var f=this.get("minDate"),k=this.get("maxDate");f&&k&&0<a.compare(f,k)&&(this._set("minDate",k),this._set("maxDate",f));null!=d||null==b&&null==c?(null==this.date&&(this._set("date",new this.dateClassObj),this._timeRangeInvalidated=!0),b=this.get("dateInterval"),"day"!=b&&"week"!=b&&"month"!=b&&(this._set("dateInterval",
"day"),this._timeRangeInvalidated=!0),b=this.get("dateIntervalSteps"),h.isString(b)&&(b=parseInt(b),this._set("dateIntervalSteps",b)),0>=b&&(this.set("dateIntervalSteps",1),this._timeRangeInvalidated=!0)):(null==b&&(b=new this.dateClassObj,this._set("startDate",b),this._timeRangeInvalidated=!0),null==c&&(c=new this.dateClassObj,this._set("endDate",c),this._timeRangeInvalidated=!0),0<a.compare(b,c)&&(c=a.add(b,"day",1),this._set("endDate",c),this._timeRangeInvalidated=!0));if(this._timeRangeInvalidated)if(this._timeRangeInvalidated=
!1,b=this.computeTimeInterval(),null==this._timeInterval||0!=a.compare(this._timeInterval[0],b[0])||0!=a.compare(this._timeInterval[1],b[1])){if(this._dateChanged)this._lastValidDate=this.get("date"),this._dateChanged=!1;else if(this._startDateChanged||this._endDateChanged)this._lastValidStartDate=this.get("startDate"),this._lastValidEndDate=this.get("endDate"),this._endDateChanged=this._startDateChanged=!1;this.onTimeIntervalChange({oldStartTime:null==this._timeInterval?null:this._timeInterval[0],
oldEndTime:null==this._timeInterval?null:this._timeInterval[1],startTime:b[0],endTime:b[1]});this._timeInterval=b;a=this.dateModule.difference(this._timeInterval[0],this._timeInterval[1],"day");c=this._computeCurrentView(b[0],b[1],a);d=g.indexOf(this.views,c);null!=c&&-1!=d&&this._performViewTransition(c,d,b,a)}else if(this._dateChanged)this._dateChanged=!1,null!=this.lastValidDate&&this._set("date",this.lastValidDate);else if(this._startDateChanged||this._endDateChanged)this._endDateChanged=this._startDateChanged=
!1,this._set("startDate",this._lastValidStartDate),this._set("endDate",this._lastValidEndDate)},_performViewTransition:function(a,b,c,d){var f=this.currentView;if(this.animateRange&&(!m("ie")||8<m("ie")))if(f){f.beforeDeactivate();var g=this.isLeftToRight(),k="left"==this._animRangeInDir||null==this._animRangeInDir,l="left"==this._animRangeOutDir||null==this._animRangeOutDir;this._animateRange(this.currentView.domNode,l&&g,!1,0,l?-100:100,h.hitch(this,function(){f.afterDeactivate();a.beforeActivate();
this.animateRangeTimer=setTimeout(h.hitch(this,function(){this._applyViewChange(a,b,c,d);this._animateRange(this.currentView.domNode,k&&g,!0,k?-100:100,0,function(){a.afterActivate()});this._animRangeOutDir=this._animRangeInDir=null}),100)}))}else a.beforeActivate(),this._applyViewChange(a,b,c,d),a.afterActivate();else f&&f.beforeDeactivate(),a.beforeActivate(),this._applyViewChange(a,b,c,d),f&&f.afterDeactivate(),a.afterActivate()},onViewConfigurationChange:function(a){},_applyViewChange:function(a,
b,c,d){this._configureView(a,b,c,d);this.onViewConfigurationChange(a);b!=this._currentViewIndex&&(null==this.currentView?(a.set("items",this.items),a.set("decorationItems",this.decorationItems),this.set("currentView",a)):null==this.items||0==this.items.length?(this.set("currentView",a),this.animateRange&&(!m("ie")||8<m("ie"))&&r.set(this.currentView.domNode,"opacity",0),a.set("items",this.items),a.set("decorationItems",this.decorationItems)):(this.currentView=a,a.set("items",this.items),a.set("decorationItems",
this.decorationItems),this.set("currentView",a),this.animateRange&&(!m("ie")||8<m("ie"))&&r.set(this.currentView.domNode,"opacity",0)))},_timeInterval:null,computeTimeInterval:function(){var a=this.get("date"),b=this.get("minDate"),c=this.get("maxDate"),d=this.dateModule;if(null==a){var a=this.get("startDate"),f=d.add(this.get("endDate"),"day",1);if(null!=b||null!=c){var g=this.dateModule.difference(a,f,"day");0<d.compare(b,a)&&(a=b,f=d.add(a,"day",g));0>d.compare(c,f)&&(f=c,a=d.add(f,"day",-g));
0<d.compare(b,a)&&(a=b,f=c)}return[this.floorToDay(a),this.floorToDay(f)]}a=this._computeTimeIntervalImpl(a);null!=b&&(b=this._computeTimeIntervalImpl(b),0<d.compare(b[0],a[0])&&(a=b));null!=c&&(c=this._computeTimeIntervalImpl(c),0>d.compare(c[1],a[1])&&(a=c));return a},_computeTimeIntervalImpl:function(a){var b=this.dateModule;a=this.floorToDay(a);var c=this.get("dateInterval"),d=this.get("dateIntervalSteps");switch(c){case "day":b=b.add(a,"day",d);break;case "week":a=this.floorToWeek(a);b=b.add(a,
"week",d);break;case "month":a.setDate(1);b=b.add(a,"month",d);break;default:b=b.add(a,"day",1)}return[a,b]},onTimeIntervalChange:function(a){},views:null,_setViewsAttr:function(a){if(!this._applyAttr)for(var b=0;b<this.views.length;b++)this._onViewRemoved(this.views[b]);if(null!=a)for(b=0;b<a.length;b++)this._onViewAdded(a[b]);this._set("views",null==a?[]:a.concat())},_getViewsAttr:function(){return this.views.concat()},_createDefaultViews:function(){},addView:function(a,b){if(0>=b||b>this.views.length)b=
this.views.length;this.views.splice(b,a);this._onViewAdded(a)},removeView:function(a){0>index||index>=this.views.length||(this._onViewRemoved(this.views[index]),this.views.splice(index,1))},_onViewAdded:function(a){a.owner=this;a.buttonContainer=this.buttonContainer;a._calendar=this._calendar;a.datePackage=this.datePackage;a.dateModule=this.dateModule;a.dateClassObj=this.dateClassObj;a.dateLocaleModule=this.dateLocaleModule;r.set(a.domNode,"display","none");f.add(a.domNode,"view");c.place(a.domNode,
this.viewContainer);this.onViewAdded(a)},onViewAdded:function(a){},_onViewRemoved:function(a){a.owner=null;a.buttonContainer=null;f.remove(a.domNode,"view");this.viewContainer.removeChild(a.domNode);this.onViewRemoved(a)},onViewRemoved:function(a){},_setCurrentViewAttr:function(a){var b=g.indexOf(this.views,a);if(-1!=b){var c=this.get("currentView");this._currentViewIndex=b;this._set("currentView",a);this._showView(c,a);this.onCurrentViewChange({oldView:c,newView:a})}},_getCurrentViewAttr:function(){return this.views[this._currentViewIndex]},
onCurrentViewChange:function(a){},_configureView:function(a,b,c,d){b=this.dateModule;if("columns"==a.viewKind)a.set("startDate",c[0]),a.set("columnCount",d);else if("matrix"==a.viewKind)if(7<d){var f=this.floorToWeek(c[0]);d=this.floorToWeek(c[1]);0!=b.compare(d,c[1])&&(d=this.dateModule.add(d,"week",1));d=this.dateModule.difference(f,d,"day");a.set("startDate",f);a.set("columnCount",7);a.set("rowCount",Math.ceil(d/7));a.set("refStartTime",c[0]);a.set("refEndTime",c[1])}else a.set("startDate",c[0]),
a.set("columnCount",d),a.set("rowCount",1),a.set("refStartTime",null),a.set("refEndTime",null)},_computeCurrentView:function(a,b,c){return 7>=c?this.columnView:this.matrixView},matrixViewRowHeaderClick:function(a){var b=this.matrixView.getExpandedRowIndex();if(b==a.index)this.matrixView.collapseRow();else if(-1==b)this.matrixView.expandRow(a.index);else{var c=this.matrixView.on("expandAnimationEnd",h.hitch(this,function(){c.remove();this.matrixView.expandRow(a.index)}));this.matrixView.collapseRow()}},
columnViewColumnHeaderClick:function(a){0==this.dateModule.compare(a.date,this._timeInterval[0])&&"day"==this.dateInterval&&1==this.dateIntervalSteps?this.set("dateInterval","week"):(this.set("date",a.date),this.set("dateInterval","day"),this.set("dateIntervalSteps",1))},viewChangeDuration:0,_showView:function(a,b){null!=a&&r.set(a.domNode,"display","none");null!=b&&(r.set(b.domNode,"display","block"),b.resize(),(!m("ie")||7<m("ie"))&&r.set(b.domNode,"opacity","1"))},_setItemsAttr:function(a){this._set("items",
a);this.currentView&&(this.currentView.set("items",a),this._isEditing||this.currentView.invalidateRendering())},_setDecorationItemsAttr:function(a){this._set("decorationItems",a);this.currentView&&(this.currentView.set("decorationItems",a),this.currentView.invalidateRendering())},_setDecorationStoreAttr:function(a){this._set("decorationStore",a);this.decorationStore=a;this.decorationStoreManager.set("store",a)},floorToDay:function(a,b){return C.floorToDay(a,b,this.dateClassObj)},floorToWeek:function(a){return C.floorToWeek(a,
this.dateClassObj,this.dateModule,this.firstDayOfWeek,this.locale)},newDate:function(a){return C.newDate(a,this.dateClassObj)},isToday:function(a){return C.isToday(a,this.dateClassObj)},isStartOfDay:function(a){return C.isStartOfDay(a,this.dateClassObj,this.dateModule)},floorDate:function(a,b,c,d){return C.floor(a,b,c,d,this.classFuncObj)},isOverlapping:function(a,b,c,d,f,g){return C.isOverlapping(a,b,c,d,f,g)},animateRange:!0,animationRangeDuration:400,_animateRange:function(b,c,d,f,g,h){this.animateRangeTimer&&
(clearTimeout(this.animateRangeTimer),delete this.animateRangeTimer);c=d?u.fadeIn:u.fadeOut;r.set(b,{left:f+"px",right:-f+"px"});a.combine([u.animateProperty({node:b,properties:{left:g,right:-g},duration:this.animationRangeDuration/2,onEnd:h}),c({node:b,duration:this.animationRangeDuration/2})]).play()},_animRangeOutDir:null,_animRangeOutDir:null,nextRange:function(){this._animRangeOutDir="left";this._animRangeInDir="right";this._navigate(1)},previousRange:function(){this._animRangeOutDir="right";
this._animRangeInDir="left";this._navigate(-1)},_navigate:function(a){var b=this.get("date"),c=this.dateModule;if(null==b){var b=this.get("startDate"),d=this.get("endDate"),f=c.difference(b,d,"day");1==a?(d=c.add(d,"day",1),this.set("startDate",d),this.set("endDate",c.add(d,"day",f))):(b=c.add(b,"day",-1),this.set("startDate",c.add(b,"day",-f)),this.set("endDate",b))}else d=this.get("dateInterval"),f=this.get("dateIntervalSteps"),this.set("date",c.add(b,d,a*f))},goToday:function(){this.set("date",
this.floorToDay(new this.dateClassObj,!0));this.set("dateInterval","day");this.set("dateIntervalSteps",1)},postCreate:function(){this.inherited(arguments);this.configureButtons()},configureButtons:function(){var a=!this.isLeftToRight();this.previousButton&&(this.previousButton.set("label",D[a?"nextButton":"previousButton"]),this.own(n(this.previousButton,"click",h.hitch(this,this.previousRange))));this.nextButton&&(this.nextButton.set("label",D[a?"previousButton":"nextButton"]),this.own(n(this.nextButton,
"click",h.hitch(this,this.nextRange))));a&&this.previousButton&&this.nextButton&&(a=this.previousButton,this.previousButton=this.nextButton,this.nextButton=a);this.todayButton&&(this.todayButton.set("label",D.todayButton),this.own(n(this.todayButton,"click",h.hitch(this,this.todayButtonClick))));this.dayButton&&(this.dayButton.set("label",D.dayButton),this.own(n(this.dayButton,"click",h.hitch(this,this.dayButtonClick))));this.weekButton&&(this.weekButton.set("label",D.weekButton),this.own(n(this.weekButton,
"click",h.hitch(this,this.weekButtonClick))));this.fourDaysButton&&(this.fourDaysButton.set("label",D.fourDaysButton),this.own(n(this.fourDaysButton,"click",h.hitch(this,this.fourDaysButtonClick))));this.monthButton&&(this.monthButton.set("label",D.monthButton),this.own(n(this.monthButton,"click",h.hitch(this,this.monthButtonClick))))},todayButtonClick:function(a){this.goToday()},dayButtonClick:function(a){null==this.get("date")&&this.set("date",this.floorToDay(new this.dateClassObj,!0));this.set("dateInterval",
"day");this.set("dateIntervalSteps",1)},weekButtonClick:function(a){this.set("dateInterval","week");this.set("dateIntervalSteps",1)},fourDaysButtonClick:function(a){this.set("dateInterval","day");this.set("dateIntervalSteps",4)},monthButtonClick:function(a){this.set("dateInterval","month");this.set("dateIntervalSteps",1)},updateRenderers:function(a,b){this.currentView&&this.currentView.updateRenderers(a,b)},getIdentity:function(a){return a?a.id:null},_setHoveredItem:function(a,b){if(this.hoveredItem&&
a&&this.hoveredItem.id!=a.id||null==a||null==this.hoveredItem){var c=this.hoveredItem;this.hoveredItem=a;this.updateRenderers([c,this.hoveredItem],!0);a&&b&&this.currentView._updateEditingCapabilities(a._item?a._item:a,b)}},hoveredItem:null,isItemHovered:function(a){return null!=this.hoveredItem&&this.hoveredItem.id==a.id},isItemEditable:function(a,b){return this.editable},isItemMoveEnabled:function(a,b){return this.isItemEditable(a,b)&&this.moveEnabled},isItemResizeEnabled:function(a,b){return this.isItemEditable(a,
b)&&this.resizeEnabled},onGridClick:function(a){},onGridDoubleClick:function(a){},onItemClick:function(a){},onItemDoubleClick:function(a){},onItemContextMenu:function(a){},onItemEditBegin:function(a){},onItemEditEnd:function(a){},onItemEditBeginGesture:function(a){},onItemEditMoveGesture:function(a){},onItemEditResizeGesture:function(a){},onItemEditEndGesture:function(a){},onItemRollOver:function(a){},onItemRollOut:function(a){},onColumnHeaderClick:function(a){},onRowHeaderClick:function(a){},onExpandRendererClick:function(a){},
_onRendererCreated:function(a){this.onRendererCreated(a)},onRendererCreated:function(a){},_onRendererRecycled:function(a){this.onRendererRecycled(a)},onRendererRecycled:function(a){},_onRendererReused:function(a){this.onRendererReused(a)},onRendererReused:function(a){},_onRendererDestroyed:function(a){this.onRendererDestroyed(a)},onRendererDestroyed:function(a){},_onRenderersLayoutDone:function(a){this.onRenderersLayoutDone(a)},onRenderersLayoutDone:function(a){}})})},"dojox/calendar/ColumnView":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/sniff dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/on dojo/date dojo/date/locale dojo/query ./SimpleColumnView dojo/text!./templates/ColumnView.html ./ColumnViewSecondarySheet".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x){return m("dojox.calendar.ColumnView",n,{templateString:v,baseClass:"dojoxCalendarColumnView",secondarySheetClass:x,secondarySheetProps:null,headerPadding:3,_showSecondarySheet:!0,buildRendering:function(){this.inherited(arguments);if(this.secondarySheetNode){var a=h.mixin({owner:this},this.secondarySheetProps);this.secondarySheet=new this.secondarySheetClass(a,this.secondarySheetNode);this.secondarySheetNode=this.secondarySheet.domNode}},destroy:function(a){this.secondarySheet&&
this.secondarySheet.destroy(a);this.inherited(arguments)},_setVisibility:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet._setVisibility(a)},resize:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.resize()},invalidateLayout:function(){this._layoutRenderers(this.renderData);this.secondarySheet&&this.secondarySheet._layoutRenderers(this.secondarySheet.renderData)},onRowHeaderClick:function(a){},_setSubColumnsAttr:function(a){this.get("subColumns")!=
a&&(this._secondaryHeightInvalidated=!0);this._set("subColumns",a)},refreshRendering:function(a){this.inherited(arguments);if(this._secondaryHeightInvalidated){this._secondaryHeightInvalidated=!1;var b=c.getMarginBox(this.secondarySheetNode).h;this.resizeSecondarySheet(b)}a&&this.secondarySheet&&this.secondarySheet.refreshRendering(!0)},resizeSecondarySheet:function(a){if(this.secondarySheetNode){var b=c.getMarginBox(this.header).h;r.set(this.secondarySheetNode,"height",a+"px");this.secondarySheet._resizeHandler(null,
!0);a=a+b+this.headerPadding;this.subHeader&&this.subColumns&&(r.set(this.subHeader,"top",a+"px"),a+=c.getMarginBox(this.subHeader).h);r.set(this.scrollContainer,"top",a+"px");this.vScrollBar&&r.set(this.vScrollBar,"top",a+"px")}},updateRenderers:function(a,b){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.updateRenderers(a,b)},_setItemsAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("items",a)},_setDecorationItemsAttr:function(a){this.inherited(arguments);
this.secondarySheet&&this.secondarySheet.set("decorationItems",a)},_setStartDateAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("startDate",a)},_setColumnCountAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("columnCount",a)},_setHorizontalRendererAttr:function(a){this.secondarySheet&&this.secondarySheet.set("horizontalRenderer",a)},_getHorizontalRendererAttr:function(){return this.secondarySheet?this.secondarySheet.get("horizontalRenderer"):
null},_setHorizontalDecorationRendererAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("horizontalDecorationRenderer",a)},_getHorizontalRendererAttr:function(){return this.secondarySheet?this.secondarySheet.get("horizontalDecorationRenderer"):null},_setExpandRendererAttr:function(a){this.secondarySheet&&this.secondarySheet.set("expandRenderer",a)},_getExpandRendererAttr:function(){return this.secondarySheet?this.secondarySheet.get("expandRenderer"):null},_setTextDirAttr:function(a){this.secondarySheet.set("textDir",
a);this._set("textDir",a)},_defaultItemToRendererKindFunc:function(a){return a.allDay?null:"vertical"},getSecondarySheet:function(){return this.secondarySheet},_onGridTouchStart:function(a){this.inherited(arguments);this._doEndItemEditing(this.secondarySheet,"touch")},_onGridMouseDown:function(a){this.inherited(arguments);this._doEndItemEditing(this.secondarySheet,"mouse")},_configureScrollBar:function(a){this.inherited(arguments);if(this.secondarySheetNode){var b=this.isLeftToRight()?!0:"right"==
this.scrollBarRTLPosition;r.set(this.secondarySheetNode,b?"right":"left",a.scrollbarWidth+"px");r.set(this.secondarySheetNode,b?"left":"right","0");p.forEach(this.secondarySheet._hScrollNodes,function(b){f[a.hScrollBarEnabled?"add":"remove"](b.parentNode,"dojoxCalendarHorizontalScroll")},this)}},_configureHScrollDomNodes:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet._configureHScrollDomNodes&&this.secondarySheet._configureHScrollDomNodes(a)},_setHScrollPosition:function(a){this.inherited(arguments);
this.secondarySheet&&this.secondarySheet._setHScrollPosition(a)},_refreshItemsRendering:function(){this.inherited(arguments);if(this.secondarySheet){var a=this.secondarySheet.renderData;this.secondarySheet._computeVisibleItems(a);this.secondarySheet._layoutRenderers(a)}},_layoutRenderers:function(a){this.secondarySheet._domReady||(this.secondarySheet._domReady=!0,this.secondarySheet._layoutRenderers(this.secondarySheet.renderData));this.inherited(arguments)},_layoutDecorationRenderers:function(a){this.secondarySheet._decDomReady||
(this.secondarySheet._decDomReady=!0,this.secondarySheet._layoutDecorationRenderers(this.secondarySheet.renderData));this.inherited(arguments)},invalidateRendering:function(){this.secondarySheet&&this.secondarySheet.invalidateRendering();this.inherited(arguments)}})})},"dojox/calendar/SimpleColumnView":function(){define("./ViewBase dijit/_TemplatedMixin ./_ScrollBarBase dojo/text!./templates/ColumnView.html dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/array dojo/_base/sniff dojo/_base/fx dojo/_base/html dojo/on dojo/dom dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/mouse dojo/query dojox/html/metrics".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z){return g("dojox.calendar.SimpleColumnView",[p,m],{baseClass:"dojoxCalendarColumnView",templateString:h,viewKind:"columns",_setTabIndexAttr:"domNode",renderData:null,startDate:null,columnCount:7,subColumns:null,minHours:8,maxHours:18,hourSize:100,timeSlotDuration:15,rowHeaderGridSlotDuration:60,rowHeaderLabelSlotDuration:60,rowHeaderLabelOffset:2,rowHeaderFirstLabelOffset:2,verticalRenderer:null,verticalDecorationRenderer:null,minColumnWidth:-1,percentOverlap:70,
horizontalGap:4,_showSecondarySheet:!1,_columnHeaderHandlers:null,constructor:function(){this.invalidatingProperties="columnCount startDate minHours maxHours hourSize verticalRenderer verticalDecorationRenderer rowHeaderTimePattern columnHeaderDatePattern timeSlotDuration rowHeaderGridSlotDuration rowHeaderLabelSlotDuration rowHeaderLabelOffset rowHeaderFirstLabelOffset percentOverlap horizontalGap scrollBarRTLPosition itemToRendererKindFunc layoutPriorityFunction formatItemTimeFunc textDir items subColumns minColumnWidth".split(" ");
this._columnHeaderHandlers=[]},destroy:function(a){this._cleanupColumnHeader();this.scrollBar&&this.scrollBar.destroy(a);this.inherited(arguments)},_scrollBar_onScroll:function(a){this._setScrollPosition(a)},_hscrollBar_onScroll:function(a){this._setHScrollPosition(a)},buildRendering:function(){this.inherited(arguments);this.vScrollBar&&(this.scrollBar=new k({content:this.vScrollBarContent},this.vScrollBar),this.scrollBar.on("scroll",l.hitch(this,this._scrollBar_onScroll)));this.hScrollBar&&(this.hScrollBarW=
new k({content:this.hScrollBarContent,direction:"horizontal",value:0},this.hScrollBar),this.hScrollBarW.on("scroll",l.hitch(this,this._hscrollBar_onScroll)),this._hScrollNodes=[this.columnHeaderTable,this.subColumnHeaderTable,this.gridTable,this.itemContainerTable]);this._viewHandles.push(t(this.scrollContainer,x.wheel,dojo.hitch(this,this._mouseWheelScrollHander)))},postscript:function(){this.inherited(arguments);this._initialized=!0;this.invalidRendering||this.refreshRendering()},_setVerticalRendererAttr:function(a){this._destroyRenderersByKind("vertical");
this._set("verticalRenderer",a)},_createRenderData:function(){var a={};a.minHours=this.get("minHours");a.maxHours=this.get("maxHours");a.hourSize=this.get("hourSize");a.hourCount=a.maxHours-a.minHours;a.slotDuration=this.get("timeSlotDuration");a.rowHeaderGridSlotDuration=this.get("rowHeaderGridSlotDuration");a.slotSize=Math.ceil(a.hourSize/(60/a.slotDuration));a.hourSize=60/a.slotDuration*a.slotSize;a.sheetHeight=a.hourSize*a.hourCount;this._rowHeaderWidth||(this._rowHeaderWidth=n.getMarginBox(this.rowHeader).w);
a.rowHeaderWidth=this._rowHeaderWidth;var b=z.getScrollbar();a.scrollbarWidth=b.w+1;a.scrollbarHeight=b.h+1;a.dateLocaleModule=this.dateLocaleModule;a.dateClassObj=this.dateClassObj;a.dateModule=this.dateModule;a.dates=[];a.columnCount=this.get("columnCount");a.subColumns=this.get("subColumns");a.subColumnCount=a.subColumns?a.subColumns.length:1;a.hScrollPaneWidth=n.getMarginBox(this.grid).w;a.minSheetWidth=0>this.minColumnWidth?-1:this.minColumnWidth*a.subColumnCount*a.columnCount;a.hScrollBarEnabled=
0<this.minColumnWidth&&a.hScrollPaneWidth<a.minSheetWidth;b=this.get("startDate");null==b&&(b=new a.dateClassObj);this.startDate=b=this.floorToDay(b,!1,a);for(var c=0;c<a.columnCount;c++)a.dates.push(b),b=this.addAndFloor(b,"day",1);a.startTime=new a.dateClassObj(a.dates[0]);a.startTime.setHours(a.minHours);a.endTime=new a.dateClassObj(a.dates[a.columnCount-1]);a.endTime.setHours(a.maxHours);this.displayedItemsInvalidated&&!this._isEditing?a.items=this.storeManager._computeVisibleItems(a):this.renderData&&
(a.items=this.renderData.items);this.displayedDecorationItemsInvalidated?a.decorationItems=this.decorationStoreManager._computeVisibleItems(a):this.renderData&&(a.decorationItems=this.renderData.decorationItems);return a},_validateProperties:function(){this.inherited(arguments);var a=this.minHours;if(0>a||23<a||isNaN(a))this.minHours=0;a=this.maxHours;if(1>a||36<a||isNaN(a))this.minHours=36;this.minHours>this.maxHours&&(a=this.maxHours,this.maxHours=this.minHours,this.minHours=a);1>this.maxHours-
this.minHours&&(this.minHours=0,this.maxHours=24);if(1>this.columnCount||isNaN(this.columnCount))this.columnCount=1;a=this.percentOverlap;if(0>a||100<a||isNaN(a))this.percentOverlap=70;if(5>this.hourSize||isNaN(this.hourSize))this.hourSize=10;a=this.timeSlotDuration;if(1>a||60<a||isNaN(a))this.timeSlotDuration=15},_setStartDateAttr:function(a){this.displayedItemsInvalidated=!0;this._set("startDate",a)},_setColumnCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("columnCount",a)},__fixEvt:function(a){a.sheet=
"primary";a.source=this;return a},rowHeaderTimePattern:null,_formatRowHeaderLabel:function(a){return this.renderData.dateLocaleModule.format(a,{selector:"time",timePattern:this.rowHeaderTimePattern})},columnHeaderDatePattern:null,_formatColumnHeaderLabel:function(a){return this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:this.columnHeaderDatePattern,formatLength:"medium"})},scrollBarRTLPosition:"left",_getStartTimeOfDay:function(){var a=(this.get("maxHours")-this.get("minHours"))*
this._getScrollPosition()/this.renderData.sheetHeight;return{hours:this.renderData.minHours+Math.floor(a),minutes:60*(a-Math.floor(a))}},_getEndTimeOfDay:function(){var a=(this.get("maxHours")-this.get("minHours"))*(this._getScrollPosition()+this.scrollContainer.offsetHeight)/this.renderData.sheetHeight;return{hours:this.renderData.minHours+Math.floor(a),minutes:60*(a-Math.floor(a))}},startTimeOfDay:0,_setStartTimeOfDayAttr:function(a){this.renderData?this._setStartTimeOfDay(a.hours,a.minutes,a.duration,
a.easing):this._startTimeOfDayInvalidated=!0;this._set("startTimeOfDay",a)},_getStartTimeOfDayAttr:function(){return this.renderData?this._getStartTimeOfDay():this._get("startTimeOfDay")},_setStartTimeOfDay:function(a,b,c,d){var f=this.renderData;a=a||f.minHours;b=b||0;0>b?b=0:59<b&&(b=59);0>a?a=0:a>f.maxHours&&(a=f.maxHours);a=60*a+b;b=60*f.minHours;var g=60*f.maxHours;a<b?a=b:a>g&&(a=g);a=(a-b)*f.sheetHeight/(g-b);a=Math.min(f.sheetHeight-this.scrollContainer.offsetHeight,a);this._scrollToPosition(a,
c||0,d)},_scrollToPosition:function(a,b,d){if(b){this._scrollAnimation&&this._scrollAnimation.stop();var f=this._getScrollPosition();this._scrollAnimation=new c.Animation({curve:[f,a],duration:Math.abs((a-f)*b/this.renderData.sheetHeight),easing:d,onAnimate:l.hitch(this,function(a){this._setScrollImpl(a)})});this._scrollAnimation.play()}else this._setScrollImpl(a)},_setScrollImpl:function(a){this._setScrollPosition(a);this.scrollBar&&this.scrollBar.set("value",a)},ensureVisibility:function(a,b,c,
d,f){d=void 0==d?this.renderData.slotDuration:d;if(this.scrollable&&this.autoScroll){a=60*a.getHours()+a.getMinutes()-d;b=60*b.getHours()+b.getMinutes()+d;d=this._getStartTimeOfDay();var g=this._getEndTimeOfDay();d=60*d.hours+d.minutes;var g=60*g.hours+g.minutes,h=!1,k=null;switch(c){case "start":h=a>=d&&a<=g;k=a;break;case "end":h=b>=d&&b<=g;k=b-(g-d);break;case "both":h=a>=d&&b<=g,k=a}h||this._setStartTimeOfDay(Math.floor(k/60),k%60,f)}},scrollView:function(a){var b=this._getStartTimeOfDay(),b=
60*b.hours+b.minutes+a*this.timeSlotDuration;this._setStartTimeOfDay(Math.floor(b/60),b%60)},scrollViewHorizontal:function(a){this._setHScrollPosition(this._getHScrollPosition()+a*this.minColumnWidth);this.hScrollBarW&&this.hScrollBarW.set("value",this._getHScrollPosition())},_hScrollNodes:null,_setHScrollPositionImpl:function(b,c,d){var g=c?null:"translateX(-"+b+"px)";f.forEach([this.columnHeaderTable,this.subColumnHeaderTable,this.gridTable,this.itemContainerTable],function(f){c?(f.scrollLeft=b,
a.set(f,"left",-b+"px")):a.set(f,d,g)},this)},_mouseWheelScrollHander:function(a){this.renderData.hScrollBarEnabled&&a.altKey?this.scrollViewHorizontal(0<a.wheelDelta?-1:1):this.scrollView(0<a.wheelDelta?-1:1);d.stop(a)},refreshRendering:function(){if(this._initialized){this._validateProperties();var a=this.renderData,b=this._createRenderData();this.renderData=b;this._createRendering(b,a);this._layoutDecorationRenderers(b);this._layoutRenderers(b)}},_createRendering:function(b,c){a.set(this.sheetContainer,
"height",b.sheetHeight+"px");this._configureVisibleParts(b);this._configureScrollBar(b);this._buildColumnHeader(b,c);this._buildSubColumnHeader(b,c);this._buildRowHeader(b,c);this._buildGrid(b,c);this._buildItemContainer(b,c);this._layoutTimeIndicator(b);this._commitProperties(b)},_configureVisibleParts:function(b){this.secondarySheetNode&&a.set(this.secondarySheetNode,"display",this._showSecondarySheet?"block":"none");u[null==this.subColumns?"remove":"add"](this.domNode,"subColumns");u[this._showSecondarySheet?
"add":"remove"](this.domNode,"secondarySheet")},_commitProperties:function(a){this._startTimeOfDayInvalidated&&(this._startTimeOfDayInvalidated=!1,a=this.startTimeOfDay,null!=a&&this._setStartTimeOfDay(a.hours,void 0==a.minutes?0:a.minutes))},_configureScrollBar:function(b){r("ie")&&this.scrollBar&&a.set(this.vScrollBar,"width",b.scrollbarWidth+1+"px");var c=this.isLeftToRight()?!0:"right"==this.scrollBarRTLPosition,d=c?"right":"left",g=c?"left":"right";this.scrollBar&&(this.scrollBar.set("maximum",
b.sheetHeight),a.set(this.vScrollBar,d,0),a.set(this.vScrollBar,c?"left":"right","auto"),a.set(this.vScrollBar,"bottom",b.hScrollBarEnabled?b.scrollbarHeight+"px":"0"));a.set(this.scrollContainer,d,b.scrollbarWidth+"px");a.set(this.scrollContainer,g,"0");a.set(this.header,d,b.scrollbarWidth+"px");a.set(this.header,g,"0");a.set(this.subHeader,d,b.scrollbarWidth+"px");a.set(this.subHeader,g,"0");this.buttonContainer&&null!=this.owner&&this.owner.currentView==this&&(a.set(this.buttonContainer,d,b.scrollbarWidth+
"px"),a.set(this.buttonContainer,g,"0"));this.hScrollBar&&(f.forEach(this._hScrollNodes,function(a){u[b.hScrollBarEnabled?"add":"remove"](a.parentNode,"dojoxCalendarHorizontalScroll")},this),b.hScrollBarEnabled||(this._setHScrollPosition(0),this.hScrollBarW.set("value",0)),a.set(this.hScrollBar,{display:b.hScrollBarEnabled?"block":"none",height:b.scrollbarHeight+"px",left:(c?b.rowHeaderWidth:b.scrollbarWidth)+"px",right:(c?b.scrollbarWidth:b.rowHeaderWidth)+"px"}),a.set(this.scrollContainer,"bottom",
b.hScrollBarEnabled?b.scrollbarHeight+1+"px":"0"),this._configureHScrollDomNodes(b.hScrollBarEnabled?b.minSheetWidth+"px":"100%"),this.hScrollBarW.set("maximum",b.minSheetWidth),this.hScrollBarW.set("containerSize",b.hScrollPaneWidth))},_configureHScrollDomNodes:function(b){f.forEach(this._hScrollNodes,function(c){a.set(c,"width",b)},this)},resize:function(a){this._resizeHandler(a)},_resizeHandler:function(a,b){var c=this.renderData;if(null!=c)if(b){var d=n.getMarginBox(this.grid).w;c.hScrollPaneWidth!=
d&&(c.hScrollPaneWidth=d,c.minSheetWidth=0>this.minColumnWidth?-1:this.minColumnWidth*c.subColumnCount*c.columnCount,c.hScrollBarEnabled=0<this.minColumnWidth&&n.getMarginBox(this.grid).w<c.minSheetWidth);this._configureScrollBar(c)}else void 0!=this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(l.hitch(this,function(){this._resizeHandler(a,!0)}),100)},_columnHeaderClick:function(a){d.stop(a);var b=w("td",this.columnHeaderTable).indexOf(a.currentTarget);this._onColumnHeaderClick({index:b,
date:this.renderData.dates[b],triggerEvent:a})},_buildColumnHeader:function(a,c){var f=this.columnHeaderTable;if(f){var g=a.columnCount-(c?c.columnCount:0);8==r("ie")&&(null==this._colTableSave?this._colTableSave=l.clone(f):0>g&&(this._cleanupColumnHeader(),this.columnHeader.removeChild(f),v.destroy(f),this.columnHeaderTable=f=l.clone(this._colTableSave),this.columnHeader.appendChild(f),g=a.columnCount));var h=w("tbody",f),k=w("tr",f),n,h=1==h.length?h[0]:b.create("tbody",null,f),k=1==k.length?k[0]:
v.create("tr",null,h);if(0<g)for(h=0;h<g;h++){n=v.create("td",null,k);var m=[];m.push(t(n,"click",l.hitch(this,this._columnHeaderClick)));r("touch-events")?(m.push(t(n,"touchstart",function(a){d.stop(a);u.add(a.currentTarget,"Active")})),m.push(t(n,"touchend",function(a){d.stop(a);u.remove(a.currentTarget,"Active")}))):(m.push(t(n,"mousedown",function(a){d.stop(a);u.add(a.currentTarget,"Active")})),m.push(t(n,"mouseup",function(a){d.stop(a);u.remove(a.currentTarget,"Active")})),m.push(t(n,"mouseover",
function(a){d.stop(a);u.add(a.currentTarget,"Hover")})),m.push(t(n,"mouseout",function(a){d.stop(a);u.remove(a.currentTarget,"Hover")})));this._columnHeaderHandlers.push(m)}else for(g=-g,h=0;h<g;h++)for(n=k.lastChild,k.removeChild(n),v.destroy(n),n=this._columnHeaderHandlers.pop();0<n.length;)n.pop().remove();w("td",f).forEach(function(b,c){b.className="";0==c?u.add(b,"first-child"):c==this.renderData.columnCount-1&&u.add(b,"last-child");var d=a.dates[c];this._setText(b,this._formatColumnHeaderLabel(d));
this.styleColumnHeaderCell(b,d,a)},this);this.yearColumnHeaderContent&&this._setText(this.yearColumnHeaderContent,a.dateLocaleModule.format(a.dates[0],{selector:"date",datePattern:"yyyy"}))}},_cleanupColumnHeader:function(){for(;0<this._columnHeaderHandlers.length;)for(var a=this._columnHeaderHandlers.pop();0<a.length;)a.pop().remove()},styleColumnHeaderCell:function(a,b,c){u.add(a,this._cssDays[b.getDay()]);this.isToday(b)?u.add(a,"dojoxCalendarToday"):this.isWeekEnd(b)&&u.add(a,"dojoxCalendarWeekend")},
_buildSubColumnHeader:function(c,d){var f=this.subColumnHeaderTable;if(f&&null!=this.subColumns){var g=c.columnCount-w("td",f).length;8==r("ie")&&(null==this._colSubTableSave?this._colSubTableSave=l.clone(f):0>g&&(this.subColumnHeader.removeChild(f),v.destroy(f),this.subColumnHeaderTable=f=l.clone(this._colSubTableSave),this.subColumnHeader.appendChild(f),g=c.columnCount));var h=w("\x3etbody",f),k,h=1==h.length?h[0]:b.create("tbody",null,f);k=w("\x3etr",h);var h=1==k.length?k[0]:v.create("tr",null,
h),n=c.subColumnCount;if(0<g)for(var m=0;m<g;m++)k=v.create("td",null,h),v.create("div",{className:"dojoxCalendarSubHeaderContainer"},k);else for(g=-g,m=0;m<g;m++)k=h.lastChild,h.removeChild(k),v.destroy(k);w("td",f).forEach(function(b,d){b.className="";0==d?u.add(b,"first-child"):d==this.renderData.columnCount-1&&u.add(b,"last-child");w(".dojoxCalendarSubHeaderContainer",b).forEach(function(b,c){if(0!=w(".dojoxCalendarSubHeaderContainer",b).length-n){var d=b.childNodes.length;for(c=0;c<d;c++)b.removeChild(b.lastChild);
for(d=0;d<n;d++)v.create("div",{className:"dojoxCalendarSubHeaderCell dojoxCalendarSubHeaderLabel"},b)}var f=100/n+"%";w(".dojoxCalendarSubHeaderCell",b).forEach(function(b,c){b.className="dojoxCalendarSubHeaderCell dojoxCalendarSubHeaderLabel";var d=1==n?c:Math.floor(c/n);subColIdx=1==n?0:c-d*n;a.set(b,{width:f,left:100*subColIdx/n+"%"});u[subColIdx<n-1&&1!==n?"add":"remove"](b,"subColumn");u.add(b,this.subColumns[subColIdx]);this._setText(b,this.subColumnLabelFunc(this.subColumns[subColIdx]))},
this)},this);this.styleSubColumnHeaderCell(b,c.dates[d],c)},this)}},subColumnLabelFunc:function(a){return a},styleSubColumnHeaderCell:function(a,b,c){u.add(a,this._cssDays[b.getDay()]);this.isToday(b)?u.add(a,"dojoxCalendarToday"):this.isWeekEnd(b)&&u.add(a,"dojoxCalendarWeekend")},_addMinutesClasses:function(a,b){switch(b){case 0:u.add(a,"hour");break;case 30:u.add(a,"halfhour");break;case 15:case 45:u.add(a,"quarterhour")}},_buildRowHeader:function(b,c){var d=this.rowHeaderTable;if(d){null==this._rowHeaderLabelContainer&&
(this._rowHeaderLabelContainer=v.create("div",{"class":"dojoxCalendarRowHeaderLabelContainer"},this.rowHeader));a.set(d,"height",b.sheetHeight+"px");var f=w("tbody",d),g,h;g=1==f.length?f[0]:v.create("tbody",null,d);f=Math.floor(60/b.rowHeaderGridSlotDuration)*b.hourCount-(c?Math.floor(60/c.rowHeaderGridSlotDuration)*c.hourCount:0);if(0<f)for(var k=0;k<f;k++)h=v.create("tr",null,g),v.create("td",null,h);else for(f=-f,k=0;k<f;k++)g.removeChild(g.lastChild);var l=this.renderData,n=Math.ceil(b.hourSize/
(60/b.rowHeaderGridSlotDuration)),m=new Date(2E3,0,1,0,0,0);w("tr",d).forEach(function(c,d){var f=w("td",c)[0];f.className="";a.set(c,"height",7==r("ie")?n-60/b.rowHeaderGridSlotDuration*2:n+"px");var g=d*this.renderData.rowHeaderGridSlotDuration%60;this.styleRowHeaderCell(f,b.minHours+d*this.renderData.rowHeaderGridSlotDuration/60,g,l);this._addMinutesClasses(f,g)},this);d=this._rowHeaderLabelContainer;f=Math.floor(60/this.rowHeaderLabelSlotDuration)*b.hourCount-d.childNodes.length;if(0<f)for(k=
0;k<f;k++)g=v.create("span",null,d),u.add(g,"dojoxCalendarRowHeaderLabel");else for(f=-f,k=0;k<f;k++)d.removeChild(d.lastChild);n=Math.ceil(b.hourSize/(60/this.rowHeaderLabelSlotDuration));w("\x3espan",d).forEach(function(a,c){m.setHours(0);m.setMinutes(60*b.minHours+c*this.rowHeaderLabelSlotDuration);this._configureRowHeaderLabel(a,m,c,n*c,l)},this)}},_configureRowHeaderLabel:function(b,c,d,f,g){this._setText(b,this._formatRowHeaderLabel(c));a.set(b,"top",f+(0==d?this.rowHeaderFirstLabelOffset:this.rowHeaderLabelOffset)+
"px");c=g.minHours+d*this.rowHeaderLabelSlotDuration/60;d=d*this.rowHeaderLabelSlotDuration%60;u.remove(b,["hour","halfhour","quarterhour"]);this._addMinutesClasses(b,d);this.styleRowHeaderCell(b,c,d,g)},styleRowHeaderCell:function(a,b,c,d){},_buildGrid:function(b,c){var d=this.gridTable;if(d){a.set(d,"height",b.sheetHeight+"px");var f=Math.floor(60/b.slotDuration)*b.hourCount,g=f-(c?Math.floor(60/c.slotDuration)*c.hourCount:0),h=0<g,k=b.columnCount-(c?c.columnCount:0);8==r("ie")&&(null==this._gridTableSave?
this._gridTableSave=l.clone(d):0>k&&(this.grid.removeChild(d),v.destroy(d),this.gridTable=d=l.clone(this._gridTableSave),this.grid.appendChild(d),k=b.columnCount,g=f,h=!0));var n=w("tbody",d),n=1==n.length?n[0]:v.create("tbody",null,d);if(h)for(var m=0;m<g;m++)v.create("tr",null,n);else for(g=-g,m=0;m<g;m++)n.removeChild(n.lastChild);var q=Math.floor(60/b.slotDuration)*b.hourCount-g,p=h||0<k,k=p?k:-k;w("tr",d).forEach(function(a,c){if(p){var d=c>=q?b.columnCount:k;for(c=0;c<d;c++)v.create("td",null,
a)}else for(c=0;c<k;c++)a.removeChild(a.lastChild)});w("tr",d).forEach(function(c,d){a.set(c,"height",b.slotSize+"px");0==d?u.add(c,"first-child"):d==f-1&&u.add(c,"last-child");var g=d*this.renderData.slotDuration%60,h=this.minHours+Math.floor(d*this.renderData.slotDuration/60);w("td",c).forEach(function(a,c){a.className="";0==c?u.add(a,"first-child"):c==this.renderData.columnCount-1&&u.add(a,"last-child");this.styleGridCell(a,b.dates[c],h,g,b);this._addMinutesClasses(a,g)},this)},this)}},styleGridCellFunc:null,
defaultStyleGridCell:function(a,b,c,d,f){u.add(a,[this._cssDays[b.getDay()],"H"+c,"M"+d]);if(this.isToday(b))return u.add(a,"dojoxCalendarToday");if(this.isWeekEnd(b))return u.add(a,"dojoxCalendarWeekend")},styleGridCell:function(a,b,c,d,f){this.styleGridCellFunc?this.styleGridCellFunc(a,b,c,d,f):this.defaultStyleGridCell(a,b,c,d,f)},_buildItemContainer:function(b,c){var d=this.itemContainerTable;if(d){var f=[],g=[];a.set(d,"height",b.sheetHeight+"px");var h=b.columnCount-(c?c.columnCount:0);8==r("ie")&&
(null==this._itemTableSave?this._itemTableSave=l.clone(d):0>h&&(this.itemContainer.removeChild(d),this._recycleItemRenderers(!0),v.destroy(d),this.itemContainerTable=d=l.clone(this._itemTableSave),this.itemContainer.appendChild(d),h=b.columnCount));var k=w("tbody",d),n=w("tr",d),k=1==k.length?k[0]:v.create("tbody",null,d),n=1==n.length?n[0]:v.create("tr",null,k),m=b.subColumnCount;if(0<h)for(var q=0;q<h;q++)k=v.create("td",null,n),v.create("div",{className:"dojoxCalendarContainerColumn"},k);else for(h=
-h,q=0;q<h;q++)n.removeChild(n.lastChild);w("td",d).forEach(function(c,d){w(".dojoxCalendarContainerColumn",c).forEach(function(d,f){a.set(d,"height",b.sheetHeight+"px");if(0!=w(".dojoxCalendarSubContainerColumn",c).length-m){var g=d.childNodes.length;for(f=0;f<g;f++)d.removeChild(d.lastChild);for(g=0;g<m;g++){var h=v.create("div",{className:"dojoxCalendarSubContainerColumn"},d);v.create("div",{className:"dojoxCalendarDecorationContainerColumn"},h);v.create("div",{className:"dojoxCalendarEventContainerColumn"},
h)}}},this);var h=100/m+"%";w(".dojoxCalendarSubContainerColumn",c).forEach(function(b,c){var d=1==m?c:Math.floor(c/m);subColIdx=1==m?0:c-d*m;a.set(b,{width:h,left:100*subColIdx/m+"%"});u[subColIdx<m-1&&1!==m?"add":"remove"](b,"subColumn");w(".dojoxCalendarEventContainerColumn",b).forEach(function(a,b){f.push(a)},this);w(".dojoxCalendarDecorationContainerColumn",b).forEach(function(a,b){g.push(a)},this)},this)},this);b.cells=f;b.decorationCells=g}},showTimeIndicator:!0,timeIndicatorRefreshInterval:6E4,
_setShowTimeIndicatorAttr:function(a){this._set("showTimeIndicator",a);this._layoutTimeIndicator(this.renderData)},_layoutTimeIndicator:function(b){if(b){if(this.showTimeIndicator){var c=new b.dateClassObj;if(this.isOverlapping(b,b.startTime,b.endTime,c,c)&&c.getHours()>=this.get("minHours")&&60*c.getHours()+c.getMinutes()<60*this.get("maxHours")){this._timeIndicator||(this._timeIndicator=v.create("div",{className:"dojoxCalendarTimeIndicator"}));for(var d=this._timeIndicator,f=0;f<this.renderData.columnCount&&
!this.isSameDay(c,this.renderData.dates[f]);f++);c=this.computeProjectionOnDate(b,this.floorToDay(c),c,b.sheetHeight);if(c!=b.sheetHeight){a.set(d,{top:c+"px",display:"block"});b=b.cells[f*b.subColumnCount].parentNode.parentNode;b!=d.parentNode&&(null!=d.parentNode&&d.parentNode.removeChild(d),b.appendChild(d));null==this._timeIndicatorTimer&&(this._timeIndicatorTimer=setInterval(l.hitch(this,function(){this._layoutTimeIndicator(this.renderData)}),this.timeIndicatorRefreshInterval));return}}}this._timeIndicatorTimer&&
(clearInterval(this._timeIndicatorTimer),this._timeIndicatorTimer=null);this._timeIndicator&&a.set(this._timeIndicator,"display","none")}},beforeDeactivate:function(){this._timeIndicatorTimer&&(clearInterval(this._timeIndicatorTimer),this._timeIndicatorTimer=null)},_overlapLayoutPass2:function(a){var b,c,d,f;d=a[a.length-1];for(c=0;c<d.length;c++)d[c].extent=1;for(b=0;b<a.length-1;b++)for(d=a[b],c=0;c<d.length;c++)if(f=d[c],-1==f.extent){f.extent=1;for(var g=0,h=!1,k=b+1;k<a.length&&!h;k++){for(var l=
a[k],n=0;n<l.length&&!h;n++){var m=l[n];f.start<m.end&&m.start<f.end&&(h=!0)}h||g++}f.extent+=g}},_defaultItemToRendererKindFunc:function(a){return"vertical"},_layoutInterval:function(a,b,c,d,f,g){var h=[];a.colW=this.itemContainer.offsetWidth/a.columnCount;if("dataItems"===g){for(var k=0;k<f.length;k++){var l=f[k];"vertical"===this._itemToRendererKind(l)&&h.push(l)}this._layoutRendererWithSubColumns(a,"vertical",!0,b,c,d,h,g)}else this._layoutRendererWithSubColumns(a,"decoration",!1,b,c,d,f,g)},
_layoutRendererWithSubColumns:function(a,b,c,d,g,h,k,n){if(0<k.length)if(1<a.subColumnCount){var m={},q=this.subColumns;f.forEach(q,function(a){m[a]=[]});f.forEach(k,function(a){"decorationItems"===n?a.subColumn?m[a.subColumn]&&m[a.subColumn].push(a):f.forEach(q,function(b){var c=l.mixin({},a);c.subColumn=b;m[b].push(c)}):a.subColumn&&m[a.subColumn]&&m[a.subColumn].push(a)});var r=0;f.forEach(this.subColumns,function(f){this._layoutVerticalItems(a,b,c,d,r++,g,h,m[f],n)},this)}else this._layoutVerticalItems(a,
b,c,d,0,g,h,k,n)},_getColumn:function(a,b,c,d){return("dataItems"===d?a.cells:a.decorationCells)[b*a.subColumnCount+c]},_layoutVerticalItems:function(b,c,d,f,g,h,k,n,m){if(!("dataItems"===m&&null==this.verticalRenderer||"decorationItems"===m&&null==this.verticalDecorationRenderer)){c=this._getColumn(b,f,g,m);d=[];for(f=0;f<n.length;f++){g=n[f];var q=this.computeRangeOverlap(b,g.startTime,g.endTime,h,k),r=this.computeProjectionOnDate(b,h,q[0],b.sheetHeight),p=this.computeProjectionOnDate(b,h,q[1],
b.sheetHeight);p>r&&(g=l.mixin({start:r,end:p,range:q,item:g},g),d.push(g))}h="dataItems"===m?this.computeOverlapping(d,this._overlapLayoutPass2).numLanes:1;k=this.percentOverlap/100;for(f=0;f<d.length;f++){g=d[f];if("dataItems"===m){q=g.lane;r=g.extent;0==k?(n=1==h?b.colW:(b.colW-(h-1)*this.horizontalGap)/h,q*=n+this.horizontalGap,n=1==r?n:n*r+(r-1)*this.horizontalGap,n=100*n/b.colW,q=100*q/b.colW):(n=1==h?100:100/(h-(h-1)*k),q*=n-k*n,n=1==r?n:n*(r-(r-1)*k));var r=this._createRenderer(g,"vertical",
this.verticalRenderer,"dojoxCalendarVertical"),t=this.isItemBeingEdited(g),u=this.isItemSelected(g),D=this.isItemHovered(g),x=this.isItemFocused(g),p=r.renderer;p.set("hovered",D);p.set("selected",u);p.set("edited",t);p.set("focused",this.showFocus?x:!1);p.set("storeState",this.getItemStoreState(g));p.set("moveEnabled",this.isItemMoveEnabled(g._item,"vertical"));p.set("resizeEnabled",this.isItemResizeEnabled(g._item,"vertical"));this.applyRendererZIndex(g,r,D,u,t,x)}else n=100,q=0,r=this.decorationRendererManager.createRenderer(g,
"vertical",this.verticalDecorationRenderer,"dojoxCalendarDecoration"),p=r.renderer;a.set(r.container,{top:g.start+"px",left:q+"%",width:n+"%",height:g.end-g.start+1+"px"});p.updateRendering&&p.updateRendering(n,g.end-g.start+1);v.place(r.container,c);a.set(r.container,"display","block")}}},_sortItemsFunction:function(a,b){var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return this.isLeftToRight()?c:-c},_getNormalizedCoords:function(a,
b,c,d){null!=a&&(c=n.position(this.itemContainer,!0),a.touches?(d=void 0==d?0:d,b=a.touches[d].pageX-c.x,c=a.touches[d].pageY-c.y):(b=a.pageX-c.x,c=a.pageY-c.y));a=n.getContentBox(this.itemContainer);this.isLeftToRight()||(b=a.w-b);0>b?b=0:b>a.w&&(b=a.w-1);0>c?c=0:c>a.h&&(c=a.h-1);return{x:b,y:c}},getTime:function(a,b,c,d){b=this._getNormalizedCoords(a,b,c,d);a=this.getTimeOfDay(b.y,this.renderData);c=n.getMarginBox(this.itemContainer).w/this.renderData.columnCount;b=Math.floor(b.x/c);c=null;b<this.renderData.dates.length&&
(c=this.newDate(this.renderData.dates[b]),c=this.floorToDay(c,!0),c.setHours(a.hours),c.setMinutes(a.minutes));return c},getSubColumn:function(a,b,c,d){if(null==this.subColumns||1==this.subColumns.length)return null;a=this._getNormalizedCoords(a,b,c,d);b=this.renderData;c=n.getMarginBox(this.itemContainer).w/this.renderData.columnCount;return this.subColumns[Math.floor((a.x-Math.floor(a.x/c)*c)/(c/b.subColumnCount))]},_onGridMouseUp:function(a){this.inherited(arguments);this._gridMouseDown&&(this._gridMouseDown=
!1,this._onGridClick({date:this.getTime(a),triggerEvent:a}))},_onGridTouchStart:function(a){this.inherited(arguments);var b=this._gridProps;b.moved=!1;b.start=a.touches[0].screenY;b.scrollTop=this._getScrollPosition()},_onGridTouchMove:function(a){this.inherited(arguments);if(1<a.touches.length&&!this._isEditing)d.stop(a);else if(this._gridProps&&!this._isEditing){var b=a.touches[0].screenX,c=a.touches[0].screenY,f=this._edProps;if(!f||f&&(25<Math.abs(b-f.start.x)||25<Math.abs(c-f.start.y)))this._gridProps.moved=
!0,b=this._gridProps.scrollTop-(a.touches[0].screenY-this._gridProps.start),c=this.itemContainer.offsetHeight-this.scrollContainer.offsetHeight,0>b?(this._gridProps.start=a.touches[0].screenY,this._setScrollImpl(0),this._gridProps.scrollTop=0):b>c?(this._gridProps.start=a.touches[0].screenY,this._setScrollImpl(c),this._gridProps.scrollTop=c):this._setScrollImpl(b)}},_onGridTouchEnd:function(a){this.inherited(arguments);var b=this._gridProps;b&&(this._isEditing||b.moved||(b.fromItem||b.editingOnStart||
this.selectFromEvent(a,null,null,!0),b.fromItem||(this._pendingDoubleTap&&this._pendingDoubleTap.grid?(this._onGridDoubleClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),clearTimeout(this._pendingDoubleTap.timer),delete this._pendingDoubleTap):(this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),this._pendingDoubleTap={grid:!0,timer:setTimeout(l.hitch(this,function(){delete this._pendingDoubleTap}),this.doubleTapDelay)}))),
this._gridProps=null)},_onColumnHeaderClick:function(a){this._dispatchCalendarEvt(a,"onColumnHeaderClick")},onColumnHeaderClick:function(a){},getTimeOfDay:function(a,b){var c=60*b.minHours,c=c+a*(60*b.maxHours-c)/b.sheetHeight;return{hours:Math.floor(c/60),minutes:Math.floor(c%60)}},_isItemInView:function(a){var b=this.inherited(arguments);if(b){var c=this.renderData;if(c.dateModule.difference(a.startTime,a.endTime,"millisecond")>36E5*(24-c.maxHours+c.minHours))return!0;var d=60*a.startTime.getHours()+
a.startTime.getMinutes(),f=60*a.endTime.getHours()+a.endTime.getMinutes(),g=60*c.minHours,c=60*c.maxHours;if(0<d&&d<g||d>c&&1440>=d||0<f&&f<g||f>c&&1440>=f)return!1}return b},_ensureItemInView:function(a){var b,c=a.startTime,d=a.endTime,f=this.renderData,g=f.dateModule,h=Math.abs(g.difference(a.startTime,a.endTime,"millisecond"));if(h>36E5*(24-f.maxHours+f.minHours))return!1;var c=60*c.getHours()+c.getMinutes(),d=60*d.getHours()+d.getMinutes(),k=60*f.minHours,l=60*f.maxHours;0<c&&c<k?(this.floorToDay(a.startTime,
!0,f),a.startTime.setHours(f.minHours),a.endTime=g.add(a.startTime,"millisecond",h),b=!0):c>l&&1440>=c&&(this.floorToDay(a.startTime,!0,f),a.startTime=g.add(a.startTime,"day",1),a.startTime.setHours(f.minHours),a.endTime=g.add(a.startTime,"millisecond",h),b=!0);0<d&&d<k?(this.floorToDay(a.endTime,!0,f),a.endTime=g.add(a.endTime,"day",-1),a.endTime.setHours(f.maxHours),a.startTime=g.add(a.endTime,"millisecond",-h),b=!0):d>l&&1440>=d&&(this.floorToDay(a.endTime,!0,f),a.endTime.setHours(f.maxHours),
a.startTime=g.add(a.endTime,"millisecond",-h),b=!0);return b=b||this.inherited(arguments)},_onScrollTimer_tick:function(){this._scrollToPosition(this._getScrollPosition()+this._scrollProps.scrollStep)},snapUnit:"minute",snapSteps:15,minDurationUnit:"minute",minDurationSteps:15,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!0})})},"dojox/calendar/_ScrollBarBase":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/on dojo/dom-style dojo/sniff dijit/_WidgetBase dojox/html/metrics".split(" "),
function(p,m,k,h,g,d,l,f){return p("dojox.calendar._ScrollBarBase",l,{value:0,minimum:0,maximum:100,direction:"vertical",_vertical:!0,_scrollHandle:null,containerSize:0,buildRendering:function(){this.inherited(arguments);this.own(h(this.domNode,"scroll",k.hitch(this,function(d){this.value=this._getDomScrollerValue();this.onChange(this.value);this.onScroll(this.value)})))},_getDomScrollerValue:function(){if(this._vertical)return this.domNode.scrollTop;if(!this.isLeftToRight()){if(d("webkit")||7==d("ie"))return void 0==
this._scW&&(this._scW=f.getScrollbar().w),this.maximum-this.domNode.scrollLeft-this.containerSize+this._scW;if(d("mozilla"))return-this.domNode.scrollLeft}return this.domNode.scrollLeft},_setDomScrollerValue:function(d){this.domNode[this._vertical?"scrollTop":"scrollLeft"]=d},_setValueAttr:function(d){d=Math.min(this.maximum,d);d=Math.max(this.minimum,d);this.value!=d&&(this.value=d,this.onChange(d),this._setDomScrollerValue(d))},onChange:function(d){},onScroll:function(d){},_setMinimumAttr:function(d){this.minimum=
d=Math.min(d,this.maximum)},_setMaximumAttr:function(d){this.maximum=d=Math.max(d,this.minimum);g.set(this.content,this._vertical?"height":"width",d+"px")},_setDirectionAttr:function(d){"vertical"==d?(d="vertical",this._vertical=!0):(d="horizontal",this._vertical=!1);this._set("direction",d)}})})},"dojox/html/metrics":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/sniff dojo/ready dojo/_base/unload dojo/_base/window dojo/dom-geometry".split(" "),function(p,m,k,h,g,d,l){var f=m.getObject("dojox.html.metrics",
!0),r=m.getObject("dojox");f.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;k("ie")&&(b=d.doc.documentElement.style.fontSize||"",b||(d.doc.documentElement.style.fontSize="100%"));var c=d.doc.createElement("div"),f=c.style;f.position="absolute";f.left="-100px";f.top="0";f.width="30px";f.height="1000em";f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";f.lineHeight="1";f.overflow=
"hidden";d.body().appendChild(c);for(var g in a)f.fontSize=g,a[g]=16*Math.round(12*c.offsetHeight/16)/12/1E3;k("ie")&&(d.doc.documentElement.style.fontSize=b);d.body().removeChild(c);c=null;return a};var c=null;f.getCachedFontMeasurements=function(a){if(a||!c)c=f.getFontMeasurements();return c};var b=null,t={};f.getTextBox=function(a,c,f){var g,h;if(b)g=b;else{g=b=d.doc.createElement("div");var k=d.doc.createElement("div");k.appendChild(g);h=k.style;h.overflow="scroll";h.position="absolute";h.left=
"0px";h.top="-10000px";h.width="1px";h.height="1px";h.visibility="hidden";h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";d.body().appendChild(k)}g.className="";h=g.style;h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";if(1<arguments.length&&c)for(var n in c)n in t||(h[n]=c[n]);2<arguments.length&&f&&(g.className=f);g.innerHTML=a;h=l.position(g);h.w=g.parentNode.scrollWidth;return h};var q=16,u=16;f.getScrollbar=function(){return{w:q,h:u}};f._fontResizeNode=null;f.initOnFontResize=
function(a){var b=f._fontResizeNode=d.doc.createElement("iframe");a=b.style;a.position="absolute";a.width="5em";a.height="10em";a.top="-10000px";a.display="none";k("ie")?b.onreadystatechange=function(){"complete"==b.contentWindow.document.readyState&&(b.onresize=b.contentWindow.parent[r._scopeName].html.metrics._fontresize)}:b.onload=function(){b.contentWindow.onresize=b.contentWindow.parent[r._scopeName].html.metrics._fontresize};b.setAttribute("src","javascript:'\x3chtml\x3e\x3chead\x3e\x3cscript\x3eif(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}\x3c/script\x3e\x3c/head\x3e\x3cbody\x3e\x3c/body\x3e\x3c/html\x3e'");
d.body().appendChild(b);f.initOnFontResize=function(){}};f.onFontResize=function(){};f._fontresize=function(){f.onFontResize()};g.addOnUnload(function(){var a=f._fontResizeNode;a&&(k("ie")&&a.onresize?a.onresize=null:a.contentWindow&&a.contentWindow.onresize&&(a.contentWindow.onresize=null),f._fontResizeNode=null)});h(function(){try{var a=d.doc.createElement("div");a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";d.body().appendChild(a);
q=a.offsetWidth-a.clientWidth;u=a.offsetHeight-a.clientHeight;d.body().removeChild(a);delete a}catch(n){}"fontSizeWatch"in p.config&&p.config.fontSizeWatch&&f.initOnFontResize()});return f})},"dojox/calendar/ColumnViewSecondarySheet":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/dom-geometry dojo/dom-style ./MatrixView dojo/text!./templates/ColumnViewSecondarySheet.html".split(" "),function(p,m,k,h,g,d,l,f){return m("dojox.calendar.ColumnViewSecondarySheet",
l,{templateString:f,rowCount:1,cellPaddingTop:4,roundToDay:!1,_defaultHeight:-1,layoutDuringResize:!0,buildRendering:function(){this.inherited(arguments);this._hScrollNodes=[this.gridTable,this.itemContainerTable]},_configureHScrollDomNodes:function(f){p.forEach(this._hScrollNodes,function(c){d.set(c,"width",f)},this)},_defaultItemToRendererKindFunc:function(d){return d.allDay?"horizontal":null},_formatGridCellLabel:function(){return null},_formatRowHeaderLabel:function(){return null},__fixEvt:function(d){d.sheet=
"secondary";d.source=this;return d},_dispatchCalendarEvt:function(d,c){d=this.inherited(arguments);if(this.owner.owner)this.owner.owner[c](d)},_layoutExpandRenderers:function(d,c,b){if(this.expandRenderer&&-1!=this._expandedRowCol){var f=g.getMarginBox(this.domNode).h;if(-1==this._defaultHeight||0===this._defaultHeight)this._defaultHeight=f;this._defaultHeight!=f&&f>=this._getExpandedHeight()||void 0!==this._expandedRowCol&&-1!==this._expandedRowCol?(f=this._expandedRowCol,f>=this.renderData.columnCount&&
(f=0),this._layoutExpandRendererImpl(0,f,null,!0)):this.inherited(arguments)}},expandRendererClickHandler:function(d,c){k.stop(d);var b=g.getMarginBox(this.domNode).h,f=this._getExpandedHeight();this._defaultHeight==b||b<f?(this._expandedRowCol=c.columnIndex,this.owner.resizeSecondarySheet(f)):(delete this._expandedRowCol,this.owner.resizeSecondarySheet(this._defaultHeight))},_getExpandedHeight:function(){return(this.naturalRowsHeight&&0<this.naturalRowsHeight.length?this.naturalRowsHeight[0]:0)+
this.expandRendererHeight+this.verticalGap+this.verticalGap},_layoutRenderers:function(d){this._domReady&&(this.inherited(arguments),d.items&&0!==d.items.length||this._layoutExpandRenderers(0,!1,null))}})})},"dojox/calendar/DecorationRenderer":function(){define(["dojo/_base/declare","dojo/dom-class","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(p,m,k,h,g){return p("dojox.calendar.DecorationRenderer",[k,h],{templateString:'\x3cdiv class\x3d"dojoxCalendarDecoration"\x3e\x3c/div\x3e',_setItemAttr:function(d){null==
d?(this.item&&this.item.cssClass&&m.remove(this.domNode,this.item.cssClass),this.item=null):(null!=this.item?(this.item.cssClass!=d.cssClass&&this.item.cssClass&&m.remove(this.domNode,this.item.cssClass),this.item=lang.mixin(this.item,d)):this.item=d,d.cssClass&&m.add(this.domNode,d.cssClass))},postCreate:function(){this.inherited(arguments);this._applyAttributes()}})})},"dojox/calendar/ExpandRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/_base/window dojo/on dojo/dom-class dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/ExpandRenderer.html".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return p("dojox.calendar.ExpandRenderer",[f,r],{templateString:c,baseClass:"dojoxCalendarExpand",owner:null,focused:!1,up:!1,down:!1,date:null,items:null,rowIndex:-1,columnIndex:-1,_setExpandedAttr:function(b){l.set(this.expand,"display",b?"none":"inline-block");l.set(this.collapse,"display",b?"inline-block":"none");this._set("expanded",b)},_setDownAttr:function(b){this._setState("down",b,"Down")},_setUpAttr:function(b){this._setState("up",b,"Up")},_setFocusedAttr:function(b){this._setState("focused",
b,"Focused")},_setState:function(b,c,f){this[b]!=c&&(d[c?"add":"remove"](this.stateNode||this.domNode,f),this._set(b,c))},_onClick:function(b){this.owner&&this.owner.expandRendererClickHandler&&this.owner.expandRendererClickHandler(b,this)},_onMouseDown:function(b){k.stop(b);this.set("down",!0)},_onMouseUp:function(b){this.set("down",!1)},_onMouseOver:function(b){this.up||(b=1==b.button,this.set("up",!b),this.set("down",b))},_onMouseOut:function(b){for(var c=b.relatedTarget;c!=b.currentTarget&&c!=
h.doc.body&&null!=c;)c=c.parentNode;c!=b.currentTarget&&(this.set("up",!1),this.set("down",!1))}})})},"dojox/calendar/Keyboard":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/on dojo/_base/event dojo/keys".split(" "),function(p,m,k,h,g,d){return k("dojox.calendar.Keyboard",null,{keyboardUpDownUnit:"minute",keyboardUpDownSteps:15,keyboardLeftRightUnit:"day",keyboardLeftRightSteps:1,allDayKeyboardUpDownUnit:"day",allDayKeyboardUpDownSteps:7,allDayKeyboardLeftRightUnit:"day",
allDayKeyboardLeftRightSteps:1,postCreate:function(){this.inherited(arguments);this._viewHandles.push(h(this.domNode,"keydown",m.hitch(this,this._onKeyDown)))},resizeModifier:"ctrl",maxScrollAnimationDuration:1E3,tabIndex:"0",focusedItem:null,_isItemFocused:function(d){return null!=this.focusedItem&&this.focusedItem.id==d.id},_setFocusedItemAttr:function(d){if(d!=this.focusedItem){var f=this.focusedItem;this._set("focusedItem",d);this.updateRenderers([f,this.focusedItem],!0);this.onFocusChange({oldValue:f,
newValue:d})}null!=d&&(null!=this.owner&&null!=this.owner.get("focusedItem")&&this.owner.set("focusedItem",null),null!=this._secondarySheet&&null!=this._secondarySheet.set("focusedItem")&&this._secondarySheet.set("focusedItem",null))},onFocusChange:function(d){},showFocus:!1,_focusNextItem:function(d){if(!this.renderData||!this.renderData.items||0==this.renderData.items.length)return null;var f=-1,g=this.renderData.items,c=g.length-1,b=this.get("focusedItem");null==b?f=0<d?0:c:(p.some(g,m.hitch(this,
function(c,a){var d=c.id==b.id;d&&(f=a);return d})),f=this._focusNextItemImpl(d,f,c));for(var h=!1,k=-1;k!=f&&(!h||0!=f);){h||0!=f||(h=!0);k=g[f];if(null!=this.rendererManager.itemToRenderer[k.id]){this.set("focusedItem",k);break}k=f;f=this._focusNextItemImpl(d,f,c)}},_focusNextItemImpl:function(d,f,g){if(-1==f)f=0<d?0:g;else{if(0==f&&-1==d||f==g&&1==d)return f;f=0<d?++f:--f}return f},_handlePrevNextKeyCode:function(d,f){this.isLeftToRight()||(f=1==f?-1:1);this.showFocus=!0;this._focusNextItem(f);
var g=this.get("focusedItem");!d.ctrlKey&&g&&this.set("selectedItem",g);g&&this.ensureVisibility(g.startTime,g.endTime,"both",void 0,this.maxScrollAnimationDuration)},_checkDir:function(d,f){return this.isLeftToRight()&&d==f||!this.isLeftToRight()&&d==("left"==f?"right":"left")},_keyboardItemEditing:function(d,f){g.stop(d);var h=this._edProps,c,b;h.editedItem.allDay||this.roundToDay||"label"==h.rendererKind?(c="up"==f||"down"==f?this.allDayKeyboardUpDownUnit:this.allDayKeyboardLeftRightUnit,b="up"==
f||"down"==f?this.allDayKeyboardUpDownSteps:this.allDayKeyboardLeftRightSteps):(c="up"==f||"down"==f?this.keyboardUpDownUnit:this.keyboardLeftRightUnit,b="up"==f||"down"==f?this.keyboardUpDownSteps:this.keyboardLeftRightSteps);if("up"==f||this._checkDir(f,"left"))b=-b;var k=d[this.resizeModifier+"Key"]?"resizeEnd":"move",l="resizeEnd"==k?h.editedItem.endTime:h.editedItem.startTime,m=l,a=h.editedItem.subColumn;if("move"==k&&this.subColumns&&1<this.subColumns.length){var n=this.getSubColumnIndex(a),
p=!0;-1!=n&&(this._checkDir(f,"left")?0==n?a=this.subColumns[this.subColumns.length-1]:(p=!1,a=this.subColumns[n-1]):this._checkDir(f,"right")&&(n==this.subColumns.length-1?a=this.subColumns[0]:(p=!1,a=this.subColumns[n+1])),p&&(m=this.renderData.dateModule.add(l,c,b)))}else m=this.renderData.dateModule.add(l,c,b);this._startItemEditingGesture([l],k,"keyboard",d);this._moveOrResizeItemGesture([m],"keyboard",d,a);this._endItemEditingGesture(k,"keyboard",d,!1);"move"==k?-1==this.renderData.dateModule.compare(m,
l)?this.ensureVisibility(h.editedItem.startTime,h.editedItem.endTime,"start"):this.ensureVisibility(h.editedItem.startTime,h.editedItem.endTime,"end"):this.ensureVisibility(h.editedItem.startTime,h.editedItem.endTime,"end")},_onKeyDown:function(h){var f=this.get("focusedItem");switch(h.keyCode){case d.ESCAPE:this._isEditing&&(this._editingGesture&&this._endItemEditingGesture("keyboard",h,!0),this._endItemEditing("keyboard",!0),this._edProps=null);break;case d.SPACE:g.stop(h);null!=f&&this.setItemSelected(f,
h.ctrlKey?!this.isItemSelected(f):!0);break;case d.ENTER:g.stop(h);null!=f&&(this._isEditing?this._endItemEditing("keyboard",!1):(h=this.rendererManager.itemToRenderer[f.id])&&0<h.length&&this.isItemEditable(f,h[0].kind)&&(this._edProps={renderer:h[0],rendererKind:h[0].kind,tempEditedItem:f,liveLayout:this.liveLayout},this.set("selectedItem",f),this._startItemEditing(f,"keyboard")));break;case d.LEFT_ARROW:g.stop(h);this._isEditing?this._keyboardItemEditing(h,"left"):this._handlePrevNextKeyCode(h,
-1);break;case d.RIGHT_ARROW:g.stop(h);this._isEditing?this._keyboardItemEditing(h,"right"):this._handlePrevNextKeyCode(h,1);break;case d.UP_ARROW:this._isEditing?this._keyboardItemEditing(h,"up"):this.scrollable&&this.scrollView(-1);break;case d.DOWN_ARROW:this._isEditing?this._keyboardItemEditing(h,"down"):this.scrollable&&this.scrollView(1)}}})})},"dojox/calendar/Mouse":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/dom-geometry dojo/mouse dojo/on dojo/keys".split(" "),
function(p,m,k,h,g,d,l,f,r){return m("dojox.calendar.Mouse",null,{triggerExtent:3,postMixInProperties:function(){this.inherited(arguments);this.on("rendererCreated",h.hitch(this,function(c){var b=c.renderer.renderer;this.own(f(b.domNode,"click",h.hitch(this,function(c){k.stop(c);this._onItemClick({triggerEvent:c,renderer:b,item:b.item._item})})));this.own(f(b.domNode,"dblclick",h.hitch(this,function(c){k.stop(c);this._onItemDoubleClick({triggerEvent:c,renderer:b,item:b.item._item})})));this.own(f(b.domNode,
"contextmenu",h.hitch(this,function(c){this._onItemContextMenu({triggerEvent:c,renderer:b,item:b.item._item})})));b.resizeStartHandle&&this.own(f(b.resizeStartHandle,"mousedown",h.hitch(this,function(c){this._onRendererHandleMouseDown(c,b,"resizeStart")})));b.moveHandle&&this.own(f(b.moveHandle,"mousedown",h.hitch(this,function(c){this._onRendererHandleMouseDown(c,b,"move")})));b.resizeEndHandle&&this.own(f(b.resizeEndHandle,"mousedown",h.hitch(this,function(c){this._onRendererHandleMouseDown(c,b,
"resizeEnd")})));this.own(f(b.domNode,"mousedown",h.hitch(this,function(c){this._rendererMouseDownHandler(c,b)})));this.own(f(c.renderer.container,l.enter,h.hitch(this,function(c){b.item&&!this._editingGesture&&(this._setHoveredItem(b.item.item,b),this._onItemRollOver(this.__fixEvt({item:b.item._item,renderer:b,triggerEvent:c})))})));this.own(f(b.domNode,l.leave,h.hitch(this,function(c){b.item&&!this._editingGesture&&(this._setHoveredItem(null),this._onItemRollOut(this.__fixEvt({item:b.item._item,
renderer:b,triggerEvent:c})))})))}))},_onItemRollOver:function(c){this._dispatchCalendarEvt(c,"onItemRollOver")},onItemRollOver:function(c){},_onItemRollOut:function(c){this._dispatchCalendarEvt(c,"onItemRollOut")},onItemRollOut:function(c){},_rendererMouseDownHandler:function(c,b){k.stop(c);this.selectFromEvent(c,b.item._item,b,!0);this._setTabIndexAttr&&this[this._setTabIndexAttr].focus()},_onRendererHandleMouseDown:function(c,b,d){k.stop(c);this.showFocus=!1;var l=b.item.item;this.isItemBeingEdited(l)||
(this._isEditing&&this._endItemEditing("mouse",!1),this.selectFromEvent(c,b.item._item,b,!0),this._setTabIndexAttr&&this[this._setTabIndexAttr].focus(),this._edProps={editKind:d,editedItem:l,rendererKind:b.rendererKind,tempEditedItem:l,liveLayout:this.liveLayout},this.set("focusedItem",this._edProps.editedItem));b=[];b.push(f(g.doc,"mouseup",h.hitch(this,this._editingMouseUpHandler)));b.push(f(g.doc,"mousemove",h.hitch(this,this._editingMouseMoveHandler)));l=this._edProps;l.handles=b;l.eventSource=
"mouse";l.editKind=d;this._startPoint={x:c.screenX,y:c.screenY}},_editingMouseMoveHandler:function(c){var b=this._edProps;if(this._editingGesture)this._autoScroll(c.pageX,c.pageY,!0)||this._moveOrResizeItemGesture([this.getTime(c)],"mouse",c,this.getSubColumn(c));else if(Math.abs(this._startPoint.x-c.screenX)>=this.triggerExtent||Math.abs(this._startPoint.y-c.screenY)>=this.triggerExtent)this._isEditing||this._startItemEditing(b.editedItem,"mouse"),b=this._edProps,this._startItemEditingGesture([this.getTime(c)],
b.editKind,"mouse",c)},_editingMouseUpHandler:function(c){var b=this._edProps;this._stopAutoScroll();this._isEditing?(this._editingGesture&&this._endItemEditingGesture("mouse",c),this._endItemEditing("mouse",!1)):p.forEach(b.handles,function(b){b.remove()})},_autoScroll:function(c,b,f){if(!this.scrollable||!this.autoScroll)return!1;var g=d.position(this.scrollContainer,!0);c=f?b-g.y:c-g.x;f=f?g.h:g.w;if(0>c||c>f)return this._startAutoScroll(Math.floor((0>c?c:c-f)/2)/3),!0;this._stopAutoScroll();return!1}})})},
"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(p,m,k,h,g,d,l,f){k("dijit-legacy-requires")&&g(0,function(){p(["dijit/ToolbarSeparator"])});return m("dijit.Toolbar",[d,f,l],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},
"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(p,m,k,h){return p("dijit.ToolbarSeparator",[k,h],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);m.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Calendar":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang webview/util/dateUtils webview/util/globalConstants ./Date ./DateRange ./Event ./Recurrence ./Weekly".split(" "),
function(p,m,k,h,g,d,l,f,r,c){return m("webview/reliable/_enterpriseSchedule/calendarEvents/Calendar",f,{encode:function(b,c){var d,f=b[0].repeat["for"],a,g={},h={};c[f]||(c[f]=this._buildIOEvent(b[0]),a=c[f],a.repeat.type=this.REPEAT_CALENDAR,a.repeat.value=[]);a=c[f];p.forEach(b,k.hitch(this,function(b){d=this._encode([b]);g[d.index]||(g[d.index]=d,a.repeat.value.push(d.repeat));b=d.timeValues[0].startTime;h[b]||(a.timeValues=a.timeValues.concat(d.timeValues),h[b]=d)}))},groupedEncode:function(b){b=
this._groupCalendarsByFor(b);var c=[],d=function(a,b){b.repeat.value instanceof Array?this._encodeMultipleValues(b,a):this._encodeSingleValue(b.repeat.value,a)},f;for(f in b)if(b[f]){var a=b[f],g=this._buildIOEvent(a[0]);g.timeValues=this._encodeTimeValues(a);g.repeat.value=[];p.forEach(a,k.hitch(this,d,g));c.push(g)}return c},_encodeSingleValue:function(b,c){switch(b.type){case g.REPEAT_EXCEPTION:c.repeat.value.push(b);break;case g.REPEAT_RECURRENCE:if(b.value.dow instanceof Array)for(var d=0;d<
b.value.dow.length;d++)c.repeat.value.push({type:g.REPEAT_RECURRENCE,value:{dow:b.value.dow[d],wom:b.value.wom,m:b.value.m}});else"delete"!==b.action&&c.repeat.value.push(b);c.repeat.value=c.repeat.value.sort(this._sortCalendarValues)}},_encodeMultipleValues:function(b,c){for(var d=0;d<b.repeat.value.length;++d)this._encodeSingleValue(b.repeat.value[d],c)},_sortCalendarValues:function(b,c){var d=0;return d=b.action&&!c.action?-1:!b.action&&c.action?1:b.action&&c.action?"delete"===b.action&&"delete"!==
c.action?-1:"delete"!==b.action&&"delete"===c.action?1:"delete"!==b.action&&"delete"!==c.action?"add"===b.action&&"add"!==c.action?-1:"add"!==b.action&&"add"===c.action?1:0:0:0},_groupCalendarsByFor:function(b){var c={};p.forEach(b,k.hitch(this,function(b){var d=this.getUniqueIndex(b);c[d]?c[d].push(b):c[d]=[b]}));return c},getUniqueIndex:function(b){for(var c=17,c=void 0===b.npriority?"high"===b.priority?2:9:b.npriority,d=k.clone(b.label.toLowerCase()),f=0,a=0;a<d.length;a++)f+=d.charCodeAt(a)*(a+
1);0>f&&(f*=-1);for(a=d=0;a<b.schedules.length;a++)d+=b.schedules[a];var h=0;switch(b.repeat.value.type){case g.REPEAT_EXCEPTION:for(a=0;a<b.repeat.value.value.length;++a)h^=this._getDateRepeatUniqueIndex(b.repeat.value.value[a]);break;case g.REPEAT_RECURRENCE:for(a=0;a<b.repeat.value.value.length;++a)h^=this._getRecurrenceRepeatUniqueIndex(b.repeat.value.value[a])}h=(h+c)*(19+d+f)^this._getDateRepeatUniqueIndex(b.repeat.start);h^=this._getDateRepeatUniqueIndex(b.repeat.end);if(null!==b.blockId){var l=
0;p.forEach(b.blockId,function(a,b){l+=a*(b+1)});h*=l}return h},decode:function(b,f){var m=[],t=null,a=null,n=null,v=null;b.repeat.start&&b.repeat.end&&(n=h.bacnetDateToJSDate(b.repeat.start),v=h.bacnetDateToJSDate(b.repeat.end));n&&n>=f.start&&(f.start=n);v&&v<=f.end&&(f.end=v);p.forEach(b.repeat.value,k.hitch(this,function(h,k,n){var q=k.value;if(k.type===g.REPEAT_RECURRENCE&&!(q.dow instanceof Array)){for(var p=[],u=0;u<h.length;++u)p.push(h[u].value.dow);q.dow=p}t={repeat:{type:b.repeat.type,
"for":b.repeat["for"],runOnce:!0,start:b.repeat.start||null,end:b.repeat.end||null,value:[{type:k.type,value:k.value,index:n}]},timeValues:b.timeValues,label:b.label,startValue:b.startValue,endValue:b.endValue||null,schedules:b.schedules,index:b.index,groupId:b.groupId,eventId:b.eventId,npriority:b.npriority,priority:b.priority,color:b.color,exclude:b.exclude,blockId:b.blockId,sourceScheduleId:b.sourceScheduleId,sourceScheduleName:b.sourceScheduleName};try{switch(t.repeat.value[0].type){case this.REPEAT_WEEKLY:a=
new c;break;case this.REPEAT_EXCEPTION:a=new d;break;case this.REPEAT_DATE_RANGE:a=new l;break;case this.REPEAT_RECURRENCE:a=new r;break;default:console.error(this.declaredClass+" - decode(): Invalid repeat type",t.repeat.type,t)}}catch(C){console.error("Bacnet Calendar Event Error trying to decode calendar events",C,C.message,t.repeat.type,t)}m=m.concat(a.decode(t,f,!0))},k.clone(b.repeat.value)));return m},_getDateRepeatUniqueIndex:function(b){return 3*(13*(37*b.dom+b.m)+b.y)},_getRecurrenceRepeatUniqueIndex:function(b){return 7*
(11*(17*b.m+b.dow)+b.wom)}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Date":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang webview/util/dateUtils webview/util/globalConstants ./_IOEvent ./Event".split(" "),function(p,m,k,h,g,d,l){return m("webview/reliable/_enterpriseSchedule/calendarEvents/Date",l,{encode:function(d){var f={};p.forEach(d,k.hitch(this,function(b){var c;c=void 0===b.npriority?"high"===b.priority?2:9:b.npriority;for(var d=this.getUniqueIndex(b.repeat.value.y,
b.repeat.value.m,b.repeat.value.dom,b.label,b.schedules,b.blockId,c);f[d];)c++,d=this.getUniqueIndex(b.repeat.value.y,b.repeat.value.m,b.repeat.value.dom,b.label,b.schedules,b.blockId,c);f[d]||(f[d]=[]);f[d].push(b)}));d=[];for(var c in f)this._getTimeValues(f[c],this.REPEAT_EXCEPTION,d);return d},getUniqueIndex:function(d,g,c,b,h,l,m){for(var a=k.clone(b),a=a.toLowerCase(),f=b=0;f<a.length;f++)b+=a.charCodeAt(f)*(f+1);0>b&&(b*=-1);for(f=a=0;f<h.length;f++)a+=h[f];0>a&&(a*=-1);d=19*(3*(13*(37*c+g)+
d)+m)+b+a;if(null!==l){var q=0;p.forEach(l,function(a,b){q+=a*(b+1)});d*=q}0>d&&(d*=-1);return d},decode:function(f,l,c){for(var b=[],m=null,q=this._buildTimeValues(f.timeValues),r=0;r<q.length;r++)if(m=q[r],"string"!==typeof m.startValue||"default value"!==m.startValue.toLowerCase())for(var a=this._setDateAndTime(m),n=c?f.repeat.value[0].value:f.repeat.value,p=n.m,x=n.y,n=n.dom,w=k.clone(l.start),z=k.clone(l.end),y,A;w>=l.start&&w<=z;){A=!1;y=new Date(0);var B=0===w.getMonth()?9:w.getMonth()-2;y.setMonth(B);
w.getDate()===n&&(y.setDate(n),A=!0);n===g.WILDCARD&&(y.setDate(w.getDate()),A=!0);A&&(w.getFullYear()===x&&y.setFullYear(x),w.getMonth()===p&&y.setMonth(p),x===g.WILDCARD&&y.setFullYear(w.getFullYear()),p===g.WILDCARD&&y.setMonth(w.getMonth()),h.isSameDate(w,y)&&(A=k.clone(y),this._setTime(y,A,a.startTime,a.endTime),B=new d(f),b.push(this._buildEvent(B,y,A,m.startValue,m.endValue,m.summaryColor))));w.setDate(w.getDate()+1)}return b}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/_IOEvent":function(){define(["dojo/_base/declare",
"webview/util/globalConstants"],function(p,m){return p("webview/reliable/_enterpriseSchedule/calendarEvents/_IOEvent",null,{constructor:function(k){this.eventId=k.eventId||-1;this.groupId=k.groupId||"";this.index=null!==k.index?k.index:Number.MAX_SAFE_INTEGER;this.label=k.label||"New Event";this.repeat=k.repeat||{};this.priority=null!==k.priority?k.priority:"normal";this.npriority=k.npriority||m.MAX_PRIORITY;this.schedules=k.schedules||[];this.timeValues=k.timeValues||[];this.action=k.action||"update";
this.exclude=k.exclude||!1;this.reason=k.reason||"";this.sourceScheduleId=k.sourceScheduleId||-1;this.sourceScheduleName=k.sourceScheduleName||"";this.blockId=!k.blockId||k.blockId instanceof Array?void 0===k.blockId?null:k.blockId:[k.blockId]}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Event":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date webview/util/dateUtils webview/util/globalConstants webview/util/util ./_IOEvent ./CalEvent".split(" "),function(p,
m,k,h,g,d,l,f,r){return m("webview/reliable/_enterpriseSchedule/calendarEvents/Event",null,{DEFAULT_VALUE:"default value",MILLISECONDS_IN_DAY:d.DAY_IN_MILLISECONDS,REPEAT_CALENDAR:d.REPEAT_CALENDAR,REPEAT_DATE_RANGE:d.REPEAT_RANGE,REPEAT_EXCEPTION:d.REPEAT_EXCEPTION,REPEAT_WEEKLY:d.REPEAT_WEEKLY,REPEAT_OVERRIDE:d.REPEAT_OVERRIDE,REPEAT_RECURRENCE:d.REPEAT_RECURRENCE,TIMEVALUE_TYPE:{START_EVENT:0,END_EVENT:1},summaryColours:null,constructor:function(c){this.summaryColours=c?c.summaryColours||null:
null},decode:function(){throw"Must be implemented by child class";},encode:function(c){return this._encode(c)},_buildEvent:function(c,b,d,f,g,a){c.startTime=b;c.endTime=d;c.startValue=f;c.endValue=g;c.summaryColor=a;return c},_buildIOEvent:function(c){return new f({groupId:c.groupId,eventId:c.eventId,index:c.index,label:c.label,repeat:k.clone(c.repeat),priority:c.priority,npriority:c.npriority,schedules:c.schedules,timeValues:[],action:c.action,blockId:c.blockId,exclude:c.exclude||!1,reason:c.reason||
"",sourceScheduleId:c.sourceScheduleId||-1,sourceScheduleName:c.sourceScheduleName||""})},_buildTimeValues:function(c){for(var b=null,d=null,f=this.DEFAULT_VALUE,g=[],a={},h=0;c&&h<c.length;h++)d=c[h],"undefined"!==typeof d.endValue?(f=this._setLastEnd(d.endValue),b=d.endTime):(d.endValue=this.DEFAULT_VALUE,d.endTime="23:59:59"),f!==this.DEFAULT_VALUE&&(a={},a.startTime=b,a.endTime=h!==c.length-1?c[h+1].startTime:"23:59:59",a.startValue=f,a.endValue=this.DEFAULT_VALUE,a.summaryColor=this._getSummaryColourForValue(Number(f)),
g.push(a),b="",f=this.DEFAULT_VALUE),g.push(d);return g},_dateToTimeValue:function(c){return l.pad(c.getHours(),2,"0")+":"+l.pad(c.getMinutes(),2,"0")+":"+l.pad(c.getSeconds(),2,"0")},_encode:function(c){var b=null;try{var b=this._buildIOEvent(c),d={},f=[];d[c.index]||(d[c.index]={});var g=c.startTime;d[c.index]&&!d[c.index][g]&&(d[c.index][g]=c,f.push(c));b.timeValues=this._encodeTimeValues(f)}catch(a){}return b},_encodeTimeValues:function(c){var b=[],d=[],f={};p.forEach(c,function(c,a){f={};var g=
""+this._dateToTimeValue(c.startTime)+this._dateToTimeValue(c.endTime);d[g]||(d[g]=[],c.startValue!==c.endValue&&c.startTime.getTime()!==c.endTime.getTime()&&"delete"!==c.action&&"clean"!==c.dirty&&(f.startTime=this._dateToTimeValue(c.startTime),f.endValue=c.endValue,f.startValue=c.startValue,f.id=a,c.endTime?f.endTime=this._dateToTimeValue(c.endTime):delete f.endTime,b.push(f)))},this);return this._mergeAllTimeValues(b)},_getDayDifference:function(c,b){c.setHours(0,0,1);b.setHours(0,0,1);return h.difference(c,
b)},_getDirtyEvent:function(c,b){for(var d=0;d<c.length;d++)if(c[d].dirty===b)return c[d]},_getModifiedDate:function(c,b,d,f,g){0===g?(c.endTime.setDate(b),c.endTime.setHours(23,59,59)):g===f?(c.startTime.setDate(d),c.startTime.setHours(0,0,0)):(c.startTime.setDate(b+g),c.startTime.setHours(0,0,0),c.endTime.setDate(b+g),c.endTime.setHours(23,59,59))},_getSpannedTimeValues:function(c,b,f,g){for(var h=this._getDayDifference(new Date(c.startTime),new Date(c.endTime)),a=new r(c),k=0;k<=h;k++){a.startTime=
new Date(c.startTime);a.endTime=new Date(c.endTime);f=new Date(a.startTime);f.setDate(f.getDate()+k);this._getModifiedDate(a,c.startTime.getDate(),c.endTime.getDate(),h,k);if(0!==k){switch(b){case this.REPEAT_WEEKLY:break;case this.REPEAT_EXCEPTION:a.repeat.value.y=c.repeat.value.y===d.WILDCARD?d.WILDCARD:f.getFullYear();a.repeat.value.m=c.repeat.value.m===d.WILDCARD?d.WILDCARD:f.getMonth();a.repeat.value.dom=f.getDate();break;case this.REPEAT_RECURRENCE:a.repeat.value.m=c.repeat.value.m===d.WILDCARD?
d.WILDCARD:f.getMonth();a.repeat.value.wom!==d.WILDCARD&&c.startTime.getMonth()!==f.getMonth()&&(a.repeat.value.wom=0);a.repeat.value.dow=f.getDay();break;default:console.error("Event.js - _getTimeValues(): Invalid repeat type",b)}a.eventId=-1;a.action="add"}f=this._buildIOEvent(a);f.timeValues=this._encodeTimeValues([a]);g.push(f)}},_getSummaryColourForValue:function(c){for(var b="",d=0;d<this.summaryColours.length;d++)if(c<=this.summaryColours[d].value){b=this.summaryColours[d].colour;break}""===
b&&(b=this.summaryColours[this.summaryColours.length-1].colour);return b},_getTimeFromString:function(c){var b=new Date;c=c.split(":");2===c.lenght&&(c[2]="00");b.setHours(c[0],c[1],c[2],0);return b.getTime()},_getTimeValues:function(c,b,d){var f=this._getDirtyEvent(c,"dirty"),g=this._getDirtyEvent(c,"merged"),a=null,k=g?g:f;g&&f&&!this._haveSameSchedules(g,f)&&(k.schedules=f.schedules);0===h.compare(k.startTime,k.endTime,"date")||b===this.REPEAT_DATE_RANGE?(a=this._buildIOEvent(k),a.timeValues=this._encodeTimeValues(c),
d.push(a),void 0!==g&&void 0!==f&&g.index!==Number.MAX_SAFE_INTEGER&&f.index!==Number.MAX_SAFE_INTEGER&&g.index!==f.index&&(f.action="delete",c=this._buildIOEvent(f),d.push(c))):this._getSpannedTimeValues(k,b,a,d)},_hasTime:function(c){return void 0!==c&&null!==c&&c&&""!==c},_haveSameSchedules:function(c,b){if(c.schedules.length!==b.schedules.length)return!1;for(var d=0;d<c.schedules.length;d++)if(c.schedules[d]!==b.schedules[d])return!1;return!0},_mergeAllTimeValues:function(c){var b=[],d=[],f=!1,
g={start:null,squashedStart:null};p.forEach(c,k.hitch(this,function(a){b.push({id:a.id,time:a.startTime,value:a.startValue,type:this.TIMEVALUE_TYPE.START_EVENT});b.push({time:a.endTime,value:a.endValue,id:a.id,type:this.TIMEVALUE_TYPE.END_EVENT})}));for(b.sort(k.hitch(this,function(a,b){var c=this._getTimeFromString(a.time),d=this._getTimeFromString(b.time);return c>d?-1:c<d?1:a.type<b.type?-1:a.type>b.type?1:a.id>b.id?-1:a.id<b.id?1:0}));0<b.length;)c=b.pop(),c.type===this.TIMEVALUE_TYPE.START_EVENT?
f=this._mergeStartTime(d,g,c):f?f=!1:this._mergeEndTime(b,d,g,c);return d},_mergeEndTime:function(c,b,d,f){var g=function(a){a!==d.start.value&&(b.push({startTime:d.start.time,startValue:d.start.value,endTime:f.time,endValue:a}),d.start=null)},a=0<c.length?c[c.length-1]:{time:null};null!==d.squashedStart?f.id===d.squashedStart.id||d.squashedStart.value===f.value?d.squashedStart=null:a.time===f.time?a.type===this.TIMEVALUE_TYPE.START_EVENT?g(a.value):(d.squashedStart=null,c.pop(),a=0<c.length?c[c.length-
1]:{time:null},a.time===f.time?g(a.value):g(this.DEFAULT_VALUE)):(d.squashedStart.id!==f.id&&(c=d.squashedStart.value,g(c),d.start={id:f.id,time:f.time,value:c,type:this.TIMEVALUE_TYPE.START_EVENT}),d.squashedStart=null):a.time===f.time?d.start.value!==a.value?g(a.value):c.pop():g(this.DEFAULT_VALUE)},_mergeStartTime:function(c,b,d){if(null===b.start)return b.start=d,!1;if(b.start.time===d.time)return b.start=d,!0;if(b.start.value!==d.value)return d.id>b.start.id?(c.push({startTime:b.start.time,startValue:b.start.value,
endTime:d.time,endValue:d.value}),b.squashedStart=b.start,b.start=d):b.squashedStart=d,!1;b.start.id=Math.max(b.start.id,d.id);return!0},_setDateAndTime:function(c,b){var d=g.getFirstDayOfWeek(new Date);b||(b=d.getDay());var f=new Date(d.getTime()),d=new Date(d.getTime()),f=h.add(f,"day",b-1),f=this._setHoursAndMinutes(f,c.startTime);c.endTime?(d=h.add(d,"day",b-1),d=this._setHoursAndMinutes(d,c.endTime)):d.setHours(23,59,59);return{startTime:f,endTime:d}},_setDayOfWeek:function(c,b){var d=c.getDay(),
d=b-d;c.setDate(c.getDate()+d);return c},_setHoursAndMinutes:function(c,b){var d=b.split(":");2===d.length&&(d[2]="00");c.setHours(d[0],d[1],d[2]);return c},_setLastEnd:function(c){var b=null;this._hasTime(c)&&("string"===typeof c&&(b=c.toLowerCase()),b!==this.DEFAULT_VALUE&&(b=c));return b},_setTime:function(c,b,d,f){c.setHours(d.getHours());b.setHours(f.getHours());c.setMinutes(d.getMinutes());b.setMinutes(f.getMinutes());c.setSeconds(d.getSeconds());b.setSeconds(f.getSeconds())}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/DateRange":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang webview/util/globalConstants ./_IOEvent ./Event".split(" "),
function(p,m,k,h,g,d){return m("webview/reliable/_enterpriseSchedule/calendarEvents/DateRange",d,{encode:function(d){var f={};p.forEach(d,k.hitch(this,function(c){var b;b=void 0===c.npriority?"high"===c.priority?2:9:c.npriority;var d=this.getUniqueIndex(c.repeat.value.start.y,c.repeat.value.start.m,c.repeat.value.start.dom,c.label,c.schedules,c.blockId,b),d=d|this.getUniqueIndex(c.repeat.value.end.y,c.repeat.value.end.m,c.repeat.value.end.dom,c.label,c.schedules,c.blockId,b);f[d]||(f[d]=[]);f[d].push(c)}));
d=[];for(var g in f)this._getTimeValues(f[g],h.REPEAT_RANGE,d);return d},getUniqueIndex:function(d,f,g,c,b,h,m){for(var l=k.clone(c),l=l.toLowerCase(),a=c=0;a<l.length;a++)c+=l.charCodeAt(a)*(a+1);0>c&&(c*=-1);for(a=l=0;a<b.length;a++)l+=b[a];0>l&&(l*=-1);d=19*(3*(13*(37*g+f)+d)+m)+c+l;if(null!==h){var n=0;p.forEach(h,function(a,b){n+=a*(b+1)});d*=n}0>d&&(d*=-1);return d},decode:function(d,f,h){var c=[],b=null,l=null,m=null,b=d.repeat,r=this._buildTimeValues(d.timeValues),a=h?k.clone(b.value[0].value.start):
k.clone(b.value.start);h=h?k.clone(b.value[0].value.end):k.clone(b.value.end);for(var n=0;n<r.length;n++)if(b=r[n],"string"!==typeof b.startValue||"default value"!==b.startValue.toLowerCase()){var p=this._getBoundedEventDate(f.start,a),x=this._getBoundedEventDate(f.end,h);p<=f.start&&(p=k.clone(f.start));for(x>=f.end&&(x=k.clone(f.end));p>=f.start&&p<=x;){var l=new Date(0),l=k.clone(p),m=k.clone(l),w=this._setDateAndTime(b);this._setTime(l,m,w.startTime,w.endTime);w=new g(d);l=this._buildEvent(w,
l,m,b.startValue,b.endValue,b.summaryColor);c.push(l);p.setDate(p.getDate()+1)}}return c},_getBoundedEventDate:function(d,f){var g=k.clone(d);f.y!==h.WILDCARD&&g.setFullYear(f.y);var c=null;f.m!==h.WILDCARD&&(c=g.getDate(),g.setDate(1),g.setMonth(f.m));f.dom!==h.WILDCARD?g.setDate(f.dom):null!=c&&g.setDate(c);return g}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Recurrence":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang webview/util/globalConstants ./_IOEvent ./Event".split(" "),
function(p,m,k,h,g,d){return m("webview/reliable/_enterpriseSchedule/calendarEvents/Recurrence",d,{encode:function(d){var f={};p.forEach(d,k.hitch(this,function(b){var c=this.getUniqueIndex(b.repeat.value.m,b.repeat.value.wom,b.repeat.value.dow,b.label,b.schedules,b.blockId,void 0===b.npriority?"high"===b.priority?2:9:b.npriority);f[c]||(f[c]=[]);f[c].push(b)}));d=[];for(var g=Object.keys(f),c=0;c<g.length;++c)this._getTimeValues(f[g[c]],this.REPEAT_RECURRENCE,d);return d},getUniqueIndex:function(d,
f,g,c,b,h,m){for(var l=k.clone(c),l=l.toLowerCase(),a=c=0;a<l.length;a++)c+=l.charCodeAt(a)*(a+1);0>c&&(c*=-1);for(a=l=0;a<b.length;a++)l+=b[a];0>l&&(l*=-1);d=19*(7*(11*(17*d+g)+f)+m)+c+l;if(null!==h){var n=0;p.forEach(h,function(a,b){n+=a*(b+1)});d*=n}0>d&&(d*=-1);return d},decode:function(d,f,m){for(var c=[],b=this._buildTimeValues(d.timeValues),l=null,q=0;q<b.length;q++){var r=m?d.repeat.value[0].value:d.repeat.value;if(r.m!==h.WILDCARD||r.wom!==h.WILDCARD)console.error("Unsupported repeat pattern",
r);else if(l=b[q],"string"!==typeof l.startValue||"default value"!==l.startValue.toLowerCase())for(var a=this._setDateAndTime(l),r=m?r.dow[d.repeat.value[0].index]:r.dow,n=k.clone(f.start),p=k.clone(f.end),x,w;n>=f.start&&n<=p;){if(r===n.getDay()){x=k.clone(n);w=k.clone(n);this._setTime(x,w,a.startTime,a.endTime);var z=new g(d);c.push(this._buildEvent(z,x,w,l.startValue,l.endValue,l.summaryColor))}n.setDate(n.getDate()+1)}}return c}})})},"webview/reliable/_enterpriseSchedule/calendarEvents/Weekly":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/store/Memory ./_IOEvent ./Event".split(" "),
function(p,m,k,h,g,d){return m("webview/reliable/_enterpriseSchedule/calendarEvents/Weekly",d,{_getEventsForDayByAction:function(d,f,g){return g.repeat.value instanceof Array?g.action===f&&g.repeat.value[0]===d:g.action===f&&g.repeat.value===d},encode:function(d){var f=new h({data:d}),g={};p.forEach(d,k.hitch(this,function(b){g[b.repeat.value]||(g[b.repeat.value]=!0)}));d=[];for(var c=Object.keys(g),b=0;b<c.length;++b){var l=f.query(k.hitch(this,this._getEventsForDayByAction,Number(c[b]),"update")),
m=f.query(k.hitch(this,this._getEventsForDayByAction,Number(c[b]),"add"));m.length&&l.forEach(function(b){b.eventId=-1;b.action="add";b.schedules=m[0].schedules});l.push.apply(l,m);0<l.length&&this._getTimeValues(l,this.REPEAT_WEEKLY,d);l=f.query(k.hitch(this,this._getEventsForDayByAction,Number(c[b]),"delete"));this._removeTimevalues(d,l);d.push.apply(d,l)}return d},decode:function(d,f,h){for(var c=[],b,l,m=k.clone(f.start),r=this._buildTimeValues(d.timeValues),a=null;m>=f.start&&m<=f.end;){for(var n=
0;n<r.length;n++)if(a=r[n],"string"!==typeof a.startValue||"default value"!==a.startValue.toLowerCase()){var p=this._setDateAndTime(a,d.repeat.value);b=k.clone(m);l=k.clone(b);this._setTime(b,l,p.startTime,p.endTime);h?(b=this._setDayOfWeek(b,d.repeat.value[0].value),l=this._setDayOfWeek(l,d.repeat.value[0].value)):(b=this._setDayOfWeek(b,d.repeat.value),l=this._setDayOfWeek(l,d.repeat.value));p=new g(d);b=this._buildEvent(p,b,l,a.startValue,a.endValue,a.summaryColor);c.push(b)}m.setDate(m.getDate()+
7)}return c},_removeTimevalues:function(d,f){for(var g=f.length-1;0<=g;--g)for(var c=0;c<d.length;++c)f[g].eventId===d[c].eventId&&f.splice(g);for(g=0;g<d.length;++g)"undefined"!==typeof d[g].timeValues&&this._removeOverlappingTimeValues(d[g].timeValues)},_removeOverlappingTimeValues:function(d){for(var f,g,c,b,h=d.length-1;0<=h;--h){f=this._getTimeFromString(d[h].startTime);g=this._getTimeFromString(d[h].endTime);for(var k=h-1;0<=k;--k)c=this._getTimeFromString(d[k].startTime),b=this._getTimeFromString(d[k].endTime),
f<=c&&g>=b&&d.splice(k,1)}}})})},"webview/reliable/_enterpriseSchedule/EventManager":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!rc/nls/all dojo/promise/all dojo/store/Memory webview/util/globalConstants ./calendarEvents/Calendar ./calendarEvents/CalEvent ./calendarEvents/Date ./calendarEvents/DateRange ./calendarEvents/Event ./calendarEvents/Recurrence ./calendarEvents/Weekly".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a){return m("webview/reliable/_enterpriseSchedule/EventManager",
null,{schedule:null,viewRange:null,WEBVIEW_PURPLE:"#5A245E",eventID:0,esData:null,_newGroupId:0,_eventConflictTypes:{noConflict:0,highEncompass:1,lowEncompass:2,lowStart:3,highStart:4},summaryColours:null,valueMap:{2:1,4:0,9:1},constructor:function(a){this.schedule=a.schedule||null;this.viewRange=a.viewRange||null;this.esData=a.esData||null;this.summaryColours=a.summaryColours||null;this.schedule.valueType=this.esData.esDataType;this.schedule.value=this.valueMap[this.schedule.valueType.toString()]},
groupedEncode:function(c){var d=this.schedule;d.events=[];var f;f=new a({summaryColours:this.summaryColours});for(var g=f.encode(c.repeatWeekly),h=0;h<g.length;h++)d.events.push(g[h]);f=new b({summaryColours:this.summaryColours});g=f.encode(c.repeatDate);for(h=0;h<g.length;h++)d.events.push(g[h]);f=new t({summaryColours:this.summaryColours});g=f.encode(c.repeatDateRange);for(h=0;h<g.length;h++)d.events.push(g[h]);f=new u({summaryColours:this.summaryColours});g=f.encode(c.repeatRecurrence);for(h=0;h<
g.length;h++)d.events.push(g[h]);f=new r({summaryColours:this.summaryColours});g=f.groupedEncode(c.repeatCalendar);for(h=0;h<g.length;h++)d.events.push(g[h]);p.forEach(c.repeatOverride,function(a){f=new q({summaryColours:this.summaryColours});d.events.push(f.encode(a))},this);return d},decode:function(a){a=this._getAllEvents(a);p.forEach(a,function(a){delete a.summaryColor});return a},decodeSummary:function(a){a=this._getAllEvents(a);p.forEach(a,function(a){delete a.color});return this._mergeEvents(a)},
_getAllEvents:function(c){this.colorMap=c;var d=new l;p.forEach(this.schedule.events,k.hitch(this,function(c){var g;c.groupId=this._hasGroupId(c)?c.groupId:this._getGroupId();try{switch(c.repeat.type){case f.REPEAT_WEEKLY:g=new a({summaryColours:this.summaryColours});break;case f.REPEAT_EXCEPTION:g=new b({summaryColours:this.summaryColours});break;case f.REPEAT_RANGE:g=new t({summaryColours:this.summaryColours});break;case f.REPEAT_RECURRENCE:g=new u({summaryColours:this.summaryColours});break;case f.REPEAT_CALENDAR:g=
new r({summaryColours:this.summaryColours});break;default:console.error("EventManager.js - decode(): Invalid Repeat Type",c.repeat.type)}}catch(z){console.error(this.declaredClass+" - decode: Enterprise Schedule Error trying to decode calendar events",z,z.message,c.repeat.type,c)}g&&p.forEach(g.decode(c,k.clone(this.viewRange),!1),function(a){d.put(this.buildEvent(a))},this)}));return d.data},_mergeEvents:function(a){var b={},c=[],f=new h,g=new l({data:a}),n=function(a,b){if(b.startTime.getDate()===
a.startTime.getDate())return b};g.query().forEach(k.hitch(this,function(a){"undefined"===typeof b[a.startTime.getDate()]&&(b[a.startTime.getDate()]=g.query(k.hitch(this,n,a)))}));a=Object.keys(b);for(var m=a.length-1;0<=m;--m)c.push(this._mergeEventsByDay(b[a[m]]));d(c).then(k.hitch(this,function(a){for(var b=[],c=0;c<a.length;++c)for(var d=0;d<a[c].length;++d)b.push(a[c][d]);f.resolve(b)}));return f.promise},_getConflictType:function(a,b){return a.startTime>=b.endTime||a.endTime<=b.startTime?this._eventConflictTypes.noConflict:
a.startTime<=b.startTime&&a.endTime>=b.endTime?this._eventConflictTypes.highEncompass:a.startTime>=b.startTime?a.endTime>=b.endTime?this._eventConflictTypes.lowStart:this._eventConflictTypes.lowEncompass:this._eventConflictTypes.highStart},_mergeEventsByDay:function(a){var b=new h;a=a.sort(k.hitch(this,this._sortEvents));setTimeout(k.hitch(this,this._performMerge,a,b));return b.promise},_performMerge:function(a,b){for(var c=[],d,f,g,h=!0,l=!1;0<a.length;){h=!0;d=a[0];for(var m=1;m<a.length;++m){f=
a[m];l=!1;switch(this._getConflictType(f,d)){case this._eventConflictTypes.highEncompass:a.splice(0,1);h=!1;l=!0;break;case this._eventConflictTypes.lowStart:h=!1;f.startValue===d.startValue?(f.startTime=d.startTime,a.splice(0,1),l=!0):d.endTime=f.startTime;break;case this._eventConflictTypes.lowEncompass:h=!1;f.startValue===d.startValue?(f.startTime=d.startTime,f.endTime=d.endTime,a.splice(0,1),l=!0):(g=k.clone(d),g.startTime=f.endTime,d.endTime=f.startTime,a.push(g));break;case this._eventConflictTypes.highStart:h=
!1,f.startValue===d.startValue?(f.endTime=d.endTime,a.splice(0,1),l=!0):d.startTime=f.endTime}if(l)break}h&&(c.push(d),a.splice(0,1));a=a.sort(k.hitch(this,this._sortEvents))}b.resolve(c)},_sortEvents:function(a,b){return a.npriority<b.npriority?1:a.npriority>b.npriority?-1:a.index>b.index?1:a.index<b.index?-1:a.startTime>b.startTime?1:a.startTime>b.startTime?-1:0},buildEvent:function(a){switch(a.repeat.type){case f.REPEAT_RECURRENCE:if(a.repeat.value.dow instanceof Array)return this._buildEvents(a);
case f.REPEAT_WEEKLY:case f.REPEAT_CALENDAR:if(a.repeat.type!==f.REPEAT_RECURRENCE&&a.repeat.value instanceof Array)return this._buildEvents(a);case f.REPEAT_RANGE:case f.REPEAT_EXCEPTION:case f.REPEAT_OVERRIDE:return this._buildEvent(a);default:console.error(this.declaredClass+" - BuildEvent: Invalid Repeat Type",a.repeat.type)}},_getDateInfo:function(a,b,c){var d=new Date(a),f=new Date(b),g=c-a.getDay();d.setDate(a.getDate()+g);a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()&&a.getFullYear()===
b.getFullYear()&&(a=c-b.getDay(),f.setDate(b.getDate()+a));return{start:d,end:f}},_buildEvents:function(a){var b=[],d={},g=0,d=null,h=new c(a);switch(h.repeat.type){case f.REPEAT_WEEKLY:for(g=0;g<a.repeat.value.length;g++)d={type:a.repeat.type,value:a.repeat.value[g]},h.repeat=d,d=this._getDateInfo(h.startTime,h.endTime,d.value),h.startTime=d.start,h.endTime=d.end,0!==g&&(delete h.id,h.index=Number.MAX_SAFE_INTEGER,h.action="add"),b[g]=this._buildEvent(h);return b;case f.REPEAT_RECURRENCE:for(g=0;g<
a.repeat.value.dow.length;g++)d={type:a.repeat.type,value:{m:a.repeat.value.m,wom:a.repeat.value.wom,dow:a.repeat.value.dow[g]}},h.repeat=d,d=this._getDateInfo(h.startTime,h.endTime,d.value.dow),h.startTime=d.start,h.endTime=d.end,0!==g&&(delete h.id,h.index=Number.MAX_SAFE_INTEGER,h.action="add"),b[g]=this._buildEvent(h);return b;case f.REPEAT_CALENDAR:b=[];for(g=a.repeat.value.length-1;0<=g;g--)if(a.repeat.value[g].type===f.REPEAT_RECURRENCE&&a.repeat.value[g].value.dow instanceof Array){for(h=
0;h<a.repeat.value[g].value.dow.length;h++)"delete"!==a.repeat.value[g].action&&(d={type:f.REPEAT_RECURRENCE,value:{dow:a.repeat.value[g].value.dow[h],wom:a.repeat.value[g].value.wom,m:a.repeat.value[g].value.m}},b.push(d));a.repeat.value.splice(g,1)}0<b.length&&(a.repeat.value=a.repeat.value.concat(b));return this._buildEvent(a);default:console.error(this.declaredClass+" - _buildEvents: Unimplemented Event Type",h.repeat.type)}},_buildEvent:function(a){var b=this.valueMap[this.schedule.valueType],
d=this.WEBVIEW_PURPLE;a.blockId||(d=a.color?a.color:this.colorMap[a.sourceScheduleId]);a.startValue=this._hasValue(a.startValue)?a.startValue:b;return new c({groupId:a.groupId||this._getGroupId(),eventId:a.eventId||-1,label:a.label||"New Event",startTime:a.startTime,endTime:a.endTime,startValue:a.startValue,endValue:a.endValue||"Relinquish",schedules:a.schedules||[],sourceScheduleId:a.sourceScheduleId||-1,sourceScheduleName:a.sourceScheduleName||"",value:this.schedule.value,valueType:this.schedule.valueType,
repeat:a.repeat,mnemonic:this.schedule.mnemonic,id:a.id,summary:this._buildLabel(a),isAllDay:this._isAllDay(a.startTime,a.endTime),color:d,priority:null!=a.priority?a.priority:0,action:a.action||"update",index:a.index||0===a.index?a.index:Number.MAX_SAFE_INTEGER,dirty:a.dirty||"clean",npriority:a.npriority,summaryColor:a.summaryColor,blockId:a.blockId||null,exclude:a.exclude||!1,reason:a.reason||""})},_hasValue:function(a){return null===a||void 0===a?!1:!0},_isAllDay:function(a,b){return 0===a.getHours()&&
23===b.getHours()&&0===a.getMinutes()&&59===b.getMinutes()?!0:!1},_getStateText:function(a){var b=a;switch(this.esData.esDataType){case f.DATATYPE_MULTI_STATE:a<=this.esData.esStates.length&&(b=this.esData.esStates[a-1].state);break;case f.DATATYPE_BINARY:b=2>a?0===a?g.off:g.on:a.toString()}return b},_buildLabel:function(a){var b=this.viewRange.end.getTime()-this.viewRange.start.getTime()<=f.WEEK_IN_MILLISECONDS?"\x3cbr /\x3e":" - ";a.label||(a.label="New Event");var c=a.startValue;if(void 0===c||
null===c)c=1;c=this._getStateText(c);return"\x3cspan class\x3d'eventLabel'\x3e"+a.label+b+"\x3c/span\x3eValue: "+c},_getGroupId:function(a){this._hasGroupId()||(a="tmp"+ ++this._newGroupId);return a},_hasGroupId:function(a){return a&&void 0!==a.groupId&&null!=a.groupId&&""!==a.groupId},_isCalendar:function(a){return a.repeat["for"]&&a.repeat["for"].length},onCreateEvent:function(a,b){var c=null;rc.session.canEditException()?c=this.buildEvent({dirty:"dirty",color:this.schedule.isBlockGroup?this.WEBVIEW_PURPLE:
this.colorMap[this.schedule.id],startTime:a,endTime:b,repeat:{type:f.REPEAT_EXCEPTION,value:{y:a.getFullYear(),m:a.getMonth(),dom:a.getDate()}},action:"add",schedules:[Number(this.schedule.id)],blockId:this.schedule.isBlockGroup?this.schedule.id:null}):rc.session.canEditDefault()&&(c=this.buildEvent({color:this.schedule.isBlockGroup?this.WEBVIEW_PURPLE:this.colorMap[this.schedule.id],startTime:a,endTime:b,repeat:{type:f.REPEAT_WEEKLY,value:a.getDay()},action:"add",schedules:[Number(this.schedule.id)],
blockId:this.schedule.isBlockGroup?this.schedule.id:null}));return c},reset:function(a,b,c,d){this.schedule=a;this.viewRange=b;this.eventID=0;this._newGroupId="";this.esData=c;this.summaryColours=d;this.schedule.valueType=this.esData.esDataType;this.schedule.value=this.valueMap[this.schedule.valueType.toString()]}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/CalendarBase":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/i18n!dojox/calendar/nls/buttons dojox/calendar/CalendarBase dojox/widget/_Invalidating dojox/widget/Selection ../StoreMixin ./Mouse".split(" "),
function(p,m,k,h,g,d,l){return m("webview/reliable/_enterpriseSchedule/overriddenViews/CalendarBase",[h,p,l,g,d],{configureButtons:function(){var d=!this.isLeftToRight();this.previousButton&&this.previousButton.set("label",k[d?"nextButton":"previousButton"]);this.nextButton&&this.nextButton.set("label",k[d?"previousButton":"nextButton"]);d&&this.previousButton&&this.nextButton&&(d=this.previousButton,this.previousButton=this.nextButton,this.nextButton=d);this.todayButton&&this.todayButton.set("label",
k.todayButton);this.dayButton&&this.dayButton.set("label",k.dayButton);this.weekButton&&this.weekButton.set("label",k.weekButton);this.fourDaysButton&&this.fourDaysButton.set("label",k.fourDaysButton);this.monthButton&&this.monthButton.set("label",k.monthButton)}})})},"webview/reliable/_enterpriseSchedule/overriddenViews/Mouse":function(){define("dojo/_base/array dojo/_base/event dojo/_base/lang dojo/_base/window dojo/on dojo/touch dojox/calendar/Mouse".split(" "),function(p,m,k,h,g,d,l){return k.extend(l,
{postCreate:function(){this.on("rendererCreated",k.hitch(this,function(f){var h=f.renderer.renderer;h.resizeStartHandle&&this.own(g(h.resizeStartHandle,d.press,k.hitch(this,function(c){this._isTouchEvent(c)&&this._onRendererHandleMouseDown(c,h,"resizeStart")})));h.moveHandle&&this.own(g(h.moveHandle,d.press,k.hitch(this,function(c){this._isTouchEvent(c)&&this._onRendererHandleMouseDown(c,h,"move")})));h.resizeEndHandle&&this.own(g(h.resizeEndHandle,d.press,k.hitch(this,function(c){this._isTouchEvent(c)&&
this._onRendererHandleMouseDown(c,h,"resizeEnd")})));this.own(g(h.domNode,d.press,k.hitch(this,function(c){this._isTouchEvent(c)&&this._rendererMouseDownHandler(c,h)})))}))},_onRendererHandleMouseDown:function(d,l,c){m.stop(d);this.showFocus=!1;var b=l.item.item;this.isItemBeingEdited(b)||(this._isEditing&&this._endItemEditing("mouse",!1),this.selectFromEvent(d,l.item._item,l,!0),this._setTabIndexAttr&&this[this._setTabIndexAttr].focus(),this._isTouchEvent(d)?(this._edProps=null,this.set("focusedItem",
b)):(this._edProps={editKind:c,editedItem:b,rendererKind:l.rendererKind,tempEditedItem:b,liveLayout:this.liveLayout},this.set("focusedItem",this._edProps.editedItem)));l=[];l.push(g(h.doc,"mouseup",k.hitch(this,this._editingMouseUpHandler)));l.push(g(h.doc,"mousemove",k.hitch(this,this._editingMouseMoveHandler)));b=this._edProps;null!==b&&(b.handles=l,b.eventSource="mouse",b.editKind=c);this._startPoint={x:d.screenX,y:d.screenY}},_editingMouseMoveHandler:function(d){if(null!==this._edProps){var f=
this._edProps;if(this._editingGesture)this._autoScroll(d.pageX,d.pageY,!0)||this._moveOrResizeItemGesture([this.getTime(d)],"mouse",d,this.getSubColumn(d));else if(Math.abs(this._startPoint.x-d.screenX)>=this.triggerExtent||Math.abs(this._startPoint.y-d.screenY)>=this.triggerExtent)this._isEditing||this._startItemEditing(f.editedItem,"mouse"),f=this._edProps,this._startItemEditingGesture([this.getTime(d)],f.editKind,"mouse",d)}},_editingMouseUpHandler:function(d){if(null!==this._edProps){var f=this._edProps;
this._stopAutoScroll();this._isEditing?(this._editingGesture&&this._endItemEditingGesture("mouse",d),this._endItemEditing("mouse",!1)):p.forEach(f.handles,function(c){c.remove()})}},_isTouchEvent:function(d){var f=!1;if("touch"===d.pointerType||void 0!==d.touches)f=!0;return f}})})},"webview/reliable/_enterpriseSchedule/widget/CalendarToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/ready dojo/Evented dojo/i18n!webview/nls/all dojo/text!./templates/CalendarToolbar.html webview/util/dateUtils rc/_Widget dijit/form/Button webview/widget/DateRangeNavigator".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b){return p("webview/reliable/_enterpriseSchedule/widget/CalendarToolbar",[b,l],{templateString:r,webviewStrings:f,_viewRangeButtons:null,_isCompact:!1,_isDataRangeCompact:!1,_labelHidden:!1,_currentSize:0,_fullButtonWidth:0,_fullDateRangeWidth:0,_bufferWidth:40,_labelWidth:0,_currentLabelWidth:0,_currentDateRangeWidth:0,_currentViewButtonWidth:0,_viewChangeComplete:null,postCreate:function(){this.inherited(arguments);this._viewRangeButtons=[];this.set("previousButton",
this.dateRangeNavigator.previousButton);this.set("nextButton",this.dateRangeNavigator.nextButton);this.dateRangeNavigator._initViewDateLabel();this.own(this.dateRangeNavigator.on("dateRangeChange",m.hitch(this,function(b){this.setViewRange(b.start,this.dateRangeNavigator.get("rangeType"),!0)})));this._configureViewRangeButtons()},startup:function(){this.inherited(arguments);d(m.hitch(this,this.toggleSummaryButton,!1))},_calculateDateRangeWidth:function(){if(this.dateRangeNavigator){var b=g.getComputedStyle(this.dateRangeNavigator);
this._currentDateRangeWidth=h.getMarginBox(this.dateRangeNavigator.domNode,b).w}},_calculateViewButtonWidth:function(){var b=g.getComputedStyle(this.buttonContainer);this._currentViewButtonWidth=h.getMarginBox(this.buttonContainer,b).w},_calculateLabelWidth:function(){var b=g.getComputedStyle(this.labelContainer);this._currentLabelWidth=h.getMarginBox(this.labelContainer,b).w},_resize:function(){this.inherited(arguments);var b=arguments[1][0];this._currentSize=b;this._calculateDateRangeWidth();this._calculateViewButtonWidth();
this._calculateLabelWidth();this._currentViewButtonWidth>this._fullButtonWidth&&(this._fullButtonWidth=this._currentViewButtonWidth);this._currentDateRangeWidth>this._fullDateRangeWidth&&(this._fullDateRangeWidth=this._currentDateRangeWidth);var c=this._currentDateRangeWidth+this._currentLabelWidth+this._currentViewButtonWidth,c=b.w-c;if(c<=this._bufferWidth)this._isDataRangeCompact=!0,k.add(this.dateRangeNavigator.viewDateLabel,"compact"),this._calculateDateRangeWidth(),c=this._currentDateRangeWidth+
this._currentLabelWidth+this._currentViewButtonWidth,c=b.w-c,c<=this._bufferWidth&&(this._compactButtonContainer(),this._calculateViewButtonWidth(),c=this._currentDateRangeWidth+this._currentLabelWidth+this._currentViewButtonWidth,c=b.w-c,c<=this._bufferWidth&&(this._labelWidth=this._currentLabelWidth,this._showLabel(!1)));else{var d=c>this._labelWidth+this._bufferWidth;this._labelHidden&&d&&(this._showLabel(!0),this._calculateLabelWidth(),c=this._currentDateRangeWidth+this._currentLabelWidth+this._currentViewButtonWidth,
c=b.w-c);d=c+this._currentViewButtonWidth>=this._fullButtonWidth+this._bufferWidth;this._isCompact&&!this._labelHidden&&d&&(this._uncompactButtonContainer(),this._calculateViewButtonWidth(),c=this._currentDateRangeWidth+this._currentLabelWidth+this._currentViewButtonWidth,c=b.w-c);d=c+this._currentDateRangeWidth>=this._fullDateRangeWidth+this._bufferWidth;this._isDataRangeCompact&&!this._isCompact&&!this._labelHidden&&d&&(this._isDataRangeCompact=!1,k.remove(this.dateRangeNavigator.viewDateLabel,
"compact"),this._calculateDateRangeWidth())}g.set(this.buttonContainer,"right","5px");this._labelHidden||g.set(this.labelContainer,"left",c/2+this._currentDateRangeWidth+"px")},_compactButtonContainer:function(){this._isCompact=!0;this._setButtonCompactLabels();k.add(this.todayButton.domNode,"circularButton");k.add(this.dayButton.domNode,"circularButton");k.add(this.weekButton.domNode,"circularButton");k.add(this.monthButton.domNode,"circularButton");k.add(this.summaryButton.domNode,"circularButton");
k.add(this.editButton.domNode,"circularButton");k.add(this.monthButtonContainer,"compact")},_uncompactButtonContainer:function(){this._isCompact=!1;this._setButtonFullLabels();k.remove(this.todayButton.domNode,"circularButton");k.remove(this.dayButton.domNode,"circularButton");k.remove(this.weekButton.domNode,"circularButton");k.remove(this.monthButton.domNode,"circularButton");k.remove(this.summaryButton.domNode,"circularButton");k.remove(this.editButton.domNode,"circularButton");k.remove(this.monthButtonContainer,
"compact")},_showLabel:function(b){this._labelHidden=!b;b?k.remove(this.labelContainer,"hidden"):k.add(this.labelContainer,"hidden")},updateLabel:function(b){this.labelContainer.innerHTML=b?b:"";this.resize(this._currentSize)},_configureViewRangeButtons:function(){var b=!this.isLeftToRight();this.own(this.previousButton.on("click",m.hitch(this,function(){b?this._doViewChange("next"):this._doViewChange("previous")})));this.own(this.nextButton.on("click",m.hitch(this,function(){b?this._doViewChange("previous"):
this._doViewChange("next")})));this._viewRangeButtons.push(this.todayButton);this.own(this.todayButton.on("click",m.hitch(this,function(){this.doViewChange("today");this._isMonthView=!1})));this._viewRangeButtons.push(this.dayButton);this.own(this.dayButton.on("click",m.hitch(this,function(){this.doViewChange("day");this._isMonthView=!1})));this._viewRangeButtons.push(this.weekButton);this.own(this.weekButton.on("click",m.hitch(this,function(){this.doViewChange("week");this._isMonthView=!1})));this._viewRangeButtons.push(this.monthButton);
this.own(this.monthButton.on("click",m.hitch(this,function(){this.doViewChange("month");this._isMonthView=!0})));this.own(this.summaryButton.on("click",m.hitch(this,this.doViewChange,"summary")));this.own(this.editButton.on("click",m.hitch(this,this.doViewChange,"summary")));this._setButtonFullLabels()},toggleSummaryButton:function(b){b?(k.remove(this.editButton.domNode,"hidden"),k.add(this.summaryButton.domNode,"hidden")):(k.add(this.editButton.domNode,"hidden"),k.remove(this.summaryButton.domNode,
"hidden"))},_doViewChange:function(b){!1!==this._viewChangeComplete&&(this._viewChangeComplete=!1,this.doViewChange(b))},calendarRenderComplete:function(){this._viewChangeComplete=!0},doViewChange:function(b){this.emit("doViewChange",b)},_setButtonFullLabels:function(){this.todayButton._setLabelAttr(f.rcbToday);this.dayButton._setLabelAttr(f.rcbDay);this.weekButton._setLabelAttr(f.rcbWeek);this.monthButton._setLabelAttr(f.rcbMonth)},_setButtonCompactLabels:function(){this.todayButton._setLabelAttr(f.rcbToday.substring(0,
1));this.dayButton._setLabelAttr(f.rcbDay.substring(0,1));this.weekButton._setLabelAttr(f.rcbWeek.substring(0,1));this.monthButton._setLabelAttr(f.rcbMonth.substring(0,1))},getCurrentDateRange:function(){return this.dateRangeNavigator.getCurrentDateRange()},setViewRange:function(b,c,d,a){this._onViewRangeChange(b,c,d,a)},_onViewRangeChange:function(b,d,f,a){this._interval=d;b=c.floorTime(b);var g=0;switch(d){case "day":this._isMonthView=!1;break;case "week":g=6;b=c.getFirstDayOfWeek(b);this._isMonthView=
!1;break;case "month":if(f||!c.isFirstDayOfMonthAndSunday(b)&&!c.isLastSundayofMonth(b))b=new Date(b),b.setDate(1),b.setMonth(b.getMonth()-1),b=c.getLastSundayOfMonth(b);f=new Date(b);1!==b.getDate()&&(f.setDate(1),f.setMonth(f.getMonth()+1));g=c.getDaysInMonth(f);f=c.getDOWOfFirstDayOfMonth(f);g+=f;0!==g%7&&(35>g?g=35:42>g&&(g=42));f=m.clone(b);f=c.ceilingTime(f);f.setDate(f.getDate()+g);g+=6-f.getDay();this._isMonthView=!0}f=m.clone(b);f=c.ceilingTime(f);f.setDate(f.getDate()+g);g={start:b,end:f};
this.dateRangeNavigator.setRangeType(d);this.dateRangeNavigator.setCurrentDateRange(g);this.onViewRangeChange(g);a&&a[0].toString()===b.toString()&&setTimeout(m.hitch(this,this.calendarRenderComplete),150)},disableNavigation:function(b){this.todayButton.set("disabled",b);this.dayButton.set("disabled",b);this.monthButton.set("disabled",b);this.weekButton.set("disabled",b);this.dateRangeNavigator.set("disabled",b)},onViewRangeChange:function(b){this.emit("viewRangeChange",b)},destroy:function(){this.inherited(arguments);
delete this._viewRangeButtons}})})},"webview/widget/DateRangeNavigator":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/popup dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-geometry dojo/keys dojo/on dojo/text!./templates/DateRangeNavigator.html webview/util/dateUtils webview/widget/Calendar dijit/form/Button".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q){return g("webview/widget/DateRangeNavigator",[m,p,k],{templateString:b,widgetsInTemplate:!0,
rangeType:"week",dateRange:{start:null,end:null,label:""},_labelClickHandle:null,_viewDateCalendar:null,_setDisabledAttr:function(b){this.previousButton.set("disabled",b);this.nextButton.set("disabled",b);l.toggle(this.viewDateLabel,"disabled",b);b?null!==this._labelClickHandle&&(this._labelClickHandle.remove(),this._labelClickHandle=null):null===this._labelClickHandle&&(this._labelClickHandle=c(this.viewDateLabel,"click",d.hitch(this,this._onViewDateClick)),this.own(this._labelClickHandle));this._set("disabled",
b)},_initViewDateLabel:function(){this._viewDateCalendar=new q({value:new Date});this.setCurrentDateRange(this._getDefaultDateRange());this.setViewDateLabel(this.rangeType);c(this._viewDateCalendar,"change",d.hitch(this,function(b){var a=t.floorTime(b);b=t.ceilingTime(b);var c=!1;if("month"!==this.rangeType)t.isSameDate(this.dateRange.start,a)||t.isSameDate(this.dateRange.end,b)||(c=!0);else{var d=new Date(this.dateRange.start);d.setDate(this.dateRange.start.getDate()+8);if(d.getMonth()!==a.getMonth()||
d.getFullYear()!==a.getFullYear())c=!0}c&&(this.dateRange.start=a,this.dateRange.end=b,this._onDateRangeChange());h.close(this._viewDateCalendar)}));c(document,"keyup",function(b){b.keyCode===r.ESCAPE&&h.close(this._viewDateCalendar)});c(this._viewDateCalendar,"blur",d.hitch(this,function(){h.close(this._viewDateCalendar)}));this._onDateRangeChange()},_getDefaultDateRange:function(){var b=t.getFirstDayOfWeek(new Date),b=t.floorTime(b),a=d.clone(b);a.setDate(b.getDate()+6);a=t.ceilingTime(a);this.setRangeType("week");
return{start:b,end:a}},_onViewDateClick:function(){var b=f.position(this.viewDateLabel),a=f.getMarginBox(this.viewDateLabel),c=null!==this.dateRange.start?this.dateRange.start:new Date;if("month"===this.rangeType){var d=new Date(c);d.setDate(c.getDate()+8);c=d}this._viewDateCalendar.set("value",c);h.open({popup:this._viewDateCalendar,x:b.x-35,y:b.y+a.h+10});this._viewDateCalendar.focus()},setViewDateLabel:function(){var b=this.dateRange.start,a=this.dateRange.end,c=t.getMonthAbbreviation(b.getMonth()),
d=b.getFullYear();switch(this.rangeType){case "day":a=t.getDayOfWeek(b.getDay());this.dateRange.label=a+", "+b.getDate()+" "+c+" "+d;break;case "week":if(b.getMonth()===a.getMonth())this.dateRange.label=b.getDate()+" - "+a.getDate()+" "+c+" "+d;else{var f=t.getMonthAbbreviation(a.getMonth());this.dateRange.label=b.getDate()+" "+c+" "+d+" - "+a.getDate()+" "+f+" "+a.getFullYear()}break;case "month":d=new Date(b);d.setDate(b.getDate()+8);c=t.getMonthAbbreviation(d.getMonth());d=d.getFullYear();this.dateRange.label=
c+" "+d;break;default:console.error(this.declaredClass+" - setViewDateLabel(): Invalid Range Type",this.rangeType)}this.viewDateLabel.innerHTML=this.dateRange.label},_onDateRangeChange:function(){this.onDateRangeChange({start:this.dateRange.start,end:this.dateRange.end})},onDateRangeChange:function(b){return b},getCurrentDateRange:function(){return d.clone(this.dateRange)},setCurrentDateRange:function(b){null!==b.start&&null!==b.end&&(this.dateRange.start=b.start,this.dateRange.end=t.ceilingTime(b.end),
this.setViewDateLabel())},setRangeType:function(b){this.rangeType=b}})})},"webview/widget/Calendar":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/Calendar dijit/form/DropDownButton dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/has dojo/i18n!rc/nls/all dojo/i18n!../nls/all dojo/text!./templates/Calendar.html".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q){var u=l("webview/widget/Calendar",[h,k],{rcStrings:b,templateString:q,webviewStrings:t});
u._MonthDropDownButton=l("webview/widget/_MonthDropDownButton",g,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new u._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",b);this.containerNode.innerHTML="\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+
b[a.getMonth()]+" - "+a.getFullYear()+"\x3c/div\x3e"}});u._MonthDropDown=l("webview/widget/_MonthDropDown",[m,p],{months:[],templateString:"\x3cdiv class\x3d'dijitCalendarMonthMenu dijitMenu webviewMonthDropDown' data-dojo-attach-event\x3d'onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=d.map(a,function(a,b){return a?"\x3cdiv class\x3d'dijitCalendarMonthLabel webviewMonthDropDown' month\x3d'"+b+"'\x3e"+a+"\x3c/div\x3e":
""}).join("")},_onClick:function(a){this.onChange(f.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){r.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return u})},"webview/reliable/_enterpriseSchedule/EnterpriseScheduleToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/text!./templates/EnterpriseScheduleToolbar.html ../../widget/ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f){return p("webview/reliable/_enterpriseSchedule/EnterpriseScheduleToolbar",[f],{rcStrings:h,templateString:l,webviewStrings:g,isAdmin:!1,canEdit:!1,_setAdminAttr:function(d){this._set("isAdmin",d);k.toggle(this.editValuesButton.domNode,"hidden",!d)},_setCanEditAttr:function(d){this._set("canEdit",d);k.toggle(this.saveButton.domNode,"hidden",!d);k.toggle(this.cancelButton.domNode,"hidden",!d)},onSaveClicked:function(){},onCancelClicked:function(){},onAhacClicked:function(){},
onEditClicked:function(){},_createButtonMap:function(){this._buttons={save:this.saveButton,cancel:this.cancelButton,ahac:this.ahacButton,edit:this.editValuesButton}},_createConnections:function(){this.own(d(this.saveButton.domNode,"click",m.hitch(this,function(){if(!this.saveButton.get("disabled"))this.onSaveClicked()})),d(this.cancelButton.domNode,"click",m.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancelClicked()})),d(this.ahacButton.domNode,"click",m.hitch(this,function(){if(!this.ahacButton.get("disabled"))this.onAhacClicked()})),
d(this.editValuesButton.domNode,"click",m.hitch(this,function(){if(!this.editValuesButton.get("disabled")&&this.canEdit)this.onEditClicked()})))}})})},"webview/widget/ClientWidgetToolbar":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-style".split(" "),function(p,m,k,h,g,d,l){return h("webview/widget/ClientWidgetToolbar",[m,p,k],{_buttons:{},baseClass:"client-toolbar",region:"top",_resizeConstants:-1,
_resizeTimeout:null,postCreate:function(){this._createButtonMap();this._createConnections()},_setTitleAttr:function(f){d.set(this._title,{innerHTML:f,title:f});this._set("title",f)},getButton:function(d){return this._buttons[d]},getPageButtons:function(){return this._buttons},resize:function(){null!==this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(g.hitch(this,function(){-1===this._resizeConstants&&this._getResizeConstants();l.set(this._title,{width:this.domNode.clientWidth-
this._resizeConstants+"px"})}),100)},setTitle:function(d){this.set("title",d)},_createButtonMap:function(){throw"_createButtonMap(): Child class must implement";},_createConnections:function(){throw"_createConnections(): Child class must implement";},_getResizeConstants:function(){var d=Object.values(this._buttons).reduce(function(c,b){var d=0;return d="number"!==typeof c?c.domNode.clientWidth+b.domNode.clientWidth+8:c+b.domNode.clientWidth+4}),g=l.get(this.domNode,"marginRight")+l.get(this._title,
"marginLeft")+l.get(this.buttonContainer,"marginRight");this._resizeConstants=d+g},destroy:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout);this.inherited(arguments)}})})},"webview/reliable/_enterpriseSchedule/EventEditor":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/CheckBox dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/currency dojo/date dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!webview/nls/afterHoursReport dojo/i18n!webview/nls/all dojo/i18n!webview/nls/enterpriseSchedules dojo/on dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./templates/EventEditor.html dojo/topic dojox/html/entities rc/_base/util ./calendarEvents/CalEvent ./utilityFunctions ../../_base/tooltip ../../util/globalConstants ../../widget/WarningDialog ../../widget/WarningDialogEnums ./widget/AppliesToManager dijit/form/Button dijit/form/Textarea dijit/form/TextBox ../../widget/RepeatSelector ../../widget/ValueInput".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M){return l("webview/reliable/_enterpriseSchedule/EventEditor",[m,p,k],{templateString:E,idPrefix:"",enterpriseId:null,afterHoursStrings:w,enterpriseScheduleStrings:y,_excludeEventCheckbox:null,_tooltipIds:null,_scheduleDataType:null,_scheduleDefaultValue:null,_scheduleMnemonic:null,_storeReady:!0,currency:null,colorMap:null,_eventType:null,_originalLabel:"",_originalBlocks:null,_originalEventId:-1,_previousEnterpriseId:null,
_widgetArray:null,informativeDialog:null,_dataStore:null,_data:null,_observeHandle:null,_eventId:null,_appliesToManagerDialog:null,_currentSelection:null,_rateMultipler:1,_valueChangeHandle:null,appliesToIsReadOnly:!1,newBlockDialog:null,isDirty:!1,changeHandles:null,priorityOptions:null,prioritySelection:null,WEBVIEW_PURPLE:"#5A245E",_EventTypeMap:{defaultEventType:0,specialEventType:1},constructor:function(){this.webviewStrings=z;this.rcStrings=x;this.eventTypeOptions=new B({idProperty:"value",
data:[{label:this.webviewStrings.specialEvent,value:this._EventTypeMap.specialEventType},{label:this.webviewStrings.defaultEvent,value:this._EventTypeMap.defaultEventType}]});this._dataStore=new C(new B);this._observeData(!0)},buildRendering:function(){this.inherited(arguments);q.set(this.reasonLabel,"for",this.reasonInput.id);v.set(this.reasonInput.domNode,"box-sizing","inherit");rc.session.hasRole(rc.session.roles2.configureEventPriority,!0)&&this._buildPrioritySelector();rc.session.hasRole(rc.session.roles2.configureAfterHoursEventReporting,
!0)&&(this._excludeEventCheckbox=new h({checked:!1,value:!0}),a.place(this._excludeEventCheckbox.domNode,this.excludeEventContainer,"first"),u.remove(this.excludeEventContainer,"hidden"),a.create("label",{"for":this._excludeEventCheckbox.id,innerHTML:this.enterpriseScheduleStrings.excludeFromReport},this.excludeEventContainer,"last"))},setDefaultAppliesTo:function(a){this._appliesToManagerDialog.set("defaultAppliesTo",a)},_buildPrioritySelector:function(){this.priorityOptions=new B({data:[{label:this.webviewStrings.normal,
id:0},{label:this.webviewStrings.highPriority,id:1}]});this.prioritySelection=new g({baseClass:"rcSelectBox webviewDropDown priority",store:this.priorityOptions,searchAttr:"label",labelAttr:"label",labelType:"html",autoComplete:!1,queryExpr:"*${0}*"});a.place(this.prioritySelection.domNode,this.priorityContainer,"last");a.create("label",{"for":this.prioritySelection.id,innerHTML:this.webviewStrings.priority+":"},this.priorityContainer,"first")},_observeData:function(a){!0===a?(this._data=this._dataStore.query(),
this._observeHandle=this._data.observe(f.hitch(this,this._dataStoreChanged),!0)):null!==this._observeHandle&&(this._observeHandle.cancel(),this._observeHandle.remove())},postCreate:function(){this.inherited(arguments);this.informativeDialog=new N({title:this.webviewStrings.invalidTimeTitleText,type:O.types.informative,text:this.webviewStrings.invalidTimeText});this._tooltipIds=[];this._widgetArray=[];this.own(A(this.repeatSelection,"contentChange",f.hitch(this,function(){this.onContentChanged()})));
this._eventType=new g({baseClass:"rcSelectBox webviewDropDown priority",store:this.eventTypeOptions,searchAttr:"label",labelAttr:"label",labelType:"html",autoComplete:!1,queryExpr:"*${0}*"},this.eventType);this._eventType.set("value",this._EventTypeMap.specialEventType);rc.session.canEditEnterprise()&&(rc.session.canEditDefault()||(this._eventType.set("value",this._EventTypeMap.specialEventType),u.add(this.eventTypeContainer,"hidden")),rc.session.canEditException()||(this._eventType.set("value",this._EventTypeMap.defaultEventType),
u.add(this.eventTypeContainer,"hidden")));this.own(A(this._eventType,"change",f.hitch(this,this._showEventOptions)));this.toggleEditState();this._widgetArray=[this.repeatSelection,this.valueInput];this.own(A(this.repeatSelection,"repeatValueChanged",f.hitch(this,this._disableCreate)));this.own(A(this.repeatSelection,"timeChange",f.hitch(this,this._setScheduleTreeLink)))},onContentChanged:function(){A.emit(this,"contentChange")},updateBlockSelector:function(a){null!==this._appliesToManagerDialog&&
this._appliesToManagerDialog.updateBlocks(a)},createAppliesToManager:function(a,b){null===this._appliesToManagerDialog&&(this._appliesToManagerDialog=new M({enterpriseScheduleId:this.enterpriseId,title:this.webviewStrings.eventAppliesTo,blocks:a,scheduleTreeData:b}),this.own(r.after(window,"onresize",f.hitch(this,this._resizeAppliesToManagerScrollArea))),this.own(A(this._appliesToManagerDialog,"saveAppliesTo",f.hitch(this,function(a,b){this._setScheduleTreeLink();var c=this._dataStore.get(this._eventId);
c.blockId=a.blockId;c.schedules=a.schedules;this._setData(c);b&&this._onDirty()}))),this.own(A(this._appliesToManagerDialog,"treeBuilt",f.hitch(this,this._onAppliesToReady))))},_showAppliesToManagerDialog:function(a){if(null!==this._appliesToManagerDialog){Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType?(u.add(this._appliesToManagerDialog.blockSelectionContainer.domNode,"hidden"),u.replace(this._appliesToManagerDialog.scheduleSelectionContainer.domNode,"topPane","childFilter")):
(u.remove(this._appliesToManagerDialog.blockSelectionContainer.domNode,"hidden"),u.replace(this._appliesToManagerDialog.scheduleSelectionContainer.domNode,"childFilter","topPane"));this._resizeAppliesToManagerScrollArea();var b=!1;if(this.appliesToIsReadOnly){var c=this._appliesToManagerDialog._previewStore.query({parent:"root"});1===c.length&&c[0].value===this.idPrefix&&c[0].type===(this._isForBlock?"block":"schedule")&&(b=!0)}this._appliesToManagerDialog.show(b);var b=this._dataStore.get(this._eventId),
d=b.parentSchedule||b.sourceScheduleId;if(this._appliesToManagerDialog.get("scheduleMapBuilt"))this._appliesToManagerDialog.setReadOnly(a||this.appliesToIsReadOnly,d);else var g=r.after(this._appliesToManagerDialog,"_buildScheduleMap",f.hitch(this,function(a){this._appliesToManagerDialog.setReadOnly(a,d);g.remove()},a||this.appliesToIsReadOnly))}},_resizeAppliesToManagerScrollArea:function(){this._appliesToManagerDialog.resize({l:10,t:10,h:.98*document.body.clientHeight,w:.98*document.body.clientWidth});
var a=v.getComputedStyle(this._appliesToManagerDialog.domNode),a=n.getMarginBox(this._appliesToManagerDialog.domNode,a).h,b=v.getComputedStyle(this._appliesToManagerDialog.titleBar),b=n.getMarginBox(this._appliesToManagerDialog.titleBar,b).h,c=v.get(this._appliesToManagerDialog.containerNode,"paddingTop"),c=c+v.get(this._appliesToManagerDialog.containerNode,"paddingBottom"),d=v.getComputedStyle(this._appliesToManagerDialog.searchContainer),d=n.getMarginBox(this._appliesToManagerDialog.searchContainer,
d).h,f=v.get(this._appliesToManagerDialog.scheduleSelectionPane.domNode,"paddingTop"),f=f+v.get(this._appliesToManagerDialog.scheduleSelectionPane.domNode,"paddingBottom"),a=a-b-c-d-f;v.set(this._appliesToManagerDialog.scheduleSelectionPane.domNode,"height",Math.floor(a)+"px");v.set(this._appliesToManagerDialog.blockPreviewPane.contentPaneBody,"height",Math.floor(a)+"px")},render:function(a,b,c,d,g,h,k){this.idPrefix!==a&&(this.idPrefix=a,this._scheduleDataType=d,this._scheduleDefaultValue=b.defaultValue,
this._scheduleMnemonic=b.mnemonic,this._increment=h,this.currency=k,this.domScheduleTree=c,this.valueInput.set("stateValues",g),this.valueInput.set("dataType",d),this._scheduleDataType===K.DATATYPE_BINARY&&(null!==this._valueChangeHandle&&this._valueChangeHandle.remove(),this._valueChangeHandle=A(this.valueInput,"valueChanged",f.hitch(this,function(a){this._rateMultipler=0<a?1:0;this._getScheduleTreeLinkText()})),this.own(this._valueChangeHandle)))},_showEventOptions:function(a){a===this._EventTypeMap.defaultEventType?
(q.set(this.appliesLabel,"innerHTML",this._getAppliesTo(!0)),u.add(this.reasonLabel,"hidden"),u.add(this.reasonInput.domNode,"hidden")):(u.remove(this.reasonLabel,"hidden"),u.remove(this.reasonInput.domNode,"hidden"),q.set(this.appliesLabel,"innerHTML",this._getAppliesTo(!1)));var b=this._dataStore.get(this._eventId);if(b&&(b.repeat.type===K.REPEAT_WEEKLY&&a!==this._EventTypeMap.defaultEventType||b.repeat.type!==K.REPEAT_WEEKLY&&a===this._EventTypeMap.defaultEventType)){var c=f.clone(b);c.repeat.type=
a;a==K.REPEAT_WEEKLY?c.repeat.value=b.startTime.getDay():(c.repeat.value={dom:b.startTime.getDate(),m:b.startTime.getMonth(),y:b.startTime.getFullYear()},this.repeatSelection._setDropDown(K.SINGLE_FREQ));this._onRepeatTypeChange(c,b)}this.repeatSelection.setEventType(a);this._hidePriorities(a)},_onAppliesToReady:function(){this.onAppliesToReady()},onAppliesToReady:function(){A.emit(this,"appliesToReady")},_onRepeatTypeChange:function(a,b){this.onRepeatTypeChange({newEvent:a,originalEvent:b})},onRepeatTypeChange:function(a){A.emit(this,
"repeatTypeChange",a)},_hidePriorities:function(a){a===this._EventTypeMap.defaultEventType?u.add(this.priorityContainer,"hidden"):u.remove(this.priorityContainer,"hidden")},_getAppliesTo:function(a){var b="";return b=a?this.webviewStrings.defaultApplies+":":this.webviewStrings.specialApplies+":"},_getScheduleTreeLinkText:function(){var a=null,b=this._appliesToManagerDialog.getUniqueAffectedSchedules();-1<b.indexOf(this.idPrefix)&&(a=this.idPrefix);var c=b.length-1;-1===c&&(a=Number(this.idPrefix));
var d="",g=["(+ "],h=this._appliesToManagerDialog.getSelectedBlocks(),k=f.clone(this._dataStore.get(this._eventId)),l=f.clone(k.blockId);0<h.length?(k.blockId=h,d=this._appliesToManagerDialog.getLabelFromId(h[0],"block"),1!==h.length&&(g=g.concat([h.length-1," ",this.webviewStrings.blocks," \x26 "])),g=g.concat([b.length," ",this.webviewStrings.schedules,")"])):(k.blockId=null,d=this._appliesToManagerDialog.getLabelFromId(a,"schedule"),g=1<=c?g.concat([c," ",this.webviewStrings.schedules,")"]):[this.webviewStrings.only]);
!1===this._checkBlockIds(l,k.blockId)&&this._setData(k);k.repeat.type===K.REPEAT_WEEKLY||this._scheduleDataType!==K.DATATYPE_BINARY?this._displayRateAndCost(0):this._displayRateAndCost(this._appliesToManagerDialog.get("rate"));return[d,g.join("")].join(" ")},_checkBlockIds:function(a,b){var c=!1;return c=a instanceof Array&&b instanceof Array?I.arraysAreSame(a,b):null===a&&null===b?!0:!1},_displayRateAndCost:function(a){a*=this._rateMultipler;u.toggle(this.rateContainer,"hidden",0>=a);var d={};null!==
this.currency&&(d={currency:this.currency,symbol:K.CurrencyToSymbol[this.currency]});var f=a.toFixed(2);null!==this.currency&&(f=c.format(a,d));q.set(this.totalRate,"innerHTML",f+this.webviewStrings.scheduleRate);var f=this._dataStore.get(this._eventId),g=0;null!==f.startTime&&null!==f.endTime&&(g=b.difference(f.startTime,f.endTime,"second"));a*=g/3600;f=a.toFixed(2);null!==this.currency&&(f=c.format(a,d));q.set(this.totalCost,"innerHTML",this.rcStrings.rtrTotal+" "+f)},_disableCreate:function(){this.createButton.set("disabled",
this.repeatSelection.isNoneChecked())},_setScheduleTreeLink:function(){q.set(this.scheduleTreeLink,"innerHTML",G.encode(this._getScheduleTreeLinkText()))},toggleEditState:function(){var a=this._dataStore.get(this._eventId);void 0!==a&&(u.add(this.eventTypeContainer,"hidden"),"add"===a.action?(rc.session.canEditDefault()&&rc.session.canEditException()&&!this._isViewingBlock()?(this._eventType.set("value",this._EventTypeMap.specialEventType),u.remove(this.eventTypeContainer,"hidden")):rc.session.canEditException()||
this._isViewingBlock()?this._eventType.set("value",this._EventTypeMap.specialEventType):rc.session.canEditDefault()&&!this._isViewingBlock()&&this._eventType.set("value",this._EventTypeMap.defaultEventType),this._eventType.value!==this._EventTypeMap.defaultEventType?(this.summary.set("value",a.label),this.summary.focus()):this.summary.set("value",this.webviewStrings.defaultEvent),u.add(this.deleteButton.domNode,"hidden"),u.add(this.saveButton.domNode,"hidden"),u.remove(this.cancelButton.domNode,"hidden"),
u.remove(this.createButton.domNode,"hidden")):(a.label&&this.summary.set("value",G.decode(a.label)),u.remove(this.deleteButton.domNode,"hidden"),u.remove(this.saveButton.domNode,"hidden"),u.add(this.cancelButton.domNode,"hidden"),u.add(this.createButton.domNode,"hidden")))},onBlockChange:function(a,b){A.emit(this,"blockChange",a,b)},_checkRepeatForReadOnly:function(a,b){var c=a.repeat.type;c!==K.REPEAT_WEEKLY||rc.session.canEditDefault()&&!this._isViewingBlock()?c===K.REPEAT_OVERRIDE?(b.reasonText=
this.webviewStrings.overrideEventErr,u.add(this.priorityContainer,"hidden"),b.isValidRepeat=!1):c!==K.REPEAT_RANGE||a.repeat.value.start.dom!==K.WILDCARD&&a.repeat.value.start.m!==K.WILDCARD&&a.repeat.value.start.y!==K.WILDCARD&&a.repeat.value.end.dom!==K.WILDCARD&&a.repeat.value.end.m!==K.WILDCARD&&a.repeat.value.end.y!==K.WILDCARD?c!==K.REPEAT_RECURRENCE||a.repeat.value.wom===K.WILDCARD&&a.repeat.value.m===K.WILDCARD?c!==K.REPEAT_CALENDAR||a.repeat.start&&a.repeat.end||(b.reasonText=this.webviewStrings.calendarEventErr,
u.add(this.priorityContainer,"hidden"),b.isValidRepeat=!1):(b.reasonText=this.webviewStrings.recurrSpecialErr,u.add(this.priorityContainer,"hidden"),b.isValidRepeat=!1):(b.reasonText=this.webviewStrings.recurrSpecialErr,u.add(this.priorityContainer,"hidden"),b.isValidRepeat=!1):(b.reasonText=this.webviewStrings.weeklySchedulePermission,u.add(this.deleteButton.domNode,"hidden"),b.isValidRepeat=!1)},_makeReadOnly:function(a){var b="",c=!1,d={isValidRepeat:!0,reasonText:""};this._checkRepeatForReadOnly(a,
d);d.isValidRepeat?(u.add(this.deleteButton.domNode,"hidden"),rc.session.canEditException()||Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType)?1<a.schedules.length||a.blockId instanceof Array&&0<a.blockId[0]||a.blockId&&0<a.blockId?(b=this.webviewStrings.parentEventErr,null===a.blockId||this.isBlockGroup&&-1!==a.blockId.indexOf(this._blockIndex))?null===a.blockId&&Number(this.idPrefix)!==a.sourceScheduleId&&(c=!0,this._canAccessSchedule(a.sourceScheduleId)&&(b+=this.webviewStrings.parentEventModify,
b+="\x3cspan class\x3d'linkable'\x3e"+G.encode(a.sourceScheduleName)+"\x3c/span\x3e")):(c=!0,b+=this.webviewStrings.parentEventModify,b+="\x3cspan class\x3d'linkable'\x3e"+G.encode(this._appliesToManagerDialog.getLabelFromId(a.blockId[0],"block"))+"\x3c/span\x3e"):console.error(this.declaredClass+" - _makeReadOnly(): Editable Event in Read Only Function",a):b=this.webviewStrings.specialEventsPermission:b=d.reasonText;this._disableFields(!0);q.set(this.nonEditReason,"innerHTML",b);if(c)var g=A(this.nonEditReason,
"click",f.hitch(this,function(){g.remove();if(null===a.blockId){var b=a.sourceScheduleId||this._getParentSchedule(a.schedules).id;this.onBlockChange(Number(b),!1)}else this.onBlockChange(a.blockId[0],!0)}));u.remove(this.reasonContainer,"hidden");u.add(this.eventTypeContainer,"hidden");u.add(this.saveButton.domNode,"hidden");u.add(this.cancelButton.domNode,"hidden");u.add(this.createButton.domNode,"hidden")},_getParentSchedule:function(a){return this.domScheduleTree.getParentFromArray(a)},_canAccessSchedule:function(a){return this.domScheduleTree.canAccessSchedule(a)},
_disableFields:function(a){this.summary.set("disabled",a);null!==this.prioritySelection&&this.prioritySelection.set("disabled",a);null!==this._excludeEventCheckbox&&this._excludeEventCheckbox.set("disabled",a);this.reasonInput.set("disabled",a);d.forEach(this._widgetArray,f.hitch(this,function(b){b.disableFields(a)}))},_onClickTreeLink:function(a){I.stopEvent(a);this._showAppliesToManagerDialog(!u.contains(this.reasonContainer,"hidden"))},_onDelete:function(){var a=this._dataStore.get(this._eventId);
a.schedules=this._appliesToManagerDialog.getUniqueAffectedSchedules();Number(this._getParentSchedule(a.schedules).id)!==Number(this.idPrefix)&&""!==a.mnemonic&&(a.schedules=[Number(this.idPrefix)]);this.onDelete(a)},onDelete:function(a){A.emit(this,"delete",a)},_onCancel:function(){this._removeChangeHandles();var a=this._dataStore.get(this._eventId);if("add"===a.action)this.onCancel(a)},onCancel:function(a){A.emit(this,"cancel",a)},_onUpdate:function(){var a=this._dataStore.get(this._eventId);this._removeChangeHandles();
this._setInfo();this.isDirty=!0;a.blockId=null;if(this._isForBlock)a.blockId=[this.idPrefix];else if(null!==this._appliesToManagerDialog){var b=this._appliesToManagerDialog.getSelectedBlocks();a.blockId=0<b.length?b:null}this.valueInput.validate()&&(Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType&&(a.blockId=null),this._validateTimeValues(a).then(f.hitch(this,function(a,b){-1!==b&&a.endTime.setHours(b.hours,b.minutes,b.seconds);this.onUpdate({submittedEvent:a,schedulesRemoved:this._schedulesRemoved(a),
originalSchedules:this._originalSchedules})},f.clone(a))))},update:function(){var a=this._dataStore.get(this._eventId);this._removeChangeHandles();this._setInfo();a.blockId=null;if(null!==this._appliesToManagerDialog){var b=this._appliesToManagerDialog.getSelectedBlocks();a.blockId=0<b.length?b:null}Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType&&(a.blockId=null)},onUpdate:function(a){A.emit(this,"update",a)},_onCreate:function(){var a=this._dataStore.get(this._eventId);
this._removeChangeHandles();this._setInfo();this.isDirty=!0;a.blockId=null;if(null!==this._appliesToManagerDialog){var b=this._appliesToManagerDialog.getSelectedBlocks();a.blockId=0<b.length?b:null}null!==a.blockId&&0!==a.blockId.length&&Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType?F.publish("sticky",{type:"error",message:this.webviewStrings.noDefaultsInBlock}):this.valueInput.validate()&&this._validateTimeValues(a).then(f.hitch(this,function(a,b){-1!==b&&a.endTime.setHours(b.hours,
b.minutes,b.seconds);this.onChange();this.onCreate(a)},f.clone(a)),f.hitch(this,this._setData,f.clone(a)))},onCreate:function(a){A.emit(this,"create",a)},_schedulesRemoved:function(a){if(a.schedules.length!==this._originalSchedules.length)return!0;var b=f.clone(this._originalSchedules);b.sort();a=f.clone(a.schedules);a.sort();for(var c=0;c<b.length;c++)if(b[c]!==a[c])return!0;return!1},_validateTimeValues:function(a){var b=new t;this.own(b);var c=this.repeatSelection.isValid();0<this._increment&&
this._doesEventSpanMultipleDays(a)?(a=60<this._increment?{increment:this._increment/60,unit:this.webviewStrings.hour}:{increment:this._increment,unit:this.webviewStrings.minute},this.informativeDialog.set({title:this.enterpriseScheduleStrings.invalidIncrement,type:O.types.informative,text:D.substitute(this.enterpriseScheduleStrings.timeValueIncrementMidnight,[a.increment,a.unit])}),this.informativeDialog.open(),b.reject()):c.valid?this.repeatSelection.checkIncrement(this._increment).then(f.hitch(this,
b.resolve)):(this.informativeDialog.set("title",this.webviewStrings.invalidTimeTitleText),this.informativeDialog.set("type",O.types.informative),this.informativeDialog.set("text",c.message),this.informativeDialog.open(),b.reject());return b.promise},_doesEventSpanMultipleDays:function(a){return a.repeat.type!==K.REPEAT_RANGE&&a.startTime.getDay()!==a.endTime.getDay()},_onLabelChange:function(a,b){this.onLabelChange({originalLabel:a,newEvent:b})},onLabelChange:function(a){A.emit(this,"labelChange",
a)},_setInfo:function(){var a=this._dataStore.get(this._eventId);a.summary=G.encode(q.get(this.summary,"value"));a.label=G.encode(q.get(this.summary,"value"));var b=f.clone(this.repeatSelection.getInfo());a.repeat=b.repeat;this.repeatSelection.frequencySelection.value!==K.WEEKLY_FREQ?(a.startTime=b.dateTime.startTime,a.endTime=b.dateTime.endTime):(a.startTime.setHours(b.dateTime.startTime.getHours(),b.dateTime.startTime.getMinutes(),b.dateTime.startTime.getSeconds(),0),a.endTime.setHours(b.dateTime.endTime.getHours(),
b.dateTime.endTime.getMinutes(),b.dateTime.endTime.getSeconds(),0));!1===this._isForBlock?a.schedules=this._appliesToManagerDialog.getSelectedSchedules():(b=this._appliesToManagerDialog.get("defaultAppliesTo").scheduleIds,a.schedules=b);0<a.schedules.length&&(this._isForBlock?a.color=this.WEBVIEW_PURPLE:(b=Number(this._getParentSchedule(a.schedules).id),a.color=this.colorMap[b],a.sourceScheduleId=b,a.sourceScheduleName=this._appliesToManagerDialog.getLabelFromId(b,"schedule")));a.priority="normal";
null!==this.prioritySelection&&(a.priority=1===Number(this.prioritySelection.get("value"))?"high":"normal",a.npriority===Number.MAX_VALUE&&(a.npriority=K.MAX_PRIORITY));b=f.clone(this.valueInput.getInfo());a.startValue=b.startValue;a.endValue=b.endValue;a.valueType=this._scheduleDataType;a.value=this._scheduleDefaultValue;a.mnemonic=this._scheduleMnemonic;a.exclude=null!==this._excludeEventCheckbox?this._excludeEventCheckbox.get("value"):!1;a.reason=this.reasonInput.get("value").trim();a.label!==
G.encode(this._originalLabel)&&this._onLabelChange(G.encode(this._originalLabel),a)},getInfo:function(a){var b=this._dataStore.get(this._eventId);if(void 0!==b&&(a||this._setInfo(),null!==b.blockId&&0!==b.blockId.length&&Number(this._eventType.get("value"))!==this._EventTypeMap.specialEventType)){F.publish("sticky",{type:"error",message:this.webviewStrings.noDefaultsInBlock});b.blockId=this._dataStore.get(this._originalEventId).blockId;return}return b},onChange:function(){A.emit(this,"change")},setStoreReady:function(a){this._storeReady=
a},reset:function(){this._storeReady&&this._fillData(new L)},_setData:function(a){var b=[],c=this._dataStore.get(this._originalEventId);void 0!==c&&b.push(c);null!==a&&b.push(a);this._dataStore.setData(b);this._eventId=b[b.length-1].id},fillData:function(a,b,c){a.isEditable=b;this._isNewEvent=void 0===c?!1:c;b=f.clone(a);b.id=0;this._isNewEvent?this._dataStore.setData([b,a]):(this._dataStore.setData([b]),this._dataStore.put(a))},_dataStoreChanged:function(a,b,c){0<=c&&(this._isNewEvent&&(b=f.clone(this.repeatSelection.getInfo()),
H.isSameRepeat(a.repeat,b.repeat)||(a.repeat=b.repeat),a.startTime!==b.dateTime.startTime&&a.startTime!==this._dataStore.data[0].startTime&&(a.startTime=b.dateTime.startTime),a.endTime!==b.dateTime.endTime&&a.endTime!==this._dataStore.data[0].endTime&&(a.endTime=b.dateTime.endTime)),this._fillData(a))},_fillData:function(a){"undefined"!==typeof a.id?this._eventId=a.id:(this._dataStore.setData([]),this._eventId=this._dataStore.add(a));null!==this.changeHandles?this._removeChangeHandles():this.isDirty=
!1;this.changeHandles=[];"dirty"===a.dirty?u.add(this.saveButton.domNode,"updateEventDirty"):u.remove(this.saveButton.domNode,"updateEventDirty");var b=null!==a.blockId;this._populateAppliesTo(a);this._setScheduleTreeLink();this._isForBlock=b;this._originalLabel=G.decode(a.label);this._originalSchedules=f.clone(a.schedules);null===a.repeat?this._showOptionsForNewEvent():a.repeat.type!==K.REPEAT_WEEKLY||this._isViewingBlock()?this._eventType.set("value",this._EventTypeMap.specialEventType):this._eventType.set("value",
this._EventTypeMap.defaultEventType);a.repeat.type===K.REPEAT_WEEKLY&&this._isViewingBlock()&&(a.isEditable=!1);this.toggleEditState();!1===a.isEditable?this._makeReadOnly(a):(u.add(this.reasonContainer,"hidden"),this._disableFields(!1));var b=new Date,c=(new Date).getMinutes()+30;b.setMinutes(c);this.repeatSelection.fillData(a);this._setEventLabel(a);null!==this._excludeEventCheckbox&&this._excludeEventCheckbox.set("value",a.exclude);this._fillPriority(a.priority);b={endValue:null!==a.endValue?f.clone(a.endValue):
"Relinquish",startValue:f.clone(a.startValue),valueType:this._scheduleDataType,defaultValue:this._scheduleDefaultValue};this.valueInput.fillData(b);this.reasonInput.set("value",a.reason);null!==a.blockId&&(this._eventType.set("value",this._EventTypeMap.specialEventType),u.add(this.eventTypeContainer,"hidden"));a.isEditable&&this._setInfo();"#aaa"!==a.color.toLowerCase()&&this._setupChangeHandles(a);this.onContentChanged()},_fillPriority:function(a){null!==this.prioritySelection&&("high"===a||1===
a?this.prioritySelection.set("value",1):this.prioritySelection.set("value",0))},_isViewingBlock:function(){var a=!1;this._appliesToManagerDialog&&this._appliesToManagerDialog.defaultAppliesTo&&(a=this._appliesToManagerDialog.defaultAppliesTo.blockIds&&0<this._appliesToManagerDialog.defaultAppliesTo.blockIds.length);return a},_populateAppliesTo:function(a){-1===a.eventId?this._appliesToManagerDialog.set("appliesTo",this._appliesToManagerDialog.get("defaultAppliesTo")):this._appliesToManagerDialog.set("appliesTo",
{blockIds:a.blockId?a.blockId:null,scheduleIds:a.schedules})},_populateBlockSelection:function(a,b){if(a){var c=b.blockId;c instanceof Array||(c=[c]);return this._appliesToManagerDialog.setApplicableBlocks(c)}return this._appliesToManagerDialog.setApplicableBlocks([this.idPrefix])},_setEventLabel:function(a){if(null===a.repeat)rc.session.canEditException()?this.summary.value=G.decode(f.clone(a.label)):this.summary.value=this.webviewStrings.weeklyEvent;else if(null===a.label||void 0===a.label)this.summary.value=
a.repeat.type!==K.REPEAT_WEEKLY?G.decode(f.clone(a.label)):this.webviewStrings.weeklyEvent},_setupChangeHandles:function(a){this.changeHandles.push(A(this.summary,"change",f.hitch(this,function(a,b){this.isDirty||a.label!==b&&this._onDirty()},a)));null!==this.prioritySelection&&this.changeHandles.push(A(this.prioritySelection,"change",f.hitch(this,function(a,b){this.isDirty||(9>a.npriority&&0===b||8<a.npriority&&1===b)&&this._onDirty();0<this._data.length&&(this._data[this._data.length-1].npriority=
b)},a)));null!==this._excludeEventCheckbox&&this.changeHandles.push(A(this._excludeEventCheckbox,"change",f.hitch(this,function(a,b){this.isDirty||b!==a.exclude&&this._onDirty()},a)));this.changeHandles.push(A(this.valueInput,"valueChanged",f.hitch(this,function(a,b){this.isDirty||a.startValue!==b&&this._onDirty()},a)));this.changeHandles.push(A(this.reasonInput,"change",f.hitch(this,function(a,b){this.isDirty||b!==a.reason&&this._onDirty()},a)));this.changeHandles.push(A(this.repeatSelection,"repeatValueChanged",
f.hitch(this,function(a){var b=this.repeatSelection.getInfo();a.originalStartTime&&(a.startTime=a.originalStartTime);H.isSameRepeat(b.repeat,a.repeat)&&b.dateTime.startTime.getTime()===a.startTime.getTime()&&b.dateTime.endTime.getTime()===a.endTime.getTime()||this._onDirty()},a)))},_showOptionsForNewEvent:function(){rc.session.canEditEnterprise()&&(rc.session.canEditException()||this._isViewingBlock()?this._eventType.set("value",this._EventTypeMap.specialEventType):this._eventType.set("value",this._EventTypeMap.defaultEventType))},
_getTime:function(a){var b=10>a.getHours()?"0"+a.getHours():a.getHours(),c=10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes();a=10>a.getSeconds()?"0"+a.getSeconds():a.getSeconds();return b+":"+c+":"+a},_onDirty:function(){this.isDirty=!0;u.add(this.saveButton.domNode,"updateEventDirty");this._removeChangeHandles();this.onDirty(this.isDirty)},onDirty:function(a){A.emit(this,"dirty",a)},_removeChangeHandles:function(){d.forEach(this.changeHandles,f.hitch(this,function(a){a.remove()}));this.changeHandles=
null},clear:function(){this._appliesToManagerDialog&&(this._appliesToManagerDialog._currentScheduleSelection=[])},destroy:function(){d.forEach(this._tooltipIds,function(a){J.remove(a)},this);this._removeChangeHandles();this.inherited(arguments)}})})},"webview/reliable/_enterpriseSchedule/widget/AppliesToManager":function(){define("dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-class dojo/dom-construct dojo/on dojo/text!./templates/AppliesToManager.html dojo/topic rc/_base/util ./BlockManager ../../../util/util".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return k("webivew/reliable/_enterpriseSchedule/widget/AppliesToManager",[t],{templateString:r,defaultAppliesTo:null,_isBlock:!1,_disableBlockSelection:!0,_originalSelection:null,postCreate:function(){this.inherited(arguments);this.blockPreviewPane.setTitleContent(this.webviewStrings.appliesToPreview,"left")},getLabelFromId:function(b,a){if("schedule"===a){var c=this._scheduleTreeStore.query({value:b});return 0<c.length?c[0].name:""}c=this._blockStore.query({id:b});
return 0<c.length?c[0].name:""},getSelectedBlocks:function(){return this.appliesTo.blockIds?this.appliesTo.blockIds:[]},getUniqueAffectedSchedules:function(){var b=[];this.open?this._previewStore.query({type:"schedule"}).forEach(function(a){-1===b.indexOf(a.value)&&b.push(a.value)}):b=this.appliesTo.scheduleIds;return b},makeClean:function(b){if(!0!==this._readOnly||b)this._dirty===b&&d.toggle(this.applyNode.firstChild,"dirtySaveIcon",!b),this._dirty=!b},onSaveAppliesTo:function(b){f.emit(this,"saveAppliesTo",
b,this._dirty);return b},setApplicableBlocks:function(b){var a=new g;this.own(a);if(0<b.length)if(m.forEach(b,h.hitch(this,function(a){this._blocks[a].set("checked",!0)})),1===this._previewStore.query({parent:"root"}).filter(function(a){return a.value===b[0]&&"block"===a.type}).length)a.resolve();else var d=0,f=c.subscribe("blockContentReceived",h.hitch(this,function(){b.length===++d&&(this._buildPreview(),a.resolve(),f.remove())}));else this._buildPreview(),a.resolve();return a.promise},setReadOnly:function(b,
a){d.toggle(this.commitNodes,"hidden",b);this._readOnly=b;for(var c in this._blocks)this._blocks[c]instanceof p&&this._blocks[c].set("disabled",b);for(var f in this._schedules.map)this._schedules.map[f]instanceof p&&(Number(f)===a?this._schedules.map[f].set("disabled",!0):this._schedules.map[f].set("disabled",b))},_buildBlockSelector:function(){},_buildDisplayedContent:function(){this.inherited(arguments);this.open&&this._selectCurrentAppliesTo()},_createCommitButtons:function(){this.commitNodes=
l.create("span",{"class":"blockManagerCommitOptions"});this.applyNode=l.create("span",{"class":"blockManagerCommitNode"},this.commitNodes,"last");l.create("span",{"class":"rc24Icon okIcon commitIcon"},this.applyNode,"first");l.create("span",{"class":"blockManagerCommitText",innerHTML:this.rcStrings.btnApply.toLocaleUpperCase()},this.applyNode,"last");this.own(f(this.applyNode,"click",h.hitch(this,this._saveAppliesTo)));this.blockPreviewPane.setTitleContent(this.commitNodes,"right")},_getDefaultAppliesToAttr:function(){return h.clone(this.defaultAppliesTo)},
_getRateAttr:function(){var b=0,a=[];this._scheduleTreeStore.query(h.hitch(this,function(a){return-1<this.appliesTo.scheduleIds.indexOf(a.value)&&0<a.rate})).forEach(function(c){-1===a.indexOf(c.value)&&(a.push(c.value),b+=c.rate)});return b},_getSelectedSchedules:function(){return this.getUniqueAffectedSchedules()},_modifyBlockSelection:function(b,a,d){if(d){d=this._previewStore.query(h.hitch(function(a){return"block"===a.type&&"root"===a.parent&&-1===q.alphaNumericSort(b,a.name)}));var f=this._previewStore.query({type:"schedule"});
0<d.length&&d.forEach(h.hitch(this,function(a){this._previewStore.remove(a.id)}));d.unshift({id:"block"+a,name:b,type:"block",value:a,parent:"root",rate:0,hasChildren:!0});f.forEach(h.hitch(this,function(a){this._previewStore.remove(a.id)}));d.forEach(h.hitch(this,function(a){this._previewStore.put(a)}));f.forEach(h.hitch(this,function(a){this._previewStore.put(a)}));this._getBlockContents(a).then(h.hitch(this,function(a){m.forEach(a,h.hitch(this,function(a){this._previewStore.put(a)}));m.forEach(this.getUniqueAffectedSchedules(),
h.hitch(this,function(a){this._schedules.map[a].set("checked",!0)}));c.publish("blockContentReceived")}),h.hitch(this,function(a){console.error(this.declaredClass+" - _modifyBlockSelection(): Error getting block contents",a)}));this._selectedBlocks.push(a)}else for(d=this.getUniqueAffectedSchedules(),f=this._selectedBlocks.indexOf(a),-1<f&&this._selectedBlocks.splice(f,1),f=this._previewStore.get("block"+a),"undefined"!==typeof f&&(f=this._previewStore.getChildren(f),m.forEach(f,h.hitch(this,function(a){this._previewStore.remove(a.id)}))),
this._previewStore.remove("block"+a),a=this.getUniqueAffectedSchedules(),f=d.length-1;0<=f;f--)-1===a.indexOf(d[f])&&this._schedules.map[d[f]].set("checked",!1)},_modifyScheduleSelection:function(b,a){if(!0!==this._readOnly){null!==this._previewTree&&(this._previewTree.destroy(),this._previewTree=null);if(b){var c=this._previewStore.query({type:"schedule",parent:"root"});if(0<c.length){var d=this._schedules.orderedNodes.indexOf(this._schedules.map[c[c.length-1].value]),c=this._schedules.orderedNodes.indexOf(this._schedules.map[a.value]);
if(c>d)this._previewStore.put({id:"schedule"+a.value,name:a.name,color:a.color,type:"schedule",value:a.value,parent:"root",rate:a.rate,hasChildren:!1});else{for(var d=this._previewStore.data,f=0,g=0;g<c;g++){var k=this._previewStore.query({type:"schedule",parent:"root",value:Number(this._schedules.orderedNodes[g].definedValue)});0<k.length&&(f=Math.max(d.indexOf(k[0]),0))}d.splice(f+1,0,{id:"schedule"+a.value,name:a.name,color:a.color,type:"schedule",value:a.value,parent:"root",rate:a.rate,hasChildren:!1});
this._previewStore.setData(d)}}else this._previewStore.put({id:"schedule"+a.value,name:a.name,color:a.color,type:"schedule",value:a.value,parent:"root",rate:a.rate,hasChildren:!1});this._currentScheduleSelection.push(a.value)}else this._previewStore.query({type:"schedule",value:a.value}).forEach(h.hitch(this,function(a){this._previewStore.remove(a.id)})),c=this._currentScheduleSelection.indexOf(a.value),this._currentScheduleSelection.splice(c,1);null!==this._buildPreviewDebounce&&clearTimeout(this._buildPreviewDebounce);
this._buildPreviewDebounce=setTimeout(h.hitch(this,this._buildPreview),10)}},_saveAppliesTo:function(){var b={blockId:[],schedules:[]};this._currentScheduleSelection=[];this._previewStore.query({parent:"root"}).forEach(h.hitch(this,function(a){"block"===a.type?b.blockId.push(a.value):b.schedules.push(Number(a.value))}));this.appliesTo.blockIds=b.blockId;this.appliesTo.scheduleIds=b.schedules;this.onSaveAppliesTo(b);this.hide(!1)},_selectCurrentAppliesTo:function(){this.appliesTo.blockIds&&0<this.appliesTo.blockIds.length?
this.setApplicableBlocks(this.appliesTo.blockIds):this.appliesTo.scheduleIds&&this._selectSchedules(this.appliesTo.scheduleIds)},_selectSchedules:function(c){this.defer(h.hitch(this,function(){if(!1===b.arraysAreSame(c,this._currentScheduleSelection)){for(var a,d=0;d<this._schedules.orderedNodes.length;d++)a=Number(this._schedules.orderedNodes[d].definedValue),-1<c.indexOf(a)&&this._schedules.orderedNodes[d].set("checked",!0);this._currentScheduleSelection=this._getSelectedSchedules();this._originalSelection=
h.clone(this._currentScheduleSelection);this._buildPreview();this.makeClean(!0)}}))}})})},"webview/widget/RepeatSelector":function(){define("dijit/form/FilteringSelect dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/i18n!webview/nls/enterpriseSchedules dojo/i18n!webview/nls/errorMessages dojo/on dojo/store/Memory dojo/text!webview/widget/templates/RepeatSelector.html ../reliable/_enterpriseSchedule/widget/IncrementOptionsDialog webview/util/dateUtils webview/util/globalConstants webview/util/util dijit/form/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox rc/widget/DateTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C){return d("webview/widget/RepeatSelector",[m,k,h,q],{widgetsInTemplate:!0,templateString:z,_EventTypeMap:{defaultEventType:0,specialEventType:1},_eventType:null,_timeValueArray:[],_dateBoxes:null,_daysOfWeek:[],_daysSelected:[],_changeListeners:null,_checkboxArray:{},dateTimeInfo:{},_incrementDialog:null,_repeatInfo:{},eventInfo:null,wildCard:B.WILDCARD,frequencyOptions:null,startDateText:null,endDateText:null,constructor:function(){this._changeListeners=
[];this.webviewStrings=a;this.rcStrings=u;this.errorStrings=v;this.enterpriseStrings=n;var b=f.getNames("days","abbr","standAlone"),c=f.getNames("days","narrow","standalone"),d=f.getNames("days","wide");this._daysOfWeek=[];for(var g=0;g<d.length;++g)this._daysOfWeek.push({dayName:d[g],displayLetter:c[g],abrv:b[g],checked:!1,numeric:g});this._checkboxArray={checkboxes:[],labels:[]};this.dateTimeInfo={startTime:null,endTime:null};this._repeatInfo={type:null,weeklyValue:[],dateValue:{y:null,m:null,dom:null},
dateRangeValue:{start:{y:null,m:null,dom:null},end:{y:null,m:null,dom:null}},recurrenceValue:{m:null,wom:null,dow:[]},terminatingRepeat:{start:{y:null,m:null,dom:null},end:{y:null,m:null,dom:null},value:[]}};this.frequencyOptions=new w({idProperty:"value",data:[{label:a.singleEvent,value:B.SINGLE_FREQ},{label:a.dateRangeEvent,value:B.DATE_RANGE_FREQ},{label:a.daily,value:B.DAILY_FREQ},{label:a.weekly,value:B.WEEKLY_FREQ},{label:a.monthly,value:B.MONTHLY_FREQ},{label:a.yearly,value:B.YEARLY_FREQ}]})},
postCreate:function(){this._timeValueArray=[];this._timeValueArray.push(this.startDate);this._timeValueArray.push(this.startTime);this._timeValueArray.push(this.endDate);this._timeValueArray.push(this.endTime);this.own(x(this.frequencySelection,"change",l.hitch(this,function(a){null!==this.eventInfo&&(this.onFrequencyTypeChange(Number(a)),this._showRepeatOption())})));this.own(x(this.startTime,"change",l.hitch(this,this.onTimeChange)),x(this.endTime,"change",l.hitch(this,this.onTimeChange)));this._dateBoxes=
[this.fromLabel,this.toLabel,this.startDate,this.endDate];this.own(x(this.terminatingDateCB,"change",l.hitch(this,this.showTerminatingOptions)))},buildRendering:function(){this.inherited(arguments);this.startTime.set("validator",l.hitch(this,function(a){return this.timeValidation(a,this.startTime,"start")}));this.endTime.set("validator",l.hitch(this,function(a){return this.timeValidation(a,this.endTime,"end")}));this.frequencySelection=new p({baseClass:"rcSelectBox webviewDropDown valueSelector",
store:this.frequencyOptions,searchAttr:"label",labelAttr:"label",labelType:"html",autoComplete:!1,queryExpr:"*${0}*"},this.frequencySelection);for(var a=0;a<this._daysOfWeek.length;a++){var b=t.create("input",{type:"checkbox",id:this._daysOfWeek[a].dayName,value:this._daysOfWeek[a].numeric,title:this._daysOfWeek[a].dayName,className:"hidden"},this.daySelectionNode),d="rcDayToggleUnchecked";0===a&&(d="rcDayToggleLeftUnchecked");a===this._daysOfWeek.length-1&&(d="rcDayToggleRightUnchecked");this._checkboxArray.labels[a]=
t.create("label",{"for":c.get(b,"id"),title:this._daysOfWeek[a].dayName,className:d,innerHTML:this._daysOfWeek[a].displayLetter},this.daySelectionNode);this.own(x(b,"click",l.hitch(this,function(a){this.onRepeatValueChanged();this._onChange(a.currentTarget)})));this._checkboxArray.checkboxes[a]=b}},isValid:function(){var a=!0,b="Repeat Valid",c=this.startDate.get("value"),d=this.endDate.get("value");this.startTime.isValid()?this.endTime.isValid()?d.getTime()<c.getTime()?(b=this.errorStrings.endDateBeforeStartDate,
a=!1):this.checkTimeValues()||(b=this.errorStrings.endTimeBeforeStartTime,a=!1):(b=this.endTime.invalidMessage,a=!1):(b=this.startTime.invalidMessage,a=!1);return{valid:a,message:b}},checkTimeValues:function(){var a=new Date(this.startDate.get("value")),b=this.startTime.get("value").split(":"),c=new Date(this.endDate.get("value")),d=this.endTime.get("value").split(":");2===b.length&&(b[2]="00");2===d.length&&(d[2]="00");a.setHours(b[0],b[1],b[2]);c.setHours(d[0],d[1],d[2]);return a.getTime()<c.getTime()},
timeValidation:function(a,b,c){var d=!1;a.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])(?::([0-5]?[0-9]))?$/)?d=!0:"midnight"===a.toLowerCase()?("start"===c?b.set("value","0:00:00"):b.set("value","23:59:59"),d=!0):"noon"===a.toLowerCase()&&(b.set("value","12:00:00"),d=!0);return d},checkIncrement:function(a){var b=new r,c=!0,d=0,f=!0;if(0<a&&this._repeatInfo.type!==B.REPEAT_WEEKLY){var g=this.startTime.get("value").split(":"),h=this.endTime.get("value").split(":"),k=60*g[0]+Number(g[1]),c=60*h[0]+Number(h[1]),
m=d=0;3===g.length&&(m=Number(g[2]));3===h.length&&(d=Number(h[2]));m!==d&&(f=!1);d=(c-k)%a;(c=0===d&&f)||"23"===h[0]&&"59"===h[1]&&"59"===h[2]&&(c=0===m&&0===(1440-k)%a)}c?b.resolve(-1):this._showIncrementOptions(a,d,g,h).then(l.hitch(this,b.resolve));return b.promise},setEventType:function(a){switch(a){case this._EventTypeMap.specialEventType:this._eventType=a;b.remove(this.terminatingDate,"hidden");b.remove(this.frequencyContainer,"hidden");break;case this._EventTypeMap.defaultEventType:this._eventType=
a;this.frequencySelection.set("value",B.WEEKLY_FREQ);b.add(this.terminatingDate,"hidden");this._showRepeatOption();b.add(this.frequencyContainer,"hidden");break;default:console.error("RepeatSelector.js - setEventType(): Invalid Event Type",a)}},onRepeatValueChanged:function(a){this.emit("repeatValueChanged")},disableFields:function(a){var d=a?b.add:b.remove;this.frequencySelection.set("disabled",a);d(this.frequencySelection.domNode,"disabled");this._disableDaySelection(a);g.forEach(this._timeValueArray,
l.hitch(this,function(b){c.set(b,"disabled",a);d(b.domNode,"disabled");void 0!==b.textbox&&(c.set(b.textbox,"disabled",a),d(b.textbox,"disabled"))}))},_clearListeners:function(){for(var a=this._changeListeners.length-1;0<this._changeListeners.length;)this._changeListeners[a].remove(),this._changeListeners.splice(a,1),a--},_onChange:function(a){var d=c.get(a,"checked"),f=c.get(a,"value"),g=(this._daysSelected[f]=d)?"rcDayToggleUnchecked":"rcDayToggle",h=d?"rcDayToggle":"rcDayToggleUnchecked";0===Number(f)&&
(g=d?"rcDayToggleLeftUnchecked":"rcDayToggleLeft",h=d?"rcDayToggleLeft":"rcDayToggleLeftUnchecked");Number(f)===this._daysOfWeek.length-1&&(g=d?"rcDayToggleRightUnchecked":"rcDayToggleRight",h=d?"rcDayToggleRight":"rcDayToggleRightUnchecked");b.replace(a.nextSibling,h,g)},isNoneChecked:function(){return Number(this.frequencySelection.get("value"))!==B.WEEKLY_FREQ?!1:!g.some(this._checkboxArray.checkboxes,function(a){return c.get(a,"checked")},this)},_onTypeChange:function(a){return a},_setupChangeListeners:function(){var a=
function(a,b){var c=b.split(":");if(a.getHours()!==Number(c[0]))this.onRepeatValueChanged();else if(a.getMinutes()!==Number(c[1]))this.onRepeatValueChanged();else if(3===c.length&&Number(c[2])!==a.getSeconds())this.onRepeatValueChanged();else if(3>c.length&&0<a.getSeconds())this.onRepeatValueChanged()},b=function(a,b){a.setHours(0);b.setHours(0);if(a!==b)this.onRepeatValueChanged()};this._changeListeners.push(x(this.startTime,"change",l.hitch(this,a,this.eventInfo.startTime)));this._changeListeners.push(x(this.endTime,
"change",l.hitch(this,a,this.eventInfo.endTime)));this._changeListeners.push(x(this.startDate,"change",l.hitch(this,b,l.clone(this.eventInfo.startTime))));this._changeListeners.push(x(this.endDate,"change",l.hitch(this,b,l.clone(this.eventInfo.endTime))))},onFrequencyTypeChange:function(a){this.hideDateBoxes(!this.terminatingDateCB.get("checked"));b.toggle(this.terminatingDate,"hidden",this._eventType===this._EventTypeMap.defaultEventType);-1===this.eventInfo.eventId&&this.terminatingDateCB.set("checked",
!1);switch(a){case B.WEEKLY_FREQ:if(-1===this.eventInfo.eventId){var d=this.startDate.get("value");a=null;try{a=null===d?this.eventInfo.startTime.getDay():d.getDay()}catch(F){a=(new Date).getDay()}d=this._checkboxArray.checkboxes[a];this._daysOfWeek[a].checked=!0;c.set(d,"checked",!0);this._onChange(d)}break;case B.DAILY_FREQ:break;case B.DATE_RANGE_FREQ:case B.SINGLE_FREQ:g.forEach(this._dateBoxes,function(a){void 0===a.domNode?b.remove(a,"hidden"):b.remove(a.domNode,"hidden")});b.add(this.terminatingDate,
"hidden");break;case B.MONTHLY_FREQ:case B.YEARLY_FREQ:b.remove(this.fromLabel,"hidden");b.remove(this.startDate.domNode,"hidden");break;default:console.error(this.declaredClass+" - onFrequencyTypeChange(): Invalid Frequency Type",a)}this.onContentChange()},showTerminatingOptions:function(a){if(a)this.hideDateBoxes(!1);else this.onFrequencyTypeChange(Number(this.frequencySelection.get("value")));this.onContentChange()},onContentChange:function(){this.emit("contentChange")},_showIncrementOptions:function(a,
b,c,d){var f=new r;this.own(f);null===this._incrementDialog?this._incrementDialog=new y({title:this.enterpriseStrings.invalidIncrement,value:{minuteIncrement:a,incrementDifference:b,startTime:c,endTime:d}}):this._incrementDialog.set("value",{minuteIncrement:a,incrementDifference:b,startTime:c,endTime:d});this.own(x.once(this._incrementDialog,"optionSelected",l.hitch(this,f.resolve)));this.own(x.once(this._incrementDialog,"hide",l.hitch(this,function(a){a.isFulfilled()||a.reject()},f)));this._incrementDialog.show();
return f.promise},_showRepeatOption:function(){var a=Number(this.frequencySelection.get("value"))===B.WEEKLY_FREQ;b.toggle(this.daySelectionNode,"hidden",!a)},_clearCheckboxes:function(){for(var a=0;a<this._daysOfWeek.length;a++){var b=this._checkboxArray.checkboxes[a];c.get(b,"checked")&&(c.set(b,"checked",!1),this._onChange(b));this._daysOfWeek[a].checked=!1}},_getWeekNumber:function(a){var b=new Date(a);b.setDate(1);a=a.getDate()+b.getDay();return Math.ceil(a/7)-1},_getType:function(){var a=null;
if(this._eventType===this._EventTypeMap.defaultEventType)return B.REPEAT_WEEKLY;var b=new Date(this.startDate.get("value")),c=new Date(this.endDate.get("value")),d=Number(this.frequencySelection.get("value")),f=this._repeatInfo.dateValue,g=this.terminatingDateCB.get("checked");g&&(this._repeatInfo.terminatingRepeat.start={dom:b.getDate(),m:b.getMonth(),y:b.getFullYear()},this._repeatInfo.terminatingRepeat.end={dom:c.getDate(),m:c.getMonth(),y:c.getFullYear()});f={};switch(d){case B.WEEKLY_FREQ:g?
(this._repeatInfo.terminatingRepeat.value=[],a=B.REPEAT_CALENDAR):a=B.REPEAT_RECURRENCE;break;case B.DATE_RANGE_FREQ:this._repeatInfo.dateRangeValue={start:{dom:b.getDate(),m:b.getMonth(),y:b.getFullYear()},end:{dom:c.getDate(),m:c.getMonth(),y:c.getFullYear()}};a=B.REPEAT_RANGE;break;case B.SINGLE_FREQ:f={dom:b.getDate(),m:b.getMonth(),y:b.getFullYear()};this._repeatInfo.dateValue=f;a=B.REPEAT_EXCEPTION;break;case B.DAILY_FREQ:f={dom:this.wildCard,m:this.wildCard,y:this.wildCard};this._repeatInfo.dateValue=
f;g?(this._repeatInfo.dateRangeValue={start:{dom:b.getDate(),m:b.getMonth(),y:b.getFullYear()},end:{dom:c.getDate(),m:c.getMonth(),y:c.getFullYear()}},a=B.REPEAT_RANGE):a=B.REPEAT_EXCEPTION;break;case B.MONTHLY_FREQ:f={dom:b.getDate(),m:this.wildCard,y:this.wildCard};this._repeatInfo.dateValue=f;g?(this._repeatInfo.terminatingRepeat.value=[],f={type:B.REPEAT_EXCEPTION,value:f},this._repeatInfo.terminatingRepeat.value[0]=f,a=B.REPEAT_CALENDAR):a=B.REPEAT_EXCEPTION;break;case B.YEARLY_FREQ:f={dom:b.getDate(),
m:b.getMonth(),y:this.wildCard};this._repeatInfo.dateValue=f;g?(this._repeatInfo.terminatingRepeat.value=[],f={type:B.REPEAT_EXCEPTION,value:f},this._repeatInfo.terminatingRepeat.value[0]=f,a=B.REPEAT_CALENDAR):a=B.REPEAT_EXCEPTION;break;default:console.error(this.declaredClass+" - _getType(): Invalid Option Selected",d)}this._onTypeChange(a);return a},_saveRepeat:function(){var a=this.startTime.get("value"),b=this.endTime.get("value");a.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])$/)&&this.startTime.set("value",
a+":00");b.match(/^([0-1]?[0-9]|2[0-3]):([0-5]?[0-9])$/)&&this.endTime.set("value",b+":00");if(Number(this.frequencySelection.get("value"))===B.WEEKLY_FREQ){for(a=0;a<this._checkboxArray.checkboxes.length;a++)null!==this._checkboxArray.checkboxes[a]&&(this._daysOfWeek[a].checked=c.get(this._checkboxArray.checkboxes[a],"checked"));this._repeatInfo.weeklyValue=[];this._repeatInfo.recurrenceValue.dow=[];this._repeatInfo.recurrenceValue.m=this.wildCard;this._repeatInfo.recurrenceValue.wom=this.wildCard;
for(a=b=0;a<this._daysOfWeek.length;a++)this._daysOfWeek[a].checked&&(this._repeatInfo.weeklyValue[b]=this._daysOfWeek[a].numeric,this._repeatInfo.recurrenceValue.dow[b++]=this._daysOfWeek[a].numeric)}else this._clearCheckboxes();this._daysSelected=[];this._repeatInfo.type=this._getType();if(this._repeatInfo.type===B.REPEAT_CALENDAR)if(Number(this.frequencySelection.get("value"))===B.WEEKLY_FREQ)for(a=0;a<this._repeatInfo.recurrenceValue.dow.length;++a)this._repeatInfo.terminatingRepeat.value.push({type:B.REPEAT_RECURRENCE,
value:{dow:this._repeatInfo.recurrenceValue.dow[a],wom:B.WILDCARD,m:B.WILDCARD}});else this._repeatInfo.terminatingRepeat.value={type:B.REPEAT_EXCEPTION,value:this._repeatInfo.dateValue}},getInfo:function(){this._saveRepeat();var a=this._repeatInfo.type,b=this.startTime.get("value").split(":");2===b.length&&(b[2]="00");var c=new Date(this.startDate.get("value"));c.setHours(b[0],b[1],b[2]);b=this.endTime.get("value").split(":");2===b.length&&(b[2]="00");var d=new Date(this.endDate.get("value")),f=
Number(this.frequencySelection.get("value"));a===B.REPEAT_CALENDAR||f!==B.DAILY_FREQ&&f!==B.WEEKLY_FREQ&&f!==B.YEARLY_FREQ&&f!==B.MONTHLY_FREQ||(d=new Date(this.startDate.get("value")));d.setHours(b[0],b[1],b[2]);this.endDate.set("value",d);a={repeat:{type:a,value:null},dateTime:{startTime:c,endTime:d}};switch(a.repeat.type){case B.REPEAT_WEEKLY:a.repeat.value=this._repeatInfo.weeklyValue;c=0;b=a.dateTime.startTime;d=b.getDay();a.repeat.value instanceof Array?-1===a.repeat.value.indexOf(d)&&(c=d-
a.repeat.value[0]):c=d-a.repeat.value;a.dateTime.startTime.setDate(b.getDate()-c);a.dateTime.endTime.setDate(a.dateTime.endTime.getDate()-c);break;case B.REPEAT_EXCEPTION:a.repeat.value=this._repeatInfo.dateValue;break;case B.REPEAT_RANGE:a.repeat.value=this._repeatInfo.dateRangeValue;break;case B.REPEAT_RECURRENCE:a.repeat.value=this._repeatInfo.recurrenceValue;break;case B.REPEAT_CALENDAR:a.repeat.start=this._repeatInfo.terminatingRepeat.start;a.repeat.end=this._repeatInfo.terminatingRepeat.end;
a.repeat["for"]="";a.repeat.value=this._repeatInfo.terminatingRepeat.value;break;default:console.error(this.declaredClass+" - getInfo(): Returning bad value type: ",this._repeatInfo.type,this._repeatInfo)}return l.clone(a)},_getRecurrenceValue:function(a){return{dow:a.dow,m:a.m,wom:a.wom}},fillData:function(a){this._clearListeners();this.eventInfo=a;null!==this.startDateText&&(c.set(this.startDateText,"innerHTML",""),b.remove(this.startDateText,"readOnlyDateText"),this.startDateText=null);null!==
this.endDateText&&(c.set(this.endDateText,"innerHTML",""),b.remove(this.endDateText,"readOnlyDateText"),this.endDateText=null);this._clearCheckboxes();var d=null,f=!1;null!==a.repeat&&a.repeat.type===B.REPEAT_CALENDAR?(f=!0,d=a.repeat.value instanceof Array?a.repeat.value[0]:a.repeat.value):(f=!1,d=a.repeat);if(null!==d&&void 0!==d.type){this.frequencySelection.set("disabled",a.startTime.getDate()!==a.endTime.getDate());this._repeatInfo.type=d.type;this._repeatInfo.type===B.REPEAT_WEEKLY?this.setEventType(this._EventTypeMap.defaultEventType):
this.setEventType(this._EventTypeMap.specialEventType);var g=d.value;switch(d.type){case B.REPEAT_WEEKLY:this._fillWeekly(a,f);break;case B.REPEAT_EXCEPTION:this._fillExceptionRepeat(g,a,f);break;case B.REPEAT_RANGE:this._fillRange(a,f);break;case B.REPEAT_RECURRENCE:this._fillRecurrenceRepeat(g,a,f);break;default:console.error(this.declaredClass+" - fillData(): Invalid repeat Type:",d.type,d)}}else rc.session.canEditEnterprise()&&(rc.session.canEditException()?this._fillSingle(a,f):this._fillWeekly(a,
f));this._showRepeatOption();this.eventInfo.hasOwnProperty("eventId")&&this.frequencySelection.set("disabled",-1!==this.eventInfo.eventId);setTimeout(l.hitch(this,this._setupChangeListeners),1)},_adjustTerminatingDOW:function(a,b,c){for(var d=0;d<a.length;++d)if(a[d].value.dow===b){a[d].value.dow=c;break}},_fillExceptionRepeat:function(a,b,c){a.y===this.wildCard&&a.m===this.wildCard&&a.dom===this.wildCard?this._fillDaily(b,c):a.y===this.wildCard&&a.m===this.wildCard&&a.dom!==this.wildCard?this._fillMonthly(b,
B.REPEAT_EXCEPTION,c):a.y===this.wildCard&&a.m!==this.wildCard&&a.dom!==this.wildCard?this._fillYearly(b,c):this._fillSingle(b,c)},_fillRecurrenceRepeat:function(a,b,c){a.m===this.wildCard&&a.wom===this.wildCard&&a.dow===this.wildCard?this._setDropDown(B.DAILY_FREQ):a.m===this.wildCard&&a.wom===this.wildCard&&a.dow!==this.wildCard?this._fillWeekly(b,c):console.error("Unsupported event",b)},_setDateTime:function(a,b){var c=a.getHours()+":"+C.pad(a.getMinutes(),2,0)+":"+C.pad(a.getSeconds(),2,0);this.startTime.set("value",
c);this.startDate.set("value",a);c=b.getHours()+":"+C.pad(b.getMinutes(),2,0)+":"+C.pad(b.getSeconds(),2,0);this.endTime.set("value",c);this.endDate.set("value",b)},_fillReadOnly:function(a){b.add(this.frequencyContainer,"hidden");b.add(this.daySelectionNode,"hidden");var c=new Date,d=new Date;null!==a.startTime&&(c=new Date(a.startTime));null!==a.endTime&&(d=new Date(a.endTime));this._setDateTime(c,d);this.hideDateBoxes(!0)},_fillSingle:function(a){this._setDropDown(B.SINGLE_FREQ);var b=new Date,
c=new Date;null!==a.startTime&&(b=new Date(a.startTime));null!==a.endTime&&(c=new Date(a.endTime));this._setDateTime(b,c)},_fillRange:function(a,c){this._setDropDown(B.DATE_RANGE_FREQ);var d=new Date(a.startTime),f=new Date(a.endTime);-1!==a.index&&a.repeat.value.start.y!==B.WILDCARD&&a.repeat.value.start.m!==B.WILDCARD&&a.repeat.value.start.dom!==B.WILDCARD&&a.repeat.value.end.y!==B.WILDCARD&&a.repeat.value.end.m!==B.WILDCARD&&a.repeat.value.end.dom!==B.WILDCARD&&(d.setFullYear(a.repeat.value.start.y,
a.repeat.value.start.m,a.repeat.value.start.dom),f.setFullYear(a.repeat.value.end.y,a.repeat.value.end.m,a.repeat.value.end.dom));this._setDateTime(d,f);b.toggle(this.startDate.domNode,"hidden",!1);b.toggle(this.endDate.domNode,"hidden",!1)},_fillDaily:function(a){this._setDropDown(B.DAILY_FREQ);this.terminatingDateCB.set("checked",!1);this._setDateTime(new Date(a.startTime),new Date(a.endTime))},_fillWeekly:function(a,b){this._setDropDown(B.WEEKLY_FREQ);var d;d=null;var f=new Date,g=new Date;if(b){d=
a.repeat.value;if(a.originalStartTime&&a.startTime!==a.originalStartTime){var h=a.startTime.getDay(),k=a.originalStartTime.getDay();this._adjustTerminatingDOW(d,k,h)}a.repeat.start&&(f=A.bacnetDateToJSDate(a.repeat.start),a.startTime<f&&(f=a.startTime));a.repeat.end&&(g=A.bacnetDateToJSDate(a.repeat.end));a.repeat.end&&a.repeat.start?(this.terminatingDateCB.set("checked",!0),this._disableDaySelection(!1)):this.terminatingDateCB.set("checked",!1);this._disableTerminatingCheckbox(!0)}else d=a.repeat,
this.terminatingDateCB.set("checked",!1),a.hasOwnProperty("eventId")&&this._disableDaySelection(-1!==a.eventId);h=f.getDay();if(null===d)g=A.addMinutes(g,30),this._setDateTime(f,g),d=this._checkboxArray.checkboxes[h],this._daysOfWeek[h].checked=!0,c.set(d,"checked",!0),this._onChange(d);else{b?(f.setHours(a.startTime.getHours(),a.startTime.getMinutes(),a.startTime.getSeconds(),0),g.setHours(a.endTime.getHours(),a.endTime.getMinutes(),a.endTime.getSeconds(),0)):(f=new Date(a.startTime),g=new Date(a.endTime));
this._setDateTime(f,g);f=null;f=[];if(d.type===B.REPEAT_WEEKLY)f=d.value;else if(b)for(f=[],g=0;g<d.length;++g)"delete"!==d[g].action&&f.push(d[g].value.dow);else f=d.value.dow;f=f instanceof Array?f:[f];this.setDaysForEvent(f)}},_disableDaySelection:function(a){this._disableTerminatingCheckbox(a);g.forEach(this._checkboxArray.checkboxes,l.hitch(this,function(b){c.set(b,"disabled",a)}));g.forEach(this._checkboxArray.labels,l.hitch(this,function(c){b.toggle(c,"disabled",a)}))},_disableTerminatingCheckbox:function(a){this.terminatingDateCB.set("disabled",
a);b.toggle(this.terminatingDate,"disabled",a)},_fillMonthly:function(a,b,c){this._setDropDown(B.MONTHLY_FREQ);b=new Date(a.startTime);var d=new Date(a.endTime);c?(a.repeat.start&&(b!==a.originalStartTime&&(a.repeat.start.dom=b.getDate()),b=A.bacnetDateToJSDate(a.repeat.start)),a.repeat.end&&(d!==a.originalEndTime&&(a.repeat.end.dom=d.getDate()),d=A.bacnetDateToJSDate(a.repeat.end)),a.repeat.end&&a.repeat.start?this.terminatingDateCB.set("checked",!0):this.terminatingDateCB.set("checked",!1),this._disableTerminatingCheckbox(!0)):
(this.terminatingDateCB.set("checked",!1),a.hasOwnProperty("eventId")&&this._disableTerminatingCheckbox(-1!==a.eventId));b.setHours(a.startTime.getHours(),a.startTime.getMinutes(),a.startTime.getSeconds());d.setHours(a.endTime.getHours(),a.endTime.getMinutes(),a.endTime.getSeconds());this._setDateTime(b,d)},_fillYearly:function(a,b){-1!==a.index&&this._setDropDown(B.YEARLY_FREQ);var c=new Date(a.startTime),d=new Date(a.startTime);b?(a.repeat.start&&(c!==a.originalStartTime&&(a.repeat.start.dom=c.getDate(),
a.repeat.start.m=c.getMonth()),c=A.bacnetDateToJSDate(a.repeat.start)),a.repeat.end&&(d!==a.originalEndTime&&(a.repeat.end.dom=d.getDate(),a.repeat.end.m=d.getMonth()),d=A.bacnetDateToJSDate(a.repeat.end)),a.repeat.end&&a.repeat.start?this.terminatingDateCB.set("checked",!0):this.terminatingDateCB.set("checked",!1),this._disableTerminatingCheckbox(!0)):(this.terminatingDateCB.set("checked",!1),a.hasOwnProperty("eventId")&&this._disableTerminatingCheckbox(-1!==a.eventId));c.setHours(a.startTime.getHours(),
a.startTime.getMinutes(),a.startTime.getSeconds());d.setHours(a.endTime.getHours(),a.endTime.getMinutes(),a.endTime.getSeconds());this._setDateTime(c,d)},onTimeChange:function(){this.emit("timeChange",null)},setDaysForEvent:function(a){for(var b=0;b<a.length;b++){var d=this._checkboxArray.checkboxes[a[b]];this._daysOfWeek[a[b]].checked=!0;c.set(d,"checked",!0);this._onChange(d)}},_setDropDown:function(a){null!==this.eventInfo&&(this.onFrequencyTypeChange(a),this.frequencySelection.set("value",a))},
hideDateBoxes:function(a){g.forEach(this._dateBoxes,function(c){void 0!==c.domNode?b.toggle(c.domNode,"hidden",a):b.toggle(c,"hidden",a)})},destroy:function(){this._clearListeners();for(var a=this._checkboxArray.checkboxes.length-1;0<=a;--a)t.destroy(this._checkboxArray.checkboxes[a]),this._checkboxArray.checkboxes.splice(a,1),t.destroy(this._checkboxArray.labels[a]),this._checkboxArray.labels.splice(a,1);for(a=this._timeValueArray.length-1;0<=a;--a)this._timeValueArray.splice(a,1);this.inherited(arguments)}})})},
"webview/reliable/_enterpriseSchedule/widget/IncrementOptionsDialog":function(){define("dijit/Dialog dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/i18n!../../../nls/all dojo/i18n!../../../nls/enterpriseSchedules dojo/on dojo/string dojo/text!./templates/IncrementOptionsDialog.html".split(" "),function(p,m,k,h,g,d,l,f,r,c){return m("webview/reliable/_enterpriseSchedule/widget/IncrementOptionsDialog",p,{closable:!1,dialogText:"",enterpriseStrings:l,highOption:null,lowOption:null,
minuteIncrement:0,templateString:c,webviewStrings:d,postCreate:function(){this.inherited(arguments);this.own(f(this.lowTimeOptionContainer,"click",k.hitch(this,this._onLowOptionSelected)),f(this.highTimeOptionContainer,"click",k.hitch(this,this._onHighOptionSelected)))},_setDialogTextAttr:function(b){var c=this.minuteIncrement,d=this.webviewStrings.incrementMinute;60<=c&&(c/=60,d=1===c?this.webviewStrings.hour:this.webviewStrings.incrementHour);b=r.substitute(b,[c,d]);this._set("dialogText",b);h.set(this.timeValueIncrements,
"innerHTML",b)},_setValueAttr:function(b){this.minuteIncrement=b.minuteIncrement;var c=b.startTime,d=b.endTime,f=60*c[0]+Number(c[1]),a=60*d[0]+Number(d[1]);2===c.length&&c.push("00");2===d.length&&d.push("00");d[2]=c[2];a-=b.incrementDifference;this.startTime=b.startTime.join(":");b=a+this.minuteIncrement;this._setOptionValues("lowOption",a,c[2]);this._setOptionValues("highOption",b,c[2]);this._setLowHighText(f,a)},onOptionSelected:function(b){this.hide()},_onHighOptionSelected:function(){this.onOptionSelected(this.highOption)},
_onLowOptionSelected:function(){this.onOptionSelected(this.lowOption)},_setLowHighText:function(b,c){if(c!==b){var d=[this.lowOption.hours,this.lowOption.minutes,this.lowOption.seconds].join(":");h.set(this.lowTimeOptionContainer,"innerHTML",this.startTime+" - "+d);g.remove(this.lowTimeFullContainer,"hidden")}else g.add(this.lowTimeFullContainer,"hidden");24>this.highOption.hours?(d=[this.highOption.hours,this.highOption.minutes,this.highOption.seconds].join(":"),h.set(this.highTimeOptionContainer,
"innerHTML",this.startTime+" - "+d),g.remove(this.highTimeFullContainer,"hidden")):g.add(this.highTimeFullContainer,"hidden");g.contains(this.highTimeFullContainer,"hidden")&&g.contains(this.lowTimeFullContainer,"hidden")?(g.remove(this.closeButtonNode,"hidden"),g.add(this.breakBetweenTextandContent,"hidden"),this.set("dialogText",this.enterpriseStrings.timeValueIncrementMidnight)):(g.add(this.closeButtonNode,"hidden"),g.remove(this.breakBetweenTextandContent,"hidden"),this.set("dialogText",this.enterpriseStrings.timeValuesIncrement))},
_setOptionValues:function(b,c,d){var f=Math.floor(c/60);c%=60;1===c.toString().length&&(c="0"+c);this[b]={hours:f,minutes:c,seconds:d}}})})},"webview/widget/ValueInput":function(){define("dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!webview/nls/all dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/ValueInput.html ../util/globalConstants dijit/form/FilteringSelect dijit/form/ValidationTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return h("webview/widget/ValueInput",[m,p,k],{_binaryData:[{id:0,state:f.off},{id:1,state:f.on}],_defaultValue:null,analogTBInput:null,binaryStore:null,dataType:-1,inputFieldsContainers:{},multiStateStore:null,stateValues:[],templateString:t,constructor:function(){this.webviewStrings=f;this.rcStrings=l;this.binaryStore=new c({data:this._binaryData})},postCreate:function(){this.inherited(arguments);this.inputFieldsContainers={2:this.filteringInputContainer,4:this.analogInputContainer,
9:this.filteringInputContainer};this.setupOnChanges()},createFilteringSelect:function(b){this.valueFilteringInput.set({store:b,searchAttr:"state",labelAttr:"state",labelType:"html",queryExpr:"*${0}*"});this.own(r(this.valueFilteringInput,"change",g.hitch(this,this._onValueChanged)))},updateMultiSelectOptions:function(d,a,f){0<f.length&&a!==f&&(null===this.multiStateStore?this.multiStateStore=new b(new c({idProperty:"orderIndex",data:f})):this.multiStateStore.setData(f),this.createFilteringSelect(this.multiStateStore))},
validate:function(){var b=this.valueFilteringInput;this.dataType===q.DATATYPE_ANALOG&&(b=this.analogTBInput);b.focus();return b.validate()},createAnalogInput:function(){this.analogTBInput.get("validator")!==this._checkInput&&this.analogTBInput.set("validator",g.hitch(this,this._checkInput));this.own(r(this.analogInputContainer,"change",g.hitch(this,this._onValueChanged)))},updateValueSelector:function(b,a,c){-1!==a&&d.add(this.inputFieldsContainers[a],"hidden");switch(c){case q.DATATYPE_MULTI_STATE:this.createFilteringSelect(this.multiStateStore);
break;case q.DATATYPE_ANALOG:this.createAnalogInput();break;case q.DATATYPE_BINARY:this.createFilteringSelect(this.binaryStore);this.valueFilteringInput.isValid=g.hitch(this,function(){if("undefined"!==typeof this.valueFilteringInput){var a=new RegExp("^("+f.off+"$|"+f.on+"$|[0-9]+$)");return null!==this.valueFilteringInput.get("displayedValue").match(a)?!0:!1}return!0});break;default:console.error(this.declaredClass+" - updateValueSelector(): Invalid data type",c)}d.remove(this.inputFieldsContainers[c],
"hidden")},disableFields:function(b){null!==this.valueFilteringInput&&(this.valueFilteringInput.set("disabled",b),d.toggle(this.valueFilteringInput.domNode,"disabled",b));this.analogTBInput.set("disabled",b);d.toggle(this.analogTBInput.domNode,"disabled",b)},_checkInput:function(){var b=this.analogTBInput.get("value"),a=f.numberInvalid;if(b.toString().match(/^(-)?(\d)*(\.)?(\d)*$/))return!0;this.analogTBInput.invalidMessage=a;return!1},_onValueChanged:function(b){if(this.dataType===q.DATATYPE_BINARY&&
(this.binaryStore.setData(g.clone(this._binaryData)),""===b))if(b=Number(this.valueFilteringInput.get("displayedValue")))this.binaryStore.add({id:b,state:b.toString()});else{this.valueFilteringInput.set("displayedValue",this._defaultValue);return}this.onValueChanged(b)},_getBinaryValue:function(){var b=0;return b=this.valueFilteringInput.get("displayedValue")===f.off||this.valueFilteringInput.get("displayedValue")===f.on?Number(this.valueFilteringInput.get("value")):Number(this.valueFilteringInput.get("displayedValue"))},
setupOnChanges:function(){this.own(this.watch("dataType",g.hitch(this,this.updateValueSelector)));this.own(this.watch("stateValues",g.hitch(this,this.updateMultiSelectOptions)))},onValueChanged:function(b){},setRepeatTypeChanged:function(b){this._repeatType=b},fillData:function(b){this._defaultValue=b.defaultValue;var a=b.startValue;null===b.startValue&&(a=this._defaultValue);switch(this.dataType){case q.DATATYPE_BINARY:this.binaryStore.setData(g.clone(this._binaryData));b=this.binaryStore.query({id:a});
0===b.length?(a={id:a,state:a.toString()},this.binaryStore.add(a)):a=b[0];this.valueFilteringInput.set("value",a.id);this.valueFilteringInput.set("displayedValue",a.state);break;case q.DATATYPE_MULTI_STATE:this.createFilteringSelect(this.multiStateStore);this.valueFilteringInput.set("value",a);break;case q.DATATYPE_ANALOG:this.createAnalogInput(),this.analogTBInput.set("value",a)}},getInfo:function(){var b=-1;switch(this.dataType){case q.DATATYPE_MULTI_STATE:b=Number(this.valueFilteringInput.get("value"));
break;case q.DATATYPE_BINARY:b=this._getBinaryValue();break;case q.DATATYPE_ANALOG:b=Number(this.analogTBInput.get("value"));break;default:console.error(this.declaredClass+" - getInfo(): Invalid Data Type",this.dataType)}return{startValue:b,endValue:"Relinquish"}},destroy:function(){this.inherited(arguments)}})})},"webview/reliable/_enterpriseSchedule/ScheduleTree":function(){define("dijit/_TemplatedMixin dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/Tree dijit/tree/ObjectStoreModel dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/store/Memory dojo/store/Observable dojo/request/xhr dojo/text!./templates/ScheduleTree.html ../../util/audit".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return l("webview/reliable/_enterpriseSchedule/ScheduleTree",[m,p,k],{templateString:q,_colourMap:null,_scheduleTree:null,_scheduleStore:null,_linkedScheduleId:null,_treeModel:null,_debounceTime:500,_changeTimeout:null,constructor:function(){this._rootNode={id:-1,name:"root",type:"root",value:null,hasChildren:!0};this._scheduleStore=new b(new c({data:[this._rootNode],getChildren:function(a){return this.query({parent:a.id})}}));this._treeModel=new g({store:this._scheduleStore,
query:{type:"root"},mayHaveChildren:function(a){return!0===a.hasChildren}})},postCreate:function(){this.inherited(arguments);this._getTreeNodes()},canAccessSchedule:function(a){return this.getSchedules().some(function(b){return Number(b.id)===a})},disableFields:function(a){this._scheduleTree&&this._scheduleTree.set("disabled",a)},getFirstNode:function(){return this._scheduleTree._getFirst()},getColourMap:function(){return this._colourMap},getParentFromArray:function(a){var b=this.getSchedules(),c=
null,g=Number.MAX_VALUE,b=d.filter(b,f.hitch(this,function(b){return-1<a.indexOf(Number(b.id))}));if(0<b.length)for(var c=b[0],h=null,k=null,l=0;l<b.length;++l){h=b[l];if(-1===Number(h.parent)){c=h;break}k=a.indexOf(Number(h.id));if(k<g&&(g=k,c=h,0===k))break}return c},getScheduleFromId:function(a){return this._scheduleStore.get(a)},getScheduleTitleFromId:function(a){var b="";if(a=this._scheduleStore.get(a))b=a.name;return b},getSchedules:function(){return this._scheduleStore.query(function(a){return"undefined"!==
typeof a.parent&&null!==a.parent})},onChange:function(){this._changeTimeout=null},onResize:function(){},onTreeLoaded:function(){},resize:function(){this.inherited(arguments);this.onResize()},selectFirstSchedule:function(){var a=!1;if(null==this._linkedScheduleId){var b=this._scheduleStore.query({parent:this._rootNode.id});0<b.length&&(this.selectNode(b[0].id),a=!0)}else this._linkedScheduleId=null,a=!0;return a},selectLinkedSchedule:function(a,b){var c=!1,d=this._scheduleStore.query({systemId:a,mnemonic:b});
0<d.length&&(c=d[0],this.selectNode(c.id),this._linkedScheduleId=c.id,c=!0);return c},selectNode:function(a){var b=[a];this._linkedScheduleId=null;this._getParentPath(a,b);this._scheduleTree.set("path",b)},_buildAuditLogTitle:function(){return rc.session.getSitePath(this.site)+this.domNode.innerText},_buildTree:function(){this._scheduleTree=new h({lastNodePressArgs:{nodeWidget:null,event:null},model:this._treeModel,baseClass:"schedule-tree",showRoot:!1,autoExpand:!1,getIconStyle:f.hitch(this,function(a){if("schedule"===
a.type)return{backgroundColor:a.color,backgroundImage:"none",marginBottom:"4px",height:"14px",width:"14px"}}),onClick:function(){this.resize()},_createTreeNode:f.hitch(this,function(a){return l(h._TreeNode,{_setLabelAttr:{node:"labelNode",type:"innerHTML"}})(a)})},this.treeContainer);r.after(this._scheduleTree,"_onNodePress",f.hitch(this,function(a,b){"pointerdown"===b.type&&(this._scheduleTree.lastNodePressArgs.nodeWidget=a,this._scheduleTree.lastNodePressArgs.event=b)}),!0);r.after(this._scheduleTree,
"_onClick",f.hitch(this,function(a,b){"click"===b.type&&a.id===this._scheduleTree.lastNodePressArgs.nodeWidget.id&&b.target.outerHTML!==this._scheduleTree.lastNodePressArgs.event.target.outerHTML&&this._scheduleTree._onClick(this._scheduleTree.lastNodePressArgs.nodeWidget,this._scheduleTree.lastNodePressArgs.event)}),!0);this._scheduleTree.onLoadDeferred.then(f.hitch(this,this._onTreeLoaded));this.own(this._scheduleTree.watch("selectedItem",f.hitch(this,this._onChange)))},_getParentPath:function(a,
b){var c=this._scheduleStore.get(a).parent;if("undefined"!==typeof c&&null!==c)b.unshift(c),this._getParentPath(c,b);else return b},_getSelectedAttr:function(){return this._scheduleTree.get("selectedItem")},_getTreeNodes:function(){t.get("EnterpriseSchedules/GetFlatScheduleTree",{handleAs:"json",query:{enterpriseId:this.enterpriseScheduleId,ignoreRestrictions:!0}}).then(f.hitch(this,this._setColourMap));t.get("EnterpriseSchedules/GetFlatScheduleTree",{handleAs:"json",query:{enterpriseId:this.enterpriseScheduleId}}).then(f.hitch(this,
this._populateStore))},_onChange:function(a,b,c){if(null===b||b.id!==c.id)null!==this._changeTimeout&&clearTimeout(this._changeTimeout),this._changeTimeout=setTimeout(f.hitch(this,this.onChange,c.id),this._debounceTime)},_onTreeLoaded:function(){this.onTreeLoaded()},_populateStore:function(a){if("undefined"!==typeof a.errStatus&&200===a.errStatus){a.scheduleData.unshift(this._rootNode);this._scheduleStore.setData(a.scheduleData);this._buildTree();var b=[{systemId:null,objectName:"#EnterpriseSchedule"+
this.enterpriseScheduleId}];a.scheduleData.forEach(f.hitch(this,function(a){a.mnemonic&&b.push({systemId:a.systemId,objectName:a.mnemonic})}));a=this._buildAuditLogTitle();u.setContextDataWithSiteId(this.site,b,a)}},_setColourMap:function(a){null===this._colourMap&&(this._colourMap={},d.forEach(a.scheduleData,f.hitch(this,function(a){this._colourMap[a.id]=a.color})))}})})},"webview/reliable/NavGroup":function(){define("dijit/Menu dijit/MenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-construct dojo/i18n!rc/nls/all dojo/text!./_navGroup/templates/NavGroup.html rc/_Widget rc/widget/Toolbar rc/_base/tooltip ../features/navigationGroups/_WithToolbarsMixin ../features/navigationGroups/groupBuilding/BuilderStateManager ../features/navigationGroups/groupRendering/ScaleFactorManager ../features/navigationGroups/groupBuilding/GroupBuilder webview/admin/widget/AdminToolbar webview/admin/navGroups/NavGroupToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n){return h("webview/reliable/NavGroup",[b,u],{firstLoad:!0,templateString:c,constructor:function(){this.site=this._siteId();this.builderStateManager=new a({editMode:!1,siteUrl:rc.pathInfo.site+"/",siteId:this.site});this.own(this.builderStateManager.watch("editMode",g.hitch(this,function(a,b,c){d.set(this.navGroupContentPane.domNode,"top",c?"0px":"40px");d.set(this.navGroupContentPane.domNode,"height","100%");this.resize()})));this.scaleFactorManager=new n},
postCreate:function(){this.mnemonic=null;this._buildAuditLogContext();this._setUpBuilder();this._setUpTabActiveListeners();this._tooltipIds=[];this.setUpToolbar(this._container);this.inherited(arguments)},print:function(){this.printAsImage(this.groupBuilder.groupRenderer.domNode,this.scaleFactorManager.availableDimensions.width)},resize:function(){this.inherited(arguments);this.groupBuilder.resize()},setTooltips:function(){},_setGroupNameAttr:function(a){this._setTitle(a);this._set("groupName",a);
this._buildAuditLogContext()},_buildAuditLogContext:function(){webview.auditUtil.setContextDataWithSiteId(this.site,[{systemId:null,objectName:"#NavigationGroup"+this.pointInstance}],this.title)},_createToolbar:function(){this.buttonBar.replaceAllIcons([this.navGroupToolbar]);return this.initializeToolbars()},_setTitle:function(a){this.fullTitle=this.title=a||this.title||"";this._toolbar&&this._toolbar.setTitle(this.fullTitle);this.onSetTitle(this.fullTitle)},_setUpBuilder:function(){this.groupBuilder.startUp(this.scaleFactorManager,
this.builderStateManager,this.rightSideFlyout);this.own(this.groupBuilder.groupRenderer.watch("groupDetails",g.hitch(this,function(a,b,c){if(c&&c.name){if(this.set("groupName",c.name),this.firstLoad)this.onInitSuccess()}else this.firstLoad&&this._onInitError();this.firstLoad=!1})),this.groupBuilder.watch("title",g.hitch(this,function(a,b,c){c&&this._setTitle(c)})))},_setUpTabActiveListeners:function(){this.own(l(window,"visibilitychange",g.hitch(this.groupBuilder.groupRenderer,this.groupBuilder.groupRenderer.onVisibilityChanged)))},
destroy:function(){this.inherited(arguments)}})})},"rc/widget/Toolbar":function(){define("dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton dijit/layout/ScrollingTabController dijit/Menu dijit/MenuItem dijit/MenuSeparator dijit/PopupMenuItem dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/aspect dojo/cookie dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/Evented dojo/i18n!rc/nls/all dojo/on dojox/layout/ExpandoPane ./DateTimeDialog ../_base/tooltip ../_base/util ../StyleSwitcher ../util/HelpUtil".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F){return c("rc/widget/Toolbar",[A,w],{_buttons:null,_buttonTemplates:null,dateTimeDialog:null,showTitle:!0,constructor:function(a){this.inherited(arguments);this._buttonTemplates=[{type:p,baseClass:"backSingleButtonItem",buttonId:"Back",iconClass:"previousIcon",region:"lead",label:z.back},{type:p,baseClass:"loadSingleButtonItem",buttonId:"Load",iconClass:"loadIcon",region:"lead",label:z.load},{type:k,baseClass:"updateToggleButtonItem",
buttonId:"Update",iconClass:"updateIcon",region:"lead",label:z.update},{type:p,baseClass:"saveSingleButtonItem",buttonId:"Save",iconClass:"saveIcon",region:"lead",label:z.save},{type:p,baseClass:"clearAllSingleButtonItem",buttonId:"clearAll",iconClass:"xIcon",region:"trailing",label:z.clearAll},{type:m,baseClass:"moreDropDownButtonItem",buttonId:"More",iconClass:"configIcon",region:"trailing",alwaysOn:!0,label:z.more},{type:m,baseClass:"helpDropDownButtonItem",buttonId:"Help",iconClass:"helpIcon",
region:"trailing",alwaysOn:!0,label:z.help},{type:p,baseClass:"logoutSingleButtonItem",buttonId:"Logout",iconClass:"lockIcon",region:"trailing",alwaysOn:!0,label:z.logout},{type:p,baseClass:"loginSingleButtonItem",buttonId:"Login",iconClass:"lockIcon",region:"trailing",alwaysOn:!0,label:z.login}];a.customHelp&&(this.customHelp=a.customHelp);this.regions=[{name:"lead",count:0},{name:"center",count:0},{name:"trailing",count:0},{name:"lone",count:0}];this._buttons=b.clone(a.buttons)||{};this._isScrolling=
null},postCreate:function(){this.inherited(arguments);rc.session.validate();n.add(this.domNode,"rcToolbar");this._loneContainer=a.create("div",{className:"mpwFloatingMenu"},this.containerNode,"first");this.titleContainer=a.create("div",{className:"mpwPageTitle hidden"});this.titleNode=a.create("h2",{innerHTML:"\x26nbsp;"},this.titleContainer);a.place(this.titleContainer,this.containerNode,"first");this.scroller=new h({useMenu:!1,useSlide:!0,buttonWidget:"Button",containerId:this.id},a.create("div",
{},this.containerNode));this._addButtons();this.own(q.after(this,"resize",b.hitch(this,this._resizeScroller)));this.scroller.onStartup({})},_addButtons:function(){this._buttons.Back=!0;rc.session.isPrivate()&&(this._buttons.Logout=rc.session.hasRole(rc.session.roles.showLogout));rc.session.isPublic()&&(this._buttons.Login=rc.session.hasRole(rc.session.roles.showLogout));this._buttons.Help=!0;this._buttonTemplates[6].dropDown=this._makeHelpMenu();this._buttons.More=!0;this.moreMenu=this._makeBonusMenu();
this._buttonTemplates[5].dropDown=this.moreMenu;r.forEach(this._buttonTemplates,function(a){a.buttonId in this._buttons&&(this._buttons[a.buttonId]?this._buttons[a.buttonId]=this._makeButton(a.type,a.region,a):delete this._buttons[a.id])},this);this._buttons.hasOwnProperty("Back")&&this._buttons.Back&&(n.add(this._buttons.Back.domNode,"rcBackButton"),this.own(y(this._buttons.Back,"click",b.hitch(this,function(){window.history.back()}))));this._buttons.hasOwnProperty("Logout")&&this._buttons.Logout&&
this.own(y(this._buttons.Logout,"click",b.hitch(this,this.onLogout)));this._buttons.hasOwnProperty("Login")&&this._buttons.Login&&this.own(y(this._buttons.Login,"click",b.hitch(this,this.onLogin)))},_resizeScroller:function(){try{if(this.scroller&&(this.scroller.resize({w:this.containerNode.offsetWidth-this._loneContainer.offsetWidth-this.titleContainer.offsetWidth-1}),this._buttons.Logout)){var a=this.scroller._enableBtn();if(a!==this._isScrolling){this._isScrolling=a;var b=rc.session.getUsername(),
c=a?rc.session.getShortUsername():b;this._buttons.Logout.set("label",z.logout+" "+c);var d=D.unescapeHtml(b);this._buttons.Logout.set("title",z.logout+" "+d)}}}catch(J){}},_layoutChildren:function(){},setTitle:function(a){this.titleNode.innerHTML=a||"";a&&this.showTitle?n.remove(this.titleContainer,"hidden"):n.add(this.titleContainer,"hidden");this._resizeScroller()},addButton:function(a,b,c){return this._makeButton(p,c,{baseClass:a.replace(/ |\(|\)/g,"").toLowerCase()+"SingleButtonItem",iconClass:b,
label:a,buttonId:a})},addToggleButton:function(a,b,c){return this._makeButton(k,c,{baseClass:a.replace(/ |\(|\)/g,"").toLowerCase()+"ToggleButtonItem",iconClass:b,label:a,buttonId:a})},addDropDownButton:function(a,c,d,f){return this._makeButton(m,d,b.mixin({baseClass:a.replace(/ |\(|\)/g,"").toLowerCase()+"DropDownButtonItem",iconClass:c,label:a,buttonId:a},f||{}))},_makeButton:function(c,d,f){b.isObject(this._buttons[f.buttonId])&&this._buttons[f.buttonId].destroyRecursive();f.iconClass&&(f.iconClass+=
" rcIcon");this._buttons[f.buttonId]=new c(f);if("lone"===d){x.set(this._buttons[f.buttonId].domNode,{visibility:"hidden"});a.place(this._buttons[f.buttonId].domNode,this._loneContainer);var g=setInterval(b.hitch(this,function(a){0<v.position(a).w&&(clearInterval(g),x.set(a,{visibility:"visible"}),this._resizeScroller())},this._buttons[f.buttonId].domNode),100)}else{var h=0;r.some(this.regions,function(a){h+=a.count;return a.name===d?(a.count++,!0):!1},this);this.scroller.addChild(this._buttons[f.buttonId],
h);0===h&&(this.scroller._selectedTab=this._buttons[f.buttonId].domNode)}return this._buttons[f.buttonId]},getButton:function(a){return this._buttons[a]},getAllButtons:function(){var a=[],c=Object.keys(this._buttons);r.forEach(c,b.hitch(this,function(b){a.push(this._buttons[b])}));return a},getPageButtons:function(){var a=[],b;for(b in this._buttons)this._buttons[b]instanceof p&&!this._buttons[b].alwaysOn&&a.push(this._buttons[b]);return a},onLogout:function(a){this.emit("logout",arguments)},onLogin:function(a){rc.session.redirectToLogin();
this.emit("login",arguments)},openTimeDlg:function(){this.dateTimeDialog||(this.dateTimeDialog=new B);this.dateTimeDialog.show()},_makeHelpMenu:function(){if(!("Help"in this._buttons))return null;var a=new g({baseClass:"dijitMenu helpMenuItems"});a.addChild(new d({label:z.tbShowTips,baseClass:"dijitMenuItem showTooltipsMenuItem",iconClass:C.showing?"checkIcon":"",onClick:b.hitch(this,"_toggleTooltip")}));rc.session.hasRole(rc.session.roles.showHelp)&&a.addChild(new d({label:z.tbUserGuide,baseClass:"dijitMenuItem userGuideMenuItem",
onClick:b.hitch(this,function(){var a=F.getContextSensitiveHelpLink(this.customHelp);window.open(a,"_blank")})}));a.addChild(new d({label:z.tbAbout,baseClass:"dijitMenuItem aboutMenuItem",onClick:b.hitch(this,"_gotoPage","about")}));return a},_makeAlarmsMenuItem:function(a){if(!rc.session.hasRole(rc.session.roles.alarmDisable)||rc.session.hasRole(rc.session.roles.viewAlarms))this._buttons.Alarms=new d({label:z.alarms,baseClass:"dijitMenuItem alarmsMenuItem",iconClass:"",onClick:b.hitch(this,this._gotoPage,
"alarm")}),a.addChild(this._buttons.Alarms)},_makeAlarmHistoryMenuItem:function(a){},_makeAdminMenuItem:function(a){},_makeChangePasswordMenuItem:function(a){},addZoomTools:function(){},_makeBonusMenu:function(){if(!("More"in this._buttons))return null;var a=new g({baseClass:"dijitMenu moreMenuItems"});this._makeAdminMenuItem(a);this._makeChangePasswordMenuItem(a);"Print"in this._buttons&&(this._buttons.Print=new d({label:z.print,baseClass:"dijitMenuItem printMenuItem",iconClass:""}),a.addChild(this._buttons.Print));
"Export"in this._buttons&&(this._buttons.Export=new d({label:z.xport,baseClass:"dijitMenuItem exportMenuItem",iconClass:""}),a.addChild(this._buttons.Export));(this._buttons.Export||this._buttons.Print)&&a.addChild(new l);rc.session.hasRole(rc.session.roles.audit)&&(this._buttons["Audit Trail"]=new d({label:z.audittrail,baseClass:"dijitMenuItem auditTrailMenuItem",iconClass:"",onClick:b.hitch(this,"_gotoPage","audit")}),a.addChild(this._buttons["Audit Trail"]));this._makeAlarmsMenuItem(a);this._makeAlarmHistoryMenuItem(a);
(this._buttons["Audit Trail"]||this._buttons.Alarms)&&a.addChild(new l);a.addChild(this._makeLanguageMenu());var c=new g({baseClass:"dijitMenu themeSelectionItems"}),h=Object.keys(E.getThemes());r.forEach(h,b.hitch(this,function(a){c.addChild(new d({label:z[a.replace(/ |\(|\)/g,"").toLowerCase()],baseClass:"dijitMenuItem "+a.replace(/ |\(|\)/g,"").toLowerCase()+"MenuItem",theme:a,iconClass:"",onClick:function(){E.setActiveStyleSheet(t.doc,this.theme)}}))}));h=new f({label:z.tbTheme,baseClass:"dijitMenuItem themePopupMenu",
popup:c});a.addChild(h);x.set(h.arrowWrapper,"visibility","");var k=new g({baseClass:"dijitMenu themeSelectionItems"}),m=E.getFontSizes();r.forEach(Object.keys(m),b.hitch(this,function(a){k.addChild(new d({label:m[a].name,baseClass:"dijitMenuItem MenuItem",fontSize:a,iconClass:"",onClick:function(){E.setActiveFontSize(t.doc,a)}}))}));h=new f({label:z.tbFontSize,baseClass:"dijitMenuItem themePopupMenu",popup:k});a.addChild(h);x.set(h.arrowWrapper,"visibility","");rc.session.hasRole(rc.session.roles.setTime)&&
a.addChild(new d({label:z.tbSystemTime,baseClass:"dijitMenuItem systemTimeMenuItem",iconClass:"",onClick:b.hitch(this,this.openTimeDlg)}));return a},_makeLanguageMenu:function(){for(var a=new g({baseClass:"dijitMenu languageMenuItems"}),b=[{label:z.english,locale:"en-us"},{label:z.german,locale:"de"},{label:z.spanish,locale:"es"},{label:z.french,locale:"fr"},{label:z.portuguese,locale:"pt"},{label:z.chinese,locale:"zh"},{label:z.traditionalChinese,locale:"zh-tw"},{label:z.browserDefault,locale:null}],
c=u("locale"),h,k,l=0;l<b.length;l++)h=b[l],k="",c===h.locale&&(k="checkIcon"),void 0===c&&l===b.length-1&&(k="checkIcon"),a.addChild(new d({label:h.label,baseClass:h.locale?h.locale.replace(/ |\(|\)/g,"").toLowerCase()+"dijitMenuItem LanguageMenuItem":"dijitMenuItem defaultLanguageMenuItem",locale:h.locale,iconClass:k,onClick:function(){var a=new Date;a.setYear(a.getFullYear()+100);a={path:"/",expires:a};null===this.locale&&(a.expires=-1);u("locale",this.locale,a);window.location.reload()}}));a=
new f({label:z.language,baseClass:"dijitMenuItem languagePopupMenuItem",popup:a});x.set(a.arrowWrapper,"visibility","");return a},_gotoPage:function(a){window.location=D.mnemonicToUri(a)},_toggleTooltip:function(a){a=this._buttons.Help.dropDown.getChildren()[0];a.set("iconClass",0===a.get("iconClass").length?"checkIcon":"");a.get("iconClass").length?C.show():C.hide()},destroy:function(){this._buttonTemplates=[];this.scroller&&this.scroller.destroyRecursive();this._animConnects&&r.forEach(this._animConnects,
b.hitch(this,function(a){a.remove()}));this.inherited(arguments)}})})},"rc/widget/DateTimeDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/fx dojo/_base/kernel dojo/_base/lang dojo/date dojo/date/locale dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/on dojo/string dojo/text!./templates/DateTimeDialog.html dojo/text!./templates/DateTimeDialog/ErrorDialog.html dojo/text!./templates/DateTimeDialog/WarningDialog.html dojo/topic ./Retry ../_base/Error ../bacnet/enums ../bacnet/io/Array ../bacnet/io/Date ../bacnet/io/DateTime ../bacnet/io/Number ../bacnet/io/Object ../bacnet/io/service/ReadPropertyMultiple ../bacnet/io/service/TimeSynchronization ../bacnet/io/service/UtcTimeSynchronization ../bacnet/io/service/WritePropertyMultiple ../bacnet/io/Time ../bacnet/Object ../bacnet/property ../date ../sys/hostinfo ../util/encoding/base16 ../util/encoding/base64 dijit/form/Button dijit/form/CheckBox dijit/form/ValidationTextBox ../widget/DateTextBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S){return m("rc/widget/DateTimeDialog",[p],{ACCUMULATE_LEAP_YEAR:[1,32,61,92,122,153,183,214,245,275,306,336],canDoBacnetDST:!1,connectedDevice:4194303,currentDateTime:null,closable:!1,hostInfo:null,isShowingGMT:!1,rcStrings:q,templateString:n,title:q.setDateTime,_bacnetDate:null,_BACnetDSTEnd:null,_BACnetDSTStart:null,_bacnetTime:null,_currentTimeTimeout:null,_doneUpdatingTime:!1,_DSTStart:null,_DSTEnd:null,_updateTimeTimeout:null,
postCreate:function(){this.inherited(arguments);this.set("closable",this.closable);this.setupListeners();this._retryHandler=new z;this._setupTimeBox()},_setCurrentDateTimeAttr:function(a){null!==a?(r.set(this._currentD,"innerHTML",O.templateLongDate(a)),r.set(this._currentT,"innerHTML",O.templateTime(a))):r.set(this._currentT,"innerHTML","");this._set("currentDateTime",a)},buildBacnetObject:function(a,b){var c=null;null===this.hostInfo&&(this.hostInfo=new K(M.deviceNumber,A.objectTypes.OBJID_DEVICE,
M.deviceNumber));c=new N(b,this.hostInfo,0,-1,M.deviceNumber);switch(a){case "date":c.propertyObject=new C(0,0,0,0);break;case "time":c.propertyObject=new J(0,0,0,0);break;case "dst":c.propertyObject=new B([],A.primitiveTypes.OCTET_STRING);break;default:console.error(this.declaredClass+" - buildBacnetObject(): Unknown type",a)}return c},buildTimeRequest:function(a,b){var c=null,d="read"===b?G:H;"current"===a?("read"===b&&(this._bacnetDate=this.buildBacnetObject("date",A.propertyTypes.PROPID_LOCAL_DATE),
this._bacnetTime=this.buildBacnetObject("time",A.propertyTypes.PROPID_LOCAL_TIME)),c=new d({index:0,device:M.deviceNumber},[{o:new F(A.objectTypes.OBJID_DEVICE,M.deviceNumber),pl:[{p:new E(A.propertyTypes.PROPID_LOCAL_DATE,A.primitiveTypes.ENUMERATED),i:new E(-1,A.primitiveTypes.UNSIGNED_INTEGER),v:this._bacnetDate.propertyObject},{p:new E(A.propertyTypes.PROPID_LOCAL_TIME,A.primitiveTypes.ENUMERATED),i:new E(-1,A.primitiveTypes.UNSIGNED_INTEGER),v:this._bacnetTime.propertyObject}]}])):"dst"===a?
("read"===b&&(this._BACnetDSTStart=this.buildBacnetObject("dst",A.propertyTypes.PROPID_PP_DST_START),this._BACnetDSTEnd=this.buildBacnetObject("dst",A.propertyTypes.PROPID_PP_DST_END)),c=new d({index:0,device:M.deviceNumber},[{o:new F(A.objectTypes.OBJID_DEVICE,M.deviceNumber),pl:[{p:new E(A.propertyTypes.PROPID_PP_DST_START,A.primitiveTypes.ENUMERATED),i:new E(-1,A.primitiveTypes.UNSIGNED_INTEGER),v:this._BACnetDSTStart.propertyObject},{p:new E(A.propertyTypes.PROPID_PP_DST_END,A.primitiveTypes.ENUMERATED),
i:new E(-1,A.primitiveTypes.UNSIGNED_INTEGER),v:this._BACnetDSTEnd.propertyObject}]}])):console.error(this.declaredClass+" - buildTimeRequest(): Invalid type",a);return c},dateToWeekNDayArray:function(a){var b=[];b[0]=a.getMonth()+1;b[1]=this.getBACnetWeekOfMonth(a);b[2]=0!==a.getDay()?a.getDay():7;return b},fetch:function(){this._showWaiting();var a=this._retryHandler.notifyRetry({action:g.hitch(this,this._fetch),retryMsg:q.communicationProblem+" "+q.retryingIn});a.then(g.hitch(this,function(a){this._hideWaiting();
return a}),g.hitch(this,function(a){r.set(this._currentD,"innerHTML",404===a.status?q.getDateTime404:q.unexpectedResponse);this.set("currentTime",null);this._hideWaiting();return a}));return a},getBACnetWeekOfMonth:function(a){a=a.getDate();var b=-1;1<=a&&7>=a?b=1:8<=a&&14>=a?b=2:15<=a&&21>=a?b=3:22<=a&&28>=a?b=4:29<=a&&31>=a&&(b=5);return b},hide:function(){this._doneUpdatingTime=!1;this._showGMT(!1);this._stopTimer();this._stopCurrentTimer();return this.inherited(arguments)},send:function(){this._showFullWaiting();
this._data=this._encode();this._addAuditTrail(this._data.audit);var a=this._retryHandler.notifyRetry({action:g.hitch(this,this._sendSequence),tries:3,delay:5,retryMsg:q.communicationProblem+" "+q.retryingIn});a.then(g.hitch(this,function(a){this.hide();return a}),g.hitch(this,function(a){this._hideFullWaiting();this._showError(new y({name:q.error,message:q.setDateTimeError,e:a}));return a}));return a},setupListeners:function(){this.own(this._disableDSTCB.watch("checked",g.hitch(this,this._disableDST)),
this._convertGMTCheckBox.watch("checked",g.hitch(this,this._updateTime)),u(this._timeBox,"click",g.hitch(this,this._stopUpdatingTime)),u(this._timeBox,"focus",g.hitch(this,this._stopUpdatingTime)))},show:function(){this._hideFullWaiting();this._updateTime();this._updateCurrentTime();this._convertGMTCheckBox.set("checked",!1);this._disableDSTCB.set("checked",!1);this._dateBox.set("value",new Date);M.loadOnce().always(g.hitch(this,this.fetch));return this.inherited(arguments)},weekNDayToDate:function(a){var b=
a[0]-1,c=7!==a[2]?a[2]:0;a=7*(a[1]-1)+1;b=new Date((new Date).getFullYear(),b,a);c-=b.getDay();a=-1;a=0>c?b.getDate()+(7+c):b.getDate()+c;b.setDate(a);return b},_addAuditTrail:function(){var b={datestamp:parseInt((new Date).getTime()/1E3,10).toFixed(),pointName:" ",user:rc.session.getUsername(),action:q.setTime,details:a.substitute(q.newValueX,[this._data.newStr]),reason:q.na};w.publish("audit",b)},_checkInputs:function(){var a=this._validateAndFocus(this._timeBox)&&this._validateAndFocus(this._dateBox)&&
(!this._disableDSTCB.get("checked")||this._validateAndFocus(this._startDSTBox)&&this._validateAndFocus(this._endDSTBox));this.defer(g.hitch(this,this.focus),100);return a},_confirmChange:function(){var b=new f;this._sendWarningDlg||(this._sendWarningDlg=new p({className:"warningDialog",title:q.setDateTimeWarningTitle,execute:g.hitch(this,function(){this.send().then(g.hitch(this,b.resolve),g.hitch(this,b.reject))})}),this._sendWarningDlg.set({buttonOk:q.yes,buttonCancel:q.no}),r.set(this._sendWarningDlg.containerNode,
"innerHTML",a.substitute(x,{warningText:q.setDateTimeWarning})));this._sendWarningDlg.show();this.own(u.once(this._sendWarningDlg,"cancel",g.hitch(b,b.reject)));return b},_dateToDoy:function(a){return a.getDate()+this.ACCUMULATE_LEAP_YEAR[a.getMonth()]-(d.isLeapYear(a)?0:1)},_decodeBACnetDST:function(){try{var a,b;0===this._BACnetDSTStart.propertyObject.ary[0]||255===this._BACnetDSTStart.propertyObject.ary[0]?(a=b=new Date,this._disableDSTCB.set("checked",!1)):(this._disableDSTCB.set("checked",!0),
a=this.weekNDayToDate(this._BACnetDSTStart.propertyObject.ary),b=this.weekNDayToDate(this._BACnetDSTEnd.propertyObject.ary));this._startDSTBox.set("value",a);this._endDSTBox.set("value",b)}catch(V){return null}},_decodeBACnetTime:function(a){try{this.set("currentDateTime",new Date(this._bacnetDate.propertyObject.y+1900,this._bacnetDate.propertyObject.m-1,this._bacnetDate.propertyObject.d,this._bacnetTime.propertyObject.h,this._bacnetTime.propertyObject.m,this._bacnetTime.propertyObject.s))}catch(R){return null}return a},
_decodeDST:function(a){try{var b=P.toUnsignedEnd(a.slice(0,2)),c,d;b?(this._DSTStart=b,this._DSTEnd=P.toUnsignedEnd(a.slice(2,a.length)),c=this._doyToDate(this._DSTStart),d=this._doyToDate(this._DSTEnd),this._disableDSTCB.set("checked",!0)):(c=d=new Date,this._disableDSTCB.set("checked",!1));this._startDSTBox.set("value",c);this._endDSTBox.set("value",d)}catch(X){return null}return a},_decodeTime:function(a){try{var b=((new Date).getFullYear()+"").slice(0,2)+"00",c=new Date(parseInt(b,10)+a[10],a[8],
a[6],a[4],a[2],a[0]);this.set("currentDateTime",c)}catch(Q){return null}return a},_disableDST:function(){var a=!this._disableDSTCB.get("checked");this._startDSTBox.set({disabled:a,readOnly:a,required:!a});this._endDSTBox.set({disabled:a,readOnly:a,required:!a})},_doyToDate:function(a){if(366<a||1>a)return null;for(var b,c,d=(new Date).getFullYear(),f=this.ACCUMULATE_LEAP_YEAR,g=0;g<f.length;g++)if(b=f[g],c=g+1<f.length?f[g+1]:b,a>=b&&a<c)return new Date(d,g,a-b+1);return a>=f[f.length-1]?new Date(d,
g-1,a-f[f.length-1]+1):null},_encode:function(){var b=this._dateBox.get("value"),c=this._timeBox.get("value"),c=l.parse(c,{selector:"time",timePattern:"hh:mm:ss a"}),d=new D(new C(b.getYear(),b.getMonth()+1,b.getDate(),b.getDay()),new J(c.getHours(),c.getMinutes(),c.getSeconds(),parseInt((c.getSeconds()/100).toFixed(),10))),f=b.getFullYear().toString(),g=f[2],g=g+f[3],g=parseInt(g,10),f=[];f.push(c.getSeconds());f.push(0);f.push(c.getMinutes());f.push(0);f.push(c.getHours());f.push(0);f.push(b.getDate());
f.push(0);f.push(b.getMonth());f.push(0);f.push(g);f.push(0);f.push(b.getDay());var f=f.concat([0,0,0,0]),g=[0,0,0,0],h=q.dstDisabled;if(this._disableDSTCB.get("checked")){var h=this._startDSTBox.get("value"),k=this._endDSTBox.get("value");this.canDoBacnetDST?(this._BACnetDSTStart.setValue(this.dateToWeekNDayArray(h).toString()),this._BACnetDSTEnd.setValue(this.dateToWeekNDayArray(k).toString())):(g=P.intToHexEnd(this._dateToDoy(h),2),g=g.concat(P.intToHexEnd(this._dateToDoy(k),2)));h=a.substitute(q.dstXtoX,
[O.templateMedDate(h),O.templateMedDate(k)])}else this.canDoBacnetDST&&(this._BACnetDSTStart.setValue("0,0,0"),this._BACnetDSTEnd.setValue("0,0,0"));return{rcp:S.encode(f),rcpDST:this.canDoBacnetDST?null:S.encode(g),bacnet:d,newStr:O.templateLongDate(b)+", "+O.templateTime(c)+", "+h}},_fetch:function(){var a=new f,b=new f,c={dest:0,subt:0,subd:0,src:0,cmd:21,xl:0,xh:0};this._fetchBACnetGet(this.buildTimeRequest("current","read")).then(g.hitch(this,function(a){if(a instanceof G&&a.o[0].pl[0].v instanceof
C&&a.o[0].pl[1].v instanceof J)return this._bacnetDate.propertyObject=a.o[0].pl[0].v,this._bacnetTime.propertyObject=a.o[0].pl[1].v,this.currentDevice=a.o[0].o.i,this.hostInfo.device!==this.currentDevice&&(this.hostInfo.device=this.currentDevice,this.hostInfo.instance=this.currentDevice),this._decodeBACnetTime(a);b.reject(a)})).then(g.hitch(this,function(a){if(null===a)b.reject({status:504});else return this._fetchBACnetGet(this.buildTimeRequest("dst","read"))})).then(g.hitch(this,function(a){a instanceof
G&&a.o[0].pl[0].v instanceof B&&a.o[0].pl[1].v instanceof B?(this.canDoBacnetDST=!0,this._BACnetDSTStart.propertyObject=a.o[0].pl[0].v,this._BACnetDSTEnd.propertyObject=a.o[0].pl[1].v,this._decodeBACnetDST()):(this.canDoBacnetDST=!1,b.reject(a))})).then(g.hitch(this,function(c){null===c?b.reject({status:504}):a.resolve(c)})).otherwise(g.hitch(this,b.reject));b.promise.otherwise(g.hitch(this,function(){var b=new f;this._fetchGet(c).then(g.hitch(this,function(a){if(1>a.data.length)b.reject(a);else return this._decodeTime(a.data)})).then(g.hitch(this,
function(a){if(null===a)b.reject({status:504});else return c.cmd=29,this._fetchGet(c)})).then(g.hitch(this,function(a){if(1>a.data.length)b.reject(a);else return this._decodeDST(a.data)})).then(g.hitch(this,function(c){null===c?b.reject({status:504}):a.resolve(c)})).otherwise(g.hitch(this,a.reject));b.promise.otherwise(g.hitch(this,a.reject))}));return a.promise},_fetchBACnetGet:function(a){var b=new f;a={type:"bacnet",s:a,load:g.hitch(this,b.resolve),error:g.hitch(this,b.reject)};rc.xhr.request(a);
return b.promise},_fetchGet:function(a){var b=new f;a={type:"rcp",cmdObj:a,load:g.hitch(this,b.resolve),error:g.hitch(this,b.reject)};rc.xhr.request(a);return b.promise},_hideFullWaiting:function(){k.fadeOut({node:this._waitingBlock,duration:200,onEnd:g.hitch(this,function(a){c.add(a,"hidden");c.remove(this.actionBarNode,"hidden")})}).play()},_hideWaiting:function(){k.fadeOut({node:this._waitingIcon,duration:200,onEnd:g.hitch(this,function(a){c.add(a,"hidden");c.remove(this._currentD,"hidden");c.remove(this._currentT,
"hidden")})}).play()},_onClickAdvancedButton:function(){this._showGMT(!this.isShowingGMT)},_onSubmit:function(){this._checkInputs()&&this._confirmChange().then(g.hitch(this,this.inherited,arguments))},_send:function(a,b){var c=null;return c="rcp"===a?rc.xhr.request({gid:"DT",type:a,method:"POST",cmdObj:b,error:function(a,b){}}):rc.xhr.request({gid:"DT",type:a,s:b,method:"POST",error:function(a,b){}})},_sendRCPDST:function(a,b){a.cmd=129;a.cnt=this._data.rcpDST.length;a.data=this._data.rcpDST;this._send("rcp",
a).then(g.hitch(this,b.resolve),g.hitch(this,b.reject))},_sendSequence:function(){var a=new f,b=this._convertGMTCheckBox.get("checked")?L:I,b=this._send("bacnet",new b({network:65535},this._data.bacnet));if(this.canDoBacnetDST)b.then(g.hitch(this,function(){var b=this.buildTimeRequest("dst","write");rc.xhr.request({type:"bacnet",s:b,method:"POST"}).then(g.hitch(a,a.resolve),g.hitch(a,a.reject))}));else{var c={dest:127,subt:0,subd:0,src:0,xl:0,xh:0};this._convertGMTCheckBox.get("checked")?this._sendRCPDST(c,
a):b.then(g.hitch(this,function(){c.cmd=121;c.cnt=this._data.rcp.length;c.data=this._data.rcp;this._send("rcp",c).then(g.hitch(this,this._sendRCPDST,c,a))}))}return a.promise},_showError:function(b){this._timeBox.focus();this._errorDlg||(this._errorDlg=new p({className:"warningDialog",title:q.error,execute:g.hitch(this,this.send)}),this._errorDlg.set("buttonOk",q.tryAgain));this._errorDlg.set("content",a.substitute(v,{errorText:b.message}));this._errorDlg.show()},_showFullWaiting:function(){t.set(this._waitingBlock,
"opacity",1);c.remove(this._waitingBlock,"hidden");c.add(this.actionBarNode,"hidden")},_showGMT:function(a){c.toggle(this._GMTContainer,"hidden",!a);this.isShowingGMT=a},_showWaiting:function(){t.set(this._waitingIcon,"opacity",1);c.remove(this._waitingIcon,"hidden");c.add(this._currentD,"hidden");c.add(this._currentT,"hidden");this.set("currentDateTime",null)},_setupTimeBox:function(){var a=l._getGregorianBundle(h.locale),b=a["dayPeriods-format-wide-am"],a=a["dayPeriods-format-wide-pm"];this._timeBox.set("pattern",
"^((([0]?[1-9]|1[0-2])(:)[0-5]?[0-9]((:)[0]?[0-5]?[0-9])?( )?("+(b+"|"+a)+")))$");this._timeBox.set("invalidMessage",q.inValidTimeFormat+b+" "+q.or+" "+a)},_stopCurrentTimer:function(){this._currentTimeTimeout&&(window.clearTimeout(this._currentTimeTimeout),this._currentTimeTimeout=null)},_stopTimer:function(){this._updateTimeTimeout&&(window.clearTimeout(this._updateTimeTimeout),this._updateTimeTimeout=null)},_stopUpdatingTime:function(){this._doneUpdatingTime=!0},_updateCurrentTime:function(){null!==
this.currentDateTime&&(this.currentDateTime.setSeconds(this.currentDateTime.getSeconds()+1),this.set("currentDateTime",this.currentDateTime));this._stopCurrentTimer();this._currentTimeTimeout=window.setTimeout(g.hitch(this,this._updateCurrentTime),1E3)},_updateTime:function(){if(!this._doneUpdatingTime){this._stopTimer();var a=new Date;this._convertGMTCheckBox.get("checked")&&(a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),0));this._timeBox.set("value",
O.templateTime(a));this._updateTimeTimeout=window.setTimeout(g.hitch(this,this._updateTime),1E3)}},_validateAndFocus:function(a){a._hasBeenBlurred=!0;this.defer(g.hitch(a,a.focus),100);return a.validate(!0)},destroy:function(){this._stopTimer();this._stopCurrentTimer();this._waitingIcon&&(b.destroy(this._waitingIcon),this._waitingIcon=null);this.inherited(arguments)}})})},"rc/widget/Retry":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct ../util/notices".split(" "),
function(p,m,k,h,g,d){return m("rc/widget/Retry",[p],{timer:5,maxTries:3,_tries:0,_notices:[],dd:null,_cancelled:!1,_shutDown:!1,_retryTimer:null,constructor:function(){this.inherited(arguments);this._shutDown=!1;rc.test.mode>rc.test.NONE&&(this.maxTries=2,this.timer=1)},notifyRetry:function(g){this.clear();this._tries||(this.cancel(),this._cancelled=!1);this._tries++;g.failMsg=g.failMsg||null;var f=new h;this.dd=g.action();this.dd.then(k.hitch(this,function(d){f.resolve(d);return d}),k.hitch(this,
function(l){if(this._cancelled||this._shutDown)return this.clear(),f.reject(l),l;if(this._tries<(g.tries||this.maxTries)){var c=g.seconds||this.timer;this.clear();var b;g.retryMsg?b=d.widget.countdown({message:g.retryMsg,count:c}):(b=new h,b.resolve(null));b.then(k.hitch(this,function(b){b&&this._notices.push(b);this._retryTimer=setTimeout(k.hitch(this,function(){this.notifyRetry(g).then(k.hitch(this,function(b){f.resolve(b);return b}),k.hitch(this,function(b){f.reject(b);return b}))}),1E3*c);return b}),
k.hitch(this,function(b){this.fail(g.failMsg);f.reject(l);return b}))}else this.fail(g.failMsg),f.reject(l);return l}));return f.promise},fail:function(g){this.clear();g?(g=d.widget.sticky({message:g}),g.then(k.hitch(this,function(d){this._notices.push(d)}))):(g=new h,g.resolve(null));return g.promise},reset:function(){this._tries=0;this.clear()},clear:function(){for(var d=0;d<this._notices.length;d++)g.destroy(this._notices[d].domNode);this._notices=[]},shutdownRetryQueue:function(){this._retryTimer&&
(clearTimeout(this._retryTimer),this._retryTimer=null);this._shutDown=!0},cancel:function(){this.dd&&"undefined"!==typeof this.dd.cancel&&(this.dd.cancel(),this.dd=null,this.reset(),this._cancelled=!0)},destroy:function(){this.shutdownRetryQueue();this.cancel();this.inherited(arguments)}})})},"rc/bacnet/io/service/TimeSynchronization":function(){define(["dojo/_base/declare","./_Service"],function(p,m){return p("rc/bacnet/io/service/TimeSynchronization",m,{constructor:function(k,h){this.t=1;this.s=
6;this.r=k;this.o=h}})})},"rc/bacnet/io/service/UtcTimeSynchronization":function(){define(["dojo/_base/declare","./TimeSynchronization"],function(p,m){return p("rc/bacnet/io/service/UtcTimeSynchronization",m,{constructor:function(k,h){this.t=1;this.s=9;this.r=k;this.o=h}})})},"webview/reliable/PointsReport":function(){define("dgrid/Grid dgrid/editor dgrid/extensions/ColumnResizer dgrid/extensions/DnD dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/Textarea dijit/form/TextBox dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/dnd/Manager dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!../nls/pointReports dojo/i18n!../nls/worksheets dojo/i18n!rc/nls/alarms dojo/i18n!rc/nls/all dojo/i18n!rc/nls/errorMessages dojo/json dojo/on dojo/promise/all dojo/query dojo/store/Memory dojo/store/Observable dojo/string dojo/text!./_pointsReport/templates/PointsReport.html dojo/topic rc/_base/Error rc/_base/util rc/_Widget ./_pointsReport/PointEditor ./_pointsReport/PointsReportColumnHider ./_pointReportDndAvatar ../admin/_ConfirmGridDeleteMixin ../admin/_ErrorMessageMixin ../admin/_GridAutoRefreshMixin ../admin/pointReportDndSource ../admin/SearchableWidgetWithTree ../admin/worksheets/widgets/DescriptionEditor ../util/audit ../util/pointObject ../util/util ../widget/dGridExtensions/dGridExcelExporterMixin ../widget/WarningDialog ../widget/WarningDialogEnums ../xhrEnhanced ./_pointsReport/ValueInput ../admin/widget/SearchForObjectResults ./_pointsReport/PointsReportToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R,V,Q,X,Z,da,T,aa,Y,U,ba,ca,ea,ha,ia,ma,na,ja,fa,ga){return a("webview/reliable/PointsReport",[Q,ba,T,aa,Y,ma],{errorStrings:D,templateString:S,webviewStrings:C,worksheetStrings:F,dndAvatar:da,_asyncRequestDeferred:null,_autoManualStore:null,_autoManualTimedStore:null,_autoManualTypes:null,_canEdit:!1,_checkBoxClass:".dijitCheckBox",_columnsChanged:!1,_columnIdIndexMap:null,_columnsShown:null,_columnStructure:null,
_confirmDialog:null,_defaultStatusTimer:500,_defaultTimedOverride:30,_dndSource:U,_firstLoad:!0,_grid:null,_gridDisabled:null,_hasElevatedPermission:rc.session.hasRole(rc.session.roles2.modifyPointReports,!0),_hasRowsSelected:!1,_inUpdateMode:!1,_isSelectAll:!0,_pointEditor:null,_pointPropertyChangeMask:null,_reportWasUpdated:!1,_pointsReportStore:null,_pointsToUpdate:null,_processId:null,_statusInteval:null,_updateTimer:null,_columnMapping:{selectorCol:{webviewIndex:0,studioIndex:0},nameCol:{webviewIndex:1,
studioIndex:1},mneCol:{webviewIndex:2,studioIndex:2},valueCol:{webviewIndex:3,studioIndex:3},autoManualCol:{webviewIndex:4,studioIndex:4},timedCol:{webviewIndex:5,studioIndex:8},unitCol:{webviewIndex:6,studioIndex:5},priorityCol:{webviewIndex:7,studioIndex:6},changedCol:{webviewIndex:8,studioIndex:7},errorCol:{webviewIndex:9,studioIndex:9},deviceNameCol:{webviewIndex:10,studioIndex:10},displayNameCol:{webviewIndex:11,studioIndex:11},descriptionCol:{webviewIndex:12,studioIndex:12}},autoManualEnums:{auto:0,
manual:1,timed:2},propertyChangedMask:{timed:1,value:2,autoManual:4,description:8,displayName:16},constructor:function(){this.rcStrings=I;this.rcAlarmStrings=G;this.rcErrors=L;this.pointReportStrings=E;this._autoManualTypes=[this.rcStrings.auto,this.rcStrings.manual,this.pointReportStrings.timedOverride];this._autoManualStore=new O({data:[{id:this.autoManualEnums.auto,name:this._autoManualTypes[this.autoManualEnums.auto]},{id:this.autoManualEnums.manual,name:this._autoManualTypes[this.autoManualEnums.manual]}]});
this._autoManualTimedStore=n.clone(this._autoManualStore);this._autoManualTimedStore.add({id:this.autoManualEnums.timed,name:this._autoManualTypes[this.autoManualEnums.timed]});this._autoManualTimedStore=n.clone(this._autoManualStore);this._autoManualTimedStore.add({id:this.autoManualEnums.timed,name:this._autoManualTypes[this.autoManualEnums.timed]});this._pointsReportStore=new M(new O({idProperty:"mne"}));this._setSupportedTypes();this._overrideSpecificErrorMessages();this._pointPropertyChangeMask=
this.propertyChangedMask.timed|this.propertyChangedMask.value|this.propertyChangedMask.autoManual|this.propertyChangedMask.description},postCreate:function(){this.inherited(arguments);this._fetch().then(n.hitch(this,function(){this._buildColumnStructure();this._render().then(n.hitch(this,this.onInitSuccess))}),n.hitch(this,function(a){setTimeout(n.hitch(this,this._onInitError,a),500)}));this.own(v.after(this.resultsWidget,"resize",n.hitch(this,this.resize)));this._setupManager()},createConfirmDialog:function(a,
b){null===b&&(b=new na({type:ja.types.binaryConfirm,closeButtonVisible:!1,title:C.confirmUnsavedChanges,text:D.unsavedChangesContinue}));var c=b.on("close",n.hitch(this,function(b){switch(b){case ja.returnValues.oneOrYes:a.resolve();break;case ja.returnValues.allOrNo:a.reject();break;default:console.error(this.declaredClass+" - _confirm(): Invalid Choice",b)}c.remove()}));this.own(b,c);b.open();return b},insertPoint:function(a,b){a.insertNodes(!1,[{sysId:null!==b.sysId?b.sysId:-1,sysName:null!==b.sysName?
b.sysName:"",deviceName:null!==b.deviceName?b.deviceName:"",pointName:null!==b.pointName?b.pointName:"",pointMnemonic:null!==b.pointMnemonic?b.pointMnemonic:"",pointType:null!==b.pointType?b.pointType:""}])},makeClean:function(){this.inherited(arguments);this._saveButton.set("disabled",!0);this._cancelButton.set("disabled",!0);this._pointsReportStore.query({changed:!0}).forEach(n.hitch(this,function(a){a.changed=!1;a.changeMask=0;this._pointsReportStore.put(a)}));this._grid.revert();this._grid.clearSelection();
this._setFetchTimeout()},makeDirty:function(){this.inherited(arguments);this._saveButton.set("disabled",!1);this._cancelButton.set("disabled",!1);this._clearFetchTimeout()},print:function(){this.printDGrid(this._grid)},publishSearchable:function(){this._hasElevatedPermission&&W.publish("searchableWidget",this._supportedObjectTypes,this)},_setCanEditAttr:function(a){this._canEdit=a;this._toolbar&&this._toolbar.set("canEdit",a);this._set("canEdit",a)},_buildAuditLogContext:function(a){var b=[{systemId:this.system,
objectName:"#"+this.mnemonic}];u.forEach(a,n.hitch(this,function(a){b.push({systemId:this.system,objectName:a.mne})}));ea.setContextDataWithSiteId(this.site,b,this.fullTitle)},_buildColumnStructure:function(){var a=new x;this.own(a);this._columnStructure=[l({selectorType:n.hitch(this,this._createSelectorCheckbox),id:"selectorCol",field:"id",label:"",reorderable:!1,resizable:!1,hidden:!this._canEdit,sortable:!0,unhidable:!0,shown:this._columnsShown.id,exporter:function(){return""}}),{field:"deviceName",
label:this.pointReportStrings.deviceName,id:"deviceNameCol",sortable:!0,shown:this._columnsShown.deviceName},{field:"name",label:this.rcStrings.spName,id:"nameCol",sortable:!0,shown:this._columnsShown.name},m({canEdit:n.hitch(this,function(){return this._hasElevatedPermission}),editor:b,field:"displayName",label:this.pointReportStrings.displayName,id:"displayNameCol",sortable:!0,shown:this._columnsShown.displayName,editOn:"click",canEdit:n.hitch(this,this._canEditRow),editorArgs:{baseClass:"rcTextBox",
maxLength:25},formatter:n.hitch(this,function(a){return a})}),m({editor:c,editOn:"none",id:"descriptionCol",label:this.rcStrings.description,field:"description",sortable:!0,canEdit:!1,renderCell:n.hitch(this,this._buildDescriptionCell),shown:this._columnsShown.description}),{field:"mne",label:this.rcStrings.mnemonic,id:"mneCol",sortable:!0,shown:this._columnsShown.mne},m({editor:ga,editOn:"click",field:"value",label:this.rcStrings.value,id:"valueCol",sortable:!0,shown:this._columnsShown.value,canEdit:n.hitch(this,
this._canEditRow),formatter:n.hitch(this,this._formatValueColumn),exporter:n.hitch(this,this._formatValueColumn)}),{field:"units",label:this.rcStrings.unit,id:"unitCol",sortable:!0,shown:this._columnsShown.units,formatter:function(a){return a.join("/")}},m({editor:r,editOn:"click",label:this.rcStrings.autoManual,field:"autoManual",id:"autoManualCol",sortable:!0,shown:this._columnsShown.autoManual,editorArgs:{store:this._autoManualTimedStore,baseClass:"rcSelectBox",searchAttr:"name",autoComplete:!1,
queryExpr:"*${0}*"},canEdit:n.hitch(this,function(a){if(!this._canEditRow(a)||!rc.session.hasRole(rc.session.roles.autoManual)||0<a.mne.indexOf("AY"))return!1;a.supportsTimedOverride?this._grid.columns.autoManualCol.editorInstance.set("store",this._autoManualTimedStore):this._grid.columns.autoManualCol.editorInstance.set("store",this._autoManualStore);return!0}),set:function(a){return Number(a.autoManual)},get:function(a){return Number(a.autoManual)},formatter:n.hitch(this,this._formatAutoManualColumn),
exporter:n.hitch(this,this._formatAutoManualColumn)}),m({editor:t,editOn:"click",label:this.pointReportStrings.timedOverride,field:"timedOverride",id:"timedCol",sortable:!0,shown:this._columnsShown.timedOverride,editorArgs:{baseClass:"rcTextBox",maxLength:5,pattern:"^\\d{2}:\\d{2}$"},className:n.hitch(this,this._useDisableClassIfNotEditable),canEdit:n.hitch(this,this._canEditTimedOverride),get:n.hitch(this,function(a){return Number(a.autoManual)===this.autoManualEnums.timed?this._minutesToTimeString(a.timedOverride):
this._minutesToTimeString(this._defaultTimedOverride)}),formatter:n.hitch(this,function(a,b){return b.supportsTimedOverride&&Number(b.autoManual)===this.autoManualEnums.timed&&null!==a?a:""})}),{field:"priority",label:this.rcAlarmStrings.priority,id:"priorityCol",sortable:!0,shown:this._columnsShown.priority},{field:"changed",label:this.pointReportStrings.changed,id:"changedCol",sortable:!1,shown:this._columnsShown.changed,formatter:function(a){return!0===a?'\x3cspan class\x3d"svg-changedColIcon"\x3e\x3c/span\x3e':
""},exporter:function(){return""}},{field:"error",label:this.pointReportStrings.errorStatus,id:"errorCol",sortable:!0,shown:this._columnsShown.error,formatter:n.hitch(this,function(a,b){return a.code===this.SuccessCode||!0===b.unsaved?"":this._getErrorText({errStatus:a.code,errMSG:a.msg})})}];a.resolve(this._columnStructure);return a.promise},_buildDescriptionCell:function(a,b,c){var d=this._canEditRow(a),d=A.create("div",{title:P.substitute(this.rcStrings.editX,[this.rcStrings.description]),"class":"description-container"+
(d?" colourlessLink":"")},c,"only");b=b||"";A.create("span",{title:b,innerHTML:b.replace(/\n/g,"\x3cbr /\x3e"),"class":"description-text"},d,"first");A.create("span",{"class":"webviewIcon textEditIcon"},d,"last");this.own(J(c,"click",n.hitch(this,this._showDescriptionDialog,b,a)));return d},_buildToolbar:function(){this._canEdit&&this._createToolbar()},_canEditDescription:function(a){return a.mne.includes("AY")?!1:this._canEditRow(a)},_canEditPointType:function(a){return ha.canEditByMnemonic(a.mne)},
_canEditRow:function(a){return!this._gridDisabled&&a.error.code===this.SuccessCode&&this._canEdit&&!this._inUpdateMode&&this._canEditPointType(a)},_canEditTimedOverride:function(a){return this._canEditRow(a)&&rc.session.hasRole(rc.session.roles.autoManual)&&Number(a.autoManual)===this.autoManualEnums.timed},_checkProgress:function(a){try{var b=a.errStatus;if(b===this.OperationInProgressCode){this._processId=a.data.processId;var c=a.data.total,d=a.data.completed;0!==c?(this._asyncRequestDeferred.progress(Math.ceil(d/
c*100)+"%"),this._pollForStatus()):this._asyncRequestDeferred.reject("Divide By Zero")}else b!==this.SuccessCode?(this._clearPollingInterval(),this._displayError(a),this._asyncRequestDeferred.reject(a)):(this._clearPollingInterval(),this._worksheetNeedsSaving()?this._performSaveOfWorksheet():this._asyncRequestDeferred.resolve(a))}catch(la){console.error(this.declaredClass+" - _checkProgress(): Error checking progress",la),this._asyncRequestDeferred.reject(la),this._clearPollingInterval()}},_clearPollingInterval:function(){null!==
this._statusInteval&&(clearInterval(this._statusInteval),this._statusInteval=null)},_createDescriptionDialog:function(){this._descriptionEditorDialog||(this._descriptionEditorDialog=new ca({baseClass:"description-editor-dialog"}),this.own(this._descriptionEditorDialog))},_connectGrid:function(){this.inherited(arguments);this.own(J(this._grid,[".dgrid-column-mneCol:dgrid-sort",".dgrid-column-nameCol:dgrid-sort",".dgrid-column-valueCol:dgrid-sort",".dgrid-column-unitCol:dgrid-sort"],n.hitch(this,this._customGridSort)),
J(this._grid,"dgrid-sort",n.hitch(this,this.destroyUnitsArrow)),J(this._grid,".dgrid-column-autoManualCol:dgrid-datachange",n.hitch(this,this._onAutoManualChanged)),J(this._grid,"dgrid-datachange",n.hitch(this,this._onGridItemChanged)),J(this._toolbar,"exportClicked",n.hitch(this,this.exportToCSV,this._grid,this.title+".csv",this.title)),J(this._grid.dndSource,"Drop",n.hitch(this,this._onDrop)),J(this._grid,".dgrid-column-descriptionCol:dgrid-editor-show",n.hitch(this,this._onEditorShowDescription)),
J(this._grid,"columnChange",n.hitch(this,this._onColumnHiddenChange)),v.after(this._grid,"renderArray",n.hitch(this,this._selectAll,!1),!0),v.before(this._grid,"gotoPage",n.hitch(this,this._onGoToPage)),v.after(this._grid,"updateDirty",n.hitch(this,function(){this._grid.dirty={}})))},_createSelectorCheckbox:function(a,b,c){a=new f({checked:this._isRowSelected(c),definedValue:c.mne,disabled:this._gridDisabled||c.unsaved?!0:!1});A.place(a.domNode,b,"only");this.own(J(a,"change",n.hitch(this,function(a,
b){b?this._grid.select(a):this._grid.deselect(a)},c.mne)));return a.domNode},_isRowSelected:function(a){return this._grid&&!0===this._grid.selection[a.mne]},_createGrid:function(){var b=new x;this.own(b);if(null===this._grid){this._grid=new (a([p,g,d,Z,k,h]))({columns:this._columnStructure,className:"dgrid-autoheight",selectionMode:"none",selectorType:"checkbox",sort:[{attribute:"id",descending:!1}],store:this._pointsReportStore,showLoadingMessage:!0,dndParams:{accept:["pointsReportPoint"],isSource:!1,
withHandles:!0,checkAcceptance:n.hitch(this,function(a){return a.current.item?0===this._pointsReportStore.query({mne:a.current.item.pointMnemonic}).length:!1})},deselectOnRefresh:!1},this.gridNode);this.own(this._grid);this._grid.startup();b.resolve(this._grid);var c=J(this._grid,"dgrid-refresh-complete",n.hitch(this,function(){this._loadPointsData();c.remove()}));this._connectGrid();z.set(this._grid.bodyNode,"data-dnd-content",this.pointReportStrings.dropObjectsHere)}else b.resolve(this._grid);return b.promise},
_createToolbar:function(){this._selectAllButton=this._toolbar.getButton("selectAll");this._saveButton=this._toolbar.getButton("save");this._cancelButton=this._toolbar.getButton("cancel");this._editValuesButton=this._toolbar.getButton("edit");this._exportButton=this._toolbar.getButton("export");this._columnToggleButton=this._toolbar.getButton("columnToggle");this._deleteButton=this._toolbar.getButton("delete");this._modeButton=this._toolbar.getButton("mode");this.own(J(this._toolbar,"selectAllClicked",
n.hitch(this,this._toggleSelection)),J(this._toolbar,"saveClicked",n.hitch(this,this._onSave,!0)),J(this._toolbar,"cancelClicked",n.hitch(this,this._onCancel)),J(this._toolbar,"editClicked",n.hitch(this,this._showEditDialog)),J(this._toolbar,"toggleColumnsClicked",n.hitch(this,this._positionAndShowColumnSelector)),J(this._toolbar,"deleteClicked",n.hitch(this,this._deletePoints)));this.connectExportButton();return this._toolbar},_customGridSort:function(a){a.preventDefault();var b={mne:this._sortMne,
name:this._sortName,value:this._sortValues,units:this._sortUnits},c=null,d=a.sort[0],c=null,f=!1,c="undefined"!==typeof this._grid.sortObject?this._grid.sortObject:this._grid.get("sort")[0];c.attribute===d.attribute&&(f=!1===c.descending);b.hasOwnProperty(d.attribute.toLowerCase())?(c=b[d.attribute.toLowerCase()],this._grid.sortObject=d,this._grid.sortObject.descending=f,this._grid.set("sort",n.hitch(this,c,f)),this._grid.updateSortArrow(a.sort,!1)):console.error(this.declaredClass+" - _customGridSort(): Unexpected sort attribute",
d)},_deletePoints:function(){if(!this._canEdit)return!1;this._confirmDelete(this._getSelectedRowKeys(),P.substitute(this.worksheetStrings.confirmDeleteX,[this.webviewStrings.points.toLowerCase()]))},_descriptionSet:function(a,b){if(a.description!==b){var c=this._pointsReportStore.getIdentity(a),d=this._grid.cell(c,"descriptionCol"),f={grid:this._grid,cell:d,rowId:c,value:b,bubbles:!0,cancelable:!0};this._grid.updateDirty(c,"description",b);J.emit(d.element,"dgrid-datachange",f);this._grid.refresh()}},
_disableEdits:function(a){this._gridDisabled=a;this._cancelButton.set("disabled",a);this._saveButton.set("disabled",a||!this._isGridDirty());this._toolbar.toggleEditMultiple(a||!this._hasRowsSelected)},_displayError:function(a){var b="sticky",c="error",d=a.errStatus;d==this.BACnetError?(a.data&&a.data.data?b=this._populateStore(a.data.data):(c=new x,b=c.promise,c.resolve(),this.own(c)),b.then(n.hitch(this,function(){this._styleErrorRows()}))):(a=this._getErrorMessage(a.errStatus,a.errMSG),d===this.SuccessCode?
(b="alert",c="success"):d===this.OperationInProgressCode&&(b="alert",c="info"),W.publish(b,{type:c,message:a}))},_fetch:function(a){var b=new x;this.own(b);fa.get("PointsReport",{handleAs:"json",query:{mne:this.mnemonic,systemId:this.system}}).then(n.hitch(this,function(c){c.errStatus&&Number(c.errStatus)===this.SuccessCode&&(Number(rc.session.getAttribute("AccessLevel"))<c.data.securityLevel?b.reject(new R({name:this.errorStrings.accessDenied,message:this.errorStrings.insufficientAccessLevel,suggestion:this.errorStrings.contactAdmin,
e:"Access level of the user is less than the security level of the report"})):(this._populateStore(c.data,a),this._removeDeletedPointsFromStore(c.data.pointList),this._columnsShown=c.data.showList,b.resolve(c)))}));return b.promise},_formatAutoManualColumn:function(a,b){return b.mne&&0<b.mne.indexOf("AY")?"":this._autoManualTypes[a]},_formatValueColumn:function(a,b){return b.error.code!==this.SuccessCode?!0===b.unsaved?"":b.error.code===this.OperationInProgressCode?this.rcErrors.dataLoading:this.rcErrors.inError:
"analog"===a.type||"time"===a.type?a.value:b.units[a.value]},_getDataForAudit:function(){var a=[];u.forEach(this._pointsToUpdate,n.hitch(this,function(b){this._pointsReportStore.get(b.mne).error.code===this.SuccessCode&&a.push(b)}));return a},_getErrorText:function(a){return this._getErrorMessage(a.errStatus,a.errMSG)},_getSelectedRowKeys:function(){return Object.keys(this._grid.selection).filter(n.hitch(this,function(a){return this._grid.selection[a]}))},_isGridDirty:function(){return 0<this._pointsReportStore.query({changed:!0}).length},
_loadPointsData:function(){var a=new x;this.own(a);fa.get("PointsReport/GetData",{handleAs:"json",query:{mne:this.mnemonic,systemId:this.system}}).then(n.hitch(this,function(b){!b.errStatus||b.errStatus!==this.SuccessCode&&b.errStatus!==this.OperationInProgressCode||(this._populateStore(b.data).then(n.hitch(this,this._styleErrorRows)),this._buildAuditLogContext(b.data),a.resolve(),this._firstLoad&&(this._firstLoad=!1,this.publishSearchable(),this._setFetchTimeout()))}),n.hitch(this,function(b){console.error(this.declaredClass+
" - _loadPointsData(): Error updating points",b);a.reject(b)}));return a.promise},_minutesToTimeString:function(a){if(null===a)return"";var b=[],c=Math.floor(a/60);a-=60*c;10>c&&b.push("0");b.push(c);b.push(":");10>a&&b.push("0");b.push(a);return b.join("")},_onClose:function(){this.inherited(arguments);this.resize()},_toggleColumn:function(a){u.forEach(this._columnStructure,n.hitch(this,function(b){b.unhidable||b.field!==a||this._grid.toggleColumnHiddenState(b.id,!this._columnsShown[a])}))},_onCancel:function(){if(this._resultsOpened)this.resultsWidget.onCloseResults();
this._removeUnsavedPoints();this._grid.getColumnHiderMenuState()&&this._positionAndShowColumnSelector();this._fetch(!1).then(n.hitch(this,function(){Object.keys(this._columnsShown).forEach(n.hitch(this,function(a){this._toggleColumn(a)}))}));this._loadPointsData();this.makeClean()},_onColumnHiddenChange:function(a){var b=this._grid.columns[a.columnId];if("undefined"!==typeof b){var c=b.field;a=a.isHide;this._columnsChanged=!0;b.shown=!a;this._columnsShown[c]=!a;this._dirty||this.makeDirty()}},_onDrop:function(){this._dirty||
this.makeDirty()},_onGridItemChanged:function(a){var b=this._pointsReportStore.get(a.rowId);switch(a.cell.column.field.toLowerCase()){case "value":b.value.value!=a.value.value&&(b.changed=!0,b.value=a.value,b.changeMask|=this.propertyChangedMask.value);break;case "automanual":b.autoManual!=Number(a.value)&&(b.changed=!0,b.autoManual=Number(a.value),b.changeMask|=this.propertyChangedMask.autoManual,b.autoManual===this.autoManualEnums.timed&&(b.changeMask|=this.propertyChangedMask.timed));break;case "timedoverride":b.timedOverride!=
this._timeStringToMinutes(a.value)&&(b.changed=!0,b.timedOverride=this._timeStringToMinutes(a.value),b.changeMask|=this.propertyChangedMask.timed);break;case "displayname":b.displayName!=a.value&&(b.changed=!0,b.displayName=a.value,b.changeMask|=this.propertyChangedMask.displayName,this._reportWasUpdated=!0);break;case "description":if(b.description=a.value)b.changed=!0,b.description=a.value,b.changeMask|=this.propertyChangedMask.description;break;default:console.error(this.declaredClass+" - _onGridItemChanged(): Unknown field modifed",
a.cell.column.field)}1==b.changed&&(this._pointsReportStore.put(b),this.makeDirty());this._grid.clearSelection()},_onSave:function(a){var b=new x;this.own(b);if(this._resultsOpened)this.resultsWidget.onCloseResults();var c=J(this,"sendReasonAdded",n.hitch(this,function(d){c.remove();d&&(this._disableEdits(!0),this._performSave().then(n.hitch(this,function(c){this._pointsReportStore.query({unsaved:!0}).forEach(n.hitch(this,function(a){a.unsaved=!1}));this._saveComplete(a,c);this._grid.getColumnHiderMenuState()&&
this._positionAndShowColumnSelector();b.resolve()}),n.hitch(this,function(a){this._removeUnsavedPoints();this._disableEdits(!1);b.reject(a)})))}));0<n.clone(this._pointsReportStore.query(n.hitch(this,function(a){return 0!==(a.changeMask&(this.propertyChangedMask.timed|this.propertyChangedMask.value|this.propertyChangedMask.autoManual|this.propertyChangedMask.description))}))).length?this.sendWithReason("points-report"):(this._changeReason="",this.emit("sendReasonAdded",!0));return b.promise},_onSelectionChange:function(a){this._hasRowsSelected=
!1;var b="dgrid-select"===a.type,c=null,d=null;u.forEach(a.rows,n.hitch(this,function(a){c=N(this._checkBoxClass,a.element)[0];d=q.byNode(c);d.set("checked",b)}));for(var f in this._grid.selection)if(this._grid.selection[f]){this._hasRowsSelected=!0;break}a=!1;var g=0;if(this._hasRowsSelected)for(f in this._grid.selection)if(this._grid.selection[f]){var h=this._grid.store.get(f);if(!this._canEditPointType(h)){a=!0;break}g++}this._canEdit&&(this._toolbar.toggleDeleteButton(this._hasRowsSelected),this._inUpdateMode||
this._toolbar.toggleEditMultiple(!this._hasRowsSelected||a));this._grid._total!==g?(this._toolbar.toggleSelectAllButton(!1),this._isSelectAll=!0):(this._toolbar.toggleSelectAllButton(!0),this._isSelectAll=!1)},_overrideSpecificErrorMessages:function(){this.ErrorMessageMap[this.SuccessCode]=this.errorStrings.operationSuccessful;this.ErrorMessageMap[512]=this.errorStrings.savedWithErrors;this.ErrorMessageMap[513]=this.errorStrings.webviewServiceError;this.ErrorMessageMap[518]=this.pointReportStrings.propertyReferencesNotSupported;
this.ErrorMessageMap[519]=this.pointReportStrings.programObjectsNotSupported},_onAutoManualChanged:function(a){var b=this._pointsReportStore.get(a.rowId);b.timedOverride=Number(a.value)===this.autoManualEnums.timed?this._defaultTimedOverride:null;this._pointsReportStore.put(b)},_onGoToPage:function(a,b){if(a!==this._grid._currentPage||!0===b)if(this._isGridDirty()||"undefined"!==typeof b&&!0!==b){var c=new x;this.own(c);this._confirmDialog=this.createConfirmDialog(c);c.then(n.hitch(this,function(a){this._onCancel();
this._grid.gotoPage(a,!0)},a));return[this._grid._currentPage]}},_performDelete:function(){var a=this._getSelectedRowKeys(),b=[];u.forEach(a,n.hitch(this,function(a){b.push(this._pointsReportStore.get(a).id-1)}));fa.del("PointsReport",{handleAs:"json",data:{mnemonic:this.mnemonic,reportName:this.title,systemId:this.system,pointsPositions:b}}).then(n.hitch(this,function(a){this._displayError(a);a.errStatus===this.SuccessCode&&(this._reportWasUpdated=!0,this._fetch())}),n.hitch(this,function(a){this._reportWasUpdated=
!1;this._displayError({errStatus:this.UnexpectedCode,errMSG:a.message})}))},_performSaveOfValues:function(){if(0<this._pointsToUpdate.length){var a={mne:this.mnemonic,points:H.stringify(this._pointsToUpdate),systemId:this.system,siteId:this.site};this._validateApprovalSession(a).then(n.hitch(this,function(){fa.put("PointsReport",{handleAs:"json",data:a}).then(n.hitch(this,this._checkProgress),n.hitch(this,function(a){console.error(this.declaredClass+" - _performSave(): Error sending save request",
a);this._asyncRequestDeferred.reject(a)}))}),n.hitch(this,function(){this._disableEdits(!1)}))}else this._asyncRequestDeferred.resolve({errStatus:this.SuccessCode,data:{completed:1,data:[],processId:-1,total:0}})},_performSaveOfWorksheet:function(){var a=n.clone(this._pointsReportStore.query({unsaved:!0})),b=n.clone(this._pointsReportStore.query(n.hitch(this,function(a){return 0!==(a.changeMask&this.propertyChangedMask.displayName)&&(a.error.code===this.SuccessCode||!0===a.unsaved)})));fa.put("PointsReport/Update",
{handleAs:"json",data:{reportName:this.title,systemId:this.system,mnemonic:this.mnemonic,pointsMnemonics:u.map(a,n.hitch(this,function(a){return a.mne})),columnChanged:this._columnsChanged,columnShow:H.stringify(this._columnsShown),updatedPoints:u.map(b,function(a){return H.stringify({id:a.id,mne:a.mne,displayName:a.displayName})})}}).then(n.hitch(this,function(a){this._displayError(a);a.errStatus===this.SuccessCode?(this._reportWasUpdated=!0,this._asyncRequestDeferred.resolve(a)):(this._reportWasUpdated=
!1,this._asyncRequestDeferred.reject(this._getErrorMessage(a.errStatus)))}),n.hitch(this,function(a){this._reportWasUpdated=!1;this._asyncRequestDeferred.reject(a);this._displayError({errStatus:this.UnexpectedCode,errMSG:a.message})}))},_performSave:function(){null!==this._asyncRequestDeferred&&(this._asyncRequestDeferred.cancel("New Request"),this._asyncRequestDeferred=null);this._asyncRequestDeferred=new x;this.own(this._asyncRequestDeferred);this._pointsToUpdate=n.clone(this._pointsReportStore.query(n.hitch(this,
function(a){return 0!==(a.changeMask&this._pointPropertyChangeMask)&&a.error.code===this.SuccessCode})));0<this._pointsToUpdate.length?this._performSaveOfValues():this._performSaveOfWorksheet();this._columnsChanged=!1;return this._asyncRequestDeferred.promise},_pollForStatus:function(){this._clearPollingInterval();this._statusInteval=setInterval(n.hitch(this,function(){fa.get("PointsReport/Status",{handleAs:"json",query:{processId:this._processId,mne:this.mnemonic,systemId:this.system}}).then(n.hitch(this,
this._checkProgress),n.hitch(this,function(a){this._asyncRequestDeferred.reject(a);console.error(this.declaredClass+" - _pollForStatus(): Error with progress request",a)}))}),this._defaultStatusTimer)},_populateStore:function(a,b){var c=new x;this.own(c);a instanceof Array||(this.set("title",a.reportName),this.set("canEdit",Number(rc.session.getAttribute("AccessLevel"))>=a.securityLevel),a=a.pointList);var d=[];u.forEach(a,n.hitch(this,function(a){var c=this._pointsReportStore.get(a.mne);a.value.values=
a.units;if("undefined"===typeof c)d.push(this._pointsReportStore.add(a));else if(!1!==b){for(var f in a)c.hasOwnProperty(f)&&(c[f]=a[f],c.unsaved=!1);d.push(this._pointsReportStore.put(c))}}));K(d).then(function(){c.resolve()});return c.promise},_reloadData:function(){this._fetch(!1).then(n.hitch(this,function(){this._loadPointsData().then(n.hitch(this,this._setFetchTimeout,this._dirty))}))},_removeDeletedPointsFromStore:function(a){var b=u.map(a,function(a){return a.mne});this._pointsReportStore.query().forEach(n.hitch(this,
function(a){-1===u.indexOf(b,a.mne)&&this._pointsReportStore.remove(a.mne)}))},_removeUnsavedPoints:function(){this._grid.store.query({unsaved:!0}).forEach(n.hitch(this,function(a){this._grid.store.remove(a.mne)}))},_render:function(){var a=new x;this.own(a);this._buildToolbar();this._createGrid().then(n.hitch(this,function(){a.resolve()}));return a.promise},_resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(n.hitch(this,function(){this._grid.resize()}),1);var a=B.get(this.resultsWidget.domNode,
"height")+B.get(this.resultsWidget.domNode,"paddingTop")+B.get(this.resultsWidget.domNode,"paddingBottom");B.set(this.builderContainer,"height",a+"px")},_saveComplete:function(a,b){this._clearPollingInterval();var c=b.errStatus===this.SuccessCode;a||(c?W.publish("alert",{type:"success",message:this.errorStrings.successfulSave}):W.publish("sticky","error",this._getErrorText(b)));504===b.errStatus&&console.error(this.declaredClass+" - _saveComplete()",b.errMSG);if(b.data&&b.data.data)c=this._populateStore(b.data.data);
else{var d=new x;this.own(d);c=d.promise;d.resolve()}c.then(n.hitch(this,function(){this._sendAuditRequest(this._getDataForAudit());this.makeClean()}));c.always(n.hitch(this,function(){this._disableEdits(!1);this._grid.refresh();this._styleErrorRows()}))},_selectAll:function(a){a?this._grid.selectAll():this._grid.clearSelection();this._toolbar.toggleSelectAllButton(a);this._isSelectAll=!a},_sendAuditRequest:function(a){fa.put("PointsReport/Audit",{handleAs:"json",data:{auditEntries:H.stringify(a),
systemId:this.system,changeReason:this._changeReason,reportWasUpdated:this._reportWasUpdated,mnemonic:this.mnemonic,name:this.title}}).always(n.hitch(this,function(){this._changeReason="";this._pointsToUpdate=null;this._reportWasUpdated=!1}))},_setDnDTargetHeight:function(a){var b="";if(a){a=B.get(this.builderContainer,"height");var b=B.get(this.gridNode,"margin-top"),c=B.get(this.gridNode,"margin-bottom"),d=N(".dgrid-header",this.gridNode)[0],f=B.get(d,"height"),d=B.get(d,"padding-bottom"),b=a-b-
c-f-d+"px"}B.set(this._grid.bodyNode,"height",b)},_setMaxPageSizeOptionHTML:function(){N(".dgrid-page-size option").forEach(n.hitch(this,function(a){"4095"===a.innerHTML&&(a.innerHTML=this.rcStrings.max)}))},_setSupportedTypes:function(){this._supportedObjectTypes=[this.objectTypeMap.inputs,this.objectTypeMap.outputs,this.objectTypeMap.variables,this.objectTypeMap.loops,this.objectTypeMap.schedules,this.objectTypeMap.calendars,this.objectTypeMap.arrays]},_setupManager:function(){this.manager=w.manager();
this.manager.makeAvatar=n.hitch(this,function(){return new this.dndAvatar(this.manager)});this.own(v.after(this.manager,"startDrag",n.hitch(this,this._setDnDTargetHeight,!0)),v.after(this.manager,"stopDrag",n.hitch(this,this._setDnDTargetHeight,!1)))},_showDescriptionDialog:function(a,b){this._canEditRow(b)&&(this._emitDialogEditorShowEvent(b,"descriptionCol"),this._clearFetchTimeout(),this._createDescriptionDialog(),this._descriptionEditorDialog.set({title:b.name+" ("+b.mne+"): "+this.rcStrings.description,
value:a,maxCharacters:!0===b.bacnet?255:8,canEdit:this._canEditDescription(b),execute:n.hitch(this,this._descriptionSet,b),onHide:n.hitch(this,this._emitDialogEditorHideEvent,b,"descriptionCol")}),this._descriptionEditorDialog.show())},_showEditDialog:function(){var a=[],b=null,c=null,d=!1,f=!1,g=null,h=!1,k;for(k in this._grid.selection)!0===this._grid.selection[k]&&(b=this._pointsReportStore.get(k),this._emitDialogEditorShowEvent(b,"valueCol"),null!==c&&b.value.type!==c?d=!0:null===c&&(c=b.value.type),
"multi-state"!==c||null===g||V.arraysAreSame(b.units,g)?null===g&&(g=b.units):d=!0,b.supportsTimedOverride||(h=!0),b.mne.includes("AY")&&(f=!0),0!==b.value.values.length&&a.push(b));null===this._pointEditor?(this._pointEditor=new X({title:this.pointReportStrings.editSelectedPoints,autoManValue:h&&a[0].autoManual===this.autoManualEnums.timed?this.autoManualEnums.manual:a[0].autoManual,valueType:a[0].value.type,pointValue:a[0].value.value,pointStates:a[0].units,timedValue:this._minutesToTimeString(a[0].timedOverride),
hideValue:d,hideAutoMan:f,timedNotSupported:h,onHide:n.hitch(this,this._emitDialogEditorHideEvent,b,"valueCol")}),this.own(this._pointEditor,v.after(this._pointEditor,"execute",n.hitch(this,this._updateStoreValues),!0))):this._pointEditor.setProperties(a[0],this._minutesToTimeString(a[0].timedOverride),d,f,h);void 0!==this._pointEditor.pointValue&&this._pointEditor.show()},_sortMne:function(a,b,c){return a?ia.alphaNumericSort(b.mne,c.mne):-1*ia.alphaNumericSort(b.mne,c.mne)},_sortName:function(a,
b,c){return a?ia.alphaNumericSort(b.name,c.name):-1*ia.alphaNumericSort(b.name,c.name)},_sortUnits:function(a,b,c){var d=0;try{var f=b.units.join("/"),g=c.units.join("/"),d=f.toUpperCase()<g.toUpperCase()?1:f.toUpperCase()>g.toUpperCase()?-1:0}catch(oa){return 0}return a?d:-1*d},_sortValues:function(a,b,c){var d=0;try{var f=b.value.value,g=c.value.value;"analog"===b.value.type&&"analog"===c.value.type?d=Number(f)>Number(g)?-1:Number(f)<Number(g)?1:0:"analog"===b.value.type&&"analog"!==c.value.type?
d=1:"analog"!==b.value.type&&"analog"===c.value.type?d=-1:(f=b.units[b.value.value],g=c.units[c.value.value],d=f>g?-1:f<g?1:0)}catch(oa){return 0}return a?d:-1*d},_styleErrorRows:function(){N(".row-in-error",this._grid.domNode).forEach(function(a){y.remove(a,".row-in-error")});this._pointsReportStore.query({},{sort:this._grid._sort[0],start:(this._grid._currentPage-1)*this._grid.rowsPerPage,count:this._grid.rowsPerPage}).filter(n.hitch(this,function(a){return a.error.code!==this.SuccessCode&&a.error.code!==
this.OperationInProgressCode})).forEach(n.hitch(this,function(a){a=this._grid.row(a.mne).element;null!==a&&y.add(a,"row-in-error")}))},_timeStringToMinutes:function(a){var b=null;"string"===typeof a&&(a=a.split(":"),b=60*Number(a[0])+Number(a[1]));return b},_toggleSelection:function(){this._selectAll(this._isSelectAll)},_updateStoreValues:function(a){var b=null,c=n.clone(this._grid.selection),d;for(d in c)!0===c[d]&&(b=this._pointsReportStore.get(d),null!==a.value&&(b.value.value=a.value,b.changeMask|=
this.propertyChangedMask.value),null!==a.autoManual&&(b.autoManual=a.autoManual,b.changeMask|=this.propertyChangedMask.autoManual,a.autoManual===this._pointEditor.autoManualEnums.timed&&(b.timedOverride=this._timeStringToMinutes(a.time),b.changeMask|=this.propertyChangedMask.timed)),b.changed=!0,this.makeDirty(),this._pointsReportStore.put(b));this._grid.clearSelection();for(d in c)!0===c[d]&&this._grid.select(d)},_useDisableClassIfNotEditable:function(a){return a&&Number(a.autoManual)!==this.autoManualEnums.timed?
"hideValue":""},_worksheetNeedsSaving:function(){var a=n.clone(this._pointsReportStore.query({unsaved:!0})),b=n.clone(this._pointsReportStore.query(n.hitch(this,function(a){return 0!==(a.changeMask&this.propertyChangedMask.displayName)&&a.error.code===this.SuccessCode})));return 0<a.length||0<b.length},destroy:function(){this.inherited(arguments);null!==this._asyncRequestDeferred&&(this._asyncRequestDeferred.cancel(),this._asyncRequestDeferred=null);null!==this._updateTimer&&clearInterval(this._updateTimer)},
destroyUnitsArrow:function(){var a=N(".dgrid-sort-arrow.ui-icon.destroy");A.destroy(a[0])}})})},"webview/reliable/_pointsReport/PointEditor":function(){define("dijit/ConfirmDialog dijit/form/FilteringSelect dijit/form/ValidationTextBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/pointReports dojo/on dojo/store/Memory dojo/store/Observable dojo/text!./templates/PointEditor.html dijit/form/Button dijit/form/CheckBox".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return g("webview/reliable/_pointsReport/PointEditor",[p],{templateString:u,webviewStrings:r,rcStrings:f,pointReportStrings:c,autoManualEnums:{auto:0,manual:1,timed:2},pointTypes:{analog:"analog",binary:"binary",multi:"multi-state",time:"time"},_autoManualStore:null,_valueCBListener:null,_valueInputWidget:null,constructor:function(){this._autoManualStore=new q(new t({data:[{id:this.autoManualEnums.auto,name:this.rcStrings.auto},{id:this.autoManualEnums.manual,
name:this.rcStrings.manual}]}))},buildRendering:function(){this.inherited(arguments);var a=[];this.valueType!==this.pointTypes.analog&&this.valueType!==this.pointTypes.time&&h.forEach(this.pointStates,d.hitch(this,function(b,c){a.push({id:c,name:b})}));this._pointValueStore=new q(new t({data:a}));this.timedNotSupported||this._autoManualStore.put({id:this.autoManualEnums.timed,name:this.pointReportStrings.timedOverride});this.autoManInput.set("store",this._autoManualStore);this.autoManInput.set("value",
this.autoManValue);this.autoManInput.set("queryExpr","*${0}*");this.valueCB.set("disabled",this.hideValue);this.autoManCB.set("disabled",this.hideAutoMan);this.valueType===this.pointTypes.analog?this._createAnalogInput():this.valueType===this.pointTypes.time?this._createTimeInput():this._createEnumeratedInput()},postCreate:function(){this.inherited(arguments);this.okButton.set("label",this.rcStrings.btnOk.toUpperCase());this.cancelButton.set("label",this.rcStrings.btnCancel.toUpperCase());this.own(b(this.autoManInput,
"change",d.hitch(this,this._enableDisableTimeInput)),b(this.autoManCB,"change",d.hitch(this,this._enableDisableAutoManInput)))},setProperties:function(a,b,c,f,g){this.autoManValue=a.autoManual;this.pointValue=a.value.value;this.pointStates=a.units;this.valueType=a.value.type;this.valueCB.set("disabled",c);this.autoManCB.set("disabled",f);g?this._autoManualStore.remove(this.autoManualEnums.timed):this._autoManualStore.put({id:this.autoManualEnums.timed,name:this.pointReportStrings.timedOverride});
this.valueType===this.pointTypes.analog?this._createAnalogInput():this.valueType===this.pointTypes.time?this._createTimeInput():this.valueType!==this.pointTypes.multi&&this.valueType!==this.pointTypes.binary||this._createEnumeratedInput();this.valueType!==this.pointTypes.analog&&this.valueType!==this.pointTypes.time&&(this._pointValueStore.setData([]),h.forEach(this.pointStates,d.hitch(this,function(a,b){this._pointValueStore.put({id:b,name:a})})));this.autoManValue===this.autoManualEnums.timed?this.timeInput.set("value",
b):this.timeInput.set("value","00:30");this.autoManInput.set("value",this.autoManValue)},show:function(){this.valueCB.set("checked",!1);this.autoManCB.set("checked",!1);this.autoManInput.set("disabled",!0);var a={};this.valueType!==this.pointTypes.analog&&this.valueType!==this.pointTypes.time&&(a=this._pointValueStore.query({id:this.pointValue}));"undefined"!==typeof a[0]&&this._valueInputWidget.setDisplayedValue(a[0].name);rc.session.hasRole(rc.session.roles.autoManual)||(document.getElementById("autoManualControls").style.display=
"none");this.inherited(arguments)},_createInput:function(){this.okButton.set("disabled",!1);l.place(this._valueInputWidget.domNode,this.valueInput,"only");this._valueInputWidget.set("disabled",!0);null!==this._valueCBListener&&this._valueCBListener.remove();this._valueCBListener=b(this.valueCB,"change",d.hitch(this,this._enableDisableValueInput))},_createAnalogInput:function(){null!==this._valueInputWidget&&l.destroy(this._valueInputWidget.domNode);this._valueInputWidget=new k({value:this.pointValue,
baseClass:"rcTextBox",pattern:"^(\\-\\d+|\\d*)(\\.\\d+|\\d*)([eE][+|-]\\d+|\\d*)$",invalidMessage:this.pointReportStrings.inputMustBeANumber,onChange:d.hitch(this,this._verifyOkButton)});this._createInput()},_createEnumeratedInput:function(){null!==this._valueInputWidget&&l.destroy(this._valueInputWidget.domNode);this._valueInputWidget=new m({baseClass:"rcSelectBox",store:this._pointValueStore,value:this.pointValue});this._createInput()},_createTimeInput:function(){null!==this._valueInputWidget&&
l.destroy(this._valueInputWidget.domNode);this._valueInputWidget=new k({value:this.pointValue,baseClass:"rcTextBox rcTimeTextBox",pattern:"^(0?\\d|1\\d|2[0-3]):([0-5]\\d):([0-5]\\d)$",invalidMessage:this.rcStrings.invalidTime,onChange:d.hitch(this,this._verifyOkButton)});this._createInput()},_getValueAttr:function(){var a={value:null,autoManual:null,time:null};this.valueCB.get("checked")&&(a.value=this._valueInputWidget.get("value"));this.autoManCB.get("checked")&&(a.autoManual=Number(this.autoManInput.get("value")),
a.autoManual===this.autoManualEnums.timed&&(a.time=this.timeInput.get("value")));return a},_enableDisableAutoManInput:function(a){this.autoManInput.set("disabled",!a);this.timeInput.set("disabled",!a||Number(this.autoManInput.get("value"))!==this.autoManualEnums.timed)},_enableDisableTimeInput:function(a){this.timeInput.set("disabled",a!==this.autoManualEnums.timed||!this.autoManCB.get("checked"))},_enableDisableValueInput:function(a){this._valueInputWidget.set("disabled",!a)},_verifyOkButton:function(){this.okButton.set("disabled",
!this._valueInputWidget.isValid())},destroy:function(){this.inherited(arguments);null!==this._valueCBListener&&(this._valueCBListener.remove(),this._valueCBListener=null)}})})},"webview/reliable/_pointsReport/PointsReportColumnHider":function(){define("dgrid/util/misc dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on put-selector/put ./InlineColumnHiderCheckbox ../../widget/ColumnHider xstyle/css!dgrid/css/extensions/ColumnHider.css".split(" "),function(p,m,k,h,g,d,l,f,
r){return m("webview/reliable/_pointsReport/PointsReportColumnHider",r,{_renderHiderMenuEntries:function(){this.inherited(arguments);h.toggle(this.domNode,"hide-toggle-checkbox",!0)},_renderHiderMenuEntry:function(c){var b=c.id,h=p.escapeCssIdentifier(b,"-"),l,m;c.hidden&&(c.hidden=!1,this._hideColumn(b),c.hidden=!0);if(!c.unhidable){l=this.domNode.id+"-hider-menu-check-"+h;var a=k.hitch(this,function(a){var b=m.get("checked");this.contentNode&&d.emit(this.domNode,"columnChange",{columnId:a,isHide:!b})},
b);m=this._columnHiderCheckboxes[b]=new f({value:h,onClick:a});g.place(m.domNode,c.headerNode,"first");m.id=l;m.set("checked",c.shown);c.shown||this._hideColumn(c.id)}},renderHeader:function(){function c(a){a.stopPropagation()}var b=this,f=this.hiderMenuNode,g=this.hiderToggleNode,h;this.inherited(arguments,[!0]);if(f){for(h in this._columnHiderRules)this._columnHiderRules[h].remove();f.innerHTML=""}else g=this.hiderToggleNode=l(this.domNode,"button.ui-icon.dgrid-hider-toggle[type\x3dbutton][aria-label\x3d"+
this.i18nColumnHider.popupTriggerLabel+"]"),this._listeners.push(d(g,"click",function(a){b._toggleColumnHiderMenu(a)})),f=this.hiderMenuNode=l("div.dgrid-hider-menu[role\x3ddialog][aria-label\x3d"+this.i18nColumnHider.popupLabel+"]"),f.id=this.id+"-hider-menu",this._listeners.push(d(f,"keyup",function(a){27===(a.charCode||a.keyCode)&&(b._toggleColumnHiderMenu(a),g.focus())})),f.style.display="none",l(this.domNode,f),this._listeners.push(d(f,"mousedown",c),d(g,"mousedown",c)),this._bodyListener||(this._bodyListener=
d.pausable(document,"mousedown",function(a){this._activeGrid&&this._activeGrid._toggleColumnHiderMenu(a)}),this._bodyListener.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},_toggleColumnHiderMenu:function(){var c=this.subRows,b,d,f,g;this._activeGrid=(b=this._hiderMenuOpened)?null:this;this._hiderMenuOpened=!b;if(!0===this._hiderMenuOpened)for(f=0,b=c.length;f<b;f++)for(g=0,d=c[f].length;g<d;g++)this._showColumn(c[f][g].id);else for(f=0,b=c.length;f<
b;f++)for(g=1,d=c[f].length;g<d;g++)!1===this._columnHiderCheckboxes[c[f][g].id].checked&&this._hideColumn(c[f][g].id);h.toggle(this.domNode,"hide-toggle-checkbox",!this._hiderMenuOpened)}})})},"webview/reliable/_pointsReport/InlineColumnHiderCheckbox":function(){define(["dijit/form/CheckBox","dojo/_base/declare"],function(p,m){return m("webview/reliable/_pointsReport/InlineColumnHiderCheckbox",[p],{_onClick:function(k){var h=this.inherited(arguments);k.stopPropagation();return h}})})},"webview/reliable/_pointReportDndAvatar":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang","dojo/dnd/Avatar","dojo/dom-construct"],function(p,m,k,h,g){return m("webview/reliable/_pointReportDndAvatar",h,{construct:function(){var d=g.create("div",{"class":"dojoDndAvatar pointsReportAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}});p.forEach(this.manager.nodes,k.hitch(this,function(h){var f=g.create("div");f.appendChild(g.create("span",{"class":"webviewIcon dragHandle"}));f.appendChild(g.create("span",{innerHTML:h.innerText}));d.appendChild(f)}));
this.node=d}})})},"webview/reliable/_pointsReport/ValueInput":function(){define("dijit/_FocusMixin dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/pointReports dojo/on dojo/query dojo/store/Memory dojo/text!./templates/ValueInput.html dijit/form/FilteringSelect dijit/form/ValidationTextBox".split(" "),function(p,m,k,h,g,d,l,f,r,c,b,t,q,u){return d("webview/reliable/_pointsReport/ValueInput",
[k,p,m,h],{templateString:u,_currentValue:0,_valueType:"analog",_valueOptions:[],constructor:function(){this.rcStrings=r;this.pointReportStrings=c},postCreate:function(){this.inherited(arguments);this.enumeratedInput._getValueAttr=function(){return Number(this.valueNode.value)};this.enumeratedInput.set("queryExpr","*${0}*");this.own(b(this.enumeratedInput,"change",l.hitch(this,this._onChange)),b(this.analogInput,"change",l.hitch(this,this._onChange)),b(this.timeInput,"change",l.hitch(this,this._onChange)))},
focus:function(){switch(this._valueType){case "analog":this.analogInput.focus();break;case "time":this.timeInput.focus();break;case "binary":case "multi-state":this.enumeratedInput.focus()}},onChange:function(a){b.emit(this,"change",this.value)},isValid:function(){switch(this._valueType){case "analog":return this.analogInput.isValid();case "time":return this.timeInput.isValid();case "binary":case "multi-state":return this.enumeratedInput.isValid()}},_getValueAttr:function(){var a=null;switch(this._valueType){case "analog":a=
this.analogInput.get("value");break;case "time":a=this.timeInput.get("value");break;case "binary":case "multi-state":a=Number(this.enumeratedInput.get("value"))}return{type:this._valueType,value:a,values:this._valueOptions}},_onChange:function(a){if(a!==this._currentValue)this.onChange(Number(a))},_setValueAttr:function(a){this._valueType=a.type;this._valueOptions=a.values;this._currentValue=a.value;t(".rcTextBox, .rcSelectBox",this.domNode).forEach(function(a){f.add(a,"hidden")});switch(a.type){case "analog":this.analogInput.set("value",
a.value);f.remove(this.analogInput.domNode,"hidden");break;case "time":this.timeInput.set("value",a.value);f.remove(this.timeInput.domNode,"hidden");break;case "binary":case "multi-state":var b=[];g.forEach(a.values,l.hitch(this,function(a,c){b.push({id:c,name:a})}));this._nonAnalogStore=new q({data:b});this.enumeratedInput.set("store",this._nonAnalogStore);this.enumeratedInput.set("value",a.value);f.remove(this.enumeratedInput.domNode,"hidden")}}})})},"webview/reliable/_pointsReport/PointsReportToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/i18n!../../nls/pointReports dojo/on dojo/text!./templates/PointsReportToolbar.html ../../widget/ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),
function(p,m,k,h,g,d,l,f,r){return p("webview/reliable/_pointsReport/PointsReportToolbar",[r],{rcStrings:h,templateString:f,webviewStrings:g,pointReportStrings:d,isAdminPage:null,hasElevatedPermission:!1,postCreate:function(){this.inherited(arguments);this._elevatedButtons=[this.columnToggleButton,this.deleteButton];this.hasElevatedPermission||this._removeElevatedButtons()},_setTitleAttr:function(c){null!==this.isAdminPage&&this.isAdminPage()?this._set("title",c):this.inherited(arguments)},onSelectAllClicked:function(c){},
onSaveClicked:function(){},onCancelClicked:function(){},onEditClicked:function(){},onExcelExportClicked:function(){},onExportClicked:function(){},onToggleColumnsClicked:function(){},onDeleteClicked:function(){},toggleDeleteButton:function(c){this.hasElevatedPermission&&this.deleteButton.set("disabled",!c)},toggleEditMultiple:function(c){this.editValuesButton.set("disabled",c)},toggleSelectAllButton:function(c){k.toggle(this.selectAllButton.toolbarButtonIcon,"svg-select-all-icon",!c);k.toggle(this.selectAllButton.toolbarButtonIcon,
"svg-deselect-all-icon",c);c?this.selectAllButton.tooltip.set("label",this.webviewStrings.deselectAll):this.selectAllButton.tooltip.set("label",this.webviewStrings.selectAll)},_createButtonMap:function(){this._buttons={selectAll:this.selectAllButton,save:this.saveButton,edit:this.editValuesButton,cancel:this.cancelButton,"export":this.exportButton,excelExport:this.excelButton};this.hasElevatedPermission&&m.mixin(this._buttons,{toggleColumn:this.columnToggleButton,"delete":this.deleteButton})},_createConnections:function(){this.own(l(this.excelButton.domNode,
"click",m.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),l(this.selectAllButton.domNode,"click",m.hitch(this,function(){if(!this.selectAllButton.get("disabled"))this.onSelectAllClicked()})),l(this.saveButton.domNode,"click",m.hitch(this,function(){if(!this.saveButton.get("disabled"))this.onSaveClicked()})),l(this.editValuesButton.domNode,"click",m.hitch(this,function(){if(!this.editValuesButton.get("disabled")&&this.canEdit)this.onEditClicked()})),l(this.cancelButton.domNode,
"click",m.hitch(this,function(){if(!this.cancelButton.get("disabled"))this.onCancelClicked()})),l(this.exportButton.domNode,"click",m.hitch(this,function(){if(!this.exportButton.get("disabled"))this.onExportClicked()})));this.hasElevatedPermission&&this.own(l(this.columnToggleButton.domNode,"click",m.hitch(this,function(){if(!this.columnToggleButton.get("disabled"))this.onToggleColumnsClicked()})),l(this.deleteButton.domNode,"click",m.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onDeleteClicked()})))},
_removeElevatedButtons:function(){this._elevatedButtons.forEach(function(c){c.destroy()})}})})},"webview/reliable/PointsReportWorksheet":function(){define("dgrid/Grid dgrid/editor dgrid/OnDemandGrid dgrid/Selection dgrid/selector dijit/form/NumberTextBox dijit/form/ValidationTextBox dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/date/locale dojo/Deferred dojo/dom dojo/dom-construct dojo/dom-style dojo/i18n!../nls/all dojo/i18n!../nls/pointReports dojo/io-query dojo/json dojo/on dojo/query dojo/string dojo/text!./_pointsReport/templates/PointsReportWorksheet.html dojo/topic rc/_base/util rc/bacnet/enums rc/util/notices ../admin/AdminWorksheetBase ../widget/ColumnHider ../xhrEnhanced ./_pointsReport/PointReportsToolbar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H){return c("webview/reliable/PointsReportWorksheet",[I],{allowSpecificInstances:!1,baseClass:"point-reports",dataTypeName:v.pointReports,identityProperty:"mne",individualMnemonic:"PRP",instanceRe:/prp(\d+)/i,templateString:C,UnexpectedCode:508,webviewStrings:v,_invalidOrEmptyName:!1,_invalidOrEmptyName:!1,_hasElevatedPermission:rc.session.hasRole(rc.session.roles2.modifyPointReports,!0),constructor:function(){this.pointReportStrings=
x;b.mixin(this.ErrorMessageMap,{505:this.pointReportStrings.summaryFileMissing,507:this.pointReportStrings.nameAlreadyInUse,512:this.pointReportStrings.illegalDescriptor,514:this.pointReportStrings.reportNotFound,515:this.pointReportStrings.couldNotCreateReport})},postCreate:function(){this.inherited(arguments);this._fetch().then(b.hitch(this,function(a){this._parseFetch(a);this._buildGrid()}))},onInitSuccess:function(){},makeClean:function(){this._toolbar.set("dirty",!1);this.inherited(arguments);
this._setFetchTimeout()},makeDirty:function(){this._clearFetchTimeout();this._toolbar.set("dirty",!0);this.inherited(arguments)},setToolBarMenus:function(a){this.userToolBar.resetMenusAndHelp(a)},_addToolbarListeners:function(){this.own(y(this._toolbar,"add",b.hitch(this,this._addDialog,B.substitute(this.worksheetStrings.createX,[this.pointReportStrings.pointsReport]),50)),y(this._toolbar,"cancel",b.hitch(this,this._revertChanges)),y(this._toolbar,"remove",b.hitch(this,this._deleteReports)),y(this._toolbar,
"save",b.hitch(this,this._saveChanges)),y(this._toolbar,"selectAll",b.hitch(this,this._toggleGridSelection)),y(this._toolbar,"toggleColumns",b.hitch(this,this._positionAndShowColumnSelector)))},_allowSelection:function(a){return this._canEditRow(a.data)},_buildColumnStructure:function(){this._columnStructure=[g({selectorType:b.hitch(this,this._createSelectorCheckbox),id:"selectorCol",field:"mne",label:"",hidden:!rc.session.hasRole(rc.session.roles2.modifyPointReports,!0),unhidable:!0,sortable:!1,
exporter:function(){return""}}),{label:this.webviewStrings.instance,field:"instance",id:"instanceCol",sortable:!1,renderCell:b.hitch(this,this._createInstanceCell)},m({editOn:"click",editor:l,editorArgs:{baseClass:"rcTextBox",maxLength:20,required:!0,validator:b.hitch(this,this._validateNameField)},className:b.hitch(this,function(a){return a&&this._canEditRow(a)?"colourlessLink":""}),sortable:!1,canEdit:b.hitch(this,this._canEditRow),label:this.rcStrings.spName,field:"name",id:"nameCol",formatter:b.hitch(this,
this._hideCellDataForEditor)}),{label:this.webviewStrings.description,field:"description",id:"descriptionCol",sortable:!1,renderCell:b.hitch(this,this._buildDescriptionCell)},{label:this.webviewStrings.lastModified,field:"lastModified",id:"lastModifiedCol",sortable:!1,formatter:b.hitch(this,function(a,b){return this._isPlaceholderRow(b)?"":t.format(new Date(a),{selector:"date",formatLength:"full"})})},{label:this.pointReportStrings.pointCount,field:"pointCount",id:"pointCountCol",sortable:!1,formatter:b.hitch(this,
this.formatNumberCell),exporter:function(a){return a.toString()}},m({editOn:"click",editor:d,editorArgs:{constraints:{max:99,min:0,pattern:"##"},required:!0,validator:b.hitch(this,this._checkAccessLevel)},canEdit:b.hitch(this,this._canEditRow),label:this.rcStrings.security,field:"security",id:"securityCol",className:b.hitch(this,function(a){return a&&this._canEditRow(a)?"colourlessLink":""}),sortable:!1,formatter:b.hitch(this,this.formatNumberCell),exporter:function(a){return a.toString()}})]},_buildGrid:function(){null===
this._grid&&(this._buildColumnStructure(),this._grid=new (c([p,k,h,L]))({columns:this._columnStructure,minRowsPerPage:25,maxEmptySpace:25,bufferRows:10,className:"dgrid-autoheight",selectionMode:"none",allowSelect:b.hitch(this,this._allowSelection),sort:[{attribute:"instance",descending:!1}],store:this._gridStore,showLoadingMessage:!0,deselectOnRefresh:!1},this.gridNode),this._grid.startup(),this.onInitSuccess(),this._connectGrid())},_buildTitle:function(){},_canAccessRow:function(a){return this.inherited(arguments)&&
Number(rc.session.getAttribute("AccessLevel"))>=a.security},_canEditRow:function(){return this.inherited(arguments)&&rc.session.hasRole(rc.session.roles2.modifyPointReports,!0)},_checkInvalidPointReportName:function(a){a.editor.isValid()||(this._invalidOrEmptyName?(D.publish("sticky",{message:this.errorStrings.invalidPointReportName,type:"error"}),this._invalidOrEmptyName=!1):D.publish("sticky",{message:this.errorStrings.descriptorIsPredefined,type:"error"}))},_checkAccessLevel:function(a){return a?
(a=parseInt(a),!isNaN(a)&&a<=parseInt(rc.session.getAttribute("AccessLevel"))):!0},_connectGrid:function(){this.inherited(arguments);this.own(y(this._toolbar,"export",b.hitch(this,this.exportToCSV,this._grid,"pointreports.csv",this.title)),y(this._grid,"dgrid-select, dgrid-deselect",b.hitch(this,this._onSelectionChange)),y(this._grid,"dgrid-datachange",b.hitch(this,this.makeDirty)),y(this._grid,".dgrid-column-nameCol:dgrid-editor-hide",b.hitch(this,function(a){this._checkInvalidPointReportName(a)})),
y(this._grid,".dgrid-column-nameCol:dgrid-editor-hide",b.hitch(this,function(a){this._checkInvalidPointReportName(a)})),y(this._grid,".dgrid-column-securityCol:dgrid-editor-hide",b.hitch(this,function(a){var b=!isNaN(a.editor.value);a&&a.editor&&!a.editor.isValid()&&D.publish("alert",{type:"error",message:b?this.errorStrings.securityLevelHigherThanAccessLevel:this.errorStrings.mustBeNumericInput})})))},_createButtons:function(){},_createInstanceCell:function(c,d){var f=this._canAccessRow(c),g=a.create("span",
{innerHTML:this._isPlaceholderRow(c)?"":d,"class":f?"linkable":"",title:f?"Go to "+c.name:""});f&&this.own(y(g,"click",b.hitch(this,this._goToPointsReport,this.individualMnemonic+d)));return g},_deleteReports:function(){if(!this._canEdit)return!1;var a=Object.keys(this._grid.selection).filter(b.hitch(this,function(a){return this._grid.selection[a]&&this._canEditRow(this._grid.store.get(a))}));this._confirmDelete(a,B.substitute(this.worksheetStrings.confirmDeleteX,[this.webviewStrings.pointReports.toLowerCase()]))},
_displayUnexpectedError:function(a){G.widget.clear();this._displayError({errStatus:this.UnexpectedCode,errMSG:a.message})},_fetch:function(){this._clearFetchTimeout();return H.get("PointReports/Read",{handleAs:"json",preventCache:!0,query:{systemId:this.system}})},_fetchDeviceName:function(){var a=new q;a.resolve();return a.promise},_getConstantHeights:function(){-1===this._constantHeights&&(this._constantHeights=0,u.byId("rcAdminContentHeader")&&(this._constantHeights=n.get("rcAdminContentHeader",
"height"),this._constantHeights+=n.get("rcAdminContentHeader","paddingTop")),this._constantHeights+=n.get(this._toolbar.domNode,"height"),this._constantHeights+=n.get(this._grid.headerNode,"paddingBottom"),this._constantHeights+=n.get(this._grid.domNode,"marginTop"),this._constantHeights+=n.get(this._grid.domNode,"marginBottom"),this._constantHeights+=n.get(this._grid.domNode,"borderTopWidth"),this._constantHeights+=n.get(this._grid.domNode,"borderBottomWidth"));return this._constantHeights},_getNextInstance:function(){var a=
this._grid.store.data.filter(b.hitch(this,function(a){return!this._isPlaceholderRow(a)})).map(function(a){return Number(a.instance)}).sort(function(a,b){return Number(a)>Number(b)?1:Number(a)<Number(b)?-1:0}),c=0;if(0!==a.length)if(a.length===a[a.length-1])c=a.length;else for(;c<a.length&&!(1<a[c]-c);++c);return c+1},_goToPointsReport:function(a){var b="",b=this.isAdminPage()?"#pointsreport?"+w.objectToQuery({site:this.site,system:this.system,mne:a}):E.mnemonicToUri(a);window.location.hash=b},_onSelectionChange:function(a){var c=
"dgrid-select"===a.type,d=null,g=null;r.forEach(a.rows,b.hitch(this,function(a){d=A(".dijitCheckBox",a.element)[0];g=f.byNode(d);g.set("checked",c)}));a=Object.keys(this._grid.selection).filter(b.hitch(this,function(a){return this._grid.selection[a]}));this._toolbar.set("isSelectAll",a.length!==this._grid.store.data.filter(b.hitch(this,function(a){return this._canAccessRow(a)})).length);a=0<a.filter(b.hitch(this,function(a){return this._canEditRow(this._grid.store.get(a))})).length;this._toolbar.toggleDelete(a)},
_parseFetch:function(a){a?200===a.errStatus?(this._populateStore(a.data),this.makeClean(),webview.auditUtil.setContextDataWithSiteId(this.site,[{systemId:this.system,objectName:"#PRP"}],this._toolbar.title)):this._displayError(a):this._displayError({errStatus:this.UnexpectedCode,errMSG:"No response"})},_parseUpdateResponse:function(a){G.widget.clear();this._displayError(a);a.errStatus===this.SuccessCode&&(this._grid.clearSelection(),this._fetch().then(b.hitch(this,this._parseFetch)))},_performAdd:function(a){var c=
a.specificInstance;-1===c&&(c=this._getNextInstance());a={systemId:this.system,name:a.name,mne:this.individualMnemonic+c};D.publish("sticky",{type:"info",message:this.errorStrings.addInProgress});H.post("PointReports/Create",{handleAs:"json",data:a}).then(b.hitch(this,this._parseUpdateResponse),b.hitch(this,this._displayUnexpectedError))},_performDelete:function(){var a=Object.keys(this._grid.selection).filter(b.hitch(this,function(a){return this._grid.selection[a]&&this._canEditRow(this._grid.store.get(a))}));
D.publish("sticky",{type:"info",message:this.errorStrings.deleteInProgress});H.del("PointReports/Delete",{handleAs:"json",data:{systemId:this.system,instances:a}}).then(b.hitch(this,this._parseUpdateResponse),b.hitch(this,this._displayUnexpectedError))},_populateStore:function(a){null!==this._grid?(this._grid.store.setData(a),this._grid.refresh()):this._gridStore.setData(a)},_revertChanges:function(){this._grid.revert();this.makeClean();this._reloadData()},_saveChanges:function(){var a=Object.keys(this._grid.dirty);
D.publish("sticky",{type:"info",message:this.errorStrings.saveInProgress});this._grid.save().then(b.hitch(this,this._sendSave,a))},_sendSave:function(a){var c=this._grid.store.query(function(b){return a.includes(b.mne)}).map(function(a){return{mne:a.mne,name:a.name,description:a.description,security:a.security}});H.put("PointReports/Update",{handleAs:"json",data:{systemId:this.system,reports:z.stringify(c)}}).then(b.hitch(this,this._parseUpdateResponse),b.hitch(this,this._displayUnexpectedError))},
_setCanEditFlag:function(){this._canEdit=!0},_setTitle:function(){},_toggleGridSelection:function(a){a?this._grid.selectAll():this._grid.clearSelection()},_validateNameField:function(a){var b=/\*|\?|"|<|>|\/|\||:|\\/i.exec(a),c=/^\s*$/i.exec(a);if(null!==b||null!==c||!a)return this._invalidOrEmptyName=!0,!1;if(-1!==E.reservedKeywords.indexOf(a))return!1;b=/(\d+)([a-z|\-]+)(\d+)/i.exec(a);if(null!==b)return-1===F.mnemonics.indexOf(b[2]);b=/([a-z|\-]+)(\d+)/i.exec(a);if(null!==b)return-1===F.mnemonics.indexOf(b[1]);
b=/(\d+)([a-z|\-]+)/i.exec(a);return null!==b?-1===F.mnemonics.indexOf(b[2]):!0}})})},"webview/reliable/_pointsReport/PointReportsToolbar":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/on dojo/request/xhr dojo/text!./templates/PointReportsToolbar.html ../../widget/ClientWidgetToolbar ../../widget/ToolbarButton".split(" "),function(p,m,k,h,g,d,l,f,r){return p("webview/reliable/_pointsReport/PointReportsToolbar",[r],{isSelectAll:!0,
rcStrings:h,templateString:f,webviewStrings:g,hasElevatedPermission:!1,postCreate:function(){this.inherited(arguments);this._elevatedButtons=[this.selectAllButton,this.saveButton,this.addButton,this.deleteButton];!this.isAdmin()&&this.systemId&&this._getAndSetTitle();this.hasElevatedPermission||this._removeElevatedButtons()},_setDirtyAttr:function(c){this.hasElevatedPermission&&this.saveButton.set("disabled",!c);this._set("dirty",c)},_setIsSelectAllAttr:function(c){this.hasElevatedPermission&&(c?
(this.selectAllButton.set("titleStr",this.webviewStrings.selectAll),k.replace(this.selectAllButton.toolbarButtonIcon,"svg-select-all-icon","svg-deselect-all-icon")):(this.selectAllButton.set("titleStr",this.webviewStrings.deselectAll),k.replace(this.selectAllButton.toolbarButtonIcon,"svg-deselect-all-icon","svg-select-all-icon")));this._set("isSelectAll",c)},onAdd:function(){},onCancel:function(){},onExcelExportClicked:function(){},onExport:function(){},onRemove:function(){},onSave:function(){},onSelectAll:function(c){},
onToggleColumns:function(){},toggleDelete:function(c){this.hasElevatedPermission&&this.deleteButton.set("disabled",!c)},toggleSave:function(c){this.hasElevatedPermission&&this.saveButton.set("disabled",!c)},_createButtonMap:function(){this._buttons={cancel:this.cancelButton,"export":this.exportButton,excelExport:this.excelButton,toggleColumn:this.toggleColumnsButton};this.hasElevatedPermission&&m.mixin(this._buttons,{selectAll:this.selectAllButton,save:this.saveButton,add:this.addButton,"delete":this.deleteButton})},
_createConnections:function(){this.own(d(this.excelButton.domNode,"click",m.hitch(this,function(){if(!this.excelButton.get("disabled"))this.onExcelExportClicked()})),d(this.cancelButton.domNode,"click",m.hitch(this,function(){this.onCancel()})),d(this.exportButton.domNode,"click",m.hitch(this,function(){this.onExport()})),d(this.toggleColumnsButton.domNode,"click",m.hitch(this,function(){this.onToggleColumns()})));this.hasElevatedPermission&&this.own(d(this.addButton.domNode,"click",m.hitch(this,
function(){this.onAdd()})),d(this.deleteButton.domNode,"click",m.hitch(this,function(){if(!this.deleteButton.get("disabled"))this.onRemove()})),d(this.saveButton.domNode,"click",m.hitch(this,function(){if(!this.saveButton.get("disabled"))this.onSave()})),d(this.selectAllButton.domNode,"click",m.hitch(this,function(){this._onSelectAll()})))},_getAndSetTitle:function(){l.get("GetSystemName",{handleAs:"json",query:{systemId:this.systemId}}).then(m.hitch(this,function(c){c.systemName&&this.set("title",
c.systemName+"/"+this.webviewStrings.pointReports+" (PRPS)")}))},_onSelectAll:function(){var c=this.isSelectAll;this.set("isSelectAll",!c);this.onSelectAll(c)},_removeElevatedButtons:function(){this._elevatedButtons.forEach(function(c){c.destroy()})}})})},"webview/reliable/TenantReport":function(){define("dgrid/Grid dgrid/OnDemandGrid dojo/_base/declare dojo/_base/lang dojo/aspect dojo/currency dojo/date/locale dojo/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n!rc/nls/all dojo/i18n!../nls/afterHoursReport dojo/i18n!../nls/all dojo/i18n!../nls/errorMessages dojo/json dojo/number dojo/on dojo/query dojo/request/xhr dojo/store/Observable dojo/store/Memory dojo/text!./_afterHours/templates/TenantReport.html dojo/topic rc/_base/util rc/_Widget ./_afterHours/formatUtilities ./_afterHours/RangePicker ./_afterHours/ReasonDialog ../util/globalConstants ../widget/ColumnHider ../widget/dGridExtensions/dGridExcelExporterMixin ../widget/dGridExtensions/SummaryRow dijit/layout/BorderContainer dijit/layout/ContentPane ../widget/ClientToolBar".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O){return k("webview/reliable/TenantReport",[G,N],{templateString:D,afterHoursStrings:a,currency:null,hasRate:!1,observer:null,rcStrings:u,viewRangeStart:null,viewRangeEnd:null,_dataPath:"TenantReportTable",_generalPath:"TenantReportGeneral",webviewStrings:n,_ColumnMasks:{request:1,user:2,event:4,source:8,service:16,start:32,end:64,hours:128,rate:256,cost:512,reason:1024,mnemonic:2048},_ErrorCodeToMessageMap:{502:v.generalScheduleDoesNotExist,
504:v.unexpectedError,505:v.siteDoesNotExist,506:v.generalInsufficientPrivileges,403:v.accessForbidden},_columnMask:65535,_grid:null,_periodSelector:null,_reasonDialog:null,_SuccessCode:200,_UnexpectedCode:504,constructor:function(){this._gridStore=new B(new C({data:[]}));this.observer=this._gridStore.query().observe(h.hitch(this,this._updateTotals))},postCreate:function(){this.inherited(arguments);this._parseHash();this.forBlock="true"===this.forBlock;this.scheduleId=Number(this.scheduleId);this._setDefaultReportPeriod();
this._fetchReportProperties().then(h.hitch(this,this._propertiesFetched),h.hitch(this,this._throwPageError));this.own(z(this.reportDates,"click",h.hitch(this,this._showReportPeriodSelector)),z(this.showFutureCB,"change",h.hitch(this,function(){this._fetchData({start:this.viewRangeStart,end:this.viewRangeEnd})})))},exportCsv:function(){this.exportToCSV(this._grid,"afterhours.csv",this.fullTitle)},print:function(){this.dgridToTable(this._grid).then(h.hitch(this,function(a){b.add(this.gridNode,"hidden");
t.place(a,this.printableGridContainer,"only");b.remove(this.printableGridContainer,"hidden");this.printWithPreview(this.domNode).then(h.hitch(this,function(){b.remove(this.gridNode,"hidden");t.empty(this.printableGridContainer);b.add(this.printableGridContainer,"hidden")}))}))},resize:function(){this.inherited(arguments);null!==this._grid&&setTimeout(h.hitch(this,this._setGridSize),1)},_addToolbarButtons:function(){this._toolbar.addToolBarItem(this.webviewStrings.toggleColumns,"toggleColumn","rc24Icon svg-column-toggle-icon toolbarButtonIcon",
h.hitch(this,this._positionAndShowColumnSelector));rc.session.enforceChangeApproval||this._toolbar.addToolBarItem(u.xport,"export","rc24Icon svg-export-icon toolbarButtonIcon",h.hitch(this,this.exportCsv));this._toolbar.addToolBarItem(n.exportExcel,"exportExcel","rc24Icon toolbarButtonIcon svg-xsl-export-icon",h.hitch(this,this.exportGridAsExcel));this.setTooltips()},_buildColumnStructure:function(){this._columnStructure=[{label:this.afterHoursStrings.service,field:"eventDate",id:"serviceCol",hidden:(this._columnMask&
this._ColumnMasks.service)!==this._ColumnMasks.service,unhidable:(this._columnMask&this._ColumnMasks.service)!==this._ColumnMasks.service,formatter:I._formatDate},{label:this.rcStrings.event,field:"eventName",id:"eventCol",hidden:(this._columnMask&this._ColumnMasks.event)!==this._ColumnMasks.event,unhidable:(this._columnMask&this._ColumnMasks.event)!==this._ColumnMasks.event},{label:this.webviewStrings.source,field:"source",id:"sourceCol",hidden:(this._columnMask&this._ColumnMasks.source)!==this._ColumnMasks.source,
unhidable:(this._columnMask&this._ColumnMasks.source)!==this._ColumnMasks.source},{label:this.rcStrings.mnemonic,field:"mnemonic",id:"mnemonicCol",hidden:(this._columnMask&this._ColumnMasks.mnemonic)!==this._ColumnMasks.mnemonic,unhidable:(this._columnMask&this._ColumnMasks.mnemonic)!==this._ColumnMasks.mnemonic},{label:this.webviewStrings.startLabel,field:"startTime",id:"startCol",hidden:(this._columnMask&this._ColumnMasks.start)!==this._ColumnMasks.start,unhidable:(this._columnMask&this._ColumnMasks.start)!==
this._ColumnMasks.start,formatter:I._formatTime},{label:this.webviewStrings.endLabel,field:"endTime",id:"endCol",hidden:(this._columnMask&this._ColumnMasks.end)!==this._ColumnMasks.end,unhidable:(this._columnMask&this._ColumnMasks.end)!==this._ColumnMasks.end,formatter:I._formatTime},{label:this.afterHoursStrings.request,field:"creationDate",id:"requestCol",hidden:(this._columnMask&this._ColumnMasks.request)!==this._ColumnMasks.request,unhidable:(this._columnMask&this._ColumnMasks.request)!==this._ColumnMasks.request,
formatter:I._formatDate},{label:this.webviewStrings.wvUser,field:"user",id:"userCol",hidden:(this._columnMask&this._ColumnMasks.user)!==this._ColumnMasks.user,unhidable:(this._columnMask&this._ColumnMasks.user)!==this._ColumnMasks.user},{label:this.afterHoursStrings.rate,field:"rate",id:"rateCol",hidden:!this.hasRate||(this._columnMask&this._ColumnMasks.rate)!==this._ColumnMasks.rate,unhidable:!this.hasRate||(this._columnMask&this._ColumnMasks.rate)!==this._ColumnMasks.rate,formatter:h.hitch(this,
function(a){return this._formatPrice(a)+this.webviewStrings.scheduleRate})},{label:this.afterHoursStrings.hours,field:"hours",id:"hoursCol",hidden:(this._columnMask&this._ColumnMasks.hours)!==this._ColumnMasks.hours,unhidable:(this._columnMask&this._ColumnMasks.hours)!==this._ColumnMasks.hours,formatter:I._formatNumber},{label:this.webviewStrings.scheduleCost,field:"cost",id:"costCol",hidden:!this.hasRate||(this._columnMask&this._ColumnMasks.cost)!==this._ColumnMasks.cost,unhidable:!this.hasRate||
(this._columnMask&this._ColumnMasks.cost)!==this._ColumnMasks.cost,formatter:h.hitch(this,this._formatPrice)},{label:this.rcStrings.reason,field:"reason",id:"reasonCol",hidden:(this._columnMask&this._ColumnMasks.reason)!==this._ColumnMasks.reason,unhidable:(this._columnMask&this._ColumnMasks.reason)!==this._ColumnMasks.reason,renderCell:h.hitch(this,I._truncatedText,this._showReasonDialog)}]},_sortDate:function(a,b,c,d){c=l.parse(c[b],{selector:"date",datePattern:"dd/MM/yyyy"});b=l.parse(d[b],{selector:"date",
datePattern:"dd/MM/yyyy"});if(null===c||null===b)return console.error(this.declaredClass+" - _sortDate(): Must be a date in the format dd/MM/yyyy"),0;d=0;d=c.getTime()>b.getTime()?-1:c.getTime()<b.getTime()?1:0;return a?d:-1*d},_customGridSort:function(a){a instanceof Event&&a.preventDefault();var b=a.sort[0],c=null,d=!1,c="undefined"!==typeof this._grid.sortObject?this._grid.sortObject:this._grid.get("sort")[0];c.attribute===b.attribute&&(d=!1===c.descending);this._grid.sortObject=b;this._grid.sortObject.descending=
d;this._grid.set("sort",h.hitch(this,this._sortDate,d,b.attribute));this._grid.updateSortArrow(a.sort,!1)},_createGridConnections:function(){this.own(z(this._grid,[".dgrid-column-requestCol:dgrid-sort",".dgrid-column-serviceCol:dgrid-sort"],h.hitch(this,this._customGridSort)))},_createGrid:function(){if(null===this._grid){this._setAuditContext();var a=this.hasRate&&(this._columnMask&this._ColumnMasks.rate)===this._ColumnMasks.rate,b=k([p,m,K,O]);a||(b=k([p,m,K]));this._grid=new b({columns:this._columnStructure,
minRowsPerPage:25,maxEmptySpace:25,bufferRows:10,sort:[{attribute:"eventDate",descending:!1}],store:this._gridStore,showLoadingMessage:!0,noDataMessage:this.webviewStrings.noResultsFound},this.gridNode);a&&this.own(z(this._grid,"dgrid-refresh-complete",h.hitch(this,this._updateTotals)));this._setGridSize();this._grid.startup();this._createGridConnections();this._customGridSort({sort:[{attribute:"eventDate",descending:!0}]})}},_displayErrors:function(a){var b=this._ErrorCodeToMessageMap[this._UnexpectedCode];
"undefined"!==typeof this._ErrorCodeToMessageMap[a]&&(b=this._ErrorCodeToMessageMap[a]);E.publish("sticky",{type:"error",message:b})},_getTotals:function(){var a={};a.hours=a.cost=0;for(var b=this._gridStore.data.length;b--;)a.hours+=this._gridStore.data[b].hours,a.cost+=this._gridStore.data[b].cost;a.cost=this._formatPrice(a.cost);a.hours=this._formatNumber(a.hours);this.hasRate?a.rate=this.rcStrings.rtrTotal:a.endTime=this.rcStrings.rtrTotal;return a},_fetchData:function(a){var b=new f;this.own(b);
this.set("reportPeriod",a);a={periodStart:l.format(a.start,{selector:"date",datePattern:"dd/MM/yyyy"}),periodEnd:l.format(a.end,{selector:"date",datePattern:"dd/MM/yyyy"}),showFutureEvents:this.showFutureCB.get("checked")};this.forBlock?h.mixin(a,{scheduleId:null,blockId:this.scheduleId}):h.mixin(a,{scheduleId:this.scheduleId,blockId:null});A.get(this._dataPath,{query:a,handleAs:"json"}).then(h.hitch(this,function(a){a.errStatus===this._SuccessCode?(this._gridStore.setData(a.data),b.resolve()):(this._gridStore.setData([]),
b.reject(a.errStatus));null!==this._grid&&this._grid.refresh()}),h.hitch(this,b.reject));return b.promise},_fetchReportProperties:function(){var a=new f;this.own(a);A.get(this._generalPath,{query:this.forBlock?{scheduleId:null,blockId:this.scheduleId}:{scheduleId:this.scheduleId,blockId:null},handleAs:"json"}).then(h.hitch(this,function(b){b.errStatus===this._SuccessCode?("undefined"!==typeof b.name&&(this.title=b.name),"undefined"!==typeof b.currency&&(this.currency=b.currency),b.hasRate&&(this.hasRate=
!0),a.resolve(b)):a.reject(b.errStatus)}),h.hitch(this,a.resolve));return a.promise},_formatNumber:function(a){return w.format(a,{type:"decimal",places:2})},_formatPrice:function(a){var b=this._formatNumber(a);null!==this.currency&&J.CurrencyToSymbol.hasOwnProperty(this.currency)&&(b=d.format(a,{currency:this.currency,symbol:J.CurrencyToSymbol[this.currency]}));return b},_onInitSuccess:function(){this.onInitSuccess();this._addToolbarButtons();this._createGrid()},_positionAndShowColumnSelector:function(){var a=
this._toolbar.getButton("toggleColumn");q.set(this._grid.hiderMenuNode,"top",a.domNode.getBoundingClientRect().bottom+"px");this._grid._toggleColumnHiderMenu(a)},_propertiesFetched:function(a){null!==a.template&&(this._columnMask=a.template.columnMask,this._updateTemplate(a.template));this._buildColumnStructure();this._fetchData({start:this.viewRangeStart,end:this.viewRangeEnd}).then(h.hitch(this,this._onInitSuccess),h.hitch(this,this._throwPageError))},_setAuditContext:function(){var a=[{objectName:"#AHACReport"+
this.scheduleId}];this.site?webview.auditUtil.setContextDataWithSiteId(this.site,a,this.fullTitle):webview.auditUtil.setContextData(rc.pathInfo.site,a,this.fullTitle)},_setDefaultReportPeriod:function(){var a=new Date((new Date).setDate(1));this.set("reportPeriod",{start:a,end:new Date})},_setReportPeriodAttr:function(a){if("undefined"===typeof a.start||"undefined"===typeof a.end)throw this.declaredClass+" - _setReportPeriodAttr(): New value must have both start and end value.";this.viewRangeStart=
a.start;this.viewRangeEnd=a.end;a=l.format(this.viewRangeStart,{selector:"date",formatLength:"short"});var b=l.format(this.viewRangeEnd,{selector:"date",formatLength:"short"});c.set(this.reportDates,"innerHTML",a+" - "+b)},_setTitle:function(){this.fullTitle=this.title+" - "+this.webviewStrings.afterHoursReport;this._toolbar&&this._toolbar.setTitle(this.fullTitle);this.onSetTitle(this.fullTitle)},_showReasonDialog:function(a){null===this._reasonDialog?this._reasonDialog=new H({title:this.rcStrings.reason,
labelText:this.rcStrings.reason,value:a}):this._reasonDialog.set("value",a);this._reasonDialog.setReadOnly(!0);this._reasonDialog.show()},_showReportPeriodSelector:function(){null===this._periodSelector&&(this._periodSelector=new L({value:{start:this.viewRangeStart,end:this.viewRangeEnd}}),this.own(g.after(this._periodSelector,"execute",h.hitch(this,function(a){this._fetchData(a).otherwise(h.hitch(this,this._displayErrors))}),!0)));this._periodSelector.show()},_setGridSize:function(){var a=0,a=r.byId("rcSystemContent");
1===y(".rcContentHeader",a).length?(a=q.get(a,"height"),a-=q.get(this.domNode.previousSibling,"height"),q.set(this.domNode,"height",a+"px"),a-=q.get(r.byId("rcSystemFooter"),"height")):a=q.get(this.gridContainer.domNode,"height");a-=q.get(this.gridContainer.domNode,"top");a-=q.get(this.reportHeader,"height");q.set(this.gridNode,"height",a+"px");null!==this._grid&&this._grid.resize()},_throwPageError:function(a){this._displayErrors(a);var b=this._ErrorCodeToMessageMap[this._UnexpectedCode];"undefined"!==
typeof this._ErrorCodeToMessageMap[a]&&(b=this._ErrorCodeToMessageMap[a]);this._onInitError(b)},_updateTemplate:function(a){a.useLogo&&(b.remove(this.logo,"hidden"),c.set(this.logo,"src",a.logo.fileSource));a.useLocation&&(b.remove(this.locationContainer,"hidden"),c.set(this.location,"innerHTML",a.location));c.set(this.reportDescription,"innerHTML",F.unescapeHtml(a.description))},_updateTotals:function(){if(null!==this._grid&&this.hasRate&&(this._columnMask&this._ColumnMasks.rate)===this._ColumnMasks.rate){var a=
h.clone(this._grid.get("summary")),b=this._getTotals();x.stringify(b)!==x.stringify(a)&&(this._grid.set("summary",b),this._grid.refresh())}}})})},"webview/reliable/_afterHours/formatUtilities":function(){define("dijit/form/CheckBox dojo/_base/declare dojo/_base/lang dojo/currency dojo/date/locale dojo/dom-class dojo/dom-construct dojo/number dojo/on webview/util/globalConstants".split(" "),function(p,m,k,h,g,d,l,f,r,c){var b=m("webview/reliable/_afterHours/formattingUtilities",null,{_createSelectorCheckbox:function(b,
c,f){b=new p({value:!0,checked:!1,definedValue:f.id});d.add(b.domNode,"request-checkbox");l.place(b.domNode,c,"only");b.set("onChange",k.hitch(this,function(a){a.get("checked")?this._grid.select(a.get("definedValue")):this._grid.deselect(a.get("definedValue"))},b));return b.domNode},_formatDate:function(b){b=g.parse(b,{selector:"date",datePattern:"dd/MM/yyyy"});return g.format(b,{selector:"date",formatLength:"short"})},_formatNumber:function(b){return f.format(b,{type:"decimal",places:2})},_formatPrice:function(d,
f){var g=b.prototype._formatNumber(d);null!==f.currency&&c.CurrencyToSymbol.hasOwnProperty(f.currency)&&(g=h.format(d,{currency:f.currency,symbol:c.CurrencyToSymbol[f.currency]}));return g},_formatTime:function(b){if("string"===typeof b){b=b.split(":");var c=new Date(0);switch(b.length){case 1:c=c.setHours(b[0],0,0,0);break;case 2:c=c.setHours(b[0],b[1],0,0);break;case 3:c=c.setHours(b[0],b[1],b[2],0);break;default:throw"Invalid time format";}b=new Date(c)}else if(!1===b instanceof Date)throw"Time must be either a date object or a time string";
return g.format(b,{selector:"time",formatLength:"short"})},_truncatedText:function(b,c,f,a){c=l.create("div",{"class":"description-container"},a,"only");l.create("span",{title:f,innerHTML:null===f||""===f?"-":f,"class":"description-text"},c,"first");l.create("span",{"class":"webviewIcon textEditIcon"},c,"last");this.own(r(a,"click",k.hitch(this,b,f)));d.add(a,"linkable");return c}});return new b})},"webview/reliable/_afterHours/RangePicker":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/cldr/supplemental dojo/date dojo/date/locale dojo/i18n!dojo/cldr/nls/generic dojo/i18n!dojo/cldr/nls/gregorian dojo/i18n!rc/nls/all dojo/i18n!../../nls/all dojo/keys dojo/on dojo/text!./templates/RangePicker.html dijit/form/Button dijit/form/DateTextBox dijit/form/ValidationTextBox webview/widget/CalendarPicker".split(" "),
function(p,m,k,h,g,d,l,f,r,c,b,t,q){return m("webview/reliable/_afterHours/RangePicker",[p],{templateString:q,formatStrings:f,title:c.selectPeriodRange,startDate:null,endDate:null,genericStrings:l,_datePattern:null,_jumpMap:{week:0,month:1,year:2},constructor:function(){this.rcStrings=r;this.webviewStrings=c;this._datePattern="^"+d.regexp({selector:"date",formatLength:"short"})+"$";this._datePattern=this._datePattern.replace(/\\/g,"\\\\")},postCreate:function(){this.inherited(arguments);this.own(t(this.startDateString,
"change",k.hitch(this,this._inputChanged,"startDate")),t(this.endDateString,"change",k.hitch(this,this._inputChanged,"endDate")),t(this.startCalendarPicker,"change",k.hitch(this,this._setDate,"startDate")),t(this.endCalendarPicker,"change",k.hitch(this,this._setDate,"endDate")),t(this.jumpToWeek,"click",k.hitch(this,this._jumpToRange,this._jumpMap.week)),t(this.jumpToMonth,"click",k.hitch(this,this._jumpToRange,this._jumpMap.month)),t(this.jumpToYear,"click",k.hitch(this,this._jumpToRange,this._jumpMap.year)))},
_getValueAttr:function(){return{start:this.startCalendarPicker.get("value"),end:this.endCalendarPicker.get("value")}},_jumpToRange:function(b){var a={start:new Date,end:new Date};switch(b){case this._jumpMap.week:b=h.getFirstDayOfWeek();var c=-a.start.getDay();a.start=g.add(a.start,"day",c+b);a.end=g.add(a.start,"day",6);break;case this._jumpMap.month:a.start=a.start.setFullYear(a.start.getFullYear(),a.start.getMonth(),1);a.end=a.end.setFullYear(a.end.getFullYear(),a.end.getMonth()+1,0);break;case this._jumpMap.year:a.start=
a.start.setFullYear(a.start.getFullYear(),0,1),a.end=a.end.setFullYear(a.end.getFullYear()+1,-1,31)}this.set("value",a)},_inputChanged:function(b,a){this._validateInputs();this._setDate(b,d.parse(a,{selector:"date",formatLength:"short"}))},_onKey:function(c){this.inherited(arguments);c.keyCode===b.ENTER&&this._validateInputs()&&(this.startDateString.onChange(this.startDateString.get("value")),this.endDateString.onChange(this.endDateString.get("value")),c.stopPropagation(),c.preventDefault(),this._onSubmit())},
_setDate:function(b,a){if(-1===["startDate","endDate"].indexOf(b))throw"Date to update must be either startDate or endDate";this[b].getTime()!==a.getTime()&&(this[b]=a,this.set("value",{start:this.startDate,end:this.endDate}))},_setValueAttr:function(b){if("undefined"===typeof b.start||"undefined"===typeof b.end)throw"Value must have start and end values";this.startDate=new Date(b.start);this.endDate=new Date(b.end);this.startCalendarPicker.set("value",this.startDate);this.endCalendarPicker.set("value",
this.endDate);this.startDateString.set("value",d.format(this.startDate,{selector:"date",formatLength:"short"}));this.endDateString.set("value",d.format(this.endDate,{selector:"date",formatLength:"short"}))},_validateInputs:function(){var b=!1;if(this.startDateString.isValid()&&this.endDateString.isValid())var b=d.parse(this.startDateString.get("value"),{selector:"date",formatLength:"short"}).getTime(),a=d.parse(this.endDateString.get("value"),{selector:"date",formatLength:"short"}).getTime(),b=b<=
a;this.okButton.set("disabled",!b);return b}})})},"webview/widget/CalendarPicker":function(){define("dijit/Calendar dijit/DropDownMenu dijit/form/DropDownButton dijit/MenuItem dojo/_base/declare dojo/_base/lang dojo/dom-construct".split(" "),function(p,m,k,h,g,d,l){return g("webview/widget/CalendarPicker",p,{baseClass:"webview-calendar-picker",yearPicker:null,startingYear:2E3,totalYears:40,constructor:function(){d.extend(p._MonthDropDown,{baseClass:this.baseClass+"-menu"})},buildRendering:function(){this.inherited(arguments);
var d=l.create("div",{},this.monthWidget.domNode,"after");this.yearWidget=this._createYearWidget(d)},_createYearWidget:function(f){if(null===this.yearPicker){for(var g=new m({baseClass:this.baseClass+"-year-menu"}),c=0;c<this.totalYears;++c)g.addChild(new h({label:this.startingYear+c+"",baseClass:this.baseClass+"-year-item",onClick:d.hitch(this,this._setYear,this.startingYear+c)}));this.yearPicker=new k({label:this.startingYear+"",baseClass:"year-selector",dropDown:g},f)}return this.yearPicker},_setCurrentFocusAttr:function(d){this.inherited(arguments);
null!==this.yearPicker&&d.getFullYear()!==this.yearPicker.get("label")&&this.yearPicker.set("label",d.getFullYear())},_setValueAttr:function(d){this.inherited(arguments);var f=new Date(d);!1===isNaN(f.getTime())&&this.yearPicker.set("label",f.getFullYear())},_setYear:function(d){this.set("currentFocus",new Date((new Date(this.currentFocus)).setFullYear(d)))}})})},"webview/reliable/_afterHours/ReasonDialog":function(){define("dijit/ConfirmDialog dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/i18n!rc/nls/all dojo/on dojo/text!./templates/ReasonDialog.html dijit/form/Button dijit/form/Textarea".split(" "),
function(p,m,k,h,g,d,l,f){return m("webview/reliable/_afterHours/ReasonDialog",p,{templateString:f,labelText:d.reason,title:d.reason,value:null,rcStrings:d,buildRendering:function(){this.inherited(arguments);h.set(this.reasonLabel,"for",this.reasonInput.id);this._checkForText();this.own(l(this.reasonInput,"keyup",k.hitch(this,this._checkForText)))},setReadOnly:function(d){g.toggle(this.okButton.domNode,"hidden",d);g.toggle(this.cancelButton.domNode,"hidden",d);this.reasonInput.set("disabled",d);h.set(this.closeButtonNode,
"title",d?this.rcStrings.close:this.rcStrings.btnCancel)},_checkForText:function(){var d=this.reasonInput.get("value").trim();this.okButton.set("disabled",0===d.length)},_getValueAttr:function(){var d=this.reasonInput.get("value");0===d.trim().length&&(d=null);return d},_setValueAttr:function(d){this.value=d;this.reasonInput.set("value",this.value)}})})},"webview/widget/dGridExtensions/SummaryRow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct"],function(p,m,k){return p("webview/widget/dGridExtensions/SummaryRow",
null,{showFooter:!0,buildRendering:function(){this.inherited(arguments);var h=this.summaryAreaNode=k.create("div",{className:"summary-row",role:"row",style:{overflow:"hidden"}},this.footerNode);this.on("scroll",m.hitch(this,function(){h.scrollLeft=this.getScrollPosition().x}));this.summary&&this._setSummary(this.summary)},_updateColumns:function(){this.inherited(arguments);this.summary&&this._setSummary(this.summary)},_renderSummaryCell:function(h,g,d){g.appendChild(k.create("span",{innerHTML:h[d.field]||
""}))},_setSummary:function(h){var g=this.summaryTableNode;this.summary=h;g&&k.destroy(g);g=this.summaryTableNode=this.createRowCells("td",m.hitch(this,this._renderSummaryCell,h));this.summaryAreaNode.appendChild(g);this._started&&this.resize()}})})},"url:webview/admin/templates/index.html":'\x3cdiv class\x3d"rcTreeView"\x3e\r\n    \x3cdiv style\x3d"width:100%;height:100%" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"tree-pane-flyout" data-dojo-attach-point\x3d"treePaneFlyout"\r\n         data-dojo-type\x3d"webview/admin/widget/TreePaneFlyout"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/Wizard.html":'\x3cdiv class\x3d"wizard-wrapper"\x3e\r\n\t\x3ch2 class\x3d"wizard-header" data-dojo-attach-point\x3d"headerNode"\x3e${webviewStrings.step} \x3cspan data-dojo-attach-point\x3d"stepTitle"\x3e\x3c/span\x3e\x3c/h2\x3e\r\n\t\x3cdiv\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"stepsContainer"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"wizard-next-container" data-dojo-attach-point\x3d"nextCloseContainer"\x3e\r\n            \x3ca href\x3d"#" class\x3d\'wizard-next-link wizard-link\' data-dojo-attach-point\x3d"nextLink" data-dojo-attach-event\x3d"onclick: onClickNext" title\x3d"${webviewStrings.nextStep}"\x3e\r\n\t\t\t\t\x3cspan class\x3d"wizard-arrow webviewIcon playIcon"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/a\x3e\r\n\t\t\t\x3ca href\x3d"#" class\x3d\'wizard-link wizard-stop-link webviewIcon closeIcon\' data-dojo-attach-point\x3d"stopLink" data-dojo-attach-event\x3d"onclick: onClickStop" title\x3d"${webviewStrings.cancelSetup}"\x3e\r\n\t\t\t\x3c/a\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:webview/widget/templates/WarningDialog.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${title}" class\x3d"${baseClass}"\x3e\r\n\r\n                \x3cdiv class\x3d"rcAlertIcon rcWarningIcon"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cspan class\x3d"warningDialogText" data-dojo-attach-point\x3d"dialogText"\x3e\x3c/span\x3e\r\n\r\n                \x3cspan class\x3d"warningDialogContent" data-dojo-attach-point\x3d"dialogContent"\x3e\x3c/span\x3e\r\n\r\n                \x3cp data-dojo-attach-point\x3d"dialogButtons" class\x3d"buttons"\x3e\r\n                        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                                data-dojo-attach-point\x3d"dialogButtonsOneOrYes"\r\n                                data-dojo-props\x3d"baseClass: \'${buttonClass} oneOrYes\'"\x3e\r\n                        \x3c/button\x3e\r\n                        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                                data-dojo-attach-point\x3d"dialogButtonsAllOrNo"\r\n                                data-dojo-props\x3d"baseClass: \'${buttonClass} allOrNo\'"\x3e\r\n                        \x3c/button\x3e\r\n                        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                                data-dojo-attach-point\x3d"dialogButtonsCancel"\r\n                                data-dojo-props\x3d"baseClass: \'${buttonClass} cancelButton\'"\x3e\r\n                        \x3c/button\x3e\r\n                \x3c/p\x3e\r\n\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/WizardStep.html":'\x3cspan class\x3d"step-container"\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"lineNode" class\x3d"step-line"\x3e\x3c/span\x3e\r\n\t\x3ca href\x3d"#" title\x3d"" class\x3d"step-link inactive disabled" data-dojo-attach-point\x3d"linkNode" \x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"circleNode" class\x3d"step-circle disabled"\x3e\r\n\t\t\t\x3cspan class\x3d"step-indicator hidden" data-dojo-attach-point\x3d"indicatorNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/a\x3e\r\n\x3c/span\x3e',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/layout/resources/ExpandoPane.html":'\x3cdiv class\x3d"dojoxExpandoPane"\x3e\r\n\t\x3cdiv dojoAttachPoint\x3d"titleWrapper" class\x3d"dojoxExpandoTitle"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxExpandoIcon" dojoAttachPoint\x3d"iconNode" dojoAttachEvent\x3d"ondijitclick:toggle"\x3e\x3cspan class\x3d"a11yNode"\x3eX\x3c/span\x3e\x3c/div\x3e\r\n\t\t\x3cspan class\x3d"dojoxExpandoTitleNode" dojoAttachPoint\x3d"titleNode"\x3e${title}\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dojoxExpandoWrapper" dojoAttachPoint\x3d"cwrapper" dojoAttachEvent\x3d"ondblclick:_trap"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxExpandoContent" dojoAttachPoint\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:webview/admin/widget/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"selectorNode" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d\'value: "${item.id}"\'\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"contentNode"\r\n              class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n            \x3cspan class\x3d"iconBorder"\x3e\r\n                \x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n                  tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n         style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/SearchForObject.html":'\x3cdiv class\x3d"search-for-object ${baseClass}" data-dojo-attach-point\x3d"mainContainer"\x3e\r\n    \x3cdiv class\x3d"tree-node-container" data-dojo-attach-point\x3d"searchedTreeNodeContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"text-search-container" data-dojo-attach-point\x3d"textSearchContainer"\x3e\r\n        \x3cspan class\x3d"searchform navTreeFilterSearch" data-dojo-attach-point\x3d"textSearchField"\r\n          data-dojo-type\x3d"webview/widget/SearchByField"\r\n          data-dojo-props\x3d"hasMenu: false"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"linkable webviewIcon close-icon" data-dojo-attach-point\x3d"closeButton"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Filter Options --\x3e\r\n    \x3cdiv class\x3d"search-filters" data-dojo-attach-point\x3d"searchFilters"\x3e\r\n        \x3cdiv class\x3d"search-wrapper"\x3e\r\n            \x3cdiv class\x3d"rcWidgetHeaderBar filter-options system-filters"\r\n                data-dojo-type\x3d"webview/widget/TitlePane"\r\n                data-dojo-attach-point\x3d"systemFilterContainer"\r\n                data-dojo-props\x3d\'title: "${webviewStrings.wvSystems}",\r\n                open: false\'\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"systemFilter"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"rcWidgetHeaderBar filter-options device-filters"\r\n                    data-dojo-type\x3d"webview/widget/TitlePane"\r\n                    data-dojo-attach-point\x3d"deviceFilterContainer"\r\n                    data-dojo-props\x3d\'title: "${webviewStrings.devices}",\r\n                    open: false\'\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"deviceFilter"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"rcWidgetHeaderBar filter-options object-type-filters"\r\n                    data-dojo-type\x3d"webview/widget/TitlePane"\r\n                    data-dojo-attach-point\x3d"objectFilterContainer"\r\n                    data-dojo-props\x3d\'title: "${webviewStrings.objects}",\r\n                    open: false\'\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"objectFilter"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/SearchByField.html":'\x3cdiv class\x3d"text-search-field" style\x3d"display: inline-block;"\x3e\r\n\t\x3cdiv class\x3d"searchformWrapper"\x3e\r\n        \x3cinput type\x3d"text" placeholder\x3d\'${defaultLabel}\' data-dojo-attach-point\x3d"searchBox" data-dojo-attach-event\x3d"onclick: _clearSearchBoxValue" /\x3e\r\n        \x3cinput type\x3d"hidden" data-dojo-attach-point\x3d"_buttonNode" /\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"clearField"\r\n              data-dojo-attach-event\x3d"click: _reset"\r\n              class\x3d"webviewIcon clear-field hidden"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"onclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle rcTitle title-pane" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n        \x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n            \x3cspan data-dojo-attach-point \x3d"iconHolder" class\x3d"titleIcon"\x3e\x3c/span\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n                        \x3cimg src\x3d"${_blankGif}" alt\x3d"" data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitArrowNode" role\x3d"presentation" /\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"arrow-icon"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter pane-contents" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/MenuBar.html":'\x3cdiv class\x3d"dijitMenuBar dijitMenuPassive" data-dojo-attach-point\x3d"containerNode" role\x3d"menubar" tabIndex\x3d"${tabIndex}"\r\n\t \x3e\x3c/div\x3e\r\n',"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:webview/widget/templates/AboutDialog.html":'\x3cdiv class\x3d"aboutDialog dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" role\x3d"button"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent aboutContainer"\x3e\r\n        \x3cdiv class\x3d"aboutInfo"\x3e\r\n            \x3cdiv class\x3d"versionNumber"\r\n                 data-dojo-attach-point\x3d"versionNumber"\x3e\r\n            \x3c/div\x3e\r\n            \x3cfieldset class\x3d"licenseInfoField"\x3e\r\n                \x3clegend\x3e${webviewStrings.licenseInfo}:\x3c/legend\x3e\r\n                \x3cdiv class\x3d"licenseInfo"\r\n                     data-dojo-attach-point\x3d"licenseInfo"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"third-party-licenses"\x3e\r\n                    \x3ca href\x3d"ThirdPartyLicenses"\x3e${!rcStrings.thirdPartyLicenses}\x3c/a\x3e\r\n                \x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"copyright"\r\n             data-dojo-attach-point\x3d"copyright"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/MenuBarItem.html":'\x3cdiv class\x3d"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" data-dojo-attach-point\x3d"focusNode"\r\n\t \trole\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"iconNode"/\x3e\x3c/span\x3e \x3c!--RC-CHANGE: Added Icon--\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"containerNode"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',"url:webview/widget/passwords/templates/ChangePasswordDialog.html":'\x3cdiv class\x3d"changePasswordDialogContents"\r\n\t data-dojo-attach-point\x3d"dialogContent"\x3e\r\n\t\x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\t\t\x3clabel for\x3d"${id}_currPass"\x3e${webviewStrings.currPass}:\x3c/label\x3e\r\n\t\t\x3cinput type\x3d"password"\r\n\t\t\t   id\x3d"${id}_currPass"\r\n\t\t\t   name\x3d"currPass"\r\n\t\t\t   data-dojo-attach-point\x3d"currPass"\r\n\t\t\t   data-dojo-type\x3d"dijit/form/TextBox"\r\n\t\t\t   data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\t\t\x3clabel for\x3d"${id}_newPass"\x3e${templateContentStrings.newPasswordLabel}:\x3c/label\x3e\r\n\t\t\x3cinput id\x3d"${id}_newPass"\r\n\t\t\t   type\x3d"password"\r\n\t\t\t   name\x3d"newPass"\r\n\t\t\t   data-dojo-attach-point\x3d"newPass"\r\n\t\t\t   data-dojo-type\x3d"dijit/form/TextBox"\r\n\t\t\t   data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\t\t\x3clabel for\x3d"${id}_verifyPass"\x3e${templateContentStrings.newPasswordVerifyLabel}:\x3c/label\x3e\r\n\t\t\x3cinput id\x3d"${id}_verifyPass"\r\n\t\t\t   type\x3d"password"\r\n\t\t\t   name\x3d"verifyPass"\r\n\t\t\t   data-dojo-attach-point\x3d"verifyPass"\r\n\t\t\t   data-dojo-type\x3d"dijit/form/TextBox"\r\n\t\t\t   data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"passwordChangeButtonContainer"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"saveButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button"\r\n\t\t\t  data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                          iconClass: "rcIcon okIcon",\r\n                          label:"${rcStrings.btnOk}".toUpperCase()\'\x3eOK\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button"\r\n\t\t\t  data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                          iconClass: "rcIcon cancelIcon",\r\n                          label:"${rcStrings.rcbCancel}"\'\x3eCANCEL\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/whatsNew/templates/WhatsNewDialog.html":'\x3cdiv class\x3d"dijitDialog whats-new-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent webviewContentPane"\x3e\r\n        \x3cdiv class\x3d"top-button-container"\x3e\r\n            \x3cspan class\x3d"dijitDialogCloseIcon whats-new-close-icon"\r\n                  data-dojo-attach-point\x3d"closeButtonNode"\r\n                  data-dojo-attach-event\x3d"onclick: hide"\x3e \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"content-container"\x3e\r\n            \x3cdiv class\x3d"whatsNewText" data-dojo-attach-point\x3d"dialogTitle"\x3e${whatsNewStrings.title}\x3c/div\x3e\r\n            \x3cdiv class\x3d"rotator" data-dojo-attach-point\x3d"rotator"\x3e \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"webview-bottom-center-flex-container"\x3e\r\n            \x3cbutton class\x3d"webviewButton opt-out" type\x3d"button"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"optOutButton"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton opt-out",\r\n                    label: "${whatsNewStrings.optOut}"\'\x3e\r\n                ${whatsNewStrings.optOut}\r\n            \x3c/button\x3e\r\n\r\n            \x3cdiv class\x3d"webview-center-flex-container"\r\n                    data-dojo-attach-point\x3d"carouselContainer"\x3e\r\n                \x3cspan class\x3d"webviewIcon svg-back-icon nav-arrow" title\x3d"${whatsNewStrings.previous}"\r\n                      data-dojo-attach-point\x3d"prevButton"\r\n                      data-dojo-attach-event\x3d"onclick: _goToPrevious"\x3e\x3c/span\x3e\r\n\r\n                \x3cdiv class\x3d"webview-center-flex-container nav-indicator-container" data-dojo-attach-point\x3d"rotatorIndicator"\x3e\x3c/div\x3e\r\n\r\n                \x3cspan class\x3d"webviewIcon svg-next-icon nav-arrow" title\x3d"${whatsNewStrings.next}"\r\n                      data-dojo-attach-point\x3d"nextButton"\r\n                      data-dojo-attach-event\x3d"onclick: _goToNext"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cbutton class\x3d"webviewButton" type\x3d"button"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"readmoreButton"\r\n                    data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                    label: \'${whatsNewStrings.readMore}\'"\r\n                    data-dojo-attach-event\x3d"onClick: _onReadMore"\x3e\r\n                ${whatsNewStrings.readMore}\r\n            \x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/whatsNew/templates/ContentPane.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"img-container"\x3e\r\n        \x3cdiv class\x3d"img ${imageClass}" data-dojo-attach-point\x3d"image"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"text-container"\x3e\r\n        \x3cdiv class\x3d"title" data-dojo-attach-point\x3d"titleContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"body" data-dojo-attach-point\x3d"textContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"version" data-dojo-attach-point\x3d"versionContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/whatsNew/templates/PaneIndicator.html":'\x3cdiv class\x3d"pane-indicator"\x3e\x3c/div\x3e',"url:webview/admin/widget/templates/TreePaneFlyout.html":'\x3cdiv class\x3d"tree-pane-flyout ${baseClass} hidden" data-dojo-attach-point\x3d"selectionContainer"\x3e\r\n    \x3cdiv class\x3d"titleBar ${baseClass}TitleBar" data-dojo-attach-point\x3d"titleBar"\x3e\r\n        \x3cdiv class\x3d"titleBarIconAndText"\x3e\r\n            \x3cdiv class\x3d"titleBarRowIcon"\x3e\r\n                \x3cspan class\x3d"iconBorder"\x3e\r\n                    \x3cspan role\x3d"presentation" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"titleBarRowText"\x3e\r\n                \x3cspan class\x3d"titleBarDevice floatLeft" id\x3d"titleBarIconAndTextDevice" data-dojo-attach-point\x3d"titleBarDevice"\x3e\x3c/span\x3e\r\n                \x3cspan class\x3d"floatLeft" id\x3d"titleBarIconAndTextLabel" data-dojo-attach-point\x3d"titleBarLabel"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"titleBarRowIcon"\x3e\r\n            \x3cdiv role\x3d"presentation" class\x3d"hideSelectionOption" data-dojo-attach-event\x3d"onClick: _hide"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"selectionOptions ${baseClass}SelectionOptions" data-dojo-attach-point\x3d"selectionOptions"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/_FlyoutContent.html":'\x3cul data-dojo-attach-point\x3d"contentNode"\x3e\x3c/ul\x3e',"url:webview/admin/widget/templates/FlyoutOption.html":'\x3cli class\x3d"flyoutOption ${listItemClass}"\x3e\r\n    \x3cdiv class\x3d"flyoutOptionLine"\x3e\r\n        \x3cspan class\x3d"iconBorder"\x3e\r\n            \x3cspan class\x3d"dijitInline dijitIcon dijitTreeIcon dijitLeaf flyoutIcon ${iconClass}"\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"optionText" data-dojo-attach-point\x3d"textNode"\x3e${displayText}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/li\x3e',
"url:webview/admin/reportTemplates/templates/reportTemplates.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites report-template" style\x3d"width:100%; clear:both;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"contentArea"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n         class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3c!-- DELETE --\x3e\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d\'listContainer\'\x3e\r\n\r\n            \x3c!-- END DELETE--\x3e\r\n            \x3c!--ADD--\x3e\r\n            \x3cdiv class\x3d"leftContainer doubleContent" \x3e\r\n\r\n                \x3cdiv class\x3d"fieldAndLabel topItem"\x3e\r\n\r\n                    \x3cspan class\x3d"rcTextBoxLabel"\r\n                          data-dojo-attach-point\x3d"dataLabel"\x3e${afterHoursStrings.reportTemplate} ${webviewStrings.name}:\x3c/span\x3e\r\n\r\n                    \x3cspan data-dojo-attach-point\x3d"nameTB"\r\n                          data-dojo-type\x3d"dijit/form/TextBox"\r\n                          data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                          maxLength: 50"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                    \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For padding purposes--\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"addButton"\r\n                          data-dojo-type\x3d"dijit/form/Button"\r\n                          data-dojo-props\x3d"baseClass: \'webviewButton floatRight addSite\',\r\n                          disabled: true,\r\n                          iconClass: \'rcIcon addIcon\',\r\n                          label: \'${afterHoursStrings.addTemplate}\'"\r\n                          data-dojo-attach-event\x3d"onClick: _onAddItem"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"rightContainer" data-dojo-attach-point\x3d\'rightContainer\'\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_multiSelect"\r\n                     data-dojo-type\x3d"webview/widget/MultiSelectBox"\r\n                     data-dojo-props\x3d"fieldLabel: \'${afterHoursStrings.reportTemplates}:\'"\x3e\r\n\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"fieldAndLabel hiddenButtons"\x3e\r\n                    \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--Used for padding--\x3e\r\n                    \x3cdiv class\x3d"" style\x3d\'margin-top: .5em\'\x3e\r\n                        \x3cdiv class\x3d"hidden"\r\n                             data-dojo-attach-point\x3d"editButton"\r\n                             data-dojo-type\x3d"dijit/form/Button"\r\n                             data-dojo-props\x3d"baseClass: \'webviewButton editSite\',\r\n                             iconClass: \'rcIcon editSiteIcon\',\r\n                             label: \'${webviewStrings.rcbEdit}\'"\r\n                             data-dojo-attach-event\x3d"onClick: _editItem"\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"hidden"\r\n                             data-dojo-attach-point\x3d"deleteButton"\r\n                             data-dojo-type\x3d"dijit/form/Button"\r\n                             data-dojo-props\x3d"baseClass: \'webviewButton deleteSites\',\r\n                             iconClass: \'webviewIcon deleteIcon\',\r\n                             label: \'${webviewStrings.rcbDelete}\'"\r\n                             data-dojo-attach-event\x3d"onClick: _onDeleteItem"\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- END ADD--\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/templates/_base.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites" style\x3d"width:100%; clear:both;"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentArea" \r\n\t\t data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n\t\t class\x3d"webviewAdminSites"\x3e\r\n\r\n\t\t\x3c!-- DELETE --\x3e\r\n\t\t\x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d\'listContainer\'\x3e\r\n\t\t\t\x3cdiv class\x3d"leftContainer" data-dojo-attach-point\x3d\'leftContainer\'\x3e\r\n\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"_multiSelect" \r\n\t\t\t\t\t data-dojo-type\x3d"webview/widget/MultiSelectBox"\r\n\t\t\t\t\t data-dojo-props\x3d"fieldLabel: \'List:\'"\x3e\r\n\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel hiddenButtons"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--Used for padding--\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"" style\x3d\'margin-top: .5em\'\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"editButton"\r\n\t\t\t\t\t\t\t data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t\t data-dojo-props\x3d"baseClass: \'webviewButton editSite\', \r\n\t\t\t\t\t\t\t \'class\': \'hidden\',\r\n\t\t\t\t\t\t\t iconClass: \'rcIcon editSiteIcon\', \r\n\t\t\t\t\t\t\t label: \'Edit\'"\r\n\t\t\t\t\t\t\t data-dojo-attach-event\x3d"onClick: _editItem"\x3e\r\n\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"deleteButton"\r\n\t\t\t\t\t\t\t data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t\t data-dojo-props\x3d"baseClass: \'webviewButton deleteSites\',\r\n\t\t\t\t\t\t\t \'class\': \'hidden\',\r\n\t\t\t\t\t\t\t iconClass: \'rcIcon deleteSitesIcon\'\t, \r\n\t\t\t\t\t\t\t label: \'Delete\'"\r\n\t\t\t\t\t\t\t data-dojo-attach-event\x3d"onClick: _onDeleteItem"\x3e\r\n\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!-- END DELETE--\x3e\t\t\r\n\t\t\t\x3c!--ADD--\x3e\r\n\t\t\t\x3cdiv class\x3d"rightContainer doubleContent" \x3e\r\n\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel topItem"\x3e\r\n\r\n\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel"\r\n\t\t\t\t\t\t  data-dojo-attach-point\x3d"dataLabel"\x3e\x3c/span\x3e\r\n\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nameTB"\r\n\t\t\t\t\t\t  data-dojo-type\x3d"dijit/form/TextBox"\r\n\t\t\t\t\t\t  data-dojo-props\x3d"baseClass: \'rcTextBox\'"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\r\n\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel"\r\n\t\t\t\t\t\t  data-dojo-attach-point\x3d"upName"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For padding purposes--\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"addButton"\r\n\t\t\t\t\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t  data-dojo-props\x3d"baseClass: \'webviewButton floatRight addSite\', \r\n\t\t\t\t\t\t  iconClass: \'rcIcon addSiteIcon\', \r\n\t\t\t\t\t\t  label: \'ADD\'"\r\n\t\t\t\t\t\t  data-dojo-attach-event\x3d"onClick: _onAddItem"\x3e\x3c/span\x3e\r\n\r\n\t\t\t\t\t\x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t\t\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t  data-dojo-props\x3d"baseClass: \'webviewButton floatRight addSite\', \r\n\t\t\t\t\t\t  iconClass: \'waiting webviewCommitButton\', \r\n\t\t\t\t\t\t  label: \'CANCEL\'"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3c!-- END ADD--\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\t\r\n\x3c/div\x3e',
"url:webview/widget/templates/MultiSelectBox.html":'\x3cdiv class\x3d"multiSelectBoxMain"\x3e\r\n\t\x3cspan class\x3d"multiSelectLabel" data-dojo-attach-point\x3d\'selectBoxLabel\'\x3e\x3c/span\x3e\r\n\t\x3cdiv class\x3d"multiSelectWrapper" data-dojo-attach-point\x3d"multiSelectWrapper"\x3e\r\n\t\t\x3cul class\x3d"multiSelectList" data-dojo-attach-point\x3d"selectionList"\x3e\x3c/ul\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cspan class\x3d"hintLabel" data-dojo-attach-point\x3d"msHintLabel"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/WebviewContentPane.html":'\x3cdiv class\x3d"webviewContentPane"\x3e\r\n\t\x3cdiv class\x3d"hidden webviewContentPaneTitle" data-dojo-attach-point\x3d"titleBar"\x3e\r\n\t\t\x3cspan class\x3d"webviewContentPaneTitleNode" data-dojo-attach-point\x3d"leftTitleContentNode"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"webviewContentPaneControlsNode" data-dojo-attach-point\x3d"rightTitleContentNode"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"webviewContentPaneBody" data-dojo-attach-point\x3d"contentPaneBody"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contents" class\x3d"webviewContentPaneContents"\x3e\x3c/div\x3e\t\t\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/reportTemplates/templates/reportTemplate.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites report-template singlePage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3c!-- Toolbar --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n        \x3cdiv class\x3d\'commitButtons\' data-dojo-type\x3d"webview/widget/CommitButtons"\r\n             data-dojo-attach-point\x3d"propertiesCommitButtons"\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Main Content --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"templateProperties"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n         class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"propertiesContainer"\x3e\r\n            \x3c!-- Left side --\x3e\r\n            \x3cdiv class\x3d"leftContainer doubleContent"\x3e\r\n                \x3cdiv class\x3d"outside-setting name-input"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"nameLabel"\x3e${webviewStrings.name}:\x3c/label\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"nameTB"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'required: true, baseClass: "rcTextBox",\'/\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- Logo Settings Section --\x3e\r\n                \x3cfieldset class\x3d"logo-settings"\x3e\r\n                    \x3clegend\x3e${afterHoursStrings.logoSettings}\x3c/legend\x3e\r\n                    \x3cdiv class\x3d"image-setting-item"\x3e\r\n                        \x3clabel class\x3d"use-logo-cb"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"useLogoCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: false\'/\x3e\r\n                            ${webviewStrings.enable}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"galleryUpdater"\r\n                         data-dojo-type\x3d"webview/admin/widget/GalleryUpdater"\r\n                         data-dojo-props\x3d\'baseClass: "logo-updater image-setting-item",\r\n                         uploaderPath: "ReportTemplate/UploadLogo",\r\n                         path: "${_path}",\r\n                         siteId: ${site},\r\n                         widget: "${widget}"\'\x3e\x3c/div\x3e\r\n                    \x3cdiv class\x3d"image-setting-item image-hint"\x3e\r\n                        ${afterHoursStrings.logoImageHelpText}\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n\r\n                \x3c!-- Location --\x3e\r\n                \x3cdiv class\x3d"outside-setting"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                           data-dojo-attach-point\x3d"useLocationCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-props\x3d\'checked: false\' /\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"locationLabel"\x3e${afterHoursStrings.location}:\x3c/label\x3e\r\n                    \x3ctextarea class\x3d"rcTextArea description-textarea"\r\n                              data-dojo-attach-point\x3d"locationTB"\r\n                              data-dojo-type\x3d"dijit/form/Textarea"\x3e\x3c/textarea\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Right Side --\x3e\r\n            \x3cdiv class\x3d"rightContainer doubleContent"\x3e\r\n                \x3cdiv\x3e\r\n                    \x3clabel class\x3d"textarea-label" data-dojo-attach-point\x3d"descriptionLabel"\x3e${webviewStrings.description}:\x3c/label\x3e\r\n                    \x3ctextarea class\x3d"rcTextArea description-textarea"\r\n                              data-dojo-attach-point\x3d"descriptionTB"\r\n                              data-dojo-type\x3d"dijit/form/Textarea"\x3e\x3c/textarea\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- Column settings --\x3e\r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${afterHoursStrings.columns}\x3c/legend\x3e\r\n\r\n                    \x3c!-- First Row --\x3e\r\n                    \x3cdiv class\x3d"column-row"\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"requestCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.request}\' /\x3e\r\n                            ${afterHoursStrings.request}\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"mnemonicCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.mnemonic}\' /\x3e\r\n                            ${rcStrings.mnemonic}\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"hoursCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.hours}\' /\x3e\r\n                            ${afterHoursStrings.hours}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3c!-- Second Row --\x3e\r\n                    \x3cdiv class\x3d"column-row"\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"userCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.user}\' /\x3e\r\n                            ${webviewStrings.wvUser}\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"serviceCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.service}\' /\x3e\r\n                            ${afterHoursStrings.service}\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"costCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.cost}\' /\x3e\r\n                            ${webviewStrings.scheduleCost}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3c!-- Third Row --\x3e\r\n                    \x3cdiv class\x3d"column-row"\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"eventCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.event}\' /\x3e\r\n                            ${rcStrings.event}\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"startCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.start}\' /\x3e\r\n                            ${webviewStrings.startLabel}\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"reasonCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.reason}\' /\x3e\r\n                            ${rcStrings.reason}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3c!-- Fourth Row --\x3e\r\n                    \x3cdiv class\x3d"column-row"\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"scheduleCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.schedule}\' /\x3e\r\n                            ${rcStrings.sched}\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"endCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.end}\' /\x3e\r\n                            ${webviewStrings.endLabel}\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"column-checkbox"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"rateCB"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: true,\r\n                                   mask: ${_ColumnMasks.rate}\' /\x3e\r\n                            ${afterHoursStrings.rate}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/GalleryUpdater.html":'\x3cdiv class\x3d"${baseClass} gallery-updater"\x3e\r\n    \x3cdiv class\x3d"filename"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"fileNameContainer"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttons"\x3e\r\n      \x3cspan class\x3d"uploaderContainer" data-dojo-attach-point\x3d"logoUploaderContainer"\x3e\x3c/span\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"clearSelected"\r\n            data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton " + (this.showClearButton ? "" : "hidden"),\r\n            iconClass: "webviewIcon clearIcon",\r\n            label: "${rcStrings.clear}"\'\x3e\x3c/span\x3e\r\n\r\n      \x3cspan data-dojo-attach-point\x3d"setDefault"\r\n            data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton " + (this.showDefaultButton ? "" : "hidden"),\r\n            iconClass: "webviewIcon defaultIcon",\r\n            label: "${webviewStrings.rcbDefault}"\'\x3e\x3c/span\x3e\r\n\r\n      \x3cspan data-dojo-attach-point\x3d"galleryButton"\r\n            data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-props\x3d"baseClass: \'webviewButton gallery\',\r\n            iconClass:\'webviewIcon galleryIcon\',\r\n            label: \'${webviewStrings.gallery}\'"\x3e\r\n      \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/DatabaseFileGallery.html":'\x3cdiv class\x3d"dijitDialog database-file-gallery" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3ctable data-dojo-attach-point\x3d"galleryTable"\x3e\x3c/table\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                disabled: true,\r\n                iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"deleteButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                disabled: true,\r\n                iconClass: "webviewIcon deleteIcon"\'\x3e${rcStrings.rcDelete}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dojox/form/resources/Uploader.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e \r\n\t\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1" data-dojo-attach-point\x3d"valueNode" /\x3e\r\n\x3c/span\x3e\r\n',
"url:webview/admin/widget/templates/AdminToolbar.html":'\x3cdiv class\x3d"admin-toolbar"\x3e\r\n    \x3cdiv class\x3d"icon-button-container hidden" data-dojo-attach-point\x3d"iconContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container hidden" data-dojo-attach-point\x3d"buttonsContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/widget/templates/CommitButtons.html":'\x3cdiv class\x3d"" data-dojo-attach-point\x3d"commitButtons"\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"saveButton" data-dojo-props\x3d"titleStr : \'${webviewStrings.save}\',\r\n          iconClass: \'rc24Icon saveIcon toolbarButtonIcon\'"\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"hidden" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelSaveButton" data-dojo-props\x3d"titleStr : \'${webviewStrings.cancelSave}\',\r\n          iconClass: \'rc24Icon cancelSaveIcon toolbarButtonIcon\'"\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d"titleStr : \'${webviewStrings.cancel}\',\r\n          iconClass: \'rc24Icon cancelIcon toolbarButtonIcon\'"\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/ToolbarButton.html":'\x3cdiv class\x3d"toolbarButton" data-dojo-attach-point\x3d"toolbarButton"\x3e\r\n\r\n\t\x3cdiv class\x3d"" data-dojo-attach-point\x3d"buttonNode"\x3e\r\n\t\t\x3cspan class\x3d"webviewToolbarButton" data-dojo-attach-point\x3d"toolbarButtonIcon"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\t\r\n\x3c/div\x3e',"url:webview/admin/roles/templates/Permissions.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"roles permissions" \x3e\r\n\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/roles/RoleToolbar"\r\n         data-dojo-props\x3d\'hasIconButtons: true, hasSelectAll: true,\r\n         isIndividualRole: true, site: ${site}, roleId: ${roleId},\r\n         selectedButton: "permissionsButton"\'\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"permissionsArea"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n         class\x3d"webviewAdminSites permissions-container"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"permissionsContainer"\x3e\r\n\r\n            \x3cp class\x3d"wizard-prompt hidden" data-dojo-attach-point\x3d"permissionsPromptNode" \x3e${webviewStrings.userPermissionsPrompt}\x3c/p\x3e\r\n            \x3cdiv class\x3d"role-name-container"\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"roleNameLB"\x3e${roleStrings.roleName}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text"\r\n                       data-dojo-attach-point\x3d"roleName"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'required: true,\r\n                       invalidMessage: "${errorStrings.emptyNameField}",\r\n                       baseClass: "rcTextBox",\r\n                       maxLength: 255\'/\x3e\r\n\r\n                \x3cspan class\x3d"hidden rc24Icon selectAllIcon" data-dojo-attach-point\x3d"selectAll" title\x3d"${webviewStrings.selectAll}"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"rolemaskPermissions"\r\n                 data-dojo-type\x3d"webview/admin/users/RolemaskPermissions"\r\n                 data-dojo-props\x3d"site: ${site},\r\n                 isPublic: false, isAdmin: false, isRole: true"\x3e\x3c/div\x3e\r\n\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"permissionsWizardNextContainer" class\x3d"fieldAndLabel next-button-container wizard-field-and-label hidden"\x3e\r\n                \x3ca href\x3d"#" class\x3d\'wizard-external-next-link wizard-next-link\' data-dojo-attach-point\x3d"wizardNextButton" title\x3d"${webviewStrings.nextStep}"\x3e\r\n                    \x3cspan class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"" class\x3d"wizard-next-label"\x3e${webviewStrings.next}\x3c/span\x3e\r\n                \x3c/a\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/roles/templates/RoleToolbar.html":'\x3cdiv class\x3d"admin-toolbar roles-toolbar"\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonsContainer"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"listButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton list\',\r\n              iconClass: \'svg-rolesIcon\',\r\n              label: \'${roleStrings.roleList}\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"addRoleButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton add-role\',\r\n              iconClass: \'rcIcon addIcon\',\r\n              label: \'${roleStrings.addRole}\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"permissionsButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton permissions\',\r\n              iconClass: \'svg-permissionsIcon\',\r\n              label: \'${roleStrings.rolePermissions}\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"loginInfoButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton loginInfo\',\r\n              iconClass: \'svg-login\',\r\n              label: \'${roleStrings.roleLoginInfo}\'"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"icon-button-container" data-dojo-attach-point\x3d"iconContainer"\x3e\r\n        \x3cspan class\x3d"hidden" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"selectAllButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n              iconClass: "rc24Icon selectAllIcon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.save}",\r\n              iconClass: "rc24Icon saveIcon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.cancel}",\r\n              iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/users/templates/RolemaskPermissions.html":'\x3cdiv class\x3d"role-mask-permissions"\x3e\r\n\r\n    \x3cfieldset class\x3d"nonPublicField permission-group administer-group"\x3e\r\n        \x3clegend\x3e${webviewStrings.administer}\x3c/legend\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.wvSystems}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"manageSystems"/\x3e\r\n                ${webviewStrings.wvSystems}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"manageSystemsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.wvSchedules}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"editScheduleTree"/\x3e\r\n                ${webviewStrings.wvSchedules}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"editScheduleTreeRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.navGroups}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"manageNavGroup"/\x3e\r\n                ${webviewStrings.navGroups}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"manageNavGroupRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.wvTrees}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"manageNavTree"/\x3e\r\n                ${webviewStrings.wvTrees}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"manageNavTreeRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.wvUsers}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"manageUsers"/\x3e\r\n                ${webviewStrings.wvUsers}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"manageUsersRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${afterHoursStrings.reportTemplates}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"administerReportTemplates"/\x3e\r\n                ${afterHoursStrings.reportTemplates}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"administerReportTemplatesRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cfieldset class\x3d"nonPublicField permission-group"\x3e\r\n        \x3clegend\x3e${webviewStrings.modify}\x3c/legend\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.inputs}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"changeInputs"/\x3e\r\n                ${webviewStrings.inputs}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"changeInputsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.outputs}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"changeOutputs"/\x3e\r\n                ${webviewStrings.outputs}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"changeOutputsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.values}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"changeVariables"/\x3e\r\n                ${webviewStrings.values}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"changeVariablesRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.loops}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"pidLoops"/\x3e\r\n                ${webviewStrings.loops}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"pidLoopsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.weeklySchedules}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"weeklySchedules"/\x3e\r\n                ${webviewStrings.weeklySchedules}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"weeklySchedulesRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.specialEvents}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"exceptionSchedules"/\x3e\r\n                ${webviewStrings.specialEvents}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"exceptionSchedulesRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.calendars}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"calendars"/\x3e\r\n                ${webviewStrings.calendars}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"calendarsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.trendLogWorksheet}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"trendlogWorksheet"/\x3e\r\n                ${webviewStrings.trendLogWorksheet}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"trendlogWorksheetRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.notificationClasses}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"notClassChg"/\x3e\r\n                ${webviewStrings.notificationClasses}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"notClassChgRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.programs}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"modifyPrograms"/\x3e\r\n                ${webviewStrings.programs}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"modifyProgramsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.programsWorksheet}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"programsWorksheet"/\x3e\r\n                ${webviewStrings.programsWorksheet}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"programsWorksheetRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.enableDisablePrograms}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"enableDisablePrograms"/\x3e\r\n                ${webviewStrings.enableDisablePrograms}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"enableDisableProgramsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${programStrings.sendMultiple}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"sendMultiplePrograms"/\x3e\r\n                ${programStrings.sendMultiple}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"sendMultipleProgramsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.arrays}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"changeArrays"/\x3e\r\n                ${webviewStrings.arrays}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"changeArraysRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.advancedBacnet}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"bacnetAdvChg"/\x3e\r\n                ${webviewStrings.advancedBacnet}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"bacnetAdvChgRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.panFileBackup}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"panFileBackup"/\x3e\r\n                ${webviewStrings.panFileBackup}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"panFileBackupRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.panFileRestore}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"panFileRestore"/\x3e\r\n                ${webviewStrings.panFileRestore}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"panFileRestoreRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.panFileOverwrite}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"panFileOverwrite"/\x3e\r\n                ${webviewStrings.panFileOverwrite}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"panFileOverwriteRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.pointReports}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox"\r\n                       data-dojo-attach-point\x3d"modifyPointReports"/\x3e\r\n                ${webviewStrings.pointReports}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"modifyPointReportsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cfieldset class\x3d"permission-group alarms-group"\x3e\r\n        \x3clegend\x3e${rcStrings.alarms}\x3c/legend\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.viewAlarms}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"viewAlarms"/\x3e\r\n                ${webviewStrings.viewAlarms}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"viewAlarmsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.ackAlarms}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"ackAlarms"/\x3e\r\n                ${webviewStrings.ackAlarms}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"ackAlarmsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.popupAlarms}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"popupAlarms"/\x3e\r\n                ${webviewStrings.popupAlarms}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"popupAlarmsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.cleanUpAlarmHistory}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"cleanUpAlarmHistory"/\x3e\r\n                ${webviewStrings.cleanUpAlarmHistory}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"cleanUpAlarmHistoryRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cfieldset class\x3d"permission-group access-group"\x3e\r\n        \x3clegend\x3e${rcStrings.access}\x3c/legend\x3e\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.auditTrail}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"auditTrail"/\x3e\r\n                ${webviewStrings.auditTrail}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"auditTrailRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.endUserValues}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"endUserValues"/\x3e\r\n                ${webviewStrings.endUserValues}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"endUserValuesRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.operatorValues}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"operatorValues"/\x3e\r\n                ${webviewStrings.operatorValues}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"operatorValuesRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"leftIndented nonPublicField"\x3e\r\n\r\n            \x3clabel class\x3d"nonPublicField" for\x3d"${id}_accessLevel"\r\n                   data-dojo-attach-point\x3d"accessLevelLabel"\x3e${webviewStrings.accessLevel}:\x3c/label\x3e\r\n\r\n            \x3cinput type\x3d"number" class\x3d"noMargin nonPublicField" id\x3d"${id}_accessLevel" name\x3d"accessLevel" max\x3d"99" min\x3d"0"\r\n                   data-dojo-attach-point\x3d"accessLevel"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'validator: ${_checkAccessLevel},\r\n                   constraints:{ min: 0, max: 99 },\r\n                   baseClass: "rcTextBox doubleDigit rcUserTextBox",\r\n                   invalidMessage: "${errorStrings.accessLevelOutOfRange}",\r\n                   isForRole: ${isRole},\r\n                   required: true\' /\x3e\r\n            \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"accessLevelRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.autoManual}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"auto"/\x3e\r\n                ${webviewStrings.autoManual}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"autoRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"showLogonNode"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.showLogon}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"showLogon"/\x3e\r\n                ${webviewStrings.showLogon}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"showLogonRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.mustEnterChange}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"mustExplain"/\x3e\r\n                ${webviewStrings.mustEnterChange}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"mustExplainRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.autoLogOff}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"autoLogOff"/\x3e\r\n                ${webviewStrings.autoLogOff}\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"inline-checkbox-and-input"\x3e\r\n                \x3cinput type\x3d"number" id\x3d"${id}_autoLogOffTime" name\x3d"autoLogOffTime" min\x3d"0" max\x3d"720"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                    data-dojo-attach-point\x3d"autoLogoffTime"\r\n                    data-dojo-props\x3d"validator:dojox.validate.isInRange,\r\n                    constraints:{ min: 0, max: 720 },\r\n                    baseClass: \'rcTextBox doubleDigit rcUserTextBox\', required: false ,\r\n                    style: \'height:18px, width:20px\'"/\x3e\r\n                \x3clabel for\x3d"${id}_autoLogOffTime" data-dojo-attach-point\x3d"autoLogoffTimeLabel"\x3e${rcStrings.minutes}\x3c/label\x3e\r\n                \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"autoLogOffRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.setDateTime}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"changeDateTime"/\x3e\r\n                ${webviewStrings.setDateTime}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"changeDateTimeRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n            \x3clabel title\x3d"${webviewStrings.programs}"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                     data-dojo-type\x3d"dijit/form/CheckBox"\r\n                     data-dojo-attach-point\x3d"accessPrograms"/\x3e\r\n                ${webviewStrings.programs}\r\n            \x3c/label\x3e\r\n            \x3cspan\r\n                data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                data-dojo-attach-point\x3d"accessProgramsRoleIcon" \x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cfieldset class\x3d"permission-group enterprise-schedule-container"\x3e\r\n        \x3clegend\x3e${webviewStrings.permissionsEnterpriseSchedules}\x3c/legend\x3e\r\n\r\n        \x3cfieldset class\x3d"enterprise-schedule-group top-group"\x3e\r\n            \x3clegend\x3e${webviewStrings.tenant}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                \x3clabel title\x3d"${webviewStrings.modifyAfterHoursEvents}"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"modifyAfterHoursEvents"/\x3e\r\n                    ${webviewStrings.modifyAfterHoursEvents}\r\n                \x3c/label\x3e\r\n                \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"modifyAfterHoursEventsRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                \x3clabel title\x3d"${webviewStrings.approveAfterHoursEvents}"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"approveAfterHoursEvents"/\x3e\r\n                    ${webviewStrings.approveAfterHoursEvents}\r\n                \x3c/label\x3e\r\n                \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"approveAfterHoursEventsRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                \x3clabel title\x3d"${webviewStrings.ahacPopup}"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"popupAHAC"/\x3e\r\n                    ${webviewStrings.ahacPopup}\r\n                \x3c/label\x3e\r\n                \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"popupAHACRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n        \x3cfieldset class\x3d"enterprise-schedule-group"\x3e\r\n            \x3clegend\x3e${webviewStrings.facilityManager}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                \x3clabel title\x3d"${webviewStrings.modifyDefaultSchedule}"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"modifyDefaultSchedule"/\x3e\r\n                    ${webviewStrings.modifyDefaultSchedule}\r\n                \x3c/label\x3e\r\n                \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"modifyDefaultScheduleRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                \x3clabel title\x3d"${afterHoursStrings.viewAfterHoursSummary}"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"viewAfterHoursReport"/\x3e\r\n                    ${afterHoursStrings.viewAfterHoursSummary}\r\n                \x3c/label\x3e\r\n                \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"viewAfterHoursReportRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                \x3clabel title\x3d"${webviewStrings.configureEventPriority}"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"configureEventPriority"/\x3e\r\n                    ${webviewStrings.configureEventPriority}\r\n                \x3c/label\x3e\r\n                \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"configureEventPriorityRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                \x3clabel title\x3d"${webviewStrings.configureAfterHoursEventReporting}"\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"configureAfterHoursEventReporting"/\x3e\r\n                    ${webviewStrings.configureAfterHoursEventReporting}\r\n                \x3c/label\x3e\r\n                \x3cspan\r\n                    data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                    data-dojo-attach-point\x3d"configureAfterHoursEventReportingRoleIcon" \x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cfieldset class\x3d\'customHelpFile hidden permission-group\' data-dojo-attach-point\x3d"customHelpContainer"\x3e\r\n        \x3clegend\x3e${webviewStrings.customHelpFile}\x3c/legend\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\r\n            \x3cinput\r\n                name\x3d"customHelpFile"\r\n                data-dojo-attach-point\x3d"helpPath"\r\n                data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                data-dojo-props\x3d"constraints:{ maxChars: 2083 },\r\n                required: false,\r\n                baseClass: \'customHelpFile rcTextBox\'" /\x3e\r\n\r\n            \x3cspan data-dojo-attach-point\x3d"helpFileUploader"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"hidden inlineMargins" data-dojo-attach-point\x3d"galleryOrLabel"\x3e${webviewStrings.or}\x3c/span\x3e\r\n            \x3cspan class\x3d\'hidden\'\r\n                  data-dojo-attach-point\x3d"galleryButton"\r\n                  data-dojo-type\x3d"dijit/form/Button"\r\n                  data-dojo-props\x3d"baseClass: \'webviewButton gallery\',\r\n                  iconClass:\'webviewIcon galleryIcon\',\r\n                  label: \'${webviewStrings.gallery}\'"\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"permissionsWizardNextContainer" class\x3d"fieldAndLabel wizard-field-and-label hidden"\x3e\r\n        \x3ca href\x3d"#" class\x3d\'wizard-external-next-link wizard-next-link\' data-dojo-attach-point\x3d"permissionsWizardNextLink" data-dojo-attach-event\x3d"onclick: onClickWizardNext" title\x3d"${webviewStrings.nextStep}"\x3e\r\n            \x3cspan class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"" class\x3d"wizard-next-label"\x3e${webviewStrings.next}\x3c/span\x3e\r\n        \x3c/a\x3e\r\n        \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/FileGallery.html":'\x3cdiv class\x3d"fileGalleryMain"\x3e\r\n\t\x3cdiv class\x3d"fileGalleryContents" data-dojo-attach-point\x3d"contentsTable"\x3e\r\n\t\t\x3cdiv class\x3d"fileGalleryHeaders" data-dojo-attach-point\x3d"tableHeader"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:webview/widget/templates/RoleIcon.html":'\x3cspan class\x3d"rcIcon roleIcon" style\x3d"visibility: hidden;" title\x3d""\r\n      data-dojo-attach-point\x3d"manageSystemsRoleIcon"\x3e\x3c/span\x3e\r\n',
"url:webview/admin/roles/templates/RolesList.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"roles role-list" \x3e\r\n\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/roles/RoleToolbar"\r\n         data-dojo-props\x3d\'hasIconButtons: false, hasSelectAll: false,\r\n         isIndividualRole: false, selectedButton: "listButton"\'\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"listRolesArea" class\x3d"webviewContentPane"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_gridToolbar"\r\n             data-dojo-type\x3d"webview/admin/users/UserListToolbar"\r\n             data-dojo-props\x3d\'site: ${site},\r\n             hasRoles: false\'\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/SystemTag.html":'\x3cspan class\x3d"truncated tag ${baseClass}" title\x3d"${title}"\r\n      data-dojo-attach-point\x3d"containerNode"\r\n      data-dojo-attach-event\x3d"onclick:_onClick"\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"nameContainer"\x3e${name}\x3c/span\x3e\r\n    \x3cspan class\x3d"svg-sm-close-icon"\r\n          data-dojo-attach-point\x3d"removeNode"\r\n          data-dojo-attach-event\x3d"onclick:_onClickRemove"\x3e\x3c/span\x3e\r\n\r\n\x3c/span\x3e',
"url:webview/admin/users/templates/UserListToolbar.html":'\x3cdiv class\x3d"${baseClass} user-list-toolbar"\x3e\r\n    \x3cspan class\x3d"icon-buttons" data-dojo-attach-point\x3d"iconButtons"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"selectAll"\r\n              data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-props\x3d\'titleStr: "${webviewStrings.selectAll}",\r\n              iconClass: "rc24Icon toolbarButtonIcon selectAllIcon"\'\x3e\x3c/span\x3e\r\n\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"schedulePermissions"\r\n              data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-props\x3d\'titleStr: "${webviewStrings.enterpriseSchedulePermissions}",\r\n              iconClass: "rc24Icon toolbarButtonIcon permittedSchedulesIcon",\r\n              disabled: true\'\x3e\x3c/span\x3e\r\n        \r\n        \x3cspan data-dojo-attach-point\x3d"resetIcon"\r\n              data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-props\x3d\'titleStr: "${alarmsStrings.reset}",\r\n              iconClass: "rc24Icon toolbarButtonIcon userListToolbarResetIcon",\r\n              disabled: true\'\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"deleteIcon"\r\n              data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-props\x3d\'titleStr: "${rcStrings.rcDelete}",\r\n              iconClass: "rc24Icon toolbarButtonIcon deleteIcon",\r\n              disabled: true\'\x3e\x3c/span\x3e\r\n\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"user-assigner" data-dojo-attach-point\x3d"assigners"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"treeAssigner"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"reportTemplateAssigner"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"homeGroupAssigner"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"myControlHomeGroupAssigner"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"systemRestrictorAssigner"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"roleAssigner"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"user-filters" data-dojo-attach-point\x3d"filters"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"fieldSearch"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"systemFilter"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"rc24Icon clear-all-fields hidden"\r\n          data-dojo-attach-point\x3d"clearAll"\r\n          data-dojo-attach-event\x3d"onclick: _resetFilters"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/CheckedMenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"${role}" tabIndex\x3d"-1" aria-checked\x3d"${checked}"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"dijitMenuItemIconChar dijitCheckedMenuItemIconChar"\x3e${!checkedChar}\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,labelNode,textDirNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26#160;\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:webview/admin/roles/templates/RoleLoginInfo.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"roles login-info" \x3e\r\n\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/roles/RoleToolbar"\r\n         data-dojo-props\x3d\'hasIconButtons: true, hasSelectAll: false,\r\n         isIndividualRole: true, site: ${site}, roleId: ${roleId},\r\n         selectedButton: "loginInfoButton"\'\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"loginInfoArea"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"         \r\n         class\x3d"webviewAdminSites login-info-container"\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"loginInfoContainer"\x3e\r\n            \x3cdiv class\x3d"settings-row radioButtonContainer" \x3e\r\n                \x3cinput type\x3d"radio" id\x3d"enabledRadio" name\x3d"enabledDisabled"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d\'enabledRadioButton\'\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\',\r\n                       checked: true" /\x3e\r\n                \x3clabel class\x3d"radioButtonLabel" for\x3d"enabledRadio"\r\n                       data-dojo-attach-point\x3d"enableRBLabel"\x3e${webviewStrings.enabledLabel}\x3c/label\x3e\r\n\r\n                \x3cinput type\x3d"radio" id\x3d"disabledRadio" name\x3d"enabledDisabled"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d\'disabledRadioButton\'\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel class\x3d"radioButtonLabel" for\x3d"disabledRadio"\r\n                       data-dojo-attach-point\x3d"disableRBLabel"\x3e${webviewStrings.disabledLabel}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"settings-row selector-row"\x3e\r\n                \x3cdiv class\x3d"checkbox-and-label"\x3e\r\n                    \x3cinput type\x3d"checkbox" id\x3d"navTreeCheckBox"\r\n                           data-dojo-attach-point\x3d"navTreeCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                    \x3clabel for\x3d"navTreeCheckBox" data-dojo-attach-point\x3d"navTreeSelectorLB"\x3e${webviewStrings.tree}:\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cselect class\x3d"navigation-tree-selector"\r\n                        data-dojo-attach-point\x3d"navTreeSelector"\r\n                        data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                        data-dojo-props\x3d\'baseClass: "rcSelectBox form-input",\r\n                        searchAttr: "name", required: false,\r\n                        autoComplete: false\'\x3e\r\n\r\n                \x3c/select\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"settings-row selector-row"\x3e\r\n                \x3cdiv class\x3d"checkbox-and-label"\x3e\r\n                    \x3cinput type\x3d"checkbox" id\x3d"ahacCheckBox"\r\n                           data-dojo-attach-point\x3d"ahacCB"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                    \x3clabel for\x3d"ahacCheckBox" data-dojo-attach-point\x3d"ahacSelectorLB"\x3e${ahacStrings.reportTemplate}:\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cselect class\x3d"ahac-template-selector"\r\n                        data-dojo-attach-point\x3d"ahacSelector"\r\n                        data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                        data-dojo-props\x3d\'baseClass: "rcSelectBox form-input",\r\n                        searchAttr: "name", required: false,\r\n                        autoComplete: false\'\x3e\r\n\r\n                \x3c/select\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Home Group Selectors--\x3e\r\n            \x3cdiv\r\n                data-dojo-type\x3d\'webview/admin/roles/widget/LoginGroupSelectors\'\r\n                data-dojo-attach-point\x3d\'_loginGroupSelectors\'\r\n                data-dojo-props\x3d"site: \'${site}\'"\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"settings-row"\x3e\r\n                \x3cinput type\x3d"checkbox" id\x3d"permittedSystemsCheckBox"\r\n                       data-dojo-attach-point\x3d"permittedSystemsCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                \x3clabel for\x3d"permittedSystemsCheckBox"\x3e${webviewStrings.permittedSystems}:\x3c/label\x3e\r\n                \x3cdiv class\x3d"role-permitted-systems" data-dojo-attach-point\x3d"permittedSystemsNode"\x3e\r\n                    \x3cspan class\x3d"permittedSystemTags" data-dojo-attach-point\x3d"systemTags"\x3e${rcStrings.any}\x3c/span\x3e\r\n                    \x3cspan class\x3d"webviewIcon smallAddIcon" style\x3d"display: inline-block" data-dojo-attach-point\x3d"addButton"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"permittedSystemsSelector"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"settings-row"\x3e\r\n                \x3cinput type\x3d"checkbox" id\x3d"forceSystemsCheckBox"\r\n                       data-dojo-attach-point\x3d"forceSystemsCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                \x3clabel for\x3d"forceSystemsCheckBox" data-dojo-attach-point\x3d"forceSystemsLB"\x3e${roleStrings.forceAllSystems}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"settings-row" data-dojo-attach-point\x3d"permittedSchedulesContainer"\x3e\r\n                \x3cinput type\x3d"checkbox" id\x3d"permittedSchedulesCheckBox"\r\n                       data-dojo-attach-point\x3d"permittedSchedulesCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                \x3clabel for\x3d"permittedSchedulesCheckBox"\x3e${webviewStrings.permittedSchedules}:\x3c/label\x3e\r\n                \x3cspan class\x3d"linkable permitted-schedule-link" data-dojo-attach-point\x3d"permittedSchedules"\x3e${webviewStrings.allBlocks}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"settings-row" data-dojo-attach-point\x3d"forceSchedulesContainer"\x3e\r\n                \x3cinput type\x3d"checkbox" id\x3d"forceSchedulesCheckBox"\r\n                       data-dojo-attach-point\x3d"forceSchedulesCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                \x3clabel for\x3d"forceSchedulesCheckBox" data-dojo-attach-point\x3d"forceSchedulesLB"\x3e${roleStrings.forceAllSchedules}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"wizardNextContainer" class\x3d"fieldAndLabel next-button-container wizard-field-and-label hidden"\x3e\r\n                \x3ca href\x3d"#" class\x3d\'wizard-external-next-link wizard-next-link\' data-dojo-attach-point\x3d"wizardNextButton" title\x3d"${webviewStrings.nextStep}"\x3e\r\n                    \x3cspan class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"" class\x3d"wizard-next-label"\x3e${webviewStrings.next}\x3c/span\x3e\r\n                \x3c/a\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/roles/widget/templates/RoleLoginGroupSelectors.html":'\x3cdiv class\x3d"settings-row home-group-selectors"\x3e\r\n    \x3cinput type\x3d"checkbox" id\x3d"homeGroupCheckBox" class\x3d"fieldset-checkbox"\r\n           data-dojo-attach-point\x3d"homeGroupCB"\r\n           data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e\x3clabel for\x3d"homeGroupCheckBox"\x3e ${webviewStrings.homeGroup}\x3c/label\x3e\x3c/legend\x3e\r\n        \x3cdiv\r\n            data-dojo-type\x3d\'webview/admin/widget/LoginGroupSelectors/HomeGroupSelector\'\r\n            data-dojo-attach-point\x3d\'_homeGroupSelectors\'\r\n            data-dojo-props\x3d"site: \'${site}\',\r\n            _groupPath: \'${_homeGroupPath}\',\r\n            _invalidGroupMessage: \'${webviewStrings.invalidHomeGroup}\',\r\n            _invalidSystemMessage: \'${webviewStrings.invalidHomeGroupSystem}\',\r\n            _homeGroupRequiredMessage: \'${webviewStrings.homeGroupRequired}\'"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cinput type\x3d"checkbox" id\x3d"myControlCheckBox" class\x3d"fieldset-checkbox"\r\n           data-dojo-attach-point\x3d"myControlGroupCB"\r\n           data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e\x3clabel for\x3d"myControlCheckBox"\x3e${!webviewStrings.myControlHomeGroup}\x3c/label\x3e\x3c/legend\x3e\r\n        \x3cdiv\r\n            data-dojo-type\x3d\'webview/admin/widget/LoginGroupSelectors/SystemGroupSelector\'\r\n            data-dojo-attach-point\x3d\'_myControlGroupSelectors\'\r\n            data-dojo-props\x3d"site: \'${site}\',\r\n            _groupPath: \'${_myControlGroupPath}\',\r\n            _invalidGroupMessage: \'${webviewStrings.invalidMyControlGroup}\',\r\n            _invalidSystemMessage: \'${webviewStrings.invalidMyControlGroupSystem}\',\r\n            _homeGroupRequiredMessage: \'${webviewStrings.myControlHomeGroupRequired}\'"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/users/widget/templates/LoginGroupSelectors.html":"\x3cdiv class\x3d\"home-group-selectors\"\x3e\r\n    \x3cdiv class\x3d\"add-user-flex home-group-set\"\x3e\r\n        \x3cspan data-dojo-type\x3d\"webview/widget/RoleIcon\"\r\n              data-dojo-attach-point\x3d\"homeGroupRoleIcon\"\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cfieldset class\x3d\"top-fieldset\"\x3e\r\n            \x3clegend\x3e${webviewStrings.homeGroup}\x3c/legend\x3e\r\n            \x3cdiv\r\n                data-dojo-type\x3d'webview/admin/widget/LoginGroupSelectors/HomeGroupSelector'\r\n                data-dojo-attach-point\x3d'_homeGroupSelectors'\r\n                data-dojo-props\x3d\"site: '${site}',\r\n                _groupPath: '${_homeGroupPath}',\r\n                                    _invalidGroupMessage: '${webviewStrings.invalidHomeGroup}',\r\n                                    _invalidSystemMessage: '${webviewStrings.invalidHomeGroupSystem}',\r\n                                    _homeGroupRequiredMessage: '${webviewStrings.homeGroupRequired}'\"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\"add-user-flex home-group-set\"\x3e\r\n        \x3cspan data-dojo-type\x3d\"webview/widget/RoleIcon\"\r\n              data-dojo-attach-point\x3d\"myControlGroupRoleIcon\"\x3e\r\n        \x3c/span\x3e\r\n        \x3cfieldset\x3e\r\n            \x3clegend\x3e${!webviewStrings.myControlHomeGroup}\x3c/legend\x3e\r\n            \x3cdiv\r\n                data-dojo-type\x3d'webview/admin/widget/LoginGroupSelectors/SystemGroupSelector'\r\n                data-dojo-attach-point\x3d'_myControlGroupSelectors'\r\n                data-dojo-props\x3d\"site: '${site}',\r\n                _groupPath: '${_myControlGroupPath}',\r\n                                    _invalidGroupMessage: '${webviewStrings.invalidMyControlGroup}',\r\n                                    _invalidSystemMessage: '${webviewStrings.invalidMyControlGroupSystem}',\r\n                                    _homeGroupRequiredMessage: '${webviewStrings.myControlHomeGroupRequired}'\"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n",
"url:webview/admin/widget/LoginGroupSelectors/templates/HomeGroupSelector.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"fieldAndLabel" data-dojo-attach-point\x3d"loginSelector"\x3e\r\n        \x3clabel class\x3d"rcTextBoxLabel"\x3e\r\n            ${webviewStrings.loginTo}:\r\n        \x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"radioButtonContainer" \x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"navGroupOption" class\x3d"homeGroupRadioButtonContainer"\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"navGroupRadio" name\x3d"loginType" checked\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"navGroupRadioButton"\r\n                       data-dojo-props\x3d\'baseClass: "webviewAdminRadio"\' /\x3e\r\n                \x3clabel class\x3d"radioButtonLabel" for\x3d"navGroupRadio" data-dojo-attach-point\x3d"navGroupRBLabel"\x3e${webviewStrings.navGroup}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"sysGroupOption" class\x3d"homeGroupRadioButtonContainer"\x3e\r\n                \x3cinput type\x3d"radio" id\x3d"systemGroupRadio" name\x3d"loginType"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d\'sysGroupRadioButton\'\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel class\x3d"radioButtonLabel" for\x3d"systemGroupRadio" data-dojo-attach-point\x3d"systemGroupRBLabel"\x3e${webviewStrings.systemGroup}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_navGroupPane"\x3e\r\n        \x3c!-- Provide link to Add Systems if none currently exist. --\x3e\r\n        \x3cdiv class\x3d"hidden fieldAndLabel requiredNote" data-dojo-attach-point\x3d"noSystemNoNavGroups"\x3e\r\n            \x3cdiv\x3e\r\n                \x3cspan\x3e${webviewStrings.noSystemsExist}\x3c/span\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Button"\r\n                     data-dojo-props\x3d"baseClass: \'webviewButton linkButton\',\r\n                     label: \'${webviewStrings.clickHere}\'"\r\n                     data-dojo-attach-event\x3d"onClick: _addSystemClicked"\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3cspan\x3e${webviewStrings.noNavGroupsExist}\x3c/span\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Button"\r\n                     data-dojo-props\x3d"baseClass: \'webviewButton linkButton\',\r\n                     label: \'${webviewStrings.clickHere}\'"\r\n                     data-dojo-attach-event\x3d"onClick: _addNavGroupClicked"\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"hidden fieldAndLabel requiredNote" data-dojo-attach-point\x3d"noNavGroups"\x3e\r\n            \x3cdiv\x3e\r\n                \x3cspan\x3e${webviewStrings.noNavGroupsExist}\x3c/span\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Button"\r\n                     data-dojo-props\x3d"baseClass: \'webviewButton linkButton\',\r\n                     label: \'${webviewStrings.clickHere}\'"\r\n                     data-dojo-attach-event\x3d"onClick: _addNavGroupClicked"\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel homeGroup" data-dojo-attach-point\x3d"_navGroupSelectorContainer"\x3e\r\n            \x3clabel class\x3d"rcTextBoxLabel"\r\n                   data-dojo-attach-point\x3d"_navGroupLabel"\x3e\r\n                ${webviewStrings.navGroup}:\r\n            \x3c/label\x3e\r\n\r\n            \x3cspan  data-dojo-attach-point\x3d"_navGroupContainer"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_systemGroupPane"\x3e\r\n\r\n        \x3c!-- Provide link to Add Systems if none currently exist. --\x3e\r\n        \x3cdiv class\x3d"hidden fieldAndLabel requiredNote" data-dojo-attach-point\x3d"noSystemNoGroups"\x3e\r\n            \x3cdiv\x3e\r\n                \x3cspan\x3e${webviewStrings.noSystemsExist}\x3c/span\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/Button"\r\n                     data-dojo-props\x3d"baseClass: \'webviewButton linkButton\',\r\n                     label: \'${webviewStrings.clickHere}\'"\r\n                     data-dojo-attach-event\x3d"onClick: _addSystemClicked"\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_selectorsContainer"\x3e\r\n            \x3cdiv class\x3d"fieldAndLabel homeGroup"  data-dojo-attach-point\x3d"_systemSelectorContainer"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\r\n                       data-dojo-attach-point\x3d"_systemLabel"\x3e\r\n                    ${webviewStrings.system}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cspan data-dojo-attach-point\x3d"_systemContainer"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel homeGroup" data-dojo-attach-point\x3d"_groupSelectorContainer"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\r\n                       data-dojo-attach-point\x3d"_groupLabel"\x3e\r\n                    ${webviewStrings.systemGroup}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cspan data-dojo-attach-point\x3d"_groupContainer"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Provide link to Add Systems if none currently exist. --\x3e\r\n        \x3cdiv class\x3d"hidden fieldAndLabel requiredNote" data-dojo-attach-point\x3d"noSystemGroups"\x3e\r\n            \x3cdiv\x3e\r\n                \x3cspan\x3e${webviewStrings.noSytemGroups}\x3c/span\x3e\r\n\r\n                \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cspan class\x3d"rcTextBoxLabel requiredNote"\x3e${!_homeGroupRequiredMessage}\x3c/span\x3e\x3cbr /\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/LoginGroupSelectors/templates/SystemGroupSelector.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"hidden fieldAndLabel requiredNote" data-dojo-attach-point\x3d"noSystemNoGroups"\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan\x3e${webviewStrings.noSystemsExist}\x3c/span\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/Button"\r\n                 data-dojo-props\x3d"baseClass: \'webviewButton linkButton\',\r\n                 label: \'${webviewStrings.clickHere}\'"\r\n                 data-dojo-attach-event\x3d"onClick: _addSystemClicked"\x3e\r\n            \x3c/div\x3e\r\n            \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_selectorsContainer"\x3e\r\n        \x3cdiv class\x3d"fieldAndLabel homeGroup"  data-dojo-attach-point\x3d"_systemSelectorContainer"\x3e\r\n            \x3clabel class\x3d"rcTextBoxLabel"\r\n                   data-dojo-attach-point\x3d"_systemLabel"\x3e\r\n                ${webviewStrings.system}:\r\n            \x3c/label\x3e\r\n\r\n            \x3cspan data-dojo-attach-point\x3d"_systemContainer"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"fieldAndLabel homeGroup" data-dojo-attach-point\x3d"_groupSelectorContainer"\x3e\r\n            \x3clabel class\x3d"rcTextBoxLabel"\r\n                   data-dojo-attach-point\x3d"_groupLabel"\x3e\r\n                ${webviewStrings.systemGroup}:\r\n            \x3c/label\x3e\r\n\r\n            \x3cspan data-dojo-attach-point\x3d"_groupContainer"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"hidden fieldAndLabel requiredNote" data-dojo-attach-point\x3d"noSystemGroups"\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan\x3e${webviewStrings.noSytemGroups}\x3c/span\x3e\r\n            \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cspan class\x3d"rcTextBoxLabel requiredNote"\x3e${!_homeGroupRequiredMessage}\x3c/span\x3e\x3cbr /\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/sites/templates/sites.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites  sites listPage" style\x3d"width:100%; clear:both;"\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentArea" \r\n\t\t data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n\t\t class\x3d"webviewAdminSites"\x3e\r\n\r\n\t\t\x3c!-- ADD / EDIT / DELETE --\x3e\r\n\t\t\x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d\'listContainer\'\x3e\r\n\t\t\t\x3cdiv class\x3d"leftContainer" data-dojo-attach-point\x3d\'leftContainer\'\x3e\r\n\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"_multiSelect" \r\n\t\t\t\t\t data-dojo-type\x3d"webview/widget/MultiSelectBox"\r\n\t\t\t\t\t data-dojo-props\x3d"fieldLabel: \'List:\'"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel hiddenButtons"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--Used for padding--\x3e\r\n\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"systemInfo" class\x3d"informationalText"\x3e\x3c/div\x3e\r\n\r\n\t\t\t\t\t\x3cdiv class\x3d"" style\x3d\'margin-top: .5em\'\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"editButton"\r\n\t\t\t\t\t\t\t data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t\t data-dojo-props\x3d"baseClass: \'webviewButton editSite\', \r\n\t\t\t\t\t\t\t \'class\': \'hidden\',\r\n\t\t\t\t\t\t\t iconClass: \'rcIcon editSiteIcon\', \r\n\t\t\t\t\t\t\t label: \'Edit\'"\r\n\t\t\t\t\t\t\t data-dojo-attach-event\x3d"onClick: _editItem"\x3e\r\n\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"deleteButton"\r\n\t\t\t\t\t\t\t data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t\t data-dojo-props\x3d"baseClass: \'webviewButton deleteSites\',\r\n\t\t\t\t\t\t\t \'class\': \'hidden\',\r\n\t\t\t\t\t\t\t iconClass: \'rcIcon deleteSitesIcon\'\t, \r\n\t\t\t\t\t\t\t label: \'Delete\'"\r\n\t\t\t\t\t\t\t data-dojo-attach-event\x3d"onClick: _onDeleteItem"\x3e\r\n\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"addButton"\r\n\t\t\t\t\t\t\t data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t\t data-dojo-props\x3d"baseClass: \'webviewButton addSite\', \r\n\t\t\t\t\t\t\t iconClass: \'rcIcon addSiteIcon\', \r\n\t\t\t\t\t\t\t label: \'ADD\'"\r\n\t\t\t\t\t\t\t data-dojo-attach-event\x3d"onClick: _goToAdd"\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\r\n\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!-- ADD / EDIT / DELETE--\x3e\t\t\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\t\r\n\x3c/div\x3e',
"url:webview/admin/sites/templates/site.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites sites singlePage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"propertiesButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'baseClass: "webviewButton properties",\r\n              iconClass: "rcIcon propertiesIcon",\r\n              label: "${webviewStrings.wvSiteProperties}"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"securityButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'baseClass: "webviewButton properties",\r\n              iconClass: "rcIcon securityIcon",\r\n              label: "${webviewStrings.wvSiteSecurity}"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cdiv class\x3d\'commitButtons\' data-dojo-type\x3d"webview/widget/CommitButtons"\r\n             data-dojo-attach-point\x3d"propertiesCommitButtons"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- PROPERTIES TAB --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"siteProperties"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n         class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"propertiesContainer"\x3e\r\n\r\n            \x3cp class\x3d"wizard-prompt hidden" data-dojo-attach-point\x3d"promptNode" \x3e${webviewStrings.sitePrompt}\x3c/p\x3e\r\n            \x3cdiv class\x3d"leftContainer doubleContent"\x3e\r\n\r\n                \x3cdiv class\x3d"form-group default-theme"\x3e\r\n                    \x3clabel class\x3d"form-label" for\x3d"siteTheme"\r\n                           data-dojo-attach-point\x3d"siteThemeLabel"\x3e${webviewStrings.defaultTheme}:\x3c/label\x3e\r\n\r\n                    \x3cselect data-dojo-attach-point\x3d"defaultThemeSelection"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d\'baseClass: "rcSelectBox form-input",\r\n                            autoComplete: false,\r\n                            searchAttr: "label",\r\n                            labelAttr: "label",\r\n                            labelType: "html"\'\x3e\r\n                    \x3c/select\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"defaultThemeSelection"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"form-group"\x3e\r\n                    \x3clabel class\x3d"form-label"\r\n                           data-dojo-attach-point\x3d"siteNameLabel"\x3e${webviewStrings.name}: \x3cspan class\x3d"requiredText mandatory"\x3e*\x3c/span\x3e\r\n                    \x3c/label\x3e\r\n                    \x3cinput name\x3d"siteName" type\x3d"text" maxlength\x3d"50"\r\n                           data-dojo-attach-point\x3d"siteNameTB"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "form-input rcTextBox", required: true\' /\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"form-group baseUrlContainer"\x3e\r\n                    \x3clabel class\x3d"form-label link"\r\n                           data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                           data-dojo-attach-point\x3d"baseUrlLabel"\r\n                           data-dojo-props\x3d\'helpText: "${webviewStrings.baseUrlHelp}",\r\n                           label: "${webviewStrings.baseSiteUrl}", required: true\'\x3e\r\n                    \x3c/label\x3e\r\n                    \x3cinput name\x3d"baseSiteUrl" type\x3d"text" maxlength\x3d"255"\r\n                           data-dojo-attach-point\x3d"baseUrlTB"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d"baseClass: \'form-input rcTextBox\', required: true" /\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"form-group hidden" data-dojo-attach-point\x3d"urlPathContainer"\x3e\r\n                    \x3clabel class\x3d"form-label link"\r\n                           data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                           data-dojo-attach-point\x3d"urlLabel"\r\n                           data-dojo-props\x3d\'helpText: "${webviewStrings.urlPathHelp}",\r\n                           label: "${webviewStrings.urlPath}"\'\x3e\r\n                    \x3c/label\x3e\r\n                    \x3cinput name\x3d"urlPath" maxlength\x3d"255"\r\n                           data-dojo-attach-point\x3d"urlTB"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "form-input rcTextBox", required: false\' /\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"form-group urlPathLinkContainer"\x3e\r\n                    \x3clabel class\x3d"form-label link"\r\n                           data-dojo-attach-point\x3d"siteUrlLabel"\r\n                           data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                           data-dojo-props\x3d\'helpText: "${webviewStrings.siteUrlHelp}",\r\n                           label: "${webviewStrings.siteUrl}"\'\x3e\r\n                    \x3c/label\x3e\r\n                    \x3ca href\x3d"" target\x3d"_blank" class\x3d"link" data-dojo-attach-point\x3d"siteLink"\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"urlPathText"\x3e\x3c/span\x3e\r\n                    \x3c/a\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"form-group hidden" data-dojo-attach-point\x3d"defaultSiteContainer"\x3e\r\n                    \x3clabel class\x3d"form-label link"\r\n                           data-dojo-attach-point\x3d"defaultSiteLabel"\r\n                           data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                           data-dojo-props\x3d\'helpText: "${webviewStrings.defaultSiteHelp}",\r\n                           label: "${webviewStrings.defaultSite}"\'\x3e\r\n                    \x3c/label\x3e\r\n                    \x3cdiv  class\x3d"form-checkbox" \x3e\r\n                        \x3clabel\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                 data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                 data-dojo-attach-point\x3d"defaultSite"/\x3e\r\n                            ${webviewStrings.makeDefaultSite}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"smtpConfig"\r\n                     data-dojo-type\x3d"webview/admin/sites/smtpConfig"\r\n                     data-dojo-props\x3d\'siteId: ${site}, showRequiredPrompt: true\'\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"webview/admin/widget/ActiveDirectoryConfig"\r\n                     class\x3d"usersADConfig"\r\n                     data-dojo-attach-point\x3d"ADConfig"\r\n                     data-dojo-props\x3d\'showRequiredPrompt: true\'\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"wizardNextContainer" class\x3d"form-group wizard-field-and-label hidden"\x3e\r\n                    \x3cspan class\x3d"form-label"\x3e\x26nbsp;\x3c/span\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'wizard-external-next-link wizard-next-link\' data-dojo-attach-point\x3d"wizardNextLink" data-dojo-attach-event\x3d"onclick: _onClickWizardNext" title\x3d"Next Step"\x3e\r\n                        \x3cspan class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"nextLabel" class\x3d"wizard-next-label"\x3e${rcStrings.tbNext}\x3c/span\x3e\r\n                    \x3c/a\x3e\r\n                \x3c/div\x3e\r\n\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"rightContainer doubleContent" data-dojo-attach-point\x3d"archiveContainer"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"alarmEmailConfig"\r\n                     data-dojo-type\x3d"webview/admin/sites/AlarmEmailSettings"\r\n                     data-dojo-props\x3d\'siteId: ${site}\'\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${webviewStrings.bannerSettings}\x3c/legend\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3clabel\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                 data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                 data-dojo-attach-point\x3d"showTitle"/\x3e\r\n                            ${webviewStrings.showTitle}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cspan class\x3d"uploaderText"\x3e\r\n                        \x3cspan\x3e${webviewStrings.currentLogoImage}: \x3c/span\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"customLogoImageType"\x3e\x3c/span\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"uploaderButtons"\x3e\r\n                        \x3cspan class\x3d"uploaderContainer" data-dojo-attach-point\x3d"logoUploaderContainer"\x3e\x3c/span\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"clearLogoImage"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                              iconClass: "webviewIcon clearIcon",\r\n                              label: "${rcStrings.clear}"\'\x3e\x3c/span\x3e\r\n\r\n                        \x3cspan data-dojo-attach-point\x3d"logoGalleryButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d\'baseClass: "webviewButton gallery",\r\n                              iconClass:"webviewIcon galleryIcon",\r\n                              label: "${webviewStrings.gallery}"\'\x3e\r\n                        \x3c/span\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cdiv class\x3d"informationalText"\x3e\r\n                        ${!webviewStrings.logoImageHint}\r\n                    \x3c/div\x3e\r\n                    \x3cspan class\x3d"uploaderText"\x3e\r\n                        \x3cspan\x3e${webviewStrings.currentBannerImage}: \x3c/span\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"customImageType"\x3e\x3c/span\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"uploaderButtons"\x3e\r\n                        \x3cspan class\x3d"uploaderContainer" data-dojo-attach-point\x3d"uploaderContainer"\x3e\x3c/span\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"clearImage"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                              iconClass: "webviewIcon clearIcon",\r\n                              label: "${rcStrings.clear}"\'\x3e\x3c/span\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"galleryButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d\'baseClass: "webviewButton gallery",\r\n                              iconClass:"webviewIcon galleryIcon",\r\n                              label: "${webviewStrings.gallery}"\'\x3e\r\n                        \x3c/span\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cdiv class\x3d"informationalText"\x3e\r\n                        ${!webviewStrings.bannerImageHint}\r\n                    \x3c/div\x3e\r\n\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"webview/admin/sites/Security"\r\n         data-dojo-attach-point\x3d"securityTab"\r\n         data-dojo-props\x3d\'site: ${site}\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/ImageGallery.html":'\x3cdiv data-dojo-attach-point\x3d"imageGalleryContainer"\x3e\r\n    \x3cdiv class\x3d"imageGalleryTable" data-dojo-attach-point\x3d"imageTable"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"imageGalleryButtons" data-dojo-attach-point\x3d"buttonContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/admin/sites/templates/AlarmEmailSettings.html":'\x3cfieldset class\x3d"nonPublicField permission-group alarm-email-settings"\x3e\r\n    \x3clegend\x3e${emailAlarmStrings.emailAlarms}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"informationalText"\x3e\r\n        ${emailAlarmStrings.hint}\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"alarmSettingDivider" class\x3d"alarm-email-columned-container"\x3e\r\n        \x3cfieldset class\x3d"alarmEmailLeftColumn" data-dojo-attach-point\x3d"titleFieldSet"\x3e\r\n            \x3clegend\x3e${emailAlarmStrings.title}\x3c/legend\x3e            \r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"siteNameTitleCheck"/\x3e\r\n                    ${emailAlarmStrings.siteName}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"systemNameTitleCheck"/\x3e\r\n                    ${emailAlarmStrings.systemName}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"objectNameTitleCheck"/\x3e\r\n                    ${emailAlarmStrings.objectName}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"alarmTextTitleCheck"/\x3e\r\n                    ${emailAlarmStrings.alarmText}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"alarmStateTitleCheck"/\x3e\r\n                    ${emailAlarmStrings.alarmState}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"alarmTypeTitleCheck"/\x3e\r\n                    ${emailAlarmStrings.alarmType}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n        \x3cfieldset class\x3d"alarmEmailRightColumn" data-dojo-attach-point\x3d"titleFieldSet"\x3e\r\n            \x3clegend\x3e${emailAlarmStrings.body}\x3c/legend\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"siteNameBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.siteName}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"systemNameBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.systemName}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"sourceBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.source}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"objectNameBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.objectName}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"alarmTextBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.alarmText}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"alarmStateBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.alarmState}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"eventParametersBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.eventParameters}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"statusFlagsBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.statusFlags}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"alarmTimeBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.alarmTime}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"alarmTypeBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.alarmType}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"alarmPriorityBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.alarmPriority}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"actionBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.action}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\r\n                    \x3cinput type\x3d"checkbox"\r\n                         data-dojo-type\x3d"dijit/form/CheckBox"\r\n                         data-dojo-attach-point\x3d"logOnLinkBodyCheck"/\x3e\r\n                    ${emailAlarmStrings.logOnLink}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"smtp-button-container"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"alarmRecipientsButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton alarm-recipients-list-button",\r\n                iconClass: "rcIcon svg-emailIcon",\r\n                label: "${emailAlarmStrings.recipients}"\'\x3e${emailAlarmStrings.recipients}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/fieldset\x3e\r\n\r\n',
"url:webview/admin/sites/templates/security.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"siteSecurity"\r\n        data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n        class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"securityContainer"\x3e\r\n            \x3cp\x3e\x3ca class\x3d"linkable" href\x3d"Help/Index/CFR" target\x3d"_blank"\x3e${webviewStrings.clickhere}\x3c/a\x3e ${webviewStrings.howToEnableCFRSettings}\x3c/p\x3e\r\n            \x3cdiv class\x3d"leftContainer doubleContent"\x3e\r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${webviewStrings.changeApproval}\x3c/legend\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"notEnoughSiteAdminsLabelForChangeApproval"\x3e\r\n                        \x3cdiv class\x3d"rcAlertIcon rcWarningIcon siteSettingsIcon"\x3e\x3c/div\x3e\r\n                        \x3clabel class\x3d"minimumSiteAdminsRequiredWarnText informationalText"\x3e${webviewStrings.minimumSiteAdminsRequired}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                        \x3clabel\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-attach-point\x3d"enforceChangeApprovalCheckBox"/\x3e\r\n                            ${webviewStrings.enforceChangeApproval}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                        \x3clabel class\x3d"nonPublicField" data-dojo-attach-point\x3d"approvalChangeRateLabel"\x3e\r\n                            ${webviewStrings.approvalPasswordChangeLabel}\r\n                        \x3c/label\x3e\r\n                        \x3cinput id\x3d"changeRateValidator" type\x3d"number" class\x3d"noMargin nonPublicField"\r\n                               name\x3d"approvalChangeRate" max\x3d"480" min\x3d"0" value\x3d"0"\r\n                               data-dojo-attach-point\x3d"approvalChangeRate"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d\'validator:dojox.validate.isInRange,\r\n                                    constraints:{ min: 0, max: 480 },\r\n                                    baseClass: "rcTextBox tripleDigit rcUserTextBox",\r\n                                    invalidMessage: "${errorStrings.approvalPasswordTimeoutOutOfRange}",\r\n                                    maxLength: 3,\r\n                                    required: true\'\x3e\r\n                        \x3clabel class\x3d"nonPublicField" data-dojo-attach-point\x3d"approvalChangeRateLabelMins"\x3e\r\n                            ${webviewStrings.approvalPasswordChangeMinLabel}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n\r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${webviewStrings.passwordExpiry}\x3c/legend\x3e\r\n                    \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                        \x3clabel\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-attach-point\x3d"enforcePasswordExpiry"\x3e\r\n                                ${webviewStrings.enforcePasswordExpiry}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                        \x3clabel class\x3d"nonPublicField"\r\n                               for\x3d"passwordExpiry"\x3e\r\n                            ${webviewStrings.passwordExpiresEvery}\r\n                        \x3c/label\x3e\r\n                        \x3cinput id\x3d"passwordExpiryValidator" type\x3d"number" class\x3d"noMargin nonPublicField"\r\n                            name\x3d"approvalChangeRate" max\x3d"9999" min\x3d"1"\r\n                            data-dojo-attach-point\x3d"passwordExpiry"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'validator:dojox.validate.isInRange,\r\n                                    constraints: { min: 1, max: 9999 },\r\n                                    baseClass: "rcTextBox tripleDigit rcUserTextBox",\r\n                                    invalidMessage: "${errorStrings.approvalChangeRateOutOfRangePassword}",\r\n                                    maxLength: 4,\r\n                                    required: true\'\x3e\r\n                        \x3clabel class\x3d"nonPublicField"\x3e\r\n                            ${webviewStrings.passwordExpiryDaysLabel}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n\r\n                \x3cfieldset data-dojo-attach-point\x3d"lockoutTypes"\x3e\r\n                    \x3clegend\x3e${webviewStrings.lockoutSettings}\x3c/legend\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"notEnoughSiteAdminsLabelForlockoutTypes"\x3e\r\n                        \x3clabel class\x3d"minimumSiteAdminsRequiredWarnText informationalText"\x3e${webviewStrings.minimumSiteAdminsRequired}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                        \x3clabel for\x3d"numLockoutAttempts" class\x3d"nonPublicField"\x3e\r\n                            ${webviewStrings.numLockoutAttempts}\r\n                        \x3c/label\x3e\r\n                        \x3cinput id\x3d"lockoutTimeValidator" type\x3d"number" class\x3d"noMargin nonPublicField"\r\n                               name\x3d"approvalChangeRate" max\x3d"99" min\x3d"1"\r\n                               data-dojo-attach-point\x3d"numLockoutAttempts"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d\'validator:dojox.validate.isInRange,\r\n                                                constraints: { min: 1, max: 99 },\r\n                                                baseClass: "rcTextBox doubleDigit rcUserTextBox",\r\n                                                invalidMessage: "${errorStrings.approvalChangeRateOutOfRangeLockout}",\r\n                                                maxLength: 2,\r\n                                                required: true\'\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"lockoutTypes"\x3e\r\n                        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"lockoutType" checked value\x3d0\r\n                                data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                data-dojo-attach-point\x3d"noLockoutType"\r\n                                data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'"\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"noLockoutLabel"\x3e\r\n                                ${webviewStrings.noLockout}\r\n                            \x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"lockoutType" value\x3d1\r\n                                data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                data-dojo-attach-point\x3d"fifteenMinLockoutType"\r\n                                data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"fifteenMinLockoutLabel"\x3e\r\n                                ${webviewStrings.fifteenMinLockout}\r\n                            \x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"lockoutType" value\x3d2\r\n                                data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                data-dojo-attach-point\x3d"adminLockoutType"\r\n                                data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"adminLockoutLabel"\x3e\r\n                                ${webviewStrings.adminMinLockout}\r\n                            \x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n\r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e\r\n                        \x3clabel\x3e\r\n                             \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-attach-point\x3d"watermarkEnable"/\x3e\r\n                            ${webviewStrings.watermark}\r\n                        \x3c/label\x3e\r\n                    \x3c/legend\x3e\r\n                    \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                        \x3cdiv class\x3d"informationalText uploaderInfo"\x3e\r\n                            ${!webviewStrings.watermarkHint}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"cbItemWrapper"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"galleryUpdater"\r\n                            data-dojo-type\x3d"webview/admin/widget/GalleryUpdater"\r\n                            data-dojo-props\x3d\'uploaderPath: "${_path}/UploadLogo",\r\n                                path: "${_path}",\r\n                                siteId: ${site},\r\n                                widget: "${widget}",\r\n                                showDefaultButton: true,\r\n                                showClearButton: false,\r\n                                galleryImageClass: "watermarkIcon"\'\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"certificateSelector" data-dojo-type\x3d"webview/admin/sites/SecurityCertificateSelector"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/sites/templates/securityCertificateSelector.html":'\x3cdiv class\x3d"security-certificate-selector"\x3e\r\n    \x3cfieldset\x3e\r\n        \x3clegend class\x3d"certificate-label"\x3e${securityCertificateStrings.securityCertificate}\x3c/legend\x3e\r\n        \x3cdiv class\x3d"selector-container"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"certificateName"\x3e\x3c/label\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"certificateDialogButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                iconClass:\'rcIcon certificateIcon\',\r\n                label: \'${securityCertificateStrings.certificate}\',\r\n                title: \'${securityCertificateStrings.certificate}\'"\r\n                data-dojo-attach-event\x3d"onClick: _openDialog"\x3e\r\n            \x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:webview/admin/sites/templates/certificateStoreDialog.html":'\x3cdiv class\x3d"dijitDialog certificate-store-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e${securityCertificateStrings.selectCertificate}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"grid-container"\r\n             data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"button-wrapper"\x3e\r\n            \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n                \x3cbutton data-dojo-attach-point\x3d"okActionButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon",\r\n                    label: "${rcStrings.btnOk}"\'\r\n                    data-dojo-attach-event\x3d"onClick: _okClicked"\x3e\x3c/button\x3e\r\n                \x3cbutton data-dojo-attach-point\x3d"cancelActionButton"\r\n                        data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                        iconClass: "rcIcon cancelIcon",\r\n                        label: "${rcStrings.btnCancel}"\'\r\n                        data-dojo-attach-event\x3d"onClick: hide"\x3e\x3c/button\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/sites/templates/smtpConfig.html":'\x3cfieldset class\x3d"${baseClass} smtp-config"\x3e\r\n    \x3clegend\x3e${smtpStrings.smtp}\x3c/legend\x3e\r\n\r\n    \x3cdiv class\x3d"informationalText"\x3e\r\n        ${!webviewStrings.smtpDescription}\r\n    \x3c/div\x3e\r\n\r\n    \x3cspan class\x3d" requiredText requiredNote invisible" data-dojo-attach-point\x3d"requiredNode"\x3e* ${webviewStrings.required}\x3c/span\x3e\r\n\r\n    \x3cdiv class\x3d\'form-group checkbox-item\'\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                 data-dojo-type\x3d"dijit/form/CheckBox"\r\n                 data-dojo-attach-point\x3d"enableSMTP"/\x3e\r\n            ${webviewStrings.enableSMTP}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group server"\x3e\r\n        \x3clabel class\x3d"form-label" data-dojo-attach-point\x3d"serverLabel"\x3e${smtpStrings.server}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"serverPresets"\r\n                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                data-dojo-props\x3d\'baseClass: "rcSelectBox form-input serverDropdown",\r\n                autocomplete: false\'\x3e\r\n        \x3c/select\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n        \x3clabel class\x3d"form-label" data-dojo-attach-point\x3d"addressLabel"\x3e${smtpStrings.serverAddress}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n        \x3cinput type\x3d"text"\r\n               data-dojo-attach-point\x3d"serverAddressTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'form-input rcTextBox serverAddress\',\r\n               required: true" /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n        \x3clabel class\x3d"form-label" data-dojo-attach-point\x3d"portLabel"\x3e${smtpStrings.portNumber}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n        \x3cinput type\x3d"number" min\x3d"1" max\x3d"65535"\r\n               data-dojo-attach-point\x3d"portTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'validator:dojox.validate.isInRange,\r\n               constraints: {min: 1, max: 65535},\r\n               invalidMessage: "${errorStrings.invalidPort}",\r\n               baseClass: "form-input rcTextBox port-input",\r\n               required: true\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n        \x3clabel class\x3d"form-label"\x3e${smtpStrings.securityType}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n        \x3cdiv class\x3d"security-type-radios"\x3e\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                    \x3cinput type\x3d"radio" name\x3d"securityType" id\x3d"none" checked value\x3d"0"\r\n                           data-dojo-type\x3d"dijit/form/RadioButton"\r\n                           data-dojo-attach-point\x3d\'noneSecurityType\'\r\n                           data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                    ${rcStrings.none}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                    \x3cinput type\x3d"radio" name\x3d"securityType" id\x3d"ssl" value\x3d"1"\r\n                           data-dojo-type\x3d"dijit/form/RadioButton"\r\n                           data-dojo-attach-point\x3d\'sslSecurityType\'\r\n                           data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                    ${smtpStrings.ssl}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                    \x3cinput type\x3d"radio" name\x3d"securityType" id\x3d"tls" value\x3d"2"\r\n                           data-dojo-type\x3d"dijit/form/RadioButton"\r\n                           data-dojo-attach-point\x3d\'tlsSecurityType\'\r\n                           data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                    ${smtpStrings.tls}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n        \x3clabel class\x3d"form-label" data-dojo-attach-point\x3d"emailLabel"\x3e${smtpStrings.senderEmail}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n        \x3cinput type\x3d"text"\r\n               data-dojo-attach-point\x3d"senderEmailTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'form-input rcTextBox senderEmail\',\r\n               required: true" /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n        \x3clabel class\x3d"form-label" data-dojo-attach-point\x3d"usernameLabel"\x3e${webviewStrings.userName}:\x3c/label\x3e\r\n        \x3cinput type\x3d"text" name\x3d"smtp-user" placeholder\x3d"${smtpStrings.optionalPlaceholder}" value\x3d"" autocomplete\x3d"off"\r\n               data-dojo-attach-point\x3d"usernameTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'form-input rcTextBox smtp-user\'" /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n        \x3clabel class\x3d"form-label" data-dojo-attach-point\x3d"passwordLabel"\x3e${rcStrings.password}:\x3c/label\x3e\r\n        \x3cinput type\x3d"password" name\x3d"smtp-pass" placeholder\x3d"${smtpStrings.optionalPlaceholder}"\r\n               data-dojo-attach-point\x3d"passwordTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'form-input passwordField\',\r\n               type: \'password\',\r\n               autocomplete: \'new-password\'" /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"smtp-button-container"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"testButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton smtpTest",\r\n                iconClass: "rcIcon testConnIcon",\r\n                label: "${rcStrings.test}"\'\x3e${rcStrings.test}\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"manageCertificates"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon certificateIcon",\r\n                label: "${webviewStrings.manageCertificates}"\'\x3e${webviewStrings.manageCertificates}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/fieldset\x3e\r\n',
"url:webview/widget/templates/ManageCertificatesDialog.html":'\x3cdiv class\x3d"dijitDialog manage-certificates-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 535px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3c!-- Content will be here! --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"rootCertificateContainer"\x3e\r\n            \x3cdiv class\x3d"certificate-entry"\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"rootCertLabel"\x3e${webviewStrings.remoteAccessCertificateLabel}:\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"rootCertTB"\r\n                       data-dojo-type\x3d"dijit/form/TextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox certificate-input\',\r\n                       readOnly: true"/\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"rootUploader"\x3e\x3c/span\x3e\r\n\r\n                \x3cbutton data-dojo-attach-point\x3d"clearRoot"\r\n                        data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-props\x3d\'baseClass: "webviewButton circularButton noLabel",\r\n                        iconClass: "webviewIcon deleteIcon"\'\x3e\x3c/button\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\x3c/label\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"rootExpiry"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- NLS If we end up supporting --\x3e\r\n        \x3c!-- Mutual Authentication stuff\r\n        \x3cdiv class\x3d"hidden"\r\n             data-dojo-attach-point\x3d"clientCertificateContainer"\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3eClient Certificate\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"clientCertTB"\r\n                       data-dojo-type\x3d"dijit/form/TextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox certificate-input\',\r\n                       readOnly: true"/\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"clientUploader"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\x3c/label\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"clientExpiry"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hidden"\r\n             data-dojo-attach-point\x3d"privateKeyContainer"\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3ePrivate Key\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"privateKeyTB"\r\n                       data-dojo-type\x3d"dijit/form/TextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox certificate-input\',\r\n                       readOnly: true"/\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"privateKeyUploader"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        --\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/ActiveDirectoryConfig.html":'\x3cfieldset\x3e\r\n    \x3clegend\x3e${webviewStrings.activeDirectory}\x3c/legend\x3e\r\n    \x3cspan class\x3d"requiredText requiredNote invisible" data-dojo-attach-point\x3d"requiredNode"\x3e* ${webviewStrings.required}\x3c/span\x3e\r\n\r\n    \x3cdiv class\x3d\'form-group checkbox-item\'\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                   data-dojo-attach-point\x3d"enabledActive"/\x3e\r\n            ${webviewStrings.enableActive}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d\'form-group checkbox-item\'\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                   data-dojo-attach-point\x3d"enableSSL"/\x3e\r\n            ${webviewStrings.enableSSL}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n\r\n        \x3clabel class\x3d"form-label" for\x3d"${id}_provider"\r\n               data-dojo-attach-point\x3d"providerDirectoryLabel"\x3e${webviewStrings.provider}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n\r\n               \x3cinput id\x3d"${id}_provider" name\x3d"provider" maxlength\x3d"256"\r\n                      value\x3d"LDAP://LDAP SERVER"\r\n                      data-dojo-attach-point\x3d"providerDirectoryTB"\r\n                      data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-props\x3d"baseClass: \'form-input rcTextBox ADProviderField\', required: true" /\x3e\r\n               \x3cspan class\x3d"icon-border linkable" data-dojo-attach-point\x3d"addLDAPServer"\x3e\r\n                   \x3cspan class\x3d"ldapIcon svg-add-icon" \x3e\x3c/span\x3e\r\n               \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cspan data-dojo-attach-point\x3d"redundantContainer"\x3e\x3c/span\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n\r\n        \x3clabel class\x3d"form-label" for\x3d"${id}_domainName"\r\n               data-dojo-attach-point\x3d"domainLabel"\x3e${webviewStrings.domainName}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n\r\n               \x3cinput id\x3d"${id}_domainName" name\x3d"domainName" maxlength\x3d"64"\r\n                      value\x3d"LDAP DOMAIN"\r\n                      data-dojo-attach-point\x3d"domainTB"\r\n                      data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-props\x3d"constraints:{ maxChars:64 },\r\n                      baseClass: \'form-input rcTextBox domainNameField\', required: true" /\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n\r\n        \x3clabel class\x3d"form-label" for\x3d"${id}_domainUser"\r\n               data-dojo-attach-point\x3d"domainUserLabel"\x3e${webviewStrings.domainUser}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n\r\n               \x3cinput id\x3d"${id}_domainUser" name\x3d"domainUser" autocomplete\x3d"new-user"\r\n                      data-dojo-attach-point\x3d"domainUserTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'form-input domainUserField\', required: true" /\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"form-group"\x3e\r\n\r\n        \x3clabel class\x3d"form-label" for\x3d"${id}_domainPass"\r\n               data-dojo-attach-point\x3d"domainPassLabel"\x3e${webviewStrings.domainPass}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n\r\n               \x3cinput id\x3d"${id}_domainPass" name\x3d"domainPass" autocomplete\x3d"new-password" type\x3d"password"\r\n                      data-dojo-attach-point\x3d"domainPassTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'form-input domainPasswordField\', required: true" /\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n\x3c/fieldset\x3e',
"url:webview/admin/widget/templates/ActiveDirectoryProvider.html":'\x3cdiv\x3e\r\n    \x3clabel class\x3d"form-label" for\x3d"${id}_provider"\r\n           data-dojo-attach-point\x3d"adProviderLabel"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"labelContainer"\x3e${label}\x3c/span\x3e:\r\n        \x3cspan class\x3d"requiredText mandatory hidden" data-dojo-attach-point\x3d"requiredIndicator"\x3e*\x3c/span\x3e\r\n    \x3c/label\x3e\r\n\r\n    \x3cinput id\x3d"${id}_provider" name\x3d"provider" maxlength\x3d"256"\r\n           value\x3d"${value}"\r\n           data-dojo-attach-point\x3d"adProviderTB"\r\n           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n           data-dojo-props\x3d\'baseClass: "form-input rcTextBox ADProviderField",\r\n           value: "${value}", required: ${isRequired}\' /\x3e\r\n\r\n    \x3cspan class\x3d"icon-border linkable" data-dojo-attach-point\x3d"deleteProvider"\x3e\r\n        \x3cspan class\x3d"ldapIcon svg-delete-icon" \x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/HelpLink.html":'\x3cspan\x3e\r\n    \x3cspan class\x3d"help-link" title\x3d"${webviewStrings.moreInfo}"\r\n          data-dojo-attach-point\x3d"helpLinkContainer"\r\n          data-dojo-attach-event\x3d"onclick: onClick" \x3e\r\n        \x3cspan data-dojo-attach-point\x3d"labelNode"\x3e${label}:\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"requiredText hidden" data-dojo-attach-point\x3d"requiredNode"\x3e *\x3c/span\x3e\r\n\x3c/span\x3e',"url:webview/admin/sites/templates/addSite.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites sites addPage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"contentArea"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n         class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3cdiv  data-dojo-attach-point\x3d"addContainer"\x3e\r\n\r\n            \x3c!--Site name field is hidden by default.--\x3e\r\n            \x3cp class\x3d"wizard-prompt hidden" data-dojo-attach-point\x3d"promptNode"\x3e${webviewStrings.sitesPrompt}\x3c/p\x3e\r\n\r\n            \x3cdiv class\x3d\'fieldAndLabel\'\x3e\r\n                \x3cspan class\x3d"rcTextBoxLabel requiredText requiredNote" \x3e* ${webviewStrings.required}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel topItem" data-dojo-attach-point\x3d"siteNameDiv"\x3e\r\n                \x3cspan class\x3d"rcTextBoxLabel " data-dojo-attach-point\x3d"dataLabel"\x3e${webviewStrings.siteName}: \x3cspan class\x3d"requiredText mandatory"\x3e*\x3c/span\x3e\r\n                \x3c/span\x3e\r\n\r\n                \x3cspan data-dojo-attach-point\x3d"nameTB"\r\n                      data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-props\x3d"baseClass: \'rcTextBox websiteNameField\',\r\n                      required: true,\r\n                      maxLength: 50"\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                \x3cspan class\x3d"rcTextBoxLabel"\x3e\r\n                    \x3cspan  class\x3d"link"\r\n                           data-dojo-attach-point\x3d"baseUrlLabel"\r\n                           data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                           data-dojo-props\x3d\'helpText: "${webviewStrings.baseUrlHelp}",\r\n                           label: "${webviewStrings.baseSiteUrl}", required: true\'\x3e\r\n                    \x3c/span\x3e\r\n                \x3c/span\x3e\r\n\r\n                \x3cspan data-dojo-attach-point\x3d"baseUrlTB"\r\n                      data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-props\x3d"baseClass: \'rcTextBox\', maxLength: 255, required: true"\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                \x3cspan class\x3d"rcTextBoxLabel"\x3e\r\n                    \x3cspan  class\x3d"link"\r\n                           data-dojo-attach-point\x3d"upName"\r\n                           data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                           data-dojo-props\x3d\'helpText: "${webviewStrings.urlPathHelp}",\r\n                           label: "${webviewStrings.urlPath}"\'\x3e\r\n                    \x3c/span\x3e\r\n                \x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"urlPathTB"\r\n                      data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-props\x3d"baseClass: \'rcTextBox siteUrlPathField\', maxLength: 255, required: true"\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel urlPathLinkContainer"\x3e\r\n                \x3cspan class\x3d"rcTextBoxLabel link"\r\n                      data-dojo-attach-point\x3d"siteUrlLabel"\r\n                      data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                      data-dojo-props\x3d\'helpText: "${webviewStrings.siteUrlHelp}",\r\n                      label: "${webviewStrings.siteUrl}"\'\x3e\r\n                \x3c/span\x3e\r\n                \x3cspan class\x3d"rcLabelSelectable link" data-dojo-attach-point\x3d"urlPathText"\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"wizardNextContainer" class\x3d"fieldAndLabel wizard-field-and-label hidden"\x3e\r\n                \x3cspan class\x3d"rcTextBoxLabel"\x3e\x26nbsp;\x3c/span\x3e\r\n                \x3ca href\x3d"#" class\x3d\'wizard-external-next-link wizard-next-link\' data-dojo-attach-point\x3d"wizardNextLink" data-dojo-attach-event\x3d"onclick: _onClickWizardNext" title\x3d"${webviewStrings.nextStep}"\x3e\r\n                    \x3cspan class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"nextLabel" class\x3d"wizard-next-label"\x3e${webviewStrings.next}\x3c/span\x3e\r\n                \x3c/a\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/systems/templates/systems.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites systems listPage" style\x3d"width:100%;"\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentArea" \r\n\t\t data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n\t\t data-dojo-props\x3d"baseClass: \'webviewContentPane\'"\x3e\r\n\r\n\t\t\x3c!-- add edit DELETE SYSTEMS --\x3e\r\n\t\t\x3cdiv class\x3d"columnedFormContainer"\r\n\t\t\t data-dojo-attach-point\x3d\'listContainer\'\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"leftContainer" data-dojo-attach-point\x3d\'leftContainer\'\x3e\r\n\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"_multiSelect" \r\n\t\t\t\t\t data-dojo-type\x3d"webview/widget/MultiSelectBox"\r\n\t\t\t\t\t data-dojo-props\x3d"fieldLabel: \'Systems:\'"\x3e\r\n\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel hiddenButtons"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!-- For Padding Purposes --\x3e\r\n\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"systemInfo" class\x3d"informationalText"\x3e\x3c/div\x3e\r\n\r\n\t\t\t\t\t\x3cdiv class\x3d"" style\x3d\'margin-top: .5em\'\x3e                    \r\n                        \x3cdiv data-dojo-attach-point\x3d"editButton"\r\n\t\t\t\t\t\t\t data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t\t data-dojo-props\x3d"baseClass: \'webviewButton  editSystem\', \r\n\t\t\t\t\t\t\t \'class\': \'hidden\',\r\n\t\t\t\t\t\t\t iconClass: \'rcIcon editSystemIcon\', \r\n\t\t\t\t\t\t\t label: \'Edit\'"\r\n\t\t\t\t\t\t\t data-dojo-attach-event\x3d"onClick: _editItem"\x3e\r\n\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"deleteButton"\r\n\t\t\t\t\t\t\t data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t\t data-dojo-props\x3d"baseClass: \'webviewButton  deleteSystems\',\r\n\t\t\t\t\t\t\t \'class\': \'hidden\',\r\n\t\t\t\t\t\t\t iconClass: \'rcIcon deleteSystemsIcon\', \r\n\t\t\t\t\t\t\t label: \'Delete Systems\'"\r\n\t\t\t\t\t\t\t data-dojo-attach-event\x3d"onClick: _onDeleteItem"\x3e\r\n\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"addButton"\r\n\t\t\t\t\t\t\t data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t\t\t\t\t data-dojo-props\x3d"baseClass: \'webviewButton addSystem\', \r\n\t\t\t\t\t\t\t iconClass: \'rcIcon addSystemIcon\', \r\n\t\t\t\t\t\t\t label: \'ADD\'"\r\n\t\t\t\t\t\t\t data-dojo-attach-event\x3d"onClick: _goToAdd"\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!-- END add edit DELETE SYSTEMS --\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/systems/templates/system.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites systems singlePage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"toolbar"\r\n         data-dojo-type\x3d"webview/admin/systems/SystemToolbar"\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"system-settings" data-dojo-attach-point\x3d"propertiesContainer"\x3e\r\n        \x3cdiv class\x3d"left-side"\x3e\r\n            \x3cfieldset data-dojo-attach-point\x3d"connectionSettings"\r\n                      data-dojo-type\x3d"webview/admin/systems/settingsComponents/ConnectionSettings"\r\n                      data-dojo-props\x3d"baseClass: \'system-setting-component\'"\x3e\x3c/fieldset\x3e\r\n\r\n            \x3cfieldset data-dojo-attach-point\x3d"archiveSettings"\r\n                      data-dojo-type\x3d"webview/admin/systems/settingsComponents/ArchiveSettings"\r\n                      data-dojo-props\x3d"baseClass: \'system-setting-component\', system: ${system}"\x3e\x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"right-side" data-dojo-attach-point\x3d"rightSideContainer"\x3e\r\n            \x3cfieldset data-dojo-attach-point\x3d"advancedSettings"\r\n                      data-dojo-type\x3d"webview/admin/systems/settingsComponents/AdvancedSettings"\r\n                      data-dojo-props\x3d"baseClass: \'system-setting-component\'"\x3e\x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/ProgressDialog.html":'\x3cdiv class\x3d"dijitDialog webview-progress-dialog progress"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n          class\x3d"dijitDialogCloseIcon"\r\n          data-dojo-attach-event\x3d"ondijitclick: onCancel"\r\n          title\x3d"${webviewAllStrings.close}"\r\n          role\x3d"button"\r\n          tabindex\x3d"0"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeText"\r\n              class\x3d"closeText"\r\n              title\x3d"${webviewAllStrings.close}"\x3ex\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n         class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"cleanup-title"\x3e\r\n            \x3cspan class\x3d"title-image rcAlertIcon rcInfoIcon" data-dojo-attach-point\x3d"titleImage"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"title-text" data-dojo-attach-point\x3d"titleText"\x3e${errorStrings.operationInProgress}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"cleanup-progress-details"\x3e\r\n            \x3cdiv class\x3d"left"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"progress-image preloader"\x3e\r\n                \x3cdiv class\x3d"cog1-screen"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog2-screen"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog3-screen"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"right"\x3e\x3c/div\x3e\r\n            \x3cspan class\x3d"progress-text" data-dojo-attach-point\x3d"progressText"\x3e\x3c/span\x3e\r\n            \x3cspan style\x3d"max-width: 400px;text-align: center;" class\x3d"progress-remarks" data-dojo-attach-point\x3d"progressRemark"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/systems/settingsComponents/templates/AdvancedSettings.html":'\x3cfieldset class\x3d"${baseClass} advanced-settings" data-dojo-attach-point\x3d"advancedSettingsContainer"\x3e\r\n    \x3clegend\x3e${webviewStrings.advancedBacnet}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"controllerIdContainer"\x3e\r\n        \x3clabel for\x3d"${id}_controlID" class\x3d"rcTextBoxLabel"\r\n               data-dojo-attach-point\x3d"controllerIDLabel"\x3e${webviewStrings.controllerIDLabel}: \x3cspan class\x3d"requiredText mandatory hidden" data-dojo-attach-point\x3d"controllerIdRequiredNote"\x3e*\x3c/span\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_controlID" name\x3d"controlID" type\x3d"number" min\x3d"1" max\x3d"4194303" step\x3d"1"\r\n               data-dojo-attach-point\x3d"controllerIDTB"\r\n               data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n               data-dojo-props\x3d\'constraints: {min: 1, max: 4194303, fractional: false, pattern: "#######"},\r\n               maxLength: 7,\r\n               invalidMessage: "${errorStrings.invalidController}",\r\n               baseClass: "rcTextBox controllerIDField",\r\n               placeHolder: "(auto)"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"webviewIDContainer"\x3e\r\n        \x3clabel for\x3d"${id}_webviewID" class\x3d"rcTextBoxLabel"\r\n               data-dojo-attach-point\x3d"webviewIDLabel"\x3e${!webviewStrings.webviewIDLabel}:\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_webviewID" name\x3d"webviewID" type\x3d"number" min\x3d"1" max\x3d"4194303" step\x3d"1"\r\n               data-dojo-attach-point\x3d"webviewIDTB"\r\n               data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n               data-dojo-props\x3d\'constraints: {min: 1, max: 4194303, fractional: false, pattern: "#######"},\r\n               maxLength: 7,\r\n               invalidMessage: "${errorStrings.invalidWebview}",\r\n               baseClass: "rcTextBox", required: false,\r\n               placeHolder: "(auto)"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"bacnetPortContainer"\x3e\r\n        \x3clabel for\x3d"fixedPort" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"fixedPortLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.fixedPortLabelHelp}",\r\n               label: "${webviewStrings.fixedBACnetPort}"\'\x3e\x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"field-input fixed-port-input" data-dojo-attach-point\x3d"fixedBACnetPortTBCBContainer"\x3e\r\n            \x3cinput id\x3d"${id}_fixedPort" name\x3d"portNumber" type\x3d"number" autocomplete\x3d"on" value\x3d"0" min\x3d"0" max\x3d"65535" step\x3d"1"\r\n                   data-dojo-attach-point\x3d"fixedBACnetPortTB"\r\n                   data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                   data-dojo-props\x3d\'constraints: {min: 0, max: 65535, fractional: false, pattern: "#####"},\r\n                   maxLength: 5,\r\n                   invalidMessage: "${errorStrings.invalidPort}",\r\n                   baseClass: "rcTextBox numericBox portTextbox"\' /\x3e\r\n            \x3cspan class\x3d"checkbox-and-label" data-dojo-attach-point\x3d"fixedBACnetPortCBContainer"\x3e\r\n                \x3cinput id\x3d"${id}_enabledFixedPort" type\x3d"checkbox"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox"\r\n                       data-dojo-attach-point\x3d"enablefixedBACnetPort" /\x3e\r\n\r\n                \x3clabel for\x3d"${id}_enabledFixedPort" data-dojo-attach-point\x3d"fixedPortCBLabel"\x3e\r\n                    ${webviewStrings.enableStaticPort}\r\n                \x3c/label\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cspan class\x3d"checkbox-and-label enabled-file-server-container"\r\n          data-dojo-attach-point\x3d"enabledFileServerContainer"\x3e\r\n        \x3cinput id\x3d"${id}_enabledFileServer"\r\n               type\x3d"checkbox"\r\n               data-dojo-type\x3d"dijit/form/CheckBox"\r\n               data-dojo-attach-point\x3d"enabledFileServer" /\x3e\r\n\r\n        \x3clabel for\x3d"${id}_enabledFileServer"\r\n               data-dojo-attach-point\x3d"enabledFileServerCBLabel"\x3e\r\n               ${webviewStrings.enableFileServer}\r\n        \x3c/label\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label"\r\n         data-dojo-attach-point\x3d"fileServerDeviceIDContainer"\x3e\r\n        \x3clabel for\x3d"${id}_fileSyncID" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"fileSyncIDLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.fileSyncIDHelpText}",\r\n               label: "${webviewStrings.fileSyncIDLabel}"\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_fileSyncID" name\x3d"fileSyncID" type\x3d"number" min\x3d"1" max\x3d"4194303" step\x3d"1"\r\n               data-dojo-attach-point\x3d"fileSyncIDTB"\r\n               data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n               data-dojo-props\x3d\'constraints: {min: 1, max: 4194303, fractional: false, pattern: "#######"},\r\n               maxLength: 7,\r\n               invalidMessage: "${errorStrings.invalidFileSync}",\r\n               baseClass: "rcTextBox", required: false,\r\n               placeHolder: "(auto)"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"fileServerNetworkNumberContainer"\x3e\r\n        \x3clabel for\x3d"${id}_fileServerNetworkNum" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"fileServerNetworkNumLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.fileServerNetworkNumHelpText}",\r\n               label: "${webviewStrings.fileServerNetworkNumLabel}"\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_fileServerNetworkNum" name\x3d"fileServerNetworkNum" type\x3d"number" min\x3d"0" max\x3d"65535" step\x3d"1"\r\n               data-dojo-attach-point\x3d"fileServerNetworkNumTB"\r\n               data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n               data-dojo-props\x3d\'constraints: {min: 0, max: 65535, fractional: false, fractional: false, pattern: "#####"},\r\n               maxLength: 5,\r\n               invalidMessage: "${errorStrings.invalidFileServerNetworkNum}",\r\n               baseClass: "rcTextBox",\r\n               placeHolder: "(auto)"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cfieldset class\x3d"asdu-settings" data-dojo-attach-point\x3d"apduSettingsContainer"\x3e\r\n        \x3clegend\x3eAPDU\x3c/legend\x3e\r\n        \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"apduTimeout"\x3e\r\n            \x3clabel for\x3d"${id}_timeout" class\x3d"rcTextBoxLabel" for\x3d"timeout"\r\n                   data-dojo-attach-point\x3d"apduTimeoutLabel"\x3e${webviewStrings.apduTimeout}:\x3c/label\x3e\r\n\r\n            \x3cinput id\x3d"${id}_timeout" name\x3d"timeout" type\x3d"number" min\x3d"500" max\x3d"30000" step\x3d"1"\r\n                   data-dojo-attach-point\x3d"apduTimeoutTB"\r\n                   data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                   data-dojo-props\x3d\'constraints: {min: 500, max: 30000, fractional: false, pattern: "#####"},\r\n                   maxLength: 5,\r\n                   invalidMessage: "${errorStrings.invalidTimeout}",\r\n                   baseClass: "rcTextBox numericBox", required: true\' /\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"apduSegmentTimeout"\x3e\r\n            \x3clabel for\x3d"${id}_seg" class\x3d"rcTextBoxLabel" for\x3d"seg"\r\n                   data-dojo-attach-point\x3d"apduSegmentLabel"\x3e${webviewStrings.apduSeg}:\x3c/label\x3e\r\n\r\n            \x3cinput id\x3d"${id}_seg" name\x3d"seg" type\x3d"number" min\x3d"500" max\x3d"30000" step\x3d"1"\r\n                   data-dojo-attach-point\x3d"apduSegmentTB"\r\n                   data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                   data-dojo-props\x3d\'constraints: {min: 500, max: 30000, fractional: false, pattern: "#####"},\r\n                   maxLength: 5,\r\n                   invalidMessage: "${errorStrings.invalidSegment}",\r\n                   baseClass: "rcTextBox numericBox", required: true\' /\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"apduRetries"\x3e\r\n            \x3clabel for\x3d"${id}_retries" class\x3d"rcTextBoxLabel" for\x3d"retries"\r\n                   data-dojo-attach-point\x3d"apduRetriesLabel"\x3e${webviewStrings.apduRetries}:\x3c/label\x3e\r\n\r\n            \x3cinput id\x3d"${id}_retries" name\x3d"retries" type\x3d"number" min\x3d"0" max\x3d"5" step\x3d"1"\r\n                   data-dojo-attach-point\x3d"apduRetriesTB"\r\n                   data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                   data-dojo-props\x3d\'constraints: {min: 0, max: 5, fractional: false, pattern: "#"},\r\n                   maxLength: 1,\r\n                   invalidMessage: "${errorStrings.invalidRetries}",\r\n                   baseClass: "rcTextBox numericBox", required: true\' /\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\x3c/fieldset\x3e',
"url:webview/admin/systems/settingsComponents/templates/ArchiveSettings.html":'\x3cfieldset class\x3d"${baseClass} archive-settings"\x3e\r\n    \x3clegend\x3e${webviewStrings.archiveProperties}\x3c/legend\x3e\r\n    \x3cp class\x3d"wizard-prompt hidden" data-dojo-attach-point\x3d"promptNode" \x3e${!webviewStrings.archivePropertiesPrompt}\x3c/p\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label"\x3e\r\n        \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"${id}_enableArchiveCB"\r\n               data-dojo-type\x3d"dijit/form/CheckBox"\r\n                   data-dojo-attach-point\x3d"enableRC"/\x3e\r\n        \x3clabel for\x3d"${id}_enableArchiveCB"\x3e${webviewStrings.enableRCConn}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"serverName"\x3e\r\n        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"${id}_serverName"\r\n               data-dojo-attach-point\x3d"serverNameLabel"\x3e${webviewStrings.sqlServerName}:\x3c/label\x3e\r\n        \x3cinput id\x3d"${id}_serverName" name\x3d"serverName"\r\n               data-dojo-attach-point\x3d"serverNameTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\' invalidMessage: "${errorStrings.emptyServer}",\r\n               baseClass: "rcTextBox", required: false\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"databaseName"\x3e\r\n        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"${id}_databaseName"\r\n               data-dojo-attach-point\x3d"dbNameLabel"\x3e${webviewStrings.dbName}:\x3c/label\x3e\r\n        \x3cinput id\x3d"${id}_databaseName" name\x3d"dbName"\r\n               data-dojo-attach-point\x3d"dbNameTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox\',  required: false" /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"username"\x3e\r\n        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"${id}_databaseUser"\r\n               data-dojo-attach-point\x3d"dbUsernameLabel"\x3e${webviewStrings.userName}:\x3c/label\x3e\r\n        \x3cinput id\x3d"${id}_databaseUser" name\x3d"dbUser"\r\n               data-dojo-attach-point\x3d"dbUsernameTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n               invalidMessage: "${errorStrings.loginUserEmpty}",\r\n               required: false\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"password"\x3e\r\n        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"${id}_databasePass"\r\n               data-dojo-attach-point\x3d"dbPassLabel"\x3e${webviewStrings.password}:\x3c/label\x3e\r\n        \x3cinput id\x3d"${id}_databasePass" name\x3d"dbPass"\r\n               data-dojo-attach-point\x3d"dbPassTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox outgoing", type: "password",\r\n               invalidMessage: "${errorStrings.loginPassEmpty}",\r\n               required: false\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label testConnectionButton"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"testConnectionButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'baseClass: "webviewButton testConnection",\r\n              iconClass: "rcIcon testConnIcon",\r\n              label: "${webviewStrings.testConnButton}"\'\r\n              data-dojo-attach-event\x3d"onClick: _testConnection"\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"cancelTestButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'baseClass: "webviewButton testConnection",\r\n              iconClass: "waiting webviewCommitButton",\r\n              label: "${webviewStrings.rcbCancel}"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n    \x3c/div\x3e\r\n\x3c/fieldset\x3e',
"url:webview/admin/systems/settingsComponents/templates/ConnectionSettings.html":'\x3cfieldset class\x3d"${baseClass} connection-settings"\x3e\r\n    \x3clegend\x3e${webviewStrings.systemProperties}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"field-and-label", data-dojo-attach-point\x3d"IPAddressContainer"\x3e\r\n\r\n        \x3clabel for\x3d"ipAddress" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"ipLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.systemIPInfo}",\r\n               label: "${webviewStrings.systemIP}", required: true\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"ipAddress" name\x3d"ipAddress"\r\n               data-dojo-attach-point\x3d"ipTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'required: true,\r\n               baseClass: "rcTextBox ipAddressField"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label", data-dojo-attach-point\x3d"protocolTypeContainer"\x3e\r\n        \x3cspan class\x3d"rcTextBoxLabel"\r\n              data-dojo-attach-point\x3d"protocolLabel"\x3e${webviewStrings.protocolTypeLabel}:\x3c/span\x3e\r\n\r\n        \x3cdiv class\x3d"radioButtonContainer"\r\n             data-dojo-attach-point\x3d"protocolTypes"\x3e\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput id\x3d"bacnet" type\x3d"radio" name\x3d"protocolType" checked value\x3d"bacnet"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"bacnetProtocolType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"bacnet" class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"bacnetLabel"\x3e${webviewStrings.bacnet}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput id\x3d"rcp" type\x3d"radio" name\x3d"protocolType" value\x3d"rcp"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"rcpProtocolType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"rcp" class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"rcpLabel"\x3e${webviewStrings.rcp}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput id\x3d"dual" type\x3d"radio" name\x3d"protocolType" value\x3d"dual"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"dualProtocolType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"dual" class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"dualLabel"\x3e${webviewStrings.dual}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput id\x3d"remote" type\x3d"radio" name\x3d"protocolType" value\x3d"remote"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"remoteProtocolType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"remote" class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"remoteLabel"\x3e${webviewStrings.remote}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"portContainer"\x3e\r\n        \x3clabel for\x3d"portNumber" class\x3d"rcTextBoxLabel"\r\n               data-dojo-attach-point\x3d"portLabel"\x3e${webviewStrings.portLabel}:\x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"portTBWrapper" data-dojo-attach-point\x3d"portTBWrapperContainer"\x3e\r\n            \x3cinput id\x3d"portNumber" name\x3d"portNumber" type\x3d"number" value\x3d"47808" min\x3d"1" max\x3d"65535" step\x3d"1"\r\n                   data-dojo-attach-point\x3d"portTB"\r\n                   data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                   data-dojo-props\x3d\'constraints: {min: 1, max: 65535, fractional: false, pattern: "#####"},\r\n                   maxLength: 5,\r\n                   rangeMessage: "${errorStrings.invalidPort}",\r\n                   baseClass: "rcTextBox numericBox BIPPortField"\' /\x3e\r\n            \x3cdiv class\x3d"bbmd-container" data-dojo-attach-point\x3d"bbmdContainer"\x3e\r\n                \x3cinput id\x3d"bbmdCheckbox" type\x3d"checkbox"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox"\r\n                    data-dojo-attach-point\x3d"bbmd"/\x3e\r\n                \x3clabel for\x3d"bbmdCheckbox"\x3e\r\n                    ${webviewStrings.forceBBMD}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"systemAccessUsernameContainer"\x3e\r\n        \x3clabel for\x3d"loginUser" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"sysNameLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.systemAccessUserHelp}",\r\n               label: "${webviewStrings.systemAccessUser}", required: false\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"loginUser" name\x3d"loginUser"\r\n               title\x3d"${!webviewStrings.systemAccessUserHelp}"\r\n               data-dojo-attach-point\x3d"loginTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox usernameField", type: "password",\r\n               invalidMessage: "${errorStrings.loginUserEmpty}"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"systemAccessPasswordContainer"\x3e\r\n        \x3clabel for\x3d"loginPass" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"sysPasswordLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.systemAccessPasswordHelp}",\r\n               label: "${webviewStrings.systemAccessPassword}"\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"loginPass" name\x3d"loginPass"\r\n               title\x3d"${!webviewStrings.systemAccessPasswordHelp}"\r\n               data-dojo-attach-point\x3d"passwordTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox", type: "password",\r\n               invalidMessage: "${errorStrings.loginPassEmpty}",\r\n               required: false\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label", data-dojo-attach-point\x3d"jobFileContainer"\x3e\r\n        \x3c!-- HelpText is set within the JS as a url needs to be substituted into the string --\x3e\r\n        \x3clabel for\x3d"jobFile" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"jobFileLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'label: "${webviewStrings.jobFile}", required: true\'\x3e\x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"fileUploadContainer" data-dojo-attach-point\x3d"fileUploadContainer"\x3e\r\n            \x3cinput id\x3d"jobFile" type\x3d"text" maxlength\x3d"260"\r\n                   data-dojo-attach-point\x3d"jobFileTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"constraints:{ maxLength: 260 },\r\n                   baseClass: \'rcTextBox jobFileField\', required: true"\r\n                   data-dojo-attach-event\x3d"onClick: _showJobFileSelector" /\x3e\r\n\r\n            \x3cdiv class\x3d"fileUploadButton"\x3e\r\n                \x3cbutton class\x3d"buttonColumn"\r\n                        data-dojo-attach-point\x3d"jobFileButton"\r\n                        data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-props\x3d"baseClass: \'webviewButton circularButton noLabel\',\r\n                        iconClass: \'rcIcon browseIcon\'"\r\n                        data-dojo-attach-event\x3d"onClick: _showJobFileSelector"\x3e\x3c/button\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label hidden" data-dojo-attach-point\x3d"remoteAccessSystemNameContainer"\x3e\r\n        \x3clabel for\x3d"remoteAccessSystemName" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"remoteAccessSystemNameLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.remoteAccessSystemNameHelpText}",\r\n               label: "${webviewStrings.remoteAccessSystemName}", required: true\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"remoteAccessSystemName" name\x3d"remoteAccessSystemName" title\x3d""\r\n               data-dojo-attach-point\x3d"remoteAccessSystemNameTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n               invalidMessage: "${errorStrings.loginUserEmpty}", required: true\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label hidden" data-dojo-attach-point\x3d"remoteAccessPasswordContainer"\x3e\r\n        \x3clabel for\x3d"remoteAccessPassword" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"remoteAccessPasswordLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.remoteAccessPasswordHelpText}",\r\n               label: "${webviewStrings.remoteAccessPassword}"\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"remoteAccessPassword" name\x3d"remoteAccessPassword" title\x3d""\r\n               data-dojo-attach-point\x3d"remoteAccessPasswordTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox", type: "password",\r\n               invalidMessage: "${errorStrings.loginPassEmpty}",\r\n               required: false\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label manageCertificatesButton hidden" data-dojo-attach-point\x3d"remoteAccessCertificateContainer"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"manageCertificates"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton manageCertificates",\r\n                iconClass: "rcIcon certificateIcon",\r\n                label: "${webviewStrings.manageCertificates}"\'\r\n                data-dojo-attach-event\x3d"onClick: _showManageCertificates"\x3e${webviewStrings.manageCertificates}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/fieldset\x3e',
"url:webview/admin/systems/templates/ManageCertificatesDialog.html":'\x3cdiv class\x3d"dijitDialog manage-certificates-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 535px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3c!-- Content will be here! --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"rootCertificateContainer"\x3e\r\n            \x3cdiv class\x3d"certificate-entry"\x3e\r\n                \x3clabel class\x3d"rootCertLabel" data-dojo-attach-point\x3d"rootCertLabel"\x3e${webviewStrings.remoteAccessCertificateLabel}:\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"rootCertTB"\r\n                       data-dojo-type\x3d"dijit/form/TextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox certificate-input\',\r\n                       readOnly: true"/\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"rootUploader"\x3e\x3c/span\x3e\r\n                \r\n                \x3cbutton data-dojo-attach-point\x3d"defaultRoot"\r\n                        data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-props\x3d\'baseClass: "webviewButton defaultButton"\'\r\n                        \x3e${webviewStrings.rcbDefault}\x3c/button\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\x3c/label\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"rootExpiry"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- NLS If we end up supporting --\x3e\r\n        \x3c!-- Mutual Authentication stuff\r\n        \x3cdiv class\x3d"hidden"\r\n             data-dojo-attach-point\x3d"clientCertificateContainer"\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3eClient Certificate\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"clientCertTB"\r\n                       data-dojo-type\x3d"dijit/form/TextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox certificate-input\',\r\n                       readOnly: true"/\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"clientUploader"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3e\x3c/label\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"clientExpiry"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hidden"\r\n             data-dojo-attach-point\x3d"privateKeyContainer"\x3e\r\n            \x3cdiv\x3e\r\n                \x3clabel\x3ePrivate Key\x3c/label\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"privateKeyTB"\r\n                       data-dojo-type\x3d"dijit/form/TextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox certificate-input\',\r\n                       readOnly: true"/\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"privateKeyUploader"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        --\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/FileSelector.html":'\x3cdiv class\x3d"fileSelectionDialog" data-dojo-attach-point\x3d"fileSelector"\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"fileTree"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cspan data-dojo-attach-point\x3d"okButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t  data-dojo-props\x3d"disabled: \'true\', baseClass: \'webviewButton okButton\', \r\n\t\t\t  iconClass: \'rcIcon okIcon\', \r\n\t\t\t  label: \'OK\'"\r\n\t\t\t  data-dojo-attach-event\x3d"onClick: _onSave"\x3e\r\n\t\t\x3c/span\x3e\r\n\r\n\t\t\x3cspan data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t\t  data-dojo-props\x3d"baseClass: \'webviewButton cancel\', \r\n\t\t\t  iconClass: \'rcIcon cancelIcon\', \r\n\t\t\t  label: \'CANCEL\'"\r\n\t\t\t  data-dojo-attach-event\x3d"onClick: onCancel"\x3e\r\n\t\t\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/systems/templates/SystemToolbar.html":'\x3cdiv class\x3d"admin-toolbar system-toolbar"\x3e\r\n    \x3cdiv class\x3d"icon-button-container" data-dojo-attach-point\x3d"iconContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"saveButton"\r\n             data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-props\x3d"titleStr: \'${webviewStrings.save}\',\r\n              iconClass: \'rc24Icon saveIcon toolbarButtonIcon\'"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"cancelButton"\r\n             data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-props\x3d"titleStr: \'${webviewStrings.cancel}\',\r\n              iconClass: \'rc24Icon cancelIcon toolbarButtonIcon\'"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/systems/templates/addSystem.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites systems addPage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3cdiv class\x3d"wizard-system-settings webviewContentPane" data-dojo-attach-point\x3d"addContainer"\x3e\r\n\r\n        \x3cp class\x3d"wizard-prompt" data-dojo-attach-point\x3d"promptNode" \x3e${webviewStrings.systemsPrompt}\x3c/p\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n            \x3cspan class\x3d"rcTextBoxLabel requiredText requiredNote" \x3e* ${webviewStrings.required}\x3c/span\x3e\r\n            \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"wizardComponentSettings"\r\n             data-dojo-type\x3d"webview/admin/systems/settingsComponents/WizardConnectionSettings"\r\n             data-dojo-props\x3d\'baseClass: "system-setting-component"\'\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"wizardNextContainer" class\x3d"field-and-label wizard-field-and-label hidden"\x3e\r\n            \x3ca class\x3d"wizard-external-next-link wizard-next-link hidden" data-dojo-attach-point\x3d"wizardCancelLink" data-dojo-attach-event\x3d"onclick: _cancelRequest" title\x3d"Cancel Step"\x3e\r\n                \x3cspan class\x3d"wizard-arrow waiting webviewCommitButton " style\x3d"vertical-align: top;"\x3e\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"cancelLabel" class\x3d"wizard-next-label"\x3e ${webviewStrings.rcbCancel}\x3c/span\x3e\r\n            \x3c/a\x3e\r\n            \x3ca class\x3d"wizard-external-next-link wizard-next-link" data-dojo-attach-point\x3d"wizardNextLink" data-dojo-attach-event\x3d"onclick: _onClickWizardNext" title\x3d"Next Step"\x3e\r\n                \x3cspan class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"nextLabel" class\x3d"wizard-next-label"\x3e${webviewStrings.next}\x3c/span\x3e\r\n            \x3c/a\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/systems/settingsComponents/templates/WizardConnectionSettings.html":'\x3cdiv class\x3d"${baseClass} wizard-connection-settings"\x3e\r\n    \x3cdiv class\x3d"field-and-label"\x3e\r\n\r\n        \x3clabel for\x3d"${id}_ipAddress" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"ipLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.systemIPInfo}",\r\n               label: "${webviewStrings.systemIP}", required: true\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_ipAddress" name\x3d"ipAddress"\r\n               data-dojo-attach-point\x3d"ipTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'required: true,\r\n               baseClass: "rcTextBox ipAddressField"\' /\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label"\x3e\r\n\r\n        \x3cspan class\x3d"rcTextBoxLabel"\r\n              data-dojo-attach-point\x3d"protocolLabel"\x3e${webviewStrings.protocolTypeLabel}:\x3c/span\x3e\r\n\r\n        \x3cdiv class\x3d"radioButtonContainer"\r\n             data-dojo-attach-point\x3d"protocolTypes"\x3e\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput id\x3d"${id}_bacnet" type\x3d"radio" name\x3d"protocolType" checked value\x3d"bacnet"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"bacnetProtocolType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"${id}_bacnet" class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"bacnetLabel"\x3e${webviewStrings.bacnet}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput id\x3d"${id}_rcp" type\x3d"radio" name\x3d"protocolType" value\x3d"rcp"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"rcpProtocolType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"${id}_rcp" class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"rcpLabel"\x3e${webviewStrings.rcp}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput id\x3d"${id}_dual" type\x3d"radio" name\x3d"protocolType" value\x3d"dual"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"dualProtocolType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"${id}_dual" class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"dualLabel"\x3e${webviewStrings.dual}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput id\x3d"${id}_remote" type\x3d"radio" name\x3d"protocolType" value\x3d"remote"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"remoteProtocolType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel for\x3d"${id}_remote" class\x3d"radioButtonLabel" data-dojo-attach-point\x3d"remoteLabel"\x3e${webviewStrings.remote}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"webviewDeviceContainer"\x3e\r\n        \x3clabel for\x3d"${id}_webviewID" class\x3d"rcTextBoxLabel"\r\n               data-dojo-attach-point\x3d"webviewIDLabel"\x3e${!webviewStrings.webviewIDLabel}:\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_webviewID" name\x3d"webviewID" type\x3d"number" min\x3d"1" max\x3d"4194303" step\x3d"1"\r\n               data-dojo-attach-point\x3d"webviewIDTB"\r\n               data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n               data-dojo-props\x3d\'constraints: {min: 1, max: 4194303, fractional: false, pattern: "#######"},\r\n               maxLength: 7,\r\n               invalidMessage: "${errorStrings.invalidWebview}",\r\n               baseClass: "rcTextBox", required: false,\r\n               placeHolder: "(auto)"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- leaving hidden as per RCWEB-3443 --\x3e\r\n    \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d\'fileSyncIdContainer\'\x3e\r\n\r\n        \x3cspan class\x3d"rcTextBoxLabel link"\r\n              data-dojo-attach-point\x3d"fileSyncIDLabel"\r\n              data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n              data-dojo-props\x3d\'helpText: "${webviewStrings.fileSyncIDHelpText}",\r\n              label: "${webviewStrings.fileSyncIDLabel}"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cinput name\x3d"webviewID" type\x3d"number" min\x3d"1" max\x3d"4194303" step\x3d"1"\r\n               data-dojo-attach-point\x3d"fileSyncIDTB"\r\n               data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n               data-dojo-props\x3d\'constraints: {min: 1, max: 4194303, fractional: false, pattern: "#######"},\r\n               maxLength: 7,\r\n               invalidMessage: "${errorStrings.invalidFileSync}",\r\n               baseClass: "rcTextBox deviceTB", required: false,\r\n               placeHolder: "(auto)"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"controllerIdContainer"\x3e\r\n        \x3clabel for\x3d"${id}_controlID" class\x3d"rcTextBoxLabel"\r\n               data-dojo-attach-point\x3d"controllerIDLabel"\x3e${webviewStrings.controllerIDLabel}: \x3cspan class\x3d"requiredText mandatory hidden"\x3e*\x3c/span\x3e\r\n        \x3c/label\x3e\r\n        \x3cinput id\x3d"${id}_controlID" name\x3d"controlID" type\x3d"number" min\x3d"1" max\x3d"4194303" step\x3d"1"\r\n               data-dojo-attach-point\x3d"controllerIDTB"\r\n               data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n               data-dojo-props\x3d\'constraints: {min: 1, max: 4194303, fractional: false, pattern: "#######"},\r\n               maxLength: 7,\r\n               invalidMessage: "${errorStrings.invalidController}",\r\n               baseClass: "rcTextBox controllerIDField",\r\n               placeHolder: "(auto)"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"portContainer"\x3e\r\n\r\n        \x3clabel for\x3d"${id}_portNumber" class\x3d"rcTextBoxLabel"\r\n               data-dojo-attach-point\x3d"portLabel"\x3e${webviewStrings.portLabel}:\x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"portTBWrapper"\x3e\r\n            \x3cinput id\x3d"${id}_portNumber" name\x3d"portNumber" type\x3d"number" value\x3d"47808" min\x3d"1" max\x3d"65535" step\x3d"1"\r\n                   data-dojo-attach-point\x3d"portTB"\r\n                   data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                   data-dojo-props\x3d\'constraints: {min: 1, max: 65535, fractional: false, pattern: "#####"},\r\n                   maxLength: 5,\r\n                   rangeMessage: "${errorStrings.invalidPort}",\r\n                   baseClass: "rcTextBox numericBox BIPPortField"\' /\x3e\r\n            \x3cdiv class\x3d"bbmd-container" data-dojo-attach-point\x3d"bbmdContainer"\x3e\r\n                \x3cinput id\x3d"${id}_bbmdCheckbox" type\x3d"checkbox"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox"\r\n                        data-dojo-attach-point\x3d"bbmd"/\x3e\r\n                \x3clabel for\x3d"${id}_bbmdCheckbox"\x3e\r\n                    ${webviewStrings.forceBBMD}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label" data-dojo-attach-point\x3d"fixedPortContainer"\x3e\r\n        \x3clabel for\x3d"${id}_fixedBACnetPort" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"fixedPortLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.fixedPortLabelHelp}",\r\n               label: "${webviewStrings.fixedBACnetPort}"\'\x3e\x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"field-input fixed-port-input"\x3e\r\n            \x3cinput id\x3d"${id}_fixedBACnetPort" name\x3d"portNumber" type\x3d"number" autocomplete\x3d"on" value\x3d"0" min\x3d"0" max\x3d"65535" step\x3d"1"\r\n                   data-dojo-attach-point\x3d"fixedBACnetPortTB"\r\n                   data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                   data-dojo-props\x3d\'constraints: {min: 0, max: 65535, fractional: false, pattern: "#####"},\r\n                   maxLength: 5, value: "",\r\n                   invalidMessage: "${errorStrings.invalidPort}",\r\n                   baseClass: "rcTextBox numericBox portTextbox",\r\n                   disabled: true\' /\x3e\r\n            \x3cspan class\x3d"checkbox-and-label"\x3e\r\n                \x3cinput id\x3d"${id}_fixedPortCheckbox" type\x3d"checkbox"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox"\r\n                       data-dojo-attach-point\x3d"enablefixedBACnetPort" /\x3e\r\n\r\n                \x3clabel for\x3d"${id}_fixedPortCheckbox" data-dojo-attach-point\x3d"fixedPortCBLabel"\x3e\r\n                    ${webviewStrings.enableStaticPort}\r\n                \x3c/label\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label"\x3e\r\n\r\n        \x3clabel for\x3d"${id}_loginUser" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"sysNameLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.systemAccessUserHelp}",\r\n               label: "${webviewStrings.systemAccessUser}", required: true\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_loginUser" name\x3d"loginUser"\r\n               title\x3d"${!webviewStrings.systemAccessUserHelp}"\r\n               data-dojo-attach-point\x3d"loginTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox usernameField", required: true, type: "password",\r\n               invalidMessage: "${errorStrings.loginUserEmpty}"\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label"\x3e\r\n\r\n        \x3clabel for\x3d"${id}_loginPass" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"sysPasswordLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.systemAccessPasswordHelp}",\r\n               label: "${webviewStrings.systemAccessPassword}"\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_loginPass" name\x3d"loginPass"\r\n               title\x3d"${!webviewStrings.systemAccessPasswordHelp}"\r\n               data-dojo-attach-point\x3d"passwordTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox", type: "password",\r\n               invalidMessage: "${errorStrings.loginPassEmpty}",\r\n               required: false\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label"\x3e\r\n        \x3c!-- HelpText is set within the JS as a url needs to be substituted into the string --\x3e\r\n        \x3clabel for\x3d"${id}_jobFileLabel" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"jobFileLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'label: "${webviewStrings.jobFile}", required: true\'\x3e\x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"fileUploadContainer"\x3e\r\n            \x3cinput id\x3d"${id}_jobFileLabel" type\x3d"text" maxlength\x3d"260"\r\n                   data-dojo-attach-point\x3d"jobFileTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"constraints:{ maxLength: 260 },\r\n                   baseClass: \'rcTextBox jobFileField\', required: true"\r\n                   data-dojo-attach-event\x3d"onClick: _showJobFileSelector" /\x3e\r\n\r\n            \x3cdiv class\x3d"fileUploadButton"\x3e\r\n                \x3cbutton class\x3d"buttonColumn"\r\n                        data-dojo-attach-point\x3d"jobFileButton"\r\n                        data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-props\x3d"baseClass: \'webviewButton circularButton noLabel\',\r\n                        iconClass: \'rcIcon browseIcon\'"\r\n                        data-dojo-attach-event\x3d"onClick: _showJobFileSelector"\x3e\x3c/button\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\r\n    \x3cdiv class\x3d"field-and-label hidden" data-dojo-attach-point\x3d"remoteAccessSystemNameContainer"\x3e\r\n        \x3clabel for\x3d"${id}_remoteAccessSystemName" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"remoteAccessSystemNameLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.remoteAccessSystemNameHelpText}",\r\n               label: "${webviewStrings.remoteAccessSystemName}", required: true\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_remoteAccessSystemName" name\x3d"remoteAccessSystemName" title\x3d""\r\n               data-dojo-attach-point\x3d"remoteAccessSystemNameTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n               invalidMessage: "${errorStrings.loginUserEmpty}", required: true\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label hidden" data-dojo-attach-point\x3d"remoteAccessPasswordContainer"\x3e\r\n        \x3clabel for\x3d"${id}_remoteAccessPassword" class\x3d"rcTextBoxLabel link"\r\n               data-dojo-attach-point\x3d"remoteAccessPasswordLabel"\r\n               data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n               data-dojo-props\x3d\'helpText: "${webviewStrings.remoteAccessPasswordHelpText}",\r\n               label: "${webviewStrings.remoteAccessPassword}"\'\x3e\x3c/label\x3e\r\n\r\n        \x3cinput id\x3d"${id}_remoteAccessPassword" name\x3d"remoteAccessPassword" title\x3d""\r\n               data-dojo-attach-point\x3d"remoteAccessPasswordTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox", type: "password",\r\n               invalidMessage: "${errorStrings.loginPassEmpty}",\r\n               required: false\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"field-and-label manageCertificatesButton hidden" data-dojo-attach-point\x3d"remoteAccessCertificateContainer"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"manageCertificates"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton manageCertificates",\r\n                iconClass: "rcIcon certificateIcon",\r\n                label: "${webviewStrings.manageCertificates}"\'\r\n                data-dojo-attach-event\x3d"onClick: _showManageCertificates"\x3e${webviewStrings.manageCertificates}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/systems/templates/addArchive.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites systems addPage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3cdiv class\x3d"wizard-system-settings webviewContentPane" data-dojo-attach-point\x3d"addContainer"\x3e\r\n\r\n        \x3cp class\x3d"wizard-prompt" data-dojo-attach-point\x3d"promptNode" \x3e${!webviewStrings.archivePropertiesPrompt}\x3c/p\x3e\r\n\r\n        \x3cdiv class\x3d"groupbox-hidden" data-dojo-attach-point\x3d"wizardComponentSettings"\r\n             data-dojo-type\x3d"webview/admin/systems/settingsComponents/ArchiveSettings"\r\n             data-dojo-props\x3d\'baseClass: "system-setting-component", system: ${system}\'\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"wizardNextContainer" class\x3d"field-and-label wizard-field-and-label"\x3e\r\n            \x3ca class\x3d"wizard-external-next-link wizard-next-link" data-dojo-attach-point\x3d"wizardNextLink" data-dojo-attach-event\x3d"onclick: _onClickWizardNext" title\x3d"Next Step"\x3e\r\n                \x3cspan class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"nextLabel" class\x3d"wizard-next-label"\x3e${webviewStrings.next}\x3c/span\x3e\r\n            \x3c/a\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/trees/templates/trees.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites" style\x3d"width:100%; clear:both;"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentArea" \r\n\t\t data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n\t\t class\x3d"webviewAdminSites"\x3e\r\n\r\n\t\t\x3c!-- DELETE --\x3e\r\n\t\t\x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d\'listContainer\'\x3e\r\n\r\n\t\t\t\x3c!-- END DELETE--\x3e\t\t\r\n\t\t\t\x3c!--ADD--\x3e\r\n\t\t\t\x3cdiv class\x3d"leftContainer doubleContent" \x3e\r\n\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel topItem"\x3e\r\n\r\n\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel"\r\n\t\t\t\t\t\t  data-dojo-attach-point\x3d"dataLabel"\x3e${webviewStrings.tree} ${webviewStrings.name}:\x3c/span\x3e\r\n\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nameTB"\r\n\t\t\t\t\t\t  data-dojo-type\x3d"dijit/form/TextBox"\r\n                          data-dojo-props\x3d"baseClass: \'rcTextBox navTreeNameField\',\r\n                          maxLength: 50"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel hiddenButtons treesAddButtons"\x3e\r\n\t\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For padding purposes--\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"client-toolbar navigation-tree"\x3e\r\n\t\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"addButton"\r\n\t\t\t\t\t\t\tdata-dojo-type\x3d"webview/widget/ToolbarButton" \r\n\t\t\t\t\t\t\tdata-dojo-props\x3d\'titleStr : "${webviewStrings.addTree}",\r\n\t\t\t\t\t\t\ticonClass: "toolbarButtonIcon svg-add-icon"\'\r\n\t\t\t\t\t\t\tdata-dojo-attach-event\x3d"onClick: _onAddItem"\x3e\x3c/span\x3e\r\n\r\n\t\t\t\t\t\t\x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t\t\t\t\tdata-dojo-type\x3d"webview/widget/ToolbarButton"\r\n\t\t\t\t\t\t\tdata-dojo-props\x3d\'titleStr : "${webviewStrings.rcbCancel}",\r\n\t\t\t\t\t\t\ticonClass: "toolbarButtonIcon svg-cancel-icon"\'\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"rightContainer" data-dojo-attach-point\x3d\'rightContainer\'\x3e\r\n\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"_multiSelect"\r\n\t\t\t\t\t data-dojo-type\x3d"webview/widget/MultiSelectBox"\r\n\t\t\t\t\t data-dojo-props\x3d"fieldLabel: \'${webviewStrings.wvTrees}:\'"\x3e\r\n\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"fieldAndLabel hiddenButtons"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--Used for padding--\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"client-toolbar navigation-tree"\x3e\r\n\t\t\t\t\t\t\x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n\t\t\t\t\t\t\tdata-dojo-attach-point\x3d"editButton"\r\n\t\t\t\t\t\t\tdata-dojo-props\x3d\'titleStr : "${rcStrings.edit}",\r\n\t\t\t\t\t\t\ticonClass: "toolbarButtonIcon svg-edit-icon",\r\n\t\t\t\t\t\t\tdisabled: true\'\x3e\r\n\t\t\t\t\t\t\x3c/span\x3e\r\n\r\n\t\t\t\t\t\t\x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n\t\t\t\t\t\t\tdata-dojo-attach-point\x3d"copyButton"\r\n\t\t\t\t\t\t\tdata-dojo-props\x3d\'titleStr : "${webviewStrings.copy}",\r\n\t\t\t\t\t\t\ticonClass: "toolbarButtonIcon svg-copy-icon",\r\n\t\t\t\t\t\t\tdisabled: true\'\x3e\r\n\t\t\t\t\t\t\x3c/span\x3e\r\n\r\n\t\t\t\t\t\t\x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n\t\t\t\t\t\t\tdata-dojo-attach-point\x3d"renameButton"\r\n\t\t\t\t\t\t\tdata-dojo-props\x3d\'titleStr : "${webviewStrings.rename}",\r\n\t\t\t\t\t\t\ticonClass: "toolbarButtonIcon svg-rename-icon",\r\n\t\t\t\t\t\t\tdisabled: true\'\x3e\r\n\t\t\t\t\t\t\x3c/span\x3e\r\n\r\n\t\t\t\t\t\t\x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n\t\t\t\t\t\t\tdata-dojo-attach-point\x3d"deleteButton"\r\n\t\t\t\t\t\t\tdata-dojo-props\x3d\'titleStr : "${rcStrings.rcDelete}",\r\n\t\t\t\t\t\t\ticonClass: "toolbarButtonIcon svg-delete-icon",\r\n\t\t\t\t\t\t\tdisabled: true\'\x3e\r\n\t\t\t\t\t\t\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3c!-- END ADD--\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationTrees/dialogs/templates/CopyTreeDialog.html":'\x3cdiv class\x3d"dijitDialog navigation-tree-copy-dialog"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar"\r\n         class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode"\r\n              class\x3d"dijitDialogTitle dialog-title"\r\n              id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${navigationTreeStrings.copy}\x3c/span\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n              class\x3d"dijitDialogCloseIcon"\r\n              data-dojo-attach-event\x3d"ondijitclick: onCancel"\r\n              title\x3d"${buttonCancel}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText"\r\n                  class\x3d"closeText"\r\n                  title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n         class\x3d"dijitDialogPaneContent tree-name-container"\x3e\r\n         \x3cspan class\x3d"new-tree-name-label"\x3e${navigationTreeStrings.newTreeName}:\x3c/span\x3e\r\n         \x3cspan data-dojo-attach-point\x3d"newNameTB"\r\n                data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                data-dojo-props\x3d\'baseClass: "rcTextBox tree-name-textbox",\r\n                invalidMessage: "${errorStrings.emptyNameField}",\r\n                maxLength: 50\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"okCancelDiv"\r\n         class\x3d"dijitDialogPaneActionBar confirm-button-container"\r\n         data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_okButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnOk}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-attach-event\x3d"click:onOkClicked"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_cancelButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnCancel}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-attach-event\x3d"click:onCancel"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/trees/templates/tree.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n     class\x3d"webviewAdminSites trees navigation-tree singlePage"\r\n     style\x3d"width:100%;"\x3e\r\n     \x3c!-- BUTTON TABS --\x3e\r\n     \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n          data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n          \x3cdiv data-dojo-type\x3d"webview/admin/trees/NavTreeToolbar"\r\n               data-dojo-attach-point\x3d"navTreeToolbar"\r\n               data-dojo-props\x3d"site: ${site}"\x3e\r\n          \x3c/div\x3e\r\n\r\n     \x3c/div\x3e\r\n     \x3c!--right side --\x3e\r\n     \x3cdiv data-dojo-attach-point\x3d"treeBuilder"\r\n          data-dojo-type\x3d"webview/features/navigationTrees/treeBuilding/TreeBuilder"\x3e\r\n     \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/trees/templates/navTreeItem.html":'\x3cdiv class\x3d"treeItemContainer" role\x3d"presentation"\x3e\r\n\t\x3cdiv class\x3d"treePlaceHolderBefore hidden" data-dojo-attach-point\x3d"beforePlaceHolder"\x3e\x3c/div\x3e\r\n\t\x3cspan class\x3d"webviewIcon expandIcon expandNode" data-dojo-attach-point\x3d"expandNode"\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"navTreeItem" data-dojo-attach-point\x3d"contentNode" role\x3d"presentation"\x3e\r\n\r\n\t\t\x3cspan class\x3d"treeCheckBox"\r\n\t\t\t  data-dojo-attach-point\x3d"navTreeCBContainer"\x3e\r\n\t\t\x3c/span\x3e\r\n\r\n\t\t\x3cspan class\x3d\'colourAndLabel\'\x3e\r\n\t\t\t\x3cspan class\x3d"navIcon"\r\n\t\t\t\t  data-dojo-attach-point\x3d"navIcon"\x3e\t\x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"scheduleLabel clickable"\r\n                  data-dojo-attach-point\x3d"displayNameInput"\r\n                  data-dojo-type\x3d"dijit/InlineEditBox"\r\n                  data-dojo-props\x3d\'width: "80%",\r\n                  editorParams: {baseClass: "rcTextBox"}\'\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n\t\t\x3cspan class\x3d"urlLabel"\x3e\r\n\t\t\t\x3cspan class\x3d"pointLabel clickable hidden" data-dojo-attach-point\x3d"urlPathLabel"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"urlPathContainer"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cspan class\x3d\'editNodeBorder\'\x3e\r\n\t\t\t\x3cspan class\x3d"rc24Icon editIcon" data-dojo-attach-point\x3d"enableEditNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\t\x3cdiv class\x3d"treePlaceHolderAfter" data-dojo-attach-point\x3d"afterPlaceHolder"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:webview/admin/widget/templates/SearchForObjectResults.html":'\x3cdiv class\x3d"search-results-container ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader"\x3e\r\n        \x3cspan class\x3d"results-title" data-dojo-attach-point\x3d"resultsTitle"\x3e${paneTitle}\x3c/span\x3e\r\n        \x3cspan class\x3d"linkable webviewIcon close-icon" data-dojo-attach-point\x3d"closeButton"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container-body" data-dojo-attach-point\x3d"contentPaneBody"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"contents" class\x3d"results-contents"\x3e\r\n            \x3cdiv class\x3d"results-display-container" data-dojo-attach-point\x3d"resultsContainer"\x3e\r\n                ${webviewStrings.noPointsFound}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"hidden"\r\n                 data-dojo-attach-point\x3d"_bottomPagingBar"\r\n                 data-dojo-type\x3d"webview/admin/widget/PagingBar"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/PagingBar.html":'\x3cdiv class\x3d"pagingContainer" data-dojo-attach-point\x3d"pagingContainer"\x3e\r\n    \x3cspan class\x3d"itemCount" data-dojo-attach-point\x3d"itemCount"\x3e\x3c/span\x3e\r\n\r\n\r\n    \x3cspan class\x3d"viewOptions" data-dojo-attach-point\x3d"viewItemOptionsContainer"\x3e\r\n\r\n        \x3cselect\r\n            data-dojo-attach-point\x3d"viewItemOptions"\r\n            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n            data-dojo-props\x3d\'baseClass: "rcSelectBox form-input",\r\n            value: ${itemsPerPage}\'\x3e\r\n        \x3c/select\x3e\r\n    \x3c/span\x3e\r\n\r\n\t\x3cspan class\x3d"pageNavigation" data-dojo-attach-point\x3d"pageJumping"\x3e\r\n\t\t\x3cspan class\x3d"linkable webviewIcon firstPageIcon" data-dojo-attach-point\x3d"firstPage"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"linkable webviewIcon prevPageIcon" data-dojo-attach-point\x3d"prevPage"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"currPageOption" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"baseClass: \'rcTextBox currPageTB\'"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"linkable webviewIcon nextPageIcon" data-dojo-attach-point\x3d"nextPage"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"linkable webviewIcon lastPageIcon" data-dojo-attach-point\x3d"lastPage"\x3e\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/trees/templates/navTreeToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"selectAllButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n          iconClass: "rc24Icon selectAllIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan data-dojo-type\x3d"webview/widget/AddButton"\r\n        data-dojo-attach-point\x3d"navTreeAddButton"\r\n        data-dojo-props\x3d\'supportsAnimations: false\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"deleteButton" data-dojo-props\x3d\'titleStr : "${nlsStrings.rcDelete}",\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"saveButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.save}",\r\n          iconClass: "rc24Icon saveIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/AddButton.html":'\x3cdiv\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n        data-dojo-attach-point\x3d"addButton"\r\n        data-dojo-props\x3d\'titleStr : "${navGroupStrings.addToNavGroup}",iconClass: "rc24Icon addIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"addMenu" class\x3d"addButtonMenu hidden"\x3e\r\n        \x3cdiv class\x3d"addButtonMenuItem" data-dojo-attach-point\x3d"ObjectMenuItem"\x3e\r\n            \x3cdiv class\x3d"drop-down-label"\x3e\r\n                ${navGroupStrings.navGroupObject}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"addButtonMenuItem" data-dojo-attach-point\x3d"KeywordMenuItem"\x3e\r\n            \x3cdiv class\x3d"drop-down-label"\x3e\r\n                ${navGroupStrings.navGroupKeyword}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"addButtonMenuItem" data-dojo-attach-point\x3d"AnimationMenuItem"\x3e\r\n            \x3cdiv class\x3d"drop-down-label"\x3e\r\n                ${navGroupStrings.animations.animation}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationTrees/treeBuilding/templates/TreeBuilder.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n     class\x3d"navigation-tree-builder"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"resultsWidget"\r\n         class\x3d"hidden results-container"\r\n         data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n         data-dojo-props\x3d\'baseClass: "point-report-tree-results",\r\n            paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"tree-container"\r\n         data-dojo-attach-point\x3d"builderContainer"\x3e\r\n        \x3cdiv class\x3d"webviewAdminResizeable"\r\n             data-dojo-attach-point\x3d"builderWidget"\r\n             data-dojo-type\x3d"webview/widget/WebviewContentPane"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"treeRenderingDomNode"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationTrees/treeRendering/templates/treeBuilderItem.html":'\x3cdiv class\x3d"tree-builder-item-container"\r\n        role\x3d"presentation"\x3e\r\n    \x3cspan class\x3d"tree-builder-item"\r\n        data-dojo-attach-point\x3d"treeBuilderItemNode"\r\n        role\x3d"presentation"\x3e\r\n    \x3cspan class\x3d"tree-item-checkBox"\r\n            data-dojo-attach-point\x3d"treeItemCheckBoxContainerNode"\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"checkboxNode"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox" \x3e\r\n            \x3c/input\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d\'icon-and-display-name-container\'\x3e\r\n        \x3cspan class\x3d"tree-item-icon-container clickable"\r\n                data-dojo-attach-point\x3d"treeItemIconNode"\r\n                data-dojo-attach-event\x3d"click: _onOpenIconGallery"\x3e \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"tree-item-display-name clickable hidden"\r\n                data-dojo-attach-point\x3d"displayNameInputNode"\r\n                data-dojo-type\x3d"dijit/InlineEditBox"\r\n                data-dojo-props\x3d\'width: "80%",\r\n                editorParams: { baseClass: "rcTextBox" }\'\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"tree-item-url-label-container"\x3e\r\n        \x3cspan class\x3d"tree-item-url clickable hidden"\r\n                data-dojo-attach-point\x3d"urlInputNode"\r\n                data-dojo-type\x3d"dijit/InlineEditBox"\r\n                data-dojo-props\x3d\'width: "80%",\r\n                editorParams: { baseClass: "rcTextBox" }\'\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d\'edit-node-border\'\x3e\r\n        \x3cspan class\x3d"rc24Icon editIcon"\r\n                data-dojo-attach-point\x3d"editNode"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cdiv class\x3d"tree-placeholder-after"\r\n        data-dojo-attach-point\x3d"afterPlaceHolder"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationTrees/dialogs/templates/editTreeItemDialog.html":'\x3cdiv class\x3d"editTreeNodeContainer"\x3e\r\n\r\n\t\x3cfieldset class\x3d"treeNodeOption"\x3e\r\n\t\t\x3clegend\x3e${webviewStrings.icon}\x3c/legend\x3e\r\n\t\t\x3cdiv\x3e\r\n\t\t\t\x3cspan style\x3d"top: 5px;position: relative;"\x3e\r\n\t\t\t\t\x3cimg class\x3d"navTreeIcon" alt\x3d"" src\x3d"" data-dojo-attach-point\x3d"iconEditor" /\x3e\r\n\t\t\t\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"uploaderContainer" data-dojo-attach-point\x3d"uploaderContainer"\x3e\x3c/span\x3e\r\n\t\t\t${webviewStrings.or}\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"galleryButton"\r\n\t\t\t\tdata-dojo-type\x3d"dijit/form/Button"\r\n\t\t\t\tdata-dojo-props\x3d"baseClass: \'webviewButton\',\r\n\t\t\t\ticonClass: \'webviewIcon galleryIcon\',\r\n\t\t\t\tlabel: \'${webviewStrings.gallery}\'"\x3e\r\n\r\n\t\t\t\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\r\n\t\x3cfieldset class\x3d"treeNodeOption"\x3e\r\n\t\t\x3clegend\x3e${webviewStrings.displayName}\x3c/legend\x3e\r\n\t\t\x3cinput class\x3d"rcTextBox" type\x3d"text"\r\n\t\t\t   data-dojo-attach-point\x3d"displayNameEditor"\r\n\t\t\t   data-dojo-type\x3d"dijit/form/TextBox" /\x3e\r\n\t\x3c/fieldset\x3e\r\n\r\n\t\x3c!-- May become an option later\r\n\t\x3cfieldset class\x3d"treeNodeOption hidden"\x3e\r\n\t\t\x3clegend\x3ePoint Mnemonic\x3c/legend\x3e\r\n\t\t\x3cinput type\x3d"text" data-dojo-attach-point\x3d"mnemonicEditor" data-dojo-type\x3d"dijit/form/TextBox" /\x3e\r\n\t\x3c/fieldset\x3e\r\n\t--\x3e\r\n\r\n\t\x3cfieldset class\x3d"treeNodeOption hidden" data-dojo-attach-point\x3d"urlEditorContianer"\x3e\r\n\t\t\x3clegend\x3e${webviewStrings.urlPath}\x3c/legend\x3e\r\n\t\t\x3cinput class\x3d"rcTextBox" type\x3d"text"\r\n\t\t\t   data-dojo-attach-point\x3d"urlEditor"\r\n\t\t\t   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t   data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n\t\t\t   invalidMessage: \'${errorStrings.invalidURL}\',\r\n\t\t\t   required: true" /\x3e\r\n\t\x3c/fieldset\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"okButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button"\r\n\t\t\t  data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n\t\t\t  iconClass: \'rcIcon okIcon\',\r\n\t\t\t  label: \'${webviewStrings.rcbOkay}\'"\x3e\r\n\r\n\t\t\x3c/span\x3e\r\n\r\n\t\t\x3cspan data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t  data-dojo-type\x3d"dijit/form/Button"\r\n\t\t\t  data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n\t\t\t  iconClass: \'rcIcon cancelIcon\',\r\n\t\t\t  label: \'${webviewStrings.rcbCancel}\'"\x3e\r\n\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/IconGallery.html":'\x3cdiv data-dojo-attach-point\x3d"iconGalleryContainer"\x3e\r\n\t\x3cdiv class\x3d"iconGalleryTable" data-dojo-attach-point\x3d"iconTable"\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"iconGalleryButtons" data-dojo-attach-point\x3d"buttonContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/admin/widget/templates/KeywordSelector.html":'\x3cdiv class\x3d"keywords-selector ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"tree-node-container-bg"\x3e\r\n        \x3cdiv class\x3d"tree-node-container"\r\n             data-dojo-attach-point\x3d"searchedTreeNodeContainer"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"keywords-header"\r\n         data-dojo-attach-point\x3d"keywordsHeader"\x3e\r\n        \x3cspan class\x3d"keywords-title"\r\n              data-dojo-attach-point\x3d"keywordsTitle"\x3e${webviewStrings.keyword}\x3c/span\x3e\r\n        \x3cspan class\x3d"linkable webviewIcon close-icon"\r\n              data-dojo-attach-point\x3d"closeButton"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container-body"\r\n         data-dojo-attach-point\x3d"contentPaneBody"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"contents"\r\n             class\x3d"keywords-contents"\x3e\r\n            \x3cdiv class\x3d"keywords-display-container"\r\n                 data-dojo-attach-point\x3d"keywordsContainer"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:webview/admin/schedules/templates/schedules.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites enterpriseSchedules listPage" style\x3d"width:100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"contentArea" data-dojo-type\x3d"webview/widget/WebviewContentPane" class\x3d"webviewAdminSchedules"\x3e\r\n\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"listContainer"\x3e\r\n\r\n            \x3c!--ADD--\x3e\r\n            \x3cdiv class\x3d"enterpriseProperties"\x3e\r\n\r\n                \x3cdiv class\x3d"addDetails"\x3e\r\n                    \x3cdiv class\x3d"fieldAndLabel topItem"\x3e\r\n\r\n                        \x3cspan class\x3d"rcTextBoxLabel"\r\n                              data-dojo-attach-point\x3d"dataLabel"\x3e${webviewStrings.scheduleName}:\x3c/span\x3e\r\n\r\n                        \x3cspan data-dojo-attach-point\x3d"nameTB"\r\n                              data-dojo-type\x3d"dijit/form/TextBox"\r\n                              data-dojo-props\x3d"baseClass: \'rcTextBox scheduleNameField\',\r\n                              maxLength: 50"\x3e\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"minuteIncrementSelect"\x3e\r\n                            ${webviewStrings.afterHoursIncrment}:\r\n                        \x3c/label\x3e\r\n\r\n                        \x3cselect id\x3d"minuteIncrementSelect" class\x3d"rcSelectBox"\r\n                                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                data-dojo-attach-point\x3d"minuteIncrement"\r\n                                data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                autoComplete: false"\x3e\r\n                            \x3coption value\x3d"0"\x3e${webviewStrings.none}\x3c/option\x3e\r\n                            \x3coption value\x3d"15"\x3e15 ${webviewStrings.minuteShortHand}\x3c/option\x3e\r\n                            \x3coption value\x3d"30"\x3e30 ${webviewStrings.minuteShortHand}\x3c/option\x3e\r\n                            \x3coption value\x3d"60"\x3e1 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                            \x3coption value\x3d"120"\x3e2 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                            \x3coption value\x3d"180"\x3e3 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                            \x3coption value\x3d"240"\x3e4 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                            \x3coption value\x3d"480"\x3e8 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"fieldAndLabel"\r\n                         data-dojo-attach-point\x3d"currencySelection"\x3e\r\n\r\n                        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"currencySelect"\r\n                               data-dojo-attach-point\x3d"currencyLabel"\x3e\r\n                            ${webviewStrings.currency}:\r\n                        \x3c/label\x3e\r\n\r\n                        \x3cselect id\x3d"currencySelect" class\x3d"rcSelectBox"\r\n                                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                data-dojo-attach-point\x3d"currencySelect"\r\n                                data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                autoComplete: true"\x3e\r\n                            \x3coption value\x3d"none"\x3e${webviewStrings.none}\x3c/option\x3e\r\n                            \x3coption value\x3d"USD"\x3e\x26dollar;\x3c/option\x3e\r\n                            \x3coption value\x3d"EUR"\x3e\x26euro;\x3c/option\x3e\r\n                            \x3coption value\x3d"GBP"\x3e\x26pound;\x3c/option\x3e\r\n                            \x3coption value\x3d"MXN"\x3e\x26#x20B1;\x3c/option\x3e\r\n                            \x3coption value\x3d"CNY"\x3e\x26yen;\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\r\n                        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"dataType"\r\n                               data-dojo-attach-point\x3d"dataTypeLabel"\x3e\r\n                            ${webviewStrings.dataType}:\r\n                        \x3c/label\x3e\r\n\r\n                        \x3cspan data-dojo-attach-point\x3d"dataTypeContainer"\x3e\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                        \x3clabel class\x3d"checkbox-label"\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                   data-dojo-attach-point\x3d"approvalRequired"\r\n                                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                   data-dojo-props\x3d\'checked: false\'/\x3e\r\n                            ${ahacStrings.eventApprovalRequired}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"fieldAndLabel coloursField" data-dojo-attach-point\x3d"coloursField"\x3e\r\n                        \x3clabel class\x3d"rcTextBoxLabel"\x3e\x3c/label\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"colourSelector"\r\n                              data-dojo-type\x3d"webview/admin/schedules/DataTypeColourSelector"\r\n                              data-dojo-props\x3d"type: 9"\x3e\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"defaultColours"\x3e\r\n                    \x3cdiv class\x3d"fieldAndLabel coloursField topItem" data-dojo-attach-point\x3d"coloursField"\x3e\r\n\r\n                        \x3clabel class\x3d"rcTextBoxLabel"\x3e\x3c/label\x3e\r\n\r\n                        \x3cspan data-dojo-attach-point\x3d"defaultColourSelector"\r\n                              data-dojo-type\x3d"webview/admin/schedules/DataTypeColourSelector"\r\n                              data-dojo-props\x3d"type: \'default\'"\x3e\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                        \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e\x3c!--For Padding Purposes --\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"addButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d"baseClass: \'webviewButton floatRight addScheduleButton\',\r\n                              iconClass: \'webviewIcon addScheduleIcon\',\r\n                              label: \'ADD\'"\r\n                              data-dojo-attach-event\x3d"onClick: _onAddItem"\x3e\x3c/span\x3e\r\n\r\n                        \x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"cancelButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d"baseClass: \'webviewButton floatRight cancelButton\',\r\n                              iconClass: \'waiting webviewCommitButton\',\r\n                              label: \'CANCEL\'"\x3e\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"enterpriseScheduleSelection"\x3e\r\n\r\n                    \x3cdiv data-dojo-attach-point\x3d"_multiSelect"\r\n                         data-dojo-type\x3d"webview/widget/MultiSelectBox"\r\n                         data-dojo-props\x3d"fieldLabel: \'List:\'"\x3e\r\n\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"fieldAndLabel hiddenButtons"\x3e\r\n                        \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--Used for padding--\x3e\r\n                        \x3cdiv style\x3d"margin-top: .5em"\x3e\r\n\r\n                            \x3cdiv class\x3d"hidden"\r\n                                 data-dojo-attach-point\x3d"editButton"\r\n                                 data-dojo-type\x3d"dijit/form/Button"\r\n                                 data-dojo-props\x3d\'baseClass: "webviewButton editSite",\r\n                                 iconClass: "rcIcon editSiteIcon",\r\n                                 label: "${webviewStrings.rcbEdit}"\'\r\n                                 data-dojo-attach-event\x3d"onClick: _editItem"\x3e\r\n\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"hidden"\r\n                                 data-dojo-attach-point\x3d"previewButton"\r\n                                 data-dojo-type\x3d"dijit/form/Button"\r\n                                 data-dojo-props\x3d\'baseClass: "webviewButton previewSites",\r\n                                 iconClass: "rcIcon previewIcon",\r\n                                 label: "${webviewStrings.rcbPreview}"\'\r\n                                 data-dojo-attach-event\x3d"onClick: _onPreview"\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"hidden"\r\n                                 data-dojo-attach-point\x3d"deleteButton"\r\n                                 data-dojo-type\x3d"dijit/form/Button"\r\n                                 data-dojo-props\x3d\'baseClass: "webviewButton deleteSites",\r\n                                 iconClass: "webviewIcon deleteSchedulesIcon",\r\n                                 label: "${webviewStrings.rcbDelete}"\'\r\n                                 data-dojo-attach-event\x3d"onClick: _onDeleteItem"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/schedules/templates/dataTypeColourSelector.html":'\x3cdiv class\x3d"colourSelectorContainer" data-dojo-attach-point\x3d"colourSelectorMain"\x3e\r\n\t\x3cdiv class\x3d"colourSelectorTitle" data-dojo-attach-point\x3d"titleContainer"\x3e\r\n\t\t\x3c!--title--\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv class\x3d"colourSelectorAdd" data-dojo-attach-point\x3d"addItemContainer"\x3e\r\n\t\t\x3c!-- Add Item --\x3e\r\n\t\t\x3cinput type\x3d"text" data-dojo-attach-point\x3d"valueInput"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n               required: true,\r\n               missingMessage: \'${webviewStrings.addESColours}\'" /\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"addButton"\r\n\t\t\tdata-dojo-type\x3d"dijit/form/Button" \r\n\t\t\tdata-dojo-props\x3d"baseClass: \'webviewButton addColour noLabel circularButton\', \r\n\t\t\t\t\t\t\t   iconClass: \'rcIcon addIcon\'"\r\n\t\t\tdata-dojo-attach-event\x3d"onClick: _onAddItem"\x3e\x3c/span\x3e\r\n\t\t\x3c!--input field --\x3e\x3c!--add button--\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv class\x3d"colourSelectorItemContainer" data-dojo-attach-point\x3d"itemContainer"\x3e\r\n\t\t\x3c!-- Item Container --\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/schedules/templates/colourSelectorItem.html":'\x3cdiv class\x3d"colourSelectorSingleItem"\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"colorPickerNode"\x3e\x3c/span\x3e\r\n\t\x3cspan\x3e\r\n\t\t\x3cspan class\x3d"colorSelectorLabel" data-dojo-attach-point\x3d"valueLabel"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"valueInputContainer"\x3e\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\r\n\t\x3cspan data-dojo-attach-point\x3d"deleteNode" class\x3d"rcIcon deleteIcon inline"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/ColorPicker.html":'\x3cspan class\x3d"colorPicker"\x3e\r\n\t\x3cspan class\x3d"colorIndicator dijitInline" data-dojo-attach-point\x3d"colorIndicator"\x3e\r\n\t\t\x3cspan class\x3d"hidden colorPickerContainer" data-dojo-attach-point\x3d"colorPickerContainer"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"colorPickerNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\x3c/span\x3e',"url:dojox/widget/ColorPicker/ColorPicker.html":'\x3ctable class\x3d"dojoxColorPicker" dojoAttachEvent\x3d"onkeypress: _handleKey" cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\r\n\t\x3ctr\x3e\r\n\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\r\n\t\t\t\x3cdiv class\x3d"dojoxColorPickerBox"\x3e\r\n\t\t\t\t\x3c!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. --\x3e\r\n\t\t\t\t\x3cimg title\x3d"${saturationPickerTitle}" alt\x3d"${saturationPickerTitle}" class\x3d"dojoxColorPickerPoint" src\x3d"${_pickerPointer}" tabIndex\x3d"0" dojoAttachPoint\x3d"cursorNode" style\x3d"position: absolute; top: 0px; left: 0px;"\x3e\r\n\t\t\t\t\x3cimg role\x3d"presentation" alt\x3d"" dojoAttachPoint\x3d"colorUnderlay" dojoAttachEvent\x3d"onclick: _setPoint, onmousedown: _stopDrag" class\x3d"dojoxColorPickerUnderlay" src\x3d"${_underlay}" ondragstart\x3d"return false"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/td\x3e\r\n\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\r\n\t\t\t\x3cdiv class\x3d"dojoxHuePicker"\x3e\r\n\t\t\t\t\x3c!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. --\x3e\r\n\t\t\t\t\x3cimg dojoAttachPoint\x3d"hueCursorNode" tabIndex\x3d"0" class\x3d"dojoxHuePickerPoint" title\x3d"${huePickerTitle}" alt\x3d"${huePickerTitle}" src\x3d"${_huePickerPointer}" style\x3d"position: absolute; top: 0px; left: 0px;"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"dojoxHuePickerUnderlay" dojoAttachPoint\x3d"hueNode"\x3e\r\n\t\t\t\t    \x3cimg role\x3d"presentation" alt\x3d"" dojoAttachEvent\x3d"onclick: _setHuePoint, onmousedown: _stopDrag" src\x3d"${_hueUnderlay}"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/td\x3e\r\n\t\t\x3ctd valign\x3d"top"\x3e\r\n\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerPreviewContainer"\x3e\r\n\t\t\t\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd valign\x3d"top" class\x3d"dojoxColorPickerRightPad"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d"previewNode" class\x3d"dojoxColorPickerPreview"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd valign\x3d"top"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv dojoAttachPoint\x3d"safePreviewNode" class\x3d"dojoxColorPickerWebSafePreview"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd valign\x3d"bottom"\x3e\r\n\t\t\t\t\t\t\x3ctable class\x3d"dojoxColorPickerOptional" cellpadding\x3d"0" cellspacing\x3d"0" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dijitInline dojoxColorPickerRgb" dojoAttachPoint\x3d"rgbNode"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctable cellpadding\x3d"1" cellspacing\x3d"1" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_r"\x3e${redLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_r" dojoAttachPoint\x3d"Rval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_g"\x3e${greenLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_g" dojoAttachPoint\x3d"Gval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_b"\x3e${blueLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_b" dojoAttachPoint\x3d"Bval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dijitInline dojoxColorPickerHsv" dojoAttachPoint\x3d"hsvNode"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctable cellpadding\x3d"1" cellspacing\x3d"1" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_h"\x3e${hueLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_h" dojoAttachPoint\x3d"Hval"size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e ${degLabel}\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_s"\x3e${saturationLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_s" dojoAttachPoint\x3d"Sval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e ${percentSign}\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"${_uId}_v"\x3e${valueLabel}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput id\x3d"${_uId}_v" dojoAttachPoint\x3d"Vval" size\x3d"1" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e ${percentSign}\x3c/td\x3e\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd colspan\x3d"2"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"dojoxColorPickerHex" dojoAttachPoint\x3d"hexNode" aria-live\x3d"polite"\x3e\t\r\n\t\t\t\t\t\t\t\t\t\t\x3clabel for\x3d"${_uId}_hex"\x3e\x26nbsp;${hexLabel}\x26nbsp;\x3c/label\x3e\x3cinput id\x3d"${_uId}_hex" dojoAttachPoint\x3d"hexCode, focusNode, valueNode" size\x3d"6" class\x3d"dojoxColorPickerHexCode" dojoAttachEvent\x3d"onchange: _colorInputChange"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/td\x3e\r\n\t\x3c/tr\x3e\r\n\x3c/table\x3e\r\n\r\n',
"url:webview/admin/schedules/templates/schedule.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites enterpriseSchedules singlePage" style\x3d"width:100%;"\x3e\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"propertiesButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton properties\',\r\n              iconClass: \'rcIcon propertiesIcon\',\r\n              label: \'PROPERTIES\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"scheduleTreeButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton scheduleTreeBacnet\',\r\n              iconClass: \'webviewIcon scheduleTreeIcon\',\r\n              label: \'SCHEDULE TREE\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cdiv class\x3d\'commitButtons\' data-dojo-type\x3d"webview/widget/CommitButtons"\r\n             data-dojo-attach-point\x3d"propertiesCommitButtons"\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"webview/admin/Schedule/NavScheduleToolbar"\r\n             data-dojo-attach-point\x3d"scheduleTreeToolbar"\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3c!-- END--\x3e\r\n    \x3c!-- Enterprise Schedule Properties --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"esProperties"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"        \r\n         class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"propertiesContainer"\x3e\r\n\r\n            \x3cdiv class\x3d"nameAndType"\x3e\r\n\r\n                \x3cdiv class\x3d"fieldAndLabel topItem"\x3e\r\n\r\n                    \x3clabel class\x3d"rcTextBoxLabel"\r\n                           data-dojo-attach-point\x3d"dataLabel"\x3e${webviewStrings.scheduleName}:\x3c/label\x3e\r\n\r\n                    \x3cspan data-dojo-attach-point\x3d"nameTB"\r\n                          data-dojo-type\x3d"dijit/form/TextBox"\r\n                          data-dojo-props\x3d"baseClass: \'rcTextBox scheduleNameField\',\r\n                          maxLength: 50"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"enterpriseAfterHoursConfiguration"\x3e\r\n                    \x3cfieldset\x3e\r\n                        \x3clegend\x3e${webviewStrings.afterHoursEvents}\x3c/legend\x3e\r\n                        \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n\r\n                            \x3clabel class\x3d"rcTextBoxLabel" for\x3d"minuteIncrementSelect"\r\n                                   data-dojo-attach-point\x3d"minuteIncrementLabel"\x3e\r\n                                ${webviewStrings.increment}:\r\n                            \x3c/label\x3e\r\n\r\n                            \x3cselect id\x3d"minuteIncrementSelect" class\x3d"rcSelectBox"\r\n                                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                    data-dojo-attach-point\x3d"minuteIncrementSelect"\r\n                                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                    autoComplete: false"\x3e\r\n                                \x3coption value\x3d"0"\x3e${webviewStrings.none}\x3c/option\x3e\r\n                                \x3coption value\x3d"15"\x3e15 ${webviewStrings.minuteShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"30"\x3e30 ${webviewStrings.minuteShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"60"\x3e1 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"120"\x3e2 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"180"\x3e3 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"240"\x3e4 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                                \x3coption value\x3d"480"\x3e8 ${webviewStrings.hourShortHand}\x3c/option\x3e\r\n                            \x3c/select\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"fieldAndLabel"\r\n                             data-dojo-attach-point\x3d"currencySelectionContainer"\x3e\r\n\r\n                            \x3clabel class\x3d"rcTextBoxLabel" for\x3d"currencySelect"\r\n                                   data-dojo-attach-point\x3d"currencyLabel"\x3e\r\n                                ${webviewStrings.currency}:\r\n                            \x3c/label\x3e\r\n\r\n                            \x3cselect id\x3d"currencySelect" class\x3d"rcSelectBox"\r\n                                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                    data-dojo-attach-point\x3d"currencySelect"\r\n                                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                    autoComplete: true"\x3e\r\n                                \x3coption value\x3d"none"\x3e${webviewStrings.none}\x3c/option\x3e\r\n                                \x3coption value\x3d"USD"\x3e\x26dollar;\x3c/option\x3e\r\n                                \x3coption value\x3d"EUR"\x3e\x26euro;\x3c/option\x3e\r\n                                \x3coption value\x3d"GBP"\x3e\x26pound;\x3c/option\x3e\r\n                                \x3coption value\x3d"MXN"\x3e\x26#x20B1;\x3c/option\x3e\r\n                                \x3coption value\x3d"CNY"\x3e\x26yen;\x3c/option\x3e\r\n                            \x3c/select\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"fieldAndLabel labelNoField"\x3e\r\n\r\n                            \x3clabel class\x3d"rcTextBoxLabel" for\x3d"dataType"\r\n                                   data-dojo-attach-point\x3d"dataTypeLabel"\x3e\r\n                                ${webviewStrings.dataType}:\r\n                            \x3c/label\x3e\r\n\r\n                            \x3cspan class\x3d"dataTypeLabel" data-dojo-attach-point\x3d"dataTypeContainer"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                            \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x3c/span\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                 data-dojo-attach-point\x3d"approvalRequiredCB"\r\n                                 data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                 data-dojo-props\x3d\'checked: ${approvalRequired}\'/\x3e\r\n                            \x3clabel class\x3d"labelNode"\r\n                                       data-dojo-attach-point\x3d"approvalLabel"\x3e\r\n                                    ${ahacStrings.approvalRequired}\r\n                                \x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \r\n                    \x3c/fieldset\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"colourSelection" data-dojo-attach-point\x3d"colourSelection"\x3e\r\n                    \x3cdiv class\x3d"colourOption"\x3e\r\n                        \x3cdiv class\x3d"fieldAndLabel coloursField topItem" data-dojo-attach-point\x3d"coloursField"\x3e\r\n                            \x3clabel class\x3d"rcTextBoxLabel"\x3e\x3c/label\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"colourSelector"\r\n                                  data-dojo-type\x3d"webview/admin/schedules/DataTypeColourSelector"\r\n                                  data-dojo-props\x3d"type: 9"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"colourOption"\x3e\r\n                        \x3cdiv class\x3d"fieldAndLabel coloursField topItem" data-dojo-attach-point\x3d"coloursField"\x3e\r\n\r\n                            \x3clabel class\x3d"rcTextBoxLabel"\x3e\x3c/label\x3e\r\n\r\n                            \x3cspan data-dojo-attach-point\x3d"defaultColourSelector"\r\n                                  data-dojo-type\x3d"webview/admin/schedules/DataTypeColourSelector"\r\n                                  data-dojo-props\x3d"type: \'default\'"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- ********************* --\x3e\r\n                \x3c!-- Cleanup Configuration --\x3e\r\n                \x3c!-- ********************* --\x3e\r\n                \x3cdiv class\x3d"enterpriseCleanupConfiguration" data-dojo-attach-point\x3d"enterpriseCleanupConfiguration"\x3e\r\n                    \x3cfieldset\x3e\r\n                        \x3clegend\x3e${webviewStrings.cleanupConfiguration}\x3c/legend\x3e\r\n                        \x3cspan class\x3d"italicText"\x3e\r\n                            ${webviewStrings.cleanupOverview}\r\n                        \x3c/span\x3e\r\n                        \x3cdiv\x3e\r\n                            \x3cfieldset\x3e\r\n                                \x3clegend\x3e${webviewStrings.automaticCleanup}\x3c/legend\x3e\r\n                                \x3cp\x3e\r\n                                    \x3cspan class\x3d"italicText"\x3e\r\n                                        ${webviewStrings.automaticCleanupDescription}\r\n                                    \x3c/span\x3e\r\n                                \x3c/p\x3e\r\n\r\n                                \x3cdiv\x3e\r\n                                    \x3c!-- Enable/disable cleanup radios. --\x3e\r\n                                    \x3cspan class\x3d"fieldAndLabel topItem"\x3e\r\n                                        \x3cspan class\x3d"rcTextBoxLabel"\x3e\r\n                                            ${webviewStrings.automaticCleanupFunction}:\r\n                                        \x3c/span\x3e\r\n\r\n                                        \x3cinput type\x3d"radio" name\x3d"enabledDisabled" checked\r\n                                               data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                               data-dojo-attach-point\x3d\'enabledCleanup\'\r\n                                               data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                                        \x3clabel class\x3d"radioButtonLabel" \x3e${webviewStrings.enabledLabel}\x3c/label\x3e\r\n\r\n                                        \x3cinput type\x3d"radio" name\x3d"enabledDisabled"\r\n                                               data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                               data-dojo-attach-point\x3d\'disabledCleanup\'\r\n                                               data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                                        \x3clabel class\x3d"radioButtonLabel" \x3e${webviewStrings.disabledLabel}\x3c/label\x3e\r\n                                    \x3c/span\x3e\r\n\r\n                                    \x3c!-- Days to remove events. --\x3e\r\n                                    \x3cspan data-dojo-attach-point\x3d"daysToExpireSettings" class\x3d"fieldAndLabel topItem"\x3e\r\n                                        \x3cspan class\x3d"rcTextBoxLabel"\x3e${webviewStrings.ageEventsExpire}:\x3c/span\x3e\r\n                                        \x3cspan data-dojo-attach-point\x3d"numDaysTB"\r\n                                              data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                                              data-dojo-props\x3d"require: true,\r\n                                              baseClass: \'rcTextBox numericInput\',\r\n                                              maxLength: 4,\r\n                                              constraints:{places:0}"\x3e\r\n                                        \x3c/span\x3e\r\n                                    \x3c/span\x3e\r\n\r\n                                    \x3c!-- When to run cleanup. --\x3e\r\n                                    \x3cspan data-dojo-attach-point\x3d"timeToRun" class\x3d"fieldAndLabel topItem"\x3e\r\n                                        \x3cspan class \x3d"rcTextBoxLabel"\x3e${webviewStrings.runAutomaticCleanupAtThisTime}:\x3c/span\x3e\r\n                                        \x3cspan class\x3d"editEventItem"\x3e\r\n                                            \x3cinput data-dojo-attach-point\x3d"cleanupTimeTB"\r\n                                                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                                                   data-dojo-props\x3d"required: true, baseClass: \'rcTextBox cleanupTime\',\r\n                                                   invalidMessage: \'${errorStrings.invalidTimeFormat}\'" /\x3e\r\n                                        \x3c/span\x3e\r\n                                    \x3c/span\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/fieldset\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv\x3e\r\n                            \x3cfieldset\x3e\r\n                                \x3clegend\x3e${webviewStrings.manualCleanup}\x3c/legend\x3e\r\n                                \x3cdiv class\x3d"italicText"\x3e\r\n                                    \x3cspan\x3e\r\n                                        ${webviewStrings.manualCleanupDescription}\r\n                                    \x3c/span\x3e\r\n                                \x3c/div\x3e\r\n\r\n                                \x3cdiv\x3e\r\n                                    \x3cspan  class\x3d"fieldAndLabel topItem"\x3e\r\n\r\n                                        \x3c!-- Days to remove events. --\x3e\r\n                                        \x3cspan class\x3d"rcTextBoxLabel"\x3e${webviewStrings.ageEventsExpire}:\x3c/span\x3e\r\n                                        \x3cspan data-dojo-attach-point\x3d"numDaysOnDemandTB"\r\n                                              data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                                              data-dojo-props\x3d"required: true,\r\n                                              baseClass: \'rcTextBox numericInput ageInDaysInput\',\r\n                                              maxLength: 4,\r\n                                              constraints:{places:0}"\x3e\x3c/span\x3e\r\n                                        \x26nbsp;\x26nbsp;\r\n\r\n                                        \x3c!-- Clean up now button. --\x3e\r\n                                        \x3cspan data-dojo-attach-point\x3d"clearExpiredEventsNowButton"\r\n                                              data-dojo-type\x3d"dijit/form/Button"\r\n                                              data-dojo-props\x3d"baseClass: \'webviewButton cleanUpNowButton\',\r\n                                              iconClass: \'webviewIcon resetIcon\',\r\n                                              label: \'${webviewStrings.cleanUpNow}\'"\x3e${webviewStrings.cleanUpNow}\x3c/span\x3e\r\n                                    \x3c/span\x3e\r\n                                \x3c/div\x3e\r\n\r\n                            \x3c/fieldset\x3e\r\n                        \x3c/div\x3e\r\n\r\n                    \x3c/fieldset\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- End Cleanup Configuration --\x3e\r\n\r\n                \x3cdiv\x3e\r\n                    \x3cfieldset class\x3d"wipeWarningFieldSet"\x3e\r\n                        \x3clegend\x3e${webviewStrings.wipeScheduleHeader}\x3c/legend\x3e\r\n                        \x3cp class\x3d"boldText"\x3e\r\n                            \x3cspan class\x3d"rcIcon warningIcon"\x3e\x3c/span\x3e${rcStrings.warning}\r\n                        \x3c/p\x3e\r\n                        \x3cp class\x3d"italicText"\x3e\r\n                            ${webviewStrings.wipeScheduleBody}\r\n                        \x3c/p\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"clearSchedulesButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d"baseClass: \'webviewButton clearSchedules\',\r\n                              iconClass: \'webviewIcon resetIcon\',\r\n                              label: \'wipeSchedules\'"\x3e\x3c/span\x3e\r\n                    \x3c/fieldset\x3e\r\n                \x3c/div\x3e\r\n\r\n            \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3c!-- Schedule Tree Creator --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"scheduleTreeContainerNode"\x3e\r\n        \x3c!--Results list--\x3e\r\n        \x3cdiv class\x3d"hidden results-container"\r\n             data-dojo-attach-point\x3d"resultsWidget"\r\n             data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n             data-dojo-props\x3d\'baseClass: "schedule-tree-results",\r\n             paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n        \x3c!-- right side --\x3e\r\n        \x3cdiv class\x3d"nav-group-container" data-dojo-attach-point\x3d"builderContainer"\x3e\r\n            \x3cdiv class\x3d"webviewAdminSites webviewContentPaneDnD enterpriseScheduleScheduleTreePane"\r\n                 data-dojo-attach-point\x3d"builderWidget"\r\n                 data-dojo-type\x3d"webview/widget/WebviewContentPane"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--END--\x3e\r\n\x3c/div\x3e',
"url:webview/admin/schedules/templates/scheduleItem.html":'\x3cdiv class\x3d"pointsItem"\x3e\r\n    \x3cspan class\x3d"webviewIcon dragHandle" data-dojo-attach-point\x3d"grabIcon"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"scheduleLabel"\x3e\r\n\t\t${sysName}/${deviceName}/${schedName} (${bacnetID})\r\n\t\x3c/span\x3e\r\n\x3c/div\x3e',"url:webview/admin/schedules/templates/scheduleTreeItem.html":'\x3cdiv class\x3d"treeItemContainer" role\x3d"presentation"\x3e\r\n\t\x3cdiv class\x3d"treePlaceHolderBefore hidden" data-dojo-attach-point\x3d"beforePlaceHolder"\x3e\x3c/div\x3e\r\n\t\x3cspan class\x3d"webviewIcon expandIcon expandNode" data-dojo-attach-point\x3d"expandNode"\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"scheduleTreeItem" data-dojo-attach-point\x3d"contentNode" role\x3d"presentation"\x3e\r\n\r\n\t\t\x3cspan\r\n\t\t\t  data-dojo-attach-point\x3d"scheduleTreeCBContainer"\x3e\r\n\t\t\x3c/span\x3e\r\n\r\n\t\t\x3cspan class\x3d\'colourAndLabel\'\x3e\r\n\t\t\t\x3cspan class\x3d"blockColorIndicator clickable"\r\n\t\t\t\t  data-dojo-attach-point\x3d"scheduleColorIndicator"\x3e\r\n\t\t\t\t\x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"colorPickerContainer"\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"colorPickerNode"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3c/span\x3e\r\n\t\t\t\x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"scheduleLabel clickable"\r\n                  data-dojo-attach-point\x3d"scheduleName"\r\n                  data-dojo-type\x3d"dijit/InlineEditBox"\r\n                  data-dojo-props\x3d\'baseClass: "schedule-name-editor", width: "80%",\r\n                  editorParams: {baseClass: "rcTextBox", maxLength: 50}\'\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n\r\n\t\t\x3cspan class\x3d"bacnetLabel" title\x3d"${bacnetID}" data-dojo-attach-point\x3d"bacnetLabel"\x3e${bacnetID}\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"systemLabel" title\x3d"${sysName}"\x3e${sysName}\x3c/span\x3e\r\n        \x3cspan class\x3d"rateLabel" title\x3d"${rateString}" data-dojo-attach-point\x3d"rateLabel"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d\'editNodeBorder\' data-dojo-attach-point\x3d"editNodeIcon"\x3e\r\n\t\t\t\x3cspan class\x3d"rc24Icon editIcon" data-dojo-attach-point\x3d"enableEditNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/span\x3e\r\n\t\x3cdiv class\x3d"treePlaceHolderAfter" data-dojo-attach-point\x3d"afterPlaceHolder"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/DialogRateEdit.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"edit-rate-dialog"\r\n         data-dojo-type\x3d"dijit/Dialog"\r\n         data-dojo-attach-point\x3d"_dialog"\r\n         data-dojo-props\x3d\'refocus:false, duration: 1\'\r\n         title\x3d"${webviewStrings.setScheduleRate}"\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_displayName"\x3e${webviewStrings.scheduleRateDialog}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_displayName"\x3e${webviewStrings.scheduleCost}${webviewStrings.scheduleRate}:\x3c/span\x3e\r\n            \x3cinput type\x3d"number" min\x3d"0" max\x3d"9999.99" step\x3d"0.01"\r\n                   data-dojo-attach-point\x3d"_valueRate"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "form-input scheduleRateInput",\r\n                           maxLength:7, trim: true,\r\n                           selectOnClick: true,\r\n                           constraints: {\r\n                           max: 9999.99,\r\n                           min: 0\r\n                           },\r\n                           pattern: "^\\\\d*([\\\\.,]\\\\d{1,2})?$"\' /\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n        \x3cp class\x3d"scheduleRateDialogButtons"\x3e\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_ok"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_cancel"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnCancel}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n                CANCEL\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-props\x3d\'title:"Invalid input"\' data-dojo-attach-point\x3d"_errorDialog"\x3e\r\n        \x3cp data-dojo-attach-point\x3d"errorTextContainer"\x3e\x3c/p\x3e\r\n        \x3cp class\x3d"scheduleRateDialogButtons"\x3e\r\n            \x3cbutton data-dojo-type\x3ddijit/form/Button\r\n                    data-dojo-attach-point\x3d"_errOk"\r\n                    data-dojo-attach-event\x3d"onClick: _closeErrorDialog"\r\n                    data-dojo-props\x3d\'label: "${rcStrings.btnOk}",\r\n                    baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n                OK\r\n            \x3c/button\x3e\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/trees/templates/navTreeAvatar.html":'\x3cdiv class\x3d"treeItemContainer navTreeAvatar"\r\n     role\x3d"presentation"\x3e\r\n    \x3cspan class\x3d"navTreeItem"\r\n          data-dojo-attach-point\x3d"contentNode"\r\n          role\x3d"presentation"\x3e\r\n            \x3cspan class\x3d"navIcon"\r\n                  data-dojo-attach-point\x3d"navIcon"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"pointLabel"\r\n                  data-dojo-attach-point\x3d"displayLabel"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/schedules/templates/NavScheduleToolbar.html":'\x3cdiv class\x3d"navScheduleToolbar" data-dojo-attach-point\x3d"navScheduleToolbar"\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"viewButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.view}",\r\n          disabled: true,\r\n          iconClass: "rc24Icon viewIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"selectAllButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n          iconClass: "rc24Icon selectAllIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"deleteButton" data-dojo-props\x3d\'titleStr : "${nlsStrings.rcDelete}",\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"saveButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.save}",\r\n          iconClass: "rc24Icon saveIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"hidden" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelSaveButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.cancelSave}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n\x3c/div\x3e',
"url:webview/admin/users/templates/users.html":'\x3c!-- BUTTON TABS --\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n     data-dojo-type\x3d"webview/admin/users/UserToolbar"\r\n     data-dojo-props\x3d\'hasIconButtons: false,\r\n     isIndividualUser: false, site: ${site},\r\n     selectedButton: "usersListButton"\'\x3e\x3c/div\x3e\r\n\r\n\x3cdiv data-dojo-attach-point\x3d"listUsersArea" class\x3d"webviewContentPane"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_gridToolbar"\r\n         data-dojo-type\x3d"webview/admin/users/UserListToolbar"\r\n         data-dojo-props\x3d\'site: ${site}\'\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/users/templates/_basePost.html":"\x3c/div\x3e","url:webview/admin/users/templates/_basePre.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"users webviewAdminSites" \x3e',"url:webview/admin/users/templates/UserToolbar.html":'\x3cdiv class\x3d"admin-toolbar user-toolbar"\x3e\r\n    \r\n    \x3cdiv class\x3d"button-container"\r\n         data-dojo-attach-point\x3d"buttonsContainer"\x3e\r\n        \r\n        \x3cspan data-dojo-attach-point\x3d"usersListButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton list\',\r\n              iconClass: \'rcIcon userListIcon\',\r\n              label: \'${webviewStrings.listUsers}\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"addUserButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton addUser\',\r\n              iconClass: \'rcIcon addIcon\',\r\n              label: \'${webviewStrings.addUser}\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"permissionsButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton permissions\',\r\n              iconClass: \'rcIcon permissionsIcon\',\r\n              label: \'${webviewStrings.userPermissions}\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"loginInfoButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton loginInfo\',\r\n              iconClass: \'rcIcon loginInfoIcon\',\r\n              label: \'${webviewStrings.loginInfo}\'"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"rolesListButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton rolesList\',\r\n              iconClass: \'svg-rolesIcon\',\r\n              label: \'${roleStrings.roleList}\'"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv class\x3d"icon-button-container" \r\n         data-dojo-attach-point\x3d"iconContainer"\x3e\r\n        \r\n        \x3cspan class\x3d"hidden" \r\n              data-dojo-attach-point\x3d"selectAllButton"\r\n              data-dojo-type\x3d"webview/widget/ToolbarButton"              \r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n              iconClass: "rc24Icon selectAllIcon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n        \r\n        \x3cspan class\x3d"hidden" \r\n              data-dojo-attach-point\x3d"resetButton"\r\n              data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-props\x3d\'titleStr: "${alarmsStrings.reset}",\r\n              iconClass: "rc24Icon toolbarButtonIcon userListToolbarResetIcon"\'\x3e                  \r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" \r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-type\x3d"webview/widget/ToolbarButton"              \r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.save}",\r\n              iconClass: "rc24Icon saveIcon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" \r\n              data-dojo-attach-point\x3d"cancelButton" \r\n              data-dojo-type\x3d"webview/widget/ToolbarButton"              \r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.cancel}",\r\n              iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n        \x3c/span\x3e\r\n        \r\n    \x3c/div\x3e\r\n    \r\n\x3c/div\x3e\r\n',
"url:webview/admin/users/templates/LoginInfo.html":'\x3c!-- BUTTON TABS --\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n     data-dojo-type\x3d"webview/admin/users/UserToolbar"\r\n     data-dojo-props\x3d\'hasIconButtons: true, hasSelectAll: false,\r\n     isIndividualUser: true, site: ${site}, userID: "${userID}", ID: "${ID}",\r\n     selectedButton: "loginInfoButton"\'\x3e\x3c/div\x3e\r\n\r\n\x3c!-- LOGIN INFO TAB --\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"loginInfoArea"\r\n     data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n     class\x3d"webviewAdminSites users loginInfo"\x3e\r\n\r\n    \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"loginInfoContainer"\x3e\r\n\r\n        \x3cp class\x3d"wizard-prompt hidden" data-dojo-attach-point\x3d"loginPromptNode" \x3e${webviewStrings.loginInfoPrompt}\x3c/p\x3e\r\n\r\n        \x3cdiv class\x3d"leftContainer doubleContent" data-dojo-attach-point\x3d"loginInfoLeft"\x3e\r\n            \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel usernameLabel"\x3e\r\n                    ${webviewStrings.userName}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cspan class\x3d"username" data-dojo-attach-point\x3d"loginInfoUsername"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel usertypeLabel"\x3e\r\n                    ${webviewStrings.userType}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cspan class\x3d"usertype" data-dojo-attach-point\x3d"loginInfoUserType"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel logininfo-enable-disable" data-dojo-attach-point\x3d"enabledField"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel" for\x3d"userEnabled"\r\n                       data-dojo-attach-point\x3d"userEnabledLabel"\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3cdiv class\x3d\'radioButtonContainer\' \x3e\r\n                    \x3cinput type\x3d"radio" name\x3d"enabledDisabled"\r\n                           data-dojo-type\x3d"dijit/form/RadioButton"\r\n                           data-dojo-attach-point\x3d\'enabledRadioButton\'\r\n                           data-dojo-props\x3d"baseClass: \'webviewAdminRadio enabledRadio\',\r\n                           checked: true" /\x3e\r\n                    \x3clabel class\x3d"radioButtonLabel" \x3e${webviewStrings.enabledLabel}\x3c/label\x3e\r\n\r\n                    \x3cinput type\x3d"radio" name\x3d"enabledDisabled"\r\n                           data-dojo-type\x3d"dijit/form/RadioButton"\r\n                           data-dojo-attach-point\x3d\'disabledRadioButton\'\r\n                           data-dojo-props\x3d"baseClass: \'webviewAdminRadio disabledRadio\'" /\x3e\r\n                    \x3clabel class\x3d"radioButtonLabel" \x3e ${webviewStrings.disabledLabel}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel nonPublicField"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\r\n                       data-dojo-attach-point\x3d"givenNameLabel"\x3e\r\n                    ${webviewStrings.name}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cinput name\x3d"givenName"\r\n                       autocomplete\x3d"nope"\r\n                       data-dojo-attach-point\x3d"givenName"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                       required: false,\r\n                       maxLength: 50\'/\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel nonPublicField"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\r\n                       data-dojo-attach-point\x3d"loginInfoEmailLabel"\x3e\r\n                    ${webviewStrings.emailAddress}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cinput name\x3d"loginInfoEmail"\r\n                       autocomplete\x3d"nope"\r\n                       data-dojo-attach-point\x3d"loginInfoEmail"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'\r\n                       baseClass: "rcTextBox",\r\n                       invalidMessage: "${errorStrings.invalidEmail}",\r\n                       required: false\'/\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel nonPublicField" data-dojo-attach-point\x3d"passwordContainer"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\r\n                       data-dojo-attach-point\x3d"loginInfoPasswordLabel"\x3e\r\n                    ${webviewStrings.newPass}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cinput name\x3d"loginInfoPassword" type\x3d"password"\r\n                       autocomplete\x3d"new-password"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-attach-point\x3d"loginInfoPassword"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox newPasswordField",\r\n                       invalidMessage: "${errorStrings.pwDoNotMatch}",\r\n                       required: false\' /\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"fieldAndLabel nonPublicField" data-dojo-attach-point\x3d"passwordMatchContainer"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\r\n                       data-dojo-attach-point\x3d"passwordVerifyLabel"\x3e\r\n                    ${webviewStrings.confirmationPassword}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cinput name\x3d"passwordVerify" type\x3d"password"\r\n                       autocomplete\x3d"new-password"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-attach-point\x3d"passwordVerify"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox verifyPasswordField",\r\n                       invalidMessage: "${errorStrings.pwDoNotMatch}",\r\n                       required: false\' /\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel nonPublicField logininfo-reset-password" data-dojo-attach-point\x3d"passwordResetContainer"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\x3e\x26nbsp;\x3c/label\x3e\x3c!-- empty label for spacing --\x3e\r\n                \x3cinput type\x3d"checkbox" id\x3d"${id}_passwordResetRequired"\r\n                       data-dojo-attach-point\x3d"passwordResetRequired"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                \x3clabel class\x3d"checkbox-label right-side" for\x3d"${id}_passwordResetRequired" data-dojo-attach-point\x3d"passwordResetRequiredLB"\x3e${webviewStrings.passwordResetRequired}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"approvalPasswordWidget"\r\n                 data-dojo-type\x3d"webview/admin/users/widget/ApprovalPassword"\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"fieldAndLabel textAreaField logininfo-comments"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\r\n                       data-dojo-attach-point\x3d"commentsLabel"\x3e\r\n                    ${webviewStrings.comments}:\r\n                \x3c/label\x3e\r\n\r\n                \x3ctextarea name\x3d"comments"\r\n                          class\x3d"permissionsTextArea"\r\n                          data-dojo-attach-point\x3d"comments"\r\n                          data-dojo-type\x3d"dijit/form/Textarea"\r\n                          data-dojo-props\x3d"baseClass: \'rcTextArea\',\r\n                          maxLength: 400"\x3e\r\n                \x3c/textarea\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel nonPublicField logininfo-unlock-user" data-dojo-attach-point\x3d"unlockUserContainer"\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\x3e\x26nbsp;\x3c/label\x3e\x3c!-- empty label for spacing --\x3e\r\n                \x3cinput type\x3d"checkbox" id\x3d"${id}_unlockUser"\r\n                       data-dojo-attach-point\x3d"unlockUser"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox"\r\n                       data-dojo-props\x3d"disabled: false, checked: false"/\x3e\r\n                \x3clabel class\x3d"checkbox-label right-side" for\x3d"${id}_unlockUser" data-dojo-attach-point\x3d"unlockUserLB"\x3e${webviewStrings.unlockUser}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"rightContainer doubleContent"   data-dojo-attach-point\x3d"loginInfoRight"\x3e\r\n            \x3cdiv class\x3d"fieldAndLabel nav-tree-fields" data-dojo-attach-point\x3d"navTreeFields"\x3e\r\n                \x3cspan data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                      data-dojo-attach-point\x3d"navTreeRoleIcon"\x3e\r\n                \x3c/span\x3e\r\n\r\n                \x3clabel for\x3d"navTree" class\x3d"rcTextBoxLabel" data-dojo-attach-point\x3d"navTreeLabel"\x3e\r\n                    ${webviewStrings.tree}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cspan data-dojo-attach-point\x3d"navTreeSelectContainer"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel ahac-template-fields" data-dojo-attach-point\x3d"ahacReportTemplateFields"\x3e\r\n                \x3cspan data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                      data-dojo-attach-point\x3d"ahacTemplateRoleIcon"\x3e\r\n                \x3c/span\x3e\r\n\r\n                \x3clabel for\x3d"ahacReportTemplateId" class\x3d"rcTextBoxLabel" data-dojo-attach-point\x3d"ahacReportTemplateLabel"\x3e\r\n                    ${ahacStrings.reportTemplate}:\r\n                \x3c/label\x3e\r\n\r\n                \x3cspan data-dojo-attach-point\x3d"ahacReportSelectContainer"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\r\n                data-dojo-type\x3d\'webview/admin/users/widget/LoginGroupSelectors\'\r\n                data-dojo-attach-point\x3d\'_loginGroupSelectors\'\r\n                data-dojo-props\x3d"site: \'${site}\'"\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel permitted-systems-field" data-dojo-attach-point\x3d"permittedSystemsContainer"\x3e\r\n                \x3cspan data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                      data-dojo-attach-point\x3d"permittedSystemsRoleIcon"\x3e\r\n                \x3c/span\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\x3e${webviewStrings.permittedSystems}:\x3c/label\x3e\r\n                \x3cdiv class\x3d"userPermittedSystems" data-dojo-attach-point\x3d"permittedSystemsNode"\x3e\r\n                    \x3cspan class\x3d"permittedSystemTags" data-dojo-attach-point\x3d"systemTags"\x3e${rcStrings.any}\x3c/span\x3e\r\n                    \x3cspan class\x3d"webviewIcon smallAddIcon" style\x3d"display: inline-block" data-dojo-attach-point\x3d"addButton"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"userPermittedSystems"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"systemCBList"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel permitted-schedules-field" data-dojo-attach-point\x3d"permittedSchedulesContainer"\x3e\r\n                \x3cspan data-dojo-type\x3d"webview/widget/RoleIcon"\r\n                      data-dojo-attach-point\x3d"permittedSchedulesRoleIcon"\x3e\r\n                \x3c/span\x3e\r\n                \x3clabel class\x3d"rcTextBoxLabel"\x3e${webviewStrings.permittedSchedules}:\x3c/label\x3e\r\n                \x3cspan class\x3d"linkable" data-dojo-attach-point\x3d"permittedSchedules"\x3e${webviewStrings.allBlocks}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"fieldAndLabel nonPublicField roles-field" data-dojo-attach-point\x3d"rolesContainer"\x3e\r\n                \x3cspan\x3e\x3c/span\x3e \x3c!-- Used for alignment --\x3e\r\n                \x3clabel class\x3d"add-user-roles-label rcTextBoxLabel"\x3e${webviewStrings.roleLabel}:\x3c/label\x3e\r\n                \x3cdiv class\x3d"users-assigned-roles" data-dojo-attach-point\x3d"rolesNode"\x3e\r\n                    \x3cspan class\x3d"users-roles-tags" data-dojo-attach-point\x3d"rolesTags"\x3e${roleStrings.noRolesAssigned}\x3c/span\x3e\r\n                    \x3cspan class\x3d"webviewIcon smallAddIcon" data-dojo-attach-point\x3d"addRoleButton"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"users-assigned-roles"\x3e\r\n                    \x3cspan  data-dojo-attach-point\x3d"rolesCBList"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"loginWizardNextContainer" class\x3d"add-user-flex wizard-field-and-label hidden"\x3e\r\n                \x3ca href\x3d"#" class\x3d\'add-user-next-link wizard-external-next-link wizard-next-link\' data-dojo-attach-point\x3d"loginWizardNextLink" data-dojo-attach-event\x3d"onclick: _onClickWizardNext" title\x3d"${webviewStrings.nextStep}"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"wizardNextButtonIcon" class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"wizardNextButtonText" class\x3d"wizard-next-label"\x3e${webviewStrings.next}\x3c/span\x3e\r\n                \x3c/a\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/users/widget/templates/ApprovalPassword.html":'\x3cdiv class\x3d"approvalPassword" data-dojo-attach-point\x3d"approvalPasswordLogicContainer"\x3e\r\n    \x3cdiv class\x3d"fieldAndLabel" data-dojo-attach-point\x3d"approvalPasswordContainer"\x3e\r\n        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"${id}_approvalPassword"\x3e\r\n            ${webviewStrings.approvalPassword}:\r\n        \x3c/label\x3e\r\n\r\n        \x3cinput  name\x3d"approvalPassword" id\x3d"${id}_approvalPassword"\r\n                type\x3d"password"\r\n                autocomplete\x3d"new-password"\r\n                data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                data-dojo-attach-point\x3d"approvalPassword"\r\n                data-dojo-props\x3d\'baseClass: "rcTextBox passwordField",\r\n                invalidMessage: "${errorStrings.pwDoNotMatch}",\r\n                required: true\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"fieldAndLabel" data-dojo-attach-point\x3d\'approvalPasswordVerifyContainer\'\x3e\r\n        \x3clabel class\x3d"rcTextBoxLabel" for\x3d"${id}_approvalPasswordVerify" data-dojo-attach-point\x3d"approvalPasswordLB"\x3e\r\n            ${webviewStrings.verifyApprovalPassword}:\r\n        \x3c/label\x3e\r\n\r\n        \x3cinput name\x3d"approvalPasswordVerify" id\x3d"${id}_approvalPasswordVerify"\r\n               type\x3d"password"\r\n               autocomplete\x3d"new-password"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-attach-point\x3d"approvalPasswordVerify"\r\n               data-dojo-props\x3d\'baseClass: "rcTextBox passwordVerifyField",\r\n               invalidMessage: "${errorStrings.pwDoNotMatch}",\r\n               required: true\' /\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n        \x3cspan class\x3d"rcTextBoxLabel blankPadding"  data-dojo-attach-point\x3d"approvalPasswordPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n        \x3cspan class\x3d"rcTextBoxLabel  passwordMatchNote" data-dojo-attach-point\x3d"approvalPasswordMsgNode"\x3e${errorStrings.approvalPasswordDifference}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"fieldAndLabel nonPublicField" data-dojo-attach-point\x3d"approvalPasswordResetContainer"\x3e\r\n        \x3clabel class\x3d"rcTextBoxLabel"\x3e\x26nbsp;\x3c/label\x3e\x3c!-- empty label for spacing --\x3e\r\n        \x3cinput type\x3d"checkbox" id\x3d"${id}_approvalPasswordResetRequired" checked\r\n               data-dojo-attach-point\x3d"approvalPasswordResetRequired"\r\n               data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\r\n        \x3clabel class\x3d"checkbox-label right-side" for\x3d"${id}_approvalPasswordResetRequired" data-dojo-attach-point\x3d"approvalPasswordResetRequiredLB"\x3e${webviewStrings.approvalPasswordResetRequired}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/users/templates/Permissions.html":'\x3c!-- BUTTON TABS --\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n     data-dojo-type\x3d"webview/admin/users/UserToolbar"\r\n     data-dojo-props\x3d\'hasIconButtons: true, hasSelectAll: true,\r\n     isIndividualUser: true, site: ${site}, userID: "${userID}", ID: "${ID}",\r\n     selectedButton: "permissionsButton"\'\x3e\x3c/div\x3e\r\n\r\n\x3cdiv data-dojo-attach-point\x3d"permissionsArea"\r\n     data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n     class\x3d"webviewAdminSites users permissions"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"permissionsContainer"\x3e\r\n        \x3cspan class\x3d"hidden rc24Icon selectAllIcon" data-dojo-attach-point\x3d"selectAllPermissions" title\x3d"${webviewStrings.selectAll}"\x3e\x3c/span\x3e\r\n        \x3cp class\x3d"wizard-prompt hidden" data-dojo-attach-point\x3d"permissionsPromptNode" \x3e${webviewStrings.userPermissionsPrompt}\x3c/p\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"rolemaskPermissions"\r\n             data-dojo-type\x3d"webview/admin/users/RolemaskPermissions"\r\n             data-dojo-props\x3d"site: ${site}, isRole: false"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/users/templates/PermittedSchedules.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites permitted-schedules singlePage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3c!-- Toolbar --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n        \x3cdiv class\x3d"commitButtons" data-dojo-type\x3d"webview/widget/CommitButtons"\r\n             data-dojo-attach-point\x3d"propertiesCommitButtons"\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Main Content --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"permittedSchedulesContainer"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"         \r\n         class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"propertiesContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"scheduleTreeContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/users/templates/NavPermissionsToolbar.html":'\x3cdiv class\x3d"navPermissionsToolbar" data-dojo-attach-point\x3d"navPermissionsToolbar"\x3e\r\n\r\n    \x3cspan class\x3d"toolbarButton" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"selectAllButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n          iconClass: "rc24Icon selectAllIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cdiv class\x3d"commitButtons" data-dojo-type\x3d"webview/widget/CommitButtons"\r\n         data-dojo-attach-point\x3d"commitButtons"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/users/templates/AddUser.html":'\x3cdiv data-dojo-attach-point\x3d"addUserArea"\r\n     data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n     class\x3d"webviewAdminSites users addPage"\x3e\r\n\r\n    \x3cdiv class\x3d"formContainer" data-dojo-attach-point\x3d"adChoice"\x3e\r\n        \x3cp class\x3d"wizard-prompt hidden" data-dojo-attach-point\x3d"addPromptNode" \x3e${webviewStrings.addUserPrompt}\x3c/p\x3e\r\n        \x3cspan class\x3d"rcTextBoxLabel requiredText requiredNote" \x3e* ${webviewStrings.required}\x3c/span\x3e\r\n        \x3cdiv class\x3d\'fieldAndLabel ADUserCB\'\x3e\r\n            \x3clabel for\x3d"ldap" class\x3d"rcTextBoxLabel link"\r\n                   data-dojo-attach-point\x3d"activeDirectoryLabel"\r\n                   data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                   data-dojo-props\x3d\'helpText: "${webviewStrings.activeDirectoryHint}",\r\n                   label: "${webviewStrings.activeDirectoryUser}"\'\x3e\r\n            \x3c/label\x3e\r\n\r\n            \x3cinput type\x3d"radio" name\x3d"userType" id\x3d"ldap" checked value\x3d"ldap"\r\n                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                   data-dojo-attach-point\x3d\'ldapUser\'\r\n                   data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel ADGroupCB"\x3e\r\n            \x3clabel for\x3d"ldapGroup" class\x3d"rcTextBoxLabel link"\r\n                   data-dojo-attach-point\x3d"activeDirectoryGroupLabel"\r\n                   data-dojo-type\x3d"webview/admin/widget/HelpLink"\r\n                   data-dojo-props\x3d\'helpText: "${webviewStrings.activeDirectoryGroupHint}",\r\n                   label: "${webviewStrings.activeDirectoryGroup}"\'\x3e\r\n            \x3c/label\x3e\r\n\r\n            \x3cinput type\x3d"radio" name\x3d"userType" id\x3d"ldapGroup" value\x3d"ldapGroup"\r\n                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                   data-dojo-attach-point\x3d\'ldapGroup\'\r\n                   data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel localUserCB"\x3e\r\n            \x3clabel for\x3d"local" class\x3d"rcTextBoxLabel"\x3e\r\n                ${webviewStrings.localUser}:\r\n            \x3c/label\x3e\r\n\r\n            \x3cinput type\x3d"radio" name\x3d"userType" id\x3d"local" value\x3d"local"\r\n                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                   data-dojo-attach-point\x3d\'localUser\'\r\n                   data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'"\r\n                   class\x3d"localUserCB"/\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n            \x3clabel class\x3d"rcTextBoxLabel " for\x3d"username"\r\n                   data-dojo-attach-point\x3d"adLabel"\x3e\r\n                ${webviewStrings.userName}: \x3cspan class\x3d"requiredText mandatory"\x3e*\x3c/span\x3e\r\n            \x3c/label\x3e\r\n\r\n            \x3cinput name\x3d"username"\r\n                   data-dojo-attach-point\x3d"username"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'required: true,\r\n                   invalidMessage: "${errorStrings.loginUserEmpty}",\r\n                   baseClass: "rcTextBox usernameField",\r\n                   maxLength: 50\' /\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel" data-dojo-attach-point\x3d"addPasswordContainer"\x3e\r\n            \x3cspan class\x3d"rcTextBoxLabel"\x3e\r\n                ${webviewStrings.password}:  \x3cspan class\x3d"requiredText mandatory"\x3e*\x3c/span\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cinput  name\x3d"loginInfoPassword" type\x3d"password"\r\n                    autocomplete\x3d"new-password"\r\n                    data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                    data-dojo-attach-point\x3d"addUserPassword"\r\n                    data-dojo-props\x3d\'baseClass: "rcTextBox passwordField",\r\n                    invalidMessage: "${errorStrings.pwDoNotMatch}",\r\n                    required: true\' /\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel" data-dojo-attach-point\x3d"addPasswordVerifyContainer"\x3e\r\n            \x3clabel class\x3d"rcTextBoxLabel" data-dojo-attach-point\x3d"addPasswordVerifyLabel"\x3e\r\n                ${webviewStrings.confirmationPassword}: \x3cspan class\x3d"requiredText mandatory"\x3e*\x3c/span\x3e\r\n            \x3c/label\x3e\r\n\r\n            \x3cinput name\x3d"passwordVerify" type\x3d"password"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-attach-point\x3d"addUserPasswordVerify"\r\n                   data-dojo-props\x3d\'baseClass: "rcTextBox passwordVerifyField",\r\n                   invalidMessage: "${errorStrings.pwDoNotMatch}",\r\n                   required: true\' /\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel nonPublicField" data-dojo-attach-point\x3d"resetPasswordContainer"\x3e\r\n            \x3clabel class\x3d"rcTextBoxLabel"\x3e\x26nbsp;\x3c/label\x3e\x3c!-- empty label for spacing --\x3e\r\n            \x3cinput type\x3d"checkbox" id\x3d"${id}_passwordResetRequired" checked\r\n                   data-dojo-attach-point\x3d"passwordResetRequired"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\r\n            \x3clabel class\x3d"checkbox-label right-side" for\x3d"${id}_passwordResetRequired" data-dojo-attach-point\x3d"passwordResetRequiredLB"\x3e${webviewStrings.passwordResetRequired}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"approvalPasswordWidget"\r\n             data-dojo-type\x3d"webview/admin/users/widget/ApprovalPassword"\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel nonPublicField" data-dojo-attach-point\x3d\'addDisplayNameContainer\'\x3e\r\n            \x3clabel class\x3d"rcTextBoxLabel" for\x3d"displayName"\r\n                   data-dojo-attach-point\x3d"displayNameLabel"\x3e\r\n                ${webviewStrings.displayName}: \x3cspan class\x3d"requiredText mandatory"\x3e*\x3c/span\x3e\r\n            \x3c/label\x3e\r\n\r\n            \x3cinput name\x3d"displayName"\r\n                   data-dojo-attach-point\x3d"displayName"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'baseClass: "rcTextBox displayNameField", required: true,\r\n                   invalidMessage: "${errorStrings.displayNameEmpty}",\r\n                   maxLength: 50\r\n                   \'/\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"fieldAndLabel"\x3e\r\n            \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--For Padding purposes--\x3e\r\n            \x3cspan class\x3d"rcTextBoxLabel  requiredNote" data-dojo-attach-point\x3d"userMsgNode"\x3e*${webviewStrings.usernamesPermanent}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"addWizardNextContainer" class\x3d"fieldAndLabel wizard-field-and-label hidden"\x3e\r\n            \x3cspan class\x3d"rcTextBoxLabel"\x3e\x26nbsp;\x3c/span\x3e\r\n            \x3ca href\x3d"#" class\x3d\'wizard-external-next-link wizard-next-link next-button-bottom\' data-dojo-attach-point\x3d"addWizardNextLink" data-dojo-attach-event\x3d"onclick: _onClickWizardNext" title\x3d"${webviewStrings.nextStep}"\x3e\r\n                \x3cspan class\x3d"wizard-arrow webviewIcon whitePlayIcon"\x3e\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"" class\x3d"wizard-next-label"\x3e${webviewStrings.next}\x3c/span\x3e\r\n            \x3c/a\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/navGroups/templates/navGroups.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites navigation-groups" style\x3d"width:100%; clear:both;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"contentArea"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n         class\x3d"webviewAdminSites"\x3e\r\n\r\n        \x3cdiv class\x3d"columned-form-container double-columned" data-dojo-attach-point\x3d"listContainer"\x3e\r\n\r\n            \x3c!--ADD--\x3e\r\n            \x3cdiv class\x3d"form-column left-column add-navigation-groups"\x3e\r\n\r\n                \x3cspan class\x3d"rcTextBoxLabel name-label"\r\n                          data-dojo-attach-point\x3d"dataLabel"\x3e\x3c/span\x3e\r\n\r\n                \x3cspan data-dojo-attach-point\x3d"nameTB"\r\n                        data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                        data-dojo-props\x3d"baseClass: \'rcTextBox form-input name-input\',\r\n                        required: true,\r\n                        maxLength: 50"\x3e\x3c/span\x3e\r\n\r\n                \x3cspan class\x3d"rcTextBoxLabel graphic-label"\r\n                    data-dojo-attach-point\x3d"graphicFileLabel"\x3e${webviewStrings.navGroupGraphic}:\x3c/span\x3e\r\n\r\n\r\n                \x3cinput data-dojo-attach-point\x3d"graphicFileTB"\r\n                    data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                    data-dojo-props\x3d"baseClass: \'rcTextBox navGroupGraphic form-input graphic-input\',\r\n                    required: true" /\x3e\r\n\r\n                \x3cspan class \x3d"uploader-buttons"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"graphicFileUploader"\x3e\x3c/span\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"imageGalleryButton"\r\n                            data-dojo-type\x3d"dijit/form/Button"\r\n                            data-dojo-props\x3d"baseClass: \'webviewButton gallery\',\r\n                            iconClass:\'webviewIcon galleryIcon\',\r\n                            label: \'${webviewStrings.gallery}\'"\x3e\r\n                    \x3c/span\x3e\r\n                \x3c/span\x3e\r\n\r\n                \x3cdiv class\x3d"add-button-container"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"addButton"\r\n                          data-dojo-type\x3d"dijit/form/Button"\r\n                          style\x3d"margin-right: -1em;"\r\n                          data-dojo-props\x3d"baseClass: \'webviewButton addSite\',\r\n                          iconClass: \'rcIcon addSiteIcon\',\r\n                          label: \'ADD\'"\r\n                          data-dojo-attach-event\x3d"onClick: _onAddItem"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"form-column right-column existing-navigation-groups" data-dojo-attach-point\x3d"rightContainer"\x3e\r\n\r\n                \x3cdiv data-dojo-attach-point\x3d"_multiSelect"\r\n                     data-dojo-type\x3d"webview/widget/MultiSelectBox"\r\n                     data-dojo-props\x3d"fieldLabel: \'List:\'"\x3e\r\n\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"field-and-label hiddenButtons"\x3e\r\n                    \x3cspan class\x3d"rcTextBoxLabel blankPadding"\x3e\x26nbsp;\x3c/span\x3e \x3c!--Used for padding--\x3e\r\n                    \x3cdiv class\x3d"" style\x3d\'margin-top: .5em\'\x3e\r\n\r\n                        \x3cdiv class\x3d"hidden"\r\n                             data-dojo-attach-point\x3d"editButton"\r\n                             data-dojo-type\x3d"dijit/form/Button"\r\n                             data-dojo-props\x3d\'baseClass: "webviewButton editSite",\r\n                             iconClass: "rcIcon editSiteIcon",\r\n                             label: "${webviewStrings.rcbEdit}"\'\r\n                             data-dojo-attach-event\x3d"onClick: _editItem"\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"hidden"\r\n                             data-dojo-attach-point\x3d"previewButton"\r\n                             data-dojo-type\x3d"dijit/form/Button"\r\n                             data-dojo-props\x3d\'baseClass: "webviewButton previewSites",\r\n                             iconClass: "rcIcon previewIcon",\r\n                             label: "${webviewStrings.rcbPreview}"\'\r\n                             data-dojo-attach-event\x3d"onClick: _onPreview"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"hidden"\r\n                             data-dojo-attach-point\x3d"deleteButton"\r\n                             data-dojo-type\x3d"dijit/form/Button"\r\n                             data-dojo-props\x3d\'baseClass: "webviewButton deleteSites",\r\n                             iconClass: "rcIcon deleteSitesIcon",\r\n                             label: "${webviewStrings.rcbDelete}"\'\r\n                             data-dojo-attach-event\x3d"onClick: _onDeleteItem"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e',
"url:webview/admin/navGroups/templates/navGroup.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites navGroups navigation-group" style\x3d"width:100%; clear:both;"\x3e\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"propertiesButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton properties\',\r\n              iconClass: \'rcIcon propertiesIcon\',\r\n              label: \'${webviewStrings.propertiesButton}\'"\r\n              data-dojo-attach-event\x3d"click: _onPropertiesClicked"\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"builderButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n              iconClass: \'webviewIcon navGroupBuilderIcon\',\r\n              label: \'${webviewStrings.groupBuilder}\'"\r\n              data-dojo-attach-event\x3d"click: _onBuilderClicked"\x3e\x3c/span\x3e\r\n\r\n        \x3cdiv class\x3d\'commitButtons\' data-dojo-type\x3d"webview/widget/CommitButtons"\r\n             data-dojo-attach-point\x3d"propertiesCommitButtons"\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"webview/admin/navGroups/NavGroupToolbar"\r\n            data-dojo-attach-point\x3d"navGroupToolbar"\r\n            data-dojo-props\x3d"site: ${site}"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"hidden nav-group-client-toolbar nav-group-client-buttons" data-dojo-attach-point\x3d"clientButtonBar"\r\n         data-dojo-type\x3d"webview/widget/ClientToolBar"\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- END--\x3e\r\n    \x3c!-- Navigation Group Properties --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"groupProperties"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\x3e\r\n        \x3cdiv class\x3d"columnedFormContainer" data-dojo-attach-point\x3d"propertiesContainer"\x3e\r\n            \x3cdiv class\x3d"nameContainer"\x3e\r\n                \x3cdiv class\x3d"fieldAndLabel topItem"\x3e\r\n                    \x3cspan class\x3d"rcTextBoxLabel"\r\n                          data-dojo-attach-point\x3d"dataLabel"\x3e${rcStrings.spName}:\x3c/span\x3e\r\n\r\n                    \x3cspan data-dojo-attach-point\x3d"nameTB"\r\n                          data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                          data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                          required: true,\r\n                          maxLength: 50"\x3e\r\n                    \x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"imageSelection"\x3e\r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${webviewStrings.backgroundImage}\x3c/legend\x3e\r\n                    \x3cdiv class\x3d"uploader-fields-grid"\x3e\r\n                        \x3cimg class\x3d"imagePreview" src\x3d"" alt\x3d"Current Background Image"\r\n                        data-dojo-attach-point\x3d"imagePreview" /\x3e\r\n\r\n                        \x3cspan class\x3d"nav-group-background-name" data-dojo-attach-point\x3d"graphicFileTB"\x3e\x3c/span\x3e\r\n\r\n                        \x3cspan data-dojo-attach-point\x3d"graphicFileUploader"\x3e\x3c/span\x3e\r\n\r\n                        \x3cspan data-dojo-attach-point\x3d"imageGalleryButton"\r\n                                data-dojo-type\x3d"dijit/form/Button"\r\n                                data-dojo-props\x3d"baseClass: \'webviewButton gallery navGroup\',\r\n                                iconClass:\'webviewIcon galleryIcon navGroups\',\r\n                                label: \'${webviewStrings.gallery}\'"\x3e\r\n                        \x3c/span\x3e\r\n                        \x3cdiv class\x3d"imageProperties width"\x3e\r\n                            \x3cspan\x3e${webviewStrings.width}:\x3c/span\x3e\r\n                            \x3cspan class\x3d"imagePropertyValue"\r\n                                  data-dojo-attach-point\x3d"imageWidth"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"imageProperties height"\x3e\r\n                            \x3cspan\x3e${webviewStrings.height}:\x3c/span\x3e\r\n                            \x3cspan class\x3d"imagePropertyValue"\r\n                                  data-dojo-attach-point\x3d"imageHeight"\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"groupBuilder"\r\n        data-dojo-type\x3d"webview/features/navigationGroups/groupBuilding/GroupBuilder"\r\n        data-dojo-props\x3d"groupId: ${navgroup}, site: ${site}"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/ClientToolBar.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n    \x3cdiv class\x3d"clientToolBarTitle" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"clientToolbar-buttons" style\x3d"width: 0px" data-dojo-attach-point\x3d"buttonContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"clientToolBarSpacer" class\x3d"clientToolBarSpacer" \x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/admin/navGroups/templates/navGroupToolbar.html":'\x3cdiv class\x3d"toolbar-button-container"\r\n     data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/UndoRedoButtons"\r\n          data-dojo-attach-point\x3d"navGroupUndoRedoButtons"\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"toolbar-divider"\x3e\x3c/span\x3e\r\n\r\n    \x3cspan data-dojo-type\x3d"webview/widget/AddButton"\r\n          data-dojo-attach-point\x3d"navGroupAddButton"\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"viewButton"\r\n          data-dojo-props\x3d\'titleStr : "${webviewStrings.view}",\r\n        iconClass: "rc24Icon viewIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"toolbar-divider"\x3e\x3c/span\x3e\r\n\r\n    \x3cdiv class\x3d"zoom-tools"\r\n         data-dojo-type\x3d"webview/widget/ZoomTools"\r\n         data-dojo-attach-point\x3d"zoomTools"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/UndoRedoButtons.html":'\x3cdiv class\x3d"undo-redo-buttons" data-dojo-attach-point\x3d"container"\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n          data-dojo-attach-point\x3d"undoButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButtonIcon undo-redo-button undo-button",\r\n              titleStr : "${webviewStrings.undo}",\r\n              iconClass: "undo-redo-icon undo-icon"\'\x3e\r\n      \x3c/button\x3e\r\n  \r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n          data-dojo-attach-point\x3d"redoButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButtonIcon undo-redo-button redo-button",\r\n              titleStr : "${webviewStrings.redo}",\r\n              iconClass: "undo-redo-icon redo-icon"\'\x3e\r\n      \x3c/button\x3e\r\n  \x3c/div\x3e',
"url:webview/widget/templates/ZoomTools.html":'\x3cdiv class\x3d"zoom-tools" data-dojo-attach-point\x3d"container"\x3e\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n        data-dojo-attach-point\x3d"zoomOut"\r\n        data-dojo-attach-event\x3d"onClick:_onClickZoomIn"\r\n        data-dojo-props\x3d\'baseClass: "toolbarButtonIcon zoom-button",\r\n            titleStr : "${webviewStrings.zoomIn}",\r\n            iconClass: "zoom-icon zoom-out-icon"\'\x3e\r\n    \x3c/button\x3e\r\n\r\n    \x3cselect data-dojo-attach-point\x3d"_levelSelector"\r\n        data-dojo-type\x3d"dijit/form/ComboBox"\r\n        data-dojo-props\x3d\'baseClass: "rcSelectBox form-input large",\r\n            searchAttr: "label",\r\n            autoComplete: false\'\x3e\x3c/select\x3e\r\n\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n        data-dojo-attach-point\x3d"zoomIn"\r\n        data-dojo-attach-event\x3d"onClick:_onClickZoomOut"\r\n        data-dojo-props\x3d\'baseClass: "toolbarButtonIcon zoom-button",\r\n            titleStr : "${webviewStrings.zoomIn}",\r\n            iconClass: "zoom-icon zoom-in-icon"\'\x3e\r\n    \x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/groupBuilding/templates/GroupBuilder.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n     class\x3d"navigation-group-builder"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"resultsWidget"\r\n         class\x3d"hidden results-container"\r\n         data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n         data-dojo-props\x3d\'baseClass: "point-report-tree-results",\r\n            paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"builderContainer"\r\n         class\x3d"group-container"\r\n         data-dojo-type\x3d"webview/widget/WebviewContentPane"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"groupRenderer"\r\n             class\x3d"navigation-group-renderer"\r\n             data-dojo-type\x3d"webview/features/navigationGroups/groupRendering/GroupRenderer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/dialogs/editAnimationContent/templates/EditAnimationContent.html":'\x3cdiv class\x3d"animation-configuration-content expando-pane-content"\x3e\r\n    \x3cdiv class\x3d"content-title-bar" data-dojo-attach-point\x3d"titleBar" \x3e\r\n        \x3cbutton class\x3d"content-close-icon" data-dojo-attach-point\x3d"closeButtonNode"\r\n            data-dojo-attach-event\x3d"ondijitclick: _onClose"\r\n            title\x3d"${rcStrings.close}"\r\n            role\x3d"button"\r\n            tabindex\x3d"0"\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"content-title" data-dojo-attach-point\x3d"titleNode"\r\n            id\x3d"${id}_title"\r\n            role\x3d"heading"\x3e${navigationGroupsStrings.animations.editAnimation}\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"loading-overlay hidden"\r\n            data-dojo-attach-point\x3d"loadingOverlay"\x3e\r\n        \x3cdiv class\x3d"loading-animation"\r\n                data-dojo-attach-point\x3d"loadingAnimation"\x3e\r\n            \x3cdiv class\x3d"cog-main"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"cog-top"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"cog-bot"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/TabContainer" data-dojo-attach-point\x3d"editPaneTabs"\r\n        data-dojo-props\x3d"useMenu: false, useSlider: false, doLayout: false"\r\n        controllerWidget\x3d"dijit.layout.TabController" class\x3d"tab-container"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationPropertiesTab" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            title\x3d"${navigationGroupsStrings.animations.editPane.properties}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_animationProperties"\r\n                    data-dojo-type\x3d"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationPropertiesTab" title\x3d"${navigationGroupsStrings.animations.editPane.properties}"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationObjectsTab" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            title\x3d"${navigationGroupsStrings.animations.editPane.objects}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_animationObjects"\r\n                    data-dojo-type\x3d"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationLinkedObjectsTab" title\x3d"${navigationGroupsStrings.animations.editPane.objects}"\r\n                    data-dojo-props\x3d"site: ${site}"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationAttributesTab" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            title\x3d"${navigationGroupsStrings.animations.editPane.attributes}"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationHelpTab" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            title\x3d"${navigationGroupsStrings.animations.editPane.help}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_animationHelp"\r\n                    data-dojo-type\x3d"webview/features/navigationGroups/dialogs/editAnimationContent/tabs/AnimationHelpTab" title\x3d"${navigationGroupsStrings.animations.editPane.help}"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/dialogs/editAnimationContent/tabs/templates/AnimationAttributesTab.html":'\x3cdiv class\x3d"edit-animation-content"\x3e\r\n    \x3clabel class\x3d"error-label" data-dojo-attach-point\x3d"_errorLabel"\x3e\x3c/label\x3e\r\n    \x3cdiv class\x3d"attribute-container content-container" data-dojo-attach-point\x3d"_attributeContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/features/animations/templates/FileAttributeSelector.html":'\x3cdiv class\x3d"attribute-file-selector uploaded-file-selector"\x3e\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e\r\n            ${attributeName}\r\n        \x3c/legend\x3e\r\n        \x3cdiv class\x3d"upload-container"\x3e\r\n            \x3cdiv class\x3d"radio-selector"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"${id}"\r\n                    data-dojo-type\x3d"dijit/form/RadioButton"\r\n                    data-dojo-attach-event\x3d"onClick:_uploadSelected"\r\n                    data-dojo-props\x3d"baseClass: \'webview-radio-button\'"\r\n                    id\x3d"${id}_uploadRadioButton" checked\x3d"checked" data-dojo-attach-point\x3d"_uploadRadioButton"\x3e\r\n                \x3clabel for\x3d"${id}_uploadRadioButton" class\x3d"radio-button-label" data-dojo-attach-point\x3d"_uploadRadioButtonLabel"\x3e\x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"_fileUploader"\r\n                data-dojo-type\x3d"webview/crossCutting/forms/fileUploader/FileUploader"\r\n                data-dojo-props\x3d\'acceptedFiles: "${acceptedFiles}", displayFileExtension: true\'\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"existing-container"\x3e\r\n            \x3cdiv class\x3d"radio-selector"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"${id}"\r\n                    data-dojo-type\x3d"dijit/form/RadioButton"\r\n                    data-dojo-attach-event\x3d"onClick:_existingSelected"\r\n                    data-dojo-props\x3d"baseClass: \'webview-radio-button\'"\r\n                    id\x3d"${id}_existingRadioButton"\r\n                    data-dojo-attach-point\x3d"_existingRadioButton"\x3e\r\n                \x3clabel for\x3d"${id}_existingRadioButton" class\x3d"radio-button-label" data-dojo-attach-point\x3d"_existingRadioButtonLabel"\x3e\x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cinput type\x3d"text" name\x3d"existing-input"\r\n                data-dojo-attach-point\x3d"_existingFileSelector"\r\n                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                data-dojo-props\x3d\'baseClass: "rcTextBox form-input large",\r\n                    disabled: true,\r\n                    placeHolder: "${webviewStrings.selectHintText}"\'\r\n                id\x3d"${id}_existingInput" /\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n\x3c/div\x3e',
"url:webview/crossCutting/forms/fileUploader/templates/FileUploader.html":'\x3cdiv class\x3d"file-upload-container"\x3e\r\n    \x3cdiv class\x3d"form-input large" data-dojo-attach-event\x3d"onClick:_onClickBrowse"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_browseButton"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton uploader-button", iconClass: "browse-icon", showLabel: false\'\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"selected-file"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_selectedFile"\x3e\x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"_fileInput" class\x3d"file-input" type\x3d"file" id\x3d"${id}_fileInput"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"error-message" data-dojo-attach-point\x3d"_errorMessage"\x3e\r\n        ${invalidFile}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\r\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\r\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\r\n\t\t  role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\r\n\t\t\t\t\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_menuBtn"\r\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\r\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\r\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_leftBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_rightBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\r\n\t\x3cdiv class\x3d\'dijitTabListWrapper\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\r\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\r\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationGroups/dialogs/editAnimationContent/tabs/templates/AnimationHelpTab.html":'\x3cdiv class\x3d"edit-animation-content-help"\x3e\r\n    \x3cdiv class\x3d"version-text" data-dojo-attach-point\x3d"versionContent"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"information-text" data-dojo-attach-point\x3d"informationContent"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:webview/features/navigationGroups/dialogs/editAnimationContent/tabs/templates/AnimationLinkedObjectsTab.html":'\x3cdiv class\x3d"animation-content-objects"\x3e\r\n    \x3clabel class\x3d"error-label" data-dojo-attach-point\x3d"_errorLabel"\x3e\x3c/label\x3e\r\n    \x3cdiv class\x3d"object-table"\r\n        data-dojo-type\x3d"dijit/layout/ContentPane"\r\n        data-dojo-attach-point\x3d"gridContainer"\r\n        data-dojo-props\x3d"region: \'center\'"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/dialogs/editAnimationContent/tabs/templates/AnimationPropertiesTab.html":'\x3cdiv class\x3d"edit-animation-content"\x3e\r\n    \x3cdiv class\x3d"content-container"\x3e\r\n        \x3cfieldset class\x3d"edit-animation-position node-positioning-fieldset"\x3e\r\n            \x3clegend\x3e ${navigationGroupsStrings.animations.editPane.file}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"animation-positioning node-positioning-fields"\x3e\r\n                \x3cdiv class\x3d"name-label"\x3e ${navigationGroupsStrings.configDialog.nameLabel}:\x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_animationName"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"_animationSelector"\r\n                    data-dojo-type\x3d"webview/features/animations/AnimationSelector"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n        \x3cfieldset class\x3d"edit-animation-position node-positioning-fieldset"\x3e\r\n            \x3clegend\x3e${navigationGroupsStrings.configDialog.positionLegend}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"animation-positioning node-positioning-fields"\x3e\r\n                \x3cdiv class\x3d"animation-position-labels size-labels"\x3e\r\n                    \x3clabel for\x3d"${id}_widthInput" class\x3d"form-label width-label"\x3e${webviewStrings.width}:\x3c/label\x3e\r\n                    \x3clabel for\x3d"${id}_heightInput" class\x3d"form-label height-label"\x3e${webviewStrings.height}:\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"animation-position-inputs size-inputs"\x3e\r\n                    \x3cinput id\x3d"${id}_widthInput" type\x3d"number" name\x3d"width" min\x3d"1"\r\n                        data-dojo-attach-point\x3d"widthInput"\r\n                        data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                        data-dojo-props\x3d\'\r\n                            baseClass: "form-input large width-input",\r\n                            constraints: { places:0, pattern:"#" }\' /\x3e\r\n\r\n                    \x3cinput id\x3d"${id}_heightInput" type\x3d"number" name\x3d"positionY" min\x3d"1"\r\n                        data-dojo-attach-point\x3d"heightInput"\r\n                        data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                        data-dojo-props\x3d\'\r\n                            baseClass: "form-input large height-input",\r\n                            constraints: { places:0, pattern:"#" }\' /\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"lockIcon" class\x3d"aspect-ratio-icon" data-dojo-attach-event\x3d"ondijitclick: _onToggleAspectLock"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"animation-position-labels position-inputs"\x3e\r\n                    \x3clabel for\x3d"${id}_positionXInput" class\x3d"form-label position-x-label"\x3e${navigationGroupsStrings.configDialog.positionXLabel}:\x3c/label\x3e\r\n                    \x3clabel for\x3d"${id}_positionYInput" class\x3d"form-label position-y-label"\x3e${navigationGroupsStrings.configDialog.positionYLabel}:\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"animation-position-inputs"\x3e\r\n                    \x3cinput id\x3d"${id}_positionXInput" type\x3d"number" name\x3d"positionX" min\x3d"0"\r\n                        data-dojo-attach-point\x3d"positionX"\r\n                        data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                        data-dojo-props\x3d\'\r\n                            baseClass: "form-input large position-x-input",\r\n                            constraints: { places:0, pattern:"#" }\' /\x3e\r\n\r\n                    \x3cinput id\x3d"${id}_positionYInput" type\x3d"number" name\x3d"positionY" min\x3d"0"\r\n                        data-dojo-attach-point\x3d"positionY"\r\n                        data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                        data-dojo-props\x3d\'\r\n                            baseClass: "form-input large position-y-input",\r\n                            constraints: { places:0, pattern:"#" }\' /\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"edit-animation-delete"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_deleteButton"\r\n            data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton",\r\n            iconClass: "webviewIcon deleteIcon edit-animation-delete-icon",\r\n            label: "${navigationGroupsStrings.animations.deleteAnimation}"\'\r\n            data-dojo-attach-event\x3d"onClick: onDeleteNodeClicked"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/animations/templates/AnimationSelector.html":'\x3cdiv class\x3d"animation-selector uploaded-file-selector"\x3e\r\n    \x3cdiv class\x3d"upload-container"\x3e\r\n        \x3cdiv class\x3d"radio-selector"\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"${id}"\r\n                data-dojo-type\x3d"dijit/form/RadioButton"\r\n                data-dojo-attach-event\x3d"onClick:_uploadSelected"\r\n                data-dojo-props\x3d"baseClass: \'webview-radio-button\'"\r\n                id\x3d"${id}_uploadRadioButton" checked\x3d"checked" data-dojo-attach-point\x3d"_uploadRadioButton"\x3e\r\n            \x3clabel for\x3d"${id}_uploadRadioButton" class\x3d"radio-button-label"\x3e\r\n                ${navigationGroupsStrings.animations.uploadRCA}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"_animationUploader"\r\n            data-dojo-type\x3d"webview/crossCutting/forms/fileUploader/FileUploader"\r\n            data-dojo-props\x3d\'uploadPath: "${animationFilesPath}", acceptedFiles: "${acceptedFiles}", displayFileExtension: false\'\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"existing-container"\x3e\r\n        \x3cdiv class\x3d"radio-selector"\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"${id}"\r\n                data-dojo-type\x3d"dijit/form/RadioButton"\r\n                data-dojo-attach-event\x3d"onClick:_existingSelected"\r\n                data-dojo-props\x3d"baseClass: \'webview-radio-button\'"\r\n                id\x3d"${id}_existingRadioButton"\r\n                data-dojo-attach-point\x3d"_existingRadioButton"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"_existingRadioButtonLabel"\r\n                for\x3d"${id}_existingRadioButton"\r\n                class\x3d"radio-button-label"\x3e\r\n                ${navigationGroupsStrings.animations.existingRCA}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cinput type\x3d"text" name\x3d"existing-input"\r\n            data-dojo-attach-point\x3d"_existingAnimationSelector"\r\n            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n            data-dojo-props\x3d\'baseClass: "rcTextBox form-input large",\r\n                disabled: true,\r\n                placeHolder: "${webviewStrings.selectHintText}"\'\r\n            id\x3d"${id}_existingInput" /\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationGroups/dialogs/insertAnimationContent/templates/InsertAnimationContent.html":'\x3cdiv class\x3d"insert-animation-content expando-pane-content"\x3e\r\n    \x3cdiv class\x3d"content-title-bar" data-dojo-attach-point\x3d"titleBar" \x3e\r\n        \x3cbutton class\x3d"content-close-icon" data-dojo-attach-point\x3d"closeButtonNode"\r\n            data-dojo-attach-event\x3d"ondijitclick: _onClose"\r\n            title\x3d"${rcStrings.close}"\r\n            role\x3d"button"\r\n            tabindex\x3d"0"\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"content-title" data-dojo-attach-point\x3d"titleNode"\r\n            id\x3d"${id}_title"\r\n            role\x3d"heading"\x3e${navigationGroupsStrings.animations.insertAnimation}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"content-container" data-dojo-attach-point\x3d"_animationSelector"\r\n        data-dojo-type\x3d"webview/features/animations/AnimationSelector"\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"spacer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"preview-container hidden" data-dojo-attach-point\x3d"_previewContainer"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/groupRendering/groupNodes/templates/AnimationNodeOverlay.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n     class\x3d"group-node animation-node animation-node-overlay resize-border"\x3e\r\n     \x3cdiv class\x3d"edit-node-container"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"editIconNode"\r\n            class\x3d"edit-node"\r\n            title\x3d"${navGroupStrings.nodeConfiguration}"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cimg data-dojo-attach-point\x3d"thumbnail"\x3e\r\n    \x3c!--Resize Points--\x3e\r\n    \x3cspan class\x3d"n resize-point"\r\n          data-dojo-attach-point\x3d"nResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"nw resize-point"\r\n          data-dojo-attach-point\x3d"nwResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"w resize-point"\r\n          data-dojo-attach-point\x3d"wResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"sw resize-point"\r\n          data-dojo-attach-point\x3d"swResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"s resize-point"\r\n          data-dojo-attach-point\x3d"sResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"se resize-point"\r\n          data-dojo-attach-point\x3d"seResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"e resize-point"\r\n          data-dojo-attach-point\x3d"eResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"ne resize-point"\r\n          data-dojo-attach-point\x3d"neResizePoint"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/dialogs/nodeConfigurationDialog/templates/NodeConfigurationDialog.html":'\x3cdiv class\x3d"dijitDialog node-config-dialog"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar"\r\n         class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode"\r\n              class\x3d"dijitDialogTitle dialog-title"\r\n              id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${navGroupStrings.configDialog.title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n              class\x3d"dijitDialogCloseIcon"\r\n              data-dojo-attach-event\x3d"ondijitclick: onCancel"\r\n              title\x3d"${buttonCancel}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText"\r\n                  class\x3d"closeText"\r\n                  title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode"\r\n         class\x3d"dijitDialogPaneContent"\x3e\r\n         \x3cdiv class\x3d"loading-overlay hidden"\r\n            data-dojo-attach-point\x3d"loadingOverlay"\x3e\r\n            \x3cdiv class\x3d"loading-animation"\r\n                    data-dojo-attach-point\x3d"loadingAnimation"\x3e\r\n                \x3cdiv class\x3d"cog-main"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-top"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-bot"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n         \x3cdiv class\x3d"input-container" data-dojo-attach-point\x3d"inputContainer"\x3e\r\n            \x3c!-- Row 1 --\x3e\r\n            \x3clabel class\x3d"form-label name-label"\x3e${navGroupStrings.configDialog.nameLabel}:\x3c/label\x3e\r\n            \x3clabel class\x3d"form-label object-name-label" data-dojo-attach-point\x3d"objectNameLabel"\x3e\x3c/label\x3e\r\n\r\n            \x3c!-- Row 2 --\x3e\r\n            \x3clabel for\x3d"_displayNameInput" class\x3d"form-label display-name-label"\x3e${navGroupStrings.configDialog.displayNameLabel}:\x3c/label\x3e\r\n            \x3cinput id\x3d"_displayNameInput" type\x3d"text" maxlength\x3d"50"\r\n                data-dojo-attach-point\x3d"displayName"\r\n                data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                data-dojo-props\x3d\'baseClass: "form-input large rcTextBox display-name-input"\' /\x3e\r\n\r\n            \x3c!-- Row 3 --\x3e\r\n            \x3clabel for\x3d"_hyperLinkInput" class\x3d"form-label hyper-link-label"\x3e${webviewStrings.hyperlink}:\x3c/label\x3e\r\n            \x3cinput id\x3d"_hyperLinkInput" type\x3d"text" maxlength\x3d"256"\r\n                data-dojo-attach-point\x3d"hyperLink"\r\n                data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                data-dojo-props\x3d\'baseClass: "form-input large rcTextBox hyper-link-input"\' /\x3e\r\n\r\n            \x3c!-- Row 4 --\x3e\r\n            \x3clabel for\x3d"_modifiableByInput" class\x3d"form-label modifiable-by-label"\x3e${navGroupStrings.configDialog.modifiableByLabel}:\x3c/label\x3e\r\n            \x3cselect id\x3d"_modifiableByInput"\r\n                autocomplete\x3d"off"\r\n                data-dojo-attach-point\x3d"modifiableBySelector"\r\n                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                data-dojo-props\x3d\'baseClass: "rcSelectBox form-input large modifiable-by-input"\'\x3e\r\n            \x3c/select\x3e\r\n\r\n            \x3c!-- Row 5 --\x3e\r\n            \x3clabel for\x3d"_fontFamilyInput" class\x3d"form-label font-label"\x3e${navGroupStrings.configDialog.fontLabel}:\x3c/label\x3e\r\n            \x3cselect id\x3d"_fontFamilyInput"\r\n                autocomplete\x3d"off"\r\n                data-dojo-attach-point\x3d"fontSelect"\r\n                data-dojo-type\x3d"webview/widget/FontSelector"\r\n                data-dojo-props\x3d\'baseClass: "rcSelectBox form-input large font-input"\'\x3e\r\n            \x3c/select\x3e\r\n\r\n            \x3cinput type\x3d"number" name\x3d"fontSize"\r\n                data-dojo-attach-point\x3d"fontSize"\r\n                data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                data-dojo-props\x3d\'constraints:{ min: 6, max: 24 },\r\n                    baseClass: "form-input large font-size-input",\r\n                    required: true\' /\x3e\r\n            \x3cspan class\x3d"font-colour-picker"\r\n                data-dojo-attach-point\x3d"fontColourPicker"\r\n                data-dojo-type\x3d"webview/widget/ColorPicker"\r\n                data-dojo-props\x3d"color: \'${defaultColour}\'"\x3e\r\n            \x3c/span\x3e\r\n\r\n             \x3c!-- Row 6 --\x3e\r\n            \x3clabel for\x3d"_displayTypeInput" class\x3d"form-label show-point-label"\x3e${navGroupStrings.configDialog.showPointLabel}:\x3c/label\x3e\r\n            \x3cselect id\x3d"_displayTypeInput"\r\n                autocomplete\x3d"off"\r\n                data-dojo-attach-point\x3d"displayTypeSelect"\r\n                data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                data-dojo-props\x3d\'baseClass: "rcSelectBox form-input large show-point-input"\'\x3e\r\n            \x3c/select\x3e\r\n            \x3cdiv class\x3d"unit-options"\x3e\r\n                \x3cinput id\x3d"_showUnitCheckbox" class\x3d"show-units-checkbox" type\x3d"checkbox" tabindex\x3d"0"\r\n                    data-dojo-attach-point\x3d"showUnitCheckBox"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox"\r\n                    data-dojo-props\x3d\'checked: false\'/\x3e\r\n                \x3clabel for\x3d"_showUnitCheckbox" class\x3d"show-units-label"\x3e${navGroupStrings.configDialog.showUnitLabel}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cfieldset class\x3d"node-positioning-fieldset"\x3e\r\n            \x3clegend\x3e${navGroupStrings.configDialog.positionLegend}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"node-positioning-fields"\x3e\r\n                \x3clabel for\x3d"_positionXInput" class\x3d"form-label position-x-label"\x3e${navGroupStrings.configDialog.positionXLabel}:\x3c/label\x3e\r\n                \x3cinput id\x3d"_positionXInput" type\x3d"number" name\x3d"positionX" min\x3d"0"\r\n                    data-dojo-attach-point\x3d"positionX"\r\n                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                    data-dojo-props\x3d\'\r\n                        baseClass: "form-input large position-x-input",\r\n                        constraints: { places:0, pattern:"#" },\r\n                        required: true\' /\x3e\r\n\r\n                \x3clabel for\x3d"_positionYInput" class\x3d"form-label position-y-label"\x3e${navGroupStrings.configDialog.positionYLabel}:\x3c/label\x3e\r\n                \x3cinput id\x3d"_positionYInput" type\x3d"number" name\x3d"positionY" min\x3d"0"\r\n                    data-dojo-attach-point\x3d"positionY"\r\n                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                    data-dojo-props\x3d\'\r\n                        baseClass: "form-input large position-y-input",\r\n                        constraints: { places:0, pattern:"#" },\r\n                        required: true\' /\x3e\r\n\r\n                \x3clabel for\x3d"_widthInput" class\x3d"form-label width-label"\x3e${navGroupStrings.configDialog.widthLabel}:\x3c/label\x3e\r\n                \x3cinput id\x3d"_widthInput" type\x3d"number" name\x3d"width" min\x3d"0"\r\n                    data-dojo-attach-point\x3d"widthInput"\r\n                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                    data-dojo-props\x3d\'\r\n                        baseClass: "form-input large width-input",\r\n                        constraints: { places:0, pattern:"#" },\r\n                        required: true\' /\x3e\r\n\r\n                \x3clabel for\x3d"_heightInput" class\x3d"form-label height-label"\x3e${navGroupStrings.configDialog.heightLabel}:\x3c/label\x3e\r\n                \x3cinput id\x3d"_heightInput" type\x3d"number" name\x3d"positionY" min\x3d"0"\r\n                    data-dojo-attach-point\x3d"heightInput"\r\n                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                    data-dojo-props\x3d\'\r\n                        baseClass: "form-input large height-input",\r\n                        constraints: { places:0, pattern:"#" },\r\n                        required: true\' /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"okCancelDiv"\r\n         class\x3d"dijitDialogPaneActionBar confirm-button-container"\r\n         data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_okButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnOk}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-attach-event\x3d"click:_onClickedOk"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_cancelButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnCancel}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-attach-event\x3d"click:onClickedCancel"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_deleteButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.rcDelete}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"deleteButton"\r\n                data-dojo-attach-event\x3d"click:onClickedDelete"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton deleteIcon",\r\n                    iconClass: "webviewIcon deleteIcon"\'\x3e\r\n            ${rcStrings.rcDelete}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/groupRendering/groupNodes/templates/AnimationNode.html":'\x3cdiv class\x3d"group-node animation-node iframe-container"\r\n        data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3ciframe style\x3d"border: 0; display: block; width: 100%; height: 100%"\r\n            data-dojo-attach-point\x3d"iframeNode"\r\n            allowtransparency\x3d"true"\x3e\r\n    \x3c/iframe\x3e\r\n    \x3cdiv class\x3d"n-shortcut"\r\n            data-dojo-attach-point\x3d"displayIndexNode"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/navigationGroups/groupRendering/groupNodes/templates/TextNode.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"group-node text-node resize-border"\x3e\r\n    \x3cdiv class\x3d"node-contents" data-dojo-attach-point\x3d"contents"\x3e\r\n        \x3cdiv class\x3d"value-container" data-dojo-attach-point\x3d"displayValueContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"displayValueNode" class\x3d"text-node-label"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"faultIconNode" class\x3d"icon-node in-fault hidden"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"manualHandNode" class\x3d"icon-node manual-hand hidden"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"spacing-div"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"edit-node-container"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"editIconNode"\r\n                class\x3d"edit-node"\r\n                title\x3d"${navGroupStrings.nodeConfiguration}"\r\n                data-dojo-attach-event\x3d"click: onEditConfigurationClicked"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"displayIndexNode" class\x3d"n-shortcut"\x3e\x3c/div\x3e\r\n    \x3c!--Resize Points--\x3e\r\n    \x3cspan class\x3d"n resize-point" data-dojo-attach-point\x3d"nResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"nw resize-point" data-dojo-attach-point\x3d"nwResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"w resize-point" data-dojo-attach-point\x3d"wResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"sw resize-point" data-dojo-attach-point\x3d"swResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"s resize-point" data-dojo-attach-point\x3d"sResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"se resize-point" data-dojo-attach-point\x3d"seResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"e resize-point" data-dojo-attach-point\x3d"eResizePoint"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"ne resize-point" data-dojo-attach-point\x3d"neResizePoint"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/features/navigationGroups/groupRendering/templates/GroupRenderer.html":'\x3cdiv data-dojo-attach-point\x3d"groupContainer" class\x3d"group-renderer-container"\x3e\r\n    \x3cdiv class\x3d"background-image-container" data-dojo-attach-point\x3d"backgroundImageContainer"\x3e\r\n        \x3cimg class\x3d"background-image" data-dojo-attach-point\x3d"backgroundImage"\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"group-nodes-container" data-dojo-attach-point\x3d"nodeContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/features/systemData/templates/EditObjectDialog.html":'\x3cdiv class\x3d"dijitDialog edit-object-dialog"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar"\r\n         class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode"\r\n              class\x3d"dijitDialogTitle dialog-title"\r\n              id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${systemDataStrings.editObject}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n              class\x3d"dijitDialogCloseIcon"\r\n              data-dojo-attach-event\x3d"onClick: _onClickCancel"\r\n              title\x3d"${buttonCancel}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"loading-overlay hidden"\r\n            data-dojo-attach-point\x3d"loadingOverlay"\x3e\r\n            \x3cdiv class\x3d"loading-animation"\r\n                    data-dojo-attach-point\x3d"loadingAnimation"\x3e\r\n                \x3cdiv class\x3d"cog-main"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-top"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-bot"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n         \x3cdiv data-dojo-attach-point\x3d"inputsContainer" class\x3d"dialog-main-contents"\x3e\r\n            \x3clabel class\x3d"object-name-label" data-dojo-attach-point\x3d"_objectNameLabel"\x3e\x3c/label\x3e\r\n            \x3cdiv class\x3d"required-sign"\r\n                data-dojo-attach-point\x3d"requiredNote"\x3e* ${rcStrings.requiredField}\x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"dialog-input-fields"\x3e\r\n                \x3clabel class\x3d"field-label value-label"\x3e${rcStrings.value}\x3cspan data-dojo-attach-point\x3d"valueRequired" class\x3d"required-sign"\x3e*\x3c/span\x3e:\x3c/label\x3e\r\n                \x3cdiv class\x3d"value-input" data-dojo-attach-point\x3d"valueInputContainer"\x3e\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"_numericValueInput"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                            trim: "true",\r\n                                            maxLength: "256",\r\n                                            required: "true",\r\n                                            invalidMessage: "${rcStrings.invalidNumber}",\r\n                                            pattern: "[+|-]{0,1}(\\\\d+|\\\\d+\\\\.\\\\d+){1}([e|E]{1}\\\\+\\\\d+){0,1}"\'/\x3e\r\n\r\n                    \x3cinput type\x3d"text"\r\n                           data-dojo-attach-point\x3d"_timeValueInput"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                            trim: "true",\r\n                                            maxLength: "256",\r\n                                            required: "true",\r\n                                            invalidMessage: "${rcStrings.invalidTime}",\r\n                                            pattern: "(\\\\d+)(:(\\\\d|[012345]\\\\d){1}){2}"\'/\x3e\r\n\r\n                    \x3cselect data-dojo-attach-point\x3d"_digitalValueInput"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                            autoComplete: true"\x3e\x3c/select\x3e\r\n\r\n                    \x3ctextarea data-dojo-attach-point\x3d"_textBlobInput"\r\n                            data-dojo-type\x3d"dijit/form/SimpleTextarea"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextArea"\'\x3e\x3c/textarea\x3e\r\n\r\n                    \x3cinput type\x3d"text"\r\n                            data-dojo-attach-point\x3d"_textFieldInput"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                    trim: true\'/\x3e\r\n                \x3c/div\x3e\r\n                \x3cbutton type\x3d"button"\r\n                    id\x3d"${id}_relinquishButton"\r\n                    title\x3d"${rcStrings.btnOk}"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-point\x3d"_priorityArrayButton"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickPriorityArrayButton"\r\n                    data-dojo-props\x3d\'baseClass: "relinquish-button",\r\n                                    iconClass: "relinquish-icon"\'\x3e\r\n                \x3c/button\x3e\r\n                \x3cselect class\x3d"override-selector"\r\n                    data-dojo-attach-point\x3d"_overrideSelector"\r\n                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                    data-dojo-attach-event\x3d"onChange:_onChangeValueOverrideOption"\r\n                    data-dojo-props\x3d"baseClass: \'rcSelectBox override-selector\',\r\n                                    searchAttr:\'name\',\r\n                                    autoComplete: false"\x3e\r\n                \x3c/select\x3e\r\n\r\n                \x3clabel class\x3d"field-label reason-label" data-dojo-attach-point\x3d"reasonLabel"\x3e\r\n                    ${rcStrings.reason}\x3cspan data-dojo-attach-point\x3d"reasonRequiredSign" class\x3d"required-sign"\x3e*\x3c/span\x3e:\r\n                \x3c/label\x3e\r\n                \x3cinput type\x3d"text"\r\n                    data-dojo-attach-point\x3d"_reasonInput"\r\n                    data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                    data-dojo-props\x3d\'placeholder: "${webviewStrings.reasonPlaceholder}",\r\n                            baseClass: "rcTextBox reason-input",\r\n                            required: ${reasonRequired},\r\n                            trim: true, maxLength: 256\'/\x3e\r\n                            \r\n                \x3cspan class\x3d"timed-container hidden" data-dojo-attach-point\x3d"_timedContainer"\x3e\r\n                    \x3clabel class\x3d"field-label timed-label"\x3e${rcStrings.timed}:\x3c/label\x3e\r\n                    \x3cinput class\x3d"timed-input" type\x3d"text"\r\n                        data-dojo-attach-point\x3d"_timedOverrideInput"\r\n                        data-dojo-type\x3d"webview/bacnet/_widget/TimedInput"\r\n                        data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                                value: 0, useSeconds: false, useDefault: true, defaultValue: 30,\r\n                                maxLength: 5" /\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-props\x3d\'title:"${rcStrings.invalidInput}"\' data-dojo-attach-point\x3d"_errorDialog"\x3e\r\n                \x3cp data-dojo-attach-point\x3d"errorTextContainer"\x3e\x3cspan\x3e${rcStrings.requiredInfoMissing}\x3c/span\x3e\x3c/p\x3e\r\n                \x3cp class\x3d"scheduleRateDialogButtons"\x3e\r\n                    \x3cbutton data-dojo-type\x3ddijit/form/Button\r\n                            data-dojo-attach-point\x3d"_errOk"\r\n                            data-dojo-attach-event\x3d"onClick: _closeErrorDialog"\r\n                            data-dojo-props\x3d\'label: "${rcStrings.btnOk}",\r\n                            baseClass: "webviewButton",\r\n                            iconClass: "rcIcon okIcon"\'\x3e\r\n                        OK\r\n                    \x3c/button\x3e\r\n                \x3c/p\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"okCancelDiv"\r\n         class\x3d"dijitDialogPaneActionBar confirm-button-container"\r\n         data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_okButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnOk}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_cancelButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.btnCancel}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/features/systemData/templates/PriorityArrayDialog.html":'\x3cdiv class\x3d"dijitDialog priority-array-dialog"\r\n     role\x3d"dialog"\r\n     aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar"\r\n         class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode"\r\n              class\x3d"dijitDialogTitle dialog-title"\r\n              id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${rcStrings.relinquish}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode"\r\n              class\x3d"dijitDialogCloseIcon"\r\n              data-dojo-attach-event\x3d"onClick: _onClickClose"\r\n              title\x3d"${buttonCancel}"\r\n              role\x3d"button"\r\n              tabindex\x3d"0"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3clabel class\x3d"object-name-label" data-dojo-attach-point\x3d"_objectNameLabel"\x3e\x3c/label\x3e\r\n        \x3cdiv class\x3d"priorities-grid" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"okCancelDiv"\r\n         class\x3d"dijitDialogPaneActionBar button-container"\r\n         data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n         \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_loadButton"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton",\r\n            iconClass: "webviewIcon buttonLoadIcon",\r\n            label: "${rcStrings.load}"\'\r\n            data-dojo-attach-event\x3d"onClick:_onClickLoad"\x3e\r\n            LOAD\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_okButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.relinquish}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_relinquishButton"\r\n                data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "webviewIcon buttonRelinquishIcon",\r\n                    disabled: true\'\x3e\r\n            ${rcStrings.relinquish}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                id\x3d"${id}_cancelButton"\r\n                tabindex\x3d"0"\r\n                title\x3d"${rcStrings.close}"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_cancelButton"\r\n                data-dojo-attach-event\x3d"onClick:_onClickClose"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "webviewIcon buttonCloseIcon"\'\x3e\r\n            ${rcStrings.close}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/panelFiles/templates/PanelFiles.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites panel-files ${baseClass}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/panelFiles/PanelFilesToolbar"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Panel file contents--\x3e\r\n    \x3cdiv class\x3d"panel-files-container" data-dojo-attach-point\x3d"panelFilesContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"panelFilesWidget"\r\n             data-dojo-type\x3d"webview/widget/WebviewContentPane"             \r\n             class\x3d"panel-files"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"panelFilesContent"\x3e\r\n                \x3cdiv class\x3d"panel-file-settings" data-dojo-attach-point\x3d"panelFileSettings"\x3e\r\n                    \x3cspan class\x3d"panel-setting"\x3e\r\n                        \x3clabel class\x3d"disabled" data-dojo-attach-point\x3d"controllerNumberLB"\x3e${panfileStrings.controllerNumber}:\x3c/label\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"panel-setting-controller-value" data-dojo-attach-point\x3d"controllerNumberValueLB"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"panel-setting"\x3e\r\n                        \x3clabel class\x3d"disabled" data-dojo-attach-point\x3d"panelFileLB"\x3e${panfileStrings.panelFile}:\x3c/label\x3e\r\n                        \x3cinput type\x3d"text" maxlength\x3d"255" class\x3d"panel-filename-input"\r\n                               data-dojo-attach-point\x3d"panelFileTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                               disabled: true\' /\x3e\x3cspan class\x3d"file-extension"\x3e.pan\x3c/span\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"panel-setting"\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"filePrefixLB"\x3e${panfileStrings.filenamePrefix}:\x3c/label\x3e\r\n                        \x3c!-- Max device number is around 4194302, so save 8 characters for the device number to give some buffer room --\x3e\r\n                        \x3cinput type\x3d"text" maxlength\x3d"247"\r\n                               data-dojo-attach-point\x3d"filePrefixTB"\r\n                               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                               data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n                    \x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"device-gutter" data-dojo-attach-point\x3d"deviceGutter"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"panel-file-list" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/panelFiles/widget/templates/AutoNetworkBackup.html":'\x3cdiv class\x3d"autoNetworkBackupDialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_autoBackupForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "autoBackupForm", action: "", method: "",\r\n             name: "newInstanceForm", encType: "multipart/form-data"\'\x3e\r\n            \x3cdiv class\x3d"column"\x3e\r\n                \x3cdiv class\x3d"autoNetworkDialogLabels"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3clabel class\x3d"filenamePrefixLabel" data-dojo-attach-point\x3d"filenamePrefixLB"\x3e${panfileStrings.filenamePrefix}:\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"checkboxAndLabel"\x3e\r\n                        \x3cspan data-dojo-attach-point\x3d"enableCheckbox"\r\n                             data-dojo-type\x3d"dijit/form/CheckBox" \x3e\r\n                        \x3c/span\x3e\r\n                        \x3clabel data-dojo-attach-point\x3d"enableLabel"\x3e${webviewStrings.enable}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"radioItem"\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                                \x3cinput type\x3d"radio" name\x3d"_autoBackupType" checked value\x3d"0"\r\n                                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                       data-dojo-attach-point\x3d\'dailyRecurrence\'\r\n                                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\',\r\n                                       disabled:true" /\x3e\r\n                                ${panfileStrings.everyDay}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"radioItem"\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                                \x3cinput type\x3d"radio" name\x3d"_autoBackupType" value\x3d"1"\r\n                                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                       data-dojo-attach-point\x3d\'weeklyRecurrence\'\r\n                                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\',\r\n                                       disabled:true" /\x3e\r\n                                ${panfileStrings.dayOfWeek}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"radioItem"\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel"\x3e\r\n                                \x3cinput type\x3d"radio" name\x3d"_autoBackupType" value\x3d"2"\r\n                                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                       data-dojo-attach-point\x3d\'monthlyRecurrence\'\r\n                                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\',\r\n                                       disabled:true" /\x3e\r\n                                ${panfileStrings.dayOfMonth}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3clabel class\x3d"timeLabel" data-dojo-attach-point\x3d"timeLB"\x3e${rcStrings.time} (24hrs):\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"column"\x3e\r\n                \x3cdiv class\x3d"autoNetworkDialogInputFields"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"text"\r\n                            class\x3d"autoNetworkBackupInput"\r\n                            data-dojo-attach-point\x3d"filenamePrefixTB"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                            disabled: false\' /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv\x3e\x3cbr\x3e\x3c/div\x3e\r\n                    \x3cdiv\x3e\x3cbr\x3e\x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cselect class\x3d"daysOfWeekDropDown"\r\n                                        data-dojo-attach-point\x3d"daysOfWeekDD"\r\n                                        data-dojo-type\x3d"dijit/form/Select"\r\n                                        data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                                        disabled: true"\x3e\r\n                        \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"number"\r\n                            class\x3d"autoNetworkBackupInput"\r\n                            data-dojo-attach-point\x3d"dayOfMonthTB"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                            disabled: true,\r\n                            pattern:"^([1-9]|[0][1-9]|[12][0-9]|3[01])",\r\n                            required: true,\r\n                            intermediateChanges: true\'/\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"text"\r\n                            class\x3d"autoNetworkBackupInput"\r\n                            data-dojo-attach-point\x3d"timeTB"\r\n                            data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                            data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                             placeHolder: "HH:MM",\r\n                             required: true,\r\n                             pattern:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",\r\n                             intermediateChanges: true\' /\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:webview/admin/widget/templates/ResultsDialog.html":'\x3cdiv class\x3d"dijitDialog results-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"grid-container"\r\n             data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"summary-container"\x3e\r\n            \x3cdiv class\x3d"cancel-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n                \x3cbutton data-dojo-attach-point\x3d"cancelActionButton"\r\n                        data-dojo-type\x3d"dijit/form/Button"\r\n                        data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                        iconClass: "rcIcon cancelIcon",\r\n                        label: "${rcStrings.btnCancel}"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"summaryContainer"\x3e\r\n                \x3cspan\x3e${webviewStrings.totalControllers}: \x3c/span\x3e\x3cspan data-dojo-attach-point\x3d"totalControllerContainer"\x3e${totalControllers}\x3c/span\x3e\r\n                \x3cbr/\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"resultTypeLabel"\x3e${resultType}\x3c/span\x3e: \x3cspan data-dojo-attach-point\x3d"totalSuccessfulContainer"\x3e${totalSuccessful}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/dialogs/templates/PromptForPassword.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"passwordForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'enctype:"multipart/form-data", action: "", method: ""\'\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"passwordLB"\x3e${rcStrings.password}:\x3c/label\x3e\r\n            \x3cinput type\x3d"password" name\x3d"password"\r\n                   data-dojo-attach-point\x3d"passwordTB"\r\n                   data-dojo-type\x3d"dijit/form/TextBox"\r\n                   data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                   required: true\'/\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dijitDialogPaneActionBar" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"submit"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e\x3c/button\x3e\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\x3e\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/panelFiles/templates/PanelFilesToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"backupButton"\r\n          data-dojo-props\x3d\'titleStr : "${panfileStrings.backup}",\r\n          iconClass: "rc24Icon svg-history toolbarButtonIcon",\r\n          disabled: true\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"restoreButton"\r\n          data-dojo-props\x3d\'titleStr : "${panfileStrings.restore}",\r\n          iconClass: "rc24Icon svg-refresh-icon toolbarButtonIcon",\r\n          disabled: true\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"autoBackupButton"\r\n          data-dojo-props\x3d\'titleStr : "${panfileStrings.autoNetworkBackup}",\r\n          iconClass: "rc24Icon svg-auto-backup toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"logButton"\r\n          data-dojo-props\x3d\'titleStr : "${panfileStrings.log}",\r\n          iconClass: "rc24Icon svg-panel-file-config toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/programs/templates/program.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites program-editor ${baseClass}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/programs/ProgramToolbar"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"tree-container"\x3e\r\n        \x3c!--Results list--\x3e\r\n        \x3cdiv class\x3d"hidden results-container"\r\n             data-dojo-attach-point\x3d"resultsWidget"\r\n             data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n             data-dojo-props\x3d\'baseClass: "schedule-tree-results",\r\n             paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n\r\n        \x3c!--Program editor--\x3e\r\n        \x3cdiv class\x3d"nav-group-container" data-dojo-attach-point\x3d"builderContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"builderWidget"\r\n                 data-dojo-type\x3d"webview/widget/WebviewContentPane"                 \r\n                 class\x3d"webview-program-editor"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"programsContent"\x3e\r\n                    \x3cdiv class\x3d"trace-gutter" data-dojo-attach-point\x3d"traceGutter"\x3e\x3c/div\x3e\r\n                    \x3cdiv class\x3d"webview-editor" style\x3d"width: 500px; height: 500px;"\r\n                         data-dojo-attach-point\x3d"editorNode"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/programs/templates/PointMenu.html":'\x3cdiv class\x3d"point-menu hidden ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"editItem"\x3e${rcStrings.edit}\x3c/div\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"addToWatchItem"\x3e${programStrings.addToWatchList}\x3c/div\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"cancelItem"\x3e${rcStrings.btnCancel}\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/programs/templates/WatchPointMenu.html":'\x3cdiv class\x3d"point-menu hidden ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"removeSingle"\x3e${programStrings.removeFromWatchlist}\x3c/div\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"removeAll"\x3e${programStrings.removeAllFromWatchlist}\x3c/div\x3e\r\n    \x3cdiv class\x3d"menu-item"\r\n         data-dojo-attach-point\x3d"cancelItem"\x3e${webviewStrings.cancel}\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/programs/widget/templates/OptionsDialog.html":'\x3cdiv class\x3d"optionsDialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_newInstanceForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "newInstanceForm", action: "", method: "",\r\n             name: "newInstanceForm", encType: "multipart/form-data"\'\x3e\r\n    \r\n            \x3cdiv\x3e     \r\n                \x3clabel class\x3d"fontString"\x3e${programStrings.fonts}:\x3c/label\x3e\r\n                \x3cdiv class\x3d"fontSizeContainerNode"\x3e\r\n                    \x3cselect class\x3d"rcSelectBox form-input" \r\n                                    data-dojo-attach-point\x3d"fontSize"\r\n                                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                                    data-dojo-props\x3d"baseClass: \'rcSelectBox\'"\x3e                    \r\n                            \x3coption value\x3d6\x3e6\x3c/option\x3e\r\n                            \x3coption value\x3d8\x3e8\x3c/option\x3e\r\n                            \x3coption value\x3d10\x3e10\x3c/option\x3e\r\n                            \x3coption value\x3d12\x3e12\x3c/option\x3e\r\n                            \x3coption value\x3d14\x3e14\x3c/option\x3e\r\n                            \x3coption value\x3d16\x3e16\x3c/option\x3e\r\n                            \x3coption value\x3d18\x3e18\x3c/option\x3e\r\n                            \x3coption value\x3d20\x3e20\x3c/option\x3e\r\n                            \x3coption value\x3d22\x3e22\x3c/option\x3e\r\n                            \x3coption value\x3d24\x3e24\x3c/option\x3e\r\n                    \x3c/select\x3e\r\n                \x3c/div\x3e\r\n                \x3cspan class\x3d"normalColorPicker"\r\n                        data-dojo-attach-point\x3d"normalColourPicker"\r\n                        data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                \x3c/span\x3e                \r\n                \x3cspan class\x3d"bottonGroupContainer" \r\n                        data-dojo-attach-point\x3d"buttonGroup"\r\n                        data-dojo-type\x3d"webview/widget/ButtonGroup"\x3e        \r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \r\n            \x3cdiv\x3e\r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${programStrings.syntaxHighlighting}\x3c/legend\x3e           \r\n                        \x3cdiv class\x3d"checkboxAndLabel"\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"syntaxHighlightingCheckBox"\r\n                                 data-dojo-type\x3d"dijit/form/CheckBox" \x3e \r\n                            \x3c/span\x3e\r\n                            \x3clabel\x3e${webviewStrings.enable}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                    \r\n                        \x3cdiv class \x3d "column"\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"commentColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.comments}\x3c/label\x3e\r\n                            \x3c/div\x3e\r\n\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"statementsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.statements}\x3c/label\x3e\r\n                            \x3c/div\x3e    \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"functionsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.functions}\x3c/label\x3e\r\n                            \x3c/div\x3e          \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"lineNumbersColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.lineNumbers}\x3c/label\x3e\r\n                            \x3c/div\x3e                            \r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class \x3d "column"\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"alarmTextColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.alarmText}\x3c/label\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"inputsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${webviewStrings.inputs}\x3c/label\x3e\r\n                            \x3c/div\x3e    \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"outputsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${webviewStrings.outputs}\x3c/label\x3e\r\n                            \x3c/div\x3e         \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"presentValuesColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.presentValues}\x3c/label\x3e\r\n                            \x3c/div\x3e                                 \r\n                        \x3c/div\x3e    \r\n                        \x3cdiv class \x3d "column"\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan class\x3d"colorPickerNode" data-dojo-attach-point\x3d"ValuesAndArraysColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.valuesAndArrays}\x3c/label\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"otherObjectsColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.otherObjects}\x3c/label\x3e\r\n                            \x3c/div\x3e    \r\n                            \x3cdiv class\x3d"colourAndLabel"\x3e\r\n                                \x3cspan data-dojo-attach-point\x3d"backgroundColourPicker"\r\n                                     data-dojo-type\x3d"webview/widget/ColorPicker"\x3e\r\n                                \x3c/span\x3e\r\n                                \x3clabel\x3e${programStrings.background}\x3c/label\x3e\r\n                            \x3c/div\x3e                           \r\n                        \x3c/div\x3e                      \r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv\x3e   \r\n                \x3cfieldset\x3e\r\n                    \x3clegend\x3e${programStrings.fontSample}\x3c/legend\x3e\r\n                    \x3clabel class\x3d"fontSample" \r\n                           data-dojo-attach-point\x3d"fontSample"\x3eAaBbYyZz\x3c/label\x3e\r\n                \x3c/fieldset\x3e    \r\n            \x3c/div\x3e         \r\n        \x3c/div\x3e\r\n    \x3c/div\x3e    \r\n    \r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"restoreButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon restoreIcon"\'\x3e${webviewStrings.rcbRestoreDefault}\x3c/button\x3e        \r\n        \r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:webview/widget/templates/ButtonGroupButton.html":'\x3clabel class\x3d"button-group-label ${baseClass}" data-dojo-attach-point\x3d"buttonsContainer"\x3e\r\n    \x3cinput type\x3d"checkbox"\r\n           data-dojo-attach-point\x3d"checkBox"\r\n           data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\r\n    \x3cspan\x3e${!content}\x3c/span\x3e\r\n\x3c/label\x3e',"url:webview/widget/templates/ButtonGroup.html":'\x3cspan class\x3d"button-group-wrapper ${baseClass}" data-dojo-attach-point\x3d"buttonsContainer"\x3e\x3c/span\x3e',
"url:webview/admin/widget/templates/NativeDndPoint.html":'\x3cdiv class\x3d"dnd-point-item" title\x3d"${deviceName}/${pointName} (${pointMnemonic})" draggable\x3d"true"\r\n     data-dojo-attach-event\x3d"ondragstart:drag, ondragend:stopDrag"\x3e\r\n    \x3cspan class\x3d"webviewIcon dragHandle" data-dojo-attach-point\x3d"grabIcon"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"pointLabel"\x3e\r\n        ${deviceName}/${pointName}\x26nbsp;(${pointMnemonic})\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',"url:webview/admin/programs/widget/templates/SaveFileDialog.html":'\x3cdiv class\x3d"saveFileDialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel class\x3d"form-label" data-dojo-attach-point\x3d"filenameLabel"\x3e${webviewStrings.filename}:\x3c/label\x3e\r\n            \x3cinput class\x3d"form-inputContainer" type\x3d"text" name\x3d"filename" placeholder\x3d"${placeholderName}" value\x3d"" autocomplete\x3d"off"\r\n                   data-dojo-attach-point\x3d"filenameTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"baseClass:\'form-input\'" /\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e    \r\n    \r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n                \r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon saveIcon"\'\x3e\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e    \r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:webview/admin/widget/templates/DevicePullout.html":'\x3cdiv class\x3d"device-pullout ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"content-container" data-dojo-attach-point\x3d"contents"\x3e\r\n        \x3cdiv class\x3d"device-gutter" data-dojo-attach-point\x3d"deviceContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"okButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickOk"\r\n                    data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                    iconClass:\'webviewIcon svg-send-multiple-icon\',\r\n                    label: \'${okLabel}\'"\x3e${okLabel}\x3c/button\x3e\r\n\r\n            \x3cbutton data-dojo-attach-point\x3d"cancelButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-attach-event\x3d"onClick:_onClickCancel"\r\n                    data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                    iconClass:\'webviewIcon svg-cancel-icon\',\r\n                    label: \'${rcStrings.btnCancel}\'"\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/EditPointDialog.html":'\x3cdiv class\x3d"dijitDialog generic-bacnet-edit point-edit-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 535px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"loading-overlay"\r\n             data-dojo-attach-point\x3d"loadingOverlay"\x3e\r\n            \x3cdiv class\x3d"loading-animation hidden"\r\n                 data-dojo-attach-point\x3d"loadingAnimation"\x3e\r\n                \x3cdiv class\x3d"cog-main"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-top"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"cog-bot"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"error-overlay hidden"\r\n             data-dojo-attach-point\x3d"errorOverlay"\x3e\r\n            \x3cdiv class\x3d"warning-icon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"message-container" data-dojo-attach-point\x3d"errorMessageContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"point-name"\r\n             data-dojo-attach-point\x3d"pointName"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"required-sign"\r\n             data-dojo-attach-point\x3d"requiredNote"\x3e* ${rcStrings.requiredField}\x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"valueLabel"\x3e${rcStrings.value}\x3cspan class\x3d"required-sign"\x3e*\x3c/span\x3e:\x3c/label\x3e\r\n            \x3cdiv class\x3d"value-input-container" data-dojo-attach-point\x3d"valueInputContainer"\x3e\r\n                \x3cinput type\x3d\'text\'\r\n                       data-dojo-attach-point\x3d\'numericValueInput\'\r\n                       data-dojo-type\x3d\'dijit/form/ValidationTextBox\'\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                        trim: "true",\r\n                                        maxLength: "256",\r\n                                        required: "true",\r\n                                        invalidMessage: "${rcStrings.invalidNumber}",\r\n                                        pattern: "[+|-]{0,1}(\\\\d+|\\\\d+\\\\.\\\\d+){1}([e|E]{1}\\\\+\\\\d+){0,1}"\'/\x3e\r\n\r\n                \x3cselect class\x3d"hidden"\r\n                        data-dojo-attach-point\x3d"digitalValueInput"\r\n                        data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                        data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                        autoComplete: true"\x3e\x3c/select\x3e\r\n\r\n                \x3ctextarea class\x3d"hidden"\r\n                          data-dojo-attach-point\x3d"textValueInput"\r\n                          data-dojo-type\x3d"dijit/form/SimpleTextarea"\r\n                          data-dojo-props\x3d\'baseClass: "rcTextArea"\'\x3e\x3c/textarea\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"second-column" data-dojo-attach-point\x3d"relinquishAndAutoManualContainer"\x3e\r\n                \x3cspan class\x3d"button-container" data-dojo-attach-point\x3d"relinquishButtonContainer"\x3e\r\n                    \x3cbutton class\x3d"priority-button"\r\n                            data-dojo-attach-point\x3d"_relinquishB"\r\n                            data-dojo-type\x3d"dijit/form/Button"\r\n                            data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\r\n                            data-dojo-props\x3d"baseClass: \'webviewButton circularButton noLabel\',\r\n                            iconClass: \'rcIcon browseIcon\'"\x3e\x3c/button\x3e\r\n                \x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"autoManContainer" class\x3d"auto-man-container"\x3e\r\n                    \x3cselect class\x3d"auto-man-selector"\r\n                            data-dojo-attach-point\x3d"autoManualSelector"\r\n                            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                            autoComplete: false"\x3e\x3c/select\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"reasonLabel"\x3e${rcStrings.reason}\x3cspan class\x3d"required-sign"\x3e*\x3c/span\x3e:\x3c/label\x3e\r\n            \x3cinput type\x3d"text" class\x3d"reason-input timed-hidden"\r\n                   data-dojo-attach-point\x3d"reasonField"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'placeholder: "${webviewStrings.reasonPlaceholder}",\r\n                   baseClass: "rcTextBox",\r\n                   required: ${reasonRequired},\r\n                   trim: true, maxLength: 256\'/\x3e\r\n            \x3cspan class\x3d"second-column hidden" data-dojo-attach-point\x3d"timedContainer"\x3e\r\n                \x3clabel class\x3d"timed-label"\x3e${rcStrings.timed}:\x26nbsp;\x3c/label\x3e\r\n                \x3c!--pattern: \'^[0-9]{2}:[0-9]{2}$\'--\x3e\r\n                \x3cinput class\x3d"timed-input" type\x3d"text"\r\n                       data-dojo-attach-point\x3d"_timedOverrideTB"\r\n                       data-dojo-type\x3d"webview/bacnet/_widget/TimedInput"\r\n                       data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                       value: 0, useSeconds: false, useDefault: true, defaultValue: 30,\r\n                       maxLength: 5" /\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                disabled: true,\r\n                iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton cancelButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_group/templates/DialogRelinquish.html":'\x3cdiv class\x3d"dijitDialog ${baseClass} relinquish-dialog priorities-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d\'bottomMargin\'\x3e\x3cspan data-dojo-attach-point\x3d"_objName"\x3e\x3c/span\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d\'prioritiesGrid\'\x3e\r\n            \x3cdiv class\x3d\'bottomMargin\' data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"button-contianer"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_loadB"\r\n            data-dojo-props\x3d\'baseClass: "webviewButton",\r\n            iconClass: "webviewIcon buttonLoadIcon",\r\n            label: "${rcStrings.load:capitalizeString}"\'\r\n            data-dojo-attach-event\x3d"onClick:_fetch"\x3e\r\n            LOAD\r\n        \x3c/button\x3e\r\n\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_relinquishB"\r\n            data-dojo-props\x3d\'label: "${rcStrings.relinquish:capitalizeString}",\r\n            baseClass: "webviewButton", iconClass: "webviewIcon buttonRelinquishIcon",\r\n            disabled: true\'\r\n            data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\x3e\r\n            RELINQUISH\r\n        \x3c/button\x3e\r\n\r\n    \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n            data-dojo-attach-point\x3d"_closeB"\r\n            data-dojo-props\x3d\'label: "${rcStrings.close:capitalizeString}",\r\n            baseClass: "webviewButton", iconClass: "webviewIcon buttonCloseIcon"\'\r\n            data-dojo-attach-event\x3d"onClick:hide"\x3e\r\n            CLOSE\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/reliable/_group/templates/DialogRelinquish.html":'\x3cdiv class\x3d"dijitDialog ${baseClass} relinquish-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d\'bottomMargin\'\x3e\x3cspan data-dojo-attach-point\x3d"_objName"\x3e\x3c/span\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d\'bottomMargin\' data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"button-contianer"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_loadB"\r\n                data-dojo-props\x3d\'label: "${rcStrings.load:capitalizeString}"\'\r\n                data-dojo-attach-event\x3d"onClick:_fetch"\x3e\r\n            LOAD\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_relinquishB"\r\n                data-dojo-props\x3d\'label: "${rcStrings.relinquish:capitalizeString}",\r\n                disabled: true\'\r\n                data-dojo-attach-event\x3d"onClick:_onClickRelinquish"\x3e\r\n            RELINQUISH\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-point\x3d"_closeB"\r\n                data-dojo-props\x3d\'label: "${rcStrings.close:capitalizeString}"\'\r\n                data-dojo-attach-event\x3d"onClick:hide"\x3e\r\n            CLOSE\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:webview/admin/programs/templates/ProgramToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"sendButton" data-dojo-props\x3d\'titleStr : "${worksheetStrings.send}",\r\n          iconClass: "rc24Icon svg-send-to toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr : "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon svg-cancel-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"sendMultipleButton" data-dojo-props\x3d\'titleStr : "${programStrings.sendMultiple}",\r\n          iconClass: "rc24Icon svg-send-multiple-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"filesMenu" data-dojo-props\x3d\'titleStr : "${programStrings.files}",\r\n          iconClass: "rc24Icon svg-folder toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"toggleTraceButton" data-dojo-props\x3d\'titleStr : "${programStrings.watch}",\r\n          iconClass: "rc24Icon svg-trace toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"toggleMnemonicsButton" data-dojo-props\x3d\'titleStr : "${rcStrings.mnemonic}",\r\n          iconClass: "rc24Icon svg-mnemonic toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"toggleValuesButton" data-dojo-props\x3d\'titleStr : "${programStrings.displayValues}",\r\n          iconClass: "rc24Icon svg-value-en toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"autoCompleteButton" data-dojo-props\x3d\'titleStr : "${programStrings.disableAutoComplete}",\r\n          iconClass: "rc24Icon svg-autocomplete toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"replaceButton" data-dojo-props\x3d\'titleStr : "${programStrings.replace}",\r\n          iconClass: "rc24Icon svg-replace-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"renumberButton" data-dojo-props\x3d\'titleStr : "${programStrings.renumber}",\r\n          iconClass: "rc24Icon svg-renumber-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"clearTraceButton" data-dojo-props\x3d\'titleStr : "${programStrings.clearTrace}",\r\n          iconClass: "rc24Icon svg-clear-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"optionsButton" data-dojo-props\x3d\'titleStr : "${rcStrings.options}",\r\n          iconClass: "rc24Icon svg-options toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/notificationClasses/templates/NotificationClasses.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites notification-classes"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/worksheets/notificationClasses/NotificationClassesToolbar"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/notificationClasses/widgets/templates/AddNotificationClass.html":'\x3cdiv class\x3d"dijitDialog add-notification-class-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 640px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel class\x3d"selector-label"\x3e${rcAlarmStrings.alarmType}:\x3c/label\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"alarmTypeDD"\r\n                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                    searchAttr: \'name\',\r\n                    labelAttr: \'name\',\r\n                    autoComplete: false"\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel class\x3d"selector-label"\x3e${webviewStrings.name}:\x3c/label\x3e\r\n            \x3cinput type\x3d"text"\r\n                   data-dojo-attach-point\x3d"nameTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n                   required: true" /\x3e\r\n\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/ConfirmActionBar.html":"\x3cdiv class\x3d'webview dijitDialogPaneActionBar' data-dojo-attach-point\x3d\"actionBarNode\"\x3e\r\n    \x3cbutton data-dojo-type\x3d'dijit/form/Button' type\x3d'submit'\r\n            data-dojo-props\x3d'baseClass: \"webviewButton\",\r\n            iconClass: \"rcIcon okIcon\"'\r\n            data-dojo-attach-point\x3d\"okButton\"\x3e\x3c/button\x3e\r\n    \x3cbutton data-dojo-type\x3d'dijit/form/Button' type\x3d'button'\r\n            data-dojo-props\x3d'baseClass: \"webviewButton\",\r\n            iconClass: \"rcIcon cancelIcon\"'\r\n            data-dojo-attach-point\x3d\"cancelButton\" data-dojo-attach-event\x3d'click:onCancel'\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n",
"url:webview/admin/worksheets/notificationClasses/widgets/templates/DestinationsEditor.html":'\x3cdiv class\x3d"dijitDialog destinations-editor-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 640px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n             data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n                  data-dojo-props\x3d\'_canEdit: ${_canEdit}\'\r\n                  data-dojo-type\x3d"webview/admin/widget/AddRemoveToolbar"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/notificationClasses/widgets/templates/DestinationEditor.html":'\x3cdiv class\x3d"destination-editor"\x3e\r\n    \x3cdiv\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"type"\r\n                   data-dojo-attach-point\x3d"globalRB"\r\n                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                   data-dojo-props\x3d"checked: false,\r\n                   value: 2, name: \'type\',\r\n                   baseClass: \'webviewAdminRadio\'" /\x3e\r\n            ${webviewStrings.broadcastToAll}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"type"\r\n                   data-dojo-attach-point\x3d"networkRB"\r\n                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                   data-dojo-props\x3d"checked: false,\r\n                   value: 1, name: \'type\',\r\n                   baseClass: \'webviewAdminRadio\'" /\x3e\r\n            ${webviewStrings.broadcastToNetwork}:\r\n        \x3c/label\x3e\r\n        \x3cinput type\x3d"text" class\x3d"location-input"\r\n               data-dojo-attach-point\x3d"networkTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n               pattern: \'[0-9]+\',\r\n               disabled: true" /\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"type"\r\n                   data-dojo-attach-point\x3d"deviceRB"\r\n                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                   data-dojo-props\x3d"checked: false,\r\n                   value: 0, name: \'type\',\r\n                   baseClass: \'webviewAdminRadio\'" /\x3e\r\n            ${rcStrings.device}:\r\n        \x3c/label\x3e\r\n        \x3cinput type\x3d"text" class\x3d"location-input"\r\n               data-dojo-attach-point\x3d"deviceTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n               pattern: \'[0-9]+\',\r\n               disabled: true" /\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"network-mac"\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"radio" name\x3d"type"\r\n                   data-dojo-attach-point\x3d"networkMacRB"\r\n                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                   data-dojo-props\x3d"checked: false,\r\n                   value: 3, name: \'type\',\r\n                   baseClass: \'webviewAdminRadio\'" /\x3e\r\n            ${webviewStrings.networkAndMac}:\r\n        \x3c/label\x3e\r\n        \x3cinput type\x3d"text" class\x3d"device-input"\r\n               data-dojo-attach-point\x3d"networkMacTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n               pattern: \'[0-9]+\',\r\n               disabled: true" /\x3e\r\n        \x3cinput type\x3d"text" class\x3d"address-input"\r\n               data-dojo-attach-point\x3d"macTB"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox\',\r\n               pattern: \'(?:^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){5}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$)|(?:^(?:(?:[0-9A-Fa-f]{1,2}):){5}(?:[0-9A-Fa-f]{1,2})$)\',\r\n               disabled: true" /\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/notificationClasses/widgets/templates/EmailsEditor.html":'\x3cdiv class\x3d"dijitDialog emails-editor-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 640px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n             data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_toolbar"                   \r\n                   data-dojo-props\x3d\'_canEdit: ${_canEdit}\'\r\n                  data-dojo-type\x3d"webview/admin/widget/AddRemoveToolbar"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/notificationClasses/widgets/templates/EventSelector.html":'\x3cdiv class\x3d"event-selector"\x3e\r\n    \x3cdiv\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-attach-point\x3d"toAlarm"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n            ${webviewStrings.toAlarm}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-attach-point\x3d"toFault"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n            ${webviewStrings.toFault}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-attach-point\x3d"toNormal"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n            ${webviewStrings.toNormal}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/widgets/templates/DaySelector.html":'\x3cdiv class\x3d"day-selector"\x3e\r\n    \x3cspan class\x3d"day-toggle left-end" title\x3d"${sundayFullLabel}" data-dojo-attach-point\x3d"sunday"\x3e\r\n        \x3clabel\x3e${sundayLabel}\r\n            \x3cinput type\x3d"checkbox" class\x3d"hidden" value\x3d2\r\n                   data-dojo-attach-point\x3d"sundayCB"\r\n                   data-dojo-attach-event\x3d"onchange: _checkboxChanged" /\x3e\r\n        \x3c/label\x3e\r\n    \x3c/span\x3e\x3cspan class\x3d"day-toggle" title\x3d"${mondayFullLabel}" data-dojo-attach-point\x3d"monday"\x3e\r\n        \x3clabel\x3e${mondayLabel}\r\n            \x3cinput type\x3d"checkbox" class\x3d"hidden" value\x3d128\r\n                   data-dojo-attach-point\x3d"mondayCB"\r\n                   data-dojo-attach-event\x3d"onchange: _checkboxChanged" /\x3e\r\n        \x3c/label\x3e\r\n    \x3c/span\x3e\x3cspan class\x3d"day-toggle" title\x3d"${tuesdayFullLabel}" data-dojo-attach-point\x3d"tuesday"\x3e\r\n        \x3clabel\x3e${tuesdayLabel}\r\n            \x3cinput type\x3d"checkbox" class\x3d"hidden" value\x3d64\r\n                   data-dojo-attach-point\x3d"tuesdayCB"\r\n                   data-dojo-attach-event\x3d"onchange: _checkboxChanged" /\x3e\r\n        \x3c/label\x3e\r\n    \x3c/span\x3e\x3cspan class\x3d"day-toggle" title\x3d"${wednesdayFullLabel}" data-dojo-attach-point\x3d"wednesday"\x3e\r\n        \x3clabel\x3e${wednesdayLabel}\r\n            \x3cinput type\x3d"checkbox" class\x3d"hidden" value\x3d32\r\n                   data-dojo-attach-point\x3d"wednesdayCB"\r\n                   data-dojo-attach-event\x3d"onchange: _checkboxChanged" /\x3e\r\n        \x3c/label\x3e\r\n    \x3c/span\x3e\x3cspan class\x3d"day-toggle" title\x3d"${thursdayFullLabel}" data-dojo-attach-point\x3d"thursday"\x3e\r\n        \x3clabel\x3e${thursdayLabel}\r\n            \x3cinput type\x3d"checkbox" class\x3d"hidden" value\x3d16\r\n                   data-dojo-attach-point\x3d"thursdayCB"\r\n                   data-dojo-attach-event\x3d"onchange: _checkboxChanged" /\x3e\r\n        \x3c/label\x3e\r\n    \x3c/span\x3e\x3cspan class\x3d"day-toggle" title\x3d"${fridayFullLabel}" data-dojo-attach-point\x3d"friday"\x3e\r\n        \x3clabel\x3e${fridayLabel}\r\n            \x3cinput type\x3d"checkbox" class\x3d"hidden" value\x3d8\r\n                   data-dojo-attach-point\x3d"fridayCB"\r\n                   data-dojo-attach-event\x3d"onchange: _checkboxChanged" /\x3e\r\n        \x3c/label\x3e\r\n    \x3c/span\x3e\x3cspan class\x3d"day-toggle right-end" title\x3d"${saturdayFullLabel}" data-dojo-attach-point\x3d"saturday"\x3e\r\n        \x3clabel\x3e${saturdayLabel}\r\n            \x3cinput type\x3d"checkbox" class\x3d"hidden" value\x3d4\r\n                   data-dojo-attach-point\x3d"saturdayCB"\r\n                   data-dojo-attach-event\x3d"onchange: _checkboxChanged" /\x3e\r\n        \x3c/label\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/AddRemoveToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"addButton"\r\n          data-dojo-type\x3d"webview/widget/IconButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButton",\r\n          iconClass: "rc24Icon addIcon toolbarButtonIcon",\r\n          tooltipLabel: "${rcStrings.add}"\'\x3e\x3c/span\x3e\r\n\r\n    \x3cspan data-dojo-attach-point\x3d"deleteButton"\r\n          data-dojo-type\x3d"webview/widget/IconButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButton",\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon",\r\n          _isDisabled: true,\r\n          tooltipLabel: "${rcStrings.rcDelete}"\'\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/IconButton.html":'\x3cspan class\x3d"icon-button ${baseClass}" data-dojo-attach-point\x3d"container"\x3e\r\n    \x3cspan class\x3d"${iconClass}" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\x3c/span\x3e',"url:webview/admin/worksheets/notificationClasses/widgets/templates/PriorityEditor.html":'\x3cdiv class\x3d"dijitDialog priority-editor-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 640px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"priority-container"\x3e\r\n            \x3clabel class\x3d"selector-label"\x3e${webviewStrings.toAlarm}\x3c/label\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"toAlarmDD"\r\n                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                    searchAttr: \'name\',\r\n                    labelAttr: \'name\',\r\n                    autoComplete: false"\x3e\x3c/select\x3e\r\n\r\n            \x3clabel class\x3d"ack-container"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                       data-dojo-attach-point\x3d"toAlarmCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                ${webviewStrings.ackRequired}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"priority-container"\x3e\r\n            \x3clabel class\x3d"selector-label"\x3e${webviewStrings.toFault}\x3c/label\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"toFaultDD"\r\n                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                    searchAttr: \'name\',\r\n                    labelAttr: \'name\',\r\n                    autoComplete: false"\x3e\x3c/select\x3e\r\n\r\n            \x3clabel class\x3d"ack-container"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                       data-dojo-attach-point\x3d"toFaultCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                ${webviewStrings.ackRequired}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"priority-container"\x3e\r\n            \x3clabel class\x3d"selector-label"\x3e${webviewStrings.toNormal}\x3c/label\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"toNormalDD"\r\n                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                    data-dojo-props\x3d"baseClass: \'rcSelectBox\',\r\n                    searchAttr: \'name\',\r\n                    labelAttr: \'name\',\r\n                    autoComplete: false"\x3e\x3c/select\x3e\r\n\r\n            \x3clabel class\x3d"ack-container"\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                       data-dojo-attach-point\x3d"toNormalCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n                ${webviewStrings.ackRequired}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/widgets/templates/DescriptionEditor.html":'\x3cdiv class\x3d"dijitDialog description-editor-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent webviewContentPane"\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3clabel class\x3d"selector-label" data-dojo-attach-point\x3d"inputLabel"\x3e\r\n                ${webviewStrings.description}:\x3cbr /\x3e\r\n                (${webviewStrings.maxCharacters}: 255)\r\n            \x3c/label\x3e\r\n            \x3ctextarea style\x3d"min-height: 5em;"\r\n                      data-dojo-attach-point\x3d"descriptionInput"\r\n                      data-dojo-type\x3d"dijit/form/Textarea"\r\n                      data-dojo-props\x3d\'baseClass: "rcTextArea",\r\n                      disabled: !${canEdit}, maxLength: 255\'\x3e${value}\x3c/textarea\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n            \x3cbutton type\x3d\'submit\'\r\n                    data-dojo-type\x3d\'dijit/form/Button\'\r\n                    data-dojo-attach-point\x3d"okButton"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    label: "${rcStrings.btnOk}",\r\n                    iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n            \x3cbutton type\x3d\'button\'\r\n                    data-dojo-type\x3d\'dijit/form/Button\'\r\n                    data-dojo-attach-point\x3d"cancelButton"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    label: "${rcStrings.btnCancel}",\r\n                    iconClass: "rcIcon cancelIcon"\'\r\n                    data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/widgets/templates/NewWorksheetInstance.html":'\x3cdiv class\x3d"dijitDialog new-worksheet-instance"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent webviewContentPane"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_newInstanceForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "newInstanceForm", action: "", method: "",\r\n             name: "newInstanceForm", encType: "multipart/form-data"\'\x3e\r\n\r\n            \x3cfieldset data-dojo-attach-point\x3d"instanceTypeContainer"\x3e\r\n                \x3clegend\x3e${webviewStrings.instance}\x3c/legend\x3e\r\n                \x3cdiv class\x3d\'radioButtonContainer\'\r\n                     data-dojo-attach-point\x3d\'instanceTypes\'\x3e\r\n                    \x3cdiv class\x3d"radioItem"\x3e\r\n                        \x3cinput type\x3d"radio" name\x3d"instanceType" id\x3d"nextInstance" checked value\x3d"${InstanceTypes.next}"\r\n                               data-dojo-type\x3d"dijit/form/RadioButton"\r\n                               data-dojo-attach-point\x3d\'nextInstanceType\'\r\n                               data-dojo-props\x3d\'baseClass: "webviewAdminRadio",\r\n                               value: ${InstanceTypes.next}\' /\x3e\r\n                        \x3clabel class\x3d"radioButtonLabel" for\x3d"nextInstance" data-dojo-attach-point\x3d"nextLabel"\x3e${webviewStrings.nextInstance}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n\r\n                    \x3cdiv class\x3d"field-and-label"\x3e\r\n                        \x3cspan class\x3d"radioItem"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"instanceType" id\x3d"specificInstance" value\x3d"${InstanceTypes.specific}"\r\n                                   data-dojo-attach-point\x3d"specificInstanceType"\r\n                                   data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                   data-dojo-props\x3d\'baseClass: "webviewAdminRadio",\r\n                                   value: "${InstanceTypes.specific}" \'/\x3e\r\n                            \x3clabel class\x3d"radioButtonLabel" for\x3d"specificInstance" data-dojo-attach-point\x3d"specificLabel"\x3e${webviewStrings.specificInstance}\x3c/label\x3e\r\n                        \x3c/span\x3e\r\n                        \x3cspan class\x3d"invisible" data-dojo-attach-point\x3d"specificContainer"\x3e\r\n                            \x3cinput type\x3d"number" name\x3d"specificInstance" min\x3d"1"\r\n                                   data-dojo-attach-point\x3d"specificInstance"\r\n                                   data-dojo-type\x3d"dijit/form/TextBox"\r\n                                   data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                                   min: 1\'/\x3e\r\n                        \x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n\r\n            \x3cdiv class\x3d"field-and-label"\x3e\r\n                \x3clabel for\x3d"name"\x3e${webviewStrings.name}: \x3c/label\x3e\r\n                \x3cinput type\x3d"text" name\x3d"name" id\x3d"name"\r\n                       data-dojo-attach-point\x3d"name"\r\n                       data-dojo-type\x3d"dijit/form/TextBox"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox"\' /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n            \x3cbutton type\x3d"submit"\r\n                    data-dojo-attach-point\x3d"okButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    disabled: true,\r\n                    iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n            \x3cbutton type\x3d"button"\r\n                    data-dojo-attach-point\x3d"cancelButton"\r\n                    data-dojo-type\x3d"dijit/form/Button"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\r\n                    data-dojo-attach-event\x3d\'click:onCancel\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/InlineEditBox.html":'\x3cdiv class\x3d"wvInlineEditBox ${baseClass}" data-dojo-attach-point\x3d"inlineContainer"\x3e\r\n    \x3cspan class\x3d"linkable" data-dojo-attach-point\x3d"valueText"\x3e${value}\x3c/span\x3e\r\n    \x3cinput class\x3d"hidden" value\x3d"${value}"\r\n           data-dojo-attach-point\x3d"valueTextBox"\r\n           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n           data-dojo-props\x3d"value: \'${value}\',\r\n           pattern: \'${pattern}\', maxLength: ${maxLength}" /\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/notificationClasses/templates/NotificationClassesToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"sendButton"\r\n          data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButton",\r\n          iconClass: "rc24Icon sendIcon toolbarButtonIcon",\r\n          _isDisabled: true,\r\n          titleStr: "${worksheetStrings.send}"\'\x3e\x3c/span\x3e\r\n\r\n    \x3cspan data-dojo-attach-point\x3d"cancelButton"\r\n          data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButton",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon",\r\n          titleStr: "${webviewStrings.cancel}"\'\x3e\x3c/span\x3e\r\n\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"exportButton"\r\n          data-dojo-props\x3d\'baseClass: "toolbarButton", titleStr: "${rcStrings.xport}",\r\n          iconClass: "rc24Icon svg-export-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n        data-dojo-attach-point\x3d"excelButton"\r\n        data-dojo-props\x3d\'titleStr: "${webviewStrings.exportExcel}",\r\n        iconClass: "rc24Icon toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/programs/templates/ProgramsWorksheet.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites programs-worksheet worksheet"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/worksheets/programs/ProgramsWorksheetToolbar"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"grid-container" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"database-remaining" data-dojo-attach-point\x3d"dbRemaining"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/programs/templates/ProgramsWorksheetToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"sendButton" data-dojo-props\x3d\'titleStr: "${worksheetStrings.send}",\r\n          iconClass: "rc24Icon sendIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr: "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"editButton" data-dojo-props\x3d\'titleStr: "${rcStrings.edit}",\r\n          iconClass: "rc24Icon adminEditIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"exportButton" data-dojo-props\x3d\'titleStr: "${rcStrings.xport}",\r\n          iconClass: "rc24Icon svg-export-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n        data-dojo-attach-point\x3d"excelButton"\r\n        data-dojo-props\x3d\'titleStr: "${webviewStrings.exportExcel}",\r\n        iconClass: "rc24Icon toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"toggleButton" data-dojo-props\x3d\'titleStr: "${webviewStrings.toggleColumns}",\r\n          iconClass: "rc24Icon svg-column-toggle-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"addButton" data-dojo-props\x3d\'titleStr: "${rcStrings.add}",\r\n          iconClass: "rc24Icon addIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"deleteButton" data-dojo-props\x3d\'titleStr: "${rcStrings.rcDelete}",\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/remoteAlarms/templates/RemoteAlarmNotifications.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites remote-alarm-notifications worksheet"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cdiv class\x3d"recipient-filters"\r\n             data-dojo-attach-point\x3d"recipientFilters"\x3e\r\n\r\n            \x3cselect data-dojo-attach-point\x3d"userFilter"\r\n                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                    data-dojo-props\x3d\'baseClass: "rcSelectBox",\r\n                    required: false,\r\n                    placeHolder: "${remoteAlarmStrings.filterRecipients}",\r\n                    autoComplete: false\'\x3e\x3c/select\x3e\r\n\r\n            \x3cselect data-dojo-attach-point\x3d"systemsFilter"\r\n                    data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                    data-dojo-props\x3d\'baseClass: "rcSelectBox",\r\n                    required: false,\r\n                    placeHolder: "${remoteAlarmStrings.filterSystems}",\r\n                    autoComplete: false\'\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/worksheets/remoteAlarms/RemoteAlarmsToolbar"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"grid-container" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/form/templates/MultiMenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n    \x3ctd data-dojo-attach-point\x3d"containerNode"\x3e\r\n        \x3cinput type\x3d"checkbox"\r\n               data-dojo-attach-point\x3d"checkboxNode,focusNode"\r\n               data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"labelNode"\x3e${label}\x3c/label\x3e\r\n    \x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:webview/admin/worksheets/widgets/templates/DaySelectionDialog.html":'\x3cdiv class\x3d"dijitDialog day-selection-dialog"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent webviewContentPane"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"daySelector"\r\n              data-dojo-type\x3d"webview/admin/worksheets/widgets/DaySelector"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"submit"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/widgets/templates/SystemSelectionDialog.html":'\x3cdiv class\x3d"dijitDialog system-select-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent webviewContentPane sys-selection-content"\x3e     \r\n        \x3cdiv class\x3d"filter-bar"\x3e\r\n            \x3cdiv class\x3d"systems-filter-container" data-dojo-attach-point\x3d"textSearchContainer"\x3e\r\n                \x3cspan class\x3d"searchform recipients-filter-search" data-dojo-attach-point\x3d"textSearchField"\r\n                  data-dojo-type\x3d"webview/widget/SearchByField"\r\n                  data-dojo-props\x3d"hasMenu: false"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"systems-checkbox" data-dojo-attach-point\x3d"allSystemsCheckContainer"\x3e\r\n                \x3cdiv  class\x3d"form-checkbox" \x3e\r\n                    \x3cdiv class\x3d"form-checkbox-buffer"\x3e\r\n                        \x3clabel\x3e\r\n                            \x3cinput type\x3d"checkbox"\r\n                                 data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                 data-dojo-attach-point\x3d"allSystemsCheck"/\x3e\r\n                            ${remoteAlarmNotificationsStrings.systemSelectChkBoxLabel}\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e          \r\n            \x3c/div\x3e            \r\n        \x3c/div\x3e\r\n        \r\n        \x3cdiv class\x3d\'system-select-desc\'\x3e${remoteAlarmNotificationsStrings.systemSelectDescription}\x3c/div\x3e\r\n        \r\n        \x3cdiv class\x3d"list-selection" data-dojo-attach-point\x3d"listSelection"\r\n            data-dojo-type\x3d"webview/admin/widget/ListSelection"\r\n            data-dojo-props\x3d\'leftSelectionTitleValue: "${remoteAlarmNotificationsStrings.systemSelectList}",\r\n                            rightSelectionTitleValue:"${remoteAlarmNotificationsStrings.systemSelected}",\r\n                            site: "test"\'\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon",\r\n                label: "${rcStrings.btnOk}"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\' data-dojo-attach-event\x3d"click:onCancel"\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon",\r\n                label: "{rcStrings.btnCancel}"\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/widget/templates/ListSelection.html":'\x3cdiv class\x3d"list-selection ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"list-selection-container" data-dojo-attach-point\x3d"listSelection"\x3e\r\n        \x3cspan class\x3d"column list-selection-column"\x3e\r\n            \x3ctext class\x3d"selection-title" data-dojo-attach-point\x3d"leftSelectionTitle"\x3e\x3c/text\x3e\r\n            \x3cfieldset class\x3d"list-selection-fieldset" data-dojo-attach-point\x3d"leftSelection"\x3e\r\n                \x3cdiv class\x3d"list-selection-grid" data-dojo-attach-point\x3d"leftGridNode"\x3e\x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n        \x3c/span\x3e\r\n        \r\n        \x3cspan class\x3d"column list-selection-column"\x3e\r\n            \x3cdiv class\x3d"right-left-buttons"\x3e\r\n                \x3cdiv class\x3d"webviewIcon svg-add-icon linkable disabled" data-dojo-attach-point\x3d"rightButton"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"webviewIcon svg-delete-icon linkable disabled" data-dojo-attach-point\x3d"leftButton"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"column list-selection-column"\x3e \r\n            \x3ctext class\x3d"selection-title" data-dojo-attach-point\x3d"rightSelectionTitle"\x3e\x3c/text\x3e\r\n            \x3cfieldset class\x3d"list-selection-fieldset" data-dojo-attach-point\x3d"rightSelection"\x3e\r\n                \x3cdiv class\x3d"list-selection-grid" data-dojo-attach-point\x3d"rightGridNode"\x3e\x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n        \x3c/span\x3e     \r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/widget/templates/ListSelectionNode.html":'\x3cspan data-dojo-attach-point\x3d"listSelectionNode"\x3e\x3c/span\x3e',"url:webview/admin/worksheets/widgets/templates/SelectRecipientsDialog.html":'\x3cdiv class\x3d"select-recipients-dialog ${baseClass}" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dialog-container"\x3e\r\n        \x3cdiv class\x3d"radio-button-container"\r\n             data-dojo-attach-point\x3d"_recipientTypeForm"\r\n             data-dojo-type\x3d"dijit/form/Form"\r\n             data-dojo-props\x3d\'name: "_recipientTypeForm", action: "", method: "",\r\n             encType: "multipart/form-data"\'\x3e\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"recipientType" id\x3d"${id}_emailType" checked value\x3d"2"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"emailType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel class\x3d"radioButtonLabel" for\x3d"${id}_emailType" data-dojo-attach-point\x3d"emailLabel"\x3e${webviewStrings.email}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"recipientType" id\x3d"${id}_userType" value\x3d"0"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"userType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel class\x3d"radioButtonLabel" for\x3d"${id}_userType" data-dojo-attach-point\x3d"userLabel"\x3e${webviewStrings.wvUser}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3cspan class\x3d"radioItem"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"recipientType" id\x3d"${id}_roleType" value\x3d"1"\r\n                       data-dojo-type\x3d"dijit/form/RadioButton"\r\n                       data-dojo-attach-point\x3d"roleType"\r\n                       data-dojo-props\x3d"baseClass: \'webviewAdminRadio\'" /\x3e\r\n                \x3clabel class\x3d"radioButtonLabel" for\x3d"${id}_roleType" data-dojo-attach-point\x3d"roleLabel"\x3e${rolesStrings.role}\x3c/label\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"recipients-filter-container hidden" data-dojo-attach-point\x3d"textSearchContainer"\x3e\r\n            \x3cspan class\x3d"searchform recipients-filter-search" data-dojo-attach-point\x3d"textSearchField"\r\n                  data-dojo-type\x3d"webview/widget/SearchByField"\r\n                  data-dojo-props\x3d"hasMenu: false"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"add-email-container" data-dojo-attach-point\x3d"textEmailContainer"\x3e\r\n            \x3cinput class\x3d"form-inputContainer add-email-text" type\x3d"email" name\x3d"email" value\x3d"" autocomplete\x3d"off"\r\n                   data-dojo-attach-point\x3d"emailTB"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d\'baseClass:"form-input",\r\n                   invalidMessage: "${errorStrings.invalidEmail}",\r\n                   validator: dojox.validate.isEmailAddress\' /\x3e\r\n            \x3cspan class\x3d"icon-border linkable" data-dojo-attach-point\x3d"addEmailButton"\x3e\r\n                \x3cspan class\x3d"webviewIcon svg-add-icon" \x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"list-selection" data-dojo-attach-point\x3d"listSelection"\r\n             data-dojo-type\x3d"webview/admin/widget/ListSelection"\r\n             data-dojo-props\x3d\'leftSelectionTitleValue: "\x26nbsp;",\r\n             rightSelectionTitleValue:"${remoteAlarmNotificationsStrings.selectedRecipients}",\r\n             site: ${site}\'\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n\r\n            \x3cbutton type\x3d\'submit\'\r\n                    data-dojo-type\x3d\'dijit/form/Button\'\r\n                    data-dojo-attach-point\x3d"okButton"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n\r\n            \x3cbutton type\x3d\'button\'\r\n                    data-dojo-type\x3d\'dijit/form/Button\'\r\n                    data-dojo-attach-point\x3d"cancelButton"\r\n                    data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                    iconClass: "rcIcon cancelIcon"\'\r\n                    data-dojo-attach-event\x3d\'click:onCancel\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/worksheets/remoteAlarms/templates/RemoteAlarmsToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"addButton" data-dojo-props\x3d\'titleStr : "${rcStrings.add}",\r\n          iconClass: "rc24Icon addIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"deleteButton" data-dojo-props\x3d\'titleStr : "${rcStrings.rcDelete}",\r\n          disabled: true,\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/trendLogs/templates/TrendLogPoints.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites trendlogs singlePage" style\x3d"width:100%;"\x3e\r\n\r\n    \x3c!-- BUTTON TABS --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n        \x3cdiv class\x3d"commitButtons selected" data-dojo-type\x3d"webview/widget/CommitButtons"\r\n             data-dojo-attach-point\x3d"commitButtons"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!--right side --\x3e\r\n    \x3cdiv class\x3d"tree-container"\x3e\r\n        \x3c!--Results list--\x3e\r\n        \x3cdiv class\x3d"hidden results-container"\r\n             data-dojo-attach-point\x3d"resultsWidget"\r\n             data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n             data-dojo-props\x3d\'baseClass: "schedule-tree-results",\r\n             paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"nav-group-container" data-dojo-attach-point\x3d"builderContainer"\x3e\r\n            \x3cdiv class\x3d"webviewAdminResizeable"\r\n                 data-dojo-attach-point\x3d"builderWidget"\r\n                 data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n                 data-dojo-props\x3d\'titleLabel: "${webviewStrings.trendLogPoints}"\'\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/templates/pointsItem.html":'\x3cdiv class\x3d"pointsItem" title\x3d"${sysName}/${deviceName}/${pointName} (${pointMnemonic})"\x3e\r\n    \x3cspan class\x3d"webviewIcon dragHandle" data-dojo-attach-point\x3d"grabIcon"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"pointLabel"\x3e\r\n        ${sysName}/${deviceName}/${pointName}\x26nbsp;(${pointMnemonic})\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',"url:webview/admin/worksheets/trendLogs/templates/TrendLogPointItem.html":'\x3cdiv class\x3d"trendlogPointContainer" role\x3d"presentation"\x3e\r\n    \x3cdiv class\x3d"pointPlaceHolderBefore" data-dojo-attach-point\x3d"beforePlaceHolder"\x3e\x3c/div\x3e\r\n    \x3cspan class\x3d"trendlogPointItem" data-dojo-attach-point\x3d"contentNode" role\x3d"presentation"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"displayNode"\x3e${pointName}\x26nbsp;(${pointMnemonic})\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"editNode"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cdiv class\x3d"pointPlaceHolderAfter" data-dojo-attach-point\x3d"afterPlaceHolder"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/trendLogs/templates/TrendLogsView.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites trendlogs singlePage worksheet"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonBar"\r\n         data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n              data-dojo-type\x3d"webview/admin/worksheets/trendLogs/TrendLogToolbar"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/widgets/templates/AdvancedTrendPropertyEditor.html":'\x3cdiv class\x3d"advancedTrendProperties ${baseClass}"\x3e\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e${webviewStrings.startTime}\x3c/legend\x3e\r\n\r\n        \x3cdiv\x3e\r\n            \x3clabel\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                       data-dojo-attach-point\x3d"alwaysStartCB"\r\n                       data-dojo-type\x3d\'dijit/form/CheckBox\'\r\n                       data-dojo-props\x3d"checked: ${start.always},\r\n                       disabled: ${disableEditStart}"/\x3e\r\n                ${webviewStrings.alwaysStart}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3c!-- Date Picker --\x3e\r\n            \x3clabel\x3e${rcStrings.date}:\x3c/label\x3e\r\n            \x3cdiv class\x3d"dropdown-container"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"startDate"\r\n                       data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcSelectBox\', disabled: true" /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3c!-- Time Picker --\x3e\r\n            \x3clabel\x3e${rcStrings.time}:\x3c/label\x3e\r\n            \x3cdiv class\x3d"dropdown-container"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"startTime"\r\n                       data-dojo-type\x3d"dijit/form/TimeTextBox"\r\n                       data-dojo-props\x3d"constraints:{timePattern: \'HH:mm:ss\'},\r\n                       baseClass: \'rcSelectBox\', disabled: true" /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cfieldset\x3e\r\n        \x3clegend\x3e${webviewStrings.stopTime}\x3c/legend\x3e\r\n        \x3cdiv\x3e\r\n            \x3clabel\x3e\r\n                \x3cinput type\x3d"checkbox"\r\n                       data-dojo-attach-point\x3d"neverStopCB"\r\n                       data-dojo-type\x3d\'dijit/form/CheckBox\'\r\n                       data-dojo-props\x3d"checked: ${end.never}, disabled: ${disableEditEnd}"/\x3e\r\n                ${webviewStrings.neverStop}\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3c!-- Date Picker --\x3e\r\n            \x3clabel\x3e${rcStrings.date}:\x3c/label\x3e\r\n            \x3cdiv class\x3d"dropdown-container"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"endDate"\r\n                       data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                       data-dojo-props\x3d"baseClass: \'rcSelectBox\', disabled: true" /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"input-container"\x3e\r\n            \x3c!-- Time Picker --\x3e\r\n            \x3clabel\x3e${rcStrings.time}:\x3c/label\x3e\r\n            \x3cdiv class\x3d"dropdown-container"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"endTime"\r\n                       data-dojo-type\x3d"dijit/form/TimeTextBox"\r\n                       data-dojo-props\x3d"constraints:{timePattern: \'HH:mm:ss\'},\r\n                       baseClass: \'rcSelectBox\', disabled: true" /\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv class\x3d"bottomCheckboxes"\x3e\r\n        \x3c!-- Checkbox for stop when full --\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-attach-point\x3d"stopWhenFullCB"\r\n                   data-dojo-type\x3d\'dijit/form/CheckBox\'\r\n                   data-dojo-props\x3d"checked: ${stopWhenFull},\r\n                   disabled: ${forClientSide}"/\x3e\r\n            ${webviewStrings.stopWhenFull}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"clearLogDataContainer" class\x3d"bottomCheckboxes"\x3e\r\n        \x3c!-- Checkbox for Clear Log Data --\x3e\r\n        \x3clabel\x3e\r\n            \x3cinput type\x3d"checkbox"\r\n                   data-dojo-attach-point\x3d"clearLogDataCB"\r\n                   data-dojo-type\x3d\'dijit/form/CheckBox\'\r\n                   data-dojo-props\x3d"checked: false,\r\n                   disabled: ${forClientSide}"/\x3e\r\n            ${webviewStrings.clearLogData}\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/admin/worksheets/trendLogs/templates/TrendLogToolbar.html":'\x3cdiv class\x3d"toolbar-button-container" data-dojo-attach-point\x3d"toolbarButtonContainer"\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"sendButton" data-dojo-props\x3d\'titleStr: "${worksheetStrings.send}",\r\n          iconClass: "rc24Icon sendIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan  data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"cancelButton" data-dojo-props\x3d\'titleStr: "${webviewStrings.cancel}",\r\n          iconClass: "rc24Icon cancelIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"exportButton" data-dojo-props\x3d\'titleStr: "${rcStrings.xport}",\r\n          iconClass: "rc24Icon svg-export-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n        data-dojo-attach-point\x3d"excelButton"\r\n        data-dojo-props\x3d\'titleStr: "${webviewStrings.exportExcel}",\r\n        iconClass: "rc24Icon toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"columnButton" data-dojo-props\x3d\'titleStr: "${webviewStrings.toggleColumns}",\r\n          iconClass: "rc24Icon svg-column-toggle-icon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"addButton" data-dojo-props\x3d\'titleStr: "${rcStrings.add}",\r\n          iconClass: "rc24Icon addIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n          data-dojo-attach-point\x3d"deleteButton" data-dojo-props\x3d\'titleStr: "${rcStrings.rcDelete}",\r\n          iconClass: "rc24Icon deleteIcon toolbarButtonIcon"\'\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/admin/templates/setupFinished.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"webviewAdminSites" style\x3d"width:100%;"\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"setupContentPane"\r\n\t\t data-dojo-type\x3d"webview/widget/WebviewContentPane"\t\t \r\n\t\t class\x3d"webviewAdminSites"\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\r\n\r\n            ${!webviewStrings.setupFinishedMsg}\r\n\r\n\t\t\t\x3cul\x3e\r\n                \x3cli data-dojo-attach-point\x3d"createTreeItem"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"createTreeNode"  data-dojo-attach-event\x3d"onclick: _onClickLink" title\x3d\'${webviewStrings.createTreeNode}\' class\x3d\'linkable\'\x3e${webviewStrings.createTreeNode}\x3c/a\x3e\r\n                \x3c/li\x3e\r\n                \x3cli data-dojo-attach-point\x3d"createGroupItem"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"createGroupNode"   data-dojo-attach-event\x3d"onclick: _onClickLink" title\x3d\'${webviewStrings.createGroupNode}\' class\x3d\'linkable\'\x3e${webviewStrings.createGroupNode}\x3c/a\x3e\r\n                \x3c/li\x3e\r\n                \x3cli data-dojo-attach-point\x3d"createScheduleItem"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"createScheduleNode"   data-dojo-attach-event\x3d"onclick: _onClickLink" title\x3d\'${webviewStrings.createScheduleNode}\' class\x3d\'linkable\'\x3e${webviewStrings.createScheduleNode}\x3c/a\x3e\r\n                \x3c/li\x3e\r\n                \x3cli  data-dojo-attach-point\x3d"createSiteItem"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"createSiteNode"   data-dojo-attach-event\x3d"onclick: _onClickLink" title\x3d\'${webviewStrings.createSiteNode}\' class\x3d\'linkable\'\x3e${webviewStrings.createSiteNode}\x3c/a\x3e\r\n                \x3c/li\x3e\r\n                \x3cli data-dojo-attach-point\x3d"createSystemItem"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"createSystemNode"  data-dojo-attach-event\x3d"onclick: _onClickLink" title\x3d\'${webviewStrings.createSystemNode}\' class\x3d\'linkable\'\x3e${webviewStrings.createSystemNode}\x3c/a\x3e\r\n                \x3c/li\x3e\r\n                \x3cli data-dojo-attach-point\x3d"createUserItem"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"createUserNode"  data-dojo-attach-event\x3d"onclick: _onClickLink" title\x3d\'${webviewStrings.createUserNode}\' class\x3d\'linkable\'\x3e${webviewStrings.createUserNode}\x3c/a\x3e\r\n                \x3c/li\x3e\r\n                \x3cli data-dojo-attach-point\x3d"createRoleItem"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"createRoleNode"  data-dojo-attach-event\x3d"onclick: _onClickLink" title\x3d"${roleStrings.createAnotherRole}" class\x3d\'linkable\'\x3e${roleStrings.createAnotherRole}\x3c/a\x3e\r\n                \x3c/li\x3e\r\n                \x3cli\x3e\x3ca href\x3d"#" data-dojo-attach-point\x3d"visitSiteNode" data-dojo-attach-event\x3d"onclick: _onClickLink" class\x3d\'linkable\' target\x3d\'_blank\'\x3e\x3c/a\x3e\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseSchedule/templates/EnterpriseSchedule.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"rcEnterprise" style\x3d"width:100%; height:100%;"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_container" data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"noprint rcEnterpriseBorderContainer" style\x3d"width:100%; height:100%;"\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" \r\n             class\x3d"rcEnterpriseCenter"\r\n             data-dojo-props\x3d"region:\'center\'"\r\n             data-dojo-attach-point\x3d"calendarContainer"\x3e\r\n\r\n            \x3cdiv data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/Calendar"\r\n                 data-dojo-attach-point\x3d"calendar"\r\n                 class\x3d"rcEnterpriseCalendar"\x3e\r\n            \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" \r\n             class\x3d"rcEnterpriseRight"\r\n             data-dojo-props\x3d"splitter:true, region:\'right\'"\r\n             data-dojo-attach-point\x3d"rightContent"\x3e\r\n\r\n            \x3c!--Edit Event Pane--\x3e\r\n            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                 data-dojo-attach-point\x3d"editEventPane"\r\n                 class\x3d"rcWidgetHeaderBar topPane event-editor"\r\n                 data-dojo-props\x3d"title: \'editEvent\', iconId: \'editEventIcon\'"\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/EventEditor"\r\n                     data-dojo-attach-point\x3d"eventEditor"\r\n                     data-dojo-props\x3d\'baseClass: "event-editor"\'\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!--manager schedule view--\x3e\r\n            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                 data-dojo-attach-point\x3d"scheduleTreePane"\r\n                 class\x3d"rcWidgetHeaderBar scheduleTree"\r\n                 data-dojo-props\x3d"title: \'scheduleTree\', iconId:\'blockViewIcon\'"\x3e\r\n\r\n                \x3cdiv class\x3d"blockSelectionContainer" data-dojo-attach-point\x3d"blockSelectionContainer"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"blockSelection"\x3e\x3c/span\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"blockManagerButton"\r\n                          data-dojo-type\x3d"dijit/form/Button"\r\n                          data-dojo-props\x3d"baseClass: \'webviewButton circularButton noLabel blocksButton\',\r\n                          iconClass: \'rcIcon blocksIcon\'"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"scheduleTreeContainer" data-dojo-attach-point\x3d"scheduleTreeContainer"\x3e\r\n                    \x3cdiv data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/ScheduleTree"\r\n                         data-dojo-attach-point\x3d"scheduleTree"\r\n                         data-dojo-props\x3d"enterpriseScheduleId: ${pointInstance},\r\n                                            site: ${site}"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"blockTreeContainer" data-dojo-attach-point\x3d"blockTreeView"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/EnterpriseScheduleToolbar"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/BlockTreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"selectorNode" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d\'value: "${item.id}"\'\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"contentNode"\r\n              class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n            \x3cspan class\x3d"iconBorder"\x3e\r\n                \x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n                  tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n         style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseSchedule/widget/templates/BlockManager.html":'\x3cdiv class\x3d"dijitDialog blockManagerDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar blockManager"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"blockManagerContent"\x3e\r\n            \x3cdiv class\x3d"searchContainer" data-dojo-attach-point\x3d"searchContainer"\x3e\r\n                \x3cdiv class\x3d"searchJumpContainer"\x3e\r\n                    \x3cdiv class\x3d"searchBox"\x3e\r\n                        \x3cdiv class\x3d"scheduleSearchJump"\r\n                             data-dojo-attach-point\x3d"scheduleSearchTB"\r\n                             data-dojo-type\x3d"dijit/form/TextBox"\r\n                             data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                             placeHolder: "${webviewStrings.searchForNode}"\'\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cspan class\x3d"scheduleSearchButton"\r\n                              data-dojo-attach-point\x3d"scheduleSearchButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                              iconClass: \'rcIcon searchIcon\'"\x3e\r\n                        \x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"searchNavigation" data-dojo-attach-point\x3d"searchNavigation"\x3e\r\n                        \x3cspan class\x3d"navAction hidden" data-dojo-attach-point\x3d"navPrev"\x3e\x26lt; ${rcStrings.tbPrevious}\x3c/span\x3e\r\n                        \x3cspan class\x3d"navAction hidden" data-dojo-attach-point\x3d"navNext"\x3e${rcStrings.tbNext} \x26gt;\x3c/span\x3e\r\n                        \x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"noResults"\x3e${webviewStrings.noResultsFound}\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"blockSelectorContainer"\x3e\r\n                    \x3cdiv class\x3d"blocksSelection" data-dojo-attach-point\x3d"blockSelector"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"mainContentContainer" data-dojo-attach-point\x3d"mainContentPane"\x3e\r\n                \x3cdiv class\x3d"scheduleContainerScrollable" data-dojo-attach-point\x3d"scrollContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"scheduleSelectionPane"\r\n                         data-dojo-type\x3d"dijit/layout/ContentPane"\r\n                         class\x3d"webviewAdminSites"\x3e\r\n                        \r\n                            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                                 data-dojo-attach-point\x3d"blockSelectionContainer"\r\n                                 class\x3d"rcManagerHeaderBar topPane block-selection"\r\n                                 data-dojo-props\x3d\'title: "${webviewStrings.blocks}",\r\n                                 iconId: "rc24Icon blockIcon"\'\x3e\r\n\r\n                                \x3cdiv class\x3d"blockManagerScheduleSelection" data-dojo-attach-point\x3d"blockTreeContainer"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n\r\n                            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                                 data-dojo-attach-point\x3d"scheduleSelectionContainer"\r\n                                 class\x3d"rcManagerHeaderBar childFilter schedule-selection"\r\n                                 data-dojo-props\x3d\'title: "${webviewStrings.schedules}", iconId: "rc24Icon scheduleIcon"\'\x3e\r\n\r\n                                \x3cdiv class\x3d"blockManagerScheduleSelection" data-dojo-attach-point\x3d"scheduleTreeContainer"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"blockManagerPreviewContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"blockPreviewPane"\r\n                         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n                         class\x3d"webviewAdminSites"\x3e\r\n                        \x3cdiv class\x3d"blockManagerPreview" data-dojo-attach-point\x3d"previewPane"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/BlockManagerConfirmContent.html":'\x3cdiv class\x3d"confirmDialogContentArea" data-dojo-attach-point\x3d"updateDialogContent"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"topArea"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"topTextContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cul data-dojo-attach-point\x3d"topSchedules"\x3e\r\n\t\t\t\x3c!--Dynamically populated--\x3e\r\n\t\t\x3c/ul\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"hidden"\r\n         data-dojo-attach-point\x3d"costWarning"\x3e\r\n        \x3cp\x3e\r\n            ${enterpriseScheduleStrings.additionalCosts}\r\n        \x3c/p\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"bottomArea"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"bottomTextContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cul data-dojo-attach-point\x3d"bottomSchedules"\x3e\r\n\t\t\t\x3c!--Dynamically populated--\x3e\r\n\t\t\x3c/ul\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseSchedule/widget/templates/_TreeCheckBoxNode.html":'\x3cdiv class\x3d"block-checkbox clickable" data-dojo-attach-event\x3d"onclick: _onClick"\x3e\r\n    \x3cinput data-dojo-attach-point\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\r\n    \x3clabel class\x3d"clickable block-checkbox-label" data-dojo-attach-point\x3d"label"\x3e\x3c/label\x3e\r\n\x3c/div\x3e',"url:webview/reliable/_enterpriseSchedule/overriddenViews/templates/HorizontalRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarHorizontal" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"bg" data-dojo-attach-point\x3d"bgNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv style\x3d"position:absolute;left:2px;bottom:2px" data-dojo-attach-point\x3d"beforeIcon" class\x3d"beforeIcon"\x3e\u25c4\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"labelContainer" class\x3d"labels"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/span\x3e\r\n\t\t\x3c!-- RC-CHANGE: Moved end time above summary --\x3e\r\n\t\t\x3c!--\x3cspan data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/span\x3e--\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"sourceLabel"\tclass\x3d"source"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"costLabel" class\x3d"cost-label hidden"\x3eTest\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\t\x3cdiv style\x3d"position:absolute;right:2px;bottom:2px" data-dojo-attach-point\x3d"afterIcon" class\x3d"afterIcon"\x3e\u25ba\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeStartHandle" class\x3d"handle resizeStartHandle"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeEndHandle" class\x3d"handle resizeEndHandle" \x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/HorizontalRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarHorizontal" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"bg" \x3e\x3c/div\x3e\r\n\t\x3cdiv style\x3d"position:absolute;left:2px;bottom:2px" data-dojo-attach-point\x3d"beforeIcon" class\x3d"beforeIcon"\x3e\x26#x25C0;\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"labelContainer" class\x3d"labels"\x3e\t\t\r\n\t\t\x3cspan data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/span\x3e\r\n\t\t\x3cspan  data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv style\x3d"position:absolute;right:2px;bottom:2px" data-dojo-attach-point\x3d"afterIcon" class\x3d"afterIcon"\x3e\x26#x25B6;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeStartHandle" class\x3d"handle resizeStartHandle"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeEndHandle" class\x3d"handle resizeEndHandle" \x3e\x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/overriddenViews/templates/LabelRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarLabel" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"labels"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/span\x3e\r\n\t\t\x3c!-- RC-CHANGE: Moved end time above summary --\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"sourceLabel" class\x3d"source"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"costLabel" class\x3d"cost-label hidden"\x3eTest\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/LabelRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarLabel" onselectstart\x3d"return false;"\x3e\t\r\n\t\x3cdiv class\x3d"labels"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/MatrixView.html":'\x3cdiv data-dojo-attach-events\x3d"keydown:_onKeyDown"\x3e\r\n\t\x3cdiv  class\x3d"dojoxCalendarYearColumnHeader" data-dojo-attach-point\x3d"yearColumnHeader"\x3e\r\n\t\t\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan data-dojo-attach-point\x3d"yearColumnHeaderContent"\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\t\t\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"columnHeader" class\x3d"dojoxCalendarColumnHeader"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"columnHeaderTable" class\x3d"dojoxCalendarColumnHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\t\r\n\t\x3cdiv dojoAttachPoint\x3d"rowHeader" class\x3d"dojoxCalendarRowHeader"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"rowHeaderTable" class\x3d"dojoxCalendarRowHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv dojoAttachPoint\x3d"grid" class\x3d"dojoxCalendarGrid"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"gridTable" class\x3d"dojoxCalendarGridTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"itemContainer" class\x3d"dojoxCalendarContainer" data-dojo-attach-event\x3d"mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"itemContainerTable" class\x3d"dojoxCalendarContainerTable" cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/overriddenViews/templates/VerticalRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarVertical" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"bg" data-dojo-attach-point\x3d"bgNode"\x3e\x3c/div\x3e\r\n\t\x3cdl style\x3d"width:100%;"\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"beforeIcon" class\x3d"beforeIcon"\x3e\u25b2\x3c/dd\x3e\r\n\t\t\x3c!--RC-CHANGE: Putting endtime before summary --\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/dd\x3e\r\n\t\t\x3c!--\x3cdd data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/dd\x3e--\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/dd\x3e\r\n        \x3cdd data-dojo-attach-point\x3d"sourceLabel" class\x3d"source"\x3e\x3c/dd\x3e\r\n        \x3cdd data-dojo-attach-point\x3d"costLabel" class\x3d"cost-label hidden"\x3eTest\x3c/dd\x3e\r\n    \x3c/dl\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"afterIcon" class\x3d"afterIcon"\x3e\u25bc\x3c/span\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeStartHandle" class\x3d"handle resizeStartHandle"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeEndHandle" class\x3d"handle resizeEndHandle" \x3e\x3c/div\x3e\r\n\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/div\x3e--\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/VerticalRenderer.html":'\x3cdiv class\x3d"dojoxCalendarEvent dojoxCalendarVertical" onselectstart\x3d"return false;"\x3e\r\n\t\x3cdiv class\x3d"bg"\x3e\x3c/div\x3e\r\n\t\x3cdl style\x3d"width:100%;"\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"beforeIcon" class\x3d"beforeIcon"\x3e\x26#x25B2;\x3c/dd\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"startTimeLabel" class\x3d"startTime"\x3e\x3c/dd\x3e\r\n\t\t\x3cdd data-dojo-attach-point\x3d"summaryLabel" class\x3d"summary"\x3e\x3c/dd\x3e\r\n\t\x3c/dl\x3e\t\r\n\t\x3cspan data-dojo-attach-point\x3d"afterIcon" class\x3d"afterIcon"\x3e\x26#x25BC;\x3c/span\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"moveHandle" class\x3d"handle moveHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeStartHandle" class\x3d"handle resizeStartHandle"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"resizeEndHandle" class\x3d"handle resizeEndHandle" \x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"endTimeLabel" class\x3d"endTime"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/templates/calendar.html":'\x3cdiv\x3e\t\t\r\n    \x3cdiv data-dojo-type\x3d"webview/reliable/_enterpriseSchedule/widget/CalendarToolbar" data-dojo-attach-point\x3d"calendarToolbar" \x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"viewContainer" class\x3d"viewContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/Menu" data-dojo-attach-point\x3d"contextMenu" style\x3d"display: none;"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-point\x3d"contextMenuDelete" data-dojo-props\x3d"iconClass:\'dijitIcon dijitIconDelete\'"\x3eDelete\x3c/div\x3e\r\n    \x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/ColumnView.html":'\x3cdiv data-dojo-attach-events\x3d"keydown:_onKeyDown"\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"header" class\x3d"dojoxCalendarHeader"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxCalendarYearColumnHeader" data-dojo-attach-point\x3d"yearColumnHeader"\x3e\r\n\t\t\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan data-dojo-attach-point\x3d"yearColumnHeaderContent"\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\t\t\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"columnHeader" class\x3d"dojoxCalendarColumnHeader"\x3e\r\n\t\t\t\x3ctable data-dojo-attach-point\x3d"columnHeaderTable" class\x3d"dojoxCalendarColumnHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"secondarySheetNode"\x3e\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"subHeader" class\x3d"dojoxCalendarSubHeader"\x3e\r\n\t\t\x3cdiv class\x3d"dojoxCalendarSubRowHeader"\x3e\r\n\t\t\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0"\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\t\t\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"subColumnHeader" class\x3d"dojoxCalendarSubColumnHeader"\x3e\r\n\t\t\t\x3ctable data-dojo-attach-point\x3d"subColumnHeaderTable" class\x3d"dojoxCalendarSubColumnHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"scrollContainer" class\x3d"dojoxCalendarScrollContainer"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"sheetContainer" style\x3d"position:relative;left:0;right:0;margin:0;padding:0"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"rowHeader" class\x3d"dojoxCalendarRowHeader"\x3e\r\n\t\t\t\t\x3ctable data-dojo-attach-point\x3d"rowHeaderTable" class\x3d"dojoxCalendarRowHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"grid" class\x3d"dojoxCalendarGrid"\x3e\r\n\t\t\t\t\x3ctable data-dojo-attach-point\x3d"gridTable" class\x3d"dojoxCalendarGridTable" cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%"\x3e\x3c/table\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"itemContainer" class\x3d"dojoxCalendarContainer" data-dojo-attach-event\x3d"mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd"\x3e\r\n\t\t\t\t\x3ctable data-dojo-attach-point\x3d"itemContainerTable" class\x3d"dojoxCalendarContainerTable" cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%"\x3e\x3c/table\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e \r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"vScrollBar" class\x3d"dojoxCalendarVScrollBar"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"vScrollBarContent" style\x3d"visibility:hidden;position:relative;width:1px;height:1px;" \x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"hScrollBar" class\x3d"dojoxCalendarHScrollBar"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hScrollBarContent" style\x3d"visibility:hidden;position:relative;width:1px;height:1px;" \x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/ColumnViewSecondarySheet.html":'\x3cdiv data-dojo-attach-events\x3d"keydown:_onKeyDown"\x3e\r\n\t\x3cdiv  data-dojo-attach-point\x3d"rowHeader" class\x3d"dojoxCalendarRowHeader"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"rowHeaderTable" class\x3d"dojoxCalendarRowHeaderTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"grid" class\x3d"dojoxCalendarGrid"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"gridTable" class\x3d"dojoxCalendarGridTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"itemContainer" class\x3d"dojoxCalendarContainer" data-dojo-attach-event\x3d"mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"itemContainerTable" class\x3d"dojoxCalendarContainerTable" cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%"\x3e\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/ExpandRenderer.html":'\x3cdiv class\x3d"dojoxCalendarExpand" onselectstart\x3d"return false;" data-dojo-attach-event\x3d"click:_onClick,touchstart:_onMouseDown,touchend:_onClick,mousedown:_onMouseDown,mouseup:_onMouseUp,mouseover:_onMouseOver,mouseout:_onMouseOut"\x3e\r\n\t\x3cdiv class\x3d"bg"\x3e\x3cspan data-dojo-attach-point\x3d"expand"\x3e\u25bc\x3c/span\x3e\x3cspan style\x3d"display:none" data-dojo-attach-point\x3d"collapse"\x3e\u25b2\x3c/span\x3e\x3c/div\x3e\t\r\n\x3c/div\x3e\r\n',
"url:dojox/calendar/templates/Calendar.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"buttonContainer" class\x3d"buttonContainer"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"toolbar" data-dojo-type\x3d"dijit.Toolbar" \x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"previousButton" data-dojo-type\x3d"dijit.form.Button" \x3e\x26#x25C0;\x3c/button\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"nextButton" data-dojo-type\x3d"dijit.form.Button" \x3e\x26#x25B6;\x3c/button\x3e\r\n\t\t\t\x3cspan data-dojo-type\x3d"dijit.ToolbarSeparator"\x3e\x3c/span\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"todayButton" data-dojo-type\x3d"dijit.form.Button" \x3eToday\x3c/button\x3e\r\n\t\t\t\x3cspan data-dojo-type\x3d"dijit.ToolbarSeparator"\x3e\x3c/span\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"dayButton" data-dojo-type\x3d"dijit.form.Button" \x3eDay\x3c/button\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"fourDaysButton" data-dojo-type\x3d"dijit.form.Button" \x3e4 Days\x3c/button\x3e\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"weekButton" data-dojo-type\x3d"dijit.form.Button" \x3eWeek\x3c/button\x3e\t\t\t\r\n\t\t\t\x3cbutton data-dojo-attach-point\x3d"monthButton" data-dojo-type\x3d"dijit.form.Button" \x3eMonth\x3c/button\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"viewContainer" class\x3d"viewContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/CalendarToolbar.html":'\x3cdiv data-dojo-attach-point\x3d"_container" class\x3d"enterprise-calendar-toolbar"\x3e\r\n    \x3cspan data-dojo-type\x3d"webview/widget/DateRangeNavigator"\r\n          data-dojo-attach-point\x3d"dateRangeNavigator"\x3e\x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"rcCalendarViewLabelContainer"\r\n          data-dojo-attach-point\x3d"labelContainer"\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3cspan class\x3d"rcCalendarViewButtonContainer"\r\n          data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"todayButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'label: "${webviewStrings.rcbToday}", baseClass: "webviewButton noIcon"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"dayButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'label: "${webviewStrings.rcbDay}",baseClass: "webviewButton noIcon"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"weekButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d\'label: "${webviewStrings.rcbWeek}", baseClass: "webviewButton noIcon"\'\x3e\x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"monthButtonContainer"\r\n              class\x3d"monthButtonContainer"\x3e\r\n            \x3cspan class\x3d"monthButton"\r\n                  data-dojo-attach-point\x3d"monthButton"\r\n                  data-dojo-type\x3d"dijit/form/Button"\r\n                  data-dojo-props\x3d\'label: "${webviewStrings.rcbMonth}", baseClass: "webviewButton noIcon"\'\x3e\r\n            \x3c/span\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"editButton"\r\n              data-dojo-type\x3d"dijit/form/Button" \r\n              data-dojo-props\x3d"baseClass: \'webviewButton editEsSummaryButton\',\r\n              iconClass: \'rcIcon editEsSummaryIcon\', \r\n              label: \'${webviewStrings.rcbEdit}\'"\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-attach-point\x3d"summaryButton"\r\n              data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"baseClass: \'webviewButton updateEsSummaryButton\',\r\n              iconClass: \'rcIcon updateEsSummaryIcon\',\r\n              label: \'${webviewStrings.rcbSummary}\'"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/DateRangeNavigator.html":'\x3cspan class\x3d"rcCalendarNavButtonContainer dateRangeNavigator"\x3e\r\n\t\r\n\t\x3cspan class\x3d"previousButton"\r\n\t\t  data-dojo-attach-point\x3d"previousButton" \r\n\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t  data-dojo-props\x3d"iconClass: \'rcPreviousIcon\', baseClass: \'webviewButton circularButton noLabel\'"\x3e\x3c/span\x3e\r\n\t\t\t\t\r\n\t\x3cspan class\x3d"rcCalendarViewDateLabel emmulateLink" \r\n\t\t  data-dojo-attach-point\x3d"viewDateLabel"\x3e\x3c/span\x3e\r\n\t\t\t\t\r\n\t\x3cspan class\x3d"nextButton"\r\n\t\t  data-dojo-attach-point\x3d"nextButton"\r\n\t\t  data-dojo-type\x3d"dijit/form/Button" \r\n\t\t  data-dojo-props\x3d"iconClass: \'rcNextIcon\', baseClass: \'webviewButton circularButton noLabel\'"\x3e\x3c/span\x3e\r\n\t\r\n\x3c/span\x3e\r\n',
"url:webview/widget/templates/Calendar.html":'\x3cdiv class\x3d"webviewPopupCalendarContainer"\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"dijitCalendarContainer webviewCalendarPopup" role\x3d"grid" aria-labelledby\x3d"${id}_mddb ${id}_year" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\r\n\r\n\t\t\t\t\x3c!--Previous Month Button --\x3e\r\n\t\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow webviewPreviousMonth\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\t\t\x3c/th\x3e\r\n\r\n\t\t\t\t\x3c!--Month Drop Down Button --\x3e\r\n\t\t\t\t\x3cth class\x3d\'dijitReset\' colspan\x3d"5"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode"\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/th\x3e\r\n\r\n\t\t\t\t\x3c!--Next Month Button --\x3e\r\n\t\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow webviewNextMonth\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\t\t\x3c/th\x3e\r\n\r\n\t\t\t\x3c/tr\x3e\r\n\r\n\t\t\t\x3c!--Where the day letters go --\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"onclick: _onDayClick" class\x3d"dijitReset webviewCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\r\n\t\t\x3c!-- Today Button --\x3e\r\n\t\t\x3ctfoot class\x3d"dijitReset webviewCalendarTodayButtonContainer"\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d\'dijitReset webviewToday\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\t\t\t\x3cspan class\x3d"bottomButtonHolder"\r\n\t\t\t\t\t\t\tdata-dojo-attach-point\x3d"todayButtonContainer"\r\n\t\t\t\t\t\t\tdata-dojo-attach-event\x3d"onclick: goToToday"\x3e\r\n\r\n                            \x3cspan class\x3d"today-link linkable"\r\n                                  data-dojo-attach-point\x3d"todayButton"\x3e${rcStrings.rtrToday}\r\n                            \x3c/span\x3e\r\n\r\n\t\t\t\t\t\t\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d\'dijitReset webviewYear\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\r\n\t\t\t\t\t\x3c!-- Today Button will go here --\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tfoot\x3e\r\n\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_enterpriseSchedule/templates/EnterpriseScheduleToolbar.html":'\x3cdiv class\x3d"enterprise-schedule-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"editValuesButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.edit}",\r\n              iconClass: "toolbarButtonIcon svg-edit-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n        \r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"ahacButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.afterHoursReport}",\r\n              iconClass: "toolbarButtonIcon svg-after-hours",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.btnCancel}",\r\n              iconClass: "toolbarButtonIcon svg-cancel-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n        \r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.save}",\r\n              iconClass: "toolbarButtonIcon svg-save-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/templates/EventEditor.html":'\x3cdiv class\x3d"rcWidgetContainer rcEnterpriseEvent" \x3e\r\n\r\n\t\x3c!-- If event is not editable, put reason here for user --\x3e\r\n\t\x3cdiv class\x3d"editEventItem nonEditReasonText" data-dojo-attach-point\x3d"reasonContainer"\x3e\r\n\t\t\x3cspan class\x3d"warningIcon eventWarning" data-dojo-attach-point\x3d"warningIcon"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"nonEditReason" data-dojo-attach-point\x3d"nonEditReason"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3c!-- If current user has privileges to modify default type selection shows here--\x3e\r\n\t\x3cdiv class\x3d"editEventItem" data-dojo-attach-point\x3d"eventTypeContainer"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"eventTypeLabel"\x3e${webviewStrings.eventType}:\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"eventType"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n\t\x3c!--  Area where user enters a title for the event --\x3e\r\n    \x3cdiv class\x3d"editEventItem" data-dojo-attach-point\x3d"summaryContainer"\x3e\r\n        \x3cspan class\x3d"propertyTitle"\x3e${webviewStrings.title}:\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cinput type\x3d"text" class\x3d"rcTextBox"\r\n           data-dojo-attach-point\x3d"summary"\r\n           data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"baseClass: \'rcTextBox eventEditSummary\',\r\n           maxLength: 49" /\x3e\x3c!-- Set max-length to 1 less than DB limit to accommodate # symbol --\x3e\r\n\r\n\t\x3c!-- Area where user selects how often even repeats --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"repeatArea" class\x3d"editEventItem"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"repeatSelection" data-dojo-type\x3d"webview/widget/RepeatSelector"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\t\x3c!-- Area where users select the priority --\x3e\r\n    \x3cdiv class\x3d"editEventItem" data-dojo-attach-point\x3d"priorityContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3c!-- Area where user selects whether building will be occupied of not --\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"valueInput" data-dojo-type\x3d"webview/widget/ValueInput"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Area where user selects whether building will be occupied of not --\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3clabel class\x3d"reason-label"\r\n               data-dojo-attach-point\x3d"reasonLabel"\x3e${rcStrings.reason}:\x3c/label\x3e\r\n        \x3ctextarea class\x3d"rcTextArea"\r\n                  data-dojo-attach-point\x3d"reasonInput"\r\n                  data-dojo-type\x3d"dijit/form/Textarea"\x3e\x3c/textarea\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Area for user to select which blocks this even applies to --\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cspan class\x3d"propertyTitle" data-dojo-attach-point\x3d"appliesLabel"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3ca href\x3d\'#\' class\x3d"editEventItem  scheduleTreeLink" data-dojo-attach-point\x3d"scheduleTreeLink" data-dojo-attach-event\x3d"onclick: _onClickTreeLink"\x3e\x3c/a\x3e\r\n\r\n    \x3cdiv class\x3d"rate-container" data-dojo-attach-point\x3d"rateContainer"\x3e\r\n        \x3cspan class\x3d"propertyTitle"\x3e${afterHoursStrings.rate}:\x3c/span\x3e\r\n        \x3cdiv class\x3d"event-cost"\x3e\r\n            \x3cspan class\x3d"total-rate" data-dojo-attach-point\x3d"totalRate"\x3e\x3c/span\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"totalCost"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"exclude-container hidden" data-dojo-attach-point\x3d"excludeEventContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3c!-- Area to either save/update event or delete/cancel event --\x3e\r\n\t\x3c!--Labels are hard coded as a backup, programmatically set in EventEditor.js --\x3e\r\n    \x3cspan class\x3d"bottomButtonHolder"\r\n          data-dojo-attach-point\x3d"saveButtonContainer"\r\n          data-click-params\x3d"false"\r\n          data-dojo-attach-event\x3d"onclick: _onUpdate"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"iconClass: \'rcUpdateIcon\', label: \'${webviewStrings.rcbUpdate}\', baseClass: \'withLabel webviewButton\'"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-attach-event\x3d"onclick: _onUpdate"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"bottomButtonHolder"\r\n          data-dojo-attach-point\x3d"createButtonContainer"\r\n          data-dojo-attach-event\x3d"onclick: _onCreate"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"iconClass: \'rcCreateIcon\', label: \'${webviewStrings.rcbCreate}\', baseClass: \'withLabel webviewButton createEventDirty\'"\r\n              data-dojo-attach-point\x3d"createButton"\r\n\t\t\t  data-dojo-attach-event\x3d"onclick: _onCreate"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"bottomButtonHolder"\r\n          data-dojo-attach-point\x3d"deleteButtonContainer"\r\n          data-dojo-attach-event\x3d"onclick: _onDelete"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-attach-point\x3d"deleteButton"\r\n              data-dojo-attach-event\x3d"onclick: _onDelete"\r\n              data-dojo-props\x3d"iconClass: \'rcDeleteIcon\',\r\n              label: \'${webviewStrings.rcbDelete}\', baseClass: \'withLabel webviewButton\'"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan class\x3d"bottomButtonHolder"\r\n          data-dojo-attach-point\x3d"cancelButtonContainer"\r\n\t\t  data-dojo-attach-event\x3d"onclick: _onCancel"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"dijit/form/Button"\r\n              data-dojo-props\x3d"iconClass: \'rcCancelIcon\', label: \'${webviewStrings.rcbCancel}\', baseClass: \'withLabel webviewButton\'"\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n\t\t\t  data-dojo-attach-event\x3d"onclick: _onCancel"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/AppliesToManager.html":'\x3cdiv class\x3d"dijitDialog blockManagerDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"blockManagerContent"\x3e\r\n            \x3cdiv class\x3d"searchContainer" data-dojo-attach-point\x3d"searchContainer"\x3e\r\n                \x3cdiv class\x3d"searchJumpContainer"\x3e\r\n                    \x3cdiv class\x3d"searchBox"\x3e\r\n                        \x3cdiv class\x3d"scheduleSearchJump"\r\n                             data-dojo-attach-point\x3d"scheduleSearchTB"\r\n                             data-dojo-type\x3d"dijit/form/TextBox"\r\n                             data-dojo-props\x3d\'baseClass: "rcTextBox",\r\n                             placeHolder: "Search For Node"\'\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cspan class\x3d"scheduleSearchButton"\r\n                              data-dojo-attach-point\x3d"scheduleSearchButton"\r\n                              data-dojo-type\x3d"dijit/form/Button"\r\n                              data-dojo-props\x3d"baseClass: \'webviewButton\',\r\n                              iconClass: \'rcIcon searchIcon\'"\x3e\r\n                        \x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"searchNavigation" data-dojo-attach-point\x3d"searchNavigation"\x3e\r\n                        \x3cspan class\x3d"navAction hidden" data-dojo-attach-point\x3d"navPrev"\x3e\x26lt; ${rcStrings.tbPrevious}\x3c/span\x3e\r\n                        \x3cspan class\x3d"navAction hidden" data-dojo-attach-point\x3d"navNext"\x3e${rcStrings.tbNext} \x26gt;\x3c/span\x3e\r\n                        \x3cspan class\x3d"hidden" data-dojo-attach-point\x3d"noResults"\x3e${webviewStrings.noResultsFound}\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"mainContentPane"\x3e\r\n                \x3cdiv class\x3d"scheduleContainerScrollable" data-dojo-attach-point\x3d"scrollContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"scheduleSelectionPane"\r\n                         data-dojo-type\x3d"dijit/layout/ContentPane"\r\n                         class\x3d"webviewAdminSites"\x3e\r\n                        \r\n                            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                                 data-dojo-attach-point\x3d"blockSelectionContainer"\r\n                                 class\x3d"rcManagerHeaderBar topPane block-selection"\r\n                                 data-dojo-props\x3d\'title: "${webviewStrings.blocks}",\r\n                                 iconId: "rc24Icon blockIcon"\'\x3e\r\n\r\n                                \x3cdiv class\x3d"blockManagerScheduleSelection" data-dojo-attach-point\x3d"blockTreeContainer"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n\r\n                            \x3cdiv data-dojo-type\x3d"webview/widget/TitlePane"\r\n                                 data-dojo-attach-point\x3d"scheduleSelectionContainer"\r\n                                 class\x3d"rcManagerHeaderBar childFilter schedule-selection"\r\n                                 data-dojo-props\x3d\'title: "${webviewStrings.schedules}", iconId: "rc24Icon scheduleIcon"\'\x3e\r\n\r\n                                \x3cdiv class\x3d"blockManagerScheduleSelection" data-dojo-attach-point\x3d"scheduleTreeContainer"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"blockManagerPreviewContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"blockPreviewPane"\r\n                         data-dojo-type\x3d"webview/widget/WebviewContentPane"\r\n                         class\x3d"webviewAdminSites"\x3e\r\n                        \x3cdiv class\x3d"blockManagerPreview" data-dojo-attach-point\x3d"previewPane"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/widget/templates/RepeatSelector.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"repeatOptions"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"repeatSelectionArea" class\x3d"editEventItem repeatSelection"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d\'frequencyContainer\' class\x3d"editEventItem"\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"repeatLabel"\x3e${webviewStrings.repeat}:\x26nbsp;\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"frequencySelection"\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"daySelectionNode" class\x3d"editEventItem"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3clabel data-dojo-attach-point\x3d"terminatingDate"\x3e\r\n            \x3cinput class\x3d"terminatingDateCB" \r\n                   data-dojo-attach-point\x3d"terminatingDateCB" \r\n                   data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\r\n            ${webviewStrings.terminates}\r\n        \x3c/label\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Area for selecting start/end date--\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"fromLabel" class\x3d"propertyTitle dateSelectionStart"\x3e${webviewStrings.fromLabel}:\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"toLabel" class\x3d"propertyTitle dateSelectionEnd"\x3e${webviewStrings.toLabel}:\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3c!-- eventStartDate class is added to facilitate automated UI testing--\x3e\r\n        \x3cspan class\x3d"rcEditEventSelectBox eventStartDate" \r\n              data-dojo-attach-point\x3d"startDate"\r\n              data-dojo-type\x3d"rc/widget/DateTextBox"\r\n              data-dojo-props\x3d"parentClass: \'rcEditEventSelectBox\'"\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3c!-- eventEndDate class is added to facilitate automated UI testing--\x3e\r\n        \x3cspan class\x3d"rcEditEventSelectBox eventEndDate"\r\n              data-dojo-attach-point\x3d"endDate"\r\n              data-dojo-type\x3d"rc/widget/DateTextBox"\r\n              data-dojo-props\x3d"parentClass: \'rcEditEventSelectBox\'"\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Area for select start/end time --\x3e\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"startLabel" class\x3d"propertyTitle dateSelectionStart"\x3e${webviewStrings.startLabel}:\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"endLabel" class\x3d"propertyTitle dateSelectionEnd"\x3e${webviewStrings.endLabel}:\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"editEventItem"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"startTime"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox timeTextBox\', invalidMessage: \'${errorStrings.invalidTimeFormat}\'" /\x3e\r\n\r\n        \x3cinput data-dojo-attach-point\x3d"endTime"\r\n               data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n               data-dojo-props\x3d"baseClass: \'rcTextBox timeTextBox\', invalidMessage: \'${errorStrings.invalidTimeFormat}\'" /\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/widget/templates/IncrementOptionsDialog.html":'\x3cdiv class\x3d"warningDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon hidden" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeText" title\x3d"${buttonCancel}"\x3e\x26times;\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"increment-options-content"\x3e\r\n            \x3cdiv class\x3d"rcAlertIcon rcWarningIcon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"warningDialogText" data-dojo-attach-point\x3d"timeValueIncrements"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"warningDialogContent"\x3e\r\n                \x3cbr data-dojo-attach-point\x3d"breakBetweenTextandContent"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"lowTimeFullContainer"\x3e\r\n                    ${enterpriseStrings.changeTimeRangeTo}\x26nbsp;\x3cspan class\x3d"linkable dark" data-dojo-attach-point\x3d"lowTimeOptionContainer"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"highTimeFullContainer"\x3e\r\n                    ${enterpriseStrings.changeTimeRangeTo}\x26nbsp;\x3cspan class\x3d"linkable dark" data-dojo-attach-point\x3d"highTimeOptionContainer"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/widget/templates/ValueInput.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"hidden"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"valueType"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"valueInputItem"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"startLabel"\x3e${webviewStrings.value}:\x3c/span\x3e\r\n\r\n        \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"filteringInputContainer"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"valueFilteringInput"\r\n                  data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                  data-dojo-props\x3d\'baseClass: "rcSelectBox webviewDropDown valueSelector",\r\n                  autocomplete: false\'\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"analogInputContainer"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"analogTBInput"\r\n                  data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                  data-dojo-props\x3d"baseClass: \'rcTextBox analogValueInput\'"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_enterpriseSchedule/templates/ScheduleTree.html":'\x3cdiv class\x3d"scheduleTreeRoot scheduleTreeList"\r\n     data-dojo-attach-points\x3d"listContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"treeContainer"\x3e\x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',"url:webview/reliable/_navGroup/templates/NavGroup.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"rcNavGroup navigation-group"style\x3d"width:100%; height: 100%;"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"_container" data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"noprint" style\x3d"width:100%; height:100%;"\x3e\r\n\t\t\x3cdiv class\x3d"client-navigation-group-content" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"navGroupContentPane" data-dojo-props\x3d"region:\'center\'"\x3e\r\n            \x3cdiv class\x3d"hidden" data-dojo-attach-point\x3d"buttonBar"\r\n                data-dojo-type\x3d"webview/admin/widget/AdminToolbar"\x3e\r\n\r\n                \x3cdiv data-dojo-type\x3d"webview/admin/navGroups/NavGroupToolbar"\r\n                    data-dojo-attach-point\x3d"navGroupToolbar"\r\n                    data-dojo-props\x3d"site: ${site}"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"groupBuilder"\r\n                data-dojo-type\x3d"webview/features/navigationGroups/groupBuilding/GroupBuilder"\r\n                data-dojo-props\x3d"groupId: ${pointInstance},\r\n                    site: ${site}"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:rc/widget/templates/DateTimeDialog.html":'\x3cdiv class\x3d"dijitDialog rcSystemTimeDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" title\x3d"${rcStrings.setDateTime}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"fullsize" data-dojo-attach-point\x3d"_waitingBlock"\x3e\r\n            \x3cdiv class\x3d"waiting"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan class\x3d"date-time-row"\x3e\r\n                ${rcStrings.curSystemDate}:\r\n                \x3cspan class\x3d"waiting" data-dojo-attach-point\x3d"_waitingIcon"\x3e\x3c/span\x3e\r\n                \x3cspan data-dojo-attach-point\x3d"_currentD"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\x3e\r\n            \x3cspan class\x3d"date-time-row"\x3e\r\n                ${rcStrings.curSystemTime}:\r\n                \x3cspan data-dojo-attach-point\x3d"_currentT"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3ctable\x3e\r\n            \x3ctr class\x3d"time-setting-row"\x3e\r\n                \x3ctd\x3e\r\n                    \x3clabel for\x3d"${id}_dateBox"\x3e${rcStrings.newDate}:\x3c/label\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd\x3e\r\n                    \x3cinput type\x3d"text" class\x3d"rcTextBox" id\x3d"${id}_dateBox" title\x3d"${rcStrings.setSystemDate}"\r\n                           data-dojo-type\x3d"rc/widget/DateTextBox"\r\n                           data-dojo-attach-point\x3d"_dateBox" /\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr class\x3d"time-setting-row"\x3e\r\n                \x3ctd\x3e\r\n                    \x3clabel for\x3d"${id}_timeBox"\x3e${rcStrings.newTime}:\x3c/label\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd\x3e\r\n                    \x3cinput type\x3d"text" class\x3d"rcTextBox" id\x3d"${id}_timeBox" title\x3d"${rcStrings.setSystemTime}"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-attach-point\x3d"_timeBox" /\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n\r\n        \x3cp data-dojo-attach-point\x3d"_GMTContainer" class\x3d"GMTContainer hidden"\x3e\r\n            \x3cinput type\x3d"checkbox" id\x3d"${id}_convertGMTCB" class\x3d"convertGMTcheckbox" title\x3d"${rcStrings.convertLocalTimeGMT}"\r\n                   data-dojo-attach-point\x3d"_convertGMTCheckBox"\r\n                   data-dojo-type\x3d"dijit/form/CheckBox"\r\n                   data-dojo-props\x3d"checked: false"/\x3e\r\n            \x3clabel for\x3d"${id}_convertGMTCB"\x3e\r\n                ${rcStrings.convertLocalTimeGMT}\r\n            \x3c/label\x3e\r\n        \x3c/p\x3e\r\n\r\n        \x3cdiv class\x3d"DSTContainer"\x3e\r\n            \x3cp\x3e\r\n                \x3cinput type\x3d"checkbox" title\x3d"${rcStrings.useDaylightSavingsTime}" id\x3d"${id}_disableDSTCB"\r\n                       data-dojo-attach-point\x3d"_disableDSTCB"\r\n                       data-dojo-type\x3d"dijit/form/CheckBox"\r\n                       data-dojo-props\x3d"checked: true" /\x3e\r\n                \x3clabel for\x3d"${id}_disableDSTCB"\x3e\r\n                    ${rcStrings.useDaylightSavingsTime}\r\n                \x3c/label\x3e\r\n            \x3c/p\x3e\r\n\r\n            \x3ctable\x3e\r\n                \x3ctr class\x3d"dst-entry"\x3e\r\n                    \x3ctd\x3e\r\n                        \x3clabel for\x3d"${id}_startDST" class\x3d"dst-label"\x3e${rcStrings.startDST}:\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                        \x3cinput type\x3d"text" class\x3d"dst-input rcTextBox" id\x3d"${id}_startDST" title\x3d"${rcStrings.clickSelectDSTStart}"\r\n                               data-dojo-attach-point\x3d"_startDSTBox"\r\n                               data-dojo-type\x3d"rc/widget/DateTextBox"/\x3e\r\n                    \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr class\x3d"dst-entry"\x3e\r\n                    \x3ctd\x3e\r\n                        \x3clabel for\x3d"${id}_endDST" class\x3d"dst-label"\x3e${rcStrings.endDST}:\x3c/label\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                        \x3cinput type\x3d"text" class\x3d"dst-input rcTextBox" id\x3d"${id}_endDST" title\x3d"${rcStrings.clickSelectDSTEnd}"\r\n                               data-dojo-attach-point\x3d"_endDSTBox"\r\n                               data-dojo-type\x3d"rc/widget/DateTextBox" /\x3e\r\n                    \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dijitDialogPaneActionBar" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d"button" class\x3d"advancedButton" title\x3d"${rcStrings.showGMTConvertOption}"\r\n                data-dojo-attach-point\x3d"_advancedButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'iconClass: "hidden"\'\r\n                data-dojo-attach-event\x3d"click:_onClickAdvancedButton"\x3e\r\n            ${rcStrings.advanced}\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"submit" title\x3d"${rcStrings.setDateTime}"\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-props\x3d\'iconClass: "rcIcon okIcon"\'\x3e\r\n            ${rcStrings.btnOk}\r\n        \x3c/button\x3e\r\n\r\n        \x3cbutton type\x3d"button" title\x3d"${rcStrings.btnCancel}"\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-type\x3d"dijit/form/Button"\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\r\n                data-dojo-props\x3d\'iconClass: "rcIcon cancelIcon"\'\x3e\r\n            ${rcStrings.btnCancel}\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:rc/widget/templates/DateTimeDialog/ErrorDialog.html":'\x3cdiv class\x3d"rcBigWarningIcon"\x3e\x3c/div\x3e\r\n\x3cdiv\x3e\r\n    \x3cp\x3e\r\n        ${errorText}\r\n    \x3c/p\x3e\r\n\x3c/div\x3e',"url:rc/widget/templates/DateTimeDialog/WarningDialog.html":'\x3cdiv class\x3d"rcBigWarningIcon"\x3e\x3c/div\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"warningTextContainer"\x3e\r\n    ${warningText}\r\n\x3c/div\x3e',"url:webview/reliable/_pointsReport/templates/PointsReport.html":'\x3cdiv data-dojo-attach-point\x3d"_container" class\x3d"webviewAdminSites points-report point-report-container"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n        data-dojo-type\x3d"webview/reliable/_pointsReport/PointsReportToolbar"\r\n        data-dojo-props\x3d"site: ${site},\r\n        system: ${system},\r\n        canEdit: ${_canEdit},\r\n        isAdminPage: ${isAdminPage},\r\n        hasElevatedPermission: ${_hasElevatedPermission}"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"points-report-container" data-dojo-attach-point\x3d"gridContainer"\x3e\r\n\r\n        \x3c!-- Results list --\x3e\r\n        \x3cdiv class\x3d"hidden results-container"\r\n                data-dojo-attach-point\x3d"resultsWidget"\r\n                data-dojo-type\x3d"webview/admin/widget/SearchForObjectResults"\r\n                data-dojo-props\x3d\'baseClass: "point-report-tree-results",\r\n                region: "left",\r\n                paneTitle: "${webviewStrings.searchResults}"\'\x3e\x3c/div\x3e\r\n\r\n        \x3c!-- Right side --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"builderContainer" class\x3d"point-report-grid-container"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webview/reliable/_pointsReport/templates/PointEditor.html":'\x3cdiv class\x3d"dijitDialog point-editor-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"point-editor-contents" data-dojo-attach-point\x3d"editorContents"\x3e\r\n            \x3cdiv class\x3d"point-editor-description"\x3e\r\n                ${pointReportStrings.pointsReportDescription}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"point-editor-inputs"\x3e\r\n                \x3cspan class\x3d"point-editor-value" data-dojo-attach-point\x3d"valueInputContainer"\x3e\r\n                    \x3clabel\x3e\r\n                        \x3cinput type\x3d"checkbox"\r\n                               data-dojo-type\x3d"dijit/form/CheckBox"\r\n                               data-dojo-attach-point\x3d"valueCB"/\x3e\r\n                        ${webviewStrings.value}:\r\n                    \x3c/label\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"valueInput"\x3e\x3c/span\x3e\r\n                \x3c/span\x3e\r\n                \x3cspan class\x3d"point-editor-autoMan" id\x3d"autoManualControls"\x3e\r\n                    \x3clabel\x3e\r\n                        \x3cinput type\x3d"checkbox"\r\n                               data-dojo-type\x3d"dijit/form/CheckBox"\r\n                               data-dojo-attach-point\x3d"autoManCB" /\x3e\r\n                        ${webviewStrings.autoManual}:\r\n                    \x3c/label\x3e\r\n                    \x3cselect data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                            data-dojo-attach-point\x3d"autoManInput"\r\n                            data-dojo-props\x3d"searchAttr: \'name\',\r\n                            autoComplete: false,\r\n                            baseClass: \'rcSelectBox\',\r\n                            value: ${autoManValue}"\x3e\r\n                    \x3c/select\x3e\r\n                    \x3cinput type\x3d"text" value\x3d"${timedValue}"\r\n                           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                           data-dojo-attach-point\x3d"timeInput"\r\n                           data-dojo-props\x3d"pattern: \'^\\\\d{2}:\\\\d{2}$\',\r\n                           baseClass: \'rcTextBox\',\r\n                           invalidMessage: \'${pointReportStrings.timeMustBeInFormat}\'" /\x3e\r\n                \x3c/span\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_pointsReport/templates/ValueInput.html":'\x3cdiv class\x3d"valueInputContainer"\x3e\r\n    \x3cinput type\x3d"text"\r\n           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n           data-dojo-attach-point\x3d"timeInput"\r\n           data-dojo-props\x3d\'pattern: "^(\\\\d){2}:(\\\\d){2}:(\\\\d){2}",\r\n           baseClass: "rcTextBox",\r\n           invalidMessage: "${rcStrings.inValidTimeFormat}"\' /\x3e\r\n    \x3cinput type\x3d"text"\r\n           data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n           data-dojo-attach-point\x3d"analogInput"\r\n           data-dojo-props\x3d\'pattern: "^(\\\\-\\\\d+|\\\\d*)(\\\\.\\\\d+|\\\\d*)([eE]\\[\\+|\\-]\\\\d+|\\\\d*)$",\r\n           baseClass: "rcTextBox",\r\n           invalidMessage: "${pointReportStrings.inputMustBeANumber}"\' /\x3e\r\n\r\n    \x3cselect class\x3d"hidden"\r\n            data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n            data-dojo-attach-point\x3d"enumeratedInput"\r\n            data-dojo-props\x3d"searchAttr: \'name\', autoComplete: false,\r\n            baseClass: \'rcSelectBox\'"\x3e\r\n    \x3c/select\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_pointsReport/templates/PointsReportToolbar.html":'\x3cdiv class\x3d"points-report-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"selectAllButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n              iconClass: "toolbarButtonIcon svg-select-all-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.save}",\r\n              iconClass: "toolbarButtonIcon svg-save-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.btnCancel}",\r\n              iconClass: "toolbarButtonIcon svg-cancel-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"editValuesButton"\r\n              data-dojo-props\x3d\'titleStr : "${pointReportStrings.editValues}",\r\n              iconClass: "toolbarButtonIcon svg-edit-multiple-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"exportButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.xport}",\r\n              iconClass: "toolbarButtonIcon svg-export-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n            data-dojo-attach-point\x3d"excelButton"\r\n            data-dojo-props\x3d\'titleStr : "${webviewStrings.exportExcel}",\r\n            iconClass: "toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"columnToggleButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.toggleColumns}",\r\n              iconClass: "toolbarButtonIcon svg-column-toggle-icon",\r\n              disabled: false\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"deleteButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.rcDelete}",\r\n              iconClass: "toolbarButtonIcon svg-delete-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_pointsReport/templates/PointsReportWorksheet.html":'\x3cdiv class\x3d"points-report-worksheet worksheet" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n         data-dojo-type\x3d"webview/reliable/_pointsReport/PointReportsToolbar"\r\n         data-dojo-props\x3d"hasElevatedPermission: ${_hasElevatedPermission},\r\n         isAdmin: ${isAdminPage},\r\n         systemId: ${system}"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"points-report-container grid-container" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_pointsReport/templates/PointReportsToolbar.html":'\x3cdiv class\x3d"point-reports-toolbar ${baseClass}"\x3e\r\n    \x3cdiv class\x3d"title-node" data-dojo-attach-point\x3d"_title"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"button-container" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"selectAllButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.selectAll}",\r\n              iconClass: "toolbarButtonIcon svg-select-all-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"saveButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.save}",\r\n              iconClass: "toolbarButtonIcon svg-save-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.btnCancel}",\r\n              iconClass: "toolbarButtonIcon svg-cancel-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"exportButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.xport}",\r\n              iconClass: "toolbarButtonIcon svg-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n            data-dojo-attach-point\x3d"excelButton"\r\n            data-dojo-props\x3d\'titleStr : "${webviewStrings.exportExcel}",\r\n            iconClass: "toolbarButtonIcon svg-xsl-export-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"toggleColumnsButton"\r\n              data-dojo-props\x3d\'titleStr : "${webviewStrings.toggleColumns}",\r\n              iconClass: "toolbarButtonIcon svg-column-toggle-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"addButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.add}",\r\n              iconClass: "toolbarButtonIcon svg-add-icon"\'\x3e\r\n        \x3c/span\x3e\r\n\r\n        \x3cspan class\x3d"" data-dojo-type\x3d"webview/widget/ToolbarButton"\r\n              data-dojo-attach-point\x3d"deleteButton"\r\n              data-dojo-props\x3d\'titleStr : "${rcStrings.rcDelete}",\r\n              iconClass: "toolbarButtonIcon svg-delete-icon",\r\n              disabled: true\'\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_afterHours/templates/TenantReport.html":'\x3cdiv class\x3d"after-hours tenant-report" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"_container" class\x3d"rcRuntimeLogBorderContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_toolbar"\r\n             data-dojo-type\x3d"webview/widget/ClientToolBar"\r\n             data-dojo-props\x3d"region: \'top\'"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"tenant-report-container"\r\n             data-dojo-type\x3d"dijit/layout/ContentPane"\r\n             data-dojo-attach-point\x3d"gridContainer"\r\n             data-dojo-props\x3d"region: \'center\'"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"reportHeader"\x3e\r\n                \x3cdiv class\x3d"logo-location-container" data-dojo-attach-point\x3d"logoLocationContainer"\x3e\r\n                    \x3cimg class\x3d"logo-image hidden"\r\n                         src\x3d""\r\n                         alt\x3d"Company Logo"\r\n                         data-dojo-attach-point\x3d"logo" /\x3e\r\n                    \x3cdiv class\x3d"report-location-container hidden" data-dojo-attach-point\x3d"locationContainer"\x3e\r\n                        \x3cdiv class\x3d"rc24Icon locationIcon"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"report-location" data-dojo-attach-point\x3d"location"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"report-description" data-dojo-attach-point\x3d"reportDescription"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"report-period" data-dojo-attach-point\x3d"reportPeriodContainer"\x3e\r\n                    ${afterHoursStrings.servicePeriod}: \x3cspan class\x3d"report-dates linkable" data-dojo-attach-point\x3d"reportDates"\x3e\x3c/span\x3e\r\n                    \x3clabel class\x3d"future-events-label"\r\n                           data-dojo-attach-point\x3d"showFutureContainer"\x3e\r\n                        \x3cinput type\x3d"checkbox"\r\n                               data-dojo-attach-point\x3d"showFutureCB"\r\n                               data-dojo-type\x3d"dijit/form/CheckBox"\r\n                               data-dojo-props\x3d\'checked: false\' /\x3e${afterHoursStrings.showFutureEvents}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printableGridContainer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"gridContainer" data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_afterHours/templates/RangePicker.html":'\x3cdiv class\x3d"dijitDialog range-picker-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 535px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3cdiv class\x3d"date-picker-container"\x3e\r\n            \x3cdiv class\x3d"text-input-container"\x3e\r\n                \x3clabel for\x3d"${id}_startDateInputBox"\x3e${webviewStrings.startLabel}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" id\x3d"${id}_startDateInputBox" tabindex\x3d"1"\r\n                       data-dojo-attach-point\x3d"startDateString"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox startDateInput",\r\n                       pattern: "${_datePattern}",\r\n                       invalidMessage: "${formatStrings.dateFormat-short}",\r\n                       placeHolder: "${formatStrings.dateFormat-short}"\'/\x3e\r\n\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"startCalendarPicker"\r\n                 data-dojo-type\x3d"webview/widget/CalendarPicker"\r\n                 data-dojo-props\x3d"tabindex: 3,\r\n                 startingYear: 2016,\r\n                 totalYears: 20"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"date-picker-container"\x3e\r\n            \x3cdiv class\x3d"text-input-container"\x3e\r\n                \x3clabel for\x3d"${id}_endDateInputBox"\x3e${webviewStrings.endLabel}:\x3c/label\x3e\r\n                \x3cinput type\x3d"text" id\x3d"${id}_endDateInputBox" tabindex\x3d"2"\r\n                       data-dojo-attach-point\x3d"endDateString"\r\n                       data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                       data-dojo-props\x3d\'baseClass: "rcTextBox endDateInput",\r\n                       pattern: "${_datePattern}",\r\n                       invalidMessage: "${formatStrings.dateFormat-short}",\r\n                       placeHolder: "${formatStrings.dateFormat-short}"\' /\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"endCalendarPicker"\r\n                 data-dojo-type\x3d"webview/widget/CalendarPicker"\r\n                 data-dojo-props\x3d"tabindex: 4,\r\n                 startingYear: 2016,\r\n                 totalYears: 20"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"date-jumper-container"\x3e\r\n            \x3cspan class\x3d"linkable week-link" data-dojo-attach-point\x3d"jumpToWeek"\x3e${genericStrings.field-week}\x3c/span\x3e\r\n            \x3cspan class\x3d"linkable month-link" data-dojo-attach-point\x3d"jumpToMonth"\x3e${genericStrings.field-month}\x3c/span\x3e\r\n            \x3cspan class\x3d"linkable year-link" data-dojo-attach-point\x3d"jumpToYear"\x3e${genericStrings.field-year}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton OKbutton",\r\n                iconClass: "rcIcon okIcon"\'\x3eOK\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3eCANCEL\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:webview/reliable/_afterHours/templates/ReasonDialog.html":'\x3cdiv class\x3d"dijitDialog reason-dialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title" style\x3d"width: 535px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n              role\x3d"heading"\x3e${title}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\r\n        \x3clabel class\x3d"reason-label"\r\n               data-dojo-attach-point\x3d"reasonLabel"\x3e${labelText}:\x3c/label\x3e\r\n        \x3ctextarea class\x3d"rcTextArea dialog-textarea"\r\n                  data-dojo-attach-point\x3d"reasonInput"\r\n                  data-dojo-type\x3d"dijit/form/Textarea"\r\n                  data-dojo-props\x3d\'value: "${value}"\'\x3e\x3c/textarea\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'dijitDialogPaneActionBar\' data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n        \x3cbutton type\x3d\'submit\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"okButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                disabled: true,\r\n                iconClass: "rcIcon okIcon"\'\x3e${rcStrings.btnOk}\x3c/button\x3e\r\n        \x3cbutton type\x3d\'button\'\r\n                data-dojo-type\x3d\'dijit/form/Button\'\r\n                data-dojo-attach-point\x3d"cancelButton"\r\n                data-dojo-props\x3d\'baseClass: "webviewButton",\r\n                iconClass: "rcIcon cancelIcon"\'\r\n                data-dojo-attach-event\x3d\'click:onCancel\'\x3e${rcStrings.btnCancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"*now":function(p){p(['dojo/i18n!*preload*webview/admin/nls/index*["en-gb","en-us","de","es","es-es","fr","fr-ca","pt","zh","zh-tw","ROOT"]'])}}});
define("webview/admin/index","dijit/layout/BorderContainer dijit/layout/ContentPane dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/fx dojo/_base/lang dojo/_base/window dojo/aspect dojo/cookie dojo/Deferred dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/hash dojo/i18n!rc/nls/all dojo/i18n!rc/nls/auth dojo/i18n!webview/nls/all dojo/i18n!webview/nls/errorMessages dojo/i18n!webview/nls/roles dojo/io-query dojo/on dojo/query dojo/request/xhr dojo/ready dojo/string dojo/text!./templates/index.html dojo/topic dojox/html/entities rc/_base/Error rc/_base/util rc/_Widget rc/util/notices ./widget/AdminRoleWizard ./widget/AdminSetupWizard ./widget/AdminSystemWizard ./widget/AdminUserWizard ../_base/tooltip ../_ContextManagerMixin ../_WithRightSideFlyoutMixin ../systemTree/_SystemTreeMixin ../util/pointObject ../features/leftSideFlyout/LeftSideTreeContainer ../widget/UserToolBar ../widget/whatsNew/_WhatsNewMixin ./widget/TreePaneFlyout ../util/audit".split(" "),function(p,
m,k,h,g,d,l,f,r,c,b,t,q,u,a,n,v,x,w,z,y,A,B,C,D,E,F,G,I,L,H,J,K,N,O,M,P,S,W,R,V,Q,X,Z,da,T,aa,Y){return g("webview/admin/index",[O,Y,Z,X],{templateString:L,w:null,sn:null,pn:"",css:null,mne:"",AdminRoleWizard:P,AdminSetupWizard:S,AdminUserWizard:R,AdminSystemWizard:W,contentContainer:null,_timeout:null,_errConnect:null,_progressWatch:null,_focusTimer:null,_blurWatch:null,_blurred:!1,_loadConnect:null,_loaderAnimation:null,_loading:!1,_id:null,_pendingHash:"",_discardChanges:!1,_servicePoll:null,_servicePollTime:3E4,
_maxMisses:10,_resultsFetchedHandle:null,_serviceMap:{0:"RCWebviewService",RCWebviewService:{identity:0,url:"CMD/CheckService",counter:0},1:"RCWebAppService",RCWebAppService:{identity:1,url:"CMD/CheckService",counter:0}},_tooltipIds:null,_pconnects:null,_hashQ:null,_currentIconClasses:"",baseModulePath:"webview/admin/",defaultWidget:"webview/admin/sites/Sites",_requestSent:!1,_genericConfirmDialog:null,_widgetConnects:null,_savePromptConfirmed:!1,constructor:function(){this._supportingWidgets=[];
this._widgetConnects=[];this.webviewStrings=y},postCreate:function(){this._hashQ=[];this._tooltipIds=[];this._pconnects=[];this.inherited(arguments);this._startServicePolling();da.mnemonicMap.MTLS="webview/bacnet/TrendWorksheet";da.mnemonicMap.STLS="webview/bacnet/TrendWorksheet";rc.session.validate().then(f.hitch(this,function(b){H.subscribe("pagetitle",f.hitch(this,this._repairTitle));this.container=new p({id:"mpw",gutters:v("touch"),persist:"true",style:{width:"100%",height:"100%"},liveSplitters:!1},
a.create("div",{},this.containerNode,"first"));this._attachPoints.push("container");this._attachPoints.push("contentContainer");var d=c.after(this.container,"_layoutChildren",f.hitch(V,"update"));this._pconnects.push(d);this.header=new m({id:"rcSystemHeader",region:"top"});this._attachPoints.push("header");d=V.add(this.header.containerNode,y.ttBanner,{margin:"1em 0 0 7em"});this._tooltipIds.push(d);this.container.addChild(this.header);this._loadHeader();this.content=new m({id:"rcSystemContent",region:"center"});
this.footer=new m({id:"rcSystemFooter",region:"bottom"});this._attachPoints.push("footer");this.container.addChild(this.footer);this._loadFooter(b.message);this._buildContentTop();this._attachPoints.push("content");this.container.addChild(this.content);this.container.startup();this.hashChangeEvent=this.subscribe("/dojo/hashchange",f.hitch(this,this._onHashChange));this._id=this._getPageId();this.own(D(window,"focus",f.hitch(this,this._onWindowFocus)),D(window,"blur",f.hitch(this,this._onWindowBlur)));
this.own(D(this.adminToolbar,"logout",f.hitch(this,this._onLogout)),D(this.adminToolbar,"showWhatsNewDialog",f.hitch(this,this._showWhatsNewDialog)));this.preloader=this._createLoader();this._attachPoints.push("preloader");this._makeFlyoutContainers();this._loadWhatsNew();rc.activity.setTimeoutPeriod(3E4);rc.activity.startUp()}),f.hitch(this,function(b){rc.session.setRedirect(window.location.toString());rc.session.resetWithSession(b)||(this._clearPageLoader(),b=this.safeError(b,{name:w.errorPageLoad,
message:z[b.status]||w.unexpected}),a.place(this._buildErrorMessage(b),this.containerNode))}));window.onbeforeunload=f.hitch(this,this.onbeforeunload)},_buildContentTop:function(){if(!this.topContent){this.topContent=a.create("div",{id:"rcAdminContentHeader"},this.content.containerNode);var b=this._createContentHeader();a.place(b,this.topContent);b=this._createHorizontalDivider();a.place(b,this.topContent);rc.setupWizard&&a.place(rc.setupWizard.domNode,this.topContent,"after")}},_createContentHeader:function(){var b=
a.create("div",{"class":"rcContentHeader"}),c=a.create("span",{"class":"rcHeaderIconWrapper"},b);this._contentHeaderIcon=a.create("span",{"class":"rcHeaderIcon"},c);this._contentHeaderTitle=a.create("h1",{"class":"rcHeaderText"},b);return b},_updateContentHeader:function(a){var b=this.w.params;this._setTitle(J.decode(a));b="rcHeaderIcon "+b.iconClass;q.set(this._contentHeaderTitle,{innerHTML:a,title:a});u.remove(this._contentHeaderIcon,this._currentIconClasses);u.add(this._contentHeaderIcon,b);this._currentIconClasses=
b},_serviceNotAvailable:function(a){a=this._serviceMap[a];++this._serviceMap[a].counter>=this._maxMisses&&(M.widget.clear(),this._serviceMap[a].counter=0,H.publish("sticky",{type:"error",message:I.substitute(A.serviceNotResponding,[a])}))},_startServicePolling:function(){F.get(this._serviceMap.RCWebviewService.url,{handleAs:"json",preventCache:!0,query:{serviceToCheck:this._serviceMap.RCWebviewService.identity||0}}).otherwise(f.hitch(this,this._serviceNotAvailable,this._serviceMap.RCWebviewService.identity));
this._servicePoll=setTimeout(f.hitch(this,this._startWebAppPolling),this._servicePollTime)},_startWebAppPolling:function(){F.get(this._serviceMap.RCWebAppService.url,{handleAs:"json",preventCache:!0,query:{serviceToCheck:this._serviceMap.RCWebAppService.identity||1}}).otherwise(f.hitch(this,this._serviceNotAvailable,this._serviceMap.RCWebAppService.identity));this._servicePoll=setTimeout(f.hitch(this,this._startServicePolling),this._servicePollTime)},_getPageId:function(){var a=b("i"),a="undefined"===
typeof a?1:parseInt(a,10)+1;b("i",a);return a},_loadFooter:function(b){a.create("p",{id:"copyright",innerHTML:I.substitute(this.webviewStrings.footerText,[rc.buildYear,webview.version.toStringAll(),b.licenseExpires])},this.footer.containerNode)},_loadHeader:function(){this._logo=a.create("a",{className:"rclogo"},this.header.containerNode);this.own(D(this._logo,"click",f.hitch(this,function(a){if(this.w){var b=this._nextAvailableTreeNode();this.w.goToPage(b?b.hash:"")}else rc.setupWizard&&(N.stopEvent(a),
rc.setupWizard.warn().then(f.hitch(this,function(b){b.navigate&&(window.location.hash=a.target.hash)})))})));this._centerContainer=a.create("div",{className:"centerheader"},this.header.containerNode);this._attachPoints.push("_centerContainer");this._userToolBarAnchor=a.create("h1",{},this._centerContainer);this._attachPoints.push("_userToolBarAnchor");this.tbContent=a.create("div",{"class":"userToolBarContainer"},this._userToolBarAnchor);this.adminToolbar=new aa({region:"right"});a.place(this.adminToolbar.domNode,
this.tbContent)},_nextAvailableTreeNode:function(){return this._leftSideTreeContainer.adminTree.tree.model.store.query(function(a){return a.access&&"rootNode"!==a.name&&"site"!==a.widget},{count:1})[0]},_setTitle:function(a){this.pn=a=a?a:"";this._pageTitle=a=N.unescapeHtml(a);r.doc.title=a},_repairTitle:function(){this._setTitle(this.pn)},_createLoader:function(){var b=rc.session.isNew();rc.session.markAsNew(!1);this._clearPageLoader();var c=a.create("div",{id:"preloader",className:b?"firstloader":
"preloader"},this.content.containerNode,"first");b&&a.create("div",{className:"loadProgress"},c);var d=D(this,"clearLoader",f.hitch(this,function(){d.remove();u.add(this.preloader,"preloader");u.remove(this.preloader,"firstloader");this.preloader.innerHTML=""}));return c},_clearPageLoader:function(){try{var b=E("#pageloader")[0];a.destroy(b)}catch(ba){}},_showLoader:function(){this._destroyLoaderAnimation();n.set(this.preloader,{opacity:.99,display:"block"})},_clearLoader:function(){this._createLoaderAnimation()},
onClearLoader:function(){this._loaderAnimation=null;this.emit("clearLoader",null)},_createLoaderAnimation:function(){this._loaderAnimation=l.fadeOut({node:"preloader",duration:750,onEnd:f.hitch(this,function(a){n.set(a,"display","none");this.onClearLoader()})}).play()},_destroyLoaderAnimation:function(){null!==this._loaderAnimation&&(this._loaderAnimation.stop(),this._loaderAnimation.destroy(),this._loaderAnimation=null)},startWizard:function(){try{if("webview/admin/users/LoginInfo"===this.w.declaredClass&&
""!==b){var a=C.queryToObject(x()).userID;b("user")===a&&rc.setupWizard&&rc.setupWizard.stop()}else"webview/admin/roles/RoleLoginInfo"===this.w.declaredClass&&""!==b&&(a=C.queryToObject(x()).roleID,"undefined"!==typeof b("role")&&b("role")===a&&rc.setupWizard&&rc.setupWizard.stop());if(rc.setupWizard){a=!1;"webview/admin/users/Users"===this.w.declaredClass&&(a=!0);var c=x();!rc.setupWizard.hashInSteps(c)||a?rc.setupWizard.stop():rc.setupWizard.goToStepFromHash(c,this.w)}else{var d=b("wiz");d&&d in
this&&(rc.setupWizard=new this[d],rc.setupWizard.hasPreviousState()?rc.setupWizard.init(this.topContent,"after",this.w):rc.setupWizard.stop());if(this.w&&!rc.setupWizard)switch(this.w.declaredClass){case "webview/admin/users/AddUser":this._startWizard("AdminUserWizard");break;case "webview/admin/sites/AddSite":this._startWizard("AdminSetupWizard");break;case "webview/admin/systems/AddSystem":case "webview/admin/systems/AddArchive":this._startWizard("AdminSystemWizard");break;case "webview/admin/roles/Permissions":-1===
this.w.roleId&&this._startWizard("AdminRoleWizard")}}}catch(ea){rc.setupWizard&&rc.setupWizard.stop(),console.error(this.declaredClass+".startWizard",ea,ea.message)}},_startWizard:function(a){rc.setupWizard=new this[a]({site:this.w.site});rc.setupWizard.init(this.topContent,"after",this.w)},_loadContent:function(){this._showLoader();var a=x();this._currentHash=a;if("#"+this._getHash(a)===N.mnemonicToUri("about").toLowerCase())this._loadAbout();else{var b=this._hashToWidgetInfo(a);null!==b&&("site"!==
this._getHash(a)||this._isAdminUser()?this.loadPageContent(b):this.validateUserAndLoad(b,this._getHash(a)))}},_loadAbout:function(){this.adminToolbar.resetMenusAndHelp(null);this.contentContainer=this._createDefaultContainer();this._bc=new p({style:{width:"100%",height:"100%"}},this.contentContainer);var b=new m({region:"center"});this._bc.addChild(b);this._setTitle("About");var c=a.create("div",{className:"rcAbout"});a.create("h2",{innerHTML:y.rcwebview},c);var d=a.create("ul",{className:"rcVersion"},
c);a.create("li",{innerHTML:y.version+': \x3cspan class\x3d"nobreak"\x3e'+webview.version.toStringAll()+"\x3c/span\x3e"},d);a.create("p",{innerHTML:I.substitute(y.copyright2014X,[rc.buildYear])},c);a.place(c,b.containerNode);a.place(this.contentContainer,this.content.containerNode,"first");this._bc.startup();this._bc.resize();this._clearLoader();this.onLoad()},toSentenceCase:function(a){return[a.charAt(0).toUpperCase(),a.substring(1).toLowerCase()].join("")},_getHashQuery:function(){var a=window.location.href,
a=a.substring(a.indexOf("?")+1,a.length);return C.queryToObject(a)},_hashToWidgetInfo:function(a){var b={},c="",d=null;try{a=this._getHash(a);var g=this._getHashQuery(),h=null,k=null,l=null,m=null,n=null,p=null,q=null,r=null,t=null,u=null,v=null,y=null,x=null,z=!1,k=g.site||0;g.site&&(g.navgroup&&(h=g.navgroup),g.system&&(l=g.system),g.tree&&(m=g.tree),g.schedule&&(n=g.schedule),g.reporttemplate&&(p=g.reporttemplate),g.userID&&(q=g.userID),g.ID&&(v=g.ID),g.view&&(r=g.view),g.device&&(t=g.device),
g.mne&&(u=g.mne),g.username&&(y=g.username),g.roleId&&(x=Number(g.roleId)),g.isRole&&(z="true"==g.isRole?!0:!1));a=a.toLowerCase();new K({name:w.permissionDenied,message:I.substitute(w.notAuthToViewX,[a]),suggestion:""});var C=!1;this.validateQuery(a,g);switch(a){case "navgroups":rc.session.hasRole(rc.session.adminRoles.navGroupAdmin)?b={module:this.baseModulePath+"navGroups/NavGroups",args:{title:this._siteName(k)+" "+this._buildTitleText(a),iconClass:"rcNavGroupsHeaderIcon"}}:C=!0;break;case "navgroup":rc.session.hasRole(rc.session.adminRoles.navGroupAdmin)?
b={module:this.baseModulePath+"navGroups/NavGroup",args:{title:this._buildTitleText(a,h),navgroup:h,iconClass:"rcNavGroupsHeaderIcon",rightSideFlyout:this.rightSideFlyout}}:C=!0;break;case "panelfiles":b={module:this.baseModulePath+"panelFiles/PanelFiles",args:{title:this._buildTitleText(a,"panelfiles",l),system:l,device:t,iconClass:"rcPanelFilesHeaderIcon"}};break;case "programsworksheet":b={module:this.baseModulePath+"worksheets/programs/ProgramsWorksheet",args:{title:this._buildTitleText(a),system:l,
device:t,iconClass:"rcProgramsWorksheetHeaderIcon"}};break;case "program":rc.session.hasRole(rc.session.roles2.accessPrograms,!0)?b={module:this.baseModulePath+"programs/Program",args:{title:this._buildTitleText(a,u,l),system:l,device:t,mne:u,iconClass:"rcProgramHeaderIcon"}}:C=!0;break;case "remotealarmnotifications":rc.session.hasSystemsAdminRole()?b={module:this.baseModulePath+"worksheets/remoteAlarms/RemoteAlarmNotifications",args:{title:this._buildTitleText(a,k),iconClass:"rcEmailHeaderIcon"}}:
C=!0;break;case "reporttemplates":rc.session.hasRole(rc.session.roles2.administerReportTemplates,!0)?b={module:this.baseModulePath+"reportTemplates/ReportTemplates",args:{title:this._siteName(k)+" "+this._buildTitleText(a),iconClass:"rcTemplatesHeaderIcon"}}:C=!0;break;case "reporttemplate":rc.session.hasRole(rc.session.roles2.administerReportTemplates,!0)?b={module:this.baseModulePath+"reportTemplates/ReportTemplate",args:{title:this._buildTitleText(a),reporttemplate:p,iconClass:"rcTemplatesHeaderIcon"}}:
C=!0;break;case "roleslist":rc.session.hasRole(rc.session.roles.usersAdmin,!1)?b={module:this.baseModulePath+"roles/RolesList",args:{title:this._buildTitleText(a),iconClass:"rcRolesHeaderIcon"}}:C=!0;break;case "rolepermissions":rc.session.hasRole(rc.session.roles.usersAdmin,!1)?b={module:this.baseModulePath+"roles/Permissions",args:{title:-1===x?B.addRole:this._buildTitleText(a),roleId:x,iconClass:-1===x?"rcRolesHeaderIcon":"rcUsersPermissionsHeaderIcon"},requiresContextManager:null===rc.setupWizard||
"undefined"===typeof rc.setupWizard}:C=!0;break;case "rolelogininfo":rc.session.hasRole(rc.session.roles.usersAdmin,!1)?b={module:this.baseModulePath+"roles/RoleLoginInfo",args:{title:-1===x?B.addRole:this._buildTitleText(a),roleId:x,iconClass:-1===x?"rcRolesHeaderIcon":"rcUsersLoginInfoHeaderIcon"},requiresContextManager:null===rc.setupWizard||"undefined"===typeof rc.setupWizard}:C=!0;break;case "":this._isAdminUser()||(d=C=!0);case "sites":this._isAdminUser()?b={module:this.defaultWidget,args:{title:this._buildTitleText(a),
iconClass:"rcSitesHeaderIcon"}}:C=!0;break;case "site":rc.session.hasSystemsAdminRole()?b={module:this.baseModulePath+"sites/Site",args:{title:this._buildTitleText(a,k),iconClass:"rcSitesHeaderIcon"}}:C=!0;break;case "addsite":this._isAdminUser()?b={module:this.baseModulePath+"sites/AddSite",args:{title:this._buildTitleText(a),iconClass:"rcSitesHeaderIcon"},requiresContextManager:!1}:C=!0;break;case "systems":rc.session.hasSystemsAdminRole()?b={module:this.baseModulePath+"systems/Systems",args:{title:this._siteName(k)+
" "+this._buildTitleText(a),siteName:this.componentMap.site[k],iconClass:"rcSystemsHeaderIcon"}}:C=!0;break;case "addsystem":rc.session.hasSystemsAdminRole()?b={module:this.baseModulePath+"systems/AddSystem",args:{title:this._buildTitleText(a),iconClass:"system-settings-header-icon"},requiresContextManager:!1}:C=!0;break;case "addarchive":rc.session.hasSystemsAdminRole()?b={module:this.baseModulePath+"systems/AddArchive",args:{title:this._buildTitleText(a),system:l,iconClass:"system-settings-header-icon"},
requiresContextManager:!1}:C=!0;break;case "system":rc.session.hasSystemsAdminRole()?b={module:this.baseModulePath+"systems/System",args:{title:this._buildTitleText(a,l),system:l,iconClass:"system-settings-header-icon"}}:C=!0;break;case "tenantreport":b={module:"webview/reliable/TenantReport",args:{title:this._buildTitleText(a),scheduleId:g.scheduleId,forBlock:g.forBlock,iconClass:"rcTemplatesHeaderIcon"}};break;case "trees":rc.session.hasRole(rc.session.adminRoles.navTreeAdmin)?b={module:this.baseModulePath+
"trees/Trees",args:{title:this._siteName(k)+" "+this._buildTitleText(a),iconClass:"rcTreesHeaderIcon"}}:C=!0;break;case "tree":rc.session.hasRole(rc.session.adminRoles.navTreeAdmin)?b={module:this.baseModulePath+"trees/Tree",args:{title:this._buildTitleText(a,m),tree:m,iconClass:"rcTreesHeaderIcon"}}:C=!0;break;case "schedules":rc.session.hasRole(rc.session.adminRoles.entSchedAdmin)?b={module:this.baseModulePath+"schedules/Schedules",args:{title:this._siteName(k)+" "+this._buildTitleText(a),iconClass:"rcSchedulesHeaderIcon"}}:
C=!0;break;case "schedule":rc.session.hasRole(rc.session.adminRoles.entSchedAdmin)?b={module:this.baseModulePath+"schedules/Schedule",args:{title:this._buildTitleText(a,n),schedule:n,iconClass:"rcSchedulesHeaderIcon"}}:C=!0;break;case "users":rc.session.hasUsersAdminRole()?(c="rcUsersHeaderIcon",b={module:this.baseModulePath+"users/Users",args:{title:this._siteName(k)+" "+this._buildTitleText(a),userSystem:l,userID:q,ID:v,iconClass:c}}):C=!0;break;case "users/permissions":rc.session.hasUsersAdminRole()?
(c="rcUsersPermissionsHeaderIcon",b={module:this.baseModulePath+"users/Permissions",args:{title:this._buildTitleText(a),userSystem:l,userID:q,ID:v,iconClass:c},requiresContextManager:null===rc.setupWizard||"undefined"===typeof rc.setupWizard}):C=!0;break;case "users/permittedschedules":if(rc.session.hasUsersAdminRole())var c="rcUsersPermittedSchedulesHeaderIcon",D=sessionStorage.getItem(z?"roleIds":"userIds"),D=D?D.split(","):[],b={module:this.baseModulePath+"users/PermittedSchedules",args:{title:this._buildTitleText(a),
userIds:D,username:y,iconClass:c,isRole:z?z:!1}};else C=!0;break;case "users/logininfo":rc.session.hasUsersAdminRole()?(c="rcUsersLoginInfoHeaderIcon",b={module:this.baseModulePath+"users/LoginInfo",args:{title:this._buildTitleText(a),userSystem:l,userID:q,ID:v,iconClass:c},requiresContextManager:null===rc.setupWizard||"undefined"===typeof rc.setupWizard}):C=!0;break;case "users/adduser":rc.session.hasUsersAdminRole()?(c="rcUsersAddUsersHeaderIcon",b={module:this.baseModulePath+"users/AddUser",args:{title:this._buildTitleText(a),
userSystem:l,userID:q,iconClass:c},requiresContextManager:!1}):C=!0;break;case "setupfinished":b={module:this.baseModulePath+"SetupFinished",args:{title:this._buildTitleText(a),system:l,iconClass:"rcSitesHeaderIcon"},requiresContextManager:!1};break;case "trendlogworksheet/view":c="mtls"===u.toLowerCase()?"rcTrendlogMultipleIcon":"rcTrendlogSingleIcon";b={module:this.baseModulePath+"worksheets/trendLogs/TrendLogsView",args:{title:this._buildTitleText(a),system:l,device:t,mne:u,mnemonic:t+u,iconClass:c}};
break;case "trendlogworksheet/points":rc.session.hasRole(rc.session.adminRoles.editTrendlogs)?(c=this._isSinglePointTrendlog(u)?"rcTrendlogSingleIcon":"rcTrendlogMultipleIcon",b={module:this.baseModulePath+"worksheets/trendLogs/TrendLogPoints",args:{title:this._buildTitleText(a),system:l,device:t,mne:u,iconClass:c}}):C=!0;break;case "notificationclasses":rc.session.hasRole(rc.session.roles2.notChg,!0)?(c="rcNotificationClassesHeaderIcon",b={module:this.baseModulePath+"worksheets/notificationClasses/NotificationClasses",
args:{title:this._buildTitleText(a),system:l,device:t,mne:u,iconClass:c}}):C=!0;break;case "pointreports":b={module:"webview/reliable/PointsReportWorksheet",args:{title:this._buildTitleText(a,"pointreports",l),system:l,iconClass:"point-reports-header-icon"}};break;case "pointsreport":b={module:"webview/reliable/PointsReport",args:{title:this._buildTitleText(a,"pointsreport",l),system:l,mnemonic:u,iconClass:"point-reports-header-icon"}};break;default:throw new K({name:A.urlErrorTitle,message:A.urlErrorMessage,
suggestion:A.urlErrorAction});}if(C)return d||H.publish("sticky",{message:I.substitute(w.notAuthToViewX,[this._buildTitleText(a)]),type:"error"}),setTimeout(f.hitch(this,function(){var a=rc.session.getAdminRedirect();a===rc.adminUrl?window.history.back():window.location.replace(a);this._loadNext();return null}),1500),null;b.args&&(f.mixin(b.args,{type:a.toLowerCase(),site:k}),r&&f.mixin(b.args,{view:r}))}catch(ka){return console.error(this.declaredClass+" - _hashToWidgetInfo(): could not convert a url hash to a widget configuration obj",
ka,ka.message),this.showError(this.safeError(ka,{name:w.errorPageLoad,message:w.unexpected})),null}return b},_clearContent:function(){this._clearLoadEvents();try{M.widget.clear()}catch(ba){}this._titleConnect&&(this._titleConnect.remove(),this._titleConnect=null);this._setTitle("");if(this.w){this._removeWidgetConnect();try{"destroyRecursive"in this.w?this.w.destroyRecursive():this.w.destroy()}catch(ba){}this.w=null}if(this._bc){try{this._bc.destroyRecursive()}catch(ba){}this._bc=null}if(this.topContent){try{a.destroy(this.topContent)}catch(ba){}this.topContent=
null}if(this.contentContainer){try{a.destroy(this.contentContainer)}catch(ba){}this.contentContainer=null}var b=E(".dijitDialog, .dijitPopup");h.forEach(b,f.hitch(this,function(b){try{if(this._shouldDestroyPopupNode(b)){var c=k.byNode(b);c&&c.destroy&&c.destroy();a.destroy(b);k.remove(b.id)}}catch(ea){}}))},_onWindowFocus:function(){b("f",this._id);this._blurred=!1;this._focusTimer||(this._focusTimer=setTimeout(f.hitch(this,function(){this._focusTimer=null;if(!this._loading)this.onPageFocus()}),200))},
onPageFocus:function(){this.emit("pageFocus",null)},_onWindowBlur:function(){this._blurred=!0;this._focusTimer&&(clearTimeout(this._focusTimer),this._focusTimer=null);this._blurWatch||(this._blurWatch=setInterval(f.hitch(this,function(){var a=parseInt(b("f"),10);this._blurred?a!==this._id&&(clearInterval(this._blurWatch),this._blurWatch=null,this.onPageBlur()):(clearInterval(this._blurWatch),this._blurWatch=null)}),2E3))},onPageBlur:function(){this.emit("pageBlur",null)},_siteName:function(a){var b=
"";this.componentMap.site[a]&&(b=this.componentMap.site[a]);return b},_makeFlyoutContainers:function(){this._makeRightSideFlyoutContainer();this._makeLeftSideFlyoutContainer();this.onMadeTreePane(this._leftSideTreeContainer)},_makeLeftSideFlyoutContainer:function(){this._leftSideTreeContainer=new T({defaultToAdminTree:!0,treePaneFlyout:this.treePaneFlyout,rightSideFlyout:this.rightSideFlyout});this.own(c.after(this._leftSideTreeContainer,"resize",f.hitch(this,function(){this.w&&this.w.resize();this.treePaneFlyout.resize()})),
D(this._leftSideTreeContainer,"loadedAdminTreeData",f.hitch(this,function(a,b){this.adminToolbar.setUserSite(a);this.componentMap=b;this._currentHash!==x()&&this._loadContent();if(null!=this.w){if(this.w.params[this.w.params.type]){var c=this._buildTitleText(this.w.params.type,this.w.params[this.w.params.type]);this._updateContentHeader(c)}"undefined"!==typeof this.w.setupUserToolBar&&this.w.setupUserToolBar();this.w.isSearchable&&this.w.isSearchable()&&this.w.publishSearchable()}})),D(this._leftSideTreeContainer,
"navigationTreeNodeClick",f.hitch(this,this._onNavigationTreeNodeClick)),D(this._leftSideTreeContainer,"adminTreeNodeClick",f.hitch(this,this._onAdminTreeNodeClick)));this.own(this._leftSideTreeContainer);this.container.addChild(this._leftSideTreeContainer);this._leftSideTreeContainer.startup();this._attachPoints.push("_leftSideTreeContainer");var a=V.add(E("#rcSystemNav_splitter")[0],w.ttSliderLeft);this._tooltipIds.push(a)},_onAdminTreeNodeClick:function(a,b,c){this._discardChanges=!1;this._confirm().then(f.hitch(this,
function(){this._savePromptConfirmed=this._discardChanges=!0;this._checkAndStopWizard();if(a.widget){var c=a.widget.toLowerCase();if("device"===c||"system"===c)this.treePaneFlyout.toggle(a);else if(null!==a.access&&!1===a.access)b.expandoNode.click();else if("site"===a.widget.toLowerCase()&&!rc.session.hasRole(rc.session.roles.usersAdmin))b.expandoNode.click();else if(a.hash){var c=a.hash[0],d=window.location.hash;window.location=c;d===window.location.hash&&this._onHashChange(c)}}}))},_onNavigationTreeNodeClick:function(a,
b,c){this._discardChanges=!1;this._confirm().then(f.hitch(this,function(){this._savePromptConfirmed=this._discardChanges=!0;this._checkAndStopWizard();var f="";switch(a.pointType.toUpperCase()){case "HYPERLINK":a.widget&&(f=a.widget);break;case "FOLDER":b.isExpandable&&b.expandoNode.click();return;case "ROOT":f=N.getWindowLocationOrigin()+rc.pathInfo.app+a.name;-1===f.indexOf("/",f.length-1)&&(f+="/");break;default:a.widget&&(f=encodeURI(a.widget))}"site"===a.pointType&&(f=window.location.origin,
f+=rc.pathInfo.rootPath,f+=a.name);c&&d.stop(c);c.ctrlKey?window.open(f,"_blank"):f===window.location.pathname+window.location.hash?this._onHashChange(f):window.location=f}))},showError:function(b){try{try{this._clearLoader(),this._clearContent(),this._setTitle((this.mne+" - "||"")+"Failed to load")}catch(ca){throw ca;}try{this.contentContainer=this._createDefaultContainer();this._bc=new p({style:{width:"100%",height:"100%"}},this.contentContainer,"first");var c=new m({region:"center"});this._bc.addChild(c);
b=this.safeError(b);a.place(this._buildErrorMessage(b),c.containerNode);a.place(this.contentContainer,this.content.containerNode,"first")}catch(ca){throw ca;}}catch(ca){c=a.create("div",{className:"fullsize overlay"},r.body()),b=new K({name:w.unexpectedError,message:w.doubleFail+"\x3cem\x3e"+this.safeError(b).message+"\x3c/em\x3e",suggestion:I.substitute(w.reloadX,[window.location.href])}),a.place(this._buildErrorMessage(b),c)}this._clearLoader();this._loadNext()},_buildErrorMessage:function(b){var c=
a.create("div",{className:"mpwError"}),d="",d=null!==b.name?d+b.name:d+w.error,d=a.create("h2",{innerHTML:d},c);a.create("span",{className:"rcBigWarningIcon"},d,"first");b.message&&a.create("p",{innerHTML:b.message},c);b.suggestion&&a.create("p",{innerHTML:b.suggestion},c);return c},_createDefaultContainer:function(){return a.create("div",{className:"mpwDefaultContent",style:{width:"100%",height:"100%"}})},_createHorizontalDivider:function(){return'\x3cdiv class\x3d"horizontalDivider"\x3e\x3c/div\x3e'},
_resetTimer:function(a){this._timeout&&clearTimeout(this._timeout);this._timeout=setTimeout(f.hitch(this,function(){this._clearLoadEvents();this.showError(new K({name:w.unexpectedError,message:w.appTimeout,suggestion:I.substitute(w.reloadX,[window.location.toString()])}))}),1E3*a)},_connectLoadEvents:function(a){this._titleConnect=D(a,"setTitle",f.hitch(this,this._updateContentHeader));this._widgetConnects.push(this._titleConnect);this._progressWatch=H.subscribe("progress",f.hitch(this,function(a){this._resetTimer(30)}));
this._widgetConnects.push(this._progressWatch);this._errConnect=D(a,"initError",f.hitch(this,function(a){this._clearLoadEvents();this.showError(a)}));this._widgetConnects.push(this._errConnect);this._loadConnect=c.after(a,a.onInitSuccess?"onInitSuccess":a._endUpdate?"_endUpdate":"_render",f.hitch(this,function(){this.startWizard();this._clearLoadEvents();this._clearLoader();V.showing&&V.show();this.container.resize();this.own(c.after(this.container,"resize",f.hitch(this,function(){this.treePaneFlyout.resize()})));
this.onLoad()}));this._widgetConnects.push(this._loadConnect)},_isSinglePointTrendlog:function(a){var b=!0,c=null;null!==(c=/^\d+([a-z]+)*/i.exec(a))&&(b="stl"===c[c.length-1].toLowerCase());return b},_logout:function(){rc.session.logout()},_clearLoadEvents:function(){this._timeout&&clearTimeout(this._timeout);this._progressWatch&&(this._progressWatch.remove(),this._progressWatch=null);this._loadConnect&&(this._loadConnect.remove(),this._loadConnect=null)},_checkAndStopWizard:function(){rc.setupWizard&&
rc.setupWizard.stop()},_onLogout:function(){this._discardChanges=!1;this._confirm().then(f.hitch(this,function(){var a=b("wiz");a&&a in this&&((a=this[a].prototype.cookieName)&&b(a,null,{path:"/",expires:-1}),b("wiz",null,{path:"/",expires:-1}));this._discardChanges=!0;this._logout()}))},_confirm:function(){var a=new t;this.own(a);this.w&&this.w.isDirty&&this.w.isDirty()&&rc.session.getID()&&!this._discardChanges?this._genericConfirmDialog=this.w.createConfirmDialog(a,this._genericConfirmDialog):
a.resolve();return a.promise},_onHashChange:function(a){try{this._discardChanges=!1,!0===this._savePromptConfirmed?(this._savePromptConfirmed=!1,this._doLocationChange()):this._confirm().then(f.hitch(this,this._doLocationChange),f.hitch(this,this._undoLocationChange))}catch(ba){this.showError(ba)}},_doLocationChange:function(){this._discardChanges=!0;this._hashQ.push(x);1<this._hashQ.length||(this.treePaneFlyout.forceHide(),this._leftSideTreeContainer.closeSearch(),this._showLoader(),this._clearContent(),
rc.session.validate().then(f.hitch(this,function(){try{this._loadContent()}catch(U){this.showError(U)}}),f.hitch(this,function(a){rc.session.resetWithSession(a)||(a=this.safeError(a,{name:w.errorPageLoad,message:z[a.status]||w.unexpected}),this.showError(a))})))},_undoLocationChange:function(){this.hashChangeEvent.remove();window.history.back();setTimeout(f.hitch(this,function(){this.hashChangeEvent=this.subscribe("/dojo/hashchange",f.hitch(this,this._onHashChange))}),100)},onLoad:function(){this.emit("load",
null);this._selectTreeNode();this._loadNext();this._discardChanges=!1},_loadNext:function(){this._hashQ.shift();if(this._hashQ.length){var a=this._hashQ.pop();this._hashQ=[];this._onHashChange(a)}},onbeforeunload:function(a){a=a||window.event;var b=w.unsavedWarning;if(this.w&&this.w.isDirty&&this.w.isDirty()&&!this._discardChanges&&rc.session.getID())return a&&(a.returnValue=b),b},_resize:function(){if(this.topContent){var a=this.topContent.clientWidth,a=a-this._contentHeaderIcon.clientWidth;n.set(this._contentHeaderTitle,
"width",a-50+"px")}},_removeWidgetConnect:function(){h.forEach(this._widgetConnects,f.hitch(this,function(a){a&&(a.remove(),a=null)}));null!==this._resultsFetchedHandle&&(this._resultsFetchedHandle.remove(),this._resultsFetchedHandle=null);this._widgetConnects=[]},_selectTreeNode:function(){try{var a=this._leftSideTreeContainer.adminTree.model.store.query(f.hitch(this,function(a){return a.widget&&a.widget.toLowerCase()===this.w.params.type.toLowerCase()}))}catch(ba){return}1===a.length?this._leftSideTreeContainer.adminTree.set("selectedItem",
a[0]):1<a.length&&(a=a.filter(f.hitch(this,function(a){var b=-1;if("navgroups reporttemplates systems schedules trees users".split(" ").includes(this.w.params.type))return b=this.w.params.type,a.widget===b&&a.site===Number(this.w.params.site);b="users/logininfo"===this.w.params.type?this.w.params.userID:Number(this.w.params[this.w.params.type]);return a.widgetId===b&&a.site===Number(this.w.params.site)}))[0],this._leftSideTreeContainer.adminTree.set("selectedItem",a))},destroy:function(){null!==this._servicePoll&&
clearTimeout(this._servicePoll);this._removeWidgetConnect();this._destroyLoaderAnimation();h.forEach(this._pconnects,D.remove);rc.setupWizard&&rc.setupWizard.stop();h.forEach(this._tooltipIds,function(a){V.remove(a)},this);this._clearContent();this._removeUserTree();this.inherited(arguments)},_getHash:function(a){return a.toLowerCase().split("?")[0]},_loadChangeApproval:function(a){return this.getEnforceChangeApproval(a).then(f.hitch(this,function(a){200===a.errStatus&&(rc.session.enforceChangeApproval=
a.changeApproval,this.adminToolbar.toggleChangeApprovalPasswordItem(rc.session.enforceChangeApproval))}),f.hitch(this,function(){}))},validateUserAndLoad:function(a,b){var c=this._getHashQuery().site;rc.xhr.request({path:"CheckUserBelongsToSite",type:"rest",method:"GET",siteId:c}).then(f.hitch(this,function(c){null!==c.data&&void 0!==c.data&&(200===c.data.errStatus?this.loadPageContent(a):504===c.data.errStatus&&this.showError(new K({name:w.permissionDenied,message:I.substitute(w.notAuthToViewX,[b]),
suggestion:""})))}),f.hitch(this,function(a){this.showError(a);return a}))},_isAdminUser:function(){return rc.session.isAdminUser()},_loadNavigationTree:function(){this._leftSideTreeContainer&&"function"===typeof this._leftSideTreeContainer._loadNavigationTree&&this._leftSideTreeContainer._loadNavigationTree()},loadWidget:function(a,b){H.publish("unsearchableWidget",null);return this._loadChangeApproval(a.args.site).always(f.hitch(this,function(){G(f.hitch(this,this.domIsReady,a,b))}))},domIsReady:function(d,
h){this._buildContentTop();this.contentContainer=a.create("div",{style:{width:"100%",height:"100%"}},this.content.containerNode,"last");this._resetTimer(30);if("webview/admin/users/LoginInfo"===d.module&&""!==b){var k=C.queryToObject(x()).userID;b("user")===k&&rc.setupWizard&&rc.setupWizard.stop()}this.w=new (!1!==d.requiresContextManager?g([Q,h]):g([h]))(d.args,this.contentContainer,"first",this.adminToolbar,this.topContent);this._widgetConnects.push(D(this.w,"save",f.hitch(this,this._loadNavigationTree)));
this._widgetConnects.push(c.after(this.w,"resize",f.hitch(this,this._resize)));this._updateContentHeader(this.w.params.title);this._connectLoadEvents(this.w);null!==this._genericConfirmDialog&&(this._genericConfirmDialog.destroy(),this._genericConfirmDialog=null)},getEnforceChangeApproval:function(a){a=F.get("ChangeApproval",{preventCache:!0,handleAs:"json",query:{siteId:a}});this.own(a);return a},loadPageContent:function(a){require([a.module],f.hitch(this,this.loadWidget,a))},validateQuery:function(a,
b){var c="",d=new K({name:A.urlErrorTitle,message:A.urlErrorMessage,suggestion:A.urlErrorAction});switch(a){case "site":for(c in b)if("site"!==c&&"view"!==c)throw d;break;case "navgroups":case "systems":case "addsystem":case "trees":case "schedules":case "remotealarmnotifications":case "reporttemplates":for(c in b)if("site"!==c)throw d;break;case "navgroup":for(c in b)if("navgroup"!==c&&"site"!==c&&"view"!==c)throw d;break;case "system":case "addarchive":for(c in b)if("system"!==c&&"site"!==c)throw d;
break;case "tree":for(c in b)if("site"!==c&&"tree"!==c)throw d;break;case "schedule":for(c in b)if("schedule"!==c&&"site"!==c&&"view"!==c)throw d;break;case "reporttemplate":for(c in b)if("reporttemplate"!==c.toLowerCase()&&"site"!==c)throw d;break;case "roleslist":for(c in b)if("site"!==c.toLowerCase())throw d;break;case "rolepermissions":case "rolelogininfo":for(c in b)if("roleid"!==c.toLowerCase()&&"site"!==c)throw d;break;case "users/permissions":for(c in b)if("userID"!==c&&"site"!==c&&"system"!==
c&&"ID"!==c)throw d;break;case "users/permittedschedules":for(c in b)if("userIds"!==c&&"site"!==c&&"username"!==c&&"isRole"!==c)throw d;break;case "users":case "users/adduser":case "users/logininfo":for(c in b)if("userID"!==c&&"site"!==c&&"system"!==c&&"ID"!==c)throw d;break;case "trendlogworksheet/view":case "trendlogworksheet/points":case "notificationclasses":case "pointsreport":case "programsworksheet":case "program":for(c in b)if("site"!==c&&"system"!==c&&"device"!==c&&"mne"!==c&&"view"!==c)throw d;
break;case "panelfile":for(c in b)if("site"!==c&&"system"!==c&&"device"!==c)throw d;break;case "tentantreport":for(c in b)if("scheduleId"!==c&&"forBlock"!==c)throw d;}},_shouldDestroyPopupNode:function(a){return!(V.showing&&u.contains(a,"dijitTooltipDialogPopup"))&&!u.contains(a,"userToolBarPopup")&&!u.contains(a,"dijitMenuItemPopup")&&!u.contains(a,"user-tool-bar-submenuPopup")&&!u.contains(a,"whats-new-dialog")}})});
//# sourceMappingURL=index.js.map